var Io=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function vS(R){return R&&R.__esModule&&Object.prototype.hasOwnProperty.call(R,"default")?R.default:R}function r2(R){if(R.__esModule)return R;var G=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(R).forEach(function(e){var z=Object.getOwnPropertyDescriptor(R,e);Object.defineProperty(G,e,z.get?z:{enumerable:!0,get:function(){return R[e]}})}),G}function S0(R){throw new Error('Could not dynamically require "'+R+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var zn={exports:{}},eo={};/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var n2=Object.getOwnPropertySymbols,pS=Object.prototype.hasOwnProperty,dS=Object.prototype.propertyIsEnumerable;function gS(R){if(R==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(R)}function mS(){try{if(!Object.assign)return!1;var R=new String("abc");if(R[5]="de",Object.getOwnPropertyNames(R)[0]==="5")return!1;for(var G={},e=0;e<10;e++)G["_"+String.fromCharCode(e)]=e;var z=Object.getOwnPropertyNames(G).map(function(u){return G[u]});if(z.join("")!=="0123456789")return!1;var N={};return"abcdefghijklmnopqrst".split("").forEach(function(u){N[u]=u}),Object.keys(Object.assign({},N)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}var a2=mS()?Object.assign:function(R,G){for(var e,z=gS(R),N,u=1;u<arguments.length;u++){e=Object(arguments[u]);for(var s in e)pS.call(e,s)&&(z[s]=e[s]);if(n2){N=n2(e);for(var m=0;m<N.length;m++)dS.call(e,N[m])&&(z[N[m]]=e[N[m]])}}return z};/** @license React v17.0.2
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gm=a2,_v=60103,i2=60106;eo.Fragment=60107;eo.StrictMode=60108;eo.Profiler=60114;var o2=60109,s2=60110,l2=60112;eo.Suspense=60113;var u2=60115,f2=60116;if(typeof Symbol=="function"&&Symbol.for){var Ff=Symbol.for;_v=Ff("react.element"),i2=Ff("react.portal"),eo.Fragment=Ff("react.fragment"),eo.StrictMode=Ff("react.strict_mode"),eo.Profiler=Ff("react.profiler"),o2=Ff("react.provider"),s2=Ff("react.context"),l2=Ff("react.forward_ref"),eo.Suspense=Ff("react.suspense"),u2=Ff("react.memo"),f2=Ff("react.lazy")}var c2=typeof Symbol=="function"&&Symbol.iterator;function yS(R){return R===null||typeof R!="object"?null:(R=c2&&R[c2]||R["@@iterator"],typeof R=="function"?R:null)}function Cp(R){for(var G="https://reactjs.org/docs/error-decoder.html?invariant="+R,e=1;e<arguments.length;e++)G+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+R+"; visit "+G+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v2={};function wv(R,G,e){this.props=R,this.context=G,this.refs=v2,this.updater=e||h2}wv.prototype.isReactComponent={};wv.prototype.setState=function(R,G){if(typeof R!="object"&&typeof R!="function"&&R!=null)throw Error(Cp(85));this.updater.enqueueSetState(this,R,G,"setState")};wv.prototype.forceUpdate=function(R){this.updater.enqueueForceUpdate(this,R,"forceUpdate")};function p2(){}p2.prototype=wv.prototype;function Wm(R,G,e){this.props=R,this.context=G,this.refs=v2,this.updater=e||h2}var Ym=Wm.prototype=new p2;Ym.constructor=Wm;Gm(Ym,wv.prototype);Ym.isPureReactComponent=!0;var jm={current:null},d2=Object.prototype.hasOwnProperty,g2={key:!0,ref:!0,__self:!0,__source:!0};function m2(R,G,e){var z,N={},u=null,s=null;if(G!=null)for(z in G.ref!==void 0&&(s=G.ref),G.key!==void 0&&(u=""+G.key),G)d2.call(G,z)&&!g2.hasOwnProperty(z)&&(N[z]=G[z]);var m=arguments.length-2;if(m===1)N.children=e;else if(1<m){for(var x=Array(m),t=0;t<m;t++)x[t]=arguments[t+2];N.children=x}if(R&&R.defaultProps)for(z in m=R.defaultProps,m)N[z]===void 0&&(N[z]=m[z]);return{$$typeof:_v,type:R,key:u,ref:s,props:N,_owner:jm.current}}function xS(R,G){return{$$typeof:_v,type:R.type,key:G,ref:R.ref,props:R.props,_owner:R._owner}}function Xm(R){return typeof R=="object"&&R!==null&&R.$$typeof===_v}function bS(R){var G={"=":"=0",":":"=2"};return"$"+R.replace(/[=:]/g,function(e){return G[e]})}var y2=/\/+/g;function Zm(R,G){return typeof R=="object"&&R!==null&&R.key!=null?bS(""+R.key):G.toString(36)}function k0(R,G,e,z,N){var u=typeof R;(u==="undefined"||u==="boolean")&&(R=null);var s=!1;if(R===null)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(R.$$typeof){case _v:case i2:s=!0}}if(s)return s=R,N=N(s),R=z===""?"."+Zm(s,0):z,Array.isArray(N)?(e="",R!=null&&(e=R.replace(y2,"$&/")+"/"),k0(N,G,e,"",function(t){return t})):N!=null&&(Xm(N)&&(N=xS(N,e+(!N.key||s&&s.key===N.key?"":(""+N.key).replace(y2,"$&/")+"/")+R)),G.push(N)),1;if(s=0,z=z===""?".":z+":",Array.isArray(R))for(var m=0;m<R.length;m++){u=R[m];var x=z+Zm(u,m);s+=k0(u,G,e,x,N)}else if(x=yS(R),typeof x=="function")for(R=x.call(R),m=0;!(u=R.next()).done;)u=u.value,x=z+Zm(u,m++),s+=k0(u,G,e,x,N);else if(u==="object")throw G=""+R,Error(Cp(31,G==="[object Object]"?"object with keys {"+Object.keys(R).join(", ")+"}":G));return s}function E0(R,G,e){if(R==null)return R;var z=[],N=0;return k0(R,z,"","",function(u){return G.call(e,u,N++)}),z}function _S(R){if(R._status===-1){var G=R._result;G=G(),R._status=0,R._result=G,G.then(function(e){R._status===0&&(e=e.default,R._status=1,R._result=e)},function(e){R._status===0&&(R._status=2,R._result=e)})}if(R._status===1)return R._result;throw R._result}var x2={current:null};function Tc(){var R=x2.current;if(R===null)throw Error(Cp(321));return R}var wS={ReactCurrentDispatcher:x2,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:jm,IsSomeRendererActing:{current:!1},assign:Gm};eo.Children={map:E0,forEach:function(R,G,e){E0(R,function(){G.apply(this,arguments)},e)},count:function(R){var G=0;return E0(R,function(){G++}),G},toArray:function(R){return E0(R,function(G){return G})||[]},only:function(R){if(!Xm(R))throw Error(Cp(143));return R}};eo.Component=wv;eo.PureComponent=Wm;eo.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;eo.cloneElement=function(R,G,e){if(R==null)throw Error(Cp(267,R));var z=Gm({},R.props),N=R.key,u=R.ref,s=R._owner;if(G!=null){if(G.ref!==void 0&&(u=G.ref,s=jm.current),G.key!==void 0&&(N=""+G.key),R.type&&R.type.defaultProps)var m=R.type.defaultProps;for(x in G)d2.call(G,x)&&!g2.hasOwnProperty(x)&&(z[x]=G[x]===void 0&&m!==void 0?m[x]:G[x])}var x=arguments.length-2;if(x===1)z.children=e;else if(1<x){m=Array(x);for(var t=0;t<x;t++)m[t]=arguments[t+2];z.children=m}return{$$typeof:_v,type:R.type,key:N,ref:u,props:z,_owner:s}};eo.createContext=function(R,G){return G===void 0&&(G=null),R={$$typeof:s2,_calculateChangedBits:G,_currentValue:R,_currentValue2:R,_threadCount:0,Provider:null,Consumer:null},R.Provider={$$typeof:o2,_context:R},R.Consumer=R};eo.createElement=m2;eo.createFactory=function(R){var G=m2.bind(null,R);return G.type=R,G};eo.createRef=function(){return{current:null}};eo.forwardRef=function(R){return{$$typeof:l2,render:R}};eo.isValidElement=Xm;eo.lazy=function(R){return{$$typeof:f2,_payload:{_status:-1,_result:R},_init:_S}};eo.memo=function(R,G){return{$$typeof:u2,type:R,compare:G===void 0?null:G}};eo.useCallback=function(R,G){return Tc().useCallback(R,G)};eo.useContext=function(R,G){return Tc().useContext(R,G)};eo.useDebugValue=function(){};eo.useEffect=function(R,G){return Tc().useEffect(R,G)};eo.useImperativeHandle=function(R,G,e){return Tc().useImperativeHandle(R,G,e)};eo.useLayoutEffect=function(R,G){return Tc().useLayoutEffect(R,G)};eo.useMemo=function(R,G){return Tc().useMemo(R,G)};eo.useReducer=function(R,G,e){return Tc().useReducer(R,G,e)};eo.useRef=function(R){return Tc().useRef(R)};eo.useState=function(R){return Tc().useState(R)};eo.version="17.0.2";zn.exports=eo;var Tv=zn.exports,Km={exports:{}},lf={},b2={exports:{}},_2={};/** @license React v0.20.2
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(R){var G,e,z,N;if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;R.unstable_now=function(){return u.now()}}else{var s=Date,m=s.now();R.unstable_now=function(){return s.now()-m}}if(typeof window=="undefined"||typeof MessageChannel!="function"){var x=null,t=null,i=function(){if(x!==null)try{var D=R.unstable_now();x(!0,D),x=null}catch(U){throw setTimeout(i,0),U}};G=function(D){x!==null?setTimeout(G,0,D):(x=D,setTimeout(i,0))},e=function(D,U){t=setTimeout(D,U)},z=function(){clearTimeout(t)},R.unstable_shouldYield=function(){return!1},N=R.unstable_forceFrameRate=function(){}}else{var a=window.setTimeout,r=window.clearTimeout;if(typeof console!="undefined"){var n=window.cancelAnimationFrame;typeof window.requestAnimationFrame!="function"&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),typeof n!="function"&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var f=!1,l=null,o=-1,c=5,h=0;R.unstable_shouldYield=function(){return R.unstable_now()>=h},N=function(){},R.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):c=0<D?Math.floor(1e3/D):5};var d=new MessageChannel,p=d.port2;d.port1.onmessage=function(){if(l!==null){var D=R.unstable_now();h=D+c;try{l(!0,D)?p.postMessage(null):(f=!1,l=null)}catch(U){throw p.postMessage(null),U}}else f=!1},G=function(D){l=D,f||(f=!0,p.postMessage(null))},e=function(D,U){o=a(function(){D(R.unstable_now())},U)},z=function(){r(o),o=-1}}function y(D,U){var B=D.length;D.push(U);e:for(;;){var j=B-1>>>1,Z=D[j];if(Z!==void 0&&0<b(Z,U))D[j]=U,D[B]=Z,B=j;else break e}}function g(D){return D=D[0],D===void 0?null:D}function A(D){var U=D[0];if(U!==void 0){var B=D.pop();if(B!==U){D[0]=B;e:for(var j=0,Z=D.length;j<Z;){var ee=2*(j+1)-1,q=D[ee],W=ee+1,J=D[W];if(q!==void 0&&0>b(q,B))J!==void 0&&0>b(J,q)?(D[j]=J,D[W]=B,j=W):(D[j]=q,D[ee]=B,j=ee);else if(J!==void 0&&0>b(J,B))D[j]=J,D[W]=B,j=W;else break e}}return U}return null}function b(D,U){var B=D.sortIndex-U.sortIndex;return B!==0?B:D.id-U.id}var M=[],_=[],T=1,w=null,v=3,L=!1,S=!1,k=!1;function P(D){for(var U=g(_);U!==null;){if(U.callback===null)A(_);else if(U.startTime<=D)A(_),U.sortIndex=U.expirationTime,y(M,U);else break;U=g(_)}}function O(D){if(k=!1,P(D),!S)if(g(M)!==null)S=!0,G(F);else{var U=g(_);U!==null&&e(O,U.startTime-D)}}function F(D,U){S=!1,k&&(k=!1,z()),L=!0;var B=v;try{for(P(U),w=g(M);w!==null&&(!(w.expirationTime>U)||D&&!R.unstable_shouldYield());){var j=w.callback;if(typeof j=="function"){w.callback=null,v=w.priorityLevel;var Z=j(w.expirationTime<=U);U=R.unstable_now(),typeof Z=="function"?w.callback=Z:w===g(M)&&A(M),P(U)}else A(M);w=g(M)}if(w!==null)var ee=!0;else{var q=g(_);q!==null&&e(O,q.startTime-U),ee=!1}return ee}finally{w=null,v=B,L=!1}}var I=N;R.unstable_IdlePriority=5,R.unstable_ImmediatePriority=1,R.unstable_LowPriority=4,R.unstable_NormalPriority=3,R.unstable_Profiling=null,R.unstable_UserBlockingPriority=2,R.unstable_cancelCallback=function(D){D.callback=null},R.unstable_continueExecution=function(){S||L||(S=!0,G(F))},R.unstable_getCurrentPriorityLevel=function(){return v},R.unstable_getFirstCallbackNode=function(){return g(M)},R.unstable_next=function(D){switch(v){case 1:case 2:case 3:var U=3;break;default:U=v}var B=v;v=U;try{return D()}finally{v=B}},R.unstable_pauseExecution=function(){},R.unstable_requestPaint=I,R.unstable_runWithPriority=function(D,U){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var B=v;v=D;try{return U()}finally{v=B}},R.unstable_scheduleCallback=function(D,U,B){var j=R.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?j+B:j):B=j,D){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=B+Z,D={id:T++,callback:U,priorityLevel:D,startTime:B,expirationTime:Z,sortIndex:-1},B>j?(D.sortIndex=B,y(_,D),g(M)===null&&D===g(_)&&(k?z():k=!0,e(O,B-j))):(D.sortIndex=Z,y(M,D),S||L||(S=!0,G(F))),D},R.unstable_wrapCallback=function(D){var U=v;return function(){var B=v;v=U;try{return D.apply(this,arguments)}finally{v=B}}}})(_2);b2.exports=_2;/** @license React v17.0.2
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C0=zn.exports,Ko=a2,rl=b2.exports;function Pa(R){for(var G="https://reactjs.org/docs/error-decoder.html?invariant="+R,e=1;e<arguments.length;e++)G+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+R+"; visit "+G+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!C0)throw Error(Pa(227));var w2=new Set,Lp={};function Ch(R,G){Av(R,G),Av(R+"Capture",G)}function Av(R,G){for(Lp[R]=G,R=0;R<G.length;R++)w2.add(G[R])}var Ac=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),TS=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T2=Object.prototype.hasOwnProperty,A2={},M2={};function AS(R){return T2.call(M2,R)?!0:T2.call(A2,R)?!1:TS.test(R)?M2[R]=!0:(A2[R]=!0,!1)}function MS(R,G,e,z){if(e!==null&&e.type===0)return!1;switch(typeof G){case"function":case"symbol":return!0;case"boolean":return z?!1:e!==null?!e.acceptsBooleans:(R=R.toLowerCase().slice(0,5),R!=="data-"&&R!=="aria-");default:return!1}}function SS(R,G,e,z){if(G===null||typeof G=="undefined"||MS(R,G,e,z))return!0;if(z)return!1;if(e!==null)switch(e.type){case 3:return!G;case 4:return G===!1;case 5:return isNaN(G);case 6:return isNaN(G)||1>G}return!1}function eu(R,G,e,z,N,u,s){this.acceptsBooleans=G===2||G===3||G===4,this.attributeName=z,this.attributeNamespace=N,this.mustUseProperty=e,this.propertyName=R,this.type=G,this.sanitizeURL=u,this.removeEmptyString=s}var yl={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(R){yl[R]=new eu(R,0,!1,R,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(R){var G=R[0];yl[G]=new eu(G,1,!1,R[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(R){yl[R]=new eu(R,2,!1,R.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(R){yl[R]=new eu(R,2,!1,R,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(R){yl[R]=new eu(R,3,!1,R.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(R){yl[R]=new eu(R,3,!0,R,null,!1,!1)});["capture","download"].forEach(function(R){yl[R]=new eu(R,4,!1,R,null,!1,!1)});["cols","rows","size","span"].forEach(function(R){yl[R]=new eu(R,6,!1,R,null,!1,!1)});["rowSpan","start"].forEach(function(R){yl[R]=new eu(R,5,!1,R.toLowerCase(),null,!1,!1)});var Jm=/[\-:]([a-z])/g;function Qm(R){return R[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(R){var G=R.replace(Jm,Qm);yl[G]=new eu(G,1,!1,R,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(R){var G=R.replace(Jm,Qm);yl[G]=new eu(G,1,!1,R,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(R){var G=R.replace(Jm,Qm);yl[G]=new eu(G,1,!1,R,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(R){yl[R]=new eu(R,1,!1,R.toLowerCase(),null,!1,!1)});yl.xlinkHref=new eu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(R){yl[R]=new eu(R,1,!1,R.toLowerCase(),null,!0,!0)});function $m(R,G,e,z){var N=yl.hasOwnProperty(G)?yl[G]:null,u=N!==null?N.type===0:z?!1:!(!(2<G.length)||G[0]!=="o"&&G[0]!=="O"||G[1]!=="n"&&G[1]!=="N");u||(SS(G,e,N,z)&&(e=null),z||N===null?AS(G)&&(e===null?R.removeAttribute(G):R.setAttribute(G,""+e)):N.mustUseProperty?R[N.propertyName]=e===null?N.type===3?!1:"":e:(G=N.attributeName,z=N.attributeNamespace,e===null?R.removeAttribute(G):(N=N.type,e=N===3||N===4&&e===!0?"":""+e,z?R.setAttributeNS(z,G,e):R.setAttribute(G,e))))}var Lh=C0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Pp=60103,Ph=60106,Yc=60107,qm=60108,Rp=60114,ey=60109,ty=60110,L0=60112,Dp=60113,P0=60120,R0=60115,ry=60116,ny=60121,ay=60128,S2=60129,iy=60130,oy=60131;if(typeof Symbol=="function"&&Symbol.for){var nl=Symbol.for;Pp=nl("react.element"),Ph=nl("react.portal"),Yc=nl("react.fragment"),qm=nl("react.strict_mode"),Rp=nl("react.profiler"),ey=nl("react.provider"),ty=nl("react.context"),L0=nl("react.forward_ref"),Dp=nl("react.suspense"),P0=nl("react.suspense_list"),R0=nl("react.memo"),ry=nl("react.lazy"),ny=nl("react.block"),nl("react.scope"),ay=nl("react.opaque.id"),S2=nl("react.debug_trace_mode"),iy=nl("react.offscreen"),oy=nl("react.legacy_hidden")}var k2=typeof Symbol=="function"&&Symbol.iterator;function Ip(R){return R===null||typeof R!="object"?null:(R=k2&&R[k2]||R["@@iterator"],typeof R=="function"?R:null)}var sy;function zp(R){if(sy===void 0)try{throw Error()}catch(e){var G=e.stack.trim().match(/\n( *(at )?)/);sy=G&&G[1]||""}return`
`+sy+R}var ly=!1;function D0(R,G){if(!R||ly)return"";ly=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(G)if(G=function(){throw Error()},Object.defineProperty(G.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(G,[])}catch(x){var z=x}Reflect.construct(R,[],G)}else{try{G.call()}catch(x){z=x}R.call(G.prototype)}else{try{throw Error()}catch(x){z=x}R()}}catch(x){if(x&&z&&typeof x.stack=="string"){for(var N=x.stack.split(`
`),u=z.stack.split(`
`),s=N.length-1,m=u.length-1;1<=s&&0<=m&&N[s]!==u[m];)m--;for(;1<=s&&0<=m;s--,m--)if(N[s]!==u[m]){if(s!==1||m!==1)do if(s--,m--,0>m||N[s]!==u[m])return`
`+N[s].replace(" at new "," at ");while(1<=s&&0<=m);break}}}finally{ly=!1,Error.prepareStackTrace=e}return(R=R?R.displayName||R.name:"")?zp(R):""}function kS(R){switch(R.tag){case 5:return zp(R.type);case 16:return zp("Lazy");case 13:return zp("Suspense");case 19:return zp("SuspenseList");case 0:case 2:case 15:return R=D0(R.type,!1),R;case 11:return R=D0(R.type.render,!1),R;case 22:return R=D0(R.type._render,!1),R;case 1:return R=D0(R.type,!0),R;default:return""}}function Mv(R){if(R==null)return null;if(typeof R=="function")return R.displayName||R.name||null;if(typeof R=="string")return R;switch(R){case Yc:return"Fragment";case Ph:return"Portal";case Rp:return"Profiler";case qm:return"StrictMode";case Dp:return"Suspense";case P0:return"SuspenseList"}if(typeof R=="object")switch(R.$$typeof){case ty:return(R.displayName||"Context")+".Consumer";case ey:return(R._context.displayName||"Context")+".Provider";case L0:var G=R.render;return G=G.displayName||G.name||"",R.displayName||(G!==""?"ForwardRef("+G+")":"ForwardRef");case R0:return Mv(R.type);case ny:return Mv(R._render);case ry:G=R._payload,R=R._init;try{return Mv(R(G))}catch{}}return null}function jc(R){switch(typeof R){case"boolean":case"number":case"object":case"string":case"undefined":return R;default:return""}}function E2(R){var G=R.type;return(R=R.nodeName)&&R.toLowerCase()==="input"&&(G==="checkbox"||G==="radio")}function ES(R){var G=E2(R)?"checked":"value",e=Object.getOwnPropertyDescriptor(R.constructor.prototype,G),z=""+R[G];if(!R.hasOwnProperty(G)&&typeof e!="undefined"&&typeof e.get=="function"&&typeof e.set=="function"){var N=e.get,u=e.set;return Object.defineProperty(R,G,{configurable:!0,get:function(){return N.call(this)},set:function(s){z=""+s,u.call(this,s)}}),Object.defineProperty(R,G,{enumerable:e.enumerable}),{getValue:function(){return z},setValue:function(s){z=""+s},stopTracking:function(){R._valueTracker=null,delete R[G]}}}}function I0(R){R._valueTracker||(R._valueTracker=ES(R))}function C2(R){if(!R)return!1;var G=R._valueTracker;if(!G)return!0;var e=G.getValue(),z="";return R&&(z=E2(R)?R.checked?"true":"false":R.value),R=z,R!==e?(G.setValue(R),!0):!1}function z0(R){if(R=R||(typeof document!="undefined"?document:void 0),typeof R=="undefined")return null;try{return R.activeElement||R.body}catch{return R.body}}function uy(R,G){var e=G.checked;return Ko({},G,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:e!=null?e:R._wrapperState.initialChecked})}function L2(R,G){var e=G.defaultValue==null?"":G.defaultValue,z=G.checked!=null?G.checked:G.defaultChecked;e=jc(G.value!=null?G.value:e),R._wrapperState={initialChecked:z,initialValue:e,controlled:G.type==="checkbox"||G.type==="radio"?G.checked!=null:G.value!=null}}function P2(R,G){G=G.checked,G!=null&&$m(R,"checked",G,!1)}function fy(R,G){P2(R,G);var e=jc(G.value),z=G.type;if(e!=null)z==="number"?(e===0&&R.value===""||R.value!=e)&&(R.value=""+e):R.value!==""+e&&(R.value=""+e);else if(z==="submit"||z==="reset"){R.removeAttribute("value");return}G.hasOwnProperty("value")?cy(R,G.type,e):G.hasOwnProperty("defaultValue")&&cy(R,G.type,jc(G.defaultValue)),G.checked==null&&G.defaultChecked!=null&&(R.defaultChecked=!!G.defaultChecked)}function R2(R,G,e){if(G.hasOwnProperty("value")||G.hasOwnProperty("defaultValue")){var z=G.type;if(!(z!=="submit"&&z!=="reset"||G.value!==void 0&&G.value!==null))return;G=""+R._wrapperState.initialValue,e||G===R.value||(R.value=G),R.defaultValue=G}e=R.name,e!==""&&(R.name=""),R.defaultChecked=!!R._wrapperState.initialChecked,e!==""&&(R.name=e)}function cy(R,G,e){(G!=="number"||z0(R.ownerDocument)!==R)&&(e==null?R.defaultValue=""+R._wrapperState.initialValue:R.defaultValue!==""+e&&(R.defaultValue=""+e))}function CS(R){var G="";return C0.Children.forEach(R,function(e){e!=null&&(G+=e)}),G}function hy(R,G){return R=Ko({children:void 0},G),(G=CS(G.children))&&(R.children=G),R}function Sv(R,G,e,z){if(R=R.options,G){G={};for(var N=0;N<e.length;N++)G["$"+e[N]]=!0;for(e=0;e<R.length;e++)N=G.hasOwnProperty("$"+R[e].value),R[e].selected!==N&&(R[e].selected=N),N&&z&&(R[e].defaultSelected=!0)}else{for(e=""+jc(e),G=null,N=0;N<R.length;N++){if(R[N].value===e){R[N].selected=!0,z&&(R[N].defaultSelected=!0);return}G!==null||R[N].disabled||(G=R[N])}G!==null&&(G.selected=!0)}}function vy(R,G){if(G.dangerouslySetInnerHTML!=null)throw Error(Pa(91));return Ko({},G,{value:void 0,defaultValue:void 0,children:""+R._wrapperState.initialValue})}function D2(R,G){var e=G.value;if(e==null){if(e=G.children,G=G.defaultValue,e!=null){if(G!=null)throw Error(Pa(92));if(Array.isArray(e)){if(!(1>=e.length))throw Error(Pa(93));e=e[0]}G=e}G==null&&(G=""),e=G}R._wrapperState={initialValue:jc(e)}}function I2(R,G){var e=jc(G.value),z=jc(G.defaultValue);e!=null&&(e=""+e,e!==R.value&&(R.value=e),G.defaultValue==null&&R.defaultValue!==e&&(R.defaultValue=e)),z!=null&&(R.defaultValue=""+z)}function z2(R){var G=R.textContent;G===R._wrapperState.initialValue&&G!==""&&G!==null&&(R.value=G)}var py={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function F2(R){switch(R){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dy(R,G){return R==null||R==="http://www.w3.org/1999/xhtml"?F2(G):R==="http://www.w3.org/2000/svg"&&G==="foreignObject"?"http://www.w3.org/1999/xhtml":R}var F0,O2=function(R){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(G,e,z,N){MSApp.execUnsafeLocalFunction(function(){return R(G,e,z,N)})}:R}(function(R,G){if(R.namespaceURI!==py.svg||"innerHTML"in R)R.innerHTML=G;else{for(F0=F0||document.createElement("div"),F0.innerHTML="<svg>"+G.valueOf().toString()+"</svg>",G=F0.firstChild;R.firstChild;)R.removeChild(R.firstChild);for(;G.firstChild;)R.appendChild(G.firstChild)}});function Fp(R,G){if(G){var e=R.firstChild;if(e&&e===R.lastChild&&e.nodeType===3){e.nodeValue=G;return}}R.textContent=G}var Op={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LS=["Webkit","ms","Moz","O"];Object.keys(Op).forEach(function(R){LS.forEach(function(G){G=G+R.charAt(0).toUpperCase()+R.substring(1),Op[G]=Op[R]})});function N2(R,G,e){return G==null||typeof G=="boolean"||G===""?"":e||typeof G!="number"||G===0||Op.hasOwnProperty(R)&&Op[R]?(""+G).trim():G+"px"}function B2(R,G){R=R.style;for(var e in G)if(G.hasOwnProperty(e)){var z=e.indexOf("--")===0,N=N2(e,G[e],z);e==="float"&&(e="cssFloat"),z?R.setProperty(e,N):R[e]=N}}var PS=Ko({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gy(R,G){if(G){if(PS[R]&&(G.children!=null||G.dangerouslySetInnerHTML!=null))throw Error(Pa(137,R));if(G.dangerouslySetInnerHTML!=null){if(G.children!=null)throw Error(Pa(60));if(!(typeof G.dangerouslySetInnerHTML=="object"&&"__html"in G.dangerouslySetInnerHTML))throw Error(Pa(61))}if(G.style!=null&&typeof G.style!="object")throw Error(Pa(62))}}function my(R,G){if(R.indexOf("-")===-1)return typeof G.is=="string";switch(R){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function yy(R){return R=R.target||R.srcElement||window,R.correspondingUseElement&&(R=R.correspondingUseElement),R.nodeType===3?R.parentNode:R}var xy=null,kv=null,Ev=null;function U2(R){if(R=rd(R)){if(typeof xy!="function")throw Error(Pa(280));var G=R.stateNode;G&&(G=eg(G),xy(R.stateNode,R.type,G))}}function V2(R){kv?Ev?Ev.push(R):Ev=[R]:kv=R}function H2(){if(kv){var R=kv,G=Ev;if(Ev=kv=null,U2(R),G)for(R=0;R<G.length;R++)U2(G[R])}}function by(R,G){return R(G)}function G2(R,G,e,z,N){return R(G,e,z,N)}function _y(){}var W2=by,Rh=!1,wy=!1;function Ty(){(kv!==null||Ev!==null)&&(_y(),H2())}function RS(R,G,e){if(wy)return R(G,e);wy=!0;try{return W2(R,G,e)}finally{wy=!1,Ty()}}function Np(R,G){var e=R.stateNode;if(e===null)return null;var z=eg(e);if(z===null)return null;e=z[G];e:switch(G){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(z=!z.disabled)||(R=R.type,z=!(R==="button"||R==="input"||R==="select"||R==="textarea")),R=!z;break e;default:R=!1}if(R)return null;if(e&&typeof e!="function")throw Error(Pa(231,G,typeof e));return e}var Ay=!1;if(Ac)try{var Bp={};Object.defineProperty(Bp,"passive",{get:function(){Ay=!0}}),window.addEventListener("test",Bp,Bp),window.removeEventListener("test",Bp,Bp)}catch{Ay=!1}function DS(R,G,e,z,N,u,s,m,x){var t=Array.prototype.slice.call(arguments,3);try{G.apply(e,t)}catch(i){this.onError(i)}}var Up=!1,O0=null,N0=!1,My=null,IS={onError:function(R){Up=!0,O0=R}};function zS(R,G,e,z,N,u,s,m,x){Up=!1,O0=null,DS.apply(IS,arguments)}function FS(R,G,e,z,N,u,s,m,x){if(zS.apply(this,arguments),Up){if(Up){var t=O0;Up=!1,O0=null}else throw Error(Pa(198));N0||(N0=!0,My=t)}}function Dh(R){var G=R,e=R;if(R.alternate)for(;G.return;)G=G.return;else{R=G;do G=R,(G.flags&1026)!=0&&(e=G.return),R=G.return;while(R)}return G.tag===3?e:null}function Y2(R){if(R.tag===13){var G=R.memoizedState;if(G===null&&(R=R.alternate,R!==null&&(G=R.memoizedState)),G!==null)return G.dehydrated}return null}function j2(R){if(Dh(R)!==R)throw Error(Pa(188))}function OS(R){var G=R.alternate;if(!G){if(G=Dh(R),G===null)throw Error(Pa(188));return G!==R?null:R}for(var e=R,z=G;;){var N=e.return;if(N===null)break;var u=N.alternate;if(u===null){if(z=N.return,z!==null){e=z;continue}break}if(N.child===u.child){for(u=N.child;u;){if(u===e)return j2(N),R;if(u===z)return j2(N),G;u=u.sibling}throw Error(Pa(188))}if(e.return!==z.return)e=N,z=u;else{for(var s=!1,m=N.child;m;){if(m===e){s=!0,e=N,z=u;break}if(m===z){s=!0,z=N,e=u;break}m=m.sibling}if(!s){for(m=u.child;m;){if(m===e){s=!0,e=u,z=N;break}if(m===z){s=!0,z=u,e=N;break}m=m.sibling}if(!s)throw Error(Pa(189))}}if(e.alternate!==z)throw Error(Pa(190))}if(e.tag!==3)throw Error(Pa(188));return e.stateNode.current===e?R:G}function X2(R){if(R=OS(R),!R)return null;for(var G=R;;){if(G.tag===5||G.tag===6)return G;if(G.child)G.child.return=G,G=G.child;else{if(G===R)break;for(;!G.sibling;){if(!G.return||G.return===R)return null;G=G.return}G.sibling.return=G.return,G=G.sibling}}return null}function Z2(R,G){for(var e=R.alternate;G!==null;){if(G===R||G===e)return!0;G=G.return}return!1}var K2,Sy,J2,Q2,ky=!1,ic=[],Xc=null,Zc=null,Kc=null,Vp=new Map,Hp=new Map,Gp=[],$2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ey(R,G,e,z,N){return{blockedOn:R,domEventName:G,eventSystemFlags:e|16,nativeEvent:N,targetContainers:[z]}}function q2(R,G){switch(R){case"focusin":case"focusout":Xc=null;break;case"dragenter":case"dragleave":Zc=null;break;case"mouseover":case"mouseout":Kc=null;break;case"pointerover":case"pointerout":Vp.delete(G.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hp.delete(G.pointerId)}}function Wp(R,G,e,z,N,u){return R===null||R.nativeEvent!==u?(R=Ey(G,e,z,N,u),G!==null&&(G=rd(G),G!==null&&Sy(G)),R):(R.eventSystemFlags|=z,G=R.targetContainers,N!==null&&G.indexOf(N)===-1&&G.push(N),R)}function NS(R,G,e,z,N){switch(G){case"focusin":return Xc=Wp(Xc,R,G,e,z,N),!0;case"dragenter":return Zc=Wp(Zc,R,G,e,z,N),!0;case"mouseover":return Kc=Wp(Kc,R,G,e,z,N),!0;case"pointerover":var u=N.pointerId;return Vp.set(u,Wp(Vp.get(u)||null,R,G,e,z,N)),!0;case"gotpointercapture":return u=N.pointerId,Hp.set(u,Wp(Hp.get(u)||null,R,G,e,z,N)),!0}return!1}function BS(R){var G=Ih(R.target);if(G!==null){var e=Dh(G);if(e!==null){if(G=e.tag,G===13){if(G=Y2(e),G!==null){R.blockedOn=G,Q2(R.lanePriority,function(){rl.unstable_runWithPriority(R.priority,function(){J2(e)})});return}}else if(G===3&&e.stateNode.hydrate){R.blockedOn=e.tag===3?e.stateNode.containerInfo:null;return}}}R.blockedOn=null}function B0(R){if(R.blockedOn!==null)return!1;for(var G=R.targetContainers;0<G.length;){var e=Iy(R.domEventName,R.eventSystemFlags,G[0],R.nativeEvent);if(e!==null)return G=rd(e),G!==null&&Sy(G),R.blockedOn=e,!1;G.shift()}return!0}function e_(R,G,e){B0(R)&&e.delete(G)}function US(){for(ky=!1;0<ic.length;){var R=ic[0];if(R.blockedOn!==null){R=rd(R.blockedOn),R!==null&&K2(R);break}for(var G=R.targetContainers;0<G.length;){var e=Iy(R.domEventName,R.eventSystemFlags,G[0],R.nativeEvent);if(e!==null){R.blockedOn=e;break}G.shift()}R.blockedOn===null&&ic.shift()}Xc!==null&&B0(Xc)&&(Xc=null),Zc!==null&&B0(Zc)&&(Zc=null),Kc!==null&&B0(Kc)&&(Kc=null),Vp.forEach(e_),Hp.forEach(e_)}function Yp(R,G){R.blockedOn===G&&(R.blockedOn=null,ky||(ky=!0,rl.unstable_scheduleCallback(rl.unstable_NormalPriority,US)))}function t_(R){function G(N){return Yp(N,R)}if(0<ic.length){Yp(ic[0],R);for(var e=1;e<ic.length;e++){var z=ic[e];z.blockedOn===R&&(z.blockedOn=null)}}for(Xc!==null&&Yp(Xc,R),Zc!==null&&Yp(Zc,R),Kc!==null&&Yp(Kc,R),Vp.forEach(G),Hp.forEach(G),e=0;e<Gp.length;e++)z=Gp[e],z.blockedOn===R&&(z.blockedOn=null);for(;0<Gp.length&&(e=Gp[0],e.blockedOn===null);)BS(e),e.blockedOn===null&&Gp.shift()}function U0(R,G){var e={};return e[R.toLowerCase()]=G.toLowerCase(),e["Webkit"+R]="webkit"+G,e["Moz"+R]="moz"+G,e}var Cv={animationend:U0("Animation","AnimationEnd"),animationiteration:U0("Animation","AnimationIteration"),animationstart:U0("Animation","AnimationStart"),transitionend:U0("Transition","TransitionEnd")},Cy={},r_={};Ac&&(r_=document.createElement("div").style,"AnimationEvent"in window||(delete Cv.animationend.animation,delete Cv.animationiteration.animation,delete Cv.animationstart.animation),"TransitionEvent"in window||delete Cv.transitionend.transition);function V0(R){if(Cy[R])return Cy[R];if(!Cv[R])return R;var G=Cv[R],e;for(e in G)if(G.hasOwnProperty(e)&&e in r_)return Cy[R]=G[e];return R}var n_=V0("animationend"),a_=V0("animationiteration"),i_=V0("animationstart"),o_=V0("transitionend"),s_=new Map,Ly=new Map,VS=["abort","abort",n_,"animationEnd",a_,"animationIteration",i_,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",o_,"transitionEnd","waiting","waiting"];function Py(R,G){for(var e=0;e<R.length;e+=2){var z=R[e],N=R[e+1];N="on"+(N[0].toUpperCase()+N.slice(1)),Ly.set(z,G),s_.set(z,N),Ch(N,[z])}}var HS=rl.unstable_now;HS();var zo=8;function Lv(R){if((1&R)!=0)return zo=15,1;if((2&R)!=0)return zo=14,2;if((4&R)!=0)return zo=13,4;var G=24&R;return G!==0?(zo=12,G):(R&32)!=0?(zo=11,32):(G=192&R,G!==0?(zo=10,G):(R&256)!=0?(zo=9,256):(G=3584&R,G!==0?(zo=8,G):(R&4096)!=0?(zo=7,4096):(G=4186112&R,G!==0?(zo=6,G):(G=62914560&R,G!==0?(zo=5,G):R&67108864?(zo=4,67108864):(R&134217728)!=0?(zo=3,134217728):(G=805306368&R,G!==0?(zo=2,G):(1073741824&R)!=0?(zo=1,1073741824):(zo=8,R))))))}function GS(R){switch(R){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}function WS(R){switch(R){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(Pa(358,R))}}function jp(R,G){var e=R.pendingLanes;if(e===0)return zo=0;var z=0,N=0,u=R.expiredLanes,s=R.suspendedLanes,m=R.pingedLanes;if(u!==0)z=u,N=zo=15;else if(u=e&134217727,u!==0){var x=u&~s;x!==0?(z=Lv(x),N=zo):(m&=u,m!==0&&(z=Lv(m),N=zo))}else u=e&~s,u!==0?(z=Lv(u),N=zo):m!==0&&(z=Lv(m),N=zo);if(z===0)return 0;if(z=31-Jc(z),z=e&((0>z?0:1<<z)<<1)-1,G!==0&&G!==z&&(G&s)==0){if(Lv(G),N<=zo)return G;zo=N}if(G=R.entangledLanes,G!==0)for(R=R.entanglements,G&=z;0<G;)e=31-Jc(G),N=1<<e,z|=R[e],G&=~N;return z}function l_(R){return R=R.pendingLanes&-1073741825,R!==0?R:R&1073741824?1073741824:0}function H0(R,G){switch(R){case 15:return 1;case 14:return 2;case 12:return R=Pv(24&~G),R===0?H0(10,G):R;case 10:return R=Pv(192&~G),R===0?H0(8,G):R;case 8:return R=Pv(3584&~G),R===0&&(R=Pv(4186112&~G),R===0&&(R=512)),R;case 2:return G=Pv(805306368&~G),G===0&&(G=268435456),G}throw Error(Pa(358,R))}function Pv(R){return R&-R}function Ry(R){for(var G=[],e=0;31>e;e++)G.push(R);return G}function G0(R,G,e){R.pendingLanes|=G;var z=G-1;R.suspendedLanes&=z,R.pingedLanes&=z,R=R.eventTimes,G=31-Jc(G),R[G]=e}var Jc=Math.clz32?Math.clz32:XS,YS=Math.log,jS=Math.LN2;function XS(R){return R===0?32:31-(YS(R)/jS|0)|0}var ZS=rl.unstable_UserBlockingPriority,KS=rl.unstable_runWithPriority,W0=!0;function JS(R,G,e,z){Rh||_y();var N=Dy,u=Rh;Rh=!0;try{G2(N,R,G,e,z)}finally{(Rh=u)||Ty()}}function QS(R,G,e,z){KS(ZS,Dy.bind(null,R,G,e,z))}function Dy(R,G,e,z){if(W0){var N;if((N=(G&4)==0)&&0<ic.length&&-1<$2.indexOf(R))R=Ey(null,R,G,e,z),ic.push(R);else{var u=Iy(R,G,e,z);if(u===null)N&&q2(R,z);else{if(N){if(-1<$2.indexOf(R)){R=Ey(u,R,G,e,z),ic.push(R);return}if(NS(u,R,G,e,z))return;q2(R,z)}N_(R,G,z,null,e)}}}}function Iy(R,G,e,z){var N=yy(z);if(N=Ih(N),N!==null){var u=Dh(N);if(u===null)N=null;else{var s=u.tag;if(s===13){if(N=Y2(u),N!==null)return N;N=null}else if(s===3){if(u.stateNode.hydrate)return u.tag===3?u.stateNode.containerInfo:null;N=null}else u!==N&&(N=null)}}return N_(R,G,z,N,e),null}var Qc=null,zy=null,Y0=null;function u_(){if(Y0)return Y0;var R,G=zy,e=G.length,z,N="value"in Qc?Qc.value:Qc.textContent,u=N.length;for(R=0;R<e&&G[R]===N[R];R++);var s=e-R;for(z=1;z<=s&&G[e-z]===N[u-z];z++);return Y0=N.slice(R,1<z?1-z:void 0)}function j0(R){var G=R.keyCode;return"charCode"in R?(R=R.charCode,R===0&&G===13&&(R=13)):R=G,R===10&&(R=13),32<=R||R===13?R:0}function X0(){return!0}function f_(){return!1}function Hu(R){function G(e,z,N,u,s){this._reactName=e,this._targetInst=N,this.type=z,this.nativeEvent=u,this.target=s,this.currentTarget=null;for(var m in R)R.hasOwnProperty(m)&&(e=R[m],this[m]=e?e(u):u[m]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?X0:f_,this.isPropagationStopped=f_,this}return Ko(G.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():typeof e.returnValue!="unknown"&&(e.returnValue=!1),this.isDefaultPrevented=X0)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():typeof e.cancelBubble!="unknown"&&(e.cancelBubble=!0),this.isPropagationStopped=X0)},persist:function(){},isPersistent:X0}),G}var Rv={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(R){return R.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fy=Hu(Rv),Xp=Ko({},Rv,{view:0,detail:0}),$S=Hu(Xp),Oy,Ny,Zp,Z0=Ko({},Xp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uy,button:0,buttons:0,relatedTarget:function(R){return R.relatedTarget===void 0?R.fromElement===R.srcElement?R.toElement:R.fromElement:R.relatedTarget},movementX:function(R){return"movementX"in R?R.movementX:(R!==Zp&&(Zp&&R.type==="mousemove"?(Oy=R.screenX-Zp.screenX,Ny=R.screenY-Zp.screenY):Ny=Oy=0,Zp=R),Oy)},movementY:function(R){return"movementY"in R?R.movementY:Ny}}),c_=Hu(Z0),qS=Ko({},Z0,{dataTransfer:0}),e4=Hu(qS),t4=Ko({},Xp,{relatedTarget:0}),By=Hu(t4),r4=Ko({},Rv,{animationName:0,elapsedTime:0,pseudoElement:0}),n4=Hu(r4),a4=Ko({},Rv,{clipboardData:function(R){return"clipboardData"in R?R.clipboardData:window.clipboardData}}),i4=Hu(a4),o4=Ko({},Rv,{data:0}),h_=Hu(o4),s4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},l4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},u4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f4(R){var G=this.nativeEvent;return G.getModifierState?G.getModifierState(R):(R=u4[R])?!!G[R]:!1}function Uy(){return f4}var c4=Ko({},Xp,{key:function(R){if(R.key){var G=s4[R.key]||R.key;if(G!=="Unidentified")return G}return R.type==="keypress"?(R=j0(R),R===13?"Enter":String.fromCharCode(R)):R.type==="keydown"||R.type==="keyup"?l4[R.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uy,charCode:function(R){return R.type==="keypress"?j0(R):0},keyCode:function(R){return R.type==="keydown"||R.type==="keyup"?R.keyCode:0},which:function(R){return R.type==="keypress"?j0(R):R.type==="keydown"||R.type==="keyup"?R.keyCode:0}}),h4=Hu(c4),v4=Ko({},Z0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),v_=Hu(v4),p4=Ko({},Xp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uy}),d4=Hu(p4),g4=Ko({},Rv,{propertyName:0,elapsedTime:0,pseudoElement:0}),m4=Hu(g4),y4=Ko({},Z0,{deltaX:function(R){return"deltaX"in R?R.deltaX:"wheelDeltaX"in R?-R.wheelDeltaX:0},deltaY:function(R){return"deltaY"in R?R.deltaY:"wheelDeltaY"in R?-R.wheelDeltaY:"wheelDelta"in R?-R.wheelDelta:0},deltaZ:0,deltaMode:0}),x4=Hu(y4),b4=[9,13,27,32],Vy=Ac&&"CompositionEvent"in window,Kp=null;Ac&&"documentMode"in document&&(Kp=document.documentMode);var _4=Ac&&"TextEvent"in window&&!Kp,p_=Ac&&(!Vy||Kp&&8<Kp&&11>=Kp),d_=String.fromCharCode(32),g_=!1;function m_(R,G){switch(R){case"keyup":return b4.indexOf(G.keyCode)!==-1;case"keydown":return G.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function y_(R){return R=R.detail,typeof R=="object"&&"data"in R?R.data:null}var Dv=!1;function w4(R,G){switch(R){case"compositionend":return y_(G);case"keypress":return G.which!==32?null:(g_=!0,d_);case"textInput":return R=G.data,R===d_&&g_?null:R;default:return null}}function T4(R,G){if(Dv)return R==="compositionend"||!Vy&&m_(R,G)?(R=u_(),Y0=zy=Qc=null,Dv=!1,R):null;switch(R){case"paste":return null;case"keypress":if(!(G.ctrlKey||G.altKey||G.metaKey)||G.ctrlKey&&G.altKey){if(G.char&&1<G.char.length)return G.char;if(G.which)return String.fromCharCode(G.which)}return null;case"compositionend":return p_&&G.locale!=="ko"?null:G.data;default:return null}}var A4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function x_(R){var G=R&&R.nodeName&&R.nodeName.toLowerCase();return G==="input"?!!A4[R.type]:G==="textarea"}function b_(R,G,e,z){V2(z),G=J0(G,"onChange"),0<G.length&&(e=new Fy("onChange","change",null,e,z),R.push({event:e,listeners:G}))}var Jp=null,Qp=null;function M4(R){D_(R,0)}function K0(R){var G=Nv(R);if(C2(G))return R}function S4(R,G){if(R==="change")return G}var __=!1;if(Ac){var Hy;if(Ac){var Gy="oninput"in document;if(!Gy){var w_=document.createElement("div");w_.setAttribute("oninput","return;"),Gy=typeof w_.oninput=="function"}Hy=Gy}else Hy=!1;__=Hy&&(!document.documentMode||9<document.documentMode)}function T_(){Jp&&(Jp.detachEvent("onpropertychange",A_),Qp=Jp=null)}function A_(R){if(R.propertyName==="value"&&K0(Qp)){var G=[];if(b_(G,Qp,R,yy(R)),R=M4,Rh)R(G);else{Rh=!0;try{by(R,G)}finally{Rh=!1,Ty()}}}}function k4(R,G,e){R==="focusin"?(T_(),Jp=G,Qp=e,Jp.attachEvent("onpropertychange",A_)):R==="focusout"&&T_()}function E4(R){if(R==="selectionchange"||R==="keyup"||R==="keydown")return K0(Qp)}function C4(R,G){if(R==="click")return K0(G)}function L4(R,G){if(R==="input"||R==="change")return K0(G)}function P4(R,G){return R===G&&(R!==0||1/R==1/G)||R!==R&&G!==G}var uf=typeof Object.is=="function"?Object.is:P4,R4=Object.prototype.hasOwnProperty;function $p(R,G){if(uf(R,G))return!0;if(typeof R!="object"||R===null||typeof G!="object"||G===null)return!1;var e=Object.keys(R),z=Object.keys(G);if(e.length!==z.length)return!1;for(z=0;z<e.length;z++)if(!R4.call(G,e[z])||!uf(R[e[z]],G[e[z]]))return!1;return!0}function M_(R){for(;R&&R.firstChild;)R=R.firstChild;return R}function S_(R,G){var e=M_(R);R=0;for(var z;e;){if(e.nodeType===3){if(z=R+e.textContent.length,R<=G&&z>=G)return{node:e,offset:G-R};R=z}e:{for(;e;){if(e.nextSibling){e=e.nextSibling;break e}e=e.parentNode}e=void 0}e=M_(e)}}function k_(R,G){return R&&G?R===G?!0:R&&R.nodeType===3?!1:G&&G.nodeType===3?k_(R,G.parentNode):"contains"in R?R.contains(G):R.compareDocumentPosition?!!(R.compareDocumentPosition(G)&16):!1:!1}function E_(){for(var R=window,G=z0();G instanceof R.HTMLIFrameElement;){try{var e=typeof G.contentWindow.location.href=="string"}catch{e=!1}if(e)R=G.contentWindow;else break;G=z0(R.document)}return G}function Wy(R){var G=R&&R.nodeName&&R.nodeName.toLowerCase();return G&&(G==="input"&&(R.type==="text"||R.type==="search"||R.type==="tel"||R.type==="url"||R.type==="password")||G==="textarea"||R.contentEditable==="true")}var D4=Ac&&"documentMode"in document&&11>=document.documentMode,Iv=null,Yy=null,qp=null,jy=!1;function C_(R,G,e){var z=e.window===e?e.document:e.nodeType===9?e:e.ownerDocument;jy||Iv==null||Iv!==z0(z)||(z=Iv,"selectionStart"in z&&Wy(z)?z={start:z.selectionStart,end:z.selectionEnd}:(z=(z.ownerDocument&&z.ownerDocument.defaultView||window).getSelection(),z={anchorNode:z.anchorNode,anchorOffset:z.anchorOffset,focusNode:z.focusNode,focusOffset:z.focusOffset}),qp&&$p(qp,z)||(qp=z,z=J0(Yy,"onSelect"),0<z.length&&(G=new Fy("onSelect","select",null,G,e),R.push({event:G,listeners:z}),G.target=Iv)))}Py("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0);Py("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Py(VS,2);for(var L_="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),Xy=0;Xy<L_.length;Xy++)Ly.set(L_[Xy],0);Av("onMouseEnter",["mouseout","mouseover"]);Av("onMouseLeave",["mouseout","mouseover"]);Av("onPointerEnter",["pointerout","pointerover"]);Av("onPointerLeave",["pointerout","pointerover"]);Ch("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ch("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ch("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ch("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ch("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ch("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),P_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ed));function R_(R,G,e){var z=R.type||"unknown-event";R.currentTarget=e,FS(z,G,void 0,R),R.currentTarget=null}function D_(R,G){G=(G&4)!=0;for(var e=0;e<R.length;e++){var z=R[e],N=z.event;z=z.listeners;e:{var u=void 0;if(G)for(var s=z.length-1;0<=s;s--){var m=z[s],x=m.instance,t=m.currentTarget;if(m=m.listener,x!==u&&N.isPropagationStopped())break e;R_(N,m,t),u=x}else for(s=0;s<z.length;s++){if(m=z[s],x=m.instance,t=m.currentTarget,m=m.listener,x!==u&&N.isPropagationStopped())break e;R_(N,m,t),u=x}}}if(N0)throw R=My,N0=!1,My=null,R}function Go(R,G){var e=W_(G),z=R+"__bubble";e.has(z)||(O_(G,R,2,!1),e.add(z))}var I_="_reactListening"+Math.random().toString(36).slice(2);function z_(R){R[I_]||(R[I_]=!0,w2.forEach(function(G){P_.has(G)||F_(G,!1,R,null),F_(G,!0,R,null)}))}function F_(R,G,e,z){var N=4<arguments.length&&arguments[4]!==void 0?arguments[4]:0,u=e;if(R==="selectionchange"&&e.nodeType!==9&&(u=e.ownerDocument),z!==null&&!G&&P_.has(R)){if(R!=="scroll")return;N|=2,u=z}var s=W_(u),m=R+"__"+(G?"capture":"bubble");s.has(m)||(G&&(N|=4),O_(u,R,N,G),s.add(m))}function O_(R,G,e,z){var N=Ly.get(G);switch(N===void 0?2:N){case 0:N=JS;break;case 1:N=QS;break;default:N=Dy}e=N.bind(null,G,e,R),N=void 0,!Ay||G!=="touchstart"&&G!=="touchmove"&&G!=="wheel"||(N=!0),z?N!==void 0?R.addEventListener(G,e,{capture:!0,passive:N}):R.addEventListener(G,e,!0):N!==void 0?R.addEventListener(G,e,{passive:N}):R.addEventListener(G,e,!1)}function N_(R,G,e,z,N){var u=z;if((G&1)==0&&(G&2)==0&&z!==null)e:for(;;){if(z===null)return;var s=z.tag;if(s===3||s===4){var m=z.stateNode.containerInfo;if(m===N||m.nodeType===8&&m.parentNode===N)break;if(s===4)for(s=z.return;s!==null;){var x=s.tag;if((x===3||x===4)&&(x=s.stateNode.containerInfo,x===N||x.nodeType===8&&x.parentNode===N))return;s=s.return}for(;m!==null;){if(s=Ih(m),s===null)return;if(x=s.tag,x===5||x===6){z=u=s;continue e}m=m.parentNode}}z=z.return}RS(function(){var t=u,i=yy(e),a=[];e:{var r=s_.get(R);if(r!==void 0){var n=Fy,f=R;switch(R){case"keypress":if(j0(e)===0)break e;case"keydown":case"keyup":n=h4;break;case"focusin":f="focus",n=By;break;case"focusout":f="blur",n=By;break;case"beforeblur":case"afterblur":n=By;break;case"click":if(e.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":n=c_;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":n=e4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":n=d4;break;case n_:case a_:case i_:n=n4;break;case o_:n=m4;break;case"scroll":n=$S;break;case"wheel":n=x4;break;case"copy":case"cut":case"paste":n=i4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":n=v_}var l=(G&4)!=0,o=!l&&R==="scroll",c=l?r!==null?r+"Capture":null:r;l=[];for(var h=t,d;h!==null;){d=h;var p=d.stateNode;if(d.tag===5&&p!==null&&(d=p,c!==null&&(p=Np(h,c),p!=null&&l.push(td(h,p,d)))),o)break;h=h.return}0<l.length&&(r=new n(r,f,null,e,i),a.push({event:r,listeners:l}))}}if((G&7)==0){e:{if(r=R==="mouseover"||R==="pointerover",n=R==="mouseout"||R==="pointerout",r&&(G&16)==0&&(f=e.relatedTarget||e.fromElement)&&(Ih(f)||f[Ov]))break e;if((n||r)&&(r=i.window===i?i:(r=i.ownerDocument)?r.defaultView||r.parentWindow:window,n?(f=e.relatedTarget||e.toElement,n=t,f=f?Ih(f):null,f!==null&&(o=Dh(f),f!==o||f.tag!==5&&f.tag!==6)&&(f=null)):(n=null,f=t),n!==f)){if(l=c_,p="onMouseLeave",c="onMouseEnter",h="mouse",(R==="pointerout"||R==="pointerover")&&(l=v_,p="onPointerLeave",c="onPointerEnter",h="pointer"),o=n==null?r:Nv(n),d=f==null?r:Nv(f),r=new l(p,h+"leave",n,e,i),r.target=o,r.relatedTarget=d,p=null,Ih(i)===t&&(l=new l(c,h+"enter",f,e,i),l.target=d,l.relatedTarget=o,p=l),o=p,n&&f)t:{for(l=n,c=f,h=0,d=l;d;d=zv(d))h++;for(d=0,p=c;p;p=zv(p))d++;for(;0<h-d;)l=zv(l),h--;for(;0<d-h;)c=zv(c),d--;for(;h--;){if(l===c||c!==null&&l===c.alternate)break t;l=zv(l),c=zv(c)}l=null}else l=null;n!==null&&B_(a,r,n,l,!1),f!==null&&o!==null&&B_(a,o,f,l,!0)}}e:{if(r=t?Nv(t):window,n=r.nodeName&&r.nodeName.toLowerCase(),n==="select"||n==="input"&&r.type==="file")var y=S4;else if(x_(r))if(__)y=L4;else{y=E4;var g=k4}else(n=r.nodeName)&&n.toLowerCase()==="input"&&(r.type==="checkbox"||r.type==="radio")&&(y=C4);if(y&&(y=y(R,t))){b_(a,y,e,i);break e}g&&g(R,r,t),R==="focusout"&&(g=r._wrapperState)&&g.controlled&&r.type==="number"&&cy(r,"number",r.value)}switch(g=t?Nv(t):window,R){case"focusin":(x_(g)||g.contentEditable==="true")&&(Iv=g,Yy=t,qp=null);break;case"focusout":qp=Yy=Iv=null;break;case"mousedown":jy=!0;break;case"contextmenu":case"mouseup":case"dragend":jy=!1,C_(a,e,i);break;case"selectionchange":if(D4)break;case"keydown":case"keyup":C_(a,e,i)}var A;if(Vy)e:{switch(R){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Dv?m_(R,e)&&(b="onCompositionEnd"):R==="keydown"&&e.keyCode===229&&(b="onCompositionStart");b&&(p_&&e.locale!=="ko"&&(Dv||b!=="onCompositionStart"?b==="onCompositionEnd"&&Dv&&(A=u_()):(Qc=i,zy="value"in Qc?Qc.value:Qc.textContent,Dv=!0)),g=J0(t,b),0<g.length&&(b=new h_(b,R,null,e,i),a.push({event:b,listeners:g}),A?b.data=A:(A=y_(e),A!==null&&(b.data=A)))),(A=_4?w4(R,e):T4(R,e))&&(t=J0(t,"onBeforeInput"),0<t.length&&(i=new h_("onBeforeInput","beforeinput",null,e,i),a.push({event:i,listeners:t}),i.data=A))}D_(a,G)})}function td(R,G,e){return{instance:R,listener:G,currentTarget:e}}function J0(R,G){for(var e=G+"Capture",z=[];R!==null;){var N=R,u=N.stateNode;N.tag===5&&u!==null&&(N=u,u=Np(R,e),u!=null&&z.unshift(td(R,u,N)),u=Np(R,G),u!=null&&z.push(td(R,u,N))),R=R.return}return z}function zv(R){if(R===null)return null;do R=R.return;while(R&&R.tag!==5);return R||null}function B_(R,G,e,z,N){for(var u=G._reactName,s=[];e!==null&&e!==z;){var m=e,x=m.alternate,t=m.stateNode;if(x!==null&&x===z)break;m.tag===5&&t!==null&&(m=t,N?(x=Np(e,u),x!=null&&s.unshift(td(e,x,m))):N||(x=Np(e,u),x!=null&&s.push(td(e,x,m)))),e=e.return}s.length!==0&&R.push({event:G,listeners:s})}function Q0(){}var Zy=null,Ky=null;function U_(R,G){switch(R){case"button":case"input":case"select":case"textarea":return!!G.autoFocus}return!1}function Jy(R,G){return R==="textarea"||R==="option"||R==="noscript"||typeof G.children=="string"||typeof G.children=="number"||typeof G.dangerouslySetInnerHTML=="object"&&G.dangerouslySetInnerHTML!==null&&G.dangerouslySetInnerHTML.__html!=null}var V_=typeof setTimeout=="function"?setTimeout:void 0,I4=typeof clearTimeout=="function"?clearTimeout:void 0;function Qy(R){R.nodeType===1?R.textContent="":R.nodeType===9&&(R=R.body,R!=null&&(R.textContent=""))}function Fv(R){for(;R!=null;R=R.nextSibling){var G=R.nodeType;if(G===1||G===3)break}return R}function H_(R){R=R.previousSibling;for(var G=0;R;){if(R.nodeType===8){var e=R.data;if(e==="$"||e==="$!"||e==="$?"){if(G===0)return R;G--}else e==="/$"&&G++}R=R.previousSibling}return null}var $y=0;function z4(R){return{$$typeof:ay,toString:R,valueOf:R}}var $0=Math.random().toString(36).slice(2),$c="__reactFiber$"+$0,q0="__reactProps$"+$0,Ov="__reactContainer$"+$0,G_="__reactEvents$"+$0;function Ih(R){var G=R[$c];if(G)return G;for(var e=R.parentNode;e;){if(G=e[Ov]||e[$c]){if(e=G.alternate,G.child!==null||e!==null&&e.child!==null)for(R=H_(R);R!==null;){if(e=R[$c])return e;R=H_(R)}return G}R=e,e=R.parentNode}return null}function rd(R){return R=R[$c]||R[Ov],!R||R.tag!==5&&R.tag!==6&&R.tag!==13&&R.tag!==3?null:R}function Nv(R){if(R.tag===5||R.tag===6)return R.stateNode;throw Error(Pa(33))}function eg(R){return R[q0]||null}function W_(R){var G=R[G_];return G===void 0&&(G=R[G_]=new Set),G}var qy=[],Bv=-1;function qc(R){return{current:R}}function Wo(R){0>Bv||(R.current=qy[Bv],qy[Bv]=null,Bv--)}function cs(R,G){Bv++,qy[Bv]=R.current,R.current=G}var eh={},Ol=qc(eh),_u=qc(!1),zh=eh;function Uv(R,G){var e=R.type.contextTypes;if(!e)return eh;var z=R.stateNode;if(z&&z.__reactInternalMemoizedUnmaskedChildContext===G)return z.__reactInternalMemoizedMaskedChildContext;var N={},u;for(u in e)N[u]=G[u];return z&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=G,R.__reactInternalMemoizedMaskedChildContext=N),N}function wu(R){return R=R.childContextTypes,R!=null}function tg(){Wo(_u),Wo(Ol)}function Y_(R,G,e){if(Ol.current!==eh)throw Error(Pa(168));cs(Ol,G),cs(_u,e)}function j_(R,G,e){var z=R.stateNode;if(R=G.childContextTypes,typeof z.getChildContext!="function")return e;z=z.getChildContext();for(var N in z)if(!(N in R))throw Error(Pa(108,Mv(G)||"Unknown",N));return Ko({},e,z)}function rg(R){return R=(R=R.stateNode)&&R.__reactInternalMemoizedMergedChildContext||eh,zh=Ol.current,cs(Ol,R),cs(_u,_u.current),!0}function X_(R,G,e){var z=R.stateNode;if(!z)throw Error(Pa(169));e?(R=j_(R,G,zh),z.__reactInternalMemoizedMergedChildContext=R,Wo(_u),Wo(Ol),cs(Ol,R)):Wo(_u),cs(_u,e)}var e1=null,Fh=null,F4=rl.unstable_runWithPriority,t1=rl.unstable_scheduleCallback,r1=rl.unstable_cancelCallback,O4=rl.unstable_shouldYield,Z_=rl.unstable_requestPaint,n1=rl.unstable_now,N4=rl.unstable_getCurrentPriorityLevel,ng=rl.unstable_ImmediatePriority,K_=rl.unstable_UserBlockingPriority,J_=rl.unstable_NormalPriority,Q_=rl.unstable_LowPriority,$_=rl.unstable_IdlePriority,a1={},B4=Z_!==void 0?Z_:function(){},Mc=null,ag=null,i1=!1,q_=n1(),Nl=1e4>q_?n1:function(){return n1()-q_};function Vv(){switch(N4()){case ng:return 99;case K_:return 98;case J_:return 97;case Q_:return 96;case $_:return 95;default:throw Error(Pa(332))}}function ew(R){switch(R){case 99:return ng;case 98:return K_;case 97:return J_;case 96:return Q_;case 95:return $_;default:throw Error(Pa(332))}}function Oh(R,G){return R=ew(R),F4(R,G)}function nd(R,G,e){return R=ew(R),t1(R,G,e)}function oc(){if(ag!==null){var R=ag;ag=null,r1(R)}tw()}function tw(){if(!i1&&Mc!==null){i1=!0;var R=0;try{var G=Mc;Oh(99,function(){for(;R<G.length;R++){var e=G[R];do e=e(!0);while(e!==null)}}),Mc=null}catch(e){throw Mc!==null&&(Mc=Mc.slice(R+1)),t1(ng,oc),e}finally{i1=!1}}}var U4=Lh.ReactCurrentBatchConfig;function Of(R,G){if(R&&R.defaultProps){G=Ko({},G),R=R.defaultProps;for(var e in R)G[e]===void 0&&(G[e]=R[e]);return G}return G}var ig=qc(null),og=null,Hv=null,sg=null;function o1(){sg=Hv=og=null}function s1(R){var G=ig.current;Wo(ig),R.type._context._currentValue=G}function rw(R,G){for(;R!==null;){var e=R.alternate;if((R.childLanes&G)===G){if(e===null||(e.childLanes&G)===G)break;e.childLanes|=G}else R.childLanes|=G,e!==null&&(e.childLanes|=G);R=R.return}}function Gv(R,G){og=R,sg=Hv=null,R=R.dependencies,R!==null&&R.firstContext!==null&&((R.lanes&G)!=0&&(Nf=!0),R.firstContext=null)}function ff(R,G){if(sg!==R&&G!==!1&&G!==0)if((typeof G!="number"||G===1073741823)&&(sg=R,G=1073741823),G={context:R,observedBits:G,next:null},Hv===null){if(og===null)throw Error(Pa(308));Hv=G,og.dependencies={lanes:0,firstContext:G,responders:null}}else Hv=Hv.next=G;return R._currentValue}var th=!1;function l1(R){R.updateQueue={baseState:R.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function nw(R,G){R=R.updateQueue,G.updateQueue===R&&(G.updateQueue={baseState:R.baseState,firstBaseUpdate:R.firstBaseUpdate,lastBaseUpdate:R.lastBaseUpdate,shared:R.shared,effects:R.effects})}function rh(R,G){return{eventTime:R,lane:G,tag:0,payload:null,callback:null,next:null}}function nh(R,G){if(R=R.updateQueue,R!==null){R=R.shared;var e=R.pending;e===null?G.next=G:(G.next=e.next,e.next=G),R.pending=G}}function aw(R,G){var e=R.updateQueue,z=R.alternate;if(z!==null&&(z=z.updateQueue,e===z)){var N=null,u=null;if(e=e.firstBaseUpdate,e!==null){do{var s={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};u===null?N=u=s:u=u.next=s,e=e.next}while(e!==null);u===null?N=u=G:u=u.next=G}else N=u=G;e={baseState:z.baseState,firstBaseUpdate:N,lastBaseUpdate:u,shared:z.shared,effects:z.effects},R.updateQueue=e;return}R=e.lastBaseUpdate,R===null?e.firstBaseUpdate=G:R.next=G,e.lastBaseUpdate=G}function ad(R,G,e,z){var N=R.updateQueue;th=!1;var u=N.firstBaseUpdate,s=N.lastBaseUpdate,m=N.shared.pending;if(m!==null){N.shared.pending=null;var x=m,t=x.next;x.next=null,s===null?u=t:s.next=t,s=x;var i=R.alternate;if(i!==null){i=i.updateQueue;var a=i.lastBaseUpdate;a!==s&&(a===null?i.firstBaseUpdate=t:a.next=t,i.lastBaseUpdate=x)}}if(u!==null){a=N.baseState,s=0,i=t=x=null;do{m=u.lane;var r=u.eventTime;if((z&m)===m){i!==null&&(i=i.next={eventTime:r,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var n=R,f=u;switch(m=G,r=e,f.tag){case 1:if(n=f.payload,typeof n=="function"){a=n.call(r,a,m);break e}a=n;break e;case 3:n.flags=n.flags&-4097|64;case 0:if(n=f.payload,m=typeof n=="function"?n.call(r,a,m):n,m==null)break e;a=Ko({},a,m);break e;case 2:th=!0}}u.callback!==null&&(R.flags|=32,m=N.effects,m===null?N.effects=[u]:m.push(u))}else r={eventTime:r,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},i===null?(t=i=r,x=a):i=i.next=r,s|=m;if(u=u.next,u===null){if(m=N.shared.pending,m===null)break;u=m.next,m.next=null,N.lastBaseUpdate=m,N.shared.pending=null}}while(1);i===null&&(x=a),N.baseState=x,N.firstBaseUpdate=t,N.lastBaseUpdate=i,gd|=s,R.lanes=s,R.memoizedState=a}}function iw(R,G,e){if(R=G.effects,G.effects=null,R!==null)for(G=0;G<R.length;G++){var z=R[G],N=z.callback;if(N!==null){if(z.callback=null,z=e,typeof N!="function")throw Error(Pa(191,N));N.call(z)}}}var ow=new C0.Component().refs;function lg(R,G,e,z){G=R.memoizedState,e=e(z,G),e=e==null?G:Ko({},G,e),R.memoizedState=e,R.lanes===0&&(R.updateQueue.baseState=e)}var ug={isMounted:function(R){return(R=R._reactInternals)?Dh(R)===R:!1},enqueueSetState:function(R,G,e){R=R._reactInternals;var z=Gu(),N=oh(R),u=rh(z,N);u.payload=G,e!=null&&(u.callback=e),nh(R,u),sh(R,N,z)},enqueueReplaceState:function(R,G,e){R=R._reactInternals;var z=Gu(),N=oh(R),u=rh(z,N);u.tag=1,u.payload=G,e!=null&&(u.callback=e),nh(R,u),sh(R,N,z)},enqueueForceUpdate:function(R,G){R=R._reactInternals;var e=Gu(),z=oh(R),N=rh(e,z);N.tag=2,G!=null&&(N.callback=G),nh(R,N),sh(R,z,e)}};function sw(R,G,e,z,N,u,s){return R=R.stateNode,typeof R.shouldComponentUpdate=="function"?R.shouldComponentUpdate(z,u,s):G.prototype&&G.prototype.isPureReactComponent?!$p(e,z)||!$p(N,u):!0}function lw(R,G,e){var z=!1,N=eh,u=G.contextType;return typeof u=="object"&&u!==null?u=ff(u):(N=wu(G)?zh:Ol.current,z=G.contextTypes,u=(z=z!=null)?Uv(R,N):eh),G=new G(e,u),R.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,G.updater=ug,R.stateNode=G,G._reactInternals=R,z&&(R=R.stateNode,R.__reactInternalMemoizedUnmaskedChildContext=N,R.__reactInternalMemoizedMaskedChildContext=u),G}function uw(R,G,e,z){R=G.state,typeof G.componentWillReceiveProps=="function"&&G.componentWillReceiveProps(e,z),typeof G.UNSAFE_componentWillReceiveProps=="function"&&G.UNSAFE_componentWillReceiveProps(e,z),G.state!==R&&ug.enqueueReplaceState(G,G.state,null)}function u1(R,G,e,z){var N=R.stateNode;N.props=e,N.state=R.memoizedState,N.refs=ow,l1(R);var u=G.contextType;typeof u=="object"&&u!==null?N.context=ff(u):(u=wu(G)?zh:Ol.current,N.context=Uv(R,u)),ad(R,e,N,z),N.state=R.memoizedState,u=G.getDerivedStateFromProps,typeof u=="function"&&(lg(R,G,u,e),N.state=R.memoizedState),typeof G.getDerivedStateFromProps=="function"||typeof N.getSnapshotBeforeUpdate=="function"||typeof N.UNSAFE_componentWillMount!="function"&&typeof N.componentWillMount!="function"||(G=N.state,typeof N.componentWillMount=="function"&&N.componentWillMount(),typeof N.UNSAFE_componentWillMount=="function"&&N.UNSAFE_componentWillMount(),G!==N.state&&ug.enqueueReplaceState(N,N.state,null),ad(R,e,N,z),N.state=R.memoizedState),typeof N.componentDidMount=="function"&&(R.flags|=4)}var fg=Array.isArray;function id(R,G,e){if(R=e.ref,R!==null&&typeof R!="function"&&typeof R!="object"){if(e._owner){if(e=e._owner,e){if(e.tag!==1)throw Error(Pa(309));var z=e.stateNode}if(!z)throw Error(Pa(147,R));var N=""+R;return G!==null&&G.ref!==null&&typeof G.ref=="function"&&G.ref._stringRef===N?G.ref:(G=function(u){var s=z.refs;s===ow&&(s=z.refs={}),u===null?delete s[N]:s[N]=u},G._stringRef=N,G)}if(typeof R!="string")throw Error(Pa(284));if(!e._owner)throw Error(Pa(290,R))}return R}function cg(R,G){if(R.type!=="textarea")throw Error(Pa(31,Object.prototype.toString.call(G)==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":G))}function fw(R){function G(o,c){if(R){var h=o.lastEffect;h!==null?(h.nextEffect=c,o.lastEffect=c):o.firstEffect=o.lastEffect=c,c.nextEffect=null,c.flags=8}}function e(o,c){if(!R)return null;for(;c!==null;)G(o,c),c=c.sibling;return null}function z(o,c){for(o=new Map;c!==null;)c.key!==null?o.set(c.key,c):o.set(c.index,c),c=c.sibling;return o}function N(o,c){return o=fh(o,c),o.index=0,o.sibling=null,o}function u(o,c,h){return o.index=h,R?(h=o.alternate,h!==null?(h=h.index,h<c?(o.flags=2,c):h):(o.flags=2,c)):c}function s(o){return R&&o.alternate===null&&(o.flags=2),o}function m(o,c,h,d){return c===null||c.tag!==6?(c=Y1(h,o.mode,d),c.return=o,c):(c=N(c,h),c.return=o,c)}function x(o,c,h,d){return c!==null&&c.elementType===h.type?(d=N(c,h.props),d.ref=id(o,c,h),d.return=o,d):(d=Cg(h.type,h.key,h.props,null,o.mode,d),d.ref=id(o,c,h),d.return=o,d)}function t(o,c,h,d){return c===null||c.tag!==4||c.stateNode.containerInfo!==h.containerInfo||c.stateNode.implementation!==h.implementation?(c=j1(h,o.mode,d),c.return=o,c):(c=N(c,h.children||[]),c.return=o,c)}function i(o,c,h,d,p){return c===null||c.tag!==7?(c=Qv(h,o.mode,d,p),c.return=o,c):(c=N(c,h),c.return=o,c)}function a(o,c,h){if(typeof c=="string"||typeof c=="number")return c=Y1(""+c,o.mode,h),c.return=o,c;if(typeof c=="object"&&c!==null){switch(c.$$typeof){case Pp:return h=Cg(c.type,c.key,c.props,null,o.mode,h),h.ref=id(o,null,c),h.return=o,h;case Ph:return c=j1(c,o.mode,h),c.return=o,c}if(fg(c)||Ip(c))return c=Qv(c,o.mode,h,null),c.return=o,c;cg(o,c)}return null}function r(o,c,h,d){var p=c!==null?c.key:null;if(typeof h=="string"||typeof h=="number")return p!==null?null:m(o,c,""+h,d);if(typeof h=="object"&&h!==null){switch(h.$$typeof){case Pp:return h.key===p?h.type===Yc?i(o,c,h.props.children,d,p):x(o,c,h,d):null;case Ph:return h.key===p?t(o,c,h,d):null}if(fg(h)||Ip(h))return p!==null?null:i(o,c,h,d,null);cg(o,h)}return null}function n(o,c,h,d,p){if(typeof d=="string"||typeof d=="number")return o=o.get(h)||null,m(c,o,""+d,p);if(typeof d=="object"&&d!==null){switch(d.$$typeof){case Pp:return o=o.get(d.key===null?h:d.key)||null,d.type===Yc?i(c,o,d.props.children,p,d.key):x(c,o,d,p);case Ph:return o=o.get(d.key===null?h:d.key)||null,t(c,o,d,p)}if(fg(d)||Ip(d))return o=o.get(h)||null,i(c,o,d,p,null);cg(c,d)}return null}function f(o,c,h,d){for(var p=null,y=null,g=c,A=c=0,b=null;g!==null&&A<h.length;A++){g.index>A?(b=g,g=null):b=g.sibling;var M=r(o,g,h[A],d);if(M===null){g===null&&(g=b);break}R&&g&&M.alternate===null&&G(o,g),c=u(M,c,A),y===null?p=M:y.sibling=M,y=M,g=b}if(A===h.length)return e(o,g),p;if(g===null){for(;A<h.length;A++)g=a(o,h[A],d),g!==null&&(c=u(g,c,A),y===null?p=g:y.sibling=g,y=g);return p}for(g=z(o,g);A<h.length;A++)b=n(g,o,A,h[A],d),b!==null&&(R&&b.alternate!==null&&g.delete(b.key===null?A:b.key),c=u(b,c,A),y===null?p=b:y.sibling=b,y=b);return R&&g.forEach(function(_){return G(o,_)}),p}function l(o,c,h,d){var p=Ip(h);if(typeof p!="function")throw Error(Pa(150));if(h=p.call(h),h==null)throw Error(Pa(151));for(var y=p=null,g=c,A=c=0,b=null,M=h.next();g!==null&&!M.done;A++,M=h.next()){g.index>A?(b=g,g=null):b=g.sibling;var _=r(o,g,M.value,d);if(_===null){g===null&&(g=b);break}R&&g&&_.alternate===null&&G(o,g),c=u(_,c,A),y===null?p=_:y.sibling=_,y=_,g=b}if(M.done)return e(o,g),p;if(g===null){for(;!M.done;A++,M=h.next())M=a(o,M.value,d),M!==null&&(c=u(M,c,A),y===null?p=M:y.sibling=M,y=M);return p}for(g=z(o,g);!M.done;A++,M=h.next())M=n(g,o,A,M.value,d),M!==null&&(R&&M.alternate!==null&&g.delete(M.key===null?A:M.key),c=u(M,c,A),y===null?p=M:y.sibling=M,y=M);return R&&g.forEach(function(T){return G(o,T)}),p}return function(o,c,h,d){var p=typeof h=="object"&&h!==null&&h.type===Yc&&h.key===null;p&&(h=h.props.children);var y=typeof h=="object"&&h!==null;if(y)switch(h.$$typeof){case Pp:e:{for(y=h.key,p=c;p!==null;){if(p.key===y){switch(p.tag){case 7:if(h.type===Yc){e(o,p.sibling),c=N(p,h.props.children),c.return=o,o=c;break e}break;default:if(p.elementType===h.type){e(o,p.sibling),c=N(p,h.props),c.ref=id(o,p,h),c.return=o,o=c;break e}}e(o,p);break}else G(o,p);p=p.sibling}h.type===Yc?(c=Qv(h.props.children,o.mode,d,h.key),c.return=o,o=c):(d=Cg(h.type,h.key,h.props,null,o.mode,d),d.ref=id(o,c,h),d.return=o,o=d)}return s(o);case Ph:e:{for(p=h.key;c!==null;){if(c.key===p)if(c.tag===4&&c.stateNode.containerInfo===h.containerInfo&&c.stateNode.implementation===h.implementation){e(o,c.sibling),c=N(c,h.children||[]),c.return=o,o=c;break e}else{e(o,c);break}else G(o,c);c=c.sibling}c=j1(h,o.mode,d),c.return=o,o=c}return s(o)}if(typeof h=="string"||typeof h=="number")return h=""+h,c!==null&&c.tag===6?(e(o,c.sibling),c=N(c,h),c.return=o,o=c):(e(o,c),c=Y1(h,o.mode,d),c.return=o,o=c),s(o);if(fg(h))return f(o,c,h,d);if(Ip(h))return l(o,c,h,d);if(y&&cg(o,h),typeof h=="undefined"&&!p)switch(o.tag){case 1:case 22:case 0:case 11:case 15:throw Error(Pa(152,Mv(o.type)||"Component"))}return e(o,c)}}var hg=fw(!0),cw=fw(!1),od={},sc=qc(od),sd=qc(od),ld=qc(od);function Nh(R){if(R===od)throw Error(Pa(174));return R}function f1(R,G){switch(cs(ld,G),cs(sd,R),cs(sc,od),R=G.nodeType,R){case 9:case 11:G=(G=G.documentElement)?G.namespaceURI:dy(null,"");break;default:R=R===8?G.parentNode:G,G=R.namespaceURI||null,R=R.tagName,G=dy(G,R)}Wo(sc),cs(sc,G)}function Wv(){Wo(sc),Wo(sd),Wo(ld)}function hw(R){Nh(ld.current);var G=Nh(sc.current),e=dy(G,R.type);G!==e&&(cs(sd,R),cs(sc,e))}function c1(R){sd.current===R&&(Wo(sc),Wo(sd))}var hs=qc(0);function vg(R){for(var G=R;G!==null;){if(G.tag===13){var e=G.memoizedState;if(e!==null&&(e=e.dehydrated,e===null||e.data==="$?"||e.data==="$!"))return G}else if(G.tag===19&&G.memoizedProps.revealOrder!==void 0){if((G.flags&64)!=0)return G}else if(G.child!==null){G.child.return=G,G=G.child;continue}if(G===R)break;for(;G.sibling===null;){if(G.return===null||G.return===R)return null;G=G.return}G.sibling.return=G.return,G=G.sibling}return null}var Sc=null,ah=null,lc=!1;function vw(R,G){var e=vf(5,null,null,0);e.elementType="DELETED",e.type="DELETED",e.stateNode=G,e.return=R,e.flags=8,R.lastEffect!==null?(R.lastEffect.nextEffect=e,R.lastEffect=e):R.firstEffect=R.lastEffect=e}function pw(R,G){switch(R.tag){case 5:var e=R.type;return G=G.nodeType!==1||e.toLowerCase()!==G.nodeName.toLowerCase()?null:G,G!==null?(R.stateNode=G,!0):!1;case 6:return G=R.pendingProps===""||G.nodeType!==3?null:G,G!==null?(R.stateNode=G,!0):!1;case 13:return!1;default:return!1}}function h1(R){if(lc){var G=ah;if(G){var e=G;if(!pw(R,G)){if(G=Fv(e.nextSibling),!G||!pw(R,G)){R.flags=R.flags&-1025|2,lc=!1,Sc=R;return}vw(Sc,e)}Sc=R,ah=Fv(G.firstChild)}else R.flags=R.flags&-1025|2,lc=!1,Sc=R}}function dw(R){for(R=R.return;R!==null&&R.tag!==5&&R.tag!==3&&R.tag!==13;)R=R.return;Sc=R}function pg(R){if(R!==Sc)return!1;if(!lc)return dw(R),lc=!0,!1;var G=R.type;if(R.tag!==5||G!=="head"&&G!=="body"&&!Jy(G,R.memoizedProps))for(G=ah;G;)vw(R,G),G=Fv(G.nextSibling);if(dw(R),R.tag===13){if(R=R.memoizedState,R=R!==null?R.dehydrated:null,!R)throw Error(Pa(317));e:{for(R=R.nextSibling,G=0;R;){if(R.nodeType===8){var e=R.data;if(e==="/$"){if(G===0){ah=Fv(R.nextSibling);break e}G--}else e!=="$"&&e!=="$!"&&e!=="$?"||G++}R=R.nextSibling}ah=null}}else ah=Sc?Fv(R.stateNode.nextSibling):null;return!0}function v1(){ah=Sc=null,lc=!1}var Yv=[];function p1(){for(var R=0;R<Yv.length;R++)Yv[R]._workInProgressVersionPrimary=null;Yv.length=0}var ud=Lh.ReactCurrentDispatcher,cf=Lh.ReactCurrentBatchConfig,fd=0,_s=null,Bl=null,xl=null,dg=!1,cd=!1;function Tu(){throw Error(Pa(321))}function d1(R,G){if(G===null)return!1;for(var e=0;e<G.length&&e<R.length;e++)if(!uf(R[e],G[e]))return!1;return!0}function g1(R,G,e,z,N,u){if(fd=u,_s=G,G.memoizedState=null,G.updateQueue=null,G.lanes=0,ud.current=R===null||R.memoizedState===null?H4:G4,R=e(z,N),cd){u=0;do{if(cd=!1,!(25>u))throw Error(Pa(301));u+=1,xl=Bl=null,G.updateQueue=null,ud.current=W4,R=e(z,N)}while(cd)}if(ud.current=xg,G=Bl!==null&&Bl.next!==null,fd=0,xl=Bl=_s=null,dg=!1,G)throw Error(Pa(300));return R}function Bh(){var R={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return xl===null?_s.memoizedState=xl=R:xl=xl.next=R,xl}function Uh(){if(Bl===null){var R=_s.alternate;R=R!==null?R.memoizedState:null}else R=Bl.next;var G=xl===null?_s.memoizedState:xl.next;if(G!==null)xl=G,Bl=R;else{if(R===null)throw Error(Pa(310));Bl=R,R={memoizedState:Bl.memoizedState,baseState:Bl.baseState,baseQueue:Bl.baseQueue,queue:Bl.queue,next:null},xl===null?_s.memoizedState=xl=R:xl=xl.next=R}return xl}function uc(R,G){return typeof G=="function"?G(R):G}function hd(R){var G=Uh(),e=G.queue;if(e===null)throw Error(Pa(311));e.lastRenderedReducer=R;var z=Bl,N=z.baseQueue,u=e.pending;if(u!==null){if(N!==null){var s=N.next;N.next=u.next,u.next=s}z.baseQueue=N=u,e.pending=null}if(N!==null){N=N.next,z=z.baseState;var m=s=u=null,x=N;do{var t=x.lane;if((fd&t)===t)m!==null&&(m=m.next={lane:0,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null}),z=x.eagerReducer===R?x.eagerState:R(z,x.action);else{var i={lane:t,action:x.action,eagerReducer:x.eagerReducer,eagerState:x.eagerState,next:null};m===null?(s=m=i,u=z):m=m.next=i,_s.lanes|=t,gd|=t}x=x.next}while(x!==null&&x!==N);m===null?u=z:m.next=s,uf(z,G.memoizedState)||(Nf=!0),G.memoizedState=z,G.baseState=u,G.baseQueue=m,e.lastRenderedState=z}return[G.memoizedState,e.dispatch]}function vd(R){var G=Uh(),e=G.queue;if(e===null)throw Error(Pa(311));e.lastRenderedReducer=R;var z=e.dispatch,N=e.pending,u=G.memoizedState;if(N!==null){e.pending=null;var s=N=N.next;do u=R(u,s.action),s=s.next;while(s!==N);uf(u,G.memoizedState)||(Nf=!0),G.memoizedState=u,G.baseQueue===null&&(G.baseState=u),e.lastRenderedState=u}return[u,z]}function gw(R,G,e){var z=G._getVersion;z=z(G._source);var N=G._workInProgressVersionPrimary;if(N!==null?R=N===z:(R=R.mutableReadLanes,(R=(fd&R)===R)&&(G._workInProgressVersionPrimary=z,Yv.push(G))),R)return e(G._source);throw Yv.push(G),Error(Pa(350))}function mw(R,G,e,z){var N=tu;if(N===null)throw Error(Pa(349));var u=G._getVersion,s=u(G._source),m=ud.current,x=m.useState(function(){return gw(N,G,e)}),t=x[1],i=x[0];x=xl;var a=R.memoizedState,r=a.refs,n=r.getSnapshot,f=a.source;a=a.subscribe;var l=_s;return R.memoizedState={refs:r,source:G,subscribe:z},m.useEffect(function(){r.getSnapshot=e,r.setSnapshot=t;var o=u(G._source);if(!uf(s,o)){o=e(G._source),uf(i,o)||(t(o),o=oh(l),N.mutableReadLanes|=o&N.pendingLanes),o=N.mutableReadLanes,N.entangledLanes|=o;for(var c=N.entanglements,h=o;0<h;){var d=31-Jc(h),p=1<<d;c[d]|=o,h&=~p}}},[e,G,z]),m.useEffect(function(){return z(G._source,function(){var o=r.getSnapshot,c=r.setSnapshot;try{c(o(G._source));var h=oh(l);N.mutableReadLanes|=h&N.pendingLanes}catch(d){c(function(){throw d})}})},[G,z]),uf(n,e)&&uf(f,G)&&uf(a,z)||(R={pending:null,dispatch:null,lastRenderedReducer:uc,lastRenderedState:i},R.dispatch=t=b1.bind(null,_s,R),x.queue=R,x.baseQueue=null,i=gw(N,G,e),x.memoizedState=x.baseState=i),i}function yw(R,G,e){var z=Uh();return mw(z,R,G,e)}function pd(R){var G=Bh();return typeof R=="function"&&(R=R()),G.memoizedState=G.baseState=R,R=G.queue={pending:null,dispatch:null,lastRenderedReducer:uc,lastRenderedState:R},R=R.dispatch=b1.bind(null,_s,R),[G.memoizedState,R]}function gg(R,G,e,z){return R={tag:R,create:G,destroy:e,deps:z,next:null},G=_s.updateQueue,G===null?(G={lastEffect:null},_s.updateQueue=G,G.lastEffect=R.next=R):(e=G.lastEffect,e===null?G.lastEffect=R.next=R:(z=e.next,e.next=R,R.next=z,G.lastEffect=R)),R}function xw(R){var G=Bh();return R={current:R},G.memoizedState=R}function mg(){return Uh().memoizedState}function m1(R,G,e,z){var N=Bh();_s.flags|=R,N.memoizedState=gg(1|G,e,void 0,z===void 0?null:z)}function y1(R,G,e,z){var N=Uh();z=z===void 0?null:z;var u=void 0;if(Bl!==null){var s=Bl.memoizedState;if(u=s.destroy,z!==null&&d1(z,s.deps)){gg(G,e,u,z);return}}_s.flags|=R,N.memoizedState=gg(1|G,e,u,z)}function bw(R,G){return m1(516,4,R,G)}function yg(R,G){return y1(516,4,R,G)}function _w(R,G){return y1(4,2,R,G)}function ww(R,G){if(typeof G=="function")return R=R(),G(R),function(){G(null)};if(G!=null)return R=R(),G.current=R,function(){G.current=null}}function Tw(R,G,e){return e=e!=null?e.concat([R]):null,y1(4,2,ww.bind(null,G,R),e)}function x1(){}function Aw(R,G){var e=Uh();G=G===void 0?null:G;var z=e.memoizedState;return z!==null&&G!==null&&d1(G,z[1])?z[0]:(e.memoizedState=[R,G],R)}function Mw(R,G){var e=Uh();G=G===void 0?null:G;var z=e.memoizedState;return z!==null&&G!==null&&d1(G,z[1])?z[0]:(R=R(),e.memoizedState=[R,G],R)}function V4(R,G){var e=Vv();Oh(98>e?98:e,function(){R(!0)}),Oh(97<e?97:e,function(){var z=cf.transition;cf.transition=1;try{R(!1),G()}finally{cf.transition=z}})}function b1(R,G,e){var z=Gu(),N=oh(R),u={lane:N,action:e,eagerReducer:null,eagerState:null,next:null},s=G.pending;if(s===null?u.next=u:(u.next=s.next,s.next=u),G.pending=u,s=R.alternate,R===_s||s!==null&&s===_s)cd=dg=!0;else{if(R.lanes===0&&(s===null||s.lanes===0)&&(s=G.lastRenderedReducer,s!==null))try{var m=G.lastRenderedState,x=s(m,e);if(u.eagerReducer=s,u.eagerState=x,uf(x,m))return}catch{}finally{}sh(R,N,z)}}var xg={readContext:ff,useCallback:Tu,useContext:Tu,useEffect:Tu,useImperativeHandle:Tu,useLayoutEffect:Tu,useMemo:Tu,useReducer:Tu,useRef:Tu,useState:Tu,useDebugValue:Tu,useDeferredValue:Tu,useTransition:Tu,useMutableSource:Tu,useOpaqueIdentifier:Tu,unstable_isNewReconciler:!1},H4={readContext:ff,useCallback:function(R,G){return Bh().memoizedState=[R,G===void 0?null:G],R},useContext:ff,useEffect:bw,useImperativeHandle:function(R,G,e){return e=e!=null?e.concat([R]):null,m1(4,2,ww.bind(null,G,R),e)},useLayoutEffect:function(R,G){return m1(4,2,R,G)},useMemo:function(R,G){var e=Bh();return G=G===void 0?null:G,R=R(),e.memoizedState=[R,G],R},useReducer:function(R,G,e){var z=Bh();return G=e!==void 0?e(G):G,z.memoizedState=z.baseState=G,R=z.queue={pending:null,dispatch:null,lastRenderedReducer:R,lastRenderedState:G},R=R.dispatch=b1.bind(null,_s,R),[z.memoizedState,R]},useRef:xw,useState:pd,useDebugValue:x1,useDeferredValue:function(R){var G=pd(R),e=G[0],z=G[1];return bw(function(){var N=cf.transition;cf.transition=1;try{z(R)}finally{cf.transition=N}},[R]),e},useTransition:function(){var R=pd(!1),G=R[0];return R=V4.bind(null,R[1]),xw(R),[R,G]},useMutableSource:function(R,G,e){var z=Bh();return z.memoizedState={refs:{getSnapshot:G,setSnapshot:null},source:R,subscribe:e},mw(z,R,G,e)},useOpaqueIdentifier:function(){if(lc){var R=!1,G=z4(function(){throw R||(R=!0,e("r:"+($y++).toString(36))),Error(Pa(355))}),e=pd(G)[1];return(_s.mode&2)==0&&(_s.flags|=516,gg(5,function(){e("r:"+($y++).toString(36))},void 0,null)),G}return G="r:"+($y++).toString(36),pd(G),G},unstable_isNewReconciler:!1},G4={readContext:ff,useCallback:Aw,useContext:ff,useEffect:yg,useImperativeHandle:Tw,useLayoutEffect:_w,useMemo:Mw,useReducer:hd,useRef:mg,useState:function(){return hd(uc)},useDebugValue:x1,useDeferredValue:function(R){var G=hd(uc),e=G[0],z=G[1];return yg(function(){var N=cf.transition;cf.transition=1;try{z(R)}finally{cf.transition=N}},[R]),e},useTransition:function(){var R=hd(uc)[0];return[mg().current,R]},useMutableSource:yw,useOpaqueIdentifier:function(){return hd(uc)[0]},unstable_isNewReconciler:!1},W4={readContext:ff,useCallback:Aw,useContext:ff,useEffect:yg,useImperativeHandle:Tw,useLayoutEffect:_w,useMemo:Mw,useReducer:vd,useRef:mg,useState:function(){return vd(uc)},useDebugValue:x1,useDeferredValue:function(R){var G=vd(uc),e=G[0],z=G[1];return yg(function(){var N=cf.transition;cf.transition=1;try{z(R)}finally{cf.transition=N}},[R]),e},useTransition:function(){var R=vd(uc)[0];return[mg().current,R]},useMutableSource:yw,useOpaqueIdentifier:function(){return vd(uc)[0]},unstable_isNewReconciler:!1},Y4=Lh.ReactCurrentOwner,Nf=!1;function Au(R,G,e,z){G.child=R===null?cw(G,null,e,z):hg(G,R.child,e,z)}function Sw(R,G,e,z,N){e=e.render;var u=G.ref;return Gv(G,N),z=g1(R,G,e,z,u,N),R!==null&&!Nf?(G.updateQueue=R.updateQueue,G.flags&=-517,R.lanes&=~N,kc(R,G,N)):(G.flags|=1,Au(R,G,z,N),G.child)}function kw(R,G,e,z,N,u){if(R===null){var s=e.type;return typeof s=="function"&&!G1(s)&&s.defaultProps===void 0&&e.compare===null&&e.defaultProps===void 0?(G.tag=15,G.type=s,Ew(R,G,s,z,N,u)):(R=Cg(e.type,null,z,G,G.mode,u),R.ref=G.ref,R.return=G,G.child=R)}return s=R.child,(N&u)==0&&(N=s.memoizedProps,e=e.compare,e=e!==null?e:$p,e(N,z)&&R.ref===G.ref)?kc(R,G,u):(G.flags|=1,R=fh(s,z),R.ref=G.ref,R.return=G,G.child=R)}function Ew(R,G,e,z,N,u){if(R!==null&&$p(R.memoizedProps,z)&&R.ref===G.ref)if(Nf=!1,(u&N)!=0)(R.flags&16384)!=0&&(Nf=!0);else return G.lanes=R.lanes,kc(R,G,u);return w1(R,G,e,z,u)}function _1(R,G,e){var z=G.pendingProps,N=z.children,u=R!==null?R.memoizedState:null;if(z.mode==="hidden"||z.mode==="unstable-defer-without-hiding")if((G.mode&4)==0)G.memoizedState={baseLanes:0},Eg(G,e);else if((e&1073741824)!=0)G.memoizedState={baseLanes:0},Eg(G,u!==null?u.baseLanes:e);else return R=u!==null?u.baseLanes|e:e,G.lanes=G.childLanes=1073741824,G.memoizedState={baseLanes:R},Eg(G,R),null;else u!==null?(z=u.baseLanes|e,G.memoizedState=null):z=e,Eg(G,z);return Au(R,G,N,e),G.child}function Cw(R,G){var e=G.ref;(R===null&&e!==null||R!==null&&R.ref!==e)&&(G.flags|=128)}function w1(R,G,e,z,N){var u=wu(e)?zh:Ol.current;return u=Uv(G,u),Gv(G,N),e=g1(R,G,e,z,u,N),R!==null&&!Nf?(G.updateQueue=R.updateQueue,G.flags&=-517,R.lanes&=~N,kc(R,G,N)):(G.flags|=1,Au(R,G,e,N),G.child)}function Lw(R,G,e,z,N){if(wu(e)){var u=!0;rg(G)}else u=!1;if(Gv(G,N),G.stateNode===null)R!==null&&(R.alternate=null,G.alternate=null,G.flags|=2),lw(G,e,z),u1(G,e,z,N),z=!0;else if(R===null){var s=G.stateNode,m=G.memoizedProps;s.props=m;var x=s.context,t=e.contextType;typeof t=="object"&&t!==null?t=ff(t):(t=wu(e)?zh:Ol.current,t=Uv(G,t));var i=e.getDerivedStateFromProps,a=typeof i=="function"||typeof s.getSnapshotBeforeUpdate=="function";a||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m!==z||x!==t)&&uw(G,s,z,t),th=!1;var r=G.memoizedState;s.state=r,ad(G,z,s,N),x=G.memoizedState,m!==z||r!==x||_u.current||th?(typeof i=="function"&&(lg(G,e,i,z),x=G.memoizedState),(m=th||sw(G,e,m,z,r,x,t))?(a||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(G.flags|=4)):(typeof s.componentDidMount=="function"&&(G.flags|=4),G.memoizedProps=z,G.memoizedState=x),s.props=z,s.state=x,s.context=t,z=m):(typeof s.componentDidMount=="function"&&(G.flags|=4),z=!1)}else{s=G.stateNode,nw(R,G),m=G.memoizedProps,t=G.type===G.elementType?m:Of(G.type,m),s.props=t,a=G.pendingProps,r=s.context,x=e.contextType,typeof x=="object"&&x!==null?x=ff(x):(x=wu(e)?zh:Ol.current,x=Uv(G,x));var n=e.getDerivedStateFromProps;(i=typeof n=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(m!==a||r!==x)&&uw(G,s,z,x),th=!1,r=G.memoizedState,s.state=r,ad(G,z,s,N);var f=G.memoizedState;m!==a||r!==f||_u.current||th?(typeof n=="function"&&(lg(G,e,n,z),f=G.memoizedState),(t=th||sw(G,e,t,z,r,f,x))?(i||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(z,f,x),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(z,f,x)),typeof s.componentDidUpdate=="function"&&(G.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(G.flags|=256)):(typeof s.componentDidUpdate!="function"||m===R.memoizedProps&&r===R.memoizedState||(G.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||m===R.memoizedProps&&r===R.memoizedState||(G.flags|=256),G.memoizedProps=z,G.memoizedState=f),s.props=z,s.state=f,s.context=x,z=t):(typeof s.componentDidUpdate!="function"||m===R.memoizedProps&&r===R.memoizedState||(G.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||m===R.memoizedProps&&r===R.memoizedState||(G.flags|=256),z=!1)}return T1(R,G,e,z,u,N)}function T1(R,G,e,z,N,u){Cw(R,G);var s=(G.flags&64)!=0;if(!z&&!s)return N&&X_(G,e,!1),kc(R,G,u);z=G.stateNode,Y4.current=G;var m=s&&typeof e.getDerivedStateFromError!="function"?null:z.render();return G.flags|=1,R!==null&&s?(G.child=hg(G,R.child,null,u),G.child=hg(G,null,m,u)):Au(R,G,m,u),G.memoizedState=z.state,N&&X_(G,e,!0),G.child}function Pw(R){var G=R.stateNode;G.pendingContext?Y_(R,G.pendingContext,G.pendingContext!==G.context):G.context&&Y_(R,G.context,!1),f1(R,G.containerInfo)}var bg={dehydrated:null,retryLane:0};function Rw(R,G,e){var z=G.pendingProps,N=hs.current,u=!1,s;return(s=(G.flags&64)!=0)||(s=R!==null&&R.memoizedState===null?!1:(N&2)!=0),s?(u=!0,G.flags&=-65):R!==null&&R.memoizedState===null||z.fallback===void 0||z.unstable_avoidThisFallback===!0||(N|=1),cs(hs,N&1),R===null?(z.fallback!==void 0&&h1(G),R=z.children,N=z.fallback,u?(R=Dw(G,R,N,e),G.child.memoizedState={baseLanes:e},G.memoizedState=bg,R):typeof z.unstable_expectedLoadTime=="number"?(R=Dw(G,R,N,e),G.child.memoizedState={baseLanes:e},G.memoizedState=bg,G.lanes=33554432,R):(e=W1({mode:"visible",children:R},G.mode,e,null),e.return=G,G.child=e)):R.memoizedState!==null?u?(z=zw(R,G,z.children,z.fallback,e),u=G.child,N=R.child.memoizedState,u.memoizedState=N===null?{baseLanes:e}:{baseLanes:N.baseLanes|e},u.childLanes=R.childLanes&~e,G.memoizedState=bg,z):(e=Iw(R,G,z.children,e),G.memoizedState=null,e):u?(z=zw(R,G,z.children,z.fallback,e),u=G.child,N=R.child.memoizedState,u.memoizedState=N===null?{baseLanes:e}:{baseLanes:N.baseLanes|e},u.childLanes=R.childLanes&~e,G.memoizedState=bg,z):(e=Iw(R,G,z.children,e),G.memoizedState=null,e)}function Dw(R,G,e,z){var N=R.mode,u=R.child;return G={mode:"hidden",children:G},(N&2)==0&&u!==null?(u.childLanes=0,u.pendingProps=G):u=W1(G,N,0,null),e=Qv(e,N,z,null),u.return=R,e.return=R,u.sibling=e,R.child=u,e}function Iw(R,G,e,z){var N=R.child;return R=N.sibling,e=fh(N,{mode:"visible",children:e}),(G.mode&2)==0&&(e.lanes=z),e.return=G,e.sibling=null,R!==null&&(R.nextEffect=null,R.flags=8,G.firstEffect=G.lastEffect=R),G.child=e}function zw(R,G,e,z,N){var u=G.mode,s=R.child;R=s.sibling;var m={mode:"hidden",children:e};return(u&2)==0&&G.child!==s?(e=G.child,e.childLanes=0,e.pendingProps=m,s=e.lastEffect,s!==null?(G.firstEffect=e.firstEffect,G.lastEffect=s,s.nextEffect=null):G.firstEffect=G.lastEffect=null):e=fh(s,m),R!==null?z=fh(R,z):(z=Qv(z,u,N,null),z.flags|=2),z.return=G,e.return=G,e.sibling=z,G.child=e,z}function Fw(R,G){R.lanes|=G;var e=R.alternate;e!==null&&(e.lanes|=G),rw(R.return,G)}function A1(R,G,e,z,N,u){var s=R.memoizedState;s===null?R.memoizedState={isBackwards:G,rendering:null,renderingStartTime:0,last:z,tail:e,tailMode:N,lastEffect:u}:(s.isBackwards=G,s.rendering=null,s.renderingStartTime=0,s.last=z,s.tail=e,s.tailMode=N,s.lastEffect=u)}function Ow(R,G,e){var z=G.pendingProps,N=z.revealOrder,u=z.tail;if(Au(R,G,z.children,e),z=hs.current,(z&2)!=0)z=z&1|2,G.flags|=64;else{if(R!==null&&(R.flags&64)!=0)e:for(R=G.child;R!==null;){if(R.tag===13)R.memoizedState!==null&&Fw(R,e);else if(R.tag===19)Fw(R,e);else if(R.child!==null){R.child.return=R,R=R.child;continue}if(R===G)break e;for(;R.sibling===null;){if(R.return===null||R.return===G)break e;R=R.return}R.sibling.return=R.return,R=R.sibling}z&=1}if(cs(hs,z),(G.mode&2)==0)G.memoizedState=null;else switch(N){case"forwards":for(e=G.child,N=null;e!==null;)R=e.alternate,R!==null&&vg(R)===null&&(N=e),e=e.sibling;e=N,e===null?(N=G.child,G.child=null):(N=e.sibling,e.sibling=null),A1(G,!1,N,e,u,G.lastEffect);break;case"backwards":for(e=null,N=G.child,G.child=null;N!==null;){if(R=N.alternate,R!==null&&vg(R)===null){G.child=N;break}R=N.sibling,N.sibling=e,e=N,N=R}A1(G,!0,e,null,u,G.lastEffect);break;case"together":A1(G,!1,null,null,void 0,G.lastEffect);break;default:G.memoizedState=null}return G.child}function kc(R,G,e){if(R!==null&&(G.dependencies=R.dependencies),gd|=G.lanes,(e&G.childLanes)!=0){if(R!==null&&G.child!==R.child)throw Error(Pa(153));if(G.child!==null){for(R=G.child,e=fh(R,R.pendingProps),G.child=e,e.return=G;R.sibling!==null;)R=R.sibling,e=e.sibling=fh(R,R.pendingProps),e.return=G;e.sibling=null}return G.child}return null}var Nw,M1,Bw,Uw;Nw=function(R,G){for(var e=G.child;e!==null;){if(e.tag===5||e.tag===6)R.appendChild(e.stateNode);else if(e.tag!==4&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===G)break;for(;e.sibling===null;){if(e.return===null||e.return===G)return;e=e.return}e.sibling.return=e.return,e=e.sibling}};M1=function(){};Bw=function(R,G,e,z){var N=R.memoizedProps;if(N!==z){R=G.stateNode,Nh(sc.current);var u=null;switch(e){case"input":N=uy(R,N),z=uy(R,z),u=[];break;case"option":N=hy(R,N),z=hy(R,z),u=[];break;case"select":N=Ko({},N,{value:void 0}),z=Ko({},z,{value:void 0}),u=[];break;case"textarea":N=vy(R,N),z=vy(R,z),u=[];break;default:typeof N.onClick!="function"&&typeof z.onClick=="function"&&(R.onclick=Q0)}gy(e,z);var s;e=null;for(t in N)if(!z.hasOwnProperty(t)&&N.hasOwnProperty(t)&&N[t]!=null)if(t==="style"){var m=N[t];for(s in m)m.hasOwnProperty(s)&&(e||(e={}),e[s]="")}else t!=="dangerouslySetInnerHTML"&&t!=="children"&&t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&t!=="autoFocus"&&(Lp.hasOwnProperty(t)?u||(u=[]):(u=u||[]).push(t,null));for(t in z){var x=z[t];if(m=N!=null?N[t]:void 0,z.hasOwnProperty(t)&&x!==m&&(x!=null||m!=null))if(t==="style")if(m){for(s in m)!m.hasOwnProperty(s)||x&&x.hasOwnProperty(s)||(e||(e={}),e[s]="");for(s in x)x.hasOwnProperty(s)&&m[s]!==x[s]&&(e||(e={}),e[s]=x[s])}else e||(u||(u=[]),u.push(t,e)),e=x;else t==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,m=m?m.__html:void 0,x!=null&&m!==x&&(u=u||[]).push(t,x)):t==="children"?typeof x!="string"&&typeof x!="number"||(u=u||[]).push(t,""+x):t!=="suppressContentEditableWarning"&&t!=="suppressHydrationWarning"&&(Lp.hasOwnProperty(t)?(x!=null&&t==="onScroll"&&Go("scroll",R),u||m===x||(u=[])):typeof x=="object"&&x!==null&&x.$$typeof===ay?x.toString():(u=u||[]).push(t,x))}e&&(u=u||[]).push("style",e);var t=u;(G.updateQueue=t)&&(G.flags|=4)}};Uw=function(R,G,e,z){e!==z&&(G.flags|=4)};function dd(R,G){if(!lc)switch(R.tailMode){case"hidden":G=R.tail;for(var e=null;G!==null;)G.alternate!==null&&(e=G),G=G.sibling;e===null?R.tail=null:e.sibling=null;break;case"collapsed":e=R.tail;for(var z=null;e!==null;)e.alternate!==null&&(z=e),e=e.sibling;z===null?G||R.tail===null?R.tail=null:R.tail.sibling=null:z.sibling=null}}function j4(R,G,e){var z=G.pendingProps;switch(G.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return wu(G.type)&&tg(),null;case 3:return Wv(),Wo(_u),Wo(Ol),p1(),z=G.stateNode,z.pendingContext&&(z.context=z.pendingContext,z.pendingContext=null),(R===null||R.child===null)&&(pg(G)?G.flags|=4:z.hydrate||(G.flags|=256)),M1(G),null;case 5:c1(G);var N=Nh(ld.current);if(e=G.type,R!==null&&G.stateNode!=null)Bw(R,G,e,z,N),R.ref!==G.ref&&(G.flags|=128);else{if(!z){if(G.stateNode===null)throw Error(Pa(166));return null}if(R=Nh(sc.current),pg(G)){z=G.stateNode,e=G.type;var u=G.memoizedProps;switch(z[$c]=G,z[q0]=u,e){case"dialog":Go("cancel",z),Go("close",z);break;case"iframe":case"object":case"embed":Go("load",z);break;case"video":case"audio":for(R=0;R<ed.length;R++)Go(ed[R],z);break;case"source":Go("error",z);break;case"img":case"image":case"link":Go("error",z),Go("load",z);break;case"details":Go("toggle",z);break;case"input":L2(z,u),Go("invalid",z);break;case"select":z._wrapperState={wasMultiple:!!u.multiple},Go("invalid",z);break;case"textarea":D2(z,u),Go("invalid",z)}gy(e,u),R=null;for(var s in u)u.hasOwnProperty(s)&&(N=u[s],s==="children"?typeof N=="string"?z.textContent!==N&&(R=["children",N]):typeof N=="number"&&z.textContent!==""+N&&(R=["children",""+N]):Lp.hasOwnProperty(s)&&N!=null&&s==="onScroll"&&Go("scroll",z));switch(e){case"input":I0(z),R2(z,u,!0);break;case"textarea":I0(z),z2(z);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(z.onclick=Q0)}z=R,G.updateQueue=z,z!==null&&(G.flags|=4)}else{switch(s=N.nodeType===9?N:N.ownerDocument,R===py.html&&(R=F2(e)),R===py.html?e==="script"?(R=s.createElement("div"),R.innerHTML="<script><\/script>",R=R.removeChild(R.firstChild)):typeof z.is=="string"?R=s.createElement(e,{is:z.is}):(R=s.createElement(e),e==="select"&&(s=R,z.multiple?s.multiple=!0:z.size&&(s.size=z.size))):R=s.createElementNS(R,e),R[$c]=G,R[q0]=z,Nw(R,G,!1,!1),G.stateNode=R,s=my(e,z),e){case"dialog":Go("cancel",R),Go("close",R),N=z;break;case"iframe":case"object":case"embed":Go("load",R),N=z;break;case"video":case"audio":for(N=0;N<ed.length;N++)Go(ed[N],R);N=z;break;case"source":Go("error",R),N=z;break;case"img":case"image":case"link":Go("error",R),Go("load",R),N=z;break;case"details":Go("toggle",R),N=z;break;case"input":L2(R,z),N=uy(R,z),Go("invalid",R);break;case"option":N=hy(R,z);break;case"select":R._wrapperState={wasMultiple:!!z.multiple},N=Ko({},z,{value:void 0}),Go("invalid",R);break;case"textarea":D2(R,z),N=vy(R,z),Go("invalid",R);break;default:N=z}gy(e,N);var m=N;for(u in m)if(m.hasOwnProperty(u)){var x=m[u];u==="style"?B2(R,x):u==="dangerouslySetInnerHTML"?(x=x?x.__html:void 0,x!=null&&O2(R,x)):u==="children"?typeof x=="string"?(e!=="textarea"||x!=="")&&Fp(R,x):typeof x=="number"&&Fp(R,""+x):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Lp.hasOwnProperty(u)?x!=null&&u==="onScroll"&&Go("scroll",R):x!=null&&$m(R,u,x,s))}switch(e){case"input":I0(R),R2(R,z,!1);break;case"textarea":I0(R),z2(R);break;case"option":z.value!=null&&R.setAttribute("value",""+jc(z.value));break;case"select":R.multiple=!!z.multiple,u=z.value,u!=null?Sv(R,!!z.multiple,u,!1):z.defaultValue!=null&&Sv(R,!!z.multiple,z.defaultValue,!0);break;default:typeof N.onClick=="function"&&(R.onclick=Q0)}U_(e,z)&&(G.flags|=4)}G.ref!==null&&(G.flags|=128)}return null;case 6:if(R&&G.stateNode!=null)Uw(R,G,R.memoizedProps,z);else{if(typeof z!="string"&&G.stateNode===null)throw Error(Pa(166));e=Nh(ld.current),Nh(sc.current),pg(G)?(z=G.stateNode,e=G.memoizedProps,z[$c]=G,z.nodeValue!==e&&(G.flags|=4)):(z=(e.nodeType===9?e:e.ownerDocument).createTextNode(z),z[$c]=G,G.stateNode=z)}return null;case 13:return Wo(hs),z=G.memoizedState,(G.flags&64)!=0?(G.lanes=e,G):(z=z!==null,e=!1,R===null?G.memoizedProps.fallback!==void 0&&pg(G):e=R.memoizedState!==null,z&&!e&&(G.mode&2)!=0&&(R===null&&G.memoizedProps.unstable_avoidThisFallback!==!0||(hs.current&1)!=0?bl===0&&(bl=3):((bl===0||bl===3)&&(bl=4),tu===null||(gd&134217727)==0&&(Xv&134217727)==0||Kv(tu,Ul))),(z||e)&&(G.flags|=4),null);case 4:return Wv(),M1(G),R===null&&z_(G.stateNode.containerInfo),null;case 10:return s1(G),null;case 17:return wu(G.type)&&tg(),null;case 19:if(Wo(hs),z=G.memoizedState,z===null)return null;if(u=(G.flags&64)!=0,s=z.rendering,s===null)if(u)dd(z,!1);else{if(bl!==0||R!==null&&(R.flags&64)!=0)for(R=G.child;R!==null;){if(s=vg(R),s!==null){for(G.flags|=64,dd(z,!1),u=s.updateQueue,u!==null&&(G.updateQueue=u,G.flags|=4),z.lastEffect===null&&(G.firstEffect=null),G.lastEffect=z.lastEffect,z=e,e=G.child;e!==null;)u=e,R=z,u.flags&=2,u.nextEffect=null,u.firstEffect=null,u.lastEffect=null,s=u.alternate,s===null?(u.childLanes=0,u.lanes=R,u.child=null,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,u.type=s.type,R=s.dependencies,u.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),e=e.sibling;return cs(hs,hs.current&1|2),G.child}R=R.sibling}z.tail!==null&&Nl()>F1&&(G.flags|=64,u=!0,dd(z,!1),G.lanes=33554432)}else{if(!u)if(R=vg(s),R!==null){if(G.flags|=64,u=!0,e=R.updateQueue,e!==null&&(G.updateQueue=e,G.flags|=4),dd(z,!0),z.tail===null&&z.tailMode==="hidden"&&!s.alternate&&!lc)return G=G.lastEffect=z.lastEffect,G!==null&&(G.nextEffect=null),null}else 2*Nl()-z.renderingStartTime>F1&&e!==1073741824&&(G.flags|=64,u=!0,dd(z,!1),G.lanes=33554432);z.isBackwards?(s.sibling=G.child,G.child=s):(e=z.last,e!==null?e.sibling=s:G.child=s,z.last=s)}return z.tail!==null?(e=z.tail,z.rendering=e,z.tail=e.sibling,z.lastEffect=G.lastEffect,z.renderingStartTime=Nl(),e.sibling=null,G=hs.current,cs(hs,u?G&1|2:G&1),e):null;case 23:case 24:return H1(),R!==null&&R.memoizedState!==null!=(G.memoizedState!==null)&&z.mode!=="unstable-defer-without-hiding"&&(G.flags|=4),null}throw Error(Pa(156,G.tag))}function X4(R){switch(R.tag){case 1:wu(R.type)&&tg();var G=R.flags;return G&4096?(R.flags=G&-4097|64,R):null;case 3:if(Wv(),Wo(_u),Wo(Ol),p1(),G=R.flags,(G&64)!=0)throw Error(Pa(285));return R.flags=G&-4097|64,R;case 5:return c1(R),null;case 13:return Wo(hs),G=R.flags,G&4096?(R.flags=G&-4097|64,R):null;case 19:return Wo(hs),null;case 4:return Wv(),null;case 10:return s1(R),null;case 23:case 24:return H1(),null;default:return null}}function S1(R,G){try{var e="",z=G;do e+=kS(z),z=z.return;while(z);var N=e}catch(u){N=`
Error generating stack: `+u.message+`
`+u.stack}return{value:R,source:G,stack:N}}function k1(R,G){try{console.error(G.value)}catch(e){setTimeout(function(){throw e})}}var Z4=typeof WeakMap=="function"?WeakMap:Map;function Vw(R,G,e){e=rh(-1,e),e.tag=3,e.payload={element:null};var z=G.value;return e.callback=function(){Tg||(Tg=!0,O1=z),k1(R,G)},e}function Hw(R,G,e){e=rh(-1,e),e.tag=3;var z=R.type.getDerivedStateFromError;if(typeof z=="function"){var N=G.value;e.payload=function(){return k1(R,G),z(N)}}var u=R.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(e.callback=function(){typeof z!="function"&&(fc===null?fc=new Set([this]):fc.add(this),k1(R,G));var s=G.stack;this.componentDidCatch(G.value,{componentStack:s!==null?s:""})}),e}var K4=typeof WeakSet=="function"?WeakSet:Set;function Gw(R){var G=R.ref;if(G!==null)if(typeof G=="function")try{G(null)}catch(e){uh(R,e)}else G.current=null}function J4(R,G){switch(G.tag){case 0:case 11:case 15:case 22:return;case 1:if(G.flags&256&&R!==null){var e=R.memoizedProps,z=R.memoizedState;R=G.stateNode,G=R.getSnapshotBeforeUpdate(G.elementType===G.type?e:Of(G.type,e),z),R.__reactInternalSnapshotBeforeUpdate=G}return;case 3:G.flags&256&&Qy(G.stateNode.containerInfo);return;case 5:case 6:case 4:case 17:return}throw Error(Pa(163))}function Q4(R,G,e){switch(e.tag){case 0:case 11:case 15:case 22:if(G=e.updateQueue,G=G!==null?G.lastEffect:null,G!==null){R=G=G.next;do{if((R.tag&3)==3){var z=R.create;R.destroy=z()}R=R.next}while(R!==G)}if(G=e.updateQueue,G=G!==null?G.lastEffect:null,G!==null){R=G=G.next;do{var N=R;z=N.next,N=N.tag,(N&4)!=0&&(N&1)!=0&&(a3(e,R),ik(e,R)),R=z}while(R!==G)}return;case 1:R=e.stateNode,e.flags&4&&(G===null?R.componentDidMount():(z=e.elementType===e.type?G.memoizedProps:Of(e.type,G.memoizedProps),R.componentDidUpdate(z,G.memoizedState,R.__reactInternalSnapshotBeforeUpdate))),G=e.updateQueue,G!==null&&iw(e,G,R);return;case 3:if(G=e.updateQueue,G!==null){if(R=null,e.child!==null)switch(e.child.tag){case 5:R=e.child.stateNode;break;case 1:R=e.child.stateNode}iw(e,G,R)}return;case 5:R=e.stateNode,G===null&&e.flags&4&&U_(e.type,e.memoizedProps)&&R.focus();return;case 6:return;case 4:return;case 12:return;case 13:e.memoizedState===null&&(e=e.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&t_(e))));return;case 19:case 17:case 20:case 21:case 23:case 24:return}throw Error(Pa(163))}function Ww(R,G){for(var e=R;;){if(e.tag===5){var z=e.stateNode;if(G)z=z.style,typeof z.setProperty=="function"?z.setProperty("display","none","important"):z.display="none";else{z=e.stateNode;var N=e.memoizedProps.style;N=N!=null&&N.hasOwnProperty("display")?N.display:null,z.style.display=N2("display",N)}}else if(e.tag===6)e.stateNode.nodeValue=G?"":e.memoizedProps;else if((e.tag!==23&&e.tag!==24||e.memoizedState===null||e===R)&&e.child!==null){e.child.return=e,e=e.child;continue}if(e===R)break;for(;e.sibling===null;){if(e.return===null||e.return===R)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function Yw(R,G){if(Fh&&typeof Fh.onCommitFiberUnmount=="function")try{Fh.onCommitFiberUnmount(e1,G)}catch{}switch(G.tag){case 0:case 11:case 14:case 15:case 22:if(R=G.updateQueue,R!==null&&(R=R.lastEffect,R!==null)){var e=R=R.next;do{var z=e,N=z.destroy;if(z=z.tag,N!==void 0)if((z&4)!=0)a3(G,e);else{z=G;try{N()}catch(u){uh(z,u)}}e=e.next}while(e!==R)}break;case 1:if(Gw(G),R=G.stateNode,typeof R.componentWillUnmount=="function")try{R.props=G.memoizedProps,R.state=G.memoizedState,R.componentWillUnmount()}catch(u){uh(G,u)}break;case 5:Gw(G);break;case 4:Kw(R,G)}}function jw(R){R.alternate=null,R.child=null,R.dependencies=null,R.firstEffect=null,R.lastEffect=null,R.memoizedProps=null,R.memoizedState=null,R.pendingProps=null,R.return=null,R.updateQueue=null}function Xw(R){return R.tag===5||R.tag===3||R.tag===4}function Zw(R){e:{for(var G=R.return;G!==null;){if(Xw(G))break e;G=G.return}throw Error(Pa(160))}var e=G;switch(G=e.stateNode,e.tag){case 5:var z=!1;break;case 3:G=G.containerInfo,z=!0;break;case 4:G=G.containerInfo,z=!0;break;default:throw Error(Pa(161))}e.flags&16&&(Fp(G,""),e.flags&=-17);e:t:for(e=R;;){for(;e.sibling===null;){if(e.return===null||Xw(e.return)){e=null;break e}e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2)){e=e.stateNode;break e}}z?E1(R,e,G):C1(R,e,G)}function E1(R,G,e){var z=R.tag,N=z===5||z===6;if(N)R=N?R.stateNode:R.stateNode.instance,G?e.nodeType===8?e.parentNode.insertBefore(R,G):e.insertBefore(R,G):(e.nodeType===8?(G=e.parentNode,G.insertBefore(R,e)):(G=e,G.appendChild(R)),e=e._reactRootContainer,e!=null||G.onclick!==null||(G.onclick=Q0));else if(z!==4&&(R=R.child,R!==null))for(E1(R,G,e),R=R.sibling;R!==null;)E1(R,G,e),R=R.sibling}function C1(R,G,e){var z=R.tag,N=z===5||z===6;if(N)R=N?R.stateNode:R.stateNode.instance,G?e.insertBefore(R,G):e.appendChild(R);else if(z!==4&&(R=R.child,R!==null))for(C1(R,G,e),R=R.sibling;R!==null;)C1(R,G,e),R=R.sibling}function Kw(R,G){for(var e=G,z=!1,N,u;;){if(!z){z=e.return;e:for(;;){if(z===null)throw Error(Pa(160));switch(N=z.stateNode,z.tag){case 5:u=!1;break e;case 3:N=N.containerInfo,u=!0;break e;case 4:N=N.containerInfo,u=!0;break e}z=z.return}z=!0}if(e.tag===5||e.tag===6){e:for(var s=R,m=e,x=m;;)if(Yw(s,x),x.child!==null&&x.tag!==4)x.child.return=x,x=x.child;else{if(x===m)break e;for(;x.sibling===null;){if(x.return===null||x.return===m)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}u?(s=N,m=e.stateNode,s.nodeType===8?s.parentNode.removeChild(m):s.removeChild(m)):N.removeChild(e.stateNode)}else if(e.tag===4){if(e.child!==null){N=e.stateNode.containerInfo,u=!0,e.child.return=e,e=e.child;continue}}else if(Yw(R,e),e.child!==null){e.child.return=e,e=e.child;continue}if(e===G)break;for(;e.sibling===null;){if(e.return===null||e.return===G)return;e=e.return,e.tag===4&&(z=!1)}e.sibling.return=e.return,e=e.sibling}}function L1(R,G){switch(G.tag){case 0:case 11:case 14:case 15:case 22:var e=G.updateQueue;if(e=e!==null?e.lastEffect:null,e!==null){var z=e=e.next;do(z.tag&3)==3&&(R=z.destroy,z.destroy=void 0,R!==void 0&&R()),z=z.next;while(z!==e)}return;case 1:return;case 5:if(e=G.stateNode,e!=null){z=G.memoizedProps;var N=R!==null?R.memoizedProps:z;R=G.type;var u=G.updateQueue;if(G.updateQueue=null,u!==null){for(e[q0]=z,R==="input"&&z.type==="radio"&&z.name!=null&&P2(e,z),my(R,N),G=my(R,z),N=0;N<u.length;N+=2){var s=u[N],m=u[N+1];s==="style"?B2(e,m):s==="dangerouslySetInnerHTML"?O2(e,m):s==="children"?Fp(e,m):$m(e,s,m,G)}switch(R){case"input":fy(e,z);break;case"textarea":I2(e,z);break;case"select":R=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!z.multiple,u=z.value,u!=null?Sv(e,!!z.multiple,u,!1):R!==!!z.multiple&&(z.defaultValue!=null?Sv(e,!!z.multiple,z.defaultValue,!0):Sv(e,!!z.multiple,z.multiple?[]:"",!1))}}}return;case 6:if(G.stateNode===null)throw Error(Pa(162));G.stateNode.nodeValue=G.memoizedProps;return;case 3:e=G.stateNode,e.hydrate&&(e.hydrate=!1,t_(e.containerInfo));return;case 12:return;case 13:G.memoizedState!==null&&(z1=Nl(),Ww(G.child,!0)),Jw(G);return;case 19:Jw(G);return;case 17:return;case 23:case 24:Ww(G,G.memoizedState!==null);return}throw Error(Pa(163))}function Jw(R){var G=R.updateQueue;if(G!==null){R.updateQueue=null;var e=R.stateNode;e===null&&(e=R.stateNode=new K4),G.forEach(function(z){var N=lk.bind(null,R,z);e.has(z)||(e.add(z),z.then(N,N))})}}function $4(R,G){return R!==null&&(R=R.memoizedState,R===null||R.dehydrated!==null)?(G=G.memoizedState,G!==null&&G.dehydrated===null):!1}var q4=Math.ceil,_g=Lh.ReactCurrentDispatcher,P1=Lh.ReactCurrentOwner,pi=0,tu=null,Gs=null,Ul=0,Vh=0,R1=qc(0),bl=0,wg=null,jv=0,gd=0,Xv=0,D1=0,I1=null,z1=0,F1=1/0;function Zv(){F1=Nl()+500}var $a=null,Tg=!1,O1=null,fc=null,ih=!1,md=null,yd=90,N1=[],B1=[],Ec=null,xd=0,U1=null,Ag=-1,Cc=0,Mg=0,bd=null,Sg=!1;function Gu(){return(pi&48)!=0?Nl():Ag!==-1?Ag:Ag=Nl()}function oh(R){if(R=R.mode,(R&2)==0)return 1;if((R&4)==0)return Vv()===99?1:2;if(Cc===0&&(Cc=jv),U4.transition!==0){Mg!==0&&(Mg=I1!==null?I1.pendingLanes:0),R=Cc;var G=4186112&~Mg;return G&=-G,G===0&&(R=4186112&~R,G=R&-R,G===0&&(G=8192)),G}return R=Vv(),(pi&4)!=0&&R===98?R=H0(12,Cc):(R=GS(R),R=H0(R,Cc)),R}function sh(R,G,e){if(50<xd)throw xd=0,U1=null,Error(Pa(185));if(R=kg(R,G),R===null)return null;G0(R,G,e),R===tu&&(Xv|=G,bl===4&&Kv(R,Ul));var z=Vv();G===1?(pi&8)!=0&&(pi&48)==0?V1(R):(hf(R,e),pi===0&&(Zv(),oc())):((pi&4)==0||z!==98&&z!==99||(Ec===null?Ec=new Set([R]):Ec.add(R)),hf(R,e)),I1=R}function kg(R,G){R.lanes|=G;var e=R.alternate;for(e!==null&&(e.lanes|=G),e=R,R=R.return;R!==null;)R.childLanes|=G,e=R.alternate,e!==null&&(e.childLanes|=G),e=R,R=R.return;return e.tag===3?e.stateNode:null}function hf(R,G){for(var e=R.callbackNode,z=R.suspendedLanes,N=R.pingedLanes,u=R.expirationTimes,s=R.pendingLanes;0<s;){var m=31-Jc(s),x=1<<m,t=u[m];if(t===-1){if((x&z)==0||(x&N)!=0){t=G,Lv(x);var i=zo;u[m]=10<=i?t+250:6<=i?t+5e3:-1}}else t<=G&&(R.expiredLanes|=x);s&=~x}if(z=jp(R,R===tu?Ul:0),G=zo,z===0)e!==null&&(e!==a1&&r1(e),R.callbackNode=null,R.callbackPriority=0);else{if(e!==null){if(R.callbackPriority===G)return;e!==a1&&r1(e)}G===15?(e=V1.bind(null,R),Mc===null?(Mc=[e],ag=t1(ng,tw)):Mc.push(e),e=a1):G===14?e=nd(99,V1.bind(null,R)):(e=WS(G),e=nd(e,Qw.bind(null,R))),R.callbackPriority=G,R.callbackNode=e}}function Qw(R){if(Ag=-1,Mg=Cc=0,(pi&48)!=0)throw Error(Pa(327));var G=R.callbackNode;if(lh()&&R.callbackNode!==G)return null;var e=jp(R,R===tu?Ul:0);if(e===0)return null;var z=e,N=pi;pi|=16;var u=t3();(tu!==R||Ul!==z)&&(Zv(),Jv(R,z));do try{rk();break}catch(m){e3(R,m)}while(1);if(o1(),_g.current=u,pi=N,Gs!==null?z=0:(tu=null,Ul=0,z=bl),(jv&Xv)!=0)Jv(R,0);else if(z!==0){if(z===2&&(pi|=64,R.hydrate&&(R.hydrate=!1,Qy(R.containerInfo)),e=l_(R),e!==0&&(z=_d(R,e))),z===1)throw G=wg,Jv(R,0),Kv(R,e),hf(R,Nl()),G;switch(R.finishedWork=R.current.alternate,R.finishedLanes=e,z){case 0:case 1:throw Error(Pa(345));case 2:Hh(R);break;case 3:if(Kv(R,e),(e&62914560)===e&&(z=z1+500-Nl(),10<z)){if(jp(R,0)!==0)break;if(N=R.suspendedLanes,(N&e)!==e){Gu(),R.pingedLanes|=R.suspendedLanes&N;break}R.timeoutHandle=V_(Hh.bind(null,R),z);break}Hh(R);break;case 4:if(Kv(R,e),(e&4186112)===e)break;for(z=R.eventTimes,N=-1;0<e;){var s=31-Jc(e);u=1<<s,s=z[s],s>N&&(N=s),e&=~u}if(e=N,e=Nl()-e,e=(120>e?120:480>e?480:1080>e?1080:1920>e?1920:3e3>e?3e3:4320>e?4320:1960*q4(e/1960))-e,10<e){R.timeoutHandle=V_(Hh.bind(null,R),e);break}Hh(R);break;case 5:Hh(R);break;default:throw Error(Pa(329))}}return hf(R,Nl()),R.callbackNode===G?Qw.bind(null,R):null}function Kv(R,G){for(G&=~D1,G&=~Xv,R.suspendedLanes|=G,R.pingedLanes&=~G,R=R.expirationTimes;0<G;){var e=31-Jc(G),z=1<<e;R[e]=-1,G&=~z}}function V1(R){if((pi&48)!=0)throw Error(Pa(327));if(lh(),R===tu&&(R.expiredLanes&Ul)!=0){var G=Ul,e=_d(R,G);(jv&Xv)!=0&&(G=jp(R,G),e=_d(R,G))}else G=jp(R,0),e=_d(R,G);if(R.tag!==0&&e===2&&(pi|=64,R.hydrate&&(R.hydrate=!1,Qy(R.containerInfo)),G=l_(R),G!==0&&(e=_d(R,G))),e===1)throw e=wg,Jv(R,0),Kv(R,G),hf(R,Nl()),e;return R.finishedWork=R.current.alternate,R.finishedLanes=G,Hh(R),hf(R,Nl()),null}function ek(){if(Ec!==null){var R=Ec;Ec=null,R.forEach(function(G){G.expiredLanes|=24&G.pendingLanes,hf(G,Nl())})}oc()}function $w(R,G){var e=pi;pi|=1;try{return R(G)}finally{pi=e,pi===0&&(Zv(),oc())}}function qw(R,G){var e=pi;pi&=-2,pi|=8;try{return R(G)}finally{pi=e,pi===0&&(Zv(),oc())}}function Eg(R,G){cs(R1,Vh),Vh|=G,jv|=G}function H1(){Vh=R1.current,Wo(R1)}function Jv(R,G){R.finishedWork=null,R.finishedLanes=0;var e=R.timeoutHandle;if(e!==-1&&(R.timeoutHandle=-1,I4(e)),Gs!==null)for(e=Gs.return;e!==null;){var z=e;switch(z.tag){case 1:z=z.type.childContextTypes,z!=null&&tg();break;case 3:Wv(),Wo(_u),Wo(Ol),p1();break;case 5:c1(z);break;case 4:Wv();break;case 13:Wo(hs);break;case 19:Wo(hs);break;case 10:s1(z);break;case 23:case 24:H1()}e=e.return}tu=R,Gs=fh(R.current,null),Ul=Vh=jv=G,bl=0,wg=null,D1=Xv=gd=0}function e3(R,G){do{var e=Gs;try{if(o1(),ud.current=xg,dg){for(var z=_s.memoizedState;z!==null;){var N=z.queue;N!==null&&(N.pending=null),z=z.next}dg=!1}if(fd=0,xl=Bl=_s=null,cd=!1,P1.current=null,e===null||e.return===null){bl=1,wg=G,Gs=null;break}e:{var u=R,s=e.return,m=e,x=G;if(G=Ul,m.flags|=2048,m.firstEffect=m.lastEffect=null,x!==null&&typeof x=="object"&&typeof x.then=="function"){var t=x;if((m.mode&2)==0){var i=m.alternate;i?(m.updateQueue=i.updateQueue,m.memoizedState=i.memoizedState,m.lanes=i.lanes):(m.updateQueue=null,m.memoizedState=null)}var a=(hs.current&1)!=0,r=s;do{var n;if(n=r.tag===13){var f=r.memoizedState;if(f!==null)n=f.dehydrated!==null;else{var l=r.memoizedProps;n=l.fallback===void 0?!1:l.unstable_avoidThisFallback!==!0?!0:!a}}if(n){var o=r.updateQueue;if(o===null){var c=new Set;c.add(t),r.updateQueue=c}else o.add(t);if((r.mode&2)==0){if(r.flags|=64,m.flags|=16384,m.flags&=-2981,m.tag===1)if(m.alternate===null)m.tag=17;else{var h=rh(-1,1);h.tag=2,nh(m,h)}m.lanes|=1;break e}x=void 0,m=G;var d=u.pingCache;if(d===null?(d=u.pingCache=new Z4,x=new Set,d.set(t,x)):(x=d.get(t),x===void 0&&(x=new Set,d.set(t,x))),!x.has(m)){x.add(m);var p=sk.bind(null,u,t,m);t.then(p,p)}r.flags|=4096,r.lanes=G;break e}r=r.return}while(r!==null);x=Error((Mv(m.type)||"A React component")+` suspended while rendering, but no fallback UI was specified.

Add a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.`)}bl!==5&&(bl=2),x=S1(x,m),r=s;do{switch(r.tag){case 3:u=x,r.flags|=4096,G&=-G,r.lanes|=G;var y=Vw(r,u,G);aw(r,y);break e;case 1:u=x;var g=r.type,A=r.stateNode;if((r.flags&64)==0&&(typeof g.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(fc===null||!fc.has(A)))){r.flags|=4096,G&=-G,r.lanes|=G;var b=Hw(r,u,G);aw(r,b);break e}}r=r.return}while(r!==null)}n3(e)}catch(M){G=M,Gs===e&&e!==null&&(Gs=e=e.return);continue}break}while(1)}function t3(){var R=_g.current;return _g.current=xg,R===null?xg:R}function _d(R,G){var e=pi;pi|=16;var z=t3();tu===R&&Ul===G||Jv(R,G);do try{tk();break}catch(N){e3(R,N)}while(1);if(o1(),pi=e,_g.current=z,Gs!==null)throw Error(Pa(261));return tu=null,Ul=0,bl}function tk(){for(;Gs!==null;)r3(Gs)}function rk(){for(;Gs!==null&&!O4();)r3(Gs)}function r3(R){var G=o3(R.alternate,R,Vh);R.memoizedProps=R.pendingProps,G===null?n3(R):Gs=G,P1.current=null}function n3(R){var G=R;do{var e=G.alternate;if(R=G.return,(G.flags&2048)==0){if(e=j4(e,G,Vh),e!==null){Gs=e;return}if(e=G,e.tag!==24&&e.tag!==23||e.memoizedState===null||(Vh&1073741824)!=0||(e.mode&4)==0){for(var z=0,N=e.child;N!==null;)z|=N.lanes|N.childLanes,N=N.sibling;e.childLanes=z}R!==null&&(R.flags&2048)==0&&(R.firstEffect===null&&(R.firstEffect=G.firstEffect),G.lastEffect!==null&&(R.lastEffect!==null&&(R.lastEffect.nextEffect=G.firstEffect),R.lastEffect=G.lastEffect),1<G.flags&&(R.lastEffect!==null?R.lastEffect.nextEffect=G:R.firstEffect=G,R.lastEffect=G))}else{if(e=X4(G),e!==null){e.flags&=2047,Gs=e;return}R!==null&&(R.firstEffect=R.lastEffect=null,R.flags|=2048)}if(G=G.sibling,G!==null){Gs=G;return}Gs=G=R}while(G!==null);bl===0&&(bl=5)}function Hh(R){var G=Vv();return Oh(99,nk.bind(null,R,G)),null}function nk(R,G){do lh();while(md!==null);if((pi&48)!=0)throw Error(Pa(327));var e=R.finishedWork;if(e===null)return null;if(R.finishedWork=null,R.finishedLanes=0,e===R.current)throw Error(Pa(177));R.callbackNode=null;var z=e.lanes|e.childLanes,N=z,u=R.pendingLanes&~N;R.pendingLanes=N,R.suspendedLanes=0,R.pingedLanes=0,R.expiredLanes&=N,R.mutableReadLanes&=N,R.entangledLanes&=N,N=R.entanglements;for(var s=R.eventTimes,m=R.expirationTimes;0<u;){var x=31-Jc(u),t=1<<x;N[x]=0,s[x]=-1,m[x]=-1,u&=~t}if(Ec!==null&&(z&24)==0&&Ec.has(R)&&Ec.delete(R),R===tu&&(Gs=tu=null,Ul=0),1<e.flags?e.lastEffect!==null?(e.lastEffect.nextEffect=e,z=e.firstEffect):z=e:z=e.firstEffect,z!==null){if(N=pi,pi|=32,P1.current=null,Zy=W0,s=E_(),Wy(s)){if("selectionStart"in s)m={start:s.selectionStart,end:s.selectionEnd};else e:if(m=(m=s.ownerDocument)&&m.defaultView||window,(t=m.getSelection&&m.getSelection())&&t.rangeCount!==0){m=t.anchorNode,u=t.anchorOffset,x=t.focusNode,t=t.focusOffset;try{m.nodeType,x.nodeType}catch{m=null;break e}var i=0,a=-1,r=-1,n=0,f=0,l=s,o=null;t:for(;;){for(var c;l!==m||u!==0&&l.nodeType!==3||(a=i+u),l!==x||t!==0&&l.nodeType!==3||(r=i+t),l.nodeType===3&&(i+=l.nodeValue.length),(c=l.firstChild)!==null;)o=l,l=c;for(;;){if(l===s)break t;if(o===m&&++n===u&&(a=i),o===x&&++f===t&&(r=i),(c=l.nextSibling)!==null)break;l=o,o=l.parentNode}l=c}m=a===-1||r===-1?null:{start:a,end:r}}else m=null;m=m||{start:0,end:0}}else m=null;Ky={focusedElem:s,selectionRange:m},W0=!1,bd=null,Sg=!1,$a=z;do try{ak()}catch(M){if($a===null)throw Error(Pa(330));uh($a,M),$a=$a.nextEffect}while($a!==null);bd=null,$a=z;do try{for(s=R;$a!==null;){var h=$a.flags;if(h&16&&Fp($a.stateNode,""),h&128){var d=$a.alternate;if(d!==null){var p=d.ref;p!==null&&(typeof p=="function"?p(null):p.current=null)}}switch(h&1038){case 2:Zw($a),$a.flags&=-3;break;case 6:Zw($a),$a.flags&=-3,L1($a.alternate,$a);break;case 1024:$a.flags&=-1025;break;case 1028:$a.flags&=-1025,L1($a.alternate,$a);break;case 4:L1($a.alternate,$a);break;case 8:m=$a,Kw(s,m);var y=m.alternate;jw(m),y!==null&&jw(y)}$a=$a.nextEffect}}catch(M){if($a===null)throw Error(Pa(330));uh($a,M),$a=$a.nextEffect}while($a!==null);if(p=Ky,d=E_(),h=p.focusedElem,s=p.selectionRange,d!==h&&h&&h.ownerDocument&&k_(h.ownerDocument.documentElement,h)){for(s!==null&&Wy(h)&&(d=s.start,p=s.end,p===void 0&&(p=d),"selectionStart"in h?(h.selectionStart=d,h.selectionEnd=Math.min(p,h.value.length)):(p=(d=h.ownerDocument||document)&&d.defaultView||window,p.getSelection&&(p=p.getSelection(),m=h.textContent.length,y=Math.min(s.start,m),s=s.end===void 0?y:Math.min(s.end,m),!p.extend&&y>s&&(m=s,s=y,y=m),m=S_(h,y),u=S_(h,s),m&&u&&(p.rangeCount!==1||p.anchorNode!==m.node||p.anchorOffset!==m.offset||p.focusNode!==u.node||p.focusOffset!==u.offset)&&(d=d.createRange(),d.setStart(m.node,m.offset),p.removeAllRanges(),y>s?(p.addRange(d),p.extend(u.node,u.offset)):(d.setEnd(u.node,u.offset),p.addRange(d)))))),d=[],p=h;p=p.parentNode;)p.nodeType===1&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<d.length;h++)p=d[h],p.element.scrollLeft=p.left,p.element.scrollTop=p.top}W0=!!Zy,Ky=Zy=null,R.current=e,$a=z;do try{for(h=R;$a!==null;){var g=$a.flags;if(g&36&&Q4(h,$a.alternate,$a),g&128){d=void 0;var A=$a.ref;if(A!==null){var b=$a.stateNode;switch($a.tag){case 5:d=b;break;default:d=b}typeof A=="function"?A(d):A.current=d}}$a=$a.nextEffect}}catch(M){if($a===null)throw Error(Pa(330));uh($a,M),$a=$a.nextEffect}while($a!==null);$a=null,B4(),pi=N}else R.current=e;if(ih)ih=!1,md=R,yd=G;else for($a=z;$a!==null;)G=$a.nextEffect,$a.nextEffect=null,$a.flags&8&&(g=$a,g.sibling=null,g.stateNode=null),$a=G;if(z=R.pendingLanes,z===0&&(fc=null),z===1?R===U1?xd++:(xd=0,U1=R):xd=0,e=e.stateNode,Fh&&typeof Fh.onCommitFiberRoot=="function")try{Fh.onCommitFiberRoot(e1,e,void 0,(e.current.flags&64)==64)}catch{}if(hf(R,Nl()),Tg)throw Tg=!1,R=O1,O1=null,R;return(pi&8)!=0||oc(),null}function ak(){for(;$a!==null;){var R=$a.alternate;Sg||bd===null||(($a.flags&8)!=0?Z2($a,bd)&&(Sg=!0):$a.tag===13&&$4(R,$a)&&Z2($a,bd)&&(Sg=!0));var G=$a.flags;(G&256)!=0&&J4(R,$a),(G&512)==0||ih||(ih=!0,nd(97,function(){return lh(),null})),$a=$a.nextEffect}}function lh(){if(yd!==90){var R=97<yd?97:yd;return yd=90,Oh(R,ok)}return!1}function ik(R,G){N1.push(G,R),ih||(ih=!0,nd(97,function(){return lh(),null}))}function a3(R,G){B1.push(G,R),ih||(ih=!0,nd(97,function(){return lh(),null}))}function ok(){if(md===null)return!1;var R=md;if(md=null,(pi&48)!=0)throw Error(Pa(331));var G=pi;pi|=32;var e=B1;B1=[];for(var z=0;z<e.length;z+=2){var N=e[z],u=e[z+1],s=N.destroy;if(N.destroy=void 0,typeof s=="function")try{s()}catch(x){if(u===null)throw Error(Pa(330));uh(u,x)}}for(e=N1,N1=[],z=0;z<e.length;z+=2){N=e[z],u=e[z+1];try{var m=N.create;N.destroy=m()}catch(x){if(u===null)throw Error(Pa(330));uh(u,x)}}for(m=R.current.firstEffect;m!==null;)R=m.nextEffect,m.nextEffect=null,m.flags&8&&(m.sibling=null,m.stateNode=null),m=R;return pi=G,oc(),!0}function i3(R,G,e){G=S1(e,G),G=Vw(R,G,1),nh(R,G),G=Gu(),R=kg(R,1),R!==null&&(G0(R,1,G),hf(R,G))}function uh(R,G){if(R.tag===3)i3(R,R,G);else for(var e=R.return;e!==null;){if(e.tag===3){i3(e,R,G);break}else if(e.tag===1){var z=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof z.componentDidCatch=="function"&&(fc===null||!fc.has(z))){R=S1(G,R);var N=Hw(e,R,1);if(nh(e,N),N=Gu(),e=kg(e,1),e!==null)G0(e,1,N),hf(e,N);else if(typeof z.componentDidCatch=="function"&&(fc===null||!fc.has(z)))try{z.componentDidCatch(G,R)}catch{}break}}e=e.return}}function sk(R,G,e){var z=R.pingCache;z!==null&&z.delete(G),G=Gu(),R.pingedLanes|=R.suspendedLanes&e,tu===R&&(Ul&e)===e&&(bl===4||bl===3&&(Ul&62914560)===Ul&&500>Nl()-z1?Jv(R,0):D1|=e),hf(R,G)}function lk(R,G){var e=R.stateNode;e!==null&&e.delete(G),G=0,G===0&&(G=R.mode,(G&2)==0?G=1:(G&4)==0?G=Vv()===99?1:2:(Cc===0&&(Cc=jv),G=Pv(62914560&~Cc),G===0&&(G=4194304))),e=Gu(),R=kg(R,G),R!==null&&(G0(R,G,e),hf(R,e))}var o3;o3=function(R,G,e){var z=G.lanes;if(R!==null)if(R.memoizedProps!==G.pendingProps||_u.current)Nf=!0;else if((e&z)!=0)Nf=(R.flags&16384)!=0;else{switch(Nf=!1,G.tag){case 3:Pw(G),v1();break;case 5:hw(G);break;case 1:wu(G.type)&&rg(G);break;case 4:f1(G,G.stateNode.containerInfo);break;case 10:z=G.memoizedProps.value;var N=G.type._context;cs(ig,N._currentValue),N._currentValue=z;break;case 13:if(G.memoizedState!==null)return(e&G.child.childLanes)!=0?Rw(R,G,e):(cs(hs,hs.current&1),G=kc(R,G,e),G!==null?G.sibling:null);cs(hs,hs.current&1);break;case 19:if(z=(e&G.childLanes)!=0,(R.flags&64)!=0){if(z)return Ow(R,G,e);G.flags|=64}if(N=G.memoizedState,N!==null&&(N.rendering=null,N.tail=null,N.lastEffect=null),cs(hs,hs.current),z)break;return null;case 23:case 24:return G.lanes=0,_1(R,G,e)}return kc(R,G,e)}else Nf=!1;switch(G.lanes=0,G.tag){case 2:if(z=G.type,R!==null&&(R.alternate=null,G.alternate=null,G.flags|=2),R=G.pendingProps,N=Uv(G,Ol.current),Gv(G,e),N=g1(null,G,z,R,N,e),G.flags|=1,typeof N=="object"&&N!==null&&typeof N.render=="function"&&N.$$typeof===void 0){if(G.tag=1,G.memoizedState=null,G.updateQueue=null,wu(z)){var u=!0;rg(G)}else u=!1;G.memoizedState=N.state!==null&&N.state!==void 0?N.state:null,l1(G);var s=z.getDerivedStateFromProps;typeof s=="function"&&lg(G,z,s,R),N.updater=ug,G.stateNode=N,N._reactInternals=G,u1(G,z,R,e),G=T1(null,G,z,!0,u,e)}else G.tag=0,Au(null,G,N,e),G=G.child;return G;case 16:N=G.elementType;e:{switch(R!==null&&(R.alternate=null,G.alternate=null,G.flags|=2),R=G.pendingProps,u=N._init,N=u(N._payload),G.type=N,u=G.tag=fk(N),R=Of(N,R),u){case 0:G=w1(null,G,N,R,e);break e;case 1:G=Lw(null,G,N,R,e);break e;case 11:G=Sw(null,G,N,R,e);break e;case 14:G=kw(null,G,N,Of(N.type,R),z,e);break e}throw Error(Pa(306,N,""))}return G;case 0:return z=G.type,N=G.pendingProps,N=G.elementType===z?N:Of(z,N),w1(R,G,z,N,e);case 1:return z=G.type,N=G.pendingProps,N=G.elementType===z?N:Of(z,N),Lw(R,G,z,N,e);case 3:if(Pw(G),z=G.updateQueue,R===null||z===null)throw Error(Pa(282));if(z=G.pendingProps,N=G.memoizedState,N=N!==null?N.element:null,nw(R,G),ad(G,z,null,e),z=G.memoizedState.element,z===N)v1(),G=kc(R,G,e);else{if(N=G.stateNode,(u=N.hydrate)&&(ah=Fv(G.stateNode.containerInfo.firstChild),Sc=G,u=lc=!0),u){if(R=N.mutableSourceEagerHydrationData,R!=null)for(N=0;N<R.length;N+=2)u=R[N],u._workInProgressVersionPrimary=R[N+1],Yv.push(u);for(e=cw(G,null,z,e),G.child=e;e;)e.flags=e.flags&-3|1024,e=e.sibling}else Au(R,G,z,e),v1();G=G.child}return G;case 5:return hw(G),R===null&&h1(G),z=G.type,N=G.pendingProps,u=R!==null?R.memoizedProps:null,s=N.children,Jy(z,N)?s=null:u!==null&&Jy(z,u)&&(G.flags|=16),Cw(R,G),Au(R,G,s,e),G.child;case 6:return R===null&&h1(G),null;case 13:return Rw(R,G,e);case 4:return f1(G,G.stateNode.containerInfo),z=G.pendingProps,R===null?G.child=hg(G,null,z,e):Au(R,G,z,e),G.child;case 11:return z=G.type,N=G.pendingProps,N=G.elementType===z?N:Of(z,N),Sw(R,G,z,N,e);case 7:return Au(R,G,G.pendingProps,e),G.child;case 8:return Au(R,G,G.pendingProps.children,e),G.child;case 12:return Au(R,G,G.pendingProps.children,e),G.child;case 10:e:{z=G.type._context,N=G.pendingProps,s=G.memoizedProps,u=N.value;var m=G.type._context;if(cs(ig,m._currentValue),m._currentValue=u,s!==null)if(m=s.value,u=uf(m,u)?0:(typeof z._calculateChangedBits=="function"?z._calculateChangedBits(m,u):1073741823)|0,u===0){if(s.children===N.children&&!_u.current){G=kc(R,G,e);break e}}else for(m=G.child,m!==null&&(m.return=G);m!==null;){var x=m.dependencies;if(x!==null){s=m.child;for(var t=x.firstContext;t!==null;){if(t.context===z&&(t.observedBits&u)!=0){m.tag===1&&(t=rh(-1,e&-e),t.tag=2,nh(m,t)),m.lanes|=e,t=m.alternate,t!==null&&(t.lanes|=e),rw(m.return,e),x.lanes|=e;break}t=t.next}}else s=m.tag===10&&m.type===G.type?null:m.child;if(s!==null)s.return=m;else for(s=m;s!==null;){if(s===G){s=null;break}if(m=s.sibling,m!==null){m.return=s.return,s=m;break}s=s.return}m=s}Au(R,G,N.children,e),G=G.child}return G;case 9:return N=G.type,u=G.pendingProps,z=u.children,Gv(G,e),N=ff(N,u.unstable_observedBits),z=z(N),G.flags|=1,Au(R,G,z,e),G.child;case 14:return N=G.type,u=Of(N,G.pendingProps),u=Of(N.type,u),kw(R,G,N,u,z,e);case 15:return Ew(R,G,G.type,G.pendingProps,z,e);case 17:return z=G.type,N=G.pendingProps,N=G.elementType===z?N:Of(z,N),R!==null&&(R.alternate=null,G.alternate=null,G.flags|=2),G.tag=1,wu(z)?(R=!0,rg(G)):R=!1,Gv(G,e),lw(G,z,N),u1(G,z,N,e),T1(null,G,z,!0,R,e);case 19:return Ow(R,G,e);case 23:return _1(R,G,e);case 24:return _1(R,G,e)}throw Error(Pa(156,G.tag))};function uk(R,G,e,z){this.tag=R,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=G,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=z,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function vf(R,G,e,z){return new uk(R,G,e,z)}function G1(R){return R=R.prototype,!(!R||!R.isReactComponent)}function fk(R){if(typeof R=="function")return G1(R)?1:0;if(R!=null){if(R=R.$$typeof,R===L0)return 11;if(R===R0)return 14}return 2}function fh(R,G){var e=R.alternate;return e===null?(e=vf(R.tag,G,R.key,R.mode),e.elementType=R.elementType,e.type=R.type,e.stateNode=R.stateNode,e.alternate=R,R.alternate=e):(e.pendingProps=G,e.type=R.type,e.flags=0,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null),e.childLanes=R.childLanes,e.lanes=R.lanes,e.child=R.child,e.memoizedProps=R.memoizedProps,e.memoizedState=R.memoizedState,e.updateQueue=R.updateQueue,G=R.dependencies,e.dependencies=G===null?null:{lanes:G.lanes,firstContext:G.firstContext},e.sibling=R.sibling,e.index=R.index,e.ref=R.ref,e}function Cg(R,G,e,z,N,u){var s=2;if(z=R,typeof R=="function")G1(R)&&(s=1);else if(typeof R=="string")s=5;else e:switch(R){case Yc:return Qv(e.children,N,u,G);case S2:s=8,N|=16;break;case qm:s=8,N|=1;break;case Rp:return R=vf(12,e,G,N|8),R.elementType=Rp,R.type=Rp,R.lanes=u,R;case Dp:return R=vf(13,e,G,N),R.type=Dp,R.elementType=Dp,R.lanes=u,R;case P0:return R=vf(19,e,G,N),R.elementType=P0,R.lanes=u,R;case iy:return W1(e,N,u,G);case oy:return R=vf(24,e,G,N),R.elementType=oy,R.lanes=u,R;default:if(typeof R=="object"&&R!==null)switch(R.$$typeof){case ey:s=10;break e;case ty:s=9;break e;case L0:s=11;break e;case R0:s=14;break e;case ry:s=16,z=null;break e;case ny:s=22;break e}throw Error(Pa(130,R==null?R:typeof R,""))}return G=vf(s,e,G,N),G.elementType=R,G.type=z,G.lanes=u,G}function Qv(R,G,e,z){return R=vf(7,R,z,G),R.lanes=e,R}function W1(R,G,e,z){return R=vf(23,R,z,G),R.elementType=iy,R.lanes=e,R}function Y1(R,G,e){return R=vf(6,R,null,G),R.lanes=e,R}function j1(R,G,e){return G=vf(4,R.children!==null?R.children:[],R.key,G),G.lanes=e,G.stateNode={containerInfo:R.containerInfo,pendingChildren:null,implementation:R.implementation},G}function ck(R,G,e){this.tag=G,this.containerInfo=R,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=e,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=Ry(0),this.expirationTimes=Ry(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ry(0),this.mutableSourceEagerHydrationData=null}function hk(R,G,e){var z=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ph,key:z==null?null:""+z,children:R,containerInfo:G,implementation:e}}function Lg(R,G,e,z){var N=G.current,u=Gu(),s=oh(N);e:if(e){e=e._reactInternals;t:{if(Dh(e)!==e||e.tag!==1)throw Error(Pa(170));var m=e;do{switch(m.tag){case 3:m=m.stateNode.context;break t;case 1:if(wu(m.type)){m=m.stateNode.__reactInternalMemoizedMergedChildContext;break t}}m=m.return}while(m!==null);throw Error(Pa(171))}if(e.tag===1){var x=e.type;if(wu(x)){e=j_(e,x,m);break e}}e=m}else e=eh;return G.context===null?G.context=e:G.pendingContext=e,G=rh(u,s),G.payload={element:R},z=z===void 0?null:z,z!==null&&(G.callback=z),nh(N,G),sh(N,s,u),s}function X1(R){if(R=R.current,!R.child)return null;switch(R.child.tag){case 5:return R.child.stateNode;default:return R.child.stateNode}}function s3(R,G){if(R=R.memoizedState,R!==null&&R.dehydrated!==null){var e=R.retryLane;R.retryLane=e!==0&&e<G?e:G}}function Z1(R,G){s3(R,G),(R=R.alternate)&&s3(R,G)}function vk(){return null}function K1(R,G,e){var z=e!=null&&e.hydrationOptions!=null&&e.hydrationOptions.mutableSources||null;if(e=new ck(R,G,e!=null&&e.hydrate===!0),G=vf(3,null,null,G===2?7:G===1?3:0),e.current=G,G.stateNode=e,l1(G),R[Ov]=e.current,z_(R.nodeType===8?R.parentNode:R),z)for(R=0;R<z.length;R++){G=z[R];var N=G._getVersion;N=N(G._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[G,N]:e.mutableSourceEagerHydrationData.push(G,N)}this._internalRoot=e}K1.prototype.render=function(R){Lg(R,this._internalRoot,null,null)};K1.prototype.unmount=function(){var R=this._internalRoot,G=R.containerInfo;Lg(null,R,null,function(){G[Ov]=null})};function wd(R){return!(!R||R.nodeType!==1&&R.nodeType!==9&&R.nodeType!==11&&(R.nodeType!==8||R.nodeValue!==" react-mount-point-unstable "))}function pk(R,G){if(G||(G=R?R.nodeType===9?R.documentElement:R.firstChild:null,G=!(!G||G.nodeType!==1||!G.hasAttribute("data-reactroot"))),!G)for(var e;e=R.lastChild;)R.removeChild(e);return new K1(R,0,G?{hydrate:!0}:void 0)}function Pg(R,G,e,z,N){var u=e._reactRootContainer;if(u){var s=u._internalRoot;if(typeof N=="function"){var m=N;N=function(){var t=X1(s);m.call(t)}}Lg(G,s,R,N)}else{if(u=e._reactRootContainer=pk(e,z),s=u._internalRoot,typeof N=="function"){var x=N;N=function(){var t=X1(s);x.call(t)}}qw(function(){Lg(G,s,R,N)})}return X1(s)}K2=function(R){if(R.tag===13){var G=Gu();sh(R,4,G),Z1(R,4)}};Sy=function(R){if(R.tag===13){var G=Gu();sh(R,67108864,G),Z1(R,67108864)}};J2=function(R){if(R.tag===13){var G=Gu(),e=oh(R);sh(R,e,G),Z1(R,e)}};Q2=function(R,G){return G()};xy=function(R,G,e){switch(G){case"input":if(fy(R,e),G=e.name,e.type==="radio"&&G!=null){for(e=R;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+G)+'][type="radio"]'),G=0;G<e.length;G++){var z=e[G];if(z!==R&&z.form===R.form){var N=eg(z);if(!N)throw Error(Pa(90));C2(z),fy(z,N)}}}break;case"textarea":I2(R,e);break;case"select":G=e.value,G!=null&&Sv(R,!!e.multiple,G,!1)}};by=$w;G2=function(R,G,e,z,N){var u=pi;pi|=4;try{return Oh(98,R.bind(null,G,e,z,N))}finally{pi=u,pi===0&&(Zv(),oc())}};_y=function(){(pi&49)==0&&(ek(),lh())};W2=function(R,G){var e=pi;pi|=2;try{return R(G)}finally{pi=e,pi===0&&(Zv(),oc())}};function l3(R,G){var e=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wd(G))throw Error(Pa(200));return hk(R,G,null,e)}var dk={Events:[rd,Nv,eg,V2,H2,lh,{current:!1}]},Td={findFiberByHostInstance:Ih,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},gk={bundleType:Td.bundleType,version:Td.version,rendererPackageName:Td.rendererPackageName,rendererConfig:Td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lh.ReactCurrentDispatcher,findHostInstanceByFiber:function(R){return R=X2(R),R===null?null:R.stateNode},findFiberByHostInstance:Td.findFiberByHostInstance||vk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Rg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rg.isDisabled&&Rg.supportsFiber)try{e1=Rg.inject(gk),Fh=Rg}catch{}}lf.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dk;lf.createPortal=l3;lf.findDOMNode=function(R){if(R==null)return null;if(R.nodeType===1)return R;var G=R._reactInternals;if(G===void 0)throw typeof R.render=="function"?Error(Pa(188)):Error(Pa(268,Object.keys(R)));return R=X2(G),R=R===null?null:R.stateNode,R};lf.flushSync=function(R,G){var e=pi;if((e&48)!=0)return R(G);pi|=1;try{if(R)return Oh(99,R.bind(null,G))}finally{pi=e,oc()}};lf.hydrate=function(R,G,e){if(!wd(G))throw Error(Pa(200));return Pg(null,R,G,!0,e)};lf.render=function(R,G,e){if(!wd(G))throw Error(Pa(200));return Pg(null,R,G,!1,e)};lf.unmountComponentAtNode=function(R){if(!wd(R))throw Error(Pa(40));return R._reactRootContainer?(qw(function(){Pg(null,null,R,!1,function(){R._reactRootContainer=null,R[Ov]=null})}),!0):!1};lf.unstable_batchedUpdates=$w;lf.unstable_createPortal=function(R,G){return l3(R,G,2<arguments.length&&arguments[2]!==void 0?arguments[2]:null)};lf.unstable_renderSubtreeIntoContainer=function(R,G,e,z){if(!wd(e))throw Error(Pa(200));if(R==null||R._reactInternals===void 0)throw Error(Pa(38));return Pg(R,G,e,!1,z)};lf.version="17.0.2";function u3(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u3)}catch(R){console.error(R)}}u3(),Km.exports=lf;var pD=Km.exports,f3={exports:{}},mk="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",yk=mk,xk=yk;function c3(){}function h3(){}h3.resetWarningCache=c3;var bk=function(){function R(z,N,u,s,m,x){if(x!==xk){var t=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw t.name="Invariant Violation",t}}R.isRequired=R;function G(){return R}var e={array:R,bigint:R,bool:R,func:R,number:R,object:R,string:R,symbol:R,any:R,arrayOf:G,element:R,elementType:R,instanceOf:G,node:R,objectOf:G,oneOf:G,oneOfType:G,shape:G,exact:G,checkPropTypes:h3,resetWarningCache:c3};return e.PropTypes=e,e};f3.exports=bk();var ch=Tv.createContext(null);function _k(R){R()}var v3=_k,wk=function(G){return v3=G},Tk=function(){return v3};function Ak(){var R=Tk(),G=null,e=null;return{clear:function(){G=null,e=null},notify:function(){R(function(){for(var N=G;N;)N.callback(),N=N.next})},get:function(){for(var N=[],u=G;u;)N.push(u),u=u.next;return N},subscribe:function(N){var u=!0,s=e={callback:N,next:null,prev:e};return s.prev?s.prev.next=s:G=s,function(){!u||G===null||(u=!1,s.next?s.next.prev=s.prev:e=s.prev,s.prev?s.prev.next=s.next:G=s.next)}}}}var p3={notify:function(){},get:function(){return[]}};function d3(R,G){var e,z=p3;function N(a){return x(),z.subscribe(a)}function u(){z.notify()}function s(){i.onStateChange&&i.onStateChange()}function m(){return Boolean(e)}function x(){e||(e=G?G.addNestedSub(s):R.subscribe(s),z=Ak())}function t(){e&&(e(),e=void 0,z.clear(),z=p3)}var i={addNestedSub:N,notifyNestedSubs:u,handleChangeWrapper:s,isSubscribed:m,trySubscribe:x,tryUnsubscribe:t,getListeners:function(){return z}};return i}var J1=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?zn.exports.useLayoutEffect:zn.exports.useEffect,Dg={exports:{}},Ad={};/** @license React v17.0.2
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mk=zn.exports,g3=60103;Ad.Fragment=60107;if(typeof Symbol=="function"&&Symbol.for){var m3=Symbol.for;g3=m3("react.element"),Ad.Fragment=m3("react.fragment")}var Sk=Mk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,kk=Object.prototype.hasOwnProperty,Ek={key:!0,ref:!0,__self:!0,__source:!0};function y3(R,G,e){var z,N={},u=null,s=null;e!==void 0&&(u=""+e),G.key!==void 0&&(u=""+G.key),G.ref!==void 0&&(s=G.ref);for(z in G)kk.call(G,z)&&!Ek.hasOwnProperty(z)&&(N[z]=G[z]);if(R&&R.defaultProps)for(z in G=R.defaultProps,G)N[z]===void 0&&(N[z]=G[z]);return{$$typeof:g3,type:R,key:u,ref:s,props:N,_owner:Sk.current}}Ad.jsx=y3;Ad.jsxs=y3;Dg.exports=Ad;const mi=Dg.exports.jsx,Wu=Dg.exports.jsxs,Ck=Dg.exports.Fragment;var Lk=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",jsx:mi,jsxs:Wu,Fragment:Ck});function dD(R){var G=R.store,e=R.context,z=R.children,N=zn.exports.useMemo(function(){var m=d3(G);return m.onStateChange=m.notifyNestedSubs,{store:G,subscription:m}},[G]),u=zn.exports.useMemo(function(){return G.getState()},[G]);J1(function(){var m=N.subscription;return m.trySubscribe(),u!==G.getState()&&m.notifyNestedSubs(),function(){m.tryUnsubscribe(),m.onStateChange=null}},[N,u]);var s=e||ch;return mi(s.Provider,{value:N,children:z})}function ba(){return ba=Object.assign||function(R){for(var G=1;G<arguments.length;G++){var e=arguments[G];for(var z in e)Object.prototype.hasOwnProperty.call(e,z)&&(R[z]=e[z])}return R},ba.apply(this,arguments)}function ko(R,G){if(R==null)return{};var e={},z=Object.keys(R),N,u;for(u=0;u<z.length;u++)N=z[u],!(G.indexOf(N)>=0)&&(e[N]=R[N]);return e}var x3={exports:{}},wo={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var al=typeof Symbol=="function"&&Symbol.for,Q1=al?Symbol.for("react.element"):60103,$1=al?Symbol.for("react.portal"):60106,Ig=al?Symbol.for("react.fragment"):60107,zg=al?Symbol.for("react.strict_mode"):60108,Fg=al?Symbol.for("react.profiler"):60114,Og=al?Symbol.for("react.provider"):60109,Ng=al?Symbol.for("react.context"):60110,q1=al?Symbol.for("react.async_mode"):60111,Bg=al?Symbol.for("react.concurrent_mode"):60111,Ug=al?Symbol.for("react.forward_ref"):60112,Vg=al?Symbol.for("react.suspense"):60113,Pk=al?Symbol.for("react.suspense_list"):60120,Hg=al?Symbol.for("react.memo"):60115,Gg=al?Symbol.for("react.lazy"):60116,Rk=al?Symbol.for("react.block"):60121,Dk=al?Symbol.for("react.fundamental"):60117,Ik=al?Symbol.for("react.responder"):60118,zk=al?Symbol.for("react.scope"):60119;function Yu(R){if(typeof R=="object"&&R!==null){var G=R.$$typeof;switch(G){case Q1:switch(R=R.type,R){case q1:case Bg:case Ig:case Fg:case zg:case Vg:return R;default:switch(R=R&&R.$$typeof,R){case Ng:case Ug:case Gg:case Hg:case Og:return R;default:return G}}case $1:return G}}}function b3(R){return Yu(R)===Bg}wo.AsyncMode=q1;wo.ConcurrentMode=Bg;wo.ContextConsumer=Ng;wo.ContextProvider=Og;wo.Element=Q1;wo.ForwardRef=Ug;wo.Fragment=Ig;wo.Lazy=Gg;wo.Memo=Hg;wo.Portal=$1;wo.Profiler=Fg;wo.StrictMode=zg;wo.Suspense=Vg;wo.isAsyncMode=function(R){return b3(R)||Yu(R)===q1};wo.isConcurrentMode=b3;wo.isContextConsumer=function(R){return Yu(R)===Ng};wo.isContextProvider=function(R){return Yu(R)===Og};wo.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===Q1};wo.isForwardRef=function(R){return Yu(R)===Ug};wo.isFragment=function(R){return Yu(R)===Ig};wo.isLazy=function(R){return Yu(R)===Gg};wo.isMemo=function(R){return Yu(R)===Hg};wo.isPortal=function(R){return Yu(R)===$1};wo.isProfiler=function(R){return Yu(R)===Fg};wo.isStrictMode=function(R){return Yu(R)===zg};wo.isSuspense=function(R){return Yu(R)===Vg};wo.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===Ig||R===Bg||R===Fg||R===zg||R===Vg||R===Pk||typeof R=="object"&&R!==null&&(R.$$typeof===Gg||R.$$typeof===Hg||R.$$typeof===Og||R.$$typeof===Ng||R.$$typeof===Ug||R.$$typeof===Dk||R.$$typeof===Ik||R.$$typeof===zk||R.$$typeof===Rk)};wo.typeOf=Yu;x3.exports=wo;var _3=x3.exports,Fk={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ok={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},w3={};w3[_3.ForwardRef]=Fk;w3[_3.Memo]=Ok;var Fo={};/** @license React v17.0.2
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wg=60103,Yg=60106,Md=60107,Sd=60108,kd=60114,Ed=60109,Cd=60110,Ld=60112,Pd=60113,ex=60120,Rd=60115,Dd=60116,T3=60121,A3=60122,M3=60117,S3=60129,k3=60131;if(typeof Symbol=="function"&&Symbol.for){var _l=Symbol.for;Wg=_l("react.element"),Yg=_l("react.portal"),Md=_l("react.fragment"),Sd=_l("react.strict_mode"),kd=_l("react.profiler"),Ed=_l("react.provider"),Cd=_l("react.context"),Ld=_l("react.forward_ref"),Pd=_l("react.suspense"),ex=_l("react.suspense_list"),Rd=_l("react.memo"),Dd=_l("react.lazy"),T3=_l("react.block"),A3=_l("react.server.block"),M3=_l("react.fundamental"),S3=_l("react.debug_trace_mode"),k3=_l("react.legacy_hidden")}function Bf(R){if(typeof R=="object"&&R!==null){var G=R.$$typeof;switch(G){case Wg:switch(R=R.type,R){case Md:case kd:case Sd:case Pd:case ex:return R;default:switch(R=R&&R.$$typeof,R){case Cd:case Ld:case Dd:case Rd:case Ed:return R;default:return G}}case Yg:return G}}}var Nk=Ed,Bk=Wg,Uk=Ld,Vk=Md,Hk=Dd,Gk=Rd,Wk=Yg,Yk=kd,jk=Sd,Xk=Pd;Fo.ContextConsumer=Cd;Fo.ContextProvider=Nk;Fo.Element=Bk;Fo.ForwardRef=Uk;Fo.Fragment=Vk;Fo.Lazy=Hk;Fo.Memo=Gk;Fo.Portal=Wk;Fo.Profiler=Yk;Fo.StrictMode=jk;Fo.Suspense=Xk;Fo.isAsyncMode=function(){return!1};Fo.isConcurrentMode=function(){return!1};Fo.isContextConsumer=function(R){return Bf(R)===Cd};Fo.isContextProvider=function(R){return Bf(R)===Ed};Fo.isElement=function(R){return typeof R=="object"&&R!==null&&R.$$typeof===Wg};Fo.isForwardRef=function(R){return Bf(R)===Ld};Fo.isFragment=function(R){return Bf(R)===Md};Fo.isLazy=function(R){return Bf(R)===Dd};Fo.isMemo=function(R){return Bf(R)===Rd};Fo.isPortal=function(R){return Bf(R)===Yg};Fo.isProfiler=function(R){return Bf(R)===kd};Fo.isStrictMode=function(R){return Bf(R)===Sd};Fo.isSuspense=function(R){return Bf(R)===Pd};Fo.isValidElementType=function(R){return typeof R=="string"||typeof R=="function"||R===Md||R===kd||R===S3||R===Sd||R===Pd||R===ex||R===k3||typeof R=="object"&&R!==null&&(R.$$typeof===Dd||R.$$typeof===Rd||R.$$typeof===Ed||R.$$typeof===Cd||R.$$typeof===Ld||R.$$typeof===M3||R.$$typeof===T3||R[0]===A3)};Fo.typeOf=Bf;function E3(){var R=zn.exports.useContext(ch);return R}function C3(R){R===void 0&&(R=ch);var G=R===ch?E3:function(){return zn.exports.useContext(R)};return function(){var z=G(),N=z.store;return N}}var Zk=C3();function Kk(R){R===void 0&&(R=ch);var G=R===ch?Zk:C3(R);return function(){var z=G();return z.dispatch}}var gD=Kk(),Jk=function(G,e){return G===e};function Qk(R,G,e,z){var N=zn.exports.useReducer(function(f){return f+1},0),u=N[1],s=zn.exports.useMemo(function(){return d3(e,z)},[e,z]),m=zn.exports.useRef(),x=zn.exports.useRef(),t=zn.exports.useRef(),i=zn.exports.useRef(),a=e.getState(),r;try{if(R!==x.current||a!==t.current||m.current){var n=R(a);i.current===void 0||!G(n,i.current)?r=n:r=i.current}else r=i.current}catch(f){throw m.current&&(f.message+=`
The error may be correlated with this previous error:
`+m.current.stack+`

`),f}return J1(function(){x.current=R,t.current=a,i.current=r,m.current=void 0}),J1(function(){function f(){try{var l=e.getState();if(l===t.current)return;var o=x.current(l);if(G(o,i.current))return;i.current=o,t.current=l}catch(c){m.current=c}u()}return s.onStateChange=f,s.trySubscribe(),f(),function(){return s.tryUnsubscribe()}},[e,s]),r}function $k(R){R===void 0&&(R=ch);var G=R===ch?E3:function(){return zn.exports.useContext(R)};return function(z,N){N===void 0&&(N=Jk);var u=G(),s=u.store,m=u.subscription,x=Qk(z,N,s,m);return zn.exports.useDebugValue(x),x}}var mD=$k();wk(Km.exports.unstable_batchedUpdates);function L3(R){var G=Object.create(null);return function(e){return G[e]===void 0&&(G[e]=R(e)),G[e]}}var qk=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,e6=L3(function(R){return qk.test(R)||R.charCodeAt(0)===111&&R.charCodeAt(1)===110&&R.charCodeAt(2)<91});function t6(R){if(R.sheet)return R.sheet;for(var G=0;G<document.styleSheets.length;G++)if(document.styleSheets[G].ownerNode===R)return document.styleSheets[G]}function r6(R){var G=document.createElement("style");return G.setAttribute("data-emotion",R.key),R.nonce!==void 0&&G.setAttribute("nonce",R.nonce),G.appendChild(document.createTextNode("")),G.setAttribute("data-s",""),G}var P3=function(){function R(e){var z=this;this._insertTag=function(N){var u;z.tags.length===0?z.insertionPoint?u=z.insertionPoint.nextSibling:z.prepend?u=z.container.firstChild:u=z.before:u=z.tags[z.tags.length-1].nextSibling,z.container.insertBefore(N,u),z.tags.push(N)},this.isSpeedy=e.speedy===void 0?!0:e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var G=R.prototype;return G.hydrate=function(z){z.forEach(this._insertTag)},G.insert=function(z){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(r6(this));var N=this.tags[this.tags.length-1];if(this.isSpeedy){var u=t6(N);try{u.insertRule(z,u.cssRules.length)}catch{}}else N.appendChild(document.createTextNode(z));this.ctr++},G.flush=function(){this.tags.forEach(function(z){return z.parentNode&&z.parentNode.removeChild(z)}),this.tags=[],this.ctr=0},R}(),Vl="-ms-",jg="-moz-",fo="-webkit-",R3="comm",tx="rule",rx="decl",n6="@import",D3="@keyframes",a6=Math.abs,Xg=String.fromCharCode,i6=Object.assign;function o6(R,G){return(((G<<2^Mu(R,0))<<2^Mu(R,1))<<2^Mu(R,2))<<2^Mu(R,3)}function I3(R){return R.trim()}function s6(R,G){return(R=G.exec(R))?R[0]:R}function po(R,G,e){return R.replace(G,e)}function nx(R,G){return R.indexOf(G)}function Mu(R,G){return R.charCodeAt(G)|0}function Id(R,G,e){return R.slice(G,e)}function cc(R){return R.length}function ax(R){return R.length}function Zg(R,G){return G.push(R),R}function l6(R,G){return R.map(G).join("")}var Kg=1,$v=1,z3=0,Su=0,Is=0,qv="";function Jg(R,G,e,z,N,u,s){return{value:R,root:G,parent:e,type:z,props:N,children:u,line:Kg,column:$v,length:s,return:""}}function zd(R,G){return i6(Jg("",null,null,"",null,null,0),R,{length:-R.length},G)}function u6(){return Is}function f6(){return Is=Su>0?Mu(qv,--Su):0,$v--,Is===10&&($v=1,Kg--),Is}function ju(){return Is=Su<z3?Mu(qv,Su++):0,$v++,Is===10&&($v=1,Kg++),Is}function hc(){return Mu(qv,Su)}function Qg(){return Su}function Fd(R,G){return Id(qv,R,G)}function Od(R){switch(R){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function F3(R){return Kg=$v=1,z3=cc(qv=R),Su=0,[]}function O3(R){return qv="",R}function $g(R){return I3(Fd(Su-1,ix(R===91?R+2:R===40?R+1:R)))}function c6(R){for(;(Is=hc())&&Is<33;)ju();return Od(R)>2||Od(Is)>3?"":" "}function h6(R,G){for(;--G&&ju()&&!(Is<48||Is>102||Is>57&&Is<65||Is>70&&Is<97););return Fd(R,Qg()+(G<6&&hc()==32&&ju()==32))}function ix(R){for(;ju();)switch(Is){case R:return Su;case 34:case 39:R!==34&&R!==39&&ix(Is);break;case 40:R===41&&ix(R);break;case 92:ju();break}return Su}function v6(R,G){for(;ju()&&R+Is!==47+10;)if(R+Is===42+42&&hc()===47)break;return"/*"+Fd(G,Su-1)+"*"+Xg(R===47?R:ju())}function p6(R){for(;!Od(hc());)ju();return Fd(R,Su)}function d6(R){return O3(qg("",null,null,null,[""],R=F3(R),0,[0],R))}function qg(R,G,e,z,N,u,s,m,x){for(var t=0,i=0,a=s,r=0,n=0,f=0,l=1,o=1,c=1,h=0,d="",p=N,y=u,g=z,A=d;o;)switch(f=h,h=ju()){case 40:if(f!=108&&A.charCodeAt(a-1)==58){nx(A+=po($g(h),"&","&\f"),"&\f")!=-1&&(c=-1);break}case 34:case 39:case 91:A+=$g(h);break;case 9:case 10:case 13:case 32:A+=c6(f);break;case 92:A+=h6(Qg()-1,7);continue;case 47:switch(hc()){case 42:case 47:Zg(g6(v6(ju(),Qg()),G,e),x);break;default:A+="/"}break;case 123*l:m[t++]=cc(A)*c;case 125*l:case 59:case 0:switch(h){case 0:case 125:o=0;case 59+i:n>0&&cc(A)-a&&Zg(n>32?B3(A+";",z,e,a-1):B3(po(A," ","")+";",z,e,a-2),x);break;case 59:A+=";";default:if(Zg(g=N3(A,G,e,t,i,N,m,d,p=[],y=[],a),u),h===123)if(i===0)qg(A,G,g,g,p,u,a,m,y);else switch(r){case 100:case 109:case 115:qg(R,g,g,z&&Zg(N3(R,g,g,0,0,N,m,d,N,p=[],a),y),N,y,a,m,z?p:y);break;default:qg(A,g,g,g,[""],y,0,m,y)}}t=i=n=0,l=c=1,d=A="",a=s;break;case 58:a=1+cc(A),n=f;default:if(l<1){if(h==123)--l;else if(h==125&&l++==0&&f6()==125)continue}switch(A+=Xg(h),h*l){case 38:c=i>0?1:(A+="\f",-1);break;case 44:m[t++]=(cc(A)-1)*c,c=1;break;case 64:hc()===45&&(A+=$g(ju())),r=hc(),i=a=cc(d=A+=p6(Qg())),h++;break;case 45:f===45&&cc(A)==2&&(l=0)}}return u}function N3(R,G,e,z,N,u,s,m,x,t,i){for(var a=N-1,r=N===0?u:[""],n=ax(r),f=0,l=0,o=0;f<z;++f)for(var c=0,h=Id(R,a+1,a=a6(l=s[f])),d=R;c<n;++c)(d=I3(l>0?r[c]+" "+h:po(h,/&\f/g,r[c])))&&(x[o++]=d);return Jg(R,G,e,N===0?tx:m,x,t,i)}function g6(R,G,e){return Jg(R,G,e,R3,Xg(u6()),Id(R,2,-2),0)}function B3(R,G,e,z){return Jg(R,G,e,rx,Id(R,0,z),Id(R,z+1,-1),z)}function U3(R,G){switch(o6(R,G)){case 5103:return fo+"print-"+R+R;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return fo+R+R;case 5349:case 4246:case 4810:case 6968:case 2756:return fo+R+jg+R+Vl+R+R;case 6828:case 4268:return fo+R+Vl+R+R;case 6165:return fo+R+Vl+"flex-"+R+R;case 5187:return fo+R+po(R,/(\w+).+(:[^]+)/,fo+"box-$1$2"+Vl+"flex-$1$2")+R;case 5443:return fo+R+Vl+"flex-item-"+po(R,/flex-|-self/,"")+R;case 4675:return fo+R+Vl+"flex-line-pack"+po(R,/align-content|flex-|-self/,"")+R;case 5548:return fo+R+Vl+po(R,"shrink","negative")+R;case 5292:return fo+R+Vl+po(R,"basis","preferred-size")+R;case 6060:return fo+"box-"+po(R,"-grow","")+fo+R+Vl+po(R,"grow","positive")+R;case 4554:return fo+po(R,/([^-])(transform)/g,"$1"+fo+"$2")+R;case 6187:return po(po(po(R,/(zoom-|grab)/,fo+"$1"),/(image-set)/,fo+"$1"),R,"")+R;case 5495:case 3959:return po(R,/(image-set\([^]*)/,fo+"$1$`$1");case 4968:return po(po(R,/(.+:)(flex-)?(.*)/,fo+"box-pack:$3"+Vl+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+fo+R+R;case 4095:case 3583:case 4068:case 2532:return po(R,/(.+)-inline(.+)/,fo+"$1$2")+R;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(cc(R)-1-G>6)switch(Mu(R,G+1)){case 109:if(Mu(R,G+4)!==45)break;case 102:return po(R,/(.+:)(.+)-([^]+)/,"$1"+fo+"$2-$3$1"+jg+(Mu(R,G+3)==108?"$3":"$2-$3"))+R;case 115:return~nx(R,"stretch")?U3(po(R,"stretch","fill-available"),G)+R:R}break;case 4949:if(Mu(R,G+1)!==115)break;case 6444:switch(Mu(R,cc(R)-3-(~nx(R,"!important")&&10))){case 107:return po(R,":",":"+fo)+R;case 101:return po(R,/(.+:)([^;!]+)(;|!.+)?/,"$1"+fo+(Mu(R,14)===45?"inline-":"")+"box$3$1"+fo+"$2$3$1"+Vl+"$2box$3")+R}break;case 5936:switch(Mu(R,G+11)){case 114:return fo+R+Vl+po(R,/[svh]\w+-[tblr]{2}/,"tb")+R;case 108:return fo+R+Vl+po(R,/[svh]\w+-[tblr]{2}/,"tb-rl")+R;case 45:return fo+R+Vl+po(R,/[svh]\w+-[tblr]{2}/,"lr")+R}return fo+R+Vl+R+R}return R}function ep(R,G){for(var e="",z=ax(R),N=0;N<z;N++)e+=G(R[N],N,R,G)||"";return e}function m6(R,G,e,z){switch(R.type){case n6:case rx:return R.return=R.return||R.value;case R3:return"";case D3:return R.return=R.value+"{"+ep(R.children,z)+"}";case tx:R.value=R.props.join(",")}return cc(e=ep(R.children,z))?R.return=R.value+"{"+e+"}":""}function y6(R){var G=ax(R);return function(e,z,N,u){for(var s="",m=0;m<G;m++)s+=R[m](e,z,N,u)||"";return s}}function x6(R){return function(G){G.root||(G=G.return)&&R(G)}}function b6(R,G,e,z){if(R.length>-1&&!R.return)switch(R.type){case rx:R.return=U3(R.value,R.length);break;case D3:return ep([zd(R,{value:po(R.value,"@","@"+fo)})],z);case tx:if(R.length)return l6(R.props,function(N){switch(s6(N,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return ep([zd(R,{props:[po(N,/:(read-\w+)/,":"+jg+"$1")]})],z);case"::placeholder":return ep([zd(R,{props:[po(N,/:(plac\w+)/,":"+fo+"input-$1")]}),zd(R,{props:[po(N,/:(plac\w+)/,":"+jg+"$1")]}),zd(R,{props:[po(N,/:(plac\w+)/,Vl+"input-$1")]})],z)}return""})}}var _6=function(G,e,z){for(var N=0,u=0;N=u,u=hc(),N===38&&u===12&&(e[z]=1),!Od(u);)ju();return Fd(G,Su)},w6=function(G,e){var z=-1,N=44;do switch(Od(N)){case 0:N===38&&hc()===12&&(e[z]=1),G[z]+=_6(Su-1,e,z);break;case 2:G[z]+=$g(N);break;case 4:if(N===44){G[++z]=hc()===58?"&\f":"",e[z]=G[z].length;break}default:G[z]+=Xg(N)}while(N=ju());return G},T6=function(G,e){return O3(w6(F3(G),e))},V3=new WeakMap,A6=function(G){if(!(G.type!=="rule"||!G.parent||G.length<1)){for(var e=G.value,z=G.parent,N=G.column===z.column&&G.line===z.line;z.type!=="rule";)if(z=z.parent,!z)return;if(!(G.props.length===1&&e.charCodeAt(0)!==58&&!V3.get(z))&&!N){V3.set(G,!0);for(var u=[],s=T6(e,u),m=z.props,x=0,t=0;x<s.length;x++)for(var i=0;i<m.length;i++,t++)G.props[t]=u[x]?s[x].replace(/&\f/g,m[i]):m[i]+" "+s[x]}}},M6=function(G){if(G.type==="decl"){var e=G.value;e.charCodeAt(0)===108&&e.charCodeAt(2)===98&&(G.return="",G.value="")}},S6=[b6],k6=function(G){var e=G.key;if(e==="css"){var z=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(z,function(l){var o=l.getAttribute("data-emotion");o.indexOf(" ")!==-1&&(document.head.appendChild(l),l.setAttribute("data-s",""))})}var N=G.stylisPlugins||S6,u={},s,m=[];s=G.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+e+' "]'),function(l){for(var o=l.getAttribute("data-emotion").split(" "),c=1;c<o.length;c++)u[o[c]]=!0;m.push(l)});var x,t=[A6,M6];{var i,a=[m6,x6(function(l){i.insert(l)})],r=y6(t.concat(N,a)),n=function(o){return ep(d6(o),r)};x=function(o,c,h,d){i=h,n(o?o+"{"+c.styles+"}":c.styles),d&&(f.inserted[c.name]=!0)}}var f={key:e,sheet:new P3({key:e,container:s,nonce:G.nonce,speedy:G.speedy,prepend:G.prepend,insertionPoint:G.insertionPoint}),nonce:G.nonce,inserted:u,registered:{},insert:x};return f.sheet.hydrate(m),f},E6=!0;function C6(R,G,e){var z="";return e.split(" ").forEach(function(N){R[N]!==void 0?G.push(R[N]+";"):z+=N+" "}),z}var H3=function(G,e,z){var N=G.key+"-"+e.name;if((z===!1||E6===!1)&&G.registered[N]===void 0&&(G.registered[N]=e.styles),G.inserted[e.name]===void 0){var u=e;do G.insert(e===u?"."+N:"",u,G.sheet,!0),u=u.next;while(u!==void 0)}};function L6(R){for(var G=0,e,z=0,N=R.length;N>=4;++z,N-=4)e=R.charCodeAt(z)&255|(R.charCodeAt(++z)&255)<<8|(R.charCodeAt(++z)&255)<<16|(R.charCodeAt(++z)&255)<<24,e=(e&65535)*1540483477+((e>>>16)*59797<<16),e^=e>>>24,G=(e&65535)*1540483477+((e>>>16)*59797<<16)^(G&65535)*1540483477+((G>>>16)*59797<<16);switch(N){case 3:G^=(R.charCodeAt(z+2)&255)<<16;case 2:G^=(R.charCodeAt(z+1)&255)<<8;case 1:G^=R.charCodeAt(z)&255,G=(G&65535)*1540483477+((G>>>16)*59797<<16)}return G^=G>>>13,G=(G&65535)*1540483477+((G>>>16)*59797<<16),((G^G>>>15)>>>0).toString(36)}var P6={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},R6=/[A-Z]|^ms/g,D6=/_EMO_([^_]+?)_([^]*?)_EMO_/g,G3=function(G){return G.charCodeAt(1)===45},W3=function(G){return G!=null&&typeof G!="boolean"},ox=L3(function(R){return G3(R)?R:R.replace(R6,"-$&").toLowerCase()}),Y3=function(G,e){switch(G){case"animation":case"animationName":if(typeof e=="string")return e.replace(D6,function(z,N,u){return vc={name:N,styles:u,next:vc},N})}return P6[G]!==1&&!G3(G)&&typeof e=="number"&&e!==0?e+"px":e};function Nd(R,G,e){if(e==null)return"";if(e.__emotion_styles!==void 0)return e;switch(typeof e){case"boolean":return"";case"object":{if(e.anim===1)return vc={name:e.name,styles:e.styles,next:vc},e.name;if(e.styles!==void 0){var z=e.next;if(z!==void 0)for(;z!==void 0;)vc={name:z.name,styles:z.styles,next:vc},z=z.next;var N=e.styles+";";return N}return I6(R,G,e)}case"function":{if(R!==void 0){var u=vc,s=e(R);return vc=u,Nd(R,G,s)}break}}if(G==null)return e;var m=G[e];return m!==void 0?m:e}function I6(R,G,e){var z="";if(Array.isArray(e))for(var N=0;N<e.length;N++)z+=Nd(R,G,e[N])+";";else for(var u in e){var s=e[u];if(typeof s!="object")G!=null&&G[s]!==void 0?z+=u+"{"+G[s]+"}":W3(s)&&(z+=ox(u)+":"+Y3(u,s)+";");else if(Array.isArray(s)&&typeof s[0]=="string"&&(G==null||G[s[0]]===void 0))for(var m=0;m<s.length;m++)W3(s[m])&&(z+=ox(u)+":"+Y3(u,s[m])+";");else{var x=Nd(R,G,s);switch(u){case"animation":case"animationName":{z+=ox(u)+":"+x+";";break}default:z+=u+"{"+x+"}"}}}return z}var j3=/label:\s*([^\s;\n{]+)\s*(;|$)/g,vc,sx=function(G,e,z){if(G.length===1&&typeof G[0]=="object"&&G[0]!==null&&G[0].styles!==void 0)return G[0];var N=!0,u="";vc=void 0;var s=G[0];s==null||s.raw===void 0?(N=!1,u+=Nd(z,e,s)):u+=s[0];for(var m=1;m<G.length;m++)u+=Nd(z,e,G[m]),N&&(u+=s[m]);j3.lastIndex=0;for(var x="",t;(t=j3.exec(u))!==null;)x+="-"+t[1];var i=L6(u)+x;return{name:i,styles:u,next:vc}},X3=zn.exports.createContext(typeof HTMLElement!="undefined"?k6({key:"css"}):null);X3.Provider;var Z3=function(G){return zn.exports.forwardRef(function(e,z){var N=zn.exports.useContext(X3);return G(e,N,z)})},lx=zn.exports.createContext({}),z6=Z3(function(R,G){var e=R.styles,z=sx([e],void 0,zn.exports.useContext(lx)),N=zn.exports.useRef();return zn.exports.useLayoutEffect(function(){var u=G.key+"-global",s=new P3({key:u,nonce:G.sheet.nonce,container:G.sheet.container,speedy:G.sheet.isSpeedy}),m=!1,x=document.querySelector('style[data-emotion="'+u+" "+z.name+'"]');return G.sheet.tags.length&&(s.before=G.sheet.tags[0]),x!==null&&(m=!0,x.setAttribute("data-emotion",u),s.hydrate([x])),N.current=[s,m],function(){s.flush()}},[G]),zn.exports.useLayoutEffect(function(){var u=N.current,s=u[0],m=u[1];if(m){u[1]=!1;return}if(z.next!==void 0&&H3(G,z.next,!0),s.tags.length){var x=s.tags[s.tags.length-1].nextElementSibling;s.before=x,s.flush()}G.insert("",z,s,!1)},[G,z.name]),null});function ux(){for(var R=arguments.length,G=new Array(R),e=0;e<R;e++)G[e]=arguments[e];return sx(G)}var Bd=function(){var G=ux.apply(void 0,arguments),e="animation-"+G.name;return{name:e,styles:"@keyframes "+e+"{"+G.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}},F6=e6,O6=function(G){return G!=="theme"},K3=function(G){return typeof G=="string"&&G.charCodeAt(0)>96?F6:O6},J3=function(G,e,z){var N;if(e){var u=e.shouldForwardProp;N=G.__emotion_forwardProp&&u?function(s){return G.__emotion_forwardProp(s)&&u(s)}:u}return typeof N!="function"&&z&&(N=G.__emotion_forwardProp),N},N6=function(){return null},B6=function R(G,e){var z=G.__emotion_real===G,N=z&&G.__emotion_base||G,u,s;e!==void 0&&(u=e.label,s=e.target);var m=J3(G,e,z),x=m||K3(N),t=!x("as");return function(){var i=arguments,a=z&&G.__emotion_styles!==void 0?G.__emotion_styles.slice(0):[];if(u!==void 0&&a.push("label:"+u+";"),i[0]==null||i[0].raw===void 0)a.push.apply(a,i);else{a.push(i[0][0]);for(var r=i.length,n=1;n<r;n++)a.push(i[n],i[0][n])}var f=Z3(function(l,o,c){var h=t&&l.as||N,d="",p=[],y=l;if(l.theme==null){y={};for(var g in l)y[g]=l[g];y.theme=zn.exports.useContext(lx)}typeof l.className=="string"?d=C6(o.registered,p,l.className):l.className!=null&&(d=l.className+" ");var A=sx(a.concat(p),o.registered,y);H3(o,A,typeof h=="string"),d+=o.key+"-"+A.name,s!==void 0&&(d+=" "+s);var b=t&&m===void 0?K3(h):x,M={};for(var _ in l)t&&_==="as"||b(_)&&(M[_]=l[_]);M.className=d,M.ref=c;var T=zn.exports.createElement(h,M),w=zn.exports.createElement(N6,null);return zn.exports.createElement(zn.exports.Fragment,null,w,T)});return f.displayName=u!==void 0?u:"Styled("+(typeof N=="string"?N:N.displayName||N.name||"Component")+")",f.defaultProps=G.defaultProps,f.__emotion_real=f,f.__emotion_base=N,f.__emotion_styles=a,f.__emotion_forwardProp=m,Object.defineProperty(f,"toString",{value:function(){return"."+s}}),f.withComponent=function(l,o){return R(l,ba({},e,o,{shouldForwardProp:J3(f,o,!0)})).apply(void 0,a)},f}},U6=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],fx=B6.bind();U6.forEach(function(R){fx[R]=fx(R)});var V6=fx;function H6(R){return R==null||Object.keys(R).length===0}function G6(R){const{styles:G,defaultTheme:e={}}=R;return mi(z6,{styles:typeof G=="function"?N=>G(H6(N)?e:N):G})}/** @license MUI v5.2.5
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function Q3(R,G){return V6(R,G)}function Ud(R){return R!==null&&typeof R=="object"&&R.constructor===Object}function Lc(R,G,e={clone:!0}){const z=e.clone?ba({},R):R;return Ud(R)&&Ud(G)&&Object.keys(G).forEach(N=>{N!=="__proto__"&&(Ud(G[N])&&N in R&&Ud(R[N])?z[N]=Lc(R[N],G[N],e):z[N]=G[N])}),z}function Vd(R){let G="https://mui.com/production-error/?code="+R;for(let e=1;e<arguments.length;e+=1)G+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+R+"; visit "+G+" for the full message."}function Wi(R){if(typeof R!="string")throw new Error(Vd(7));return R.charAt(0).toUpperCase()+R.slice(1)}function W6(...R){return R.reduce((G,e)=>e==null?G:function(...N){G.apply(this,N),e.apply(this,N)},()=>{})}function Y6(R,G=166){let e;function z(...N){const u=()=>{R.apply(this,N)};clearTimeout(e),e=setTimeout(u,G)}return z.clear=()=>{clearTimeout(e)},z}function j6(R,G){return()=>null}function X6(R,G){return zn.exports.isValidElement(R)&&G.indexOf(R.type.muiName)!==-1}function $3(R){return R&&R.ownerDocument||document}function Z6(R){return $3(R).defaultView||window}function K6(R,G){return()=>null}function cx(R,G){typeof R=="function"?R(G):R&&(R.current=G)}const J6=typeof window!="undefined"?zn.exports.useLayoutEffect:zn.exports.useEffect;var q3=J6;let eT=0;function Q6(R){const[G,e]=zn.exports.useState(R),z=R||G;return zn.exports.useEffect(()=>{G==null&&(eT+=1,e(`mui-${eT}`))},[G]),z}function $6(R,G,e,z,N){return null}function tT({controlled:R,default:G,name:e,state:z="value"}){const{current:N}=zn.exports.useRef(R!==void 0),[u,s]=zn.exports.useState(G),m=N?R:u,x=zn.exports.useCallback(t=>{N||s(t)},[]);return[m,x]}function Hd(R){const G=zn.exports.useRef(R);return q3(()=>{G.current=R}),zn.exports.useCallback((...e)=>(0,G.current)(...e),[])}function hx(R,G){return zn.exports.useMemo(()=>R==null&&G==null?null:e=>{cx(R,e),cx(G,e)},[R,G])}let em=!0,vx=!1,rT;const q6={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function eE(R){const{type:G,tagName:e}=R;return!!(e==="INPUT"&&q6[G]&&!R.readOnly||e==="TEXTAREA"&&!R.readOnly||R.isContentEditable)}function tE(R){R.metaKey||R.altKey||R.ctrlKey||(em=!0)}function px(){em=!1}function rE(){this.visibilityState==="hidden"&&vx&&(em=!0)}function nE(R){R.addEventListener("keydown",tE,!0),R.addEventListener("mousedown",px,!0),R.addEventListener("pointerdown",px,!0),R.addEventListener("touchstart",px,!0),R.addEventListener("visibilitychange",rE,!0)}function aE(R){const{target:G}=R;try{return G.matches(":focus-visible")}catch{}return em||eE(G)}function nT(){const R=zn.exports.useCallback(N=>{N!=null&&nE(N.ownerDocument)},[]),G=zn.exports.useRef(!1);function e(){return G.current?(vx=!0,window.clearTimeout(rT),rT=window.setTimeout(()=>{vx=!1},100),G.current=!1,!0):!1}function z(N){return aE(N)?(G.current=!0,!0):!1}return{isFocusVisibleRef:G,onFocus:z,onBlur:e,ref:R}}function aT(R,G){const e=ba({},G);return Object.keys(R).forEach(z=>{e[z]===void 0&&(e[z]=R[z])}),e}function Gd(R,G){return G?Lc(R,G,{clone:!1}):R}const dx={xs:0,sm:600,md:900,lg:1200,xl:1536},iT={keys:["xs","sm","md","lg","xl"],up:R=>`@media (min-width:${dx[R]}px)`};function hh(R,G,e){const z=R.theme||{};if(Array.isArray(G)){const u=z.breakpoints||iT;return G.reduce((s,m,x)=>(s[u.up(u.keys[x])]=e(G[x]),s),{})}if(typeof G=="object"){const u=z.breakpoints||iT;return Object.keys(G).reduce((s,m)=>{if(Object.keys(u.values||dx).indexOf(m)!==-1){const x=u.up(m);s[x]=e(G[m],m)}else{const x=m;s[x]=G[x]}return s},{})}return e(G)}function iE(R={}){var G;return(R==null||(G=R.keys)==null?void 0:G.reduce((z,N)=>{const u=R.up(N);return z[u]={},z},{}))||{}}function oE(R,G){return R.reduce((e,z)=>{const N=e[z];return(!N||Object.keys(N).length===0)&&delete e[z],e},G)}function gx(R,G){return!G||typeof G!="string"?null:G.split(".").reduce((e,z)=>e&&e[z]?e[z]:null,R)}function oT(R,G,e,z=e){let N;return typeof R=="function"?N=R(e):Array.isArray(R)?N=R[e]||z:N=gx(R,e)||z,G&&(N=G(N)),N}function ri(R){const{prop:G,cssProperty:e=R.prop,themeKey:z,transform:N}=R,u=s=>{if(s[G]==null)return null;const m=s[G],x=s.theme,t=gx(x,z)||{};return hh(s,m,a=>{let r=oT(t,N,a);return a===r&&typeof a=="string"&&(r=oT(t,N,`${G}${a==="default"?"":Wi(a)}`,a)),e===!1?r:{[e]:r}})};return u.propTypes={},u.filterProps=[G],u}function vh(...R){const G=R.reduce((z,N)=>(N.filterProps.forEach(u=>{z[u]=N}),z),{}),e=z=>Object.keys(z).reduce((N,u)=>G[u]?Gd(N,G[u](z)):N,{});return e.propTypes={},e.filterProps=R.reduce((z,N)=>z.concat(N.filterProps),[]),e}function sE(R){const G={};return e=>(G[e]===void 0&&(G[e]=R(e)),G[e])}const lE={m:"margin",p:"padding"},uE={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},sT={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},fE=sE(R=>{if(R.length>2)if(sT[R])R=sT[R];else return[R];const[G,e]=R.split(""),z=lE[G],N=uE[e]||"";return Array.isArray(N)?N.map(u=>z+u):[z+N]}),cE=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],hE=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],lT=[...cE,...hE];function Wd(R,G,e,z){const N=gx(R,G)||e;return typeof N=="number"?u=>typeof u=="string"?u:N*u:Array.isArray(N)?u=>typeof u=="string"?u:N[u]:typeof N=="function"?N:()=>{}}function uT(R){return Wd(R,"spacing",8)}function Yd(R,G){if(typeof G=="string"||G==null)return G;const e=Math.abs(G),z=R(e);return G>=0?z:typeof z=="number"?-z:`-${z}`}function vE(R,G){return e=>R.reduce((z,N)=>(z[N]=Yd(G,e),z),{})}function pE(R,G,e,z){if(G.indexOf(e)===-1)return null;const N=fE(e),u=vE(N,z),s=R[e];return hh(R,s,u)}function dE(R,G){const e=uT(R.theme);return Object.keys(R).map(z=>pE(R,G,z,e)).reduce(Gd,{})}function tm(R){return dE(R,lT)}tm.propTypes={};tm.filterProps=lT;function jd(R){return typeof R!="number"?R:`${R}px solid`}const gE=ri({prop:"border",themeKey:"borders",transform:jd}),mE=ri({prop:"borderTop",themeKey:"borders",transform:jd}),yE=ri({prop:"borderRight",themeKey:"borders",transform:jd}),xE=ri({prop:"borderBottom",themeKey:"borders",transform:jd}),bE=ri({prop:"borderLeft",themeKey:"borders",transform:jd}),_E=ri({prop:"borderColor",themeKey:"palette"}),wE=ri({prop:"borderTopColor",themeKey:"palette"}),TE=ri({prop:"borderRightColor",themeKey:"palette"}),AE=ri({prop:"borderBottomColor",themeKey:"palette"}),ME=ri({prop:"borderLeftColor",themeKey:"palette"}),mx=R=>{if(R.borderRadius!==void 0&&R.borderRadius!==null){const G=Wd(R.theme,"shape.borderRadius",4),e=z=>({borderRadius:Yd(G,z)});return hh(R,R.borderRadius,e)}return null};mx.propTypes={};mx.filterProps=["borderRadius"];const SE=vh(gE,mE,yE,xE,bE,_E,wE,TE,AE,ME,mx);var fT=SE;const kE=ri({prop:"displayPrint",cssProperty:!1,transform:R=>({"@media print":{display:R}})}),EE=ri({prop:"display"}),CE=ri({prop:"overflow"}),LE=ri({prop:"textOverflow"}),PE=ri({prop:"visibility"}),RE=ri({prop:"whiteSpace"});var cT=vh(kE,EE,CE,LE,PE,RE);const DE=ri({prop:"flexBasis"}),IE=ri({prop:"flexDirection"}),zE=ri({prop:"flexWrap"}),FE=ri({prop:"justifyContent"}),OE=ri({prop:"alignItems"}),NE=ri({prop:"alignContent"}),BE=ri({prop:"order"}),UE=ri({prop:"flex"}),VE=ri({prop:"flexGrow"}),HE=ri({prop:"flexShrink"}),GE=ri({prop:"alignSelf"}),WE=ri({prop:"justifyItems"}),YE=ri({prop:"justifySelf"}),jE=vh(DE,IE,zE,FE,OE,NE,BE,UE,VE,HE,GE,WE,YE);var hT=jE;const yx=R=>{if(R.gap!==void 0&&R.gap!==null){const G=Wd(R.theme,"spacing",8),e=z=>({gap:Yd(G,z)});return hh(R,R.gap,e)}return null};yx.propTypes={};yx.filterProps=["gap"];const xx=R=>{if(R.columnGap!==void 0&&R.columnGap!==null){const G=Wd(R.theme,"spacing",8),e=z=>({columnGap:Yd(G,z)});return hh(R,R.columnGap,e)}return null};xx.propTypes={};xx.filterProps=["columnGap"];const bx=R=>{if(R.rowGap!==void 0&&R.rowGap!==null){const G=Wd(R.theme,"spacing",8),e=z=>({rowGap:Yd(G,z)});return hh(R,R.rowGap,e)}return null};bx.propTypes={};bx.filterProps=["rowGap"];const XE=ri({prop:"gridColumn"}),ZE=ri({prop:"gridRow"}),KE=ri({prop:"gridAutoFlow"}),JE=ri({prop:"gridAutoColumns"}),QE=ri({prop:"gridAutoRows"}),$E=ri({prop:"gridTemplateColumns"}),qE=ri({prop:"gridTemplateRows"}),eC=ri({prop:"gridTemplateAreas"}),tC=ri({prop:"gridArea"}),rC=vh(yx,xx,bx,XE,ZE,KE,JE,QE,$E,qE,eC,tC);var vT=rC;const nC=ri({prop:"color",themeKey:"palette"}),aC=ri({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),iC=ri({prop:"backgroundColor",themeKey:"palette"}),oC=vh(nC,aC,iC);var pT=oC;const sC=ri({prop:"position"}),lC=ri({prop:"zIndex",themeKey:"zIndex"}),uC=ri({prop:"top"}),fC=ri({prop:"right"}),cC=ri({prop:"bottom"}),hC=ri({prop:"left"});var dT=vh(sC,lC,uC,fC,cC,hC);const vC=ri({prop:"boxShadow",themeKey:"shadows"});var gT=vC;function ph(R){return R<=1&&R!==0?`${R*100}%`:R}const pC=ri({prop:"width",transform:ph}),mT=R=>{if(R.maxWidth!==void 0&&R.maxWidth!==null){const G=e=>{var z,N,u;return{maxWidth:((z=R.theme)==null||(N=z.breakpoints)==null||(u=N.values)==null?void 0:u[e])||dx[e]||ph(e)}};return hh(R,R.maxWidth,G)}return null};mT.filterProps=["maxWidth"];const dC=ri({prop:"minWidth",transform:ph}),gC=ri({prop:"height",transform:ph}),mC=ri({prop:"maxHeight",transform:ph}),yC=ri({prop:"minHeight",transform:ph});ri({prop:"size",cssProperty:"width",transform:ph});ri({prop:"size",cssProperty:"height",transform:ph});const xC=ri({prop:"boxSizing"}),bC=vh(pC,mT,dC,gC,mC,yC,xC);var yT=bC;const _C=ri({prop:"fontFamily",themeKey:"typography"}),wC=ri({prop:"fontSize",themeKey:"typography"}),TC=ri({prop:"fontStyle",themeKey:"typography"}),AC=ri({prop:"fontWeight",themeKey:"typography"}),MC=ri({prop:"letterSpacing"}),SC=ri({prop:"lineHeight"}),kC=ri({prop:"textAlign"}),EC=ri({prop:"typography",cssProperty:!1,themeKey:"typography"}),CC=vh(EC,_C,wC,TC,AC,MC,SC,kC);var xT=CC;const bT={borders:fT.filterProps,display:cT.filterProps,flexbox:hT.filterProps,grid:vT.filterProps,positions:dT.filterProps,palette:pT.filterProps,shadows:gT.filterProps,sizing:yT.filterProps,spacing:tm.filterProps,typography:xT.filterProps},LC={borders:fT,display:cT,flexbox:hT,grid:vT,positions:dT,palette:pT,shadows:gT,sizing:yT,spacing:tm,typography:xT},_x=Object.keys(bT).reduce((R,G)=>(bT[G].forEach(e=>{R[e]=LC[G]}),R),{});function _T(R,G,e){const z={[R]:G,theme:e},N=_x[R];return N?N(z):{[R]:G}}function PC(...R){const G=R.reduce((z,N)=>z.concat(Object.keys(N)),[]),e=new Set(G);return R.every(z=>e.size===Object.keys(z).length)}function RC(R,G){return typeof R=="function"?R(G):R}function rm(R){const{sx:G,theme:e={}}=R||{};if(!G)return null;function z(N){let u=N;if(typeof N=="function")u=N(e);else if(typeof N!="object")return N;const s=iE(e.breakpoints),m=Object.keys(s);let x=s;return Object.keys(u).forEach(t=>{const i=RC(u[t],e);if(i!=null)if(typeof i=="object")if(_x[t])x=Gd(x,_T(t,i,e));else{const a=hh({theme:e},i,r=>({[t]:r}));PC(a,i)?x[t]=rm({sx:i,theme:e}):x=Gd(x,a)}else x=Gd(x,_T(t,i,e))}),oE(m,x)}return Array.isArray(G)?G.map(z):z(G)}rm.filterProps=["sx"];const DC=["sx"],IC=R=>{const G={systemProps:{},otherProps:{}};return Object.keys(R).forEach(e=>{_x[e]?G.systemProps[e]=R[e]:G.otherProps[e]=R[e]}),G};function wT(R){const{sx:G}=R,e=ko(R,DC),{systemProps:z,otherProps:N}=IC(e);let u;return Array.isArray(G)?u=[z,...G]:typeof G=="function"?u=(...s)=>{const m=G(...s);return Ud(m)?ba({},z,m):z}:u=ba({},z,G),ba({},N,{sx:u})}function TT(R){var G,e,z="";if(typeof R=="string"||typeof R=="number")z+=R;else if(typeof R=="object")if(Array.isArray(R))for(G=0;G<R.length;G++)R[G]&&(e=TT(R[G]))&&(z&&(z+=" "),z+=e);else for(G in R)R[G]&&(z&&(z+=" "),z+=G);return z}function Yo(){for(var R=0,G,e,z="";R<arguments.length;)(G=arguments[R++])&&(e=TT(G))&&(z&&(z+=" "),z+=e);return z}const zC=["values","unit","step"];function FC(R){const{values:G={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:e="px",step:z=5}=R,N=ko(R,zC),u=Object.keys(G);function s(a){return`@media (min-width:${typeof G[a]=="number"?G[a]:a}${e})`}function m(a){return`@media (max-width:${(typeof G[a]=="number"?G[a]:a)-z/100}${e})`}function x(a,r){const n=u.indexOf(r);return`@media (min-width:${typeof G[a]=="number"?G[a]:a}${e}) and (max-width:${(n!==-1&&typeof G[u[n]]=="number"?G[u[n]]:r)-z/100}${e})`}function t(a){return u.indexOf(a)+1<u.length?x(a,u[u.indexOf(a)+1]):s(a)}function i(a){const r=u.indexOf(a);return r===0?s(u[1]):r===u.length-1?m(u[r]):x(a,u[u.indexOf(a)+1]).replace("@media","@media not all and")}return ba({keys:u,values:G,up:s,down:m,between:x,only:t,not:i,unit:e},N)}const OC={borderRadius:4};var NC=OC;function BC(R=8){if(R.mui)return R;const G=uT({spacing:R}),e=(...z)=>(z.length===0?[1]:z).map(u=>{const s=G(u);return typeof s=="number"?`${s}px`:s}).join(" ");return e.mui=!0,e}const UC=["breakpoints","palette","spacing","shape"];function wx(R={},...G){const{breakpoints:e={},palette:z={},spacing:N,shape:u={}}=R,s=ko(R,UC),m=FC(e),x=BC(N);let t=Lc({breakpoints:m,direction:"ltr",components:{},palette:ba({mode:"light"},z),spacing:x,shape:ba({},NC,u)},s);return t=G.reduce((i,a)=>Lc(i,a),t),t}const VC=zn.exports.createContext(null);var AT=VC;function MT(){return zn.exports.useContext(AT)}const HC=typeof Symbol=="function"&&Symbol.for;var GC=HC?Symbol.for("mui.nested"):"__THEME_NESTED__";function WC(R,G){return typeof G=="function"?G(R):ba({},R,G)}function YC(R){const{children:G,theme:e}=R,z=MT(),N=zn.exports.useMemo(()=>{const u=z===null?e:WC(z,e);return u!=null&&(u[GC]=z!==null),u},[e,z]);return mi(AT.Provider,{value:N,children:G})}function jC(R){return Object.keys(R).length===0}function XC(R=null){const G=MT();return!G||jC(G)?R:G}const ZC=wx();function Tx(R=ZC){return XC(R)}const KC=["className","component"];function JC(R={}){const{defaultTheme:G,defaultClassName:e="MuiBox-root",generateClassName:z}=R,N=Q3("div")(rm);return zn.exports.forwardRef(function(m,x){const t=Tx(G),i=wT(m),{className:a,component:r="div"}=i,n=ko(i,KC);return mi(N,ba({as:r,ref:x,className:Yo(a,z?z(e):e),theme:t},n))})}const QC=["variant"];function ST(R){return R.length===0}function kT(R){const{variant:G}=R,e=ko(R,QC);let z=G||"";return Object.keys(e).sort().forEach(N=>{N==="color"?z+=ST(z)?R[N]:Wi(R[N]):z+=`${ST(z)?N:Wi(N)}${Wi(R[N].toString())}`}),z}const $C=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],qC=["theme"],eL=["theme"];function Xd(R){return Object.keys(R).length===0}const tL=(R,G)=>G.components&&G.components[R]&&G.components[R].styleOverrides?G.components[R].styleOverrides:null,rL=(R,G)=>{let e=[];G&&G.components&&G.components[R]&&G.components[R].variants&&(e=G.components[R].variants);const z={};return e.forEach(N=>{const u=kT(N.props);z[u]=N.style}),z},nL=(R,G,e,z)=>{var N,u;const{ownerState:s={}}=R,m=[],x=e==null||(N=e.components)==null||(u=N[z])==null?void 0:u.variants;return x&&x.forEach(t=>{let i=!0;Object.keys(t.props).forEach(a=>{s[a]!==t.props[a]&&R[a]!==t.props[a]&&(i=!1)}),i&&m.push(G[kT(t.props)])}),m};function nm(R){return R!=="ownerState"&&R!=="theme"&&R!=="sx"&&R!=="as"}const aL=wx();function ET(R={}){const{defaultTheme:G=aL,rootShouldForwardProp:e=nm,slotShouldForwardProp:z=nm}=R;return(N,u={})=>{const{name:s,slot:m,skipVariantsResolver:x,skipSx:t,overridesResolver:i}=u,a=ko(u,$C),r=x!==void 0?x:m&&m!=="Root"||!1,n=t||!1;let f,l=nm;m==="Root"?l=e:m&&(l=z);const o=Q3(N,ba({shouldForwardProp:l,label:f},a));return(h,...d)=>{const p=d?d.map(b=>typeof b=="function"&&b.__emotion_real!==b?M=>{let{theme:_}=M,T=ko(M,qC);return b(ba({theme:Xd(_)?G:_},T))}:b):[];let y=h;s&&i&&p.push(b=>{const M=Xd(b.theme)?G:b.theme,_=tL(s,M);return _?i(b,_):null}),s&&!r&&p.push(b=>{const M=Xd(b.theme)?G:b.theme;return nL(b,rL(s,M),M,s)}),n||p.push(b=>{const M=Xd(b.theme)?G:b.theme;return rm(ba({},b,{theme:M}))});const g=p.length-d.length;if(Array.isArray(h)&&g>0){const b=new Array(g).fill("");y=[...h,...b],y.raw=[...h.raw,...b]}else typeof h=="function"&&(y=b=>{let{theme:M}=b,_=ko(b,eL);return h(ba({theme:Xd(M)?G:M},_))});return o(y,...p)}}}const iL=ET();var yD=iL;function oL(R){const{theme:G,name:e,props:z}=R;return!G||!G.components||!G.components[e]||!G.components[e].defaultProps?z:aT(G.components[e].defaultProps,z)}function sL({props:R,name:G,defaultTheme:e}){const z=Tx(e);return oL({theme:z,name:G,props:R})}function Ax(R,G=0,e=1){return Math.min(Math.max(G,R),e)}function lL(R){R=R.substr(1);const G=new RegExp(`.{1,${R.length>=6?2:1}}`,"g");let e=R.match(G);return e&&e[0].length===1&&(e=e.map(z=>z+z)),e?`rgb${e.length===4?"a":""}(${e.map((z,N)=>N<3?parseInt(z,16):Math.round(parseInt(z,16)/255*1e3)/1e3).join(", ")})`:""}function Gh(R){if(R.type)return R;if(R.charAt(0)==="#")return Gh(lL(R));const G=R.indexOf("("),e=R.substring(0,G);if(["rgb","rgba","hsl","hsla","color"].indexOf(e)===-1)throw new Error(Vd(9,R));let z=R.substring(G+1,R.length-1),N;if(e==="color"){if(z=z.split(" "),N=z.shift(),z.length===4&&z[3].charAt(0)==="/"&&(z[3]=z[3].substr(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(N)===-1)throw new Error(Vd(10,N))}else z=z.split(",");return z=z.map(u=>parseFloat(u)),{type:e,values:z,colorSpace:N}}function am(R){const{type:G,colorSpace:e}=R;let{values:z}=R;return G.indexOf("rgb")!==-1?z=z.map((N,u)=>u<3?parseInt(N,10):N):G.indexOf("hsl")!==-1&&(z[1]=`${z[1]}%`,z[2]=`${z[2]}%`),G.indexOf("color")!==-1?z=`${e} ${z.join(" ")}`:z=`${z.join(", ")}`,`${G}(${z})`}function uL(R){R=Gh(R);const{values:G}=R,e=G[0],z=G[1]/100,N=G[2]/100,u=z*Math.min(N,1-N),s=(t,i=(t+e/30)%12)=>N-u*Math.max(Math.min(i-3,9-i,1),-1);let m="rgb";const x=[Math.round(s(0)*255),Math.round(s(8)*255),Math.round(s(4)*255)];return R.type==="hsla"&&(m+="a",x.push(G[3])),am({type:m,values:x})}function CT(R){R=Gh(R);let G=R.type==="hsl"?Gh(uL(R)).values:R.values;return G=G.map(e=>(R.type!=="color"&&(e/=255),e<=.03928?e/12.92:((e+.055)/1.055)**2.4)),Number((.2126*G[0]+.7152*G[1]+.0722*G[2]).toFixed(3))}function fL(R,G){const e=CT(R),z=CT(G);return(Math.max(e,z)+.05)/(Math.min(e,z)+.05)}function tp(R,G){return R=Gh(R),G=Ax(G),(R.type==="rgb"||R.type==="hsl")&&(R.type+="a"),R.type==="color"?R.values[3]=`/${G}`:R.values[3]=G,am(R)}function LT(R,G){if(R=Gh(R),G=Ax(G),R.type.indexOf("hsl")!==-1)R.values[2]*=1-G;else if(R.type.indexOf("rgb")!==-1||R.type.indexOf("color")!==-1)for(let e=0;e<3;e+=1)R.values[e]*=1-G;return am(R)}function PT(R,G){if(R=Gh(R),G=Ax(G),R.type.indexOf("hsl")!==-1)R.values[2]+=(100-R.values[2])*G;else if(R.type.indexOf("rgb")!==-1)for(let e=0;e<3;e+=1)R.values[e]+=(255-R.values[e])*G;else if(R.type.indexOf("color")!==-1)for(let e=0;e<3;e+=1)R.values[e]+=(1-R.values[e])*G;return am(R)}function cL(R){const G=Tx();return mi(lx.Provider,{value:typeof G=="object"?G:{},children:R.children})}function xD(R){const{children:G,theme:e}=R;return mi(YC,{theme:e,children:mi(cL,{children:G})})}function ku(R,G,e){const z={};return Object.keys(R).forEach(N=>{z[N]=R[N].reduce((u,s)=>(s&&(e&&e[s]&&u.push(e[s]),u.push(G(s))),u),[]).join(" ")}),z}const RT=R=>R,hL=()=>{let R=RT;return{configure(G){R=G},generate(G){return R(G)},reset(){R=RT}}},vL=hL();var Mx=vL;const pL={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function ru(R,G){return pL[G]||`${Mx.generate(R)}-${G}`}function nu(R,G){const e={};return G.forEach(z=>{e[z]=ru(R,z)}),e}function dL(R,G,e){return ba({toolbar:{minHeight:56,[`${R.up("xs")} and (orientation: landscape)`]:{minHeight:48},[R.up("sm")]:{minHeight:64}}},e)}const gL={black:"#000",white:"#fff"};var Zd=gL;const mL={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"};var yL=mL;const xL={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"};var rp=xL;const bL={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"};var np=bL;const _L={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"};var Kd=_L;const wL={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"};var ap=wL;const TL={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"};var ip=TL;const AL={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"};var op=AL;const ML=["mode","contrastThreshold","tonalOffset"],DT={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:Zd.white,default:Zd.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Sx={text:{primary:Zd.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:Zd.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function IT(R,G,e,z){const N=z.light||z,u=z.dark||z*1.5;R[G]||(R.hasOwnProperty(e)?R[G]=R[e]:G==="light"?R.light=PT(R.main,N):G==="dark"&&(R.dark=LT(R.main,u)))}function SL(R="light"){return R==="dark"?{main:ap[200],light:ap[50],dark:ap[400]}:{main:ap[700],light:ap[400],dark:ap[800]}}function kL(R="light"){return R==="dark"?{main:rp[200],light:rp[50],dark:rp[400]}:{main:rp[500],light:rp[300],dark:rp[700]}}function EL(R="light"){return R==="dark"?{main:np[500],light:np[300],dark:np[700]}:{main:np[700],light:np[400],dark:np[800]}}function CL(R="light"){return R==="dark"?{main:ip[400],light:ip[300],dark:ip[700]}:{main:ip[700],light:ip[500],dark:ip[900]}}function LL(R="light"){return R==="dark"?{main:op[400],light:op[300],dark:op[700]}:{main:op[800],light:op[500],dark:op[900]}}function PL(R="light"){return R==="dark"?{main:Kd[400],light:Kd[300],dark:Kd[700]}:{main:"#ed6c02",light:Kd[500],dark:Kd[900]}}function RL(R){const{mode:G="light",contrastThreshold:e=3,tonalOffset:z=.2}=R,N=ko(R,ML),u=R.primary||SL(G),s=R.secondary||kL(G),m=R.error||EL(G),x=R.info||CL(G),t=R.success||LL(G),i=R.warning||PL(G);function a(l){return fL(l,Sx.text.primary)>=e?Sx.text.primary:DT.text.primary}const r=({color:l,name:o,mainShade:c=500,lightShade:h=300,darkShade:d=700})=>{if(l=ba({},l),!l.main&&l[c]&&(l.main=l[c]),!l.hasOwnProperty("main"))throw new Error(Vd(11,o?` (${o})`:"",c));if(typeof l.main!="string")throw new Error(Vd(12,o?` (${o})`:"",JSON.stringify(l.main)));return IT(l,"light",h,z),IT(l,"dark",d,z),l.contrastText||(l.contrastText=a(l.main)),l},n={dark:Sx,light:DT};return Lc(ba({common:Zd,mode:G,primary:r({color:u,name:"primary"}),secondary:r({color:s,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:r({color:m,name:"error"}),warning:r({color:i,name:"warning"}),info:r({color:x,name:"info"}),success:r({color:t,name:"success"}),grey:yL,contrastThreshold:e,getContrastText:a,augmentColor:r,tonalOffset:z},n[G]),N)}const DL=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function IL(R){return Math.round(R*1e5)/1e5}const zT={textTransform:"uppercase"},FT='"Roboto", "Helvetica", "Arial", sans-serif';function zL(R,G){const e=typeof G=="function"?G(R):G,{fontFamily:z=FT,fontSize:N=14,fontWeightLight:u=300,fontWeightRegular:s=400,fontWeightMedium:m=500,fontWeightBold:x=700,htmlFontSize:t=16,allVariants:i,pxToRem:a}=e,r=ko(e,DL),n=N/14,f=a||(c=>`${c/t*n}rem`),l=(c,h,d,p,y)=>ba({fontFamily:z,fontWeight:c,fontSize:f(h),lineHeight:d},z===FT?{letterSpacing:`${IL(p/h)}em`}:{},y,i),o={h1:l(u,96,1.167,-1.5),h2:l(u,60,1.2,-.5),h3:l(s,48,1.167,0),h4:l(s,34,1.235,.25),h5:l(s,24,1.334,0),h6:l(m,20,1.6,.15),subtitle1:l(s,16,1.75,.15),subtitle2:l(m,14,1.57,.1),body1:l(s,16,1.5,.15),body2:l(s,14,1.43,.15),button:l(m,14,1.75,.4,zT),caption:l(s,12,1.66,.4),overline:l(s,12,2.66,1,zT)};return Lc(ba({htmlFontSize:t,pxToRem:f,fontFamily:z,fontSize:N,fontWeightLight:u,fontWeightRegular:s,fontWeightMedium:m,fontWeightBold:x},o),r,{clone:!1})}const FL=.2,OL=.14,NL=.12;function Jo(...R){return[`${R[0]}px ${R[1]}px ${R[2]}px ${R[3]}px rgba(0,0,0,${FL})`,`${R[4]}px ${R[5]}px ${R[6]}px ${R[7]}px rgba(0,0,0,${OL})`,`${R[8]}px ${R[9]}px ${R[10]}px ${R[11]}px rgba(0,0,0,${NL})`].join(",")}const BL=["none",Jo(0,2,1,-1,0,1,1,0,0,1,3,0),Jo(0,3,1,-2,0,2,2,0,0,1,5,0),Jo(0,3,3,-2,0,3,4,0,0,1,8,0),Jo(0,2,4,-1,0,4,5,0,0,1,10,0),Jo(0,3,5,-1,0,5,8,0,0,1,14,0),Jo(0,3,5,-1,0,6,10,0,0,1,18,0),Jo(0,4,5,-2,0,7,10,1,0,2,16,1),Jo(0,5,5,-3,0,8,10,1,0,3,14,2),Jo(0,5,6,-3,0,9,12,1,0,3,16,2),Jo(0,6,6,-3,0,10,14,1,0,4,18,3),Jo(0,6,7,-4,0,11,15,1,0,4,20,3),Jo(0,7,8,-4,0,12,17,2,0,5,22,4),Jo(0,7,8,-4,0,13,19,2,0,5,24,4),Jo(0,7,9,-4,0,14,21,2,0,5,26,4),Jo(0,8,9,-5,0,15,22,2,0,6,28,5),Jo(0,8,10,-5,0,16,24,2,0,6,30,5),Jo(0,8,11,-5,0,17,26,2,0,6,32,5),Jo(0,9,11,-5,0,18,28,2,0,7,34,6),Jo(0,9,12,-6,0,19,29,2,0,7,36,6),Jo(0,10,13,-6,0,20,31,3,0,8,38,7),Jo(0,10,13,-6,0,21,33,3,0,8,40,7),Jo(0,10,14,-6,0,22,35,3,0,8,42,7),Jo(0,11,14,-7,0,23,36,3,0,9,44,8),Jo(0,11,15,-7,0,24,38,3,0,9,46,8)];var UL=BL;const VL=["duration","easing","delay"],HL={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},GL={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function OT(R){return`${Math.round(R)}ms`}function WL(R){if(!R)return 0;const G=R/36;return Math.round((4+15*G**.25+G/5)*10)}function YL(R){const G=ba({},HL,R.easing),e=ba({},GL,R.duration);return ba({getAutoHeightDuration:WL,create:(N=["all"],u={})=>{const{duration:s=e.standard,easing:m=G.easeInOut,delay:x=0}=u;return ko(u,VL),(Array.isArray(N)?N:[N]).map(t=>`${t} ${typeof s=="string"?s:OT(s)} ${m} ${typeof x=="string"?x:OT(x)}`).join(",")}},R,{easing:G,duration:e})}const jL={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500};var XL=jL;const ZL=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function NT(R={},...G){const{mixins:e={},palette:z={},transitions:N={},typography:u={}}=R,s=ko(R,ZL),m=RL(z),x=wx(R);let t=Lc(x,{mixins:dL(x.breakpoints,x.spacing,e),palette:m,shadows:UL.slice(),typography:zL(m,u),transitions:YL(N),zIndex:ba({},XL)});return t=Lc(t,s),t=G.reduce((i,a)=>Lc(i,a),t),t}const KL=NT();var kx=KL;const BT=R=>nm(R)&&R!=="classes",JL=ET({defaultTheme:kx,rootShouldForwardProp:BT});var To=JL;function au({props:R,name:G}){return sL({props:R,name:G,defaultTheme:kx})}function QL(R){return ru("MuiFormGroup",R)}nu("MuiFormGroup",["root","row"]);const $L=["className","row"],qL=R=>{const{classes:G,row:e}=R;return ku({root:["root",e&&"row"]},QL,G)},e8=To("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,e.row&&G.row]}})(({ownerState:R})=>ba({display:"flex",flexDirection:"column",flexWrap:"wrap"},R.row&&{flexDirection:"row"})),t8=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiFormGroup"}),{className:N,row:u=!1}=z,s=ko(z,$L),m=ba({},z,{row:u}),x=qL(m);return mi(e8,ba({className:Yo(x.root,N),ownerState:m,ref:e},s))});var bD=t8;const r8=zn.exports.createContext();var n8=r8;function UT(){return zn.exports.useContext(n8)}function a8(R){return ru("MuiTypography",R)}nu("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const i8=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],o8=R=>{const{align:G,gutterBottom:e,noWrap:z,paragraph:N,variant:u,classes:s}=R,m={root:["root",u,R.align!=="inherit"&&`align${Wi(G)}`,e&&"gutterBottom",z&&"noWrap",N&&"paragraph"]};return ku(m,a8,s)},s8=To("span",{name:"MuiTypography",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,e.variant&&G[e.variant],e.align!=="inherit"&&G[`align${Wi(e.align)}`],e.noWrap&&G.noWrap,e.gutterBottom&&G.gutterBottom,e.paragraph&&G.paragraph]}})(({theme:R,ownerState:G})=>ba({margin:0},G.variant&&R.typography[G.variant],G.align!=="inherit"&&{textAlign:G.align},G.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},G.gutterBottom&&{marginBottom:"0.35em"},G.paragraph&&{marginBottom:16})),VT={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},l8={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},u8=R=>l8[R]||R,f8=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiTypography"}),N=u8(z.color),u=wT(ba({},z,{color:N})),{align:s="inherit",className:m,component:x,gutterBottom:t=!1,noWrap:i=!1,paragraph:a=!1,variant:r="body1",variantMapping:n=VT}=u,f=ko(u,i8),l=ba({},u,{align:s,color:N,className:m,component:x,gutterBottom:t,noWrap:i,paragraph:a,variant:r,variantMapping:n}),o=x||(a?"p":n[r]||VT[r])||"span",c=o8(l);return mi(s8,ba({as:o,ref:e,ownerState:l,className:Yo(c.root,m)},f))});var HT=f8;function c8(R){return ru("MuiFormControlLabel",R)}const h8=nu("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label"]);var im=h8;const v8=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","value"],p8=R=>{const{classes:G,disabled:e,labelPlacement:z}=R,N={root:["root",e&&"disabled",`labelPlacement${Wi(z)}`],label:["label",e&&"disabled"]};return ku(N,c8,G)},d8=To("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[{[`& .${im.label}`]:G.label},G.root,G[`labelPlacement${Wi(e.labelPlacement)}`]]}})(({theme:R,ownerState:G})=>ba({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${im.disabled}`]:{cursor:"default"}},G.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},G.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},G.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${im.label}`]:{[`&.${im.disabled}`]:{color:R.palette.text.disabled}}})),g8=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiFormControlLabel"}),{className:N,componentsProps:u={},control:s,disabled:m,disableTypography:x,label:t,labelPlacement:i="end"}=z,a=ko(z,v8),r=UT();let n=m;typeof n=="undefined"&&typeof s.props.disabled!="undefined"&&(n=s.props.disabled),typeof n=="undefined"&&r&&(n=r.disabled);const f={disabled:n};["checked","name","onChange","value","inputRef"].forEach(c=>{typeof s.props[c]=="undefined"&&typeof z[c]!="undefined"&&(f[c]=z[c])});const l=ba({},z,{disabled:n,label:t,labelPlacement:i}),o=p8(l);return Wu(d8,ba({className:Yo(o.root,N),ownerState:l,ref:e},a,{children:[zn.exports.cloneElement(s,f),t.type===HT||x?t:mi(HT,ba({component:"span",className:o.label},u.typography,{children:t}))]}))});var _D=g8;function Ex(R,G){return Ex=Object.setPrototypeOf||function(z,N){return z.__proto__=N,z},Ex(R,G)}function m8(R,G){R.prototype=Object.create(G.prototype),R.prototype.constructor=R,Ex(R,G)}var GT=Tv.createContext(null);function y8(R){if(R===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R}function Cx(R,G){var e=function(u){return G&&zn.exports.isValidElement(u)?G(u):u},z=Object.create(null);return R&&zn.exports.Children.map(R,function(N){return N}).forEach(function(N){z[N.key]=e(N)}),z}function x8(R,G){R=R||{},G=G||{};function e(i){return i in G?G[i]:R[i]}var z=Object.create(null),N=[];for(var u in R)u in G?N.length&&(z[u]=N,N=[]):N.push(u);var s,m={};for(var x in G){if(z[x])for(s=0;s<z[x].length;s++){var t=z[x][s];m[z[x][s]]=e(t)}m[x]=e(x)}for(s=0;s<N.length;s++)m[N[s]]=e(N[s]);return m}function Wh(R,G,e){return e[G]!=null?e[G]:R.props[G]}function b8(R,G){return Cx(R.children,function(e){return zn.exports.cloneElement(e,{onExited:G.bind(null,e),in:!0,appear:Wh(e,"appear",R),enter:Wh(e,"enter",R),exit:Wh(e,"exit",R)})})}function _8(R,G,e){var z=Cx(R.children),N=x8(G,z);return Object.keys(N).forEach(function(u){var s=N[u];if(!!zn.exports.isValidElement(s)){var m=u in G,x=u in z,t=G[u],i=zn.exports.isValidElement(t)&&!t.props.in;x&&(!m||i)?N[u]=zn.exports.cloneElement(s,{onExited:e.bind(null,s),in:!0,exit:Wh(s,"exit",R),enter:Wh(s,"enter",R)}):!x&&m&&!i?N[u]=zn.exports.cloneElement(s,{in:!1}):x&&m&&zn.exports.isValidElement(t)&&(N[u]=zn.exports.cloneElement(s,{onExited:e.bind(null,s),in:t.props.in,exit:Wh(s,"exit",R),enter:Wh(s,"enter",R)}))}}),N}var w8=Object.values||function(R){return Object.keys(R).map(function(G){return R[G]})},T8={component:"div",childFactory:function(G){return G}},Lx=function(R){m8(G,R);function G(z,N){var u;u=R.call(this,z,N)||this;var s=u.handleExited.bind(y8(u));return u.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},u}var e=G.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},G.getDerivedStateFromProps=function(N,u){var s=u.children,m=u.handleExited,x=u.firstRender;return{children:x?b8(N,m):_8(N,s,m),firstRender:!1}},e.handleExited=function(N,u){var s=Cx(this.props.children);N.key in s||(N.props.onExited&&N.props.onExited(u),this.mounted&&this.setState(function(m){var x=ba({},m.children);return delete x[N.key],{children:x}}))},e.render=function(){var N=this.props,u=N.component,s=N.childFactory,m=ko(N,["component","childFactory"]),x=this.state.contextValue,t=w8(this.state.children).map(s);return delete m.appear,delete m.enter,delete m.exit,u===null?Tv.createElement(GT.Provider,{value:x},t):Tv.createElement(GT.Provider,{value:x},Tv.createElement(u,m,t))},G}(Tv.Component);Lx.propTypes={};Lx.defaultProps=T8;var A8=Lx;function M8(R){const{className:G,classes:e,pulsate:z=!1,rippleX:N,rippleY:u,rippleSize:s,in:m,onExited:x,timeout:t}=R,[i,a]=zn.exports.useState(!1),r=Yo(G,e.ripple,e.rippleVisible,z&&e.ripplePulsate),n={width:s,height:s,top:-(s/2)+u,left:-(s/2)+N},f=Yo(e.child,i&&e.childLeaving,z&&e.childPulsate);return!m&&!i&&a(!0),zn.exports.useEffect(()=>{if(!m&&x!=null){const l=setTimeout(x,t);return()=>{clearTimeout(l)}}},[x,m,t]),mi("span",{className:r,style:n,children:mi("span",{className:f})})}const S8=nu("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]);var pf=S8;const k8=["center","classes","className"];let om=R=>R,WT,YT,jT,XT;const Px=550,E8=80,C8=Bd(WT||(WT=om`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),L8=Bd(YT||(YT=om`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),P8=Bd(jT||(jT=om`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),R8=To("span",{name:"MuiTouchRipple",slot:"Root",skipSx:!0})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),D8=To(M8,{name:"MuiTouchRipple",slot:"Ripple"})(XT||(XT=om`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),pf.rippleVisible,C8,Px,({theme:R})=>R.transitions.easing.easeInOut,pf.ripplePulsate,({theme:R})=>R.transitions.duration.shorter,pf.child,pf.childLeaving,L8,Px,({theme:R})=>R.transitions.easing.easeInOut,pf.childPulsate,P8,({theme:R})=>R.transitions.easing.easeInOut),I8=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiTouchRipple"}),{center:N=!1,classes:u={},className:s}=z,m=ko(z,k8),[x,t]=zn.exports.useState([]),i=zn.exports.useRef(0),a=zn.exports.useRef(null);zn.exports.useEffect(()=>{a.current&&(a.current(),a.current=null)},[x]);const r=zn.exports.useRef(!1),n=zn.exports.useRef(null),f=zn.exports.useRef(null),l=zn.exports.useRef(null);zn.exports.useEffect(()=>()=>{clearTimeout(n.current)},[]);const o=zn.exports.useCallback(p=>{const{pulsate:y,rippleX:g,rippleY:A,rippleSize:b,cb:M}=p;t(_=>[..._,mi(D8,{classes:{ripple:Yo(u.ripple,pf.ripple),rippleVisible:Yo(u.rippleVisible,pf.rippleVisible),ripplePulsate:Yo(u.ripplePulsate,pf.ripplePulsate),child:Yo(u.child,pf.child),childLeaving:Yo(u.childLeaving,pf.childLeaving),childPulsate:Yo(u.childPulsate,pf.childPulsate)},timeout:Px,pulsate:y,rippleX:g,rippleY:A,rippleSize:b},i.current)]),i.current+=1,a.current=M},[u]),c=zn.exports.useCallback((p={},y={},g)=>{const{pulsate:A=!1,center:b=N||y.pulsate,fakeElement:M=!1}=y;if(p.type==="mousedown"&&r.current){r.current=!1;return}p.type==="touchstart"&&(r.current=!0);const _=M?null:l.current,T=_?_.getBoundingClientRect():{width:0,height:0,left:0,top:0};let w,v,L;if(b||p.clientX===0&&p.clientY===0||!p.clientX&&!p.touches)w=Math.round(T.width/2),v=Math.round(T.height/2);else{const{clientX:S,clientY:k}=p.touches?p.touches[0]:p;w=Math.round(S-T.left),v=Math.round(k-T.top)}if(b)L=Math.sqrt((2*T.width**2+T.height**2)/3),L%2==0&&(L+=1);else{const S=Math.max(Math.abs((_?_.clientWidth:0)-w),w)*2+2,k=Math.max(Math.abs((_?_.clientHeight:0)-v),v)*2+2;L=Math.sqrt(S**2+k**2)}p.touches?f.current===null&&(f.current=()=>{o({pulsate:A,rippleX:w,rippleY:v,rippleSize:L,cb:g})},n.current=setTimeout(()=>{f.current&&(f.current(),f.current=null)},E8)):o({pulsate:A,rippleX:w,rippleY:v,rippleSize:L,cb:g})},[N,o]),h=zn.exports.useCallback(()=>{c({},{pulsate:!0})},[c]),d=zn.exports.useCallback((p,y)=>{if(clearTimeout(n.current),p.type==="touchend"&&f.current){f.current(),f.current=null,n.current=setTimeout(()=>{d(p,y)});return}f.current=null,t(g=>g.length>0?g.slice(1):g),a.current=y},[]);return zn.exports.useImperativeHandle(e,()=>({pulsate:h,start:c,stop:d}),[h,c,d]),mi(R8,ba({className:Yo(u.root,pf.root,s),ref:l},m,{children:mi(A8,{component:null,exit:!0,children:x})}))});var z8=I8;function F8(R){return ru("MuiButtonBase",R)}const O8=nu("MuiButtonBase",["root","disabled","focusVisible"]);var N8=O8;const B8=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","type"],U8=R=>{const{disabled:G,focusVisible:e,focusVisibleClassName:z,classes:N}=R,s=ku({root:["root",G&&"disabled",e&&"focusVisible"]},F8,N);return e&&z&&(s.root+=` ${z}`),s},V8=To("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(R,G)=>G.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${N8.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),H8=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiButtonBase"}),{action:N,centerRipple:u=!1,children:s,className:m,component:x="button",disabled:t=!1,disableRipple:i=!1,disableTouchRipple:a=!1,focusRipple:r=!1,LinkComponent:n="a",onBlur:f,onClick:l,onContextMenu:o,onDragLeave:c,onFocus:h,onFocusVisible:d,onKeyDown:p,onKeyUp:y,onMouseDown:g,onMouseLeave:A,onMouseUp:b,onTouchEnd:M,onTouchMove:_,onTouchStart:T,tabIndex:w=0,TouchRippleProps:v,type:L}=z,S=ko(z,B8),k=zn.exports.useRef(null),P=zn.exports.useRef(null),{isFocusVisibleRef:O,onFocus:F,onBlur:I,ref:D}=nT(),[U,B]=zn.exports.useState(!1);t&&U&&B(!1),zn.exports.useImperativeHandle(N,()=>({focusVisible:()=>{B(!0),k.current.focus()}}),[]),zn.exports.useEffect(()=>{U&&r&&!i&&P.current.pulsate()},[i,r,U]);function j(Ae,Oe,He=a){return Hd(Ge=>(Oe&&Oe(Ge),!He&&P.current&&P.current[Ae](Ge),!0))}const Z=j("start",g),ee=j("stop",o),q=j("stop",c),W=j("stop",b),J=j("stop",Ae=>{U&&Ae.preventDefault(),A&&A(Ae)}),le=j("start",T),fe=j("stop",M),se=j("stop",_),H=j("stop",Ae=>{I(Ae),O.current===!1&&B(!1),f&&f(Ae)},!1),Y=Hd(Ae=>{k.current||(k.current=Ae.currentTarget),F(Ae),O.current===!0&&(B(!0),d&&d(Ae)),h&&h(Ae)}),ne=()=>{const Ae=k.current;return x&&x!=="button"&&!(Ae.tagName==="A"&&Ae.href)},te=zn.exports.useRef(!1),K=Hd(Ae=>{r&&!te.current&&U&&P.current&&Ae.key===" "&&(te.current=!0,P.current.stop(Ae,()=>{P.current.start(Ae)})),Ae.target===Ae.currentTarget&&ne()&&Ae.key===" "&&Ae.preventDefault(),p&&p(Ae),Ae.target===Ae.currentTarget&&ne()&&Ae.key==="Enter"&&!t&&(Ae.preventDefault(),l&&l(Ae))}),$=Hd(Ae=>{r&&Ae.key===" "&&P.current&&U&&!Ae.defaultPrevented&&(te.current=!1,P.current.stop(Ae,()=>{P.current.pulsate(Ae)})),y&&y(Ae),l&&Ae.target===Ae.currentTarget&&ne()&&Ae.key===" "&&!Ae.defaultPrevented&&l(Ae)});let ae=x;ae==="button"&&(S.href||S.to)&&(ae=n);const ie={};ae==="button"?(ie.type=L===void 0?"button":L,ie.disabled=t):(!S.href&&!S.to&&(ie.role="button"),t&&(ie["aria-disabled"]=t));const oe=hx(D,k),ue=hx(e,oe),[ye,ce]=zn.exports.useState(!1);zn.exports.useEffect(()=>{ce(!0)},[]);const me=ye&&!i&&!t,xe=ba({},z,{centerRipple:u,component:x,disabled:t,disableRipple:i,disableTouchRipple:a,focusRipple:r,tabIndex:w,focusVisible:U}),ke=U8(xe);return Wu(V8,ba({as:ae,className:Yo(ke.root,m),ownerState:xe,onBlur:H,onClick:l,onContextMenu:ee,onFocus:Y,onKeyDown:K,onKeyUp:$,onMouseDown:Z,onMouseLeave:J,onMouseUp:W,onDragLeave:q,onTouchEnd:fe,onTouchMove:se,onTouchStart:le,ref:ue,tabIndex:t?-1:w,type:L},ie,S,{children:[s,me?mi(z8,ba({ref:P,center:u},v)):null]}))});var ZT=H8;function G8(R){return ru("PrivateSwitchBase",R)}nu("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const W8=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Y8=R=>{const{classes:G,checked:e,disabled:z,edge:N}=R,u={root:["root",e&&"checked",z&&"disabled",N&&`edge${Wi(N)}`],input:["input"]};return ku(u,G8,G)},j8=To(ZT,{skipSx:!0})(({ownerState:R})=>ba({padding:9,borderRadius:"50%"},R.edge==="start"&&{marginLeft:R.size==="small"?-3:-12},R.edge==="end"&&{marginRight:R.size==="small"?-3:-12})),X8=To("input",{skipSx:!0})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Z8=zn.exports.forwardRef(function(G,e){const{autoFocus:z,checked:N,checkedIcon:u,className:s,defaultChecked:m,disabled:x,disableFocusRipple:t=!1,edge:i=!1,icon:a,id:r,inputProps:n,inputRef:f,name:l,onBlur:o,onChange:c,onFocus:h,readOnly:d,required:p,tabIndex:y,type:g,value:A}=G,b=ko(G,W8),[M,_]=tT({controlled:N,default:Boolean(m),name:"SwitchBase",state:"checked"}),T=UT(),w=F=>{h&&h(F),T&&T.onFocus&&T.onFocus(F)},v=F=>{o&&o(F),T&&T.onBlur&&T.onBlur(F)},L=F=>{if(F.nativeEvent.defaultPrevented)return;const I=F.target.checked;_(I),c&&c(F,I)};let S=x;T&&typeof S=="undefined"&&(S=T.disabled);const k=g==="checkbox"||g==="radio",P=ba({},G,{checked:M,disabled:S,disableFocusRipple:t,edge:i}),O=Y8(P);return Wu(j8,ba({component:"span",className:Yo(O.root,s),centerRipple:!0,focusRipple:!t,disabled:S,tabIndex:null,role:void 0,onFocus:w,onBlur:v,ownerState:P,ref:e},b,{children:[mi(X8,ba({autoFocus:z,checked:N,defaultChecked:m,className:O.input,disabled:S,id:k&&r,name:l,onChange:L,readOnly:d,ref:f,required:p,ownerState:P,tabIndex:y,type:g},g==="checkbox"&&A===void 0?{}:{value:A},n)),M?u:a]}))});var K8=Z8;function J8(R){return ru("MuiSwitch",R)}const Q8=nu("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var iu=Q8;const $8=["className","color","edge","size","sx"],q8=R=>{const{classes:G,edge:e,size:z,color:N,checked:u,disabled:s}=R,m={root:["root",e&&`edge${Wi(e)}`,`size${Wi(z)}`],switchBase:["switchBase",`color${Wi(N)}`,u&&"checked",s&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},x=ku(m,J8,G);return ba({},G,x)},eP=To("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,e.edge&&G[`edge${Wi(e.edge)}`],G[`size${Wi(e.size)}`]]}})(({ownerState:R})=>ba({display:"inline-flex",width:34+12*2,height:14+12*2,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},R.edge==="start"&&{marginLeft:-8},R.edge==="end"&&{marginRight:-8},R.size==="small"&&{width:40,height:24,padding:7,[`& .${iu.thumb}`]:{width:16,height:16},[`& .${iu.switchBase}`]:{padding:4,[`&.${iu.checked}`]:{transform:"translateX(16px)"}}})),tP=To(K8,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.switchBase,{[`& .${iu.input}`]:G.input},e.color!=="default"&&G[`color${Wi(e.color)}`]]}})(({theme:R})=>({position:"absolute",top:0,left:0,zIndex:1,color:R.palette.mode==="light"?R.palette.common.white:R.palette.grey[300],transition:R.transitions.create(["left","transform"],{duration:R.transitions.duration.shortest}),[`&.${iu.checked}`]:{transform:"translateX(20px)"},[`&.${iu.disabled}`]:{color:R.palette.mode==="light"?R.palette.grey[100]:R.palette.grey[600]},[`&.${iu.checked} + .${iu.track}`]:{opacity:.5},[`&.${iu.disabled} + .${iu.track}`]:{opacity:R.palette.mode==="light"?.12:.2},[`& .${iu.input}`]:{left:"-100%",width:"300%"}}),({theme:R,ownerState:G})=>ba({"&:hover":{backgroundColor:tp(R.palette.action.active,R.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},G.color!=="default"&&{[`&.${iu.checked}`]:{color:R.palette[G.color].main,"&:hover":{backgroundColor:tp(R.palette[G.color].main,R.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${iu.disabled}`]:{color:R.palette.mode==="light"?PT(R.palette[G.color].main,.62):LT(R.palette[G.color].main,.55)}},[`&.${iu.checked} + .${iu.track}`]:{backgroundColor:R.palette[G.color].main}})),rP=To("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(R,G)=>G.track})(({theme:R})=>({height:"100%",width:"100%",borderRadius:14/2,zIndex:-1,transition:R.transitions.create(["opacity","background-color"],{duration:R.transitions.duration.shortest}),backgroundColor:R.palette.mode==="light"?R.palette.common.black:R.palette.common.white,opacity:R.palette.mode==="light"?.38:.3})),nP=To("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(R,G)=>G.thumb})(({theme:R})=>({boxShadow:R.shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"})),aP=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiSwitch"}),{className:N,color:u="primary",edge:s=!1,size:m="medium",sx:x}=z,t=ko(z,$8),i=ba({},z,{color:u,edge:s,size:m}),a=q8(i),r=mi(nP,{className:a.thumb,ownerState:i});return Wu(eP,{className:Yo(a.root,N),sx:x,ownerState:i,children:[mi(tP,ba({type:"checkbox",icon:r,checkedIcon:r,ref:e,ownerState:i},t,{classes:ba({},a,{root:a.switchBase})})),mi(rP,{className:a.track,ownerState:i})]})});var wD=aP,Rx={},KT={exports:{}};(function(R){function G(e){return e&&e.__esModule?e:{default:e}}R.exports=G,R.exports.__esModule=!0,R.exports.default=R.exports})(KT);var JT={};function iP(R){return ru("MuiSvgIcon",R)}nu("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const oP=["children","className","color","component","fontSize","htmlColor","titleAccess","viewBox"],sP=R=>{const{color:G,fontSize:e,classes:z}=R,N={root:["root",G!=="inherit"&&`color${Wi(G)}`,`fontSize${Wi(e)}`]};return ku(N,iP,z)},lP=To("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,e.color!=="inherit"&&G[`color${Wi(e.color)}`],G[`fontSize${Wi(e.fontSize)}`]]}})(({theme:R,ownerState:G})=>{var e,z;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:R.transitions.create("fill",{duration:R.transitions.duration.shorter}),fontSize:{inherit:"inherit",small:R.typography.pxToRem(20),medium:R.typography.pxToRem(24),large:R.typography.pxToRem(35)}[G.fontSize],color:(e=(z=R.palette[G.color])==null?void 0:z.main)!=null?e:{action:R.palette.action.active,disabled:R.palette.action.disabled,inherit:void 0}[G.color]}}),QT=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiSvgIcon"}),{children:N,className:u,color:s="inherit",component:m="svg",fontSize:x="medium",htmlColor:t,titleAccess:i,viewBox:a="0 0 24 24"}=z,r=ko(z,oP),n=ba({},z,{color:s,component:m,fontSize:x,viewBox:a}),f=sP(n);return Wu(lP,ba({as:m,className:Yo(f.root,u),ownerState:n,focusable:"false",viewBox:a,color:t,"aria-hidden":i?void 0:!0,role:i?"img":void 0,ref:e},r,{children:[N,i?mi("title",{children:i}):null]}))});QT.muiName="SvgIcon";var Dx=QT;function Ix(R,G){const e=(z,N)=>mi(Dx,ba({"data-testid":`${G}Icon`,ref:N},z,{children:R}));return e.muiName=Dx.muiName,zn.exports.memo(zn.exports.forwardRef(e))}var uP=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",capitalize:Wi,createChainedFunction:W6,createSvgIcon:Ix,debounce:Y6,deprecatedPropType:j6,isMuiElement:X6,ownerDocument:$3,ownerWindow:Z6,requirePropFactory:K6,setRef:cx,unstable_useEnhancedEffect:q3,unstable_useId:Q6,unsupportedProp:$6,useControlled:tT,useEventCallback:Hd,useForkRef:hx,useIsFocusVisible:nT,unstable_ClassNameGenerator:Mx}),fP=r2(uP);(function(R){Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"default",{enumerable:!0,get:function(){return G.createSvgIcon}});var G=fP})(JT);var cP=r2(Lk),hP=KT.exports;Object.defineProperty(Rx,"__esModule",{value:!0});var vP=Rx.default=void 0,pP=hP(JT),dP=cP,gP=(0,pP.default)((0,dP.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");vP=Rx.default=gP;var Yh,zx=Yh||(Yh={});zx.Pop="POP";zx.Push="PUSH";zx.Replace="REPLACE";var $T=function(R){return R};function qT(R){R.preventDefault(),R.returnValue=""}function e5(){var R=[];return{get length(){return R.length},push:function(G){return R.push(G),function(){R=R.filter(function(e){return e!==G})}},call:function(G){R.forEach(function(e){return e&&e(G)})}}}function mP(){return Math.random().toString(36).substr(2,8)}function Fx(R){var G=R.pathname;G=G===void 0?"/":G;var e=R.search;return e=e===void 0?"":e,R=R.hash,R=R===void 0?"":R,e&&e!=="?"&&(G+=e.charAt(0)==="?"?e:"?"+e),R&&R!=="#"&&(G+=R.charAt(0)==="#"?R:"#"+R),G}function jh(R){var G={};if(R){var e=R.indexOf("#");0<=e&&(G.hash=R.substr(e),R=R.substr(0,e)),e=R.indexOf("?"),0<=e&&(G.search=R.substr(e),R=R.substr(0,e)),R&&(G.pathname=R)}return G}function yP(R){function G(){var o=x.location,c=t.state||{};return[c.idx,$T({pathname:o.pathname,search:o.search,hash:o.hash,state:c.usr||null,key:c.key||"default"})]}function e(o){return typeof o=="string"?o:Fx(o)}function z(o,c){return c===void 0&&(c=null),$T(ba({pathname:n.pathname,hash:"",search:""},typeof o=="string"?jh(o):o,{state:c,key:mP()}))}function N(o){a=o,o=G(),r=o[0],n=o[1],f.call({action:a,location:n})}function u(o,c){function h(){u(o,c)}var d=Yh.Push,p=z(o,c);if(!l.length||(l.call({action:d,location:p,retry:h}),!1)){var y=[{usr:p.state,key:p.key,idx:r+1},e(p)];p=y[0],y=y[1];try{t.pushState(p,"",y)}catch{x.location.assign(y)}N(d)}}function s(o,c){function h(){s(o,c)}var d=Yh.Replace,p=z(o,c);l.length&&(l.call({action:d,location:p,retry:h}),1)||(p=[{usr:p.state,key:p.key,idx:r},e(p)],t.replaceState(p[0],"",p[1]),N(d))}function m(o){t.go(o)}R===void 0&&(R={}),R=R.window;var x=R===void 0?document.defaultView:R,t=x.history,i=null;x.addEventListener("popstate",function(){if(i)l.call(i),i=null;else{var o=Yh.Pop,c=G(),h=c[0];if(c=c[1],l.length){if(h!=null){var d=r-h;d&&(i={action:o,location:c,retry:function(){m(-1*d)}},m(d))}}else N(o)}});var a=Yh.Pop;R=G();var r=R[0],n=R[1],f=e5(),l=e5();return r==null&&(r=0,t.replaceState(ba({},t.state,{idx:r}),"")),{get action(){return a},get location(){return n},createHref:e,push:u,replace:s,go:m,back:function(){m(-1)},forward:function(){m(1)},listen:function(o){return f.push(o)},block:function(o){var c=l.push(o);return l.length===1&&x.addEventListener("beforeunload",qT),function(){c(),l.length||x.removeEventListener("beforeunload",qT)}}}}/**
 * React Router v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pc(R,G){if(!R)throw new Error(G)}const Ox=zn.exports.createContext(null),Nx=zn.exports.createContext(null),Jd=zn.exports.createContext({outlet:null,matches:[]});function xP(R){return MP(R.context)}function bP(R){pc(!1)}function _P(R){let{basename:G="/",children:e=null,location:z,navigationType:N=Yh.Pop,navigator:u,static:s=!1}=R;Qd()&&pc(!1);let m=YP(G),x=zn.exports.useMemo(()=>({basename:m,navigator:u,static:s}),[m,u,s]);typeof z=="string"&&(z=jh(z));let{pathname:t="/",search:i="",hash:a="",state:r=null,key:n="default"}=z,f=zn.exports.useMemo(()=>{let l=i5(t,m);return l==null?null:{pathname:l,search:i,hash:a,state:r,key:n}},[m,t,i,a,r,n]);return f==null?null:zn.exports.createElement(Ox.Provider,{value:x},zn.exports.createElement(Nx.Provider,{children:e,value:{location:f,navigationType:N}}))}function TD(R){let{children:G,location:e}=R;return SP(Bx(G),e)}function wP(R){Qd()||pc(!1);let{basename:G,navigator:e}=zn.exports.useContext(Ox),{hash:z,pathname:N,search:u}=t5(R),s=N;if(G!=="/"){let m=WP(R),x=m!=null&&m.endsWith("/");s=N==="/"?G+(x?"/":""):dh([G,N])}return e.createHref({pathname:s,search:u,hash:z})}function Qd(){return zn.exports.useContext(Nx)!=null}function sm(){return Qd()||pc(!1),zn.exports.useContext(Nx).location}function TP(){Qd()||pc(!1);let{basename:R,navigator:G}=zn.exports.useContext(Ox),{matches:e}=zn.exports.useContext(Jd),{pathname:z}=sm(),N=JSON.stringify(e.map(m=>m.pathnameBase)),u=zn.exports.useRef(!1);return zn.exports.useEffect(()=>{u.current=!0}),zn.exports.useCallback(function(m,x){if(x===void 0&&(x={}),!u.current)return;if(typeof m=="number"){G.go(m);return}let t=a5(m,JSON.parse(N),z);R!=="/"&&(t.pathname=dh([R,t.pathname])),(x.replace?G.replace:G.push)(t,x.state)},[R,G,N,z])}const AP=zn.exports.createContext(null);function MP(R){let G=zn.exports.useContext(Jd).outlet;return G&&zn.exports.createElement(AP.Provider,{value:R},G)}function t5(R){let{matches:G}=zn.exports.useContext(Jd),{pathname:e}=sm(),z=JSON.stringify(G.map(N=>N.pathnameBase));return zn.exports.useMemo(()=>a5(R,JSON.parse(z),e),[R,z,e])}function SP(R,G){Qd()||pc(!1);let{matches:e}=zn.exports.useContext(Jd),z=e[e.length-1],N=z?z.params:{};z&&z.pathname;let u=z?z.pathnameBase:"/";z&&z.route;let s=sm(),m;if(G){var x;let r=typeof G=="string"?jh(G):G;u==="/"||((x=r.pathname)==null?void 0:x.startsWith(u))||pc(!1),m=r}else m=s;let t=m.pathname||"/",i=u==="/"?t:t.slice(u.length)||"/",a=kP(R,{pathname:i});return NP(a&&a.map(r=>Object.assign({},r,{params:Object.assign({},N,r.params),pathname:dh([u,r.pathname]),pathnameBase:r.pathnameBase==="/"?u:dh([u,r.pathnameBase])})),e)}function Bx(R){let G=[];return zn.exports.Children.forEach(R,e=>{if(!zn.exports.isValidElement(e))return;if(e.type===zn.exports.Fragment){G.push.apply(G,Bx(e.props.children));return}e.type!==bP&&pc(!1);let z={caseSensitive:e.props.caseSensitive,element:e.props.element,index:e.props.index,path:e.props.path};e.props.children&&(z.children=Bx(e.props.children)),G.push(z)}),G}function kP(R,G,e){e===void 0&&(e="/");let z=typeof G=="string"?jh(G):G,N=i5(z.pathname||"/",e);if(N==null)return null;let u=r5(R);EP(u);let s=null;for(let m=0;s==null&&m<u.length;++m)s=OP(u[m],N);return s}function r5(R,G,e,z){return G===void 0&&(G=[]),e===void 0&&(e=[]),z===void 0&&(z=""),R.forEach((N,u)=>{let s={relativePath:N.path||"",caseSensitive:N.caseSensitive===!0,childrenIndex:u,route:N};s.relativePath.startsWith("/")&&(s.relativePath.startsWith(z)||pc(!1),s.relativePath=s.relativePath.slice(z.length));let m=dh([z,s.relativePath]),x=e.concat(s);N.children&&N.children.length>0&&(N.index===!0&&pc(!1),r5(N.children,G,x,m)),!(N.path==null&&!N.index)&&G.push({path:m,score:zP(m,N.index),routesMeta:x})}),G}function EP(R){R.sort((G,e)=>G.score!==e.score?e.score-G.score:FP(G.routesMeta.map(z=>z.childrenIndex),e.routesMeta.map(z=>z.childrenIndex)))}const CP=/^:\w+$/,LP=3,PP=2,RP=1,DP=10,IP=-2,n5=R=>R==="*";function zP(R,G){let e=R.split("/"),z=e.length;return e.some(n5)&&(z+=IP),G&&(z+=PP),e.filter(N=>!n5(N)).reduce((N,u)=>N+(CP.test(u)?LP:u===""?RP:DP),z)}function FP(R,G){return R.length===G.length&&R.slice(0,-1).every((z,N)=>z===G[N])?R[R.length-1]-G[G.length-1]:0}function OP(R,G){let{routesMeta:e}=R,z={},N="/",u=[];for(let s=0;s<e.length;++s){let m=e[s],x=s===e.length-1,t=N==="/"?G:G.slice(N.length)||"/",i=BP({path:m.relativePath,caseSensitive:m.caseSensitive,end:x},t);if(!i)return null;Object.assign(z,i.params);let a=m.route;u.push({params:z,pathname:dh([N,i.pathname]),pathnameBase:dh([N,i.pathnameBase]),route:a}),i.pathnameBase!=="/"&&(N=dh([N,i.pathnameBase]))}return u}function NP(R,G){return G===void 0&&(G=[]),R==null?null:R.reduceRight((e,z,N)=>zn.exports.createElement(Jd.Provider,{children:z.route.element!==void 0?z.route.element:zn.exports.createElement(xP,null),value:{outlet:e,matches:G.concat(R.slice(0,N+1))}}),null)}function BP(R,G){typeof R=="string"&&(R={path:R,caseSensitive:!1,end:!0});let[e,z]=UP(R.path,R.caseSensitive,R.end),N=G.match(e);if(!N)return null;let u=N[0],s=u.replace(/(.)\/+$/,"$1"),m=N.slice(1);return{params:z.reduce((t,i,a)=>{if(i==="*"){let r=m[a]||"";s=u.slice(0,u.length-r.length).replace(/(.)\/+$/,"$1")}return t[i]=VP(m[a]||""),t},{}),pathname:u,pathnameBase:s,pattern:R}}function UP(R,G,e){G===void 0&&(G=!1),e===void 0&&(e=!0);let z=[],N="^"+R.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(s,m)=>(z.push(m),"([^\\/]+)"));return R.endsWith("*")?(z.push("*"),N+=R==="*"||R==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):N+=e?"\\/*$":"(?:\\b|\\/|$)",[new RegExp(N,G?void 0:"i"),z]}function VP(R,G){try{return decodeURIComponent(R)}catch{return R}}function HP(R,G){G===void 0&&(G="/");let{pathname:e,search:z="",hash:N=""}=typeof R=="string"?jh(R):R;return{pathname:e?e.startsWith("/")?e:GP(e,G):G,search:jP(z),hash:XP(N)}}function GP(R,G){let e=G.replace(/\/+$/,"").split("/");return R.split("/").forEach(N=>{N===".."?e.length>1&&e.pop():N!=="."&&e.push(N)}),e.length>1?e.join("/"):"/"}function a5(R,G,e){let z=typeof R=="string"?jh(R):R,N=R===""||z.pathname===""?"/":z.pathname,u;if(N==null)u=e;else{let m=G.length-1;if(N.startsWith("..")){let x=N.split("/");for(;x[0]==="..";)x.shift(),m-=1;z.pathname=x.join("/")}u=m>=0?G[m]:"/"}let s=HP(z,u);return N&&N!=="/"&&N.endsWith("/")&&!s.pathname.endsWith("/")&&(s.pathname+="/"),s}function WP(R){return R===""||R.pathname===""?"/":typeof R=="string"?jh(R).pathname:R.pathname}function i5(R,G){if(G==="/")return R;if(!R.toLowerCase().startsWith(G.toLowerCase()))return null;let e=R.charAt(G.length);return e&&e!=="/"?null:R.slice(G.length)||"/"}const dh=R=>R.join("/").replace(/\/\/+/g,"/"),YP=R=>R.replace(/\/+$/,"").replace(/^\/*/,"/"),jP=R=>!R||R==="?"?"":R.startsWith("?")?R:"?"+R,XP=R=>!R||R==="#"?"":R.startsWith("#")?R:"#"+R;/**
 * React Router DOM v6.2.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ux(){return Ux=Object.assign||function(R){for(var G=1;G<arguments.length;G++){var e=arguments[G];for(var z in e)Object.prototype.hasOwnProperty.call(e,z)&&(R[z]=e[z])}return R},Ux.apply(this,arguments)}function ZP(R,G){if(R==null)return{};var e={},z=Object.keys(R),N,u;for(u=0;u<z.length;u++)N=z[u],!(G.indexOf(N)>=0)&&(e[N]=R[N]);return e}const KP=["onClick","reloadDocument","replace","state","target","to"];function AD(R){let{basename:G,children:e,window:z}=R,N=zn.exports.useRef();N.current==null&&(N.current=yP({window:z}));let u=N.current,[s,m]=zn.exports.useState({action:u.action,location:u.location});return zn.exports.useLayoutEffect(()=>u.listen(m),[u]),zn.exports.createElement(_P,{basename:G,children:e,location:s.location,navigationType:s.action,navigator:u})}function JP(R){return!!(R.metaKey||R.altKey||R.ctrlKey||R.shiftKey)}const MD=zn.exports.forwardRef(function(G,e){let{onClick:z,reloadDocument:N,replace:u=!1,state:s,target:m,to:x}=G,t=ZP(G,KP),i=wP(x),a=QP(x,{replace:u,state:s,target:m});function r(n){z&&z(n),!n.defaultPrevented&&!N&&a(n)}return zn.exports.createElement("a",Ux({},t,{href:i,onClick:r,ref:e,target:m}))});function QP(R,G){let{target:e,replace:z,state:N}=G===void 0?{}:G,u=TP(),s=sm(),m=t5(R);return zn.exports.useCallback(x=>{if(x.button===0&&(!e||e==="_self")&&!JP(x)){x.preventDefault();let t=!!z||Fx(s)===Fx(m);u(R,{replace:t,state:N})}},[s,u,m,z,N,e,R])}const $P=NT(),qP=JC({defaultTheme:$P,defaultClassName:"MuiBox-root",generateClassName:Mx.generate});var SD=qP;function eR(R){return ru("MuiStepper",R)}nu("MuiStepper",["root","horizontal","vertical","alternativeLabel"]);const tR=zn.exports.createContext({});var lm=tR;const rR=zn.exports.createContext({});var Vx=rR;function nR(R){return ru("MuiStepConnector",R)}nu("MuiStepConnector",["root","horizontal","vertical","alternativeLabel","active","completed","disabled","line","lineHorizontal","lineVertical"]);const aR=["className"],iR=R=>{const{classes:G,orientation:e,alternativeLabel:z,active:N,completed:u,disabled:s}=R,m={root:["root",e,z&&"alternativeLabel",N&&"active",u&&"completed",s&&"disabled"],line:["line",`line${Wi(e)}`]};return ku(m,nR,G)},oR=To("div",{name:"MuiStepConnector",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,G[e.orientation],e.alternativeLabel&&G.alternativeLabel,e.completed&&G.completed]}})(({ownerState:R})=>ba({flex:"1 1 auto"},R.orientation==="vertical"&&{marginLeft:12},R.alternativeLabel&&{position:"absolute",top:8+4,left:"calc(-50% + 20px)",right:"calc(50% + 20px)"})),sR=To("span",{name:"MuiStepConnector",slot:"Line",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.line,G[`line${Wi(e.orientation)}`]]}})(({ownerState:R,theme:G})=>ba({display:"block",borderColor:G.palette.mode==="light"?G.palette.grey[400]:G.palette.grey[600]},R.orientation==="horizontal"&&{borderTopStyle:"solid",borderTopWidth:1},R.orientation==="vertical"&&{borderLeftStyle:"solid",borderLeftWidth:1,minHeight:24})),lR=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiStepConnector"}),{className:N}=z,u=ko(z,aR),{alternativeLabel:s,orientation:m="horizontal"}=zn.exports.useContext(lm),{active:x,disabled:t,completed:i}=zn.exports.useContext(Vx),a=ba({},z,{alternativeLabel:s,orientation:m,active:x,completed:i,disabled:t}),r=iR(a);return mi(oR,ba({className:Yo(r.root,N),ref:e,ownerState:a},u,{children:mi(sR,{className:r.line,ownerState:a})}))});var uR=lR;const fR=["activeStep","alternativeLabel","children","className","connector","nonLinear","orientation"],cR=R=>{const{orientation:G,alternativeLabel:e,classes:z}=R;return ku({root:["root",G,e&&"alternativeLabel"]},eR,z)},hR=To("div",{name:"MuiStepper",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,G[e.orientation],e.alternativeLabel&&G.alternativeLabel]}})(({ownerState:R})=>ba({display:"flex"},R.orientation==="horizontal"&&{flexDirection:"row",alignItems:"center"},R.orientation==="vertical"&&{flexDirection:"column"},R.alternativeLabel&&{alignItems:"flex-start"})),vR=mi(uR,{}),pR=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiStepper"}),{activeStep:N=0,alternativeLabel:u=!1,children:s,className:m,connector:x=vR,nonLinear:t=!1,orientation:i="horizontal"}=z,a=ko(z,fR),r=ba({},z,{alternativeLabel:u,orientation:i}),n=cR(r),f=zn.exports.Children.toArray(s).filter(Boolean),l=f.map((c,h)=>zn.exports.cloneElement(c,ba({index:h,last:h+1===f.length},c.props))),o=zn.exports.useMemo(()=>({activeStep:N,alternativeLabel:u,connector:x,nonLinear:t,orientation:i}),[N,u,x,t,i]);return mi(lm.Provider,{value:o,children:mi(hR,ba({ownerState:r,className:Yo(n.root,m),ref:e},a,{children:l}))})});var kD=pR;function dR(R){return ru("MuiStep",R)}nu("MuiStep",["root","horizontal","vertical","alternativeLabel","completed"]);const gR=["active","children","className","completed","disabled","expanded","index","last"],mR=R=>{const{classes:G,orientation:e,alternativeLabel:z,completed:N}=R;return ku({root:["root",e,z&&"alternativeLabel",N&&"completed"]},dR,G)},yR=To("div",{name:"MuiStep",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,G[e.orientation],e.alternativeLabel&&G.alternativeLabel,e.completed&&G.completed]}})(({ownerState:R})=>ba({},R.orientation==="horizontal"&&{paddingLeft:8,paddingRight:8},R.alternativeLabel&&{flex:1,position:"relative"})),xR=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiStep"}),{active:N,children:u,className:s,completed:m,disabled:x,expanded:t=!1,index:i,last:a}=z,r=ko(z,gR),{activeStep:n,connector:f,alternativeLabel:l,orientation:o,nonLinear:c}=zn.exports.useContext(lm);let[h=!1,d=!1,p=!1]=[N,m,x];n===i?h=N!==void 0?N:!0:!c&&n>i?d=m!==void 0?m:!0:!c&&n<i&&(p=x!==void 0?x:!0);const y=zn.exports.useMemo(()=>({index:i,last:a,expanded:t,icon:i+1,active:h,completed:d,disabled:p}),[i,a,t,h,d,p]),g=ba({},z,{active:h,orientation:o,alternativeLabel:l,completed:d,disabled:p,expanded:t}),A=mR(g),b=Wu(yR,ba({className:Yo(A.root,s),ref:e,ownerState:g},r,{children:[f&&l&&i!==0?f:null,u]}));return mi(Vx.Provider,{value:y,children:f&&!l&&i!==0?Wu(zn.exports.Fragment,{children:[f,b]}):b})});var ED=xR,bR=Ix(mi("path",{d:"M12 0a12 12 0 1 0 0 24 12 12 0 0 0 0-24zm-2 17l-5-5 1.4-1.4 3.6 3.6 7.6-7.6L19 8l-9 9z"}),"CheckCircle"),_R=Ix(mi("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"}),"Warning");function wR(R){return ru("MuiStepIcon",R)}const TR=nu("MuiStepIcon",["root","active","completed","error","text"]);var Hx=TR,o5;const AR=["active","className","completed","error","icon"],MR=R=>{const{classes:G,active:e,completed:z,error:N}=R;return ku({root:["root",e&&"active",z&&"completed",N&&"error"],text:["text"]},wR,G)},Gx=To(Dx,{name:"MuiStepIcon",slot:"Root",overridesResolver:(R,G)=>G.root})(({theme:R})=>({display:"block",transition:R.transitions.create("color",{duration:R.transitions.duration.shortest}),color:R.palette.text.disabled,[`&.${Hx.completed}`]:{color:R.palette.primary.main},[`&.${Hx.active}`]:{color:R.palette.primary.main},[`&.${Hx.error}`]:{color:R.palette.error.main}})),SR=To("text",{name:"MuiStepIcon",slot:"Text",overridesResolver:(R,G)=>G.text})(({theme:R})=>({fill:R.palette.primary.contrastText,fontSize:R.typography.caption.fontSize,fontFamily:R.typography.fontFamily})),kR=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiStepIcon"}),{active:N=!1,className:u,completed:s=!1,error:m=!1,icon:x}=z,t=ko(z,AR),i=ba({},z,{active:N,completed:s,error:m}),a=MR(i);if(typeof x=="number"||typeof x=="string"){const r=Yo(u,a.root);return m?mi(Gx,ba({as:_R,className:r,ref:e,ownerState:i},t)):s?mi(Gx,ba({as:bR,className:r,ref:e,ownerState:i},t)):Wu(Gx,ba({className:r,ref:e,ownerState:i},t,{children:[o5||(o5=mi("circle",{cx:"12",cy:"12",r:"12"})),mi(SR,{className:a.text,x:"12",y:"16",textAnchor:"middle",ownerState:i,children:x})]}))}return x});var ER=kR;function CR(R){return ru("MuiStepLabel",R)}const LR=nu("MuiStepLabel",["root","horizontal","vertical","label","active","completed","error","disabled","iconContainer","alternativeLabel","labelContainer"]);var Xh=LR;const PR=["children","className","componentsProps","error","icon","optional","StepIconComponent","StepIconProps"],RR=R=>{const{classes:G,orientation:e,active:z,completed:N,error:u,disabled:s,alternativeLabel:m}=R;return ku({root:["root",e,u&&"error",s&&"disabled",m&&"alternativeLabel"],label:["label",z&&"active",N&&"completed",u&&"error",s&&"disabled",m&&"alternativeLabel"],iconContainer:["iconContainer",m&&"alternativeLabel"],labelContainer:["labelContainer"]},CR,G)},DR=To("span",{name:"MuiStepLabel",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,G[e.orientation]]}})(({ownerState:R})=>ba({display:"flex",alignItems:"center",[`&.${Xh.alternativeLabel}`]:{flexDirection:"column"},[`&.${Xh.disabled}`]:{cursor:"default"}},R.orientation==="vertical"&&{textAlign:"left",padding:"8px 0"})),IR=To("span",{name:"MuiStepLabel",slot:"Label",overridesResolver:(R,G)=>G.label})(({theme:R})=>ba({},R.typography.body2,{display:"block",transition:R.transitions.create("color",{duration:R.transitions.duration.shortest}),[`&.${Xh.active}`]:{color:R.palette.text.primary,fontWeight:500},[`&.${Xh.completed}`]:{color:R.palette.text.primary,fontWeight:500},[`&.${Xh.alternativeLabel}`]:{textAlign:"center",marginTop:16},[`&.${Xh.error}`]:{color:R.palette.error.main}})),zR=To("span",{name:"MuiStepLabel",slot:"IconContainer",overridesResolver:(R,G)=>G.iconContainer})(()=>({flexShrink:0,display:"flex",paddingRight:8,[`&.${Xh.alternativeLabel}`]:{paddingRight:0}})),FR=To("span",{name:"MuiStepLabel",slot:"LabelContainer",overridesResolver:(R,G)=>G.labelContainer})(({theme:R})=>({width:"100%",color:R.palette.text.secondary})),s5=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiStepLabel"}),{children:N,className:u,componentsProps:s={},error:m=!1,icon:x,optional:t,StepIconComponent:i,StepIconProps:a}=z,r=ko(z,PR),{alternativeLabel:n,orientation:f}=zn.exports.useContext(lm),{active:l,disabled:o,completed:c,icon:h}=zn.exports.useContext(Vx),d=x||h;let p=i;d&&!p&&(p=ER);const y=ba({},z,{active:l,alternativeLabel:n,completed:c,disabled:o,error:m,orientation:f}),g=RR(y);return Wu(DR,ba({className:Yo(g.root,u),ref:e,ownerState:y},r,{children:[d||p?mi(zR,{className:g.iconContainer,ownerState:y,children:mi(p,ba({completed:c,active:l,error:m,icon:d},a))}):null,Wu(FR,{className:g.labelContainer,ownerState:y,children:[N?mi(IR,ba({className:g.label,ownerState:y},s.label,{children:N})):null,t]})]}))});s5.muiName="StepLabel";var CD=s5;function OR(R){return ru("MuiButton",R)}const NR=nu("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var um=NR;const BR=zn.exports.createContext({});var UR=BR;const VR=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],HR=R=>{const{color:G,disableElevation:e,fullWidth:z,size:N,variant:u,classes:s}=R,m={root:["root",u,`${u}${Wi(G)}`,`size${Wi(N)}`,`${u}Size${Wi(N)}`,G==="inherit"&&"colorInherit",e&&"disableElevation",z&&"fullWidth"],label:["label"],startIcon:["startIcon",`iconSize${Wi(N)}`],endIcon:["endIcon",`iconSize${Wi(N)}`]},x=ku(m,OR,s);return ba({},s,x)},l5=R=>ba({},R.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},R.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},R.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),GR=To(ZT,{shouldForwardProp:R=>BT(R)||R==="classes",name:"MuiButton",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,G[e.variant],G[`${e.variant}${Wi(e.color)}`],G[`size${Wi(e.size)}`],G[`${e.variant}Size${Wi(e.size)}`],e.color==="inherit"&&G.colorInherit,e.disableElevation&&G.disableElevation,e.fullWidth&&G.fullWidth]}})(({theme:R,ownerState:G})=>ba({},R.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:R.shape.borderRadius,transition:R.transitions.create(["background-color","box-shadow","border-color","color"],{duration:R.transitions.duration.short}),"&:hover":ba({textDecoration:"none",backgroundColor:tp(R.palette.text.primary,R.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},G.variant==="text"&&G.color!=="inherit"&&{backgroundColor:tp(R.palette[G.color].main,R.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},G.variant==="outlined"&&G.color!=="inherit"&&{border:`1px solid ${R.palette[G.color].main}`,backgroundColor:tp(R.palette[G.color].main,R.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},G.variant==="contained"&&{backgroundColor:R.palette.grey.A100,boxShadow:R.shadows[4],"@media (hover: none)":{boxShadow:R.shadows[2],backgroundColor:R.palette.grey[300]}},G.variant==="contained"&&G.color!=="inherit"&&{backgroundColor:R.palette[G.color].dark,"@media (hover: none)":{backgroundColor:R.palette[G.color].main}}),"&:active":ba({},G.variant==="contained"&&{boxShadow:R.shadows[8]}),[`&.${um.focusVisible}`]:ba({},G.variant==="contained"&&{boxShadow:R.shadows[6]}),[`&.${um.disabled}`]:ba({color:R.palette.action.disabled},G.variant==="outlined"&&{border:`1px solid ${R.palette.action.disabledBackground}`},G.variant==="outlined"&&G.color==="secondary"&&{border:`1px solid ${R.palette.action.disabled}`},G.variant==="contained"&&{color:R.palette.action.disabled,boxShadow:R.shadows[0],backgroundColor:R.palette.action.disabledBackground})},G.variant==="text"&&{padding:"6px 8px"},G.variant==="text"&&G.color!=="inherit"&&{color:R.palette[G.color].main},G.variant==="outlined"&&{padding:"5px 15px",border:`1px solid ${R.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`},G.variant==="outlined"&&G.color!=="inherit"&&{color:R.palette[G.color].main,border:`1px solid ${tp(R.palette[G.color].main,.5)}`},G.variant==="contained"&&{color:R.palette.getContrastText(R.palette.grey[300]),backgroundColor:R.palette.grey[300],boxShadow:R.shadows[2]},G.variant==="contained"&&G.color!=="inherit"&&{color:R.palette[G.color].contrastText,backgroundColor:R.palette[G.color].main},G.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},G.size==="small"&&G.variant==="text"&&{padding:"4px 5px",fontSize:R.typography.pxToRem(13)},G.size==="large"&&G.variant==="text"&&{padding:"8px 11px",fontSize:R.typography.pxToRem(15)},G.size==="small"&&G.variant==="outlined"&&{padding:"3px 9px",fontSize:R.typography.pxToRem(13)},G.size==="large"&&G.variant==="outlined"&&{padding:"7px 21px",fontSize:R.typography.pxToRem(15)},G.size==="small"&&G.variant==="contained"&&{padding:"4px 10px",fontSize:R.typography.pxToRem(13)},G.size==="large"&&G.variant==="contained"&&{padding:"8px 22px",fontSize:R.typography.pxToRem(15)},G.fullWidth&&{width:"100%"}),({ownerState:R})=>R.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${um.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${um.disabled}`]:{boxShadow:"none"}}),WR=To("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.startIcon,G[`iconSize${Wi(e.size)}`]]}})(({ownerState:R})=>ba({display:"inherit",marginRight:8,marginLeft:-4},R.size==="small"&&{marginLeft:-2},l5(R))),YR=To("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.endIcon,G[`iconSize${Wi(e.size)}`]]}})(({ownerState:R})=>ba({display:"inherit",marginRight:-4,marginLeft:8},R.size==="small"&&{marginRight:-2},l5(R))),jR=zn.exports.forwardRef(function(G,e){const z=zn.exports.useContext(UR),N=aT(z,G),u=au({props:N,name:"MuiButton"}),{children:s,color:m="primary",component:x="button",className:t,disabled:i=!1,disableElevation:a=!1,disableFocusRipple:r=!1,endIcon:n,focusVisibleClassName:f,fullWidth:l=!1,size:o="medium",startIcon:c,type:h,variant:d="text"}=u,p=ko(u,VR),y=ba({},u,{color:m,component:x,disabled:i,disableElevation:a,disableFocusRipple:r,fullWidth:l,size:o,type:h,variant:d}),g=HR(y),A=c&&mi(WR,{className:g.startIcon,ownerState:y,children:c}),b=n&&mi(YR,{className:g.endIcon,ownerState:y,children:n});return Wu(GR,ba({ownerState:y,className:Yo(t,z.className),component:x,disabled:i,focusRipple:!r,focusVisibleClassName:Yo(g.focusVisible,f),ref:e,type:h},p,{classes:g,children:[A,s,b]}))});var LD=jR,u5={},f5={};(function(R){function G(y){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?G=function(A){return typeof A}:G=function(A){return A&&typeof Symbol=="function"&&A.constructor===Symbol&&A!==Symbol.prototype?"symbol":typeof A},G(y)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=p;var e=s(zn.exports),z=N(f3.exports);function N(y){return y&&y.__esModule?y:{default:y}}function u(){if(typeof WeakMap!="function")return null;var y=new WeakMap;return u=function(){return y},y}function s(y){if(y&&y.__esModule)return y;if(y===null||G(y)!=="object"&&typeof y!="function")return{default:y};var g=u();if(g&&g.has(y))return g.get(y);var A={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var M in y)if(Object.prototype.hasOwnProperty.call(y,M)){var _=b?Object.getOwnPropertyDescriptor(y,M):null;_&&(_.get||_.set)?Object.defineProperty(A,M,_):A[M]=y[M]}return A.default=y,g&&g.set(y,A),A}function m(y,g){if(!(y instanceof g))throw new TypeError("Cannot call a class as a function")}function x(y,g){for(var A=0;A<g.length;A++){var b=g[A];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}function t(y,g,A){return g&&x(y.prototype,g),A&&x(y,A),y}function i(y,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function");y.prototype=Object.create(g&&g.prototype,{constructor:{value:y,writable:!0,configurable:!0}}),g&&a(y,g)}function a(y,g){return a=Object.setPrototypeOf||function(b,M){return b.__proto__=M,b},a(y,g)}function r(y){var g=l();return function(){var b=o(y),M;if(g){var _=o(this).constructor;M=Reflect.construct(b,arguments,_)}else M=b.apply(this,arguments);return n(this,M)}}function n(y,g){return g&&(G(g)==="object"||typeof g=="function")?g:f(y)}function f(y){if(y===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y}function l(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function o(y){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(A){return A.__proto__||Object.getPrototypeOf(A)},o(y)}var c=["AfterExport","AfterPlot","Animated","AnimatingFrame","AnimationInterrupted","AutoSize","BeforeExport","BeforeHover","ButtonClicked","Click","ClickAnnotation","Deselect","DoubleClick","Framework","Hover","LegendClick","LegendDoubleClick","Relayout","Relayouting","Restyle","Redraw","Selected","Selecting","SliderChange","SliderEnd","SliderStart","SunburstClick","Transitioning","TransitionInterrupted","Unhover"],h=["plotly_restyle","plotly_redraw","plotly_relayout","plotly_relayouting","plotly_doubleclick","plotly_animated","plotly_sunburstclick"],d=typeof window!="undefined";function p(y){var g=function(A){i(M,A);var b=r(M);function M(_){var T;return m(this,M),T=b.call(this,_),T.p=Promise.resolve(),T.resizeHandler=null,T.handlers={},T.syncWindowResize=T.syncWindowResize.bind(f(T)),T.syncEventHandlers=T.syncEventHandlers.bind(f(T)),T.attachUpdateEvents=T.attachUpdateEvents.bind(f(T)),T.getRef=T.getRef.bind(f(T)),T.handleUpdate=T.handleUpdate.bind(f(T)),T.figureCallback=T.figureCallback.bind(f(T)),T.updatePlotly=T.updatePlotly.bind(f(T)),T}return t(M,[{key:"updatePlotly",value:function(T,w,v){var L=this;this.p=this.p.then(function(){if(!L.unmounting){if(!L.el)throw new Error("Missing element reference");return y.react(L.el,{data:L.props.data,layout:L.props.layout,config:L.props.config,frames:L.props.frames})}}).then(function(){L.unmounting||(L.syncWindowResize(T),L.syncEventHandlers(),L.figureCallback(w),v&&L.attachUpdateEvents())}).catch(function(S){L.props.onError&&L.props.onError(S)})}},{key:"componentDidMount",value:function(){this.unmounting=!1,this.updatePlotly(!0,this.props.onInitialized,!0)}},{key:"componentDidUpdate",value:function(T){this.unmounting=!1;var w=T.frames&&T.frames.length?T.frames.length:0,v=this.props.frames&&this.props.frames.length?this.props.frames.length:0,L=!(T.layout===this.props.layout&&T.data===this.props.data&&T.config===this.props.config&&v===w),S=T.revision!==void 0,k=T.revision!==this.props.revision;!L&&(!S||S&&!k)||this.updatePlotly(!1,this.props.onUpdate,!1)}},{key:"componentWillUnmount",value:function(){this.unmounting=!0,this.figureCallback(this.props.onPurge),this.resizeHandler&&d&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null),this.removeUpdateEvents(),y.purge(this.el)}},{key:"attachUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||h.forEach(function(w){T.el.on(w,T.handleUpdate)})}},{key:"removeUpdateEvents",value:function(){var T=this;!this.el||!this.el.removeListener||h.forEach(function(w){T.el.removeListener(w,T.handleUpdate)})}},{key:"handleUpdate",value:function(){this.figureCallback(this.props.onUpdate)}},{key:"figureCallback",value:function(T){if(typeof T=="function"){var w=this.el,v=w.data,L=w.layout,S=this.el._transitionData?this.el._transitionData._frames:null,k={data:v,layout:L,frames:S};T(k,this.el)}}},{key:"syncWindowResize",value:function(T){var w=this;!d||(this.props.useResizeHandler&&!this.resizeHandler?(this.resizeHandler=function(){return y.Plots.resize(w.el)},window.addEventListener("resize",this.resizeHandler),T&&this.resizeHandler()):!this.props.useResizeHandler&&this.resizeHandler&&(window.removeEventListener("resize",this.resizeHandler),this.resizeHandler=null))}},{key:"getRef",value:function(T){this.el=T,this.props.debug&&d&&(window.gd=this.el)}},{key:"syncEventHandlers",value:function(){var T=this;c.forEach(function(w){var v=T.props["on"+w],L=T.handlers[w],S=Boolean(L);v&&!S?T.addEventHandler(w,v):!v&&S?T.removeEventHandler(w):v&&S&&v!==L&&(T.removeEventHandler(w),T.addEventHandler(w,v))})}},{key:"addEventHandler",value:function(T,w){this.handlers[T]=w,this.el.on(this.getPlotlyEventName(T),this.handlers[T])}},{key:"removeEventHandler",value:function(T){this.el.removeListener(this.getPlotlyEventName(T),this.handlers[T]),delete this.handlers[T]}},{key:"getPlotlyEventName",value:function(T){return"plotly_"+T.toLowerCase()}},{key:"render",value:function(){return e.default.createElement("div",{id:this.props.divId,style:this.props.style,ref:this.getRef,className:this.props.className})}}]),M}(e.Component);return g.propTypes={data:z.default.arrayOf(z.default.object),config:z.default.object,layout:z.default.object,frames:z.default.arrayOf(z.default.object),revision:z.default.number,onInitialized:z.default.func,onPurge:z.default.func,onError:z.default.func,onUpdate:z.default.func,debug:z.default.bool,style:z.default.object,className:z.default.string,useResizeHandler:z.default.bool,divId:z.default.string},c.forEach(function(A){g.propTypes["on"+A]=z.default.func}),g.defaultProps={debug:!1,useResizeHandler:!1,data:[],style:{position:"relative",display:"inline-block"}},g}})(f5);var c5={exports:{}};(function(R,G){(function(e){R.exports=e()})(function(){return function(){function e(z,N,u){function s(t,i){if(!N[t]){if(!z[t]){var a=typeof S0=="function"&&S0;if(!i&&a)return a(t,!0);if(m)return m(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var n=N[t]={exports:{}};z[t][0].call(n.exports,function(f){var l=z[t][1][f];return s(l||f)},n,n.exports,e,z,N,u)}return N[t].exports}for(var m=typeof S0=="function"&&S0,x=0;x<u.length;x++)s(u[x]);return s}return e}()({1:[function(e,z,N){var u=e("../src/lib"),s={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var m in s){var x=m.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");u.addStyleRule(x,s[m])}},{"../src/lib":503}],2:[function(e,z,N){z.exports=e("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(e,z,N){z.exports=e("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(e,z,N){z.exports=e("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(e,z,N){z.exports=e("../src/traces/box")},{"../src/traces/box":679}],6:[function(e,z,N){z.exports=e("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(e,z,N){z.exports=e("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(e,z,N){z.exports=e("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(e,z,N){z.exports=e("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(e,z,N){z.exports=e("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(e,z,N){z.exports=e("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(e,z,N){z.exports=e("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(e,z,N){z.exports=e("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(e,z,N){z.exports=e("../src/core")},{"../src/core":481}],15:[function(e,z,N){z.exports=e("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(e,z,N){z.exports=e("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(e,z,N){z.exports=e("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(e,z,N){z.exports=e("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(e,z,N){z.exports=e("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(e,z,N){z.exports=e("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(e,z,N){z.exports=e("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(e,z,N){z.exports=e("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(e,z,N){z.exports=e("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(e,z,N){z.exports=e("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(e,z,N){z.exports=e("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(e,z,N){z.exports=e("../src/traces/image")},{"../src/traces/image":852}],27:[function(e,z,N){var u=e("./core");u.register([e("./bar"),e("./box"),e("./heatmap"),e("./histogram"),e("./histogram2d"),e("./histogram2dcontour"),e("./contour"),e("./scatterternary"),e("./violin"),e("./funnel"),e("./waterfall"),e("./image"),e("./pie"),e("./sunburst"),e("./treemap"),e("./icicle"),e("./funnelarea"),e("./scatter3d"),e("./surface"),e("./isosurface"),e("./volume"),e("./mesh3d"),e("./cone"),e("./streamtube"),e("./scattergeo"),e("./choropleth"),e("./scattergl"),e("./splom"),e("./pointcloud"),e("./heatmapgl"),e("./parcoords"),e("./parcats"),e("./scattermapbox"),e("./choroplethmapbox"),e("./densitymapbox"),e("./sankey"),e("./indicator"),e("./table"),e("./carpet"),e("./scattercarpet"),e("./contourcarpet"),e("./ohlc"),e("./candlestick"),e("./scatterpolar"),e("./scatterpolargl"),e("./barpolar"),e("./scattersmith"),e("./aggregate"),e("./filter"),e("./groupby"),e("./sort"),e("./calendars")]),z.exports=u},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(e,z,N){z.exports=e("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(e,z,N){z.exports=e("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(e,z,N){z.exports=e("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(e,z,N){z.exports=e("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(e,z,N){z.exports=e("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(e,z,N){z.exports=e("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(e,z,N){z.exports=e("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(e,z,N){z.exports=e("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(e,z,N){z.exports=e("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(e,z,N){z.exports=e("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(e,z,N){z.exports=e("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(e,z,N){z.exports=e("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(e,z,N){z.exports=e("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(e,z,N){z.exports=e("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(e,z,N){z.exports=e("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(e,z,N){z.exports=e("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(e,z,N){z.exports=e("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(e,z,N){z.exports=e("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(e,z,N){z.exports=e("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(e,z,N){z.exports=e("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(e,z,N){z.exports=e("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(e,z,N){z.exports=e("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(e,z,N){z.exports=e("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(e,z,N){z.exports=e("../src/traces/table")},{"../src/traces/table":1069}],52:[function(e,z,N){z.exports=e("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(e,z,N){z.exports=e("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(e,z,N){z.exports=e("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(e,z,N){z.exports=e("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-array"),e("d3-collection"),e("d3-shape"),e("elementary-circuits-directed-graph")):s(u.d3=u.d3||{},u.d3,u.d3,u.d3,null)})(this,function(u,s,m,x,t){t=t&&t.hasOwnProperty("default")?t.default:t;function i(ce){return ce.target.depth}function a(ce){return ce.depth}function r(ce,me){return me-1-ce.height}function n(ce,me){return ce.sourceLinks.length?ce.depth:me-1}function f(ce){return ce.targetLinks.length?ce.depth:ce.sourceLinks.length?s.min(ce.sourceLinks,i)-1:0}function l(ce){return function(){return ce}}var o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ce){return typeof ce}:function(ce){return ce&&typeof Symbol=="function"&&ce.constructor===Symbol&&ce!==Symbol.prototype?"symbol":typeof ce};function c(ce,me){return d(ce.source,me.source)||ce.index-me.index}function h(ce,me){return d(ce.target,me.target)||ce.index-me.index}function d(ce,me){return ce.partOfCycle===me.partOfCycle?ce.y0-me.y0:ce.circularLinkType==="top"||me.circularLinkType==="bottom"?-1:1}function p(ce){return ce.value}function y(ce){return(ce.y0+ce.y1)/2}function g(ce){return y(ce.source)}function A(ce){return y(ce.target)}function b(ce){return ce.index}function M(ce){return ce.nodes}function _(ce){return ce.links}function T(ce,me){var xe=ce.get(me);if(!xe)throw new Error("missing: "+me);return xe}function w(ce,me){return me(ce)}var v=25,L=10,S=.3;function k(){var ce=0,me=0,xe=1,ke=1,Ae=24,Oe,He=b,Ge=n,_e=M,Re=_,We=32,qe=2,Ue,Ie=null;function Ve(){var Mt={nodes:_e.apply(null,arguments),links:Re.apply(null,arguments)};dt(Mt),P(Mt,He,Ie),Rt(Mt),zt(Mt),O(Mt,He),Bt(Mt,We,He),Lt(Mt);for(var it=4,ht=0;ht<it;ht++)$(Mt,ke,He),ae(Mt,ke,He),ne(Mt,me,ke,He),$(Mt,ke,He),ae(Mt,ke,He);return ye(Mt,me,ke),j(Mt,qe,ke,He),Mt}Ve.nodeId=function(Mt){return arguments.length?(He=typeof Mt=="function"?Mt:l(Mt),Ve):He},Ve.nodeAlign=function(Mt){return arguments.length?(Ge=typeof Mt=="function"?Mt:l(Mt),Ve):Ge},Ve.nodeWidth=function(Mt){return arguments.length?(Ae=+Mt,Ve):Ae},Ve.nodePadding=function(Mt){return arguments.length?(Oe=+Mt,Ve):Oe},Ve.nodes=function(Mt){return arguments.length?(_e=typeof Mt=="function"?Mt:l(Mt),Ve):_e},Ve.links=function(Mt){return arguments.length?(Re=typeof Mt=="function"?Mt:l(Mt),Ve):Re},Ve.size=function(Mt){return arguments.length?(ce=me=0,xe=+Mt[0],ke=+Mt[1],Ve):[xe-ce,ke-me]},Ve.extent=function(Mt){return arguments.length?(ce=+Mt[0][0],xe=+Mt[1][0],me=+Mt[0][1],ke=+Mt[1][1],Ve):[[ce,me],[xe,ke]]},Ve.iterations=function(Mt){return arguments.length?(We=+Mt,Ve):We},Ve.circularLinkGap=function(Mt){return arguments.length?(qe=+Mt,Ve):qe},Ve.nodePaddingRatio=function(Mt){return arguments.length?(Ue=+Mt,Ve):Ue},Ve.sortNodes=function(Mt){return arguments.length?(Ie=Mt,Ve):Ie},Ve.update=function(Mt){return O(Mt,He),Lt(Mt),Mt.links.forEach(function(it){it.circular&&(it.circularLinkType=it.y0+it.y1<ke?"top":"bottom",it.source.circularLinkType=it.circularLinkType,it.target.circularLinkType=it.circularLinkType)}),$(Mt,ke,He,!1),ae(Mt,ke,He),j(Mt,qe,ke,He),Mt};function dt(Mt){Mt.nodes.forEach(function(ht,Qe){ht.index=Qe,ht.sourceLinks=[],ht.targetLinks=[]});var it=m.map(Mt.nodes,He);return Mt.links.forEach(function(ht,Qe){ht.index=Qe;var Ce=ht.source,Xe=ht.target;(typeof Ce=="undefined"?"undefined":o(Ce))!=="object"&&(Ce=ht.source=T(it,Ce)),(typeof Xe=="undefined"?"undefined":o(Xe))!=="object"&&(Xe=ht.target=T(it,Xe)),Ce.sourceLinks.push(ht),Xe.targetLinks.push(ht)}),Mt}function Rt(Mt){Mt.nodes.forEach(function(it){it.partOfCycle=!1,it.value=Math.max(s.sum(it.sourceLinks,p),s.sum(it.targetLinks,p)),it.sourceLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)}),it.targetLinks.forEach(function(ht){ht.circular&&(it.partOfCycle=!0,it.circularLinkType=ht.circularLinkType)})})}function Gt(Mt){var it=0,ht=0,Qe=0,Ce=0,Xe=s.max(Mt.nodes,function(rt){return rt.column});return Mt.links.forEach(function(rt){rt.circular&&(rt.circularLinkType=="top"?it=it+rt.width:ht=ht+rt.width,rt.target.column==0&&(Ce=Ce+rt.width),rt.source.column==Xe&&(Qe=Qe+rt.width))}),it=it>0?it+v+L:it,ht=ht>0?ht+v+L:ht,Qe=Qe>0?Qe+v+L:Qe,Ce=Ce>0?Ce+v+L:Ce,{top:it,bottom:ht,left:Ce,right:Qe}}function kt(Mt,it){var ht=s.max(Mt.nodes,function(St){return St.column}),Qe=xe-ce,Ce=ke-me,Xe=Qe+it.right+it.left,rt=Ce+it.top+it.bottom,ut=Qe/Xe,Pt=Ce/rt;return ce=ce*ut+it.left,xe=it.right==0?xe:xe*ut,me=me*Pt+it.top,ke=ke*Pt,Mt.nodes.forEach(function(St){St.x0=ce+St.column*((xe-ce-Ae)/ht),St.x1=St.x0+Ae}),Pt}function zt(Mt){var it,ht,Qe;for(it=Mt.nodes,ht=[],Qe=0;it.length;++Qe,it=ht,ht=[])it.forEach(function(Ce){Ce.depth=Qe,Ce.sourceLinks.forEach(function(Xe){ht.indexOf(Xe.target)<0&&!Xe.circular&&ht.push(Xe.target)})});for(it=Mt.nodes,ht=[],Qe=0;it.length;++Qe,it=ht,ht=[])it.forEach(function(Ce){Ce.height=Qe,Ce.targetLinks.forEach(function(Xe){ht.indexOf(Xe.source)<0&&!Xe.circular&&ht.push(Xe.source)})});Mt.nodes.forEach(function(Ce){Ce.column=Math.floor(Ge.call(null,Ce,Qe))})}function Bt(Mt,it,ht){var Qe=m.nest().key(function(St){return St.column}).sortKeys(s.ascending).entries(Mt.nodes).map(function(St){return St.values});rt(ht),Pt();for(var Ce=1,Xe=it;Xe>0;--Xe)ut(Ce*=.99,ht),Pt();function rt(St){if(Ue){var Nt=1/0;Qe.forEach(function(Je){var gt=ke*Ue/(Je.length+1);Nt=gt<Nt?gt:Nt}),Oe=Nt}var jt=s.min(Qe,function(Je){return(ke-me-(Je.length-1)*Oe)/s.sum(Je,p)});jt=jt*S,Mt.links.forEach(function(Je){Je.width=Je.value*jt});var Ot=Gt(Mt),Kt=kt(Mt,Ot);jt=jt*Kt,Mt.links.forEach(function(Je){Je.width=Je.value*jt}),Qe.forEach(function(Je){var gt=Je.length;Je.forEach(function(Et,rr){Et.depth==Qe.length-1&&gt==1||Et.depth==0&&gt==1?(Et.y0=ke/2-Et.value*jt,Et.y1=Et.y0+Et.value*jt):Et.partOfCycle?D(Et,St)==0?(Et.y0=ke/2+rr,Et.y1=Et.y0+Et.value*jt):Et.circularLinkType=="top"?(Et.y0=me+rr,Et.y1=Et.y0+Et.value*jt):(Et.y0=ke-Et.value*jt-rr,Et.y1=Et.y0+Et.value*jt):Ot.top==0||Ot.bottom==0?(Et.y0=(ke-me)/gt*rr,Et.y1=Et.y0+Et.value*jt):(Et.y0=(ke-me)/2-gt/2+rr,Et.y1=Et.y0+Et.value*jt)})})}function ut(St,Nt){var jt=Qe.length;Qe.forEach(function(Ot){var Kt=Ot.length,Je=Ot[0].depth;Ot.forEach(function(gt){var Et;if((gt.sourceLinks.length||gt.targetLinks.length)&&!(gt.partOfCycle&&D(gt,Nt)>0))if(Je==0&&Kt==1)Et=gt.y1-gt.y0,gt.y0=ke/2-Et/2,gt.y1=ke/2+Et/2;else if(Je==jt-1&&Kt==1)Et=gt.y1-gt.y0,gt.y0=ke/2-Et/2,gt.y1=ke/2+Et/2;else{var rr=0,vr=s.mean(gt.sourceLinks,A),or=s.mean(gt.targetLinks,g);vr&&or?rr=(vr+or)/2:rr=vr||or;var dr=(rr-y(gt))*St;gt.y0+=dr,gt.y1+=dr}})})}function Pt(){Qe.forEach(function(St){var Nt,jt,Ot=me,Kt=St.length,Je;for(St.sort(d),Je=0;Je<Kt;++Je)Nt=St[Je],jt=Ot-Nt.y0,jt>0&&(Nt.y0+=jt,Nt.y1+=jt),Ot=Nt.y1+Oe;if(jt=Ot-Oe-ke,jt>0)for(Ot=Nt.y0-=jt,Nt.y1-=jt,Je=Kt-2;Je>=0;--Je)Nt=St[Je],jt=Nt.y1+Oe-Ot,jt>0&&(Nt.y0-=jt,Nt.y1-=jt),Ot=Nt.y0})}}function Lt(Mt){Mt.nodes.forEach(function(it){it.sourceLinks.sort(h),it.targetLinks.sort(c)}),Mt.nodes.forEach(function(it){var ht=it.y0,Qe=ht,Ce=it.y1,Xe=Ce;it.sourceLinks.forEach(function(rt){rt.circular?(rt.y0=Ce-rt.width/2,Ce=Ce-rt.width):(rt.y0=ht+rt.width/2,ht+=rt.width)}),it.targetLinks.forEach(function(rt){rt.circular?(rt.y1=Xe-rt.width/2,Xe=Xe-rt.width):(rt.y1=Qe+rt.width/2,Qe+=rt.width)})})}return Ve}function P(ce,me,xe){var ke=0;if(xe===null){for(var Ae=[],Oe=0;Oe<ce.links.length;Oe++){var He=ce.links[Oe],Ge=He.source.index,_e=He.target.index;Ae[Ge]||(Ae[Ge]=[]),Ae[_e]||(Ae[_e]=[]),Ae[Ge].indexOf(_e)===-1&&Ae[Ge].push(_e)}var Re=t(Ae);Re.sort(function(Ie,Ve){return Ie.length-Ve.length});var We={};for(Oe=0;Oe<Re.length;Oe++){var qe=Re[Oe],Ue=qe.slice(-2);We[Ue[0]]||(We[Ue[0]]={}),We[Ue[0]][Ue[1]]=!0}ce.links.forEach(function(Ie){var Ve=Ie.target.index,dt=Ie.source.index;Ve===dt||We[dt]&&We[dt][Ve]?(Ie.circular=!0,Ie.circularLinkID=ke,ke=ke+1):Ie.circular=!1})}else ce.links.forEach(function(Ie){Ie.source[xe]<Ie.target[xe]?Ie.circular=!1:(Ie.circular=!0,Ie.circularLinkID=ke,ke=ke+1)})}function O(ce,me){var xe=0,ke=0;ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType||Ae.target.circularLinkType?Ae.circularLinkType=Ae.source.circularLinkType?Ae.source.circularLinkType:Ae.target.circularLinkType:Ae.circularLinkType=xe<ke?"top":"bottom",Ae.circularLinkType=="top"?xe=xe+1:ke=ke+1,ce.nodes.forEach(function(Oe){(w(Oe,me)==w(Ae.source,me)||w(Oe,me)==w(Ae.target,me))&&(Oe.circularLinkType=Ae.circularLinkType)}))}),ce.links.forEach(function(Ae){Ae.circular&&(Ae.source.circularLinkType==Ae.target.circularLinkType&&(Ae.circularLinkType=Ae.source.circularLinkType),ue(Ae,me)&&(Ae.circularLinkType=Ae.source.circularLinkType))})}function F(ce){var me=Math.abs(ce.y1-ce.y0),xe=Math.abs(ce.target.x0-ce.source.x1);return Math.atan(xe/me)}function I(ce,me){return ce.source.column<me.target.column?!1:!(ce.target.column>me.source.column)}function D(ce,me){var xe=0;ce.sourceLinks.forEach(function(Ae){xe=Ae.circular&&!ue(Ae,me)?xe+1:xe});var ke=0;return ce.targetLinks.forEach(function(Ae){ke=Ae.circular&&!ue(Ae,me)?ke+1:ke}),xe+ke}function U(ce){var me=ce.source.sourceLinks,xe=0;me.forEach(function(Oe){xe=Oe.circular?xe+1:xe});var ke=ce.target.targetLinks,Ae=0;return ke.forEach(function(Oe){Ae=Oe.circular?Ae+1:Ae}),!(xe>1||Ae>1)}function B(ce,me,xe){return ce.sort(ee),ce.forEach(function(ke,Ae){var Oe=0;if(ue(ke,xe)&&U(ke))ke.circularPathData.verticalBuffer=Oe+ke.width/2;else{var He=0;for(He;He<Ae;He++)if(I(ce[Ae],ce[He])){var Ge=ce[He].circularPathData.verticalBuffer+ce[He].width/2+me;Oe=Ge>Oe?Ge:Oe}ke.circularPathData.verticalBuffer=Oe+ke.width/2}}),ce}function j(ce,me,xe,ke){var Ae=5,Oe=s.min(ce.links,function(_e){return _e.source.y0});ce.links.forEach(function(_e){_e.circular&&(_e.circularPathData={})});var He=ce.links.filter(function(_e){return _e.circularLinkType=="top"});B(He,me,ke);var Ge=ce.links.filter(function(_e){return _e.circularLinkType=="bottom"});B(Ge,me,ke),ce.links.forEach(function(_e){if(_e.circular){if(_e.circularPathData.arcRadius=_e.width+L,_e.circularPathData.leftNodeBuffer=Ae,_e.circularPathData.rightNodeBuffer=Ae,_e.circularPathData.sourceWidth=_e.source.x1-_e.source.x0,_e.circularPathData.sourceX=_e.source.x0+_e.circularPathData.sourceWidth,_e.circularPathData.targetX=_e.target.x0,_e.circularPathData.sourceY=_e.y0,_e.circularPathData.targetY=_e.y1,ue(_e,ke)&&U(_e))_e.circularPathData.leftSmallArcRadius=L+_e.width/2,_e.circularPathData.leftLargeArcRadius=L+_e.width/2,_e.circularPathData.rightSmallArcRadius=L+_e.width/2,_e.circularPathData.rightLargeArcRadius=L+_e.width/2,_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=_e.source.y1+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=_e.source.y0-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius);else{var Re=_e.source.column,We=_e.circularLinkType,qe=ce.links.filter(function(Ve){return Ve.source.column==Re&&Ve.circularLinkType==We});_e.circularLinkType=="bottom"?qe.sort(W):qe.sort(q);var Ue=0;qe.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.leftSmallArcRadius=L+_e.width/2+Ue,_e.circularPathData.leftLargeArcRadius=L+_e.width/2+dt*me+Ue),Ue=Ue+Ve.width}),Re=_e.target.column,qe=ce.links.filter(function(Ve){return Ve.target.column==Re&&Ve.circularLinkType==We}),_e.circularLinkType=="bottom"?qe.sort(le):qe.sort(J),Ue=0,qe.forEach(function(Ve,dt){Ve.circularLinkID==_e.circularLinkID&&(_e.circularPathData.rightSmallArcRadius=L+_e.width/2+Ue,_e.circularPathData.rightLargeArcRadius=L+_e.width/2+dt*me+Ue),Ue=Ue+Ve.width}),_e.circularLinkType=="bottom"?(_e.circularPathData.verticalFullExtent=Math.max(xe,_e.source.y1,_e.target.y1)+v+_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent-_e.circularPathData.rightLargeArcRadius):(_e.circularPathData.verticalFullExtent=Oe-v-_e.circularPathData.verticalBuffer,_e.circularPathData.verticalLeftInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.leftLargeArcRadius,_e.circularPathData.verticalRightInnerExtent=_e.circularPathData.verticalFullExtent+_e.circularPathData.rightLargeArcRadius)}_e.circularPathData.leftInnerExtent=_e.circularPathData.sourceX+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightInnerExtent=_e.circularPathData.targetX-_e.circularPathData.rightNodeBuffer,_e.circularPathData.leftFullExtent=_e.circularPathData.sourceX+_e.circularPathData.leftLargeArcRadius+_e.circularPathData.leftNodeBuffer,_e.circularPathData.rightFullExtent=_e.circularPathData.targetX-_e.circularPathData.rightLargeArcRadius-_e.circularPathData.rightNodeBuffer}if(_e.circular)_e.path=Z(_e);else{var Ie=x.linkHorizontal().source(function(Ve){var dt=Ve.source.x0+(Ve.source.x1-Ve.source.x0),Rt=Ve.y0;return[dt,Rt]}).target(function(Ve){var dt=Ve.target.x0,Rt=Ve.y1;return[dt,Rt]});_e.path=Ie(_e)}})}function Z(ce){var me="";return ce.circularLinkType=="top"?me="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 0 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY-ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 0 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 0 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY-ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 0 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY:me="M"+ce.circularPathData.sourceX+" "+ce.circularPathData.sourceY+" L"+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.sourceY+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftSmallArcRadius+" 0 0 1 "+ce.circularPathData.leftFullExtent+" "+(ce.circularPathData.sourceY+ce.circularPathData.leftSmallArcRadius)+" L"+ce.circularPathData.leftFullExtent+" "+ce.circularPathData.verticalLeftInnerExtent+" A"+ce.circularPathData.leftLargeArcRadius+" "+ce.circularPathData.leftLargeArcRadius+" 0 0 1 "+ce.circularPathData.leftInnerExtent+" "+ce.circularPathData.verticalFullExtent+" L"+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.verticalFullExtent+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightLargeArcRadius+" 0 0 1 "+ce.circularPathData.rightFullExtent+" "+ce.circularPathData.verticalRightInnerExtent+" L"+ce.circularPathData.rightFullExtent+" "+(ce.circularPathData.targetY+ce.circularPathData.rightSmallArcRadius)+" A"+ce.circularPathData.rightLargeArcRadius+" "+ce.circularPathData.rightSmallArcRadius+" 0 0 1 "+ce.circularPathData.rightInnerExtent+" "+ce.circularPathData.targetY+" L"+ce.circularPathData.targetX+" "+ce.circularPathData.targetY,me}function ee(ce,me){return fe(ce)==fe(me)?ce.circularLinkType=="bottom"?W(ce,me):q(ce,me):fe(me)-fe(ce)}function q(ce,me){return ce.y0-me.y0}function W(ce,me){return me.y0-ce.y0}function J(ce,me){return ce.y1-me.y1}function le(ce,me){return me.y1-ce.y1}function fe(ce){return ce.target.column-ce.source.column}function se(ce){return ce.target.x0-ce.source.x1}function H(ce,me){var xe=F(ce),ke=se(me)/Math.tan(xe),Ae=oe(ce)=="up"?ce.y1+ke:ce.y1-ke;return Ae}function Y(ce,me){var xe=F(ce),ke=se(me)/Math.tan(xe),Ae=oe(ce)=="up"?ce.y1-ke:ce.y1+ke;return Ae}function ne(ce,me,xe,ke){ce.links.forEach(function(Ae){if(!Ae.circular&&Ae.target.column-Ae.source.column>1){var Oe=Ae.source.column+1,He=Ae.target.column-1,Ge=1,_e=He-Oe+1;for(Ge=1;Oe<=He;Oe++,Ge++)ce.nodes.forEach(function(Re){if(Re.column==Oe){var We=Ge/(_e+1),qe=Math.pow(1-We,3),Ue=3*We*Math.pow(1-We,2),Ie=3*Math.pow(We,2)*(1-We),Ve=Math.pow(We,3),dt=qe*Ae.y0+Ue*Ae.y0+Ie*Ae.y1+Ve*Ae.y1,Rt=dt-Ae.width/2,Gt=dt+Ae.width/2,kt;Rt>Re.y0&&Rt<Re.y1?(kt=Re.y1-Rt+10,kt=Re.circularLinkType=="bottom"?kt:-kt,Re=K(Re,kt,me,xe),ce.nodes.forEach(function(zt){w(zt,ke)==w(Re,ke)||zt.column!=Re.column||te(Re,zt)&&K(zt,kt,me,xe)})):Gt>Re.y0&&Gt<Re.y1?(kt=Gt-Re.y0+10,Re=K(Re,kt,me,xe),ce.nodes.forEach(function(zt){w(zt,ke)==w(Re,ke)||zt.column!=Re.column||zt.y0<Re.y1&&zt.y1>Re.y1&&K(zt,kt,me,xe)})):Rt<Re.y0&&Gt>Re.y1&&(kt=Gt-Re.y0+10,Re=K(Re,kt,me,xe),ce.nodes.forEach(function(zt){w(zt,ke)==w(Re,ke)||zt.column!=Re.column||zt.y0<Re.y1&&zt.y1>Re.y1&&K(zt,kt,me,xe)}))}})}})}function te(ce,me){return ce.y0>me.y0&&ce.y0<me.y1||ce.y1>me.y0&&ce.y1<me.y1?!0:ce.y0<me.y0&&ce.y1>me.y1}function K(ce,me,xe,ke){return ce.y0+me>=xe&&ce.y1+me<=ke&&(ce.y0=ce.y0+me,ce.y1=ce.y1+me,ce.targetLinks.forEach(function(Ae){Ae.y1=Ae.y1+me}),ce.sourceLinks.forEach(function(Ae){Ae.y0=Ae.y0+me})),ce}function $(ce,me,xe,ke){ce.nodes.forEach(function(Ae){ke&&Ae.y+(Ae.y1-Ae.y0)>me&&(Ae.y=Ae.y-(Ae.y+(Ae.y1-Ae.y0)-me));var Oe=ce.links.filter(function(_e){return w(_e.source,xe)==w(Ae,xe)}),He=Oe.length;He>1&&Oe.sort(function(_e,Re){if(!_e.circular&&!Re.circular){if(_e.target.column==Re.target.column)return _e.y1-Re.y1;if(ie(_e,Re)){if(_e.target.column>Re.target.column){var We=Y(Re,_e);return _e.y1-We}if(Re.target.column>_e.target.column){var qe=Y(_e,Re);return qe-Re.y1}}else return _e.y1-Re.y1}if(_e.circular&&!Re.circular)return _e.circularLinkType=="top"?-1:1;if(Re.circular&&!_e.circular)return Re.circularLinkType=="top"?1:-1;if(_e.circular&&Re.circular)return _e.circularLinkType===Re.circularLinkType&&_e.circularLinkType=="top"?_e.target.column===Re.target.column?_e.target.y1-Re.target.y1:Re.target.column-_e.target.column:_e.circularLinkType===Re.circularLinkType&&_e.circularLinkType=="bottom"?_e.target.column===Re.target.column?Re.target.y1-_e.target.y1:_e.target.column-Re.target.column:_e.circularLinkType=="top"?-1:1});var Ge=Ae.y0;Oe.forEach(function(_e){_e.y0=Ge+_e.width/2,Ge=Ge+_e.width}),Oe.forEach(function(_e,Re){if(_e.circularLinkType=="bottom"){var We=Re+1,qe=0;for(We;We<He;We++)qe=qe+Oe[We].width;_e.y0=Ae.y1-qe-_e.width/2}})})}function ae(ce,me,xe){ce.nodes.forEach(function(ke){var Ae=ce.links.filter(function(Ge){return w(Ge.target,xe)==w(ke,xe)}),Oe=Ae.length;Oe>1&&Ae.sort(function(Ge,_e){if(!Ge.circular&&!_e.circular){if(Ge.source.column==_e.source.column)return Ge.y0-_e.y0;if(ie(Ge,_e)){if(_e.source.column<Ge.source.column){var Re=H(_e,Ge);return Ge.y0-Re}if(Ge.source.column<_e.source.column){var We=H(Ge,_e);return We-_e.y0}}else return Ge.y0-_e.y0}if(Ge.circular&&!_e.circular)return Ge.circularLinkType=="top"?-1:1;if(_e.circular&&!Ge.circular)return _e.circularLinkType=="top"?1:-1;if(Ge.circular&&_e.circular)return Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="top"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:Ge.source.column-_e.source.column:Ge.circularLinkType===_e.circularLinkType&&Ge.circularLinkType=="bottom"?Ge.source.column===_e.source.column?Ge.source.y1-_e.source.y1:_e.source.column-Ge.source.column:Ge.circularLinkType=="top"?-1:1});var He=ke.y0;Ae.forEach(function(Ge){Ge.y1=He+Ge.width/2,He=He+Ge.width}),Ae.forEach(function(Ge,_e){if(Ge.circularLinkType=="bottom"){var Re=_e+1,We=0;for(Re;Re<Oe;Re++)We=We+Ae[Re].width;Ge.y1=ke.y1-We-Ge.width/2}})})}function ie(ce,me){return oe(ce)==oe(me)}function oe(ce){return ce.y0-ce.y1>0?"up":"down"}function ue(ce,me){return w(ce.source,me)==w(ce.target,me)}function ye(ce,me,xe){var ke=ce.nodes,Ae=ce.links,Oe=!1,He=!1;if(Ae.forEach(function(Ue){Ue.circularLinkType=="top"?Oe=!0:Ue.circularLinkType=="bottom"&&(He=!0)}),Oe==!1||He==!1){var Ge=s.min(ke,function(Ue){return Ue.y0}),_e=s.max(ke,function(Ue){return Ue.y1}),Re=_e-Ge,We=xe-me,qe=We/Re;ke.forEach(function(Ue){var Ie=(Ue.y1-Ue.y0)*qe;Ue.y0=(Ue.y0-Ge)*qe,Ue.y1=Ue.y0+Ie}),Ae.forEach(function(Ue){Ue.y0=(Ue.y0-Ge)*qe,Ue.y1=(Ue.y1-Ge)*qe,Ue.width=Ue.width*qe})}}u.sankeyCircular=k,u.sankeyCenter=f,u.sankeyLeft=a,u.sankeyRight=r,u.sankeyJustify=n,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-array"),e("d3-collection"),e("d3-shape")):s(u.d3=u.d3||{},u.d3,u.d3,u.d3)})(this,function(u,s,m,x){function t(L){return L.target.depth}function i(L){return L.depth}function a(L,S){return S-1-L.height}function r(L,S){return L.sourceLinks.length?L.depth:S-1}function n(L){return L.targetLinks.length?L.depth:L.sourceLinks.length?s.min(L.sourceLinks,t)-1:0}function f(L){return function(){return L}}function l(L,S){return c(L.source,S.source)||L.index-S.index}function o(L,S){return c(L.target,S.target)||L.index-S.index}function c(L,S){return L.y0-S.y0}function h(L){return L.value}function d(L){return(L.y0+L.y1)/2}function p(L){return d(L.source)*L.value}function y(L){return d(L.target)*L.value}function g(L){return L.index}function A(L){return L.nodes}function b(L){return L.links}function M(L,S){var k=L.get(S);if(!k)throw new Error("missing: "+S);return k}var _=function(){var L=0,S=0,k=1,P=1,O=24,F=8,I=g,D=r,U=A,B=b,j=32,Z=2/3;function ee(){var se={nodes:U.apply(null,arguments),links:B.apply(null,arguments)};return q(se),W(se),J(se),le(se),fe(se),se}ee.update=function(se){return fe(se),se},ee.nodeId=function(se){return arguments.length?(I=typeof se=="function"?se:f(se),ee):I},ee.nodeAlign=function(se){return arguments.length?(D=typeof se=="function"?se:f(se),ee):D},ee.nodeWidth=function(se){return arguments.length?(O=+se,ee):O},ee.nodePadding=function(se){return arguments.length?(F=+se,ee):F},ee.nodes=function(se){return arguments.length?(U=typeof se=="function"?se:f(se),ee):U},ee.links=function(se){return arguments.length?(B=typeof se=="function"?se:f(se),ee):B},ee.size=function(se){return arguments.length?(L=S=0,k=+se[0],P=+se[1],ee):[k-L,P-S]},ee.extent=function(se){return arguments.length?(L=+se[0][0],k=+se[1][0],S=+se[0][1],P=+se[1][1],ee):[[L,S],[k,P]]},ee.iterations=function(se){return arguments.length?(j=+se,ee):j};function q(se){se.nodes.forEach(function(Y,ne){Y.index=ne,Y.sourceLinks=[],Y.targetLinks=[]});var H=m.map(se.nodes,I);se.links.forEach(function(Y,ne){Y.index=ne;var te=Y.source,K=Y.target;typeof te!="object"&&(te=Y.source=M(H,te)),typeof K!="object"&&(K=Y.target=M(H,K)),te.sourceLinks.push(Y),K.targetLinks.push(Y)})}function W(se){se.nodes.forEach(function(H){H.value=Math.max(s.sum(H.sourceLinks,h),s.sum(H.targetLinks,h))})}function J(se){var H,Y,ne;for(H=se.nodes,Y=[],ne=0;H.length;++ne,H=Y,Y=[])H.forEach(function(K){K.depth=ne,K.sourceLinks.forEach(function($){Y.indexOf($.target)<0&&Y.push($.target)})});for(H=se.nodes,Y=[],ne=0;H.length;++ne,H=Y,Y=[])H.forEach(function(K){K.height=ne,K.targetLinks.forEach(function($){Y.indexOf($.source)<0&&Y.push($.source)})});var te=(k-L-O)/(ne-1);se.nodes.forEach(function(K){K.x1=(K.x0=L+Math.max(0,Math.min(ne-1,Math.floor(D.call(null,K,ne))))*te)+O})}function le(se){var H=m.nest().key(function(ie){return ie.x0}).sortKeys(s.ascending).entries(se.nodes).map(function(ie){return ie.values});te(),ae();for(var Y=1,ne=j;ne>0;--ne)$(Y*=.99),ae(),K(Y),ae();function te(){var ie=s.max(H,function(ye){return ye.length}),oe=Z*(P-S)/(ie-1);F>oe&&(F=oe);var ue=s.min(H,function(ye){return(P-S-(ye.length-1)*F)/s.sum(ye,h)});H.forEach(function(ye){ye.forEach(function(ce,me){ce.y1=(ce.y0=me)+ce.value*ue})}),se.links.forEach(function(ye){ye.width=ye.value*ue})}function K(ie){H.forEach(function(oe){oe.forEach(function(ue){if(ue.targetLinks.length){var ye=(s.sum(ue.targetLinks,p)/s.sum(ue.targetLinks,h)-d(ue))*ie;ue.y0+=ye,ue.y1+=ye}})})}function $(ie){H.slice().reverse().forEach(function(oe){oe.forEach(function(ue){if(ue.sourceLinks.length){var ye=(s.sum(ue.sourceLinks,y)/s.sum(ue.sourceLinks,h)-d(ue))*ie;ue.y0+=ye,ue.y1+=ye}})})}function ae(){H.forEach(function(ie){var oe,ue,ye=S,ce=ie.length,me;for(ie.sort(c),me=0;me<ce;++me)oe=ie[me],ue=ye-oe.y0,ue>0&&(oe.y0+=ue,oe.y1+=ue),ye=oe.y1+F;if(ue=ye-F-P,ue>0)for(ye=oe.y0-=ue,oe.y1-=ue,me=ce-2;me>=0;--me)oe=ie[me],ue=oe.y1+F-ye,ue>0&&(oe.y0-=ue,oe.y1-=ue),ye=oe.y0})}}function fe(se){se.nodes.forEach(function(H){H.sourceLinks.sort(o),H.targetLinks.sort(l)}),se.nodes.forEach(function(H){var Y=H.y0,ne=Y;H.sourceLinks.forEach(function(te){te.y0=Y+te.width/2,Y+=te.width}),H.targetLinks.forEach(function(te){te.y1=ne+te.width/2,ne+=te.width})})}return ee};function T(L){return[L.source.x1,L.y0]}function w(L){return[L.target.x0,L.y1]}var v=function(){return x.linkHorizontal().source(T).target(w)};u.sankey=_,u.sankeyCenter=n,u.sankeyLeft=i,u.sankeyRight=a,u.sankeyJustify=r,u.sankeyLinkHorizontal=v,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(e,z,N){(function(){var u={version:"3.8.0"},s=[].slice,m=function(he){return s.call(he)},x=self.document;function t(he){return he&&(he.ownerDocument||he.document||he).documentElement}function i(he){return he&&(he.ownerDocument&&he.ownerDocument.defaultView||he.document&&he||he.defaultView)}if(x)try{m(x.documentElement.childNodes)[0].nodeType}catch{m=function(Te){for(var Le=Te.length,Be=new Array(Le);Le--;)Be[Le]=Te[Le];return Be}}if(Date.now||(Date.now=function(){return+new Date}),x)try{x.createElement("DIV").style.setProperty("opacity",0,"")}catch{var a=this.Element.prototype,r=a.setAttribute,n=a.setAttributeNS,f=this.CSSStyleDeclaration.prototype,l=f.setProperty;a.setAttribute=function(Te,Le){r.call(this,Te,Le+"")},a.setAttributeNS=function(Te,Le,Be){n.call(this,Te,Le,Be+"")},f.setProperty=function(Te,Le,Be){l.call(this,Te,Le+"",Be)}}u.ascending=o;function o(he,Te){return he<Te?-1:he>Te?1:he>=Te?0:NaN}u.descending=function(he,Te){return Te<he?-1:Te>he?1:Te>=he?0:NaN},u.min=function(he,Te){var Le=-1,Be=he.length,Ne,Ke;if(arguments.length===1){for(;++Le<Be;)if((Ke=he[Le])!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=he[Le])!=null&&Ne>Ke&&(Ne=Ke)}else{for(;++Le<Be;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=Te.call(he,he[Le],Le))!=null&&Ne>Ke&&(Ne=Ke)}return Ne},u.max=function(he,Te){var Le=-1,Be=he.length,Ne,Ke;if(arguments.length===1){for(;++Le<Be;)if((Ke=he[Le])!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=he[Le])!=null&&Ke>Ne&&(Ne=Ke)}else{for(;++Le<Be;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Ne=Ke;break}for(;++Le<Be;)(Ke=Te.call(he,he[Le],Le))!=null&&Ke>Ne&&(Ne=Ke)}return Ne},u.extent=function(he,Te){var Le=-1,Be=he.length,Ne,Ke,yt;if(arguments.length===1){for(;++Le<Be;)if((Ke=he[Le])!=null&&Ke>=Ke){Ne=yt=Ke;break}for(;++Le<Be;)(Ke=he[Le])!=null&&(Ne>Ke&&(Ne=Ke),yt<Ke&&(yt=Ke))}else{for(;++Le<Be;)if((Ke=Te.call(he,he[Le],Le))!=null&&Ke>=Ke){Ne=yt=Ke;break}for(;++Le<Be;)(Ke=Te.call(he,he[Le],Le))!=null&&(Ne>Ke&&(Ne=Ke),yt<Ke&&(yt=Ke))}return[Ne,yt]};function c(he){return he===null?NaN:+he}function h(he){return!isNaN(he)}u.sum=function(he,Te){var Le=0,Be=he.length,Ne,Ke=-1;if(arguments.length===1)for(;++Ke<Be;)h(Ne=+he[Ke])&&(Le+=Ne);else for(;++Ke<Be;)h(Ne=+Te.call(he,he[Ke],Ke))&&(Le+=Ne);return Le},u.mean=function(he,Te){var Le=0,Be=he.length,Ne,Ke=-1,yt=Be;if(arguments.length===1)for(;++Ke<Be;)h(Ne=c(he[Ke]))?Le+=Ne:--yt;else for(;++Ke<Be;)h(Ne=c(Te.call(he,he[Ke],Ke)))?Le+=Ne:--yt;if(yt)return Le/yt},u.quantile=function(he,Te){var Le=(he.length-1)*Te+1,Be=Math.floor(Le),Ne=+he[Be-1],Ke=Le-Be;return Ke?Ne+Ke*(he[Be]-Ne):Ne},u.median=function(he,Te){var Le=[],Be=he.length,Ne,Ke=-1;if(arguments.length===1)for(;++Ke<Be;)h(Ne=c(he[Ke]))&&Le.push(Ne);else for(;++Ke<Be;)h(Ne=c(Te.call(he,he[Ke],Ke)))&&Le.push(Ne);if(Le.length)return u.quantile(Le.sort(o),.5)},u.variance=function(he,Te){var Le=he.length,Be=0,Ne,Ke,yt=0,vt=-1,Ct=0;if(arguments.length===1)for(;++vt<Le;)h(Ne=c(he[vt]))&&(Ke=Ne-Be,Be+=Ke/++Ct,yt+=Ke*(Ne-Be));else for(;++vt<Le;)h(Ne=c(Te.call(he,he[vt],vt)))&&(Ke=Ne-Be,Be+=Ke/++Ct,yt+=Ke*(Ne-Be));if(Ct>1)return yt/(Ct-1)},u.deviation=function(){var he=u.variance.apply(this,arguments);return he&&Math.sqrt(he)};function d(he){return{left:function(Te,Le,Be,Ne){for(arguments.length<3&&(Be=0),arguments.length<4&&(Ne=Te.length);Be<Ne;){var Ke=Be+Ne>>>1;he(Te[Ke],Le)<0?Be=Ke+1:Ne=Ke}return Be},right:function(Te,Le,Be,Ne){for(arguments.length<3&&(Be=0),arguments.length<4&&(Ne=Te.length);Be<Ne;){var Ke=Be+Ne>>>1;he(Te[Ke],Le)>0?Ne=Ke:Be=Ke+1}return Be}}}var p=d(o);u.bisectLeft=p.left,u.bisect=u.bisectRight=p.right,u.bisector=function(he){return d(he.length===1?function(Te,Le){return o(he(Te),Le)}:he)},u.shuffle=function(he,Te,Le){(Be=arguments.length)<3&&(Le=he.length,Be<2&&(Te=0));for(var Be=Le-Te,Ne,Ke;Be;)Ke=Math.random()*Be--|0,Ne=he[Be+Te],he[Be+Te]=he[Ke+Te],he[Ke+Te]=Ne;return he},u.permute=function(he,Te){for(var Le=Te.length,Be=new Array(Le);Le--;)Be[Le]=he[Te[Le]];return Be},u.pairs=function(he){for(var Te=0,Le=he.length-1,Be=he[0],Ne=new Array(Le<0?0:Le);Te<Le;)Ne[Te]=[Be,Be=he[++Te]];return Ne},u.transpose=function(he){if(!(Ke=he.length))return[];for(var Te=-1,Le=u.min(he,y),Be=new Array(Le);++Te<Le;)for(var Ne=-1,Ke,yt=Be[Te]=new Array(Ke);++Ne<Ke;)yt[Ne]=he[Ne][Te];return Be};function y(he){return he.length}u.zip=function(){return u.transpose(arguments)},u.keys=function(he){var Te=[];for(var Le in he)Te.push(Le);return Te},u.values=function(he){var Te=[];for(var Le in he)Te.push(he[Le]);return Te},u.entries=function(he){var Te=[];for(var Le in he)Te.push({key:Le,value:he[Le]});return Te},u.merge=function(he){for(var Te=he.length,Le,Be=-1,Ne=0,Ke,yt;++Be<Te;)Ne+=he[Be].length;for(Ke=new Array(Ne);--Te>=0;)for(yt=he[Te],Le=yt.length;--Le>=0;)Ke[--Ne]=yt[Le];return Ke};var g=Math.abs;u.range=function(he,Te,Le){if(arguments.length<3&&(Le=1,arguments.length<2&&(Te=he,he=0)),(Te-he)/Le==1/0)throw new Error("infinite range");var Be=[],Ne=A(g(Le)),Ke=-1,yt;if(he*=Ne,Te*=Ne,Le*=Ne,Le<0)for(;(yt=he+Le*++Ke)>Te;)Be.push(yt/Ne);else for(;(yt=he+Le*++Ke)<Te;)Be.push(yt/Ne);return Be};function A(he){for(var Te=1;he*Te%1;)Te*=10;return Te}function b(he,Te){for(var Le in Te)Object.defineProperty(he.prototype,Le,{value:Te[Le],enumerable:!1})}u.map=function(he,Te){var Le=new M;if(he instanceof M)he.forEach(function(vt,Ct){Le.set(vt,Ct)});else if(Array.isArray(he)){var Be=-1,Ne=he.length,Ke;if(arguments.length===1)for(;++Be<Ne;)Le.set(Be,he[Be]);else for(;++Be<Ne;)Le.set(Te.call(he,Ke=he[Be],Be),Ke)}else for(var yt in he)Le.set(yt,he[yt]);return Le};function M(){this._=Object.create(null)}var _="__proto__",T="\0";b(M,{has:L,get:function(he){return this._[w(he)]},set:function(he,Te){return this._[w(he)]=Te},remove:S,keys:k,values:function(){var he=[];for(var Te in this._)he.push(this._[Te]);return he},entries:function(){var he=[];for(var Te in this._)he.push({key:v(Te),value:this._[Te]});return he},size:P,empty:O,forEach:function(he){for(var Te in this._)he.call(this,v(Te),this._[Te])}});function w(he){return(he+="")===_||he[0]===T?T+he:he}function v(he){return(he+="")[0]===T?he.slice(1):he}function L(he){return w(he)in this._}function S(he){return(he=w(he))in this._&&delete this._[he]}function k(){var he=[];for(var Te in this._)he.push(v(Te));return he}function P(){var he=0;for(var Te in this._)++he;return he}function O(){for(var he in this._)return!1;return!0}u.nest=function(){var he={},Te=[],Le=[],Be,Ne;function Ke(vt,Ct,Ut){if(Ut>=Te.length)return Ne?Ne.call(he,Ct):Be?Ct.sort(Be):Ct;for(var Yt=-1,Xt=Ct.length,_r=Te[Ut++],Qr,cn,Mr,Ur=new M,Yr;++Yt<Xt;)(Yr=Ur.get(Qr=_r(cn=Ct[Yt])))?Yr.push(cn):Ur.set(Qr,[cn]);return vt?(cn=vt(),Mr=function(sn,un){cn.set(sn,Ke(vt,un,Ut))}):(cn={},Mr=function(sn,un){cn[sn]=Ke(vt,un,Ut)}),Ur.forEach(Mr),cn}function yt(vt,Ct){if(Ct>=Te.length)return vt;var Ut=[],Yt=Le[Ct++];return vt.forEach(function(Xt,_r){Ut.push({key:Xt,values:yt(_r,Ct)})}),Yt?Ut.sort(function(Xt,_r){return Yt(Xt.key,_r.key)}):Ut}return he.map=function(vt,Ct){return Ke(Ct,vt,0)},he.entries=function(vt){return yt(Ke(u.map,vt,0),0)},he.key=function(vt){return Te.push(vt),he},he.sortKeys=function(vt){return Le[Te.length-1]=vt,he},he.sortValues=function(vt){return Be=vt,he},he.rollup=function(vt){return Ne=vt,he},he},u.set=function(he){var Te=new F;if(he)for(var Le=0,Be=he.length;Le<Be;++Le)Te.add(he[Le]);return Te};function F(){this._=Object.create(null)}b(F,{has:L,add:function(he){return this._[w(he+="")]=!0,he},remove:S,values:k,size:P,empty:O,forEach:function(he){for(var Te in this._)he.call(this,v(Te))}}),u.behavior={};function I(he){return he}u.rebind=function(he,Te){for(var Le=1,Be=arguments.length,Ne;++Le<Be;)he[Ne=arguments[Le]]=D(he,Te,Te[Ne]);return he};function D(he,Te,Le){return function(){var Be=Le.apply(Te,arguments);return Be===Te?he:Be}}function U(he,Te){if(Te in he)return Te;Te=Te.charAt(0).toUpperCase()+Te.slice(1);for(var Le=0,Be=B.length;Le<Be;++Le){var Ne=B[Le]+Te;if(Ne in he)return Ne}}var B=["webkit","ms","moz","Moz","o","O"];function j(){}u.dispatch=function(){for(var he=new Z,Te=-1,Le=arguments.length;++Te<Le;)he[arguments[Te]]=ee(he);return he};function Z(){}Z.prototype.on=function(he,Te){var Le=he.indexOf("."),Be="";if(Le>=0&&(Be=he.slice(Le+1),he=he.slice(0,Le)),he)return arguments.length<2?this[he].on(Be):this[he].on(Be,Te);if(arguments.length===2){if(Te==null)for(he in this)this.hasOwnProperty(he)&&this[he].on(Be,null);return this}};function ee(he){var Te=[],Le=new M;function Be(){for(var Ne=Te,Ke=-1,yt=Ne.length,vt;++Ke<yt;)(vt=Ne[Ke].on)&&vt.apply(this,arguments);return he}return Be.on=function(Ne,Ke){var yt=Le.get(Ne),vt;return arguments.length<2?yt&&yt.on:(yt&&(yt.on=null,Te=Te.slice(0,vt=Te.indexOf(yt)).concat(Te.slice(vt+1)),Le.remove(Ne)),Ke&&Te.push(Le.set(Ne,{on:Ke})),he)},Be}u.event=null;function q(){u.event.preventDefault()}function W(){for(var he=u.event,Te;Te=he.sourceEvent;)he=Te;return he}function J(he){for(var Te=new Z,Le=0,Be=arguments.length;++Le<Be;)Te[arguments[Le]]=ee(Te);return Te.of=function(Ne,Ke){return function(yt){try{var vt=yt.sourceEvent=u.event;yt.target=he,u.event=yt,Te[yt.type].apply(Ne,Ke)}finally{u.event=vt}}},Te}u.requote=function(he){return he.replace(le,"\\$&")};var le=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,fe=function(he,Te){for(var Le in Te)he[Le]=Te[Le]};function se(he){return fe(he,te),he}var H=function(he,Te){return Te.querySelector(he)},Y=function(he,Te){return Te.querySelectorAll(he)},ne=function(he,Te){var Le=he.matches||he[U(he,"matchesSelector")];return ne=function(Be,Ne){return Le.call(Be,Ne)},ne(he,Te)};typeof Sizzle=="function"&&(H=function(he,Te){return Sizzle(he,Te)[0]||null},Y=Sizzle,ne=Sizzle.matchesSelector),u.selection=function(){return u.select(x.documentElement)};var te=u.selection.prototype=[];te.select=function(he){var Te=[],Le,Be,Ne,Ke;he=K(he);for(var yt=-1,vt=this.length;++yt<vt;){Te.push(Le=[]),Le.parentNode=(Ne=this[yt]).parentNode;for(var Ct=-1,Ut=Ne.length;++Ct<Ut;)(Ke=Ne[Ct])?(Le.push(Be=he.call(Ke,Ke.__data__,Ct,yt)),Be&&"__data__"in Ke&&(Be.__data__=Ke.__data__)):Le.push(null)}return se(Te)};function K(he){return typeof he=="function"?he:function(){return H(he,this)}}te.selectAll=function(he){var Te=[],Le,Be;he=$(he);for(var Ne=-1,Ke=this.length;++Ne<Ke;)for(var yt=this[Ne],vt=-1,Ct=yt.length;++vt<Ct;)(Be=yt[vt])&&(Te.push(Le=m(he.call(Be,Be.__data__,vt,Ne))),Le.parentNode=Be);return se(Te)};function $(he){return typeof he=="function"?he:function(){return Y(he,this)}}var ae="http://www.w3.org/1999/xhtml",ie={svg:"http://www.w3.org/2000/svg",xhtml:ae,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};u.ns={prefix:ie,qualify:function(he){var Te=he.indexOf(":"),Le=he;return Te>=0&&(Le=he.slice(0,Te))!=="xmlns"&&(he=he.slice(Te+1)),ie.hasOwnProperty(Le)?{space:ie[Le],local:he}:he}},te.attr=function(he,Te){if(arguments.length<2){if(typeof he=="string"){var Le=this.node();return he=u.ns.qualify(he),he.local?Le.getAttributeNS(he.space,he.local):Le.getAttribute(he)}for(Te in he)this.each(oe(Te,he[Te]));return this}return this.each(oe(he,Te))};function oe(he,Te){he=u.ns.qualify(he);function Le(){this.removeAttribute(he)}function Be(){this.removeAttributeNS(he.space,he.local)}function Ne(){this.setAttribute(he,Te)}function Ke(){this.setAttributeNS(he.space,he.local,Te)}function yt(){var Ct=Te.apply(this,arguments);Ct==null?this.removeAttribute(he):this.setAttribute(he,Ct)}function vt(){var Ct=Te.apply(this,arguments);Ct==null?this.removeAttributeNS(he.space,he.local):this.setAttributeNS(he.space,he.local,Ct)}return Te==null?he.local?Be:Le:typeof Te=="function"?he.local?vt:yt:he.local?Ke:Ne}function ue(he){return he.trim().replace(/\s+/g," ")}te.classed=function(he,Te){if(arguments.length<2){if(typeof he=="string"){var Le=this.node(),Be=(he=ce(he)).length,Ne=-1;if(Te=Le.classList){for(;++Ne<Be;)if(!Te.contains(he[Ne]))return!1}else for(Te=Le.getAttribute("class");++Ne<Be;)if(!ye(he[Ne]).test(Te))return!1;return!0}for(Te in he)this.each(me(Te,he[Te]));return this}return this.each(me(he,Te))};function ye(he){return new RegExp("(?:^|\\s+)"+u.requote(he)+"(?:\\s+|$)","g")}function ce(he){return(he+"").trim().split(/^|\s+/)}function me(he,Te){he=ce(he).map(xe);var Le=he.length;function Be(){for(var Ke=-1;++Ke<Le;)he[Ke](this,Te)}function Ne(){for(var Ke=-1,yt=Te.apply(this,arguments);++Ke<Le;)he[Ke](this,yt)}return typeof Te=="function"?Ne:Be}function xe(he){var Te=ye(he);return function(Le,Be){if(Ne=Le.classList)return Be?Ne.add(he):Ne.remove(he);var Ne=Le.getAttribute("class")||"";Be?(Te.lastIndex=0,Te.test(Ne)||Le.setAttribute("class",ue(Ne+" "+he))):Le.setAttribute("class",ue(Ne.replace(Te," ")))}}te.style=function(he,Te,Le){var Be=arguments.length;if(Be<3){if(typeof he!="string"){Be<2&&(Te="");for(Le in he)this.each(ke(Le,he[Le],Te));return this}if(Be<2){var Ne=this.node();return i(Ne).getComputedStyle(Ne,null).getPropertyValue(he)}Le=""}return this.each(ke(he,Te,Le))};function ke(he,Te,Le){function Be(){this.style.removeProperty(he)}function Ne(){this.style.setProperty(he,Te,Le)}function Ke(){var yt=Te.apply(this,arguments);yt==null?this.style.removeProperty(he):this.style.setProperty(he,yt,Le)}return Te==null?Be:typeof Te=="function"?Ke:Ne}te.property=function(he,Te){if(arguments.length<2){if(typeof he=="string")return this.node()[he];for(Te in he)this.each(Ae(Te,he[Te]));return this}return this.each(Ae(he,Te))};function Ae(he,Te){function Le(){delete this[he]}function Be(){this[he]=Te}function Ne(){var Ke=Te.apply(this,arguments);Ke==null?delete this[he]:this[he]=Ke}return Te==null?Le:typeof Te=="function"?Ne:Be}te.text=function(he){return arguments.length?this.each(typeof he=="function"?function(){var Te=he.apply(this,arguments);this.textContent=Te==null?"":Te}:he==null?function(){this.textContent=""}:function(){this.textContent=he}):this.node().textContent},te.html=function(he){return arguments.length?this.each(typeof he=="function"?function(){var Te=he.apply(this,arguments);this.innerHTML=Te==null?"":Te}:he==null?function(){this.innerHTML=""}:function(){this.innerHTML=he}):this.node().innerHTML},te.append=function(he){return he=Oe(he),this.select(function(){return this.appendChild(he.apply(this,arguments))})};function Oe(he){function Te(){var Be=this.ownerDocument,Ne=this.namespaceURI;return Ne===ae&&Be.documentElement.namespaceURI===ae?Be.createElement(he):Be.createElementNS(Ne,he)}function Le(){return this.ownerDocument.createElementNS(he.space,he.local)}return typeof he=="function"?he:(he=u.ns.qualify(he)).local?Le:Te}te.insert=function(he,Te){return he=Oe(he),Te=K(Te),this.select(function(){return this.insertBefore(he.apply(this,arguments),Te.apply(this,arguments)||null)})},te.remove=function(){return this.each(He)};function He(){var he=this.parentNode;he&&he.removeChild(this)}te.data=function(he,Te){var Le=-1,Be=this.length,Ne,Ke;if(!arguments.length){for(he=new Array(Be=(Ne=this[0]).length);++Le<Be;)(Ke=Ne[Le])&&(he[Le]=Ke.__data__);return he}function yt(Yt,Xt){var _r,Qr=Yt.length,cn=Xt.length,Mr=Math.min(Qr,cn),Ur=new Array(cn),Yr=new Array(cn),sn=new Array(Qr),un,Zr;if(Te){var Wn=new M,aa=new Array(Qr),Aa;for(_r=-1;++_r<Qr;)(un=Yt[_r])&&(Wn.has(Aa=Te.call(un,un.__data__,_r))?sn[_r]=un:Wn.set(Aa,un),aa[_r]=Aa);for(_r=-1;++_r<cn;)(un=Wn.get(Aa=Te.call(Xt,Zr=Xt[_r],_r)))?un!==!0&&(Ur[_r]=un,un.__data__=Zr):Yr[_r]=Ge(Zr),Wn.set(Aa,!0);for(_r=-1;++_r<Qr;)_r in aa&&Wn.get(aa[_r])!==!0&&(sn[_r]=Yt[_r])}else{for(_r=-1;++_r<Mr;)un=Yt[_r],Zr=Xt[_r],un?(un.__data__=Zr,Ur[_r]=un):Yr[_r]=Ge(Zr);for(;_r<cn;++_r)Yr[_r]=Ge(Xt[_r]);for(;_r<Qr;++_r)sn[_r]=Yt[_r]}Yr.update=Ur,Yr.parentNode=Ur.parentNode=sn.parentNode=Yt.parentNode,vt.push(Yr),Ct.push(Ur),Ut.push(sn)}var vt=qe([]),Ct=se([]),Ut=se([]);if(typeof he=="function")for(;++Le<Be;)yt(Ne=this[Le],he.call(Ne,Ne.parentNode.__data__,Le));else for(;++Le<Be;)yt(Ne=this[Le],he);return Ct.enter=function(){return vt},Ct.exit=function(){return Ut},Ct};function Ge(he){return{__data__:he}}te.datum=function(he){return arguments.length?this.property("__data__",he):this.property("__data__")},te.filter=function(he){var Te=[],Le,Be,Ne;typeof he!="function"&&(he=_e(he));for(var Ke=0,yt=this.length;Ke<yt;Ke++){Te.push(Le=[]),Le.parentNode=(Be=this[Ke]).parentNode;for(var vt=0,Ct=Be.length;vt<Ct;vt++)(Ne=Be[vt])&&he.call(Ne,Ne.__data__,vt,Ke)&&Le.push(Ne)}return se(Te)};function _e(he){return function(){return ne(this,he)}}te.order=function(){for(var he=-1,Te=this.length;++he<Te;)for(var Le=this[he],Be=Le.length-1,Ne=Le[Be],Ke;--Be>=0;)(Ke=Le[Be])&&(Ne&&Ne!==Ke.nextSibling&&Ne.parentNode.insertBefore(Ke,Ne),Ne=Ke);return this},te.sort=function(he){he=Re.apply(this,arguments);for(var Te=-1,Le=this.length;++Te<Le;)this[Te].sort(he);return this.order()};function Re(he){return arguments.length||(he=o),function(Te,Le){return Te&&Le?he(Te.__data__,Le.__data__):!Te-!Le}}te.each=function(he){return We(this,function(Te,Le,Be){he.call(Te,Te.__data__,Le,Be)})};function We(he,Te){for(var Le=0,Be=he.length;Le<Be;Le++)for(var Ne=he[Le],Ke=0,yt=Ne.length,vt;Ke<yt;Ke++)(vt=Ne[Ke])&&Te(vt,Ke,Le);return he}te.call=function(he){var Te=m(arguments);return he.apply(Te[0]=this,Te),this},te.empty=function(){return!this.node()},te.node=function(){for(var he=0,Te=this.length;he<Te;he++)for(var Le=this[he],Be=0,Ne=Le.length;Be<Ne;Be++){var Ke=Le[Be];if(Ke)return Ke}return null},te.size=function(){var he=0;return We(this,function(){++he}),he};function qe(he){return fe(he,Ue),he}var Ue=[];u.selection.enter=qe,u.selection.enter.prototype=Ue,Ue.append=te.append,Ue.empty=te.empty,Ue.node=te.node,Ue.call=te.call,Ue.size=te.size,Ue.select=function(he){for(var Te=[],Le,Be,Ne,Ke,yt,vt=-1,Ct=this.length;++vt<Ct;){Ne=(Ke=this[vt]).update,Te.push(Le=[]),Le.parentNode=Ke.parentNode;for(var Ut=-1,Yt=Ke.length;++Ut<Yt;)(yt=Ke[Ut])?(Le.push(Ne[Ut]=Be=he.call(Ke.parentNode,yt.__data__,Ut,vt)),Be.__data__=yt.__data__):Le.push(null)}return se(Te)},Ue.insert=function(he,Te){return arguments.length<2&&(Te=Ie(this)),te.insert.call(this,he,Te)};function Ie(he){var Te,Le;return function(Be,Ne,Ke){var yt=he[Ke].update,vt=yt.length,Ct;for(Ke!=Le&&(Le=Ke,Te=0),Ne>=Te&&(Te=Ne+1);!(Ct=yt[Te])&&++Te<vt;);return Ct}}u.select=function(he){var Te;return typeof he=="string"?(Te=[H(he,x)],Te.parentNode=x.documentElement):(Te=[he],Te.parentNode=t(he)),se([Te])},u.selectAll=function(he){var Te;return typeof he=="string"?(Te=m(Y(he,x)),Te.parentNode=x.documentElement):(Te=m(he),Te.parentNode=null),se([Te])},te.on=function(he,Te,Le){var Be=arguments.length;if(Be<3){if(typeof he!="string"){Be<2&&(Te=!1);for(Le in he)this.each(Ve(Le,he[Le],Te));return this}if(Be<2)return(Be=this.node()["__on"+he])&&Be._;Le=!1}return this.each(Ve(he,Te,Le))};function Ve(he,Te,Le){var Be="__on"+he,Ne=he.indexOf("."),Ke=Rt;Ne>0&&(he=he.slice(0,Ne));var yt=dt.get(he);yt&&(he=yt,Ke=Gt);function vt(){var Yt=this[Be];Yt&&(this.removeEventListener(he,Yt,Yt.$),delete this[Be])}function Ct(){var Yt=Ke(Te,m(arguments));vt.call(this),this.addEventListener(he,this[Be]=Yt,Yt.$=Le),Yt._=Te}function Ut(){var Yt=new RegExp("^__on([^.]+)"+u.requote(he)+"$"),Xt;for(var _r in this)if(Xt=_r.match(Yt)){var Qr=this[_r];this.removeEventListener(Xt[1],Qr,Qr.$),delete this[_r]}}return Ne?Te?Ct:vt:Te?j:Ut}var dt=u.map({mouseenter:"mouseover",mouseleave:"mouseout"});x&&dt.forEach(function(he){"on"+he in x&&dt.remove(he)});function Rt(he,Te){return function(Le){var Be=u.event;u.event=Le,Te[0]=this.__data__;try{he.apply(this,Te)}finally{u.event=Be}}}function Gt(he,Te){var Le=Rt(he,Te);return function(Be){var Ne=this,Ke=Be.relatedTarget;(!Ke||Ke!==Ne&&!(Ke.compareDocumentPosition(Ne)&8))&&Le.call(Ne,Be)}}var kt,zt=0;function Bt(he){var Te=".dragsuppress-"+ ++zt,Le="click"+Te,Be=u.select(i(he)).on("touchmove"+Te,q).on("dragstart"+Te,q).on("selectstart"+Te,q);if(kt==null&&(kt="onselectstart"in he?!1:U(he.style,"userSelect")),kt){var Ne=t(he).style,Ke=Ne[kt];Ne[kt]="none"}return function(yt){if(Be.on(Te,null),kt&&(Ne[kt]=Ke),yt){var vt=function(){Be.on(Le,null)};Be.on(Le,function(){q(),vt()},!0),setTimeout(vt,0)}}}u.mouse=function(he){return Mt(he,W())};var Lt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function Mt(he,Te){Te.changedTouches&&(Te=Te.changedTouches[0]);var Le=he.ownerSVGElement||he;if(Le.createSVGPoint){var Be=Le.createSVGPoint();if(Lt<0){var Ne=i(he);if(Ne.scrollX||Ne.scrollY){Le=u.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var Ke=Le[0][0].getScreenCTM();Lt=!(Ke.f||Ke.e),Le.remove()}}return Lt?(Be.x=Te.pageX,Be.y=Te.pageY):(Be.x=Te.clientX,Be.y=Te.clientY),Be=Be.matrixTransform(he.getScreenCTM().inverse()),[Be.x,Be.y]}var yt=he.getBoundingClientRect();return[Te.clientX-yt.left-he.clientLeft,Te.clientY-yt.top-he.clientTop]}u.touch=function(he,Te,Le){if(arguments.length<3&&(Le=Te,Te=W().changedTouches),Te){for(var Be=0,Ne=Te.length,Ke;Be<Ne;++Be)if((Ke=Te[Be]).identifier===Le)return Mt(he,Ke)}},u.behavior.drag=function(){var he=J(Ne,"drag","dragstart","dragend"),Te=null,Le=Ke(j,u.mouse,i,"mousemove","mouseup"),Be=Ke(it,u.touch,I,"touchmove","touchend");function Ne(){this.on("mousedown.drag",Le).on("touchstart.drag",Be)}function Ke(yt,vt,Ct,Ut,Yt){return function(){var Xt=this,_r=u.event.target.correspondingElement||u.event.target,Qr=Xt.parentNode,cn=he.of(Xt,arguments),Mr=0,Ur=yt(),Yr=".drag"+(Ur==null?"":"-"+Ur),sn,un=u.select(Ct(_r)).on(Ut+Yr,aa).on(Yt+Yr,Aa),Zr=Bt(_r),Wn=vt(Qr,Ur);Te?(sn=Te.apply(Xt,arguments),sn=[sn.x-Wn[0],sn.y-Wn[1]]):sn=[0,0],cn({type:"dragstart"});function aa(){var sa=vt(Qr,Ur),La,ca;!sa||(La=sa[0]-Wn[0],ca=sa[1]-Wn[1],Mr|=La|ca,Wn=sa,cn({type:"drag",x:sa[0]+sn[0],y:sa[1]+sn[1],dx:La,dy:ca}))}function Aa(){!vt(Qr,Ur)||(un.on(Ut+Yr,null).on(Yt+Yr,null),Zr(Mr),cn({type:"dragend"}))}}}return Ne.origin=function(yt){return arguments.length?(Te=yt,Ne):Te},u.rebind(Ne,he,"on")};function it(){return u.event.changedTouches[0].identifier}u.touches=function(he,Te){return arguments.length<2&&(Te=W().touches),Te?m(Te).map(function(Le){var Be=Mt(he,Le);return Be.identifier=Le.identifier,Be}):[]};var ht=1e-6,Qe=ht*ht,Ce=Math.PI,Xe=2*Ce,rt=Xe-ht,ut=Ce/2,Pt=Ce/180,St=180/Ce;function Nt(he,Te,Le){return(Te[0]-he[0])*(Le[1]-he[1])-(Te[1]-he[1])*(Le[0]-he[0])}function jt(he){return he>1?ut:he<-1?-ut:Math.asin(he)}function Ot(he){return((he=Math.exp(he))-1/he)/2}function Kt(he){return((he=Math.exp(he))+1/he)/2}function Je(he){return((he=Math.exp(2*he))-1)/(he+1)}var gt=Math.SQRT2,Et=2,rr=4;u.interpolateZoom=function(he,Te){var Le=he[0],Be=he[1],Ne=he[2],Ke=Te[0],yt=Te[1],vt=Te[2],Ct=Ke-Le,Ut=yt-Be,Yt=Ct*Ct+Ut*Ut,Xt,_r;if(Yt<Qe)_r=Math.log(vt/Ne)/gt,Xt=function(sn){return[Le+sn*Ct,Be+sn*Ut,Ne*Math.exp(gt*sn*_r)]};else{var Qr=Math.sqrt(Yt),cn=(vt*vt-Ne*Ne+rr*Yt)/(2*Ne*Et*Qr),Mr=(vt*vt-Ne*Ne-rr*Yt)/(2*vt*Et*Qr),Ur=Math.log(Math.sqrt(cn*cn+1)-cn),Yr=Math.log(Math.sqrt(Mr*Mr+1)-Mr);_r=(Yr-Ur)/gt,Xt=function(sn){var un=sn*_r,Zr=Kt(Ur),Wn=Ne/(Et*Qr)*(Zr*Je(gt*un+Ur)-Ot(Ur));return[Le+Wn*Ct,Be+Wn*Ut,Ne*Zr/Kt(gt*un+Ur)]}}return Xt.duration=_r*1e3,Xt},u.behavior.zoom=function(){var he={x:0,y:0,k:1},Te,Le,Be,Ne=[960,500],Ke=vr,yt=250,vt=0,Ct="mousedown.zoom",Ut="mousemove.zoom",Yt="mouseup.zoom",Xt,_r="touchstart.zoom",Qr,cn=J(un,"zoomstart","zoom","zoomend"),Mr,Ur,Yr,sn;dr||(dr="onwheel"in x?(or=function(){return-u.event.deltaY*(u.event.deltaMode?120:1)},"wheel"):"onmousewheel"in x?(or=function(){return u.event.wheelDelta},"mousewheel"):(or=function(){return-u.event.detail},"MozMousePixelScroll"));function un(va){va.on(Ct,ei).on(dr+".zoom",bo).on("dblclick.zoom",Ni).on(_r,bi)}un.event=function(va){va.each(function(){var si=cn.of(this,arguments),Za=he;Xa?u.select(this).transition().each("start.zoom",function(){he=this.__chart__||{x:0,y:0,k:1},ca(si)}).tween("zoom:zoom",function(){var Ci=Ne[0],fi=Ne[1],vo=Le?Le[0]:Ci/2,no=Le?Le[1]:fi/2,So=u.interpolateZoom([(vo-he.x)/he.k,(no-he.y)/he.k,Ci/he.k],[(vo-Za.x)/Za.k,(no-Za.y)/Za.k,Ci/Za.k]);return function(ss){var es=So(ss),ls=Ci/es[2];this.__chart__=he={x:vo-es[0]*ls,y:no-es[1]*ls,k:ls},Ga(si)}}).each("interrupt.zoom",function(){za(si)}).each("end.zoom",function(){za(si)}):(this.__chart__=he,ca(si),Ga(si),za(si))})},un.translate=function(va){return arguments.length?(he={x:+va[0],y:+va[1],k:he.k},La(),un):[he.x,he.y]},un.scale=function(va){return arguments.length?(he={x:he.x,y:he.y,k:null},aa(+va),La(),un):he.k},un.scaleExtent=function(va){return arguments.length?(Ke=va==null?vr:[+va[0],+va[1]],un):Ke},un.center=function(va){return arguments.length?(Be=va&&[+va[0],+va[1]],un):Be},un.size=function(va){return arguments.length?(Ne=va&&[+va[0],+va[1]],un):Ne},un.duration=function(va){return arguments.length?(yt=+va,un):yt},un.x=function(va){return arguments.length?(Ur=va,Mr=va.copy(),he={x:0,y:0,k:1},un):Ur},un.y=function(va){return arguments.length?(sn=va,Yr=va.copy(),he={x:0,y:0,k:1},un):sn};function Zr(va){return[(va[0]-he.x)/he.k,(va[1]-he.y)/he.k]}function Wn(va){return[va[0]*he.k+he.x,va[1]*he.k+he.y]}function aa(va){he.k=Math.max(Ke[0],Math.min(Ke[1],va))}function Aa(va,si){si=Wn(si),he.x+=va[0]-si[0],he.y+=va[1]-si[1]}function sa(va,si,Za,Ci){va.__chart__={x:he.x,y:he.y,k:he.k},aa(Math.pow(2,Ci)),Aa(Le=si,Za),va=u.select(va),yt>0&&(va=va.transition().duration(yt)),va.call(un.event)}function La(){Ur&&Ur.domain(Mr.range().map(function(va){return(va-he.x)/he.k}).map(Mr.invert)),sn&&sn.domain(Yr.range().map(function(va){return(va-he.y)/he.k}).map(Yr.invert))}function ca(va){vt++||va({type:"zoomstart"})}function Ga(va){La(),va({type:"zoom",scale:he.k,translate:[he.x,he.y]})}function za(va){--vt||(va({type:"zoomend"}),Le=null)}function ei(){var va=this,si=cn.of(va,arguments),Za=0,Ci=u.select(i(va)).on(Ut,no).on(Yt,So),fi=Zr(u.mouse(va)),vo=Bt(va);Pn.call(va),ca(si);function no(){Za=1,Aa(u.mouse(va),fi),Ga(si)}function So(){Ci.on(Ut,null).on(Yt,null),vo(Za),za(si)}}function bi(){var va=this,si=cn.of(va,arguments),Za={},Ci=0,fi,vo=".zoom-"+u.event.changedTouches[0].identifier,no="touchmove"+vo,So="touchend"+vo,ss=[],es=u.select(va),ls=Bt(va);Hi(),ca(si),es.on(Ct,null).on(_r,Hi);function Zi(){var Lo=u.touches(va);return fi=he.k,Lo.forEach(function(so){so.identifier in Za&&(Za[so.identifier]=Zr(so))}),Lo}function Hi(){var Lo=u.event.target;u.select(Lo).on(no,Na).on(So,Ka),ss.push(Lo);for(var so=u.event.changedTouches,Xo=0,Qi=so.length;Xo<Qi;++Xo)Za[so[Xo].identifier]=null;var us=Zi(),Vs=Date.now();if(us.length===1){if(Vs-Qr<500){var Nu=us[0];sa(va,Nu,Za[Nu.identifier],Math.floor(Math.log(he.k)/Math.LN2)+1),q()}Qr=Vs}else if(us.length>1){var Nu=us[0],$i=us[1],Rc=Nu[0]-$i[0],gu=Nu[1]-$i[1];Ci=Rc*Rc+gu*gu}}function Na(){var Lo=u.touches(va),so,Xo,Qi,us;Pn.call(va);for(var Vs=0,Nu=Lo.length;Vs<Nu;++Vs,us=null)if(Qi=Lo[Vs],us=Za[Qi.identifier]){if(Xo)break;so=Qi,Xo=us}if(us){var $i=($i=Qi[0]-so[0])*$i+($i=Qi[1]-so[1])*$i,Rc=Ci&&Math.sqrt($i/Ci);so=[(so[0]+Qi[0])/2,(so[1]+Qi[1])/2],Xo=[(Xo[0]+us[0])/2,(Xo[1]+us[1])/2],aa(Rc*fi)}Qr=null,Aa(so,Xo),Ga(si)}function Ka(){if(u.event.touches.length){for(var Lo=u.event.changedTouches,so=0,Xo=Lo.length;so<Xo;++so)delete Za[Lo[so].identifier];for(var Qi in Za)return void Zi()}u.selectAll(ss).on(vo,null),es.on(Ct,ei).on(_r,bi),ls(),za(si)}}function bo(){var va=cn.of(this,arguments);Xt?clearTimeout(Xt):(Pn.call(this),Te=Zr(Le=Be||u.mouse(this)),ca(va)),Xt=setTimeout(function(){Xt=null,za(va)},50),q(),aa(Math.pow(2,or()*.002)*he.k),Aa(Le,Te),Ga(va)}function Ni(){var va=u.mouse(this),si=Math.log(he.k)/Math.LN2;sa(this,va,Zr(va),u.event.shiftKey?Math.ceil(si)-1:Math.floor(si)+1)}return u.rebind(un,cn,"on")};var vr=[0,1/0],or,dr;u.color=Lr;function Lr(){}Lr.prototype.toString=function(){return this.rgb()+""},u.hsl=kr;function kr(he,Te,Le){return this instanceof kr?(this.h=+he,this.s=+Te,void(this.l=+Le)):arguments.length<2?he instanceof kr?new kr(he.h,he.s,he.l):mn(""+he,Gr,kr):new kr(he,Te,Le)}var tr=kr.prototype=new Lr;tr.brighter=function(he){return he=Math.pow(.7,arguments.length?he:1),new kr(this.h,this.s,this.l/he)},tr.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new kr(this.h,this.s,he*this.l)},tr.rgb=function(){return Or(this.h,this.s,this.l)};function Or(he,Te,Le){var Be,Ne;he=isNaN(he)?0:(he%=360)<0?he+360:he,Te=isNaN(Te)||Te<0?0:Te>1?1:Te,Le=Le<0?0:Le>1?1:Le,Ne=Le<=.5?Le*(1+Te):Le+Te-Le*Te,Be=2*Le-Ne;function Ke(vt){return vt>360?vt-=360:vt<0&&(vt+=360),vt<60?Be+(Ne-Be)*vt/60:vt<180?Ne:vt<240?Be+(Ne-Be)*(240-vt)/60:Be}function yt(vt){return Math.round(Ke(vt)*255)}return new mr(yt(he+120),yt(he),yt(he-120))}u.hcl=et;function et(he,Te,Le){return this instanceof et?(this.h=+he,this.c=+Te,void(this.l=+Le)):arguments.length<2?he instanceof et?new et(he.h,he.c,he.l):he instanceof De?Wt(he.l,he.a,he.b):Wt((he=Ar((he=u.rgb(he)).r,he.g,he.b)).l,he.a,he.b):new et(he,Te,Le)}var we=et.prototype=new Lr;we.brighter=function(he){return new et(this.h,this.c,Math.min(100,this.l+je*(arguments.length?he:1)))},we.darker=function(he){return new et(this.h,this.c,Math.max(0,this.l-je*(arguments.length?he:1)))},we.rgb=function(){return Se(this.h,this.c,this.l).rgb()};function Se(he,Te,Le){return isNaN(he)&&(he=0),isNaN(Te)&&(Te=0),new De(Le,Math.cos(he*=Pt)*Te,Math.sin(he)*Te)}u.lab=De;function De(he,Te,Le){return this instanceof De?(this.l=+he,this.a=+Te,void(this.b=+Le)):arguments.length<2?he instanceof De?new De(he.l,he.a,he.b):he instanceof et?Se(he.h,he.c,he.l):Ar((he=mr(he)).r,he.g,he.b):new De(he,Te,Le)}var je=18,$e=.95047,ot=1,st=1.08883,pt=De.prototype=new Lr;pt.brighter=function(he){return new De(Math.min(100,this.l+je*(arguments.length?he:1)),this.a,this.b)},pt.darker=function(he){return new De(Math.max(0,this.l-je*(arguments.length?he:1)),this.a,this.b)},pt.rgb=function(){return wt(this.l,this.a,this.b)};function wt(he,Te,Le){var Be=(he+16)/116,Ne=Be+Te/500,Ke=Be-Le/200;return Ne=yr(Ne)*$e,Be=yr(Be)*ot,Ke=yr(Ke)*st,new mr(Tr(3.2404542*Ne-1.5371385*Be-.4985314*Ke),Tr(-.969266*Ne+1.8760108*Be+.041556*Ke),Tr(.0556434*Ne-.2040259*Be+1.0572252*Ke))}function Wt(he,Te,Le){return he>0?new et(Math.atan2(Le,Te)*St,Math.sqrt(Te*Te+Le*Le),he):new et(NaN,NaN,he)}function yr(he){return he>.206893034?he*he*he:(he-4/29)/7.787037}function xr(he){return he>.008856?Math.pow(he,1/3):7.787037*he+4/29}function Tr(he){return Math.round(255*(he<=.00304?12.92*he:1.055*Math.pow(he,1/2.4)-.055))}u.rgb=mr;function mr(he,Te,Le){return this instanceof mr?(this.r=~~he,this.g=~~Te,void(this.b=~~Le)):arguments.length<2?he instanceof mr?new mr(he.r,he.g,he.b):mn(""+he,mr,Or):new mr(he,Te,Le)}function Rr(he){return new mr(he>>16,he>>8&255,he&255)}function tn(he){return Rr(he)+""}var wr=mr.prototype=new Lr;wr.brighter=function(he){he=Math.pow(.7,arguments.length?he:1);var Te=this.r,Le=this.g,Be=this.b,Ne=30;return!Te&&!Le&&!Be?new mr(Ne,Ne,Ne):(Te&&Te<Ne&&(Te=Ne),Le&&Le<Ne&&(Le=Ne),Be&&Be<Ne&&(Be=Ne),new mr(Math.min(255,Te/he),Math.min(255,Le/he),Math.min(255,Be/he)))},wr.darker=function(he){return he=Math.pow(.7,arguments.length?he:1),new mr(he*this.r,he*this.g,he*this.b)},wr.hsl=function(){return Gr(this.r,this.g,this.b)},wr.toString=function(){return"#"+gr(this.r)+gr(this.g)+gr(this.b)};function gr(he){return he<16?"0"+Math.max(0,he).toString(16):Math.min(255,he).toString(16)}function mn(he,Te,Le){var Be=0,Ne=0,Ke=0,yt,vt,Ct;if(yt=/([a-z]+)\((.*)\)/.exec(he=he.toLowerCase()),yt)switch(vt=yt[2].split(","),yt[1]){case"hsl":return Le(parseFloat(vt[0]),parseFloat(vt[1])/100,parseFloat(vt[2])/100);case"rgb":return Te(fn(vt[0]),fn(vt[1]),fn(vt[2]))}return(Ct=jr.get(he))?Te(Ct.r,Ct.g,Ct.b):(he!=null&&he.charAt(0)==="#"&&!isNaN(Ct=parseInt(he.slice(1),16))&&(he.length===4?(Be=(Ct&3840)>>4,Be=Be>>4|Be,Ne=Ct&240,Ne=Ne>>4|Ne,Ke=Ct&15,Ke=Ke<<4|Ke):he.length===7&&(Be=(Ct&16711680)>>16,Ne=(Ct&65280)>>8,Ke=Ct&255)),Te(Be,Ne,Ke))}function Gr(he,Te,Le){var Be=Math.min(he/=255,Te/=255,Le/=255),Ne=Math.max(he,Te,Le),Ke=Ne-Be,yt,vt,Ct=(Ne+Be)/2;return Ke?(vt=Ct<.5?Ke/(Ne+Be):Ke/(2-Ne-Be),he==Ne?yt=(Te-Le)/Ke+(Te<Le?6:0):Te==Ne?yt=(Le-he)/Ke+2:yt=(he-Te)/Ke+4,yt*=60):(yt=NaN,vt=Ct>0&&Ct<1?0:yt),new kr(yt,vt,Ct)}function Ar(he,Te,Le){he=nn(he),Te=nn(Te),Le=nn(Le);var Be=xr((.4124564*he+.3575761*Te+.1804375*Le)/$e),Ne=xr((.2126729*he+.7151522*Te+.072175*Le)/ot),Ke=xr((.0193339*he+.119192*Te+.9503041*Le)/st);return De(116*Ne-16,500*(Be-Ne),200*(Ne-Ke))}function nn(he){return(he/=255)<=.04045?he/12.92:Math.pow((he+.055)/1.055,2.4)}function fn(he){var Te=parseFloat(he);return he.charAt(he.length-1)==="%"?Math.round(Te*2.55):Te}var jr=u.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});jr.forEach(function(he,Te){jr.set(he,Rr(Te))});function at(he){return typeof he=="function"?he:function(){return he}}u.functor=at,u.xhr=Ft(I);function Ft(he){return function(Te,Le,Be){return arguments.length===2&&typeof Le=="function"&&(Be=Le,Le=null),er(Te,Le,he,Be)}}function er(he,Te,Le,Be){var Ne={},Ke=u.dispatch("beforesend","progress","load","error"),yt={},vt=new XMLHttpRequest,Ct=null;self.XDomainRequest&&!("withCredentials"in vt)&&/^(http(s)?:)?\/\//.test(he)&&(vt=new XDomainRequest),"onload"in vt?vt.onload=vt.onerror=Ut:vt.onreadystatechange=function(){vt.readyState>3&&Ut()};function Ut(){var Yt=vt.status,Xt;if(!Yt&&Wr(vt)||Yt>=200&&Yt<300||Yt===304){try{Xt=Le.call(Ne,vt)}catch(_r){Ke.error.call(Ne,_r);return}Ke.load.call(Ne,Xt)}else Ke.error.call(Ne,vt)}return vt.onprogress=function(Yt){var Xt=u.event;u.event=Yt;try{Ke.progress.call(Ne,vt)}finally{u.event=Xt}},Ne.header=function(Yt,Xt){return Yt=(Yt+"").toLowerCase(),arguments.length<2?yt[Yt]:(Xt==null?delete yt[Yt]:yt[Yt]=Xt+"",Ne)},Ne.mimeType=function(Yt){return arguments.length?(Te=Yt==null?null:Yt+"",Ne):Te},Ne.responseType=function(Yt){return arguments.length?(Ct=Yt,Ne):Ct},Ne.response=function(Yt){return Le=Yt,Ne},["get","post"].forEach(function(Yt){Ne[Yt]=function(){return Ne.send.apply(Ne,[Yt].concat(m(arguments)))}}),Ne.send=function(Yt,Xt,_r){if(arguments.length===2&&typeof Xt=="function"&&(_r=Xt,Xt=null),vt.open(Yt,he,!0),Te!=null&&!("accept"in yt)&&(yt.accept=Te+",*/*"),vt.setRequestHeader)for(var Qr in yt)vt.setRequestHeader(Qr,yt[Qr]);return Te!=null&&vt.overrideMimeType&&vt.overrideMimeType(Te),Ct!=null&&(vt.responseType=Ct),_r!=null&&Ne.on("error",_r).on("load",function(cn){_r(null,cn)}),Ke.beforesend.call(Ne,vt),vt.send(Xt==null?null:Xt),Ne},Ne.abort=function(){return vt.abort(),Ne},u.rebind(Ne,Ke,"on"),Be==null?Ne:Ne.get(hr(Be))}function hr(he){return he.length===1?function(Te,Le){he(Te==null?Le:null)}:he}function Wr(he){var Te=he.responseType;return Te&&Te!=="text"?he.response:he.responseText}u.dsv=function(he,Te){var Le=new RegExp('["'+he+`
]`),Be=he.charCodeAt(0);function Ne(Ut,Yt,Xt){arguments.length<3&&(Xt=Yt,Yt=null);var _r=er(Ut,Te,Yt==null?Ke:yt(Yt),Xt);return _r.row=function(Qr){return arguments.length?_r.response((Yt=Qr)==null?Ke:yt(Qr)):Yt},_r}function Ke(Ut){return Ne.parse(Ut.responseText)}function yt(Ut){return function(Yt){return Ne.parse(Yt.responseText,Ut)}}Ne.parse=function(Ut,Yt){var Xt;return Ne.parseRows(Ut,function(_r,Qr){if(Xt)return Xt(_r,Qr-1);var cn=function(Mr){for(var Ur={},Yr=_r.length,sn=0;sn<Yr;++sn)Ur[_r[sn]]=Mr[sn];return Ur};Xt=Yt?function(Mr,Ur){return Yt(cn(Mr),Ur)}:cn})},Ne.parseRows=function(Ut,Yt){var Xt={},_r={},Qr=[],cn=Ut.length,Mr=0,Ur=0,Yr,sn;function un(){if(Mr>=cn)return _r;if(sn)return sn=!1,Xt;var Wn=Mr;if(Ut.charCodeAt(Wn)===34){for(var aa=Wn;aa++<cn;)if(Ut.charCodeAt(aa)===34){if(Ut.charCodeAt(aa+1)!==34)break;++aa}Mr=aa+2;var Aa=Ut.charCodeAt(aa+1);return Aa===13?(sn=!0,Ut.charCodeAt(aa+2)===10&&++Mr):Aa===10&&(sn=!0),Ut.slice(Wn+1,aa).replace(/""/g,'"')}for(;Mr<cn;){var Aa=Ut.charCodeAt(Mr++),sa=1;if(Aa===10)sn=!0;else if(Aa===13)sn=!0,Ut.charCodeAt(Mr)===10&&(++Mr,++sa);else if(Aa!==Be)continue;return Ut.slice(Wn,Mr-sa)}return Ut.slice(Wn)}for(;(Yr=un())!==_r;){for(var Zr=[];Yr!==Xt&&Yr!==_r;)Zr.push(Yr),Yr=un();Yt&&(Zr=Yt(Zr,Ur++))==null||Qr.push(Zr)}return Qr},Ne.format=function(Ut){if(Array.isArray(Ut[0]))return Ne.formatRows(Ut);var Yt=new F,Xt=[];return Ut.forEach(function(_r){for(var Qr in _r)Yt.has(Qr)||Xt.push(Yt.add(Qr))}),[Xt.map(Ct).join(he)].concat(Ut.map(function(_r){return Xt.map(function(Qr){return Ct(_r[Qr])}).join(he)})).join(`
`)},Ne.formatRows=function(Ut){return Ut.map(vt).join(`
`)};function vt(Ut){return Ut.map(Ct).join(he)}function Ct(Ut){return Le.test(Ut)?'"'+Ut.replace(/\"/g,'""')+'"':Ut}return Ne},u.csv=u.dsv(",","text/csv"),u.tsv=u.dsv("	","text/tab-separated-values");var zr,Pr,br,Xr,Fn=this[U(this,"requestAnimationFrame")]||function(he){setTimeout(he,17)};u.timer=function(){kn.apply(this,arguments)};function kn(he,Te,Le){var Be=arguments.length;Be<2&&(Te=0),Be<3&&(Le=Date.now());var Ne=Le+Te,Ke={c:he,t:Ne,n:null};return Pr?Pr.n=Ke:zr=Ke,Pr=Ke,br||(Xr=clearTimeout(Xr),br=1,Fn(ra)),Ke}function ra(){var he=oa(),Te=Sa()-he;Te>24?(isFinite(Te)&&(clearTimeout(Xr),Xr=setTimeout(ra,Te)),br=0):(br=1,Fn(ra))}u.timer.flush=function(){oa(),Sa()};function oa(){for(var he=Date.now(),Te=zr;Te;)he>=Te.t&&Te.c(he-Te.t)&&(Te.c=null),Te=Te.n;return he}function Sa(){for(var he,Te=zr,Le=1/0;Te;)Te.c?(Te.t<Le&&(Le=Te.t),Te=(he=Te).n):Te=he?he.n=Te.n:zr=Te.n;return Pr=he,Le}u.round=function(he,Te){return Te?Math.round(he*(Te=Math.pow(10,Te)))/Te:Math.round(he)},u.geom={};function ya(he){return he[0]}function pr(he){return he[1]}u.geom.hull=function(he){var Te=ya,Le=pr;if(arguments.length)return Be(he);function Be(Ne){if(Ne.length<3)return[];var Ke=at(Te),yt=at(Le),vt,Ct=Ne.length,Ut=[],Yt=[];for(vt=0;vt<Ct;vt++)Ut.push([+Ke.call(this,Ne[vt],vt),+yt.call(this,Ne[vt],vt),vt]);for(Ut.sort($r),vt=0;vt<Ct;vt++)Yt.push([Ut[vt][0],-Ut[vt][1]]);var Xt=vn(Ut),_r=vn(Yt),Qr=_r[0]===Xt[0],cn=_r[_r.length-1]===Xt[Xt.length-1],Mr=[];for(vt=Xt.length-1;vt>=0;--vt)Mr.push(Ne[Ut[Xt[vt]][2]]);for(vt=+Qr;vt<_r.length-cn;++vt)Mr.push(Ne[Ut[_r[vt]][2]]);return Mr}return Be.x=function(Ne){return arguments.length?(Te=Ne,Be):Te},Be.y=function(Ne){return arguments.length?(Le=Ne,Be):Le},Be};function vn(he){for(var Te=he.length,Le=[0,1],Be=2,Ne=2;Ne<Te;Ne++){for(;Be>1&&Nt(he[Le[Be-2]],he[Le[Be-1]],he[Ne])<=0;)--Be;Le[Be++]=Ne}return Le.slice(0,Be)}function $r(he,Te){return he[0]-Te[0]||he[1]-Te[1]}u.geom.polygon=function(he){return fe(he,On),he};var On=u.geom.polygon.prototype=[];On.area=function(){for(var he=-1,Te=this.length,Le,Be=this[Te-1],Ne=0;++he<Te;)Le=Be,Be=this[he],Ne+=Le[1]*Be[0]-Le[0]*Be[1];return Ne*.5},On.centroid=function(he){var Te=-1,Le=this.length,Be=0,Ne=0,Ke,yt=this[Le-1],vt;for(arguments.length||(he=-1/(6*this.area()));++Te<Le;)Ke=yt,yt=this[Te],vt=Ke[0]*yt[1]-yt[0]*Ke[1],Be+=(Ke[0]+yt[0])*vt,Ne+=(Ke[1]+yt[1])*vt;return[Be*he,Ne*he]},On.clip=function(he){for(var Te,Le=na(he),Be=-1,Ne=this.length-na(this),Ke,yt,vt=this[Ne-1],Ct,Ut,Yt;++Be<Ne;){for(Te=he.slice(),he.length=0,Ct=this[Be],Ut=Te[(yt=Te.length-Le)-1],Ke=-1;++Ke<yt;)Yt=Te[Ke],Bn(Yt,vt,Ct)?(Bn(Ut,vt,Ct)||he.push(ha(Ut,Yt,vt,Ct)),he.push(Yt)):Bn(Ut,vt,Ct)&&he.push(ha(Ut,Yt,vt,Ct)),Ut=Yt;Le&&he.push(he[0]),vt=Ct}return he};function Bn(he,Te,Le){return(Le[0]-Te[0])*(he[1]-Te[1])<(Le[1]-Te[1])*(he[0]-Te[0])}function ha(he,Te,Le,Be){var Ne=he[0],Ke=Le[0],yt=Te[0]-Ne,vt=Be[0]-Ke,Ct=he[1],Ut=Le[1],Yt=Te[1]-Ct,Xt=Be[1]-Ut,_r=(vt*(Ct-Ut)-Xt*(Ne-Ke))/(Xt*yt-vt*Yt);return[Ne+_r*yt,Ct+_r*Yt]}function na(he){var Te=he[0],Le=he[he.length-1];return!(Te[0]-Le[0]||Te[1]-Le[1])}var Vn,fa,ga,ur=[],Dr,on,rn=[];function gn(){io(this),this.edge=this.site=this.circle=null}function wn(he){var Te=ur.pop()||new gn;return Te.site=he,Te}function pn(he){yn(he),ga.remove(he),ur.push(he),io(he)}function cr(he){var Te=he.circle,Le=Te.x,Be=Te.cy,Ne={x:Le,y:Be},Ke=he.P,yt=he.N,vt=[he];pn(he);for(var Ct=Ke;Ct.circle&&g(Le-Ct.circle.x)<ht&&g(Be-Ct.circle.cy)<ht;)Ke=Ct.P,vt.unshift(Ct),pn(Ct),Ct=Ke;vt.unshift(Ct),yn(Ct);for(var Ut=yt;Ut.circle&&g(Le-Ut.circle.x)<ht&&g(Be-Ut.circle.cy)<ht;)yt=Ut.N,vt.push(Ut),pn(Ut),Ut=yt;vt.push(Ut),yn(Ut);var Yt=vt.length,Xt;for(Xt=1;Xt<Yt;++Xt)Ut=vt[Xt],Ct=vt[Xt-1],Qo(Ut.edge,Ct.site,Ut.site,Ne);Ct=vt[0],Ut=vt[Yt-1],Ut.edge=Ca(Ct.site,Ut.site,null,Ne),Un(Ct),Un(Ut)}function ar(he){for(var Te=he.x,Le=he.y,Be,Ne,Ke,yt,vt=ga._;vt;)if(Ke=Fr(vt,Le)-Te,Ke>ht)vt=vt.L;else if(yt=Te-Jr(vt,Le),yt>ht){if(!vt.R){Be=vt;break}vt=vt.R}else{Ke>-ht?(Be=vt.P,Ne=vt):yt>-ht?(Be=vt,Ne=vt.N):Be=Ne=vt;break}var Ct=wn(he);if(ga.insert(Be,Ct),!(!Be&&!Ne)){if(Be===Ne){yn(Be),Ne=wn(Be.site),ga.insert(Ct,Ne),Ct.edge=Ne.edge=Ca(Be.site,Ct.site),Un(Be),Un(Ne);return}if(!Ne){Ct.edge=Ca(Be.site,Ct.site);return}yn(Be),yn(Ne);var Ut=Be.site,Yt=Ut.x,Xt=Ut.y,_r=he.x-Yt,Qr=he.y-Xt,cn=Ne.site,Mr=cn.x-Yt,Ur=cn.y-Xt,Yr=2*(_r*Ur-Qr*Mr),sn=_r*_r+Qr*Qr,un=Mr*Mr+Ur*Ur,Zr={x:(Ur*sn-Qr*un)/Yr+Yt,y:(_r*un-Mr*sn)/Yr+Xt};Qo(Ne.edge,Ut,cn,Zr),Ct.edge=Ca(Ut,he,null,Zr),Ne.edge=Ca(he,cn,null,Zr),Un(Be),Un(Ne)}}function Fr(he,Te){var Le=he.site,Be=Le.x,Ne=Le.y,Ke=Ne-Te;if(!Ke)return Be;var yt=he.P;if(!yt)return-1/0;Le=yt.site;var vt=Le.x,Ct=Le.y,Ut=Ct-Te;if(!Ut)return vt;var Yt=vt-Be,Xt=1/Ke-1/Ut,_r=Yt/Ut;return Xt?(-_r+Math.sqrt(_r*_r-2*Xt*(Yt*Yt/(-2*Ut)-Ct+Ut/2+Ne-Ke/2)))/Xt+Be:(Be+vt)/2}function Jr(he,Te){var Le=he.N;if(Le)return Fr(Le,Te);var Be=he.site;return Be.y===Te?Be.x:1/0}function En(he){this.site=he,this.edges=[]}En.prototype.prepare=function(){for(var he=this.edges,Te=he.length,Le;Te--;)Le=he[Te].edge,(!Le.b||!Le.a)&&he.splice(Te,1);return he.sort(Jn),he.length};function Hn(he){for(var Te=he[0][0],Le=he[1][0],Be=he[0][1],Ne=he[1][1],Ke,yt,vt,Ct,Ut=fa,Yt=Ut.length,Xt,_r,Qr,cn,Mr,Ur;Yt--;)if(Xt=Ut[Yt],!(!Xt||!Xt.prepare()))for(Qr=Xt.edges,cn=Qr.length,_r=0;_r<cn;)Ur=Qr[_r].end(),vt=Ur.x,Ct=Ur.y,Mr=Qr[++_r%cn].start(),Ke=Mr.x,yt=Mr.y,(g(vt-Ke)>ht||g(Ct-yt)>ht)&&(Qr.splice(_r,0,new vs(wl(Xt.site,Ur,g(vt-Te)<ht&&Ne-Ct>ht?{x:Te,y:g(Ke-Te)<ht?yt:Ne}:g(Ct-Ne)<ht&&Le-vt>ht?{x:g(yt-Ne)<ht?Ke:Le,y:Ne}:g(vt-Le)<ht&&Ct-Be>ht?{x:Le,y:g(Ke-Le)<ht?yt:Be}:g(Ct-Be)<ht&&vt-Te>ht?{x:g(yt-Be)<ht?Ke:Te,y:Be}:null),Xt.site,null)),++cn)}function Jn(he,Te){return Te.angle-he.angle}function Zn(){io(this),this.x=this.y=this.arc=this.site=this.cy=null}function Un(he){var Te=he.P,Le=he.N;if(!(!Te||!Le)){var Be=Te.site,Ne=he.site,Ke=Le.site;if(Be!==Ke){var yt=Ne.x,vt=Ne.y,Ct=Be.x-yt,Ut=Be.y-vt,Yt=Ke.x-yt,Xt=Ke.y-vt,_r=2*(Ct*Xt-Ut*Yt);if(!(_r>=-Qe)){var Qr=Ct*Ct+Ut*Ut,cn=Yt*Yt+Xt*Xt,Mr=(Xt*Qr-Ut*cn)/_r,Ur=(Ct*cn-Yt*Qr)/_r,Xt=Ur+vt,Yr=rn.pop()||new Zn;Yr.arc=he,Yr.site=Ne,Yr.x=Mr+yt,Yr.y=Xt+Math.sqrt(Mr*Mr+Ur*Ur),Yr.cy=Xt,he.circle=Yr;for(var sn=null,un=on._;un;)if(Yr.y<un.y||Yr.y===un.y&&Yr.x<=un.x)if(un.L)un=un.L;else{sn=un.P;break}else if(un.R)un=un.R;else{sn=un;break}on.insert(sn,Yr),sn||(Dr=Yr)}}}}function yn(he){var Te=he.circle;Te&&(Te.P||(Dr=Te.N),on.remove(Te),rn.push(Te),io(Te),he.circle=null)}function Dn(he,Te,Le,Be){return function(Ne){var Ke=Ne.a,yt=Ne.b,vt=Ke.x,Ct=Ke.y,Ut=yt.x,Yt=yt.y,Xt=0,_r=1,Qr=Ut-vt,cn=Yt-Ct,Mr;if(Mr=he-vt,!(!Qr&&Mr>0)){if(Mr/=Qr,Qr<0){if(Mr<Xt)return;Mr<_r&&(_r=Mr)}else if(Qr>0){if(Mr>_r)return;Mr>Xt&&(Xt=Mr)}if(Mr=Le-vt,!(!Qr&&Mr<0)){if(Mr/=Qr,Qr<0){if(Mr>_r)return;Mr>Xt&&(Xt=Mr)}else if(Qr>0){if(Mr<Xt)return;Mr<_r&&(_r=Mr)}if(Mr=Te-Ct,!(!cn&&Mr>0)){if(Mr/=cn,cn<0){if(Mr<Xt)return;Mr<_r&&(_r=Mr)}else if(cn>0){if(Mr>_r)return;Mr>Xt&&(Xt=Mr)}if(Mr=Be-Ct,!(!cn&&Mr<0)){if(Mr/=cn,cn<0){if(Mr>_r)return;Mr>Xt&&(Xt=Mr)}else if(cn>0){if(Mr<Xt)return;Mr<_r&&(_r=Mr)}return Xt>0&&(Ne.a={x:vt+Xt*Qr,y:Ct+Xt*cn}),_r<1&&(Ne.b={x:vt+_r*Qr,y:Ct+_r*cn}),Ne}}}}}}function Yn(he){for(var Te=Vn,Le=Dn(he[0][0],he[0][1],he[1][0],he[1][1]),Be=Te.length,Ne;Be--;)Ne=Te[Be],(!ua(Ne,he)||!Le(Ne)||g(Ne.a.x-Ne.b.x)<ht&&g(Ne.a.y-Ne.b.y)<ht)&&(Ne.a=Ne.b=null,Te.splice(Be,1))}function ua(he,Te){var Le=he.b;if(Le)return!0;var Be=he.a,Ne=Te[0][0],Ke=Te[1][0],yt=Te[0][1],vt=Te[1][1],Ct=he.l,Ut=he.r,Yt=Ct.x,Xt=Ct.y,_r=Ut.x,Qr=Ut.y,cn=(Yt+_r)/2,Mr=(Xt+Qr)/2,Ur,Yr;if(Qr===Xt){if(cn<Ne||cn>=Ke)return;if(Yt>_r){if(!Be)Be={x:cn,y:yt};else if(Be.y>=vt)return;Le={x:cn,y:vt}}else{if(!Be)Be={x:cn,y:vt};else if(Be.y<yt)return;Le={x:cn,y:yt}}}else if(Ur=(Yt-_r)/(Qr-Xt),Yr=Mr-Ur*cn,Ur<-1||Ur>1)if(Yt>_r){if(!Be)Be={x:(yt-Yr)/Ur,y:yt};else if(Be.y>=vt)return;Le={x:(vt-Yr)/Ur,y:vt}}else{if(!Be)Be={x:(vt-Yr)/Ur,y:vt};else if(Be.y<yt)return;Le={x:(yt-Yr)/Ur,y:yt}}else if(Xt<Qr){if(!Be)Be={x:Ne,y:Ur*Ne+Yr};else if(Be.x>=Ke)return;Le={x:Ke,y:Ur*Ke+Yr}}else{if(!Be)Be={x:Ke,y:Ur*Ke+Yr};else if(Be.x<Ne)return;Le={x:Ne,y:Ur*Ne+Yr}}return he.a=Be,he.b=Le,!0}function Ya(he,Te){this.l=he,this.r=Te,this.a=this.b=null}function Ca(he,Te,Le,Be){var Ne=new Ya(he,Te);return Vn.push(Ne),Le&&Qo(Ne,he,Te,Le),Be&&Qo(Ne,Te,he,Be),fa[he.i].edges.push(new vs(Ne,he,Te)),fa[Te.i].edges.push(new vs(Ne,Te,he)),Ne}function wl(he,Te,Le){var Be=new Ya(he,null);return Be.a=Te,Be.b=Le,Vn.push(Be),Be}function Qo(he,Te,Le,Be){!he.a&&!he.b?(he.a=Be,he.l=Te,he.r=Le):he.l===Le?he.b=Be:he.a=Be}function vs(he,Te,Le){var Be=he.a,Ne=he.b;this.edge=he,this.site=Te,this.angle=Le?Math.atan2(Le.y-Te.y,Le.x-Te.x):he.l===Te?Math.atan2(Ne.x-Be.x,Be.y-Ne.y):Math.atan2(Be.x-Ne.x,Ne.y-Be.y)}vs.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}};function Ws(){this._=null}function io(he){he.U=he.C=he.L=he.R=he.P=he.N=null}Ws.prototype={insert:function(he,Te){var Le,Be,Ne;if(he){if(Te.P=he,Te.N=he.N,he.N&&(he.N.P=Te),he.N=Te,he.R){for(he=he.R;he.L;)he=he.L;he.L=Te}else he.R=Te;Le=he}else this._?(he=ol(this._),Te.P=null,Te.N=he,he.P=he.L=Te,Le=he):(Te.P=Te.N=null,this._=Te,Le=null);for(Te.L=Te.R=null,Te.U=Le,Te.C=!0,he=Te;Le&&Le.C;)Be=Le.U,Le===Be.L?(Ne=Be.R,Ne&&Ne.C?(Le.C=Ne.C=!1,Be.C=!0,he=Be):(he===Le.R&&(zi(this,Le),he=Le,Le=he.U),Le.C=!1,Be.C=!0,il(this,Be))):(Ne=Be.L,Ne&&Ne.C?(Le.C=Ne.C=!1,Be.C=!0,he=Be):(he===Le.L&&(il(this,Le),he=Le,Le=he.U),Le.C=!1,Be.C=!0,zi(this,Be))),Le=he.U;this._.C=!1},remove:function(he){he.N&&(he.N.P=he.P),he.P&&(he.P.N=he.N),he.N=he.P=null;var Te=he.U,Le,Be=he.L,Ne=he.R,Ke,yt;if(Be?Ne?Ke=ol(Ne):Ke=Be:Ke=Ne,Te?Te.L===he?Te.L=Ke:Te.R=Ke:this._=Ke,Be&&Ne?(yt=Ke.C,Ke.C=he.C,Ke.L=Be,Be.U=Ke,Ke!==Ne?(Te=Ke.U,Ke.U=he.U,he=Ke.R,Te.L=he,Ke.R=Ne,Ne.U=Ke):(Ke.U=Te,Te=Ke,he=Ke.R)):(yt=he.C,he=Ke),he&&(he.U=Te),!yt){if(he&&he.C){he.C=!1;return}do{if(he===this._)break;if(he===Te.L){if(Le=Te.R,Le.C&&(Le.C=!1,Te.C=!0,zi(this,Te),Le=Te.R),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.R||!Le.R.C)&&(Le.L.C=!1,Le.C=!0,il(this,Le),Le=Te.R),Le.C=Te.C,Te.C=Le.R.C=!1,zi(this,Te),he=this._;break}}else if(Le=Te.L,Le.C&&(Le.C=!1,Te.C=!0,il(this,Te),Le=Te.L),Le.L&&Le.L.C||Le.R&&Le.R.C){(!Le.L||!Le.L.C)&&(Le.R.C=!1,Le.C=!0,zi(this,Le),Le=Te.L),Le.C=Te.C,Te.C=Le.L.C=!1,il(this,Te),he=this._;break}Le.C=!0,he=Te,Te=Te.U}while(!he.C);he&&(he.C=!1)}}};function zi(he,Te){var Le=Te,Be=Te.R,Ne=Le.U;Ne?Ne.L===Le?Ne.L=Be:Ne.R=Be:he._=Be,Be.U=Ne,Le.U=Be,Le.R=Be.L,Le.R&&(Le.R.U=Le),Be.L=Le}function il(he,Te){var Le=Te,Be=Te.L,Ne=Le.U;Ne?Ne.L===Le?Ne.L=Be:Ne.R=Be:he._=Be,Be.U=Ne,Le.U=Be,Le.L=Be.R,Le.L&&(Le.L.U=Le),Be.R=Le}function ol(he){for(;he.L;)he=he.L;return he}function ps(he,Te){var Le=he.sort(Gl).pop(),Be,Ne,Ke;for(Vn=[],fa=new Array(he.length),ga=new Ws,on=new Ws;;)if(Ke=Dr,Le&&(!Ke||Le.y<Ke.y||Le.y===Ke.y&&Le.x<Ke.x))(Le.x!==Be||Le.y!==Ne)&&(fa[Le.i]=new En(Le),ar(Le),Be=Le.x,Ne=Le.y),Le=he.pop();else if(Ke)cr(Ke.arc);else break;Te&&(Yn(Te),Hn(Te));var yt={cells:fa,edges:Vn};return ga=on=Vn=fa=null,yt}function Gl(he,Te){return Te.y-he.y||Te.x-he.x}u.geom.voronoi=function(he){var Te=ya,Le=pr,Be=Te,Ne=Le,Ke=ou;if(he)return yt(he);function yt(Ct){var Ut=new Array(Ct.length),Yt=Ke[0][0],Xt=Ke[0][1],_r=Ke[1][0],Qr=Ke[1][1];return ps(vt(Ct),Ke).cells.forEach(function(cn,Mr){var Ur=cn.edges,Yr=cn.site,sn=Ut[Mr]=Ur.length?Ur.map(function(un){var Zr=un.start();return[Zr.x,Zr.y]}):Yr.x>=Yt&&Yr.x<=_r&&Yr.y>=Xt&&Yr.y<=Qr?[[Yt,Qr],[_r,Qr],[_r,Xt],[Yt,Xt]]:[];sn.point=Ct[Mr]}),Ut}function vt(Ct){return Ct.map(function(Ut,Yt){return{x:Math.round(Be(Ut,Yt)/ht)*ht,y:Math.round(Ne(Ut,Yt)/ht)*ht,i:Yt}})}return yt.links=function(Ct){return ps(vt(Ct)).edges.filter(function(Ut){return Ut.l&&Ut.r}).map(function(Ut){return{source:Ct[Ut.l.i],target:Ct[Ut.r.i]}})},yt.triangles=function(Ct){var Ut=[];return ps(vt(Ct)).cells.forEach(function(Yt,Xt){for(var _r=Yt.site,Qr=Yt.edges.sort(Jn),cn=-1,Mr=Qr.length,Ur,Yr=Qr[Mr-1].edge,sn=Yr.l===_r?Yr.r:Yr.l;++cn<Mr;)Ur=sn,Yr=Qr[cn].edge,sn=Yr.l===_r?Yr.r:Yr.l,Xt<Ur.i&&Xt<sn.i&&Xu(_r,Ur,sn)<0&&Ut.push([Ct[Xt],Ct[Ur.i],Ct[sn.i]])}),Ut},yt.x=function(Ct){return arguments.length?(Be=at(Te=Ct),yt):Te},yt.y=function(Ct){return arguments.length?(Ne=at(Le=Ct),yt):Le},yt.clipExtent=function(Ct){return arguments.length?(Ke=Ct==null?ou:Ct,yt):Ke===ou?null:Ke},yt.size=function(Ct){return arguments.length?yt.clipExtent(Ct&&[[0,0],Ct]):Ke===ou?null:Ke&&Ke[1]},yt};var ou=[[-1e6,-1e6],[1e6,1e6]];function Xu(he,Te,Le){return(he.x-Le.x)*(Te.y-he.y)-(he.x-Te.x)*(Le.y-he.y)}u.geom.delaunay=function(he){return u.geom.voronoi().triangles(he)},u.geom.quadtree=function(he,Te,Le,Be,Ne){var Ke=ya,yt=pr,vt;if(vt=arguments.length)return Ke=di,yt=Tl,vt===3&&(Ne=Le,Be=Te,Le=Te=0),Ct(he);function Ct(Ut){var Yt,Xt=at(Ke),_r=at(yt),Qr,cn,Mr,Ur,Yr,sn,un,Zr;if(Te!=null)Yr=Te,sn=Le,un=Be,Zr=Ne;else if(un=Zr=-(Yr=sn=1/0),Qr=[],cn=[],Ur=Ut.length,vt)for(Mr=0;Mr<Ur;++Mr)Yt=Ut[Mr],Yt.x<Yr&&(Yr=Yt.x),Yt.y<sn&&(sn=Yt.y),Yt.x>un&&(un=Yt.x),Yt.y>Zr&&(Zr=Yt.y),Qr.push(Yt.x),cn.push(Yt.y);else for(Mr=0;Mr<Ur;++Mr){var Wn=+Xt(Yt=Ut[Mr],Mr),aa=+_r(Yt,Mr);Wn<Yr&&(Yr=Wn),aa<sn&&(sn=aa),Wn>un&&(un=Wn),aa>Zr&&(Zr=aa),Qr.push(Wn),cn.push(aa)}var Aa=un-Yr,sa=Zr-sn;Aa>sa?Zr=sn+Aa:un=Yr+sa;function La(za,ei,bi,bo,Ni,va,si,Za){if(!(isNaN(bi)||isNaN(bo)))if(za.leaf){var Ci=za.x,fi=za.y;if(Ci!=null)if(g(Ci-bi)+g(fi-bo)<.01)ca(za,ei,bi,bo,Ni,va,si,Za);else{var vo=za.point;za.x=za.y=za.point=null,ca(za,vo,Ci,fi,Ni,va,si,Za),ca(za,ei,bi,bo,Ni,va,si,Za)}else za.x=bi,za.y=bo,za.point=ei}else ca(za,ei,bi,bo,Ni,va,si,Za)}function ca(za,ei,bi,bo,Ni,va,si,Za){var Ci=(Ni+si)*.5,fi=(va+Za)*.5,vo=bi>=Ci,no=bo>=fi,So=no<<1|vo;za.leaf=!1,za=za.nodes[So]||(za.nodes[So]=sl()),vo?Ni=Ci:si=Ci,no?va=fi:Za=fi,La(za,ei,bi,bo,Ni,va,si,Za)}var Ga=sl();if(Ga.add=function(za){La(Ga,za,+Xt(za,++Mr),+_r(za,Mr),Yr,sn,un,Zr)},Ga.visit=function(za){Yi(za,Ga,Yr,sn,un,Zr)},Ga.find=function(za){return Oo(Ga,za[0],za[1],Yr,sn,un,Zr)},Mr=-1,Te==null){for(;++Mr<Ur;)La(Ga,Ut[Mr],Qr[Mr],cn[Mr],Yr,sn,un,Zr);--Mr}else Ut.forEach(Ga.add);return Qr=cn=Ut=Yt=null,Ga}return Ct.x=function(Ut){return arguments.length?(Ke=Ut,Ct):Ke},Ct.y=function(Ut){return arguments.length?(yt=Ut,Ct):yt},Ct.extent=function(Ut){return arguments.length?(Ut==null?Te=Le=Be=Ne=null:(Te=+Ut[0][0],Le=+Ut[0][1],Be=+Ut[1][0],Ne=+Ut[1][1]),Ct):Te==null?null:[[Te,Le],[Be,Ne]]},Ct.size=function(Ut){return arguments.length?(Ut==null?Te=Le=Be=Ne=null:(Te=Le=0,Be=+Ut[0],Ne=+Ut[1]),Ct):Te==null?null:[Be-Te,Ne-Le]},Ct};function di(he){return he.x}function Tl(he){return he.y}function sl(){return{leaf:!0,nodes:[],point:null,x:null,y:null}}function Yi(he,Te,Le,Be,Ne,Ke){if(!he(Te,Le,Be,Ne,Ke)){var yt=(Le+Ne)*.5,vt=(Be+Ke)*.5,Ct=Te.nodes;Ct[0]&&Yi(he,Ct[0],Le,Be,yt,vt),Ct[1]&&Yi(he,Ct[1],yt,Be,Ne,vt),Ct[2]&&Yi(he,Ct[2],Le,vt,yt,Ke),Ct[3]&&Yi(he,Ct[3],yt,vt,Ne,Ke)}}function Oo(he,Te,Le,Be,Ne,Ke,yt){var vt=1/0,Ct;return function Ut(Yt,Xt,_r,Qr,cn){if(!(Xt>Ke||_r>yt||Qr<Be||cn<Ne)){if(Mr=Yt.point){var Mr,Ur=Te-Yt.x,Yr=Le-Yt.y,sn=Ur*Ur+Yr*Yr;if(sn<vt){var un=Math.sqrt(vt=sn);Be=Te-un,Ne=Le-un,Ke=Te+un,yt=Le+un,Ct=Mr}}for(var Zr=Yt.nodes,Wn=(Xt+Qr)*.5,aa=(_r+cn)*.5,Aa=Te>=Wn,sa=Le>=aa,La=sa<<1|Aa,ca=La+4;La<ca;++La)if(Yt=Zr[La&3])switch(La&3){case 0:Ut(Yt,Xt,_r,Wn,aa);break;case 1:Ut(Yt,Wn,_r,Qr,aa);break;case 2:Ut(Yt,Xt,aa,Wn,cn);break;case 3:Ut(Yt,Wn,aa,Qr,cn);break}}}(he,Be,Ne,Ke,yt),Ct}u.interpolateRgb=su;function su(he,Te){he=u.rgb(he),Te=u.rgb(Te);var Le=he.r,Be=he.g,Ne=he.b,Ke=Te.r-Le,yt=Te.g-Be,vt=Te.b-Ne;return function(Ct){return"#"+gr(Math.round(Le+Ke*Ct))+gr(Math.round(Be+yt*Ct))+gr(Math.round(Ne+vt*Ct))}}u.interpolateObject=zs;function zs(he,Te){var Le={},Be={},Ne;for(Ne in he)Ne in Te?Le[Ne]=co(he[Ne],Te[Ne]):Be[Ne]=he[Ne];for(Ne in Te)Ne in he||(Be[Ne]=Te[Ne]);return function(Ke){for(Ne in Le)Be[Ne]=Le[Ne](Ke);return Be}}u.interpolateNumber=Fi;function Fi(he,Te){return he=+he,Te=+Te,function(Le){return he*(1-Le)+Te*Le}}u.interpolateString=Wl;function Wl(he,Te){var Le=to.lastIndex=Ui.lastIndex=0,Be,Ne,Ke,yt=-1,vt=[],Ct=[];for(he=he+"",Te=Te+"";(Be=to.exec(he))&&(Ne=Ui.exec(Te));)(Ke=Ne.index)>Le&&(Ke=Te.slice(Le,Ke),vt[yt]?vt[yt]+=Ke:vt[++yt]=Ke),(Be=Be[0])===(Ne=Ne[0])?vt[yt]?vt[yt]+=Ne:vt[++yt]=Ne:(vt[++yt]=null,Ct.push({i:yt,x:Fi(Be,Ne)})),Le=Ui.lastIndex;return Le<Te.length&&(Ke=Te.slice(Le),vt[yt]?vt[yt]+=Ke:vt[++yt]=Ke),vt.length<2?Ct[0]?(Te=Ct[0].x,function(Ut){return Te(Ut)+""}):function(){return Te}:(Te=Ct.length,function(Ut){for(var Yt=0,Xt;Yt<Te;++Yt)vt[(Xt=Ct[Yt]).i]=Xt.x(Ut);return vt.join("")})}var to=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ui=new RegExp(to.source,"g");u.interpolate=co;function co(he,Te){for(var Le=u.interpolators.length,Be;--Le>=0&&!(Be=u.interpolators[Le](he,Te)););return Be}u.interpolators=[function(he,Te){var Le=typeof Te;return(Le==="string"?jr.has(Te.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(Te)?su:Wl:Te instanceof Lr?su:Array.isArray(Te)?ro:Le==="object"&&isNaN(Te)?zs:Fi)(he,Te)}],u.interpolateArray=ro;function ro(he,Te){var Le=[],Be=[],Ne=he.length,Ke=Te.length,yt=Math.min(he.length,Te.length),vt;for(vt=0;vt<yt;++vt)Le.push(co(he[vt],Te[vt]));for(;vt<Ne;++vt)Be[vt]=he[vt];for(;vt<Ke;++vt)Be[vt]=Te[vt];return function(Ct){for(vt=0;vt<yt;++vt)Be[vt]=Le[vt](Ct);return Be}}var ws=function(){return I},Al=u.map({linear:ws,poly:Ys,quad:function(){return No},cubic:function(){return Uf},sin:function(){return Eu},exp:function(){return Vf},circle:function(){return Hf},elastic:Ml,back:Cu,bounce:function(){return js}}),df=u.map({in:I,out:gf,"in-out":ll,"out-in":function(he){return ll(gf(he))}});u.ease=function(he){var Te=he.indexOf("-"),Le=Te>=0?he.slice(0,Te):he,Be=Te>=0?he.slice(Te+1):"in";return Le=Al.get(Le)||ws,Be=df.get(Be)||I,ds(Be(Le.apply(null,s.call(arguments,1))))};function ds(he){return function(Te){return Te<=0?0:Te>=1?1:he(Te)}}function gf(he){return function(Te){return 1-he(1-Te)}}function ll(he){return function(Te){return .5*(Te<.5?he(2*Te):2-he(2-2*Te))}}function No(he){return he*he}function Uf(he){return he*he*he}function ul(he){if(he<=0)return 0;if(he>=1)return 1;var Te=he*he,Le=Te*he;return 4*(he<.5?Le:3*(he-Te)+Le-.75)}function Ys(he){return function(Te){return Math.pow(Te,he)}}function Eu(he){return 1-Math.cos(he*ut)}function Vf(he){return Math.pow(2,10*(he-1))}function Hf(he){return 1-Math.sqrt(1-he*he)}function Ml(he,Te){var Le;return arguments.length<2&&(Te=.45),arguments.length?Le=Te/Xe*Math.asin(1/he):(he=1,Le=Te/4),function(Be){return 1+he*Math.pow(2,-10*Be)*Math.sin((Be-Le)*Xe/Te)}}function Cu(he){return he||(he=1.70158),function(Te){return Te*Te*((he+1)*Te-he)}}function js(he){return he<1/2.75?7.5625*he*he:he<2/2.75?7.5625*(he-=1.5/2.75)*he+.75:he<2.5/2.75?7.5625*(he-=2.25/2.75)*he+.9375:7.5625*(he-=2.625/2.75)*he+.984375}u.interpolateHcl=Zu;function Zu(he,Te){he=u.hcl(he),Te=u.hcl(Te);var Le=he.h,Be=he.c,Ne=he.l,Ke=Te.h-Le,yt=Te.c-Be,vt=Te.l-Ne;return isNaN(yt)&&(yt=0,Be=isNaN(Be)?Te.c:Be),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Ct){return Se(Le+Ke*Ct,Be+yt*Ct,Ne+vt*Ct)+""}}u.interpolateHsl=Yl;function Yl(he,Te){he=u.hsl(he),Te=u.hsl(Te);var Le=he.h,Be=he.s,Ne=he.l,Ke=Te.h-Le,yt=Te.s-Be,vt=Te.l-Ne;return isNaN(yt)&&(yt=0,Be=isNaN(Be)?Te.s:Be),isNaN(Ke)?(Ke=0,Le=isNaN(Le)?Te.h:Le):Ke>180?Ke-=360:Ke<-180&&(Ke+=360),function(Ct){return Or(Le+Ke*Ct,Be+yt*Ct,Ne+vt*Ct)+""}}u.interpolateLab=Ku;function Ku(he,Te){he=u.lab(he),Te=u.lab(Te);var Le=he.l,Be=he.a,Ne=he.b,Ke=Te.l-Le,yt=Te.a-Be,vt=Te.b-Ne;return function(Ct){return wt(Le+Ke*Ct,Be+yt*Ct,Ne+vt*Ct)+""}}u.interpolateRound=mf;function mf(he,Te){return Te-=he,function(Le){return Math.round(he+Te*Le)}}u.transform=function(he){var Te=x.createElementNS(u.ns.prefix.svg,"g");return(u.transform=function(Le){if(Le!=null){Te.setAttribute("transform",Le);var Be=Te.transform.baseVal.consolidate()}return new Lu(Be?Be.matrix:Pu)})(he)};function Lu(he){var Te=[he.a,he.b],Le=[he.c,he.d],Be=Sl(Te),Ne=Gf(Te,Le),Ke=Sl(Ju(Le,Te,-Ne))||0;Te[0]*Le[1]<Le[0]*Te[1]&&(Te[0]*=-1,Te[1]*=-1,Be*=-1,Ne*=-1),this.rotate=(Be?Math.atan2(Te[1],Te[0]):Math.atan2(-Le[0],Le[1]))*St,this.translate=[he.e,he.f],this.scale=[Be,Ke],this.skew=Ke?Math.atan2(Ne,Ke)*St:0}Lu.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function Gf(he,Te){return he[0]*Te[0]+he[1]*Te[1]}function Sl(he){var Te=Math.sqrt(Gf(he,he));return Te&&(he[0]/=Te,he[1]/=Te),Te}function Ju(he,Te,Le){return he[0]+=Le*Te[0],he[1]+=Le*Te[1],he}var Pu={a:1,b:0,c:0,d:1,e:0,f:0};u.interpolateTransform=Ru;function Fs(he){return he.length?he.pop()+",":""}function lu(he,Te,Le,Be){if(he[0]!==Te[0]||he[1]!==Te[1]){var Ne=Le.push("translate(",null,",",null,")");Be.push({i:Ne-4,x:Fi(he[0],Te[0])},{i:Ne-2,x:Fi(he[1],Te[1])})}else(Te[0]||Te[1])&&Le.push("translate("+Te+")")}function Qu(he,Te,Le,Be){he!==Te?(he-Te>180?Te+=360:Te-he>180&&(he+=360),Be.push({i:Le.push(Fs(Le)+"rotate(",null,")")-2,x:Fi(he,Te)})):Te&&Le.push(Fs(Le)+"rotate("+Te+")")}function yf(he,Te,Le,Be){he!==Te?Be.push({i:Le.push(Fs(Le)+"skewX(",null,")")-2,x:Fi(he,Te)}):Te&&Le.push(Fs(Le)+"skewX("+Te+")")}function xf(he,Te,Le,Be){if(he[0]!==Te[0]||he[1]!==Te[1]){var Ne=Le.push(Fs(Le)+"scale(",null,",",null,")");Be.push({i:Ne-4,x:Fi(he[0],Te[0])},{i:Ne-2,x:Fi(he[1],Te[1])})}else(Te[0]!==1||Te[1]!==1)&&Le.push(Fs(Le)+"scale("+Te+")")}function Ru(he,Te){var Le=[],Be=[];return he=u.transform(he),Te=u.transform(Te),lu(he.translate,Te.translate,Le,Be),Qu(he.rotate,Te.rotate,Le,Be),yf(he.skew,Te.skew,Le,Be),xf(he.scale,Te.scale,Le,Be),he=Te=null,function(Ne){for(var Ke=-1,yt=Be.length,vt;++Ke<yt;)Le[(vt=Be[Ke]).i]=vt.x(Ne);return Le.join("")}}function Wf(he,Te){return Te=(Te-=he=+he)||1/Te,function(Le){return(Le-he)/Te}}function bf(he,Te){return Te=(Te-=he=+he)||1/Te,function(Le){return Math.max(0,Math.min(1,(Le-he)/Te))}}u.layout={},u.layout.bundle=function(){return function(he){for(var Te=[],Le=-1,Be=he.length;++Le<Be;)Te.push(gs(he[Le]));return Te}};function gs(he){for(var Te=he.source,Le=he.target,Be=Xl(Te,Le),Ne=[Te];Te!==Be;)Te=Te.parent,Ne.push(Te);for(var Ke=Ne.length;Le!==Be;)Ne.splice(Ke,0,Le),Le=Le.parent;return Ne}function jl(he){for(var Te=[],Le=he.parent;Le!=null;)Te.push(he),he=Le,Le=Le.parent;return Te.push(he),Te}function Xl(he,Te){if(he===Te)return he;for(var Le=jl(he),Be=jl(Te),Ne=Le.pop(),Ke=Be.pop(),yt=null;Ne===Ke;)yt=Ne,Ne=Le.pop(),Ke=Be.pop();return yt}u.layout.chord=function(){var he={},Te,Le,Be,Ne,Ke=0,yt,vt,Ct;function Ut(){var Xt={},_r=[],Qr=u.range(Ne),cn=[],Mr,Ur,Yr,sn,un;for(Te=[],Le=[],Mr=0,sn=-1;++sn<Ne;){for(Ur=0,un=-1;++un<Ne;)Ur+=Be[sn][un];_r.push(Ur),cn.push(u.range(Ne)),Mr+=Ur}for(yt&&Qr.sort(function(Ga,za){return yt(_r[Ga],_r[za])}),vt&&cn.forEach(function(Ga,za){Ga.sort(function(ei,bi){return vt(Be[za][ei],Be[za][bi])})}),Mr=(Xe-Ke*Ne)/Mr,Ur=0,sn=-1;++sn<Ne;){for(Yr=Ur,un=-1;++un<Ne;){var Zr=Qr[sn],Wn=cn[Zr][un],aa=Be[Zr][Wn],Aa=Ur,sa=Ur+=aa*Mr;Xt[Zr+"-"+Wn]={index:Zr,subindex:Wn,startAngle:Aa,endAngle:sa,value:aa}}Le[Zr]={index:Zr,startAngle:Yr,endAngle:Ur,value:_r[Zr]},Ur+=Ke}for(sn=-1;++sn<Ne;)for(un=sn-1;++un<Ne;){var La=Xt[sn+"-"+un],ca=Xt[un+"-"+sn];(La.value||ca.value)&&Te.push(La.value<ca.value?{source:ca,target:La}:{source:La,target:ca})}Ct&&Yt()}function Yt(){Te.sort(function(Xt,_r){return Ct((Xt.source.value+Xt.target.value)/2,(_r.source.value+_r.target.value)/2)})}return he.matrix=function(Xt){return arguments.length?(Ne=(Be=Xt)&&Be.length,Te=Le=null,he):Be},he.padding=function(Xt){return arguments.length?(Ke=Xt,Te=Le=null,he):Ke},he.sortGroups=function(Xt){return arguments.length?(yt=Xt,Te=Le=null,he):yt},he.sortSubgroups=function(Xt){return arguments.length?(vt=Xt,Te=null,he):vt},he.sortChords=function(Xt){return arguments.length?(Ct=Xt,Te&&Yt(),he):Ct},he.chords=function(){return Te||Ut(),Te},he.groups=function(){return Le||Ut(),Le},he},u.layout.force=function(){var he={},Te=u.dispatch("start","tick","end"),Le,Be=[1,1],Ne,Ke,yt=.9,vt=Zs,Ct=go,Ut=-30,Yt=uu,Xt=.1,_r=.64,Qr=[],cn=[],Mr,Ur,Yr;function sn(Zr){return function(Wn,aa,Aa,sa){if(Wn.point!==Zr){var La=Wn.cx-Zr.x,ca=Wn.cy-Zr.y,Ga=sa-aa,za=La*La+ca*ca;if(Ga*Ga/_r<za){if(za<Yt){var ei=Wn.charge/za;Zr.px-=La*ei,Zr.py-=ca*ei}return!0}if(Wn.point&&za&&za<Yt){var ei=Wn.pointCharge/za;Zr.px-=La*ei,Zr.py-=ca*ei}}return!Wn.charge}}he.tick=function(){if((Ke*=.99)<.005)return Le=null,Te.end({type:"end",alpha:Ke=0}),!0;var Zr=Qr.length,Wn=cn.length,aa,Aa,sa,La,ca,Ga,za,ei,bi;for(Aa=0;Aa<Wn;++Aa)sa=cn[Aa],La=sa.source,ca=sa.target,ei=ca.x-La.x,bi=ca.y-La.y,(Ga=ei*ei+bi*bi)&&(Ga=Ke*Ur[Aa]*((Ga=Math.sqrt(Ga))-Mr[Aa])/Ga,ei*=Ga,bi*=Ga,ca.x-=ei*(za=La.weight+ca.weight?La.weight/(La.weight+ca.weight):.5),ca.y-=bi*za,La.x+=ei*(za=1-za),La.y+=bi*za);if((za=Ke*Xt)&&(ei=Be[0]/2,bi=Be[1]/2,Aa=-1,za))for(;++Aa<Zr;)sa=Qr[Aa],sa.x+=(ei-sa.x)*za,sa.y+=(bi-sa.y)*za;if(Ut)for(Xs(aa=u.geom.quadtree(Qr),Ke,Yr),Aa=-1;++Aa<Zr;)(sa=Qr[Aa]).fixed||aa.visit(sn(sa));for(Aa=-1;++Aa<Zr;)sa=Qr[Aa],sa.fixed?(sa.x=sa.px,sa.y=sa.py):(sa.x-=(sa.px-(sa.px=sa.x))*yt,sa.y-=(sa.py-(sa.py=sa.y))*yt);Te.tick({type:"tick",alpha:Ke})},he.nodes=function(Zr){return arguments.length?(Qr=Zr,he):Qr},he.links=function(Zr){return arguments.length?(cn=Zr,he):cn},he.size=function(Zr){return arguments.length?(Be=Zr,he):Be},he.linkDistance=function(Zr){return arguments.length?(vt=typeof Zr=="function"?Zr:+Zr,he):vt},he.distance=he.linkDistance,he.linkStrength=function(Zr){return arguments.length?(Ct=typeof Zr=="function"?Zr:+Zr,he):Ct},he.friction=function(Zr){return arguments.length?(yt=+Zr,he):yt},he.charge=function(Zr){return arguments.length?(Ut=typeof Zr=="function"?Zr:+Zr,he):Ut},he.chargeDistance=function(Zr){return arguments.length?(Yt=Zr*Zr,he):Math.sqrt(Yt)},he.gravity=function(Zr){return arguments.length?(Xt=+Zr,he):Xt},he.theta=function(Zr){return arguments.length?(_r=Zr*Zr,he):Math.sqrt(_r)},he.alpha=function(Zr){return arguments.length?(Zr=+Zr,Ke?Zr>0?Ke=Zr:(Le.c=null,Le.t=NaN,Le=null,Te.end({type:"end",alpha:Ke=0})):Zr>0&&(Te.start({type:"start",alpha:Ke=Zr}),Le=kn(he.tick)),he):Ke},he.start=function(){var Zr,Wn=Qr.length,aa=cn.length,Aa=Be[0],sa=Be[1],La,ca;for(Zr=0;Zr<Wn;++Zr)(ca=Qr[Zr]).index=Zr,ca.weight=0;for(Zr=0;Zr<aa;++Zr)ca=cn[Zr],typeof ca.source=="number"&&(ca.source=Qr[ca.source]),typeof ca.target=="number"&&(ca.target=Qr[ca.target]),++ca.source.weight,++ca.target.weight;for(Zr=0;Zr<Wn;++Zr)ca=Qr[Zr],isNaN(ca.x)&&(ca.x=Ga("x",Aa)),isNaN(ca.y)&&(ca.y=Ga("y",sa)),isNaN(ca.px)&&(ca.px=ca.x),isNaN(ca.py)&&(ca.py=ca.y);if(Mr=[],typeof vt=="function")for(Zr=0;Zr<aa;++Zr)Mr[Zr]=+vt.call(this,cn[Zr],Zr);else for(Zr=0;Zr<aa;++Zr)Mr[Zr]=vt;if(Ur=[],typeof Ct=="function")for(Zr=0;Zr<aa;++Zr)Ur[Zr]=+Ct.call(this,cn[Zr],Zr);else for(Zr=0;Zr<aa;++Zr)Ur[Zr]=Ct;if(Yr=[],typeof Ut=="function")for(Zr=0;Zr<Wn;++Zr)Yr[Zr]=+Ut.call(this,Qr[Zr],Zr);else for(Zr=0;Zr<Wn;++Zr)Yr[Zr]=Ut;function Ga(za,ei){if(!La){for(La=new Array(Wn),Ni=0;Ni<Wn;++Ni)La[Ni]=[];for(Ni=0;Ni<aa;++Ni){var bi=cn[Ni];La[bi.source.index].push(bi.target),La[bi.target.index].push(bi.source)}}for(var bo=La[Zr],Ni=-1,va=bo.length,si;++Ni<va;)if(!isNaN(si=bo[Ni][za]))return si;return Math.random()*ei}return he.resume()},he.resume=function(){return he.alpha(.1)},he.stop=function(){return he.alpha(0)},he.drag=function(){if(Ne||(Ne=u.behavior.drag().origin(I).on("dragstart.force",$u).on("drag.force",un).on("dragend.force",Os)),!arguments.length)return Ne;this.on("mouseover.force",Bo).on("mouseout.force",Du).call(Ne)};function un(Zr){Zr.px=u.event.x,Zr.py=u.event.y,he.resume()}return u.rebind(he,Te,"on")};function $u(he){he.fixed|=2}function Os(he){he.fixed&=~6}function Bo(he){he.fixed|=4,he.px=he.x,he.py=he.y}function Du(he){he.fixed&=~4}function Xs(he,Te,Le){var Be=0,Ne=0;if(he.charge=0,!he.leaf)for(var Ke=he.nodes,yt=Ke.length,vt=-1,Ct;++vt<yt;)Ct=Ke[vt],Ct!=null&&(Xs(Ct,Te,Le),he.charge+=Ct.charge,Be+=Ct.charge*Ct.cx,Ne+=Ct.charge*Ct.cy);if(he.point){he.leaf||(he.point.x+=Math.random()-.5,he.point.y+=Math.random()-.5);var Ut=Te*Le[he.point.index];he.charge+=he.pointCharge=Ut,Be+=Ut*he.point.x,Ne+=Ut*he.point.y}he.cx=Be/he.charge,he.cy=Ne/he.charge}var Zs=20,go=1,uu=1/0;u.layout.hierarchy=function(){var he=Iu,Te=cu,Le=Zl;function Be(Ne){var Ke=[Ne],yt=[],vt;for(Ne.depth=0;(vt=Ke.pop())!=null;)if(yt.push(vt),(Ut=Te.call(Be,vt,vt.depth))&&(Ct=Ut.length)){for(var Ct,Ut,Yt;--Ct>=0;)Ke.push(Yt=Ut[Ct]),Yt.parent=vt,Yt.depth=vt.depth+1;Le&&(vt.value=0),vt.children=Ut}else Le&&(vt.value=+Le.call(Be,vt,vt.depth)||0),delete vt.children;return Ns(Ne,function(Xt){var _r,Qr;he&&(_r=Xt.children)&&_r.sort(he),Le&&(Qr=Xt.parent)&&(Qr.value+=Xt.value)}),yt}return Be.sort=function(Ne){return arguments.length?(he=Ne,Be):he},Be.children=function(Ne){return arguments.length?(Te=Ne,Be):Te},Be.value=function(Ne){return arguments.length?(Le=Ne,Be):Le},Be.revalue=function(Ne){return Le&&(kl(Ne,function(Ke){Ke.children&&(Ke.value=0)}),Ns(Ne,function(Ke){var yt;Ke.children||(Ke.value=+Le.call(Be,Ke,Ke.depth)||0),(yt=Ke.parent)&&(yt.value+=Ke.value)})),Ne},Be};function fu(he,Te){return u.rebind(he,Te,"sort","children","value"),he.nodes=he,he.links=hu,he}function kl(he,Te){for(var Le=[he];(he=Le.pop())!=null;)if(Te(he),(Ne=he.children)&&(Be=Ne.length))for(var Be,Ne;--Be>=0;)Le.push(Ne[Be])}function Ns(he,Te){for(var Le=[he],Be=[];(he=Le.pop())!=null;)if(Be.push(he),(yt=he.children)&&(Ke=yt.length))for(var Ne=-1,Ke,yt;++Ne<Ke;)Le.push(yt[Ne]);for(;(he=Be.pop())!=null;)Te(he)}function cu(he){return he.children}function Zl(he){return he.value}function Iu(he,Te){return Te.value-he.value}function hu(he){return u.merge(he.map(function(Te){return(Te.children||[]).map(function(Le){return{source:Te,target:Le}})}))}u.layout.partition=function(){var he=u.layout.hierarchy(),Te=[1,1];function Le(Ke,yt,vt,Ct){var Ut=Ke.children;if(Ke.x=yt,Ke.y=Ke.depth*Ct,Ke.dx=vt,Ke.dy=Ct,Ut&&(Xt=Ut.length)){var Yt=-1,Xt,_r,Qr;for(vt=Ke.value?vt/Ke.value:0;++Yt<Xt;)Le(_r=Ut[Yt],yt,Qr=_r.value*vt,Ct),yt+=Qr}}function Be(Ke){var yt=Ke.children,vt=0;if(yt&&(Ut=yt.length))for(var Ct=-1,Ut;++Ct<Ut;)vt=Math.max(vt,Be(yt[Ct]));return 1+vt}function Ne(Ke,yt){var vt=he.call(this,Ke,yt);return Le(vt[0],0,Te[0],Te[1]/Be(vt[0])),vt}return Ne.size=function(Ke){return arguments.length?(Te=Ke,Ne):Te},fu(Ne,he)},u.layout.pie=function(){var he=Number,Te=El,Le=0,Be=Xe,Ne=0;function Ke(yt){var vt=yt.length,Ct=yt.map(function(sn,un){return+he.call(Ke,sn,un)}),Ut=+(typeof Le=="function"?Le.apply(this,arguments):Le),Yt=(typeof Be=="function"?Be.apply(this,arguments):Be)-Ut,Xt=Math.min(Math.abs(Yt)/vt,+(typeof Ne=="function"?Ne.apply(this,arguments):Ne)),_r=Xt*(Yt<0?-1:1),Qr=u.sum(Ct),cn=Qr?(Yt-vt*_r)/Qr:0,Mr=u.range(vt),Ur=[],Yr;return Te!=null&&Mr.sort(Te===El?function(sn,un){return Ct[un]-Ct[sn]}:function(sn,un){return Te(yt[sn],yt[un])}),Mr.forEach(function(sn){Ur[sn]={data:yt[sn],value:Yr=Ct[sn],startAngle:Ut,endAngle:Ut+=Yr*cn+_r,padAngle:Xt}}),Ur}return Ke.value=function(yt){return arguments.length?(he=yt,Ke):he},Ke.sort=function(yt){return arguments.length?(Te=yt,Ke):Te},Ke.startAngle=function(yt){return arguments.length?(Le=yt,Ke):Le},Ke.endAngle=function(yt){return arguments.length?(Be=yt,Ke):Be},Ke.padAngle=function(yt){return arguments.length?(Ne=yt,Ke):Ne},Ke};var El={};u.layout.stack=function(){var he=I,Te=vu,Le=Cl,Be=dc,Ne=Yf,Ke=Ts;function yt(vt,Ct){if(!(cn=vt.length))return vt;var Ut=vt.map(function(sn,un){return he.call(yt,sn,un)}),Yt=Ut.map(function(sn){return sn.map(function(un,Zr){return[Ne.call(yt,un,Zr),Ke.call(yt,un,Zr)]})}),Xt=Te.call(yt,Yt,Ct);Ut=u.permute(Ut,Xt),Yt=u.permute(Yt,Xt);var _r=Le.call(yt,Yt,Ct),Qr=Ut[0].length,cn,Mr,Ur,Yr;for(Ur=0;Ur<Qr;++Ur)for(Be.call(yt,Ut[0][Ur],Yr=_r[Ur],Yt[0][Ur][1]),Mr=1;Mr<cn;++Mr)Be.call(yt,Ut[Mr][Ur],Yr+=Yt[Mr-1][Ur][1],Yt[Mr][Ur][1]);return vt}return yt.values=function(vt){return arguments.length?(he=vt,yt):he},yt.order=function(vt){return arguments.length?(Te=typeof vt=="function"?vt:qu.get(vt)||vu,yt):Te},yt.offset=function(vt){return arguments.length?(Le=typeof vt=="function"?vt:Kl.get(vt)||Cl,yt):Le},yt.x=function(vt){return arguments.length?(Ne=vt,yt):Ne},yt.y=function(vt){return arguments.length?(Ke=vt,yt):Ke},yt.out=function(vt){return arguments.length?(Be=vt,yt):Be},yt};function Yf(he){return he.x}function Ts(he){return he.y}function dc(he,Te,Le){he.y0=Te,he.y=Le}var qu=u.map({"inside-out":function(he){var Te=he.length,Le,Be,Ne=he.map(pu),Ke=he.map(_f),yt=u.range(Te).sort(function(Xt,_r){return Ne[Xt]-Ne[_r]}),vt=0,Ct=0,Ut=[],Yt=[];for(Le=0;Le<Te;++Le)Be=yt[Le],vt<Ct?(vt+=Ke[Be],Ut.push(Be)):(Ct+=Ke[Be],Yt.push(Be));return Yt.reverse().concat(Ut)},reverse:function(he){return u.range(he.length).reverse()},default:vu}),Kl=u.map({silhouette:function(he){var Te=he.length,Le=he[0].length,Be=[],Ne=0,Ke,yt,vt,Ct=[];for(yt=0;yt<Le;++yt){for(Ke=0,vt=0;Ke<Te;Ke++)vt+=he[Ke][yt][1];vt>Ne&&(Ne=vt),Be.push(vt)}for(yt=0;yt<Le;++yt)Ct[yt]=(Ne-Be[yt])/2;return Ct},wiggle:function(he){var Te=he.length,Le=he[0],Be=Le.length,Ne,Ke,yt,vt,Ct,Ut,Yt,Xt,_r,Qr=[];for(Qr[0]=Xt=_r=0,Ke=1;Ke<Be;++Ke){for(Ne=0,vt=0;Ne<Te;++Ne)vt+=he[Ne][Ke][1];for(Ne=0,Ct=0,Yt=Le[Ke][0]-Le[Ke-1][0];Ne<Te;++Ne){for(yt=0,Ut=(he[Ne][Ke][1]-he[Ne][Ke-1][1])/(2*Yt);yt<Ne;++yt)Ut+=(he[yt][Ke][1]-he[yt][Ke-1][1])/Yt;Ct+=Ut*he[Ne][Ke][1]}Qr[Ke]=Xt-=vt?Ct/vt*Yt:0,Xt<_r&&(_r=Xt)}for(Ke=0;Ke<Be;++Ke)Qr[Ke]-=_r;return Qr},expand:function(he){var Te=he.length,Le=he[0].length,Be=1/Te,Ne,Ke,yt,vt=[];for(Ke=0;Ke<Le;++Ke){for(Ne=0,yt=0;Ne<Te;Ne++)yt+=he[Ne][Ke][1];if(yt)for(Ne=0;Ne<Te;Ne++)he[Ne][Ke][1]/=yt;else for(Ne=0;Ne<Te;Ne++)he[Ne][Ke][1]=Be}for(Ke=0;Ke<Le;++Ke)vt[Ke]=0;return vt},zero:Cl});function vu(he){return u.range(he.length)}function Cl(he){for(var Te=-1,Le=he[0].length,Be=[];++Te<Le;)Be[Te]=0;return Be}function pu(he){for(var Te=1,Le=0,Be=he[0][1],Ne,Ke=he.length;Te<Ke;++Te)(Ne=he[Te][1])>Be&&(Le=Te,Be=Ne);return Le}function _f(he){return he.reduce(wf,0)}function wf(he,Te){return he+Te[1]}u.layout.histogram=function(){var he=!0,Te=Number,Le=Jl,Be=gc;function Ne(Ke,yt){for(var vt=[],Ct=Ke.map(Te,this),Ut=Le.call(this,Ct,yt),Yt=Be.call(this,Ut,Ct,yt),Xt,yt=-1,_r=Ct.length,Qr=Yt.length-1,cn=he?1:1/_r,Mr;++yt<Qr;)Xt=vt[yt]=[],Xt.dx=Yt[yt+1]-(Xt.x=Yt[yt]),Xt.y=0;if(Qr>0)for(yt=-1;++yt<_r;)Mr=Ct[yt],Mr>=Ut[0]&&Mr<=Ut[1]&&(Xt=vt[u.bisect(Yt,Mr,1,Qr)-1],Xt.y+=cn,Xt.push(Ke[yt]));return vt}return Ne.value=function(Ke){return arguments.length?(Te=Ke,Ne):Te},Ne.range=function(Ke){return arguments.length?(Le=at(Ke),Ne):Le},Ne.bins=function(Ke){return arguments.length?(Be=typeof Ke=="number"?function(yt){return Oi(yt,Ke)}:at(Ke),Ne):Be},Ne.frequency=function(Ke){return arguments.length?(he=!!Ke,Ne):he},Ne};function gc(he,Te){return Oi(he,Math.ceil(Math.log(Te.length)/Math.LN2+1))}function Oi(he,Te){for(var Le=-1,Be=+he[0],Ne=(he[1]-Be)/Te,Ke=[];++Le<=Te;)Ke[Le]=Ne*Le+Be;return Ke}function Jl(he){return[u.min(he),u.max(he)]}u.layout.pack=function(){var he=u.layout.hierarchy().sort(Ll),Te=0,Le=[1,1],Be;function Ne(Ke,yt){var vt=he.call(this,Ke,yt),Ct=vt[0],Ut=Le[0],Yt=Le[1],Xt=Be==null?Math.sqrt:typeof Be=="function"?Be:function(){return Be};if(Ct.x=Ct.y=0,Ns(Ct,function(Qr){Qr.r=+Xt(Qr.value)}),Ns(Ct,mo),Te){var _r=Te*(Be?1:Math.max(2*Ct.r/Ut,2*Ct.r/Yt))/2;Ns(Ct,function(Qr){Qr.r+=_r}),Ns(Ct,mo),Ns(Ct,function(Qr){Qr.r-=_r})}return fl(Ct,Ut/2,Yt/2,Be?1:1/Math.max(2*Ct.r/Ut,2*Ct.r/Yt)),vt}return Ne.size=function(Ke){return arguments.length?(Le=Ke,Ne):Le},Ne.radius=function(Ke){return arguments.length?(Be=Ke==null||typeof Ke=="function"?Ke:+Ke,Ne):Be},Ne.padding=function(Ke){return arguments.length?(Te=+Ke,Ne):Te},fu(Ne,he)};function Ll(he,Te){return he.value-Te.value}function ms(he,Te){var Le=he._pack_next;he._pack_next=Te,Te._pack_prev=he,Te._pack_next=Le,Le._pack_prev=Te}function As(he,Te){he._pack_next=Te,Te._pack_prev=he}function du(he,Te){var Le=Te.x-he.x,Be=Te.y-he.y,Ne=he.r+Te.r;return .999*Ne*Ne>Le*Le+Be*Be}function mo(he){if(!(Te=he.children)||!(_r=Te.length))return;var Te,Le=1/0,Be=-1/0,Ne=1/0,Ke=-1/0,yt,vt,Ct,Ut,Yt,Xt,_r;function Qr(Zr){Le=Math.min(Zr.x-Zr.r,Le),Be=Math.max(Zr.x+Zr.r,Be),Ne=Math.min(Zr.y-Zr.r,Ne),Ke=Math.max(Zr.y+Zr.r,Ke)}if(Te.forEach(Tf),yt=Te[0],yt.x=-yt.r,yt.y=0,Qr(yt),_r>1&&(vt=Te[1],vt.x=vt.r,vt.y=0,Qr(vt),_r>2))for(Ct=Te[2],cl(yt,vt,Ct),Qr(Ct),ms(yt,Ct),yt._pack_prev=Ct,ms(Ct,vt),vt=yt._pack_next,Ut=3;Ut<_r;Ut++){cl(yt,vt,Ct=Te[Ut]);var cn=0,Mr=1,Ur=1;for(Yt=vt._pack_next;Yt!==vt;Yt=Yt._pack_next,Mr++)if(du(Yt,Ct)){cn=1;break}if(cn==1)for(Xt=yt._pack_prev;Xt!==Yt._pack_prev&&!du(Xt,Ct);Xt=Xt._pack_prev,Ur++);cn?(Mr<Ur||Mr==Ur&&vt.r<yt.r?As(yt,vt=Yt):As(yt=Xt,vt),Ut--):(ms(yt,Ct),vt=Ct,Qr(Ct))}var Yr=(Le+Be)/2,sn=(Ne+Ke)/2,un=0;for(Ut=0;Ut<_r;Ut++)Ct=Te[Ut],Ct.x-=Yr,Ct.y-=sn,un=Math.max(un,Ct.r+Math.sqrt(Ct.x*Ct.x+Ct.y*Ct.y));he.r=un,Te.forEach(Ms)}function Tf(he){he._pack_next=he._pack_prev=he}function Ms(he){delete he._pack_next,delete he._pack_prev}function fl(he,Te,Le,Be){var Ne=he.children;if(he.x=Te+=Be*he.x,he.y=Le+=Be*he.y,he.r*=Be,Ne)for(var Ke=-1,yt=Ne.length;++Ke<yt;)fl(Ne[Ke],Te,Le,Be)}function cl(he,Te,Le){var Be=he.r+Le.r,Ne=Te.x-he.x,Ke=Te.y-he.y;if(Be&&(Ne||Ke)){var yt=Te.r+Le.r,vt=Ne*Ne+Ke*Ke;yt*=yt,Be*=Be;var Ct=.5+(Be-yt)/(2*vt),Ut=Math.sqrt(Math.max(0,2*yt*(Be+vt)-(Be-=vt)*Be-yt*yt))/(2*vt);Le.x=he.x+Ct*Ne+Ut*Ke,Le.y=he.y+Ct*Ke-Ut*Ne}else Le.x=he.x+Be,Le.y=he.y}u.layout.tree=function(){var he=u.layout.hierarchy().sort(null).value(null),Te=Ks,Le=[1,1],Be=null;function Ne(Yt,Xt){var _r=he.call(this,Yt,Xt),Qr=_r[0],cn=Ke(Qr);if(Ns(cn,yt),cn.parent.m=-cn.z,kl(cn,vt),Be)kl(Qr,Ut);else{var Mr=Qr,Ur=Qr,Yr=Qr;kl(Qr,function(Wn){Wn.x<Mr.x&&(Mr=Wn),Wn.x>Ur.x&&(Ur=Wn),Wn.depth>Yr.depth&&(Yr=Wn)});var sn=Te(Mr,Ur)/2-Mr.x,un=Le[0]/(Ur.x+Te(Ur,Mr)/2+sn),Zr=Le[1]/(Yr.depth||1);kl(Qr,function(Wn){Wn.x=(Wn.x+sn)*un,Wn.y=Wn.depth*Zr})}return _r}function Ke(Yt){for(var Xt={A:null,children:[Yt]},_r=[Xt],Qr;(Qr=_r.pop())!=null;)for(var cn=Qr.children,Mr,Ur=0,Yr=cn.length;Ur<Yr;++Ur)_r.push((cn[Ur]=Mr={_:cn[Ur],parent:Qr,children:(Mr=cn[Ur].children)&&Mr.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Ur}).a=Mr);return Xt.children[0]}function yt(Yt){var Xt=Yt.children,_r=Yt.parent.children,Qr=Yt.i?_r[Yt.i-1]:null;if(Xt.length){ks(Yt);var cn=(Xt[0].z+Xt[Xt.length-1].z)/2;Qr?(Yt.z=Qr.z+Te(Yt._,Qr._),Yt.m=Yt.z-cn):Yt.z=cn}else Qr&&(Yt.z=Qr.z+Te(Yt._,Qr._));Yt.parent.A=Ct(Yt,Qr,Yt.parent.A||_r[0])}function vt(Yt){Yt._.x=Yt.z+Yt.parent.m,Yt.m+=Yt.parent.m}function Ct(Yt,Xt,_r){if(Xt){for(var Qr=Yt,cn=Yt,Mr=Xt,Ur=Qr.parent.children[0],Yr=Qr.m,sn=cn.m,un=Mr.m,Zr=Ur.m,Wn;Mr=ji(Mr),Qr=Ss(Qr),Mr&&Qr;)Ur=Ss(Ur),cn=ji(cn),cn.a=Yt,Wn=Mr.z+un-Qr.z-Yr+Te(Mr._,Qr._),Wn>0&&(Uo(Af(Mr,Yt,_r),Yt,Wn),Yr+=Wn,sn+=Wn),un+=Mr.m,Yr+=Qr.m,Zr+=Ur.m,sn+=cn.m;Mr&&!ji(cn)&&(cn.t=Mr,cn.m+=un-sn),Qr&&!Ss(Ur)&&(Ur.t=Qr,Ur.m+=Yr-Zr,_r=Yt)}return _r}function Ut(Yt){Yt.x*=Le[0],Yt.y=Yt.depth*Le[1]}return Ne.separation=function(Yt){return arguments.length?(Te=Yt,Ne):Te},Ne.size=function(Yt){return arguments.length?(Be=(Le=Yt)==null?Ut:null,Ne):Be?null:Le},Ne.nodeSize=function(Yt){return arguments.length?(Be=(Le=Yt)==null?null:Ut,Ne):Be?Le:null},fu(Ne,he)};function Ks(he,Te){return he.parent==Te.parent?1:2}function Ss(he){var Te=he.children;return Te.length?Te[0]:he.t}function ji(he){var Te=he.children,Le;return(Le=Te.length)?Te[Le-1]:he.t}function Uo(he,Te,Le){var Be=Le/(Te.i-he.i);Te.c-=Be,Te.s+=Le,he.c+=Be,Te.z+=Le,Te.m+=Le}function ks(he){for(var Te=0,Le=0,Be=he.children,Ne=Be.length,Ke;--Ne>=0;)Ke=Be[Ne],Ke.z+=Te,Ke.m+=Te,Te+=Ke.s+(Le+=Ke.c)}function Af(he,Te,Le){return he.a.parent===Te.parent?he.a:Le}u.layout.cluster=function(){var he=u.layout.hierarchy().sort(null).value(null),Te=Ks,Le=[1,1],Be=!1;function Ne(Ke,yt){var vt=he.call(this,Ke,yt),Ct=vt[0],Ut,Yt=0;Ns(Ct,function(Mr){var Ur=Mr.children;Ur&&Ur.length?(Mr.x=Mf(Ur),Mr.y=zu(Ur)):(Mr.x=Ut?Yt+=Te(Mr,Ut):0,Mr.y=0,Ut=Mr)});var Xt=xt(Ct),_r=It(Ct),Qr=Xt.x-Te(Xt,_r)/2,cn=_r.x+Te(_r,Xt)/2;return Ns(Ct,Be?function(Mr){Mr.x=(Mr.x-Ct.x)*Le[0],Mr.y=(Ct.y-Mr.y)*Le[1]}:function(Mr){Mr.x=(Mr.x-Qr)/(cn-Qr)*Le[0],Mr.y=(1-(Ct.y?Mr.y/Ct.y:1))*Le[1]}),vt}return Ne.separation=function(Ke){return arguments.length?(Te=Ke,Ne):Te},Ne.size=function(Ke){return arguments.length?(Be=(Le=Ke)==null,Ne):Be?null:Le},Ne.nodeSize=function(Ke){return arguments.length?(Be=(Le=Ke)!=null,Ne):Be?Le:null},fu(Ne,he)};function zu(he){return 1+u.max(he,function(Te){return Te.y})}function Mf(he){return he.reduce(function(Te,Le){return Te+Le.x},0)/he.length}function xt(he){var Te=he.children;return Te&&Te.length?xt(Te[0]):he}function It(he){var Te=he.children,Le;return Te&&(Le=Te.length)?It(Te[Le-1]):he}u.layout.treemap=function(){var he=u.layout.hierarchy(),Te=Math.round,Le=[1,1],Be=null,Ne=nr,Ke=!1,yt,vt="squarify",Ct=.5*(1+Math.sqrt(5));function Ut(Mr,Ur){for(var Yr=-1,sn=Mr.length,un,Zr;++Yr<sn;)Zr=(un=Mr[Yr]).value*(Ur<0?0:Ur),un.area=isNaN(Zr)||Zr<=0?0:Zr}function Yt(Mr){var Ur=Mr.children;if(Ur&&Ur.length){var Yr=Ne(Mr),sn=[],un=Ur.slice(),Zr,Wn=1/0,aa,Aa=vt==="slice"?Yr.dx:vt==="dice"?Yr.dy:vt==="slice-dice"?Mr.depth&1?Yr.dy:Yr.dx:Math.min(Yr.dx,Yr.dy),sa;for(Ut(un,Yr.dx*Yr.dy/Mr.value),sn.area=0;(sa=un.length)>0;)sn.push(Zr=un[sa-1]),sn.area+=Zr.area,vt!=="squarify"||(aa=_r(sn,Aa))<=Wn?(un.pop(),Wn=aa):(sn.area-=sn.pop().area,Qr(sn,Aa,Yr,!1),Aa=Math.min(Yr.dx,Yr.dy),sn.length=sn.area=0,Wn=1/0);sn.length&&(Qr(sn,Aa,Yr,!0),sn.length=sn.area=0),Ur.forEach(Yt)}}function Xt(Mr){var Ur=Mr.children;if(Ur&&Ur.length){var Yr=Ne(Mr),sn=Ur.slice(),un,Zr=[];for(Ut(sn,Yr.dx*Yr.dy/Mr.value),Zr.area=0;un=sn.pop();)Zr.push(un),Zr.area+=un.area,un.z!=null&&(Qr(Zr,un.z?Yr.dx:Yr.dy,Yr,!sn.length),Zr.length=Zr.area=0);Ur.forEach(Xt)}}function _r(Mr,Ur){for(var Yr=Mr.area,sn,un=0,Zr=1/0,Wn=-1,aa=Mr.length;++Wn<aa;)!(sn=Mr[Wn].area)||(sn<Zr&&(Zr=sn),sn>un&&(un=sn));return Yr*=Yr,Ur*=Ur,Yr?Math.max(Ur*un*Ct/Yr,Yr/(Ur*Zr*Ct)):1/0}function Qr(Mr,Ur,Yr,sn){var un=-1,Zr=Mr.length,Wn=Yr.x,aa=Yr.y,Aa=Ur?Te(Mr.area/Ur):0,sa;if(Ur==Yr.dx){for((sn||Aa>Yr.dy)&&(Aa=Yr.dy);++un<Zr;)sa=Mr[un],sa.x=Wn,sa.y=aa,sa.dy=Aa,Wn+=sa.dx=Math.min(Yr.x+Yr.dx-Wn,Aa?Te(sa.area/Aa):0);sa.z=!0,sa.dx+=Yr.x+Yr.dx-Wn,Yr.y+=Aa,Yr.dy-=Aa}else{for((sn||Aa>Yr.dx)&&(Aa=Yr.dx);++un<Zr;)sa=Mr[un],sa.x=Wn,sa.y=aa,sa.dx=Aa,aa+=sa.dy=Math.min(Yr.y+Yr.dy-aa,Aa?Te(sa.area/Aa):0);sa.z=!1,sa.dy+=Yr.y+Yr.dy-aa,Yr.x+=Aa,Yr.dx-=Aa}}function cn(Mr){var Ur=yt||he(Mr),Yr=Ur[0];return Yr.x=Yr.y=0,Yr.value?(Yr.dx=Le[0],Yr.dy=Le[1]):Yr.dx=Yr.dy=0,yt&&he.revalue(Yr),Ut([Yr],Yr.dx*Yr.dy/Yr.value),(yt?Xt:Yt)(Yr),Ke&&(yt=Ur),Ur}return cn.size=function(Mr){return arguments.length?(Le=Mr,cn):Le},cn.padding=function(Mr){if(!arguments.length)return Be;function Ur(un){var Zr=Mr.call(cn,un,un.depth);return Zr==null?nr(un):Jt(un,typeof Zr=="number"?[Zr,Zr,Zr,Zr]:Zr)}function Yr(un){return Jt(un,Mr)}var sn;return Ne=(Be=Mr)==null?nr:(sn=typeof Mr)==="function"?Ur:(sn==="number"&&(Mr=[Mr,Mr,Mr,Mr]),Yr),cn},cn.round=function(Mr){return arguments.length?(Te=Mr?Math.round:Number,cn):Te!=Number},cn.sticky=function(Mr){return arguments.length?(Ke=Mr,yt=null,cn):Ke},cn.ratio=function(Mr){return arguments.length?(Ct=Mr,cn):Ct},cn.mode=function(Mr){return arguments.length?(vt=Mr+"",cn):vt},fu(cn,he)};function nr(he){return{x:he.x,y:he.y,dx:he.dx,dy:he.dy}}function Jt(he,Te){var Le=he.x+Te[3],Be=he.y+Te[0],Ne=he.dx-Te[1]-Te[3],Ke=he.dy-Te[0]-Te[2];return Ne<0&&(Le+=Ne/2,Ne=0),Ke<0&&(Be+=Ke/2,Ke=0),{x:Le,y:Be,dx:Ne,dy:Ke}}u.random={normal:function(he,Te){var Le=arguments.length;return Le<2&&(Te=1),Le<1&&(he=0),function(){var Be,Ne,Ke;do Be=Math.random()*2-1,Ne=Math.random()*2-1,Ke=Be*Be+Ne*Ne;while(!Ke||Ke>1);return he+Te*Be*Math.sqrt(-2*Math.log(Ke)/Ke)}},logNormal:function(){var he=u.random.normal.apply(u,arguments);return function(){return Math.exp(he())}},bates:function(he){var Te=u.random.irwinHall(he);return function(){return Te()/he}},irwinHall:function(he){return function(){for(var Te=0,Le=0;Le<he;Le++)Te+=Math.random();return Te}}},u.scale={};function Cr(he){var Te=he[0],Le=he[he.length-1];return Te<Le?[Te,Le]:[Le,Te]}function an(he){return he.rangeExtent?he.rangeExtent():Cr(he.range())}function dn(he,Te,Le,Be){var Ne=Le(he[0],he[1]),Ke=Be(Te[0],Te[1]);return function(yt){return Ke(Ne(yt))}}function Tn(he,Te){var Le=0,Be=he.length-1,Ne=he[Le],Ke=he[Be],yt;return Ke<Ne&&(yt=Le,Le=Be,Be=yt,yt=Ne,Ne=Ke,Ke=yt),he[Le]=Te.floor(Ne),he[Be]=Te.ceil(Ke),he}function Cn(he){return he?{floor:function(Te){return Math.floor(Te/he)*he},ceil:function(Te){return Math.ceil(Te/he)*he}}:Gn}var Gn={floor:I,ceil:I};function xn(he,Te,Le,Be){var Ne=[],Ke=[],yt=0,vt=Math.min(he.length,Te.length)-1;for(he[vt]<he[0]&&(he=he.slice().reverse(),Te=Te.slice().reverse());++yt<=vt;)Ne.push(Le(he[yt-1],he[yt])),Ke.push(Be(Te[yt-1],Te[yt]));return function(Ct){var Ut=u.bisect(he,Ct,1,vt)-1;return Ke[Ut](Ne[Ut](Ct))}}u.scale.linear=function(){return In([0,1],[0,1],co,!1)};function In(he,Te,Le,Be){var Ne,Ke;function yt(){var Ct=Math.min(he.length,Te.length)>2?xn:dn,Ut=Be?bf:Wf;return Ne=Ct(he,Te,Ut,Le),Ke=Ct(Te,he,Ut,co),vt}function vt(Ct){return Ne(Ct)}return vt.invert=function(Ct){return Ke(Ct)},vt.domain=function(Ct){return arguments.length?(he=Ct.map(Number),yt()):he},vt.range=function(Ct){return arguments.length?(Te=Ct,yt()):Te},vt.rangeRound=function(Ct){return vt.range(Ct).interpolate(mf)},vt.clamp=function(Ct){return arguments.length?(Be=Ct,yt()):Be},vt.interpolate=function(Ct){return arguments.length?(Le=Ct,yt()):Le},vt.ticks=function(Ct){return Ba(he,Ct)},vt.tickFormat=function(Ct,Ut){return d3_scale_linearTickFormat(he,Ct,Ut)},vt.nice=function(Ct){return jn(he,Ct),yt()},vt.copy=function(){return In(he,Te,Le,Be)},yt()}function Ln(he,Te){return u.rebind(he,Te,"range","rangeRound","interpolate","clamp")}function jn(he,Te){return Tn(he,Cn(ea(he,Te)[2])),Tn(he,Cn(ea(he,Te)[2])),he}function ea(he,Te){Te==null&&(Te=10);var Le=Cr(he),Be=Le[1]-Le[0],Ne=Math.pow(10,Math.floor(Math.log(Be/Te)/Math.LN10)),Ke=Te/Be*Ne;return Ke<=.15?Ne*=10:Ke<=.35?Ne*=5:Ke<=.75&&(Ne*=2),Le[0]=Math.ceil(Le[0]/Ne)*Ne,Le[1]=Math.floor(Le[1]/Ne)*Ne+Ne*.5,Le[2]=Ne,Le}function Ba(he,Te){return u.range.apply(u,ea(he,Te))}u.scale.log=function(){return Ra(u.scale.linear().domain([0,1]),10,!0,[1,10])};function Ra(he,Te,Le,Be){function Ne(vt){return(Le?Math.log(vt<0?0:vt):-Math.log(vt>0?0:-vt))/Math.log(Te)}function Ke(vt){return Le?Math.pow(Te,vt):-Math.pow(Te,-vt)}function yt(vt){return he(Ne(vt))}return yt.invert=function(vt){return Ke(he.invert(vt))},yt.domain=function(vt){return arguments.length?(Le=vt[0]>=0,he.domain((Be=vt.map(Number)).map(Ne)),yt):Be},yt.base=function(vt){return arguments.length?(Te=+vt,he.domain(Be.map(Ne)),yt):Te},yt.nice=function(){var vt=Tn(Be.map(Ne),Le?Math:Ua);return he.domain(vt),Be=vt.map(Ke),yt},yt.ticks=function(){var vt=Cr(Be),Ct=[],Ut=vt[0],Yt=vt[1],Xt=Math.floor(Ne(Ut)),_r=Math.ceil(Ne(Yt)),Qr=Te%1?2:Te;if(isFinite(_r-Xt)){if(Le){for(;Xt<_r;Xt++)for(var cn=1;cn<Qr;cn++)Ct.push(Ke(Xt)*cn);Ct.push(Ke(Xt))}else for(Ct.push(Ke(Xt));Xt++<_r;)for(var cn=Qr-1;cn>0;cn--)Ct.push(Ke(Xt)*cn);for(Xt=0;Ct[Xt]<Ut;Xt++);for(_r=Ct.length;Ct[_r-1]>Yt;_r--);Ct=Ct.slice(Xt,_r)}return Ct},yt.copy=function(){return Ra(he.copy(),Te,Le,Be)},Ln(yt,he)}var Ua={floor:function(he){return-Math.ceil(-he)},ceil:function(he){return-Math.floor(-he)}};u.scale.pow=function(){return Va(u.scale.linear(),1,[0,1])};function Va(he,Te,Le){var Be=$n(Te),Ne=$n(1/Te);function Ke(yt){return he(Be(yt))}return Ke.invert=function(yt){return Ne(he.invert(yt))},Ke.domain=function(yt){return arguments.length?(he.domain((Le=yt.map(Number)).map(Be)),Ke):Le},Ke.ticks=function(yt){return Ba(Le,yt)},Ke.tickFormat=function(yt,vt){return d3_scale_linearTickFormat(Le,yt,vt)},Ke.nice=function(yt){return Ke.domain(jn(Le,yt))},Ke.exponent=function(yt){return arguments.length?(Be=$n(Te=yt),Ne=$n(1/Te),he.domain(Le.map(Be)),Ke):Te},Ke.copy=function(){return Va(he.copy(),Te,Le)},Ln(Ke,he)}function $n(he){return function(Te){return Te<0?-Math.pow(-Te,he):Math.pow(Te,he)}}u.scale.sqrt=function(){return u.scale.pow().exponent(.5)},u.scale.ordinal=function(){return da([],{t:"range",a:[[]]})};function da(he,Te){var Le,Be,Ne;function Ke(vt){return Be[((Le.get(vt)||(Te.t==="range"?Le.set(vt,he.push(vt)):NaN))-1)%Be.length]}function yt(vt,Ct){return u.range(he.length).map(function(Ut){return vt+Ct*Ut})}return Ke.domain=function(vt){if(!arguments.length)return he;he=[],Le=new M;for(var Ct=-1,Ut=vt.length,Yt;++Ct<Ut;)Le.has(Yt=vt[Ct])||Le.set(Yt,he.push(Yt));return Ke[Te.t].apply(Ke,Te.a)},Ke.range=function(vt){return arguments.length?(Be=vt,Ne=0,Te={t:"range",a:arguments},Ke):Be},Ke.rangePoints=function(vt,Ct){arguments.length<2&&(Ct=0);var Ut=vt[0],Yt=vt[1],Xt=he.length<2?(Ut=(Ut+Yt)/2,0):(Yt-Ut)/(he.length-1+Ct);return Be=yt(Ut+Xt*Ct/2,Xt),Ne=0,Te={t:"rangePoints",a:arguments},Ke},Ke.rangeRoundPoints=function(vt,Ct){arguments.length<2&&(Ct=0);var Ut=vt[0],Yt=vt[1],Xt=he.length<2?(Ut=Yt=Math.round((Ut+Yt)/2),0):(Yt-Ut)/(he.length-1+Ct)|0;return Be=yt(Ut+Math.round(Xt*Ct/2+(Yt-Ut-(he.length-1+Ct)*Xt)/2),Xt),Ne=0,Te={t:"rangeRoundPoints",a:arguments},Ke},Ke.rangeBands=function(vt,Ct,Ut){arguments.length<2&&(Ct=0),arguments.length<3&&(Ut=Ct);var Yt=vt[1]<vt[0],Xt=vt[Yt-0],_r=vt[1-Yt],Qr=(_r-Xt)/(he.length-Ct+2*Ut);return Be=yt(Xt+Qr*Ut,Qr),Yt&&Be.reverse(),Ne=Qr*(1-Ct),Te={t:"rangeBands",a:arguments},Ke},Ke.rangeRoundBands=function(vt,Ct,Ut){arguments.length<2&&(Ct=0),arguments.length<3&&(Ut=Ct);var Yt=vt[1]<vt[0],Xt=vt[Yt-0],_r=vt[1-Yt],Qr=Math.floor((_r-Xt)/(he.length-Ct+2*Ut));return Be=yt(Xt+Math.round((_r-Xt-(he.length-Ct)*Qr)/2),Qr),Yt&&Be.reverse(),Ne=Math.round(Qr*(1-Ct)),Te={t:"rangeRoundBands",a:arguments},Ke},Ke.rangeBand=function(){return Ne},Ke.rangeExtent=function(){return Cr(Te.a[0])},Ke.copy=function(){return da(he,Te)},Ke.domain(he)}u.scale.category10=function(){return u.scale.ordinal().range(ja)},u.scale.category20=function(){return u.scale.ordinal().range(qa)},u.scale.category20b=function(){return u.scale.ordinal().range(yi)},u.scale.category20c=function(){return u.scale.ordinal().range(xi)};var ja=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(tn),qa=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(tn),yi=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(tn),xi=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(tn);u.scale.quantile=function(){return _i([],[])};function _i(he,Te){var Le;function Be(){var Ke=0,yt=Te.length;for(Le=[];++Ke<yt;)Le[Ke-1]=u.quantile(he,Ke/yt);return Ne}function Ne(Ke){if(!isNaN(Ke=+Ke))return Te[u.bisect(Le,Ke)]}return Ne.domain=function(Ke){return arguments.length?(he=Ke.map(c).filter(h).sort(o),Be()):he},Ne.range=function(Ke){return arguments.length?(Te=Ke,Be()):Te},Ne.quantiles=function(){return Le},Ne.invertExtent=function(Ke){return Ke=Te.indexOf(Ke),Ke<0?[NaN,NaN]:[Ke>0?Le[Ke-1]:he[0],Ke<Le.length?Le[Ke]:he[he.length-1]]},Ne.copy=function(){return _i(he,Te)},Be()}u.scale.quantize=function(){return ki(0,1,[0,1])};function ki(he,Te,Le){var Be,Ne;function Ke(vt){return Le[Math.max(0,Math.min(Ne,Math.floor(Be*(vt-he))))]}function yt(){return Be=Le.length/(Te-he),Ne=Le.length-1,Ke}return Ke.domain=function(vt){return arguments.length?(he=+vt[0],Te=+vt[vt.length-1],yt()):[he,Te]},Ke.range=function(vt){return arguments.length?(Le=vt,yt()):Le},Ke.invertExtent=function(vt){return vt=Le.indexOf(vt),vt=vt<0?NaN:vt/Be+he,[vt,vt+1/Be]},Ke.copy=function(){return ki(he,Te,Le)},yt()}u.scale.threshold=function(){return ui([.5],[0,1])};function ui(he,Te){function Le(Be){if(Be<=Be)return Te[u.bisect(he,Be)]}return Le.domain=function(Be){return arguments.length?(he=Be,Le):he},Le.range=function(Be){return arguments.length?(Te=Be,Le):Te},Le.invertExtent=function(Be){return Be=Te.indexOf(Be),[he[Be-1],he[Be]]},Le.copy=function(){return ui(he,Te)},Le}u.scale.identity=function(){return Eo([0,1])};function Eo(he){function Te(Le){return+Le}return Te.invert=Te,Te.domain=Te.range=function(Le){return arguments.length?(he=Le.map(Te),Te):he},Te.ticks=function(Le){return Ba(he,Le)},Te.tickFormat=function(Le,Be){return d3_scale_linearTickFormat(he,Le,Be)},Te.copy=function(){return Eo(he)},Te}u.svg={};function oo(){return 0}u.svg.arc=function(){var he=ma,Te=wi,Le=oo,Be=Qa,Ne=yo,Ke=Ao,yt=Es;function vt(){var Ut=Math.max(0,+he.apply(this,arguments)),Yt=Math.max(0,+Te.apply(this,arguments)),Xt=Ne.apply(this,arguments)-ut,_r=Ke.apply(this,arguments)-ut,Qr=Math.abs(_r-Xt),cn=Xt>_r?0:1;if(Yt<Ut&&(Mr=Yt,Yt=Ut,Ut=Mr),Qr>=rt)return Ct(Yt,cn)+(Ut?Ct(Ut,1-cn):"")+"Z";var Mr,Ur,Yr,sn,un=0,Zr=0,Wn,aa,Aa,sa,La,ca,Ga,za,ei=[];if((sn=(+yt.apply(this,arguments)||0)/2)&&(Yr=Be===Qa?Math.sqrt(Ut*Ut+Yt*Yt):+Be.apply(this,arguments),cn||(Zr*=-1),Yt&&(Zr=jt(Yr/Yt*Math.sin(sn))),Ut&&(un=jt(Yr/Ut*Math.sin(sn)))),Yt){Wn=Yt*Math.cos(Xt+Zr),aa=Yt*Math.sin(Xt+Zr),Aa=Yt*Math.cos(_r-Zr),sa=Yt*Math.sin(_r-Zr);var bi=Math.abs(_r-Xt-2*Zr)<=Ce?0:1;if(Zr&&Js(Wn,aa,Aa,sa)===cn^bi){var bo=(Xt+_r)/2;Wn=Yt*Math.cos(bo),aa=Yt*Math.sin(bo),Aa=sa=null}}else Wn=aa=0;if(Ut){La=Ut*Math.cos(_r-un),ca=Ut*Math.sin(_r-un),Ga=Ut*Math.cos(Xt+un),za=Ut*Math.sin(Xt+un);var Ni=Math.abs(Xt-_r+2*un)<=Ce?0:1;if(un&&Js(La,ca,Ga,za)===1-cn^Ni){var va=(Xt+_r)/2;La=Ut*Math.cos(va),ca=Ut*Math.sin(va),Ga=za=null}}else La=ca=0;if(Qr>ht&&(Mr=Math.min(Math.abs(Yt-Ut)/2,+Le.apply(this,arguments)))>.001){Ur=Ut<Yt^cn?0:1;var si=Mr,Za=Mr;if(Qr<Ce){var Ci=Ga==null?[La,ca]:Aa==null?[Wn,aa]:ha([Wn,aa],[Ga,za],[Aa,sa],[La,ca]),fi=Wn-Ci[0],vo=aa-Ci[1],no=Aa-Ci[0],So=sa-Ci[1],ss=1/Math.sin(Math.acos((fi*no+vo*So)/(Math.sqrt(fi*fi+vo*vo)*Math.sqrt(no*no+So*So)))/2),es=Math.sqrt(Ci[0]*Ci[0]+Ci[1]*Ci[1]);Za=Math.min(Mr,(Ut-es)/(ss-1)),si=Math.min(Mr,(Yt-es)/(ss+1))}if(Aa!=null){var ls=$o(Ga==null?[La,ca]:[Ga,za],[Wn,aa],Yt,si,cn),Zi=$o([Aa,sa],[La,ca],Yt,si,cn);Mr===si?ei.push("M",ls[0],"A",si,",",si," 0 0,",Ur," ",ls[1],"A",Yt,",",Yt," 0 ",1-cn^Js(ls[1][0],ls[1][1],Zi[1][0],Zi[1][1]),",",cn," ",Zi[1],"A",si,",",si," 0 0,",Ur," ",Zi[0]):ei.push("M",ls[0],"A",si,",",si," 0 1,",Ur," ",Zi[0])}else ei.push("M",Wn,",",aa);if(Ga!=null){var Hi=$o([Wn,aa],[Ga,za],Ut,-Za,cn),Na=$o([La,ca],Aa==null?[Wn,aa]:[Aa,sa],Ut,-Za,cn);Mr===Za?ei.push("L",Na[0],"A",Za,",",Za," 0 0,",Ur," ",Na[1],"A",Ut,",",Ut," 0 ",cn^Js(Na[1][0],Na[1][1],Hi[1][0],Hi[1][1]),",",1-cn," ",Hi[1],"A",Za,",",Za," 0 0,",Ur," ",Hi[0]):ei.push("L",Na[0],"A",Za,",",Za," 0 0,",Ur," ",Hi[0])}else ei.push("L",La,",",ca)}else ei.push("M",Wn,",",aa),Aa!=null&&ei.push("A",Yt,",",Yt," 0 ",bi,",",cn," ",Aa,",",sa),ei.push("L",La,",",ca),Ga!=null&&ei.push("A",Ut,",",Ut," 0 ",Ni,",",1-cn," ",Ga,",",za);return ei.push("Z"),ei.join("")}function Ct(Ut,Yt){return"M0,"+Ut+"A"+Ut+","+Ut+" 0 1,"+Yt+" 0,"+-Ut+"A"+Ut+","+Ut+" 0 1,"+Yt+" 0,"+Ut}return vt.innerRadius=function(Ut){return arguments.length?(he=at(Ut),vt):he},vt.outerRadius=function(Ut){return arguments.length?(Te=at(Ut),vt):Te},vt.cornerRadius=function(Ut){return arguments.length?(Le=at(Ut),vt):Le},vt.padRadius=function(Ut){return arguments.length?(Be=Ut==Qa?Qa:at(Ut),vt):Be},vt.startAngle=function(Ut){return arguments.length?(Ne=at(Ut),vt):Ne},vt.endAngle=function(Ut){return arguments.length?(Ke=at(Ut),vt):Ke},vt.padAngle=function(Ut){return arguments.length?(yt=at(Ut),vt):yt},vt.centroid=function(){var Ut=(+he.apply(this,arguments)+ +Te.apply(this,arguments))/2,Yt=(+Ne.apply(this,arguments)+ +Ke.apply(this,arguments))/2-ut;return[Math.cos(Yt)*Ut,Math.sin(Yt)*Ut]},vt};var Qa="auto";function ma(he){return he.innerRadius}function wi(he){return he.outerRadius}function yo(he){return he.startAngle}function Ao(he){return he.endAngle}function Es(he){return he&&he.padAngle}function Js(he,Te,Le,Be){return(he-Le)*Te-(Te-Be)*he>0?0:1}function $o(he,Te,Le,Be,Ne){var Ke=he[0]-Te[0],yt=he[1]-Te[1],vt=(Ne?Be:-Be)/Math.sqrt(Ke*Ke+yt*yt),Ct=vt*yt,Ut=-vt*Ke,Yt=he[0]+Ct,Xt=he[1]+Ut,_r=Te[0]+Ct,Qr=Te[1]+Ut,cn=(Yt+_r)/2,Mr=(Xt+Qr)/2,Ur=_r-Yt,Yr=Qr-Xt,sn=Ur*Ur+Yr*Yr,un=Le-Be,Zr=Yt*Qr-_r*Xt,Wn=(Yr<0?-1:1)*Math.sqrt(Math.max(0,un*un*sn-Zr*Zr)),aa=(Zr*Yr-Ur*Wn)/sn,Aa=(-Zr*Ur-Yr*Wn)/sn,sa=(Zr*Yr+Ur*Wn)/sn,La=(-Zr*Ur+Yr*Wn)/sn,ca=aa-cn,Ga=Aa-Mr,za=sa-cn,ei=La-Mr;return ca*ca+Ga*Ga>za*za+ei*ei&&(aa=sa,Aa=La),[[aa-Ct,Aa-Ut],[aa*Le/un,Aa*Le/un]]}function Pl(){return!0}function Bs(he){var Te=ya,Le=pr,Be=Pl,Ne=Co,Ke=Ne.key,yt=.7;function vt(Ct){var Ut=[],Yt=[],Xt=-1,_r=Ct.length,Qr,cn=at(Te),Mr=at(Le);function Ur(){Ut.push("M",Ne(he(Yt),yt))}for(;++Xt<_r;)Be.call(this,Qr=Ct[Xt],Xt)?Yt.push([+cn.call(this,Qr,Xt),+Mr.call(this,Qr,Xt)]):Yt.length&&(Ur(),Yt=[]);return Yt.length&&Ur(),Ut.length?Ut.join(""):null}return vt.x=function(Ct){return arguments.length?(Te=Ct,vt):Te},vt.y=function(Ct){return arguments.length?(Le=Ct,vt):Le},vt.defined=function(Ct){return arguments.length?(Be=Ct,vt):Be},vt.interpolate=function(Ct){return arguments.length?(typeof Ct=="function"?Ke=Ne=Ct:Ke=(Ne=Cs.get(Ct)||Co).key,vt):Ke},vt.tension=function(Ct){return arguments.length?(yt=Ct,vt):yt},vt}u.svg.line=function(){return Bs(I)};var Cs=u.map({linear:Co,"linear-closed":Fu,step:ef,"step-before":Ls,"step-after":Sf,basis:Qs,"basis-open":mc,"basis-closed":Zf,bundle:Kf,cardinal:jf,"cardinal-open":Ou,"cardinal-closed":mh,monotone:Ye});Cs.forEach(function(he,Te){Te.key=he,Te.closed=/-closed$/.test(he)});function Co(he){return he.length>1?he.join("L"):he+"Z"}function Fu(he){return he.join("L")+"Z"}function ef(he){for(var Te=0,Le=he.length,Be=he[0],Ne=[Be[0],",",Be[1]];++Te<Le;)Ne.push("H",(Be[0]+(Be=he[Te])[0])/2,"V",Be[1]);return Le>1&&Ne.push("H",Be[0]),Ne.join("")}function Ls(he){for(var Te=0,Le=he.length,Be=he[0],Ne=[Be[0],",",Be[1]];++Te<Le;)Ne.push("V",(Be=he[Te])[1],"H",Be[0]);return Ne.join("")}function Sf(he){for(var Te=0,Le=he.length,Be=he[0],Ne=[Be[0],",",Be[1]];++Te<Le;)Ne.push("H",(Be=he[Te])[0],"V",Be[1]);return Ne.join("")}function Ou(he,Te){return he.length<4?Co(he):he[1]+kf(he.slice(1,-1),Xf(he,Te))}function mh(he,Te){return he.length<3?Fu(he):he[0]+kf((he.push(he[0]),he),Xf([he[he.length-2]].concat(he,[he[1]]),Te))}function jf(he,Te){return he.length<3?Co(he):he[0]+kf(he,Xf(he,Te))}function kf(he,Te){if(Te.length<1||he.length!=Te.length&&he.length!=Te.length+2)return Co(he);var Le=he.length!=Te.length,Be="",Ne=he[0],Ke=he[1],yt=Te[0],vt=yt,Ct=1;if(Le&&(Be+="Q"+(Ke[0]-yt[0]*2/3)+","+(Ke[1]-yt[1]*2/3)+","+Ke[0]+","+Ke[1],Ne=he[1],Ct=2),Te.length>1){vt=Te[1],Ke=he[Ct],Ct++,Be+="C"+(Ne[0]+yt[0])+","+(Ne[1]+yt[1])+","+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1];for(var Ut=2;Ut<Te.length;Ut++,Ct++)Ke=he[Ct],vt=Te[Ut],Be+="S"+(Ke[0]-vt[0])+","+(Ke[1]-vt[1])+","+Ke[0]+","+Ke[1]}if(Le){var Yt=he[Ct];Be+="Q"+(Ke[0]+vt[0]*2/3)+","+(Ke[1]+vt[1]*2/3)+","+Yt[0]+","+Yt[1]}return Be}function Xf(he,Te){for(var Le=[],Be=(1-Te)/2,Ne,Ke=he[0],yt=he[1],vt=1,Ct=he.length;++vt<Ct;)Ne=Ke,Ke=yt,yt=he[vt],Le.push([Be*(yt[0]-Ne[0]),Be*(yt[1]-Ne[1])]);return Le}function Qs(he){if(he.length<3)return Co(he);var Te=1,Le=he.length,Be=he[0],Ne=Be[0],Ke=Be[1],yt=[Ne,Ne,Ne,(Be=he[1])[0]],vt=[Ke,Ke,Ke,Be[1]],Ct=[Ne,",",Ke,"L",qo(Us,yt),",",qo(Us,vt)];for(he.push(he[Le-1]);++Te<=Le;)Be=he[Te],yt.shift(),yt.push(Be[0]),vt.shift(),vt.push(Be[1]),Ef(Ct,yt,vt);return he.pop(),Ct.push("L",Be),Ct.join("")}function mc(he){if(he.length<4)return Co(he);for(var Te=[],Le=-1,Be=he.length,Ne,Ke=[0],yt=[0];++Le<3;)Ne=he[Le],Ke.push(Ne[0]),yt.push(Ne[1]);for(Te.push(qo(Us,Ke)+","+qo(Us,yt)),--Le;++Le<Be;)Ne=he[Le],Ke.shift(),Ke.push(Ne[0]),yt.shift(),yt.push(Ne[1]),Ef(Te,Ke,yt);return Te.join("")}function Zf(he){for(var Te,Le=-1,Be=he.length,Ne=Be+4,Ke,yt=[],vt=[];++Le<4;)Ke=he[Le%Be],yt.push(Ke[0]),vt.push(Ke[1]);for(Te=[qo(Us,yt),",",qo(Us,vt)],--Le;++Le<Ne;)Ke=he[Le%Be],yt.shift(),yt.push(Ke[0]),vt.shift(),vt.push(Ke[1]),Ef(Te,yt,vt);return Te.join("")}function Kf(he,Te){var Le=he.length-1;if(Le)for(var Be=he[0][0],Ne=he[0][1],Ke=he[Le][0]-Be,yt=he[Le][1]-Ne,vt=-1,Ct,Ut;++vt<=Le;)Ct=he[vt],Ut=vt/Le,Ct[0]=Te*Ct[0]+(1-Te)*(Be+Ut*Ke),Ct[1]=Te*Ct[1]+(1-Te)*(Ne+Ut*yt);return Qs(he)}function qo(he,Te){return he[0]*Te[0]+he[1]*Te[1]+he[2]*Te[2]+he[3]*Te[3]}var Jf=[0,2/3,1/3,0],Pc=[0,1/3,2/3,0],Us=[0,1/6,2/3,1/6];function Ef(he,Te,Le){he.push("C",qo(Jf,Te),",",qo(Jf,Le),",",qo(Pc,Te),",",qo(Pc,Le),",",qo(Us,Te),",",qo(Us,Le))}function Cf(he,Te){return(Te[1]-he[1])/(Te[0]-he[0])}function Qf(he){for(var Te=0,Le=he.length-1,Be=[],Ne=he[0],Ke=he[1],yt=Be[0]=Cf(Ne,Ke);++Te<Le;)Be[Te]=(yt+(yt=Cf(Ne=Ke,Ke=he[Te+1])))/2;return Be[Te]=yt,Be}function ze(he){for(var Te=[],Le,Be,Ne,Ke,yt=Qf(he),vt=-1,Ct=he.length-1;++vt<Ct;)Le=Cf(he[vt],he[vt+1]),g(Le)<ht?yt[vt]=yt[vt+1]=0:(Be=yt[vt]/Le,Ne=yt[vt+1]/Le,Ke=Be*Be+Ne*Ne,Ke>9&&(Ke=Le*3/Math.sqrt(Ke),yt[vt]=Ke*Be,yt[vt+1]=Ke*Ne));for(vt=-1;++vt<=Ct;)Ke=(he[Math.min(Ct,vt+1)][0]-he[Math.max(0,vt-1)][0])/(6*(1+yt[vt]*yt[vt])),Te.push([Ke||0,yt[vt]*Ke||0]);return Te}function Ye(he){return he.length<3?Co(he):he[0]+kf(he,ze(he))}u.svg.line.radial=function(){var he=Bs(nt);return he.radius=he.x,delete he.x,he.angle=he.y,delete he.y,he};function nt(he){for(var Te,Le=-1,Be=he.length,Ne,Ke;++Le<Be;)Te=he[Le],Ne=Te[0],Ke=Te[1]-ut,Te[0]=Ne*Math.cos(Ke),Te[1]=Ne*Math.sin(Ke);return he}function lt(he){var Te=ya,Le=ya,Be=0,Ne=pr,Ke=Pl,yt=Co,vt=yt.key,Ct=yt,Ut="L",Yt=.7;function Xt(_r){var Qr=[],cn=[],Mr=[],Ur=-1,Yr=_r.length,sn,un=at(Te),Zr=at(Be),Wn=Te===Le?function(){return Aa}:at(Le),aa=Be===Ne?function(){return sa}:at(Ne),Aa,sa;function La(){Qr.push("M",yt(he(Mr),Yt),Ut,Ct(he(cn.reverse()),Yt),"Z")}for(;++Ur<Yr;)Ke.call(this,sn=_r[Ur],Ur)?(cn.push([Aa=+un.call(this,sn,Ur),sa=+Zr.call(this,sn,Ur)]),Mr.push([+Wn.call(this,sn,Ur),+aa.call(this,sn,Ur)])):cn.length&&(La(),cn=[],Mr=[]);return cn.length&&La(),Qr.length?Qr.join(""):null}return Xt.x=function(_r){return arguments.length?(Te=Le=_r,Xt):Le},Xt.x0=function(_r){return arguments.length?(Te=_r,Xt):Te},Xt.x1=function(_r){return arguments.length?(Le=_r,Xt):Le},Xt.y=function(_r){return arguments.length?(Be=Ne=_r,Xt):Ne},Xt.y0=function(_r){return arguments.length?(Be=_r,Xt):Be},Xt.y1=function(_r){return arguments.length?(Ne=_r,Xt):Ne},Xt.defined=function(_r){return arguments.length?(Ke=_r,Xt):Ke},Xt.interpolate=function(_r){return arguments.length?(typeof _r=="function"?vt=yt=_r:vt=(yt=Cs.get(_r)||Co).key,Ct=yt.reverse||yt,Ut=yt.closed?"M":"L",Xt):vt},Xt.tension=function(_r){return arguments.length?(Yt=_r,Xt):Yt},Xt}Ls.reverse=Sf,Sf.reverse=Ls,u.svg.area=function(){return lt(I)},u.svg.area.radial=function(){var he=lt(nt);return he.radius=he.x,delete he.x,he.innerRadius=he.x0,delete he.x0,he.outerRadius=he.x1,delete he.x1,he.angle=he.y,delete he.y,he.startAngle=he.y0,delete he.y0,he.endAngle=he.y1,delete he.y1,he};function _t(he){return he.source}function bt(he){return he.target}u.svg.chord=function(){var he=_t,Te=bt,Le=Tt,Be=yo,Ne=Ao;function Ke(Yt,Xt){var _r=yt(this,he,Yt,Xt),Qr=yt(this,Te,Yt,Xt);return"M"+_r.p0+Ct(_r.r,_r.p1,_r.a1-_r.a0)+(vt(_r,Qr)?Ut(_r.r,_r.p1,_r.r,_r.p0):Ut(_r.r,_r.p1,Qr.r,Qr.p0)+Ct(Qr.r,Qr.p1,Qr.a1-Qr.a0)+Ut(Qr.r,Qr.p1,_r.r,_r.p0))+"Z"}function yt(Yt,Xt,_r,Qr){var cn=Xt.call(Yt,_r,Qr),Mr=Le.call(Yt,cn,Qr),Ur=Be.call(Yt,cn,Qr)-ut,Yr=Ne.call(Yt,cn,Qr)-ut;return{r:Mr,a0:Ur,a1:Yr,p0:[Mr*Math.cos(Ur),Mr*Math.sin(Ur)],p1:[Mr*Math.cos(Yr),Mr*Math.sin(Yr)]}}function vt(Yt,Xt){return Yt.a0==Xt.a0&&Yt.a1==Xt.a1}function Ct(Yt,Xt,_r){return"A"+Yt+","+Yt+" 0 "+ +(_r>Ce)+",1 "+Xt}function Ut(Yt,Xt,_r,Qr){return"Q 0,0 "+Qr}return Ke.radius=function(Yt){return arguments.length?(Le=at(Yt),Ke):Le},Ke.source=function(Yt){return arguments.length?(he=at(Yt),Ke):he},Ke.target=function(Yt){return arguments.length?(Te=at(Yt),Ke):Te},Ke.startAngle=function(Yt){return arguments.length?(Be=at(Yt),Ke):Be},Ke.endAngle=function(Yt){return arguments.length?(Ne=at(Yt),Ke):Ne},Ke};function Tt(he){return he.radius}u.svg.diagonal=function(){var he=_t,Te=bt,Le=qt;function Be(Ne,Ke){var yt=he.call(this,Ne,Ke),vt=Te.call(this,Ne,Ke),Ct=(yt.y+vt.y)/2,Ut=[yt,{x:yt.x,y:Ct},{x:vt.x,y:Ct},vt];return Ut=Ut.map(Le),"M"+Ut[0]+"C"+Ut[1]+" "+Ut[2]+" "+Ut[3]}return Be.source=function(Ne){return arguments.length?(he=at(Ne),Be):he},Be.target=function(Ne){return arguments.length?(Te=at(Ne),Be):Te},Be.projection=function(Ne){return arguments.length?(Le=Ne,Be):Le},Be};function qt(he){return[he.x,he.y]}u.svg.diagonal.radial=function(){var he=u.svg.diagonal(),Te=qt,Le=he.projection;return he.projection=function(Be){return arguments.length?Le(sr(Te=Be)):Te},he};function sr(he){return function(){var Te=he.apply(this,arguments),Le=Te[0],Be=Te[1]-ut;return[Le*Math.cos(Be),Le*Math.sin(Be)]}}u.svg.symbol=function(){var he=fr,Te=Qt;function Le(Be,Ne){return(Hr.get(he.call(this,Be,Ne))||Er)(Te.call(this,Be,Ne))}return Le.type=function(Be){return arguments.length?(he=at(Be),Le):he},Le.size=function(Be){return arguments.length?(Te=at(Be),Le):Te},Le};function Qt(){return 64}function fr(){return"circle"}function Er(he){var Te=Math.sqrt(he/Ce);return"M0,"+Te+"A"+Te+","+Te+" 0 1,1 0,"+-Te+"A"+Te+","+Te+" 0 1,1 0,"+Te+"Z"}var Hr=u.map({circle:Er,cross:function(he){var Te=Math.sqrt(he/5)/2;return"M"+-3*Te+","+-Te+"H"+-Te+"V"+-3*Te+"H"+Te+"V"+-Te+"H"+3*Te+"V"+Te+"H"+Te+"V"+3*Te+"H"+-Te+"V"+Te+"H"+-3*Te+"Z"},diamond:function(he){var Te=Math.sqrt(he/(2*_n)),Le=Te*_n;return"M0,"+-Te+"L"+Le+",0 0,"+Te+" "+-Le+",0Z"},square:function(he){var Te=Math.sqrt(he)/2;return"M"+-Te+","+-Te+"L"+Te+","+-Te+" "+Te+","+Te+" "+-Te+","+Te+"Z"},"triangle-down":function(he){var Te=Math.sqrt(he/en),Le=Te*en/2;return"M0,"+Le+"L"+Te+","+-Le+" "+-Te+","+-Le+"Z"},"triangle-up":function(he){var Te=Math.sqrt(he/en),Le=Te*en/2;return"M0,"+-Le+"L"+Te+","+Le+" "+-Te+","+Le+"Z"}});u.svg.symbolTypes=Hr.keys();var en=Math.sqrt(3),_n=Math.tan(30*Pt);te.transition=function(he){for(var Te=Xa||++Ja,Le=ii(he),Be=[],Ne,Ke,yt=ni||{time:Date.now(),ease:ul,delay:0,duration:250},vt=-1,Ct=this.length;++vt<Ct;){Be.push(Ne=[]);for(var Ut=this[vt],Yt=-1,Xt=Ut.length;++Yt<Xt;)(Ke=Ut[Yt])&&Xi(Ke,Yt,Le,Te,yt),Ne.push(Ke)}return xa(Be,Le,Te)},te.interrupt=function(he){return this.each(he==null?Pn:Kn(ii(he)))};var Pn=Kn(ii());function Kn(he){return function(){var Te,Le,Be;(Te=this[he])&&(Be=Te[Le=Te.active])&&(Be.timer.c=null,Be.timer.t=NaN,--Te.count?delete Te[Le]:delete this[he],Te.active+=.5,Be.event&&Be.event.interrupt.call(this,this.__data__,Be.index))}}function xa(he,Te,Le){return fe(he,wa),he.namespace=Te,he.id=Le,he}var wa=[],Ja=0,Xa,ni;wa.call=te.call,wa.empty=te.empty,wa.node=te.node,wa.size=te.size,u.transition=function(he,Te){return he&&he.transition?Xa?he.transition(Te):he:u.selection().transition(he)},u.transition.prototype=wa,wa.select=function(he){var Te=this.id,Le=this.namespace,Be=[],Ne,Ke,yt;he=K(he);for(var vt=-1,Ct=this.length;++vt<Ct;){Be.push(Ne=[]);for(var Ut=this[vt],Yt=-1,Xt=Ut.length;++Yt<Xt;)(yt=Ut[Yt])&&(Ke=he.call(yt,yt.__data__,Yt,vt))?("__data__"in yt&&(Ke.__data__=yt.__data__),Xi(Ke,Yt,Le,Te,yt[Le][Te]),Ne.push(Ke)):Ne.push(null)}return xa(Be,Le,Te)},wa.selectAll=function(he){var Te=this.id,Le=this.namespace,Be=[],Ne,Ke,yt,vt,Ct;he=$(he);for(var Ut=-1,Yt=this.length;++Ut<Yt;)for(var Xt=this[Ut],_r=-1,Qr=Xt.length;++_r<Qr;)if(yt=Xt[_r]){Ct=yt[Le][Te],Ke=he.call(yt,yt.__data__,_r,Ut),Be.push(Ne=[]);for(var cn=-1,Mr=Ke.length;++cn<Mr;)(vt=Ke[cn])&&Xi(vt,cn,Le,Te,Ct),Ne.push(vt)}return xa(Be,Le,Te)},wa.filter=function(he){var Te=[],Le,Be,Ne;typeof he!="function"&&(he=_e(he));for(var Ke=0,yt=this.length;Ke<yt;Ke++){Te.push(Le=[]);for(var Be=this[Ke],vt=0,Ct=Be.length;vt<Ct;vt++)(Ne=Be[vt])&&he.call(Ne,Ne.__data__,vt,Ke)&&Le.push(Ne)}return xa(Te,this.namespace,this.id)},wa.tween=function(he,Te){var Le=this.id,Be=this.namespace;return arguments.length<2?this.node()[Be][Le].tween.get(he):We(this,Te==null?function(Ne){Ne[Be][Le].tween.remove(he)}:function(Ne){Ne[Be][Le].tween.set(he,Te)})};function vi(he,Te,Le,Be){var Ne=he.id,Ke=he.namespace;return We(he,typeof Le=="function"?function(yt,vt,Ct){yt[Ke][Ne].tween.set(Te,Be(Le.call(yt,yt.__data__,vt,Ct)))}:(Le=Be(Le),function(yt){yt[Ke][Ne].tween.set(Te,Le)}))}wa.attr=function(he,Te){if(arguments.length<2){for(Te in he)this.attr(Te,he[Te]);return this}var Le=he=="transform"?Ru:co,Be=u.ns.qualify(he);function Ne(){this.removeAttribute(Be)}function Ke(){this.removeAttributeNS(Be.space,Be.local)}function yt(Ct){return Ct==null?Ne:(Ct+="",function(){var Ut=this.getAttribute(Be),Yt;return Ut!==Ct&&(Yt=Le(Ut,Ct),function(Xt){this.setAttribute(Be,Yt(Xt))})})}function vt(Ct){return Ct==null?Ke:(Ct+="",function(){var Ut=this.getAttributeNS(Be.space,Be.local),Yt;return Ut!==Ct&&(Yt=Le(Ut,Ct),function(Xt){this.setAttributeNS(Be.space,Be.local,Yt(Xt))})})}return vi(this,"attr."+he,Te,Be.local?vt:yt)},wa.attrTween=function(he,Te){var Le=u.ns.qualify(he);function Be(Ke,yt){var vt=Te.call(this,Ke,yt,this.getAttribute(Le));return vt&&function(Ct){this.setAttribute(Le,vt(Ct))}}function Ne(Ke,yt){var vt=Te.call(this,Ke,yt,this.getAttributeNS(Le.space,Le.local));return vt&&function(Ct){this.setAttributeNS(Le.space,Le.local,vt(Ct))}}return this.tween("attr."+he,Le.local?Ne:Be)},wa.style=function(he,Te,Le){var Be=arguments.length;if(Be<3){if(typeof he!="string"){Be<2&&(Te="");for(Le in he)this.style(Le,he[Le],Te);return this}Le=""}function Ne(){this.style.removeProperty(he)}function Ke(yt){return yt==null?Ne:(yt+="",function(){var vt=i(this).getComputedStyle(this,null).getPropertyValue(he),Ct;return vt!==yt&&(Ct=co(vt,yt),function(Ut){this.style.setProperty(he,Ct(Ut),Le)})})}return vi(this,"style."+he,Te,Ke)},wa.styleTween=function(he,Te,Le){arguments.length<3&&(Le="");function Be(Ne,Ke){var yt=Te.call(this,Ne,Ke,i(this).getComputedStyle(this,null).getPropertyValue(he));return yt&&function(vt){this.style.setProperty(he,yt(vt),Le)}}return this.tween("style."+he,Be)},wa.text=function(he){return vi(this,"text",he,ho)};function ho(he){return he==null&&(he=""),function(){this.textContent=he}}wa.remove=function(){var he=this.namespace;return this.each("end.transition",function(){var Te;this[he].count<2&&(Te=this.parentNode)&&Te.removeChild(this)})},wa.ease=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].ease:(typeof he!="function"&&(he=u.ease.apply(u,arguments)),We(this,function(Be){Be[Le][Te].ease=he}))},wa.delay=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].delay:We(this,typeof he=="function"?function(Be,Ne,Ke){Be[Le][Te].delay=+he.call(Be,Be.__data__,Ne,Ke)}:(he=+he,function(Be){Be[Le][Te].delay=he}))},wa.duration=function(he){var Te=this.id,Le=this.namespace;return arguments.length<1?this.node()[Le][Te].duration:We(this,typeof he=="function"?function(Be,Ne,Ke){Be[Le][Te].duration=Math.max(1,he.call(Be,Be.__data__,Ne,Ke))}:(he=Math.max(1,he),function(Be){Be[Le][Te].duration=he}))},wa.each=function(he,Te){var Le=this.id,Be=this.namespace;if(arguments.length<2){var Ne=ni,Ke=Xa;try{Xa=Le,We(this,function(yt,vt,Ct){ni=yt[Be][Le],he.call(yt,yt.__data__,vt,Ct)})}finally{ni=Ne,Xa=Ke}}else We(this,function(yt){var vt=yt[Be][Le];(vt.event||(vt.event=u.dispatch("start","end","interrupt"))).on(he,Te)});return this},wa.transition=function(){for(var he=this.id,Te=++Ja,Le=this.namespace,Be=[],Ne,Ke,yt,vt,Ct=0,Ut=this.length;Ct<Ut;Ct++){Be.push(Ne=[]);for(var Ke=this[Ct],Yt=0,Xt=Ke.length;Yt<Xt;Yt++)(yt=Ke[Yt])&&(vt=yt[Le][he],Xi(yt,Yt,Le,Te,{time:vt.time,ease:vt.ease,delay:vt.delay+vt.duration,duration:vt.duration})),Ne.push(yt)}return xa(Be,Le,Te)};function ii(he){return he==null?"__transition__":"__transition_"+he+"__"}function Xi(he,Te,Le,Be,Ne){var Ke=he[Le]||(he[Le]={active:0,count:0}),yt=Ke[Be],vt,Ct,Ut,Yt,Xt;function _r(Mr){var Ur=yt.delay;if(Ct.t=Ur+vt,Ur<=Mr)return Qr(Mr-Ur);Ct.c=Qr}function Qr(Mr){var Ur=Ke.active,Yr=Ke[Ur];Yr&&(Yr.timer.c=null,Yr.timer.t=NaN,--Ke.count,delete Ke[Ur],Yr.event&&Yr.event.interrupt.call(he,he.__data__,Yr.index));for(var sn in Ke)if(+sn<Be){var un=Ke[sn];un.timer.c=null,un.timer.t=NaN,--Ke.count,delete Ke[sn]}Ct.c=cn,kn(function(){return Ct.c&&cn(Mr||1)&&(Ct.c=null,Ct.t=NaN),1},0,vt),Ke.active=Be,yt.event&&yt.event.start.call(he,he.__data__,Te),Xt=[],yt.tween.forEach(function(Zr,Wn){(Wn=Wn.call(he,he.__data__,Te))&&Xt.push(Wn)}),Yt=yt.ease,Ut=yt.duration}function cn(Mr){for(var Ur=Mr/Ut,Yr=Yt(Ur),sn=Xt.length;sn>0;)Xt[--sn].call(he,Yr);if(Ur>=1)return yt.event&&yt.event.end.call(he,he.__data__,Te),--Ke.count?delete Ke[Be]:delete he[Le],1}yt||(vt=Ne.time,Ct=kn(_r,0,vt),yt=Ke[Be]={tween:new M,time:vt,timer:Ct,delay:Ne.delay,duration:Ne.duration,ease:Ne.ease,index:Te},Ne=null,++Ke.count)}u.svg.axis=function(){var he=u.scale.linear(),Te=xo,Le=6,Be=6,Ne=3,Ke=[10],yt=null,vt;function Ct(Ut){Ut.each(function(){var Yt=u.select(this),Xt=this.__chart__||he,_r=this.__chart__=he.copy(),Qr=yt==null?_r.ticks?_r.ticks.apply(_r,Ke):_r.domain():yt,cn=vt==null?_r.tickFormat?_r.tickFormat.apply(_r,Ke):I:vt,Mr=Yt.selectAll(".tick").data(Qr,_r),Ur=Mr.enter().insert("g",".domain").attr("class","tick").style("opacity",ht),Yr=u.transition(Mr.exit()).style("opacity",ht).remove(),sn=u.transition(Mr.order()).style("opacity",1),un=Math.max(Le,0)+Ne,Zr,Wn=an(_r),aa=Yt.selectAll(".domain").data([0]),Aa=(aa.enter().append("path").attr("class","domain"),u.transition(aa));Ur.append("line"),Ur.append("text");var sa=Ur.select("line"),La=sn.select("line"),ca=Mr.select("text").text(cn),Ga=Ur.select("text"),za=sn.select("text"),ei=Te==="top"||Te==="left"?-1:1,bi,bo,Ni,va;if(Te==="bottom"||Te==="top"?(Zr=Ti,bi="x",Ni="y",bo="x2",va="y2",ca.attr("dy",ei<0?"0em":".71em").style("text-anchor","middle"),Aa.attr("d","M"+Wn[0]+","+ei*Be+"V0H"+Wn[1]+"V"+ei*Be)):(Zr=Ei,bi="y",Ni="x",bo="y2",va="x2",ca.attr("dy",".32em").style("text-anchor",ei<0?"end":"start"),Aa.attr("d","M"+ei*Be+","+Wn[0]+"H0V"+Wn[1]+"H"+ei*Be)),sa.attr(va,ei*Le),Ga.attr(Ni,ei*un),La.attr(bo,0).attr(va,ei*Le),za.attr(bi,0).attr(Ni,ei*un),_r.rangeBand){var si=_r,Za=si.rangeBand()/2;Xt=_r=function(Ci){return si(Ci)+Za}}else Xt.rangeBand?Xt=_r:Yr.call(Zr,_r,Xt);Ur.call(Zr,Xt,_r),sn.call(Zr,_r,_r)})}return Ct.scale=function(Ut){return arguments.length?(he=Ut,Ct):he},Ct.orient=function(Ut){return arguments.length?(Te=Ut in Po?Ut+"":xo,Ct):Te},Ct.ticks=function(){return arguments.length?(Ke=m(arguments),Ct):Ke},Ct.tickValues=function(Ut){return arguments.length?(yt=Ut,Ct):yt},Ct.tickFormat=function(Ut){return arguments.length?(vt=Ut,Ct):vt},Ct.tickSize=function(Ut){var Yt=arguments.length;return Yt?(Le=+Ut,Be=+arguments[Yt-1],Ct):Le},Ct.innerTickSize=function(Ut){return arguments.length?(Le=+Ut,Ct):Le},Ct.outerTickSize=function(Ut){return arguments.length?(Be=+Ut,Ct):Be},Ct.tickPadding=function(Ut){return arguments.length?(Ne=+Ut,Ct):Ne},Ct.tickSubdivide=function(){return arguments.length&&Ct},Ct};var xo="bottom",Po={top:1,right:1,bottom:1,left:1};function Ti(he,Te,Le){he.attr("transform",function(Be){var Ne=Te(Be);return"translate("+(isFinite(Ne)?Ne:Le(Be))+",0)"})}function Ei(he,Te,Le){he.attr("transform",function(Be){var Ne=Te(Be);return"translate(0,"+(isFinite(Ne)?Ne:Le(Be))+")"})}u.svg.brush=function(){var he=J(Yt,"brushstart","brush","brushend"),Te=null,Le=null,Be=[0,0],Ne=[0,0],Ke,yt,vt=!0,Ct=!0,Ut=Mo[0];function Yt(Mr){Mr.each(function(){var Ur=u.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",cn).on("touchstart.brush",cn),Yr=Ur.selectAll(".background").data([0]);Yr.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Ur.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var sn=Ur.selectAll(".resize").data(Ut,I);sn.exit().remove(),sn.enter().append("g").attr("class",function(aa){return"resize "+aa}).style("cursor",function(aa){return Ps[aa]}).append("rect").attr("x",function(aa){return/[ew]$/.test(aa)?-3:null}).attr("y",function(aa){return/^[ns]/.test(aa)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),sn.style("display",Yt.empty()?"none":null);var un=u.transition(Ur),Zr=u.transition(Yr),Wn;Te&&(Wn=an(Te),Zr.attr("x",Wn[0]).attr("width",Wn[1]-Wn[0]),_r(un)),Le&&(Wn=an(Le),Zr.attr("y",Wn[0]).attr("height",Wn[1]-Wn[0]),Qr(un)),Xt(un)})}Yt.event=function(Mr){Mr.each(function(){var Ur=he.of(this,arguments),Yr={x:Be,y:Ne,i:Ke,j:yt},sn=this.__chart__||Yr;this.__chart__=Yr,Xa?u.select(this).transition().each("start.brush",function(){Ke=sn.i,yt=sn.j,Be=sn.x,Ne=sn.y,Ur({type:"brushstart"})}).tween("brush:brush",function(){var un=ro(Be,Yr.x),Zr=ro(Ne,Yr.y);return Ke=yt=null,function(Wn){Be=Yr.x=un(Wn),Ne=Yr.y=Zr(Wn),Ur({type:"brush",mode:"resize"})}}).each("end.brush",function(){Ke=Yr.i,yt=Yr.j,Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"})}):(Ur({type:"brushstart"}),Ur({type:"brush",mode:"resize"}),Ur({type:"brushend"}))})};function Xt(Mr){Mr.selectAll(".resize").attr("transform",function(Ur){return"translate("+Be[+/e$/.test(Ur)]+","+Ne[+/^s/.test(Ur)]+")"})}function _r(Mr){Mr.select(".extent").attr("x",Be[0]),Mr.selectAll(".extent,.n>rect,.s>rect").attr("width",Be[1]-Be[0])}function Qr(Mr){Mr.select(".extent").attr("y",Ne[0]),Mr.selectAll(".extent,.e>rect,.w>rect").attr("height",Ne[1]-Ne[0])}function cn(){var Mr=this,Ur=u.select(u.event.target),Yr=he.of(Mr,arguments),sn=u.select(Mr),un=Ur.datum(),Zr=!/^(n|s)$/.test(un)&&Te,Wn=!/^(e|w)$/.test(un)&&Le,aa=Ur.classed("extent"),Aa=Bt(Mr),sa,La=u.mouse(Mr),ca,Ga=u.select(i(Mr)).on("keydown.brush",bi).on("keyup.brush",bo);if(u.event.changedTouches?Ga.on("touchmove.brush",Ni).on("touchend.brush",si):Ga.on("mousemove.brush",Ni).on("mouseup.brush",si),sn.interrupt().selectAll("*").interrupt(),aa)La[0]=Be[0]-La[0],La[1]=Ne[0]-La[1];else if(un){var za=+/w$/.test(un),ei=+/^n/.test(un);ca=[Be[1-za]-La[0],Ne[1-ei]-La[1]],La[0]=Be[za],La[1]=Ne[ei]}else u.event.altKey&&(sa=La.slice());sn.style("pointer-events","none").selectAll(".resize").style("display",null),u.select("body").style("cursor",Ur.style("cursor")),Yr({type:"brushstart"}),Ni();function bi(){u.event.keyCode==32&&(aa||(sa=null,La[0]-=Be[1],La[1]-=Ne[1],aa=2),q())}function bo(){u.event.keyCode==32&&aa==2&&(La[0]+=Be[1],La[1]+=Ne[1],aa=0,q())}function Ni(){var Za=u.mouse(Mr),Ci=!1;ca&&(Za[0]+=ca[0],Za[1]+=ca[1]),aa||(u.event.altKey?(sa||(sa=[(Be[0]+Be[1])/2,(Ne[0]+Ne[1])/2]),La[0]=Be[+(Za[0]<sa[0])],La[1]=Ne[+(Za[1]<sa[1])]):sa=null),Zr&&va(Za,Te,0)&&(_r(sn),Ci=!0),Wn&&va(Za,Le,1)&&(Qr(sn),Ci=!0),Ci&&(Xt(sn),Yr({type:"brush",mode:aa?"move":"resize"}))}function va(Za,Ci,fi){var vo=an(Ci),no=vo[0],So=vo[1],ss=La[fi],es=fi?Ne:Be,ls=es[1]-es[0],Zi,Hi;if(aa&&(no-=ss,So-=ls+ss),Zi=(fi?Ct:vt)?Math.max(no,Math.min(So,Za[fi])):Za[fi],aa?Hi=(Zi+=ss)+ls:(sa&&(ss=Math.max(no,Math.min(So,2*sa[fi]-Zi))),ss<Zi?(Hi=Zi,Zi=ss):Hi=ss),es[0]!=Zi||es[1]!=Hi)return fi?yt=null:Ke=null,es[0]=Zi,es[1]=Hi,!0}function si(){Ni(),sn.style("pointer-events","all").selectAll(".resize").style("display",Yt.empty()?"none":null),u.select("body").style("cursor",null),Ga.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Aa(),Yr({type:"brushend"})}}return Yt.x=function(Mr){return arguments.length?(Te=Mr,Ut=Mo[!Te<<1|!Le],Yt):Te},Yt.y=function(Mr){return arguments.length?(Le=Mr,Ut=Mo[!Te<<1|!Le],Yt):Le},Yt.clamp=function(Mr){return arguments.length?(Te&&Le?(vt=!!Mr[0],Ct=!!Mr[1]):Te?vt=!!Mr:Le&&(Ct=!!Mr),Yt):Te&&Le?[vt,Ct]:Te?vt:Le?Ct:null},Yt.extent=function(Mr){var Ur,Yr,sn,un,Zr;return arguments.length?(Te&&(Ur=Mr[0],Yr=Mr[1],Le&&(Ur=Ur[0],Yr=Yr[0]),Ke=[Ur,Yr],Te.invert&&(Ur=Te(Ur),Yr=Te(Yr)),Yr<Ur&&(Zr=Ur,Ur=Yr,Yr=Zr),(Ur!=Be[0]||Yr!=Be[1])&&(Be=[Ur,Yr])),Le&&(sn=Mr[0],un=Mr[1],Te&&(sn=sn[1],un=un[1]),yt=[sn,un],Le.invert&&(sn=Le(sn),un=Le(un)),un<sn&&(Zr=sn,sn=un,un=Zr),(sn!=Ne[0]||un!=Ne[1])&&(Ne=[sn,un])),Yt):(Te&&(Ke?(Ur=Ke[0],Yr=Ke[1]):(Ur=Be[0],Yr=Be[1],Te.invert&&(Ur=Te.invert(Ur),Yr=Te.invert(Yr)),Yr<Ur&&(Zr=Ur,Ur=Yr,Yr=Zr))),Le&&(yt?(sn=yt[0],un=yt[1]):(sn=Ne[0],un=Ne[1],Le.invert&&(sn=Le.invert(sn),un=Le.invert(un)),un<sn&&(Zr=sn,sn=un,un=Zr))),Te&&Le?[[Ur,sn],[Yr,un]]:Te?[Ur,Yr]:Le&&[sn,un])},Yt.clear=function(){return Yt.empty()||(Be=[0,0],Ne=[0,0],Ke=yt=null),Yt},Yt.empty=function(){return!!Te&&Be[0]==Be[1]||!!Le&&Ne[0]==Ne[1]},u.rebind(Yt,he,"on")};var Ps={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Mo=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];u.text=Ft(function(he){return he.responseText}),u.json=function(he,Te){return er(he,"application/json",jo,Te)};function jo(he){return JSON.parse(he.responseText)}u.html=function(he,Te){return er(he,"text/html",os,Te)};function os(he){var Te=x.createRange();return Te.selectNode(x.body),Te.createContextualFragment(he.responseText)}u.xml=Ft(function(he){return he.responseXML}),typeof z=="object"&&z.exports?z.exports=u:this.d3=u}).apply(self)},{}],59:[function(e,z,N){z.exports=e("./quad")},{"./quad":60}],60:[function(e,z,N){var u=e("binary-search-bounds"),s=e("clamp"),m=e("parse-rect"),x=e("array-bounds"),t=e("pick-by-alias"),i=e("defined"),a=e("flatten-vertex-data"),r=e("is-obj"),n=e("dtype"),f=e("math-log2"),l=1073741824;z.exports=function(h,d){d||(d={}),h=a(h,"float64"),d=t(d,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var p=i(d.maxDepth,255),y=i(d.bounds,x(h,2));y[0]===y[2]&&y[2]++,y[1]===y[3]&&y[3]++;var g=o(h,y),A=h.length>>>1,b;d.dtype||(d.dtype="array"),typeof d.dtype=="string"?b=new(n(d.dtype))(A):d.dtype&&(b=d.dtype,Array.isArray(b)&&(b.length=A));for(var M=0;M<A;++M)b[M]=M;var _=[],T=[],w=[],v=[];I(0,0,1,b,0,1);for(var L=0,S=0;S<_.length;S++){var k=_[S];if(b.set)b.set(k,L);else for(var P=0,O=k.length;P<O;P++)b[P+L]=k[P];var F=L+_[S].length;v[S]=[L,F],L=F}return b.range=D,b;function I(j,Z,ee,q,W,J){if(!q.length)return null;var le=_[W]||(_[W]=[]),fe=w[W]||(w[W]=[]),se=T[W]||(T[W]=[]),H=le.length;if(W++,W>p||J>l){for(var Y=0;Y<q.length;Y++)le.push(q[Y]),fe.push(J),se.push(null,null,null,null);return H}if(le.push(q[0]),fe.push(J),q.length<=1)return se.push(null,null,null,null),H;for(var ne=ee*.5,te=j+ne,K=Z+ne,$=[],ae=[],ie=[],oe=[],ue=1,ye=q.length;ue<ye;ue++){var ce=q[ue],me=g[ce*2],xe=g[ce*2+1];me<te?xe<K?$.push(ce):ae.push(ce):xe<K?ie.push(ce):oe.push(ce)}return J<<=2,se.push(I(j,Z,ne,$,W,J),I(j,K,ne,ae,W,J+1),I(te,Z,ne,ie,W,J+2),I(te,K,ne,oe,W,J+3)),H}function D(){for(var j=[],Z=arguments.length;Z--;)j[Z]=arguments[Z];var ee;if(r(j[j.length-1])){var q=j.pop();!j.length&&(q.x!=null||q.l!=null||q.left!=null)&&(j=[q],ee={}),ee=t(q,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else ee={};j.length||(j=y);var W=m.apply(void 0,j),J=[Math.min(W.x,W.x+W.width),Math.min(W.y,W.y+W.height),Math.max(W.x,W.x+W.width),Math.max(W.y,W.y+W.height)],le=J[0],fe=J[1],se=J[2],H=J[3],Y=o([le,fe,se,H],y),ne=Y[0],te=Y[1],K=Y[2],$=Y[3],ae=i(ee.level,_.length);if(ee.d!=null){var ie;typeof ee.d=="number"?ie=[ee.d,ee.d]:ee.d.length&&(ie=ee.d),ae=Math.min(Math.max(Math.ceil(-f(Math.abs(ie[0])/(y[2]-y[0]))),Math.ceil(-f(Math.abs(ie[1])/(y[3]-y[1])))),ae)}if(ae=Math.min(ae,_.length),ee.lod)return U(ne,te,K,$,ae);var oe=[];ue(0,0,1,0,0,1);function ue(ce,me,xe,ke,Ae,Oe){if(!(Ae===null||Oe===null)){var He=ce+xe,Ge=me+xe;if(!(ne>He||te>Ge||K<ce||$<me)&&!(ke>=ae)&&Ae!==Oe){var _e=_[ke];Oe===void 0&&(Oe=_e.length);for(var Re=Ae;Re<Oe;Re++){var We=_e[Re],qe=h[We*2],Ue=h[We*2+1];qe>=le&&qe<=se&&Ue>=fe&&Ue<=H&&oe.push(We)}var Ie=T[ke],Ve=Ie[Ae*4+0],dt=Ie[Ae*4+1],Rt=Ie[Ae*4+2],Gt=Ie[Ae*4+3],kt=ye(Ie,Ae+1),zt=xe*.5,Bt=ke+1;ue(ce,me,zt,Bt,Ve,dt||Rt||Gt||kt),ue(ce,me+zt,zt,Bt,dt,Rt||Gt||kt),ue(ce+zt,me,zt,Bt,Rt,Gt||kt),ue(ce+zt,me+zt,zt,Bt,Gt,kt)}}}function ye(ce,me){for(var xe=null,ke=0;xe===null;)if(xe=ce[me*4+ke],ke++,ke>ce.length)return null;return xe}return oe}function U(j,Z,ee,q,W){for(var J=[],le=0;le<W;le++){var fe=w[le],se=v[le][0],H=B(j,Z,le),Y=B(ee,q,le),ne=u.ge(fe,H),te=u.gt(fe,Y,ne,fe.length-1);J[le]=[ne+se,te+se]}return J}function B(j,Z,ee){for(var q=1,W=.5,J=.5,le=.5,fe=0;fe<ee;fe++)q<<=2,q+=j<W?Z<J?0:1:Z<J?2:3,le*=.5,W+=j<W?-le:le,J+=Z<J?-le:le;return q}};function o(c,h){for(var d=h[0],p=h[1],y=h[2],g=h[3],A=1/(y-d),b=1/(g-p),M=new Array(c.length),_=0,T=c.length/2;_<T;_++)M[2*_]=s((c[2*_]-d)*A,0,1),M[2*_+1]=s((c[2*_+1]-p)*b,0,1);return M}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0});var u=e("@turf/meta"),s=6378137;function m(r){return u.geomReduce(r,function(n,f){return n+x(f)},0)}N.default=m;function x(r){var n=0,f;switch(r.type){case"Polygon":return t(r.coordinates);case"MultiPolygon":for(f=0;f<r.coordinates.length;f++)n+=t(r.coordinates[f]);return n;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function t(r){var n=0;if(r&&r.length>0){n+=Math.abs(i(r[0]));for(var f=1;f<r.length;f++)n-=Math.abs(i(r[f]))}return n}function i(r){var n,f,l,o,c,h,d,p=0,y=r.length;if(y>2){for(d=0;d<y;d++)d===y-2?(o=y-2,c=y-1,h=0):d===y-1?(o=y-1,c=0,h=1):(o=d,c=d+1,h=d+2),n=r[o],f=r[c],l=r[h],p+=(a(l[0])-a(n[0]))*Math.sin(a(f[1]));p=p*s*s/2}return p}function a(r){return r*Math.PI/180}},{"@turf/meta":63}],62:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0}),N.earthRadius=63710088e-1,N.factors={centimeters:N.earthRadius*100,centimetres:N.earthRadius*100,degrees:N.earthRadius/111325,feet:N.earthRadius*3.28084,inches:N.earthRadius*39.37,kilometers:N.earthRadius/1e3,kilometres:N.earthRadius/1e3,meters:N.earthRadius,metres:N.earthRadius,miles:N.earthRadius/1609.344,millimeters:N.earthRadius*1e3,millimetres:N.earthRadius*1e3,nauticalmiles:N.earthRadius/1852,radians:1,yards:N.earthRadius*1.0936},N.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/N.earthRadius,yards:1.0936133},N.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u(S,k,P){P===void 0&&(P={});var O={type:"Feature"};return(P.id===0||P.id)&&(O.id=P.id),P.bbox&&(O.bbox=P.bbox),O.properties=k||{},O.geometry=S,O}N.feature=u;function s(S,k,P){switch(S){case"Point":return m(k).geometry;case"LineString":return a(k).geometry;case"Polygon":return t(k).geometry;case"MultiPoint":return l(k).geometry;case"MultiLineString":return f(k).geometry;case"MultiPolygon":return o(k).geometry;default:throw new Error(S+" is invalid")}}N.geometry=s;function m(S,k,P){if(P===void 0&&(P={}),!S)throw new Error("coordinates is required");if(!Array.isArray(S))throw new Error("coordinates must be an Array");if(S.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!T(S[0])||!T(S[1]))throw new Error("coordinates must contain numbers");var O={type:"Point",coordinates:S};return u(O,k,P)}N.point=m;function x(S,k,P){return P===void 0&&(P={}),n(S.map(function(O){return m(O,k)}),P)}N.points=x;function t(S,k,P){P===void 0&&(P={});for(var O=0,F=S;O<F.length;O++){var I=F[O];if(I.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var D=0;D<I[I.length-1].length;D++)if(I[I.length-1][D]!==I[0][D])throw new Error("First and last Position are not equivalent.")}var U={type:"Polygon",coordinates:S};return u(U,k,P)}N.polygon=t;function i(S,k,P){return P===void 0&&(P={}),n(S.map(function(O){return t(O,k)}),P)}N.polygons=i;function a(S,k,P){if(P===void 0&&(P={}),S.length<2)throw new Error("coordinates must be an array of two or more positions");var O={type:"LineString",coordinates:S};return u(O,k,P)}N.lineString=a;function r(S,k,P){return P===void 0&&(P={}),n(S.map(function(O){return a(O,k)}),P)}N.lineStrings=r;function n(S,k){k===void 0&&(k={});var P={type:"FeatureCollection"};return k.id&&(P.id=k.id),k.bbox&&(P.bbox=k.bbox),P.features=S,P}N.featureCollection=n;function f(S,k,P){P===void 0&&(P={});var O={type:"MultiLineString",coordinates:S};return u(O,k,P)}N.multiLineString=f;function l(S,k,P){P===void 0&&(P={});var O={type:"MultiPoint",coordinates:S};return u(O,k,P)}N.multiPoint=l;function o(S,k,P){P===void 0&&(P={});var O={type:"MultiPolygon",coordinates:S};return u(O,k,P)}N.multiPolygon=o;function c(S,k,P){P===void 0&&(P={});var O={type:"GeometryCollection",geometries:S};return u(O,k,P)}N.geometryCollection=c;function h(S,k){if(k===void 0&&(k=0),k&&!(k>=0))throw new Error("precision must be a positive number");var P=Math.pow(10,k||0);return Math.round(S*P)/P}N.round=h;function d(S,k){k===void 0&&(k="kilometers");var P=N.factors[k];if(!P)throw new Error(k+" units is invalid");return S*P}N.radiansToLength=d;function p(S,k){k===void 0&&(k="kilometers");var P=N.factors[k];if(!P)throw new Error(k+" units is invalid");return S/P}N.lengthToRadians=p;function y(S,k){return A(p(S,k))}N.lengthToDegrees=y;function g(S){var k=S%360;return k<0&&(k+=360),k}N.bearingToAzimuth=g;function A(S){var k=S%(2*Math.PI);return k*180/Math.PI}N.radiansToDegrees=A;function b(S){var k=S%360;return k*Math.PI/180}N.degreesToRadians=b;function M(S,k,P){if(k===void 0&&(k="kilometers"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("length must be a positive number");return d(p(S,k),P)}N.convertLength=M;function _(S,k,P){if(k===void 0&&(k="meters"),P===void 0&&(P="kilometers"),!(S>=0))throw new Error("area must be a positive number");var O=N.areaFactors[k];if(!O)throw new Error("invalid original units");var F=N.areaFactors[P];if(!F)throw new Error("invalid final units");return S/O*F}N.convertArea=_;function T(S){return!isNaN(S)&&S!==null&&!Array.isArray(S)}N.isNumber=T;function w(S){return!!S&&S.constructor===Object}N.isObject=w;function v(S){if(!S)throw new Error("bbox is required");if(!Array.isArray(S))throw new Error("bbox must be an Array");if(S.length!==4&&S.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");S.forEach(function(k){if(!T(k))throw new Error("bbox must only contain numbers")})}N.validateBBox=v;function L(S){if(!S)throw new Error("id is required");if(["string","number"].indexOf(typeof S)===-1)throw new Error("id must be a number or a string")}N.validateId=L},{}],63:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0});var u=e("@turf/helpers");function s(A,b,M){if(A!==null)for(var _,T,w,v,L,S,k,P=0,O=0,F,I=A.type,D=I==="FeatureCollection",U=I==="Feature",B=D?A.features.length:1,j=0;j<B;j++){k=D?A.features[j].geometry:U?A.geometry:A,F=k?k.type==="GeometryCollection":!1,L=F?k.geometries.length:1;for(var Z=0;Z<L;Z++){var ee=0,q=0;if(v=F?k.geometries[Z]:k,v!==null){S=v.coordinates;var W=v.type;switch(P=M&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(b(S,O,j,ee,q)===!1)return!1;O++,ee++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(b(S[_],O,j,ee,q)===!1)return!1;O++,W==="MultiPoint"&&ee++}W==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(T=0;T<S[_].length-P;T++){if(b(S[_][T],O,j,ee,q)===!1)return!1;O++}W==="MultiLineString"&&ee++,W==="Polygon"&&q++}W==="Polygon"&&ee++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(q=0,T=0;T<S[_].length;T++){for(w=0;w<S[_][T].length-P;w++){if(b(S[_][T][w],O,j,ee,q)===!1)return!1;O++}q++}ee++}break;case"GeometryCollection":for(_=0;_<v.geometries.length;_++)if(s(v.geometries[_],b,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(A,b,M,_){var T=M;return s(A,function(w,v,L,S,k){v===0&&M===void 0?T=w:T=b(T,w,v,L,S,k)},_),T}function x(A,b){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&b(A.features[M].properties,M)!==!1;M++);break;case"Feature":b(A.properties,0);break}}function t(A,b,M){var _=M;return x(A,function(T,w){w===0&&M===void 0?_=T:_=b(_,T,w)}),_}function i(A,b){if(A.type==="Feature")b(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&b(A.features[M],M)!==!1;M++);}function a(A,b,M){var _=M;return i(A,function(T,w){w===0&&M===void 0?_=T:_=b(_,T,w)}),_}function r(A){var b=[];return s(A,function(M){b.push(M)}),b}function n(A,b){var M,_,T,w,v,L,S,k,P,O,F=0,I=A.type==="FeatureCollection",D=A.type==="Feature",U=I?A.features.length:1;for(M=0;M<U;M++){for(L=I?A.features[M].geometry:D?A.geometry:A,k=I?A.features[M].properties:D?A.properties:{},P=I?A.features[M].bbox:D?A.bbox:void 0,O=I?A.features[M].id:D?A.id:void 0,S=L?L.type==="GeometryCollection":!1,v=S?L.geometries.length:1,T=0;T<v;T++){if(w=S?L.geometries[T]:L,w===null){if(b(null,F,k,P,O)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(b(w,F,k,P,O)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<w.geometries.length;_++)if(b(w.geometries[_],F,k,P,O)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}F++}}function f(A,b,M){var _=M;return n(A,function(T,w,v,L,S){w===0&&M===void 0?_=T:_=b(_,T,w,v,L,S)}),_}function l(A,b){n(A,function(M,_,T,w,v){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return b(u.feature(M,T,{bbox:w,id:v}),_,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],O={type:S,coordinates:P};if(b(u.feature(O,T),_,k)===!1)return!1}})}function o(A,b,M){var _=M;return l(A,function(T,w,v){w===0&&v===0&&M===void 0?_=T:_=b(_,T,w,v)}),_}function c(A,b){l(A,function(M,_,T){var w=0;if(!!M.geometry){var v=M.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var L,S=0,k=0,P=0;if(s(M,function(O,F,I,D,U){if(L===void 0||_>S||D>k||U>P){L=O,S=_,k=D,P=U,w=0;return}var B=u.lineString([L,O],M.properties);if(b(B,_,T,U,w)===!1)return!1;w++,L=O})===!1)return!1}}})}function h(A,b,M){var _=M,T=!1;return c(A,function(w,v,L,S,k){T===!1&&M===void 0?_=w:_=b(_,w,v,L,S,k),T=!0}),_}function d(A,b){if(!A)throw new Error("geojson is required");l(A,function(M,_,T){if(M.geometry!==null){var w=M.geometry.type,v=M.geometry.coordinates;switch(w){case"LineString":if(b(M,_,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<v.length;L++)if(b(u.lineString(v[L],M.properties),_,T,L)===!1)return!1;break}}})}function p(A,b,M){var _=M;return d(A,function(T,w,v,L){w===0&&M===void 0?_=T:_=b(_,T,w,v,L)}),_}function y(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,_=b.multiFeatureIndex||0,T=b.geometryIndex||0,w=b.segmentIndex||0,v=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),v=v||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":v=v||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=S.length+w-1),u.lineString([S[w],S[w+1]],v,b);case"Polygon":return T<0&&(T=S.length+T),w<0&&(w=S[T].length+w-1),u.lineString([S[T][w],S[T][w+1]],v,b);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w-1),u.lineString([S[_][w],S[_][w+1]],v,b);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),w<0&&(w=S[_][T].length-w-1),u.lineString([S[_][T][w],S[_][T][w+1]],v,b)}throw new Error("geojson is invalid")}function g(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,_=b.multiFeatureIndex||0,T=b.geometryIndex||0,w=b.coordIndex||0,v=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),v=v||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":v=v||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return u.point(S,v,b);case"MultiPoint":return _<0&&(_=S.length+_),u.point(S[_],v,b);case"LineString":return w<0&&(w=S.length+w),u.point(S[w],v,b);case"Polygon":return T<0&&(T=S.length+T),w<0&&(w=S[T].length+w),u.point(S[T][w],v,b);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w),u.point(S[_][w],v,b);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),w<0&&(w=S[_][T].length-w),u.point(S[_][T][w],v,b)}throw new Error("geojson is invalid")}N.coordEach=s,N.coordReduce=m,N.propEach=x,N.propReduce=t,N.featureEach=i,N.featureReduce=a,N.coordAll=r,N.geomEach=n,N.geomReduce=f,N.flattenEach=l,N.flattenReduce=o,N.segmentEach=c,N.segmentReduce=h,N.lineEach=d,N.lineReduce=p,N.findSegment=y,N.findPoint=g},{"@turf/helpers":62}],64:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0});var u=e("@turf/meta");function s(m){var x=[1/0,1/0,-1/0,-1/0];return u.coordEach(m,function(t){x[0]>t[0]&&(x[0]=t[0]),x[1]>t[1]&&(x[1]=t[1]),x[2]<t[0]&&(x[2]=t[0]),x[3]<t[1]&&(x[3]=t[1])}),x}s.default=s,N.default=s},{"@turf/meta":66}],65:[function(e,z,N){arguments[4][62][0].apply(N,arguments)},{dup:62}],66:[function(e,z,N){arguments[4][63][0].apply(N,arguments)},{"@turf/helpers":65,dup:63}],67:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0});var u=e("@turf/meta"),s=e("@turf/helpers");function m(x,t){t===void 0&&(t={});var i=0,a=0,r=0;return u.coordEach(x,function(n){i+=n[0],a+=n[1],r++}),s.point([i/r,a/r],t.properties)}N.default=m},{"@turf/helpers":68,"@turf/meta":69}],68:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0}),N.earthRadius=63710088e-1,N.factors={centimeters:N.earthRadius*100,centimetres:N.earthRadius*100,degrees:N.earthRadius/111325,feet:N.earthRadius*3.28084,inches:N.earthRadius*39.37,kilometers:N.earthRadius/1e3,kilometres:N.earthRadius/1e3,meters:N.earthRadius,metres:N.earthRadius,miles:N.earthRadius/1609.344,millimeters:N.earthRadius*1e3,millimetres:N.earthRadius*1e3,nauticalmiles:N.earthRadius/1852,radians:1,yards:N.earthRadius/1.0936},N.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:1/1e3,kilometres:1/1e3,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/N.earthRadius,yards:1/1.0936},N.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046};function u(U,B,j){j===void 0&&(j={});var Z={type:"Feature"};return(j.id===0||j.id)&&(Z.id=j.id),j.bbox&&(Z.bbox=j.bbox),Z.properties=B||{},Z.geometry=U,Z}N.feature=u;function s(U,B,j){switch(U){case"Point":return m(B).geometry;case"LineString":return a(B).geometry;case"Polygon":return t(B).geometry;case"MultiPoint":return l(B).geometry;case"MultiLineString":return f(B).geometry;case"MultiPolygon":return o(B).geometry;default:throw new Error(U+" is invalid")}}N.geometry=s;function m(U,B,j){j===void 0&&(j={});var Z={type:"Point",coordinates:U};return u(Z,B,j)}N.point=m;function x(U,B,j){return j===void 0&&(j={}),n(U.map(function(Z){return m(Z,B)}),j)}N.points=x;function t(U,B,j){j===void 0&&(j={});for(var Z=0,ee=U;Z<ee.length;Z++){var q=ee[Z];if(q.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var W=0;W<q[q.length-1].length;W++)if(q[q.length-1][W]!==q[0][W])throw new Error("First and last Position are not equivalent.")}var J={type:"Polygon",coordinates:U};return u(J,B,j)}N.polygon=t;function i(U,B,j){return j===void 0&&(j={}),n(U.map(function(Z){return t(Z,B)}),j)}N.polygons=i;function a(U,B,j){if(j===void 0&&(j={}),U.length<2)throw new Error("coordinates must be an array of two or more positions");var Z={type:"LineString",coordinates:U};return u(Z,B,j)}N.lineString=a;function r(U,B,j){return j===void 0&&(j={}),n(U.map(function(Z){return a(Z,B)}),j)}N.lineStrings=r;function n(U,B){B===void 0&&(B={});var j={type:"FeatureCollection"};return B.id&&(j.id=B.id),B.bbox&&(j.bbox=B.bbox),j.features=U,j}N.featureCollection=n;function f(U,B,j){j===void 0&&(j={});var Z={type:"MultiLineString",coordinates:U};return u(Z,B,j)}N.multiLineString=f;function l(U,B,j){j===void 0&&(j={});var Z={type:"MultiPoint",coordinates:U};return u(Z,B,j)}N.multiPoint=l;function o(U,B,j){j===void 0&&(j={});var Z={type:"MultiPolygon",coordinates:U};return u(Z,B,j)}N.multiPolygon=o;function c(U,B,j){j===void 0&&(j={});var Z={type:"GeometryCollection",geometries:U};return u(Z,B,j)}N.geometryCollection=c;function h(U,B){if(B===void 0&&(B=0),B&&!(B>=0))throw new Error("precision must be a positive number");var j=Math.pow(10,B||0);return Math.round(U*j)/j}N.round=h;function d(U,B){B===void 0&&(B="kilometers");var j=N.factors[B];if(!j)throw new Error(B+" units is invalid");return U*j}N.radiansToLength=d;function p(U,B){B===void 0&&(B="kilometers");var j=N.factors[B];if(!j)throw new Error(B+" units is invalid");return U/j}N.lengthToRadians=p;function y(U,B){return A(p(U,B))}N.lengthToDegrees=y;function g(U){var B=U%360;return B<0&&(B+=360),B}N.bearingToAzimuth=g;function A(U){var B=U%(2*Math.PI);return B*180/Math.PI}N.radiansToDegrees=A;function b(U){var B=U%360;return B*Math.PI/180}N.degreesToRadians=b;function M(U,B,j){if(B===void 0&&(B="kilometers"),j===void 0&&(j="kilometers"),!(U>=0))throw new Error("length must be a positive number");return d(p(U,B),j)}N.convertLength=M;function _(U,B,j){if(B===void 0&&(B="meters"),j===void 0&&(j="kilometers"),!(U>=0))throw new Error("area must be a positive number");var Z=N.areaFactors[B];if(!Z)throw new Error("invalid original units");var ee=N.areaFactors[j];if(!ee)throw new Error("invalid final units");return U/Z*ee}N.convertArea=_;function T(U){return!isNaN(U)&&U!==null&&!Array.isArray(U)&&!/^\s*$/.test(U)}N.isNumber=T;function w(U){return!!U&&U.constructor===Object}N.isObject=w;function v(U){if(!U)throw new Error("bbox is required");if(!Array.isArray(U))throw new Error("bbox must be an Array");if(U.length!==4&&U.length!==6)throw new Error("bbox must be an Array of 4 or 6 numbers");U.forEach(function(B){if(!T(B))throw new Error("bbox must only contain numbers")})}N.validateBBox=v;function L(U){if(!U)throw new Error("id is required");if(["string","number"].indexOf(typeof U)===-1)throw new Error("id must be a number or a string")}N.validateId=L;function S(){throw new Error("method has been renamed to `radiansToDegrees`")}N.radians2degrees=S;function k(){throw new Error("method has been renamed to `degreesToRadians`")}N.degrees2radians=k;function P(){throw new Error("method has been renamed to `lengthToDegrees`")}N.distanceToDegrees=P;function O(){throw new Error("method has been renamed to `lengthToRadians`")}N.distanceToRadians=O;function F(){throw new Error("method has been renamed to `radiansToLength`")}N.radiansToDistance=F;function I(){throw new Error("method has been renamed to `bearingToAzimuth`")}N.bearingToAngle=I;function D(){throw new Error("method has been renamed to `convertLength`")}N.convertDistance=D},{}],69:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0});var u=e("@turf/helpers");function s(A,b,M){if(A!==null)for(var _,T,w,v,L,S,k,P=0,O=0,F,I=A.type,D=I==="FeatureCollection",U=I==="Feature",B=D?A.features.length:1,j=0;j<B;j++){k=D?A.features[j].geometry:U?A.geometry:A,F=k?k.type==="GeometryCollection":!1,L=F?k.geometries.length:1;for(var Z=0;Z<L;Z++){var ee=0,q=0;if(v=F?k.geometries[Z]:k,v!==null){S=v.coordinates;var W=v.type;switch(P=M&&(W==="Polygon"||W==="MultiPolygon")?1:0,W){case null:break;case"Point":if(b(S,O,j,ee,q)===!1)return!1;O++,ee++;break;case"LineString":case"MultiPoint":for(_=0;_<S.length;_++){if(b(S[_],O,j,ee,q)===!1)return!1;O++,W==="MultiPoint"&&ee++}W==="LineString"&&ee++;break;case"Polygon":case"MultiLineString":for(_=0;_<S.length;_++){for(T=0;T<S[_].length-P;T++){if(b(S[_][T],O,j,ee,q)===!1)return!1;O++}W==="MultiLineString"&&ee++,W==="Polygon"&&q++}W==="Polygon"&&ee++;break;case"MultiPolygon":for(_=0;_<S.length;_++){for(q=0,T=0;T<S[_].length;T++){for(w=0;w<S[_][T].length-P;w++){if(b(S[_][T][w],O,j,ee,q)===!1)return!1;O++}q++}ee++}break;case"GeometryCollection":for(_=0;_<v.geometries.length;_++)if(s(v.geometries[_],b,M)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function m(A,b,M,_){var T=M;return s(A,function(w,v,L,S,k){v===0&&M===void 0?T=w:T=b(T,w,v,L,S,k)},_),T}function x(A,b){var M;switch(A.type){case"FeatureCollection":for(M=0;M<A.features.length&&b(A.features[M].properties,M)!==!1;M++);break;case"Feature":b(A.properties,0);break}}function t(A,b,M){var _=M;return x(A,function(T,w){w===0&&M===void 0?_=T:_=b(_,T,w)}),_}function i(A,b){if(A.type==="Feature")b(A,0);else if(A.type==="FeatureCollection")for(var M=0;M<A.features.length&&b(A.features[M],M)!==!1;M++);}function a(A,b,M){var _=M;return i(A,function(T,w){w===0&&M===void 0?_=T:_=b(_,T,w)}),_}function r(A){var b=[];return s(A,function(M){b.push(M)}),b}function n(A,b){var M,_,T,w,v,L,S,k,P,O,F=0,I=A.type==="FeatureCollection",D=A.type==="Feature",U=I?A.features.length:1;for(M=0;M<U;M++){for(L=I?A.features[M].geometry:D?A.geometry:A,k=I?A.features[M].properties:D?A.properties:{},P=I?A.features[M].bbox:D?A.bbox:void 0,O=I?A.features[M].id:D?A.id:void 0,S=L?L.type==="GeometryCollection":!1,v=S?L.geometries.length:1,T=0;T<v;T++){if(w=S?L.geometries[T]:L,w===null){if(b(null,F,k,P,O)===!1)return!1;continue}switch(w.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(b(w,F,k,P,O)===!1)return!1;break}case"GeometryCollection":{for(_=0;_<w.geometries.length;_++)if(b(w.geometries[_],F,k,P,O)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}F++}}function f(A,b,M){var _=M;return n(A,function(T,w,v,L,S){w===0&&M===void 0?_=T:_=b(_,T,w,v,L,S)}),_}function l(A,b){n(A,function(M,_,T,w,v){var L=M===null?null:M.type;switch(L){case null:case"Point":case"LineString":case"Polygon":return b(u.feature(M,T,{bbox:w,id:v}),_,0)===!1?!1:void 0}var S;switch(L){case"MultiPoint":S="Point";break;case"MultiLineString":S="LineString";break;case"MultiPolygon":S="Polygon";break}for(var k=0;k<M.coordinates.length;k++){var P=M.coordinates[k],O={type:S,coordinates:P};if(b(u.feature(O,T),_,k)===!1)return!1}})}function o(A,b,M){var _=M;return l(A,function(T,w,v){w===0&&v===0&&M===void 0?_=T:_=b(_,T,w,v)}),_}function c(A,b){l(A,function(M,_,T){var w=0;if(!!M.geometry){var v=M.geometry.type;if(!(v==="Point"||v==="MultiPoint")){var L,S=0,k=0,P=0;if(s(M,function(O,F,I,D,U){if(L===void 0||_>S||D>k||U>P){L=O,S=_,k=D,P=U,w=0;return}var B=u.lineString([L,O],M.properties);if(b(B,_,T,U,w)===!1)return!1;w++,L=O})===!1)return!1}}})}function h(A,b,M){var _=M,T=!1;return c(A,function(w,v,L,S,k){T===!1&&M===void 0?_=w:_=b(_,w,v,L,S,k),T=!0}),_}function d(A,b){if(!A)throw new Error("geojson is required");l(A,function(M,_,T){if(M.geometry!==null){var w=M.geometry.type,v=M.geometry.coordinates;switch(w){case"LineString":if(b(M,_,T,0,0)===!1)return!1;break;case"Polygon":for(var L=0;L<v.length;L++)if(b(u.lineString(v[L],M.properties),_,T,L)===!1)return!1;break}}})}function p(A,b,M){var _=M;return d(A,function(T,w,v,L){w===0&&M===void 0?_=T:_=b(_,T,w,v,L)}),_}function y(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,_=b.multiFeatureIndex||0,T=b.geometryIndex||0,w=b.segmentIndex||0,v=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),v=v||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":v=v||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":case"MultiPoint":return null;case"LineString":return w<0&&(w=S.length+w-1),u.lineString([S[w],S[w+1]],v,b);case"Polygon":return T<0&&(T=S.length+T),w<0&&(w=S[T].length+w-1),u.lineString([S[T][w],S[T][w+1]],v,b);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w-1),u.lineString([S[_][w],S[_][w+1]],v,b);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),w<0&&(w=S[_][T].length-w-1),u.lineString([S[_][T][w],S[_][T][w+1]],v,b)}throw new Error("geojson is invalid")}function g(A,b){if(b=b||{},!u.isObject(b))throw new Error("options is invalid");var M=b.featureIndex||0,_=b.multiFeatureIndex||0,T=b.geometryIndex||0,w=b.coordIndex||0,v=b.properties,L;switch(A.type){case"FeatureCollection":M<0&&(M=A.features.length+M),v=v||A.features[M].properties,L=A.features[M].geometry;break;case"Feature":v=v||A.properties,L=A.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":L=A;break;default:throw new Error("geojson is invalid")}if(L===null)return null;var S=L.coordinates;switch(L.type){case"Point":return u.point(S,v,b);case"MultiPoint":return _<0&&(_=S.length+_),u.point(S[_],v,b);case"LineString":return w<0&&(w=S.length+w),u.point(S[w],v,b);case"Polygon":return T<0&&(T=S.length+T),w<0&&(w=S[T].length+w),u.point(S[T][w],v,b);case"MultiLineString":return _<0&&(_=S.length+_),w<0&&(w=S[_].length+w),u.point(S[_][w],v,b);case"MultiPolygon":return _<0&&(_=S.length+_),T<0&&(T=S[_].length+T),w<0&&(w=S[_][T].length-w),u.point(S[_][T][w],v,b)}throw new Error("geojson is invalid")}N.coordEach=s,N.coordReduce=m,N.propEach=x,N.propReduce=t,N.featureEach=i,N.featureReduce=a,N.coordAll=r,N.geomEach=n,N.geomReduce=f,N.flattenEach=l,N.flattenReduce=o,N.segmentEach=c,N.segmentReduce=h,N.lineEach=d,N.lineReduce=p,N.findSegment=y,N.findPoint=g},{"@turf/helpers":68}],70:[function(e,z,N){z.exports=u;function u(s){var m=0,x=0,t=0,i=0;return s.map(function(a){a=a.slice();var r=a[0],n=r.toUpperCase();if(r!=n)switch(a[0]=n,r){case"a":a[6]+=t,a[7]+=i;break;case"v":a[1]+=i;break;case"h":a[1]+=t;break;default:for(var f=1;f<a.length;)a[f++]+=t,a[f++]+=i}switch(n){case"Z":t=m,i=x;break;case"H":t=a[1];break;case"V":i=a[1];break;case"M":t=m=a[1],i=x=a[2];break;default:t=a[a.length-2],i=a[a.length-1]}return a})}},{}],71:[function(e,z,N){z.exports=u;function u(s,m){if(!s||s.length==null)throw Error("Argument should be an array");m==null?m=1:m=Math.floor(m);for(var x=Array(m*2),t=0;t<m;t++){for(var i=-1/0,a=1/0,r=t,n=s.length;r<n;r+=m)s[r]>i&&(i=s[r]),s[r]<a&&(a=s[r]);x[t]=a,x[m+t]=i}return x}},{}],72:[function(e,z,N){z.exports=function(u,s,m){if(typeof Array.prototype.findIndex=="function")return u.findIndex(s,m);if(typeof s!="function")throw new TypeError("predicate must be a function");var x=Object(u),t=x.length;if(t===0)return-1;for(var i=0;i<t;i++)if(s.call(m,x[i],i,x))return i;return-1}},{}],73:[function(e,z,N){var u=e("array-bounds");z.exports=s;function s(m,x,t){if(!m||m.length==null)throw Error("Argument should be an array");x==null&&(x=1),t==null&&(t=u(m,x));for(var i=0;i<x;i++){var a=t[x+i],r=t[i],n=i,f=m.length;if(a===1/0&&r===-1/0)for(n=i;n<f;n+=x)m[n]=m[n]===a?1:m[n]===r?0:.5;else if(a===1/0)for(n=i;n<f;n+=x)m[n]=m[n]===a?1:0;else if(r===-1/0)for(n=i;n<f;n+=x)m[n]=m[n]===r?0:1;else{var l=a-r;for(n=i;n<f;n+=x)isNaN(m[n])||(m[n]=l===0?.5:(m[n]-r)/l)}}return m}},{"array-bounds":71}],74:[function(e,z,N){z.exports=function(s,m){var x=typeof s=="number",t=typeof m=="number";x&&!t?(m=s,s=0):!x&&!t&&(s=0,m=0),s=s|0,m=m|0;var i=m-s;if(i<0)throw new Error("array length must be positive");for(var a=new Array(i),r=0,n=s;r<i;r++,n++)a[r]=n;return a}},{}],75:[function(e,z,N){(function(u){(function(){var s=e("object-assign");/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */function m(k,P){if(k===P)return 0;for(var O=k.length,F=P.length,I=0,D=Math.min(O,F);I<D;++I)if(k[I]!==P[I]){O=k[I],F=P[I];break}return O<F?-1:F<O?1:0}function x(k){return u.Buffer&&typeof u.Buffer.isBuffer=="function"?u.Buffer.isBuffer(k):!!(k!=null&&k._isBuffer)}var t=e("util/"),i=Object.prototype.hasOwnProperty,a=Array.prototype.slice,r=function(){return function(){}.name==="foo"}();function n(k){return Object.prototype.toString.call(k)}function f(k){return x(k)||typeof u.ArrayBuffer!="function"?!1:typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(k):k?!!(k instanceof DataView||k.buffer&&k.buffer instanceof ArrayBuffer):!1}var l=z.exports=g,o=/\s*function\s+([^\(\s]*)\s*/;function c(k){if(!!t.isFunction(k)){if(r)return k.name;var P=k.toString(),O=P.match(o);return O&&O[1]}}l.AssertionError=function(P){this.name="AssertionError",this.actual=P.actual,this.expected=P.expected,this.operator=P.operator,P.message?(this.message=P.message,this.generatedMessage=!1):(this.message=p(this),this.generatedMessage=!0);var O=P.stackStartFunction||y;if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var F=new Error;if(F.stack){var I=F.stack,D=c(O),U=I.indexOf(`
`+D);if(U>=0){var B=I.indexOf(`
`,U+1);I=I.substring(B+1)}this.stack=I}}},t.inherits(l.AssertionError,Error);function h(k,P){return typeof k=="string"?k.length<P?k:k.slice(0,P):k}function d(k){if(r||!t.isFunction(k))return t.inspect(k);var P=c(k),O=P?": "+P:"";return"[Function"+O+"]"}function p(k){return h(d(k.actual),128)+" "+k.operator+" "+h(d(k.expected),128)}function y(k,P,O,F,I){throw new l.AssertionError({message:O,actual:k,expected:P,operator:F,stackStartFunction:I})}l.fail=y;function g(k,P){k||y(k,!0,P,"==",l.ok)}l.ok=g,l.equal=function(P,O,F){P!=O&&y(P,O,F,"==",l.equal)},l.notEqual=function(P,O,F){P==O&&y(P,O,F,"!=",l.notEqual)},l.deepEqual=function(P,O,F){A(P,O,!1)||y(P,O,F,"deepEqual",l.deepEqual)},l.deepStrictEqual=function(P,O,F){A(P,O,!0)||y(P,O,F,"deepStrictEqual",l.deepStrictEqual)};function A(k,P,O,F){if(k===P)return!0;if(x(k)&&x(P))return m(k,P)===0;if(t.isDate(k)&&t.isDate(P))return k.getTime()===P.getTime();if(t.isRegExp(k)&&t.isRegExp(P))return k.source===P.source&&k.global===P.global&&k.multiline===P.multiline&&k.lastIndex===P.lastIndex&&k.ignoreCase===P.ignoreCase;if((k===null||typeof k!="object")&&(P===null||typeof P!="object"))return O?k===P:k==P;if(f(k)&&f(P)&&n(k)===n(P)&&!(k instanceof Float32Array||k instanceof Float64Array))return m(new Uint8Array(k.buffer),new Uint8Array(P.buffer))===0;if(x(k)!==x(P))return!1;F=F||{actual:[],expected:[]};var I=F.actual.indexOf(k);return I!==-1&&I===F.expected.indexOf(P)?!0:(F.actual.push(k),F.expected.push(P),M(k,P,O,F))}function b(k){return Object.prototype.toString.call(k)=="[object Arguments]"}function M(k,P,O,F){if(k==null||P===null||P===void 0)return!1;if(t.isPrimitive(k)||t.isPrimitive(P))return k===P;if(O&&Object.getPrototypeOf(k)!==Object.getPrototypeOf(P))return!1;var I=b(k),D=b(P);if(I&&!D||!I&&D)return!1;if(I)return k=a.call(k),P=a.call(P),A(k,P,O);var U=S(k),B=S(P),j,Z;if(U.length!==B.length)return!1;for(U.sort(),B.sort(),Z=U.length-1;Z>=0;Z--)if(U[Z]!==B[Z])return!1;for(Z=U.length-1;Z>=0;Z--)if(j=U[Z],!A(k[j],P[j],O,F))return!1;return!0}l.notDeepEqual=function(P,O,F){A(P,O,!1)&&y(P,O,F,"notDeepEqual",l.notDeepEqual)},l.notDeepStrictEqual=_;function _(k,P,O){A(k,P,!0)&&y(k,P,O,"notDeepStrictEqual",_)}l.strictEqual=function(P,O,F){P!==O&&y(P,O,F,"===",l.strictEqual)},l.notStrictEqual=function(P,O,F){P===O&&y(P,O,F,"!==",l.notStrictEqual)};function T(k,P){if(!k||!P)return!1;if(Object.prototype.toString.call(P)=="[object RegExp]")return P.test(k);try{if(k instanceof P)return!0}catch{}return Error.isPrototypeOf(P)?!1:P.call({},k)===!0}function w(k){var P;try{k()}catch(O){P=O}return P}function v(k,P,O,F){var I;if(typeof P!="function")throw new TypeError('"block" argument must be a function');typeof O=="string"&&(F=O,O=null),I=w(P),F=(O&&O.name?" ("+O.name+").":".")+(F?" "+F:"."),k&&!I&&y(I,O,"Missing expected exception"+F);var D=typeof F=="string",U=!k&&t.isError(I),B=!k&&I&&!O;if((U&&D&&T(I,O)||B)&&y(I,O,"Got unwanted exception"+F),k&&I&&O&&!T(I,O)||!k&&I)throw I}l.throws=function(k,P,O){v(!0,k,P,O)},l.doesNotThrow=function(k,P,O){v(!1,k,P,O)},l.ifError=function(k){if(k)throw k};function L(k,P){k||y(k,!0,P,"==",L)}l.strict=s(L,l,{equal:l.strictEqual,deepEqual:l.deepStrictEqual,notEqual:l.notStrictEqual,notDeepEqual:l.notDeepStrictEqual}),l.strict.strict=l.strict;var S=Object.keys||function(k){var P=[];for(var O in k)i.call(k,O)&&P.push(O);return P}}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"object-assign":247,"util/":78}],76:[function(e,z,N){typeof Object.create=="function"?z.exports=function(s,m){s.super_=m,s.prototype=Object.create(m.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}})}:z.exports=function(s,m){s.super_=m;var x=function(){};x.prototype=m.prototype,s.prototype=new x,s.prototype.constructor=s}},{}],77:[function(e,z,N){z.exports=function(s){return s&&typeof s=="object"&&typeof s.copy=="function"&&typeof s.fill=="function"&&typeof s.readUInt8=="function"}},{}],78:[function(e,z,N){(function(u,s){(function(){var m=/%[sdj%]/g;N.format=function(B){if(!M(B)){for(var j=[],Z=0;Z<arguments.length;Z++)j.push(i(arguments[Z]));return j.join(" ")}for(var Z=1,ee=arguments,q=ee.length,W=String(B).replace(m,function(le){if(le==="%%")return"%";if(Z>=q)return le;switch(le){case"%s":return String(ee[Z++]);case"%d":return Number(ee[Z++]);case"%j":try{return JSON.stringify(ee[Z++])}catch{return"[Circular]"}default:return le}}),J=ee[Z];Z<q;J=ee[++Z])g(J)||!v(J)?W+=" "+J:W+=" "+i(J);return W},N.deprecate=function(B,j){if(T(s.process))return function(){return N.deprecate(B,j).apply(this,arguments)};if(u.noDeprecation===!0)return B;var Z=!1;function ee(){if(!Z){if(u.throwDeprecation)throw new Error(j);u.traceDeprecation?console.trace(j):console.error(j),Z=!0}return B.apply(this,arguments)}return ee};var x={},t;N.debuglog=function(B){if(T(t)&&(t=""),B=B.toUpperCase(),!x[B])if(new RegExp("\\b"+B+"\\b","i").test(t)){var j=u.pid;x[B]=function(){var Z=N.format.apply(N,arguments);console.error("%s %d: %s",B,j,Z)}}else x[B]=function(){};return x[B]};function i(B,j){var Z={seen:[],stylize:r};return arguments.length>=3&&(Z.depth=arguments[2]),arguments.length>=4&&(Z.colors=arguments[3]),y(j)?Z.showHidden=j:j&&N._extend(Z,j),T(Z.showHidden)&&(Z.showHidden=!1),T(Z.depth)&&(Z.depth=2),T(Z.colors)&&(Z.colors=!1),T(Z.customInspect)&&(Z.customInspect=!0),Z.colors&&(Z.stylize=a),f(Z,B,Z.depth)}N.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"};function a(B,j){var Z=i.styles[j];return Z?"["+i.colors[Z][0]+"m"+B+"["+i.colors[Z][1]+"m":B}function r(B,j){return B}function n(B){var j={};return B.forEach(function(Z,ee){j[Z]=!0}),j}function f(B,j,Z){if(B.customInspect&&j&&k(j.inspect)&&j.inspect!==N.inspect&&!(j.constructor&&j.constructor.prototype===j)){var ee=j.inspect(Z,B);return M(ee)||(ee=f(B,ee,Z)),ee}var q=l(B,j);if(q)return q;var W=Object.keys(j),J=n(W);if(B.showHidden&&(W=Object.getOwnPropertyNames(j)),S(j)&&(W.indexOf("message")>=0||W.indexOf("description")>=0))return o(j);if(W.length===0){if(k(j)){var le=j.name?": "+j.name:"";return B.stylize("[Function"+le+"]","special")}if(w(j))return B.stylize(RegExp.prototype.toString.call(j),"regexp");if(L(j))return B.stylize(Date.prototype.toString.call(j),"date");if(S(j))return o(j)}var fe="",se=!1,H=["{","}"];if(p(j)&&(se=!0,H=["[","]"]),k(j)){var Y=j.name?": "+j.name:"";fe=" [Function"+Y+"]"}if(w(j)&&(fe=" "+RegExp.prototype.toString.call(j)),L(j)&&(fe=" "+Date.prototype.toUTCString.call(j)),S(j)&&(fe=" "+o(j)),W.length===0&&(!se||j.length==0))return H[0]+fe+H[1];if(Z<0)return w(j)?B.stylize(RegExp.prototype.toString.call(j),"regexp"):B.stylize("[Object]","special");B.seen.push(j);var ne;return se?ne=c(B,j,Z,J,W):ne=W.map(function(te){return h(B,j,Z,J,te,se)}),B.seen.pop(),d(ne,fe,H)}function l(B,j){if(T(j))return B.stylize("undefined","undefined");if(M(j)){var Z="'"+JSON.stringify(j).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return B.stylize(Z,"string")}if(b(j))return B.stylize(""+j,"number");if(y(j))return B.stylize(""+j,"boolean");if(g(j))return B.stylize("null","null")}function o(B){return"["+Error.prototype.toString.call(B)+"]"}function c(B,j,Z,ee,q){for(var W=[],J=0,le=j.length;J<le;++J)U(j,String(J))?W.push(h(B,j,Z,ee,String(J),!0)):W.push("");return q.forEach(function(fe){fe.match(/^\d+$/)||W.push(h(B,j,Z,ee,fe,!0))}),W}function h(B,j,Z,ee,q,W){var J,le,fe;if(fe=Object.getOwnPropertyDescriptor(j,q)||{value:j[q]},fe.get?fe.set?le=B.stylize("[Getter/Setter]","special"):le=B.stylize("[Getter]","special"):fe.set&&(le=B.stylize("[Setter]","special")),U(ee,q)||(J="["+q+"]"),le||(B.seen.indexOf(fe.value)<0?(g(Z)?le=f(B,fe.value,null):le=f(B,fe.value,Z-1),le.indexOf(`
`)>-1&&(W?le=le.split(`
`).map(function(se){return"  "+se}).join(`
`).substr(2):le=`
`+le.split(`
`).map(function(se){return"   "+se}).join(`
`))):le=B.stylize("[Circular]","special")),T(J)){if(W&&q.match(/^\d+$/))return le;J=JSON.stringify(""+q),J.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(J=J.substr(1,J.length-2),J=B.stylize(J,"name")):(J=J.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),J=B.stylize(J,"string"))}return J+": "+le}function d(B,j,Z){var ee=B.reduce(function(q,W){return W.indexOf(`
`)>=0,q+W.replace(/\u001b\[\d\d?m/g,"").length+1},0);return ee>60?Z[0]+(j===""?"":j+`
 `)+" "+B.join(`,
  `)+" "+Z[1]:Z[0]+j+" "+B.join(", ")+" "+Z[1]}function p(B){return Array.isArray(B)}N.isArray=p;function y(B){return typeof B=="boolean"}N.isBoolean=y;function g(B){return B===null}N.isNull=g;function A(B){return B==null}N.isNullOrUndefined=A;function b(B){return typeof B=="number"}N.isNumber=b;function M(B){return typeof B=="string"}N.isString=M;function _(B){return typeof B=="symbol"}N.isSymbol=_;function T(B){return B===void 0}N.isUndefined=T;function w(B){return v(B)&&O(B)==="[object RegExp]"}N.isRegExp=w;function v(B){return typeof B=="object"&&B!==null}N.isObject=v;function L(B){return v(B)&&O(B)==="[object Date]"}N.isDate=L;function S(B){return v(B)&&(O(B)==="[object Error]"||B instanceof Error)}N.isError=S;function k(B){return typeof B=="function"}N.isFunction=k;function P(B){return B===null||typeof B=="boolean"||typeof B=="number"||typeof B=="string"||typeof B=="symbol"||typeof B=="undefined"}N.isPrimitive=P,N.isBuffer=e("./support/isBuffer");function O(B){return Object.prototype.toString.call(B)}function F(B){return B<10?"0"+B.toString(10):B.toString(10)}var I=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var B=new Date,j=[F(B.getHours()),F(B.getMinutes()),F(B.getSeconds())].join(":");return[B.getDate(),I[B.getMonth()],j].join(" ")}N.log=function(){console.log("%s - %s",D(),N.format.apply(N,arguments))},N.inherits=e("inherits"),N._extend=function(B,j){if(!j||!v(j))return B;for(var Z=Object.keys(j),ee=Z.length;ee--;)B[Z[ee]]=j[Z[ee]];return B};function U(B,j){return Object.prototype.hasOwnProperty.call(B,j)}}).call(this)}).call(this,e("_process"),typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(e,z,N){N.byteLength=r,N.toByteArray=f,N.fromByteArray=c;for(var u=[],s=[],m=typeof Uint8Array!="undefined"?Uint8Array:Array,x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,i=x.length;t<i;++t)u[t]=x[t],s[x.charCodeAt(t)]=t;s["-".charCodeAt(0)]=62,s["_".charCodeAt(0)]=63;function a(h){var d=h.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=h.indexOf("=");p===-1&&(p=d);var y=p===d?0:4-p%4;return[p,y]}function r(h){var d=a(h),p=d[0],y=d[1];return(p+y)*3/4-y}function n(h,d,p){return(d+p)*3/4-p}function f(h){var d,p=a(h),y=p[0],g=p[1],A=new m(n(h,y,g)),b=0,M=g>0?y-4:y,_;for(_=0;_<M;_+=4)d=s[h.charCodeAt(_)]<<18|s[h.charCodeAt(_+1)]<<12|s[h.charCodeAt(_+2)]<<6|s[h.charCodeAt(_+3)],A[b++]=d>>16&255,A[b++]=d>>8&255,A[b++]=d&255;return g===2&&(d=s[h.charCodeAt(_)]<<2|s[h.charCodeAt(_+1)]>>4,A[b++]=d&255),g===1&&(d=s[h.charCodeAt(_)]<<10|s[h.charCodeAt(_+1)]<<4|s[h.charCodeAt(_+2)]>>2,A[b++]=d>>8&255,A[b++]=d&255),A}function l(h){return u[h>>18&63]+u[h>>12&63]+u[h>>6&63]+u[h&63]}function o(h,d,p){for(var y,g=[],A=d;A<p;A+=3)y=(h[A]<<16&16711680)+(h[A+1]<<8&65280)+(h[A+2]&255),g.push(l(y));return g.join("")}function c(h){for(var d,p=h.length,y=p%3,g=[],A=16383,b=0,M=p-y;b<M;b+=A)g.push(o(h,b,b+A>M?M:b+A));return y===1?(d=h[p-1],g.push(u[d>>2]+u[d<<4&63]+"==")):y===2&&(d=(h[p-2]<<8)+h[p-1],g.push(u[d>>10]+u[d>>4&63]+u[d<<2&63]+"=")),g.join("")}},{}],80:[function(e,z,N){function u(a,r,n,f,l){for(var o=l+1;f<=l;){var c=f+l>>>1,h=a[c],d=n!==void 0?n(h,r):h-r;d>=0?(o=c,l=c-1):f=c+1}return o}function s(a,r,n,f,l){for(var o=l+1;f<=l;){var c=f+l>>>1,h=a[c],d=n!==void 0?n(h,r):h-r;d>0?(o=c,l=c-1):f=c+1}return o}function m(a,r,n,f,l){for(var o=f-1;f<=l;){var c=f+l>>>1,h=a[c],d=n!==void 0?n(h,r):h-r;d<0?(o=c,f=c+1):l=c-1}return o}function x(a,r,n,f,l){for(var o=f-1;f<=l;){var c=f+l>>>1,h=a[c],d=n!==void 0?n(h,r):h-r;d<=0?(o=c,f=c+1):l=c-1}return o}function t(a,r,n,f,l){for(;f<=l;){var o=f+l>>>1,c=a[o],h=n!==void 0?n(c,r):c-r;if(h===0)return o;h<=0?f=o+1:l=o-1}return-1}function i(a,r,n,f,l,o){return typeof n=="function"?o(a,r,n,f===void 0?0:f|0,l===void 0?a.length-1:l|0):o(a,r,void 0,n===void 0?0:n|0,f===void 0?a.length-1:f|0)}z.exports={ge:function(a,r,n,f,l){return i(a,r,n,f,l,u)},gt:function(a,r,n,f,l){return i(a,r,n,f,l,s)},lt:function(a,r,n,f,l){return i(a,r,n,f,l,m)},le:function(a,r,n,f,l){return i(a,r,n,f,l,x)},eq:function(a,r,n,f,l){return i(a,r,n,f,l,t)}}},{}],81:[function(e,z,N){var u=32;N.INT_BITS=u,N.INT_MAX=2147483647,N.INT_MIN=-1<<u-1,N.sign=function(x){return(x>0)-(x<0)},N.abs=function(x){var t=x>>u-1;return(x^t)-t},N.min=function(x,t){return t^(x^t)&-(x<t)},N.max=function(x,t){return x^(x^t)&-(x<t)},N.isPow2=function(x){return!(x&x-1)&&!!x},N.log2=function(x){var t,i;return t=(x>65535)<<4,x>>>=t,i=(x>255)<<3,x>>>=i,t|=i,i=(x>15)<<2,x>>>=i,t|=i,i=(x>3)<<1,x>>>=i,t|=i,t|x>>1},N.log10=function(x){return x>=1e9?9:x>=1e8?8:x>=1e7?7:x>=1e6?6:x>=1e5?5:x>=1e4?4:x>=1e3?3:x>=100?2:x>=10?1:0},N.popCount=function(x){return x=x-(x>>>1&1431655765),x=(x&858993459)+(x>>>2&858993459),(x+(x>>>4)&252645135)*16843009>>>24};function s(x){var t=32;return x&=-x,x&&t--,x&65535&&(t-=16),x&16711935&&(t-=8),x&252645135&&(t-=4),x&858993459&&(t-=2),x&1431655765&&(t-=1),t}N.countTrailingZeros=s,N.nextPow2=function(x){return x+=x===0,--x,x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x+1},N.prevPow2=function(x){return x|=x>>>1,x|=x>>>2,x|=x>>>4,x|=x>>>8,x|=x>>>16,x-(x>>>1)},N.parity=function(x){return x^=x>>>16,x^=x>>>8,x^=x>>>4,x&=15,27030>>>x&1};var m=new Array(256);(function(x){for(var t=0;t<256;++t){var i=t,a=t,r=7;for(i>>>=1;i;i>>>=1)a<<=1,a|=i&1,--r;x[t]=a<<r&255}})(m),N.reverse=function(x){return m[x&255]<<24|m[x>>>8&255]<<16|m[x>>>16&255]<<8|m[x>>>24&255]},N.interleave2=function(x,t){return x&=65535,x=(x|x<<8)&16711935,x=(x|x<<4)&252645135,x=(x|x<<2)&858993459,x=(x|x<<1)&1431655765,t&=65535,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,x|t<<1},N.deinterleave2=function(x,t){return x=x>>>t&1431655765,x=(x|x>>>1)&858993459,x=(x|x>>>2)&252645135,x=(x|x>>>4)&16711935,x=(x|x>>>16)&65535,x<<16>>16},N.interleave3=function(x,t,i){return x&=1023,x=(x|x<<16)&4278190335,x=(x|x<<8)&251719695,x=(x|x<<4)&3272356035,x=(x|x<<2)&1227133513,t&=1023,t=(t|t<<16)&4278190335,t=(t|t<<8)&251719695,t=(t|t<<4)&3272356035,t=(t|t<<2)&1227133513,x|=t<<1,i&=1023,i=(i|i<<16)&4278190335,i=(i|i<<8)&251719695,i=(i|i<<4)&3272356035,i=(i|i<<2)&1227133513,x|i<<2},N.deinterleave3=function(x,t){return x=x>>>t&1227133513,x=(x|x>>>2)&3272356035,x=(x|x>>>4)&251719695,x=(x|x>>>8)&4278190335,x=(x|x>>>16)&1023,x<<22>>22},N.nextCombination=function(x){var t=x|x-1;return t+1|(~t&-~t)-1>>>s(x)+1}},{}],82:[function(e,z,N){var u=e("clamp");z.exports=m;var s=1e20;function m(i,a){a||(a={});var r=a.cutoff==null?.25:a.cutoff,n=a.radius==null?8:a.radius,f=a.channel||0,l,o,c,h,d,p,y,g,A,b,M;if(ArrayBuffer.isView(i)||Array.isArray(i)){if(!a.width||!a.height)throw Error("For raw data width and height should be provided by options");l=a.width,o=a.height,h=i,a.stride?p=a.stride:p=Math.floor(i.length/l/o)}else window.HTMLCanvasElement&&i instanceof window.HTMLCanvasElement?(g=i,y=g.getContext("2d"),l=g.width,o=g.height,A=y.getImageData(0,0,l,o),h=A.data,p=4):window.CanvasRenderingContext2D&&i instanceof window.CanvasRenderingContext2D?(g=i.canvas,y=i,l=g.width,o=g.height,A=y.getImageData(0,0,l,o),h=A.data,p=4):window.ImageData&&i instanceof window.ImageData&&(A=i,l=i.width,o=i.height,h=A.data,p=4);if(c=Math.max(l,o),window.Uint8ClampedArray&&h instanceof window.Uint8ClampedArray||window.Uint8Array&&h instanceof window.Uint8Array)for(d=h,h=Array(l*o),b=0,M=d.length;b<M;b++)h[b]=d[b*p+f]/255;else if(p!==1)throw Error("Raw data can have only 1 value per pixel");var _=Array(l*o),T=Array(l*o),w=Array(c),v=Array(c),L=Array(c+1),S=Array(c);for(b=0,M=l*o;b<M;b++){var k=h[b];_[b]=k===1?0:k===0?s:Math.pow(Math.max(0,.5-k),2),T[b]=k===1?s:k===0?0:Math.pow(Math.max(0,k-.5),2)}x(_,l,o,w,v,S,L),x(T,l,o,w,v,S,L);var P=window.Float32Array?new Float32Array(l*o):new Array(l*o);for(b=0,M=l*o;b<M;b++)P[b]=u(1-((_[b]-T[b])/n+r),0,1);return P}function x(i,a,r,n,f,l,o){for(var c=0;c<a;c++){for(var h=0;h<r;h++)n[h]=i[h*a+c];for(t(n,f,l,o,r),h=0;h<r;h++)i[h*a+c]=f[h]}for(h=0;h<r;h++){for(c=0;c<a;c++)n[c]=i[h*a+c];for(t(n,f,l,o,a),c=0;c<a;c++)i[h*a+c]=Math.sqrt(f[c])}}function t(i,a,r,n,f){r[0]=0,n[0]=-s,n[1]=+s;for(var l=1,o=0;l<f;l++){for(var c=(i[l]+l*l-(i[r[o]]+r[o]*r[o]))/(2*l-2*r[o]);c<=n[o];)o--,c=(i[l]+l*l-(i[r[o]]+r[o]*r[o]))/(2*l-2*r[o]);o++,r[o]=l,n[o]=c,n[o+1]=+s}for(l=0,o=0;l<f;l++){for(;n[o+1]<l;)o++;a[l]=(l-r[o])*(l-r[o])+i[r[o]]}}},{clamp:86}],83:[function(e,z,N){},{}],84:[function(e,z,N){var u=typeof Reflect=="object"?Reflect:null,s=u&&typeof u.apply=="function"?u.apply:function(b,M,_){return Function.prototype.apply.call(b,M,_)},m;u&&typeof u.ownKeys=="function"?m=u.ownKeys:Object.getOwnPropertySymbols?m=function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:m=function(b){return Object.getOwnPropertyNames(b)};function x(A){console&&console.warn&&console.warn(A)}var t=Number.isNaN||function(b){return b!==b};function i(){i.init.call(this)}z.exports=i,z.exports.once=g,i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function r(A){if(typeof A!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof A)}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(A){if(typeof A!="number"||A<0||t(A))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+A+".");a=A}}),i.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||t(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this};function n(A){return A._maxListeners===void 0?i.defaultMaxListeners:A._maxListeners}i.prototype.getMaxListeners=function(){return n(this)},i.prototype.emit=function(b){for(var M=[],_=1;_<arguments.length;_++)M.push(arguments[_]);var T=b==="error",w=this._events;if(w!==void 0)T=T&&w.error===void 0;else if(!T)return!1;if(T){var v;if(M.length>0&&(v=M[0]),v instanceof Error)throw v;var L=new Error("Unhandled error."+(v?" ("+v.message+")":""));throw L.context=v,L}var S=w[b];if(S===void 0)return!1;if(typeof S=="function")s(S,this,M);else for(var k=S.length,P=d(S,k),_=0;_<k;++_)s(P[_],this,M);return!0};function f(A,b,M,_){var T,w,v;if(r(M),w=A._events,w===void 0?(w=A._events=Object.create(null),A._eventsCount=0):(w.newListener!==void 0&&(A.emit("newListener",b,M.listener?M.listener:M),w=A._events),v=w[b]),v===void 0)v=w[b]=M,++A._eventsCount;else if(typeof v=="function"?v=w[b]=_?[M,v]:[v,M]:_?v.unshift(M):v.push(M),T=n(A),T>0&&v.length>T&&!v.warned){v.warned=!0;var L=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(b)+" listeners added. Use emitter.setMaxListeners() to increase limit");L.name="MaxListenersExceededWarning",L.emitter=A,L.type=b,L.count=v.length,x(L)}return A}i.prototype.addListener=function(b,M){return f(this,b,M,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(b,M){return f(this,b,M,!0)};function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function o(A,b,M){var _={fired:!1,wrapFn:void 0,target:A,type:b,listener:M},T=l.bind(_);return T.listener=M,_.wrapFn=T,T}i.prototype.once=function(b,M){return r(M),this.on(b,o(this,b,M)),this},i.prototype.prependOnceListener=function(b,M){return r(M),this.prependListener(b,o(this,b,M)),this},i.prototype.removeListener=function(b,M){var _,T,w,v,L;if(r(M),T=this._events,T===void 0)return this;if(_=T[b],_===void 0)return this;if(_===M||_.listener===M)--this._eventsCount==0?this._events=Object.create(null):(delete T[b],T.removeListener&&this.emit("removeListener",b,_.listener||M));else if(typeof _!="function"){for(w=-1,v=_.length-1;v>=0;v--)if(_[v]===M||_[v].listener===M){L=_[v].listener,w=v;break}if(w<0)return this;w===0?_.shift():p(_,w),_.length===1&&(T[b]=_[0]),T.removeListener!==void 0&&this.emit("removeListener",b,L||M)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(b){var M,_,T;if(_=this._events,_===void 0)return this;if(_.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):_[b]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete _[b]),this;if(arguments.length===0){var w=Object.keys(_),v;for(T=0;T<w.length;++T)v=w[T],v!=="removeListener"&&this.removeAllListeners(v);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(M=_[b],typeof M=="function")this.removeListener(b,M);else if(M!==void 0)for(T=M.length-1;T>=0;T--)this.removeListener(b,M[T]);return this};function c(A,b,M){var _=A._events;if(_===void 0)return[];var T=_[b];return T===void 0?[]:typeof T=="function"?M?[T.listener||T]:[T]:M?y(T):d(T,T.length)}i.prototype.listeners=function(b){return c(this,b,!0)},i.prototype.rawListeners=function(b){return c(this,b,!1)},i.listenerCount=function(A,b){return typeof A.listenerCount=="function"?A.listenerCount(b):h.call(A,b)},i.prototype.listenerCount=h;function h(A){var b=this._events;if(b!==void 0){var M=b[A];if(typeof M=="function")return 1;if(M!==void 0)return M.length}return 0}i.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]};function d(A,b){for(var M=new Array(b),_=0;_<b;++_)M[_]=A[_];return M}function p(A,b){for(;b+1<A.length;b++)A[b]=A[b+1];A.pop()}function y(A){for(var b=new Array(A.length),M=0;M<b.length;++M)b[M]=A[M].listener||A[M];return b}function g(A,b){return new Promise(function(M,_){function T(){w!==void 0&&A.removeListener("error",w),M([].slice.call(arguments))}var w;b!=="error"&&(w=function(L){A.removeListener(b,T),_(L)},A.once("error",w)),A.once(b,T)})}},{}],85:[function(e,z,N){(function(u){(function(){var s=e("base64-js"),m=e("ieee754");N.Buffer=a,N.SlowBuffer=y,N.INSPECT_MAX_BYTES=50;var x=2147483647;N.kMaxLength=x,a.TYPED_ARRAY_SUPPORT=t(),!a.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{var ie=new Uint8Array(1);return ie.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ie.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(!!a.isBuffer(this))return this.byteOffset}});function i(ie){if(ie>x)throw new RangeError('The value "'+ie+'" is invalid for option "size"');var oe=new Uint8Array(ie);return oe.__proto__=a.prototype,oe}function a(ie,oe,ue){if(typeof ie=="number"){if(typeof oe=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(ie)}return r(ie,oe,ue)}typeof Symbol!="undefined"&&Symbol.species!=null&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),a.poolSize=8192;function r(ie,oe,ue){if(typeof ie=="string")return o(ie,oe);if(ArrayBuffer.isView(ie))return c(ie);if(ie==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie);if($(ie,ArrayBuffer)||ie&&$(ie.buffer,ArrayBuffer))return h(ie,oe,ue);if(typeof ie=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ye=ie.valueOf&&ie.valueOf();if(ye!=null&&ye!==ie)return a.from(ye,oe,ue);var ce=d(ie);if(ce)return ce;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ie[Symbol.toPrimitive]=="function")return a.from(ie[Symbol.toPrimitive]("string"),oe,ue);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ie)}a.from=function(ie,oe,ue){return r(ie,oe,ue)},a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array;function n(ie){if(typeof ie!="number")throw new TypeError('"size" argument must be of type number');if(ie<0)throw new RangeError('The value "'+ie+'" is invalid for option "size"')}function f(ie,oe,ue){return n(ie),ie<=0?i(ie):oe!==void 0?typeof ue=="string"?i(ie).fill(oe,ue):i(ie).fill(oe):i(ie)}a.alloc=function(ie,oe,ue){return f(ie,oe,ue)};function l(ie){return n(ie),i(ie<0?0:p(ie)|0)}a.allocUnsafe=function(ie){return l(ie)},a.allocUnsafeSlow=function(ie){return l(ie)};function o(ie,oe){if((typeof oe!="string"||oe==="")&&(oe="utf8"),!a.isEncoding(oe))throw new TypeError("Unknown encoding: "+oe);var ue=g(ie,oe)|0,ye=i(ue),ce=ye.write(ie,oe);return ce!==ue&&(ye=ye.slice(0,ce)),ye}function c(ie){for(var oe=ie.length<0?0:p(ie.length)|0,ue=i(oe),ye=0;ye<oe;ye+=1)ue[ye]=ie[ye]&255;return ue}function h(ie,oe,ue){if(oe<0||ie.byteLength<oe)throw new RangeError('"offset" is outside of buffer bounds');if(ie.byteLength<oe+(ue||0))throw new RangeError('"length" is outside of buffer bounds');var ye;return oe===void 0&&ue===void 0?ye=new Uint8Array(ie):ue===void 0?ye=new Uint8Array(ie,oe):ye=new Uint8Array(ie,oe,ue),ye.__proto__=a.prototype,ye}function d(ie){if(a.isBuffer(ie)){var oe=p(ie.length)|0,ue=i(oe);return ue.length===0||ie.copy(ue,0,0,oe),ue}if(ie.length!==void 0)return typeof ie.length!="number"||ae(ie.length)?i(0):c(ie);if(ie.type==="Buffer"&&Array.isArray(ie.data))return c(ie.data)}function p(ie){if(ie>=x)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+x.toString(16)+" bytes");return ie|0}function y(ie){return+ie!=ie&&(ie=0),a.alloc(+ie)}a.isBuffer=function(oe){return oe!=null&&oe._isBuffer===!0&&oe!==a.prototype},a.compare=function(oe,ue){if($(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),$(ue,Uint8Array)&&(ue=a.from(ue,ue.offset,ue.byteLength)),!a.isBuffer(oe)||!a.isBuffer(ue))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(oe===ue)return 0;for(var ye=oe.length,ce=ue.length,me=0,xe=Math.min(ye,ce);me<xe;++me)if(oe[me]!==ue[me]){ye=oe[me],ce=ue[me];break}return ye<ce?-1:ce<ye?1:0},a.isEncoding=function(oe){switch(String(oe).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(oe,ue){if(!Array.isArray(oe))throw new TypeError('"list" argument must be an Array of Buffers');if(oe.length===0)return a.alloc(0);var ye;if(ue===void 0)for(ue=0,ye=0;ye<oe.length;++ye)ue+=oe[ye].length;var ce=a.allocUnsafe(ue),me=0;for(ye=0;ye<oe.length;++ye){var xe=oe[ye];if($(xe,Uint8Array)&&(xe=a.from(xe)),!a.isBuffer(xe))throw new TypeError('"list" argument must be an Array of Buffers');xe.copy(ce,me),me+=xe.length}return ce};function g(ie,oe){if(a.isBuffer(ie))return ie.length;if(ArrayBuffer.isView(ie)||$(ie,ArrayBuffer))return ie.byteLength;if(typeof ie!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ie);var ue=ie.length,ye=arguments.length>2&&arguments[2]===!0;if(!ye&&ue===0)return 0;for(var ce=!1;;)switch(oe){case"ascii":case"latin1":case"binary":return ue;case"utf8":case"utf-8":return H(ie).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ue*2;case"hex":return ue>>>1;case"base64":return te(ie).length;default:if(ce)return ye?-1:H(ie).length;oe=(""+oe).toLowerCase(),ce=!0}}a.byteLength=g;function A(ie,oe,ue){var ye=!1;if((oe===void 0||oe<0)&&(oe=0),oe>this.length||((ue===void 0||ue>this.length)&&(ue=this.length),ue<=0)||(ue>>>=0,oe>>>=0,ue<=oe))return"";for(ie||(ie="utf8");;)switch(ie){case"hex":return B(this,oe,ue);case"utf8":case"utf-8":return O(this,oe,ue);case"ascii":return D(this,oe,ue);case"latin1":case"binary":return U(this,oe,ue);case"base64":return P(this,oe,ue);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,oe,ue);default:if(ye)throw new TypeError("Unknown encoding: "+ie);ie=(ie+"").toLowerCase(),ye=!0}}a.prototype._isBuffer=!0;function b(ie,oe,ue){var ye=ie[oe];ie[oe]=ie[ue],ie[ue]=ye}a.prototype.swap16=function(){var oe=this.length;if(oe%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var ue=0;ue<oe;ue+=2)b(this,ue,ue+1);return this},a.prototype.swap32=function(){var oe=this.length;if(oe%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var ue=0;ue<oe;ue+=4)b(this,ue,ue+3),b(this,ue+1,ue+2);return this},a.prototype.swap64=function(){var oe=this.length;if(oe%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var ue=0;ue<oe;ue+=8)b(this,ue,ue+7),b(this,ue+1,ue+6),b(this,ue+2,ue+5),b(this,ue+3,ue+4);return this},a.prototype.toString=function(){var oe=this.length;return oe===0?"":arguments.length===0?O(this,0,oe):A.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(oe){if(!a.isBuffer(oe))throw new TypeError("Argument must be a Buffer");return this===oe?!0:a.compare(this,oe)===0},a.prototype.inspect=function(){var oe="",ue=N.INSPECT_MAX_BYTES;return oe=this.toString("hex",0,ue).replace(/(.{2})/g,"$1 ").trim(),this.length>ue&&(oe+=" ... "),"<Buffer "+oe+">"},a.prototype.compare=function(oe,ue,ye,ce,me){if($(oe,Uint8Array)&&(oe=a.from(oe,oe.offset,oe.byteLength)),!a.isBuffer(oe))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof oe);if(ue===void 0&&(ue=0),ye===void 0&&(ye=oe?oe.length:0),ce===void 0&&(ce=0),me===void 0&&(me=this.length),ue<0||ye>oe.length||ce<0||me>this.length)throw new RangeError("out of range index");if(ce>=me&&ue>=ye)return 0;if(ce>=me)return-1;if(ue>=ye)return 1;if(ue>>>=0,ye>>>=0,ce>>>=0,me>>>=0,this===oe)return 0;for(var xe=me-ce,ke=ye-ue,Ae=Math.min(xe,ke),Oe=this.slice(ce,me),He=oe.slice(ue,ye),Ge=0;Ge<Ae;++Ge)if(Oe[Ge]!==He[Ge]){xe=Oe[Ge],ke=He[Ge];break}return xe<ke?-1:ke<xe?1:0};function M(ie,oe,ue,ye,ce){if(ie.length===0)return-1;if(typeof ue=="string"?(ye=ue,ue=0):ue>2147483647?ue=2147483647:ue<-2147483648&&(ue=-2147483648),ue=+ue,ae(ue)&&(ue=ce?0:ie.length-1),ue<0&&(ue=ie.length+ue),ue>=ie.length){if(ce)return-1;ue=ie.length-1}else if(ue<0)if(ce)ue=0;else return-1;if(typeof oe=="string"&&(oe=a.from(oe,ye)),a.isBuffer(oe))return oe.length===0?-1:_(ie,oe,ue,ye,ce);if(typeof oe=="number")return oe=oe&255,typeof Uint8Array.prototype.indexOf=="function"?ce?Uint8Array.prototype.indexOf.call(ie,oe,ue):Uint8Array.prototype.lastIndexOf.call(ie,oe,ue):_(ie,[oe],ue,ye,ce);throw new TypeError("val must be string, number or Buffer")}function _(ie,oe,ue,ye,ce){var me=1,xe=ie.length,ke=oe.length;if(ye!==void 0&&(ye=String(ye).toLowerCase(),ye==="ucs2"||ye==="ucs-2"||ye==="utf16le"||ye==="utf-16le")){if(ie.length<2||oe.length<2)return-1;me=2,xe/=2,ke/=2,ue/=2}function Ae(Re,We){return me===1?Re[We]:Re.readUInt16BE(We*me)}var Oe;if(ce){var He=-1;for(Oe=ue;Oe<xe;Oe++)if(Ae(ie,Oe)===Ae(oe,He===-1?0:Oe-He)){if(He===-1&&(He=Oe),Oe-He+1===ke)return He*me}else He!==-1&&(Oe-=Oe-He),He=-1}else for(ue+ke>xe&&(ue=xe-ke),Oe=ue;Oe>=0;Oe--){for(var Ge=!0,_e=0;_e<ke;_e++)if(Ae(ie,Oe+_e)!==Ae(oe,_e)){Ge=!1;break}if(Ge)return Oe}return-1}a.prototype.includes=function(oe,ue,ye){return this.indexOf(oe,ue,ye)!==-1},a.prototype.indexOf=function(oe,ue,ye){return M(this,oe,ue,ye,!0)},a.prototype.lastIndexOf=function(oe,ue,ye){return M(this,oe,ue,ye,!1)};function T(ie,oe,ue,ye){ue=Number(ue)||0;var ce=ie.length-ue;ye?(ye=Number(ye),ye>ce&&(ye=ce)):ye=ce;var me=oe.length;ye>me/2&&(ye=me/2);for(var xe=0;xe<ye;++xe){var ke=parseInt(oe.substr(xe*2,2),16);if(ae(ke))return xe;ie[ue+xe]=ke}return xe}function w(ie,oe,ue,ye){return K(H(oe,ie.length-ue),ie,ue,ye)}function v(ie,oe,ue,ye){return K(Y(oe),ie,ue,ye)}function L(ie,oe,ue,ye){return v(ie,oe,ue,ye)}function S(ie,oe,ue,ye){return K(te(oe),ie,ue,ye)}function k(ie,oe,ue,ye){return K(ne(oe,ie.length-ue),ie,ue,ye)}a.prototype.write=function(oe,ue,ye,ce){if(ue===void 0)ce="utf8",ye=this.length,ue=0;else if(ye===void 0&&typeof ue=="string")ce=ue,ye=this.length,ue=0;else if(isFinite(ue))ue=ue>>>0,isFinite(ye)?(ye=ye>>>0,ce===void 0&&(ce="utf8")):(ce=ye,ye=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var me=this.length-ue;if((ye===void 0||ye>me)&&(ye=me),oe.length>0&&(ye<0||ue<0)||ue>this.length)throw new RangeError("Attempt to write outside buffer bounds");ce||(ce="utf8");for(var xe=!1;;)switch(ce){case"hex":return T(this,oe,ue,ye);case"utf8":case"utf-8":return w(this,oe,ue,ye);case"ascii":return v(this,oe,ue,ye);case"latin1":case"binary":return L(this,oe,ue,ye);case"base64":return S(this,oe,ue,ye);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,oe,ue,ye);default:if(xe)throw new TypeError("Unknown encoding: "+ce);ce=(""+ce).toLowerCase(),xe=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function P(ie,oe,ue){return oe===0&&ue===ie.length?s.fromByteArray(ie):s.fromByteArray(ie.slice(oe,ue))}function O(ie,oe,ue){ue=Math.min(ie.length,ue);for(var ye=[],ce=oe;ce<ue;){var me=ie[ce],xe=null,ke=me>239?4:me>223?3:me>191?2:1;if(ce+ke<=ue){var Ae,Oe,He,Ge;switch(ke){case 1:me<128&&(xe=me);break;case 2:Ae=ie[ce+1],(Ae&192)==128&&(Ge=(me&31)<<6|Ae&63,Ge>127&&(xe=Ge));break;case 3:Ae=ie[ce+1],Oe=ie[ce+2],(Ae&192)==128&&(Oe&192)==128&&(Ge=(me&15)<<12|(Ae&63)<<6|Oe&63,Ge>2047&&(Ge<55296||Ge>57343)&&(xe=Ge));break;case 4:Ae=ie[ce+1],Oe=ie[ce+2],He=ie[ce+3],(Ae&192)==128&&(Oe&192)==128&&(He&192)==128&&(Ge=(me&15)<<18|(Ae&63)<<12|(Oe&63)<<6|He&63,Ge>65535&&Ge<1114112&&(xe=Ge))}}xe===null?(xe=65533,ke=1):xe>65535&&(xe-=65536,ye.push(xe>>>10&1023|55296),xe=56320|xe&1023),ye.push(xe),ce+=ke}return I(ye)}var F=4096;function I(ie){var oe=ie.length;if(oe<=F)return String.fromCharCode.apply(String,ie);for(var ue="",ye=0;ye<oe;)ue+=String.fromCharCode.apply(String,ie.slice(ye,ye+=F));return ue}function D(ie,oe,ue){var ye="";ue=Math.min(ie.length,ue);for(var ce=oe;ce<ue;++ce)ye+=String.fromCharCode(ie[ce]&127);return ye}function U(ie,oe,ue){var ye="";ue=Math.min(ie.length,ue);for(var ce=oe;ce<ue;++ce)ye+=String.fromCharCode(ie[ce]);return ye}function B(ie,oe,ue){var ye=ie.length;(!oe||oe<0)&&(oe=0),(!ue||ue<0||ue>ye)&&(ue=ye);for(var ce="",me=oe;me<ue;++me)ce+=se(ie[me]);return ce}function j(ie,oe,ue){for(var ye=ie.slice(oe,ue),ce="",me=0;me<ye.length;me+=2)ce+=String.fromCharCode(ye[me]+ye[me+1]*256);return ce}a.prototype.slice=function(oe,ue){var ye=this.length;oe=~~oe,ue=ue===void 0?ye:~~ue,oe<0?(oe+=ye,oe<0&&(oe=0)):oe>ye&&(oe=ye),ue<0?(ue+=ye,ue<0&&(ue=0)):ue>ye&&(ue=ye),ue<oe&&(ue=oe);var ce=this.subarray(oe,ue);return ce.__proto__=a.prototype,ce};function Z(ie,oe,ue){if(ie%1!=0||ie<0)throw new RangeError("offset is not uint");if(ie+oe>ue)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUIntLE=function(oe,ue,ye){oe=oe>>>0,ue=ue>>>0,ye||Z(oe,ue,this.length);for(var ce=this[oe],me=1,xe=0;++xe<ue&&(me*=256);)ce+=this[oe+xe]*me;return ce},a.prototype.readUIntBE=function(oe,ue,ye){oe=oe>>>0,ue=ue>>>0,ye||Z(oe,ue,this.length);for(var ce=this[oe+--ue],me=1;ue>0&&(me*=256);)ce+=this[oe+--ue]*me;return ce},a.prototype.readUInt8=function(oe,ue){return oe=oe>>>0,ue||Z(oe,1,this.length),this[oe]},a.prototype.readUInt16LE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,2,this.length),this[oe]|this[oe+1]<<8},a.prototype.readUInt16BE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,2,this.length),this[oe]<<8|this[oe+1]},a.prototype.readUInt32LE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,4,this.length),(this[oe]|this[oe+1]<<8|this[oe+2]<<16)+this[oe+3]*16777216},a.prototype.readUInt32BE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,4,this.length),this[oe]*16777216+(this[oe+1]<<16|this[oe+2]<<8|this[oe+3])},a.prototype.readIntLE=function(oe,ue,ye){oe=oe>>>0,ue=ue>>>0,ye||Z(oe,ue,this.length);for(var ce=this[oe],me=1,xe=0;++xe<ue&&(me*=256);)ce+=this[oe+xe]*me;return me*=128,ce>=me&&(ce-=Math.pow(2,8*ue)),ce},a.prototype.readIntBE=function(oe,ue,ye){oe=oe>>>0,ue=ue>>>0,ye||Z(oe,ue,this.length);for(var ce=ue,me=1,xe=this[oe+--ce];ce>0&&(me*=256);)xe+=this[oe+--ce]*me;return me*=128,xe>=me&&(xe-=Math.pow(2,8*ue)),xe},a.prototype.readInt8=function(oe,ue){return oe=oe>>>0,ue||Z(oe,1,this.length),this[oe]&128?(255-this[oe]+1)*-1:this[oe]},a.prototype.readInt16LE=function(oe,ue){oe=oe>>>0,ue||Z(oe,2,this.length);var ye=this[oe]|this[oe+1]<<8;return ye&32768?ye|4294901760:ye},a.prototype.readInt16BE=function(oe,ue){oe=oe>>>0,ue||Z(oe,2,this.length);var ye=this[oe+1]|this[oe]<<8;return ye&32768?ye|4294901760:ye},a.prototype.readInt32LE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,4,this.length),this[oe]|this[oe+1]<<8|this[oe+2]<<16|this[oe+3]<<24},a.prototype.readInt32BE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,4,this.length),this[oe]<<24|this[oe+1]<<16|this[oe+2]<<8|this[oe+3]},a.prototype.readFloatLE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,4,this.length),m.read(this,oe,!0,23,4)},a.prototype.readFloatBE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,4,this.length),m.read(this,oe,!1,23,4)},a.prototype.readDoubleLE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,8,this.length),m.read(this,oe,!0,52,8)},a.prototype.readDoubleBE=function(oe,ue){return oe=oe>>>0,ue||Z(oe,8,this.length),m.read(this,oe,!1,52,8)};function ee(ie,oe,ue,ye,ce,me){if(!a.isBuffer(ie))throw new TypeError('"buffer" argument must be a Buffer instance');if(oe>ce||oe<me)throw new RangeError('"value" argument is out of bounds');if(ue+ye>ie.length)throw new RangeError("Index out of range")}a.prototype.writeUIntLE=function(oe,ue,ye,ce){if(oe=+oe,ue=ue>>>0,ye=ye>>>0,!ce){var me=Math.pow(2,8*ye)-1;ee(this,oe,ue,ye,me,0)}var xe=1,ke=0;for(this[ue]=oe&255;++ke<ye&&(xe*=256);)this[ue+ke]=oe/xe&255;return ue+ye},a.prototype.writeUIntBE=function(oe,ue,ye,ce){if(oe=+oe,ue=ue>>>0,ye=ye>>>0,!ce){var me=Math.pow(2,8*ye)-1;ee(this,oe,ue,ye,me,0)}var xe=ye-1,ke=1;for(this[ue+xe]=oe&255;--xe>=0&&(ke*=256);)this[ue+xe]=oe/ke&255;return ue+ye},a.prototype.writeUInt8=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,1,255,0),this[ue]=oe&255,ue+1},a.prototype.writeUInt16LE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,2,65535,0),this[ue]=oe&255,this[ue+1]=oe>>>8,ue+2},a.prototype.writeUInt16BE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,2,65535,0),this[ue]=oe>>>8,this[ue+1]=oe&255,ue+2},a.prototype.writeUInt32LE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,4,4294967295,0),this[ue+3]=oe>>>24,this[ue+2]=oe>>>16,this[ue+1]=oe>>>8,this[ue]=oe&255,ue+4},a.prototype.writeUInt32BE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,4,4294967295,0),this[ue]=oe>>>24,this[ue+1]=oe>>>16,this[ue+2]=oe>>>8,this[ue+3]=oe&255,ue+4},a.prototype.writeIntLE=function(oe,ue,ye,ce){if(oe=+oe,ue=ue>>>0,!ce){var me=Math.pow(2,8*ye-1);ee(this,oe,ue,ye,me-1,-me)}var xe=0,ke=1,Ae=0;for(this[ue]=oe&255;++xe<ye&&(ke*=256);)oe<0&&Ae===0&&this[ue+xe-1]!==0&&(Ae=1),this[ue+xe]=(oe/ke>>0)-Ae&255;return ue+ye},a.prototype.writeIntBE=function(oe,ue,ye,ce){if(oe=+oe,ue=ue>>>0,!ce){var me=Math.pow(2,8*ye-1);ee(this,oe,ue,ye,me-1,-me)}var xe=ye-1,ke=1,Ae=0;for(this[ue+xe]=oe&255;--xe>=0&&(ke*=256);)oe<0&&Ae===0&&this[ue+xe+1]!==0&&(Ae=1),this[ue+xe]=(oe/ke>>0)-Ae&255;return ue+ye},a.prototype.writeInt8=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,1,127,-128),oe<0&&(oe=255+oe+1),this[ue]=oe&255,ue+1},a.prototype.writeInt16LE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,2,32767,-32768),this[ue]=oe&255,this[ue+1]=oe>>>8,ue+2},a.prototype.writeInt16BE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,2,32767,-32768),this[ue]=oe>>>8,this[ue+1]=oe&255,ue+2},a.prototype.writeInt32LE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,4,2147483647,-2147483648),this[ue]=oe&255,this[ue+1]=oe>>>8,this[ue+2]=oe>>>16,this[ue+3]=oe>>>24,ue+4},a.prototype.writeInt32BE=function(oe,ue,ye){return oe=+oe,ue=ue>>>0,ye||ee(this,oe,ue,4,2147483647,-2147483648),oe<0&&(oe=4294967295+oe+1),this[ue]=oe>>>24,this[ue+1]=oe>>>16,this[ue+2]=oe>>>8,this[ue+3]=oe&255,ue+4};function q(ie,oe,ue,ye,ce,me){if(ue+ye>ie.length)throw new RangeError("Index out of range");if(ue<0)throw new RangeError("Index out of range")}function W(ie,oe,ue,ye,ce){return oe=+oe,ue=ue>>>0,ce||q(ie,oe,ue,4),m.write(ie,oe,ue,ye,23,4),ue+4}a.prototype.writeFloatLE=function(oe,ue,ye){return W(this,oe,ue,!0,ye)},a.prototype.writeFloatBE=function(oe,ue,ye){return W(this,oe,ue,!1,ye)};function J(ie,oe,ue,ye,ce){return oe=+oe,ue=ue>>>0,ce||q(ie,oe,ue,8),m.write(ie,oe,ue,ye,52,8),ue+8}a.prototype.writeDoubleLE=function(oe,ue,ye){return J(this,oe,ue,!0,ye)},a.prototype.writeDoubleBE=function(oe,ue,ye){return J(this,oe,ue,!1,ye)},a.prototype.copy=function(oe,ue,ye,ce){if(!a.isBuffer(oe))throw new TypeError("argument should be a Buffer");if(ye||(ye=0),!ce&&ce!==0&&(ce=this.length),ue>=oe.length&&(ue=oe.length),ue||(ue=0),ce>0&&ce<ye&&(ce=ye),ce===ye||oe.length===0||this.length===0)return 0;if(ue<0)throw new RangeError("targetStart out of bounds");if(ye<0||ye>=this.length)throw new RangeError("Index out of range");if(ce<0)throw new RangeError("sourceEnd out of bounds");ce>this.length&&(ce=this.length),oe.length-ue<ce-ye&&(ce=oe.length-ue+ye);var me=ce-ye;if(this===oe&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(ue,ye,ce);else if(this===oe&&ye<ue&&ue<ce)for(var xe=me-1;xe>=0;--xe)oe[xe+ue]=this[xe+ye];else Uint8Array.prototype.set.call(oe,this.subarray(ye,ce),ue);return me},a.prototype.fill=function(oe,ue,ye,ce){if(typeof oe=="string"){if(typeof ue=="string"?(ce=ue,ue=0,ye=this.length):typeof ye=="string"&&(ce=ye,ye=this.length),ce!==void 0&&typeof ce!="string")throw new TypeError("encoding must be a string");if(typeof ce=="string"&&!a.isEncoding(ce))throw new TypeError("Unknown encoding: "+ce);if(oe.length===1){var me=oe.charCodeAt(0);(ce==="utf8"&&me<128||ce==="latin1")&&(oe=me)}}else typeof oe=="number"&&(oe=oe&255);if(ue<0||this.length<ue||this.length<ye)throw new RangeError("Out of range index");if(ye<=ue)return this;ue=ue>>>0,ye=ye===void 0?this.length:ye>>>0,oe||(oe=0);var xe;if(typeof oe=="number")for(xe=ue;xe<ye;++xe)this[xe]=oe;else{var ke=a.isBuffer(oe)?oe:a.from(oe,ce),Ae=ke.length;if(Ae===0)throw new TypeError('The value "'+oe+'" is invalid for argument "value"');for(xe=0;xe<ye-ue;++xe)this[xe+ue]=ke[xe%Ae]}return this};var le=/[^+/0-9A-Za-z-_]/g;function fe(ie){if(ie=ie.split("=")[0],ie=ie.trim().replace(le,""),ie.length<2)return"";for(;ie.length%4!=0;)ie=ie+"=";return ie}function se(ie){return ie<16?"0"+ie.toString(16):ie.toString(16)}function H(ie,oe){oe=oe||1/0;for(var ue,ye=ie.length,ce=null,me=[],xe=0;xe<ye;++xe){if(ue=ie.charCodeAt(xe),ue>55295&&ue<57344){if(!ce){if(ue>56319){(oe-=3)>-1&&me.push(239,191,189);continue}else if(xe+1===ye){(oe-=3)>-1&&me.push(239,191,189);continue}ce=ue;continue}if(ue<56320){(oe-=3)>-1&&me.push(239,191,189),ce=ue;continue}ue=(ce-55296<<10|ue-56320)+65536}else ce&&(oe-=3)>-1&&me.push(239,191,189);if(ce=null,ue<128){if((oe-=1)<0)break;me.push(ue)}else if(ue<2048){if((oe-=2)<0)break;me.push(ue>>6|192,ue&63|128)}else if(ue<65536){if((oe-=3)<0)break;me.push(ue>>12|224,ue>>6&63|128,ue&63|128)}else if(ue<1114112){if((oe-=4)<0)break;me.push(ue>>18|240,ue>>12&63|128,ue>>6&63|128,ue&63|128)}else throw new Error("Invalid code point")}return me}function Y(ie){for(var oe=[],ue=0;ue<ie.length;++ue)oe.push(ie.charCodeAt(ue)&255);return oe}function ne(ie,oe){for(var ue,ye,ce,me=[],xe=0;xe<ie.length&&!((oe-=2)<0);++xe)ue=ie.charCodeAt(xe),ye=ue>>8,ce=ue%256,me.push(ce),me.push(ye);return me}function te(ie){return s.toByteArray(fe(ie))}function K(ie,oe,ue,ye){for(var ce=0;ce<ye&&!(ce+ue>=oe.length||ce>=ie.length);++ce)oe[ce+ue]=ie[ce];return ce}function $(ie,oe){return ie instanceof oe||ie!=null&&ie.constructor!=null&&ie.constructor.name!=null&&ie.constructor.name===oe.name}function ae(ie){return ie!==ie}}).call(this)}).call(this,e("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(e,z,N){z.exports=u;function u(s,m,x){return m<x?s<m?m:s>x?x:s:s<x?x:s>m?m:s}},{}],87:[function(e,z,N){var u=e("clamp");z.exports=s,z.exports.to=s,z.exports.from=m;function s(x,t){t==null&&(t=!0);var i=x[0],a=x[1],r=x[2],n=x[3];n==null&&(n=t?1:255),t&&(i*=255,a*=255,r*=255,n*=255),i=u(i,0,255)&255,a=u(a,0,255)&255,r=u(r,0,255)&255,n=u(n,0,255)&255;var f=i*16777216+(a<<16)+(r<<8)+n;return f}function m(x,t){x=+x;var i=x>>>24,a=(x&16711680)>>>16,r=(x&65280)>>>8,n=x&255;return t===!1?[i,a,r,n]:[i/255,a/255,r/255,n/255]}},{clamp:86}],88:[function(e,z,N){z.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(e,z,N){var u=e("color-rgba"),s=e("clamp"),m=e("dtype");z.exports=function(i,a){(a==="float"||!a)&&(a="array"),a==="uint"&&(a="uint8"),a==="uint_clamped"&&(a="uint8_clamped");var r=m(a),n=new r(4),f=a!=="uint8"&&a!=="uint8_clamped";return(!i.length||typeof i=="string")&&(i=u(i),i[0]/=255,i[1]/=255,i[2]/=255),x(i)?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3]!=null?i[3]:255,f&&(n[0]/=255,n[1]/=255,n[2]/=255,n[3]/=255),n):(f?(n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3]!=null?i[3]:1):(n[0]=s(Math.floor(i[0]*255),0,255),n[1]=s(Math.floor(i[1]*255),0,255),n[2]=s(Math.floor(i[2]*255),0,255),n[3]=i[3]==null?255:s(Math.floor(i[3]*255),0,255)),n)};function x(t){return!!(t instanceof Uint8Array||t instanceof Uint8ClampedArray||Array.isArray(t)&&(t[0]>1||t[0]===0)&&(t[1]>1||t[1]===0)&&(t[2]>1||t[2]===0)&&(!t[3]||t[3]>1))}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(e,z,N){(function(u){(function(){var s=e("color-name"),m=e("is-plain-obj"),x=e("defined");z.exports=i;var t={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function i(a){var r,n=[],f=1,l;if(typeof a=="string")if(s[a])n=s[a].slice(),l="rgb";else if(a==="transparent")f=0,l="rgb",n=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(a)){var o=a.slice(1),c=o.length,h=c<=4;f=1,h?(n=[parseInt(o[0]+o[0],16),parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16)],c===4&&(f=parseInt(o[3]+o[3],16)/255)):(n=[parseInt(o[0]+o[1],16),parseInt(o[2]+o[3],16),parseInt(o[4]+o[5],16)],c===8&&(f=parseInt(o[6]+o[7],16)/255)),n[0]||(n[0]=0),n[1]||(n[1]=0),n[2]||(n[2]=0),l="rgb"}else if(r=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(a)){var d=r[1],p=d==="rgb",o=d.replace(/a$/,"");l=o;var c=o==="cmyk"?4:o==="gray"?1:3;n=r[2].trim().split(/\s*,\s*/).map(function(b,M){if(/%$/.test(b))return M===c?parseFloat(b)/100:o==="rgb"?parseFloat(b)*255/100:parseFloat(b);if(o[M]==="h"){if(/deg$/.test(b))return parseFloat(b);if(t[b]!==void 0)return t[b]}return parseFloat(b)}),d===o&&n.push(1),f=p||n[c]===void 0?1:n[c],n=n.slice(0,c)}else a.length>10&&/[0-9](?:\s|\/)/.test(a)&&(n=a.match(/([0-9]+)/g).map(function(g){return parseFloat(g)}),l=a.match(/([a-z])/ig).join("").toLowerCase());else if(!isNaN(a))l="rgb",n=[a>>>16,(a&65280)>>>8,a&255];else if(m(a)){var y=x(a.r,a.red,a.R,null);y!==null?(l="rgb",n=[y,x(a.g,a.green,a.G),x(a.b,a.blue,a.B)]):(l="hsl",n=[x(a.h,a.hue,a.H),x(a.s,a.saturation,a.S),x(a.l,a.lightness,a.L,a.b,a.brightness)]),f=x(a.a,a.alpha,a.opacity,1),a.opacity!=null&&(f/=100)}else(Array.isArray(a)||u.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(a))&&(n=[a[0],a[1],a[2]],l="rgb",f=a.length===4?a[3]:1);return{space:l,values:n,alpha:f}}}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(e,z,N){var u=e("color-parse"),s=e("color-space/hsl"),m=e("clamp");z.exports=function(t){var i,a=u(t);return a.space?(i=Array(3),i[0]=m(a.values[0],0,255),i[1]=m(a.values[1],0,255),i[2]=m(a.values[2],0,255),a.space[0]==="h"&&(i=s.rgb(i)),i.push(m(a.alpha,0,1)),i):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(e,z,N){var u=e("./rgb");z.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(s){var m=s[0]/360,x=s[1]/100,t=s[2]/100,i,a,r,n,f;if(x===0)return f=t*255,[f,f,f];t<.5?a=t*(1+x):a=t+x-t*x,i=2*t-a,n=[0,0,0];for(var l=0;l<3;l++)r=m+1/3*-(l-1),r<0?r++:r>1&&r--,6*r<1?f=i+(a-i)*6*r:2*r<1?f=a:3*r<2?f=i+(a-i)*(2/3-r)*6:f=i,n[l]=f*255;return n}},u.hsl=function(s){var m=s[0]/255,x=s[1]/255,t=s[2]/255,i=Math.min(m,x,t),a=Math.max(m,x,t),r=a-i,n,f,l;return a===i?n=0:m===a?n=(x-t)/r:x===a?n=2+(t-m)/r:t===a&&(n=4+(m-x)/r),n=Math.min(n*60,360),n<0&&(n+=360),l=(i+a)/2,a===i?f=0:l<=.5?f=r/(a+i):f=r/(2-a-i),[n,f*100,l*100]}},{"./rgb":93}],93:[function(e,z,N){z.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(e,z,N){z.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xE7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xE9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xE9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xE3)o.?tom(e|\xE9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(e,z,N){z.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(e,z,N){z.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(e,z,N){z.exports=["normal","italic","oblique"]},{}],98:[function(e,z,N){z.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(e,z,N){z.exports={parse:e("./parse"),stringify:e("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(e,z,N){var u=e("css-font-size-keywords");z.exports={isSize:function(m){return/^[\d\.]/.test(m)||m.indexOf("/")!==-1||u.indexOf(m)!==-1}}},{"css-font-size-keywords":95}],101:[function(e,z,N){var u=e("unquote"),s=e("css-global-keywords"),m=e("css-system-font-keywords"),x=e("css-font-weight-keywords"),t=e("css-font-style-keywords"),i=e("css-font-stretch-keywords"),a=e("string-split-by"),r=e("./lib/util").isSize;z.exports=f;var n=f.cache={};function f(o){if(typeof o!="string")throw new Error("Font argument must be a string.");if(n[o])return n[o];if(o==="")throw new Error("Cannot parse an empty string.");if(m.indexOf(o)!==-1)return n[o]={system:o};for(var c={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},h=a(o,/\s+/),d;d=h.shift();){if(s.indexOf(d)!==-1)return["style","variant","weight","stretch"].forEach(function(y){c[y]=d}),n[o]=c;if(t.indexOf(d)!==-1){c.style=d;continue}if(d==="normal"||d==="small-caps"){c.variant=d;continue}if(i.indexOf(d)!==-1){c.stretch=d;continue}if(x.indexOf(d)!==-1){c.weight=d;continue}if(r(d)){var p=a(d,"/");if(c.size=p[0],p[1]!=null?c.lineHeight=l(p[1]):h[0]==="/"&&(h.shift(),c.lineHeight=l(h.shift())),!h.length)throw new Error("Missing required font-family.");return c.family=a(h.join(" "),/\s*,\s*/).map(u),n[o]=c}throw new Error("Unknown or unsupported font token: "+d)}throw new Error("Missing required font-size.")}function l(o){var c=parseFloat(o);return c.toString()===o?c:o}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(e,z,N){var u=e("pick-by-alias"),s=e("./lib/util").isSize,m=o(e("css-global-keywords")),x=o(e("css-system-font-keywords")),t=o(e("css-font-weight-keywords")),i=o(e("css-font-style-keywords")),a=o(e("css-font-stretch-keywords")),r={normal:1,"small-caps":1},n={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},f={style:"normal",variant:"normal",weight:"normal",stretch:"normal",size:"1rem",lineHeight:"normal",family:"serif"};z.exports=function(h){if(h=u(h,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"}),h.system)return h.system&&l(h.system,x),h.system;if(l(h.style,i),l(h.variant,r),l(h.weight,t),l(h.stretch,a),h.size==null&&(h.size=f.size),typeof h.size=="number"&&(h.size+="px"),!s)throw Error("Bad size value `"+h.size+"`");h.family||(h.family=f.family),Array.isArray(h.family)&&(h.family.length||(h.family=[f.family]),h.family=h.family.map(function(p){return n[p]?p:'"'+p+'"'}).join(", "));var d=[];return d.push(h.style),h.variant!==h.style&&d.push(h.variant),h.weight!==h.variant&&h.weight!==h.style&&d.push(h.weight),h.stretch!==h.weight&&h.stretch!==h.variant&&h.stretch!==h.style&&d.push(h.stretch),d.push(h.size+(h.lineHeight==null||h.lineHeight==="normal"||h.lineHeight+""=="1"?"":"/"+h.lineHeight)),d.push(h.family),d.filter(Boolean).join(" ")};function l(c,h){if(c&&!h[c]&&!m[c])throw Error("Unknown keyword `"+c+"`");return c}function o(c){for(var h={},d=0;d<c.length;d++)h[c[d]]=1;return h}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(e,z,N){z.exports=["inherit","initial","unset"]},{}],104:[function(e,z,N){z.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(e,z,N){var u=e("type/value/is"),s=e("type/value/ensure"),m=e("type/plain-function/ensure"),x=e("es5-ext/object/copy"),t=e("es5-ext/object/normalize-options"),i=e("es5-ext/object/map"),a=Function.prototype.bind,r=Object.defineProperty,n=Object.prototype.hasOwnProperty,f;f=function(l,o,c){var h=s(o)&&m(o.value),d;return d=x(o),delete d.writable,delete d.value,d.get=function(){return!c.overwriteDefinition&&n.call(this,l)?h:(o.value=a.call(h,c.resolveContext?c.resolveContext(this):this),r(this,l,o),this[l])},d},z.exports=function(l){var o=t(arguments[1]);return u(o.resolveContext)&&m(o.resolveContext),i(l,function(c,h){return f(h,c,o)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(e,z,N){var u=e("type/value/is"),s=e("type/plain-function/is"),m=e("es5-ext/object/assign"),x=e("es5-ext/object/normalize-options"),t=e("es5-ext/string/#/contains"),i=z.exports=function(a,r){var n,f,l,o,c;return arguments.length<2||typeof a!="string"?(o=r,r=a,a=null):o=arguments[2],u(a)?(n=t.call(a,"c"),f=t.call(a,"e"),l=t.call(a,"w")):(n=l=!0,f=!1),c={value:r,configurable:n,enumerable:f,writable:l},o?m(x(o),c):c};i.gs=function(a,r,n){var f,l,o,c;return typeof a!="string"?(o=n,n=r,r=a,a=null):o=arguments[3],u(r)?s(r)?u(n)?s(n)||(o=n,n=void 0):n=void 0:(o=r,r=n=void 0):r=void 0,u(a)?(f=t.call(a,"c"),l=t.call(a,"e")):(f=!0,l=!1),c={get:r,set:n,configurable:f,enumerable:l},o?m(x(o),c):c}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(e,z,N){(function(u,s){s(typeof N=="object"&&typeof z!="undefined"?N:u.d3=u.d3||{})})(this,function(u){function s(H,Y){return H<Y?-1:H>Y?1:H>=Y?0:NaN}function m(H){return H.length===1&&(H=x(H)),{left:function(Y,ne,te,K){for(te==null&&(te=0),K==null&&(K=Y.length);te<K;){var $=te+K>>>1;H(Y[$],ne)<0?te=$+1:K=$}return te},right:function(Y,ne,te,K){for(te==null&&(te=0),K==null&&(K=Y.length);te<K;){var $=te+K>>>1;H(Y[$],ne)>0?K=$:te=$+1}return te}}}function x(H){return function(Y,ne){return s(H(Y),ne)}}var t=m(s),i=t.right,a=t.left;function r(H,Y){Y==null&&(Y=n);for(var ne=0,te=H.length-1,K=H[0],$=new Array(te<0?0:te);ne<te;)$[ne]=Y(K,K=H[++ne]);return $}function n(H,Y){return[H,Y]}function f(H,Y,ne){var te=H.length,K=Y.length,$=new Array(te*K),ae,ie,oe,ue;for(ne==null&&(ne=n),ae=oe=0;ae<te;++ae)for(ue=H[ae],ie=0;ie<K;++ie,++oe)$[oe]=ne(ue,Y[ie]);return $}function l(H,Y){return Y<H?-1:Y>H?1:Y>=H?0:NaN}function o(H){return H===null?NaN:+H}function c(H,Y){var ne=H.length,te=0,K=-1,$=0,ae,ie,oe=0;if(Y==null)for(;++K<ne;)isNaN(ae=o(H[K]))||(ie=ae-$,$+=ie/++te,oe+=ie*(ae-$));else for(;++K<ne;)isNaN(ae=o(Y(H[K],K,H)))||(ie=ae-$,$+=ie/++te,oe+=ie*(ae-$));if(te>1)return oe/(te-1)}function h(H,Y){var ne=c(H,Y);return ne&&Math.sqrt(ne)}function d(H,Y){var ne=H.length,te=-1,K,$,ae;if(Y==null){for(;++te<ne;)if((K=H[te])!=null&&K>=K)for($=ae=K;++te<ne;)(K=H[te])!=null&&($>K&&($=K),ae<K&&(ae=K))}else for(;++te<ne;)if((K=Y(H[te],te,H))!=null&&K>=K)for($=ae=K;++te<ne;)(K=Y(H[te],te,H))!=null&&($>K&&($=K),ae<K&&(ae=K));return[$,ae]}var p=Array.prototype,y=p.slice,g=p.map;function A(H){return function(){return H}}function b(H){return H}function M(H,Y,ne){H=+H,Y=+Y,ne=(K=arguments.length)<2?(Y=H,H=0,1):K<3?1:+ne;for(var te=-1,K=Math.max(0,Math.ceil((Y-H)/ne))|0,$=new Array(K);++te<K;)$[te]=H+te*ne;return $}var _=Math.sqrt(50),T=Math.sqrt(10),w=Math.sqrt(2);function v(H,Y,ne){var te,K=-1,$,ae,ie;if(Y=+Y,H=+H,ne=+ne,H===Y&&ne>0)return[H];if((te=Y<H)&&($=H,H=Y,Y=$),(ie=L(H,Y,ne))===0||!isFinite(ie))return[];if(ie>0)for(H=Math.ceil(H/ie),Y=Math.floor(Y/ie),ae=new Array($=Math.ceil(Y-H+1));++K<$;)ae[K]=(H+K)*ie;else for(H=Math.floor(H*ie),Y=Math.ceil(Y*ie),ae=new Array($=Math.ceil(H-Y+1));++K<$;)ae[K]=(H-K)/ie;return te&&ae.reverse(),ae}function L(H,Y,ne){var te=(Y-H)/Math.max(0,ne),K=Math.floor(Math.log(te)/Math.LN10),$=te/Math.pow(10,K);return K>=0?($>=_?10:$>=T?5:$>=w?2:1)*Math.pow(10,K):-Math.pow(10,-K)/($>=_?10:$>=T?5:$>=w?2:1)}function S(H,Y,ne){var te=Math.abs(Y-H)/Math.max(0,ne),K=Math.pow(10,Math.floor(Math.log(te)/Math.LN10)),$=te/K;return $>=_?K*=10:$>=T?K*=5:$>=w&&(K*=2),Y<H?-K:K}function k(H){return Math.ceil(Math.log(H.length)/Math.LN2)+1}function P(){var H=b,Y=d,ne=k;function te(K){var $,ae=K.length,ie,oe=new Array(ae);for($=0;$<ae;++$)oe[$]=H(K[$],$,K);var ue=Y(oe),ye=ue[0],ce=ue[1],me=ne(oe,ye,ce);Array.isArray(me)||(me=S(ye,ce,me),me=M(Math.ceil(ye/me)*me,ce,me));for(var xe=me.length;me[0]<=ye;)me.shift(),--xe;for(;me[xe-1]>ce;)me.pop(),--xe;var ke=new Array(xe+1),Ae;for($=0;$<=xe;++$)Ae=ke[$]=[],Ae.x0=$>0?me[$-1]:ye,Ae.x1=$<xe?me[$]:ce;for($=0;$<ae;++$)ie=oe[$],ye<=ie&&ie<=ce&&ke[i(me,ie,0,xe)].push(K[$]);return ke}return te.value=function(K){return arguments.length?(H=typeof K=="function"?K:A(K),te):H},te.domain=function(K){return arguments.length?(Y=typeof K=="function"?K:A([K[0],K[1]]),te):Y},te.thresholds=function(K){return arguments.length?(ne=typeof K=="function"?K:Array.isArray(K)?A(y.call(K)):A(K),te):ne},te}function O(H,Y,ne){if(ne==null&&(ne=o),!!(te=H.length)){if((Y=+Y)<=0||te<2)return+ne(H[0],0,H);if(Y>=1)return+ne(H[te-1],te-1,H);var te,K=(te-1)*Y,$=Math.floor(K),ae=+ne(H[$],$,H),ie=+ne(H[$+1],$+1,H);return ae+(ie-ae)*(K-$)}}function F(H,Y,ne){return H=g.call(H,o).sort(s),Math.ceil((ne-Y)/(2*(O(H,.75)-O(H,.25))*Math.pow(H.length,-1/3)))}function I(H,Y,ne){return Math.ceil((ne-Y)/(3.5*h(H)*Math.pow(H.length,-1/3)))}function D(H,Y){var ne=H.length,te=-1,K,$;if(Y==null){for(;++te<ne;)if((K=H[te])!=null&&K>=K)for($=K;++te<ne;)(K=H[te])!=null&&K>$&&($=K)}else for(;++te<ne;)if((K=Y(H[te],te,H))!=null&&K>=K)for($=K;++te<ne;)(K=Y(H[te],te,H))!=null&&K>$&&($=K);return $}function U(H,Y){var ne=H.length,te=ne,K=-1,$,ae=0;if(Y==null)for(;++K<ne;)isNaN($=o(H[K]))?--te:ae+=$;else for(;++K<ne;)isNaN($=o(Y(H[K],K,H)))?--te:ae+=$;if(te)return ae/te}function B(H,Y){var ne=H.length,te=-1,K,$=[];if(Y==null)for(;++te<ne;)isNaN(K=o(H[te]))||$.push(K);else for(;++te<ne;)isNaN(K=o(Y(H[te],te,H)))||$.push(K);return O($.sort(s),.5)}function j(H){for(var Y=H.length,ne,te=-1,K=0,$,ae;++te<Y;)K+=H[te].length;for($=new Array(K);--Y>=0;)for(ae=H[Y],ne=ae.length;--ne>=0;)$[--K]=ae[ne];return $}function Z(H,Y){var ne=H.length,te=-1,K,$;if(Y==null){for(;++te<ne;)if((K=H[te])!=null&&K>=K)for($=K;++te<ne;)(K=H[te])!=null&&$>K&&($=K)}else for(;++te<ne;)if((K=Y(H[te],te,H))!=null&&K>=K)for($=K;++te<ne;)(K=Y(H[te],te,H))!=null&&$>K&&($=K);return $}function ee(H,Y){for(var ne=Y.length,te=new Array(ne);ne--;)te[ne]=H[Y[ne]];return te}function q(H,Y){if(!!(ne=H.length)){var ne,te=0,K=0,$,ae=H[K];for(Y==null&&(Y=s);++te<ne;)(Y($=H[te],ae)<0||Y(ae,ae)!==0)&&(ae=$,K=te);if(Y(ae,ae)===0)return K}}function W(H,Y,ne){for(var te=(ne==null?H.length:ne)-(Y=Y==null?0:+Y),K,$;te;)$=Math.random()*te--|0,K=H[te+Y],H[te+Y]=H[$+Y],H[$+Y]=K;return H}function J(H,Y){var ne=H.length,te=-1,K,$=0;if(Y==null)for(;++te<ne;)(K=+H[te])&&($+=K);else for(;++te<ne;)(K=+Y(H[te],te,H))&&($+=K);return $}function le(H){if(!($=H.length))return[];for(var Y=-1,ne=Z(H,fe),te=new Array(ne);++Y<ne;)for(var K=-1,$,ae=te[Y]=new Array($);++K<$;)ae[K]=H[K][Y];return te}function fe(H){return H.length}function se(){return le(arguments)}u.bisect=i,u.bisectRight=i,u.bisectLeft=a,u.ascending=s,u.bisector=m,u.cross=f,u.descending=l,u.deviation=h,u.extent=d,u.histogram=P,u.thresholdFreedmanDiaconis=F,u.thresholdScott=I,u.thresholdSturges=k,u.max=D,u.mean=U,u.median=B,u.merge=j,u.min=Z,u.pairs=r,u.permute=ee,u.quantile=O,u.range=M,u.scan=q,u.shuffle=W,u.sum=J,u.ticks=v,u.tickIncrement=L,u.tickStep=S,u.transpose=le,u.variance=c,u.zip=se,Object.defineProperty(u,"__esModule",{value:!0})})},{}],108:[function(e,z,N){(function(u,s){s(typeof N=="object"&&typeof z!="undefined"?N:u.d3=u.d3||{})})(this,function(u){var s="$";function m(){}m.prototype=x.prototype={constructor:m,has:function(p){return s+p in this},get:function(p){return this[s+p]},set:function(p,y){return this[s+p]=y,this},remove:function(p){var y=s+p;return y in this&&delete this[y]},clear:function(){for(var p in this)p[0]===s&&delete this[p]},keys:function(){var p=[];for(var y in this)y[0]===s&&p.push(y.slice(1));return p},values:function(){var p=[];for(var y in this)y[0]===s&&p.push(this[y]);return p},entries:function(){var p=[];for(var y in this)y[0]===s&&p.push({key:y.slice(1),value:this[y]});return p},size:function(){var p=0;for(var y in this)y[0]===s&&++p;return p},empty:function(){for(var p in this)if(p[0]===s)return!1;return!0},each:function(p){for(var y in this)y[0]===s&&p(this[y],y.slice(1),this)}};function x(p,y){var g=new m;if(p instanceof m)p.each(function(T,w){g.set(w,T)});else if(Array.isArray(p)){var A=-1,b=p.length,M;if(y==null)for(;++A<b;)g.set(A,p[A]);else for(;++A<b;)g.set(y(M=p[A],A,p),M)}else if(p)for(var _ in p)g.set(_,p[_]);return g}function t(){var p=[],y=[],g,A,b;function M(T,w,v,L){if(w>=p.length)return g!=null&&T.sort(g),A!=null?A(T):T;for(var S=-1,k=T.length,P=p[w++],O,F,I=x(),D,U=v();++S<k;)(D=I.get(O=P(F=T[S])+""))?D.push(F):I.set(O,[F]);return I.each(function(B,j){L(U,j,M(B,w,v,L))}),U}function _(T,w){if(++w>p.length)return T;var v,L=y[w-1];return A!=null&&w>=p.length?v=T.entries():(v=[],T.each(function(S,k){v.push({key:k,values:_(S,w)})})),L!=null?v.sort(function(S,k){return L(S.key,k.key)}):v}return b={object:function(T){return M(T,0,i,a)},map:function(T){return M(T,0,r,n)},entries:function(T){return _(M(T,0,r,n),0)},key:function(T){return p.push(T),b},sortKeys:function(T){return y[p.length-1]=T,b},sortValues:function(T){return g=T,b},rollup:function(T){return A=T,b}}}function i(){return{}}function a(p,y,g){p[y]=g}function r(){return x()}function n(p,y,g){p.set(y,g)}function f(){}var l=x.prototype;f.prototype=o.prototype={constructor:f,has:l.has,add:function(p){return p+="",this[s+p]=p,this},remove:l.remove,clear:l.clear,values:l.keys,size:l.size,empty:l.empty,each:l.each};function o(p,y){var g=new f;if(p instanceof f)p.each(function(M){g.add(M)});else if(p){var A=-1,b=p.length;if(y==null)for(;++A<b;)g.add(p[A]);else for(;++A<b;)g.add(y(p[A],A,p))}return g}function c(p){var y=[];for(var g in p)y.push(g);return y}function h(p){var y=[];for(var g in p)y.push(p[g]);return y}function d(p){var y=[];for(var g in p)y.push({key:g,value:p[g]});return y}u.nest=t,u.set=o,u.map=x,u.keys=c,u.values=h,u.entries=d,Object.defineProperty(u,"__esModule",{value:!0})})},{}],109:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(Ie,Ve,dt){Ie.prototype=Ve.prototype=dt,dt.constructor=Ie}function m(Ie,Ve){var dt=Object.create(Ie.prototype);for(var Rt in Ve)dt[Rt]=Ve[Rt];return dt}function x(){}var t=.7,i=1/t,a="\\s*([+-]?\\d+)\\s*",r="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",n="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",f=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),o=new RegExp("^rgb\\("+[n,n,n]+"\\)$"),c=new RegExp("^rgba\\("+[a,a,a,r]+"\\)$"),h=new RegExp("^rgba\\("+[n,n,n,r]+"\\)$"),d=new RegExp("^hsl\\("+[r,n,n]+"\\)$"),p=new RegExp("^hsla\\("+[r,n,n,r]+"\\)$"),y={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};s(x,M,{copy:function(Ie){return Object.assign(new this.constructor,this,Ie)},displayable:function(){return this.rgb().displayable()},hex:g,formatHex:g,formatHsl:A,formatRgb:b,toString:b});function g(){return this.rgb().formatHex()}function A(){return F(this).formatHsl()}function b(){return this.rgb().formatRgb()}function M(Ie){var Ve,dt;return Ie=(Ie+"").trim().toLowerCase(),(Ve=f.exec(Ie))?(dt=Ve[1].length,Ve=parseInt(Ve[1],16),dt===6?_(Ve):dt===3?new L(Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,(Ve&15)<<4|Ve&15,1):dt===8?T(Ve>>24&255,Ve>>16&255,Ve>>8&255,(Ve&255)/255):dt===4?T(Ve>>12&15|Ve>>8&240,Ve>>8&15|Ve>>4&240,Ve>>4&15|Ve&240,((Ve&15)<<4|Ve&15)/255):null):(Ve=l.exec(Ie))?new L(Ve[1],Ve[2],Ve[3],1):(Ve=o.exec(Ie))?new L(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,1):(Ve=c.exec(Ie))?T(Ve[1],Ve[2],Ve[3],Ve[4]):(Ve=h.exec(Ie))?T(Ve[1]*255/100,Ve[2]*255/100,Ve[3]*255/100,Ve[4]):(Ve=d.exec(Ie))?O(Ve[1],Ve[2]/100,Ve[3]/100,1):(Ve=p.exec(Ie))?O(Ve[1],Ve[2]/100,Ve[3]/100,Ve[4]):y.hasOwnProperty(Ie)?_(y[Ie]):Ie==="transparent"?new L(NaN,NaN,NaN,0):null}function _(Ie){return new L(Ie>>16&255,Ie>>8&255,Ie&255,1)}function T(Ie,Ve,dt,Rt){return Rt<=0&&(Ie=Ve=dt=NaN),new L(Ie,Ve,dt,Rt)}function w(Ie){return Ie instanceof x||(Ie=M(Ie)),Ie?(Ie=Ie.rgb(),new L(Ie.r,Ie.g,Ie.b,Ie.opacity)):new L}function v(Ie,Ve,dt,Rt){return arguments.length===1?w(Ie):new L(Ie,Ve,dt,Rt==null?1:Rt)}function L(Ie,Ve,dt,Rt){this.r=+Ie,this.g=+Ve,this.b=+dt,this.opacity=+Rt}s(L,v,m(x,{brighter:function(Ie){return Ie=Ie==null?i:Math.pow(i,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?t:Math.pow(t,Ie),new L(this.r*Ie,this.g*Ie,this.b*Ie,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:S,formatHex:S,formatRgb:k,toString:k}));function S(){return"#"+P(this.r)+P(this.g)+P(this.b)}function k(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(Ie===1?")":", "+Ie+")")}function P(Ie){return Ie=Math.max(0,Math.min(255,Math.round(Ie)||0)),(Ie<16?"0":"")+Ie.toString(16)}function O(Ie,Ve,dt,Rt){return Rt<=0?Ie=Ve=dt=NaN:dt<=0||dt>=1?Ie=Ve=NaN:Ve<=0&&(Ie=NaN),new D(Ie,Ve,dt,Rt)}function F(Ie){if(Ie instanceof D)return new D(Ie.h,Ie.s,Ie.l,Ie.opacity);if(Ie instanceof x||(Ie=M(Ie)),!Ie)return new D;if(Ie instanceof D)return Ie;Ie=Ie.rgb();var Ve=Ie.r/255,dt=Ie.g/255,Rt=Ie.b/255,Gt=Math.min(Ve,dt,Rt),kt=Math.max(Ve,dt,Rt),zt=NaN,Bt=kt-Gt,Lt=(kt+Gt)/2;return Bt?(Ve===kt?zt=(dt-Rt)/Bt+(dt<Rt)*6:dt===kt?zt=(Rt-Ve)/Bt+2:zt=(Ve-dt)/Bt+4,Bt/=Lt<.5?kt+Gt:2-kt-Gt,zt*=60):Bt=Lt>0&&Lt<1?0:zt,new D(zt,Bt,Lt,Ie.opacity)}function I(Ie,Ve,dt,Rt){return arguments.length===1?F(Ie):new D(Ie,Ve,dt,Rt==null?1:Rt)}function D(Ie,Ve,dt,Rt){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Rt}s(D,I,m(x,{brighter:function(Ie){return Ie=Ie==null?i:Math.pow(i,Ie),new D(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?t:Math.pow(t,Ie),new D(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=this.h%360+(this.h<0)*360,Ve=isNaN(Ie)||isNaN(this.s)?0:this.s,dt=this.l,Rt=dt+(dt<.5?dt:1-dt)*Ve,Gt=2*dt-Rt;return new L(U(Ie>=240?Ie-240:Ie+120,Gt,Rt),U(Ie,Gt,Rt),U(Ie<120?Ie+240:Ie-120,Gt,Rt),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var Ie=this.opacity;return Ie=isNaN(Ie)?1:Math.max(0,Math.min(1,Ie)),(Ie===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(Ie===1?")":", "+Ie+")")}}));function U(Ie,Ve,dt){return(Ie<60?Ve+(dt-Ve)*Ie/60:Ie<180?dt:Ie<240?Ve+(dt-Ve)*(240-Ie)/60:Ve)*255}var B=Math.PI/180,j=180/Math.PI,Z=18,ee=.96422,q=1,W=.82521,J=4/29,le=6/29,fe=3*le*le,se=le*le*le;function H(Ie){if(Ie instanceof te)return new te(Ie.l,Ie.a,Ie.b,Ie.opacity);if(Ie instanceof ce)return me(Ie);Ie instanceof L||(Ie=w(Ie));var Ve=ie(Ie.r),dt=ie(Ie.g),Rt=ie(Ie.b),Gt=K((.2225045*Ve+.7168786*dt+.0606169*Rt)/q),kt,zt;return Ve===dt&&dt===Rt?kt=zt=Gt:(kt=K((.4360747*Ve+.3850649*dt+.1430804*Rt)/ee),zt=K((.0139322*Ve+.0971045*dt+.7141733*Rt)/W)),new te(116*Gt-16,500*(kt-Gt),200*(Gt-zt),Ie.opacity)}function Y(Ie,Ve){return new te(Ie,0,0,Ve==null?1:Ve)}function ne(Ie,Ve,dt,Rt){return arguments.length===1?H(Ie):new te(Ie,Ve,dt,Rt==null?1:Rt)}function te(Ie,Ve,dt,Rt){this.l=+Ie,this.a=+Ve,this.b=+dt,this.opacity=+Rt}s(te,ne,m(x,{brighter:function(Ie){return new te(this.l+Z*(Ie==null?1:Ie),this.a,this.b,this.opacity)},darker:function(Ie){return new te(this.l-Z*(Ie==null?1:Ie),this.a,this.b,this.opacity)},rgb:function(){var Ie=(this.l+16)/116,Ve=isNaN(this.a)?Ie:Ie+this.a/500,dt=isNaN(this.b)?Ie:Ie-this.b/200;return Ve=ee*$(Ve),Ie=q*$(Ie),dt=W*$(dt),new L(ae(3.1338561*Ve-1.6168667*Ie-.4906146*dt),ae(-.9787684*Ve+1.9161415*Ie+.033454*dt),ae(.0719453*Ve-.2289914*Ie+1.4052427*dt),this.opacity)}}));function K(Ie){return Ie>se?Math.pow(Ie,1/3):Ie/fe+J}function $(Ie){return Ie>le?Ie*Ie*Ie:fe*(Ie-J)}function ae(Ie){return 255*(Ie<=.0031308?12.92*Ie:1.055*Math.pow(Ie,1/2.4)-.055)}function ie(Ie){return(Ie/=255)<=.04045?Ie/12.92:Math.pow((Ie+.055)/1.055,2.4)}function oe(Ie){if(Ie instanceof ce)return new ce(Ie.h,Ie.c,Ie.l,Ie.opacity);if(Ie instanceof te||(Ie=H(Ie)),Ie.a===0&&Ie.b===0)return new ce(NaN,0<Ie.l&&Ie.l<100?0:NaN,Ie.l,Ie.opacity);var Ve=Math.atan2(Ie.b,Ie.a)*j;return new ce(Ve<0?Ve+360:Ve,Math.sqrt(Ie.a*Ie.a+Ie.b*Ie.b),Ie.l,Ie.opacity)}function ue(Ie,Ve,dt,Rt){return arguments.length===1?oe(Ie):new ce(dt,Ve,Ie,Rt==null?1:Rt)}function ye(Ie,Ve,dt,Rt){return arguments.length===1?oe(Ie):new ce(Ie,Ve,dt,Rt==null?1:Rt)}function ce(Ie,Ve,dt,Rt){this.h=+Ie,this.c=+Ve,this.l=+dt,this.opacity=+Rt}function me(Ie){if(isNaN(Ie.h))return new te(Ie.l,0,0,Ie.opacity);var Ve=Ie.h*B;return new te(Ie.l,Math.cos(Ve)*Ie.c,Math.sin(Ve)*Ie.c,Ie.opacity)}s(ce,ye,m(x,{brighter:function(Ie){return new ce(this.h,this.c,this.l+Z*(Ie==null?1:Ie),this.opacity)},darker:function(Ie){return new ce(this.h,this.c,this.l-Z*(Ie==null?1:Ie),this.opacity)},rgb:function(){return me(this).rgb()}}));var xe=-.14861,ke=1.78277,Ae=-.29227,Oe=-.90649,He=1.97294,Ge=He*Oe,_e=He*ke,Re=ke*Ae-Oe*xe;function We(Ie){if(Ie instanceof Ue)return new Ue(Ie.h,Ie.s,Ie.l,Ie.opacity);Ie instanceof L||(Ie=w(Ie));var Ve=Ie.r/255,dt=Ie.g/255,Rt=Ie.b/255,Gt=(Re*Rt+Ge*Ve-_e*dt)/(Re+Ge-_e),kt=Rt-Gt,zt=(He*(dt-Gt)-Ae*kt)/Oe,Bt=Math.sqrt(zt*zt+kt*kt)/(He*Gt*(1-Gt)),Lt=Bt?Math.atan2(zt,kt)*j-120:NaN;return new Ue(Lt<0?Lt+360:Lt,Bt,Gt,Ie.opacity)}function qe(Ie,Ve,dt,Rt){return arguments.length===1?We(Ie):new Ue(Ie,Ve,dt,Rt==null?1:Rt)}function Ue(Ie,Ve,dt,Rt){this.h=+Ie,this.s=+Ve,this.l=+dt,this.opacity=+Rt}s(Ue,qe,m(x,{brighter:function(Ie){return Ie=Ie==null?i:Math.pow(i,Ie),new Ue(this.h,this.s,this.l*Ie,this.opacity)},darker:function(Ie){return Ie=Ie==null?t:Math.pow(t,Ie),new Ue(this.h,this.s,this.l*Ie,this.opacity)},rgb:function(){var Ie=isNaN(this.h)?0:(this.h+120)*B,Ve=+this.l,dt=isNaN(this.s)?0:this.s*Ve*(1-Ve),Rt=Math.cos(Ie),Gt=Math.sin(Ie);return new L(255*(Ve+dt*(xe*Rt+ke*Gt)),255*(Ve+dt*(Ae*Rt+Oe*Gt)),255*(Ve+dt*(He*Rt)),this.opacity)}})),u.color=M,u.cubehelix=qe,u.gray=Y,u.hcl=ye,u.hsl=I,u.lab=ne,u.lch=ue,u.rgb=v,Object.defineProperty(u,"__esModule",{value:!0})})},{}],110:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s={value:function(){}};function m(){for(var r=0,n=arguments.length,f={},l;r<n;++r){if(!(l=arguments[r]+"")||l in f||/[\s.]/.test(l))throw new Error("illegal type: "+l);f[l]=[]}return new x(f)}function x(r){this._=r}function t(r,n){return r.trim().split(/^|\s+/).map(function(f){var l="",o=f.indexOf(".");if(o>=0&&(l=f.slice(o+1),f=f.slice(0,o)),f&&!n.hasOwnProperty(f))throw new Error("unknown type: "+f);return{type:f,name:l}})}x.prototype=m.prototype={constructor:x,on:function(r,n){var f=this._,l=t(r+"",f),o,c=-1,h=l.length;if(arguments.length<2){for(;++c<h;)if((o=(r=l[c]).type)&&(o=i(f[o],r.name)))return o;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++c<h;)if(o=(r=l[c]).type)f[o]=a(f[o],r.name,n);else if(n==null)for(o in f)f[o]=a(f[o],r.name,null);return this},copy:function(){var r={},n=this._;for(var f in n)r[f]=n[f].slice();return new x(r)},call:function(r,n){if((o=arguments.length-2)>0)for(var f=new Array(o),l=0,o,c;l<o;++l)f[l]=arguments[l+2];if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(c=this._[r],l=0,o=c.length;l<o;++l)c[l].value.apply(n,f)},apply:function(r,n,f){if(!this._.hasOwnProperty(r))throw new Error("unknown type: "+r);for(var l=this._[r],o=0,c=l.length;o<c;++o)l[o].value.apply(n,f)}};function i(r,n){for(var f=0,l=r.length,o;f<l;++f)if((o=r[f]).name===n)return o.value}function a(r,n,f){for(var l=0,o=r.length;l<o;++l)if(r[l].name===n){r[l]=s,r=r.slice(0,l).concat(r.slice(l+1));break}return f!=null&&r.push({name:n,value:f}),r}u.dispatch=m,Object.defineProperty(u,"__esModule",{value:!0})})},{}],111:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-quadtree"),e("d3-collection"),e("d3-dispatch"),e("d3-timer")):s(u.d3=u.d3||{},u.d3,u.d3,u.d3,u.d3)})(this,function(u,s,m,x,t){function i(w,v){var L;w==null&&(w=0),v==null&&(v=0);function S(){var k,P=L.length,O,F=0,I=0;for(k=0;k<P;++k)O=L[k],F+=O.x,I+=O.y;for(F=F/P-w,I=I/P-v,k=0;k<P;++k)O=L[k],O.x-=F,O.y-=I}return S.initialize=function(k){L=k},S.x=function(k){return arguments.length?(w=+k,S):w},S.y=function(k){return arguments.length?(v=+k,S):v},S}function a(w){return function(){return w}}function r(){return(Math.random()-.5)*1e-6}function n(w){return w.x+w.vx}function f(w){return w.y+w.vy}function l(w){var v,L,S=1,k=1;typeof w!="function"&&(w=a(w==null?1:+w));function P(){for(var I,D=v.length,U,B,j,Z,ee,q,W=0;W<k;++W)for(U=s.quadtree(v,n,f).visitAfter(O),I=0;I<D;++I)B=v[I],ee=L[B.index],q=ee*ee,j=B.x+B.vx,Z=B.y+B.vy,U.visit(J);function J(le,fe,se,H,Y){var ne=le.data,te=le.r,K=ee+te;if(ne){if(ne.index>B.index){var $=j-ne.x-ne.vx,ae=Z-ne.y-ne.vy,ie=$*$+ae*ae;ie<K*K&&($===0&&($=r(),ie+=$*$),ae===0&&(ae=r(),ie+=ae*ae),ie=(K-(ie=Math.sqrt(ie)))/ie*S,B.vx+=($*=ie)*(K=(te*=te)/(q+te)),B.vy+=(ae*=ie)*K,ne.vx-=$*(K=1-K),ne.vy-=ae*K)}return}return fe>j+K||H<j-K||se>Z+K||Y<Z-K}}function O(I){if(I.data)return I.r=L[I.data.index];for(var D=I.r=0;D<4;++D)I[D]&&I[D].r>I.r&&(I.r=I[D].r)}function F(){if(!!v){var I,D=v.length,U;for(L=new Array(D),I=0;I<D;++I)U=v[I],L[U.index]=+w(U,I,v)}}return P.initialize=function(I){v=I,F()},P.iterations=function(I){return arguments.length?(k=+I,P):k},P.strength=function(I){return arguments.length?(S=+I,P):S},P.radius=function(I){return arguments.length?(w=typeof I=="function"?I:a(+I),F(),P):w},P}function o(w){return w.index}function c(w,v){var L=w.get(v);if(!L)throw new Error("missing: "+v);return L}function h(w){var v=o,L=U,S,k=a(30),P,O,F,I,D=1;w==null&&(w=[]);function U(q){return 1/Math.min(F[q.source.index],F[q.target.index])}function B(q){for(var W=0,J=w.length;W<D;++W)for(var le=0,fe,se,H,Y,ne,te,K;le<J;++le)fe=w[le],se=fe.source,H=fe.target,Y=H.x+H.vx-se.x-se.vx||r(),ne=H.y+H.vy-se.y-se.vy||r(),te=Math.sqrt(Y*Y+ne*ne),te=(te-P[le])/te*q*S[le],Y*=te,ne*=te,H.vx-=Y*(K=I[le]),H.vy-=ne*K,se.vx+=Y*(K=1-K),se.vy+=ne*K}function j(){if(!!O){var q,W=O.length,J=w.length,le=m.map(O,v),fe;for(q=0,F=new Array(W);q<J;++q)fe=w[q],fe.index=q,typeof fe.source!="object"&&(fe.source=c(le,fe.source)),typeof fe.target!="object"&&(fe.target=c(le,fe.target)),F[fe.source.index]=(F[fe.source.index]||0)+1,F[fe.target.index]=(F[fe.target.index]||0)+1;for(q=0,I=new Array(J);q<J;++q)fe=w[q],I[q]=F[fe.source.index]/(F[fe.source.index]+F[fe.target.index]);S=new Array(J),Z(),P=new Array(J),ee()}}function Z(){if(!!O)for(var q=0,W=w.length;q<W;++q)S[q]=+L(w[q],q,w)}function ee(){if(!!O)for(var q=0,W=w.length;q<W;++q)P[q]=+k(w[q],q,w)}return B.initialize=function(q){O=q,j()},B.links=function(q){return arguments.length?(w=q,j(),B):w},B.id=function(q){return arguments.length?(v=q,B):v},B.iterations=function(q){return arguments.length?(D=+q,B):D},B.strength=function(q){return arguments.length?(L=typeof q=="function"?q:a(+q),Z(),B):L},B.distance=function(q){return arguments.length?(k=typeof q=="function"?q:a(+q),ee(),B):k},B}function d(w){return w.x}function p(w){return w.y}var y=10,g=Math.PI*(3-Math.sqrt(5));function A(w){var v,L=1,S=.001,k=1-Math.pow(S,1/300),P=0,O=.6,F=m.map(),I=t.timer(U),D=x.dispatch("tick","end");w==null&&(w=[]);function U(){B(),D.call("tick",v),L<S&&(I.stop(),D.call("end",v))}function B(ee){var q,W=w.length,J;ee===void 0&&(ee=1);for(var le=0;le<ee;++le)for(L+=(P-L)*k,F.each(function(fe){fe(L)}),q=0;q<W;++q)J=w[q],J.fx==null?J.x+=J.vx*=O:(J.x=J.fx,J.vx=0),J.fy==null?J.y+=J.vy*=O:(J.y=J.fy,J.vy=0);return v}function j(){for(var ee=0,q=w.length,W;ee<q;++ee){if(W=w[ee],W.index=ee,W.fx!=null&&(W.x=W.fx),W.fy!=null&&(W.y=W.fy),isNaN(W.x)||isNaN(W.y)){var J=y*Math.sqrt(ee),le=ee*g;W.x=J*Math.cos(le),W.y=J*Math.sin(le)}(isNaN(W.vx)||isNaN(W.vy))&&(W.vx=W.vy=0)}}function Z(ee){return ee.initialize&&ee.initialize(w),ee}return j(),v={tick:B,restart:function(){return I.restart(U),v},stop:function(){return I.stop(),v},nodes:function(ee){return arguments.length?(w=ee,j(),F.each(Z),v):w},alpha:function(ee){return arguments.length?(L=+ee,v):L},alphaMin:function(ee){return arguments.length?(S=+ee,v):S},alphaDecay:function(ee){return arguments.length?(k=+ee,v):+k},alphaTarget:function(ee){return arguments.length?(P=+ee,v):P},velocityDecay:function(ee){return arguments.length?(O=1-ee,v):1-O},force:function(ee,q){return arguments.length>1?(q==null?F.remove(ee):F.set(ee,Z(q)),v):F.get(ee)},find:function(ee,q,W){var J=0,le=w.length,fe,se,H,Y,ne;for(W==null?W=1/0:W*=W,J=0;J<le;++J)Y=w[J],fe=ee-Y.x,se=q-Y.y,H=fe*fe+se*se,H<W&&(ne=Y,W=H);return ne},on:function(ee,q){return arguments.length>1?(D.on(ee,q),v):D.on(ee)}}}function b(){var w,v,L,S=a(-30),k,P=1,O=1/0,F=.81;function I(j){var Z,ee=w.length,q=s.quadtree(w,d,p).visitAfter(U);for(L=j,Z=0;Z<ee;++Z)v=w[Z],q.visit(B)}function D(){if(!!w){var j,Z=w.length,ee;for(k=new Array(Z),j=0;j<Z;++j)ee=w[j],k[ee.index]=+S(ee,j,w)}}function U(j){var Z=0,ee,q,W=0,J,le,fe;if(j.length){for(J=le=fe=0;fe<4;++fe)(ee=j[fe])&&(q=Math.abs(ee.value))&&(Z+=ee.value,W+=q,J+=q*ee.x,le+=q*ee.y);j.x=J/W,j.y=le/W}else{ee=j,ee.x=ee.data.x,ee.y=ee.data.y;do Z+=k[ee.data.index];while(ee=ee.next)}j.value=Z}function B(j,Z,ee,q){if(!j.value)return!0;var W=j.x-v.x,J=j.y-v.y,le=q-Z,fe=W*W+J*J;if(le*le/F<fe)return fe<O&&(W===0&&(W=r(),fe+=W*W),J===0&&(J=r(),fe+=J*J),fe<P&&(fe=Math.sqrt(P*fe)),v.vx+=W*j.value*L/fe,v.vy+=J*j.value*L/fe),!0;if(j.length||fe>=O)return;(j.data!==v||j.next)&&(W===0&&(W=r(),fe+=W*W),J===0&&(J=r(),fe+=J*J),fe<P&&(fe=Math.sqrt(P*fe)));do j.data!==v&&(le=k[j.data.index]*L/fe,v.vx+=W*le,v.vy+=J*le);while(j=j.next)}return I.initialize=function(j){w=j,D()},I.strength=function(j){return arguments.length?(S=typeof j=="function"?j:a(+j),D(),I):S},I.distanceMin=function(j){return arguments.length?(P=j*j,I):Math.sqrt(P)},I.distanceMax=function(j){return arguments.length?(O=j*j,I):Math.sqrt(O)},I.theta=function(j){return arguments.length?(F=j*j,I):Math.sqrt(F)},I}function M(w,v,L){var S,k=a(.1),P,O;typeof w!="function"&&(w=a(+w)),v==null&&(v=0),L==null&&(L=0);function F(D){for(var U=0,B=S.length;U<B;++U){var j=S[U],Z=j.x-v||1e-6,ee=j.y-L||1e-6,q=Math.sqrt(Z*Z+ee*ee),W=(O[U]-q)*P[U]*D/q;j.vx+=Z*W,j.vy+=ee*W}}function I(){if(!!S){var D,U=S.length;for(P=new Array(U),O=new Array(U),D=0;D<U;++D)O[D]=+w(S[D],D,S),P[D]=isNaN(O[D])?0:+k(S[D],D,S)}}return F.initialize=function(D){S=D,I()},F.strength=function(D){return arguments.length?(k=typeof D=="function"?D:a(+D),I(),F):k},F.radius=function(D){return arguments.length?(w=typeof D=="function"?D:a(+D),I(),F):w},F.x=function(D){return arguments.length?(v=+D,F):v},F.y=function(D){return arguments.length?(L=+D,F):L},F}function _(w){var v=a(.1),L,S,k;typeof w!="function"&&(w=a(w==null?0:+w));function P(F){for(var I=0,D=L.length,U;I<D;++I)U=L[I],U.vx+=(k[I]-U.x)*S[I]*F}function O(){if(!!L){var F,I=L.length;for(S=new Array(I),k=new Array(I),F=0;F<I;++F)S[F]=isNaN(k[F]=+w(L[F],F,L))?0:+v(L[F],F,L)}}return P.initialize=function(F){L=F,O()},P.strength=function(F){return arguments.length?(v=typeof F=="function"?F:a(+F),O(),P):v},P.x=function(F){return arguments.length?(w=typeof F=="function"?F:a(+F),O(),P):w},P}function T(w){var v=a(.1),L,S,k;typeof w!="function"&&(w=a(w==null?0:+w));function P(F){for(var I=0,D=L.length,U;I<D;++I)U=L[I],U.vy+=(k[I]-U.y)*S[I]*F}function O(){if(!!L){var F,I=L.length;for(S=new Array(I),k=new Array(I),F=0;F<I;++F)S[F]=isNaN(k[F]=+w(L[F],F,L))?0:+v(L[F],F,L)}}return P.initialize=function(F){L=F,O()},P.strength=function(F){return arguments.length?(v=typeof F=="function"?F:a(+F),O(),P):v},P.y=function(F){return arguments.length?(w=typeof F=="function"?F:a(+F),O(),P):w},P}u.forceCenter=i,u.forceCollide=l,u.forceLink=h,u.forceManyBody=b,u.forceRadial=M,u.forceSimulation=A,u.forceX=_,u.forceY=T,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=typeof globalThis!="undefined"?globalThis:u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(w){return Math.abs(w=Math.round(w))>=1e21?w.toLocaleString("en").replace(/,/g,""):w.toString(10)}function m(w,v){if((L=(w=v?w.toExponential(v-1):w.toExponential()).indexOf("e"))<0)return null;var L,S=w.slice(0,L);return[S.length>1?S[0]+S.slice(2):S,+w.slice(L+1)]}function x(w){return w=m(Math.abs(w)),w?w[1]:NaN}function t(w,v){return function(L,S){for(var k=L.length,P=[],O=0,F=w[0],I=0;k>0&&F>0&&(I+F+1>S&&(F=Math.max(1,S-I)),P.push(L.substring(k-=F,k+F)),!((I+=F+1)>S));)F=w[O=(O+1)%w.length];return P.reverse().join(v)}}function i(w){return function(v){return v.replace(/[0-9]/g,function(L){return w[+L]})}}var a=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function r(w){if(!(v=a.exec(w)))throw new Error("invalid format: "+w);var v;return new n({fill:v[1],align:v[2],sign:v[3],symbol:v[4],zero:v[5],width:v[6],comma:v[7],precision:v[8]&&v[8].slice(1),trim:v[9],type:v[10]})}r.prototype=n.prototype;function n(w){this.fill=w.fill===void 0?" ":w.fill+"",this.align=w.align===void 0?">":w.align+"",this.sign=w.sign===void 0?"-":w.sign+"",this.symbol=w.symbol===void 0?"":w.symbol+"",this.zero=!!w.zero,this.width=w.width===void 0?void 0:+w.width,this.comma=!!w.comma,this.precision=w.precision===void 0?void 0:+w.precision,this.trim=!!w.trim,this.type=w.type===void 0?"":w.type+""}n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function f(w){e:for(var v=w.length,L=1,S=-1,k;L<v;++L)switch(w[L]){case".":S=k=L;break;case"0":S===0&&(S=L),k=L;break;default:if(!+w[L])break e;S>0&&(S=0);break}return S>0?w.slice(0,S)+w.slice(k+1):w}var l;function o(w,v){var L=m(w,v);if(!L)return w+"";var S=L[0],k=L[1],P=k-(l=Math.max(-8,Math.min(8,Math.floor(k/3)))*3)+1,O=S.length;return P===O?S:P>O?S+new Array(P-O+1).join("0"):P>0?S.slice(0,P)+"."+S.slice(P):"0."+new Array(1-P).join("0")+m(w,Math.max(0,v+P-1))[0]}function c(w,v){var L=m(w,v);if(!L)return w+"";var S=L[0],k=L[1];return k<0?"0."+new Array(-k).join("0")+S:S.length>k+1?S.slice(0,k+1)+"."+S.slice(k+1):S+new Array(k-S.length+2).join("0")}var h={"%":function(w,v){return(w*100).toFixed(v)},b:function(w){return Math.round(w).toString(2)},c:function(w){return w+""},d:s,e:function(w,v){return w.toExponential(v)},f:function(w,v){return w.toFixed(v)},g:function(w,v){return w.toPrecision(v)},o:function(w){return Math.round(w).toString(8)},p:function(w,v){return c(w*100,v)},r:c,s:o,X:function(w){return Math.round(w).toString(16).toUpperCase()},x:function(w){return Math.round(w).toString(16)}};function d(w){return w}var p=Array.prototype.map,y=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function g(w){var v=w.grouping===void 0||w.thousands===void 0?d:t(p.call(w.grouping,Number),w.thousands+""),L=w.currency===void 0?"":w.currency[0]+"",S=w.currency===void 0?"":w.currency[1]+"",k=w.decimal===void 0?".":w.decimal+"",P=w.numerals===void 0?d:i(p.call(w.numerals,String)),O=w.percent===void 0?"%":w.percent+"",F=w.minus===void 0?"-":w.minus+"",I=w.nan===void 0?"NaN":w.nan+"";function D(B){B=r(B);var j=B.fill,Z=B.align,ee=B.sign,q=B.symbol,W=B.zero,J=B.width,le=B.comma,fe=B.precision,se=B.trim,H=B.type;H==="n"?(le=!0,H="g"):h[H]||(fe===void 0&&(fe=12),se=!0,H="g"),(W||j==="0"&&Z==="=")&&(W=!0,j="0",Z="=");var Y=q==="$"?L:q==="#"&&/[boxX]/.test(H)?"0"+H.toLowerCase():"",ne=q==="$"?S:/[%p]/.test(H)?O:"",te=h[H],K=/[defgprs%]/.test(H);fe=fe===void 0?6:/[gprs]/.test(H)?Math.max(1,Math.min(21,fe)):Math.max(0,Math.min(20,fe));function $(ae){var ie=Y,oe=ne,ue,ye,ce;if(H==="c")oe=te(ae)+oe,ae="";else{ae=+ae;var me=ae<0||1/ae<0;if(ae=isNaN(ae)?I:te(Math.abs(ae),fe),se&&(ae=f(ae)),me&&+ae==0&&ee!=="+"&&(me=!1),ie=(me?ee==="("?ee:F:ee==="-"||ee==="("?"":ee)+ie,oe=(H==="s"?y[8+l/3]:"")+oe+(me&&ee==="("?")":""),K){for(ue=-1,ye=ae.length;++ue<ye;)if(ce=ae.charCodeAt(ue),48>ce||ce>57){oe=(ce===46?k+ae.slice(ue+1):ae.slice(ue))+oe,ae=ae.slice(0,ue);break}}}le&&!W&&(ae=v(ae,1/0));var xe=ie.length+ae.length+oe.length,ke=xe<J?new Array(J-xe+1).join(j):"";switch(le&&W&&(ae=v(ke+ae,ke.length?J-oe.length:1/0),ke=""),Z){case"<":ae=ie+ae+oe+ke;break;case"=":ae=ie+ke+ae+oe;break;case"^":ae=ke.slice(0,xe=ke.length>>1)+ie+ae+oe+ke.slice(xe);break;default:ae=ke+ie+ae+oe;break}return P(ae)}return $.toString=function(){return B+""},$}function U(B,j){var Z=D((B=r(B),B.type="f",B)),ee=Math.max(-8,Math.min(8,Math.floor(x(j)/3)))*3,q=Math.pow(10,-ee),W=y[8+ee/3];return function(J){return Z(q*J)+W}}return{format:D,formatPrefix:U}}var A;b({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function b(w){return A=g(w),u.format=A.format,u.formatPrefix=A.formatPrefix,A}function M(w){return Math.max(0,-x(Math.abs(w)))}function _(w,v){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(x(v)/3)))*3-x(Math.abs(w)))}function T(w,v){return w=Math.abs(w),v=Math.abs(v)-w,Math.max(0,x(v)-x(w))+1}u.FormatSpecifier=n,u.formatDefaultLocale=b,u.formatLocale=g,u.formatSpecifier=r,u.precisionFixed=M,u.precisionPrefix=_,u.precisionRound=T,Object.defineProperty(u,"__esModule",{value:!0})})},{}],113:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-geo"),e("d3-array")):s(u.d3=u.d3||{},u.d3,u.d3)})(this,function(u,s,m){var x=Math.abs,t=Math.atan,i=Math.atan2,a=Math.cos,r=Math.exp,n=Math.floor,f=Math.log,l=Math.max,o=Math.min,c=Math.pow,h=Math.round,d=Math.sign||function(ze){return ze>0?1:ze<0?-1:0},p=Math.sin,y=Math.tan,g=1e-6,A=1e-12,b=Math.PI,M=b/2,_=b/4,T=Math.SQRT1_2,w=I(2),v=I(b),L=b*2,S=180/b,k=b/180;function P(ze){return ze?ze/Math.sin(ze):1}function O(ze){return ze>1?M:ze<-1?-M:Math.asin(ze)}function F(ze){return ze>1?0:ze<-1?b:Math.acos(ze)}function I(ze){return ze>0?Math.sqrt(ze):0}function D(ze){return ze=r(2*ze),(ze-1)/(ze+1)}function U(ze){return(r(ze)-r(-ze))/2}function B(ze){return(r(ze)+r(-ze))/2}function j(ze){return f(ze+I(ze*ze+1))}function Z(ze){return f(ze+I(ze*ze-1))}function ee(ze){var Ye=y(ze/2),nt=2*f(a(ze/2))/(Ye*Ye);function lt(_t,bt){var Tt=a(_t),qt=a(bt),sr=p(bt),Qt=qt*Tt,fr=-((1-Qt?f((1+Qt)/2)/(1-Qt):-.5)+nt/(1+Qt));return[fr*qt*p(_t),fr*sr]}return lt.invert=function(_t,bt){var Tt=I(_t*_t+bt*bt),qt=-ze/2,sr=50,Qt;if(!Tt)return[0,0];do{var fr=qt/2,Er=a(fr),Hr=p(fr),en=Hr/Er,_n=-f(x(Er));qt-=Qt=(2/en*_n-nt*en-Tt)/(-_n/(Hr*Hr)+1-nt/(2*Er*Er))*(Er<0?.7:1)}while(x(Qt)>g&&--sr>0);var Pn=p(qt);return[i(_t*Pn,Tt*a(qt)),O(bt*Pn/Tt)]},lt}function q(){var ze=M,Ye=s.geoProjectionMutator(ee),nt=Ye(ze);return nt.radius=function(lt){return arguments.length?Ye(ze=lt*k):ze*S},nt.scale(179.976).clipAngle(147)}function W(ze,Ye){var nt=a(Ye),lt=P(F(nt*a(ze/=2)));return[2*nt*p(ze)*lt,p(Ye)*lt]}W.invert=function(ze,Ye){if(!(ze*ze+4*Ye*Ye>b*b+g)){var nt=ze,lt=Ye,_t=25;do{var bt=p(nt),Tt=p(nt/2),qt=a(nt/2),sr=p(lt),Qt=a(lt),fr=p(2*lt),Er=sr*sr,Hr=Qt*Qt,en=Tt*Tt,_n=1-Hr*qt*qt,Pn=_n?F(Qt*qt)*I(Kn=1/_n):Kn=0,Kn,xa=2*Pn*Qt*Tt-ze,wa=Pn*sr-Ye,Ja=Kn*(Hr*en+Pn*Qt*qt*Er),Xa=Kn*(.5*bt*fr-Pn*2*sr*Tt),ni=Kn*.25*(fr*Tt-Pn*sr*Hr*bt),vi=Kn*(Er*qt+Pn*en*Qt),ho=Xa*ni-vi*Ja;if(!ho)break;var ii=(wa*Xa-xa*vi)/ho,Xi=(xa*ni-wa*Ja)/ho;nt-=ii,lt-=Xi}while((x(ii)>g||x(Xi)>g)&&--_t>0);return[nt,lt]}};function J(){return s.geoProjection(W).scale(152.63)}function le(ze){var Ye=p(ze),nt=a(ze),lt=ze>=0?1:-1,_t=y(lt*ze),bt=(1+Ye-nt)/2;function Tt(qt,sr){var Qt=a(sr),fr=a(qt/=2);return[(1+Qt)*p(qt),(lt*sr>-i(fr,_t)-.001?0:-lt*10)+bt+p(sr)*nt-(1+Qt)*Ye*fr]}return Tt.invert=function(qt,sr){var Qt=0,fr=0,Er=50;do{var Hr=a(Qt),en=p(Qt),_n=a(fr),Pn=p(fr),Kn=1+_n,xa=Kn*en-qt,wa=bt+Pn*nt-Kn*Ye*Hr-sr,Ja=Kn*Hr/2,Xa=-en*Pn,ni=Ye*Kn*en/2,vi=nt*_n+Ye*Hr*Pn,ho=Xa*ni-vi*Ja,ii=(wa*Xa-xa*vi)/ho/2,Xi=(xa*ni-wa*Ja)/ho;x(Xi)>2&&(Xi/=2),Qt-=ii,fr-=Xi}while((x(ii)>g||x(Xi)>g)&&--Er>0);return lt*fr>-i(a(Qt),_t)-.001?[Qt*2,fr]:null},Tt}function fe(){var ze=20*k,Ye=ze>=0?1:-1,nt=y(Ye*ze),lt=s.geoProjectionMutator(le),_t=lt(ze),bt=_t.stream;return _t.parallel=function(Tt){return arguments.length?(nt=y((Ye=(ze=Tt*k)>=0?1:-1)*ze),lt(ze)):ze*S},_t.stream=function(Tt){var qt=_t.rotate(),sr=bt(Tt),Qt=(_t.rotate([0,0]),bt(Tt)),fr=_t.precision();return _t.rotate(qt),sr.sphere=function(){Qt.polygonStart(),Qt.lineStart();for(var Er=Ye*-180;Ye*Er<180;Er+=Ye*90)Qt.point(Er,Ye*90);if(ze)for(;Ye*(Er-=3*Ye*fr)>=-180;)Qt.point(Er,Ye*-i(a(Er*k/2),nt)*S);Qt.lineEnd(),Qt.polygonEnd()},sr},_t.scale(218.695).center([0,28.0974])}function se(ze,Ye){var nt=y(Ye/2),lt=I(1-nt*nt),_t=1+lt*a(ze/=2),bt=p(ze)*lt/_t,Tt=nt/_t,qt=bt*bt,sr=Tt*Tt;return[4/3*bt*(3+qt-3*sr),4/3*Tt*(3+3*qt-sr)]}se.invert=function(ze,Ye){if(ze*=3/8,Ye*=3/8,!ze&&x(Ye)>1)return null;var nt=ze*ze,lt=Ye*Ye,_t=1+nt+lt,bt=I((_t-I(_t*_t-4*Ye*Ye))/2),Tt=O(bt)/3,qt=bt?Z(x(Ye/bt))/3:j(x(ze))/3,sr=a(Tt),Qt=B(qt),fr=Qt*Qt-sr*sr;return[d(ze)*2*i(U(qt)*sr,.25-fr),d(Ye)*2*i(Qt*p(Tt),.25+fr)]};function H(){return s.geoProjection(se).scale(66.1603)}var Y=I(8),ne=f(1+w);function te(ze,Ye){var nt=x(Ye);return nt<_?[ze,f(y(_+Ye/2))]:[ze*a(nt)*(2*w-1/p(nt)),d(Ye)*(2*w*(nt-_)-f(y(nt/2)))]}te.invert=function(ze,Ye){if((bt=x(Ye))<ne)return[ze,2*t(r(Ye))-M];var nt=_,lt=25,_t,bt;do{var Tt=a(nt/2),qt=y(nt/2);nt-=_t=(Y*(nt-_)-f(qt)-bt)/(Y-Tt*Tt/(2*qt))}while(x(_t)>A&&--lt>0);return[ze/(a(nt)*(Y-1/p(nt))),d(Ye)*nt]};function K(){return s.geoProjection(te).scale(112.314)}function $(ze){var Ye=2*b/ze;function nt(lt,_t){var bt=s.geoAzimuthalEquidistantRaw(lt,_t);if(x(lt)>M){var Tt=i(bt[1],bt[0]),qt=I(bt[0]*bt[0]+bt[1]*bt[1]),sr=Ye*h((Tt-M)/Ye)+M,Qt=i(p(Tt-=sr),2-a(Tt));Tt=sr+O(b/qt*p(Qt))-Qt,bt[0]=qt*a(Tt),bt[1]=qt*p(Tt)}return bt}return nt.invert=function(lt,_t){var bt=I(lt*lt+_t*_t);if(bt>M){var Tt=i(_t,lt),qt=Ye*h((Tt-M)/Ye)+M,sr=Tt>qt?-1:1,Qt=bt*a(qt-Tt),fr=1/y(sr*F((Qt-b)/I(b*(b-2*Qt)+bt*bt)));Tt=qt+2*t((fr+sr*I(fr*fr-3))/3),lt=bt*a(Tt),_t=bt*p(Tt)}return s.geoAzimuthalEquidistantRaw.invert(lt,_t)},nt}function ae(){var ze=5,Ye=s.geoProjectionMutator($),nt=Ye(ze),lt=nt.stream,_t=.01,bt=-a(_t*k),Tt=p(_t*k);return nt.lobes=function(qt){return arguments.length?Ye(ze=+qt):ze},nt.stream=function(qt){var sr=nt.rotate(),Qt=lt(qt),fr=(nt.rotate([0,0]),lt(qt));return nt.rotate(sr),Qt.sphere=function(){fr.polygonStart(),fr.lineStart();for(var Er=0,Hr=360/ze,en=2*b/ze,_n=90-180/ze,Pn=M;Er<ze;++Er,_n-=Hr,Pn-=en)fr.point(i(Tt*a(Pn),bt)*S,O(Tt*p(Pn))*S),_n<-90?(fr.point(-90,-180-_n-_t),fr.point(-90,-180-_n+_t)):(fr.point(90,_n+_t),fr.point(90,_n-_t));fr.lineEnd(),fr.polygonEnd()},Qt},nt.scale(87.8076).center([0,17.1875]).clipAngle(180-.001)}function ie(ze,Ye){if(arguments.length<2&&(Ye=ze),Ye===1)return s.geoAzimuthalEqualAreaRaw;if(Ye===1/0)return oe;function nt(lt,_t){var bt=s.geoAzimuthalEqualAreaRaw(lt/Ye,_t);return bt[0]*=ze,bt}return nt.invert=function(lt,_t){var bt=s.geoAzimuthalEqualAreaRaw.invert(lt/ze,_t);return bt[0]*=Ye,bt},nt}function oe(ze,Ye){return[ze*a(Ye)/a(Ye/=2),2*p(Ye)]}oe.invert=function(ze,Ye){var nt=2*O(Ye/2);return[ze*a(nt/2)/a(nt),nt]};function ue(){var ze=2,Ye=s.geoProjectionMutator(ie),nt=Ye(ze);return nt.coefficient=function(lt){return arguments.length?Ye(ze=+lt):ze},nt.scale(169.529)}function ye(ze,Ye,nt){var lt=100,_t,bt,Tt;nt=nt===void 0?0:+nt,Ye=+Ye;do bt=ze(nt),Tt=ze(nt+g),bt===Tt&&(Tt=bt+g),nt-=_t=-1*g*(bt-Ye)/(bt-Tt);while(lt-- >0&&x(_t)>g);return lt<0?NaN:nt}function ce(ze,Ye,nt){return Ye===void 0&&(Ye=40),nt===void 0&&(nt=A),function(lt,_t,bt,Tt){var qt,sr,Qt;bt=bt===void 0?0:+bt,Tt=Tt===void 0?0:+Tt;for(var fr=0;fr<Ye;fr++){var Er=ze(bt,Tt),Hr=Er[0]-lt,en=Er[1]-_t;if(x(Hr)<nt&&x(en)<nt)break;var _n=Hr*Hr+en*en;if(_n>qt){bt-=sr/=2,Tt-=Qt/=2;continue}qt=_n;var Pn=(bt>0?-1:1)*nt,Kn=(Tt>0?-1:1)*nt,xa=ze(bt+Pn,Tt),wa=ze(bt,Tt+Kn),Ja=(xa[0]-Er[0])/Pn,Xa=(xa[1]-Er[1])/Pn,ni=(wa[0]-Er[0])/Kn,vi=(wa[1]-Er[1])/Kn,ho=vi*Ja-Xa*ni,ii=(x(ho)<.5?.5:1)/ho;if(sr=(en*ni-Hr*vi)*ii,Qt=(Hr*Xa-en*Ja)*ii,bt+=sr,Tt+=Qt,x(sr)<nt&&x(Qt)<nt)break}return[bt,Tt]}}function me(){var ze=ie(1.68,2),Ye=1.4,nt=12;function lt(_t,bt){if(_t+bt<-Ye){var Tt=(_t-bt+1.6)*(_t+bt+Ye)/8;_t+=Tt,bt-=.8*Tt*p(bt+b/2)}var qt=ze(_t,bt),sr=(1-a(_t*bt))/nt;return qt[1]<0&&(qt[0]*=1+sr),qt[1]>0&&(qt[1]*=1+sr/1.5*qt[0]*qt[0]),qt}return lt.invert=ce(lt),lt}function xe(){return s.geoProjection(me()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])}function ke(ze,Ye){var nt=ze*p(Ye),lt=30,_t;do Ye-=_t=(Ye+p(Ye)-nt)/(1+a(Ye));while(x(_t)>g&&--lt>0);return Ye/2}function Ae(ze,Ye,nt){function lt(_t,bt){return[ze*_t*a(bt=ke(nt,bt)),Ye*p(bt)]}return lt.invert=function(_t,bt){return bt=O(bt/Ye),[_t/(ze*a(bt)),O((2*bt+p(2*bt))/nt)]},lt}var Oe=Ae(w/M,w,b);function He(){return s.geoProjection(Oe).scale(169.529)}var Ge=2.00276,_e=1.11072;function Re(ze,Ye){var nt=ke(b,Ye);return[Ge*ze/(1/a(Ye)+_e/a(nt)),(Ye+w*p(nt))/Ge]}Re.invert=function(ze,Ye){var nt=Ge*Ye,lt=Ye<0?-_:_,_t=25,bt,Tt;do Tt=nt-w*p(lt),lt-=bt=(p(2*lt)+2*lt-b*p(Tt))/(2*a(2*lt)+2+b*a(Tt)*w*a(lt));while(x(bt)>g&&--_t>0);return Tt=nt-w*p(lt),[ze*(1/a(Tt)+_e/a(lt))/Ge,Tt]};function We(){return s.geoProjection(Re).scale(160.857)}function qe(ze){var Ye=0,nt=s.geoProjectionMutator(ze),lt=nt(Ye);return lt.parallel=function(_t){return arguments.length?nt(Ye=_t*k):Ye*S},lt}function Ue(ze,Ye){return[ze*a(Ye),Ye]}Ue.invert=function(ze,Ye){return[ze/a(Ye),Ye]};function Ie(){return s.geoProjection(Ue).scale(152.63)}function Ve(ze){if(!ze)return Ue;var Ye=1/y(ze);function nt(lt,_t){var bt=Ye+ze-_t,Tt=bt&&lt*a(_t)/bt;return[bt*p(Tt),Ye-bt*a(Tt)]}return nt.invert=function(lt,_t){var bt=I(lt*lt+(_t=Ye-_t)*_t),Tt=Ye+ze-bt;return[bt/a(Tt)*i(lt,_t),Tt]},nt}function dt(){return qe(Ve).scale(123.082).center([0,26.1441]).parallel(45)}function Rt(ze){function Ye(nt,lt){var _t=M-lt,bt=_t&&nt*ze*p(_t)/_t;return[_t*p(bt)/ze,M-_t*a(bt)]}return Ye.invert=function(nt,lt){var _t=nt*ze,bt=M-lt,Tt=I(_t*_t+bt*bt),qt=i(_t,bt);return[(Tt?Tt/p(Tt):1)*qt/ze,M-Tt]},Ye}function Gt(){var ze=.5,Ye=s.geoProjectionMutator(Rt),nt=Ye(ze);return nt.fraction=function(lt){return arguments.length?Ye(ze=+lt):ze},nt.scale(158.837)}var kt=Ae(1,4/b,b);function zt(){return s.geoProjection(kt).scale(152.63)}function Bt(ze,Ye,nt,lt,_t,bt){var Tt=a(bt),qt;if(x(ze)>1||x(bt)>1)qt=F(nt*_t+Ye*lt*Tt);else{var sr=p(ze/2),Qt=p(bt/2);qt=2*O(I(sr*sr+Ye*lt*Qt*Qt))}return x(qt)>g?[qt,i(lt*p(bt),Ye*_t-nt*lt*Tt)]:[0,0]}function Lt(ze,Ye,nt){return F((ze*ze+Ye*Ye-nt*nt)/(2*ze*Ye))}function Mt(ze){return ze-2*b*n((ze+b)/(2*b))}function it(ze,Ye,nt){for(var lt=[[ze[0],ze[1],p(ze[1]),a(ze[1])],[Ye[0],Ye[1],p(Ye[1]),a(Ye[1])],[nt[0],nt[1],p(nt[1]),a(nt[1])]],_t=lt[2],bt,Tt=0;Tt<3;++Tt,_t=bt)bt=lt[Tt],_t.v=Bt(bt[1]-_t[1],_t[3],_t[2],bt[3],bt[2],bt[0]-_t[0]),_t.point=[0,0];var qt=Lt(lt[0].v[0],lt[2].v[0],lt[1].v[0]),sr=Lt(lt[0].v[0],lt[1].v[0],lt[2].v[0]),Qt=b-qt;lt[2].point[1]=0,lt[0].point[0]=-(lt[1].point[0]=lt[0].v[0]/2);var fr=[lt[2].point[0]=lt[0].point[0]+lt[2].v[0]*a(qt),2*(lt[0].point[1]=lt[1].point[1]=lt[2].v[0]*p(qt))];function Er(Hr,en){var _n=p(en),Pn=a(en),Kn=new Array(3),xa;for(xa=0;xa<3;++xa){var wa=lt[xa];if(Kn[xa]=Bt(en-wa[1],wa[3],wa[2],Pn,_n,Hr-wa[0]),!Kn[xa][0])return wa.point;Kn[xa][1]=Mt(Kn[xa][1]-wa.v[1])}var Ja=fr.slice();for(xa=0;xa<3;++xa){var Xa=xa==2?0:xa+1,ni=Lt(lt[xa].v[0],Kn[xa][0],Kn[Xa][0]);Kn[xa][1]<0&&(ni=-ni),xa?xa==1?(ni=sr-ni,Ja[0]-=Kn[xa][0]*a(ni),Ja[1]-=Kn[xa][0]*p(ni)):(ni=Qt-ni,Ja[0]+=Kn[xa][0]*a(ni),Ja[1]+=Kn[xa][0]*p(ni)):(Ja[0]+=Kn[xa][0]*a(ni),Ja[1]-=Kn[xa][0]*p(ni))}return Ja[0]/=3,Ja[1]/=3,Ja}return Er}function ht(ze){return ze[0]*=k,ze[1]*=k,ze}function Qe(){return Ce([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])}function Ce(ze,Ye,nt){var lt=s.geoCentroid({type:"MultiPoint",coordinates:[ze,Ye,nt]}),_t=[-lt[0],-lt[1]],bt=s.geoRotation(_t),Tt=it(ht(bt(ze)),ht(bt(Ye)),ht(bt(nt)));Tt.invert=ce(Tt);var qt=s.geoProjection(Tt).rotate(_t),sr=qt.center;return delete qt.rotate,qt.center=function(Qt){return arguments.length?sr(bt(Qt)):bt.invert(sr())},qt.clipAngle(90)}function Xe(ze,Ye){var nt=I(1-p(Ye));return[2/v*ze*nt,v*(1-nt)]}Xe.invert=function(ze,Ye){var nt=(nt=Ye/v-1)*nt;return[nt>0?ze*I(b/nt)/2:0,O(1-nt)]};function rt(){return s.geoProjection(Xe).scale(95.6464).center([0,30])}function ut(ze){var Ye=y(ze);function nt(lt,_t){return[lt,(lt?lt/p(lt):1)*(p(_t)*a(lt)-Ye*a(_t))]}return nt.invert=Ye?function(lt,_t){lt&&(_t*=p(lt)/lt);var bt=a(lt);return[lt,2*i(I(bt*bt+Ye*Ye-_t*_t)-bt,Ye-_t)]}:function(lt,_t){return[lt,O(lt?_t*y(lt)/lt:_t)]},nt}function Pt(){return qe(ut).scale(249.828).clipAngle(90)}var St=I(3);function Nt(ze,Ye){return[St*ze*(2*a(2*Ye/3)-1)/v,St*v*p(Ye/3)]}Nt.invert=function(ze,Ye){var nt=3*O(Ye/(St*v));return[v*ze/(St*(2*a(2*nt/3)-1)),nt]};function jt(){return s.geoProjection(Nt).scale(156.19)}function Ot(ze){var Ye=a(ze);function nt(lt,_t){return[lt*Ye,p(_t)/Ye]}return nt.invert=function(lt,_t){return[lt/Ye,O(_t*Ye)]},nt}function Kt(){return qe(Ot).parallel(38.58).scale(195.044)}function Je(ze){var Ye=a(ze);function nt(lt,_t){return[lt*Ye,(1+Ye)*y(_t/2)]}return nt.invert=function(lt,_t){return[lt/Ye,t(_t/(1+Ye))*2]},nt}function gt(){return qe(Je).scale(124.75)}function Et(ze,Ye){var nt=I(8/(3*b));return[nt*ze*(1-x(Ye)/b),nt*Ye]}Et.invert=function(ze,Ye){var nt=I(8/(3*b)),lt=Ye/nt;return[ze/(nt*(1-x(lt)/b)),lt]};function rr(){return s.geoProjection(Et).scale(165.664)}function vr(ze,Ye){var nt=I(4-3*p(x(Ye)));return[2/I(6*b)*ze*nt,d(Ye)*I(2*b/3)*(2-nt)]}vr.invert=function(ze,Ye){var nt=2-x(Ye)/I(2*b/3);return[ze*I(6*b)/(2*nt),d(Ye)*O((4-nt*nt)/3)]};function or(){return s.geoProjection(vr).scale(165.664)}function dr(ze,Ye){var nt=I(b*(4+b));return[2/nt*ze*(1+I(1-4*Ye*Ye/(b*b))),4/nt*Ye]}dr.invert=function(ze,Ye){var nt=I(b*(4+b))/2;return[ze*nt/(1+I(1-Ye*Ye*(4+b)/(4*b))),Ye*nt/2]};function Lr(){return s.geoProjection(dr).scale(180.739)}function kr(ze,Ye){var nt=(2+M)*p(Ye);Ye/=2;for(var lt=0,_t=1/0;lt<10&&x(_t)>g;lt++){var bt=a(Ye);Ye-=_t=(Ye+p(Ye)*(bt+2)-nt)/(2*bt*(1+bt))}return[2/I(b*(4+b))*ze*(1+a(Ye)),2*I(b/(4+b))*p(Ye)]}kr.invert=function(ze,Ye){var nt=Ye*I((4+b)/b)/2,lt=O(nt),_t=a(lt);return[ze/(2/I(b*(4+b))*(1+_t)),O((lt+nt*(_t+2))/(2+M))]};function tr(){return s.geoProjection(kr).scale(180.739)}function Or(ze,Ye){return[ze*(1+a(Ye))/I(2+b),2*Ye/I(2+b)]}Or.invert=function(ze,Ye){var nt=I(2+b),lt=Ye*nt/2;return[nt*ze/(1+a(lt)),lt]};function et(){return s.geoProjection(Or).scale(173.044)}function we(ze,Ye){for(var nt=(1+M)*p(Ye),lt=0,_t=1/0;lt<10&&x(_t)>g;lt++)Ye-=_t=(Ye+p(Ye)-nt)/(1+a(Ye));return nt=I(2+b),[ze*(1+a(Ye))/nt,2*Ye/nt]}we.invert=function(ze,Ye){var nt=1+M,lt=I(nt/2);return[ze*2*lt/(1+a(Ye*=lt)),O((Ye+p(Ye))/nt)]};function Se(){return s.geoProjection(we).scale(173.044)}var De=3+2*w;function je(ze,Ye){var nt=p(ze/=2),lt=a(ze),_t=I(a(Ye)),bt=a(Ye/=2),Tt=p(Ye)/(bt+w*lt*_t),qt=I(2/(1+Tt*Tt)),sr=I((w*bt+(lt+nt)*_t)/(w*bt+(lt-nt)*_t));return[De*(qt*(sr-1/sr)-2*f(sr)),De*(qt*Tt*(sr+1/sr)-2*t(Tt))]}je.invert=function(ze,Ye){if(!(bt=se.invert(ze/1.2,Ye*1.065)))return null;var nt=bt[0],lt=bt[1],_t=20,bt;ze/=De,Ye/=De;do{var Tt=nt/2,qt=lt/2,sr=p(Tt),Qt=a(Tt),fr=p(qt),Er=a(qt),Hr=a(lt),en=I(Hr),_n=fr/(Er+w*Qt*en),Pn=_n*_n,Kn=I(2/(1+Pn)),xa=w*Er+(Qt+sr)*en,wa=w*Er+(Qt-sr)*en,Ja=xa/wa,Xa=I(Ja),ni=Xa-1/Xa,vi=Xa+1/Xa,ho=Kn*ni-2*f(Xa)-ze,ii=Kn*_n*vi-2*t(_n)-Ye,Xi=fr&&T*en*sr*Pn/fr,xo=(w*Qt*Er+en)/(2*(Er+w*Qt*en)*(Er+w*Qt*en)*en),Po=-.5*_n*Kn*Kn*Kn,Ti=Po*Xi,Ei=Po*xo,Ps=(Ps=2*Er+w*en*(Qt-sr))*Ps*Xa,Mo=(w*Qt*Er*en+Hr)/Ps,jo=-(w*sr*fr)/(en*Ps),os=ni*Ti-2*Mo/Xa+Kn*(Mo+Mo/Ja),he=ni*Ei-2*jo/Xa+Kn*(jo+jo/Ja),Te=_n*vi*Ti-2*Xi/(1+Pn)+Kn*vi*Xi+Kn*_n*(Mo-Mo/Ja),Le=_n*vi*Ei-2*xo/(1+Pn)+Kn*vi*xo+Kn*_n*(jo-jo/Ja),Be=he*Te-Le*os;if(!Be)break;var Ne=(ii*he-ho*Le)/Be,Ke=(ho*Te-ii*os)/Be;nt-=Ne,lt=l(-M,o(M,lt-Ke))}while((x(Ne)>g||x(Ke)>g)&&--_t>0);return x(x(lt)-M)<g?[0,lt]:_t&&[nt,lt]};function $e(){return s.geoProjection(je).scale(62.5271)}var ot=a(35*k);function st(ze,Ye){var nt=y(Ye/2);return[ze*ot*I(1-nt*nt),(1+ot)*nt]}st.invert=function(ze,Ye){var nt=Ye/(1+ot);return[ze&&ze/(ot*I(1-nt*nt)),2*t(nt)]};function pt(){return s.geoProjection(st).scale(137.152)}function wt(ze,Ye){var nt=Ye/2,lt=a(nt);return[2*ze/v*a(Ye)*lt*lt,v*y(nt)]}wt.invert=function(ze,Ye){var nt=t(Ye/v),lt=a(nt),_t=2*nt;return[ze*v/2/(a(_t)*lt*lt),_t]};function Wt(){return s.geoProjection(wt).scale(135.264)}function yr(ze){var Ye=1-ze,nt=bt(b,0)[0]-bt(-b,0)[0],lt=bt(0,M)[1]-bt(0,-M)[1],_t=I(2*lt/nt);function bt(sr,Qt){var fr=a(Qt),Er=p(Qt);return[fr/(Ye+ze*fr)*sr,Ye*Qt+ze*Er]}function Tt(sr,Qt){var fr=bt(sr,Qt);return[fr[0]*_t,fr[1]/_t]}function qt(sr){return Tt(0,sr)[1]}return Tt.invert=function(sr,Qt){var fr=ye(qt,Qt),Er=sr/_t*(ze+Ye/a(fr));return[Er,fr]},Tt}function xr(){var ze=.5,Ye=s.geoProjectionMutator(yr),nt=Ye(ze);return nt.alpha=function(lt){return arguments.length?Ye(ze=+lt):ze},nt.scale(168.725)}function Tr(ze){return[ze[0]/2,O(y(ze[1]/2*k))*S]}function mr(ze){return[ze[0]*2,2*t(p(ze[1]*k))*S]}function Rr(ze){ze==null&&(ze=s.geoOrthographic);var Ye=ze(),nt=s.geoEquirectangular().scale(S).precision(0).clipAngle(null).translate([0,0]);function lt(bt){return Ye(Tr(bt))}Ye.invert&&(lt.invert=function(bt){return mr(Ye.invert(bt))}),lt.stream=function(bt){var Tt=Ye.stream(bt),qt=nt.stream({point:function(sr,Qt){Tt.point(sr/2,O(y(-Qt/2*k))*S)},lineStart:function(){Tt.lineStart()},lineEnd:function(){Tt.lineEnd()},polygonStart:function(){Tt.polygonStart()},polygonEnd:function(){Tt.polygonEnd()}});return qt.sphere=Tt.sphere,qt};function _t(bt){lt[bt]=function(){return arguments.length?(Ye[bt].apply(Ye,arguments),lt):Ye[bt]()}}return lt.rotate=function(bt){return arguments.length?(nt.rotate(bt),lt):nt.rotate()},lt.center=function(bt){return arguments.length?(Ye.center(Tr(bt)),lt):mr(Ye.center())},_t("angle"),_t("clipAngle"),_t("clipExtent"),_t("fitExtent"),_t("fitHeight"),_t("fitSize"),_t("fitWidth"),_t("scale"),_t("translate"),_t("precision"),lt.scale(249.5)}function tn(ze,Ye){var nt=2*b/Ye,lt=ze*ze;function _t(bt,Tt){var qt=s.geoAzimuthalEquidistantRaw(bt,Tt),sr=qt[0],Qt=qt[1],fr=sr*sr+Qt*Qt;if(fr>lt){var Er=I(fr),Hr=i(Qt,sr),en=nt*h(Hr/nt),_n=Hr-en,Pn=ze*a(_n),Kn=(ze*p(_n)-_n*p(Pn))/(M-Pn),xa=wr(_n,Kn),wa=(b-ze)/gr(xa,Pn,b);sr=Er;var Ja=50,Xa;do sr-=Xa=(ze+gr(xa,Pn,sr)*wa-Er)/(xa(sr)*wa);while(x(Xa)>g&&--Ja>0);Qt=_n*p(sr),sr<M&&(Qt-=Kn*(sr-M));var ni=p(en),vi=a(en);qt[0]=sr*vi-Qt*ni,qt[1]=sr*ni+Qt*vi}return qt}return _t.invert=function(bt,Tt){var qt=bt*bt+Tt*Tt;if(qt>lt){var sr=I(qt),Qt=i(Tt,bt),fr=nt*h(Qt/nt),Er=Qt-fr;bt=sr*a(Er),Tt=sr*p(Er);for(var Hr=bt-M,en=p(bt),_n=Tt/en,Pn=bt<M?1/0:0,Kn=10;;){var xa=ze*p(_n),wa=ze*a(_n),Ja=p(wa),Xa=M-wa,ni=(xa-_n*Ja)/Xa,vi=wr(_n,ni);if(x(Pn)<A||!--Kn)break;_n-=Pn=(_n*en-ni*Hr-Tt)/(en-Hr*2*(Xa*(wa+_n*xa*a(wa)-Ja)-xa*(xa-_n*Ja))/(Xa*Xa))}sr=ze+gr(vi,wa,bt)*(b-ze)/gr(vi,wa,b),Qt=fr+_n,bt=sr*a(Qt),Tt=sr*p(Qt)}return s.geoAzimuthalEquidistantRaw.invert(bt,Tt)},_t}function wr(ze,Ye){return function(nt){var lt=ze*a(nt);return nt<M&&(lt-=Ye),I(1+lt*lt)}}function gr(ze,Ye,nt){for(var lt=50,_t=(nt-Ye)/lt,bt=ze(Ye)+ze(nt),Tt=1,qt=Ye;Tt<lt;++Tt)bt+=2*ze(qt+=_t);return bt*.5*_t}function mn(){var ze=6,Ye=30*k,nt=a(Ye),lt=p(Ye),_t=s.geoProjectionMutator(tn),bt=_t(Ye,ze),Tt=bt.stream,qt=.01,sr=-a(qt*k),Qt=p(qt*k);return bt.radius=function(fr){return arguments.length?(nt=a(Ye=fr*k),lt=p(Ye),_t(Ye,ze)):Ye*S},bt.lobes=function(fr){return arguments.length?_t(Ye,ze=+fr):ze},bt.stream=function(fr){var Er=bt.rotate(),Hr=Tt(fr),en=(bt.rotate([0,0]),Tt(fr));return bt.rotate(Er),Hr.sphere=function(){en.polygonStart(),en.lineStart();for(var _n=0,Pn=2*b/ze,Kn=0;_n<ze;++_n,Kn-=Pn)en.point(i(Qt*a(Kn),sr)*S,O(Qt*p(Kn))*S),en.point(i(lt*a(Kn-Pn/2),nt)*S,O(lt*p(Kn-Pn/2))*S);en.lineEnd(),en.polygonEnd()},Hr},bt.rotate([90,-40]).scale(91.7095).clipAngle(180-.001)}function Gr(ze,Ye,nt,lt,_t,bt,Tt,qt){arguments.length<8&&(qt=0);function sr(Qt,fr){if(!fr)return[ze*Qt/b,0];var Er=fr*fr,Hr=ze+Er*(Ye+Er*(nt+Er*lt)),en=fr*(_t-1+Er*(bt-qt+Er*Tt)),_n=(Hr*Hr+en*en)/(2*en),Pn=Qt*O(Hr/_n)/b;return[_n*p(Pn),fr*(1+Er*qt)+_n*(1-a(Pn))]}return sr.invert=function(Qt,fr){var Er=b*Qt/ze,Hr=fr,en,_n,Pn=50;do{var Kn=Hr*Hr,xa=ze+Kn*(Ye+Kn*(nt+Kn*lt)),wa=Hr*(_t-1+Kn*(bt-qt+Kn*Tt)),Ja=xa*xa+wa*wa,Xa=2*wa,ni=Ja/Xa,vi=ni*ni,ho=O(xa/ni)/b,ii=Er*ho,Xi=xa*xa,xo=(2*Ye+Kn*(4*nt+Kn*6*lt))*Hr,Po=_t+Kn*(3*bt+Kn*5*Tt),Ti=2*(xa*xo+wa*(Po-1)),Ei=2*(Po-1),Ps=(Ti*Xa-Ja*Ei)/(Xa*Xa),Mo=a(ii),jo=p(ii),os=ni*Mo,he=ni*jo,Te=Er/b*(1/I(1-Xi/vi))*(xo*ni-xa*Ps)/vi,Le=he-Qt,Be=Hr*(1+Kn*qt)+ni-os-fr,Ne=Ps*jo+os*Te,Ke=os*ho,yt=1+Ps-(Ps*Mo-he*Te),vt=he*ho,Ct=Ne*vt-yt*Ke;if(!Ct)break;Er-=en=(Be*Ne-Le*yt)/Ct,Hr-=_n=(Le*vt-Be*Ke)/Ct}while((x(en)>g||x(_n)>g)&&--Pn>0);return[Er,Hr]},sr}var Ar=Gr(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555);function nn(){return s.geoProjection(Ar).scale(149.995)}var fn=Gr(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742);function jr(){return s.geoProjection(fn).scale(153.93)}var at=Gr(5/6*b,-.62636,-.0344,0,1.3493,-.05524,0,.045);function Ft(){return s.geoProjection(at).scale(130.945)}function er(ze,Ye){var nt=ze*ze,lt=Ye*Ye;return[ze*(1-.162388*lt)*(.87-952426e-9*nt*nt),Ye*(1+lt/12)]}er.invert=function(ze,Ye){var nt=ze,lt=Ye,_t=50,bt;do{var Tt=lt*lt;lt-=bt=(lt*(1+Tt/12)-Ye)/(1+Tt/4)}while(x(bt)>g&&--_t>0);_t=50,ze/=1-.162388*Tt;do{var qt=(qt=nt*nt)*qt;nt-=bt=(nt*(.87-952426e-9*qt)-ze)/(.87-.00476213*qt)}while(x(bt)>g&&--_t>0);return[nt,lt]};function hr(){return s.geoProjection(er).scale(131.747)}var Wr=Gr(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function zr(){return s.geoProjection(Wr).scale(131.087)}function Pr(ze){var Ye=ze(M,0)[0]-ze(-M,0)[0];function nt(lt,_t){var bt=lt>0?-.5:.5,Tt=ze(lt+bt*b,_t);return Tt[0]-=bt*Ye,Tt}return ze.invert&&(nt.invert=function(lt,_t){var bt=lt>0?-.5:.5,Tt=ze.invert(lt+bt*Ye,_t),qt=Tt[0]-bt*b;return qt<-b?qt+=2*b:qt>b&&(qt-=2*b),Tt[0]=qt,Tt}),nt}function br(ze,Ye){var nt=d(ze),lt=d(Ye),_t=a(Ye),bt=a(ze)*_t,Tt=p(ze)*_t,qt=p(lt*Ye);ze=x(i(Tt,qt)),Ye=O(bt),x(ze-M)>g&&(ze%=M);var sr=Xr(ze>b/4?M-ze:ze,Ye);return ze>b/4&&(qt=sr[0],sr[0]=-sr[1],sr[1]=-qt),sr[0]*=nt,sr[1]*=-lt,sr}br.invert=function(ze,Ye){x(ze)>1&&(ze=d(ze)*2-ze),x(Ye)>1&&(Ye=d(Ye)*2-Ye);var nt=d(ze),lt=d(Ye),_t=-nt*ze,bt=-lt*Ye,Tt=bt/_t<1,qt=Fn(Tt?bt:_t,Tt?_t:bt),sr=qt[0],Qt=qt[1],fr=a(Qt);return Tt&&(sr=-M-sr),[nt*(i(p(sr)*fr,-p(Qt))+b),lt*O(a(sr)*fr)]};function Xr(ze,Ye){if(Ye===M)return[0,0];var nt=p(Ye),lt=nt*nt,_t=lt*lt,bt=1+_t,Tt=1+3*_t,qt=1-_t,sr=O(1/I(bt)),Qt=qt+lt*bt*sr,fr=(1-nt)/Qt,Er=I(fr),Hr=fr*bt,en=I(Hr),_n=Er*qt,Pn,Kn;if(ze===0)return[0,-(_n+lt*en)];var xa=a(Ye),wa=1/xa,Ja=2*nt*xa,Xa=(-3*lt+sr*Tt)*Ja,ni=(-Qt*xa-(1-nt)*Xa)/(Qt*Qt),vi=.5*ni/Er,ho=qt*vi-2*lt*Er*Ja,ii=lt*bt*ni+fr*Tt*Ja,Xi=-wa*Ja,xo=-wa*ii,Po=-2*wa*ho,Ti=4*ze/b,Ei;if(ze>.222*b||Ye<b/4&&ze>.175*b){if(Pn=(_n+lt*I(Hr*(1+_t)-_n*_n))/(1+_t),ze>b/4)return[Pn,Pn];var Ps=Pn,Mo=.5*Pn;Pn=.5*(Mo+Ps),Kn=50;do{var jo=I(Hr-Pn*Pn),os=Pn*(Po+Xi*jo)+xo*O(Pn/en)-Ti;if(!os)break;os<0?Mo=Pn:Ps=Pn,Pn=.5*(Mo+Ps)}while(x(Ps-Mo)>g&&--Kn>0)}else{Pn=g,Kn=25;do{var he=Pn*Pn,Te=I(Hr-he),Le=Po+Xi*Te,Be=Pn*Le+xo*O(Pn/en)-Ti,Ne=Le+(xo-Xi*he)/Te;Pn-=Ei=Te?Be/Ne:0}while(x(Ei)>g&&--Kn>0)}return[Pn,-_n-lt*I(Hr-Pn*Pn)]}function Fn(ze,Ye){for(var nt=0,lt=1,_t=.5,bt=50;;){var Tt=_t*_t,qt=I(_t),sr=O(1/I(1+Tt)),Qt=1-Tt+_t*(1+Tt)*sr,fr=(1-qt)/Qt,Er=I(fr),Hr=fr*(1+Tt),en=Er*(1-Tt),_n=Hr-ze*ze,Pn=I(_n),Kn=Ye+en+_t*Pn;if(x(lt-nt)<A||--bt==0||Kn===0)break;Kn>0?nt=_t:lt=_t,_t=.5*(nt+lt)}if(!bt)return null;var xa=O(qt),wa=a(xa),Ja=1/wa,Xa=2*qt*wa,ni=(-3*_t+sr*(1+3*Tt))*Xa,vi=(-Qt*wa-(1-qt)*ni)/(Qt*Qt),ho=.5*vi/Er,ii=(1-Tt)*ho-2*_t*Er*Xa,Xi=-2*Ja*ii,xo=-Ja*Xa,Po=-Ja*(_t*(1+Tt)*vi+fr*(1+3*Tt)*Xa);return[b/4*(ze*(Xi+xo*Pn)+Po*O(ze/I(Hr))),xa]}function kn(){return s.geoProjection(Pr(br)).scale(239.75)}function ra(ze,Ye,nt){var lt,_t,bt;return ze?(lt=oa(ze,nt),Ye?(_t=oa(Ye,1-nt),bt=_t[1]*_t[1]+nt*lt[0]*lt[0]*_t[0]*_t[0],[[lt[0]*_t[2]/bt,lt[1]*lt[2]*_t[0]*_t[1]/bt],[lt[1]*_t[1]/bt,-lt[0]*lt[2]*_t[0]*_t[2]/bt],[lt[2]*_t[1]*_t[2]/bt,-nt*lt[0]*lt[1]*_t[0]/bt]]):[[lt[0],0],[lt[1],0],[lt[2],0]]):(_t=oa(Ye,1-nt),[[0,_t[0]/_t[1]],[1/_t[1],0],[_t[2]/_t[1],0]])}function oa(ze,Ye){var nt,lt,_t,bt,Tt;if(Ye<g)return bt=p(ze),lt=a(ze),nt=Ye*(ze-bt*lt)/4,[bt-nt*lt,lt+nt*bt,1-Ye*bt*bt/2,ze-nt];if(Ye>=1-g)return nt=(1-Ye)/4,lt=B(ze),bt=D(ze),_t=1/lt,Tt=lt*U(ze),[bt+nt*(Tt-ze)/(lt*lt),_t-nt*bt*_t*(Tt-ze),_t+nt*bt*_t*(Tt+ze),2*t(r(ze))-M+nt*(Tt-ze)/lt];var qt=[1,0,0,0,0,0,0,0,0],sr=[I(Ye),0,0,0,0,0,0,0,0],Qt=0;for(lt=I(1-Ye),Tt=1;x(sr[Qt]/qt[Qt])>g&&Qt<8;)nt=qt[Qt++],sr[Qt]=(nt-lt)/2,qt[Qt]=(nt+lt)/2,lt=I(nt*lt),Tt*=2;_t=Tt*qt[Qt]*ze;do bt=sr[Qt]*p(lt=_t)/qt[Qt],_t=(O(bt)+_t)/2;while(--Qt);return[p(_t),bt=a(_t),bt/a(_t-lt),_t]}function Sa(ze,Ye,nt){var lt=x(ze),_t=x(Ye),bt=U(_t);if(lt){var Tt=1/p(lt),qt=1/(y(lt)*y(lt)),sr=-(qt+nt*(bt*bt*Tt*Tt)-1+nt),Qt=(nt-1)*qt,fr=(-sr+I(sr*sr-4*Qt))/2;return[ya(t(1/I(fr)),nt)*d(ze),ya(t(I((fr/qt-1)/nt)),1-nt)*d(Ye)]}return[0,ya(t(bt),1-nt)*d(Ye)]}function ya(ze,Ye){if(!Ye)return ze;if(Ye===1)return f(y(ze/2+_));for(var nt=1,lt=I(1-Ye),_t=I(Ye),bt=0;x(_t)>g;bt++){if(ze%b){var Tt=t(lt*y(ze)/nt);Tt<0&&(Tt+=b),ze+=Tt+~~(ze/b)*b}else ze+=ze;_t=(nt+lt)/2,lt=I(nt*lt),_t=((nt=_t)-lt)/2}return ze/(c(2,bt)*nt)}function pr(ze,Ye){var nt=(w-1)/(w+1),lt=I(1-nt*nt),_t=ya(M,lt*lt),bt=-1,Tt=f(y(b/4+x(Ye)/2)),qt=r(bt*Tt)/I(nt),sr=vn(qt*a(bt*ze),qt*p(bt*ze)),Qt=Sa(sr[0],sr[1],lt*lt);return[-Qt[1],(Ye>=0?1:-1)*(.5*_t-Qt[0])]}function vn(ze,Ye){var nt=ze*ze,lt=Ye+1,_t=1-nt-Ye*Ye;return[.5*((ze>=0?M:-M)-i(_t,2*ze)),-.25*f(_t*_t+4*nt)+.5*f(lt*lt+nt)]}function $r(ze,Ye){var nt=Ye[0]*Ye[0]+Ye[1]*Ye[1];return[(ze[0]*Ye[0]+ze[1]*Ye[1])/nt,(ze[1]*Ye[0]-ze[0]*Ye[1])/nt]}pr.invert=function(ze,Ye){var nt=(w-1)/(w+1),lt=I(1-nt*nt),_t=ya(M,lt*lt),bt=-1,Tt=ra(.5*_t-Ye,-ze,lt*lt),qt=$r(Tt[0],Tt[1]),sr=i(qt[1],qt[0])/bt;return[sr,2*t(r(.5/bt*f(nt*qt[0]*qt[0]+nt*qt[1]*qt[1])))-M]};function On(){return s.geoProjection(Pr(pr)).scale(151.496)}function Bn(ze){var Ye=p(ze),nt=a(ze),lt=ha(ze);lt.invert=ha(-ze);function _t(bt,Tt){var qt=lt(bt,Tt);bt=qt[0],Tt=qt[1];var sr=p(Tt),Qt=a(Tt),fr=a(bt),Er=F(Ye*sr+nt*Qt*fr),Hr=p(Er),en=x(Hr)>g?Er/Hr:1;return[en*nt*p(bt),(x(bt)>M?en:-en)*(Ye*Qt-nt*sr*fr)]}return _t.invert=function(bt,Tt){var qt=I(bt*bt+Tt*Tt),sr=-p(qt),Qt=a(qt),fr=qt*Qt,Er=-Tt*sr,Hr=qt*Ye,en=I(fr*fr+Er*Er-Hr*Hr),_n=i(fr*Hr+Er*en,Er*Hr-fr*en),Pn=(qt>M?-1:1)*i(bt*sr,qt*a(_n)*Qt+Tt*p(_n)*sr);return lt.invert(Pn,_n)},_t}function ha(ze){var Ye=p(ze),nt=a(ze);return function(lt,_t){var bt=a(_t),Tt=a(lt)*bt,qt=p(lt)*bt,sr=p(_t);return[i(qt,Tt*nt-sr*Ye),O(sr*nt+Tt*Ye)]}}function na(){var ze=0,Ye=s.geoProjectionMutator(Bn),nt=Ye(ze),lt=nt.rotate,_t=nt.stream,bt=s.geoCircle();return nt.parallel=function(Tt){if(!arguments.length)return ze*S;var qt=nt.rotate();return Ye(ze=Tt*k).rotate(qt)},nt.rotate=function(Tt){return arguments.length?(lt.call(nt,[Tt[0],Tt[1]-ze*S]),bt.center([-Tt[0],-Tt[1]]),nt):(Tt=lt.call(nt),Tt[1]+=ze*S,Tt)},nt.stream=function(Tt){return Tt=_t(Tt),Tt.sphere=function(){Tt.polygonStart();var qt=.01,sr=bt.radius(90-qt)().coordinates[0],Qt=sr.length-1,fr=-1,Er;for(Tt.lineStart();++fr<Qt;)Tt.point((Er=sr[fr])[0],Er[1]);for(Tt.lineEnd(),sr=bt.radius(90+qt)().coordinates[0],Qt=sr.length-1,Tt.lineStart();--fr>=0;)Tt.point((Er=sr[fr])[0],Er[1]);Tt.lineEnd(),Tt.polygonEnd()},Tt},nt.scale(79.4187).parallel(45).clipAngle(180-.001)}var Vn=3,fa=O(1-1/Vn)*S,ga=Ot(0);function ur(ze){var Ye=fa*k,nt=Xe(b,Ye)[0]-Xe(-b,Ye)[0],lt=ga(0,Ye)[1],_t=Xe(0,Ye)[1],bt=v-_t,Tt=L/ze,qt=4/L,sr=lt+bt*bt*4/L;function Qt(fr,Er){var Hr,en=x(Er);if(en>Ye){var _n=o(ze-1,l(0,n((fr+b)/Tt)));fr+=b*(ze-1)/ze-_n*Tt,Hr=Xe(fr,en),Hr[0]=Hr[0]*L/nt-L*(ze-1)/(2*ze)+_n*L/ze,Hr[1]=lt+(Hr[1]-_t)*4*bt/L,Er<0&&(Hr[1]=-Hr[1])}else Hr=ga(fr,Er);return Hr[0]*=qt,Hr[1]/=sr,Hr}return Qt.invert=function(fr,Er){fr/=qt,Er*=sr;var Hr=x(Er);if(Hr>lt){var en=o(ze-1,l(0,n((fr+b)/Tt)));fr=(fr+b*(ze-1)/ze-en*Tt)*nt/L;var _n=Xe.invert(fr,.25*(Hr-lt)*L/bt+_t);return _n[0]-=b*(ze-1)/ze-en*Tt,Er<0&&(_n[1]=-_n[1]),_n}return ga.invert(fr,Er)},Qt}function Dr(ze,Ye){return[ze,Ye&1?90-g:fa]}function on(ze,Ye){return[ze,Ye&1?-90+g:-fa]}function rn(ze){return[ze[0]*(1-g),ze[1]]}function gn(ze){var Ye=[].concat(m.range(-180,180+ze/2,ze).map(Dr),m.range(180,-180-ze/2,-ze).map(on));return{type:"Polygon",coordinates:[ze===180?Ye.map(rn):Ye]}}function wn(){var ze=4,Ye=s.geoProjectionMutator(ur),nt=Ye(ze),lt=nt.stream;return nt.lobes=function(_t){return arguments.length?Ye(ze=+_t):ze},nt.stream=function(_t){var bt=nt.rotate(),Tt=lt(_t),qt=(nt.rotate([0,0]),lt(_t));return nt.rotate(bt),Tt.sphere=function(){s.geoStream(gn(180/ze),qt)},Tt},nt.scale(239.75)}function pn(ze){var Ye=1+ze,nt=p(1/Ye),lt=O(nt),_t=2*I(b/(bt=b+4*lt*Ye)),bt,Tt=.5*_t*(Ye+I(ze*(2+ze))),qt=ze*ze,sr=Ye*Ye;function Qt(fr,Er){var Hr=1-p(Er),en,_n;if(Hr&&Hr<2){var Pn=M-Er,Kn=25,xa;do{var wa=p(Pn),Ja=a(Pn),Xa=lt+i(wa,Ye-Ja),ni=1+sr-2*Ye*Ja;Pn-=xa=(Pn-qt*lt-Ye*wa+ni*Xa-.5*Hr*bt)/(2*Ye*wa*Xa)}while(x(xa)>A&&--Kn>0);en=_t*I(ni),_n=fr*Xa/b}else en=_t*(ze+Hr),_n=fr*lt/b;return[en*p(_n),Tt-en*a(_n)]}return Qt.invert=function(fr,Er){var Hr=fr*fr+(Er-=Tt)*Er,en=(1+sr-Hr/(_t*_t))/(2*Ye),_n=F(en),Pn=p(_n),Kn=lt+i(Pn,Ye-en);return[O(fr/I(Hr))*b/Kn,O(1-2*(_n-qt*lt-Ye*Pn+(1+sr-2*Ye*en)*Kn)/bt)]},Qt}function cr(){var ze=1,Ye=s.geoProjectionMutator(pn),nt=Ye(ze);return nt.ratio=function(lt){return arguments.length?Ye(ze=+lt):ze},nt.scale(167.774).center([0,18.67])}var ar=.7109889596207567,Fr=.0528035274542;function Jr(ze,Ye){return Ye>-ar?(ze=Oe(ze,Ye),ze[1]+=Fr,ze):Ue(ze,Ye)}Jr.invert=function(ze,Ye){return Ye>-ar?Oe.invert(ze,Ye-Fr):Ue.invert(ze,Ye)};function En(){return s.geoProjection(Jr).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}function Hn(ze,Ye){return x(Ye)>ar?(ze=Oe(ze,Ye),ze[1]-=Ye>0?Fr:-Fr,ze):Ue(ze,Ye)}Hn.invert=function(ze,Ye){return x(Ye)>ar?Oe.invert(ze,Ye+(Ye>0?Fr:-Fr)):Ue.invert(ze,Ye)};function Jn(){return s.geoProjection(Hn).scale(152.63)}function Zn(ze,Ye,nt,lt){var _t=I(4*b/(2*nt+(1+ze-Ye/2)*p(2*nt)+(ze+Ye)/2*p(4*nt)+Ye/2*p(6*nt))),bt=I(lt*p(nt)*I((1+ze*a(2*nt)+Ye*a(4*nt))/(1+ze+Ye))),Tt=nt*sr(1);function qt(Er){return I(1+ze*a(2*Er)+Ye*a(4*Er))}function sr(Er){var Hr=Er*nt;return(2*Hr+(1+ze-Ye/2)*p(2*Hr)+(ze+Ye)/2*p(4*Hr)+Ye/2*p(6*Hr))/nt}function Qt(Er){return qt(Er)*p(Er)}var fr=function(Er,Hr){var en=nt*ye(sr,Tt*p(Hr)/nt,Hr/b);isNaN(en)&&(en=nt*d(Hr));var _n=_t*qt(en);return[_n*bt*Er/b*a(en),_n/bt*p(en)]};return fr.invert=function(Er,Hr){var en=ye(Qt,Hr*bt/_t);return[Er*b/(a(en)*_t*bt*qt(en)),O(nt*sr(en/nt)/Tt)]},nt===0&&(_t=I(lt/b),fr=function(Er,Hr){return[Er*_t,p(Hr)/_t]},fr.invert=function(Er,Hr){return[Er/_t,O(Hr*_t)]}),fr}function Un(){var ze=1,Ye=0,nt=45*k,lt=2,_t=s.geoProjectionMutator(Zn),bt=_t(ze,Ye,nt,lt);return bt.a=function(Tt){return arguments.length?_t(ze=+Tt,Ye,nt,lt):ze},bt.b=function(Tt){return arguments.length?_t(ze,Ye=+Tt,nt,lt):Ye},bt.psiMax=function(Tt){return arguments.length?_t(ze,Ye,nt=+Tt*k,lt):nt*S},bt.ratio=function(Tt){return arguments.length?_t(ze,Ye,nt,lt=+Tt):lt},bt.scale(180.739)}function yn(ze,Ye,nt,lt,_t,bt,Tt,qt,sr,Qt,fr){if(fr.nanEncountered)return NaN;var Er,Hr,en,_n,Pn,Kn,xa,wa,Ja,Xa;if(Er=nt-Ye,Hr=ze(Ye+Er*.25),en=ze(nt-Er*.25),isNaN(Hr)){fr.nanEncountered=!0;return}if(isNaN(en)){fr.nanEncountered=!0;return}return _n=Er*(lt+4*Hr+_t)/12,Pn=Er*(_t+4*en+bt)/12,Kn=_n+Pn,Xa=(Kn-Tt)/15,Qt>sr?(fr.maxDepthCount++,Kn+Xa):Math.abs(Xa)<qt?Kn+Xa:(xa=Ye+Er*.5,wa=yn(ze,Ye,xa,lt,Hr,_t,_n,qt*.5,sr,Qt+1,fr),isNaN(wa)?(fr.nanEncountered=!0,NaN):(Ja=yn(ze,xa,nt,_t,en,bt,Pn,qt*.5,sr,Qt+1,fr),isNaN(Ja)?(fr.nanEncountered=!0,NaN):wa+Ja))}function Dn(ze,Ye,nt,lt,_t){var bt={maxDepthCount:0,nanEncountered:!1};lt===void 0&&(lt=1e-8),_t===void 0&&(_t=20);var Tt=ze(Ye),qt=ze(.5*(Ye+nt)),sr=ze(nt),Qt=(Tt+4*qt+sr)*(nt-Ye)/6,fr=yn(ze,Ye,nt,Tt,qt,sr,Qt,lt,_t,1,bt);return fr}function Yn(ze,Ye,nt){function lt(en){return ze+(1-ze)*c(1-c(en,Ye),1/Ye)}function _t(en){return Dn(lt,0,en,1e-4)}for(var bt=1/_t(1),Tt=1e3,qt=(1+1e-8)*bt,sr=[],Qt=0;Qt<=Tt;Qt++)sr.push(_t(Qt/Tt)*qt);function fr(en){var _n=0,Pn=Tt,Kn=Tt>>1;do sr[Kn]>en?Pn=Kn:_n=Kn,Kn=_n+Pn>>1;while(Kn>_n);var xa=sr[Kn+1]-sr[Kn];return xa&&(xa=(en-sr[Kn+1])/xa),(Kn+1+xa)/Tt}var Er=2*fr(1)/b*bt/nt,Hr=function(en,_n){var Pn=fr(x(p(_n))),Kn=lt(Pn)*en;return Pn/=Er,[Kn,_n>=0?Pn:-Pn]};return Hr.invert=function(en,_n){var Pn;return _n*=Er,x(_n)<1&&(Pn=d(_n)*O(_t(x(_n))*bt)),[en/lt(x(_n)),Pn]},Hr}function ua(){var ze=0,Ye=2.5,nt=1.183136,lt=s.geoProjectionMutator(Yn),_t=lt(ze,Ye,nt);return _t.alpha=function(bt){return arguments.length?lt(ze=+bt,Ye,nt):ze},_t.k=function(bt){return arguments.length?lt(ze,Ye=+bt,nt):Ye},_t.gamma=function(bt){return arguments.length?lt(ze,Ye,nt=+bt):nt},_t.scale(152.63)}function Ya(ze,Ye){return x(ze[0]-Ye[0])<g&&x(ze[1]-Ye[1])<g}function Ca(ze,Ye){for(var nt=-1,lt=ze.length,_t=ze[0],bt,Tt,qt,sr=[];++nt<lt;){bt=ze[nt],Tt=(bt[0]-_t[0])/Ye,qt=(bt[1]-_t[1])/Ye;for(var Qt=0;Qt<Ye;++Qt)sr.push([_t[0]+Qt*Tt,_t[1]+Qt*qt]);_t=bt}return sr.push(bt),sr}function wl(ze){var Ye=[],nt,lt,_t,bt,Tt,qt,sr,Qt=ze[0].length;for(sr=0;sr<Qt;++sr)nt=ze[0][sr],lt=nt[0][0],_t=nt[0][1],bt=nt[1][1],Tt=nt[2][0],qt=nt[2][1],Ye.push(Ca([[lt+g,_t+g],[lt+g,bt-g],[Tt-g,bt-g],[Tt-g,qt+g]],30));for(sr=ze[1].length-1;sr>=0;--sr)nt=ze[1][sr],lt=nt[0][0],_t=nt[0][1],bt=nt[1][1],Tt=nt[2][0],qt=nt[2][1],Ye.push(Ca([[Tt-g,qt-g],[Tt-g,bt+g],[lt+g,bt+g],[lt+g,_t-g]],30));return{type:"Polygon",coordinates:[m.merge(Ye)]}}function Qo(ze,Ye,nt){var lt,_t;function bt(sr,Qt){for(var fr=Qt<0?-1:1,Er=Ye[+(Qt<0)],Hr=0,en=Er.length-1;Hr<en&&sr>Er[Hr][2][0];++Hr);var _n=ze(sr-Er[Hr][1][0],Qt);return _n[0]+=ze(Er[Hr][1][0],fr*Qt>fr*Er[Hr][0][1]?Er[Hr][0][1]:Qt)[0],_n}nt?bt.invert=nt(bt):ze.invert&&(bt.invert=function(sr,Qt){for(var fr=_t[+(Qt<0)],Er=Ye[+(Qt<0)],Hr=0,en=fr.length;Hr<en;++Hr){var _n=fr[Hr];if(_n[0][0]<=sr&&sr<_n[1][0]&&_n[0][1]<=Qt&&Qt<_n[1][1]){var Pn=ze.invert(sr-ze(Er[Hr][1][0],0)[0],Qt);return Pn[0]+=Er[Hr][1][0],Ya(bt(Pn[0],Pn[1]),[sr,Qt])?Pn:null}}});var Tt=s.geoProjection(bt),qt=Tt.stream;return Tt.stream=function(sr){var Qt=Tt.rotate(),fr=qt(sr),Er=(Tt.rotate([0,0]),qt(sr));return Tt.rotate(Qt),fr.sphere=function(){s.geoStream(lt,Er)},fr},Tt.lobes=function(sr){return arguments.length?(lt=wl(sr),Ye=sr.map(function(Qt){return Qt.map(function(fr){return[[fr[0][0]*k,fr[0][1]*k],[fr[1][0]*k,fr[1][1]*k],[fr[2][0]*k,fr[2][1]*k]]})}),_t=Ye.map(function(Qt){return Qt.map(function(fr){var Er=ze(fr[0][0],fr[0][1])[0],Hr=ze(fr[2][0],fr[2][1])[0],en=ze(fr[1][0],fr[0][1])[1],_n=ze(fr[1][0],fr[1][1])[1],Pn;return en>_n&&(Pn=en,en=_n,_n=Pn),[[Er,en],[Hr,_n]]})}),Tt):Ye.map(function(Qt){return Qt.map(function(fr){return[[fr[0][0]*S,fr[0][1]*S],[fr[1][0]*S,fr[1][1]*S],[fr[2][0]*S,fr[2][1]*S]]})})},Ye!=null&&Tt.lobes(Ye),Tt}var vs=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function Ws(){return Qo(Re,vs).scale(160.857)}var io=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function zi(){return Qo(Hn,io).scale(152.63)}var il=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]];function ol(){return Qo(Oe,il).scale(169.529)}var ps=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Gl(){return Qo(Oe,ps).scale(169.529).rotate([20,0])}var ou=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]];function Xu(){return Qo(Jr,ou,ce).rotate([-20,-55]).scale(164.263).center([0,-5.4036])}var di=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function Tl(){return Qo(Ue,di).scale(152.63).rotate([-20,0])}function sl(ze,Ye){return[3/L*ze*I(b*b/3-Ye*Ye),Ye]}sl.invert=function(ze,Ye){return[L/3*ze/I(b*b/3-Ye*Ye),Ye]};function Yi(){return s.geoProjection(sl).scale(158.837)}function Oo(ze){function Ye(nt,lt){if(x(x(lt)-M)<g)return[0,lt<0?-2:2];var _t=p(lt),bt=c((1+_t)/(1-_t),ze/2),Tt=.5*(bt+1/bt)+a(nt*=ze);return[2*p(nt)/Tt,(bt-1/bt)/Tt]}return Ye.invert=function(nt,lt){var _t=x(lt);if(x(_t-2)<g)return nt?null:[0,d(lt)*M];if(_t>2)return null;nt/=2,lt/=2;var bt=nt*nt,Tt=lt*lt,qt=2*lt/(1+bt+Tt);return qt=c((1+qt)/(1-qt),1/ze),[i(2*nt,1-bt-Tt)/ze,O((qt-1)/(qt+1))]},Ye}function su(){var ze=.5,Ye=s.geoProjectionMutator(Oo),nt=Ye(ze);return nt.spacing=function(lt){return arguments.length?Ye(ze=+lt):ze},nt.scale(124.75)}var zs=b/w;function Fi(ze,Ye){return[ze*(1+I(a(Ye)))/2,Ye/(a(Ye/2)*a(ze/6))]}Fi.invert=function(ze,Ye){var nt=x(ze),lt=x(Ye),_t=g,bt=M;lt<zs?bt*=lt/zs:_t+=6*F(zs/lt);for(var Tt=0;Tt<25;Tt++){var qt=p(bt),sr=I(a(bt)),Qt=p(bt/2),fr=a(bt/2),Er=p(_t/6),Hr=a(_t/6),en=.5*_t*(1+sr)-nt,_n=bt/(fr*Hr)-lt,Pn=sr?-.25*_t*qt/sr:0,Kn=.5*(1+sr),xa=(1+.5*bt*Qt/fr)/(fr*Hr),wa=bt/fr*(Er/6)/(Hr*Hr),Ja=Pn*wa-xa*Kn,Xa=(en*wa-_n*Kn)/Ja,ni=(_n*Pn-en*xa)/Ja;if(bt-=Xa,_t-=ni,x(Xa)<g&&x(ni)<g)break}return[ze<0?-_t:_t,Ye<0?-bt:bt]};function Wl(){return s.geoProjection(Fi).scale(97.2672)}function to(ze,Ye){var nt=ze*ze,lt=Ye*Ye;return[ze*(.975534+lt*(-.119161+nt*-.0143059+lt*-.0547009)),Ye*(1.00384+nt*(.0802894+lt*-.02855+nt*199025e-9)+lt*(.0998909+lt*-.0491032))]}to.invert=function(ze,Ye){var nt=d(ze)*b,lt=Ye/2,_t=50;do{var bt=nt*nt,Tt=lt*lt,qt=nt*lt,sr=nt*(.975534+Tt*(-.119161+bt*-.0143059+Tt*-.0547009))-ze,Qt=lt*(1.00384+bt*(.0802894+Tt*-.02855+bt*199025e-9)+Tt*(.0998909+Tt*-.0491032))-Ye,fr=.975534-Tt*(.119161+3*bt*.0143059+Tt*.0547009),Er=-qt*(2*.119161+4*.0547009*Tt+2*.0143059*bt),Hr=qt*(2*.0802894+4*199025e-9*bt+2*-.02855*Tt),en=1.00384+bt*(.0802894+199025e-9*bt)+Tt*(3*(.0998909-.02855*bt)-5*.0491032*Tt),_n=Er*Hr-en*fr,Pn=(Qt*Er-sr*en)/_n,Kn=(sr*Hr-Qt*fr)/_n;nt-=Pn,lt-=Kn}while((x(Pn)>g||x(Kn)>g)&&--_t>0);return _t&&[nt,lt]};function Ui(){return s.geoProjection(to).scale(139.98)}function co(ze,Ye){return[p(ze)/a(Ye),y(Ye)*a(ze)]}co.invert=function(ze,Ye){var nt=ze*ze,lt=Ye*Ye,_t=lt+1,bt=nt+_t,Tt=ze?T*I((bt-I(bt*bt-4*nt))/nt):1/I(_t);return[O(ze*Tt),d(Ye)*F(Tt)]};function ro(){return s.geoProjection(co).scale(144.049).clipAngle(90-.001)}function ws(ze){var Ye=a(ze),nt=y(_+ze/2);function lt(_t,bt){var Tt=bt-ze,qt=x(Tt)<g?_t*Ye:x(qt=_+bt/2)<g||x(x(qt)-M)<g?0:_t*Tt/f(y(qt)/nt);return[qt,Tt]}return lt.invert=function(_t,bt){var Tt,qt=bt+ze;return[x(bt)<g?_t/Ye:x(Tt=_+qt/2)<g||x(x(Tt)-M)<g?0:_t*f(y(Tt)/nt)/bt,qt]},lt}function Al(){return qe(ws).parallel(40).scale(158.837)}function df(ze,Ye){return[ze,1.25*f(y(_+.4*Ye))]}df.invert=function(ze,Ye){return[ze,2.5*t(r(.8*Ye))-.625*b]};function ds(){return s.geoProjection(df).scale(108.318)}function gf(ze){var Ye=ze.length-1;function nt(lt,_t){for(var bt=a(_t),Tt=2/(1+bt*a(lt)),qt=Tt*bt*p(lt),sr=Tt*p(_t),Qt=Ye,fr=ze[Qt],Er=fr[0],Hr=fr[1],en;--Qt>=0;)fr=ze[Qt],Er=fr[0]+qt*(en=Er)-sr*Hr,Hr=fr[1]+qt*Hr+sr*en;return Er=qt*(en=Er)-sr*Hr,Hr=qt*Hr+sr*en,[Er,Hr]}return nt.invert=function(lt,_t){var bt=20,Tt=lt,qt=_t;do{for(var sr=Ye,Qt=ze[sr],fr=Qt[0],Er=Qt[1],Hr=0,en=0,_n;--sr>=0;)Qt=ze[sr],Hr=fr+Tt*(_n=Hr)-qt*en,en=Er+Tt*en+qt*_n,fr=Qt[0]+Tt*(_n=fr)-qt*Er,Er=Qt[1]+Tt*Er+qt*_n;Hr=fr+Tt*(_n=Hr)-qt*en,en=Er+Tt*en+qt*_n,fr=Tt*(_n=fr)-qt*Er-lt,Er=Tt*Er+qt*_n-_t;var Pn=Hr*Hr+en*en,Kn,xa;Tt-=Kn=(fr*Hr+Er*en)/Pn,qt-=xa=(Er*Hr-fr*en)/Pn}while(x(Kn)+x(xa)>g*g&&--bt>0);if(bt){var wa=I(Tt*Tt+qt*qt),Ja=2*t(wa*.5),Xa=p(Ja);return[i(Tt*Xa,wa*a(Ja)),wa?O(qt*Xa/wa):0]}},nt}var ll=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],No=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],Uf=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ul=[[.9245,0],[0,0],[.01943,0]],Ys=[[.721316,0],[0,0],[-.00881625,-.00617325]];function Eu(){return js(ll,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)}function Vf(){return js(No,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])}function Hf(){return js(Uf,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])}function Ml(){return js(ul,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)}function Cu(){return js(Ys,[165,10]).scale(250).clipAngle(130).center([-165,-10])}function js(ze,Ye){var nt=s.geoProjection(gf(ze)).rotate(Ye).clipAngle(90),lt=s.geoRotation(Ye),_t=nt.center;return delete nt.rotate,nt.center=function(bt){return arguments.length?_t(lt(bt)):lt.invert(_t())},nt}var Zu=I(6),Yl=I(7);function Ku(ze,Ye){var nt=O(7*p(Ye)/(3*Zu));return[Zu*ze*(2*a(2*nt/3)-1)/Yl,9*p(nt/3)/Yl]}Ku.invert=function(ze,Ye){var nt=3*O(Ye*Yl/9);return[ze*Yl/(Zu*(2*a(2*nt/3)-1)),O(p(nt)*3*Zu/7)]};function mf(){return s.geoProjection(Ku).scale(164.859)}function Lu(ze,Ye){for(var nt=(1+T)*p(Ye),lt=Ye,_t=0,bt;_t<25&&(lt-=bt=(p(lt/2)+p(lt)-nt)/(.5*a(lt/2)+a(lt)),!(x(bt)<g));_t++);return[ze*(1+2*a(lt)/a(lt/2))/(3*w),2*I(3)*p(lt/2)/I(2+w)]}Lu.invert=function(ze,Ye){var nt=Ye*I(2+w)/(2*I(3)),lt=2*O(nt);return[3*w*ze/(1+2*a(lt)/a(lt/2)),O((nt+p(lt))/(1+T))]};function Gf(){return s.geoProjection(Lu).scale(188.209)}function Sl(ze,Ye){for(var nt=I(6/(4+b)),lt=(1+b/4)*p(Ye),_t=Ye/2,bt=0,Tt;bt<25&&(_t-=Tt=(_t/2+p(_t)-lt)/(.5+a(_t)),!(x(Tt)<g));bt++);return[nt*(.5+a(_t))*ze/1.5,nt*_t]}Sl.invert=function(ze,Ye){var nt=I(6/(4+b)),lt=Ye/nt;return x(x(lt)-M)<g&&(lt=lt<0?-M:M),[1.5*ze/(nt*(.5+a(lt))),O((lt/2+p(lt))/(1+b/4))]};function Ju(){return s.geoProjection(Sl).scale(166.518)}function Pu(ze,Ye){var nt=Ye*Ye,lt=nt*nt,_t=nt*lt;return[ze*(.84719-.13063*nt+_t*_t*(-.04515+.05494*nt-.02326*lt+.00331*_t)),Ye*(1.01183+lt*lt*(-.02625+.01926*nt-.00396*lt))]}Pu.invert=function(ze,Ye){var nt=Ye,lt=25,_t,bt,Tt,qt;do bt=nt*nt,Tt=bt*bt,nt-=_t=(nt*(1.01183+Tt*Tt*(-.02625+.01926*bt-.00396*Tt))-Ye)/(1.01183+Tt*Tt*(9*-.02625+11*.01926*bt+13*-.00396*Tt));while(x(_t)>A&&--lt>0);return bt=nt*nt,Tt=bt*bt,qt=bt*Tt,[ze/(.84719-.13063*bt+qt*qt*(-.04515+.05494*bt-.02326*Tt+.00331*qt)),nt]};function Fs(){return s.geoProjection(Pu).scale(175.295)}function lu(ze,Ye){return[ze*(1+a(Ye))/2,2*(Ye-y(Ye/2))]}lu.invert=function(ze,Ye){for(var nt=Ye/2,lt=0,_t=1/0;lt<10&&x(_t)>g;++lt){var bt=a(Ye/2);Ye-=_t=(Ye-y(Ye/2)-nt)/(1-.5/(bt*bt))}return[2*ze/(1+a(Ye)),Ye]};function Qu(){return s.geoProjection(lu).scale(152.63)}var yf=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function xf(){return Qo(ie(1/0),yf).rotate([20,0]).scale(152.63)}function Ru(ze,Ye){var nt=p(Ye),lt=a(Ye),_t=d(ze);if(ze===0||x(Ye)===M)return[0,Ye];if(Ye===0)return[ze,0];if(x(ze)===M)return[ze*lt,M*nt];var bt=b/(2*ze)-2*ze/b,Tt=2*Ye/b,qt=(1-Tt*Tt)/(nt-Tt),sr=bt*bt,Qt=qt*qt,fr=1+sr/Qt,Er=1+Qt/sr,Hr=(bt*nt/qt-bt/2)/fr,en=(Qt*nt/sr+qt/2)/Er,_n=Hr*Hr+lt*lt/fr,Pn=en*en-(Qt*nt*nt/sr+qt*nt-1)/Er;return[M*(Hr+I(_n)*_t),M*(en+I(Pn<0?0:Pn)*d(-Ye*bt)*_t)]}Ru.invert=function(ze,Ye){ze/=M,Ye/=M;var nt=ze*ze,lt=Ye*Ye,_t=nt+lt,bt=b*b;return[ze?(_t-1+I((1-_t)*(1-_t)+4*nt))/(2*ze)*M:0,ye(function(Tt){return _t*(b*p(Tt)-2*Tt)*b+4*Tt*Tt*(Ye-p(Tt))+2*b*Tt-bt*Ye},0)]};function Wf(){return s.geoProjection(Ru).scale(127.267)}var bf=1.0148,gs=.23185,jl=-.14499,Xl=.02406,$u=bf,Os=5*gs,Bo=7*jl,Du=9*Xl,Xs=1.790857183;function Zs(ze,Ye){var nt=Ye*Ye;return[ze,Ye*(bf+nt*nt*(gs+nt*(jl+Xl*nt)))]}Zs.invert=function(ze,Ye){Ye>Xs?Ye=Xs:Ye<-Xs&&(Ye=-Xs);var nt=Ye,lt;do{var _t=nt*nt;nt-=lt=(nt*(bf+_t*_t*(gs+_t*(jl+Xl*_t)))-Ye)/($u+_t*_t*(Os+_t*(Bo+Du*_t)))}while(x(lt)>g);return[ze,nt]};function go(){return s.geoProjection(Zs).scale(139.319)}function uu(ze,Ye){if(x(Ye)<g)return[ze,0];var nt=y(Ye),lt=ze*p(Ye);return[p(lt)/nt,Ye+(1-a(lt))/nt]}uu.invert=function(ze,Ye){if(x(Ye)<g)return[ze,0];var nt=ze*ze+Ye*Ye,lt=Ye*.5,_t=10,bt;do{var Tt=y(lt),qt=1/a(lt),sr=nt-2*Ye*lt+lt*lt;lt-=bt=(Tt*sr+2*(lt-Ye))/(2+sr*qt*qt+2*(lt-Ye)*Tt)}while(x(bt)>g&&--_t>0);return Tt=y(lt),[(x(Ye)<x(lt+1/Tt)?O(ze*Tt):d(Ye)*d(ze)*(F(x(ze*Tt))+M))/p(lt),lt]};function fu(){return s.geoProjection(uu).scale(103.74)}function kl(ze,Ye){var nt=Zl(ze[1],ze[0]),lt=Zl(Ye[1],Ye[0]),_t=hu(nt,lt),bt=Iu(nt)/Iu(lt);return cu([1,0,ze[0][0],0,1,ze[0][1]],cu([bt,0,0,0,bt,0],cu([a(_t),p(_t),0,-p(_t),a(_t),0],[1,0,-Ye[0][0],0,1,-Ye[0][1]])))}function Ns(ze){var Ye=1/(ze[0]*ze[4]-ze[1]*ze[3]);return[Ye*ze[4],-Ye*ze[1],Ye*(ze[1]*ze[5]-ze[2]*ze[4]),-Ye*ze[3],Ye*ze[0],Ye*(ze[2]*ze[3]-ze[0]*ze[5])]}function cu(ze,Ye){return[ze[0]*Ye[0]+ze[1]*Ye[3],ze[0]*Ye[1]+ze[1]*Ye[4],ze[0]*Ye[2]+ze[1]*Ye[5]+ze[2],ze[3]*Ye[0]+ze[4]*Ye[3],ze[3]*Ye[1]+ze[4]*Ye[4],ze[3]*Ye[2]+ze[4]*Ye[5]+ze[5]]}function Zl(ze,Ye){return[ze[0]-Ye[0],ze[1]-Ye[1]]}function Iu(ze){return I(ze[0]*ze[0]+ze[1]*ze[1])}function hu(ze,Ye){return i(ze[0]*Ye[1]-ze[1]*Ye[0],ze[0]*Ye[0]+ze[1]*Ye[1])}function El(ze,Ye,nt){lt(ze,{transform:null});function lt(Qt,fr){if(Qt.edges=qu(Qt.face),fr.face){var Er=Qt.shared=dc(Qt.face,fr.face),Hr=kl(Er.map(fr.project),Er.map(Qt.project));Qt.transform=fr.transform?cu(fr.transform,Hr):Hr;for(var en=fr.edges,_n=0,Pn=en.length;_n<Pn;++_n)Ts(Er[0],en[_n][1])&&Ts(Er[1],en[_n][0])&&(en[_n]=Qt),Ts(Er[0],en[_n][0])&&Ts(Er[1],en[_n][1])&&(en[_n]=Qt);for(en=Qt.edges,_n=0,Pn=en.length;_n<Pn;++_n)Ts(Er[0],en[_n][0])&&Ts(Er[1],en[_n][1])&&(en[_n]=fr),Ts(Er[0],en[_n][1])&&Ts(Er[1],en[_n][0])&&(en[_n]=fr)}else Qt.transform=fr.transform;return Qt.children&&Qt.children.forEach(function(Kn){lt(Kn,Qt)}),Qt}function _t(Qt,fr){var Er=Ye(Qt,fr),Hr=Er.project([Qt*S,fr*S]),en;return(en=Er.transform)?[en[0]*Hr[0]+en[1]*Hr[1]+en[2],-(en[3]*Hr[0]+en[4]*Hr[1]+en[5])]:(Hr[1]=-Hr[1],Hr)}Kl(ze)&&(_t.invert=function(Qt,fr){var Er=bt(ze,[Qt,-fr]);return Er&&(Er[0]*=k,Er[1]*=k,Er)});function bt(Qt,fr){var Er=Qt.project.invert,Hr=Qt.transform,en=fr;if(Hr&&(Hr=Ns(Hr),en=[Hr[0]*en[0]+Hr[1]*en[1]+Hr[2],Hr[3]*en[0]+Hr[4]*en[1]+Hr[5]]),Er&&Qt===Tt(_n=Er(en)))return _n;for(var _n,Pn=Qt.children,Kn=0,xa=Pn&&Pn.length;Kn<xa;++Kn)if(_n=bt(Pn[Kn],fr))return _n}function Tt(Qt){return Ye(Qt[0]*k,Qt[1]*k)}var qt=s.geoProjection(_t),sr=qt.stream;return qt.stream=function(Qt){var fr=qt.rotate(),Er=sr(Qt),Hr=(qt.rotate([0,0]),sr(Qt));return qt.rotate(fr),Er.sphere=function(){Hr.polygonStart(),Hr.lineStart(),Yf(Hr,ze),Hr.lineEnd(),Hr.polygonEnd()},Er},qt.angle(nt==null?-30:nt*S)}function Yf(ze,Ye,nt){var lt,_t=Ye.edges,bt=_t.length,Tt,qt={type:"MultiPoint",coordinates:Ye.face},sr=Ye.face.filter(function(Pn){return x(Pn[1])!==90}),Qt=s.geoBounds({type:"MultiPoint",coordinates:sr}),fr=!1,Er=-1,Hr=Qt[1][0]-Qt[0][0],en=Hr===180||Hr===360?[(Qt[0][0]+Qt[1][0])/2,(Qt[0][1]+Qt[1][1])/2]:s.geoCentroid(qt);if(nt)for(;++Er<bt&&_t[Er]!==nt;);++Er;for(var _n=0;_n<bt;++_n)Tt=_t[(_n+Er)%bt],Array.isArray(Tt)?(fr||(ze.point((lt=s.geoInterpolate(Tt[0],en)(g))[0],lt[1]),fr=!0),ze.point((lt=s.geoInterpolate(Tt[1],en)(g))[0],lt[1])):(fr=!1,Tt!==nt&&Yf(ze,Tt,Ye))}function Ts(ze,Ye){return ze&&Ye&&ze[0]===Ye[0]&&ze[1]===Ye[1]}function dc(ze,Ye){for(var nt,lt,_t=ze.length,bt=null,Tt=0;Tt<_t;++Tt){nt=ze[Tt];for(var qt=Ye.length;--qt>=0;)if(lt=Ye[qt],nt[0]===lt[0]&&nt[1]===lt[1]){if(bt)return[bt,nt];bt=nt}}}function qu(ze){for(var Ye=ze.length,nt=[],lt=ze[Ye-1],_t=0;_t<Ye;++_t)nt.push([lt,lt=ze[_t]]);return nt}function Kl(ze){return ze.project.invert||ze.children&&ze.children.some(Kl)}var vu=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Cl=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(ze){return ze.map(function(Ye){return vu[Ye]})});function pu(ze){ze=ze||function(nt){var lt=s.geoCentroid({type:"MultiPoint",coordinates:nt});return s.geoGnomonic().scale(1).translate([0,0]).rotate([-lt[0],-lt[1]])};var Ye=Cl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=Ye[nt];_t&&(_t.children||(_t.children=[])).push(Ye[lt])}),El(Ye[0],function(nt,lt){return Ye[nt<-b/2?lt<0?6:4:nt<0?lt<0?2:0:nt<b/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(101.858).center([0,45])}var _f=2/I(3);function wf(ze,Ye){var nt=Xe(ze,Ye);return[nt[0]*_f,nt[1]]}wf.invert=function(ze,Ye){return Xe.invert(ze/_f,Ye)};function gc(ze){ze=ze||function(nt){var lt=s.geoCentroid({type:"MultiPoint",coordinates:nt});return s.geoProjection(wf).translate([0,0]).scale(1).rotate(lt[1]>0?[-lt[0],0]:[180-lt[0],180])};var Ye=Cl.map(function(nt){return{face:nt,project:ze(nt)}});return[-1,0,0,1,0,1,4,5].forEach(function(nt,lt){var _t=Ye[nt];_t&&(_t.children||(_t.children=[])).push(Ye[lt])}),El(Ye[0],function(nt,lt){return Ye[nt<-b/2?lt<0?6:4:nt<0?lt<0?2:0:nt<b/2?lt<0?3:1:lt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])}function Oi(ze){ze=ze||function(Tt){var qt=Tt.length===6?s.geoCentroid({type:"MultiPoint",coordinates:Tt}):Tt[0];return s.geoGnomonic().scale(1).translate([0,0]).rotate([-qt[0],-qt[1]])};var Ye=Cl.map(function(Tt){for(var qt=Tt.map(As),sr=qt.length,Qt=qt[sr-1],fr,Er=[],Hr=0;Hr<sr;++Hr)fr=qt[Hr],Er.push(ms([Qt[0]*.9486832980505138+fr[0]*.31622776601683794,Qt[1]*.9486832980505138+fr[1]*.31622776601683794,Qt[2]*.9486832980505138+fr[2]*.31622776601683794]),ms([fr[0]*.9486832980505138+Qt[0]*.31622776601683794,fr[1]*.9486832980505138+Qt[1]*.31622776601683794,fr[2]*.9486832980505138+Qt[2]*.31622776601683794])),Qt=fr;return Er}),nt=[],lt=[-1,0,0,1,0,1,4,5];Ye.forEach(function(Tt,qt){for(var sr=Cl[qt],Qt=sr.length,fr=nt[qt]=[],Er=0;Er<Qt;++Er)Ye.push([sr[Er],Tt[(Er*2+2)%(2*Qt)],Tt[(Er*2+1)%(2*Qt)]]),lt.push(qt),fr.push(Ll(As(Tt[(Er*2+2)%(2*Qt)]),As(Tt[(Er*2+1)%(2*Qt)])))});var _t=Ye.map(function(Tt){return{project:ze(Tt),face:Tt}});lt.forEach(function(Tt,qt){var sr=_t[Tt];sr&&(sr.children||(sr.children=[])).push(_t[qt])});function bt(Tt,qt){var sr=a(qt),Qt=[sr*a(Tt),sr*p(Tt),p(qt)],fr=Tt<-b/2?qt<0?6:4:Tt<0?qt<0?2:0:Tt<b/2?qt<0?3:1:qt<0?7:5,Er=nt[fr];return _t[Jl(Er[0],Qt)<0?8+3*fr:Jl(Er[1],Qt)<0?8+3*fr+1:Jl(Er[2],Qt)<0?8+3*fr+2:fr]}return El(_t[0],bt).angle(-30).scale(110.625).center([0,45])}function Jl(ze,Ye){for(var nt=0,lt=ze.length,_t=0;nt<lt;++nt)_t+=ze[nt]*Ye[nt];return _t}function Ll(ze,Ye){return[ze[1]*Ye[2]-ze[2]*Ye[1],ze[2]*Ye[0]-ze[0]*Ye[2],ze[0]*Ye[1]-ze[1]*Ye[0]]}function ms(ze){return[i(ze[1],ze[0])*S,O(l(-1,o(1,ze[2])))*S]}function As(ze){var Ye=ze[0]*k,nt=ze[1]*k,lt=a(nt);return[lt*a(Ye),lt*p(Ye),p(nt)]}function du(){}function mo(ze){if((nt=ze.length)<4)return!1;for(var Ye=0,nt,lt=ze[nt-1][1]*ze[0][0]-ze[nt-1][0]*ze[0][1];++Ye<nt;)lt+=ze[Ye-1][1]*ze[Ye][0]-ze[Ye-1][0]*ze[Ye][1];return lt<=0}function Tf(ze,Ye){for(var nt=Ye[0],lt=Ye[1],_t=!1,bt=0,Tt=ze.length,qt=Tt-1;bt<Tt;qt=bt++){var sr=ze[bt],Qt=sr[0],fr=sr[1],Er=ze[qt],Hr=Er[0],en=Er[1];fr>lt^en>lt&&nt<(Hr-Qt)*(lt-fr)/(en-fr)+Qt&&(_t=!_t)}return _t}function Ms(ze,Ye){var nt=Ye.stream,lt;if(!nt)throw new Error("invalid projection");switch(ze&&ze.type){case"Feature":lt=cl;break;case"FeatureCollection":lt=fl;break;default:lt=Ss;break}return lt(ze,nt)}function fl(ze,Ye){return{type:"FeatureCollection",features:ze.features.map(function(nt){return cl(nt,Ye)})}}function cl(ze,Ye){return{type:"Feature",id:ze.id,properties:ze.properties,geometry:Ss(ze.geometry,Ye)}}function Ks(ze,Ye){return{type:"GeometryCollection",geometries:ze.geometries.map(function(nt){return Ss(nt,Ye)})}}function Ss(ze,Ye){if(!ze)return null;if(ze.type==="GeometryCollection")return Ks(ze,Ye);var nt;switch(ze.type){case"Point":nt=ks;break;case"MultiPoint":nt=ks;break;case"LineString":nt=Af;break;case"MultiLineString":nt=Af;break;case"Polygon":nt=zu;break;case"MultiPolygon":nt=zu;break;case"Sphere":nt=zu;break;default:return null}return s.geoStream(ze,Ye(nt)),nt.result()}var ji=[],Uo=[],ks={point:function(ze,Ye){ji.push([ze,Ye])},result:function(){var ze=ji.length?ji.length<2?{type:"Point",coordinates:ji[0]}:{type:"MultiPoint",coordinates:ji}:null;return ji=[],ze}},Af={lineStart:du,point:function(ze,Ye){ji.push([ze,Ye])},lineEnd:function(){ji.length&&(Uo.push(ji),ji=[])},result:function(){var ze=Uo.length?Uo.length<2?{type:"LineString",coordinates:Uo[0]}:{type:"MultiLineString",coordinates:Uo}:null;return Uo=[],ze}},zu={polygonStart:du,lineStart:du,point:function(ze,Ye){ji.push([ze,Ye])},lineEnd:function(){var ze=ji.length;if(ze){do ji.push(ji[0].slice());while(++ze<4);Uo.push(ji),ji=[]}},polygonEnd:du,result:function(){if(!Uo.length)return null;var ze=[],Ye=[];return Uo.forEach(function(nt){mo(nt)?ze.push([nt]):Ye.push(nt)}),Ye.forEach(function(nt){var lt=nt[0];ze.some(function(_t){if(Tf(_t[0],lt))return _t.push(nt),!0})||ze.push([nt])}),Uo=[],ze.length?ze.length>1?{type:"MultiPolygon",coordinates:ze}:{type:"Polygon",coordinates:ze[0]}:null}};function Mf(ze){var Ye=ze(M,0)[0]-ze(-M,0)[0];function nt(lt,_t){var bt=x(lt)<M,Tt=ze(bt?lt:lt>0?lt-b:lt+b,_t),qt=(Tt[0]-Tt[1])*T,sr=(Tt[0]+Tt[1])*T;if(bt)return[qt,sr];var Qt=Ye*T,fr=qt>0^sr>0?-1:1;return[fr*qt-d(sr)*Qt,fr*sr-d(qt)*Qt]}return ze.invert&&(nt.invert=function(lt,_t){var bt=(lt+_t)*T,Tt=(_t-lt)*T,qt=x(bt)<.5*Ye&&x(Tt)<.5*Ye;if(!qt){var sr=Ye*T,Qt=bt>0^Tt>0?-1:1,fr=-Qt*lt+(Tt>0?1:-1)*sr,Er=-Qt*_t+(bt>0?1:-1)*sr;bt=(-fr-Er)*T,Tt=(fr-Er)*T}var Hr=ze.invert(bt,Tt);return qt||(Hr[0]+=bt>0?b:-b),Hr}),s.geoProjection(nt).rotate([-90,-90,45]).clipAngle(180-.001)}function xt(){return Mf(br).scale(176.423)}function It(){return Mf(pr).scale(111.48)}function nr(ze,Ye){if(!(0<=(Ye=+Ye)&&Ye<=20))throw new Error("invalid digits");function nt(Qt){var fr=Qt.length,Er=2,Hr=new Array(fr);for(Hr[0]=+Qt[0].toFixed(Ye),Hr[1]=+Qt[1].toFixed(Ye);Er<fr;)Hr[Er]=Qt[Er],++Er;return Hr}function lt(Qt){return Qt.map(nt)}function _t(Qt){for(var fr=nt(Qt[0]),Er=[fr],Hr=1;Hr<Qt.length;Hr++){var en=nt(Qt[Hr]);(en.length>2||en[0]!=fr[0]||en[1]!=fr[1])&&(Er.push(en),fr=en)}return Er.length===1&&Qt.length>1&&Er.push(nt(Qt[Qt.length-1])),Er}function bt(Qt){return Qt.map(_t)}function Tt(Qt){if(Qt==null)return Qt;var fr;switch(Qt.type){case"GeometryCollection":fr={type:"GeometryCollection",geometries:Qt.geometries.map(Tt)};break;case"Point":fr={type:"Point",coordinates:nt(Qt.coordinates)};break;case"MultiPoint":fr={type:Qt.type,coordinates:lt(Qt.coordinates)};break;case"LineString":fr={type:Qt.type,coordinates:_t(Qt.coordinates)};break;case"MultiLineString":case"Polygon":fr={type:Qt.type,coordinates:bt(Qt.coordinates)};break;case"MultiPolygon":fr={type:"MultiPolygon",coordinates:Qt.coordinates.map(bt)};break;default:return Qt}return Qt.bbox!=null&&(fr.bbox=Qt.bbox),fr}function qt(Qt){var fr={type:"Feature",properties:Qt.properties,geometry:Tt(Qt.geometry)};return Qt.id!=null&&(fr.id=Qt.id),Qt.bbox!=null&&(fr.bbox=Qt.bbox),fr}if(ze!=null)switch(ze.type){case"Feature":return qt(ze);case"FeatureCollection":{var sr={type:"FeatureCollection",features:ze.features.map(qt)};return ze.bbox!=null&&(sr.bbox=ze.bbox),sr}default:return Tt(ze)}return ze}function Jt(ze){var Ye=p(ze);function nt(lt,_t){var bt=Ye?y(lt*Ye/2)/Ye:lt/2;if(!_t)return[2*bt,-ze];var Tt=2*t(bt*p(_t)),qt=1/y(_t);return[p(Tt)*qt,_t+(1-a(Tt))*qt-ze]}return nt.invert=function(lt,_t){if(x(_t+=ze)<g)return[Ye?2*t(Ye*lt/2)/Ye:lt,0];var bt=lt*lt+_t*_t,Tt=0,qt=10,sr;do{var Qt=y(Tt),fr=1/a(Tt),Er=bt-2*_t*Tt+Tt*Tt;Tt-=sr=(Qt*Er+2*(Tt-_t))/(2+Er*fr*fr+2*(Tt-_t)*Qt)}while(x(sr)>g&&--qt>0);var Hr=lt*(Qt=y(Tt)),en=y(x(_t)<x(Tt+1/Qt)?O(Hr)*.5:F(Hr)*.5+b/4)/p(Tt);return[Ye?2*t(Ye*en)/Ye:2*en,Tt]},nt}function Cr(){return qe(Jt).scale(131.215)}var an=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];an.forEach(function(ze){ze[1]*=1.0144});function dn(ze,Ye){var nt=o(18,x(Ye)*36/b),lt=n(nt),_t=nt-lt,bt=(Er=an[lt])[0],Tt=Er[1],qt=(Er=an[++lt])[0],sr=Er[1],Qt=(Er=an[o(19,++lt)])[0],fr=Er[1],Er;return[ze*(qt+_t*(Qt-bt)/2+_t*_t*(Qt-2*qt+bt)/2),(Ye>0?M:-M)*(sr+_t*(fr-Tt)/2+_t*_t*(fr-2*sr+Tt)/2)]}dn.invert=function(ze,Ye){var nt=Ye/M,lt=nt*90,_t=o(18,x(lt/5)),bt=l(0,n(_t));do{var Tt=an[bt][1],qt=an[bt+1][1],sr=an[o(19,bt+2)][1],Qt=sr-Tt,fr=sr-2*qt+Tt,Er=2*(x(nt)-qt)/Qt,Hr=fr/Qt,en=Er*(1-Hr*Er*(1-2*Hr*Er));if(en>=0||bt===1){lt=(Ye>=0?5:-5)*(en+_t);var _n=50,Pn;do _t=o(18,x(lt)/5),bt=n(_t),en=_t-bt,Tt=an[bt][1],qt=an[bt+1][1],sr=an[o(19,bt+2)][1],lt-=(Pn=(Ye>=0?M:-M)*(qt+en*(sr-Tt)/2+en*en*(sr-2*qt+Tt)/2)-Ye)*S;while(x(Pn)>A&&--_n>0);break}}while(--bt>=0);var Kn=an[bt][0],xa=an[bt+1][0],wa=an[o(19,bt+2)][0];return[ze/(xa+en*(wa-Kn)/2+en*en*(wa-2*xa+Kn)/2),lt*k]};function Tn(){return s.geoProjection(dn).scale(152.63)}function Cn(ze){function Ye(nt,lt){var _t=a(lt),bt=(ze-1)/(ze-_t*a(nt));return[bt*_t*p(nt),bt*p(lt)]}return Ye.invert=function(nt,lt){var _t=nt*nt+lt*lt,bt=I(_t),Tt=(ze-I(1-_t*(ze+1)/(ze-1)))/((ze-1)/bt+bt/(ze-1));return[i(nt*Tt,bt*I(1-Tt*Tt)),bt?O(lt*Tt/bt):0]},Ye}function Gn(ze,Ye){var nt=Cn(ze);if(!Ye)return nt;var lt=a(Ye),_t=p(Ye);function bt(Tt,qt){var sr=nt(Tt,qt),Qt=sr[1],fr=Qt*_t/(ze-1)+lt;return[sr[0]*lt/fr,Qt/fr]}return bt.invert=function(Tt,qt){var sr=(ze-1)/(ze-1-qt*_t);return nt.invert(sr*Tt,sr*qt*lt)},bt}function xn(){var ze=2,Ye=0,nt=s.geoProjectionMutator(Gn),lt=nt(ze,Ye);return lt.distance=function(_t){return arguments.length?nt(ze=+_t,Ye):ze},lt.tilt=function(_t){return arguments.length?nt(ze,Ye=_t*k):Ye*S},lt.scale(432.147).clipAngle(F(1/ze)*S-1e-6)}var In=1e-4,Ln=1e4,jn=-180,ea=jn+In,Ba=180,Ra=Ba-In,Ua=-90,Va=Ua+In,$n=90,da=$n-In;function ja(ze){return ze.length>0}function qa(ze){return Math.floor(ze*Ln)/Ln}function yi(ze){return ze===Ua||ze===$n?[0,ze]:[jn,qa(ze)]}function xi(ze){var Ye=ze[0],nt=ze[1],lt=!1;return Ye<=ea?(Ye=jn,lt=!0):Ye>=Ra&&(Ye=Ba,lt=!0),nt<=Va?(nt=Ua,lt=!0):nt>=da&&(nt=$n,lt=!0),lt?[Ye,nt]:ze}function _i(ze){return ze.map(xi)}function ki(ze,Ye,nt){for(var lt=0,_t=ze.length;lt<_t;++lt){var bt=ze[lt].slice();nt.push({index:-1,polygon:Ye,ring:bt});for(var Tt=0,qt=bt.length;Tt<qt;++Tt){var sr=bt[Tt],Qt=sr[0],fr=sr[1];if(Qt<=ea||Qt>=Ra||fr<=Va||fr>=da){bt[Tt]=xi(sr);for(var Er=Tt+1;Er<qt;++Er){var Hr=bt[Er],en=Hr[0],_n=Hr[1];if(en>ea&&en<Ra&&_n>Va&&_n<da)break}if(Er===Tt+1)continue;if(Tt){var Pn={index:-1,polygon:Ye,ring:bt.slice(0,Tt+1)};Pn.ring[Pn.ring.length-1]=yi(fr),nt[nt.length-1]=Pn}else nt.pop();if(Er>=qt)break;nt.push({index:-1,polygon:Ye,ring:bt=bt.slice(Er-1)}),bt[0]=yi(bt[0][1]),Tt=-1,qt=bt.length}}}}function ui(ze){var Ye,nt=ze.length,lt={},_t={},bt,Tt,qt,sr,Qt;for(Ye=0;Ye<nt;++Ye){if(bt=ze[Ye],Tt=bt.ring[0],sr=bt.ring[bt.ring.length-1],Tt[0]===sr[0]&&Tt[1]===sr[1]){bt.polygon.push(bt.ring),ze[Ye]=null;continue}bt.index=Ye,lt[Tt]=_t[sr]=bt}for(Ye=0;Ye<nt;++Ye)if(bt=ze[Ye],bt){if(Tt=bt.ring[0],sr=bt.ring[bt.ring.length-1],qt=_t[Tt],Qt=lt[sr],delete lt[Tt],delete _t[sr],Tt[0]===sr[0]&&Tt[1]===sr[1]){bt.polygon.push(bt.ring);continue}qt?(delete _t[Tt],delete lt[qt.ring[0]],qt.ring.pop(),ze[qt.index]=null,bt={index:-1,polygon:qt.polygon,ring:qt.ring.concat(bt.ring)},qt===Qt?bt.polygon.push(bt.ring):(bt.index=nt++,ze.push(lt[bt.ring[0]]=_t[bt.ring[bt.ring.length-1]]=bt))):Qt?(delete lt[sr],delete _t[Qt.ring[Qt.ring.length-1]],bt.ring.pop(),bt={index:nt++,polygon:Qt.polygon,ring:bt.ring.concat(Qt.ring)},ze[Qt.index]=null,ze.push(lt[bt.ring[0]]=_t[bt.ring[bt.ring.length-1]]=bt)):(bt.ring.push(bt.ring[0]),bt.polygon.push(bt.ring))}}function Eo(ze){var Ye={type:"Feature",geometry:oo(ze.geometry)};return ze.id!=null&&(Ye.id=ze.id),ze.bbox!=null&&(Ye.bbox=ze.bbox),ze.properties!=null&&(Ye.properties=ze.properties),Ye}function oo(ze){if(ze==null)return ze;var Ye,nt,lt,_t;switch(ze.type){case"GeometryCollection":Ye={type:"GeometryCollection",geometries:ze.geometries.map(oo)};break;case"Point":Ye={type:"Point",coordinates:xi(ze.coordinates)};break;case"MultiPoint":case"LineString":Ye={type:ze.type,coordinates:_i(ze.coordinates)};break;case"MultiLineString":Ye={type:"MultiLineString",coordinates:ze.coordinates.map(_i)};break;case"Polygon":{var bt=[];ki(ze.coordinates,bt,nt=[]),ui(nt),Ye={type:"Polygon",coordinates:bt};break}case"MultiPolygon":{nt=[],lt=-1,_t=ze.coordinates.length;for(var Tt=new Array(_t);++lt<_t;)ki(ze.coordinates[lt],Tt[lt]=[],nt);ui(nt),Ye={type:"MultiPolygon",coordinates:Tt.filter(ja)};break}default:return ze}return ze.bbox!=null&&(Ye.bbox=ze.bbox),Ye}function Qa(ze){if(ze==null)return ze;switch(ze.type){case"Feature":return Eo(ze);case"FeatureCollection":{var Ye={type:"FeatureCollection",features:ze.features.map(Eo)};return ze.bbox!=null&&(Ye.bbox=ze.bbox),Ye}default:return oo(ze)}}function ma(ze,Ye){var nt=y(Ye/2),lt=p(_*nt);return[ze*(.74482-.34588*lt*lt),1.70711*nt]}ma.invert=function(ze,Ye){var nt=Ye/1.70711,lt=p(_*nt);return[ze/(.74482-.34588*lt*lt),2*t(nt)]};function wi(){return s.geoProjection(ma).scale(146.153)}function yo(ze,Ye,nt){var lt=s.geoInterpolate(Ye,nt),_t=lt(.5),bt=s.geoRotation([-_t[0],-_t[1]])(Ye),Tt=lt.distance/2,qt=-O(p(bt[1]*k)/p(Tt)),sr=[-_t[0],-_t[1],-(bt[0]>0?b-qt:qt)*S],Qt=s.geoProjection(ze(Tt)).rotate(sr),fr=s.geoRotation(sr),Er=Qt.center;return delete Qt.rotate,Qt.center=function(Hr){return arguments.length?Er(fr(Hr)):fr.invert(Er())},Qt.clipAngle(90)}function Ao(ze){var Ye=a(ze);function nt(lt,_t){var bt=s.geoGnomonicRaw(lt,_t);return bt[0]*=Ye,bt}return nt.invert=function(lt,_t){return s.geoGnomonicRaw.invert(lt/Ye,_t)},nt}function Es(){return Js([-158,21.5],[-77,39]).clipAngle(60).scale(400)}function Js(ze,Ye){return yo(Ao,ze,Ye)}function $o(ze){if(!(ze*=2))return s.geoAzimuthalEquidistantRaw;var Ye=-ze/2,nt=-Ye,lt=ze*ze,_t=y(nt),bt=.5/p(nt);function Tt(qt,sr){var Qt=F(a(sr)*a(qt-Ye)),fr=F(a(sr)*a(qt-nt)),Er=sr<0?-1:1;return Qt*=Qt,fr*=fr,[(Qt-fr)/(2*ze),Er*I(4*lt*fr-(lt-Qt+fr)*(lt-Qt+fr))/(2*ze)]}return Tt.invert=function(qt,sr){var Qt=sr*sr,fr=a(I(Qt+(Hr=qt+Ye)*Hr)),Er=a(I(Qt+(Hr=qt+nt)*Hr)),Hr,en;return[i(en=fr-Er,Hr=(fr+Er)*_t),(sr<0?-1:1)*F(I(Hr*Hr+en*en)*bt)]},Tt}function Pl(){return Bs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)}function Bs(ze,Ye){return yo($o,ze,Ye)}function Cs(ze,Ye){if(x(Ye)<g)return[ze,0];var nt=x(Ye/M),lt=O(nt);if(x(ze)<g||x(x(Ye)-M)<g)return[0,d(Ye)*b*y(lt/2)];var _t=a(lt),bt=x(b/ze-ze/b)/2,Tt=bt*bt,qt=_t/(nt+_t-1),sr=qt*(2/nt-1),Qt=sr*sr,fr=Qt+Tt,Er=qt-Qt,Hr=Tt+qt;return[d(ze)*b*(bt*Er+I(Tt*Er*Er-fr*(qt*qt-Qt)))/fr,d(Ye)*b*(sr*Hr-bt*I((Tt+1)*fr-Hr*Hr))/fr]}Cs.invert=function(ze,Ye){if(x(Ye)<g)return[ze,0];if(x(ze)<g)return[0,M*p(2*t(Ye/b))];var nt=(ze/=b)*ze,lt=(Ye/=b)*Ye,_t=nt+lt,bt=_t*_t,Tt=-x(Ye)*(1+_t),qt=Tt-2*lt+nt,sr=-2*Tt+1+2*lt+bt,Qt=lt/sr+(2*qt*qt*qt/(sr*sr*sr)-9*Tt*qt/(sr*sr))/27,fr=(Tt-qt*qt/(3*sr))/sr,Er=2*I(-fr/3),Hr=F(3*Qt/(fr*Er))/3;return[b*(_t-1+I(1+2*(nt-lt)+bt))/(2*ze),d(Ye)*b*(-Er*a(Hr+b/3)-qt/(3*sr))]};function Co(){return s.geoProjection(Cs).scale(79.4183)}function Fu(ze,Ye){if(x(Ye)<g)return[ze,0];var nt=x(Ye/M),lt=O(nt);if(x(ze)<g||x(x(Ye)-M)<g)return[0,d(Ye)*b*y(lt/2)];var _t=a(lt),bt=x(b/ze-ze/b)/2,Tt=bt*bt,qt=_t*(I(1+Tt)-bt*_t)/(1+Tt*nt*nt);return[d(ze)*b*qt,d(Ye)*b*I(1-qt*(2*bt+qt))]}Fu.invert=function(ze,Ye){if(!ze)return[0,M*p(2*t(Ye/b))];var nt=x(ze/b),lt=(1-nt*nt-(Ye/=b)*Ye)/(2*nt),_t=lt*lt,bt=I(_t+1);return[d(ze)*b*(bt-lt),d(Ye)*M*p(2*i(I((1-2*lt*nt)*(lt+bt)-nt),I(bt+lt+nt)))]};function ef(){return s.geoProjection(Fu).scale(79.4183)}function Ls(ze,Ye){if(x(Ye)<g)return[ze,0];var nt=Ye/M,lt=O(nt);if(x(ze)<g||x(x(Ye)-M)<g)return[0,b*y(lt/2)];var _t=(b/ze-ze/b)/2,bt=nt/(1+a(lt));return[b*(d(ze)*I(_t*_t+1-bt*bt)-_t),b*bt]}Ls.invert=function(ze,Ye){if(!Ye)return[ze,0];var nt=Ye/b,lt=(b*b*(1-nt*nt)-ze*ze)/(2*b*ze);return[ze?b*(d(ze)*I(lt*lt+1)-lt):0,M*p(2*t(nt))]};function Sf(){return s.geoProjection(Ls).scale(79.4183)}function Ou(ze,Ye){if(!Ye)return[ze,0];var nt=x(Ye);if(!ze||nt===M)return[0,Ye];var lt=nt/M,_t=lt*lt,bt=(8*lt-_t*(_t+2)-5)/(2*_t*(lt-1)),Tt=bt*bt,qt=lt*bt,sr=_t+Tt+2*qt,Qt=lt+3*bt,fr=ze/M,Er=fr+1/fr,Hr=d(x(ze)-M)*I(Er*Er-4),en=Hr*Hr,_n=sr*(_t+Tt*en-1)+(1-_t)*(_t*(Qt*Qt+4*Tt)+12*qt*Tt+4*Tt*Tt),Pn=(Hr*(sr+Tt-1)+2*I(_n))/(4*sr+en);return[d(ze)*M*Pn,d(Ye)*M*I(1+Hr*x(Pn)-Pn*Pn)]}Ou.invert=function(ze,Ye){var nt;if(!ze||!Ye)return[ze,Ye];Ye/=b;var lt=d(ze)*ze/M,_t=(lt*lt-1+4*Ye*Ye)/x(lt),bt=_t*_t,Tt=2*Ye,qt=50;do{var sr=Tt*Tt,Qt=(8*Tt-sr*(sr+2)-5)/(2*sr*(Tt-1)),fr=(3*Tt-sr*Tt-10)/(2*sr*Tt),Er=Qt*Qt,Hr=Tt*Qt,en=Tt+Qt,_n=en*en,Pn=Tt+3*Qt,Kn=_n*(sr+Er*bt-1)+(1-sr)*(sr*(Pn*Pn+4*Er)+Er*(12*Hr+4*Er)),xa=-2*en*(4*Hr*Er+(1-4*sr+3*sr*sr)*(1+fr)+Er*(-6+14*sr-bt+(-8+8*sr-2*bt)*fr)+Hr*(-8+12*sr+(-10+10*sr-bt)*fr)),wa=I(Kn),Ja=_t*(_n+Er-1)+2*wa-lt*(4*_n+bt),Xa=_t*(2*Qt*fr+2*en*(1+fr))+xa/wa-8*en*(_t*(-1+Er+_n)+2*wa)*(1+fr)/(bt+4*_n);Tt-=nt=Ja/Xa}while(nt>g&&--qt>0);return[d(ze)*(I(_t*_t+4)+_t)*b/4,M*Tt]};function mh(){return s.geoProjection(Ou).scale(127.16)}function jf(ze,Ye,nt,lt,_t){function bt(Tt,qt){var sr=nt*p(lt*qt),Qt=I(1-sr*sr),fr=I(2/(1+Qt*a(Tt*=_t)));return[ze*Qt*fr*p(Tt),Ye*sr*fr]}return bt.invert=function(Tt,qt){var sr=Tt/ze,Qt=qt/Ye,fr=I(sr*sr+Qt*Qt),Er=2*O(fr/2);return[i(Tt*y(Er),ze*fr)/_t,fr&&O(qt*p(Er)/(Ye*nt*fr))/lt]},bt}function kf(ze,Ye,nt,lt){var _t=b/3;ze=l(ze,g),Ye=l(Ye,g),ze=o(ze,M),Ye=o(Ye,b-g),nt=l(nt,0),nt=o(nt,100-g),lt=l(lt,g);var bt=nt/100+1,Tt=lt/100,qt=F(bt*a(_t))/_t,sr=p(ze)/p(qt*M),Qt=Ye/b,fr=I(Tt*p(ze/2)/p(Ye/2)),Er=fr/I(Qt*sr*qt),Hr=1/(fr*I(Qt*sr*qt));return jf(Er,Hr,sr,qt,Qt)}function Xf(){var ze=65*k,Ye=60*k,nt=20,lt=200,_t=s.geoProjectionMutator(kf),bt=_t(ze,Ye,nt,lt);return bt.poleline=function(Tt){return arguments.length?_t(ze=+Tt*k,Ye,nt,lt):ze*S},bt.parallels=function(Tt){return arguments.length?_t(ze,Ye=+Tt*k,nt,lt):Ye*S},bt.inflation=function(Tt){return arguments.length?_t(ze,Ye,nt=+Tt,lt):nt},bt.ratio=function(Tt){return arguments.length?_t(ze,Ye,nt,lt=+Tt):lt},bt.scale(163.775)}function Qs(){return Xf().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)}var mc=4*b+3*I(3),Zf=2*I(2*b*I(3)/mc),Kf=Ae(Zf*I(3)/b,Zf,mc/6);function qo(){return s.geoProjection(Kf).scale(176.84)}function Jf(ze,Ye){return[ze*I(1-3*Ye*Ye/(b*b)),Ye]}Jf.invert=function(ze,Ye){return[ze/I(1-3*Ye*Ye/(b*b)),Ye]};function Pc(){return s.geoProjection(Jf).scale(152.63)}function Us(ze,Ye){var nt=a(Ye),lt=a(ze)*nt,_t=1-lt,bt=a(ze=i(p(ze)*nt,-p(Ye))),Tt=p(ze);return nt=I(1-lt*lt),[Tt*nt-bt*_t,-bt*nt-Tt*_t]}Us.invert=function(ze,Ye){var nt=(ze*ze+Ye*Ye)/-2,lt=I(-nt*(2+nt)),_t=Ye*nt+ze*lt,bt=ze*nt-Ye*lt,Tt=I(bt*bt+_t*_t);return[i(lt*_t,Tt*(1+nt)),Tt?-O(lt*bt/Tt):0]};function Ef(){return s.geoProjection(Us).rotate([0,-90,45]).scale(124.75).clipAngle(180-.001)}function Cf(ze,Ye){var nt=W(ze,Ye);return[(nt[0]+ze/M)/2,(nt[1]+Ye)/2]}Cf.invert=function(ze,Ye){var nt=ze,lt=Ye,_t=25;do{var bt=a(lt),Tt=p(lt),qt=p(2*lt),sr=Tt*Tt,Qt=bt*bt,fr=p(nt),Er=a(nt/2),Hr=p(nt/2),en=Hr*Hr,_n=1-Qt*Er*Er,Pn=_n?F(bt*Er)*I(Kn=1/_n):Kn=0,Kn,xa=.5*(2*Pn*bt*Hr+nt/M)-ze,wa=.5*(Pn*Tt+lt)-Ye,Ja=.5*Kn*(Qt*en+Pn*bt*Er*sr)+.5/M,Xa=Kn*(fr*qt/4-Pn*Tt*Hr),ni=.125*Kn*(qt*Hr-Pn*Tt*Qt*fr),vi=.5*Kn*(sr*Er+Pn*en*bt)+.5,ho=Xa*ni-vi*Ja,ii=(wa*Xa-xa*vi)/ho,Xi=(xa*ni-wa*Ja)/ho;nt-=ii,lt-=Xi}while((x(ii)>g||x(Xi)>g)&&--_t>0);return[nt,lt]};function Qf(){return s.geoProjection(Cf).scale(158.837)}u.geoNaturalEarth=s.geoNaturalEarth1,u.geoNaturalEarthRaw=s.geoNaturalEarth1Raw,u.geoAiry=q,u.geoAiryRaw=ee,u.geoAitoff=J,u.geoAitoffRaw=W,u.geoArmadillo=fe,u.geoArmadilloRaw=le,u.geoAugust=H,u.geoAugustRaw=se,u.geoBaker=K,u.geoBakerRaw=te,u.geoBerghaus=ae,u.geoBerghausRaw=$,u.geoBertin1953=xe,u.geoBertin1953Raw=me,u.geoBoggs=We,u.geoBoggsRaw=Re,u.geoBonne=dt,u.geoBonneRaw=Ve,u.geoBottomley=Gt,u.geoBottomleyRaw=Rt,u.geoBromley=zt,u.geoBromleyRaw=kt,u.geoChamberlin=Ce,u.geoChamberlinRaw=it,u.geoChamberlinAfrica=Qe,u.geoCollignon=rt,u.geoCollignonRaw=Xe,u.geoCraig=Pt,u.geoCraigRaw=ut,u.geoCraster=jt,u.geoCrasterRaw=Nt,u.geoCylindricalEqualArea=Kt,u.geoCylindricalEqualAreaRaw=Ot,u.geoCylindricalStereographic=gt,u.geoCylindricalStereographicRaw=Je,u.geoEckert1=rr,u.geoEckert1Raw=Et,u.geoEckert2=or,u.geoEckert2Raw=vr,u.geoEckert3=Lr,u.geoEckert3Raw=dr,u.geoEckert4=tr,u.geoEckert4Raw=kr,u.geoEckert5=et,u.geoEckert5Raw=Or,u.geoEckert6=Se,u.geoEckert6Raw=we,u.geoEisenlohr=$e,u.geoEisenlohrRaw=je,u.geoFahey=pt,u.geoFaheyRaw=st,u.geoFoucaut=Wt,u.geoFoucautRaw=wt,u.geoFoucautSinusoidal=xr,u.geoFoucautSinusoidalRaw=yr,u.geoGilbert=Rr,u.geoGingery=mn,u.geoGingeryRaw=tn,u.geoGinzburg4=nn,u.geoGinzburg4Raw=Ar,u.geoGinzburg5=jr,u.geoGinzburg5Raw=fn,u.geoGinzburg6=Ft,u.geoGinzburg6Raw=at,u.geoGinzburg8=hr,u.geoGinzburg8Raw=er,u.geoGinzburg9=zr,u.geoGinzburg9Raw=Wr,u.geoGringorten=kn,u.geoGringortenRaw=br,u.geoGuyou=On,u.geoGuyouRaw=pr,u.geoHammer=ue,u.geoHammerRaw=ie,u.geoHammerRetroazimuthal=na,u.geoHammerRetroazimuthalRaw=Bn,u.geoHealpix=wn,u.geoHealpixRaw=ur,u.geoHill=cr,u.geoHillRaw=pn,u.geoHomolosine=Jn,u.geoHomolosineRaw=Hn,u.geoHufnagel=Un,u.geoHufnagelRaw=Zn,u.geoHyperelliptical=ua,u.geoHyperellipticalRaw=Yn,u.geoInterrupt=Qo,u.geoInterruptedBoggs=Ws,u.geoInterruptedHomolosine=zi,u.geoInterruptedMollweide=ol,u.geoInterruptedMollweideHemispheres=Gl,u.geoInterruptedSinuMollweide=Xu,u.geoInterruptedSinusoidal=Tl,u.geoKavrayskiy7=Yi,u.geoKavrayskiy7Raw=sl,u.geoLagrange=su,u.geoLagrangeRaw=Oo,u.geoLarrivee=Wl,u.geoLarriveeRaw=Fi,u.geoLaskowski=Ui,u.geoLaskowskiRaw=to,u.geoLittrow=ro,u.geoLittrowRaw=co,u.geoLoximuthal=Al,u.geoLoximuthalRaw=ws,u.geoMiller=ds,u.geoMillerRaw=df,u.geoModifiedStereographic=js,u.geoModifiedStereographicRaw=gf,u.geoModifiedStereographicAlaska=Eu,u.geoModifiedStereographicGs48=Vf,u.geoModifiedStereographicGs50=Hf,u.geoModifiedStereographicMiller=Ml,u.geoModifiedStereographicLee=Cu,u.geoMollweide=He,u.geoMollweideRaw=Oe,u.geoMtFlatPolarParabolic=mf,u.geoMtFlatPolarParabolicRaw=Ku,u.geoMtFlatPolarQuartic=Gf,u.geoMtFlatPolarQuarticRaw=Lu,u.geoMtFlatPolarSinusoidal=Ju,u.geoMtFlatPolarSinusoidalRaw=Sl,u.geoNaturalEarth2=Fs,u.geoNaturalEarth2Raw=Pu,u.geoNellHammer=Qu,u.geoNellHammerRaw=lu,u.geoInterruptedQuarticAuthalic=xf,u.geoNicolosi=Wf,u.geoNicolosiRaw=Ru,u.geoPatterson=go,u.geoPattersonRaw=Zs,u.geoPolyconic=fu,u.geoPolyconicRaw=uu,u.geoPolyhedral=El,u.geoPolyhedralButterfly=pu,u.geoPolyhedralCollignon=gc,u.geoPolyhedralWaterman=Oi,u.geoProject=Ms,u.geoGringortenQuincuncial=xt,u.geoPeirceQuincuncial=It,u.geoPierceQuincuncial=It,u.geoQuantize=nr,u.geoQuincuncial=Mf,u.geoRectangularPolyconic=Cr,u.geoRectangularPolyconicRaw=Jt,u.geoRobinson=Tn,u.geoRobinsonRaw=dn,u.geoSatellite=xn,u.geoSatelliteRaw=Gn,u.geoSinuMollweide=En,u.geoSinuMollweideRaw=Jr,u.geoSinusoidal=Ie,u.geoSinusoidalRaw=Ue,u.geoStitch=Qa,u.geoTimes=wi,u.geoTimesRaw=ma,u.geoTwoPointAzimuthal=Js,u.geoTwoPointAzimuthalRaw=Ao,u.geoTwoPointAzimuthalUsa=Es,u.geoTwoPointEquidistant=Bs,u.geoTwoPointEquidistantRaw=$o,u.geoTwoPointEquidistantUsa=Pl,u.geoVanDerGrinten=Co,u.geoVanDerGrintenRaw=Cs,u.geoVanDerGrinten2=ef,u.geoVanDerGrinten2Raw=Fu,u.geoVanDerGrinten3=Sf,u.geoVanDerGrinten3Raw=Ls,u.geoVanDerGrinten4=mh,u.geoVanDerGrinten4Raw=Ou,u.geoWagner=Xf,u.geoWagner7=Qs,u.geoWagnerRaw=kf,u.geoWagner4=qo,u.geoWagner4Raw=Kf,u.geoWagner6=Pc,u.geoWagner6Raw=Jf,u.geoWiechel=Ef,u.geoWiechelRaw=Us,u.geoWinkel3=Qf,u.geoWinkel3Raw=Cf,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107,"d3-geo":114}],114:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-array")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(){return new x}function x(){this.reset()}x.prototype={constructor:x,reset:function(){this.s=this.t=0},add:function(xt){i(t,xt,this.t),i(this,t.s,this.s),this.s?this.t+=t.t:this.s=t.t},valueOf:function(){return this.s}};var t=new x;function i(xt,It,nr){var Jt=xt.s=It+nr,Cr=Jt-It,an=Jt-Cr;xt.t=It-an+(nr-Cr)}var a=1e-6,r=1e-12,n=Math.PI,f=n/2,l=n/4,o=n*2,c=180/n,h=n/180,d=Math.abs,p=Math.atan,y=Math.atan2,g=Math.cos,A=Math.ceil,b=Math.exp,M=Math.log,_=Math.pow,T=Math.sin,w=Math.sign||function(xt){return xt>0?1:xt<0?-1:0},v=Math.sqrt,L=Math.tan;function S(xt){return xt>1?0:xt<-1?n:Math.acos(xt)}function k(xt){return xt>1?f:xt<-1?-f:Math.asin(xt)}function P(xt){return(xt=T(xt/2))*xt}function O(){}function F(xt,It){xt&&D.hasOwnProperty(xt.type)&&D[xt.type](xt,It)}var I={Feature:function(xt,It){F(xt.geometry,It)},FeatureCollection:function(xt,It){for(var nr=xt.features,Jt=-1,Cr=nr.length;++Jt<Cr;)F(nr[Jt].geometry,It)}},D={Sphere:function(xt,It){It.sphere()},Point:function(xt,It){xt=xt.coordinates,It.point(xt[0],xt[1],xt[2])},MultiPoint:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)xt=nr[Jt],It.point(xt[0],xt[1],xt[2])},LineString:function(xt,It){U(xt.coordinates,It,0)},MultiLineString:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)U(nr[Jt],It,0)},Polygon:function(xt,It){B(xt.coordinates,It)},MultiPolygon:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)B(nr[Jt],It)},GeometryCollection:function(xt,It){for(var nr=xt.geometries,Jt=-1,Cr=nr.length;++Jt<Cr;)F(nr[Jt],It)}};function U(xt,It,nr){var Jt=-1,Cr=xt.length-nr,an;for(It.lineStart();++Jt<Cr;)an=xt[Jt],It.point(an[0],an[1],an[2]);It.lineEnd()}function B(xt,It){var nr=-1,Jt=xt.length;for(It.polygonStart();++nr<Jt;)U(xt[nr],It,1);It.polygonEnd()}function j(xt,It){xt&&I.hasOwnProperty(xt.type)?I[xt.type](xt,It):F(xt,It)}var Z=m(),ee=m(),q,W,J,le,fe,se={point:O,lineStart:O,lineEnd:O,polygonStart:function(){Z.reset(),se.lineStart=H,se.lineEnd=Y},polygonEnd:function(){var xt=+Z;ee.add(xt<0?o+xt:xt),this.lineStart=this.lineEnd=this.point=O},sphere:function(){ee.add(o)}};function H(){se.point=ne}function Y(){te(q,W)}function ne(xt,It){se.point=te,q=xt,W=It,xt*=h,It*=h,J=xt,le=g(It=It/2+l),fe=T(It)}function te(xt,It){xt*=h,It*=h,It=It/2+l;var nr=xt-J,Jt=nr>=0?1:-1,Cr=Jt*nr,an=g(It),dn=T(It),Tn=fe*dn,Cn=le*an+Tn*g(Cr),Gn=Tn*Jt*T(Cr);Z.add(y(Gn,Cn)),J=xt,le=an,fe=dn}function K(xt){return ee.reset(),j(xt,se),ee*2}function $(xt){return[y(xt[1],xt[0]),k(xt[2])]}function ae(xt){var It=xt[0],nr=xt[1],Jt=g(nr);return[Jt*g(It),Jt*T(It),T(nr)]}function ie(xt,It){return xt[0]*It[0]+xt[1]*It[1]+xt[2]*It[2]}function oe(xt,It){return[xt[1]*It[2]-xt[2]*It[1],xt[2]*It[0]-xt[0]*It[2],xt[0]*It[1]-xt[1]*It[0]]}function ue(xt,It){xt[0]+=It[0],xt[1]+=It[1],xt[2]+=It[2]}function ye(xt,It){return[xt[0]*It,xt[1]*It,xt[2]*It]}function ce(xt){var It=v(xt[0]*xt[0]+xt[1]*xt[1]+xt[2]*xt[2]);xt[0]/=It,xt[1]/=It,xt[2]/=It}var me,xe,ke,Ae,Oe,He,Ge,_e,Re=m(),We,qe,Ue={point:Ie,lineStart:dt,lineEnd:Rt,polygonStart:function(){Ue.point=Gt,Ue.lineStart=kt,Ue.lineEnd=zt,Re.reset(),se.polygonStart()},polygonEnd:function(){se.polygonEnd(),Ue.point=Ie,Ue.lineStart=dt,Ue.lineEnd=Rt,Z<0?(me=-(ke=180),xe=-(Ae=90)):Re>a?Ae=90:Re<-a&&(xe=-90),qe[0]=me,qe[1]=ke},sphere:function(){me=-(ke=180),xe=-(Ae=90)}};function Ie(xt,It){We.push(qe=[me=xt,ke=xt]),It<xe&&(xe=It),It>Ae&&(Ae=It)}function Ve(xt,It){var nr=ae([xt*h,It*h]);if(_e){var Jt=oe(_e,nr),Cr=[Jt[1],-Jt[0],0],an=oe(Cr,Jt);ce(an),an=$(an);var dn=xt-Oe,Tn=dn>0?1:-1,Cn=an[0]*c*Tn,Gn,xn=d(dn)>180;xn^(Tn*Oe<Cn&&Cn<Tn*xt)?(Gn=an[1]*c,Gn>Ae&&(Ae=Gn)):(Cn=(Cn+360)%360-180,xn^(Tn*Oe<Cn&&Cn<Tn*xt)?(Gn=-an[1]*c,Gn<xe&&(xe=Gn)):(It<xe&&(xe=It),It>Ae&&(Ae=It))),xn?xt<Oe?Bt(me,xt)>Bt(me,ke)&&(ke=xt):Bt(xt,ke)>Bt(me,ke)&&(me=xt):ke>=me?(xt<me&&(me=xt),xt>ke&&(ke=xt)):xt>Oe?Bt(me,xt)>Bt(me,ke)&&(ke=xt):Bt(xt,ke)>Bt(me,ke)&&(me=xt)}else We.push(qe=[me=xt,ke=xt]);It<xe&&(xe=It),It>Ae&&(Ae=It),_e=nr,Oe=xt}function dt(){Ue.point=Ve}function Rt(){qe[0]=me,qe[1]=ke,Ue.point=Ie,_e=null}function Gt(xt,It){if(_e){var nr=xt-Oe;Re.add(d(nr)>180?nr+(nr>0?360:-360):nr)}else He=xt,Ge=It;se.point(xt,It),Ve(xt,It)}function kt(){se.lineStart()}function zt(){Gt(He,Ge),se.lineEnd(),d(Re)>a&&(me=-(ke=180)),qe[0]=me,qe[1]=ke,_e=null}function Bt(xt,It){return(It-=xt)<0?It+360:It}function Lt(xt,It){return xt[0]-It[0]}function Mt(xt,It){return xt[0]<=xt[1]?xt[0]<=It&&It<=xt[1]:It<xt[0]||xt[1]<It}function it(xt){var It,nr,Jt,Cr,an,dn,Tn;if(Ae=ke=-(me=xe=1/0),We=[],j(xt,Ue),nr=We.length){for(We.sort(Lt),It=1,Jt=We[0],an=[Jt];It<nr;++It)Cr=We[It],Mt(Jt,Cr[0])||Mt(Jt,Cr[1])?(Bt(Jt[0],Cr[1])>Bt(Jt[0],Jt[1])&&(Jt[1]=Cr[1]),Bt(Cr[0],Jt[1])>Bt(Jt[0],Jt[1])&&(Jt[0]=Cr[0])):an.push(Jt=Cr);for(dn=-1/0,nr=an.length-1,It=0,Jt=an[nr];It<=nr;Jt=Cr,++It)Cr=an[It],(Tn=Bt(Jt[1],Cr[0]))>dn&&(dn=Tn,me=Cr[0],ke=Jt[1])}return We=qe=null,me===1/0||xe===1/0?[[NaN,NaN],[NaN,NaN]]:[[me,xe],[ke,Ae]]}var ht,Qe,Ce,Xe,rt,ut,Pt,St,Nt,jt,Ot,Kt,Je,gt,Et,rr,vr={sphere:O,point:or,lineStart:Lr,lineEnd:Or,polygonStart:function(){vr.lineStart=et,vr.lineEnd=we},polygonEnd:function(){vr.lineStart=Lr,vr.lineEnd=Or}};function or(xt,It){xt*=h,It*=h;var nr=g(It);dr(nr*g(xt),nr*T(xt),T(It))}function dr(xt,It,nr){++ht,Ce+=(xt-Ce)/ht,Xe+=(It-Xe)/ht,rt+=(nr-rt)/ht}function Lr(){vr.point=kr}function kr(xt,It){xt*=h,It*=h;var nr=g(It);gt=nr*g(xt),Et=nr*T(xt),rr=T(It),vr.point=tr,dr(gt,Et,rr)}function tr(xt,It){xt*=h,It*=h;var nr=g(It),Jt=nr*g(xt),Cr=nr*T(xt),an=T(It),dn=y(v((dn=Et*an-rr*Cr)*dn+(dn=rr*Jt-gt*an)*dn+(dn=gt*Cr-Et*Jt)*dn),gt*Jt+Et*Cr+rr*an);Qe+=dn,ut+=dn*(gt+(gt=Jt)),Pt+=dn*(Et+(Et=Cr)),St+=dn*(rr+(rr=an)),dr(gt,Et,rr)}function Or(){vr.point=or}function et(){vr.point=Se}function we(){De(Kt,Je),vr.point=or}function Se(xt,It){Kt=xt,Je=It,xt*=h,It*=h,vr.point=De;var nr=g(It);gt=nr*g(xt),Et=nr*T(xt),rr=T(It),dr(gt,Et,rr)}function De(xt,It){xt*=h,It*=h;var nr=g(It),Jt=nr*g(xt),Cr=nr*T(xt),an=T(It),dn=Et*an-rr*Cr,Tn=rr*Jt-gt*an,Cn=gt*Cr-Et*Jt,Gn=v(dn*dn+Tn*Tn+Cn*Cn),xn=k(Gn),In=Gn&&-xn/Gn;Nt+=In*dn,jt+=In*Tn,Ot+=In*Cn,Qe+=xn,ut+=xn*(gt+(gt=Jt)),Pt+=xn*(Et+(Et=Cr)),St+=xn*(rr+(rr=an)),dr(gt,Et,rr)}function je(xt){ht=Qe=Ce=Xe=rt=ut=Pt=St=Nt=jt=Ot=0,j(xt,vr);var It=Nt,nr=jt,Jt=Ot,Cr=It*It+nr*nr+Jt*Jt;return Cr<r&&(It=ut,nr=Pt,Jt=St,Qe<a&&(It=Ce,nr=Xe,Jt=rt),Cr=It*It+nr*nr+Jt*Jt,Cr<r)?[NaN,NaN]:[y(nr,It)*c,k(Jt/v(Cr))*c]}function $e(xt){return function(){return xt}}function ot(xt,It){function nr(Jt,Cr){return Jt=xt(Jt,Cr),It(Jt[0],Jt[1])}return xt.invert&&It.invert&&(nr.invert=function(Jt,Cr){return Jt=It.invert(Jt,Cr),Jt&&xt.invert(Jt[0],Jt[1])}),nr}function st(xt,It){return[d(xt)>n?xt+Math.round(-xt/o)*o:xt,It]}st.invert=st;function pt(xt,It,nr){return(xt%=o)?It||nr?ot(Wt(xt),yr(It,nr)):Wt(xt):It||nr?yr(It,nr):st}function wt(xt){return function(It,nr){return It+=xt,[It>n?It-o:It<-n?It+o:It,nr]}}function Wt(xt){var It=wt(xt);return It.invert=wt(-xt),It}function yr(xt,It){var nr=g(xt),Jt=T(xt),Cr=g(It),an=T(It);function dn(Tn,Cn){var Gn=g(Cn),xn=g(Tn)*Gn,In=T(Tn)*Gn,Ln=T(Cn),jn=Ln*nr+xn*Jt;return[y(In*Cr-jn*an,xn*nr-Ln*Jt),k(jn*Cr+In*an)]}return dn.invert=function(Tn,Cn){var Gn=g(Cn),xn=g(Tn)*Gn,In=T(Tn)*Gn,Ln=T(Cn),jn=Ln*Cr-In*an;return[y(In*Cr+Ln*an,xn*nr+jn*Jt),k(jn*nr-xn*Jt)]},dn}function xr(xt){xt=pt(xt[0]*h,xt[1]*h,xt.length>2?xt[2]*h:0);function It(nr){return nr=xt(nr[0]*h,nr[1]*h),nr[0]*=c,nr[1]*=c,nr}return It.invert=function(nr){return nr=xt.invert(nr[0]*h,nr[1]*h),nr[0]*=c,nr[1]*=c,nr},It}function Tr(xt,It,nr,Jt,Cr,an){if(!!nr){var dn=g(It),Tn=T(It),Cn=Jt*nr;Cr==null?(Cr=It+Jt*o,an=It-Cn/2):(Cr=mr(dn,Cr),an=mr(dn,an),(Jt>0?Cr<an:Cr>an)&&(Cr+=Jt*o));for(var Gn,xn=Cr;Jt>0?xn>an:xn<an;xn-=Cn)Gn=$([dn,-Tn*g(xn),-Tn*T(xn)]),xt.point(Gn[0],Gn[1])}}function mr(xt,It){It=ae(It),It[0]-=xt,ce(It);var nr=S(-It[1]);return((-It[2]<0?-nr:nr)+o-a)%o}function Rr(){var xt=$e([0,0]),It=$e(90),nr=$e(6),Jt,Cr,an={point:dn};function dn(Cn,Gn){Jt.push(Cn=Cr(Cn,Gn)),Cn[0]*=c,Cn[1]*=c}function Tn(){var Cn=xt.apply(this,arguments),Gn=It.apply(this,arguments)*h,xn=nr.apply(this,arguments)*h;return Jt=[],Cr=pt(-Cn[0]*h,-Cn[1]*h,0).invert,Tr(an,Gn,xn,1),Cn={type:"Polygon",coordinates:[Jt]},Jt=Cr=null,Cn}return Tn.center=function(Cn){return arguments.length?(xt=typeof Cn=="function"?Cn:$e([+Cn[0],+Cn[1]]),Tn):xt},Tn.radius=function(Cn){return arguments.length?(It=typeof Cn=="function"?Cn:$e(+Cn),Tn):It},Tn.precision=function(Cn){return arguments.length?(nr=typeof Cn=="function"?Cn:$e(+Cn),Tn):nr},Tn}function tn(){var xt=[],It;return{point:function(nr,Jt,Cr){It.push([nr,Jt,Cr])},lineStart:function(){xt.push(It=[])},lineEnd:O,rejoin:function(){xt.length>1&&xt.push(xt.pop().concat(xt.shift()))},result:function(){var nr=xt;return xt=[],It=null,nr}}}function wr(xt,It){return d(xt[0]-It[0])<a&&d(xt[1]-It[1])<a}function gr(xt,It,nr,Jt){this.x=xt,this.z=It,this.o=nr,this.e=Jt,this.v=!1,this.n=this.p=null}function mn(xt,It,nr,Jt,Cr){var an=[],dn=[],Tn,Cn;if(xt.forEach(function(ea){if(!((Ba=ea.length-1)<=0)){var Ba,Ra=ea[0],Ua=ea[Ba],Va;if(wr(Ra,Ua)){if(!Ra[2]&&!Ua[2]){for(Cr.lineStart(),Tn=0;Tn<Ba;++Tn)Cr.point((Ra=ea[Tn])[0],Ra[1]);Cr.lineEnd();return}Ua[0]+=2*a}an.push(Va=new gr(Ra,ea,null,!0)),dn.push(Va.o=new gr(Ra,null,Va,!1)),an.push(Va=new gr(Ua,ea,null,!1)),dn.push(Va.o=new gr(Ua,null,Va,!0))}}),!!an.length){for(dn.sort(It),Gr(an),Gr(dn),Tn=0,Cn=dn.length;Tn<Cn;++Tn)dn[Tn].e=nr=!nr;for(var Gn=an[0],xn,In;;){for(var Ln=Gn,jn=!0;Ln.v;)if((Ln=Ln.n)===Gn)return;xn=Ln.z,Cr.lineStart();do{if(Ln.v=Ln.o.v=!0,Ln.e){if(jn)for(Tn=0,Cn=xn.length;Tn<Cn;++Tn)Cr.point((In=xn[Tn])[0],In[1]);else Jt(Ln.x,Ln.n.x,1,Cr);Ln=Ln.n}else{if(jn)for(xn=Ln.p.z,Tn=xn.length-1;Tn>=0;--Tn)Cr.point((In=xn[Tn])[0],In[1]);else Jt(Ln.x,Ln.p.x,-1,Cr);Ln=Ln.p}Ln=Ln.o,xn=Ln.z,jn=!jn}while(!Ln.v);Cr.lineEnd()}}}function Gr(xt){if(!!(It=xt.length)){for(var It,nr=0,Jt=xt[0],Cr;++nr<It;)Jt.n=Cr=xt[nr],Cr.p=Jt,Jt=Cr;Jt.n=Cr=xt[0],Cr.p=Jt}}var Ar=m();function nn(xt){return d(xt[0])<=n?xt[0]:w(xt[0])*((d(xt[0])+n)%o-n)}function fn(xt,It){var nr=nn(It),Jt=It[1],Cr=T(Jt),an=[T(nr),-g(nr),0],dn=0,Tn=0;Ar.reset(),Cr===1?Jt=f+a:Cr===-1&&(Jt=-f-a);for(var Cn=0,Gn=xt.length;Cn<Gn;++Cn)if(!!(In=(xn=xt[Cn]).length))for(var xn,In,Ln=xn[In-1],jn=nn(Ln),ea=Ln[1]/2+l,Ba=T(ea),Ra=g(ea),Ua=0;Ua<In;++Ua,jn=$n,Ba=ja,Ra=qa,Ln=Va){var Va=xn[Ua],$n=nn(Va),da=Va[1]/2+l,ja=T(da),qa=g(da),yi=$n-jn,xi=yi>=0?1:-1,_i=xi*yi,ki=_i>n,ui=Ba*ja;if(Ar.add(y(ui*xi*T(_i),Ra*qa+ui*g(_i))),dn+=ki?yi+xi*o:yi,ki^jn>=nr^$n>=nr){var Eo=oe(ae(Ln),ae(Va));ce(Eo);var oo=oe(an,Eo);ce(oo);var Qa=(ki^yi>=0?-1:1)*k(oo[2]);(Jt>Qa||Jt===Qa&&(Eo[0]||Eo[1]))&&(Tn+=ki^yi>=0?1:-1)}}return(dn<-a||dn<a&&Ar<-a)^Tn&1}function jr(xt,It,nr,Jt){return function(Cr){var an=It(Cr),dn=tn(),Tn=It(dn),Cn=!1,Gn,xn,In,Ln={point:jn,lineStart:Ba,lineEnd:Ra,polygonStart:function(){Ln.point=Ua,Ln.lineStart=Va,Ln.lineEnd=$n,xn=[],Gn=[]},polygonEnd:function(){Ln.point=jn,Ln.lineStart=Ba,Ln.lineEnd=Ra,xn=s.merge(xn);var da=fn(Gn,Jt);xn.length?(Cn||(Cr.polygonStart(),Cn=!0),mn(xn,Ft,da,nr,Cr)):da&&(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),nr(null,null,1,Cr),Cr.lineEnd()),Cn&&(Cr.polygonEnd(),Cn=!1),xn=Gn=null},sphere:function(){Cr.polygonStart(),Cr.lineStart(),nr(null,null,1,Cr),Cr.lineEnd(),Cr.polygonEnd()}};function jn(da,ja){xt(da,ja)&&Cr.point(da,ja)}function ea(da,ja){an.point(da,ja)}function Ba(){Ln.point=ea,an.lineStart()}function Ra(){Ln.point=jn,an.lineEnd()}function Ua(da,ja){In.push([da,ja]),Tn.point(da,ja)}function Va(){Tn.lineStart(),In=[]}function $n(){Ua(In[0][0],In[0][1]),Tn.lineEnd();var da=Tn.clean(),ja=dn.result(),qa,yi=ja.length,xi,_i,ki;if(In.pop(),Gn.push(In),In=null,!!yi){if(da&1){if(_i=ja[0],(xi=_i.length-1)>0){for(Cn||(Cr.polygonStart(),Cn=!0),Cr.lineStart(),qa=0;qa<xi;++qa)Cr.point((ki=_i[qa])[0],ki[1]);Cr.lineEnd()}return}yi>1&&da&2&&ja.push(ja.pop().concat(ja.shift())),xn.push(ja.filter(at))}}return Ln}}function at(xt){return xt.length>1}function Ft(xt,It){return((xt=xt.x)[0]<0?xt[1]-f-a:f-xt[1])-((It=It.x)[0]<0?It[1]-f-a:f-It[1])}var er=jr(function(){return!0},hr,zr,[-n,-f]);function hr(xt){var It=NaN,nr=NaN,Jt=NaN,Cr;return{lineStart:function(){xt.lineStart(),Cr=1},point:function(an,dn){var Tn=an>0?n:-n,Cn=d(an-It);d(Cn-n)<a?(xt.point(It,nr=(nr+dn)/2>0?f:-f),xt.point(Jt,nr),xt.lineEnd(),xt.lineStart(),xt.point(Tn,nr),xt.point(an,nr),Cr=0):Jt!==Tn&&Cn>=n&&(d(It-Jt)<a&&(It-=Jt*a),d(an-Tn)<a&&(an-=Tn*a),nr=Wr(It,nr,an,dn),xt.point(Jt,nr),xt.lineEnd(),xt.lineStart(),xt.point(Tn,nr),Cr=0),xt.point(It=an,nr=dn),Jt=Tn},lineEnd:function(){xt.lineEnd(),It=nr=NaN},clean:function(){return 2-Cr}}}function Wr(xt,It,nr,Jt){var Cr,an,dn=T(xt-nr);return d(dn)>a?p((T(It)*(an=g(Jt))*T(nr)-T(Jt)*(Cr=g(It))*T(xt))/(Cr*an*dn)):(It+Jt)/2}function zr(xt,It,nr,Jt){var Cr;if(xt==null)Cr=nr*f,Jt.point(-n,Cr),Jt.point(0,Cr),Jt.point(n,Cr),Jt.point(n,0),Jt.point(n,-Cr),Jt.point(0,-Cr),Jt.point(-n,-Cr),Jt.point(-n,0),Jt.point(-n,Cr);else if(d(xt[0]-It[0])>a){var an=xt[0]<It[0]?n:-n;Cr=nr*an/2,Jt.point(-an,Cr),Jt.point(0,Cr),Jt.point(an,Cr)}else Jt.point(It[0],It[1])}function Pr(xt){var It=g(xt),nr=6*h,Jt=It>0,Cr=d(It)>a;function an(xn,In,Ln,jn){Tr(jn,xt,nr,Ln,xn,In)}function dn(xn,In){return g(xn)*g(In)>It}function Tn(xn){var In,Ln,jn,ea,Ba;return{lineStart:function(){ea=jn=!1,Ba=1},point:function(Ra,Ua){var Va=[Ra,Ua],$n,da=dn(Ra,Ua),ja=Jt?da?0:Gn(Ra,Ua):da?Gn(Ra+(Ra<0?n:-n),Ua):0;if(!In&&(ea=jn=da)&&xn.lineStart(),da!==jn&&($n=Cn(In,Va),(!$n||wr(In,$n)||wr(Va,$n))&&(Va[2]=1)),da!==jn)Ba=0,da?(xn.lineStart(),$n=Cn(Va,In),xn.point($n[0],$n[1])):($n=Cn(In,Va),xn.point($n[0],$n[1],2),xn.lineEnd()),In=$n;else if(Cr&&In&&Jt^da){var qa;!(ja&Ln)&&(qa=Cn(Va,In,!0))&&(Ba=0,Jt?(xn.lineStart(),xn.point(qa[0][0],qa[0][1]),xn.point(qa[1][0],qa[1][1]),xn.lineEnd()):(xn.point(qa[1][0],qa[1][1]),xn.lineEnd(),xn.lineStart(),xn.point(qa[0][0],qa[0][1],3)))}da&&(!In||!wr(In,Va))&&xn.point(Va[0],Va[1]),In=Va,jn=da,Ln=ja},lineEnd:function(){jn&&xn.lineEnd(),In=null},clean:function(){return Ba|(ea&&jn)<<1}}}function Cn(xn,In,Ln){var jn=ae(xn),ea=ae(In),Ba=[1,0,0],Ra=oe(jn,ea),Ua=ie(Ra,Ra),Va=Ra[0],$n=Ua-Va*Va;if(!$n)return!Ln&&xn;var da=It*Ua/$n,ja=-It*Va/$n,qa=oe(Ba,Ra),yi=ye(Ba,da),xi=ye(Ra,ja);ue(yi,xi);var _i=qa,ki=ie(yi,_i),ui=ie(_i,_i),Eo=ki*ki-ui*(ie(yi,yi)-1);if(!(Eo<0)){var oo=v(Eo),Qa=ye(_i,(-ki-oo)/ui);if(ue(Qa,yi),Qa=$(Qa),!Ln)return Qa;var ma=xn[0],wi=In[0],yo=xn[1],Ao=In[1],Es;wi<ma&&(Es=ma,ma=wi,wi=Es);var Js=wi-ma,$o=d(Js-n)<a,Pl=$o||Js<a;if(!$o&&Ao<yo&&(Es=yo,yo=Ao,Ao=Es),Pl?$o?yo+Ao>0^Qa[1]<(d(Qa[0]-ma)<a?yo:Ao):yo<=Qa[1]&&Qa[1]<=Ao:Js>n^(ma<=Qa[0]&&Qa[0]<=wi)){var Bs=ye(_i,(-ki+oo)/ui);return ue(Bs,yi),[Qa,$(Bs)]}}}function Gn(xn,In){var Ln=Jt?xt:n-xt,jn=0;return xn<-Ln?jn|=1:xn>Ln&&(jn|=2),In<-Ln?jn|=4:In>Ln&&(jn|=8),jn}return jr(dn,Tn,an,Jt?[0,-xt]:[-n,xt-n])}function br(xt,It,nr,Jt,Cr,an){var dn=xt[0],Tn=xt[1],Cn=It[0],Gn=It[1],xn=0,In=1,Ln=Cn-dn,jn=Gn-Tn,ea;if(ea=nr-dn,!(!Ln&&ea>0)){if(ea/=Ln,Ln<0){if(ea<xn)return;ea<In&&(In=ea)}else if(Ln>0){if(ea>In)return;ea>xn&&(xn=ea)}if(ea=Cr-dn,!(!Ln&&ea<0)){if(ea/=Ln,Ln<0){if(ea>In)return;ea>xn&&(xn=ea)}else if(Ln>0){if(ea<xn)return;ea<In&&(In=ea)}if(ea=Jt-Tn,!(!jn&&ea>0)){if(ea/=jn,jn<0){if(ea<xn)return;ea<In&&(In=ea)}else if(jn>0){if(ea>In)return;ea>xn&&(xn=ea)}if(ea=an-Tn,!(!jn&&ea<0)){if(ea/=jn,jn<0){if(ea>In)return;ea>xn&&(xn=ea)}else if(jn>0){if(ea<xn)return;ea<In&&(In=ea)}return xn>0&&(xt[0]=dn+xn*Ln,xt[1]=Tn+xn*jn),In<1&&(It[0]=dn+In*Ln,It[1]=Tn+In*jn),!0}}}}}var Xr=1e9,Fn=-Xr;function kn(xt,It,nr,Jt){function Cr(Gn,xn){return xt<=Gn&&Gn<=nr&&It<=xn&&xn<=Jt}function an(Gn,xn,In,Ln){var jn=0,ea=0;if(Gn==null||(jn=dn(Gn,In))!==(ea=dn(xn,In))||Cn(Gn,xn)<0^In>0)do Ln.point(jn===0||jn===3?xt:nr,jn>1?Jt:It);while((jn=(jn+In+4)%4)!==ea);else Ln.point(xn[0],xn[1])}function dn(Gn,xn){return d(Gn[0]-xt)<a?xn>0?0:3:d(Gn[0]-nr)<a?xn>0?2:1:d(Gn[1]-It)<a?xn>0?1:0:xn>0?3:2}function Tn(Gn,xn){return Cn(Gn.x,xn.x)}function Cn(Gn,xn){var In=dn(Gn,1),Ln=dn(xn,1);return In!==Ln?In-Ln:In===0?xn[1]-Gn[1]:In===1?Gn[0]-xn[0]:In===2?Gn[1]-xn[1]:xn[0]-Gn[0]}return function(Gn){var xn=Gn,In=tn(),Ln,jn,ea,Ba,Ra,Ua,Va,$n,da,ja,qa,yi={point:xi,lineStart:Eo,lineEnd:oo,polygonStart:ki,polygonEnd:ui};function xi(ma,wi){Cr(ma,wi)&&xn.point(ma,wi)}function _i(){for(var ma=0,wi=0,yo=jn.length;wi<yo;++wi)for(var Ao=jn[wi],Es=1,Js=Ao.length,$o=Ao[0],Pl,Bs,Cs=$o[0],Co=$o[1];Es<Js;++Es)Pl=Cs,Bs=Co,$o=Ao[Es],Cs=$o[0],Co=$o[1],Bs<=Jt?Co>Jt&&(Cs-Pl)*(Jt-Bs)>(Co-Bs)*(xt-Pl)&&++ma:Co<=Jt&&(Cs-Pl)*(Jt-Bs)<(Co-Bs)*(xt-Pl)&&--ma;return ma}function ki(){xn=In,Ln=[],jn=[],qa=!0}function ui(){var ma=_i(),wi=qa&&ma,yo=(Ln=s.merge(Ln)).length;(wi||yo)&&(Gn.polygonStart(),wi&&(Gn.lineStart(),an(null,null,1,Gn),Gn.lineEnd()),yo&&mn(Ln,Tn,ma,an,Gn),Gn.polygonEnd()),xn=Gn,Ln=jn=ea=null}function Eo(){yi.point=Qa,jn&&jn.push(ea=[]),ja=!0,da=!1,Va=$n=NaN}function oo(){Ln&&(Qa(Ba,Ra),Ua&&da&&In.rejoin(),Ln.push(In.result())),yi.point=xi,da&&xn.lineEnd()}function Qa(ma,wi){var yo=Cr(ma,wi);if(jn&&ea.push([ma,wi]),ja)Ba=ma,Ra=wi,Ua=yo,ja=!1,yo&&(xn.lineStart(),xn.point(ma,wi));else if(yo&&da)xn.point(ma,wi);else{var Ao=[Va=Math.max(Fn,Math.min(Xr,Va)),$n=Math.max(Fn,Math.min(Xr,$n))],Es=[ma=Math.max(Fn,Math.min(Xr,ma)),wi=Math.max(Fn,Math.min(Xr,wi))];br(Ao,Es,xt,It,nr,Jt)?(da||(xn.lineStart(),xn.point(Ao[0],Ao[1])),xn.point(Es[0],Es[1]),yo||xn.lineEnd(),qa=!1):yo&&(xn.lineStart(),xn.point(ma,wi),qa=!1)}Va=ma,$n=wi,da=yo}return yi}}function ra(){var xt=0,It=0,nr=960,Jt=500,Cr,an,dn;return dn={stream:function(Tn){return Cr&&an===Tn?Cr:Cr=kn(xt,It,nr,Jt)(an=Tn)},extent:function(Tn){return arguments.length?(xt=+Tn[0][0],It=+Tn[0][1],nr=+Tn[1][0],Jt=+Tn[1][1],Cr=an=null,dn):[[xt,It],[nr,Jt]]}}}var oa=m(),Sa,ya,pr,vn={sphere:O,point:O,lineStart:$r,lineEnd:O,polygonStart:O,polygonEnd:O};function $r(){vn.point=Bn,vn.lineEnd=On}function On(){vn.point=vn.lineEnd=O}function Bn(xt,It){xt*=h,It*=h,Sa=xt,ya=T(It),pr=g(It),vn.point=ha}function ha(xt,It){xt*=h,It*=h;var nr=T(It),Jt=g(It),Cr=d(xt-Sa),an=g(Cr),dn=T(Cr),Tn=Jt*dn,Cn=pr*nr-ya*Jt*an,Gn=ya*nr+pr*Jt*an;oa.add(y(v(Tn*Tn+Cn*Cn),Gn)),Sa=xt,ya=nr,pr=Jt}function na(xt){return oa.reset(),j(xt,vn),+oa}var Vn=[null,null],fa={type:"LineString",coordinates:Vn};function ga(xt,It){return Vn[0]=xt,Vn[1]=It,na(fa)}var ur={Feature:function(xt,It){return on(xt.geometry,It)},FeatureCollection:function(xt,It){for(var nr=xt.features,Jt=-1,Cr=nr.length;++Jt<Cr;)if(on(nr[Jt].geometry,It))return!0;return!1}},Dr={Sphere:function(){return!0},Point:function(xt,It){return rn(xt.coordinates,It)},MultiPoint:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(rn(nr[Jt],It))return!0;return!1},LineString:function(xt,It){return gn(xt.coordinates,It)},MultiLineString:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(gn(nr[Jt],It))return!0;return!1},Polygon:function(xt,It){return wn(xt.coordinates,It)},MultiPolygon:function(xt,It){for(var nr=xt.coordinates,Jt=-1,Cr=nr.length;++Jt<Cr;)if(wn(nr[Jt],It))return!0;return!1},GeometryCollection:function(xt,It){for(var nr=xt.geometries,Jt=-1,Cr=nr.length;++Jt<Cr;)if(on(nr[Jt],It))return!0;return!1}};function on(xt,It){return xt&&Dr.hasOwnProperty(xt.type)?Dr[xt.type](xt,It):!1}function rn(xt,It){return ga(xt,It)===0}function gn(xt,It){for(var nr,Jt,Cr,an=0,dn=xt.length;an<dn;an++){if(Jt=ga(xt[an],It),Jt===0||an>0&&(Cr=ga(xt[an],xt[an-1]),Cr>0&&nr<=Cr&&Jt<=Cr&&(nr+Jt-Cr)*(1-Math.pow((nr-Jt)/Cr,2))<r*Cr))return!0;nr=Jt}return!1}function wn(xt,It){return!!fn(xt.map(pn),cr(It))}function pn(xt){return xt=xt.map(cr),xt.pop(),xt}function cr(xt){return[xt[0]*h,xt[1]*h]}function ar(xt,It){return(xt&&ur.hasOwnProperty(xt.type)?ur[xt.type]:on)(xt,It)}function Fr(xt,It,nr){var Jt=s.range(xt,It-a,nr).concat(It);return function(Cr){return Jt.map(function(an){return[Cr,an]})}}function Jr(xt,It,nr){var Jt=s.range(xt,It-a,nr).concat(It);return function(Cr){return Jt.map(function(an){return[an,Cr]})}}function En(){var xt,It,nr,Jt,Cr,an,dn,Tn,Cn=10,Gn=Cn,xn=90,In=360,Ln,jn,ea,Ba,Ra=2.5;function Ua(){return{type:"MultiLineString",coordinates:Va()}}function Va(){return s.range(A(Jt/xn)*xn,nr,xn).map(ea).concat(s.range(A(Tn/In)*In,dn,In).map(Ba)).concat(s.range(A(It/Cn)*Cn,xt,Cn).filter(function($n){return d($n%xn)>a}).map(Ln)).concat(s.range(A(an/Gn)*Gn,Cr,Gn).filter(function($n){return d($n%In)>a}).map(jn))}return Ua.lines=function(){return Va().map(function($n){return{type:"LineString",coordinates:$n}})},Ua.outline=function(){return{type:"Polygon",coordinates:[ea(Jt).concat(Ba(dn).slice(1),ea(nr).reverse().slice(1),Ba(Tn).reverse().slice(1))]}},Ua.extent=function($n){return arguments.length?Ua.extentMajor($n).extentMinor($n):Ua.extentMinor()},Ua.extentMajor=function($n){return arguments.length?(Jt=+$n[0][0],nr=+$n[1][0],Tn=+$n[0][1],dn=+$n[1][1],Jt>nr&&($n=Jt,Jt=nr,nr=$n),Tn>dn&&($n=Tn,Tn=dn,dn=$n),Ua.precision(Ra)):[[Jt,Tn],[nr,dn]]},Ua.extentMinor=function($n){return arguments.length?(It=+$n[0][0],xt=+$n[1][0],an=+$n[0][1],Cr=+$n[1][1],It>xt&&($n=It,It=xt,xt=$n),an>Cr&&($n=an,an=Cr,Cr=$n),Ua.precision(Ra)):[[It,an],[xt,Cr]]},Ua.step=function($n){return arguments.length?Ua.stepMajor($n).stepMinor($n):Ua.stepMinor()},Ua.stepMajor=function($n){return arguments.length?(xn=+$n[0],In=+$n[1],Ua):[xn,In]},Ua.stepMinor=function($n){return arguments.length?(Cn=+$n[0],Gn=+$n[1],Ua):[Cn,Gn]},Ua.precision=function($n){return arguments.length?(Ra=+$n,Ln=Fr(an,Cr,90),jn=Jr(It,xt,Ra),ea=Fr(Tn,dn,90),Ba=Jr(Jt,nr,Ra),Ua):Ra},Ua.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function Hn(){return En()()}function Jn(xt,It){var nr=xt[0]*h,Jt=xt[1]*h,Cr=It[0]*h,an=It[1]*h,dn=g(Jt),Tn=T(Jt),Cn=g(an),Gn=T(an),xn=dn*g(nr),In=dn*T(nr),Ln=Cn*g(Cr),jn=Cn*T(Cr),ea=2*k(v(P(an-Jt)+dn*Cn*P(Cr-nr))),Ba=T(ea),Ra=ea?function(Ua){var Va=T(Ua*=ea)/Ba,$n=T(ea-Ua)/Ba,da=$n*xn+Va*Ln,ja=$n*In+Va*jn,qa=$n*Tn+Va*Gn;return[y(ja,da)*c,y(qa,v(da*da+ja*ja))*c]}:function(){return[nr*c,Jt*c]};return Ra.distance=ea,Ra}function Zn(xt){return xt}var Un=m(),yn=m(),Dn,Yn,ua,Ya,Ca={point:O,lineStart:O,lineEnd:O,polygonStart:function(){Ca.lineStart=wl,Ca.lineEnd=Ws},polygonEnd:function(){Ca.lineStart=Ca.lineEnd=Ca.point=O,Un.add(d(yn)),yn.reset()},result:function(){var xt=Un/2;return Un.reset(),xt}};function wl(){Ca.point=Qo}function Qo(xt,It){Ca.point=vs,Dn=ua=xt,Yn=Ya=It}function vs(xt,It){yn.add(Ya*xt-ua*It),ua=xt,Ya=It}function Ws(){vs(Dn,Yn)}var io=1/0,zi=io,il=-io,ol=il,ps={point:Gl,lineStart:O,lineEnd:O,polygonStart:O,polygonEnd:O,result:function(){var xt=[[io,zi],[il,ol]];return il=ol=-(zi=io=1/0),xt}};function Gl(xt,It){xt<io&&(io=xt),xt>il&&(il=xt),It<zi&&(zi=It),It>ol&&(ol=It)}var ou=0,Xu=0,di=0,Tl=0,sl=0,Yi=0,Oo=0,su=0,zs=0,Fi,Wl,to,Ui,co={point:ro,lineStart:ws,lineEnd:ds,polygonStart:function(){co.lineStart=gf,co.lineEnd=ll},polygonEnd:function(){co.point=ro,co.lineStart=ws,co.lineEnd=ds},result:function(){var xt=zs?[Oo/zs,su/zs]:Yi?[Tl/Yi,sl/Yi]:di?[ou/di,Xu/di]:[NaN,NaN];return ou=Xu=di=Tl=sl=Yi=Oo=su=zs=0,xt}};function ro(xt,It){ou+=xt,Xu+=It,++di}function ws(){co.point=Al}function Al(xt,It){co.point=df,ro(to=xt,Ui=It)}function df(xt,It){var nr=xt-to,Jt=It-Ui,Cr=v(nr*nr+Jt*Jt);Tl+=Cr*(to+xt)/2,sl+=Cr*(Ui+It)/2,Yi+=Cr,ro(to=xt,Ui=It)}function ds(){co.point=ro}function gf(){co.point=No}function ll(){Uf(Fi,Wl)}function No(xt,It){co.point=Uf,ro(Fi=to=xt,Wl=Ui=It)}function Uf(xt,It){var nr=xt-to,Jt=It-Ui,Cr=v(nr*nr+Jt*Jt);Tl+=Cr*(to+xt)/2,sl+=Cr*(Ui+It)/2,Yi+=Cr,Cr=Ui*xt-to*It,Oo+=Cr*(to+xt),su+=Cr*(Ui+It),zs+=Cr*3,ro(to=xt,Ui=It)}function ul(xt){this._context=xt}ul.prototype={_radius:4.5,pointRadius:function(xt){return this._radius=xt,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(xt,It){switch(this._point){case 0:{this._context.moveTo(xt,It),this._point=1;break}case 1:{this._context.lineTo(xt,It);break}default:{this._context.moveTo(xt+this._radius,It),this._context.arc(xt,It,this._radius,0,o);break}}},result:O};var Ys=m(),Eu,Vf,Hf,Ml,Cu,js={point:O,lineStart:function(){js.point=Zu},lineEnd:function(){Eu&&Yl(Vf,Hf),js.point=O},polygonStart:function(){Eu=!0},polygonEnd:function(){Eu=null},result:function(){var xt=+Ys;return Ys.reset(),xt}};function Zu(xt,It){js.point=Yl,Vf=Ml=xt,Hf=Cu=It}function Yl(xt,It){Ml-=xt,Cu-=It,Ys.add(v(Ml*Ml+Cu*Cu)),Ml=xt,Cu=It}function Ku(){this._string=[]}Ku.prototype={_radius:4.5,_circle:mf(4.5),pointRadius:function(xt){return(xt=+xt)!==this._radius&&(this._radius=xt,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._string.push("Z"),this._point=NaN},point:function(xt,It){switch(this._point){case 0:{this._string.push("M",xt,",",It),this._point=1;break}case 1:{this._string.push("L",xt,",",It);break}default:{this._circle==null&&(this._circle=mf(this._radius)),this._string.push("M",xt,",",It,this._circle);break}}},result:function(){if(this._string.length){var xt=this._string.join("");return this._string=[],xt}else return null}};function mf(xt){return"m0,"+xt+"a"+xt+","+xt+" 0 1,1 0,"+-2*xt+"a"+xt+","+xt+" 0 1,1 0,"+2*xt+"z"}function Lu(xt,It){var nr=4.5,Jt,Cr;function an(dn){return dn&&(typeof nr=="function"&&Cr.pointRadius(+nr.apply(this,arguments)),j(dn,Jt(Cr))),Cr.result()}return an.area=function(dn){return j(dn,Jt(Ca)),Ca.result()},an.measure=function(dn){return j(dn,Jt(js)),js.result()},an.bounds=function(dn){return j(dn,Jt(ps)),ps.result()},an.centroid=function(dn){return j(dn,Jt(co)),co.result()},an.projection=function(dn){return arguments.length?(Jt=dn==null?(xt=null,Zn):(xt=dn).stream,an):xt},an.context=function(dn){return arguments.length?(Cr=dn==null?(It=null,new Ku):new ul(It=dn),typeof nr!="function"&&Cr.pointRadius(nr),an):It},an.pointRadius=function(dn){return arguments.length?(nr=typeof dn=="function"?dn:(Cr.pointRadius(+dn),+dn),an):nr},an.projection(xt).context(It)}function Gf(xt){return{stream:Sl(xt)}}function Sl(xt){return function(It){var nr=new Ju;for(var Jt in xt)nr[Jt]=xt[Jt];return nr.stream=It,nr}}function Ju(){}Ju.prototype={constructor:Ju,point:function(xt,It){this.stream.point(xt,It)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function Pu(xt,It,nr){var Jt=xt.clipExtent&&xt.clipExtent();return xt.scale(150).translate([0,0]),Jt!=null&&xt.clipExtent(null),j(nr,xt.stream(ps)),It(ps.result()),Jt!=null&&xt.clipExtent(Jt),xt}function Fs(xt,It,nr){return Pu(xt,function(Jt){var Cr=It[1][0]-It[0][0],an=It[1][1]-It[0][1],dn=Math.min(Cr/(Jt[1][0]-Jt[0][0]),an/(Jt[1][1]-Jt[0][1])),Tn=+It[0][0]+(Cr-dn*(Jt[1][0]+Jt[0][0]))/2,Cn=+It[0][1]+(an-dn*(Jt[1][1]+Jt[0][1]))/2;xt.scale(150*dn).translate([Tn,Cn])},nr)}function lu(xt,It,nr){return Fs(xt,[[0,0],It],nr)}function Qu(xt,It,nr){return Pu(xt,function(Jt){var Cr=+It,an=Cr/(Jt[1][0]-Jt[0][0]),dn=(Cr-an*(Jt[1][0]+Jt[0][0]))/2,Tn=-an*Jt[0][1];xt.scale(150*an).translate([dn,Tn])},nr)}function yf(xt,It,nr){return Pu(xt,function(Jt){var Cr=+It,an=Cr/(Jt[1][1]-Jt[0][1]),dn=-an*Jt[0][0],Tn=(Cr-an*(Jt[1][1]+Jt[0][1]))/2;xt.scale(150*an).translate([dn,Tn])},nr)}var xf=16,Ru=g(30*h);function Wf(xt,It){return+It?gs(xt,It):bf(xt)}function bf(xt){return Sl({point:function(It,nr){It=xt(It,nr),this.stream.point(It[0],It[1])}})}function gs(xt,It){function nr(Jt,Cr,an,dn,Tn,Cn,Gn,xn,In,Ln,jn,ea,Ba,Ra){var Ua=Gn-Jt,Va=xn-Cr,$n=Ua*Ua+Va*Va;if($n>4*It&&Ba--){var da=dn+Ln,ja=Tn+jn,qa=Cn+ea,yi=v(da*da+ja*ja+qa*qa),xi=k(qa/=yi),_i=d(d(qa)-1)<a||d(an-In)<a?(an+In)/2:y(ja,da),ki=xt(_i,xi),ui=ki[0],Eo=ki[1],oo=ui-Jt,Qa=Eo-Cr,ma=Va*oo-Ua*Qa;(ma*ma/$n>It||d((Ua*oo+Va*Qa)/$n-.5)>.3||dn*Ln+Tn*jn+Cn*ea<Ru)&&(nr(Jt,Cr,an,dn,Tn,Cn,ui,Eo,_i,da/=yi,ja/=yi,qa,Ba,Ra),Ra.point(ui,Eo),nr(ui,Eo,_i,da,ja,qa,Gn,xn,In,Ln,jn,ea,Ba,Ra))}}return function(Jt){var Cr,an,dn,Tn,Cn,Gn,xn,In,Ln,jn,ea,Ba,Ra={point:Ua,lineStart:Va,lineEnd:da,polygonStart:function(){Jt.polygonStart(),Ra.lineStart=ja},polygonEnd:function(){Jt.polygonEnd(),Ra.lineStart=Va}};function Ua(xi,_i){xi=xt(xi,_i),Jt.point(xi[0],xi[1])}function Va(){In=NaN,Ra.point=$n,Jt.lineStart()}function $n(xi,_i){var ki=ae([xi,_i]),ui=xt(xi,_i);nr(In,Ln,xn,jn,ea,Ba,In=ui[0],Ln=ui[1],xn=xi,jn=ki[0],ea=ki[1],Ba=ki[2],xf,Jt),Jt.point(In,Ln)}function da(){Ra.point=Ua,Jt.lineEnd()}function ja(){Va(),Ra.point=qa,Ra.lineEnd=yi}function qa(xi,_i){$n(Cr=xi,_i),an=In,dn=Ln,Tn=jn,Cn=ea,Gn=Ba,Ra.point=$n}function yi(){nr(In,Ln,xn,jn,ea,Ba,an,dn,Cr,Tn,Cn,Gn,xf,Jt),Ra.lineEnd=da,da()}return Ra}}var jl=Sl({point:function(xt,It){this.stream.point(xt*h,It*h)}});function Xl(xt){return Sl({point:function(It,nr){var Jt=xt(It,nr);return this.stream.point(Jt[0],Jt[1])}})}function $u(xt,It,nr,Jt,Cr){function an(dn,Tn){return dn*=Jt,Tn*=Cr,[It+xt*dn,nr-xt*Tn]}return an.invert=function(dn,Tn){return[(dn-It)/xt*Jt,(nr-Tn)/xt*Cr]},an}function Os(xt,It,nr,Jt,Cr,an){var dn=g(an),Tn=T(an),Cn=dn*xt,Gn=Tn*xt,xn=dn/xt,In=Tn/xt,Ln=(Tn*nr-dn*It)/xt,jn=(Tn*It+dn*nr)/xt;function ea(Ba,Ra){return Ba*=Jt,Ra*=Cr,[Cn*Ba-Gn*Ra+It,nr-Gn*Ba-Cn*Ra]}return ea.invert=function(Ba,Ra){return[Jt*(xn*Ba-In*Ra+Ln),Cr*(jn-In*Ba-xn*Ra)]},ea}function Bo(xt){return Du(function(){return xt})()}function Du(xt){var It,nr=150,Jt=480,Cr=250,an=0,dn=0,Tn=0,Cn=0,Gn=0,xn,In=0,Ln=1,jn=1,ea=null,Ba=er,Ra=null,Ua,Va,$n,da=Zn,ja=.5,qa,yi,xi,_i,ki;function ui(ma){return xi(ma[0]*h,ma[1]*h)}function Eo(ma){return ma=xi.invert(ma[0],ma[1]),ma&&[ma[0]*c,ma[1]*c]}ui.stream=function(ma){return _i&&ki===ma?_i:_i=jl(Xl(xn)(Ba(qa(da(ki=ma)))))},ui.preclip=function(ma){return arguments.length?(Ba=ma,ea=void 0,Qa()):Ba},ui.postclip=function(ma){return arguments.length?(da=ma,Ra=Ua=Va=$n=null,Qa()):da},ui.clipAngle=function(ma){return arguments.length?(Ba=+ma?Pr(ea=ma*h):(ea=null,er),Qa()):ea*c},ui.clipExtent=function(ma){return arguments.length?(da=ma==null?(Ra=Ua=Va=$n=null,Zn):kn(Ra=+ma[0][0],Ua=+ma[0][1],Va=+ma[1][0],$n=+ma[1][1]),Qa()):Ra==null?null:[[Ra,Ua],[Va,$n]]},ui.scale=function(ma){return arguments.length?(nr=+ma,oo()):nr},ui.translate=function(ma){return arguments.length?(Jt=+ma[0],Cr=+ma[1],oo()):[Jt,Cr]},ui.center=function(ma){return arguments.length?(an=ma[0]%360*h,dn=ma[1]%360*h,oo()):[an*c,dn*c]},ui.rotate=function(ma){return arguments.length?(Tn=ma[0]%360*h,Cn=ma[1]%360*h,Gn=ma.length>2?ma[2]%360*h:0,oo()):[Tn*c,Cn*c,Gn*c]},ui.angle=function(ma){return arguments.length?(In=ma%360*h,oo()):In*c},ui.reflectX=function(ma){return arguments.length?(Ln=ma?-1:1,oo()):Ln<0},ui.reflectY=function(ma){return arguments.length?(jn=ma?-1:1,oo()):jn<0},ui.precision=function(ma){return arguments.length?(qa=Wf(yi,ja=ma*ma),Qa()):v(ja)},ui.fitExtent=function(ma,wi){return Fs(ui,ma,wi)},ui.fitSize=function(ma,wi){return lu(ui,ma,wi)},ui.fitWidth=function(ma,wi){return Qu(ui,ma,wi)},ui.fitHeight=function(ma,wi){return yf(ui,ma,wi)};function oo(){var ma=Os(nr,0,0,Ln,jn,In).apply(null,It(an,dn)),wi=(In?Os:$u)(nr,Jt-ma[0],Cr-ma[1],Ln,jn,In);return xn=pt(Tn,Cn,Gn),yi=ot(It,wi),xi=ot(xn,yi),qa=Wf(yi,ja),Qa()}function Qa(){return _i=ki=null,ui}return function(){return It=xt.apply(this,arguments),ui.invert=It.invert&&Eo,oo()}}function Xs(xt){var It=0,nr=n/3,Jt=Du(xt),Cr=Jt(It,nr);return Cr.parallels=function(an){return arguments.length?Jt(It=an[0]*h,nr=an[1]*h):[It*c,nr*c]},Cr}function Zs(xt){var It=g(xt);function nr(Jt,Cr){return[Jt*It,T(Cr)/It]}return nr.invert=function(Jt,Cr){return[Jt/It,k(Cr*It)]},nr}function go(xt,It){var nr=T(xt),Jt=(nr+T(It))/2;if(d(Jt)<a)return Zs(xt);var Cr=1+nr*(2*Jt-nr),an=v(Cr)/Jt;function dn(Tn,Cn){var Gn=v(Cr-2*Jt*T(Cn))/Jt;return[Gn*T(Tn*=Jt),an-Gn*g(Tn)]}return dn.invert=function(Tn,Cn){var Gn=an-Cn,xn=y(Tn,d(Gn))*w(Gn);return Gn*Jt<0&&(xn-=n*w(Tn)*w(Gn)),[xn/Jt,k((Cr-(Tn*Tn+Gn*Gn)*Jt*Jt)/(2*Jt))]},dn}function uu(){return Xs(go).scale(155.424).center([0,33.6442])}function fu(){return uu().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function kl(xt){var It=xt.length;return{point:function(nr,Jt){for(var Cr=-1;++Cr<It;)xt[Cr].point(nr,Jt)},sphere:function(){for(var nr=-1;++nr<It;)xt[nr].sphere()},lineStart:function(){for(var nr=-1;++nr<It;)xt[nr].lineStart()},lineEnd:function(){for(var nr=-1;++nr<It;)xt[nr].lineEnd()},polygonStart:function(){for(var nr=-1;++nr<It;)xt[nr].polygonStart()},polygonEnd:function(){for(var nr=-1;++nr<It;)xt[nr].polygonEnd()}}}function Ns(){var xt,It,nr=fu(),Jt,Cr=uu().rotate([154,0]).center([-2,58.5]).parallels([55,65]),an,dn=uu().rotate([157,0]).center([-3,19.9]).parallels([8,18]),Tn,Cn,Gn={point:function(Ln,jn){Cn=[Ln,jn]}};function xn(Ln){var jn=Ln[0],ea=Ln[1];return Cn=null,Jt.point(jn,ea),Cn||(an.point(jn,ea),Cn)||(Tn.point(jn,ea),Cn)}xn.invert=function(Ln){var jn=nr.scale(),ea=nr.translate(),Ba=(Ln[0]-ea[0])/jn,Ra=(Ln[1]-ea[1])/jn;return(Ra>=.12&&Ra<.234&&Ba>=-.425&&Ba<-.214?Cr:Ra>=.166&&Ra<.234&&Ba>=-.214&&Ba<-.115?dn:nr).invert(Ln)},xn.stream=function(Ln){return xt&&It===Ln?xt:xt=kl([nr.stream(It=Ln),Cr.stream(Ln),dn.stream(Ln)])},xn.precision=function(Ln){return arguments.length?(nr.precision(Ln),Cr.precision(Ln),dn.precision(Ln),In()):nr.precision()},xn.scale=function(Ln){return arguments.length?(nr.scale(Ln),Cr.scale(Ln*.35),dn.scale(Ln),xn.translate(nr.translate())):nr.scale()},xn.translate=function(Ln){if(!arguments.length)return nr.translate();var jn=nr.scale(),ea=+Ln[0],Ba=+Ln[1];return Jt=nr.translate(Ln).clipExtent([[ea-.455*jn,Ba-.238*jn],[ea+.455*jn,Ba+.238*jn]]).stream(Gn),an=Cr.translate([ea-.307*jn,Ba+.201*jn]).clipExtent([[ea-.425*jn+a,Ba+.12*jn+a],[ea-.214*jn-a,Ba+.234*jn-a]]).stream(Gn),Tn=dn.translate([ea-.205*jn,Ba+.212*jn]).clipExtent([[ea-.214*jn+a,Ba+.166*jn+a],[ea-.115*jn-a,Ba+.234*jn-a]]).stream(Gn),In()},xn.fitExtent=function(Ln,jn){return Fs(xn,Ln,jn)},xn.fitSize=function(Ln,jn){return lu(xn,Ln,jn)},xn.fitWidth=function(Ln,jn){return Qu(xn,Ln,jn)},xn.fitHeight=function(Ln,jn){return yf(xn,Ln,jn)};function In(){return xt=It=null,xn}return xn.scale(1070)}function cu(xt){return function(It,nr){var Jt=g(It),Cr=g(nr),an=xt(Jt*Cr);return[an*Cr*T(It),an*T(nr)]}}function Zl(xt){return function(It,nr){var Jt=v(It*It+nr*nr),Cr=xt(Jt),an=T(Cr),dn=g(Cr);return[y(It*an,Jt*dn),k(Jt&&nr*an/Jt)]}}var Iu=cu(function(xt){return v(2/(1+xt))});Iu.invert=Zl(function(xt){return 2*k(xt/2)});function hu(){return Bo(Iu).scale(124.75).clipAngle(180-.001)}var El=cu(function(xt){return(xt=S(xt))&&xt/T(xt)});El.invert=Zl(function(xt){return xt});function Yf(){return Bo(El).scale(79.4188).clipAngle(180-.001)}function Ts(xt,It){return[xt,M(L((f+It)/2))]}Ts.invert=function(xt,It){return[xt,2*p(b(It))-f]};function dc(){return qu(Ts).scale(961/o)}function qu(xt){var It=Bo(xt),nr=It.center,Jt=It.scale,Cr=It.translate,an=It.clipExtent,dn=null,Tn,Cn,Gn;It.scale=function(In){return arguments.length?(Jt(In),xn()):Jt()},It.translate=function(In){return arguments.length?(Cr(In),xn()):Cr()},It.center=function(In){return arguments.length?(nr(In),xn()):nr()},It.clipExtent=function(In){return arguments.length?(In==null?dn=Tn=Cn=Gn=null:(dn=+In[0][0],Tn=+In[0][1],Cn=+In[1][0],Gn=+In[1][1]),xn()):dn==null?null:[[dn,Tn],[Cn,Gn]]};function xn(){var In=n*Jt(),Ln=It(xr(It.rotate()).invert([0,0]));return an(dn==null?[[Ln[0]-In,Ln[1]-In],[Ln[0]+In,Ln[1]+In]]:xt===Ts?[[Math.max(Ln[0]-In,dn),Tn],[Math.min(Ln[0]+In,Cn),Gn]]:[[dn,Math.max(Ln[1]-In,Tn)],[Cn,Math.min(Ln[1]+In,Gn)]])}return xn()}function Kl(xt){return L((f+xt)/2)}function vu(xt,It){var nr=g(xt),Jt=xt===It?T(xt):M(nr/g(It))/M(Kl(It)/Kl(xt)),Cr=nr*_(Kl(xt),Jt)/Jt;if(!Jt)return Ts;function an(dn,Tn){Cr>0?Tn<-f+a&&(Tn=-f+a):Tn>f-a&&(Tn=f-a);var Cn=Cr/_(Kl(Tn),Jt);return[Cn*T(Jt*dn),Cr-Cn*g(Jt*dn)]}return an.invert=function(dn,Tn){var Cn=Cr-Tn,Gn=w(Jt)*v(dn*dn+Cn*Cn),xn=y(dn,d(Cn))*w(Cn);return Cn*Jt<0&&(xn-=n*w(dn)*w(Cn)),[xn/Jt,2*p(_(Cr/Gn,1/Jt))-f]},an}function Cl(){return Xs(vu).scale(109.5).parallels([30,30])}function pu(xt,It){return[xt,It]}pu.invert=pu;function _f(){return Bo(pu).scale(152.63)}function wf(xt,It){var nr=g(xt),Jt=xt===It?T(xt):(nr-g(It))/(It-xt),Cr=nr/Jt+xt;if(d(Jt)<a)return pu;function an(dn,Tn){var Cn=Cr-Tn,Gn=Jt*dn;return[Cn*T(Gn),Cr-Cn*g(Gn)]}return an.invert=function(dn,Tn){var Cn=Cr-Tn,Gn=y(dn,d(Cn))*w(Cn);return Cn*Jt<0&&(Gn-=n*w(dn)*w(Cn)),[Gn/Jt,Cr-w(Jt)*v(dn*dn+Cn*Cn)]},an}function gc(){return Xs(wf).scale(131.154).center([0,13.9389])}var Oi=1.340264,Jl=-.081106,Ll=893e-6,ms=.003796,As=v(3)/2,du=12;function mo(xt,It){var nr=k(As*T(It)),Jt=nr*nr,Cr=Jt*Jt*Jt;return[xt*g(nr)/(As*(Oi+3*Jl*Jt+Cr*(7*Ll+9*ms*Jt))),nr*(Oi+Jl*Jt+Cr*(Ll+ms*Jt))]}mo.invert=function(xt,It){for(var nr=It,Jt=nr*nr,Cr=Jt*Jt*Jt,an=0,dn,Tn,Cn;an<du&&(Tn=nr*(Oi+Jl*Jt+Cr*(Ll+ms*Jt))-It,Cn=Oi+3*Jl*Jt+Cr*(7*Ll+9*ms*Jt),nr-=dn=Tn/Cn,Jt=nr*nr,Cr=Jt*Jt*Jt,!(d(dn)<r));++an);return[As*xt*(Oi+3*Jl*Jt+Cr*(7*Ll+9*ms*Jt))/g(nr),k(T(nr)/As)]};function Tf(){return Bo(mo).scale(177.158)}function Ms(xt,It){var nr=g(It),Jt=g(xt)*nr;return[nr*T(xt)/Jt,T(It)/Jt]}Ms.invert=Zl(p);function fl(){return Bo(Ms).scale(144.049).clipAngle(60)}function cl(){var xt=1,It=0,nr=0,Jt=1,Cr=1,an=0,dn,Tn,Cn=null,Gn,xn,In,Ln=1,jn=1,ea=Sl({point:function(da,ja){var qa=$n([da,ja]);this.stream.point(qa[0],qa[1])}}),Ba=Zn,Ra,Ua;function Va(){return Ln=xt*Jt,jn=xt*Cr,Ra=Ua=null,$n}function $n(da){var ja=da[0]*Ln,qa=da[1]*jn;if(an){var yi=qa*dn-ja*Tn;ja=ja*dn+qa*Tn,qa=yi}return[ja+It,qa+nr]}return $n.invert=function(da){var ja=da[0]-It,qa=da[1]-nr;if(an){var yi=qa*dn+ja*Tn;ja=ja*dn-qa*Tn,qa=yi}return[ja/Ln,qa/jn]},$n.stream=function(da){return Ra&&Ua===da?Ra:Ra=ea(Ba(Ua=da))},$n.postclip=function(da){return arguments.length?(Ba=da,Cn=Gn=xn=In=null,Va()):Ba},$n.clipExtent=function(da){return arguments.length?(Ba=da==null?(Cn=Gn=xn=In=null,Zn):kn(Cn=+da[0][0],Gn=+da[0][1],xn=+da[1][0],In=+da[1][1]),Va()):Cn==null?null:[[Cn,Gn],[xn,In]]},$n.scale=function(da){return arguments.length?(xt=+da,Va()):xt},$n.translate=function(da){return arguments.length?(It=+da[0],nr=+da[1],Va()):[It,nr]},$n.angle=function(da){return arguments.length?(an=da%360*h,Tn=T(an),dn=g(an),Va()):an*c},$n.reflectX=function(da){return arguments.length?(Jt=da?-1:1,Va()):Jt<0},$n.reflectY=function(da){return arguments.length?(Cr=da?-1:1,Va()):Cr<0},$n.fitExtent=function(da,ja){return Fs($n,da,ja)},$n.fitSize=function(da,ja){return lu($n,da,ja)},$n.fitWidth=function(da,ja){return Qu($n,da,ja)},$n.fitHeight=function(da,ja){return yf($n,da,ja)},$n}function Ks(xt,It){var nr=It*It,Jt=nr*nr;return[xt*(.8707-.131979*nr+Jt*(-.013791+Jt*(.003971*nr-.001529*Jt))),It*(1.007226+nr*(.015085+Jt*(-.044475+.028874*nr-.005916*Jt)))]}Ks.invert=function(xt,It){var nr=It,Jt=25,Cr;do{var an=nr*nr,dn=an*an;nr-=Cr=(nr*(1.007226+an*(.015085+dn*(-.044475+.028874*an-.005916*dn)))-It)/(1.007226+an*(.015085*3+dn*(-.044475*7+.028874*9*an-.005916*11*dn)))}while(d(Cr)>a&&--Jt>0);return[xt/(.8707+(an=nr*nr)*(-.131979+an*(-.013791+an*an*an*(.003971-.001529*an)))),nr]};function Ss(){return Bo(Ks).scale(175.295)}function ji(xt,It){return[g(It)*T(xt),T(It)]}ji.invert=Zl(k);function Uo(){return Bo(ji).scale(249.5).clipAngle(90+a)}function ks(xt,It){var nr=g(It),Jt=1+g(xt)*nr;return[nr*T(xt)/Jt,T(It)/Jt]}ks.invert=Zl(function(xt){return 2*p(xt)});function Af(){return Bo(ks).scale(250).clipAngle(142)}function zu(xt,It){return[M(L((f+It)/2)),-xt]}zu.invert=function(xt,It){return[-It,2*p(b(xt))-f]};function Mf(){var xt=qu(zu),It=xt.center,nr=xt.rotate;return xt.center=function(Jt){return arguments.length?It([-Jt[1],Jt[0]]):(Jt=It(),[Jt[1],-Jt[0]])},xt.rotate=function(Jt){return arguments.length?nr([Jt[0],Jt[1],Jt.length>2?Jt[2]+90:90]):(Jt=nr(),[Jt[0],Jt[1],Jt[2]-90])},nr([0,0,90]).scale(159.155)}u.geoAlbers=fu,u.geoAlbersUsa=Ns,u.geoArea=K,u.geoAzimuthalEqualArea=hu,u.geoAzimuthalEqualAreaRaw=Iu,u.geoAzimuthalEquidistant=Yf,u.geoAzimuthalEquidistantRaw=El,u.geoBounds=it,u.geoCentroid=je,u.geoCircle=Rr,u.geoClipAntimeridian=er,u.geoClipCircle=Pr,u.geoClipExtent=ra,u.geoClipRectangle=kn,u.geoConicConformal=Cl,u.geoConicConformalRaw=vu,u.geoConicEqualArea=uu,u.geoConicEqualAreaRaw=go,u.geoConicEquidistant=gc,u.geoConicEquidistantRaw=wf,u.geoContains=ar,u.geoDistance=ga,u.geoEqualEarth=Tf,u.geoEqualEarthRaw=mo,u.geoEquirectangular=_f,u.geoEquirectangularRaw=pu,u.geoGnomonic=fl,u.geoGnomonicRaw=Ms,u.geoGraticule=En,u.geoGraticule10=Hn,u.geoIdentity=cl,u.geoInterpolate=Jn,u.geoLength=na,u.geoMercator=dc,u.geoMercatorRaw=Ts,u.geoNaturalEarth1=Ss,u.geoNaturalEarth1Raw=Ks,u.geoOrthographic=Uo,u.geoOrthographicRaw=ji,u.geoPath=Lu,u.geoProjection=Bo,u.geoProjectionMutator=Du,u.geoRotation=xr,u.geoStereographic=Af,u.geoStereographicRaw=ks,u.geoStream=j,u.geoTransform=Gf,u.geoTransverseMercator=Mf,u.geoTransverseMercatorRaw=zu,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-array":107}],115:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(Qe,Ce){return Qe.parent===Ce.parent?1:2}function m(Qe){return Qe.reduce(x,0)/Qe.length}function x(Qe,Ce){return Qe+Ce.x}function t(Qe){return 1+Qe.reduce(i,0)}function i(Qe,Ce){return Math.max(Qe,Ce.y)}function a(Qe){for(var Ce;Ce=Qe.children;)Qe=Ce[0];return Qe}function r(Qe){for(var Ce;Ce=Qe.children;)Qe=Ce[Ce.length-1];return Qe}function n(){var Qe=s,Ce=1,Xe=1,rt=!1;function ut(Pt){var St,Nt=0;Pt.eachAfter(function(gt){var Et=gt.children;Et?(gt.x=m(Et),gt.y=t(Et)):(gt.x=St?Nt+=Qe(gt,St):0,gt.y=0,St=gt)});var jt=a(Pt),Ot=r(Pt),Kt=jt.x-Qe(jt,Ot)/2,Je=Ot.x+Qe(Ot,jt)/2;return Pt.eachAfter(rt?function(gt){gt.x=(gt.x-Pt.x)*Ce,gt.y=(Pt.y-gt.y)*Xe}:function(gt){gt.x=(gt.x-Kt)/(Je-Kt)*Ce,gt.y=(1-(Pt.y?gt.y/Pt.y:1))*Xe})}return ut.separation=function(Pt){return arguments.length?(Qe=Pt,ut):Qe},ut.size=function(Pt){return arguments.length?(rt=!1,Ce=+Pt[0],Xe=+Pt[1],ut):rt?null:[Ce,Xe]},ut.nodeSize=function(Pt){return arguments.length?(rt=!0,Ce=+Pt[0],Xe=+Pt[1],ut):rt?[Ce,Xe]:null},ut}function f(Qe){var Ce=0,Xe=Qe.children,rt=Xe&&Xe.length;if(!rt)Ce=1;else for(;--rt>=0;)Ce+=Xe[rt].value;Qe.value=Ce}function l(){return this.eachAfter(f)}function o(Qe){var Ce=this,Xe,rt=[Ce],ut,Pt,St;do for(Xe=rt.reverse(),rt=[];Ce=Xe.pop();)if(Qe(Ce),ut=Ce.children,ut)for(Pt=0,St=ut.length;Pt<St;++Pt)rt.push(ut[Pt]);while(rt.length);return this}function c(Qe){for(var Ce=this,Xe=[Ce],rt,ut;Ce=Xe.pop();)if(Qe(Ce),rt=Ce.children,rt)for(ut=rt.length-1;ut>=0;--ut)Xe.push(rt[ut]);return this}function h(Qe){for(var Ce=this,Xe=[Ce],rt=[],ut,Pt,St;Ce=Xe.pop();)if(rt.push(Ce),ut=Ce.children,ut)for(Pt=0,St=ut.length;Pt<St;++Pt)Xe.push(ut[Pt]);for(;Ce=rt.pop();)Qe(Ce);return this}function d(Qe){return this.eachAfter(function(Ce){for(var Xe=+Qe(Ce.data)||0,rt=Ce.children,ut=rt&&rt.length;--ut>=0;)Xe+=rt[ut].value;Ce.value=Xe})}function p(Qe){return this.eachBefore(function(Ce){Ce.children&&Ce.children.sort(Qe)})}function y(Qe){for(var Ce=this,Xe=g(Ce,Qe),rt=[Ce];Ce!==Xe;)Ce=Ce.parent,rt.push(Ce);for(var ut=rt.length;Qe!==Xe;)rt.splice(ut,0,Qe),Qe=Qe.parent;return rt}function g(Qe,Ce){if(Qe===Ce)return Qe;var Xe=Qe.ancestors(),rt=Ce.ancestors(),ut=null;for(Qe=Xe.pop(),Ce=rt.pop();Qe===Ce;)ut=Qe,Qe=Xe.pop(),Ce=rt.pop();return ut}function A(){for(var Qe=this,Ce=[Qe];Qe=Qe.parent;)Ce.push(Qe);return Ce}function b(){var Qe=[];return this.each(function(Ce){Qe.push(Ce)}),Qe}function M(){var Qe=[];return this.eachBefore(function(Ce){Ce.children||Qe.push(Ce)}),Qe}function _(){var Qe=this,Ce=[];return Qe.each(function(Xe){Xe!==Qe&&Ce.push({source:Xe.parent,target:Xe})}),Ce}function T(Qe,Ce){var Xe=new k(Qe),rt=+Qe.value&&(Xe.value=Qe.value),ut,Pt=[Xe],St,Nt,jt,Ot;for(Ce==null&&(Ce=v);ut=Pt.pop();)if(rt&&(ut.value=+ut.data.value),(Nt=Ce(ut.data))&&(Ot=Nt.length))for(ut.children=new Array(Ot),jt=Ot-1;jt>=0;--jt)Pt.push(St=ut.children[jt]=new k(Nt[jt])),St.parent=ut,St.depth=ut.depth+1;return Xe.eachBefore(S)}function w(){return T(this).eachBefore(L)}function v(Qe){return Qe.children}function L(Qe){Qe.data=Qe.data.data}function S(Qe){var Ce=0;do Qe.height=Ce;while((Qe=Qe.parent)&&Qe.height<++Ce)}function k(Qe){this.data=Qe,this.depth=this.height=0,this.parent=null}k.prototype=T.prototype={constructor:k,count:l,each:o,eachAfter:h,eachBefore:c,sum:d,sort:p,path:y,ancestors:A,descendants:b,leaves:M,links:_,copy:w};var P=Array.prototype.slice;function O(Qe){for(var Ce=Qe.length,Xe,rt;Ce;)rt=Math.random()*Ce--|0,Xe=Qe[Ce],Qe[Ce]=Qe[rt],Qe[rt]=Xe;return Qe}function F(Qe){for(var Ce=0,Xe=(Qe=O(P.call(Qe))).length,rt=[],ut,Pt;Ce<Xe;)ut=Qe[Ce],Pt&&U(Pt,ut)?++Ce:(Pt=j(rt=I(rt,ut)),Ce=0);return Pt}function I(Qe,Ce){var Xe,rt;if(B(Ce,Qe))return[Ce];for(Xe=0;Xe<Qe.length;++Xe)if(D(Ce,Qe[Xe])&&B(ee(Qe[Xe],Ce),Qe))return[Qe[Xe],Ce];for(Xe=0;Xe<Qe.length-1;++Xe)for(rt=Xe+1;rt<Qe.length;++rt)if(D(ee(Qe[Xe],Qe[rt]),Ce)&&D(ee(Qe[Xe],Ce),Qe[rt])&&D(ee(Qe[rt],Ce),Qe[Xe])&&B(q(Qe[Xe],Qe[rt],Ce),Qe))return[Qe[Xe],Qe[rt],Ce];throw new Error}function D(Qe,Ce){var Xe=Qe.r-Ce.r,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return Xe<0||Xe*Xe<rt*rt+ut*ut}function U(Qe,Ce){var Xe=Qe.r-Ce.r+1e-6,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return Xe>0&&Xe*Xe>rt*rt+ut*ut}function B(Qe,Ce){for(var Xe=0;Xe<Ce.length;++Xe)if(!U(Qe,Ce[Xe]))return!1;return!0}function j(Qe){switch(Qe.length){case 1:return Z(Qe[0]);case 2:return ee(Qe[0],Qe[1]);case 3:return q(Qe[0],Qe[1],Qe[2])}}function Z(Qe){return{x:Qe.x,y:Qe.y,r:Qe.r}}function ee(Qe,Ce){var Xe=Qe.x,rt=Qe.y,ut=Qe.r,Pt=Ce.x,St=Ce.y,Nt=Ce.r,jt=Pt-Xe,Ot=St-rt,Kt=Nt-ut,Je=Math.sqrt(jt*jt+Ot*Ot);return{x:(Xe+Pt+jt/Je*Kt)/2,y:(rt+St+Ot/Je*Kt)/2,r:(Je+ut+Nt)/2}}function q(Qe,Ce,Xe){var rt=Qe.x,ut=Qe.y,Pt=Qe.r,St=Ce.x,Nt=Ce.y,jt=Ce.r,Ot=Xe.x,Kt=Xe.y,Je=Xe.r,gt=rt-St,Et=rt-Ot,rr=ut-Nt,vr=ut-Kt,or=jt-Pt,dr=Je-Pt,Lr=rt*rt+ut*ut-Pt*Pt,kr=Lr-St*St-Nt*Nt+jt*jt,tr=Lr-Ot*Ot-Kt*Kt+Je*Je,Or=Et*rr-gt*vr,et=(rr*tr-vr*kr)/(Or*2)-rt,we=(vr*or-rr*dr)/Or,Se=(Et*kr-gt*tr)/(Or*2)-ut,De=(gt*dr-Et*or)/Or,je=we*we+De*De-1,$e=2*(Pt+et*we+Se*De),ot=et*et+Se*Se-Pt*Pt,st=-(je?($e+Math.sqrt($e*$e-4*je*ot))/(2*je):ot/$e);return{x:rt+et+we*st,y:ut+Se+De*st,r:st}}function W(Qe,Ce,Xe){var rt=Qe.x-Ce.x,ut,Pt,St=Qe.y-Ce.y,Nt,jt,Ot=rt*rt+St*St;Ot?(Pt=Ce.r+Xe.r,Pt*=Pt,jt=Qe.r+Xe.r,jt*=jt,Pt>jt?(ut=(Ot+jt-Pt)/(2*Ot),Nt=Math.sqrt(Math.max(0,jt/Ot-ut*ut)),Xe.x=Qe.x-ut*rt-Nt*St,Xe.y=Qe.y-ut*St+Nt*rt):(ut=(Ot+Pt-jt)/(2*Ot),Nt=Math.sqrt(Math.max(0,Pt/Ot-ut*ut)),Xe.x=Ce.x+ut*rt-Nt*St,Xe.y=Ce.y+ut*St+Nt*rt)):(Xe.x=Ce.x+Xe.r,Xe.y=Ce.y)}function J(Qe,Ce){var Xe=Qe.r+Ce.r-1e-6,rt=Ce.x-Qe.x,ut=Ce.y-Qe.y;return Xe>0&&Xe*Xe>rt*rt+ut*ut}function le(Qe){var Ce=Qe._,Xe=Qe.next._,rt=Ce.r+Xe.r,ut=(Ce.x*Xe.r+Xe.x*Ce.r)/rt,Pt=(Ce.y*Xe.r+Xe.y*Ce.r)/rt;return ut*ut+Pt*Pt}function fe(Qe){this._=Qe,this.next=null,this.previous=null}function se(Qe){if(!(ut=Qe.length))return 0;var Ce,Xe,rt,ut,Pt,St,Nt,jt,Ot,Kt,Je;if(Ce=Qe[0],Ce.x=0,Ce.y=0,!(ut>1))return Ce.r;if(Xe=Qe[1],Ce.x=-Xe.r,Xe.x=Ce.r,Xe.y=0,!(ut>2))return Ce.r+Xe.r;W(Xe,Ce,rt=Qe[2]),Ce=new fe(Ce),Xe=new fe(Xe),rt=new fe(rt),Ce.next=rt.previous=Xe,Xe.next=Ce.previous=rt,rt.next=Xe.previous=Ce;e:for(Nt=3;Nt<ut;++Nt){W(Ce._,Xe._,rt=Qe[Nt]),rt=new fe(rt),jt=Xe.next,Ot=Ce.previous,Kt=Xe._.r,Je=Ce._.r;do if(Kt<=Je){if(J(jt._,rt._)){Xe=jt,Ce.next=Xe,Xe.previous=Ce,--Nt;continue e}Kt+=jt._.r,jt=jt.next}else{if(J(Ot._,rt._)){Ce=Ot,Ce.next=Xe,Xe.previous=Ce,--Nt;continue e}Je+=Ot._.r,Ot=Ot.previous}while(jt!==Ot.next);for(rt.previous=Ce,rt.next=Xe,Ce.next=Xe.previous=Xe=rt,Pt=le(Ce);(rt=rt.next)!==Xe;)(St=le(rt))<Pt&&(Ce=rt,Pt=St);Xe=Ce.next}for(Ce=[Xe._],rt=Xe;(rt=rt.next)!==Xe;)Ce.push(rt._);for(rt=F(Ce),Nt=0;Nt<ut;++Nt)Ce=Qe[Nt],Ce.x-=rt.x,Ce.y-=rt.y;return rt.r}function H(Qe){return se(Qe),Qe}function Y(Qe){return Qe==null?null:ne(Qe)}function ne(Qe){if(typeof Qe!="function")throw new Error;return Qe}function te(){return 0}function K(Qe){return function(){return Qe}}function $(Qe){return Math.sqrt(Qe.value)}function ae(){var Qe=null,Ce=1,Xe=1,rt=te;function ut(Pt){return Pt.x=Ce/2,Pt.y=Xe/2,Qe?Pt.eachBefore(ie(Qe)).eachAfter(oe(rt,.5)).eachBefore(ue(1)):Pt.eachBefore(ie($)).eachAfter(oe(te,1)).eachAfter(oe(rt,Pt.r/Math.min(Ce,Xe))).eachBefore(ue(Math.min(Ce,Xe)/(2*Pt.r))),Pt}return ut.radius=function(Pt){return arguments.length?(Qe=Y(Pt),ut):Qe},ut.size=function(Pt){return arguments.length?(Ce=+Pt[0],Xe=+Pt[1],ut):[Ce,Xe]},ut.padding=function(Pt){return arguments.length?(rt=typeof Pt=="function"?Pt:K(+Pt),ut):rt},ut}function ie(Qe){return function(Ce){Ce.children||(Ce.r=Math.max(0,+Qe(Ce)||0))}}function oe(Qe,Ce){return function(Xe){if(rt=Xe.children){var rt,ut,Pt=rt.length,St=Qe(Xe)*Ce||0,Nt;if(St)for(ut=0;ut<Pt;++ut)rt[ut].r+=St;if(Nt=se(rt),St)for(ut=0;ut<Pt;++ut)rt[ut].r-=St;Xe.r=Nt+St}}}function ue(Qe){return function(Ce){var Xe=Ce.parent;Ce.r*=Qe,Xe&&(Ce.x=Xe.x+Qe*Ce.x,Ce.y=Xe.y+Qe*Ce.y)}}function ye(Qe){Qe.x0=Math.round(Qe.x0),Qe.y0=Math.round(Qe.y0),Qe.x1=Math.round(Qe.x1),Qe.y1=Math.round(Qe.y1)}function ce(Qe,Ce,Xe,rt,ut){for(var Pt=Qe.children,St,Nt=-1,jt=Pt.length,Ot=Qe.value&&(rt-Ce)/Qe.value;++Nt<jt;)St=Pt[Nt],St.y0=Xe,St.y1=ut,St.x0=Ce,St.x1=Ce+=St.value*Ot}function me(){var Qe=1,Ce=1,Xe=0,rt=!1;function ut(St){var Nt=St.height+1;return St.x0=St.y0=Xe,St.x1=Qe,St.y1=Ce/Nt,St.eachBefore(Pt(Ce,Nt)),rt&&St.eachBefore(ye),St}function Pt(St,Nt){return function(jt){jt.children&&ce(jt,jt.x0,St*(jt.depth+1)/Nt,jt.x1,St*(jt.depth+2)/Nt);var Ot=jt.x0,Kt=jt.y0,Je=jt.x1-Xe,gt=jt.y1-Xe;Je<Ot&&(Ot=Je=(Ot+Je)/2),gt<Kt&&(Kt=gt=(Kt+gt)/2),jt.x0=Ot,jt.y0=Kt,jt.x1=Je,jt.y1=gt}}return ut.round=function(St){return arguments.length?(rt=!!St,ut):rt},ut.size=function(St){return arguments.length?(Qe=+St[0],Ce=+St[1],ut):[Qe,Ce]},ut.padding=function(St){return arguments.length?(Xe=+St,ut):Xe},ut}var xe="$",ke={depth:-1},Ae={};function Oe(Qe){return Qe.id}function He(Qe){return Qe.parentId}function Ge(){var Qe=Oe,Ce=He;function Xe(rt){var ut,Pt,St=rt.length,Nt,jt,Ot,Kt=new Array(St),Je,gt,Et={};for(Pt=0;Pt<St;++Pt)ut=rt[Pt],Ot=Kt[Pt]=new k(ut),(Je=Qe(ut,Pt,rt))!=null&&(Je+="")&&(gt=xe+(Ot.id=Je),Et[gt]=gt in Et?Ae:Ot);for(Pt=0;Pt<St;++Pt)if(Ot=Kt[Pt],Je=Ce(rt[Pt],Pt,rt),Je==null||!(Je+="")){if(Nt)throw new Error("multiple roots");Nt=Ot}else{if(jt=Et[xe+Je],!jt)throw new Error("missing: "+Je);if(jt===Ae)throw new Error("ambiguous: "+Je);jt.children?jt.children.push(Ot):jt.children=[Ot],Ot.parent=jt}if(!Nt)throw new Error("no root");if(Nt.parent=ke,Nt.eachBefore(function(rr){rr.depth=rr.parent.depth+1,--St}).eachBefore(S),Nt.parent=null,St>0)throw new Error("cycle");return Nt}return Xe.id=function(rt){return arguments.length?(Qe=ne(rt),Xe):Qe},Xe.parentId=function(rt){return arguments.length?(Ce=ne(rt),Xe):Ce},Xe}function _e(Qe,Ce){return Qe.parent===Ce.parent?1:2}function Re(Qe){var Ce=Qe.children;return Ce?Ce[0]:Qe.t}function We(Qe){var Ce=Qe.children;return Ce?Ce[Ce.length-1]:Qe.t}function qe(Qe,Ce,Xe){var rt=Xe/(Ce.i-Qe.i);Ce.c-=rt,Ce.s+=Xe,Qe.c+=rt,Ce.z+=Xe,Ce.m+=Xe}function Ue(Qe){for(var Ce=0,Xe=0,rt=Qe.children,ut=rt.length,Pt;--ut>=0;)Pt=rt[ut],Pt.z+=Ce,Pt.m+=Ce,Ce+=Pt.s+(Xe+=Pt.c)}function Ie(Qe,Ce,Xe){return Qe.a.parent===Ce.parent?Qe.a:Xe}function Ve(Qe,Ce){this._=Qe,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=Ce}Ve.prototype=Object.create(k.prototype);function dt(Qe){for(var Ce=new Ve(Qe,0),Xe,rt=[Ce],ut,Pt,St,Nt;Xe=rt.pop();)if(Pt=Xe._.children)for(Xe.children=new Array(Nt=Pt.length),St=Nt-1;St>=0;--St)rt.push(ut=Xe.children[St]=new Ve(Pt[St],St)),ut.parent=Xe;return(Ce.parent=new Ve(null,0)).children=[Ce],Ce}function Rt(){var Qe=_e,Ce=1,Xe=1,rt=null;function ut(Ot){var Kt=dt(Ot);if(Kt.eachAfter(Pt),Kt.parent.m=-Kt.z,Kt.eachBefore(St),rt)Ot.eachBefore(jt);else{var Je=Ot,gt=Ot,Et=Ot;Ot.eachBefore(function(Lr){Lr.x<Je.x&&(Je=Lr),Lr.x>gt.x&&(gt=Lr),Lr.depth>Et.depth&&(Et=Lr)});var rr=Je===gt?1:Qe(Je,gt)/2,vr=rr-Je.x,or=Ce/(gt.x+rr+vr),dr=Xe/(Et.depth||1);Ot.eachBefore(function(Lr){Lr.x=(Lr.x+vr)*or,Lr.y=Lr.depth*dr})}return Ot}function Pt(Ot){var Kt=Ot.children,Je=Ot.parent.children,gt=Ot.i?Je[Ot.i-1]:null;if(Kt){Ue(Ot);var Et=(Kt[0].z+Kt[Kt.length-1].z)/2;gt?(Ot.z=gt.z+Qe(Ot._,gt._),Ot.m=Ot.z-Et):Ot.z=Et}else gt&&(Ot.z=gt.z+Qe(Ot._,gt._));Ot.parent.A=Nt(Ot,gt,Ot.parent.A||Je[0])}function St(Ot){Ot._.x=Ot.z+Ot.parent.m,Ot.m+=Ot.parent.m}function Nt(Ot,Kt,Je){if(Kt){for(var gt=Ot,Et=Ot,rr=Kt,vr=gt.parent.children[0],or=gt.m,dr=Et.m,Lr=rr.m,kr=vr.m,tr;rr=We(rr),gt=Re(gt),rr&&gt;)vr=Re(vr),Et=We(Et),Et.a=Ot,tr=rr.z+Lr-gt.z-or+Qe(rr._,gt._),tr>0&&(qe(Ie(rr,Ot,Je),Ot,tr),or+=tr,dr+=tr),Lr+=rr.m,or+=gt.m,kr+=vr.m,dr+=Et.m;rr&&!We(Et)&&(Et.t=rr,Et.m+=Lr-dr),gt&&!Re(vr)&&(vr.t=gt,vr.m+=or-kr,Je=Ot)}return Je}function jt(Ot){Ot.x*=Ce,Ot.y=Ot.depth*Xe}return ut.separation=function(Ot){return arguments.length?(Qe=Ot,ut):Qe},ut.size=function(Ot){return arguments.length?(rt=!1,Ce=+Ot[0],Xe=+Ot[1],ut):rt?null:[Ce,Xe]},ut.nodeSize=function(Ot){return arguments.length?(rt=!0,Ce=+Ot[0],Xe=+Ot[1],ut):rt?[Ce,Xe]:null},ut}function Gt(Qe,Ce,Xe,rt,ut){for(var Pt=Qe.children,St,Nt=-1,jt=Pt.length,Ot=Qe.value&&(ut-Xe)/Qe.value;++Nt<jt;)St=Pt[Nt],St.x0=Ce,St.x1=rt,St.y0=Xe,St.y1=Xe+=St.value*Ot}var kt=(1+Math.sqrt(5))/2;function zt(Qe,Ce,Xe,rt,ut,Pt){for(var St=[],Nt=Ce.children,jt,Ot,Kt=0,Je=0,gt=Nt.length,Et,rr,vr=Ce.value,or,dr,Lr,kr,tr,Or,et;Kt<gt;){Et=ut-Xe,rr=Pt-rt;do or=Nt[Je++].value;while(!or&&Je<gt);for(dr=Lr=or,Or=Math.max(rr/Et,Et/rr)/(vr*Qe),et=or*or*Or,tr=Math.max(Lr/et,et/dr);Je<gt;++Je){if(or+=Ot=Nt[Je].value,Ot<dr&&(dr=Ot),Ot>Lr&&(Lr=Ot),et=or*or*Or,kr=Math.max(Lr/et,et/dr),kr>tr){or-=Ot;break}tr=kr}St.push(jt={value:or,dice:Et<rr,children:Nt.slice(Kt,Je)}),jt.dice?ce(jt,Xe,rt,ut,vr?rt+=rr*or/vr:Pt):Gt(jt,Xe,rt,vr?Xe+=Et*or/vr:ut,Pt),vr-=or,Kt=Je}return St}var Bt=function Qe(Ce){function Xe(rt,ut,Pt,St,Nt){zt(Ce,rt,ut,Pt,St,Nt)}return Xe.ratio=function(rt){return Qe((rt=+rt)>1?rt:1)},Xe}(kt);function Lt(){var Qe=Bt,Ce=!1,Xe=1,rt=1,ut=[0],Pt=te,St=te,Nt=te,jt=te,Ot=te;function Kt(gt){return gt.x0=gt.y0=0,gt.x1=Xe,gt.y1=rt,gt.eachBefore(Je),ut=[0],Ce&&gt.eachBefore(ye),gt}function Je(gt){var Et=ut[gt.depth],rr=gt.x0+Et,vr=gt.y0+Et,or=gt.x1-Et,dr=gt.y1-Et;or<rr&&(rr=or=(rr+or)/2),dr<vr&&(vr=dr=(vr+dr)/2),gt.x0=rr,gt.y0=vr,gt.x1=or,gt.y1=dr,gt.children&&(Et=ut[gt.depth+1]=Pt(gt)/2,rr+=Ot(gt)-Et,vr+=St(gt)-Et,or-=Nt(gt)-Et,dr-=jt(gt)-Et,or<rr&&(rr=or=(rr+or)/2),dr<vr&&(vr=dr=(vr+dr)/2),Qe(gt,rr,vr,or,dr))}return Kt.round=function(gt){return arguments.length?(Ce=!!gt,Kt):Ce},Kt.size=function(gt){return arguments.length?(Xe=+gt[0],rt=+gt[1],Kt):[Xe,rt]},Kt.tile=function(gt){return arguments.length?(Qe=ne(gt),Kt):Qe},Kt.padding=function(gt){return arguments.length?Kt.paddingInner(gt).paddingOuter(gt):Kt.paddingInner()},Kt.paddingInner=function(gt){return arguments.length?(Pt=typeof gt=="function"?gt:K(+gt),Kt):Pt},Kt.paddingOuter=function(gt){return arguments.length?Kt.paddingTop(gt).paddingRight(gt).paddingBottom(gt).paddingLeft(gt):Kt.paddingTop()},Kt.paddingTop=function(gt){return arguments.length?(St=typeof gt=="function"?gt:K(+gt),Kt):St},Kt.paddingRight=function(gt){return arguments.length?(Nt=typeof gt=="function"?gt:K(+gt),Kt):Nt},Kt.paddingBottom=function(gt){return arguments.length?(jt=typeof gt=="function"?gt:K(+gt),Kt):jt},Kt.paddingLeft=function(gt){return arguments.length?(Ot=typeof gt=="function"?gt:K(+gt),Kt):Ot},Kt}function Mt(Qe,Ce,Xe,rt,ut){var Pt=Qe.children,St,Nt=Pt.length,jt,Ot=new Array(Nt+1);for(Ot[0]=jt=St=0;St<Nt;++St)Ot[St+1]=jt+=Pt[St].value;Kt(0,Nt,Qe.value,Ce,Xe,rt,ut);function Kt(Je,gt,Et,rr,vr,or,dr){if(Je>=gt-1){var Lr=Pt[Je];Lr.x0=rr,Lr.y0=vr,Lr.x1=or,Lr.y1=dr;return}for(var kr=Ot[Je],tr=Et/2+kr,Or=Je+1,et=gt-1;Or<et;){var we=Or+et>>>1;Ot[we]<tr?Or=we+1:et=we}tr-Ot[Or-1]<Ot[Or]-tr&&Je+1<Or&&--Or;var Se=Ot[Or]-kr,De=Et-Se;if(or-rr>dr-vr){var je=(rr*De+or*Se)/Et;Kt(Je,Or,Se,rr,vr,je,dr),Kt(Or,gt,De,je,vr,or,dr)}else{var $e=(vr*De+dr*Se)/Et;Kt(Je,Or,Se,rr,vr,or,$e),Kt(Or,gt,De,rr,$e,or,dr)}}}function it(Qe,Ce,Xe,rt,ut){(Qe.depth&1?Gt:ce)(Qe,Ce,Xe,rt,ut)}var ht=function Qe(Ce){function Xe(rt,ut,Pt,St,Nt){if((jt=rt._squarify)&&jt.ratio===Ce)for(var jt,Ot,Kt,Je,gt=-1,Et,rr=jt.length,vr=rt.value;++gt<rr;){for(Ot=jt[gt],Kt=Ot.children,Je=Ot.value=0,Et=Kt.length;Je<Et;++Je)Ot.value+=Kt[Je].value;Ot.dice?ce(Ot,ut,Pt,St,Pt+=(Nt-Pt)*Ot.value/vr):Gt(Ot,ut,Pt,ut+=(St-ut)*Ot.value/vr,Nt),vr-=Ot.value}else rt._squarify=jt=zt(Ce,rt,ut,Pt,St,Nt),jt.ratio=Ce}return Xe.ratio=function(rt){return Qe((rt=+rt)>1?rt:1)},Xe}(kt);u.cluster=n,u.hierarchy=T,u.pack=ae,u.packEnclose=F,u.packSiblings=H,u.partition=me,u.stratify=Ge,u.tree=Rt,u.treemap=Lt,u.treemapBinary=Mt,u.treemapDice=ce,u.treemapResquarify=ht,u.treemapSlice=Gt,u.treemapSliceDice=it,u.treemapSquarify=Bt,Object.defineProperty(u,"__esModule",{value:!0})})},{}],116:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-color")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(_e,Re,We,qe,Ue){var Ie=_e*_e,Ve=Ie*_e;return((1-3*_e+3*Ie-Ve)*Re+(4-6*Ie+3*Ve)*We+(1+3*_e+3*Ie-3*Ve)*qe+Ve*Ue)/6}function x(_e){var Re=_e.length-1;return function(We){var qe=We<=0?We=0:We>=1?(We=1,Re-1):Math.floor(We*Re),Ue=_e[qe],Ie=_e[qe+1],Ve=qe>0?_e[qe-1]:2*Ue-Ie,dt=qe<Re-1?_e[qe+2]:2*Ie-Ue;return m((We-qe/Re)*Re,Ve,Ue,Ie,dt)}}function t(_e){var Re=_e.length;return function(We){var qe=Math.floor(((We%=1)<0?++We:We)*Re),Ue=_e[(qe+Re-1)%Re],Ie=_e[qe%Re],Ve=_e[(qe+1)%Re],dt=_e[(qe+2)%Re];return m((We-qe/Re)*Re,Ue,Ie,Ve,dt)}}function i(_e){return function(){return _e}}function a(_e,Re){return function(We){return _e+We*Re}}function r(_e,Re,We){return _e=Math.pow(_e,We),Re=Math.pow(Re,We)-_e,We=1/We,function(qe){return Math.pow(_e+qe*Re,We)}}function n(_e,Re){var We=Re-_e;return We?a(_e,We>180||We<-180?We-360*Math.round(We/360):We):i(isNaN(_e)?Re:_e)}function f(_e){return(_e=+_e)==1?l:function(Re,We){return We-Re?r(Re,We,_e):i(isNaN(Re)?We:Re)}}function l(_e,Re){var We=Re-_e;return We?a(_e,We):i(isNaN(_e)?Re:_e)}var o=function _e(Re){var We=f(Re);function qe(Ue,Ie){var Ve=We((Ue=s.rgb(Ue)).r,(Ie=s.rgb(Ie)).r),dt=We(Ue.g,Ie.g),Rt=We(Ue.b,Ie.b),Gt=l(Ue.opacity,Ie.opacity);return function(kt){return Ue.r=Ve(kt),Ue.g=dt(kt),Ue.b=Rt(kt),Ue.opacity=Gt(kt),Ue+""}}return qe.gamma=_e,qe}(1);function c(_e){return function(Re){var We=Re.length,qe=new Array(We),Ue=new Array(We),Ie=new Array(We),Ve,dt;for(Ve=0;Ve<We;++Ve)dt=s.rgb(Re[Ve]),qe[Ve]=dt.r||0,Ue[Ve]=dt.g||0,Ie[Ve]=dt.b||0;return qe=_e(qe),Ue=_e(Ue),Ie=_e(Ie),dt.opacity=1,function(Rt){return dt.r=qe(Rt),dt.g=Ue(Rt),dt.b=Ie(Rt),dt+""}}}var h=c(x),d=c(t);function p(_e,Re){Re||(Re=[]);var We=_e?Math.min(Re.length,_e.length):0,qe=Re.slice(),Ue;return function(Ie){for(Ue=0;Ue<We;++Ue)qe[Ue]=_e[Ue]*(1-Ie)+Re[Ue]*Ie;return qe}}function y(_e){return ArrayBuffer.isView(_e)&&!(_e instanceof DataView)}function g(_e,Re){return(y(Re)?p:A)(_e,Re)}function A(_e,Re){var We=Re?Re.length:0,qe=_e?Math.min(We,_e.length):0,Ue=new Array(qe),Ie=new Array(We),Ve;for(Ve=0;Ve<qe;++Ve)Ue[Ve]=k(_e[Ve],Re[Ve]);for(;Ve<We;++Ve)Ie[Ve]=Re[Ve];return function(dt){for(Ve=0;Ve<qe;++Ve)Ie[Ve]=Ue[Ve](dt);return Ie}}function b(_e,Re){var We=new Date;return _e=+_e,Re=+Re,function(qe){return We.setTime(_e*(1-qe)+Re*qe),We}}function M(_e,Re){return _e=+_e,Re=+Re,function(We){return _e*(1-We)+Re*We}}function _(_e,Re){var We={},qe={},Ue;(_e===null||typeof _e!="object")&&(_e={}),(Re===null||typeof Re!="object")&&(Re={});for(Ue in Re)Ue in _e?We[Ue]=k(_e[Ue],Re[Ue]):qe[Ue]=Re[Ue];return function(Ie){for(Ue in We)qe[Ue]=We[Ue](Ie);return qe}}var T=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,w=new RegExp(T.source,"g");function v(_e){return function(){return _e}}function L(_e){return function(Re){return _e(Re)+""}}function S(_e,Re){var We=T.lastIndex=w.lastIndex=0,qe,Ue,Ie,Ve=-1,dt=[],Rt=[];for(_e=_e+"",Re=Re+"";(qe=T.exec(_e))&&(Ue=w.exec(Re));)(Ie=Ue.index)>We&&(Ie=Re.slice(We,Ie),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),(qe=qe[0])===(Ue=Ue[0])?dt[Ve]?dt[Ve]+=Ue:dt[++Ve]=Ue:(dt[++Ve]=null,Rt.push({i:Ve,x:M(qe,Ue)})),We=w.lastIndex;return We<Re.length&&(Ie=Re.slice(We),dt[Ve]?dt[Ve]+=Ie:dt[++Ve]=Ie),dt.length<2?Rt[0]?L(Rt[0].x):v(Re):(Re=Rt.length,function(Gt){for(var kt=0,zt;kt<Re;++kt)dt[(zt=Rt[kt]).i]=zt.x(Gt);return dt.join("")})}function k(_e,Re){var We=typeof Re,qe;return Re==null||We==="boolean"?i(Re):(We==="number"?M:We==="string"?(qe=s.color(Re))?(Re=qe,o):S:Re instanceof s.color?o:Re instanceof Date?b:y(Re)?p:Array.isArray(Re)?A:typeof Re.valueOf!="function"&&typeof Re.toString!="function"||isNaN(Re)?_:M)(_e,Re)}function P(_e){var Re=_e.length;return function(We){return _e[Math.max(0,Math.min(Re-1,Math.floor(We*Re)))]}}function O(_e,Re){var We=n(+_e,+Re);return function(qe){var Ue=We(qe);return Ue-360*Math.floor(Ue/360)}}function F(_e,Re){return _e=+_e,Re=+Re,function(We){return Math.round(_e*(1-We)+Re*We)}}var I=180/Math.PI,D={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function U(_e,Re,We,qe,Ue,Ie){var Ve,dt,Rt;return(Ve=Math.sqrt(_e*_e+Re*Re))&&(_e/=Ve,Re/=Ve),(Rt=_e*We+Re*qe)&&(We-=_e*Rt,qe-=Re*Rt),(dt=Math.sqrt(We*We+qe*qe))&&(We/=dt,qe/=dt,Rt/=dt),_e*qe<Re*We&&(_e=-_e,Re=-Re,Rt=-Rt,Ve=-Ve),{translateX:Ue,translateY:Ie,rotate:Math.atan2(Re,_e)*I,skewX:Math.atan(Rt)*I,scaleX:Ve,scaleY:dt}}var B,j,Z,ee;function q(_e){return _e==="none"?D:(B||(B=document.createElement("DIV"),j=document.documentElement,Z=document.defaultView),B.style.transform=_e,_e=Z.getComputedStyle(j.appendChild(B),null).getPropertyValue("transform"),j.removeChild(B),_e=_e.slice(7,-1).split(","),U(+_e[0],+_e[1],+_e[2],+_e[3],+_e[4],+_e[5]))}function W(_e){return _e==null||(ee||(ee=document.createElementNS("http://www.w3.org/2000/svg","g")),ee.setAttribute("transform",_e),!(_e=ee.transform.baseVal.consolidate()))?D:(_e=_e.matrix,U(_e.a,_e.b,_e.c,_e.d,_e.e,_e.f))}function J(_e,Re,We,qe){function Ue(Gt){return Gt.length?Gt.pop()+" ":""}function Ie(Gt,kt,zt,Bt,Lt,Mt){if(Gt!==zt||kt!==Bt){var it=Lt.push("translate(",null,Re,null,We);Mt.push({i:it-4,x:M(Gt,zt)},{i:it-2,x:M(kt,Bt)})}else(zt||Bt)&&Lt.push("translate("+zt+Re+Bt+We)}function Ve(Gt,kt,zt,Bt){Gt!==kt?(Gt-kt>180?kt+=360:kt-Gt>180&&(Gt+=360),Bt.push({i:zt.push(Ue(zt)+"rotate(",null,qe)-2,x:M(Gt,kt)})):kt&&zt.push(Ue(zt)+"rotate("+kt+qe)}function dt(Gt,kt,zt,Bt){Gt!==kt?Bt.push({i:zt.push(Ue(zt)+"skewX(",null,qe)-2,x:M(Gt,kt)}):kt&&zt.push(Ue(zt)+"skewX("+kt+qe)}function Rt(Gt,kt,zt,Bt,Lt,Mt){if(Gt!==zt||kt!==Bt){var it=Lt.push(Ue(Lt)+"scale(",null,",",null,")");Mt.push({i:it-4,x:M(Gt,zt)},{i:it-2,x:M(kt,Bt)})}else(zt!==1||Bt!==1)&&Lt.push(Ue(Lt)+"scale("+zt+","+Bt+")")}return function(Gt,kt){var zt=[],Bt=[];return Gt=_e(Gt),kt=_e(kt),Ie(Gt.translateX,Gt.translateY,kt.translateX,kt.translateY,zt,Bt),Ve(Gt.rotate,kt.rotate,zt,Bt),dt(Gt.skewX,kt.skewX,zt,Bt),Rt(Gt.scaleX,Gt.scaleY,kt.scaleX,kt.scaleY,zt,Bt),Gt=kt=null,function(Lt){for(var Mt=-1,it=Bt.length,ht;++Mt<it;)zt[(ht=Bt[Mt]).i]=ht.x(Lt);return zt.join("")}}}var le=J(q,"px, ","px)","deg)"),fe=J(W,", ",")",")"),se=Math.SQRT2,H=2,Y=4,ne=1e-12;function te(_e){return((_e=Math.exp(_e))+1/_e)/2}function K(_e){return((_e=Math.exp(_e))-1/_e)/2}function $(_e){return((_e=Math.exp(2*_e))-1)/(_e+1)}function ae(_e,Re){var We=_e[0],qe=_e[1],Ue=_e[2],Ie=Re[0],Ve=Re[1],dt=Re[2],Rt=Ie-We,Gt=Ve-qe,kt=Rt*Rt+Gt*Gt,zt,Bt;if(kt<ne)Bt=Math.log(dt/Ue)/se,zt=function(Ce){return[We+Ce*Rt,qe+Ce*Gt,Ue*Math.exp(se*Ce*Bt)]};else{var Lt=Math.sqrt(kt),Mt=(dt*dt-Ue*Ue+Y*kt)/(2*Ue*H*Lt),it=(dt*dt-Ue*Ue-Y*kt)/(2*dt*H*Lt),ht=Math.log(Math.sqrt(Mt*Mt+1)-Mt),Qe=Math.log(Math.sqrt(it*it+1)-it);Bt=(Qe-ht)/se,zt=function(Ce){var Xe=Ce*Bt,rt=te(ht),ut=Ue/(H*Lt)*(rt*$(se*Xe+ht)-K(ht));return[We+ut*Rt,qe+ut*Gt,Ue*rt/te(se*Xe+ht)]}}return zt.duration=Bt*1e3,zt}function ie(_e){return function(Re,We){var qe=_e((Re=s.hsl(Re)).h,(We=s.hsl(We)).h),Ue=l(Re.s,We.s),Ie=l(Re.l,We.l),Ve=l(Re.opacity,We.opacity);return function(dt){return Re.h=qe(dt),Re.s=Ue(dt),Re.l=Ie(dt),Re.opacity=Ve(dt),Re+""}}}var oe=ie(n),ue=ie(l);function ye(_e,Re){var We=l((_e=s.lab(_e)).l,(Re=s.lab(Re)).l),qe=l(_e.a,Re.a),Ue=l(_e.b,Re.b),Ie=l(_e.opacity,Re.opacity);return function(Ve){return _e.l=We(Ve),_e.a=qe(Ve),_e.b=Ue(Ve),_e.opacity=Ie(Ve),_e+""}}function ce(_e){return function(Re,We){var qe=_e((Re=s.hcl(Re)).h,(We=s.hcl(We)).h),Ue=l(Re.c,We.c),Ie=l(Re.l,We.l),Ve=l(Re.opacity,We.opacity);return function(dt){return Re.h=qe(dt),Re.c=Ue(dt),Re.l=Ie(dt),Re.opacity=Ve(dt),Re+""}}}var me=ce(n),xe=ce(l);function ke(_e){return function Re(We){We=+We;function qe(Ue,Ie){var Ve=_e((Ue=s.cubehelix(Ue)).h,(Ie=s.cubehelix(Ie)).h),dt=l(Ue.s,Ie.s),Rt=l(Ue.l,Ie.l),Gt=l(Ue.opacity,Ie.opacity);return function(kt){return Ue.h=Ve(kt),Ue.s=dt(kt),Ue.l=Rt(Math.pow(kt,We)),Ue.opacity=Gt(kt),Ue+""}}return qe.gamma=Re,qe}(1)}var Ae=ke(n),Oe=ke(l);function He(_e,Re){for(var We=0,qe=Re.length-1,Ue=Re[0],Ie=new Array(qe<0?0:qe);We<qe;)Ie[We]=_e(Ue,Ue=Re[++We]);return function(Ve){var dt=Math.max(0,Math.min(qe-1,Math.floor(Ve*=qe)));return Ie[dt](Ve-dt)}}function Ge(_e,Re){for(var We=new Array(Re),qe=0;qe<Re;++qe)We[qe]=_e(qe/(Re-1));return We}u.interpolate=k,u.interpolateArray=g,u.interpolateBasis=x,u.interpolateBasisClosed=t,u.interpolateCubehelix=Ae,u.interpolateCubehelixLong=Oe,u.interpolateDate=b,u.interpolateDiscrete=P,u.interpolateHcl=me,u.interpolateHclLong=xe,u.interpolateHsl=oe,u.interpolateHslLong=ue,u.interpolateHue=O,u.interpolateLab=ye,u.interpolateNumber=M,u.interpolateNumberArray=p,u.interpolateObject=_,u.interpolateRgb=o,u.interpolateRgbBasis=h,u.interpolateRgbBasisClosed=d,u.interpolateRound=F,u.interpolateString=S,u.interpolateTransformCss=le,u.interpolateTransformSvg=fe,u.interpolateZoom=ae,u.piecewise=He,u.quantize=Ge,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-color":109}],117:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s=Math.PI,m=2*s,x=1e-6,t=m-x;function i(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function a(){return new i}i.prototype=a.prototype={constructor:i,moveTo:function(r,n){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(r,n){this._+="L"+(this._x1=+r)+","+(this._y1=+n)},quadraticCurveTo:function(r,n,f,l){this._+="Q"+ +r+","+ +n+","+(this._x1=+f)+","+(this._y1=+l)},bezierCurveTo:function(r,n,f,l,o,c){this._+="C"+ +r+","+ +n+","+ +f+","+ +l+","+(this._x1=+o)+","+(this._y1=+c)},arcTo:function(r,n,f,l,o){r=+r,n=+n,f=+f,l=+l,o=+o;var c=this._x1,h=this._y1,d=f-r,p=l-n,y=c-r,g=h-n,A=y*y+g*g;if(o<0)throw new Error("negative radius: "+o);if(this._x1===null)this._+="M"+(this._x1=r)+","+(this._y1=n);else if(A>x)if(!(Math.abs(g*d-p*y)>x)||!o)this._+="L"+(this._x1=r)+","+(this._y1=n);else{var b=f-c,M=l-h,_=d*d+p*p,T=b*b+M*M,w=Math.sqrt(_),v=Math.sqrt(A),L=o*Math.tan((s-Math.acos((_+A-T)/(2*w*v)))/2),S=L/v,k=L/w;Math.abs(S-1)>x&&(this._+="L"+(r+S*y)+","+(n+S*g)),this._+="A"+o+","+o+",0,0,"+ +(g*b>y*M)+","+(this._x1=r+k*d)+","+(this._y1=n+k*p)}},arc:function(r,n,f,l,o,c){r=+r,n=+n,f=+f,c=!!c;var h=f*Math.cos(l),d=f*Math.sin(l),p=r+h,y=n+d,g=1^c,A=c?l-o:o-l;if(f<0)throw new Error("negative radius: "+f);this._x1===null?this._+="M"+p+","+y:(Math.abs(this._x1-p)>x||Math.abs(this._y1-y)>x)&&(this._+="L"+p+","+y),!!f&&(A<0&&(A=A%m+m),A>t?this._+="A"+f+","+f+",0,1,"+g+","+(r-h)+","+(n-d)+"A"+f+","+f+",0,1,"+g+","+(this._x1=p)+","+(this._y1=y):A>x&&(this._+="A"+f+","+f+",0,"+ +(A>=s)+","+g+","+(this._x1=r+f*Math.cos(o))+","+(this._y1=n+f*Math.sin(o))))},rect:function(r,n,f,l){this._+="M"+(this._x0=this._x1=+r)+","+(this._y0=this._y1=+n)+"h"+ +f+"v"+ +l+"h"+-f+"Z"},toString:function(){return this._}},u.path=a,Object.defineProperty(u,"__esModule",{value:!0})})},{}],118:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){function s(w){var v=+this._x.call(null,w),L=+this._y.call(null,w);return m(this.cover(v,L),v,L,w)}function m(w,v,L,S){if(isNaN(v)||isNaN(L))return w;var k,P=w._root,O={data:S},F=w._x0,I=w._y0,D=w._x1,U=w._y1,B,j,Z,ee,q,W,J,le;if(!P)return w._root=O,w;for(;P.length;)if((q=v>=(B=(F+D)/2))?F=B:D=B,(W=L>=(j=(I+U)/2))?I=j:U=j,k=P,!(P=P[J=W<<1|q]))return k[J]=O,w;if(Z=+w._x.call(null,P.data),ee=+w._y.call(null,P.data),v===Z&&L===ee)return O.next=P,k?k[J]=O:w._root=O,w;do k=k?k[J]=new Array(4):w._root=new Array(4),(q=v>=(B=(F+D)/2))?F=B:D=B,(W=L>=(j=(I+U)/2))?I=j:U=j;while((J=W<<1|q)==(le=(ee>=j)<<1|Z>=B));return k[le]=P,k[J]=O,w}function x(w){var v,L,S=w.length,k,P,O=new Array(S),F=new Array(S),I=1/0,D=1/0,U=-1/0,B=-1/0;for(L=0;L<S;++L)isNaN(k=+this._x.call(null,v=w[L]))||isNaN(P=+this._y.call(null,v))||(O[L]=k,F[L]=P,k<I&&(I=k),k>U&&(U=k),P<D&&(D=P),P>B&&(B=P));if(I>U||D>B)return this;for(this.cover(I,D).cover(U,B),L=0;L<S;++L)m(this,O[L],F[L],w[L]);return this}function t(w,v){if(isNaN(w=+w)||isNaN(v=+v))return this;var L=this._x0,S=this._y0,k=this._x1,P=this._y1;if(isNaN(L))k=(L=Math.floor(w))+1,P=(S=Math.floor(v))+1;else{for(var O=k-L,F=this._root,I,D;L>w||w>=k||S>v||v>=P;)switch(D=(v<S)<<1|w<L,I=new Array(4),I[D]=F,F=I,O*=2,D){case 0:k=L+O,P=S+O;break;case 1:L=k-O,P=S+O;break;case 2:k=L+O,S=P-O;break;case 3:L=k-O,S=P-O;break}this._root&&this._root.length&&(this._root=F)}return this._x0=L,this._y0=S,this._x1=k,this._y1=P,this}function i(){var w=[];return this.visit(function(v){if(!v.length)do w.push(v.data);while(v=v.next)}),w}function a(w){return arguments.length?this.cover(+w[0][0],+w[0][1]).cover(+w[1][0],+w[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function r(w,v,L,S,k){this.node=w,this.x0=v,this.y0=L,this.x1=S,this.y1=k}function n(w,v,L){var S,k=this._x0,P=this._y0,O,F,I,D,U=this._x1,B=this._y1,j=[],Z=this._root,ee,q;for(Z&&j.push(new r(Z,k,P,U,B)),L==null?L=1/0:(k=w-L,P=v-L,U=w+L,B=v+L,L*=L);ee=j.pop();)if(!(!(Z=ee.node)||(O=ee.x0)>U||(F=ee.y0)>B||(I=ee.x1)<k||(D=ee.y1)<P))if(Z.length){var W=(O+I)/2,J=(F+D)/2;j.push(new r(Z[3],W,J,I,D),new r(Z[2],O,J,W,D),new r(Z[1],W,F,I,J),new r(Z[0],O,F,W,J)),(q=(v>=J)<<1|w>=W)&&(ee=j[j.length-1],j[j.length-1]=j[j.length-1-q],j[j.length-1-q]=ee)}else{var le=w-+this._x.call(null,Z.data),fe=v-+this._y.call(null,Z.data),se=le*le+fe*fe;if(se<L){var H=Math.sqrt(L=se);k=w-H,P=v-H,U=w+H,B=v+H,S=Z.data}}return S}function f(w){if(isNaN(U=+this._x.call(null,w))||isNaN(B=+this._y.call(null,w)))return this;var v,L=this._root,S,k,P,O=this._x0,F=this._y0,I=this._x1,D=this._y1,U,B,j,Z,ee,q,W,J;if(!L)return this;if(L.length)for(;;){if((ee=U>=(j=(O+I)/2))?O=j:I=j,(q=B>=(Z=(F+D)/2))?F=Z:D=Z,v=L,!(L=L[W=q<<1|ee]))return this;if(!L.length)break;(v[W+1&3]||v[W+2&3]||v[W+3&3])&&(S=v,J=W)}for(;L.data!==w;)if(k=L,!(L=L.next))return this;return(P=L.next)&&delete L.next,k?(P?k.next=P:delete k.next,this):v?(P?v[W]=P:delete v[W],(L=v[0]||v[1]||v[2]||v[3])&&L===(v[3]||v[2]||v[1]||v[0])&&!L.length&&(S?S[J]=L:this._root=L),this):(this._root=P,this)}function l(w){for(var v=0,L=w.length;v<L;++v)this.remove(w[v]);return this}function o(){return this._root}function c(){var w=0;return this.visit(function(v){if(!v.length)do++w;while(v=v.next)}),w}function h(w){var v=[],L,S=this._root,k,P,O,F,I;for(S&&v.push(new r(S,this._x0,this._y0,this._x1,this._y1));L=v.pop();)if(!w(S=L.node,P=L.x0,O=L.y0,F=L.x1,I=L.y1)&&S.length){var D=(P+F)/2,U=(O+I)/2;(k=S[3])&&v.push(new r(k,D,U,F,I)),(k=S[2])&&v.push(new r(k,P,U,D,I)),(k=S[1])&&v.push(new r(k,D,O,F,U)),(k=S[0])&&v.push(new r(k,P,O,D,U))}return this}function d(w){var v=[],L=[],S;for(this._root&&v.push(new r(this._root,this._x0,this._y0,this._x1,this._y1));S=v.pop();){var k=S.node;if(k.length){var P,O=S.x0,F=S.y0,I=S.x1,D=S.y1,U=(O+I)/2,B=(F+D)/2;(P=k[0])&&v.push(new r(P,O,F,U,B)),(P=k[1])&&v.push(new r(P,U,F,I,B)),(P=k[2])&&v.push(new r(P,O,B,U,D)),(P=k[3])&&v.push(new r(P,U,B,I,D))}L.push(S)}for(;S=L.pop();)w(S.node,S.x0,S.y0,S.x1,S.y1);return this}function p(w){return w[0]}function y(w){return arguments.length?(this._x=w,this):this._x}function g(w){return w[1]}function A(w){return arguments.length?(this._y=w,this):this._y}function b(w,v,L){var S=new M(v==null?p:v,L==null?g:L,NaN,NaN,NaN,NaN);return w==null?S:S.addAll(w)}function M(w,v,L,S,k,P){this._x=w,this._y=v,this._x0=L,this._y0=S,this._x1=k,this._y1=P,this._root=void 0}function _(w){for(var v={data:w.data},L=v;w=w.next;)L=L.next={data:w.data};return v}var T=b.prototype=M.prototype;T.copy=function(){var w=new M(this._x,this._y,this._x0,this._y0,this._x1,this._y1),v=this._root,L,S;if(!v)return w;if(!v.length)return w._root=_(v),w;for(L=[{source:v,target:w._root=new Array(4)}];v=L.pop();)for(var k=0;k<4;++k)(S=v.source[k])&&(S.length?L.push({source:S,target:v.target[k]=new Array(4)}):v.target[k]=_(S));return w},T.add=s,T.addAll=x,T.cover=t,T.data=i,T.extent=a,T.find=n,T.remove=f,T.removeAll=l,T.root=o,T.size=c,T.visit=h,T.visitAfter=d,T.x=y,T.y=A,u.quadtree=b,Object.defineProperty(u,"__esModule",{value:!0})})},{}],119:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-path")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(at){return function(){return at}}var x=Math.abs,t=Math.atan2,i=Math.cos,a=Math.max,r=Math.min,n=Math.sin,f=Math.sqrt,l=1e-12,o=Math.PI,c=o/2,h=2*o;function d(at){return at>1?0:at<-1?o:Math.acos(at)}function p(at){return at>=1?c:at<=-1?-c:Math.asin(at)}function y(at){return at.innerRadius}function g(at){return at.outerRadius}function A(at){return at.startAngle}function b(at){return at.endAngle}function M(at){return at&&at.padAngle}function _(at,Ft,er,hr,Wr,zr,Pr,br){var Xr=er-at,Fn=hr-Ft,kn=Pr-Wr,ra=br-zr,oa=ra*Xr-kn*Fn;if(!(oa*oa<l))return oa=(kn*(Ft-zr)-ra*(at-Wr))/oa,[at+oa*Xr,Ft+oa*Fn]}function T(at,Ft,er,hr,Wr,zr,Pr){var br=at-er,Xr=Ft-hr,Fn=(Pr?zr:-zr)/f(br*br+Xr*Xr),kn=Fn*Xr,ra=-Fn*br,oa=at+kn,Sa=Ft+ra,ya=er+kn,pr=hr+ra,vn=(oa+ya)/2,$r=(Sa+pr)/2,On=ya-oa,Bn=pr-Sa,ha=On*On+Bn*Bn,na=Wr-zr,Vn=oa*pr-ya*Sa,fa=(Bn<0?-1:1)*f(a(0,na*na*ha-Vn*Vn)),ga=(Vn*Bn-On*fa)/ha,ur=(-Vn*On-Bn*fa)/ha,Dr=(Vn*Bn+On*fa)/ha,on=(-Vn*On+Bn*fa)/ha,rn=ga-vn,gn=ur-$r,wn=Dr-vn,pn=on-$r;return rn*rn+gn*gn>wn*wn+pn*pn&&(ga=Dr,ur=on),{cx:ga,cy:ur,x01:-kn,y01:-ra,x11:ga*(Wr/na-1),y11:ur*(Wr/na-1)}}function w(){var at=y,Ft=g,er=m(0),hr=null,Wr=A,zr=b,Pr=M,br=null;function Xr(){var Fn,kn,ra=+at.apply(this,arguments),oa=+Ft.apply(this,arguments),Sa=Wr.apply(this,arguments)-c,ya=zr.apply(this,arguments)-c,pr=x(ya-Sa),vn=ya>Sa;if(br||(br=Fn=s.path()),oa<ra&&(kn=oa,oa=ra,ra=kn),!(oa>l))br.moveTo(0,0);else if(pr>h-l)br.moveTo(oa*i(Sa),oa*n(Sa)),br.arc(0,0,oa,Sa,ya,!vn),ra>l&&(br.moveTo(ra*i(ya),ra*n(ya)),br.arc(0,0,ra,ya,Sa,vn));else{var $r=Sa,On=ya,Bn=Sa,ha=ya,na=pr,Vn=pr,fa=Pr.apply(this,arguments)/2,ga=fa>l&&(hr?+hr.apply(this,arguments):f(ra*ra+oa*oa)),ur=r(x(oa-ra)/2,+er.apply(this,arguments)),Dr=ur,on=ur,rn,gn;if(ga>l){var wn=p(ga/ra*n(fa)),pn=p(ga/oa*n(fa));(na-=wn*2)>l?(wn*=vn?1:-1,Bn+=wn,ha-=wn):(na=0,Bn=ha=(Sa+ya)/2),(Vn-=pn*2)>l?(pn*=vn?1:-1,$r+=pn,On-=pn):(Vn=0,$r=On=(Sa+ya)/2)}var cr=oa*i($r),ar=oa*n($r),Fr=ra*i(ha),Jr=ra*n(ha);if(ur>l){var En=oa*i(On),Hn=oa*n(On),Jn=ra*i(Bn),Zn=ra*n(Bn),Un;if(pr<o&&(Un=_(cr,ar,Jn,Zn,En,Hn,Fr,Jr))){var yn=cr-Un[0],Dn=ar-Un[1],Yn=En-Un[0],ua=Hn-Un[1],Ya=1/n(d((yn*Yn+Dn*ua)/(f(yn*yn+Dn*Dn)*f(Yn*Yn+ua*ua)))/2),Ca=f(Un[0]*Un[0]+Un[1]*Un[1]);Dr=r(ur,(ra-Ca)/(Ya-1)),on=r(ur,(oa-Ca)/(Ya+1))}}Vn>l?on>l?(rn=T(Jn,Zn,cr,ar,oa,on,vn),gn=T(En,Hn,Fr,Jr,oa,on,vn),br.moveTo(rn.cx+rn.x01,rn.cy+rn.y01),on<ur?br.arc(rn.cx,rn.cy,on,t(rn.y01,rn.x01),t(gn.y01,gn.x01),!vn):(br.arc(rn.cx,rn.cy,on,t(rn.y01,rn.x01),t(rn.y11,rn.x11),!vn),br.arc(0,0,oa,t(rn.cy+rn.y11,rn.cx+rn.x11),t(gn.cy+gn.y11,gn.cx+gn.x11),!vn),br.arc(gn.cx,gn.cy,on,t(gn.y11,gn.x11),t(gn.y01,gn.x01),!vn))):(br.moveTo(cr,ar),br.arc(0,0,oa,$r,On,!vn)):br.moveTo(cr,ar),!(ra>l)||!(na>l)?br.lineTo(Fr,Jr):Dr>l?(rn=T(Fr,Jr,En,Hn,ra,-Dr,vn),gn=T(cr,ar,Jn,Zn,ra,-Dr,vn),br.lineTo(rn.cx+rn.x01,rn.cy+rn.y01),Dr<ur?br.arc(rn.cx,rn.cy,Dr,t(rn.y01,rn.x01),t(gn.y01,gn.x01),!vn):(br.arc(rn.cx,rn.cy,Dr,t(rn.y01,rn.x01),t(rn.y11,rn.x11),!vn),br.arc(0,0,ra,t(rn.cy+rn.y11,rn.cx+rn.x11),t(gn.cy+gn.y11,gn.cx+gn.x11),vn),br.arc(gn.cx,gn.cy,Dr,t(gn.y11,gn.x11),t(gn.y01,gn.x01),!vn))):br.arc(0,0,ra,ha,Bn,vn)}if(br.closePath(),Fn)return br=null,Fn+""||null}return Xr.centroid=function(){var Fn=(+at.apply(this,arguments)+ +Ft.apply(this,arguments))/2,kn=(+Wr.apply(this,arguments)+ +zr.apply(this,arguments))/2-o/2;return[i(kn)*Fn,n(kn)*Fn]},Xr.innerRadius=function(Fn){return arguments.length?(at=typeof Fn=="function"?Fn:m(+Fn),Xr):at},Xr.outerRadius=function(Fn){return arguments.length?(Ft=typeof Fn=="function"?Fn:m(+Fn),Xr):Ft},Xr.cornerRadius=function(Fn){return arguments.length?(er=typeof Fn=="function"?Fn:m(+Fn),Xr):er},Xr.padRadius=function(Fn){return arguments.length?(hr=Fn==null?null:typeof Fn=="function"?Fn:m(+Fn),Xr):hr},Xr.startAngle=function(Fn){return arguments.length?(Wr=typeof Fn=="function"?Fn:m(+Fn),Xr):Wr},Xr.endAngle=function(Fn){return arguments.length?(zr=typeof Fn=="function"?Fn:m(+Fn),Xr):zr},Xr.padAngle=function(Fn){return arguments.length?(Pr=typeof Fn=="function"?Fn:m(+Fn),Xr):Pr},Xr.context=function(Fn){return arguments.length?(br=Fn==null?null:Fn,Xr):br},Xr}function v(at){this._context=at}v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;default:this._context.lineTo(at,Ft);break}}};function L(at){return new v(at)}function S(at){return at[0]}function k(at){return at[1]}function P(){var at=S,Ft=k,er=m(!0),hr=null,Wr=L,zr=null;function Pr(br){var Xr,Fn=br.length,kn,ra=!1,oa;for(hr==null&&(zr=Wr(oa=s.path())),Xr=0;Xr<=Fn;++Xr)!(Xr<Fn&&er(kn=br[Xr],Xr,br))===ra&&((ra=!ra)?zr.lineStart():zr.lineEnd()),ra&&zr.point(+at(kn,Xr,br),+Ft(kn,Xr,br));if(oa)return zr=null,oa+""||null}return Pr.x=function(br){return arguments.length?(at=typeof br=="function"?br:m(+br),Pr):at},Pr.y=function(br){return arguments.length?(Ft=typeof br=="function"?br:m(+br),Pr):Ft},Pr.defined=function(br){return arguments.length?(er=typeof br=="function"?br:m(!!br),Pr):er},Pr.curve=function(br){return arguments.length?(Wr=br,hr!=null&&(zr=Wr(hr)),Pr):Wr},Pr.context=function(br){return arguments.length?(br==null?hr=zr=null:zr=Wr(hr=br),Pr):hr},Pr}function O(){var at=S,Ft=null,er=m(0),hr=k,Wr=m(!0),zr=null,Pr=L,br=null;function Xr(kn){var ra,oa,Sa,ya=kn.length,pr,vn=!1,$r,On=new Array(ya),Bn=new Array(ya);for(zr==null&&(br=Pr($r=s.path())),ra=0;ra<=ya;++ra){if(!(ra<ya&&Wr(pr=kn[ra],ra,kn))===vn)if(vn=!vn)oa=ra,br.areaStart(),br.lineStart();else{for(br.lineEnd(),br.lineStart(),Sa=ra-1;Sa>=oa;--Sa)br.point(On[Sa],Bn[Sa]);br.lineEnd(),br.areaEnd()}vn&&(On[ra]=+at(pr,ra,kn),Bn[ra]=+er(pr,ra,kn),br.point(Ft?+Ft(pr,ra,kn):On[ra],hr?+hr(pr,ra,kn):Bn[ra]))}if($r)return br=null,$r+""||null}function Fn(){return P().defined(Wr).curve(Pr).context(zr)}return Xr.x=function(kn){return arguments.length?(at=typeof kn=="function"?kn:m(+kn),Ft=null,Xr):at},Xr.x0=function(kn){return arguments.length?(at=typeof kn=="function"?kn:m(+kn),Xr):at},Xr.x1=function(kn){return arguments.length?(Ft=kn==null?null:typeof kn=="function"?kn:m(+kn),Xr):Ft},Xr.y=function(kn){return arguments.length?(er=typeof kn=="function"?kn:m(+kn),hr=null,Xr):er},Xr.y0=function(kn){return arguments.length?(er=typeof kn=="function"?kn:m(+kn),Xr):er},Xr.y1=function(kn){return arguments.length?(hr=kn==null?null:typeof kn=="function"?kn:m(+kn),Xr):hr},Xr.lineX0=Xr.lineY0=function(){return Fn().x(at).y(er)},Xr.lineY1=function(){return Fn().x(at).y(hr)},Xr.lineX1=function(){return Fn().x(Ft).y(er)},Xr.defined=function(kn){return arguments.length?(Wr=typeof kn=="function"?kn:m(!!kn),Xr):Wr},Xr.curve=function(kn){return arguments.length?(Pr=kn,zr!=null&&(br=Pr(zr)),Xr):Pr},Xr.context=function(kn){return arguments.length?(kn==null?zr=br=null:br=Pr(zr=kn),Xr):zr},Xr}function F(at,Ft){return Ft<at?-1:Ft>at?1:Ft>=at?0:NaN}function I(at){return at}function D(){var at=I,Ft=F,er=null,hr=m(0),Wr=m(h),zr=m(0);function Pr(br){var Xr,Fn=br.length,kn,ra,oa=0,Sa=new Array(Fn),ya=new Array(Fn),pr=+hr.apply(this,arguments),vn=Math.min(h,Math.max(-h,Wr.apply(this,arguments)-pr)),$r,On=Math.min(Math.abs(vn)/Fn,zr.apply(this,arguments)),Bn=On*(vn<0?-1:1),ha;for(Xr=0;Xr<Fn;++Xr)(ha=ya[Sa[Xr]=Xr]=+at(br[Xr],Xr,br))>0&&(oa+=ha);for(Ft!=null?Sa.sort(function(na,Vn){return Ft(ya[na],ya[Vn])}):er!=null&&Sa.sort(function(na,Vn){return er(br[na],br[Vn])}),Xr=0,ra=oa?(vn-Fn*Bn)/oa:0;Xr<Fn;++Xr,pr=$r)kn=Sa[Xr],ha=ya[kn],$r=pr+(ha>0?ha*ra:0)+Bn,ya[kn]={data:br[kn],index:Xr,value:ha,startAngle:pr,endAngle:$r,padAngle:On};return ya}return Pr.value=function(br){return arguments.length?(at=typeof br=="function"?br:m(+br),Pr):at},Pr.sortValues=function(br){return arguments.length?(Ft=br,er=null,Pr):Ft},Pr.sort=function(br){return arguments.length?(er=br,Ft=null,Pr):er},Pr.startAngle=function(br){return arguments.length?(hr=typeof br=="function"?br:m(+br),Pr):hr},Pr.endAngle=function(br){return arguments.length?(Wr=typeof br=="function"?br:m(+br),Pr):Wr},Pr.padAngle=function(br){return arguments.length?(zr=typeof br=="function"?br:m(+br),Pr):zr},Pr}var U=j(L);function B(at){this._curve=at}B.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(at,Ft){this._curve.point(Ft*Math.sin(at),Ft*-Math.cos(at))}};function j(at){function Ft(er){return new B(at(er))}return Ft._curve=at,Ft}function Z(at){var Ft=at.curve;return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at.curve=function(er){return arguments.length?Ft(j(er)):Ft()._curve},at}function ee(){return Z(P().curve(U))}function q(){var at=O().curve(U),Ft=at.curve,er=at.lineX0,hr=at.lineX1,Wr=at.lineY0,zr=at.lineY1;return at.angle=at.x,delete at.x,at.startAngle=at.x0,delete at.x0,at.endAngle=at.x1,delete at.x1,at.radius=at.y,delete at.y,at.innerRadius=at.y0,delete at.y0,at.outerRadius=at.y1,delete at.y1,at.lineStartAngle=function(){return Z(er())},delete at.lineX0,at.lineEndAngle=function(){return Z(hr())},delete at.lineX1,at.lineInnerRadius=function(){return Z(Wr())},delete at.lineY0,at.lineOuterRadius=function(){return Z(zr())},delete at.lineY1,at.curve=function(Pr){return arguments.length?Ft(j(Pr)):Ft()._curve},at}function W(at,Ft){return[(Ft=+Ft)*Math.cos(at-=Math.PI/2),Ft*Math.sin(at)]}var J=Array.prototype.slice;function le(at){return at.source}function fe(at){return at.target}function se(at){var Ft=le,er=fe,hr=S,Wr=k,zr=null;function Pr(){var br,Xr=J.call(arguments),Fn=Ft.apply(this,Xr),kn=er.apply(this,Xr);if(zr||(zr=br=s.path()),at(zr,+hr.apply(this,(Xr[0]=Fn,Xr)),+Wr.apply(this,Xr),+hr.apply(this,(Xr[0]=kn,Xr)),+Wr.apply(this,Xr)),br)return zr=null,br+""||null}return Pr.source=function(br){return arguments.length?(Ft=br,Pr):Ft},Pr.target=function(br){return arguments.length?(er=br,Pr):er},Pr.x=function(br){return arguments.length?(hr=typeof br=="function"?br:m(+br),Pr):hr},Pr.y=function(br){return arguments.length?(Wr=typeof br=="function"?br:m(+br),Pr):Wr},Pr.context=function(br){return arguments.length?(zr=br==null?null:br,Pr):zr},Pr}function H(at,Ft,er,hr,Wr){at.moveTo(Ft,er),at.bezierCurveTo(Ft=(Ft+hr)/2,er,Ft,Wr,hr,Wr)}function Y(at,Ft,er,hr,Wr){at.moveTo(Ft,er),at.bezierCurveTo(Ft,er=(er+Wr)/2,hr,er,hr,Wr)}function ne(at,Ft,er,hr,Wr){var zr=W(Ft,er),Pr=W(Ft,er=(er+Wr)/2),br=W(hr,er),Xr=W(hr,Wr);at.moveTo(zr[0],zr[1]),at.bezierCurveTo(Pr[0],Pr[1],br[0],br[1],Xr[0],Xr[1])}function te(){return se(H)}function K(){return se(Y)}function $(){var at=se(ne);return at.angle=at.x,delete at.x,at.radius=at.y,delete at.y,at}var ae={draw:function(at,Ft){var er=Math.sqrt(Ft/o);at.moveTo(er,0),at.arc(0,0,er,0,h)}},ie={draw:function(at,Ft){var er=Math.sqrt(Ft/5)/2;at.moveTo(-3*er,-er),at.lineTo(-er,-er),at.lineTo(-er,-3*er),at.lineTo(er,-3*er),at.lineTo(er,-er),at.lineTo(3*er,-er),at.lineTo(3*er,er),at.lineTo(er,er),at.lineTo(er,3*er),at.lineTo(-er,3*er),at.lineTo(-er,er),at.lineTo(-3*er,er),at.closePath()}},oe=Math.sqrt(1/3),ue=oe*2,ye={draw:function(at,Ft){var er=Math.sqrt(Ft/ue),hr=er*oe;at.moveTo(0,-er),at.lineTo(hr,0),at.lineTo(0,er),at.lineTo(-hr,0),at.closePath()}},ce=.8908130915292852,me=Math.sin(o/10)/Math.sin(7*o/10),xe=Math.sin(h/10)*me,ke=-Math.cos(h/10)*me,Ae={draw:function(at,Ft){var er=Math.sqrt(Ft*ce),hr=xe*er,Wr=ke*er;at.moveTo(0,-er),at.lineTo(hr,Wr);for(var zr=1;zr<5;++zr){var Pr=h*zr/5,br=Math.cos(Pr),Xr=Math.sin(Pr);at.lineTo(Xr*er,-br*er),at.lineTo(br*hr-Xr*Wr,Xr*hr+br*Wr)}at.closePath()}},Oe={draw:function(at,Ft){var er=Math.sqrt(Ft),hr=-er/2;at.rect(hr,hr,er,er)}},He=Math.sqrt(3),Ge={draw:function(at,Ft){var er=-Math.sqrt(Ft/(He*3));at.moveTo(0,er*2),at.lineTo(-He*er,-er),at.lineTo(He*er,-er),at.closePath()}},_e=-.5,Re=Math.sqrt(3)/2,We=1/Math.sqrt(12),qe=(We/2+1)*3,Ue={draw:function(at,Ft){var er=Math.sqrt(Ft/qe),hr=er/2,Wr=er*We,zr=hr,Pr=er*We+er,br=-zr,Xr=Pr;at.moveTo(hr,Wr),at.lineTo(zr,Pr),at.lineTo(br,Xr),at.lineTo(_e*hr-Re*Wr,Re*hr+_e*Wr),at.lineTo(_e*zr-Re*Pr,Re*zr+_e*Pr),at.lineTo(_e*br-Re*Xr,Re*br+_e*Xr),at.lineTo(_e*hr+Re*Wr,_e*Wr-Re*hr),at.lineTo(_e*zr+Re*Pr,_e*Pr-Re*zr),at.lineTo(_e*br+Re*Xr,_e*Xr-Re*br),at.closePath()}},Ie=[ae,ie,ye,Oe,Ae,Ge,Ue];function Ve(){var at=m(ae),Ft=m(64),er=null;function hr(){var Wr;if(er||(er=Wr=s.path()),at.apply(this,arguments).draw(er,+Ft.apply(this,arguments)),Wr)return er=null,Wr+""||null}return hr.type=function(Wr){return arguments.length?(at=typeof Wr=="function"?Wr:m(Wr),hr):at},hr.size=function(Wr){return arguments.length?(Ft=typeof Wr=="function"?Wr:m(+Wr),hr):Ft},hr.context=function(Wr){return arguments.length?(er=Wr==null?null:Wr,hr):er},hr}function dt(){}function Rt(at,Ft,er){at._context.bezierCurveTo((2*at._x0+at._x1)/3,(2*at._y0+at._y1)/3,(at._x0+2*at._x1)/3,(at._y0+2*at._y1)/3,(at._x0+4*at._x1+Ft)/6,(at._y0+4*at._y1+er)/6)}function Gt(at){this._context=at}Gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Rt(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Rt(this,at,Ft);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft}};function kt(at){return new Gt(at)}function zt(at){this._context=at}zt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._x2=at,this._y2=Ft;break;case 1:this._point=2,this._x3=at,this._y3=Ft;break;case 2:this._point=3,this._x4=at,this._y4=Ft,this._context.moveTo((this._x0+4*this._x1+at)/6,(this._y0+4*this._y1+Ft)/6);break;default:Rt(this,at,Ft);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft}};function Bt(at){return new zt(at)}function Lt(at){this._context=at}Lt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var er=(this._x0+4*this._x1+at)/6,hr=(this._y0+4*this._y1+Ft)/6;this._line?this._context.lineTo(er,hr):this._context.moveTo(er,hr);break;case 3:this._point=4;default:Rt(this,at,Ft);break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft}};function Mt(at){return new Lt(at)}function it(at,Ft){this._basis=new Gt(at),this._beta=Ft}it.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var at=this._x,Ft=this._y,er=at.length-1;if(er>0)for(var hr=at[0],Wr=Ft[0],zr=at[er]-hr,Pr=Ft[er]-Wr,br=-1,Xr;++br<=er;)Xr=br/er,this._basis.point(this._beta*at[br]+(1-this._beta)*(hr+Xr*zr),this._beta*Ft[br]+(1-this._beta)*(Wr+Xr*Pr));this._x=this._y=null,this._basis.lineEnd()},point:function(at,Ft){this._x.push(+at),this._y.push(+Ft)}};var ht=function at(Ft){function er(hr){return Ft===1?new Gt(hr):new it(hr,Ft)}return er.beta=function(hr){return at(+hr)},er}(.85);function Qe(at,Ft,er){at._context.bezierCurveTo(at._x1+at._k*(at._x2-at._x0),at._y1+at._k*(at._y2-at._y0),at._x2+at._k*(at._x1-Ft),at._y2+at._k*(at._y1-er),at._x2,at._y2)}function Ce(at,Ft){this._context=at,this._k=(1-Ft)/6}Ce.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Qe(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2,this._x1=at,this._y1=Ft;break;case 2:this._point=3;default:Qe(this,at,Ft);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var Xe=function at(Ft){function er(hr){return new Ce(hr,Ft)}return er.tension=function(hr){return at(+hr)},er}(0);function rt(at,Ft){this._context=at,this._k=(1-Ft)/6}rt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._x3=at,this._y3=Ft;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ft);break;case 2:this._point=3,this._x5=at,this._y5=Ft;break;default:Qe(this,at,Ft);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var ut=function at(Ft){function er(hr){return new rt(hr,Ft)}return er.tension=function(hr){return at(+hr)},er}(0);function Pt(at,Ft){this._context=at,this._k=(1-Ft)/6}Pt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Qe(this,at,Ft);break}this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var St=function at(Ft){function er(hr){return new Pt(hr,Ft)}return er.tension=function(hr){return at(+hr)},er}(0);function Nt(at,Ft,er){var hr=at._x1,Wr=at._y1,zr=at._x2,Pr=at._y2;if(at._l01_a>l){var br=2*at._l01_2a+3*at._l01_a*at._l12_a+at._l12_2a,Xr=3*at._l01_a*(at._l01_a+at._l12_a);hr=(hr*br-at._x0*at._l12_2a+at._x2*at._l01_2a)/Xr,Wr=(Wr*br-at._y0*at._l12_2a+at._y2*at._l01_2a)/Xr}if(at._l23_a>l){var Fn=2*at._l23_2a+3*at._l23_a*at._l12_a+at._l12_2a,kn=3*at._l23_a*(at._l23_a+at._l12_a);zr=(zr*Fn+at._x1*at._l23_2a-Ft*at._l12_2a)/kn,Pr=(Pr*Fn+at._y1*at._l23_2a-er*at._l12_2a)/kn}at._context.bezierCurveTo(hr,Wr,zr,Pr,at._x2,at._y2)}function jt(at,Ft){this._context=at,this._alpha=Ft}jt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){if(at=+at,Ft=+Ft,this._point){var er=this._x2-at,hr=this._y2-Ft;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;break;case 2:this._point=3;default:Nt(this,at,Ft);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var Ot=function at(Ft){function er(hr){return Ft?new jt(hr,Ft):new Ce(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function Kt(at,Ft){this._context=at,this._alpha=Ft}Kt.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(at,Ft){if(at=+at,Ft=+Ft,this._point){var er=this._x2-at,hr=this._y2-Ft;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=at,this._y3=Ft;break;case 1:this._point=2,this._context.moveTo(this._x4=at,this._y4=Ft);break;case 2:this._point=3,this._x5=at,this._y5=Ft;break;default:Nt(this,at,Ft);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var Je=function at(Ft){function er(hr){return Ft?new Kt(hr,Ft):new rt(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function gt(at,Ft){this._context=at,this._alpha=Ft}gt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){if(at=+at,Ft=+Ft,this._point){var er=this._x2-at,hr=this._y2-Ft;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(er*er+hr*hr,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Nt(this,at,Ft);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=at,this._y0=this._y1,this._y1=this._y2,this._y2=Ft}};var Et=function at(Ft){function er(hr){return Ft?new gt(hr,Ft):new Pt(hr,0)}return er.alpha=function(hr){return at(+hr)},er}(.5);function rr(at){this._context=at}rr.prototype={areaStart:dt,areaEnd:dt,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(at,Ft){at=+at,Ft=+Ft,this._point?this._context.lineTo(at,Ft):(this._point=1,this._context.moveTo(at,Ft))}};function vr(at){return new rr(at)}function or(at){return at<0?-1:1}function dr(at,Ft,er){var hr=at._x1-at._x0,Wr=Ft-at._x1,zr=(at._y1-at._y0)/(hr||Wr<0&&-0),Pr=(er-at._y1)/(Wr||hr<0&&-0),br=(zr*Wr+Pr*hr)/(hr+Wr);return(or(zr)+or(Pr))*Math.min(Math.abs(zr),Math.abs(Pr),.5*Math.abs(br))||0}function Lr(at,Ft){var er=at._x1-at._x0;return er?(3*(at._y1-at._y0)/er-Ft)/2:Ft}function kr(at,Ft,er){var hr=at._x0,Wr=at._y0,zr=at._x1,Pr=at._y1,br=(zr-hr)/3;at._context.bezierCurveTo(hr+br,Wr+br*Ft,zr-br,Pr-br*er,zr,Pr)}function tr(at){this._context=at}tr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:kr(this,this._t0,Lr(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(at,Ft){var er=NaN;if(at=+at,Ft=+Ft,!(at===this._x1&&Ft===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;break;case 2:this._point=3,kr(this,Lr(this,er=dr(this,at,Ft)),er);break;default:kr(this,this._t0,er=dr(this,at,Ft));break}this._x0=this._x1,this._x1=at,this._y0=this._y1,this._y1=Ft,this._t0=er}}};function Or(at){this._context=new et(at)}(Or.prototype=Object.create(tr.prototype)).point=function(at,Ft){tr.prototype.point.call(this,Ft,at)};function et(at){this._context=at}et.prototype={moveTo:function(at,Ft){this._context.moveTo(Ft,at)},closePath:function(){this._context.closePath()},lineTo:function(at,Ft){this._context.lineTo(Ft,at)},bezierCurveTo:function(at,Ft,er,hr,Wr,zr){this._context.bezierCurveTo(Ft,at,hr,er,zr,Wr)}};function we(at){return new tr(at)}function Se(at){return new Or(at)}function De(at){this._context=at}De.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var at=this._x,Ft=this._y,er=at.length;if(er)if(this._line?this._context.lineTo(at[0],Ft[0]):this._context.moveTo(at[0],Ft[0]),er===2)this._context.lineTo(at[1],Ft[1]);else for(var hr=je(at),Wr=je(Ft),zr=0,Pr=1;Pr<er;++zr,++Pr)this._context.bezierCurveTo(hr[0][zr],Wr[0][zr],hr[1][zr],Wr[1][zr],at[Pr],Ft[Pr]);(this._line||this._line!==0&&er===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(at,Ft){this._x.push(+at),this._y.push(+Ft)}};function je(at){var Ft,er=at.length-1,hr,Wr=new Array(er),zr=new Array(er),Pr=new Array(er);for(Wr[0]=0,zr[0]=2,Pr[0]=at[0]+2*at[1],Ft=1;Ft<er-1;++Ft)Wr[Ft]=1,zr[Ft]=4,Pr[Ft]=4*at[Ft]+2*at[Ft+1];for(Wr[er-1]=2,zr[er-1]=7,Pr[er-1]=8*at[er-1]+at[er],Ft=1;Ft<er;++Ft)hr=Wr[Ft]/zr[Ft-1],zr[Ft]-=hr,Pr[Ft]-=hr*Pr[Ft-1];for(Wr[er-1]=Pr[er-1]/zr[er-1],Ft=er-2;Ft>=0;--Ft)Wr[Ft]=(Pr[Ft]-Wr[Ft+1])/zr[Ft];for(zr[er-1]=(at[er]+Wr[er-1])/2,Ft=0;Ft<er-1;++Ft)zr[Ft]=2*at[Ft+1]-Wr[Ft+1];return[Wr,zr]}function $e(at){return new De(at)}function ot(at,Ft){this._context=at,this._t=Ft}ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(at,Ft){switch(at=+at,Ft=+Ft,this._point){case 0:this._point=1,this._line?this._context.lineTo(at,Ft):this._context.moveTo(at,Ft);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,Ft),this._context.lineTo(at,Ft);else{var er=this._x*(1-this._t)+at*this._t;this._context.lineTo(er,this._y),this._context.lineTo(er,Ft)}break}}this._x=at,this._y=Ft}};function st(at){return new ot(at,.5)}function pt(at){return new ot(at,0)}function wt(at){return new ot(at,1)}function Wt(at,Ft){if((Pr=at.length)>1)for(var er=1,hr,Wr,zr=at[Ft[0]],Pr,br=zr.length;er<Pr;++er)for(Wr=zr,zr=at[Ft[er]],hr=0;hr<br;++hr)zr[hr][1]+=zr[hr][0]=isNaN(Wr[hr][1])?Wr[hr][0]:Wr[hr][1]}function yr(at){for(var Ft=at.length,er=new Array(Ft);--Ft>=0;)er[Ft]=Ft;return er}function xr(at,Ft){return at[Ft]}function Tr(){var at=m([]),Ft=yr,er=Wt,hr=xr;function Wr(zr){var Pr=at.apply(this,arguments),br,Xr=zr.length,Fn=Pr.length,kn=new Array(Fn),ra;for(br=0;br<Fn;++br){for(var oa=Pr[br],Sa=kn[br]=new Array(Xr),ya=0,pr;ya<Xr;++ya)Sa[ya]=pr=[0,+hr(zr[ya],oa,ya,zr)],pr.data=zr[ya];Sa.key=oa}for(br=0,ra=Ft(kn);br<Fn;++br)kn[ra[br]].index=br;return er(kn,ra),kn}return Wr.keys=function(zr){return arguments.length?(at=typeof zr=="function"?zr:m(J.call(zr)),Wr):at},Wr.value=function(zr){return arguments.length?(hr=typeof zr=="function"?zr:m(+zr),Wr):hr},Wr.order=function(zr){return arguments.length?(Ft=zr==null?yr:typeof zr=="function"?zr:m(J.call(zr)),Wr):Ft},Wr.offset=function(zr){return arguments.length?(er=zr==null?Wt:zr,Wr):er},Wr}function mr(at,Ft){if((hr=at.length)>0){for(var er,hr,Wr=0,zr=at[0].length,Pr;Wr<zr;++Wr){for(Pr=er=0;er<hr;++er)Pr+=at[er][Wr][1]||0;if(Pr)for(er=0;er<hr;++er)at[er][Wr][1]/=Pr}Wt(at,Ft)}}function Rr(at,Ft){if((Xr=at.length)>0)for(var er,hr=0,Wr,zr,Pr,br,Xr,Fn=at[Ft[0]].length;hr<Fn;++hr)for(Pr=br=0,er=0;er<Xr;++er)(zr=(Wr=at[Ft[er]][hr])[1]-Wr[0])>0?(Wr[0]=Pr,Wr[1]=Pr+=zr):zr<0?(Wr[1]=br,Wr[0]=br+=zr):(Wr[0]=0,Wr[1]=zr)}function tn(at,Ft){if((Wr=at.length)>0){for(var er=0,hr=at[Ft[0]],Wr,zr=hr.length;er<zr;++er){for(var Pr=0,br=0;Pr<Wr;++Pr)br+=at[Pr][er][1]||0;hr[er][1]+=hr[er][0]=-br/2}Wt(at,Ft)}}function wr(at,Ft){if(!(!((Pr=at.length)>0)||!((zr=(Wr=at[Ft[0]]).length)>0))){for(var er=0,hr=1,Wr,zr,Pr;hr<zr;++hr){for(var br=0,Xr=0,Fn=0;br<Pr;++br){for(var kn=at[Ft[br]],ra=kn[hr][1]||0,oa=kn[hr-1][1]||0,Sa=(ra-oa)/2,ya=0;ya<br;++ya){var pr=at[Ft[ya]],vn=pr[hr][1]||0,$r=pr[hr-1][1]||0;Sa+=vn-$r}Xr+=ra,Fn+=Sa*ra}Wr[hr-1][1]+=Wr[hr-1][0]=er,Xr&&(er-=Fn/Xr)}Wr[hr-1][1]+=Wr[hr-1][0]=er,Wt(at,Ft)}}function gr(at){var Ft=at.map(mn);return yr(at).sort(function(er,hr){return Ft[er]-Ft[hr]})}function mn(at){for(var Ft=-1,er=0,hr=at.length,Wr,zr=-1/0;++Ft<hr;)(Wr=+at[Ft][1])>zr&&(zr=Wr,er=Ft);return er}function Gr(at){var Ft=at.map(Ar);return yr(at).sort(function(er,hr){return Ft[er]-Ft[hr]})}function Ar(at){for(var Ft=0,er=-1,hr=at.length,Wr;++er<hr;)(Wr=+at[er][1])&&(Ft+=Wr);return Ft}function nn(at){return Gr(at).reverse()}function fn(at){var Ft=at.length,er,hr,Wr=at.map(Ar),zr=gr(at),Pr=0,br=0,Xr=[],Fn=[];for(er=0;er<Ft;++er)hr=zr[er],Pr<br?(Pr+=Wr[hr],Xr.push(hr)):(br+=Wr[hr],Fn.push(hr));return Fn.reverse().concat(Xr)}function jr(at){return yr(at).reverse()}u.arc=w,u.area=O,u.areaRadial=q,u.curveBasis=kt,u.curveBasisClosed=Bt,u.curveBasisOpen=Mt,u.curveBundle=ht,u.curveCardinal=Xe,u.curveCardinalClosed=ut,u.curveCardinalOpen=St,u.curveCatmullRom=Ot,u.curveCatmullRomClosed=Je,u.curveCatmullRomOpen=Et,u.curveLinear=L,u.curveLinearClosed=vr,u.curveMonotoneX=we,u.curveMonotoneY=Se,u.curveNatural=$e,u.curveStep=st,u.curveStepAfter=wt,u.curveStepBefore=pt,u.line=P,u.lineRadial=ee,u.linkHorizontal=te,u.linkRadial=$,u.linkVertical=K,u.pie=D,u.pointRadial=W,u.radialArea=q,u.radialLine=ee,u.stack=Tr,u.stackOffsetDiverging=Rr,u.stackOffsetExpand=mr,u.stackOffsetNone=Wt,u.stackOffsetSilhouette=tn,u.stackOffsetWiggle=wr,u.stackOrderAppearance=gr,u.stackOrderAscending=Gr,u.stackOrderDescending=nn,u.stackOrderInsideOut=fn,u.stackOrderNone=yr,u.stackOrderReverse=jr,u.symbol=Ve,u.symbolCircle=ae,u.symbolCross=ie,u.symbolDiamond=ye,u.symbolSquare=Oe,u.symbolStar=Ae,u.symbolTriangle=Ge,u.symbolWye=Ue,u.symbols=Ie,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-path":117}],120:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N,e("d3-time")):(u=u||self,s(u.d3=u.d3||{},u.d3))})(this,function(u,s){function m(it){if(0<=it.y&&it.y<100){var ht=new Date(-1,it.m,it.d,it.H,it.M,it.S,it.L);return ht.setFullYear(it.y),ht}return new Date(it.y,it.m,it.d,it.H,it.M,it.S,it.L)}function x(it){if(0<=it.y&&it.y<100){var ht=new Date(Date.UTC(-1,it.m,it.d,it.H,it.M,it.S,it.L));return ht.setUTCFullYear(it.y),ht}return new Date(Date.UTC(it.y,it.m,it.d,it.H,it.M,it.S,it.L))}function t(it,ht,Qe){return{y:it,m:ht,d:Qe,H:0,M:0,S:0,L:0}}function i(it){var ht=it.dateTime,Qe=it.date,Ce=it.time,Xe=it.periods,rt=it.days,ut=it.shortDays,Pt=it.months,St=it.shortMonths,Nt=c(Xe),jt=h(Xe),Ot=c(rt),Kt=h(rt),Je=c(ut),gt=h(ut),Et=c(Pt),rr=h(Pt),vr=c(St),or=h(St),dr={a:wt,A:Wt,b:yr,B:xr,c:null,d:B,e:B,f:W,H:j,I:Z,j:ee,L:q,m:J,M:le,p:Tr,q:mr,Q:Ve,s:dt,S:fe,u:se,U:H,V:Y,w:ne,W:te,x:null,X:null,y:K,Y:$,Z:ae,"%":Ie},Lr={a:Rr,A:tn,b:wr,B:gr,c:null,d:ie,e:ie,f:me,H:oe,I:ue,j:ye,L:ce,m:xe,M:ke,p:mn,q:Gr,Q:Ve,s:dt,S:Ae,u:Oe,U:He,V:Ge,w:_e,W:Re,x:null,X:null,y:We,Y:qe,Z:Ue,"%":Ie},kr={a:Se,A:De,b:je,B:$e,c:ot,d:v,e:v,f:F,H:S,I:S,j:L,L:O,m:w,M:k,p:we,q:T,Q:D,s:U,S:P,u:p,U:y,V:g,w:d,W:A,x:st,X:pt,y:M,Y:b,Z:_,"%":I};dr.x=tr(Qe,dr),dr.X=tr(Ce,dr),dr.c=tr(ht,dr),Lr.x=tr(Qe,Lr),Lr.X=tr(Ce,Lr),Lr.c=tr(ht,Lr);function tr(Ar,nn){return function(fn){var jr=[],at=-1,Ft=0,er=Ar.length,hr,Wr,zr;for(fn instanceof Date||(fn=new Date(+fn));++at<er;)Ar.charCodeAt(at)===37&&(jr.push(Ar.slice(Ft,at)),(Wr=a[hr=Ar.charAt(++at)])!=null?hr=Ar.charAt(++at):Wr=hr==="e"?" ":"0",(zr=nn[hr])&&(hr=zr(fn,Wr)),jr.push(hr),Ft=at+1);return jr.push(Ar.slice(Ft,at)),jr.join("")}}function Or(Ar,nn){return function(fn){var jr=t(1900,void 0,1),at=et(jr,Ar,fn+="",0),Ft,er;if(at!=fn.length)return null;if("Q"in jr)return new Date(jr.Q);if("s"in jr)return new Date(jr.s*1e3+("L"in jr?jr.L:0));if(nn&&!("Z"in jr)&&(jr.Z=0),"p"in jr&&(jr.H=jr.H%12+jr.p*12),jr.m===void 0&&(jr.m="q"in jr?jr.q:0),"V"in jr){if(jr.V<1||jr.V>53)return null;"w"in jr||(jr.w=1),"Z"in jr?(Ft=x(t(jr.y,0,1)),er=Ft.getUTCDay(),Ft=er>4||er===0?s.utcMonday.ceil(Ft):s.utcMonday(Ft),Ft=s.utcDay.offset(Ft,(jr.V-1)*7),jr.y=Ft.getUTCFullYear(),jr.m=Ft.getUTCMonth(),jr.d=Ft.getUTCDate()+(jr.w+6)%7):(Ft=m(t(jr.y,0,1)),er=Ft.getDay(),Ft=er>4||er===0?s.timeMonday.ceil(Ft):s.timeMonday(Ft),Ft=s.timeDay.offset(Ft,(jr.V-1)*7),jr.y=Ft.getFullYear(),jr.m=Ft.getMonth(),jr.d=Ft.getDate()+(jr.w+6)%7)}else("W"in jr||"U"in jr)&&("w"in jr||(jr.w="u"in jr?jr.u%7:"W"in jr?1:0),er="Z"in jr?x(t(jr.y,0,1)).getUTCDay():m(t(jr.y,0,1)).getDay(),jr.m=0,jr.d="W"in jr?(jr.w+6)%7+jr.W*7-(er+5)%7:jr.w+jr.U*7-(er+6)%7);return"Z"in jr?(jr.H+=jr.Z/100|0,jr.M+=jr.Z%100,x(jr)):m(jr)}}function et(Ar,nn,fn,jr){for(var at=0,Ft=nn.length,er=fn.length,hr,Wr;at<Ft;){if(jr>=er)return-1;if(hr=nn.charCodeAt(at++),hr===37){if(hr=nn.charAt(at++),Wr=kr[hr in a?nn.charAt(at++):hr],!Wr||(jr=Wr(Ar,fn,jr))<0)return-1}else if(hr!=fn.charCodeAt(jr++))return-1}return jr}function we(Ar,nn,fn){var jr=Nt.exec(nn.slice(fn));return jr?(Ar.p=jt[jr[0].toLowerCase()],fn+jr[0].length):-1}function Se(Ar,nn,fn){var jr=Je.exec(nn.slice(fn));return jr?(Ar.w=gt[jr[0].toLowerCase()],fn+jr[0].length):-1}function De(Ar,nn,fn){var jr=Ot.exec(nn.slice(fn));return jr?(Ar.w=Kt[jr[0].toLowerCase()],fn+jr[0].length):-1}function je(Ar,nn,fn){var jr=vr.exec(nn.slice(fn));return jr?(Ar.m=or[jr[0].toLowerCase()],fn+jr[0].length):-1}function $e(Ar,nn,fn){var jr=Et.exec(nn.slice(fn));return jr?(Ar.m=rr[jr[0].toLowerCase()],fn+jr[0].length):-1}function ot(Ar,nn,fn){return et(Ar,ht,nn,fn)}function st(Ar,nn,fn){return et(Ar,Qe,nn,fn)}function pt(Ar,nn,fn){return et(Ar,Ce,nn,fn)}function wt(Ar){return ut[Ar.getDay()]}function Wt(Ar){return rt[Ar.getDay()]}function yr(Ar){return St[Ar.getMonth()]}function xr(Ar){return Pt[Ar.getMonth()]}function Tr(Ar){return Xe[+(Ar.getHours()>=12)]}function mr(Ar){return 1+~~(Ar.getMonth()/3)}function Rr(Ar){return ut[Ar.getUTCDay()]}function tn(Ar){return rt[Ar.getUTCDay()]}function wr(Ar){return St[Ar.getUTCMonth()]}function gr(Ar){return Pt[Ar.getUTCMonth()]}function mn(Ar){return Xe[+(Ar.getUTCHours()>=12)]}function Gr(Ar){return 1+~~(Ar.getUTCMonth()/3)}return{format:function(Ar){var nn=tr(Ar+="",dr);return nn.toString=function(){return Ar},nn},parse:function(Ar){var nn=Or(Ar+="",!1);return nn.toString=function(){return Ar},nn},utcFormat:function(Ar){var nn=tr(Ar+="",Lr);return nn.toString=function(){return Ar},nn},utcParse:function(Ar){var nn=Or(Ar+="",!0);return nn.toString=function(){return Ar},nn}}}var a={"-":"",_:" ","0":"0"},r=/^\s*\d+/,n=/^%/,f=/[\\^$*+?|[\]().{}]/g;function l(it,ht,Qe){var Ce=it<0?"-":"",Xe=(Ce?-it:it)+"",rt=Xe.length;return Ce+(rt<Qe?new Array(Qe-rt+1).join(ht)+Xe:Xe)}function o(it){return it.replace(f,"\\$&")}function c(it){return new RegExp("^(?:"+it.map(o).join("|")+")","i")}function h(it){for(var ht={},Qe=-1,Ce=it.length;++Qe<Ce;)ht[it[Qe].toLowerCase()]=Qe;return ht}function d(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+1));return Ce?(it.w=+Ce[0],Qe+Ce[0].length):-1}function p(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+1));return Ce?(it.u=+Ce[0],Qe+Ce[0].length):-1}function y(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.U=+Ce[0],Qe+Ce[0].length):-1}function g(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.V=+Ce[0],Qe+Ce[0].length):-1}function A(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.W=+Ce[0],Qe+Ce[0].length):-1}function b(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+4));return Ce?(it.y=+Ce[0],Qe+Ce[0].length):-1}function M(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.y=+Ce[0]+(+Ce[0]>68?1900:2e3),Qe+Ce[0].length):-1}function _(it,ht,Qe){var Ce=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ht.slice(Qe,Qe+6));return Ce?(it.Z=Ce[1]?0:-(Ce[2]+(Ce[3]||"00")),Qe+Ce[0].length):-1}function T(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+1));return Ce?(it.q=Ce[0]*3-3,Qe+Ce[0].length):-1}function w(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.m=Ce[0]-1,Qe+Ce[0].length):-1}function v(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.d=+Ce[0],Qe+Ce[0].length):-1}function L(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+3));return Ce?(it.m=0,it.d=+Ce[0],Qe+Ce[0].length):-1}function S(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.H=+Ce[0],Qe+Ce[0].length):-1}function k(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.M=+Ce[0],Qe+Ce[0].length):-1}function P(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+2));return Ce?(it.S=+Ce[0],Qe+Ce[0].length):-1}function O(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+3));return Ce?(it.L=+Ce[0],Qe+Ce[0].length):-1}function F(it,ht,Qe){var Ce=r.exec(ht.slice(Qe,Qe+6));return Ce?(it.L=Math.floor(Ce[0]/1e3),Qe+Ce[0].length):-1}function I(it,ht,Qe){var Ce=n.exec(ht.slice(Qe,Qe+1));return Ce?Qe+Ce[0].length:-1}function D(it,ht,Qe){var Ce=r.exec(ht.slice(Qe));return Ce?(it.Q=+Ce[0],Qe+Ce[0].length):-1}function U(it,ht,Qe){var Ce=r.exec(ht.slice(Qe));return Ce?(it.s=+Ce[0],Qe+Ce[0].length):-1}function B(it,ht){return l(it.getDate(),ht,2)}function j(it,ht){return l(it.getHours(),ht,2)}function Z(it,ht){return l(it.getHours()%12||12,ht,2)}function ee(it,ht){return l(1+s.timeDay.count(s.timeYear(it),it),ht,3)}function q(it,ht){return l(it.getMilliseconds(),ht,3)}function W(it,ht){return q(it,ht)+"000"}function J(it,ht){return l(it.getMonth()+1,ht,2)}function le(it,ht){return l(it.getMinutes(),ht,2)}function fe(it,ht){return l(it.getSeconds(),ht,2)}function se(it){var ht=it.getDay();return ht===0?7:ht}function H(it,ht){return l(s.timeSunday.count(s.timeYear(it)-1,it),ht,2)}function Y(it,ht){var Qe=it.getDay();return it=Qe>=4||Qe===0?s.timeThursday(it):s.timeThursday.ceil(it),l(s.timeThursday.count(s.timeYear(it),it)+(s.timeYear(it).getDay()===4),ht,2)}function ne(it){return it.getDay()}function te(it,ht){return l(s.timeMonday.count(s.timeYear(it)-1,it),ht,2)}function K(it,ht){return l(it.getFullYear()%100,ht,2)}function $(it,ht){return l(it.getFullYear()%1e4,ht,4)}function ae(it){var ht=it.getTimezoneOffset();return(ht>0?"-":(ht*=-1,"+"))+l(ht/60|0,"0",2)+l(ht%60,"0",2)}function ie(it,ht){return l(it.getUTCDate(),ht,2)}function oe(it,ht){return l(it.getUTCHours(),ht,2)}function ue(it,ht){return l(it.getUTCHours()%12||12,ht,2)}function ye(it,ht){return l(1+s.utcDay.count(s.utcYear(it),it),ht,3)}function ce(it,ht){return l(it.getUTCMilliseconds(),ht,3)}function me(it,ht){return ce(it,ht)+"000"}function xe(it,ht){return l(it.getUTCMonth()+1,ht,2)}function ke(it,ht){return l(it.getUTCMinutes(),ht,2)}function Ae(it,ht){return l(it.getUTCSeconds(),ht,2)}function Oe(it){var ht=it.getUTCDay();return ht===0?7:ht}function He(it,ht){return l(s.utcSunday.count(s.utcYear(it)-1,it),ht,2)}function Ge(it,ht){var Qe=it.getUTCDay();return it=Qe>=4||Qe===0?s.utcThursday(it):s.utcThursday.ceil(it),l(s.utcThursday.count(s.utcYear(it),it)+(s.utcYear(it).getUTCDay()===4),ht,2)}function _e(it){return it.getUTCDay()}function Re(it,ht){return l(s.utcMonday.count(s.utcYear(it)-1,it),ht,2)}function We(it,ht){return l(it.getUTCFullYear()%100,ht,2)}function qe(it,ht){return l(it.getUTCFullYear()%1e4,ht,4)}function Ue(){return"+0000"}function Ie(){return"%"}function Ve(it){return+it}function dt(it){return Math.floor(+it/1e3)}var Rt;Gt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Gt(it){return Rt=i(it),u.timeFormat=Rt.format,u.timeParse=Rt.parse,u.utcFormat=Rt.utcFormat,u.utcParse=Rt.utcParse,Rt}var kt="%Y-%m-%dT%H:%M:%S.%LZ";function zt(it){return it.toISOString()}var Bt=Date.prototype.toISOString?zt:u.utcFormat(kt);function Lt(it){var ht=new Date(it);return isNaN(ht)?null:ht}var Mt=+new Date("2000-01-01T00:00:00.000Z")?Lt:u.utcParse(kt);u.isoFormat=Bt,u.isoParse=Mt,u.timeFormatDefaultLocale=Gt,u.timeFormatLocale=i,Object.defineProperty(u,"__esModule",{value:!0})})},{"d3-time":121}],121:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s=new Date,m=new Date;function x(_e,Re,We,qe){function Ue(Ie){return _e(Ie=arguments.length===0?new Date:new Date(+Ie)),Ie}return Ue.floor=function(Ie){return _e(Ie=new Date(+Ie)),Ie},Ue.ceil=function(Ie){return _e(Ie=new Date(Ie-1)),Re(Ie,1),_e(Ie),Ie},Ue.round=function(Ie){var Ve=Ue(Ie),dt=Ue.ceil(Ie);return Ie-Ve<dt-Ie?Ve:dt},Ue.offset=function(Ie,Ve){return Re(Ie=new Date(+Ie),Ve==null?1:Math.floor(Ve)),Ie},Ue.range=function(Ie,Ve,dt){var Rt=[],Gt;if(Ie=Ue.ceil(Ie),dt=dt==null?1:Math.floor(dt),!(Ie<Ve)||!(dt>0))return Rt;do Rt.push(Gt=new Date(+Ie)),Re(Ie,dt),_e(Ie);while(Gt<Ie&&Ie<Ve);return Rt},Ue.filter=function(Ie){return x(function(Ve){if(Ve>=Ve)for(;_e(Ve),!Ie(Ve);)Ve.setTime(Ve-1)},function(Ve,dt){if(Ve>=Ve)if(dt<0)for(;++dt<=0;)for(;Re(Ve,-1),!Ie(Ve););else for(;--dt>=0;)for(;Re(Ve,1),!Ie(Ve););})},We&&(Ue.count=function(Ie,Ve){return s.setTime(+Ie),m.setTime(+Ve),_e(s),_e(m),Math.floor(We(s,m))},Ue.every=function(Ie){return Ie=Math.floor(Ie),!isFinite(Ie)||!(Ie>0)?null:Ie>1?Ue.filter(qe?function(Ve){return qe(Ve)%Ie==0}:function(Ve){return Ue.count(0,Ve)%Ie==0}):Ue}),Ue}var t=x(function(){},function(_e,Re){_e.setTime(+_e+Re)},function(_e,Re){return Re-_e});t.every=function(_e){return _e=Math.floor(_e),!isFinite(_e)||!(_e>0)?null:_e>1?x(function(Re){Re.setTime(Math.floor(Re/_e)*_e)},function(Re,We){Re.setTime(+Re+We*_e)},function(Re,We){return(We-Re)/_e}):t};var i=t.range,a=1e3,r=6e4,n=36e5,f=864e5,l=6048e5,o=x(function(_e){_e.setTime(_e-_e.getMilliseconds())},function(_e,Re){_e.setTime(+_e+Re*a)},function(_e,Re){return(Re-_e)/a},function(_e){return _e.getUTCSeconds()}),c=o.range,h=x(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a)},function(_e,Re){_e.setTime(+_e+Re*r)},function(_e,Re){return(Re-_e)/r},function(_e){return _e.getMinutes()}),d=h.range,p=x(function(_e){_e.setTime(_e-_e.getMilliseconds()-_e.getSeconds()*a-_e.getMinutes()*r)},function(_e,Re){_e.setTime(+_e+Re*n)},function(_e,Re){return(Re-_e)/n},function(_e){return _e.getHours()}),y=p.range,g=x(function(_e){_e.setHours(0,0,0,0)},function(_e,Re){_e.setDate(_e.getDate()+Re)},function(_e,Re){return(Re-_e-(Re.getTimezoneOffset()-_e.getTimezoneOffset())*r)/f},function(_e){return _e.getDate()-1}),A=g.range;function b(_e){return x(function(Re){Re.setDate(Re.getDate()-(Re.getDay()+7-_e)%7),Re.setHours(0,0,0,0)},function(Re,We){Re.setDate(Re.getDate()+We*7)},function(Re,We){return(We-Re-(We.getTimezoneOffset()-Re.getTimezoneOffset())*r)/l})}var M=b(0),_=b(1),T=b(2),w=b(3),v=b(4),L=b(5),S=b(6),k=M.range,P=_.range,O=T.range,F=w.range,I=v.range,D=L.range,U=S.range,B=x(function(_e){_e.setDate(1),_e.setHours(0,0,0,0)},function(_e,Re){_e.setMonth(_e.getMonth()+Re)},function(_e,Re){return Re.getMonth()-_e.getMonth()+(Re.getFullYear()-_e.getFullYear())*12},function(_e){return _e.getMonth()}),j=B.range,Z=x(function(_e){_e.setMonth(0,1),_e.setHours(0,0,0,0)},function(_e,Re){_e.setFullYear(_e.getFullYear()+Re)},function(_e,Re){return Re.getFullYear()-_e.getFullYear()},function(_e){return _e.getFullYear()});Z.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:x(function(Re){Re.setFullYear(Math.floor(Re.getFullYear()/_e)*_e),Re.setMonth(0,1),Re.setHours(0,0,0,0)},function(Re,We){Re.setFullYear(Re.getFullYear()+We*_e)})};var ee=Z.range,q=x(function(_e){_e.setUTCSeconds(0,0)},function(_e,Re){_e.setTime(+_e+Re*r)},function(_e,Re){return(Re-_e)/r},function(_e){return _e.getUTCMinutes()}),W=q.range,J=x(function(_e){_e.setUTCMinutes(0,0,0)},function(_e,Re){_e.setTime(+_e+Re*n)},function(_e,Re){return(Re-_e)/n},function(_e){return _e.getUTCHours()}),le=J.range,fe=x(function(_e){_e.setUTCHours(0,0,0,0)},function(_e,Re){_e.setUTCDate(_e.getUTCDate()+Re)},function(_e,Re){return(Re-_e)/f},function(_e){return _e.getUTCDate()-1}),se=fe.range;function H(_e){return x(function(Re){Re.setUTCDate(Re.getUTCDate()-(Re.getUTCDay()+7-_e)%7),Re.setUTCHours(0,0,0,0)},function(Re,We){Re.setUTCDate(Re.getUTCDate()+We*7)},function(Re,We){return(We-Re)/l})}var Y=H(0),ne=H(1),te=H(2),K=H(3),$=H(4),ae=H(5),ie=H(6),oe=Y.range,ue=ne.range,ye=te.range,ce=K.range,me=$.range,xe=ae.range,ke=ie.range,Ae=x(function(_e){_e.setUTCDate(1),_e.setUTCHours(0,0,0,0)},function(_e,Re){_e.setUTCMonth(_e.getUTCMonth()+Re)},function(_e,Re){return Re.getUTCMonth()-_e.getUTCMonth()+(Re.getUTCFullYear()-_e.getUTCFullYear())*12},function(_e){return _e.getUTCMonth()}),Oe=Ae.range,He=x(function(_e){_e.setUTCMonth(0,1),_e.setUTCHours(0,0,0,0)},function(_e,Re){_e.setUTCFullYear(_e.getUTCFullYear()+Re)},function(_e,Re){return Re.getUTCFullYear()-_e.getUTCFullYear()},function(_e){return _e.getUTCFullYear()});He.every=function(_e){return!isFinite(_e=Math.floor(_e))||!(_e>0)?null:x(function(Re){Re.setUTCFullYear(Math.floor(Re.getUTCFullYear()/_e)*_e),Re.setUTCMonth(0,1),Re.setUTCHours(0,0,0,0)},function(Re,We){Re.setUTCFullYear(Re.getUTCFullYear()+We*_e)})};var Ge=He.range;u.timeDay=g,u.timeDays=A,u.timeFriday=L,u.timeFridays=D,u.timeHour=p,u.timeHours=y,u.timeInterval=x,u.timeMillisecond=t,u.timeMilliseconds=i,u.timeMinute=h,u.timeMinutes=d,u.timeMonday=_,u.timeMondays=P,u.timeMonth=B,u.timeMonths=j,u.timeSaturday=S,u.timeSaturdays=U,u.timeSecond=o,u.timeSeconds=c,u.timeSunday=M,u.timeSundays=k,u.timeThursday=v,u.timeThursdays=I,u.timeTuesday=T,u.timeTuesdays=O,u.timeWednesday=w,u.timeWednesdays=F,u.timeWeek=M,u.timeWeeks=k,u.timeYear=Z,u.timeYears=ee,u.utcDay=fe,u.utcDays=se,u.utcFriday=ae,u.utcFridays=xe,u.utcHour=J,u.utcHours=le,u.utcMillisecond=t,u.utcMilliseconds=i,u.utcMinute=q,u.utcMinutes=W,u.utcMonday=ne,u.utcMondays=ue,u.utcMonth=Ae,u.utcMonths=Oe,u.utcSaturday=ie,u.utcSaturdays=ke,u.utcSecond=o,u.utcSeconds=c,u.utcSunday=Y,u.utcSundays=oe,u.utcThursday=$,u.utcThursdays=me,u.utcTuesday=te,u.utcTuesdays=ye,u.utcWednesday=K,u.utcWednesdays=ce,u.utcWeek=Y,u.utcWeeks=oe,u.utcYear=He,u.utcYears=Ge,Object.defineProperty(u,"__esModule",{value:!0})})},{}],122:[function(e,z,N){arguments[4][121][0].apply(N,arguments)},{dup:121}],123:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.d3=u.d3||{}))})(this,function(u){var s=0,m=0,x=0,t=1e3,i,a,r=0,n=0,f=0,l=typeof performance=="object"&&performance.now?performance:Date,o=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(w){setTimeout(w,17)};function c(){return n||(o(h),n=l.now()+f)}function h(){n=0}function d(){this._call=this._time=this._next=null}d.prototype=p.prototype={constructor:d,restart:function(w,v,L){if(typeof w!="function")throw new TypeError("callback is not a function");L=(L==null?c():+L)+(v==null?0:+v),!this._next&&a!==this&&(a?a._next=this:i=this,a=this),this._call=w,this._time=L,M()},stop:function(){this._call&&(this._call=null,this._time=1/0,M())}};function p(w,v,L){var S=new d;return S.restart(w,v,L),S}function y(){c(),++s;for(var w=i,v;w;)(v=n-w._time)>=0&&w._call.call(null,v),w=w._next;--s}function g(){n=(r=l.now())+f,s=m=0;try{y()}finally{s=0,b(),n=0}}function A(){var w=l.now(),v=w-r;v>t&&(f-=v,r=w)}function b(){for(var w,v=i,L,S=1/0;v;)v._call?(S>v._time&&(S=v._time),w=v,v=v._next):(L=v._next,v._next=null,v=w?w._next=L:i=L);a=w,M(S)}function M(w){if(!s){m&&(m=clearTimeout(m));var v=w-n;v>24?(w<1/0&&(m=setTimeout(g,w-l.now()-f)),x&&(x=clearInterval(x))):(x||(r=l.now(),x=setInterval(A,t)),s=1,o(g))}}function _(w,v,L){var S=new d;return v=v==null?0:+v,S.restart(function(k){S.stop(),w(k+v)},v,L),S}function T(w,v,L){var S=new d,k=v;return v==null?(S.restart(w,v,L),S):(v=+v,L=L==null?c():+L,S.restart(function P(O){O+=k,S.restart(P,k+=v,L),w(O)},v,L),S)}u.interval=T,u.now=c,u.timeout=_,u.timer=p,u.timerFlush=y,Object.defineProperty(u,"__esModule",{value:!0})})},{}],124:[function(e,z,N){z.exports=function(){for(var u=0;u<arguments.length;u++)if(arguments[u]!==void 0)return arguments[u]}},{}],125:[function(e,z,N){z.exports=x;var u=x.canvas=document.createElement("canvas"),s=u.getContext("2d"),m=t([32,126]);x.createPairs=t,x.ascii=m;function x(i,a){Array.isArray(i)&&(i=i.join(", "));var r={},n,f=16,l=.05;a&&(a.length===2&&typeof a[0]=="number"?n=t(a):Array.isArray(a)?n=a:(a.o?n=t(a.o):a.pairs&&(n=a.pairs),a.fontSize&&(f=a.fontSize),a.threshold!=null&&(l=a.threshold))),n||(n=m),s.font=f+"px "+i;for(var o=0;o<n.length;o++){var c=n[o],h=s.measureText(c[0]).width+s.measureText(c[1]).width,d=s.measureText(c).width;if(Math.abs(h-d)>f*l){var p=(d-h)/f;r[c]=p*1e3}}return r}function t(i){for(var a=[],r=i[0];r<=i[1];r++)for(var n=String.fromCharCode(r),f=i[0];f<i[1];f++){var l=String.fromCharCode(f),o=n+l;a.push(o)}return a}},{}],126:[function(e,z,N){var u=e("abs-svg-path"),s=e("normalize-svg-path"),m={M:"moveTo",C:"bezierCurveTo"};z.exports=function(x,t){x.beginPath(),s(u(t)).forEach(function(i){var a=i[0],r=i.slice(1);x[m[a]].apply(x,r)}),x.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(e,z,N){z.exports=function(u){switch(u){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(e,z,N){function u(x,t,i){var a=x[i]|0;if(a<=0)return[];var r=new Array(a),n;if(i===x.length-1)for(n=0;n<a;++n)r[n]=t;else for(n=0;n<a;++n)r[n]=u(x,t,i+1);return r}function s(x,t){var i,a;for(i=new Array(x),a=0;a<x;++a)i[a]=t;return i}function m(x,t){switch(typeof t=="undefined"&&(t=0),typeof x){case"number":if(x>0)return s(x|0,t);break;case"object":if(typeof x.length=="number")return u(x,t,0);break}return[]}z.exports=m},{}],129:[function(e,z,N){z.exports=u,z.exports.default=u;function u(D,U,B){B=B||2;var j=U&&U.length,Z=j?U[0]*B:D.length,ee=s(D,0,Z,B,!0),q=[];if(!ee||ee.next===ee.prev)return q;var W,J,le,fe,se,H,Y;if(j&&(ee=n(D,U,ee,B)),D.length>80*B){W=le=D[0],J=fe=D[1];for(var ne=B;ne<Z;ne+=B)se=D[ne],H=D[ne+1],se<W&&(W=se),H<J&&(J=H),se>le&&(le=se),H>fe&&(fe=H);Y=Math.max(le-W,fe-J),Y=Y!==0?1/Y:0}return x(ee,q,B,W,J,Y),q}function s(D,U,B,j,Z){var ee,q;if(Z===I(D,U,B,j)>0)for(ee=U;ee<B;ee+=j)q=P(ee,D[ee],D[ee+1],q);else for(ee=B-j;ee>=U;ee-=j)q=P(ee,D[ee],D[ee+1],q);return q&&M(q,q.next)&&(O(q),q=q.next),q}function m(D,U){if(!D)return D;U||(U=D);var B=D,j;do if(j=!1,!B.steiner&&(M(B,B.next)||b(B.prev,B,B.next)===0)){if(O(B),B=U=B.prev,B===B.next)break;j=!0}else B=B.next;while(j||B!==U);return U}function x(D,U,B,j,Z,ee,q){if(!!D){!q&&ee&&h(D,j,Z,ee);for(var W=D,J,le;D.prev!==D.next;){if(J=D.prev,le=D.next,ee?i(D,j,Z,ee):t(D)){U.push(J.i/B),U.push(D.i/B),U.push(le.i/B),O(D),D=le.next,W=le.next;continue}if(D=le,D===W){q?q===1?(D=a(m(D),U,B),x(D,U,B,j,Z,ee,2)):q===2&&r(D,U,B,j,Z,ee):x(m(D),U,B,j,Z,ee,1);break}}}}function t(D){var U=D.prev,B=D,j=D.next;if(b(U,B,j)>=0)return!1;for(var Z=D.next.next;Z!==D.prev;){if(g(U.x,U.y,B.x,B.y,j.x,j.y,Z.x,Z.y)&&b(Z.prev,Z,Z.next)>=0)return!1;Z=Z.next}return!0}function i(D,U,B,j){var Z=D.prev,ee=D,q=D.next;if(b(Z,ee,q)>=0)return!1;for(var W=Z.x<ee.x?Z.x<q.x?Z.x:q.x:ee.x<q.x?ee.x:q.x,J=Z.y<ee.y?Z.y<q.y?Z.y:q.y:ee.y<q.y?ee.y:q.y,le=Z.x>ee.x?Z.x>q.x?Z.x:q.x:ee.x>q.x?ee.x:q.x,fe=Z.y>ee.y?Z.y>q.y?Z.y:q.y:ee.y>q.y?ee.y:q.y,se=p(W,J,U,B,j),H=p(le,fe,U,B,j),Y=D.prevZ,ne=D.nextZ;Y&&Y.z>=se&&ne&&ne.z<=H;){if(Y!==D.prev&&Y!==D.next&&g(Z.x,Z.y,ee.x,ee.y,q.x,q.y,Y.x,Y.y)&&b(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,ne!==D.prev&&ne!==D.next&&g(Z.x,Z.y,ee.x,ee.y,q.x,q.y,ne.x,ne.y)&&b(ne.prev,ne,ne.next)>=0))return!1;ne=ne.nextZ}for(;Y&&Y.z>=se;){if(Y!==D.prev&&Y!==D.next&&g(Z.x,Z.y,ee.x,ee.y,q.x,q.y,Y.x,Y.y)&&b(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;ne&&ne.z<=H;){if(ne!==D.prev&&ne!==D.next&&g(Z.x,Z.y,ee.x,ee.y,q.x,q.y,ne.x,ne.y)&&b(ne.prev,ne,ne.next)>=0)return!1;ne=ne.nextZ}return!0}function a(D,U,B){var j=D;do{var Z=j.prev,ee=j.next.next;!M(Z,ee)&&_(Z,j,j.next,ee)&&L(Z,ee)&&L(ee,Z)&&(U.push(Z.i/B),U.push(j.i/B),U.push(ee.i/B),O(j),O(j.next),j=D=ee),j=j.next}while(j!==D);return m(j)}function r(D,U,B,j,Z,ee){var q=D;do{for(var W=q.next.next;W!==q.prev;){if(q.i!==W.i&&A(q,W)){var J=k(q,W);q=m(q,q.next),J=m(J,J.next),x(q,U,B,j,Z,ee),x(J,U,B,j,Z,ee);return}W=W.next}q=q.next}while(q!==D)}function n(D,U,B,j){var Z=[],ee,q,W,J,le;for(ee=0,q=U.length;ee<q;ee++)W=U[ee]*j,J=ee<q-1?U[ee+1]*j:D.length,le=s(D,W,J,j,!1),le===le.next&&(le.steiner=!0),Z.push(y(le));for(Z.sort(f),ee=0;ee<Z.length;ee++)l(Z[ee],B),B=m(B,B.next);return B}function f(D,U){return D.x-U.x}function l(D,U){if(U=o(D,U),U){var B=k(U,D);m(U,U.next),m(B,B.next)}}function o(D,U){var B=U,j=D.x,Z=D.y,ee=-1/0,q;do{if(Z<=B.y&&Z>=B.next.y&&B.next.y!==B.y){var W=B.x+(Z-B.y)*(B.next.x-B.x)/(B.next.y-B.y);if(W<=j&&W>ee){if(ee=W,W===j){if(Z===B.y)return B;if(Z===B.next.y)return B.next}q=B.x<B.next.x?B:B.next}}B=B.next}while(B!==U);if(!q)return null;if(j===ee)return q;var J=q,le=q.x,fe=q.y,se=1/0,H;B=q;do j>=B.x&&B.x>=le&&j!==B.x&&g(Z<fe?j:ee,Z,le,fe,Z<fe?ee:j,Z,B.x,B.y)&&(H=Math.abs(Z-B.y)/(j-B.x),L(B,D)&&(H<se||H===se&&(B.x>q.x||B.x===q.x&&c(q,B)))&&(q=B,se=H)),B=B.next;while(B!==J);return q}function c(D,U){return b(D.prev,D,U.prev)<0&&b(U.next,D,D.next)<0}function h(D,U,B,j){var Z=D;do Z.z===null&&(Z.z=p(Z.x,Z.y,U,B,j)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==D);Z.prevZ.nextZ=null,Z.prevZ=null,d(Z)}function d(D){var U,B,j,Z,ee,q,W,J,le=1;do{for(B=D,D=null,ee=null,q=0;B;){for(q++,j=B,W=0,U=0;U<le&&(W++,j=j.nextZ,!!j);U++);for(J=le;W>0||J>0&&j;)W!==0&&(J===0||!j||B.z<=j.z)?(Z=B,B=B.nextZ,W--):(Z=j,j=j.nextZ,J--),ee?ee.nextZ=Z:D=Z,Z.prevZ=ee,ee=Z;B=j}ee.nextZ=null,le*=2}while(q>1);return D}function p(D,U,B,j,Z){return D=32767*(D-B)*Z,U=32767*(U-j)*Z,D=(D|D<<8)&16711935,D=(D|D<<4)&252645135,D=(D|D<<2)&858993459,D=(D|D<<1)&1431655765,U=(U|U<<8)&16711935,U=(U|U<<4)&252645135,U=(U|U<<2)&858993459,U=(U|U<<1)&1431655765,D|U<<1}function y(D){var U=D,B=D;do(U.x<B.x||U.x===B.x&&U.y<B.y)&&(B=U),U=U.next;while(U!==D);return B}function g(D,U,B,j,Z,ee,q,W){return(Z-q)*(U-W)-(D-q)*(ee-W)>=0&&(D-q)*(j-W)-(B-q)*(U-W)>=0&&(B-q)*(ee-W)-(Z-q)*(j-W)>=0}function A(D,U){return D.next.i!==U.i&&D.prev.i!==U.i&&!v(D,U)&&(L(D,U)&&L(U,D)&&S(D,U)&&(b(D.prev,D,U.prev)||b(D,U.prev,U))||M(D,U)&&b(D.prev,D,D.next)>0&&b(U.prev,U,U.next)>0)}function b(D,U,B){return(U.y-D.y)*(B.x-U.x)-(U.x-D.x)*(B.y-U.y)}function M(D,U){return D.x===U.x&&D.y===U.y}function _(D,U,B,j){var Z=w(b(D,U,B)),ee=w(b(D,U,j)),q=w(b(B,j,D)),W=w(b(B,j,U));return!!(Z!==ee&&q!==W||Z===0&&T(D,B,U)||ee===0&&T(D,j,U)||q===0&&T(B,D,j)||W===0&&T(B,U,j))}function T(D,U,B){return U.x<=Math.max(D.x,B.x)&&U.x>=Math.min(D.x,B.x)&&U.y<=Math.max(D.y,B.y)&&U.y>=Math.min(D.y,B.y)}function w(D){return D>0?1:D<0?-1:0}function v(D,U){var B=D;do{if(B.i!==D.i&&B.next.i!==D.i&&B.i!==U.i&&B.next.i!==U.i&&_(B,B.next,D,U))return!0;B=B.next}while(B!==D);return!1}function L(D,U){return b(D.prev,D,D.next)<0?b(D,U,D.next)>=0&&b(D,D.prev,U)>=0:b(D,U,D.prev)<0||b(D,D.next,U)<0}function S(D,U){var B=D,j=!1,Z=(D.x+U.x)/2,ee=(D.y+U.y)/2;do B.y>ee!=B.next.y>ee&&B.next.y!==B.y&&Z<(B.next.x-B.x)*(ee-B.y)/(B.next.y-B.y)+B.x&&(j=!j),B=B.next;while(B!==D);return j}function k(D,U){var B=new F(D.i,D.x,D.y),j=new F(U.i,U.x,U.y),Z=D.next,ee=U.prev;return D.next=U,U.prev=D,B.next=Z,Z.prev=B,j.next=B,B.prev=j,ee.next=j,j.prev=ee,j}function P(D,U,B,j){var Z=new F(D,U,B);return j?(Z.next=j.next,Z.prev=j,j.next.prev=Z,j.next=Z):(Z.prev=Z,Z.next=Z),Z}function O(D){D.next.prev=D.prev,D.prev.next=D.next,D.prevZ&&(D.prevZ.nextZ=D.nextZ),D.nextZ&&(D.nextZ.prevZ=D.prevZ)}function F(D,U,B){this.i=D,this.x=U,this.y=B,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}u.deviation=function(D,U,B,j){var Z=U&&U.length,ee=Z?U[0]*B:D.length,q=Math.abs(I(D,0,ee,B));if(Z)for(var W=0,J=U.length;W<J;W++){var le=U[W]*B,fe=W<J-1?U[W+1]*B:D.length;q-=Math.abs(I(D,le,fe,B))}var se=0;for(W=0;W<j.length;W+=3){var H=j[W]*B,Y=j[W+1]*B,ne=j[W+2]*B;se+=Math.abs((D[H]-D[ne])*(D[Y+1]-D[H+1])-(D[H]-D[Y])*(D[ne+1]-D[H+1]))}return q===0&&se===0?0:Math.abs((se-q)/q)};function I(D,U,B,j){for(var Z=0,ee=U,q=B-j;ee<B;ee+=j)Z+=(D[q]-D[ee])*(D[ee+1]+D[q+1]),q=ee;return Z}u.flatten=function(D){for(var U=D[0][0].length,B={vertices:[],holes:[],dimensions:U},j=0,Z=0;Z<D.length;Z++){for(var ee=0;ee<D[Z].length;ee++)for(var q=0;q<U;q++)B.vertices.push(D[Z][ee][q]);Z>0&&(j+=D[Z-1].length,B.holes.push(j))}return B}},{}],130:[function(e,z,N){var u=e("strongly-connected-components");z.exports=function(m,x){var t=[],i=[],a=[],r={},n=[],f;function l(M){a[M]=!1,r.hasOwnProperty(M)&&Object.keys(r[M]).forEach(function(_){delete r[M][_],a[_]&&l(_)})}function o(M){var _=!1;i.push(M),a[M]=!0;var T,w;for(T=0;T<n[M].length;T++)w=n[M][T],w===f?(c(f,i),_=!0):a[w]||(_=o(w));if(_)l(M);else for(T=0;T<n[M].length;T++){w=n[M][T];var v=r[w];v||(v={},r[w]=v),v[w]=!0}return i.pop(),_}function c(M,_){var T=[].concat(_).concat(M);x?x(o):t.push(T)}function h(M){for(var _=0;_<m.length;_++)_<M&&(m[_]=[]),m[_]=m[_].filter(function(T){return T>=M})}function d(M){h(M);for(var _=m,T=u(_),w=T.components.filter(function(F){return F.length>1}),v=1/0,L,S=0;S<w.length;S++)for(var k=0;k<w[S].length;k++)w[S][k]<v&&(v=w[S][k],L=S);var P=w[L];if(!P)return!1;var O=m.map(function(F,I){return P.indexOf(I)===-1?[]:F.filter(function(D){return P.indexOf(D)!==-1})});return{leastVertex:v,adjList:O}}f=0;for(var p=m.length;f<p;){var y=d(f);if(f=y.leastVertex,n=y.adjList,n){for(var g=0;g<n.length;g++)for(var A=0;A<n[g].length;A++){var b=n[g][A];a[+b]=!1,r[b]={}}o(f),f=f+1}else f=p}if(!x)return t}},{"strongly-connected-components":306}],131:[function(e,z,N){var u=e("../../object/valid-value");z.exports=function(){return u(this).length=0,this}},{"../../object/valid-value":162}],132:[function(e,z,N){z.exports=e("./is-implemented")()?Array.from:e("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(e,z,N){z.exports=function(){var u=Array.from,s,m;return typeof u!="function"?!1:(s=["raz","dwa"],m=u(s),Boolean(m&&m!==s&&m[1]==="dwa"))}},{}],134:[function(e,z,N){var u=e("es6-symbol").iterator,s=e("../../function/is-arguments"),m=e("../../function/is-function"),x=e("../../number/to-pos-integer"),t=e("../../object/valid-callable"),i=e("../../object/valid-value"),a=e("../../object/is-value"),r=e("../../string/is-string"),n=Array.isArray,f=Function.prototype.call,l={configurable:!0,enumerable:!0,writable:!0,value:null},o=Object.defineProperty;z.exports=function(c){var h=arguments[1],d=arguments[2],p,y,g,A,b,M,_,T,w,v;if(c=Object(i(c)),a(h)&&t(h),!this||this===Array||!m(this)){if(!h){if(s(c))return b=c.length,b!==1?Array.apply(null,c):(A=new Array(1),A[0]=c[0],A);if(n(c)){for(A=new Array(b=c.length),y=0;y<b;++y)A[y]=c[y];return A}}A=[]}else p=this;if(!n(c)){if((w=c[u])!==void 0){for(_=t(w).call(c),p&&(A=new p),T=_.next(),y=0;!T.done;)v=h?f.call(h,d,T.value,y):T.value,p?(l.value=v,o(A,y,l)):A[y]=v,T=_.next(),++y;b=y}else if(r(c)){for(b=c.length,p&&(A=new p),y=0,g=0;y<b;++y)v=c[y],y+1<b&&(M=v.charCodeAt(0),M>=55296&&M<=56319&&(v+=c[++y])),v=h?f.call(h,d,v,g):v,p?(l.value=v,o(A,g,l)):A[g]=v,++g;b=g}}if(b===void 0)for(b=x(c.length),p&&(A=new p(b)),y=0;y<b;++y)v=h?f.call(h,d,c[y],y):c[y],p?(l.value=v,o(A,y,l)):A[y]=v;return p&&(l.value=null,A.length=b),A}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(e,z,N){var u=Object.prototype.toString,s=u.call(function(){return arguments}());z.exports=function(m){return u.call(m)===s}},{}],136:[function(e,z,N){var u=Object.prototype.toString,s=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);z.exports=function(m){return typeof m=="function"&&s(u.call(m))}},{}],137:[function(e,z,N){z.exports=function(){}},{}],138:[function(e,z,N){z.exports=e("./is-implemented")()?Math.sign:e("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(e,z,N){z.exports=function(){var u=Math.sign;return typeof u!="function"?!1:u(10)===1&&u(-20)===-1}},{}],140:[function(e,z,N){z.exports=function(u){return u=Number(u),isNaN(u)||u===0?u:u>0?1:-1}},{}],141:[function(e,z,N){var u=e("../math/sign"),s=Math.abs,m=Math.floor;z.exports=function(x){return isNaN(x)?0:(x=Number(x),x===0||!isFinite(x)?x:u(x)*m(s(x)))}},{"../math/sign":138}],142:[function(e,z,N){var u=e("./to-integer"),s=Math.max;z.exports=function(m){return s(0,u(m))}},{"./to-integer":141}],143:[function(e,z,N){var u=e("./valid-callable"),s=e("./valid-value"),m=Function.prototype.bind,x=Function.prototype.call,t=Object.keys,i=Object.prototype.propertyIsEnumerable;z.exports=function(a,r){return function(n,f){var l,o=arguments[2],c=arguments[3];return n=Object(s(n)),u(f),l=t(n),c&&l.sort(typeof c=="function"?m.call(c,n):void 0),typeof a!="function"&&(a=l[a]),x.call(a,l,function(h,d){return i.call(n,h)?x.call(f,o,n[h],h,n,d):r})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(e,z,N){z.exports=e("./is-implemented")()?Object.assign:e("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(e,z,N){z.exports=function(){var u=Object.assign,s;return typeof u!="function"?!1:(s={foo:"raz"},u(s,{bar:"dwa"},{trzy:"trzy"}),s.foo+s.bar+s.trzy==="razdwatrzy")}},{}],146:[function(e,z,N){var u=e("../keys"),s=e("../valid-value"),m=Math.max;z.exports=function(x,t){var i,a,r=m(arguments.length,2),n;for(x=Object(s(x)),n=function(f){try{x[f]=t[f]}catch(l){i||(i=l)}},a=1;a<r;++a)t=arguments[a],u(t).forEach(n);if(i!==void 0)throw i;return x}},{"../keys":152,"../valid-value":162}],147:[function(e,z,N){var u=e("../array/from"),s=e("./assign"),m=e("./valid-value");z.exports=function(x){var t=Object(m(x)),i=arguments[1],a=Object(arguments[2]);if(t!==x&&!i)return t;var r={};return i?u(i,function(n){(a.ensure||n in x)&&(r[n]=x[n])}):s(r,x),r}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(e,z,N){var u=Object.create,s;e("./set-prototype-of/is-implemented")()||(s=e("./set-prototype-of/shim")),z.exports=function(){var m,x,t;return!s||s.level!==1?u:(m={},x={},t={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(i){if(i==="__proto__"){x[i]={configurable:!0,enumerable:!1,writable:!0,value:void 0};return}x[i]=t}),Object.defineProperties(m,x),Object.defineProperty(s,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:m}),function(i,a){return u(i===null?m:i,a)})}()},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(e,z,N){z.exports=e("./_iterate")("forEach")},{"./_iterate":143}],150:[function(e,z,N){var u=e("./is-value"),s={function:!0,object:!0};z.exports=function(m){return u(m)&&s[typeof m]||!1}},{"./is-value":151}],151:[function(e,z,N){var u=e("../function/noop")();z.exports=function(s){return s!==u&&s!==null}},{"../function/noop":137}],152:[function(e,z,N){z.exports=e("./is-implemented")()?Object.keys:e("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(e,z,N){z.exports=function(){try{return Object.keys("primitive"),!0}catch{return!1}}},{}],154:[function(e,z,N){var u=e("../is-value"),s=Object.keys;z.exports=function(m){return s(u(m)?Object(m):m)}},{"../is-value":151}],155:[function(e,z,N){var u=e("./valid-callable"),s=e("./for-each"),m=Function.prototype.call;z.exports=function(x,t){var i={},a=arguments[2];return u(t),s(x,function(r,n,f,l){i[n]=m.call(t,a,r,n,f,l)}),i}},{"./for-each":149,"./valid-callable":160}],156:[function(e,z,N){var u=e("./is-value"),s=Array.prototype.forEach,m=Object.create,x=function(t,i){var a;for(a in t)i[a]=t[a]};z.exports=function(t){var i=m(null);return s.call(arguments,function(a){!u(a)||x(Object(a),i)}),i}},{"./is-value":151}],157:[function(e,z,N){z.exports=e("./is-implemented")()?Object.setPrototypeOf:e("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(e,z,N){var u=Object.create,s=Object.getPrototypeOf,m={};z.exports=function(){var x=Object.setPrototypeOf,t=arguments[0]||u;return typeof x!="function"?!1:s(x(t(null),m))===m}},{}],159:[function(e,z,N){var u=e("../is-object"),s=e("../valid-value"),m=Object.prototype.isPrototypeOf,x=Object.defineProperty,t={configurable:!0,enumerable:!1,writable:!0,value:void 0},i;i=function(a,r){if(s(a),r===null||u(r))return a;throw new TypeError("Prototype must be null or an object")},z.exports=function(a){var r,n;return a?(a.level===2?a.set?(n=a.set,r=function(f,l){return n.call(i(f,l),l),f}):r=function(f,l){return i(f,l).__proto__=l,f}:r=function f(l,o){var c;return i(l,o),c=m.call(f.nullPolyfill,l),c&&delete f.nullPolyfill.__proto__,o===null&&(o=f.nullPolyfill),l.__proto__=o,c&&x(f.nullPolyfill,"__proto__",t),l},Object.defineProperty(r,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null}(function(){var a=Object.create(null),r={},n,f=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(f){try{n=f.set,n.call(a,r)}catch{}if(Object.getPrototypeOf(a)===r)return{set:n,level:2}}return a.__proto__=r,Object.getPrototypeOf(a)===r?{level:2}:(a={},a.__proto__=r,Object.getPrototypeOf(a)===r?{level:1}:!1)}()),e("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(e,z,N){z.exports=function(u){if(typeof u!="function")throw new TypeError(u+" is not a function");return u}},{}],161:[function(e,z,N){var u=e("./is-object");z.exports=function(s){if(!u(s))throw new TypeError(s+" is not an Object");return s}},{"./is-object":150}],162:[function(e,z,N){var u=e("./is-value");z.exports=function(s){if(!u(s))throw new TypeError("Cannot use null or undefined");return s}},{"./is-value":151}],163:[function(e,z,N){z.exports=e("./is-implemented")()?String.prototype.contains:e("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(e,z,N){var u="razdwatrzy";z.exports=function(){return typeof u.contains!="function"?!1:u.contains("dwa")===!0&&u.contains("foo")===!1}},{}],165:[function(e,z,N){var u=String.prototype.indexOf;z.exports=function(s){return u.call(this,s,arguments[1])>-1}},{}],166:[function(e,z,N){var u=Object.prototype.toString,s=u.call("");z.exports=function(m){return typeof m=="string"||m&&typeof m=="object"&&(m instanceof String||u.call(m)===s)||!1}},{}],167:[function(e,z,N){var u=Object.create(null),s=Math.random;z.exports=function(){var m;do m=s().toString(36).slice(2);while(u[m]);return m}},{}],168:[function(e,z,N){var u=e("es5-ext/object/set-prototype-of"),s=e("es5-ext/string/#/contains"),m=e("d"),x=e("es6-symbol"),t=e("./"),i=Object.defineProperty,a;a=z.exports=function(r,n){if(!(this instanceof a))throw new TypeError("Constructor requires 'new'");t.call(this,r),n?s.call(n,"key+value")?n="key+value":s.call(n,"key")?n="key":n="value":n="value",i(this,"__kind__",m("",n))},u&&u(a,t),delete a.prototype.constructor,a.prototype=Object.create(t.prototype,{_resolve:m(function(r){return this.__kind__==="value"?this.__list__[r]:this.__kind__==="key+value"?[r,this.__list__[r]]:r})}),i(a.prototype,x.toStringTag,m("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(e,z,N){var u=e("es5-ext/function/is-arguments"),s=e("es5-ext/object/valid-callable"),m=e("es5-ext/string/is-string"),x=e("./get"),t=Array.isArray,i=Function.prototype.call,a=Array.prototype.some;z.exports=function(r,n){var f,l=arguments[2],o,c,h,d,p,y,g;if(t(r)||u(r)?f="array":m(r)?f="string":r=x(r),s(n),c=function(){h=!0},f==="array"){a.call(r,function(A){return i.call(n,l,A,c),h});return}if(f==="string"){for(p=r.length,d=0;d<p&&(y=r[d],d+1<p&&(g=y.charCodeAt(0),g>=55296&&g<=56319&&(y+=r[++d])),i.call(n,l,y,c),!h);++d);return}for(o=r.next();!o.done;){if(i.call(n,l,o.value,c),h)return;o=r.next()}}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(e,z,N){var u=e("es5-ext/function/is-arguments"),s=e("es5-ext/string/is-string"),m=e("./array"),x=e("./string"),t=e("./valid-iterable"),i=e("es6-symbol").iterator;z.exports=function(a){return typeof t(a)[i]=="function"?a[i]():u(a)?new m(a):s(a)?new x(a):new m(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(e,z,N){var u=e("es5-ext/array/#/clear"),s=e("es5-ext/object/assign"),m=e("es5-ext/object/valid-callable"),x=e("es5-ext/object/valid-value"),t=e("d"),i=e("d/auto-bind"),a=e("es6-symbol"),r=Object.defineProperty,n=Object.defineProperties,f;z.exports=f=function(l,o){if(!(this instanceof f))throw new TypeError("Constructor requires 'new'");n(this,{__list__:t("w",x(l)),__context__:t("w",o),__nextIndex__:t("w",0)}),!!o&&(m(o.on),o.on("_add",this._onAdd),o.on("_delete",this._onDelete),o.on("_clear",this._onClear))},delete f.prototype.constructor,n(f.prototype,s({_next:t(function(){var l;if(!!this.__list__){if(this.__redo__&&(l=this.__redo__.shift(),l!==void 0))return l;if(this.__nextIndex__<this.__list__.length)return this.__nextIndex__++;this._unBind()}}),next:t(function(){return this._createResult(this._next())}),_createResult:t(function(l){return l===void 0?{done:!0,value:void 0}:{done:!1,value:this._resolve(l)}}),_resolve:t(function(l){return this.__list__[l]}),_unBind:t(function(){this.__list__=null,delete this.__redo__,!!this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:t(function(){return"[object "+(this[a.toStringTag]||"Object")+"]"})},i({_onAdd:t(function(l){if(!(l>=this.__nextIndex__)){if(++this.__nextIndex__,!this.__redo__){r(this,"__redo__",t("c",[l]));return}this.__redo__.forEach(function(o,c){o>=l&&(this.__redo__[c]=++o)},this),this.__redo__.push(l)}}),_onDelete:t(function(l){var o;l>=this.__nextIndex__||(--this.__nextIndex__,!!this.__redo__&&(o=this.__redo__.indexOf(l),o!==-1&&this.__redo__.splice(o,1),this.__redo__.forEach(function(c,h){c>l&&(this.__redo__[h]=--c)},this)))}),_onClear:t(function(){this.__redo__&&u.call(this.__redo__),this.__nextIndex__=0})}))),r(f.prototype,a.iterator,t(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(e,z,N){var u=e("es5-ext/function/is-arguments"),s=e("es5-ext/object/is-value"),m=e("es5-ext/string/is-string"),x=e("es6-symbol").iterator,t=Array.isArray;z.exports=function(i){return s(i)?t(i)||m(i)||u(i)?!0:typeof i[x]=="function":!1}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(e,z,N){var u=e("es5-ext/object/set-prototype-of"),s=e("d"),m=e("es6-symbol"),x=e("./"),t=Object.defineProperty,i;i=z.exports=function(a){if(!(this instanceof i))throw new TypeError("Constructor requires 'new'");a=String(a),x.call(this,a),t(this,"__length__",s("",a.length))},u&&u(i,x),delete i.prototype.constructor,i.prototype=Object.create(x.prototype,{_next:s(function(){if(!!this.__list__){if(this.__nextIndex__<this.__length__)return this.__nextIndex__++;this._unBind()}}),_resolve:s(function(a){var r=this.__list__[a],n;return this.__nextIndex__===this.__length__?r:(n=r.charCodeAt(0),n>=55296&&n<=56319?r+this.__list__[this.__nextIndex__++]:r)})}),t(i.prototype,m.toStringTag,s("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(e,z,N){var u=e("./is-iterable");z.exports=function(s){if(!u(s))throw new TypeError(s+" is not iterable");return s}},{"./is-iterable":172}],175:[function(e,z,N){z.exports=e("./is-implemented")()?e("ext/global-this").Symbol:e("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(e,z,N){var u=e("ext/global-this"),s={object:!0,symbol:!0};z.exports=function(){var m=u.Symbol,x;if(typeof m!="function")return!1;x=m("test symbol");try{String(x)}catch{return!1}return!(!s[typeof m.iterator]||!s[typeof m.toPrimitive]||!s[typeof m.toStringTag])}},{"ext/global-this":188}],177:[function(e,z,N){z.exports=function(u){return u?typeof u=="symbol"?!0:!u.constructor||u.constructor.name!=="Symbol"?!1:u[u.constructor.toStringTag]==="Symbol":!1}},{}],178:[function(e,z,N){var u=e("d"),s=Object.create,m=Object.defineProperty,x=Object.prototype,t=s(null);z.exports=function(i){for(var a=0,r,n;t[i+(a||"")];)++a;return i+=a||"",t[i]=!0,r="@@"+i,m(x,r,u.gs(null,function(f){n||(n=!0,m(this,r,u(f)),n=!1)})),r}},{d:106}],179:[function(e,z,N){var u=e("d"),s=e("ext/global-this").Symbol;z.exports=function(m){return Object.defineProperties(m,{hasInstance:u("",s&&s.hasInstance||m("hasInstance")),isConcatSpreadable:u("",s&&s.isConcatSpreadable||m("isConcatSpreadable")),iterator:u("",s&&s.iterator||m("iterator")),match:u("",s&&s.match||m("match")),replace:u("",s&&s.replace||m("replace")),search:u("",s&&s.search||m("search")),species:u("",s&&s.species||m("species")),split:u("",s&&s.split||m("split")),toPrimitive:u("",s&&s.toPrimitive||m("toPrimitive")),toStringTag:u("",s&&s.toStringTag||m("toStringTag")),unscopables:u("",s&&s.unscopables||m("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(e,z,N){var u=e("d"),s=e("../../../validate-symbol"),m=Object.create(null);z.exports=function(x){return Object.defineProperties(x,{for:u(function(t){return m[t]?m[t]:m[t]=x(String(t))}),keyFor:u(function(t){var i;s(t);for(i in m)if(m[i]===t)return i})})}},{"../../../validate-symbol":182,d:106}],181:[function(e,z,N){var u=e("d"),s=e("./validate-symbol"),m=e("ext/global-this").Symbol,x=e("./lib/private/generate-name"),t=e("./lib/private/setup/standard-symbols"),i=e("./lib/private/setup/symbol-registry"),a=Object.create,r=Object.defineProperties,n=Object.defineProperty,f,l,o;if(typeof m=="function")try{String(m()),o=!0}catch{}else m=null;l=function(h){if(this instanceof l)throw new TypeError("Symbol is not a constructor");return f(h)},z.exports=f=function c(h){var d;if(this instanceof c)throw new TypeError("Symbol is not a constructor");return o?m(h):(d=a(l.prototype),h=h===void 0?"":String(h),r(d,{__description__:u("",h),__name__:u("",x(h))}))},t(f),i(f),r(l.prototype,{constructor:u(f),toString:u("",function(){return this.__name__})}),r(f.prototype,{toString:u(function(){return"Symbol ("+s(this).__description__+")"}),valueOf:u(function(){return s(this)})}),n(f.prototype,f.toPrimitive,u("",function(){var c=s(this);return typeof c=="symbol"?c:c.toString()})),n(f.prototype,f.toStringTag,u("c","Symbol")),n(l.prototype,f.toStringTag,u("c",f.prototype[f.toStringTag])),n(l.prototype,f.toPrimitive,u("c",f.prototype[f.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(e,z,N){var u=e("./is-symbol");z.exports=function(s){if(!u(s))throw new TypeError(s+" is not a symbol");return s}},{"./is-symbol":177}],183:[function(e,z,N){z.exports=e("./is-implemented")()?WeakMap:e("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(e,z,N){z.exports=function(){var u,s;if(typeof WeakMap!="function")return!1;try{u=new WeakMap([[s={},"one"],[{},"two"],[{},"three"]])}catch{return!1}return!(String(u)!=="[object WeakMap]"||typeof u.set!="function"||u.set({},1)!==u||typeof u.delete!="function"||typeof u.has!="function"||u.get(s)!=="one")}},{}],185:[function(e,z,N){z.exports=function(){return typeof WeakMap!="function"?!1:Object.prototype.toString.call(new WeakMap)==="[object WeakMap]"}()},{}],186:[function(e,z,N){var u=e("es5-ext/object/is-value"),s=e("es5-ext/object/set-prototype-of"),m=e("es5-ext/object/valid-object"),x=e("es5-ext/object/valid-value"),t=e("es5-ext/string/random-uniq"),i=e("d"),a=e("es6-iterator/get"),r=e("es6-iterator/for-of"),n=e("es6-symbol").toStringTag,f=e("./is-native-implemented"),l=Array.isArray,o=Object.defineProperty,c=Object.prototype.hasOwnProperty,h=Object.getPrototypeOf,d;z.exports=d=function(){var p=arguments[0],y;if(!(this instanceof d))throw new TypeError("Constructor requires 'new'");return y=f&&s&&WeakMap!==d?s(new WeakMap,h(this)):this,u(p)&&(l(p)||(p=a(p))),o(y,"__weakMapData__",i("c","$weakMap$"+t())),p&&r(p,function(g){x(g),y.set(g[0],g[1])}),y},f&&(s&&s(d,WeakMap),d.prototype=Object.create(WeakMap.prototype,{constructor:i(d)})),Object.defineProperties(d.prototype,{delete:i(function(p){return c.call(m(p),this.__weakMapData__)?(delete p[this.__weakMapData__],!0):!1}),get:i(function(p){if(!!c.call(m(p),this.__weakMapData__))return p[this.__weakMapData__]}),has:i(function(p){return c.call(m(p),this.__weakMapData__)}),set:i(function(p,y){return o(m(p),this.__weakMapData__,i("c",y)),this}),toString:i(function(){return"[object WeakMap]"})}),o(d.prototype,n,i("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(e,z,N){var u=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};z.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return u()}try{return __global__||u()}finally{delete Object.prototype.__global__}}()},{}],188:[function(e,z,N){z.exports=e("./is-implemented")()?globalThis:e("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(e,z,N){z.exports=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}},{}],190:[function(e,z,N){var u=e("is-string-blank");z.exports=function(s){var m=typeof s;if(m==="string"){var x=s;if(s=+s,s===0&&u(x))return!1}else if(m!=="number")return!1;return s-s<1}},{"is-string-blank":237}],191:[function(e,z,N){var u=e("dtype");z.exports=s;function s(m,x,t){if(!m)throw new TypeError("must specify data as first parameter");if(t=+(t||0)|0,Array.isArray(m)&&m[0]&&typeof m[0][0]=="number"){var i=m[0].length,a=m.length*i,r,n,f,l;(!x||typeof x=="string")&&(x=new(u(x||"float32"))(a+t));var o=x.length-t;if(a!==o)throw new Error("source length "+a+" ("+i+"x"+m.length+") does not match destination length "+o);for(r=0,f=t;r<m.length;r++)for(n=0;n<i;n++)x[f++]=m[r][n]===null?NaN:m[r][n]}else if(!x||typeof x=="string"){var c=u(x||"float32");if(Array.isArray(m)||x==="array")for(x=new c(m.length+t),r=0,f=t,l=x.length;f<l;f++,r++)x[f]=m[r]===null?NaN:m[r];else t===0?x=new c(m):(x=new c(m.length+t),x.set(m,t))}else x.set(m,t);return x}},{dtype:127}],192:[function(e,z,N){var u=e("css-font/stringify"),s=[32,126];z.exports=m;function m(x){x=x||{};var t=x.shape?x.shape:x.canvas?[x.canvas.width,x.canvas.height]:[512,512],i=x.canvas||document.createElement("canvas"),a=x.font,r=typeof x.step=="number"?[x.step,x.step]:x.step||[32,32],n=x.chars||s;if(a&&typeof a!="string"&&(a=u(a)),!Array.isArray(n))n=String(n).split("");else if(n.length===2&&typeof n[0]=="number"&&typeof n[1]=="number"){for(var f=[],l=n[0],o=0;l<=n[1];l++)f[o++]=String.fromCharCode(l);n=f}t=t.slice(),i.width=t[0],i.height=t[1];var c=i.getContext("2d");c.fillStyle="#000",c.fillRect(0,0,i.width,i.height),c.font=a,c.textAlign="center",c.textBaseline="middle",c.fillStyle="#fff";for(var h=r[0]/2,d=r[1]/2,l=0;l<n.length;l++)c.fillText(n[l],h,d),(h+=r[0])>t[0]-r[0]/2&&(h=r[0]/2,d+=r[1]);return i}},{"css-font/stringify":102}],193:[function(e,z,N){z.exports=u,u.canvas=document.createElement("canvas"),u.cache={};function u(t,i){i||(i={}),(typeof t=="string"||Array.isArray(t))&&(i.family=t);var a=Array.isArray(i.family)?i.family.join(", "):i.family;if(!a)throw Error("`family` must be defined");var r=i.size||i.fontSize||i.em||48,n=i.weight||i.fontWeight||"",f=i.style||i.fontStyle||"",t=[f,n,r].join(" ")+"px "+a,l=i.origin||"top";if(u.cache[a]&&r<=u.cache[a].em)return s(u.cache[a],l);var o=i.canvas||u.canvas,c=o.getContext("2d"),h={upper:i.upper!==void 0?i.upper:"H",lower:i.lower!==void 0?i.lower:"x",descent:i.descent!==void 0?i.descent:"p",ascent:i.ascent!==void 0?i.ascent:"h",tittle:i.tittle!==void 0?i.tittle:"i",overshoot:i.overshoot!==void 0?i.overshoot:"O"},d=Math.ceil(r*1.5);o.height=d,o.width=d*.5,c.font=t;var p="H",y={top:0};c.clearRect(0,0,d,d),c.textBaseline="top",c.fillStyle="black",c.fillText(p,0,0);var g=m(c.getImageData(0,0,d,d));c.clearRect(0,0,d,d),c.textBaseline="bottom",c.fillText(p,0,d);var A=m(c.getImageData(0,0,d,d));y.lineHeight=y.bottom=d-A+g,c.clearRect(0,0,d,d),c.textBaseline="alphabetic",c.fillText(p,0,d);var b=m(c.getImageData(0,0,d,d)),M=d-b-1+g;y.baseline=y.alphabetic=M,c.clearRect(0,0,d,d),c.textBaseline="middle",c.fillText(p,0,d*.5);var _=m(c.getImageData(0,0,d,d));y.median=y.middle=d-_-1+g-d*.5,c.clearRect(0,0,d,d),c.textBaseline="hanging",c.fillText(p,0,d*.5);var T=m(c.getImageData(0,0,d,d));y.hanging=d-T-1+g-d*.5,c.clearRect(0,0,d,d),c.textBaseline="ideographic",c.fillText(p,0,d);var w=m(c.getImageData(0,0,d,d));if(y.ideographic=d-w-1+g,h.upper&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(h.upper,0,0),y.upper=m(c.getImageData(0,0,d,d)),y.capHeight=y.baseline-y.upper),h.lower&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(h.lower,0,0),y.lower=m(c.getImageData(0,0,d,d)),y.xHeight=y.baseline-y.lower),h.tittle&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(h.tittle,0,0),y.tittle=m(c.getImageData(0,0,d,d))),h.ascent&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(h.ascent,0,0),y.ascent=m(c.getImageData(0,0,d,d))),h.descent&&(c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(h.descent,0,0),y.descent=x(c.getImageData(0,0,d,d))),h.overshoot){c.clearRect(0,0,d,d),c.textBaseline="top",c.fillText(h.overshoot,0,0);var v=x(c.getImageData(0,0,d,d));y.overshoot=v-M}for(var L in y)y[L]/=r;return y.em=r,u.cache[a]=y,s(y,l)}function s(t,i){var a={};typeof i=="string"&&(i=t[i]);for(var r in t)r!=="em"&&(a[r]=t[r]-i);return a}function m(t){for(var i=t.height,a=t.data,r=3;r<a.length;r+=4)if(a[r]!==0)return Math.floor((r-3)*.25/i)}function x(t){for(var i=t.height,a=t.data,r=a.length-1;r>0;r-=4)if(a[r]!==0)return Math.floor((r-3)*.25/i)}},{}],194:[function(e,z,N){z.exports=u;function u(s,m){if(typeof s!="string")throw new TypeError("must specify type string");if(m=m||{},typeof document=="undefined"&&!m.canvas)return null;var x=m.canvas||document.createElement("canvas");typeof m.width=="number"&&(x.width=m.width),typeof m.height=="number"&&(x.height=m.height);var t=m,i;try{var a=[s];s.indexOf("webgl")===0&&a.push("experimental-"+s);for(var r=0;r<a.length;r++)if(i=x.getContext(a[r],t),i)return i}catch{i=null}return i||null}},{}],195:[function(e,z,N){z.exports=u;function u(s,m){var x=m[0],t=m[1],i=m[2],a=m[3],r=m[4],n=m[5],f=m[6],l=m[7],o=m[8],c=m[9],h=m[10],d=m[11],p=m[12],y=m[13],g=m[14],A=m[15];return s[0]=n*(h*A-d*g)-c*(f*A-l*g)+y*(f*d-l*h),s[1]=-(t*(h*A-d*g)-c*(i*A-a*g)+y*(i*d-a*h)),s[2]=t*(f*A-l*g)-n*(i*A-a*g)+y*(i*l-a*f),s[3]=-(t*(f*d-l*h)-n*(i*d-a*h)+c*(i*l-a*f)),s[4]=-(r*(h*A-d*g)-o*(f*A-l*g)+p*(f*d-l*h)),s[5]=x*(h*A-d*g)-o*(i*A-a*g)+p*(i*d-a*h),s[6]=-(x*(f*A-l*g)-r*(i*A-a*g)+p*(i*l-a*f)),s[7]=x*(f*d-l*h)-r*(i*d-a*h)+o*(i*l-a*f),s[8]=r*(c*A-d*y)-o*(n*A-l*y)+p*(n*d-l*c),s[9]=-(x*(c*A-d*y)-o*(t*A-a*y)+p*(t*d-a*c)),s[10]=x*(n*A-l*y)-r*(t*A-a*y)+p*(t*l-a*n),s[11]=-(x*(n*d-l*c)-r*(t*d-a*c)+o*(t*l-a*n)),s[12]=-(r*(c*g-h*y)-o*(n*g-f*y)+p*(n*h-f*c)),s[13]=x*(c*g-h*y)-o*(t*g-i*y)+p*(t*h-i*c),s[14]=-(x*(n*g-f*y)-r*(t*g-i*y)+p*(t*f-i*n)),s[15]=x*(n*h-f*c)-r*(t*h-i*c)+o*(t*f-i*n),s}},{}],196:[function(e,z,N){z.exports=u;function u(s){var m=new Float32Array(16);return m[0]=s[0],m[1]=s[1],m[2]=s[2],m[3]=s[3],m[4]=s[4],m[5]=s[5],m[6]=s[6],m[7]=s[7],m[8]=s[8],m[9]=s[9],m[10]=s[10],m[11]=s[11],m[12]=s[12],m[13]=s[13],m[14]=s[14],m[15]=s[15],m}},{}],197:[function(e,z,N){z.exports=u;function u(s,m){return s[0]=m[0],s[1]=m[1],s[2]=m[2],s[3]=m[3],s[4]=m[4],s[5]=m[5],s[6]=m[6],s[7]=m[7],s[8]=m[8],s[9]=m[9],s[10]=m[10],s[11]=m[11],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15],s}},{}],198:[function(e,z,N){z.exports=u;function u(){var s=new Float32Array(16);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],199:[function(e,z,N){z.exports=u;function u(s){var m=s[0],x=s[1],t=s[2],i=s[3],a=s[4],r=s[5],n=s[6],f=s[7],l=s[8],o=s[9],c=s[10],h=s[11],d=s[12],p=s[13],y=s[14],g=s[15],A=m*r-x*a,b=m*n-t*a,M=m*f-i*a,_=x*n-t*r,T=x*f-i*r,w=t*f-i*n,v=l*p-o*d,L=l*y-c*d,S=l*g-h*d,k=o*y-c*p,P=o*g-h*p,O=c*g-h*y;return A*O-b*P+M*k+_*S-T*L+w*v}},{}],200:[function(e,z,N){z.exports=u;function u(s,m){var x=m[0],t=m[1],i=m[2],a=m[3],r=x+x,n=t+t,f=i+i,l=x*r,o=t*r,c=t*n,h=i*r,d=i*n,p=i*f,y=a*r,g=a*n,A=a*f;return s[0]=1-c-p,s[1]=o+A,s[2]=h-g,s[3]=0,s[4]=o-A,s[5]=1-l-p,s[6]=d+y,s[7]=0,s[8]=h+g,s[9]=d-y,s[10]=1-l-c,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],201:[function(e,z,N){z.exports=u;function u(s,m,x){var t,i,a,r=x[0],n=x[1],f=x[2],l=Math.sqrt(r*r+n*n+f*f);return Math.abs(l)<1e-6?null:(l=1/l,r*=l,n*=l,f*=l,t=Math.sin(m),i=Math.cos(m),a=1-i,s[0]=r*r*a+i,s[1]=n*r*a+f*t,s[2]=f*r*a-n*t,s[3]=0,s[4]=r*n*a-f*t,s[5]=n*n*a+i,s[6]=f*n*a+r*t,s[7]=0,s[8]=r*f*a+n*t,s[9]=n*f*a-r*t,s[10]=f*f*a+i,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s)}},{}],202:[function(e,z,N){z.exports=u;function u(s,m,x){var t=m[0],i=m[1],a=m[2],r=m[3],n=t+t,f=i+i,l=a+a,o=t*n,c=t*f,h=t*l,d=i*f,p=i*l,y=a*l,g=r*n,A=r*f,b=r*l;return s[0]=1-(d+y),s[1]=c+b,s[2]=h-A,s[3]=0,s[4]=c-b,s[5]=1-(o+y),s[6]=p+g,s[7]=0,s[8]=h+A,s[9]=p-g,s[10]=1-(o+d),s[11]=0,s[12]=x[0],s[13]=x[1],s[14]=x[2],s[15]=1,s}},{}],203:[function(e,z,N){z.exports=u;function u(s,m){return s[0]=m[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=m[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=m[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],204:[function(e,z,N){z.exports=u;function u(s,m){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=m[0],s[13]=m[1],s[14]=m[2],s[15]=1,s}},{}],205:[function(e,z,N){z.exports=u;function u(s,m){var x=Math.sin(m),t=Math.cos(m);return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t,s[6]=x,s[7]=0,s[8]=0,s[9]=-x,s[10]=t,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],206:[function(e,z,N){z.exports=u;function u(s,m){var x=Math.sin(m),t=Math.cos(m);return s[0]=t,s[1]=0,s[2]=-x,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=x,s[9]=0,s[10]=t,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],207:[function(e,z,N){z.exports=u;function u(s,m){var x=Math.sin(m),t=Math.cos(m);return s[0]=t,s[1]=x,s[2]=0,s[3]=0,s[4]=-x,s[5]=t,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],208:[function(e,z,N){z.exports=u;function u(s,m,x,t,i,a,r){var n=1/(x-m),f=1/(i-t),l=1/(a-r);return s[0]=a*2*n,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a*2*f,s[6]=0,s[7]=0,s[8]=(x+m)*n,s[9]=(i+t)*f,s[10]=(r+a)*l,s[11]=-1,s[12]=0,s[13]=0,s[14]=r*a*2*l,s[15]=0,s}},{}],209:[function(e,z,N){z.exports=u;function u(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}},{}],210:[function(e,z,N){z.exports={create:e("./create"),clone:e("./clone"),copy:e("./copy"),identity:e("./identity"),transpose:e("./transpose"),invert:e("./invert"),adjoint:e("./adjoint"),determinant:e("./determinant"),multiply:e("./multiply"),translate:e("./translate"),scale:e("./scale"),rotate:e("./rotate"),rotateX:e("./rotateX"),rotateY:e("./rotateY"),rotateZ:e("./rotateZ"),fromRotation:e("./fromRotation"),fromRotationTranslation:e("./fromRotationTranslation"),fromScaling:e("./fromScaling"),fromTranslation:e("./fromTranslation"),fromXRotation:e("./fromXRotation"),fromYRotation:e("./fromYRotation"),fromZRotation:e("./fromZRotation"),fromQuat:e("./fromQuat"),frustum:e("./frustum"),perspective:e("./perspective"),perspectiveFromFieldOfView:e("./perspectiveFromFieldOfView"),ortho:e("./ortho"),lookAt:e("./lookAt"),str:e("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(e,z,N){z.exports=u;function u(s,m){var x=m[0],t=m[1],i=m[2],a=m[3],r=m[4],n=m[5],f=m[6],l=m[7],o=m[8],c=m[9],h=m[10],d=m[11],p=m[12],y=m[13],g=m[14],A=m[15],b=x*n-t*r,M=x*f-i*r,_=x*l-a*r,T=t*f-i*n,w=t*l-a*n,v=i*l-a*f,L=o*y-c*p,S=o*g-h*p,k=o*A-d*p,P=c*g-h*y,O=c*A-d*y,F=h*A-d*g,I=b*F-M*O+_*P+T*k-w*S+v*L;return I?(I=1/I,s[0]=(n*F-f*O+l*P)*I,s[1]=(i*O-t*F-a*P)*I,s[2]=(y*v-g*w+A*T)*I,s[3]=(h*w-c*v-d*T)*I,s[4]=(f*k-r*F-l*S)*I,s[5]=(x*F-i*k+a*S)*I,s[6]=(g*_-p*v-A*M)*I,s[7]=(o*v-h*_+d*M)*I,s[8]=(r*O-n*k+l*L)*I,s[9]=(t*k-x*O-a*L)*I,s[10]=(p*w-y*_+A*b)*I,s[11]=(c*_-o*w-d*b)*I,s[12]=(n*S-r*P-f*L)*I,s[13]=(x*P-t*S+i*L)*I,s[14]=(y*M-p*T-g*b)*I,s[15]=(o*T-c*M+h*b)*I,s):null}},{}],212:[function(e,z,N){var u=e("./identity");z.exports=s;function s(m,x,t,i){var a,r,n,f,l,o,c,h,d,p,y=x[0],g=x[1],A=x[2],b=i[0],M=i[1],_=i[2],T=t[0],w=t[1],v=t[2];return Math.abs(y-T)<1e-6&&Math.abs(g-w)<1e-6&&Math.abs(A-v)<1e-6?u(m):(c=y-T,h=g-w,d=A-v,p=1/Math.sqrt(c*c+h*h+d*d),c*=p,h*=p,d*=p,a=M*d-_*h,r=_*c-b*d,n=b*h-M*c,p=Math.sqrt(a*a+r*r+n*n),p?(p=1/p,a*=p,r*=p,n*=p):(a=0,r=0,n=0),f=h*n-d*r,l=d*a-c*n,o=c*r-h*a,p=Math.sqrt(f*f+l*l+o*o),p?(p=1/p,f*=p,l*=p,o*=p):(f=0,l=0,o=0),m[0]=a,m[1]=f,m[2]=c,m[3]=0,m[4]=r,m[5]=l,m[6]=h,m[7]=0,m[8]=n,m[9]=o,m[10]=d,m[11]=0,m[12]=-(a*y+r*g+n*A),m[13]=-(f*y+l*g+o*A),m[14]=-(c*y+h*g+d*A),m[15]=1,m)}},{"./identity":209}],213:[function(e,z,N){z.exports=u;function u(s,m,x){var t=m[0],i=m[1],a=m[2],r=m[3],n=m[4],f=m[5],l=m[6],o=m[7],c=m[8],h=m[9],d=m[10],p=m[11],y=m[12],g=m[13],A=m[14],b=m[15],M=x[0],_=x[1],T=x[2],w=x[3];return s[0]=M*t+_*n+T*c+w*y,s[1]=M*i+_*f+T*h+w*g,s[2]=M*a+_*l+T*d+w*A,s[3]=M*r+_*o+T*p+w*b,M=x[4],_=x[5],T=x[6],w=x[7],s[4]=M*t+_*n+T*c+w*y,s[5]=M*i+_*f+T*h+w*g,s[6]=M*a+_*l+T*d+w*A,s[7]=M*r+_*o+T*p+w*b,M=x[8],_=x[9],T=x[10],w=x[11],s[8]=M*t+_*n+T*c+w*y,s[9]=M*i+_*f+T*h+w*g,s[10]=M*a+_*l+T*d+w*A,s[11]=M*r+_*o+T*p+w*b,M=x[12],_=x[13],T=x[14],w=x[15],s[12]=M*t+_*n+T*c+w*y,s[13]=M*i+_*f+T*h+w*g,s[14]=M*a+_*l+T*d+w*A,s[15]=M*r+_*o+T*p+w*b,s}},{}],214:[function(e,z,N){z.exports=u;function u(s,m,x,t,i,a,r){var n=1/(m-x),f=1/(t-i),l=1/(a-r);return s[0]=-2*n,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*f,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*l,s[11]=0,s[12]=(m+x)*n,s[13]=(i+t)*f,s[14]=(r+a)*l,s[15]=1,s}},{}],215:[function(e,z,N){z.exports=u;function u(s,m,x,t,i){var a=1/Math.tan(m/2),r=1/(t-i);return s[0]=a/x,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=a,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=(i+t)*r,s[11]=-1,s[12]=0,s[13]=0,s[14]=2*i*t*r,s[15]=0,s}},{}],216:[function(e,z,N){z.exports=u;function u(s,m,x,t){var i=Math.tan(m.upDegrees*Math.PI/180),a=Math.tan(m.downDegrees*Math.PI/180),r=Math.tan(m.leftDegrees*Math.PI/180),n=Math.tan(m.rightDegrees*Math.PI/180),f=2/(r+n),l=2/(i+a);return s[0]=f,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=l,s[6]=0,s[7]=0,s[8]=-((r-n)*f*.5),s[9]=(i-a)*l*.5,s[10]=t/(x-t),s[11]=-1,s[12]=0,s[13]=0,s[14]=t*x/(x-t),s[15]=0,s}},{}],217:[function(e,z,N){z.exports=u;function u(s,m,x,t){var i=t[0],a=t[1],r=t[2],n=Math.sqrt(i*i+a*a+r*r),f,l,o,c,h,d,p,y,g,A,b,M,_,T,w,v,L,S,k,P,O,F,I,D;return Math.abs(n)<1e-6?null:(n=1/n,i*=n,a*=n,r*=n,f=Math.sin(x),l=Math.cos(x),o=1-l,c=m[0],h=m[1],d=m[2],p=m[3],y=m[4],g=m[5],A=m[6],b=m[7],M=m[8],_=m[9],T=m[10],w=m[11],v=i*i*o+l,L=a*i*o+r*f,S=r*i*o-a*f,k=i*a*o-r*f,P=a*a*o+l,O=r*a*o+i*f,F=i*r*o+a*f,I=a*r*o-i*f,D=r*r*o+l,s[0]=c*v+y*L+M*S,s[1]=h*v+g*L+_*S,s[2]=d*v+A*L+T*S,s[3]=p*v+b*L+w*S,s[4]=c*k+y*P+M*O,s[5]=h*k+g*P+_*O,s[6]=d*k+A*P+T*O,s[7]=p*k+b*P+w*O,s[8]=c*F+y*I+M*D,s[9]=h*F+g*I+_*D,s[10]=d*F+A*I+T*D,s[11]=p*F+b*I+w*D,m!==s&&(s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s)}},{}],218:[function(e,z,N){z.exports=u;function u(s,m,x){var t=Math.sin(x),i=Math.cos(x),a=m[4],r=m[5],n=m[6],f=m[7],l=m[8],o=m[9],c=m[10],h=m[11];return m!==s&&(s[0]=m[0],s[1]=m[1],s[2]=m[2],s[3]=m[3],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s[4]=a*i+l*t,s[5]=r*i+o*t,s[6]=n*i+c*t,s[7]=f*i+h*t,s[8]=l*i-a*t,s[9]=o*i-r*t,s[10]=c*i-n*t,s[11]=h*i-f*t,s}},{}],219:[function(e,z,N){z.exports=u;function u(s,m,x){var t=Math.sin(x),i=Math.cos(x),a=m[0],r=m[1],n=m[2],f=m[3],l=m[8],o=m[9],c=m[10],h=m[11];return m!==s&&(s[4]=m[4],s[5]=m[5],s[6]=m[6],s[7]=m[7],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s[0]=a*i-l*t,s[1]=r*i-o*t,s[2]=n*i-c*t,s[3]=f*i-h*t,s[8]=a*t+l*i,s[9]=r*t+o*i,s[10]=n*t+c*i,s[11]=f*t+h*i,s}},{}],220:[function(e,z,N){z.exports=u;function u(s,m,x){var t=Math.sin(x),i=Math.cos(x),a=m[0],r=m[1],n=m[2],f=m[3],l=m[4],o=m[5],c=m[6],h=m[7];return m!==s&&(s[8]=m[8],s[9]=m[9],s[10]=m[10],s[11]=m[11],s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15]),s[0]=a*i+l*t,s[1]=r*i+o*t,s[2]=n*i+c*t,s[3]=f*i+h*t,s[4]=l*i-a*t,s[5]=o*i-r*t,s[6]=c*i-n*t,s[7]=h*i-f*t,s}},{}],221:[function(e,z,N){z.exports=u;function u(s,m,x){var t=x[0],i=x[1],a=x[2];return s[0]=m[0]*t,s[1]=m[1]*t,s[2]=m[2]*t,s[3]=m[3]*t,s[4]=m[4]*i,s[5]=m[5]*i,s[6]=m[6]*i,s[7]=m[7]*i,s[8]=m[8]*a,s[9]=m[9]*a,s[10]=m[10]*a,s[11]=m[11]*a,s[12]=m[12],s[13]=m[13],s[14]=m[14],s[15]=m[15],s}},{}],222:[function(e,z,N){z.exports=u;function u(s){return"mat4("+s[0]+", "+s[1]+", "+s[2]+", "+s[3]+", "+s[4]+", "+s[5]+", "+s[6]+", "+s[7]+", "+s[8]+", "+s[9]+", "+s[10]+", "+s[11]+", "+s[12]+", "+s[13]+", "+s[14]+", "+s[15]+")"}},{}],223:[function(e,z,N){z.exports=u;function u(s,m,x){var t=x[0],i=x[1],a=x[2],r,n,f,l,o,c,h,d,p,y,g,A;return m===s?(s[12]=m[0]*t+m[4]*i+m[8]*a+m[12],s[13]=m[1]*t+m[5]*i+m[9]*a+m[13],s[14]=m[2]*t+m[6]*i+m[10]*a+m[14],s[15]=m[3]*t+m[7]*i+m[11]*a+m[15]):(r=m[0],n=m[1],f=m[2],l=m[3],o=m[4],c=m[5],h=m[6],d=m[7],p=m[8],y=m[9],g=m[10],A=m[11],s[0]=r,s[1]=n,s[2]=f,s[3]=l,s[4]=o,s[5]=c,s[6]=h,s[7]=d,s[8]=p,s[9]=y,s[10]=g,s[11]=A,s[12]=r*t+o*i+p*a+m[12],s[13]=n*t+c*i+y*a+m[13],s[14]=f*t+h*i+g*a+m[14],s[15]=l*t+d*i+A*a+m[15]),s}},{}],224:[function(e,z,N){z.exports=u;function u(s,m){if(s===m){var x=m[1],t=m[2],i=m[3],a=m[6],r=m[7],n=m[11];s[1]=m[4],s[2]=m[8],s[3]=m[12],s[4]=x,s[6]=m[9],s[7]=m[13],s[8]=t,s[9]=a,s[11]=m[14],s[12]=i,s[13]=r,s[14]=n}else s[0]=m[0],s[1]=m[4],s[2]=m[8],s[3]=m[12],s[4]=m[1],s[5]=m[5],s[6]=m[9],s[7]=m[13],s[8]=m[2],s[9]=m[6],s[10]=m[10],s[11]=m[14],s[12]=m[3],s[13]=m[7],s[14]=m[11],s[15]=m[15];return s}},{}],225:[function(e,z,N){var u=e("css-font"),s=e("pick-by-alias"),m=e("regl"),x=e("gl-util/context"),t=e("es6-weak-map"),i=e("color-normalize"),a=e("font-atlas"),r=e("typedarray-pool"),n=e("parse-rect"),f=e("is-plain-obj"),l=e("parse-unit"),o=e("to-px"),c=e("detect-kerning"),h=e("object-assign"),d=e("font-measure"),p=e("flatten-vertex-data"),y=e("bit-twiddle"),g=y.nextPow2,A=new t,b=!1;if(document.body){var M=document.body.appendChild(document.createElement("div"));M.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(M).fontStretch&&(b=!0),document.body.removeChild(M)}var _=function(v){T(v)?(v={regl:v},this.gl=v.regl._gl):this.gl=x(v),this.shader=A.get(this.gl),this.shader?this.regl=this.shader.regl:this.regl=v.regl||m({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),A.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(f(v)?v:{})};_.prototype.createShader=function(){var v=this.regl,L=v({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:v.prop("count"),offset:v.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:v.this("sizeBuffer")},width:{offset:0,stride:8,buffer:v.this("sizeBuffer")},char:v.this("charBuffer"),position:v.this("position")},uniforms:{atlasSize:function(k,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(k,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(k,P){return P.atlas.texture},charStep:function(k,P){return P.atlas.step},em:function(k,P){return P.atlas.em},color:v.prop("color"),opacity:v.prop("opacity"),viewport:v.this("viewportArray"),scale:v.this("scale"),align:v.prop("align"),baseline:v.prop("baseline"),translate:v.this("translate"),positionOffset:v.prop("positionOffset")},primitive:"points",viewport:v.this("viewport"),vert:`
			precision highp float;
			attribute float width, charOffset, char;
			attribute vec2 position;
			uniform float fontSize, charStep, em, align, baseline;
			uniform vec4 viewport;
			uniform vec4 color;
			uniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;
			varying vec2 charCoord, charId;
			varying float charWidth;
			varying vec4 fontColor;
			void main () {
				vec2 offset = floor(em * (vec2(align + charOffset, baseline)
					+ vec2(positionOffset.x, -positionOffset.y)))
					/ (viewport.zw * scale.xy);

				vec2 position = (position + translate) * scale;
				position += offset * scale;

				charCoord = position * viewport.zw + viewport.xy;

				gl_Position = vec4(position * 2. - 1., 0, 1);

				gl_PointSize = charStep;

				charId.x = mod(char, atlasDim.x);
				charId.y = floor(char / atlasDim.x);

				charWidth = width * em;

				fontColor = color / 255.;
			}`,frag:`
			precision highp float;
			uniform float fontSize, charStep, opacity;
			uniform vec2 atlasSize;
			uniform vec4 viewport;
			uniform sampler2D atlas;
			varying vec4 fontColor;
			varying vec2 charCoord, charId;
			varying float charWidth;

			float lightness(vec4 color) {
				return color.r * 0.299 + color.g * 0.587 + color.b * 0.114;
			}

			void main () {
				vec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;
				float halfCharStep = floor(charStep * .5 + .5);

				// invert y and shift by 1px (FF expecially needs that)
				uv.y = charStep - uv.y;

				// ignore points outside of character bounding box
				float halfCharWidth = ceil(charWidth * .5);
				if (floor(uv.x) > halfCharStep + halfCharWidth ||
					floor(uv.x) < halfCharStep - halfCharWidth) return;

				uv += charId * charStep;
				uv = uv / atlasSize;

				vec4 color = fontColor;
				vec4 mask = texture2D(atlas, uv);

				float maskY = lightness(mask);
				// float colorY = lightness(color);
				color.a *= maskY;
				color.a *= opacity;

				// color.a += .1;

				// antialiasing, see yiq color space y-channel formula
				// color.rgb += (1. - color.rgb) * (1. - mask.rgb);

				gl_FragColor = color;
			}`}),S={};return{regl:v,draw:L,atlas:S}},_.prototype.update=function(v){var L=this;if(typeof v=="string")v={text:v};else if(!v)return;v=s(v,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0),v.opacity!=null&&(Array.isArray(v.opacity)?this.opacity=v.opacity.map(function(_e){return parseFloat(_e)}):this.opacity=parseFloat(v.opacity)),v.viewport!=null&&(this.viewport=n(v.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),this.viewport==null&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),v.kerning!=null&&(this.kerning=v.kerning),v.offset!=null&&(typeof v.offset=="number"&&(v.offset=[v.offset,0]),this.positionOffset=p(v.offset)),v.direction&&(this.direction=v.direction),v.range&&(this.range=v.range,this.scale=[1/(v.range[2]-v.range[0]),1/(v.range[3]-v.range[1])],this.translate=[-v.range[0],-v.range[1]]),v.scale&&(this.scale=v.scale),v.translate&&(this.translate=v.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),!this.font.length&&!v.font&&(v.font=_.baseFontSize+"px sans-serif");var S=!1,k=!1;if(v.font&&(Array.isArray(v.font)?v.font:[v.font]).forEach(function(_e,Re){if(typeof _e=="string")try{_e=u.parse(_e)}catch{_e=u.parse(_.baseFontSize+"px "+_e)}else _e=u.parse(u.stringify(_e));var We=u.stringify({size:_.baseFontSize,family:_e.family,stretch:b?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style}),qe=l(_e.size),Ue=Math.round(qe[0]*o(qe[1]));if(Ue!==L.fontSize[Re]&&(k=!0,L.fontSize[Re]=Ue),(!L.font[Re]||We!=L.font[Re].baseString)&&(S=!0,L.font[Re]=_.fonts[We],!L.font[Re])){var Ie=_e.family.join(", "),Ve=[_e.style];_e.style!=_e.variant&&Ve.push(_e.variant),_e.variant!=_e.weight&&Ve.push(_e.weight),b&&_e.weight!=_e.stretch&&Ve.push(_e.stretch),L.font[Re]={baseString:We,family:Ie,weight:_e.weight,stretch:_e.stretch,style:_e.style,variant:_e.variant,width:{},kerning:{},metrics:d(Ie,{origin:"top",fontSize:_.baseFontSize,fontStyle:Ve.join(" ")})},_.fonts[We]=L.font[Re]}}),(S||k)&&this.font.forEach(function(_e,Re){var We=u.stringify({size:L.fontSize[Re],family:_e.family,stretch:b?_e.stretch:void 0,variant:_e.variant,weight:_e.weight,style:_e.style});if(L.fontAtlas[Re]=L.shader.atlas[We],!L.fontAtlas[Re]){var qe=_e.metrics;L.shader.atlas[We]=L.fontAtlas[Re]={fontString:We,step:Math.ceil(L.fontSize[Re]*qe.bottom*.5)*2,em:L.fontSize[Re],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:L.regl.texture()}}v.text==null&&(v.text=L.text)}),typeof v.text=="string"&&v.position&&v.position.length>2){for(var P=Array(v.position.length*.5),O=0;O<P.length;O++)P[O]=v.text;v.text=P}var F;if(v.text!=null||S){if(this.textOffsets=[0],Array.isArray(v.text)){this.count=v.text[0].length,this.counts=[this.count];for(var I=1;I<v.text.length;I++)this.textOffsets[I]=this.textOffsets[I-1]+v.text[I-1].length,this.count+=v.text[I].length,this.counts.push(v.text[I].length);this.text=v.text.join("")}else this.text=v.text,this.count=this.text.length,this.counts=[this.count];F=[],this.font.forEach(function(_e,Re){_.atlasContext.font=_e.baseString;for(var We=L.fontAtlas[Re],qe=0;qe<L.text.length;qe++){var Ue=L.text.charAt(qe);if(We.ids[Ue]==null&&(We.ids[Ue]=We.chars.length,We.chars.push(Ue),F.push(Ue)),_e.width[Ue]==null&&(_e.width[Ue]=_.atlasContext.measureText(Ue).width/_.baseFontSize,L.kerning)){var Ie=[];for(var Ve in _e.width)Ie.push(Ve+Ue,Ue+Ve);h(_e.kerning,c(_e.family,{pairs:Ie}))}}})}if(v.position)if(v.position.length>2){for(var D=!v.position[0].length,U=r.mallocFloat(this.count*2),B=0,j=0;B<this.counts.length;B++){var Z=this.counts[B];if(D)for(var ee=0;ee<Z;ee++)U[j++]=v.position[B*2],U[j++]=v.position[B*2+1];else for(var q=0;q<Z;q++)U[j++]=v.position[B][0],U[j++]=v.position[B][1]}this.position.call?this.position({type:"float",data:U}):this.position=this.regl.buffer({type:"float",data:U}),r.freeFloat(U)}else this.position.destroy&&this.position.destroy(),this.position={constant:v.position};if(v.text||S){var W=r.mallocUint8(this.count),J=r.mallocFloat(this.count*2);this.textWidth=[];for(var le=0,fe=0;le<this.counts.length;le++){for(var se=this.counts[le],H=this.font[le]||this.font[0],Y=this.fontAtlas[le]||this.fontAtlas[0],ne=0;ne<se;ne++){var te=this.text.charAt(fe),K=this.text.charAt(fe-1);if(W[fe]=Y.ids[te],J[fe*2]=H.width[te],ne){var $=J[fe*2-2],ae=J[fe*2],ie=J[fe*2-1],oe=ie+$*.5+ae*.5;if(this.kerning){var ue=H.kerning[K+te];ue&&(oe+=ue*.001)}J[fe*2+1]=oe}else J[fe*2+1]=J[fe*2]*.5;fe++}this.textWidth.push(J.length?J[fe*2-2]*.5+J[fe*2-1]:0)}v.align||(v.align=this.align),this.charBuffer({data:W,type:"uint8",usage:"stream"}),this.sizeBuffer({data:J,type:"float",usage:"stream"}),r.freeUint8(W),r.freeFloat(J),F.length&&this.font.forEach(function(_e,Re){var We=L.fontAtlas[Re],qe=We.step,Ue=Math.floor(_.maxAtlasSize/qe),Ie=Math.min(Ue,We.chars.length),Ve=Math.ceil(We.chars.length/Ie),dt=g(Ie*qe),Rt=g(Ve*qe);We.width=dt,We.height=Rt,We.rows=Ve,We.cols=Ie,!!We.em&&We.texture({data:a({canvas:_.atlasCanvas,font:We.fontString,chars:We.chars,shape:[dt,Rt],step:[qe,qe]})})})}if(v.align&&(this.align=v.align,this.alignOffset=this.textWidth.map(function(_e,Re){var We=Array.isArray(L.align)?L.align.length>1?L.align[Re]:L.align[0]:L.align;if(typeof We=="number")return We;switch(We){case"right":case"end":return-_e;case"center":case"centre":case"middle":return-_e*.5}return 0})),this.baseline==null&&v.baseline==null&&(v.baseline=0),v.baseline!=null&&(this.baseline=v.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(_e,Re){var We=(L.font[Re]||L.font[0]).metrics,qe=0;return qe+=We.bottom*.5,typeof _e=="number"?qe+=_e-We.baseline:qe+=-We[_e],qe*=-1,qe})),v.color!=null)if(v.color||(v.color="transparent"),typeof v.color=="string"||!isNaN(v.color))this.color=i(v.color,"uint8");else{var ye;if(typeof v.color[0]=="number"&&v.color.length>this.counts.length){var ce=v.color.length;ye=r.mallocUint8(ce);for(var me=(v.color.subarray||v.color.slice).bind(v.color),xe=0;xe<ce;xe+=4)ye.set(i(me(xe,xe+4),"uint8"),xe)}else{var ke=v.color.length;ye=r.mallocUint8(ke*4);for(var Ae=0;Ae<ke;Ae++)ye.set(i(v.color[Ae]||0,"uint8"),Ae*4)}this.color=ye}if(v.position||v.text||v.color||v.baseline||v.align||v.font||v.offset||v.opacity){var Oe=this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2;if(Oe){var He=Math.max(this.position.length*.5||0,this.color.length*.25||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,this.positionOffset.length*.5||0);this.batch=Array(He);for(var Ge=0;Ge<this.batch.length;Ge++)this.batch[Ge]={count:this.counts.length>1?this.counts[Ge]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[Ge]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(Ge*4,Ge*4+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[Ge]:this.opacity,baseline:this.baselineOffset[Ge]!=null?this.baselineOffset[Ge]:this.baselineOffset[0],align:this.align?this.alignOffset[Ge]!=null?this.alignOffset[Ge]:this.alignOffset[0]:0,atlas:this.fontAtlas[Ge]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(Ge*2,Ge*2+2):this.positionOffset}}else this.count?this.batch=[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:this.batch=[]}},_.prototype.destroy=function(){},_.prototype.kerning=!0,_.prototype.position={constant:new Float32Array(2)},_.prototype.translate=null,_.prototype.scale=null,_.prototype.font=null,_.prototype.text="",_.prototype.positionOffset=[0,0],_.prototype.opacity=1,_.prototype.color=new Uint8Array([0,0,0,255]),_.prototype.alignOffset=[0,0],_.maxAtlasSize=1024,_.atlasCanvas=document.createElement("canvas"),_.atlasContext=_.atlasCanvas.getContext("2d",{alpha:!1}),_.baseFontSize=64,_.fonts={};function T(w){return typeof w=="function"&&w._gl&&w.prop&&w.texture&&w.buffer}z.exports=_},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(e,z,N){(function(u){(function(){var s=e("pick-by-alias");z.exports=function(n){if(n?typeof n=="string"&&(n={container:n}):n={},x(n)?n={container:n}:t(n)?n={container:n}:i(n)?n={gl:n}:n=s(n,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0),n.pixelRatio||(n.pixelRatio=u.pixelRatio||1),n.gl)return n.gl;if(n.canvas&&(n.container=n.canvas.parentNode),n.container){if(typeof n.container=="string"){var f=document.querySelector(n.container);if(!f)throw Error("Element "+n.container+" is not found");n.container=f}x(n.container)?(n.canvas=n.container,n.container=n.canvas.parentNode):n.canvas||(n.canvas=a(),n.container.appendChild(n.canvas),m(n))}else if(!n.canvas)if(typeof document!="undefined")n.container=document.body||document.documentElement,n.canvas=a(),n.container.appendChild(n.canvas),m(n);else throw Error("Not DOM environment. Use headless-gl.");return n.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(l){try{n.gl=n.canvas.getContext(l,n.attrs)}catch{}return n.gl}),n.gl};function m(r){if(r.container)if(r.container==document.body)document.body.style.width||(r.canvas.width=r.width||r.pixelRatio*u.innerWidth),document.body.style.height||(r.canvas.height=r.height||r.pixelRatio*u.innerHeight);else{var n=r.container.getBoundingClientRect();r.canvas.width=r.width||n.right-n.left,r.canvas.height=r.height||n.bottom-n.top}}function x(r){return typeof r.getContext=="function"&&"width"in r&&"height"in r}function t(r){return typeof r.nodeName=="string"&&typeof r.appendChild=="function"&&typeof r.getBoundingClientRect=="function"}function i(r){return typeof r.drawArrays=="function"||typeof r.drawElements=="function"}function a(){var r=document.createElement("canvas");return r.style.position="absolute",r.style.top=0,r.style.left=0,r}}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"pick-by-alias":253}],227:[function(e,z,N){z.exports=function(u){typeof u=="string"&&(u=[u]);for(var s=[].slice.call(arguments,1),m=[],x=0;x<u.length-1;x++)m.push(u[x],s[x]||"");return m.push(u[x]),m.join("")}},{}],228:[function(e,z,N){(function(u){(function(){var s=e("is-browser"),m;typeof u.matchMedia=="function"?m=!u.matchMedia("(hover: none)").matches:m=s,z.exports=m}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"is-browser":232}],229:[function(e,z,N){var u=e("is-browser");function s(){var m=!1;try{var x=Object.defineProperty({},"passive",{get:function(){m=!0}});window.addEventListener("test",null,x),window.removeEventListener("test",null,x)}catch{m=!1}return m}z.exports=u&&s()},{"is-browser":232}],230:[function(e,z,N){N.read=function(u,s,m,x,t){var i,a,r=t*8-x-1,n=(1<<r)-1,f=n>>1,l=-7,o=m?t-1:0,c=m?-1:1,h=u[s+o];for(o+=c,i=h&(1<<-l)-1,h>>=-l,l+=r;l>0;i=i*256+u[s+o],o+=c,l-=8);for(a=i&(1<<-l)-1,i>>=-l,l+=x;l>0;a=a*256+u[s+o],o+=c,l-=8);if(i===0)i=1-f;else{if(i===n)return a?NaN:(h?-1:1)*(1/0);a=a+Math.pow(2,x),i=i-f}return(h?-1:1)*a*Math.pow(2,i-x)},N.write=function(u,s,m,x,t,i){var a,r,n,f=i*8-t-1,l=(1<<f)-1,o=l>>1,c=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=x?0:i-1,d=x?1:-1,p=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(r=isNaN(s)?1:0,a=l):(a=Math.floor(Math.log(s)/Math.LN2),s*(n=Math.pow(2,-a))<1&&(a--,n*=2),a+o>=1?s+=c/n:s+=c*Math.pow(2,1-o),s*n>=2&&(a++,n/=2),a+o>=l?(r=0,a=l):a+o>=1?(r=(s*n-1)*Math.pow(2,t),a=a+o):(r=s*Math.pow(2,o-1)*Math.pow(2,t),a=0));t>=8;u[m+h]=r&255,h+=d,r/=256,t-=8);for(a=a<<t|r,f+=t;f>0;u[m+h]=a&255,h+=d,a/=256,f-=8);u[m+h-d]|=p*128}},{}],231:[function(e,z,N){typeof Object.create=="function"?z.exports=function(s,m){m&&(s.super_=m,s.prototype=Object.create(m.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}))}:z.exports=function(s,m){if(m){s.super_=m;var x=function(){};x.prototype=m.prototype,s.prototype=new x,s.prototype.constructor=s}}},{}],232:[function(e,z,N){z.exports=!0},{}],233:[function(e,z,N){z.exports=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(e,z,N){z.exports=m,z.exports.isMobile=m,z.exports.default=m;var u=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,s=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function m(x){x||(x={});var t=x.ua;if(!t&&typeof navigator!="undefined"&&(t=navigator.userAgent),t&&t.headers&&typeof t.headers["user-agent"]=="string"&&(t=t.headers["user-agent"]),typeof t!="string")return!1;var i=x.tablet?s.test(t):u.test(t);return!i&&x.tablet&&x.featureDetect&&navigator&&navigator.maxTouchPoints>1&&t.indexOf("Macintosh")!==-1&&t.indexOf("Safari")!==-1&&(i=!0),i}},{}],235:[function(e,z,N){z.exports=function(u){var s=typeof u;return u!==null&&(s==="object"||s==="function")}},{}],236:[function(e,z,N){var u=Object.prototype.toString;z.exports=function(s){var m;return u.call(s)==="[object Object]"&&(m=Object.getPrototypeOf(s),m===null||m===Object.getPrototypeOf({}))}},{}],237:[function(e,z,N){z.exports=function(u){for(var s=u.length,m,x=0;x<s;x++)if(m=u.charCodeAt(x),(m<9||m>13)&&m!==32&&m!==133&&m!==160&&m!==5760&&m!==6158&&(m<8192||m>8205)&&m!==8232&&m!==8233&&m!==8239&&m!==8287&&m!==8288&&m!==12288&&m!==65279)return!1;return!0}},{}],238:[function(e,z,N){z.exports=function(s){return typeof s!="string"?!1:(s=s.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(s)&&/[\dz]$/i.test(s)&&s.length>4))}},{}],239:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?z.exports=s():(u=u||self,u.mapboxgl=s())})(this,function(){var u,s,m;function x(t,i){if(!u)u=i;else if(!s)s=i;else{var a="var sharedChunk = {}; ("+u+")(sharedChunk); ("+s+")(sharedChunk);",r={};u(r),m=i(r),m.workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}}return x(["exports"],function(t){function i(E,C){return C={exports:{}},E(C,C.exports),C.exports}var a="1.10.1",r=n;function n(E,C,V,re){this.cx=3*E,this.bx=3*(V-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*C,this.by=3*(re-C)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=re,this.p2x=V,this.p2y=re}n.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},n.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},n.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},n.prototype.solveCurveX=function(E,C){typeof C=="undefined"&&(C=1e-6);var V,re,pe,be,Me;for(pe=E,Me=0;Me<8;Me++){if(be=this.sampleCurveX(pe)-E,Math.abs(be)<C)return pe;var Fe=this.sampleCurveDerivativeX(pe);if(Math.abs(Fe)<1e-6)break;pe=pe-be/Fe}if(V=0,re=1,pe=E,pe<V)return V;if(pe>re)return re;for(;V<re;){if(be=this.sampleCurveX(pe),Math.abs(be-E)<C)return pe;E>be?V=pe:re=pe,pe=(re-V)*.5+V}return pe},n.prototype.solve=function(E,C){return this.sampleCurveY(this.solveCurveX(E,C))};var f=l;function l(E,C){this.x=E,this.y=C}l.prototype={clone:function(){return new l(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,C){return this.clone()._rotateAround(E,C)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var C=E.x-this.x,V=E.y-this.y;return C*C+V*V},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,C){return Math.atan2(this.x*C-this.y*E,this.x*E+this.y*C)},_matMult:function(E){var C=E[0]*this.x+E[1]*this.y,V=E[2]*this.x+E[3]*this.y;return this.x=C,this.y=V,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var C=Math.cos(E),V=Math.sin(E),re=C*this.x-V*this.y,pe=V*this.x+C*this.y;return this.x=re,this.y=pe,this},_rotateAround:function(E,C){var V=Math.cos(E),re=Math.sin(E),pe=C.x+V*(this.x-C.x)-re*(this.y-C.y),be=C.y+re*(this.x-C.x)+V*(this.y-C.y);return this.x=pe,this.y=be,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},l.convert=function(E){return E instanceof l?E:Array.isArray(E)?new l(E[0],E[1]):E};function o(E,C){if(Array.isArray(E)){if(!Array.isArray(C)||E.length!==C.length)return!1;for(var V=0;V<E.length;V++)if(!o(E[V],C[V]))return!1;return!0}if(typeof E=="object"&&E!==null&&C!==null){if(typeof C!="object")return!1;var re=Object.keys(E);if(re.length!==Object.keys(C).length)return!1;for(var pe in E)if(!o(E[pe],C[pe]))return!1;return!0}return E===C}function c(E){if(E<=0)return 0;if(E>=1)return 1;var C=E*E,V=C*E;return 4*(E<.5?V:3*(E-C)+V-.75)}function h(E,C,V,re){var pe=new r(E,C,V,re);return function(be){return pe.solve(be)}}var d=h(.25,.1,.25,1);function p(E,C,V){return Math.min(V,Math.max(C,E))}function y(E,C,V){var re=V-C,pe=((E-C)%re+re)%re+C;return pe===C?V:pe}function g(E,C,V){if(!E.length)return V(null,[]);var re=E.length,pe=new Array(E.length),be=null;E.forEach(function(Me,Fe){C(Me,function(tt,ct){tt&&(be=tt),pe[Fe]=ct,--re==0&&V(be,pe)})})}function A(E){var C=[];for(var V in E)C.push(E[V]);return C}function b(E,C){var V=[];for(var re in E)re in C||V.push(re);return V}function M(E){for(var C=[],V=arguments.length-1;V-- >0;)C[V]=arguments[V+1];for(var re=0,pe=C;re<pe.length;re+=1){var be=pe[re];for(var Me in be)E[Me]=be[Me]}return E}function _(E,C){for(var V={},re=0;re<C.length;re++){var pe=C[re];pe in E&&(V[pe]=E[pe])}return V}var T=1;function w(){return T++}function v(){function E(C){return C?(C^Math.random()*16>>C/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}return E()}function L(E){return E?/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E):!1}function S(E,C){E.forEach(function(V){!C[V]||(C[V]=C[V].bind(C))})}function k(E,C){return E.indexOf(C,E.length-C.length)!==-1}function P(E,C,V){var re={};for(var pe in E)re[pe]=C.call(V||this,E[pe],pe,E);return re}function O(E,C,V){var re={};for(var pe in E)C.call(V||this,E[pe],pe,E)&&(re[pe]=E[pe]);return re}function F(E){return Array.isArray(E)?E.map(F):typeof E=="object"&&E?P(E,F):E}function I(E,C){for(var V=0;V<E.length;V++)if(C.indexOf(E[V])>=0)return!0;return!1}var D={};function U(E){D[E]||(typeof console!="undefined"&&console.warn(E),D[E]=!0)}function B(E,C,V){return(V.y-E.y)*(C.x-E.x)>(C.y-E.y)*(V.x-E.x)}function j(E){for(var C=0,V=0,re=E.length,pe=re-1,be=void 0,Me=void 0;V<re;pe=V++)be=E[V],Me=E[pe],C+=(Me.x-be.x)*(be.y+Me.y);return C}function Z(E){var C=E[0],V=E[1],re=E[2];return V+=90,V*=Math.PI/180,re*=Math.PI/180,{x:C*Math.cos(V)*Math.sin(re),y:C*Math.sin(V)*Math.sin(re),z:C*Math.cos(re)}}function ee(){return typeof WorkerGlobalScope!="undefined"&&typeof self!="undefined"&&self instanceof WorkerGlobalScope}function q(E){var C=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,V={};if(E.replace(C,function(pe,be,Me,Fe){var tt=Me||Fe;return V[be]=tt?tt.toLowerCase():!0,""}),V["max-age"]){var re=parseInt(V["max-age"],10);isNaN(re)?delete V["max-age"]:V["max-age"]=re}return V}var W=null;function J(E){if(W==null){var C=E.navigator?E.navigator.userAgent:null;W=!!E.safari||!!(C&&(/\b(iPad|iPhone|iPod)\b/.test(C)||!!C.match("Safari")&&!C.match("Chrome")))}return W}function le(E){try{var C=self[E];return C.setItem("_mapbox_test_",1),C.removeItem("_mapbox_test_"),!0}catch{return!1}}function fe(E){return self.btoa(encodeURIComponent(E).replace(/%([0-9A-F]{2})/g,function(C,V){return String.fromCharCode(Number("0x"+V))}))}function se(E){return decodeURIComponent(self.atob(E).split("").map(function(C){return"%"+("00"+C.charCodeAt(0).toString(16)).slice(-2)}).join(""))}var H=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),Y=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,ne=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,te,K,$={now:H,frame:function(C){var V=Y(C);return{cancel:function(){return ne(V)}}},getImageData:function(C,V){V===void 0&&(V=0);var re=self.document.createElement("canvas"),pe=re.getContext("2d");if(!pe)throw new Error("failed to create canvas 2d context");return re.width=C.width,re.height=C.height,pe.drawImage(C,0,0,C.width,C.height),pe.getImageData(-V,-V,C.width+2*V,C.height+2*V)},resolveURL:function(C){return te||(te=self.document.createElement("a")),te.href=C,te.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return self.matchMedia?(K==null&&(K=self.matchMedia("(prefers-reduced-motion: reduce)")),K.matches):!1}},ae={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ie={supported:!1,testSupport:me},oe,ue=!1,ye,ce=!1;self.document&&(ye=self.document.createElement("img"),ye.onload=function(){oe&&xe(oe),oe=null,ce=!0},ye.onerror=function(){ue=!0,oe=null},ye.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");function me(E){ue||!ye||(ce?xe(E):oe=E)}function xe(E){var C=E.createTexture();E.bindTexture(E.TEXTURE_2D,C);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,ye),E.isContextLost())return;ie.supported=!0}catch{}E.deleteTexture(C),ue=!0}var ke="01";function Ae(){for(var E="1",C="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",V="",re=0;re<10;re++)V+=C[Math.floor(Math.random()*62)];var pe=12*60*60*1e3,be=[E,ke,V].join(""),Me=Date.now()+pe;return{token:be,tokenExpiresAt:Me}}var Oe=function(C,V){this._transformRequestFn=C,this._customAccessToken=V,this._createSkuToken()};Oe.prototype._createSkuToken=function(){var C=Ae();this._skuToken=C.token,this._skuTokenExpiresAt=C.tokenExpiresAt},Oe.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},Oe.prototype.transformRequest=function(C,V){return this._transformRequestFn?this._transformRequestFn(C,V)||{url:C}:{url:C}},Oe.prototype.normalizeStyleURL=function(C,V){if(!He(C))return C;var re=Ue(C);return re.path="/styles/v1"+re.path,this._makeAPIURL(re,this._customAccessToken||V)},Oe.prototype.normalizeGlyphsURL=function(C,V){if(!He(C))return C;var re=Ue(C);return re.path="/fonts/v1"+re.path,this._makeAPIURL(re,this._customAccessToken||V)},Oe.prototype.normalizeSourceURL=function(C,V){if(!He(C))return C;var re=Ue(C);return re.path="/v4/"+re.authority+".json",re.params.push("secure"),this._makeAPIURL(re,this._customAccessToken||V)},Oe.prototype.normalizeSpriteURL=function(C,V,re,pe){var be=Ue(C);return He(C)?(be.path="/styles/v1"+be.path+"/sprite"+V+re,this._makeAPIURL(be,this._customAccessToken||pe)):(be.path+=""+V+re,Ie(be))},Oe.prototype.normalizeTileURL=function(C,V){if(this._isSkuTokenExpired()&&this._createSkuToken(),C&&!He(C))return C;var re=Ue(C),pe=/(\.(png|jpg)\d*)(?=$)/,be=/^.+\/v4\//,Me=$.devicePixelRatio>=2||V===512?"@2x":"",Fe=ie.supported?".webp":"$1";re.path=re.path.replace(pe,""+Me+Fe),re.path=re.path.replace(be,"/"),re.path="/v4"+re.path;var tt=this._customAccessToken||We(re.params)||ae.ACCESS_TOKEN;return ae.REQUIRE_ACCESS_TOKEN&&tt&&this._skuToken&&re.params.push("sku="+this._skuToken),this._makeAPIURL(re,tt)},Oe.prototype.canonicalizeTileURL=function(C,V){var re="/v4/",pe=/\.[\w]+$/,be=Ue(C);if(!be.path.match(/(^\/v4\/)/)||!be.path.match(pe))return C;var Me="mapbox://tiles/";Me+=be.path.replace(re,"");var Fe=be.params;return V&&(Fe=Fe.filter(function(tt){return!tt.match(/^access_token=/)})),Fe.length&&(Me+="?"+Fe.join("&")),Me},Oe.prototype.canonicalizeTileset=function(C,V){for(var re=V?He(V):!1,pe=[],be=0,Me=C.tiles||[];be<Me.length;be+=1){var Fe=Me[be];_e(Fe)?pe.push(this.canonicalizeTileURL(Fe,re)):pe.push(Fe)}return pe},Oe.prototype._makeAPIURL=function(C,V){var re="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",pe=Ue(ae.API_URL);if(C.protocol=pe.protocol,C.authority=pe.authority,pe.path!=="/"&&(C.path=""+pe.path+C.path),!ae.REQUIRE_ACCESS_TOKEN)return Ie(C);if(V=V||ae.ACCESS_TOKEN,!V)throw new Error("An API access token is required to use Mapbox GL. "+re);if(V[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+re);return C.params=C.params.filter(function(be){return be.indexOf("access_token")===-1}),C.params.push("access_token="+V),Ie(C)};function He(E){return E.indexOf("mapbox:")===0}var Ge=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function _e(E){return Ge.test(E)}function Re(E){return E.indexOf("sku=")>0&&_e(E)}function We(E){for(var C=0,V=E;C<V.length;C+=1){var re=V[C],pe=re.match(/^access_token=(.*)$/);if(pe)return pe[1]}return null}var qe=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ue(E){var C=E.match(qe);if(!C)throw new Error("Unable to parse URL object");return{protocol:C[1],authority:C[2],path:C[3]||"/",params:C[4]?C[4].split("&"):[]}}function Ie(E){var C=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+C}var Ve="mapbox.eventData";function dt(E){if(!E)return null;var C=E.split(".");if(!C||C.length!==3)return null;try{var V=JSON.parse(se(C[1]));return V}catch{return null}}var Rt=function(C){this.type=C,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Rt.prototype.getStorageKey=function(C){var V=dt(ae.ACCESS_TOKEN),re="";return V&&V.u?re=fe(V.u):re=ae.ACCESS_TOKEN||"",C?Ve+"."+C+":"+re:Ve+":"+re},Rt.prototype.fetchEventData=function(){var C=le("localStorage"),V=this.getStorageKey(),re=this.getStorageKey("uuid");if(C)try{var pe=self.localStorage.getItem(V);pe&&(this.eventData=JSON.parse(pe));var be=self.localStorage.getItem(re);be&&(this.anonId=be)}catch{U("Unable to read from LocalStorage")}},Rt.prototype.saveEventData=function(){var C=le("localStorage"),V=this.getStorageKey(),re=this.getStorageKey("uuid");if(C)try{self.localStorage.setItem(re,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(V,JSON.stringify(this.eventData))}catch{U("Unable to write to LocalStorage")}},Rt.prototype.processRequests=function(C){},Rt.prototype.postEvent=function(C,V,re,pe){var be=this;if(!!ae.EVENTS_URL){var Me=Ue(ae.EVENTS_URL);Me.params.push("access_token="+(pe||ae.ACCESS_TOKEN||""));var Fe={event:this.type,created:new Date(C).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:a,skuId:ke,userId:this.anonId},tt=V?M(Fe,V):Fe,ct={url:Ie(Me),headers:{"Content-Type":"text/plain"},body:JSON.stringify([tt])};this.pendingRequest=je(ct,function(mt){be.pendingRequest=null,re(mt),be.saveEventData(),be.processRequests(pe)})}},Rt.prototype.queueRequest=function(C,V){this.queue.push(C),this.processRequests(V)};var Gt=function(E){function C(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postMapLoadEvent=function(re,pe,be,Me){this.skuToken=be,(ae.EVENTS_URL&&Me||ae.ACCESS_TOKEN&&Array.isArray(re)&&re.some(function(Fe){return He(Fe)||_e(Fe)}))&&this.queueRequest({id:pe,timestamp:Date.now()},Me)},C.prototype.processRequests=function(re){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){var be=this.queue.shift(),Me=be.id,Fe=be.timestamp;Me&&this.success[Me]||(this.anonId||this.fetchEventData(),L(this.anonId)||(this.anonId=v()),this.postEvent(Fe,{skuToken:this.skuToken},function(tt){tt||Me&&(pe.success[Me]=!0)},re))}},C}(Rt),kt=function(E){function C(V){E.call(this,"appUserTurnstile"),this._customAccessToken=V}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.postTurnstileEvent=function(re,pe){ae.EVENTS_URL&&ae.ACCESS_TOKEN&&Array.isArray(re)&&re.some(function(be){return He(be)||_e(be)})&&this.queueRequest(Date.now(),pe)},C.prototype.processRequests=function(re){var pe=this;if(!(this.pendingRequest||this.queue.length===0)){(!this.anonId||!this.eventData.lastSuccess||!this.eventData.tokenU)&&this.fetchEventData();var be=dt(ae.ACCESS_TOKEN),Me=be?be.u:ae.ACCESS_TOKEN,Fe=Me!==this.eventData.tokenU;L(this.anonId)||(this.anonId=v(),Fe=!0);var tt=this.queue.shift();if(this.eventData.lastSuccess){var ct=new Date(this.eventData.lastSuccess),mt=new Date(tt),Dt=(tt-this.eventData.lastSuccess)/(24*60*60*1e3);Fe=Fe||Dt>=1||Dt<-1||ct.getDate()!==mt.getDate()}else Fe=!0;if(!Fe)return this.processRequests();this.postEvent(tt,{"enabled.telemetry":!1},function(Zt){Zt||(pe.eventData.lastSuccess=tt,pe.eventData.tokenU=Me)},re)}},C}(Rt),zt=new kt,Bt=zt.postTurnstileEvent.bind(zt),Lt=new Gt,Mt=Lt.postMapLoadEvent.bind(Lt),it="mapbox-tiles",ht=500,Qe=50,Ce=1e3*60*7,Xe;function rt(){self.caches&&!Xe&&(Xe=self.caches.open(it))}var ut;function Pt(E,C){if(ut===void 0)try{new Response(new ReadableStream),ut=!0}catch{ut=!1}ut?C(E.body):E.blob().then(C)}function St(E,C,V){if(rt(),!!Xe){var re={status:C.status,statusText:C.statusText,headers:new self.Headers};C.headers.forEach(function(Me,Fe){return re.headers.set(Fe,Me)});var pe=q(C.headers.get("Cache-Control")||"");if(!pe["no-store"]){pe["max-age"]&&re.headers.set("Expires",new Date(V+pe["max-age"]*1e3).toUTCString());var be=new Date(re.headers.get("Expires")).getTime()-V;be<Ce||Pt(C,function(Me){var Fe=new self.Response(Me,re);rt(),!!Xe&&Xe.then(function(tt){return tt.put(Nt(E.url),Fe)}).catch(function(tt){return U(tt.message)})})}}}function Nt(E){var C=E.indexOf("?");return C<0?E:E.slice(0,C)}function jt(E,C){if(rt(),!Xe)return C(null);var V=Nt(E.url);Xe.then(function(re){re.match(V).then(function(pe){var be=Ot(pe);re.delete(V),be&&re.put(V,pe.clone()),C(null,pe,be)}).catch(C)}).catch(C)}function Ot(E){if(!E)return!1;var C=new Date(E.headers.get("Expires")||0),V=q(E.headers.get("Cache-Control")||"");return C>Date.now()&&!V["no-cache"]}var Kt=1/0;function Je(E){Kt++,Kt>Qe&&(E.getActor().send("enforceCacheSizeLimit",ht),Kt=0)}function gt(E){rt(),!!Xe&&Xe.then(function(C){C.keys().then(function(V){for(var re=0;re<V.length-E;re++)C.delete(V[re])})})}function Et(E){var C=self.caches.delete(it);E&&C.catch(E).then(function(){return E()})}function rr(E,C){ht=E,Qe=C}var vr;function or(){return vr==null&&(vr=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),vr}var dr={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(dr);var Lr=function(E){function C(V,re,pe){re===401&&_e(pe)&&(V+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,V),this.status=re,this.url=pe,this.name=this.constructor.name,this.message=V}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},C}(Error),kr=ee()?function(){return self.worker&&self.worker.referrer}:function(){return(self.location.protocol==="blob:"?self.parent:self).location.href},tr=function(E){return/^file:/.test(E)||/^file:/.test(kr())&&!/^\w+:/.test(E)};function Or(E,C){var V=new self.AbortController,re=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:kr(),signal:V.signal}),pe=!1,be=!1,Me=Re(re.url);E.type==="json"&&re.headers.set("Accept","application/json");var Fe=function(ct,mt,Dt){if(!be){if(ct&&ct.message!=="SecurityError"&&U(ct),mt&&Dt)return tt(mt);var Zt=Date.now();self.fetch(re).then(function(Ht){if(Ht.ok){var lr=Me?Ht.clone():null;return tt(Ht,lr,Zt)}else return C(new Lr(Ht.statusText,Ht.status,E.url))}).catch(function(Ht){Ht.code!==20&&C(new Error(Ht.message))})}},tt=function(ct,mt,Dt){(E.type==="arrayBuffer"?ct.arrayBuffer():E.type==="json"?ct.json():ct.text()).then(function(Zt){be||(mt&&Dt&&St(re,mt,Dt),pe=!0,C(null,Zt,ct.headers.get("Cache-Control"),ct.headers.get("Expires")))}).catch(function(Zt){be||C(new Error(Zt.message))})};return Me?jt(re,Fe):Fe(null,null),{cancel:function(){be=!0,pe||V.abort()}}}function et(E,C){var V=new self.XMLHttpRequest;V.open(E.method||"GET",E.url,!0),E.type==="arrayBuffer"&&(V.responseType="arraybuffer");for(var re in E.headers)V.setRequestHeader(re,E.headers[re]);return E.type==="json"&&(V.responseType="text",V.setRequestHeader("Accept","application/json")),V.withCredentials=E.credentials==="include",V.onerror=function(){C(new Error(V.statusText))},V.onload=function(){if((V.status>=200&&V.status<300||V.status===0)&&V.response!==null){var pe=V.response;if(E.type==="json")try{pe=JSON.parse(V.response)}catch(be){return C(be)}C(null,pe,V.getResponseHeader("Cache-Control"),V.getResponseHeader("Expires"))}else C(new Lr(V.statusText,V.status,E.url))},V.send(E.body),{cancel:function(){return V.abort()}}}var we=function(E,C){if(!tr(E.url)){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return Or(E,C);if(ee()&&self.worker&&self.worker.actor){var V=!0;return self.worker.actor.send("getResource",E,C,void 0,V)}}return et(E,C)},Se=function(E,C){return we(M(E,{type:"json"}),C)},De=function(E,C){return we(M(E,{type:"arrayBuffer"}),C)},je=function(E,C){return we(M(E,{method:"POST"}),C)};function $e(E){var C=self.document.createElement("a");return C.href=E,C.protocol===self.document.location.protocol&&C.host===self.document.location.host}var ot="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function st(E,C,V,re){var pe=new self.Image,be=self.URL;pe.onload=function(){C(null,pe),be.revokeObjectURL(pe.src)},pe.onerror=function(){return C(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Me=new self.Blob([new Uint8Array(E)],{type:"image/png"});pe.cacheControl=V,pe.expires=re,pe.src=E.byteLength?be.createObjectURL(Me):ot}function pt(E,C){var V=new self.Blob([new Uint8Array(E)],{type:"image/png"});self.createImageBitmap(V).then(function(re){C(null,re)}).catch(function(re){C(new Error("Could not load image because of "+re.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})}var wt,Wt,yr=function(){wt=[],Wt=0};yr();var xr=function(E,C){if(ie.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),Wt>=ae.MAX_PARALLEL_IMAGE_REQUESTS){var V={requestParameters:E,callback:C,cancelled:!1,cancel:function(){this.cancelled=!0}};return wt.push(V),V}Wt++;var re=!1,pe=function(){if(!re)for(re=!0,Wt--;wt.length&&Wt<ae.MAX_PARALLEL_IMAGE_REQUESTS;){var Me=wt.shift(),Fe=Me.requestParameters,tt=Me.callback,ct=Me.cancelled;ct||(Me.cancel=xr(Fe,tt).cancel)}},be=De(E,function(Me,Fe,tt,ct){pe(),Me?C(Me):Fe&&(or()?pt(Fe,C):st(Fe,C,tt,ct))});return{cancel:function(){be.cancel(),pe()}}},Tr=function(E,C){var V=self.document.createElement("video");V.muted=!0,V.onloadstart=function(){C(null,V)};for(var re=0;re<E.length;re++){var pe=self.document.createElement("source");$e(E[re])||(V.crossOrigin="Anonymous"),pe.src=E[re],V.appendChild(pe)}return{cancel:function(){}}};function mr(E,C,V){var re=V[E]&&V[E].indexOf(C)!==-1;re||(V[E]=V[E]||[],V[E].push(C))}function Rr(E,C,V){if(V&&V[E]){var re=V[E].indexOf(C);re!==-1&&V[E].splice(re,1)}}var tn=function(C,V){V===void 0&&(V={}),M(this,V),this.type=C},wr=function(E){function C(V,re){re===void 0&&(re={}),E.call(this,"error",M({error:V},re))}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(tn),gr=function(){};gr.prototype.on=function(C,V){return this._listeners=this._listeners||{},mr(C,V,this._listeners),this},gr.prototype.off=function(C,V){return Rr(C,V,this._listeners),Rr(C,V,this._oneTimeListeners),this},gr.prototype.once=function(C,V){return this._oneTimeListeners=this._oneTimeListeners||{},mr(C,V,this._oneTimeListeners),this},gr.prototype.fire=function(C,V){typeof C=="string"&&(C=new tn(C,V||{}));var re=C.type;if(this.listens(re)){C.target=this;for(var pe=this._listeners&&this._listeners[re]?this._listeners[re].slice():[],be=0,Me=pe;be<Me.length;be+=1){var Fe=Me[be];Fe.call(this,C)}for(var tt=this._oneTimeListeners&&this._oneTimeListeners[re]?this._oneTimeListeners[re].slice():[],ct=0,mt=tt;ct<mt.length;ct+=1){var Dt=mt[ct];Rr(re,Dt,this._oneTimeListeners),Dt.call(this,C)}var Zt=this._eventedParent;Zt&&(M(C,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Zt.fire(C))}else C instanceof wr&&console.error(C.error);return this},gr.prototype.listens=function(C){return this._listeners&&this._listeners[C]&&this._listeners[C].length>0||this._oneTimeListeners&&this._oneTimeListeners[C]&&this._oneTimeListeners[C].length>0||this._eventedParent&&this._eventedParent.listens(C)},gr.prototype.setEventedParent=function(C,V){return this._eventedParent=C,this._eventedParentData=V,this};var mn=8,Gr={version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},Ar={"*":{type:"source"}},nn=["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],fn={type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},jr={type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},at={type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},Ft={type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},er={type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},hr={type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},Wr={id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},zr=["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],Pr={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},br={"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Xr={"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Fn={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},kn={"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ra={"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},oa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},Sa={visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},ya={type:"array",value:"*"},pr={type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},vn={type:"enum",values:{Point:{},LineString:{},Polygon:{}}},$r={type:"array",minimum:0,maximum:24,value:["number","color"],length:2},On={type:"array",value:"*",minimum:1},Bn={type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},ha={anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},na=["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],Vn={"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},fa={"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},ga={"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},ur={"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},Dr={"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},on={"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},rn={"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},gn={"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},wn={duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},pn={"*":{type:"string"}},cr={$version:mn,$root:Gr,sources:Ar,source:nn,source_vector:fn,source_raster:jr,source_raster_dem:at,source_geojson:Ft,source_video:er,source_image:hr,layer:Wr,layout:zr,layout_background:Pr,layout_fill:br,layout_circle:Xr,layout_heatmap:Fn,"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:kn,layout_symbol:ra,layout_raster:oa,layout_hillshade:Sa,filter:ya,filter_operator:pr,geometry_type:vn,function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:$r,expression:On,expression_name:Bn,light:ha,paint:na,paint_fill:Vn,"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:fa,paint_circle:ga,paint_heatmap:ur,paint_symbol:Dr,paint_raster:on,paint_hillshade:rn,paint_background:gn,transition:wn,"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:pn},ar=function(C,V,re,pe){this.message=(C?C+": ":"")+re,pe&&(this.identifier=pe),V!=null&&V.__line__&&(this.line=V.__line__)};function Fr(E){var C=E.key,V=E.value;return V?[new ar(C,V,"constants have been deprecated as of v8")]:[]}function Jr(E){for(var C=[],V=arguments.length-1;V-- >0;)C[V]=arguments[V+1];for(var re=0,pe=C;re<pe.length;re+=1){var be=pe[re];for(var Me in be)E[Me]=be[Me]}return E}function En(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function Hn(E){if(Array.isArray(E))return E.map(Hn);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var C={};for(var V in E)C[V]=Hn(E[V]);return C}return En(E)}var Jn=function(E){function C(V,re){E.call(this,re),this.message=re,this.key=V}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Error),Zn=function(C,V){V===void 0&&(V=[]),this.parent=C,this.bindings={};for(var re=0,pe=V;re<pe.length;re+=1){var be=pe[re],Me=be[0],Fe=be[1];this.bindings[Me]=Fe}};Zn.prototype.concat=function(C){return new Zn(this,C)},Zn.prototype.get=function(C){if(this.bindings[C])return this.bindings[C];if(this.parent)return this.parent.get(C);throw new Error(C+" not found in scope.")},Zn.prototype.has=function(C){return this.bindings[C]?!0:this.parent?this.parent.has(C):!1};var Un={kind:"null"},yn={kind:"number"},Dn={kind:"string"},Yn={kind:"boolean"},ua={kind:"color"},Ya={kind:"object"},Ca={kind:"value"},wl={kind:"error"},Qo={kind:"collator"},vs={kind:"formatted"},Ws={kind:"resolvedImage"};function io(E,C){return{kind:"array",itemType:E,N:C}}function zi(E){if(E.kind==="array"){var C=zi(E.itemType);return typeof E.N=="number"?"array<"+C+", "+E.N+">":E.itemType.kind==="value"?"array":"array<"+C+">"}else return E.kind}var il=[Un,yn,Dn,Yn,ua,vs,Ya,io(Ca),Ws];function ol(E,C){if(C.kind==="error")return null;if(E.kind==="array"){if(C.kind==="array"&&(C.N===0&&C.itemType.kind==="value"||!ol(E.itemType,C.itemType))&&(typeof E.N!="number"||E.N===C.N))return null}else{if(E.kind===C.kind)return null;if(E.kind==="value")for(var V=0,re=il;V<re.length;V+=1){var pe=re[V];if(!ol(pe,C))return null}}return"Expected "+zi(E)+" but found "+zi(C)+" instead."}function ps(E,C){return C.some(function(V){return V.kind===E.kind})}function Gl(E,C){return C.some(function(V){return V==="null"?E===null:V==="array"?Array.isArray(E):V==="object"?E&&!Array.isArray(E)&&typeof E=="object":V===typeof E})}var ou=i(function(E,C){var V={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function re(ct){return ct=Math.round(ct),ct<0?0:ct>255?255:ct}function pe(ct){return ct<0?0:ct>1?1:ct}function be(ct){return ct[ct.length-1]==="%"?re(parseFloat(ct)/100*255):re(parseInt(ct))}function Me(ct){return ct[ct.length-1]==="%"?pe(parseFloat(ct)/100):pe(parseFloat(ct))}function Fe(ct,mt,Dt){return Dt<0?Dt+=1:Dt>1&&(Dt-=1),Dt*6<1?ct+(mt-ct)*Dt*6:Dt*2<1?mt:Dt*3<2?ct+(mt-ct)*(2/3-Dt)*6:ct}function tt(ct){var mt=ct.replace(/ /g,"").toLowerCase();if(mt in V)return V[mt].slice();if(mt[0]==="#"){if(mt.length===4){var Dt=parseInt(mt.substr(1),16);return Dt>=0&&Dt<=4095?[(Dt&3840)>>4|(Dt&3840)>>8,Dt&240|(Dt&240)>>4,Dt&15|(Dt&15)<<4,1]:null}else if(mt.length===7){var Dt=parseInt(mt.substr(1),16);return Dt>=0&&Dt<=16777215?[(Dt&16711680)>>16,(Dt&65280)>>8,Dt&255,1]:null}return null}var Zt=mt.indexOf("("),Ht=mt.indexOf(")");if(Zt!==-1&&Ht+1===mt.length){var lr=mt.substr(0,Zt),Ir=mt.substr(Zt+1,Ht-(Zt+1)).split(","),ln=1;switch(lr){case"rgba":if(Ir.length!==4)return null;ln=Me(Ir.pop());case"rgb":return Ir.length!==3?null:[be(Ir[0]),be(Ir[1]),be(Ir[2]),ln];case"hsla":if(Ir.length!==4)return null;ln=Me(Ir.pop());case"hsl":if(Ir.length!==3)return null;var qr=(parseFloat(Ir[0])%360+360)%360/360,Mn=Me(Ir[1]),bn=Me(Ir[2]),An=bn<=.5?bn*(Mn+1):bn+Mn-bn*Mn,Rn=bn*2-An;return[re(Fe(Rn,An,qr+1/3)*255),re(Fe(Rn,An,qr)*255),re(Fe(Rn,An,qr-1/3)*255),ln];default:return null}}return null}try{C.parseCSSColor=tt}catch{}}),Xu=ou.parseCSSColor,di=function(C,V,re,pe){pe===void 0&&(pe=1),this.r=C,this.g=V,this.b=re,this.a=pe};di.parse=function(C){if(!!C){if(C instanceof di)return C;if(typeof C=="string"){var V=Xu(C);if(!!V)return new di(V[0]/255*V[3],V[1]/255*V[3],V[2]/255*V[3],V[3])}}},di.prototype.toString=function(){var C=this.toArray(),V=C[0],re=C[1],pe=C[2],be=C[3];return"rgba("+Math.round(V)+","+Math.round(re)+","+Math.round(pe)+","+be+")"},di.prototype.toArray=function(){var C=this,V=C.r,re=C.g,pe=C.b,be=C.a;return be===0?[0,0,0,0]:[V*255/be,re*255/be,pe*255/be,be]},di.black=new di(0,0,0,1),di.white=new di(1,1,1,1),di.transparent=new di(0,0,0,0),di.red=new di(1,0,0,1);var Tl=function(C,V,re){C?this.sensitivity=V?"variant":"case":this.sensitivity=V?"accent":"base",this.locale=re,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};Tl.prototype.compare=function(C,V){return this.collator.compare(C,V)},Tl.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var sl=function(C,V,re,pe,be){this.text=C,this.image=V,this.scale=re,this.fontStack=pe,this.textColor=be},Yi=function(C){this.sections=C};Yi.fromString=function(C){return new Yi([new sl(C,null,null,null,null)])},Yi.prototype.isEmpty=function(){return this.sections.length===0?!0:!this.sections.some(function(C){return C.text.length!==0||C.image&&C.image.name.length!==0})},Yi.factory=function(C){return C instanceof Yi?C:Yi.fromString(C)},Yi.prototype.toString=function(){return this.sections.length===0?"":this.sections.map(function(C){return C.text}).join("")},Yi.prototype.serialize=function(){for(var C=["format"],V=0,re=this.sections;V<re.length;V+=1){var pe=re[V];if(pe.image){C.push(["image",pe.image.name]);continue}C.push(pe.text);var be={};pe.fontStack&&(be["text-font"]=["literal",pe.fontStack.split(",")]),pe.scale&&(be["font-scale"]=pe.scale),pe.textColor&&(be["text-color"]=["rgba"].concat(pe.textColor.toArray())),C.push(be)}return C};var Oo=function(C){this.name=C.name,this.available=C.available};Oo.prototype.toString=function(){return this.name},Oo.fromString=function(C){return C?new Oo({name:C,available:!1}):null},Oo.prototype.serialize=function(){return["image",this.name]};function su(E,C,V,re){if(!(typeof E=="number"&&E>=0&&E<=255&&typeof C=="number"&&C>=0&&C<=255&&typeof V=="number"&&V>=0&&V<=255)){var pe=typeof re=="number"?[E,C,V,re]:[E,C,V];return"Invalid rgba value ["+pe.join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}return typeof re=="undefined"||typeof re=="number"&&re>=0&&re<=1?null:"Invalid rgba value ["+[E,C,V,re].join(", ")+"]: 'a' must be between 0 and 1."}function zs(E){if(E===null)return!0;if(typeof E=="string")return!0;if(typeof E=="boolean")return!0;if(typeof E=="number")return!0;if(E instanceof di)return!0;if(E instanceof Tl)return!0;if(E instanceof Yi)return!0;if(E instanceof Oo)return!0;if(Array.isArray(E)){for(var C=0,V=E;C<V.length;C+=1){var re=V[C];if(!zs(re))return!1}return!0}else if(typeof E=="object"){for(var pe in E)if(!zs(E[pe]))return!1;return!0}else return!1}function Fi(E){if(E===null)return Un;if(typeof E=="string")return Dn;if(typeof E=="boolean")return Yn;if(typeof E=="number")return yn;if(E instanceof di)return ua;if(E instanceof Tl)return Qo;if(E instanceof Yi)return vs;if(E instanceof Oo)return Ws;if(Array.isArray(E)){for(var C=E.length,V,re=0,pe=E;re<pe.length;re+=1){var be=pe[re],Me=Fi(be);if(!V)V=Me;else{if(V===Me)continue;V=Ca;break}}return io(V||Ca,C)}else return Ya}function Wl(E){var C=typeof E;return E===null?"":C==="string"||C==="number"||C==="boolean"?String(E):E instanceof di||E instanceof Yi||E instanceof Oo?E.toString():JSON.stringify(E)}var to=function(C,V){this.type=C,this.value=V};to.parse=function(C,V){if(C.length!==2)return V.error("'literal' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(!zs(C[1]))return V.error("invalid value");var re=C[1],pe=Fi(re),be=V.expectedType;return pe.kind==="array"&&pe.N===0&&be&&be.kind==="array"&&(typeof be.N!="number"||be.N===0)&&(pe=be),new to(pe,re)},to.prototype.evaluate=function(){return this.value},to.prototype.eachChild=function(){},to.prototype.outputDefined=function(){return!0},to.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof di?["rgba"].concat(this.value.toArray()):this.value instanceof Yi?this.value.serialize():this.value};var Ui=function(C){this.name="ExpressionEvaluationError",this.message=C};Ui.prototype.toJSON=function(){return this.message};var co={string:Dn,number:yn,boolean:Yn,object:Ya},ro=function(C,V){this.type=C,this.args=V};ro.parse=function(C,V){if(C.length<2)return V.error("Expected at least one argument.");var re=1,pe,be=C[0];if(be==="array"){var Me;if(C.length>2){var Fe=C[1];if(typeof Fe!="string"||!(Fe in co)||Fe==="object")return V.error('The item type argument of "array" must be one of string, number, boolean',1);Me=co[Fe],re++}else Me=Ca;var tt;if(C.length>3){if(C[2]!==null&&(typeof C[2]!="number"||C[2]<0||C[2]!==Math.floor(C[2])))return V.error('The length argument to "array" must be a positive integer literal',2);tt=C[2],re++}pe=io(Me,tt)}else pe=co[be];for(var ct=[];re<C.length;re++){var mt=V.parse(C[re],re,Ca);if(!mt)return null;ct.push(mt)}return new ro(pe,ct)},ro.prototype.evaluate=function(C){for(var V=0;V<this.args.length;V++){var re=this.args[V].evaluate(C),pe=ol(this.type,Fi(re));if(pe){if(V===this.args.length-1)throw new Ui("Expected value to be of type "+zi(this.type)+", but found "+zi(Fi(re))+" instead.")}else return re}return null},ro.prototype.eachChild=function(C){this.args.forEach(C)},ro.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},ro.prototype.serialize=function(){var C=this.type,V=[C.kind];if(C.kind==="array"){var re=C.itemType;if(re.kind==="string"||re.kind==="number"||re.kind==="boolean"){V.push(re.kind);var pe=C.N;(typeof pe=="number"||this.args.length>1)&&V.push(pe)}}return V.concat(this.args.map(function(be){return be.serialize()}))};var ws=function(C){this.type=vs,this.sections=C};ws.parse=function(C,V){if(C.length<2)return V.error("Expected at least one argument.");var re=C[1];if(!Array.isArray(re)&&typeof re=="object")return V.error("First argument must be an image or text section.");for(var pe=[],be=!1,Me=1;Me<=C.length-1;++Me){var Fe=C[Me];if(be&&typeof Fe=="object"&&!Array.isArray(Fe)){be=!1;var tt=null;if(Fe["font-scale"]&&(tt=V.parse(Fe["font-scale"],1,yn),!tt))return null;var ct=null;if(Fe["text-font"]&&(ct=V.parse(Fe["text-font"],1,io(Dn)),!ct))return null;var mt=null;if(Fe["text-color"]&&(mt=V.parse(Fe["text-color"],1,ua),!mt))return null;var Dt=pe[pe.length-1];Dt.scale=tt,Dt.font=ct,Dt.textColor=mt}else{var Zt=V.parse(C[Me],1,Ca);if(!Zt)return null;var Ht=Zt.type.kind;if(Ht!=="string"&&Ht!=="value"&&Ht!=="null"&&Ht!=="resolvedImage")return V.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");be=!0,pe.push({content:Zt,scale:null,font:null,textColor:null})}}return new ws(pe)},ws.prototype.evaluate=function(C){var V=function(re){var pe=re.content.evaluate(C);return Fi(pe)===Ws?new sl("",pe,null,null,null):new sl(Wl(pe),null,re.scale?re.scale.evaluate(C):null,re.font?re.font.evaluate(C).join(","):null,re.textColor?re.textColor.evaluate(C):null)};return new Yi(this.sections.map(V))},ws.prototype.eachChild=function(C){for(var V=0,re=this.sections;V<re.length;V+=1){var pe=re[V];C(pe.content),pe.scale&&C(pe.scale),pe.font&&C(pe.font),pe.textColor&&C(pe.textColor)}},ws.prototype.outputDefined=function(){return!1},ws.prototype.serialize=function(){for(var C=["format"],V=0,re=this.sections;V<re.length;V+=1){var pe=re[V];C.push(pe.content.serialize());var be={};pe.scale&&(be["font-scale"]=pe.scale.serialize()),pe.font&&(be["text-font"]=pe.font.serialize()),pe.textColor&&(be["text-color"]=pe.textColor.serialize()),C.push(be)}return C};var Al=function(C){this.type=Ws,this.input=C};Al.parse=function(C,V){if(C.length!==2)return V.error("Expected two arguments.");var re=V.parse(C[1],1,Dn);return re?new Al(re):V.error("No image name provided.")},Al.prototype.evaluate=function(C){var V=this.input.evaluate(C),re=Oo.fromString(V);return re&&C.availableImages&&(re.available=C.availableImages.indexOf(V)>-1),re},Al.prototype.eachChild=function(C){C(this.input)},Al.prototype.outputDefined=function(){return!1},Al.prototype.serialize=function(){return["image",this.input.serialize()]};var df={"to-boolean":Yn,"to-color":ua,"to-number":yn,"to-string":Dn},ds=function(C,V){this.type=C,this.args=V};ds.parse=function(C,V){if(C.length<2)return V.error("Expected at least one argument.");var re=C[0];if((re==="to-boolean"||re==="to-string")&&C.length!==2)return V.error("Expected one argument.");for(var pe=df[re],be=[],Me=1;Me<C.length;Me++){var Fe=V.parse(C[Me],Me,Ca);if(!Fe)return null;be.push(Fe)}return new ds(pe,be)},ds.prototype.evaluate=function(C){if(this.type.kind==="boolean")return Boolean(this.args[0].evaluate(C));if(this.type.kind==="color"){for(var V,re,pe=0,be=this.args;pe<be.length;pe+=1){var Me=be[pe];if(V=Me.evaluate(C),re=null,V instanceof di)return V;if(typeof V=="string"){var Fe=C.parseColor(V);if(Fe)return Fe}else if(Array.isArray(V)&&(V.length<3||V.length>4?re="Invalid rbga value "+JSON.stringify(V)+": expected an array containing either three or four numeric values.":re=su(V[0],V[1],V[2],V[3]),!re))return new di(V[0]/255,V[1]/255,V[2]/255,V[3])}throw new Ui(re||"Could not parse color from value '"+(typeof V=="string"?V:String(JSON.stringify(V)))+"'")}else if(this.type.kind==="number"){for(var tt=null,ct=0,mt=this.args;ct<mt.length;ct+=1){var Dt=mt[ct];if(tt=Dt.evaluate(C),tt===null)return 0;var Zt=Number(tt);if(!isNaN(Zt))return Zt}throw new Ui("Could not convert "+JSON.stringify(tt)+" to number.")}else return this.type.kind==="formatted"?Yi.fromString(Wl(this.args[0].evaluate(C))):this.type.kind==="resolvedImage"?Oo.fromString(Wl(this.args[0].evaluate(C))):Wl(this.args[0].evaluate(C))},ds.prototype.eachChild=function(C){this.args.forEach(C)},ds.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},ds.prototype.serialize=function(){if(this.type.kind==="formatted")return new ws([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Al(this.args[0]).serialize();var C=["to-"+this.type.kind];return this.eachChild(function(V){C.push(V.serialize())}),C};var gf=["Unknown","Point","LineString","Polygon"],ll=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};ll.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},ll.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?gf[this.feature.type]:this.feature.type:null},ll.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},ll.prototype.canonicalID=function(){return this.canonical},ll.prototype.properties=function(){return this.feature&&this.feature.properties||{}},ll.prototype.parseColor=function(C){var V=this._parseColorCache[C];return V||(V=this._parseColorCache[C]=di.parse(C)),V};var No=function(C,V,re,pe){this.name=C,this.type=V,this._evaluate=re,this.args=pe};No.prototype.evaluate=function(C){return this._evaluate(C,this.args)},No.prototype.eachChild=function(C){this.args.forEach(C)},No.prototype.outputDefined=function(){return!1},No.prototype.serialize=function(){return[this.name].concat(this.args.map(function(C){return C.serialize()}))},No.parse=function(C,V){var re,pe=C[0],be=No.definitions[pe];if(!be)return V.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Me=Array.isArray(be)?be[0]:be.type,Fe=Array.isArray(be)?[[be[1],be[2]]]:be.overloads,tt=Fe.filter(function(Ia){var Fa=Ia[0];return!Array.isArray(Fa)||Fa.length===C.length-1}),ct=null,mt=0,Dt=tt;mt<Dt.length;mt+=1){var Zt=Dt[mt],Ht=Zt[0],lr=Zt[1];ct=new Bo(V.registry,V.path,null,V.scope);for(var Ir=[],ln=!1,qr=1;qr<C.length;qr++){var Mn=C[qr],bn=Array.isArray(Ht)?Ht[qr-1]:Ht.type,An=ct.parse(Mn,1+Ir.length,bn);if(!An){ln=!0;break}Ir.push(An)}if(!ln){if(Array.isArray(Ht)&&Ht.length!==Ir.length){ct.error("Expected "+Ht.length+" arguments, but found "+Ir.length+" instead.");continue}for(var Rn=0;Rn<Ir.length;Rn++){var Xn=Array.isArray(Ht)?Ht[Rn]:Ht.type,la=Ir[Rn];ct.concat(Rn+1).checkSubtype(Xn,la.type)}if(ct.errors.length===0)return new No(pe,Me,lr,Ir)}}if(tt.length===1)(re=V.errors).push.apply(re,ct.errors);else{for(var ia=tt.length?tt:Fe,Oa=ia.map(function(Ia){var Fa=Ia[0];return Uf(Fa)}).join(" | "),Ma=[],Ea=1;Ea<C.length;Ea++){var ai=V.parse(C[Ea],1+Ma.length);if(!ai)return null;Ma.push(zi(ai.type))}V.error("Expected arguments of type "+Oa+", but found ("+Ma.join(", ")+") instead.")}return null},No.register=function(C,V){No.definitions=V;for(var re in V)C[re]=No};function Uf(E){return Array.isArray(E)?"("+E.map(zi).join(", ")+")":"("+zi(E.type)+"...)"}var ul=function(C,V,re){this.type=Qo,this.locale=re,this.caseSensitive=C,this.diacriticSensitive=V};ul.parse=function(C,V){if(C.length!==2)return V.error("Expected one argument.");var re=C[1];if(typeof re!="object"||Array.isArray(re))return V.error("Collator options argument must be an object.");var pe=V.parse(re["case-sensitive"]===void 0?!1:re["case-sensitive"],1,Yn);if(!pe)return null;var be=V.parse(re["diacritic-sensitive"]===void 0?!1:re["diacritic-sensitive"],1,Yn);if(!be)return null;var Me=null;return re.locale&&(Me=V.parse(re.locale,1,Dn),!Me)?null:new ul(pe,be,Me)},ul.prototype.evaluate=function(C){return new Tl(this.caseSensitive.evaluate(C),this.diacriticSensitive.evaluate(C),this.locale?this.locale.evaluate(C):null)},ul.prototype.eachChild=function(C){C(this.caseSensitive),C(this.diacriticSensitive),this.locale&&C(this.locale)},ul.prototype.outputDefined=function(){return!1},ul.prototype.serialize=function(){var C={};return C["case-sensitive"]=this.caseSensitive.serialize(),C["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(C.locale=this.locale.serialize()),["collator",C]};var Ys=8192;function Eu(E,C){E[0]=Math.min(E[0],C[0]),E[1]=Math.min(E[1],C[1]),E[2]=Math.max(E[2],C[0]),E[3]=Math.max(E[3],C[1])}function Vf(E){return(180+E)/360}function Hf(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function Ml(E,C){return!(E[0]<=C[0]||E[2]>=C[2]||E[1]<=C[1]||E[3]>=C[3])}function Cu(E,C){var V=Vf(E[0]),re=Hf(E[1]),pe=Math.pow(2,C.z);return[Math.round(V*pe*Ys),Math.round(re*pe*Ys)]}function js(E,C,V){var re=E[0]-C[0],pe=E[1]-C[1],be=E[0]-V[0],Me=E[1]-V[1];return re*Me-be*pe==0&&re*be<=0&&pe*Me<=0}function Zu(E,C,V){return C[1]>E[1]!=V[1]>E[1]&&E[0]<(V[0]-C[0])*(E[1]-C[1])/(V[1]-C[1])+C[0]}function Yl(E,C){for(var V=!1,re=0,pe=C.length;re<pe;re++)for(var be=C[re],Me=0,Fe=be.length;Me<Fe-1;Me++){if(js(E,be[Me],be[Me+1]))return!1;Zu(E,be[Me],be[Me+1])&&(V=!V)}return V}function Ku(E,C){for(var V=0;V<C.length;V++)if(Yl(E,C[V]))return!0;return!1}function mf(E,C){return E[0]*C[1]-E[1]*C[0]}function Lu(E,C,V,re){var pe=E[0]-V[0],be=E[1]-V[1],Me=C[0]-V[0],Fe=C[1]-V[1],tt=re[0]-V[0],ct=re[1]-V[1],mt=pe*ct-tt*be,Dt=Me*ct-tt*Fe;return mt>0&&Dt<0||mt<0&&Dt>0}function Gf(E,C,V,re){var pe=[C[0]-E[0],C[1]-E[1]],be=[re[0]-V[0],re[1]-V[1]];return mf(be,pe)===0?!1:!!(Lu(E,C,V,re)&&Lu(V,re,E,C))}function Sl(E,C,V){for(var re=0,pe=V;re<pe.length;re+=1)for(var be=pe[re],Me=0;Me<be.length-1;++Me)if(Gf(E,C,be[Me],be[Me+1]))return!0;return!1}function Ju(E,C){for(var V=0;V<E.length;++V)if(!Yl(E[V],C))return!1;for(var re=0;re<E.length-1;++re)if(Sl(E[re],E[re+1],C))return!1;return!0}function Pu(E,C){for(var V=0;V<C.length;V++)if(Ju(E,C[V]))return!0;return!1}function Fs(E,C,V){for(var re=[],pe=0;pe<E.length;pe++){for(var be=[],Me=0;Me<E[pe].length;Me++){var Fe=Cu(E[pe][Me],V);Eu(C,Fe),be.push(Fe)}re.push(be)}return re}function lu(E,C,V){for(var re=[],pe=0;pe<E.length;pe++){var be=Fs(E[pe],C,V);re.push(be)}return re}function Qu(E,C,V,re){if(E[0]<V[0]||E[0]>V[2]){var pe=re*.5,be=E[0]-V[0]>pe?-re:V[0]-E[0]>pe?re:0;be===0&&(be=E[0]-V[2]>pe?-re:V[2]-E[0]>pe?re:0),E[0]+=be}Eu(C,E)}function yf(E){E[0]=E[1]=1/0,E[2]=E[3]=-1/0}function xf(E,C,V,re){for(var pe=Math.pow(2,re.z)*Ys,be=[re.x*Ys,re.y*Ys],Me=[],Fe=0,tt=E;Fe<tt.length;Fe+=1)for(var ct=tt[Fe],mt=0,Dt=ct;mt<Dt.length;mt+=1){var Zt=Dt[mt],Ht=[Zt.x+be[0],Zt.y+be[1]];Qu(Ht,C,V,pe),Me.push(Ht)}return Me}function Ru(E,C,V,re){for(var pe=Math.pow(2,re.z)*Ys,be=[re.x*Ys,re.y*Ys],Me=[],Fe=0,tt=E;Fe<tt.length;Fe+=1){for(var ct=tt[Fe],mt=[],Dt=0,Zt=ct;Dt<Zt.length;Dt+=1){var Ht=Zt[Dt],lr=[Ht.x+be[0],Ht.y+be[1]];Eu(C,lr),mt.push(lr)}Me.push(mt)}if(C[2]-C[0]<=pe/2){yf(C);for(var Ir=0,ln=Me;Ir<ln.length;Ir+=1)for(var qr=ln[Ir],Mn=0,bn=qr;Mn<bn.length;Mn+=1){var An=bn[Mn];Qu(An,C,V,pe)}}return Me}function Wf(E,C){var V=[1/0,1/0,-1/0,-1/0],re=[1/0,1/0,-1/0,-1/0],pe=E.canonicalID();if(C.type==="Polygon"){var be=Fs(C.coordinates,re,pe),Me=xf(E.geometry(),V,re,pe);if(!Ml(V,re))return!1;for(var Fe=0,tt=Me;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(!Yl(ct,be))return!1}}if(C.type==="MultiPolygon"){var mt=lu(C.coordinates,re,pe),Dt=xf(E.geometry(),V,re,pe);if(!Ml(V,re))return!1;for(var Zt=0,Ht=Dt;Zt<Ht.length;Zt+=1){var lr=Ht[Zt];if(!Ku(lr,mt))return!1}}return!0}function bf(E,C){var V=[1/0,1/0,-1/0,-1/0],re=[1/0,1/0,-1/0,-1/0],pe=E.canonicalID();if(C.type==="Polygon"){var be=Fs(C.coordinates,re,pe),Me=Ru(E.geometry(),V,re,pe);if(!Ml(V,re))return!1;for(var Fe=0,tt=Me;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(!Ju(ct,be))return!1}}if(C.type==="MultiPolygon"){var mt=lu(C.coordinates,re,pe),Dt=Ru(E.geometry(),V,re,pe);if(!Ml(V,re))return!1;for(var Zt=0,Ht=Dt;Zt<Ht.length;Zt+=1){var lr=Ht[Zt];if(!Pu(lr,mt))return!1}}return!0}var gs=function(C,V){this.type=Yn,this.geojson=C,this.geometries=V};gs.parse=function(C,V){if(C.length!==2)return V.error("'within' expression requires exactly one argument, but found "+(C.length-1)+" instead.");if(zs(C[1])){var re=C[1];if(re.type==="FeatureCollection")for(var pe=0;pe<re.features.length;++pe){var be=re.features[pe].geometry.type;if(be==="Polygon"||be==="MultiPolygon")return new gs(re,re.features[pe].geometry)}else if(re.type==="Feature"){var Me=re.geometry.type;if(Me==="Polygon"||Me==="MultiPolygon")return new gs(re,re.geometry)}else if(re.type==="Polygon"||re.type==="MultiPolygon")return new gs(re,re)}return V.error("'within' expression requires valid geojson object that contains polygon geometry type.")},gs.prototype.evaluate=function(C){if(C.geometry()!=null&&C.canonicalID()!=null){if(C.geometryType()==="Point")return Wf(C,this.geometries);if(C.geometryType()==="LineString")return bf(C,this.geometries)}return!1},gs.prototype.eachChild=function(){},gs.prototype.outputDefined=function(){return!0},gs.prototype.serialize=function(){return["within",this.geojson]};function jl(E){if(E instanceof No){if(E.name==="get"&&E.args.length===1)return!1;if(E.name==="feature-state")return!1;if(E.name==="has"&&E.args.length===1)return!1;if(E.name==="properties"||E.name==="geometry-type"||E.name==="id")return!1;if(/^filter-/.test(E.name))return!1}if(E instanceof gs)return!1;var C=!0;return E.eachChild(function(V){C&&!jl(V)&&(C=!1)}),C}function Xl(E){if(E instanceof No&&E.name==="feature-state")return!1;var C=!0;return E.eachChild(function(V){C&&!Xl(V)&&(C=!1)}),C}function $u(E,C){if(E instanceof No&&C.indexOf(E.name)>=0)return!1;var V=!0;return E.eachChild(function(re){V&&!$u(re,C)&&(V=!1)}),V}var Os=function(C,V){this.type=V.type,this.name=C,this.boundExpression=V};Os.parse=function(C,V){if(C.length!==2||typeof C[1]!="string")return V.error("'var' expression requires exactly one string literal argument.");var re=C[1];return V.scope.has(re)?new Os(re,V.scope.get(re)):V.error('Unknown variable "'+re+'". Make sure "'+re+'" has been bound in an enclosing "let" expression before using it.',1)},Os.prototype.evaluate=function(C){return this.boundExpression.evaluate(C)},Os.prototype.eachChild=function(){},Os.prototype.outputDefined=function(){return!1},Os.prototype.serialize=function(){return["var",this.name]};var Bo=function(C,V,re,pe,be){V===void 0&&(V=[]),pe===void 0&&(pe=new Zn),be===void 0&&(be=[]),this.registry=C,this.path=V,this.key=V.map(function(Me){return"["+Me+"]"}).join(""),this.scope=pe,this.errors=be,this.expectedType=re};Bo.prototype.parse=function(C,V,re,pe,be){return be===void 0&&(be={}),V?this.concat(V,re,pe)._parse(C,be):this._parse(C,be)},Bo.prototype._parse=function(C,V){(C===null||typeof C=="string"||typeof C=="boolean"||typeof C=="number")&&(C=["literal",C]);function re(mt,Dt,Zt){return Zt==="assert"?new ro(Dt,[mt]):Zt==="coerce"?new ds(Dt,[mt]):mt}if(Array.isArray(C)){if(C.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var pe=C[0];if(typeof pe!="string")return this.error("Expression name must be a string, but found "+typeof pe+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var be=this.registry[pe];if(be){var Me=be.parse(C,this);if(!Me)return null;if(this.expectedType){var Fe=this.expectedType,tt=Me.type;if((Fe.kind==="string"||Fe.kind==="number"||Fe.kind==="boolean"||Fe.kind==="object"||Fe.kind==="array")&&tt.kind==="value")Me=re(Me,Fe,V.typeAnnotation||"assert");else if((Fe.kind==="color"||Fe.kind==="formatted"||Fe.kind==="resolvedImage")&&(tt.kind==="value"||tt.kind==="string"))Me=re(Me,Fe,V.typeAnnotation||"coerce");else if(this.checkSubtype(Fe,tt))return null}if(!(Me instanceof to)&&Me.type.kind!=="resolvedImage"&&Du(Me)){var ct=new ll;try{Me=new to(Me.type,Me.evaluate(ct))}catch(mt){return this.error(mt.message),null}}return Me}return this.error('Unknown expression "'+pe+'". If you wanted a literal array, use ["literal", [...]].',0)}else return typeof C=="undefined"?this.error("'undefined' value invalid. Use null instead."):typeof C=="object"?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof C+" instead.")},Bo.prototype.concat=function(C,V,re){var pe=typeof C=="number"?this.path.concat(C):this.path,be=re?this.scope.concat(re):this.scope;return new Bo(this.registry,pe,V||null,be,this.errors)},Bo.prototype.error=function(C){for(var V=[],re=arguments.length-1;re-- >0;)V[re]=arguments[re+1];var pe=""+this.key+V.map(function(be){return"["+be+"]"}).join("");this.errors.push(new Jn(pe,C))},Bo.prototype.checkSubtype=function(C,V){var re=ol(C,V);return re&&this.error(re),re};function Du(E){if(E instanceof Os)return Du(E.boundExpression);if(E instanceof No&&E.name==="error")return!1;if(E instanceof ul)return!1;if(E instanceof gs)return!1;var C=E instanceof ds||E instanceof ro,V=!0;return E.eachChild(function(re){C?V=V&&Du(re):V=V&&re instanceof to}),V?jl(E)&&$u(E,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]):!1}function Xs(E,C){for(var V=E.length-1,re=0,pe=V,be=0,Me,Fe;re<=pe;)if(be=Math.floor((re+pe)/2),Me=E[be],Fe=E[be+1],Me<=C){if(be===V||C<Fe)return be;re=be+1}else if(Me>C)pe=be-1;else throw new Ui("Input is not a number.");return 0}var Zs=function(C,V,re){this.type=C,this.input=V,this.labels=[],this.outputs=[];for(var pe=0,be=re;pe<be.length;pe+=1){var Me=be[pe],Fe=Me[0],tt=Me[1];this.labels.push(Fe),this.outputs.push(tt)}};Zs.parse=function(C,V){if(C.length-1<4)return V.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return V.error("Expected an even number of arguments.");var re=V.parse(C[1],1,yn);if(!re)return null;var pe=[],be=null;V.expectedType&&V.expectedType.kind!=="value"&&(be=V.expectedType);for(var Me=1;Me<C.length;Me+=2){var Fe=Me===1?-1/0:C[Me],tt=C[Me+1],ct=Me,mt=Me+1;if(typeof Fe!="number")return V.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ct);if(pe.length&&pe[pe.length-1][0]>=Fe)return V.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ct);var Dt=V.parse(tt,mt,be);if(!Dt)return null;be=be||Dt.type,pe.push([Fe,Dt])}return new Zs(be,re,pe)},Zs.prototype.evaluate=function(C){var V=this.labels,re=this.outputs;if(V.length===1)return re[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=V[0])return re[0].evaluate(C);var be=V.length;if(pe>=V[be-1])return re[be-1].evaluate(C);var Me=Xs(V,pe);return re[Me].evaluate(C)},Zs.prototype.eachChild=function(C){C(this.input);for(var V=0,re=this.outputs;V<re.length;V+=1){var pe=re[V];C(pe)}},Zs.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},Zs.prototype.serialize=function(){for(var C=["step",this.input.serialize()],V=0;V<this.labels.length;V++)V>0&&C.push(this.labels[V]),C.push(this.outputs[V].serialize());return C};function go(E,C,V){return E*(1-V)+C*V}function uu(E,C,V){return new di(go(E.r,C.r,V),go(E.g,C.g,V),go(E.b,C.b,V),go(E.a,C.a,V))}function fu(E,C,V){return E.map(function(re,pe){return go(re,C[pe],V)})}var kl=Object.freeze({__proto__:null,number:go,color:uu,array:fu}),Ns=.95047,cu=1,Zl=1.08883,Iu=4/29,hu=6/29,El=3*hu*hu,Yf=hu*hu*hu,Ts=Math.PI/180,dc=180/Math.PI;function qu(E){return E>Yf?Math.pow(E,1/3):E/El+Iu}function Kl(E){return E>hu?E*E*E:El*(E-Iu)}function vu(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function Cl(E){return E/=255,E<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function pu(E){var C=Cl(E.r),V=Cl(E.g),re=Cl(E.b),pe=qu((.4124564*C+.3575761*V+.1804375*re)/Ns),be=qu((.2126729*C+.7151522*V+.072175*re)/cu),Me=qu((.0193339*C+.119192*V+.9503041*re)/Zl);return{l:116*be-16,a:500*(pe-be),b:200*(be-Me),alpha:E.a}}function _f(E){var C=(E.l+16)/116,V=isNaN(E.a)?C:C+E.a/500,re=isNaN(E.b)?C:C-E.b/200;return C=cu*Kl(C),V=Ns*Kl(V),re=Zl*Kl(re),new di(vu(3.2404542*V-1.5371385*C-.4985314*re),vu(-.969266*V+1.8760108*C+.041556*re),vu(.0556434*V-.2040259*C+1.0572252*re),E.alpha)}function wf(E,C,V){return{l:go(E.l,C.l,V),a:go(E.a,C.a,V),b:go(E.b,C.b,V),alpha:go(E.alpha,C.alpha,V)}}function gc(E){var C=pu(E),V=C.l,re=C.a,pe=C.b,be=Math.atan2(pe,re)*dc;return{h:be<0?be+360:be,c:Math.sqrt(re*re+pe*pe),l:V,alpha:E.a}}function Oi(E){var C=E.h*Ts,V=E.c,re=E.l;return _f({l:re,a:Math.cos(C)*V,b:Math.sin(C)*V,alpha:E.alpha})}function Jl(E,C,V){var re=C-E;return E+V*(re>180||re<-180?re-360*Math.round(re/360):re)}function Ll(E,C,V){return{h:Jl(E.h,C.h,V),c:go(E.c,C.c,V),l:go(E.l,C.l,V),alpha:go(E.alpha,C.alpha,V)}}var ms={forward:pu,reverse:_f,interpolate:wf},As={forward:gc,reverse:Oi,interpolate:Ll},du=Object.freeze({__proto__:null,lab:ms,hcl:As}),mo=function(C,V,re,pe,be){this.type=C,this.operator=V,this.interpolation=re,this.input=pe,this.labels=[],this.outputs=[];for(var Me=0,Fe=be;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt[0],mt=tt[1];this.labels.push(ct),this.outputs.push(mt)}};mo.interpolationFactor=function(C,V,re,pe){var be=0;if(C.name==="exponential")be=Tf(V,C.base,re,pe);else if(C.name==="linear")be=Tf(V,1,re,pe);else if(C.name==="cubic-bezier"){var Me=C.controlPoints,Fe=new r(Me[0],Me[1],Me[2],Me[3]);be=Fe.solve(Tf(V,1,re,pe))}return be},mo.parse=function(C,V){var re=C[0],pe=C[1],be=C[2],Me=C.slice(3);if(!Array.isArray(pe)||pe.length===0)return V.error("Expected an interpolation type expression.",1);if(pe[0]==="linear")pe={name:"linear"};else if(pe[0]==="exponential"){var Fe=pe[1];if(typeof Fe!="number")return V.error("Exponential interpolation requires a numeric base.",1,1);pe={name:"exponential",base:Fe}}else if(pe[0]==="cubic-bezier"){var tt=pe.slice(1);if(tt.length!==4||tt.some(function(qr){return typeof qr!="number"||qr<0||qr>1}))return V.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);pe={name:"cubic-bezier",controlPoints:tt}}else return V.error("Unknown interpolation type "+String(pe[0]),1,0);if(C.length-1<4)return V.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if((C.length-1)%2!=0)return V.error("Expected an even number of arguments.");if(be=V.parse(be,2,yn),!be)return null;var ct=[],mt=null;re==="interpolate-hcl"||re==="interpolate-lab"?mt=ua:V.expectedType&&V.expectedType.kind!=="value"&&(mt=V.expectedType);for(var Dt=0;Dt<Me.length;Dt+=2){var Zt=Me[Dt],Ht=Me[Dt+1],lr=Dt+3,Ir=Dt+4;if(typeof Zt!="number")return V.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',lr);if(ct.length&&ct[ct.length-1][0]>=Zt)return V.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',lr);var ln=V.parse(Ht,Ir,mt);if(!ln)return null;mt=mt||ln.type,ct.push([Zt,ln])}return mt.kind!=="number"&&mt.kind!=="color"&&!(mt.kind==="array"&&mt.itemType.kind==="number"&&typeof mt.N=="number")?V.error("Type "+zi(mt)+" is not interpolatable."):new mo(mt,re,pe,be,ct)},mo.prototype.evaluate=function(C){var V=this.labels,re=this.outputs;if(V.length===1)return re[0].evaluate(C);var pe=this.input.evaluate(C);if(pe<=V[0])return re[0].evaluate(C);var be=V.length;if(pe>=V[be-1])return re[be-1].evaluate(C);var Me=Xs(V,pe),Fe=V[Me],tt=V[Me+1],ct=mo.interpolationFactor(this.interpolation,pe,Fe,tt),mt=re[Me].evaluate(C),Dt=re[Me+1].evaluate(C);return this.operator==="interpolate"?kl[this.type.kind.toLowerCase()](mt,Dt,ct):this.operator==="interpolate-hcl"?As.reverse(As.interpolate(As.forward(mt),As.forward(Dt),ct)):ms.reverse(ms.interpolate(ms.forward(mt),ms.forward(Dt),ct))},mo.prototype.eachChild=function(C){C(this.input);for(var V=0,re=this.outputs;V<re.length;V+=1){var pe=re[V];C(pe)}},mo.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})},mo.prototype.serialize=function(){var C;this.interpolation.name==="linear"?C=["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?C=["linear"]:C=["exponential",this.interpolation.base]:C=["cubic-bezier"].concat(this.interpolation.controlPoints);for(var V=[this.operator,C,this.input.serialize()],re=0;re<this.labels.length;re++)V.push(this.labels[re],this.outputs[re].serialize());return V};function Tf(E,C,V,re){var pe=re-V,be=E-V;return pe===0?0:C===1?be/pe:(Math.pow(C,be)-1)/(Math.pow(C,pe)-1)}var Ms=function(C,V){this.type=C,this.args=V};Ms.parse=function(C,V){if(C.length<2)return V.error("Expectected at least one argument.");var re=null,pe=V.expectedType;pe&&pe.kind!=="value"&&(re=pe);for(var be=[],Me=0,Fe=C.slice(1);Me<Fe.length;Me+=1){var tt=Fe[Me],ct=V.parse(tt,1+be.length,re,void 0,{typeAnnotation:"omit"});if(!ct)return null;re=re||ct.type,be.push(ct)}var mt=pe&&be.some(function(Dt){return ol(pe,Dt.type)});return mt?new Ms(Ca,be):new Ms(re,be)},Ms.prototype.evaluate=function(C){for(var V=null,re=0,pe,be=0,Me=this.args;be<Me.length;be+=1){var Fe=Me[be];if(re++,V=Fe.evaluate(C),V&&V instanceof Oo&&!V.available&&(pe||(pe=V.name),V=null,re===this.args.length&&(V=pe)),V!==null)break}return V},Ms.prototype.eachChild=function(C){this.args.forEach(C)},Ms.prototype.outputDefined=function(){return this.args.every(function(C){return C.outputDefined()})},Ms.prototype.serialize=function(){var C=["coalesce"];return this.eachChild(function(V){C.push(V.serialize())}),C};var fl=function(C,V){this.type=V.type,this.bindings=[].concat(C),this.result=V};fl.prototype.evaluate=function(C){return this.result.evaluate(C)},fl.prototype.eachChild=function(C){for(var V=0,re=this.bindings;V<re.length;V+=1){var pe=re[V];C(pe[1])}C(this.result)},fl.parse=function(C,V){if(C.length<4)return V.error("Expected at least 3 arguments, but found "+(C.length-1)+" instead.");for(var re=[],pe=1;pe<C.length-1;pe+=2){var be=C[pe];if(typeof be!="string")return V.error("Expected string, but found "+typeof be+" instead.",pe);if(/[^a-zA-Z0-9_]/.test(be))return V.error("Variable names must contain only alphanumeric characters or '_'.",pe);var Me=V.parse(C[pe+1],pe+1);if(!Me)return null;re.push([be,Me])}var Fe=V.parse(C[C.length-1],C.length-1,V.expectedType,re);return Fe?new fl(re,Fe):null},fl.prototype.outputDefined=function(){return this.result.outputDefined()},fl.prototype.serialize=function(){for(var C=["let"],V=0,re=this.bindings;V<re.length;V+=1){var pe=re[V],be=pe[0],Me=pe[1];C.push(be,Me.serialize())}return C.push(this.result.serialize()),C};var cl=function(C,V,re){this.type=C,this.index=V,this.input=re};cl.parse=function(C,V){if(C.length!==3)return V.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var re=V.parse(C[1],1,yn),pe=V.parse(C[2],2,io(V.expectedType||Ca));if(!re||!pe)return null;var be=pe.type;return new cl(be.itemType,re,pe)},cl.prototype.evaluate=function(C){var V=this.index.evaluate(C),re=this.input.evaluate(C);if(V<0)throw new Ui("Array index out of bounds: "+V+" < 0.");if(V>=re.length)throw new Ui("Array index out of bounds: "+V+" > "+(re.length-1)+".");if(V!==Math.floor(V))throw new Ui("Array index must be an integer, but found "+V+" instead.");return re[V]},cl.prototype.eachChild=function(C){C(this.index),C(this.input)},cl.prototype.outputDefined=function(){return!1},cl.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Ks=function(C,V){this.type=Yn,this.needle=C,this.haystack=V};Ks.parse=function(C,V){if(C.length!==3)return V.error("Expected 2 arguments, but found "+(C.length-1)+" instead.");var re=V.parse(C[1],1,Ca),pe=V.parse(C[2],2,Ca);return!re||!pe?null:ps(re.type,[Yn,Dn,yn,Un,Ca])?new Ks(re,pe):V.error("Expected first argument to be of type boolean, string, number or null, but found "+zi(re.type)+" instead")},Ks.prototype.evaluate=function(C){var V=this.needle.evaluate(C),re=this.haystack.evaluate(C);if(!re)return!1;if(!Gl(V,["boolean","string","number","null"]))throw new Ui("Expected first argument to be of type boolean, string, number or null, but found "+zi(Fi(V))+" instead.");if(!Gl(re,["string","array"]))throw new Ui("Expected second argument to be of type array or string, but found "+zi(Fi(re))+" instead.");return re.indexOf(V)>=0},Ks.prototype.eachChild=function(C){C(this.needle),C(this.haystack)},Ks.prototype.outputDefined=function(){return!0},Ks.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var Ss=function(C,V,re){this.type=yn,this.needle=C,this.haystack=V,this.fromIndex=re};Ss.parse=function(C,V){if(C.length<=2||C.length>=5)return V.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var re=V.parse(C[1],1,Ca),pe=V.parse(C[2],2,Ca);if(!re||!pe)return null;if(!ps(re.type,[Yn,Dn,yn,Un,Ca]))return V.error("Expected first argument to be of type boolean, string, number or null, but found "+zi(re.type)+" instead");if(C.length===4){var be=V.parse(C[3],3,yn);return be?new Ss(re,pe,be):null}else return new Ss(re,pe)},Ss.prototype.evaluate=function(C){var V=this.needle.evaluate(C),re=this.haystack.evaluate(C);if(!Gl(V,["boolean","string","number","null"]))throw new Ui("Expected first argument to be of type boolean, string, number or null, but found "+zi(Fi(V))+" instead.");if(!Gl(re,["string","array"]))throw new Ui("Expected second argument to be of type array or string, but found "+zi(Fi(re))+" instead.");if(this.fromIndex){var pe=this.fromIndex.evaluate(C);return re.indexOf(V,pe)}return re.indexOf(V)},Ss.prototype.eachChild=function(C){C(this.needle),C(this.haystack),this.fromIndex&&C(this.fromIndex)},Ss.prototype.outputDefined=function(){return!1},Ss.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var C=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),C]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ji=function(C,V,re,pe,be,Me){this.inputType=C,this.type=V,this.input=re,this.cases=pe,this.outputs=be,this.otherwise=Me};ji.parse=function(C,V){if(C.length<5)return V.error("Expected at least 4 arguments, but found only "+(C.length-1)+".");if(C.length%2!=1)return V.error("Expected an even number of arguments.");var re,pe;V.expectedType&&V.expectedType.kind!=="value"&&(pe=V.expectedType);for(var be={},Me=[],Fe=2;Fe<C.length-1;Fe+=2){var tt=C[Fe],ct=C[Fe+1];Array.isArray(tt)||(tt=[tt]);var mt=V.concat(Fe);if(tt.length===0)return mt.error("Expected at least one branch label.");for(var Dt=0,Zt=tt;Dt<Zt.length;Dt+=1){var Ht=Zt[Dt];if(typeof Ht!="number"&&typeof Ht!="string")return mt.error("Branch labels must be numbers or strings.");if(typeof Ht=="number"&&Math.abs(Ht)>Number.MAX_SAFE_INTEGER)return mt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof Ht=="number"&&Math.floor(Ht)!==Ht)return mt.error("Numeric branch labels must be integer values.");if(!re)re=Fi(Ht);else if(mt.checkSubtype(re,Fi(Ht)))return null;if(typeof be[String(Ht)]!="undefined")return mt.error("Branch labels must be unique.");be[String(Ht)]=Me.length}var lr=V.parse(ct,Fe,pe);if(!lr)return null;pe=pe||lr.type,Me.push(lr)}var Ir=V.parse(C[1],1,Ca);if(!Ir)return null;var ln=V.parse(C[C.length-1],C.length-1,pe);return!ln||Ir.type.kind!=="value"&&V.concat(1).checkSubtype(re,Ir.type)?null:new ji(re,pe,Ir,be,Me,ln)},ji.prototype.evaluate=function(C){var V=this.input.evaluate(C),re=Fi(V)===this.inputType&&this.outputs[this.cases[V]]||this.otherwise;return re.evaluate(C)},ji.prototype.eachChild=function(C){C(this.input),this.outputs.forEach(C),C(this.otherwise)},ji.prototype.outputDefined=function(){return this.outputs.every(function(C){return C.outputDefined()})&&this.otherwise.outputDefined()},ji.prototype.serialize=function(){for(var C=this,V=["match",this.input.serialize()],re=Object.keys(this.cases).sort(),pe=[],be={},Me=0,Fe=re;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=be[this.cases[tt]];ct===void 0?(be[this.cases[tt]]=pe.length,pe.push([this.cases[tt],[tt]])):pe[ct][1].push(tt)}for(var mt=function(Ir){return C.inputType.kind==="number"?Number(Ir):Ir},Dt=0,Zt=pe;Dt<Zt.length;Dt+=1){var Ht=Zt[Dt],ct=Ht[0],lr=Ht[1];lr.length===1?V.push(mt(lr[0])):V.push(lr.map(mt)),V.push(this.outputs[outputIndex$1].serialize())}return V.push(this.otherwise.serialize()),V};var Uo=function(C,V,re){this.type=C,this.branches=V,this.otherwise=re};Uo.parse=function(C,V){if(C.length<4)return V.error("Expected at least 3 arguments, but found only "+(C.length-1)+".");if(C.length%2!=0)return V.error("Expected an odd number of arguments.");var re;V.expectedType&&V.expectedType.kind!=="value"&&(re=V.expectedType);for(var pe=[],be=1;be<C.length-1;be+=2){var Me=V.parse(C[be],be,Yn);if(!Me)return null;var Fe=V.parse(C[be+1],be+1,re);if(!Fe)return null;pe.push([Me,Fe]),re=re||Fe.type}var tt=V.parse(C[C.length-1],C.length-1,re);return tt?new Uo(re,pe,tt):null},Uo.prototype.evaluate=function(C){for(var V=0,re=this.branches;V<re.length;V+=1){var pe=re[V],be=pe[0],Me=pe[1];if(be.evaluate(C))return Me.evaluate(C)}return this.otherwise.evaluate(C)},Uo.prototype.eachChild=function(C){for(var V=0,re=this.branches;V<re.length;V+=1){var pe=re[V],be=pe[0],Me=pe[1];C(be),C(Me)}C(this.otherwise)},Uo.prototype.outputDefined=function(){return this.branches.every(function(C){C[0];var V=C[1];return V.outputDefined()})&&this.otherwise.outputDefined()},Uo.prototype.serialize=function(){var C=["case"];return this.eachChild(function(V){C.push(V.serialize())}),C};var ks=function(C,V,re,pe){this.type=C,this.input=V,this.beginIndex=re,this.endIndex=pe};ks.parse=function(C,V){if(C.length<=2||C.length>=5)return V.error("Expected 3 or 4 arguments, but found "+(C.length-1)+" instead.");var re=V.parse(C[1],1,Ca),pe=V.parse(C[2],2,yn);if(!re||!pe)return null;if(!ps(re.type,[io(Ca),Dn,Ca]))return V.error("Expected first argument to be of type array or string, but found "+zi(re.type)+" instead");if(C.length===4){var be=V.parse(C[3],3,yn);return be?new ks(re.type,re,pe,be):null}else return new ks(re.type,re,pe)},ks.prototype.evaluate=function(C){var V=this.input.evaluate(C),re=this.beginIndex.evaluate(C);if(!Gl(V,["string","array"]))throw new Ui("Expected first argument to be of type array or string, but found "+zi(Fi(V))+" instead.");if(this.endIndex){var pe=this.endIndex.evaluate(C);return V.slice(re,pe)}return V.slice(re)},ks.prototype.eachChild=function(C){C(this.input),C(this.beginIndex),this.endIndex&&C(this.endIndex)},ks.prototype.outputDefined=function(){return!1},ks.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var C=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),C]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};function Af(E,C){return E==="=="||E==="!="?C.kind==="boolean"||C.kind==="string"||C.kind==="number"||C.kind==="null"||C.kind==="value":C.kind==="string"||C.kind==="number"||C.kind==="value"}function zu(E,C,V){return C===V}function Mf(E,C,V){return C!==V}function xt(E,C,V){return C<V}function It(E,C,V){return C>V}function nr(E,C,V){return C<=V}function Jt(E,C,V){return C>=V}function Cr(E,C,V,re){return re.compare(C,V)===0}function an(E,C,V,re){return!Cr(E,C,V,re)}function dn(E,C,V,re){return re.compare(C,V)<0}function Tn(E,C,V,re){return re.compare(C,V)>0}function Cn(E,C,V,re){return re.compare(C,V)<=0}function Gn(E,C,V,re){return re.compare(C,V)>=0}function xn(E,C,V){var re=E!=="=="&&E!=="!=";return function(){function pe(be,Me,Fe){this.type=Yn,this.lhs=be,this.rhs=Me,this.collator=Fe,this.hasUntypedArgument=be.type.kind==="value"||Me.type.kind==="value"}return pe.parse=function(Me,Fe){if(Me.length!==3&&Me.length!==4)return Fe.error("Expected two or three arguments.");var tt=Me[0],ct=Fe.parse(Me[1],1,Ca);if(!ct)return null;if(!Af(tt,ct.type))return Fe.concat(1).error('"'+tt+`" comparisons are not supported for type '`+zi(ct.type)+"'.");var mt=Fe.parse(Me[2],2,Ca);if(!mt)return null;if(!Af(tt,mt.type))return Fe.concat(2).error('"'+tt+`" comparisons are not supported for type '`+zi(mt.type)+"'.");if(ct.type.kind!==mt.type.kind&&ct.type.kind!=="value"&&mt.type.kind!=="value")return Fe.error("Cannot compare types '"+zi(ct.type)+"' and '"+zi(mt.type)+"'.");re&&(ct.type.kind==="value"&&mt.type.kind!=="value"?ct=new ro(mt.type,[ct]):ct.type.kind!=="value"&&mt.type.kind==="value"&&(mt=new ro(ct.type,[mt])));var Dt=null;if(Me.length===4){if(ct.type.kind!=="string"&&mt.type.kind!=="string"&&ct.type.kind!=="value"&&mt.type.kind!=="value")return Fe.error("Cannot use collator to compare non-string types.");if(Dt=Fe.parse(Me[3],3,Qo),!Dt)return null}return new pe(ct,mt,Dt)},pe.prototype.evaluate=function(Me){var Fe=this.lhs.evaluate(Me),tt=this.rhs.evaluate(Me);if(re&&this.hasUntypedArgument){var ct=Fi(Fe),mt=Fi(tt);if(ct.kind!==mt.kind||!(ct.kind==="string"||ct.kind==="number"))throw new Ui('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+ct.kind+", "+mt.kind+") instead.")}if(this.collator&&!re&&this.hasUntypedArgument){var Dt=Fi(Fe),Zt=Fi(tt);if(Dt.kind!=="string"||Zt.kind!=="string")return C(Me,Fe,tt)}return this.collator?V(Me,Fe,tt,this.collator.evaluate(Me)):C(Me,Fe,tt)},pe.prototype.eachChild=function(Me){Me(this.lhs),Me(this.rhs),this.collator&&Me(this.collator)},pe.prototype.outputDefined=function(){return!0},pe.prototype.serialize=function(){var Me=[E];return this.eachChild(function(Fe){Me.push(Fe.serialize())}),Me},pe}()}var In=xn("==",zu,Cr),Ln=xn("!=",Mf,an),jn=xn("<",xt,dn),ea=xn(">",It,Tn),Ba=xn("<=",nr,Cn),Ra=xn(">=",Jt,Gn),Ua=function(C,V,re,pe,be){this.type=Dn,this.number=C,this.locale=V,this.currency=re,this.minFractionDigits=pe,this.maxFractionDigits=be};Ua.parse=function(C,V){if(C.length!==3)return V.error("Expected two arguments.");var re=V.parse(C[1],1,yn);if(!re)return null;var pe=C[2];if(typeof pe!="object"||Array.isArray(pe))return V.error("NumberFormat options argument must be an object.");var be=null;if(pe.locale&&(be=V.parse(pe.locale,1,Dn),!be))return null;var Me=null;if(pe.currency&&(Me=V.parse(pe.currency,1,Dn),!Me))return null;var Fe=null;if(pe["min-fraction-digits"]&&(Fe=V.parse(pe["min-fraction-digits"],1,yn),!Fe))return null;var tt=null;return pe["max-fraction-digits"]&&(tt=V.parse(pe["max-fraction-digits"],1,yn),!tt)?null:new Ua(re,be,Me,Fe,tt)},Ua.prototype.evaluate=function(C){return new Intl.NumberFormat(this.locale?this.locale.evaluate(C):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(C):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(C):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(C):void 0}).format(this.number.evaluate(C))},Ua.prototype.eachChild=function(C){C(this.number),this.locale&&C(this.locale),this.currency&&C(this.currency),this.minFractionDigits&&C(this.minFractionDigits),this.maxFractionDigits&&C(this.maxFractionDigits)},Ua.prototype.outputDefined=function(){return!1},Ua.prototype.serialize=function(){var C={};return this.locale&&(C.locale=this.locale.serialize()),this.currency&&(C.currency=this.currency.serialize()),this.minFractionDigits&&(C["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(C["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),C]};var Va=function(C){this.type=yn,this.input=C};Va.parse=function(C,V){if(C.length!==2)return V.error("Expected 1 argument, but found "+(C.length-1)+" instead.");var re=V.parse(C[1],1);return re?re.type.kind!=="array"&&re.type.kind!=="string"&&re.type.kind!=="value"?V.error("Expected argument of type string or array, but found "+zi(re.type)+" instead."):new Va(re):null},Va.prototype.evaluate=function(C){var V=this.input.evaluate(C);if(typeof V=="string")return V.length;if(Array.isArray(V))return V.length;throw new Ui("Expected value to be of type string or array, but found "+zi(Fi(V))+" instead.")},Va.prototype.eachChild=function(C){C(this.input)},Va.prototype.outputDefined=function(){return!1},Va.prototype.serialize=function(){var C=["length"];return this.eachChild(function(V){C.push(V.serialize())}),C};var $n={"==":In,"!=":Ln,">":ea,"<":jn,">=":Ra,"<=":Ba,array:ro,at:cl,boolean:ro,case:Uo,coalesce:Ms,collator:ul,format:ws,image:Al,in:Ks,"index-of":Ss,interpolate:mo,"interpolate-hcl":mo,"interpolate-lab":mo,length:Va,let:fl,literal:to,match:ji,number:ro,"number-format":Ua,object:ro,slice:ks,step:Zs,string:ro,"to-boolean":ds,"to-color":ds,"to-number":ds,"to-string":ds,var:Os,within:gs};function da(E,C){var V=C[0],re=C[1],pe=C[2],be=C[3];V=V.evaluate(E),re=re.evaluate(E),pe=pe.evaluate(E);var Me=be?be.evaluate(E):1,Fe=su(V,re,pe,Me);if(Fe)throw new Ui(Fe);return new di(V/255*Me,re/255*Me,pe/255*Me,Me)}function ja(E,C){return E in C}function qa(E,C){var V=C[E];return typeof V=="undefined"?null:V}function yi(E,C,V,re){for(;V<=re;){var pe=V+re>>1;if(C[pe]===E)return!0;C[pe]>E?re=pe-1:V=pe+1}return!1}function xi(E){return{type:E}}No.register($n,{error:[wl,[Dn],function(E,C){var V=C[0];throw new Ui(V.evaluate(E))}],typeof:[Dn,[Ca],function(E,C){var V=C[0];return zi(Fi(V.evaluate(E)))}],"to-rgba":[io(yn,4),[ua],function(E,C){var V=C[0];return V.evaluate(E).toArray()}],rgb:[ua,[yn,yn,yn],da],rgba:[ua,[yn,yn,yn,yn],da],has:{type:Yn,overloads:[[[Dn],function(E,C){var V=C[0];return ja(V.evaluate(E),E.properties())}],[[Dn,Ya],function(E,C){var V=C[0],re=C[1];return ja(V.evaluate(E),re.evaluate(E))}]]},get:{type:Ca,overloads:[[[Dn],function(E,C){var V=C[0];return qa(V.evaluate(E),E.properties())}],[[Dn,Ya],function(E,C){var V=C[0],re=C[1];return qa(V.evaluate(E),re.evaluate(E))}]]},"feature-state":[Ca,[Dn],function(E,C){var V=C[0];return qa(V.evaluate(E),E.featureState||{})}],properties:[Ya,[],function(E){return E.properties()}],"geometry-type":[Dn,[],function(E){return E.geometryType()}],id:[Ca,[],function(E){return E.id()}],zoom:[yn,[],function(E){return E.globals.zoom}],"heatmap-density":[yn,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[yn,[],function(E){return E.globals.lineProgress||0}],accumulated:[Ca,[],function(E){return E.globals.accumulated===void 0?null:E.globals.accumulated}],"+":[yn,xi(yn),function(E,C){for(var V=0,re=0,pe=C;re<pe.length;re+=1){var be=pe[re];V+=be.evaluate(E)}return V}],"*":[yn,xi(yn),function(E,C){for(var V=1,re=0,pe=C;re<pe.length;re+=1){var be=pe[re];V*=be.evaluate(E)}return V}],"-":{type:yn,overloads:[[[yn,yn],function(E,C){var V=C[0],re=C[1];return V.evaluate(E)-re.evaluate(E)}],[[yn],function(E,C){var V=C[0];return-V.evaluate(E)}]]},"/":[yn,[yn,yn],function(E,C){var V=C[0],re=C[1];return V.evaluate(E)/re.evaluate(E)}],"%":[yn,[yn,yn],function(E,C){var V=C[0],re=C[1];return V.evaluate(E)%re.evaluate(E)}],ln2:[yn,[],function(){return Math.LN2}],pi:[yn,[],function(){return Math.PI}],e:[yn,[],function(){return Math.E}],"^":[yn,[yn,yn],function(E,C){var V=C[0],re=C[1];return Math.pow(V.evaluate(E),re.evaluate(E))}],sqrt:[yn,[yn],function(E,C){var V=C[0];return Math.sqrt(V.evaluate(E))}],log10:[yn,[yn],function(E,C){var V=C[0];return Math.log(V.evaluate(E))/Math.LN10}],ln:[yn,[yn],function(E,C){var V=C[0];return Math.log(V.evaluate(E))}],log2:[yn,[yn],function(E,C){var V=C[0];return Math.log(V.evaluate(E))/Math.LN2}],sin:[yn,[yn],function(E,C){var V=C[0];return Math.sin(V.evaluate(E))}],cos:[yn,[yn],function(E,C){var V=C[0];return Math.cos(V.evaluate(E))}],tan:[yn,[yn],function(E,C){var V=C[0];return Math.tan(V.evaluate(E))}],asin:[yn,[yn],function(E,C){var V=C[0];return Math.asin(V.evaluate(E))}],acos:[yn,[yn],function(E,C){var V=C[0];return Math.acos(V.evaluate(E))}],atan:[yn,[yn],function(E,C){var V=C[0];return Math.atan(V.evaluate(E))}],min:[yn,xi(yn),function(E,C){return Math.min.apply(Math,C.map(function(V){return V.evaluate(E)}))}],max:[yn,xi(yn),function(E,C){return Math.max.apply(Math,C.map(function(V){return V.evaluate(E)}))}],abs:[yn,[yn],function(E,C){var V=C[0];return Math.abs(V.evaluate(E))}],round:[yn,[yn],function(E,C){var V=C[0],re=V.evaluate(E);return re<0?-Math.round(-re):Math.round(re)}],floor:[yn,[yn],function(E,C){var V=C[0];return Math.floor(V.evaluate(E))}],ceil:[yn,[yn],function(E,C){var V=C[0];return Math.ceil(V.evaluate(E))}],"filter-==":[Yn,[Dn,Ca],function(E,C){var V=C[0],re=C[1];return E.properties()[V.value]===re.value}],"filter-id-==":[Yn,[Ca],function(E,C){var V=C[0];return E.id()===V.value}],"filter-type-==":[Yn,[Dn],function(E,C){var V=C[0];return E.geometryType()===V.value}],"filter-<":[Yn,[Dn,Ca],function(E,C){var V=C[0],re=C[1],pe=E.properties()[V.value],be=re.value;return typeof pe==typeof be&&pe<be}],"filter-id-<":[Yn,[Ca],function(E,C){var V=C[0],re=E.id(),pe=V.value;return typeof re==typeof pe&&re<pe}],"filter->":[Yn,[Dn,Ca],function(E,C){var V=C[0],re=C[1],pe=E.properties()[V.value],be=re.value;return typeof pe==typeof be&&pe>be}],"filter-id->":[Yn,[Ca],function(E,C){var V=C[0],re=E.id(),pe=V.value;return typeof re==typeof pe&&re>pe}],"filter-<=":[Yn,[Dn,Ca],function(E,C){var V=C[0],re=C[1],pe=E.properties()[V.value],be=re.value;return typeof pe==typeof be&&pe<=be}],"filter-id-<=":[Yn,[Ca],function(E,C){var V=C[0],re=E.id(),pe=V.value;return typeof re==typeof pe&&re<=pe}],"filter->=":[Yn,[Dn,Ca],function(E,C){var V=C[0],re=C[1],pe=E.properties()[V.value],be=re.value;return typeof pe==typeof be&&pe>=be}],"filter-id->=":[Yn,[Ca],function(E,C){var V=C[0],re=E.id(),pe=V.value;return typeof re==typeof pe&&re>=pe}],"filter-has":[Yn,[Ca],function(E,C){var V=C[0];return V.value in E.properties()}],"filter-has-id":[Yn,[],function(E){return E.id()!==null&&E.id()!==void 0}],"filter-type-in":[Yn,[io(Dn)],function(E,C){var V=C[0];return V.value.indexOf(E.geometryType())>=0}],"filter-id-in":[Yn,[io(Ca)],function(E,C){var V=C[0];return V.value.indexOf(E.id())>=0}],"filter-in-small":[Yn,[Dn,io(Ca)],function(E,C){var V=C[0],re=C[1];return re.value.indexOf(E.properties()[V.value])>=0}],"filter-in-large":[Yn,[Dn,io(Ca)],function(E,C){var V=C[0],re=C[1];return yi(E.properties()[V.value],re.value,0,re.value.length-1)}],all:{type:Yn,overloads:[[[Yn,Yn],function(E,C){var V=C[0],re=C[1];return V.evaluate(E)&&re.evaluate(E)}],[xi(Yn),function(E,C){for(var V=0,re=C;V<re.length;V+=1){var pe=re[V];if(!pe.evaluate(E))return!1}return!0}]]},any:{type:Yn,overloads:[[[Yn,Yn],function(E,C){var V=C[0],re=C[1];return V.evaluate(E)||re.evaluate(E)}],[xi(Yn),function(E,C){for(var V=0,re=C;V<re.length;V+=1){var pe=re[V];if(pe.evaluate(E))return!0}return!1}]]},"!":[Yn,[Yn],function(E,C){var V=C[0];return!V.evaluate(E)}],"is-supported-script":[Yn,[Dn],function(E,C){var V=C[0],re=E.globals&&E.globals.isSupportedScript;return re?re(V.evaluate(E)):!0}],upcase:[Dn,[Dn],function(E,C){var V=C[0];return V.evaluate(E).toUpperCase()}],downcase:[Dn,[Dn],function(E,C){var V=C[0];return V.evaluate(E).toLowerCase()}],concat:[Dn,xi(Ca),function(E,C){return C.map(function(V){return Wl(V.evaluate(E))}).join("")}],"resolved-locale":[Dn,[Qo],function(E,C){var V=C[0];return V.evaluate(E).resolvedLocale()}]});function _i(E){return{result:"success",value:E}}function ki(E){return{result:"error",value:E}}function ui(E){return E["property-type"]==="data-driven"||E["property-type"]==="cross-faded-data-driven"}function Eo(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function oo(E){return!!E.expression&&E.expression.interpolated}function Qa(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":E===null?"null":typeof E}function ma(E){return typeof E=="object"&&E!==null&&!Array.isArray(E)}function wi(E){return E}function yo(E,C){var V=C.type==="color",re=E.stops&&typeof E.stops[0][0]=="object",pe=re||E.property!==void 0,be=re||!pe,Me=E.type||(oo(C)?"exponential":"interval");if(V&&(E=Jr({},E),E.stops&&(E.stops=E.stops.map(function(ia){return[ia[0],di.parse(ia[1])]})),E.default?E.default=di.parse(E.default):E.default=di.parse(C.default)),E.colorSpace&&E.colorSpace!=="rgb"&&!du[E.colorSpace])throw new Error("Unknown color space: "+E.colorSpace);var Fe,tt,ct;if(Me==="exponential")Fe=$o;else if(Me==="interval")Fe=Js;else if(Me==="categorical"){Fe=Es,tt=Object.create(null);for(var mt=0,Dt=E.stops;mt<Dt.length;mt+=1){var Zt=Dt[mt];tt[Zt[0]]=Zt[1]}ct=typeof E.stops[0][0]}else if(Me==="identity")Fe=Pl;else throw new Error('Unknown function type "'+Me+'"');if(re){for(var Ht={},lr=[],Ir=0;Ir<E.stops.length;Ir++){var ln=E.stops[Ir],qr=ln[0].zoom;Ht[qr]===void 0&&(Ht[qr]={zoom:qr,type:E.type,property:E.property,default:E.default,stops:[]},lr.push(qr)),Ht[qr].stops.push([ln[0].value,ln[1]])}for(var Mn=[],bn=0,An=lr;bn<An.length;bn+=1){var Rn=An[bn];Mn.push([Ht[Rn].zoom,yo(Ht[Rn],C)])}var Xn={name:"linear"};return{kind:"composite",interpolationType:Xn,interpolationFactor:mo.interpolationFactor.bind(void 0,Xn),zoomStops:Mn.map(function(ia){return ia[0]}),evaluate:function(Oa,Ma){var Ea=Oa.zoom;return $o({stops:Mn,base:E.base},C,Ea).evaluate(Ea,Ma)}}}else if(be){var la=Me==="exponential"?{name:"exponential",base:E.base!==void 0?E.base:1}:null;return{kind:"camera",interpolationType:la,interpolationFactor:mo.interpolationFactor.bind(void 0,la),zoomStops:E.stops.map(function(ia){return ia[0]}),evaluate:function(ia){var Oa=ia.zoom;return Fe(E,C,Oa,tt,ct)}}}else return{kind:"source",evaluate:function(Oa,Ma){var Ea=Ma&&Ma.properties?Ma.properties[E.property]:void 0;return Ea===void 0?Ao(E.default,C.default):Fe(E,C,Ea,tt,ct)}}}function Ao(E,C,V){if(E!==void 0)return E;if(C!==void 0)return C;if(V!==void 0)return V}function Es(E,C,V,re,pe){var be=typeof V===pe?re[V]:void 0;return Ao(be,E.default,C.default)}function Js(E,C,V){if(Qa(V)!=="number")return Ao(E.default,C.default);var re=E.stops.length;if(re===1||V<=E.stops[0][0])return E.stops[0][1];if(V>=E.stops[re-1][0])return E.stops[re-1][1];var pe=Xs(E.stops.map(function(be){return be[0]}),V);return E.stops[pe][1]}function $o(E,C,V){var re=E.base!==void 0?E.base:1;if(Qa(V)!=="number")return Ao(E.default,C.default);var pe=E.stops.length;if(pe===1||V<=E.stops[0][0])return E.stops[0][1];if(V>=E.stops[pe-1][0])return E.stops[pe-1][1];var be=Xs(E.stops.map(function(Dt){return Dt[0]}),V),Me=Bs(V,re,E.stops[be][0],E.stops[be+1][0]),Fe=E.stops[be][1],tt=E.stops[be+1][1],ct=kl[C.type]||wi;if(E.colorSpace&&E.colorSpace!=="rgb"){var mt=du[E.colorSpace];ct=function(Dt,Zt){return mt.reverse(mt.interpolate(mt.forward(Dt),mt.forward(Zt),Me))}}return typeof Fe.evaluate=="function"?{evaluate:function(){for(var Zt=[],Ht=arguments.length;Ht--;)Zt[Ht]=arguments[Ht];var lr=Fe.evaluate.apply(void 0,Zt),Ir=tt.evaluate.apply(void 0,Zt);if(!(lr===void 0||Ir===void 0))return ct(lr,Ir,Me)}}:ct(Fe,tt,Me)}function Pl(E,C,V){return C.type==="color"?V=di.parse(V):C.type==="formatted"?V=Yi.fromString(V.toString()):C.type==="resolvedImage"?V=Oo.fromString(V.toString()):Qa(V)!==C.type&&(C.type!=="enum"||!C.values[V])&&(V=void 0),Ao(V,E.default,C.default)}function Bs(E,C,V,re){var pe=re-V,be=E-V;return pe===0?0:C===1?be/pe:(Math.pow(C,be)-1)/(Math.pow(C,pe)-1)}var Cs=function(C,V){this.expression=C,this._warningHistory={},this._evaluator=new ll,this._defaultValue=V?Xf(V):null,this._enumValues=V&&V.type==="enum"?V.values:null};Cs.prototype.evaluateWithoutErrorHandling=function(C,V,re,pe,be,Me){return this._evaluator.globals=C,this._evaluator.feature=V,this._evaluator.featureState=re,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Me,this.expression.evaluate(this._evaluator)},Cs.prototype.evaluate=function(C,V,re,pe,be,Me){this._evaluator.globals=C,this._evaluator.feature=V||null,this._evaluator.featureState=re||null,this._evaluator.canonical=pe,this._evaluator.availableImages=be||null,this._evaluator.formattedSection=Me||null;try{var Fe=this.expression.evaluate(this._evaluator);if(Fe==null||typeof Fe=="number"&&Fe!==Fe)return this._defaultValue;if(this._enumValues&&!(Fe in this._enumValues))throw new Ui("Expected value to be one of "+Object.keys(this._enumValues).map(function(tt){return JSON.stringify(tt)}).join(", ")+", but found "+JSON.stringify(Fe)+" instead.");return Fe}catch(tt){return this._warningHistory[tt.message]||(this._warningHistory[tt.message]=!0,typeof console!="undefined"&&console.warn(tt.message)),this._defaultValue}};function Co(E){return Array.isArray(E)&&E.length>0&&typeof E[0]=="string"&&E[0]in $n}function Fu(E,C){var V=new Bo($n,[],C?kf(C):void 0),re=V.parse(E,void 0,void 0,void 0,C&&C.type==="string"?{typeAnnotation:"coerce"}:void 0);return re?_i(new Cs(re,C)):ki(V.errors)}var ef=function(C,V){this.kind=C,this._styleExpression=V,this.isStateDependent=C!=="constant"&&!Xl(V.expression)};ef.prototype.evaluateWithoutErrorHandling=function(C,V,re,pe,be,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,V,re,pe,be,Me)},ef.prototype.evaluate=function(C,V,re,pe,be,Me){return this._styleExpression.evaluate(C,V,re,pe,be,Me)};var Ls=function(C,V,re,pe){this.kind=C,this.zoomStops=re,this._styleExpression=V,this.isStateDependent=C!=="camera"&&!Xl(V.expression),this.interpolationType=pe};Ls.prototype.evaluateWithoutErrorHandling=function(C,V,re,pe,be,Me){return this._styleExpression.evaluateWithoutErrorHandling(C,V,re,pe,be,Me)},Ls.prototype.evaluate=function(C,V,re,pe,be,Me){return this._styleExpression.evaluate(C,V,re,pe,be,Me)},Ls.prototype.interpolationFactor=function(C,V,re){return this.interpolationType?mo.interpolationFactor(this.interpolationType,C,V,re):0};function Sf(E,C){if(E=Fu(E,C),E.result==="error")return E;var V=E.value.expression,re=jl(V);if(!re&&!ui(C))return ki([new Jn("","data expressions not supported")]);var pe=$u(V,["zoom"]);if(!pe&&!Eo(C))return ki([new Jn("","zoom expressions not supported")]);var be=jf(V);if(!be&&!pe)return ki([new Jn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(be instanceof Jn)return ki([be]);if(be instanceof mo&&!oo(C))return ki([new Jn("",'"interpolate" expressions cannot be used with this property')]);if(!be)return _i(re?new ef("constant",E.value):new ef("source",E.value));var Me=be instanceof mo?be.interpolation:void 0;return _i(re?new Ls("camera",E.value,be.labels,Me):new Ls("composite",E.value,be.labels,Me))}var Ou=function(C,V){this._parameters=C,this._specification=V,Jr(this,yo(this._parameters,this._specification))};Ou.deserialize=function(C){return new Ou(C._parameters,C._specification)},Ou.serialize=function(C){return{_parameters:C._parameters,_specification:C._specification}};function mh(E,C){if(ma(E))return new Ou(E,C);if(Co(E)){var V=Sf(E,C);if(V.result==="error")throw new Error(V.value.map(function(pe){return pe.key+": "+pe.message}).join(", "));return V.value}else{var re=E;return typeof E=="string"&&C.type==="color"&&(re=di.parse(E)),{kind:"constant",evaluate:function(){return re}}}}function jf(E){var C=null;if(E instanceof fl)C=jf(E.result);else if(E instanceof Ms)for(var V=0,re=E.args;V<re.length;V+=1){var pe=re[V];if(C=jf(pe),C)break}else(E instanceof Zs||E instanceof mo)&&E.input instanceof No&&E.input.name==="zoom"&&(C=E);return C instanceof Jn||E.eachChild(function(be){var Me=jf(be);Me instanceof Jn?C=Me:!C&&Me?C=new Jn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):C&&Me&&C!==Me&&(C=new Jn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),C}function kf(E){var C={color:ua,string:Dn,number:yn,enum:Dn,boolean:Yn,formatted:vs,resolvedImage:Ws};return E.type==="array"?io(C[E.value]||Ca,E.length):C[E.type]}function Xf(E){return E.type==="color"&&ma(E.default)?new di(0,0,0,0):E.type==="color"?di.parse(E.default)||null:E.default===void 0?null:E.default}function Qs(E){var C=E.key,V=E.value,re=E.valueSpec||{},pe=E.objectElementValidators||{},be=E.style,Me=E.styleSpec,Fe=[],tt=Qa(V);if(tt!=="object")return[new ar(C,V,"object expected, "+tt+" found")];for(var ct in V){var mt=ct.split(".")[0],Dt=re[mt]||re["*"],Zt=void 0;if(pe[mt])Zt=pe[mt];else if(re[mt])Zt=vi;else if(pe["*"])Zt=pe["*"];else if(re["*"])Zt=vi;else{Fe.push(new ar(C,V[ct],'unknown property "'+ct+'"'));continue}Fe=Fe.concat(Zt({key:(C&&C+".")+ct,value:V[ct],valueSpec:Dt,style:be,styleSpec:Me,object:V,objectKey:ct},V))}for(var Ht in re)pe[Ht]||re[Ht].required&&re[Ht].default===void 0&&V[Ht]===void 0&&Fe.push(new ar(C,V,'missing required property "'+Ht+'"'));return Fe}function mc(E){var C=E.value,V=E.valueSpec,re=E.style,pe=E.styleSpec,be=E.key,Me=E.arrayElementValidator||vi;if(Qa(C)!=="array")return[new ar(be,C,"array expected, "+Qa(C)+" found")];if(V.length&&C.length!==V.length)return[new ar(be,C,"array length "+V.length+" expected, length "+C.length+" found")];if(V["min-length"]&&C.length<V["min-length"])return[new ar(be,C,"array length at least "+V["min-length"]+" expected, length "+C.length+" found")];var Fe={type:V.value,values:V.values};pe.$version<7&&(Fe.function=V.function),Qa(V.value)==="object"&&(Fe=V.value);for(var tt=[],ct=0;ct<C.length;ct++)tt=tt.concat(Me({array:C,arrayIndex:ct,value:C[ct],valueSpec:Fe,style:re,styleSpec:pe,key:be+"["+ct+"]"}));return tt}function Zf(E){var C=E.key,V=E.value,re=E.valueSpec,pe=Qa(V);return pe==="number"&&V!==V&&(pe="NaN"),pe!=="number"?[new ar(C,V,"number expected, "+pe+" found")]:"minimum"in re&&V<re.minimum?[new ar(C,V,V+" is less than the minimum value "+re.minimum)]:"maximum"in re&&V>re.maximum?[new ar(C,V,V+" is greater than the maximum value "+re.maximum)]:[]}function Kf(E){var C=E.valueSpec,V=En(E.value.type),re,pe={},be,Me,Fe=V!=="categorical"&&E.value.property===void 0,tt=!Fe,ct=Qa(E.value.stops)==="array"&&Qa(E.value.stops[0])==="array"&&Qa(E.value.stops[0][0])==="object",mt=Qs({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:Dt,default:lr}});return V==="identity"&&Fe&&mt.push(new ar(E.key,E.value,'missing required property "property"')),V!=="identity"&&!E.value.stops&&mt.push(new ar(E.key,E.value,'missing required property "stops"')),V==="exponential"&&E.valueSpec.expression&&!oo(E.valueSpec)&&mt.push(new ar(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(tt&&!ui(E.valueSpec)?mt.push(new ar(E.key,E.value,"property functions not supported")):Fe&&!Eo(E.valueSpec)&&mt.push(new ar(E.key,E.value,"zoom functions not supported"))),(V==="categorical"||ct)&&E.value.property===void 0&&mt.push(new ar(E.key,E.value,'"property" property is required')),mt;function Dt(Ir){if(V==="identity")return[new ar(Ir.key,Ir.value,'identity function may not have a "stops" property')];var ln=[],qr=Ir.value;return ln=ln.concat(mc({key:Ir.key,value:qr,valueSpec:Ir.valueSpec,style:Ir.style,styleSpec:Ir.styleSpec,arrayElementValidator:Zt})),Qa(qr)==="array"&&qr.length===0&&ln.push(new ar(Ir.key,qr,"array must have at least one stop")),ln}function Zt(Ir){var ln=[],qr=Ir.value,Mn=Ir.key;if(Qa(qr)!=="array")return[new ar(Mn,qr,"array expected, "+Qa(qr)+" found")];if(qr.length!==2)return[new ar(Mn,qr,"array length 2 expected, length "+qr.length+" found")];if(ct){if(Qa(qr[0])!=="object")return[new ar(Mn,qr,"object expected, "+Qa(qr[0])+" found")];if(qr[0].zoom===void 0)return[new ar(Mn,qr,"object stop key must have zoom")];if(qr[0].value===void 0)return[new ar(Mn,qr,"object stop key must have value")];if(Me&&Me>En(qr[0].zoom))return[new ar(Mn,qr[0].zoom,"stop zoom values must appear in ascending order")];En(qr[0].zoom)!==Me&&(Me=En(qr[0].zoom),be=void 0,pe={}),ln=ln.concat(Qs({key:Mn+"[0]",value:qr[0],valueSpec:{zoom:{}},style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{zoom:Zf,value:Ht}}))}else ln=ln.concat(Ht({key:Mn+"[0]",value:qr[0],valueSpec:{},style:Ir.style,styleSpec:Ir.styleSpec},qr));return Co(Hn(qr[1]))?ln.concat([new ar(Mn+"[1]",qr[1],"expressions are not allowed in function stops.")]):ln.concat(vi({key:Mn+"[1]",value:qr[1],valueSpec:C,style:Ir.style,styleSpec:Ir.styleSpec}))}function Ht(Ir,ln){var qr=Qa(Ir.value),Mn=En(Ir.value),bn=Ir.value!==null?Ir.value:ln;if(!re)re=qr;else if(qr!==re)return[new ar(Ir.key,bn,qr+" stop domain type must match previous stop domain type "+re)];if(qr!=="number"&&qr!=="string"&&qr!=="boolean")return[new ar(Ir.key,bn,"stop domain value must be a number, string, or boolean")];if(qr!=="number"&&V!=="categorical"){var An="number expected, "+qr+" found";return ui(C)&&V===void 0&&(An+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ar(Ir.key,bn,An)]}return V==="categorical"&&qr==="number"&&(!isFinite(Mn)||Math.floor(Mn)!==Mn)?[new ar(Ir.key,bn,"integer expected, found "+Mn)]:V!=="categorical"&&qr==="number"&&be!==void 0&&Mn<be?[new ar(Ir.key,bn,"stop domain values must appear in ascending order")]:(be=Mn,V==="categorical"&&Mn in pe?[new ar(Ir.key,bn,"stop domain values must be unique")]:(pe[Mn]=!0,[]))}function lr(Ir){return vi({key:Ir.key,value:Ir.value,valueSpec:C,style:Ir.style,styleSpec:Ir.styleSpec})}}function qo(E){var C=(E.expressionContext==="property"?Sf:Fu)(Hn(E.value),E.valueSpec);if(C.result==="error")return C.value.map(function(re){return new ar(""+E.key+re.key,E.value,re.message)});var V=C.value.expression||C.value._styleExpression.expression;if(E.expressionContext==="property"&&E.propertyKey==="text-font"&&!V.outputDefined())return[new ar(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if(E.expressionContext==="property"&&E.propertyType==="layout"&&!Xl(V))return[new ar(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if(E.expressionContext==="filter"&&!Xl(V))return[new ar(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&E.expressionContext.indexOf("cluster")===0){if(!$u(V,["zoom","feature-state"]))return[new ar(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(E.expressionContext==="cluster-initial"&&!jl(V))return[new ar(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Jf(E){var C=E.value,V=E.key,re=Qa(C);return re!=="boolean"?[new ar(V,C,"boolean expected, "+re+" found")]:[]}function Pc(E){var C=E.key,V=E.value,re=Qa(V);return re!=="string"?[new ar(C,V,"color expected, "+re+" found")]:Xu(V)===null?[new ar(C,V,'color expected, "'+V+'" found')]:[]}function Us(E){var C=E.key,V=E.value,re=E.valueSpec,pe=[];return Array.isArray(re.values)?re.values.indexOf(En(V))===-1&&pe.push(new ar(C,V,"expected one of ["+re.values.join(", ")+"], "+JSON.stringify(V)+" found")):Object.keys(re.values).indexOf(En(V))===-1&&pe.push(new ar(C,V,"expected one of ["+Object.keys(re.values).join(", ")+"], "+JSON.stringify(V)+" found")),pe}function Ef(E){if(E===!0||E===!1)return!0;if(!Array.isArray(E)||E.length===0)return!1;switch(E[0]){case"has":return E.length>=2&&E[1]!=="$id"&&E[1]!=="$type";case"in":return E.length>=3&&(typeof E[1]!="string"||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return E.length!==3||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var C=0,V=E.slice(1);C<V.length;C+=1){var re=V[C];if(!Ef(re)&&typeof re!="boolean")return!1}return!0;default:return!0}}var Cf={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qf(E){if(E==null)return{filter:function(){return!0},needGeometry:!1};Ef(E)||(E=nt(E));var C=Fu(E,Cf);if(C.result==="error")throw new Error(C.value.map(function(re){return re.key+": "+re.message}).join(", "));var V=Ye(E);return{filter:function(re,pe,be){return C.value.evaluate(re,pe,{},be)},needGeometry:V}}function ze(E,C){return E<C?-1:E>C?1:0}function Ye(E){if(!Array.isArray(E))return!1;if(E[0]==="within")return!0;for(var C=1;C<E.length;C++)if(Ye(E[C]))return!0;return!1}function nt(E){if(!E)return!0;var C=E[0];if(E.length<=1)return C!=="any";var V=C==="=="?lt(E[1],E[2],"=="):C==="!="?qt(lt(E[1],E[2],"==")):C==="<"||C===">"||C==="<="||C===">="?lt(E[1],E[2],C):C==="any"?_t(E.slice(1)):C==="all"?["all"].concat(E.slice(1).map(nt)):C==="none"?["all"].concat(E.slice(1).map(nt).map(qt)):C==="in"?bt(E[1],E.slice(2)):C==="!in"?qt(bt(E[1],E.slice(2))):C==="has"?Tt(E[1]):C==="!has"?qt(Tt(E[1])):C==="within"?E:!0;return V}function lt(E,C,V){switch(E){case"$type":return["filter-type-"+V,C];case"$id":return["filter-id-"+V,C];default:return["filter-"+V,E,C]}}function _t(E){return["any"].concat(E.map(nt))}function bt(E,C){if(C.length===0)return!1;switch(E){case"$type":return["filter-type-in",["literal",C]];case"$id":return["filter-id-in",["literal",C]];default:return C.length>200&&!C.some(function(V){return typeof V!=typeof C[0]})?["filter-in-large",E,["literal",C.sort(ze)]]:["filter-in-small",E,["literal",C]]}}function Tt(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function qt(E){return["!",E]}function sr(E){return Ef(Hn(E.value))?qo(Jr({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qt(E)}function Qt(E){var C=E.value,V=E.key;if(Qa(C)!=="array")return[new ar(V,C,"array expected, "+Qa(C)+" found")];var re=E.styleSpec,pe,be=[];if(C.length<1)return[new ar(V,C,"filter array must have at least 1 element")];switch(be=be.concat(Us({key:V+"[0]",value:C[0],valueSpec:re.filter_operator,style:E.style,styleSpec:E.styleSpec})),En(C[0])){case"<":case"<=":case">":case">=":C.length>=2&&En(C[1])==="$type"&&be.push(new ar(V,C,'"$type" cannot be use with operator "'+C[0]+'"'));case"==":case"!=":C.length!==3&&be.push(new ar(V,C,'filter array for operator "'+C[0]+'" must have 3 elements'));case"in":case"!in":C.length>=2&&(pe=Qa(C[1]),pe!=="string"&&be.push(new ar(V+"[1]",C[1],"string expected, "+pe+" found")));for(var Me=2;Me<C.length;Me++)pe=Qa(C[Me]),En(C[1])==="$type"?be=be.concat(Us({key:V+"["+Me+"]",value:C[Me],valueSpec:re.geometry_type,style:E.style,styleSpec:E.styleSpec})):pe!=="string"&&pe!=="number"&&pe!=="boolean"&&be.push(new ar(V+"["+Me+"]",C[Me],"string, number, or boolean expected, "+pe+" found"));break;case"any":case"all":case"none":for(var Fe=1;Fe<C.length;Fe++)be=be.concat(Qt({key:V+"["+Fe+"]",value:C[Fe],style:E.style,styleSpec:E.styleSpec}));break;case"has":case"!has":pe=Qa(C[1]),C.length!==2?be.push(new ar(V,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="string"&&be.push(new ar(V+"[1]",C[1],"string expected, "+pe+" found"));break;case"within":pe=Qa(C[1]),C.length!==2?be.push(new ar(V,C,'filter array for "'+C[0]+'" operator must have 2 elements')):pe!=="object"&&be.push(new ar(V+"[1]",C[1],"object expected, "+pe+" found"));break}return be}function fr(E,C){var V=E.key,re=E.style,pe=E.styleSpec,be=E.value,Me=E.objectKey,Fe=pe[C+"_"+E.layerType];if(!Fe)return[];var tt=Me.match(/^(.*)-transition$/);if(C==="paint"&&tt&&Fe[tt[1]]&&Fe[tt[1]].transition)return vi({key:V,value:be,valueSpec:pe.transition,style:re,styleSpec:pe});var ct=E.valueSpec||Fe[Me];if(!ct)return[new ar(V,be,'unknown property "'+Me+'"')];var mt;if(Qa(be)==="string"&&ui(ct)&&!ct.tokens&&(mt=/^{([^}]+)}$/.exec(be)))return[new ar(V,be,'"'+Me+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(mt[1])+" }`.")];var Dt=[];return E.layerType==="symbol"&&(Me==="text-field"&&re&&!re.glyphs&&Dt.push(new ar(V,be,'use of "text-field" requires a style "glyphs" property')),Me==="text-font"&&ma(Hn(be))&&En(be.type)==="identity"&&Dt.push(new ar(V,be,'"text-font" does not support identity functions'))),Dt.concat(vi({key:E.key,value:be,valueSpec:ct,style:re,styleSpec:pe,expressionContext:"property",propertyType:C,propertyKey:Me}))}function Er(E){return fr(E,"paint")}function Hr(E){return fr(E,"layout")}function en(E){var C=[],V=E.value,re=E.key,pe=E.style,be=E.styleSpec;!V.type&&!V.ref&&C.push(new ar(re,V,'either "type" or "ref" is required'));var Me=En(V.type),Fe=En(V.ref);if(V.id)for(var tt=En(V.id),ct=0;ct<E.arrayIndex;ct++){var mt=pe.layers[ct];En(mt.id)===tt&&C.push(new ar(re,V.id,'duplicate layer id "'+V.id+'", previously used at line '+mt.id.__line__))}if("ref"in V){["type","source","source-layer","filter","layout"].forEach(function(lr){lr in V&&C.push(new ar(re,V[lr],'"'+lr+'" is prohibited for ref layers'))});var Dt;pe.layers.forEach(function(lr){En(lr.id)===Fe&&(Dt=lr)}),Dt?Dt.ref?C.push(new ar(re,V.ref,"ref cannot reference another ref layer")):Me=En(Dt.type):C.push(new ar(re,V.ref,'ref layer "'+Fe+'" not found'))}else if(Me!=="background")if(!V.source)C.push(new ar(re,V,'missing required property "source"'));else{var Zt=pe.sources&&pe.sources[V.source],Ht=Zt&&En(Zt.type);Zt?Ht==="vector"&&Me==="raster"?C.push(new ar(re,V.source,'layer "'+V.id+'" requires a raster source')):Ht==="raster"&&Me!=="raster"?C.push(new ar(re,V.source,'layer "'+V.id+'" requires a vector source')):Ht==="vector"&&!V["source-layer"]?C.push(new ar(re,V,'layer "'+V.id+'" must specify a "source-layer"')):Ht==="raster-dem"&&Me!=="hillshade"?C.push(new ar(re,V.source,"raster-dem source can only be used with layer type 'hillshade'.")):Me==="line"&&V.paint&&V.paint["line-gradient"]&&(Ht!=="geojson"||!Zt.lineMetrics)&&C.push(new ar(re,V,'layer "'+V.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):C.push(new ar(re,V.source,'source "'+V.source+'" not found'))}return C=C.concat(Qs({key:re,value:V,valueSpec:be.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return vi({key:re+".type",value:V.type,valueSpec:be.layer.type,style:E.style,styleSpec:E.styleSpec,object:V,objectKey:"type"})},filter:sr,layout:function(Ir){return Qs({layer:V,key:Ir.key,value:Ir.value,style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{"*":function(qr){return Hr(Jr({layerType:Me},qr))}}})},paint:function(Ir){return Qs({layer:V,key:Ir.key,value:Ir.value,style:Ir.style,styleSpec:Ir.styleSpec,objectElementValidators:{"*":function(qr){return Er(Jr({layerType:Me},qr))}}})}}})),C}function _n(E){var C=E.value,V=E.key,re=Qa(C);return re!=="string"?[new ar(V,C,"string expected, "+re+" found")]:[]}var Pn={promoteId:xa};function Kn(E){var C=E.value,V=E.key,re=E.styleSpec,pe=E.style;if(!C.type)return[new ar(V,C,'"type" is required')];var be=En(C.type),Me;switch(be){case"vector":case"raster":case"raster-dem":return Me=Qs({key:V,value:C,valueSpec:re["source_"+be.replace("-","_")],style:E.style,styleSpec:re,objectElementValidators:Pn}),Me;case"geojson":if(Me=Qs({key:V,value:C,valueSpec:re.source_geojson,style:pe,styleSpec:re,objectElementValidators:Pn}),C.cluster)for(var Fe in C.clusterProperties){var tt=C.clusterProperties[Fe],ct=tt[0],mt=tt[1],Dt=typeof ct=="string"?[ct,["accumulated"],["get",Fe]]:ct;Me.push.apply(Me,qo({key:V+"."+Fe+".map",value:mt,expressionContext:"cluster-map"})),Me.push.apply(Me,qo({key:V+"."+Fe+".reduce",value:Dt,expressionContext:"cluster-reduce"}))}return Me;case"video":return Qs({key:V,value:C,valueSpec:re.source_video,style:pe,styleSpec:re});case"image":return Qs({key:V,value:C,valueSpec:re.source_image,style:pe,styleSpec:re});case"canvas":return[new ar(V,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Us({key:V+".type",value:C.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:pe,styleSpec:re})}}function xa(E){var C=E.key,V=E.value;if(Qa(V)==="string")return _n({key:C,value:V});var re=[];for(var pe in V)re.push.apply(re,_n({key:C+"."+pe,value:V[pe]}));return re}function wa(E){var C=E.value,V=E.styleSpec,re=V.light,pe=E.style,be=[],Me=Qa(C);if(C===void 0)return be;if(Me!=="object")return be=be.concat([new ar("light",C,"object expected, "+Me+" found")]),be;for(var Fe in C){var tt=Fe.match(/^(.*)-transition$/);tt&&re[tt[1]]&&re[tt[1]].transition?be=be.concat(vi({key:Fe,value:C[Fe],valueSpec:V.transition,style:pe,styleSpec:V})):re[Fe]?be=be.concat(vi({key:Fe,value:C[Fe],valueSpec:re[Fe],style:pe,styleSpec:V})):be=be.concat([new ar(Fe,C[Fe],'unknown property "'+Fe+'"')])}return be}function Ja(E){return _n(E).length===0?[]:qo(E)}function Xa(E){return _n(E).length===0?[]:qo(E)}var ni={"*":function(){return[]},array:mc,boolean:Jf,number:Zf,color:Pc,constants:Fr,enum:Us,filter:sr,function:Kf,layer:en,object:Qs,source:Kn,light:wa,string:_n,formatted:Ja,resolvedImage:Xa};function vi(E){var C=E.value,V=E.valueSpec,re=E.styleSpec;if(V.expression&&ma(En(C)))return Kf(E);if(V.expression&&Co(Hn(C)))return qo(E);if(V.type&&ni[V.type])return ni[V.type](E);var pe=Qs(Jr({},E,{valueSpec:V.type?re[V.type]:V}));return pe}function ho(E){var C=E.value,V=E.key,re=_n(E);return re.length||(C.indexOf("{fontstack}")===-1&&re.push(new ar(V,C,'"glyphs" url must include a "{fontstack}" token')),C.indexOf("{range}")===-1&&re.push(new ar(V,C,'"glyphs" url must include a "{range}" token'))),re}function ii(E,C){C===void 0&&(C=cr);var V=[];return V=V.concat(vi({key:"",value:E,valueSpec:C.$root,styleSpec:C,style:E,objectElementValidators:{glyphs:ho,"*":function(){return[]}}})),E.constants&&(V=V.concat(Fr({key:"constants",value:E.constants,style:E,styleSpec:C}))),Xi(V)}ii.source=xo(Kn),ii.light=xo(wa),ii.layer=xo(en),ii.filter=xo(sr),ii.paintProperty=xo(Er),ii.layoutProperty=xo(Hr);function Xi(E){return[].concat(E).sort(function(C,V){return C.line-V.line})}function xo(E){return function(){for(var C=[],V=arguments.length;V--;)C[V]=arguments[V];return Xi(E.apply(this,C))}}var Po=ii,Ti=Po.light,Ei=Po.paintProperty,Ps=Po.layoutProperty;function Mo(E,C){var V=!1;if(C&&C.length)for(var re=0,pe=C;re<pe.length;re+=1){var be=pe[re];E.fire(new wr(new Error(be.message))),V=!0}return V}var jo=he,os=3;function he(E,C,V){var re=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var pe=new Int32Array(this.arrayBuffer);E=pe[0],C=pe[1],V=pe[2],this.d=C+2*V;for(var be=0;be<this.d*this.d;be++){var Me=pe[os+be],Fe=pe[os+be+1];re.push(Me===Fe?null:pe.subarray(Me,Fe))}var tt=pe[os+re.length],ct=pe[os+re.length+1];this.keys=pe.subarray(tt,ct),this.bboxes=pe.subarray(ct),this.insert=this._insertReadonly}else{this.d=C+2*V;for(var mt=0;mt<this.d*this.d;mt++)re.push([]);this.keys=[],this.bboxes=[]}this.n=C,this.extent=E,this.padding=V,this.scale=C/E,this.uid=0;var Dt=V/C*E;this.min=-Dt,this.max=E+Dt}he.prototype.insert=function(E,C,V,re,pe){this._forEachCell(C,V,re,pe,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(C),this.bboxes.push(V),this.bboxes.push(re),this.bboxes.push(pe)},he.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},he.prototype._insertCell=function(E,C,V,re,pe,be){this.cells[pe].push(be)},he.prototype.query=function(E,C,V,re,pe){var be=this.min,Me=this.max;if(E<=be&&C<=be&&Me<=V&&Me<=re&&!pe)return Array.prototype.slice.call(this.keys);var Fe=[],tt={};return this._forEachCell(E,C,V,re,this._queryCell,Fe,tt,pe),Fe},he.prototype._queryCell=function(E,C,V,re,pe,be,Me,Fe){var tt=this.cells[pe];if(tt!==null)for(var ct=this.keys,mt=this.bboxes,Dt=0;Dt<tt.length;Dt++){var Zt=tt[Dt];if(Me[Zt]===void 0){var Ht=Zt*4;(Fe?Fe(mt[Ht+0],mt[Ht+1],mt[Ht+2],mt[Ht+3]):E<=mt[Ht+2]&&C<=mt[Ht+3]&&V>=mt[Ht+0]&&re>=mt[Ht+1])?(Me[Zt]=!0,be.push(ct[Zt])):Me[Zt]=!1}}},he.prototype._forEachCell=function(E,C,V,re,pe,be,Me,Fe){for(var tt=this._convertToCellCoord(E),ct=this._convertToCellCoord(C),mt=this._convertToCellCoord(V),Dt=this._convertToCellCoord(re),Zt=tt;Zt<=mt;Zt++)for(var Ht=ct;Ht<=Dt;Ht++){var lr=this.d*Ht+Zt;if(!(Fe&&!Fe(this._convertFromCellCoord(Zt),this._convertFromCellCoord(Ht),this._convertFromCellCoord(Zt+1),this._convertFromCellCoord(Ht+1)))&&pe.call(this,E,C,V,re,lr,be,Me,Fe))return}},he.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},he.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},he.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,C=os+this.cells.length+1+1,V=0,re=0;re<this.cells.length;re++)V+=this.cells[re].length;var pe=new Int32Array(C+V+this.keys.length+this.bboxes.length);pe[0]=this.extent,pe[1]=this.n,pe[2]=this.padding;for(var be=C,Me=0;Me<E.length;Me++){var Fe=E[Me];pe[os+Me]=be,pe.set(Fe,be),be+=Fe.length}return pe[os+E.length]=be,pe.set(this.keys,be),be+=this.keys.length,pe[os+E.length+1]=be,pe.set(this.bboxes,be),be+=this.bboxes.length,pe.buffer};var Te=self.ImageData,Le=self.ImageBitmap,Be={};function Ne(E,C,V){V===void 0&&(V={}),Object.defineProperty(C,"_classRegistryKey",{value:E,writeable:!1}),Be[E]={klass:C,omit:V.omit||[],shallow:V.shallow||[]}}Ne("Object",Object),jo.serialize=function(C,V){var re=C.toArrayBuffer();return V&&V.push(re),{buffer:re}},jo.deserialize=function(C){return new jo(C.buffer)},Ne("Grid",jo),Ne("Color",di),Ne("Error",Error),Ne("ResolvedImage",Oo),Ne("StylePropertyFunction",Ou),Ne("StyleExpression",Cs,{omit:["_evaluator"]}),Ne("ZoomDependentExpression",Ls),Ne("ZoomConstantExpression",ef),Ne("CompoundExpression",No,{omit:["_evaluate"]});for(var Ke in $n)$n[Ke]._classRegistryKey||Ne("Expression_"+Ke,$n[Ke]);function yt(E){return E&&typeof ArrayBuffer!="undefined"&&(E instanceof ArrayBuffer||E.constructor&&E.constructor.name==="ArrayBuffer")}function vt(E){return Le&&E instanceof Le}function Ct(E,C){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(yt(E)||vt(E))return C&&C.push(E),E;if(ArrayBuffer.isView(E)){var V=E;return C&&C.push(V.buffer),V}if(E instanceof Te)return C&&C.push(E.data.buffer),E;if(Array.isArray(E)){for(var re=[],pe=0,be=E;pe<be.length;pe+=1){var Me=be[pe];re.push(Ct(Me,C))}return re}if(typeof E=="object"){var Fe=E.constructor,tt=Fe._classRegistryKey;if(!tt)throw new Error("can't serialize object of unregistered class");var ct=Fe.serialize?Fe.serialize(E,C):{};if(!Fe.serialize){for(var mt in E)if(!!E.hasOwnProperty(mt)&&!(Be[tt].omit.indexOf(mt)>=0)){var Dt=E[mt];ct[mt]=Be[tt].shallow.indexOf(mt)>=0?Dt:Ct(Dt,C)}E instanceof Error&&(ct.message=E.message)}if(ct.$name)throw new Error("$name property is reserved for worker serialization logic.");return tt!=="Object"&&(ct.$name=tt),ct}throw new Error("can't serialize object of type "+typeof E)}function Ut(E){if(E==null||typeof E=="boolean"||typeof E=="number"||typeof E=="string"||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||yt(E)||vt(E)||ArrayBuffer.isView(E)||E instanceof Te)return E;if(Array.isArray(E))return E.map(Ut);if(typeof E=="object"){var C=E.$name||"Object",V=Be[C],re=V.klass;if(!re)throw new Error("can't deserialize unregistered class "+C);if(re.deserialize)return re.deserialize(E);for(var pe=Object.create(re.prototype),be=0,Me=Object.keys(E);be<Me.length;be+=1){var Fe=Me[be];if(Fe!=="$name"){var tt=E[Fe];pe[Fe]=Be[C].shallow.indexOf(Fe)>=0?tt:Ut(tt)}}return pe}throw new Error("can't deserialize object of type "+typeof E)}var Yt=function(){this.first=!0};Yt.prototype.update=function(C,V){var re=Math.floor(C);return this.first?(this.first=!1,this.lastIntegerZoom=re,this.lastIntegerZoomTime=0,this.lastZoom=C,this.lastFloorZoom=re,!0):(this.lastFloorZoom>re?(this.lastIntegerZoom=re+1,this.lastIntegerZoomTime=V):this.lastFloorZoom<re&&(this.lastIntegerZoom=re,this.lastIntegerZoomTime=V),C!==this.lastZoom?(this.lastZoom=C,this.lastFloorZoom=re,!0):!1)};var Xt={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function _r(E){for(var C=0,V=E;C<V.length;C+=1){var re=V[C];if(Ur(re.charCodeAt(0)))return!0}return!1}function Qr(E){for(var C=0,V=E;C<V.length;C+=1){var re=V[C];if(!cn(re.charCodeAt(0)))return!1}return!0}function cn(E){return!(Xt.Arabic(E)||Xt["Arabic Supplement"](E)||Xt["Arabic Extended-A"](E)||Xt["Arabic Presentation Forms-A"](E)||Xt["Arabic Presentation Forms-B"](E))}function Mr(E){return E<11904?!1:!!(Xt["Bopomofo Extended"](E)||Xt.Bopomofo(E)||Xt["CJK Compatibility Forms"](E)||Xt["CJK Compatibility Ideographs"](E)||Xt["CJK Compatibility"](E)||Xt["CJK Radicals Supplement"](E)||Xt["CJK Strokes"](E)||Xt["CJK Symbols and Punctuation"](E)||Xt["CJK Unified Ideographs Extension A"](E)||Xt["CJK Unified Ideographs"](E)||Xt["Enclosed CJK Letters and Months"](E)||Xt["Halfwidth and Fullwidth Forms"](E)||Xt.Hiragana(E)||Xt["Ideographic Description Characters"](E)||Xt["Kangxi Radicals"](E)||Xt["Katakana Phonetic Extensions"](E)||Xt.Katakana(E)||Xt["Vertical Forms"](E)||Xt["Yi Radicals"](E)||Xt["Yi Syllables"](E))}function Ur(E){return E===746||E===747?!0:E<4352?!1:!!(Xt["Bopomofo Extended"](E)||Xt.Bopomofo(E)||Xt["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||Xt["CJK Compatibility Ideographs"](E)||Xt["CJK Compatibility"](E)||Xt["CJK Radicals Supplement"](E)||Xt["CJK Strokes"](E)||Xt["CJK Symbols and Punctuation"](E)&&!(E>=12296&&E<=12305)&&!(E>=12308&&E<=12319)&&E!==12336||Xt["CJK Unified Ideographs Extension A"](E)||Xt["CJK Unified Ideographs"](E)||Xt["Enclosed CJK Letters and Months"](E)||Xt["Hangul Compatibility Jamo"](E)||Xt["Hangul Jamo Extended-A"](E)||Xt["Hangul Jamo Extended-B"](E)||Xt["Hangul Jamo"](E)||Xt["Hangul Syllables"](E)||Xt.Hiragana(E)||Xt["Ideographic Description Characters"](E)||Xt.Kanbun(E)||Xt["Kangxi Radicals"](E)||Xt["Katakana Phonetic Extensions"](E)||Xt.Katakana(E)&&E!==12540||Xt["Halfwidth and Fullwidth Forms"](E)&&E!==65288&&E!==65289&&E!==65293&&!(E>=65306&&E<=65310)&&E!==65339&&E!==65341&&E!==65343&&!(E>=65371&&E<=65503)&&E!==65507&&!(E>=65512&&E<=65519)||Xt["Small Form Variants"](E)&&!(E>=65112&&E<=65118)&&!(E>=65123&&E<=65126)||Xt["Unified Canadian Aboriginal Syllabics"](E)||Xt["Unified Canadian Aboriginal Syllabics Extended"](E)||Xt["Vertical Forms"](E)||Xt["Yijing Hexagram Symbols"](E)||Xt["Yi Syllables"](E)||Xt["Yi Radicals"](E))}function Yr(E){return!!(Xt["Latin-1 Supplement"](E)&&(E===167||E===169||E===174||E===177||E===188||E===189||E===190||E===215||E===247)||Xt["General Punctuation"](E)&&(E===8214||E===8224||E===8225||E===8240||E===8241||E===8251||E===8252||E===8258||E===8263||E===8264||E===8265||E===8273)||Xt["Letterlike Symbols"](E)||Xt["Number Forms"](E)||Xt["Miscellaneous Technical"](E)&&(E>=8960&&E<=8967||E>=8972&&E<=8991||E>=8996&&E<=9e3||E===9003||E>=9085&&E<=9114||E>=9150&&E<=9165||E===9167||E>=9169&&E<=9179||E>=9186&&E<=9215)||Xt["Control Pictures"](E)&&E!==9251||Xt["Optical Character Recognition"](E)||Xt["Enclosed Alphanumerics"](E)||Xt["Geometric Shapes"](E)||Xt["Miscellaneous Symbols"](E)&&!(E>=9754&&E<=9759)||Xt["Miscellaneous Symbols and Arrows"](E)&&(E>=11026&&E<=11055||E>=11088&&E<=11097||E>=11192&&E<=11243)||Xt["CJK Symbols and Punctuation"](E)||Xt.Katakana(E)||Xt["Private Use Area"](E)||Xt["CJK Compatibility Forms"](E)||Xt["Small Form Variants"](E)||Xt["Halfwidth and Fullwidth Forms"](E)||E===8734||E===8756||E===8757||E>=9984&&E<=10087||E>=10102&&E<=10131||E===65532||E===65533)}function sn(E){return!(Ur(E)||Yr(E))}function un(E){return Xt.Arabic(E)||Xt["Arabic Supplement"](E)||Xt["Arabic Extended-A"](E)||Xt["Arabic Presentation Forms-A"](E)||Xt["Arabic Presentation Forms-B"](E)}function Zr(E){return E>=1424&&E<=2303||Xt["Arabic Presentation Forms-A"](E)||Xt["Arabic Presentation Forms-B"](E)}function Wn(E,C){return!(!C&&Zr(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||Xt.Khmer(E))}function aa(E){for(var C=0,V=E;C<V.length;C+=1){var re=V[C];if(Zr(re.charCodeAt(0)))return!0}return!1}function Aa(E,C){for(var V=0,re=E;V<re.length;V+=1){var pe=re[V];if(!Wn(pe.charCodeAt(0),C))return!1}return!0}var sa={unavailable:"unavailable",deferred:"deferred",loading:"loading",loaded:"loaded",error:"error"},La=null,ca=sa.unavailable,Ga=null,za=function(E){E&&typeof E=="string"&&E.indexOf("NetworkError")>-1&&(ca=sa.error),La&&La(E)};function ei(){bi.fire(new tn("pluginStateChange",{pluginStatus:ca,pluginURL:Ga}))}var bi=new gr,bo=function(){return ca},Ni=function(E){return E({pluginStatus:ca,pluginURL:Ga}),bi.on("pluginStateChange",E),E},va=function(E,C,V){if(V===void 0&&(V=!1),ca===sa.deferred||ca===sa.loading||ca===sa.loaded)throw new Error("setRTLTextPlugin cannot be called multiple times.");Ga=$.resolveURL(E),ca=sa.deferred,La=C,ei(),V||si()},si=function(){if(ca!==sa.deferred||!Ga)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ca=sa.loading,ei(),Ga&&De({url:Ga},function(E){E?za(E):(ca=sa.loaded,ei())})},Za={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ca===sa.loaded||Za.applyArabicShaping!=null},isLoading:function(){return ca===sa.loading},setState:function(C){ca=C.pluginStatus,Ga=C.pluginURL},isParsed:function(){return Za.applyArabicShaping!=null&&Za.processBidirectionalText!=null&&Za.processStyledBidirectionalText!=null},getPluginURL:function(){return Ga}},Ci=function(){!Za.isLoading()&&!Za.isLoaded()&&bo()==="deferred"&&si()},fi=function(C,V){this.zoom=C,V?(this.now=V.now,this.fadeDuration=V.fadeDuration,this.zoomHistory=V.zoomHistory,this.transition=V.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Yt,this.transition={})};fi.prototype.isSupportedScript=function(C){return Aa(C,Za.isLoaded())},fi.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},fi.prototype.getCrossfadeParameters=function(){var C=this.zoom,V=C-Math.floor(C),re=this.crossFadingFactor();return C>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:V+(1-V)*re}:{fromScale:.5,toScale:1,t:1-(1-re)*V}};var vo=function(C,V){this.property=C,this.value=V,this.expression=mh(V===void 0?C.specification.default:V,C.specification)};vo.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},vo.prototype.possiblyEvaluate=function(C,V,re){return this.property.possiblyEvaluate(this,C,V,re)};var no=function(C){this.property=C,this.value=new vo(C,void 0)};no.prototype.transitioned=function(C,V){return new ss(this.property,this.value,V,M({},C.transition,this.transition),C.now)},no.prototype.untransitioned=function(){return new ss(this.property,this.value,null,{},0)};var So=function(C){this._properties=C,this._values=Object.create(C.defaultTransitionablePropertyValues)};So.prototype.getValue=function(C){return F(this._values[C].value.value)},So.prototype.setValue=function(C,V){this._values.hasOwnProperty(C)||(this._values[C]=new no(this._values[C].property)),this._values[C].value=new vo(this._values[C].property,V===null?void 0:F(V))},So.prototype.getTransition=function(C){return F(this._values[C].transition)},So.prototype.setTransition=function(C,V){this._values.hasOwnProperty(C)||(this._values[C]=new no(this._values[C].property)),this._values[C].transition=F(V)||void 0},So.prototype.serialize=function(){for(var C={},V=0,re=Object.keys(this._values);V<re.length;V+=1){var pe=re[V],be=this.getValue(pe);be!==void 0&&(C[pe]=be);var Me=this.getTransition(pe);Me!==void 0&&(C[pe+"-transition"]=Me)}return C},So.prototype.transitioned=function(C,V){for(var re=new es(this._properties),pe=0,be=Object.keys(this._values);pe<be.length;pe+=1){var Me=be[pe];re._values[Me]=this._values[Me].transitioned(C,V._values[Me])}return re},So.prototype.untransitioned=function(){for(var C=new es(this._properties),V=0,re=Object.keys(this._values);V<re.length;V+=1){var pe=re[V];C._values[pe]=this._values[pe].untransitioned()}return C};var ss=function(C,V,re,pe,be){this.property=C,this.value=V,this.begin=be+pe.delay||0,this.end=this.begin+pe.duration||0,C.specification.transition&&(pe.delay||pe.duration)&&(this.prior=re)};ss.prototype.possiblyEvaluate=function(C,V,re){var pe=C.now||0,be=this.value.possiblyEvaluate(C,V,re),Me=this.prior;if(Me){if(pe>this.end)return this.prior=null,be;if(this.value.isDataDriven())return this.prior=null,be;if(pe<this.begin)return Me.possiblyEvaluate(C,V,re);var Fe=(pe-this.begin)/(this.end-this.begin);return this.property.interpolate(Me.possiblyEvaluate(C,V,re),be,c(Fe))}else return be};var es=function(C){this._properties=C,this._values=Object.create(C.defaultTransitioningPropertyValues)};es.prototype.possiblyEvaluate=function(C,V,re){for(var pe=new Hi(this._properties),be=0,Me=Object.keys(this._values);be<Me.length;be+=1){var Fe=Me[be];pe._values[Fe]=this._values[Fe].possiblyEvaluate(C,V,re)}return pe},es.prototype.hasTransition=function(){for(var C=0,V=Object.keys(this._values);C<V.length;C+=1){var re=V[C];if(this._values[re].prior)return!0}return!1};var ls=function(C){this._properties=C,this._values=Object.create(C.defaultPropertyValues)};ls.prototype.getValue=function(C){return F(this._values[C].value)},ls.prototype.setValue=function(C,V){this._values[C]=new vo(this._values[C].property,V===null?void 0:F(V))},ls.prototype.serialize=function(){for(var C={},V=0,re=Object.keys(this._values);V<re.length;V+=1){var pe=re[V],be=this.getValue(pe);be!==void 0&&(C[pe]=be)}return C},ls.prototype.possiblyEvaluate=function(C,V,re){for(var pe=new Hi(this._properties),be=0,Me=Object.keys(this._values);be<Me.length;be+=1){var Fe=Me[be];pe._values[Fe]=this._values[Fe].possiblyEvaluate(C,V,re)}return pe};var Zi=function(C,V,re){this.property=C,this.value=V,this.parameters=re};Zi.prototype.isConstant=function(){return this.value.kind==="constant"},Zi.prototype.constantOr=function(C){return this.value.kind==="constant"?this.value.value:C},Zi.prototype.evaluate=function(C,V,re,pe){return this.property.evaluate(this.value,this.parameters,C,V,re,pe)};var Hi=function(C){this._properties=C,this._values=Object.create(C.defaultPossiblyEvaluatedValues)};Hi.prototype.get=function(C){return this._values[C]};var Na=function(C){this.specification=C};Na.prototype.possiblyEvaluate=function(C,V){return C.expression.evaluate(V)},Na.prototype.interpolate=function(C,V,re){var pe=kl[this.specification.type];return pe?pe(C,V,re):C};var Ka=function(C,V){this.specification=C,this.overrides=V};Ka.prototype.possiblyEvaluate=function(C,V,re,pe){return C.expression.kind==="constant"||C.expression.kind==="camera"?new Zi(this,{kind:"constant",value:C.expression.evaluate(V,null,{},re,pe)},V):new Zi(this,C.expression,V)},Ka.prototype.interpolate=function(C,V,re){if(C.value.kind!=="constant"||V.value.kind!=="constant")return C;if(C.value.value===void 0||V.value.value===void 0)return new Zi(this,{kind:"constant",value:void 0},C.parameters);var pe=kl[this.specification.type];return pe?new Zi(this,{kind:"constant",value:pe(C.value.value,V.value.value,re)},C.parameters):C},Ka.prototype.evaluate=function(C,V,re,pe,be,Me){return C.kind==="constant"?C.value:C.evaluate(V,re,pe,be,Me)};var Lo=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(re,pe,be,Me){if(re.value===void 0)return new Zi(this,{kind:"constant",value:void 0},pe);if(re.expression.kind==="constant"){var Fe=re.expression.evaluate(pe,null,{},be,Me),tt=re.property.specification.type==="resolvedImage",ct=tt&&typeof Fe!="string"?Fe.name:Fe,mt=this._calculate(ct,ct,ct,pe);return new Zi(this,{kind:"constant",value:mt},pe)}else if(re.expression.kind==="camera"){var Dt=this._calculate(re.expression.evaluate({zoom:pe.zoom-1}),re.expression.evaluate({zoom:pe.zoom}),re.expression.evaluate({zoom:pe.zoom+1}),pe);return new Zi(this,{kind:"constant",value:Dt},pe)}else return new Zi(this,re.expression,pe)},C.prototype.evaluate=function(re,pe,be,Me,Fe,tt){if(re.kind==="source"){var ct=re.evaluate(pe,be,Me,Fe,tt);return this._calculate(ct,ct,ct,pe)}else return re.kind==="composite"?this._calculate(re.evaluate({zoom:Math.floor(pe.zoom)-1},be,Me),re.evaluate({zoom:Math.floor(pe.zoom)},be,Me),re.evaluate({zoom:Math.floor(pe.zoom)+1},be,Me),pe):re.value},C.prototype._calculate=function(re,pe,be,Me){var Fe=Me.zoom;return Fe>Me.zoomHistory.lastIntegerZoom?{from:re,to:pe}:{from:be,to:pe}},C.prototype.interpolate=function(re){return re},C}(Ka),so=function(C){this.specification=C};so.prototype.possiblyEvaluate=function(C,V,re,pe){if(C.value!==void 0)if(C.expression.kind==="constant"){var be=C.expression.evaluate(V,null,{},re,pe);return this._calculate(be,be,be,V)}else return this._calculate(C.expression.evaluate(new fi(Math.floor(V.zoom-1),V)),C.expression.evaluate(new fi(Math.floor(V.zoom),V)),C.expression.evaluate(new fi(Math.floor(V.zoom+1),V)),V)},so.prototype._calculate=function(C,V,re,pe){var be=pe.zoom;return be>pe.zoomHistory.lastIntegerZoom?{from:C,to:V}:{from:re,to:V}},so.prototype.interpolate=function(C){return C};var Xo=function(C){this.specification=C};Xo.prototype.possiblyEvaluate=function(C,V,re,pe){return!!C.expression.evaluate(V,null,{},re,pe)},Xo.prototype.interpolate=function(){return!1};var Qi=function(C){this.properties=C,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(var V in C){var re=C[V];re.specification.overridable&&this.overridableProperties.push(V);var pe=this.defaultPropertyValues[V]=new vo(re,void 0),be=this.defaultTransitionablePropertyValues[V]=new no(re);this.defaultTransitioningPropertyValues[V]=be.untransitioned(),this.defaultPossiblyEvaluatedValues[V]=pe.possiblyEvaluate({})}};Ne("DataDrivenProperty",Ka),Ne("DataConstantProperty",Na),Ne("CrossFadedDataDrivenProperty",Lo),Ne("CrossFadedProperty",so),Ne("ColorRampProperty",Xo);var us="-transition",Vs=function(E){function C(V,re){if(E.call(this),this.id=V.id,this.type=V.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},V.type!=="custom"&&(V=V,this.metadata=V.metadata,this.minzoom=V.minzoom,this.maxzoom=V.maxzoom,V.type!=="background"&&(this.source=V.source,this.sourceLayer=V["source-layer"],this.filter=V.filter),re.layout&&(this._unevaluatedLayout=new ls(re.layout)),re.paint)){this._transitionablePaint=new So(re.paint);for(var pe in V.paint)this.setPaintProperty(pe,V.paint[pe],{validate:!1});for(var be in V.layout)this.setLayoutProperty(be,V.layout[be],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Hi(re.paint)}}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},C.prototype.getLayoutProperty=function(re){return re==="visibility"?this.visibility:this._unevaluatedLayout.getValue(re)},C.prototype.setLayoutProperty=function(re,pe,be){if(be===void 0&&(be={}),pe!=null){var Me="layers."+this.id+".layout."+re;if(this._validate(Ps,Me,re,pe,be))return}if(re==="visibility"){this.visibility=pe;return}this._unevaluatedLayout.setValue(re,pe)},C.prototype.getPaintProperty=function(re){return k(re,us)?this._transitionablePaint.getTransition(re.slice(0,-us.length)):this._transitionablePaint.getValue(re)},C.prototype.setPaintProperty=function(re,pe,be){if(be===void 0&&(be={}),pe!=null){var Me="layers."+this.id+".paint."+re;if(this._validate(Ei,Me,re,pe,be))return!1}if(k(re,us))return this._transitionablePaint.setTransition(re.slice(0,-us.length),pe||void 0),!1;var Fe=this._transitionablePaint._values[re],tt=Fe.property.specification["property-type"]==="cross-faded-data-driven",ct=Fe.value.isDataDriven(),mt=Fe.value;this._transitionablePaint.setValue(re,pe),this._handleSpecialPaintPropertyUpdate(re);var Dt=this._transitionablePaint._values[re].value,Zt=Dt.isDataDriven();return Zt||ct||tt||this._handleOverridablePaintPropertyUpdate(re,mt,Dt)},C.prototype._handleSpecialPaintPropertyUpdate=function(re){},C.prototype._handleOverridablePaintPropertyUpdate=function(re,pe,be){return!1},C.prototype.isHidden=function(re){return this.minzoom&&re<this.minzoom||this.maxzoom&&re>=this.maxzoom?!0:this.visibility==="none"},C.prototype.updateTransitions=function(re){this._transitioningPaint=this._transitionablePaint.transitioned(re,this._transitioningPaint)},C.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},C.prototype.recalculate=function(re,pe){re.getCrossfadeParameters&&(this._crossfadeParameters=re.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(re,void 0,pe)),this.paint=this._transitioningPaint.possiblyEvaluate(re,void 0,pe)},C.prototype.serialize=function(){var re={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(re.layout=re.layout||{},re.layout.visibility=this.visibility),O(re,function(pe,be){return pe!==void 0&&!(be==="layout"&&!Object.keys(pe).length)&&!(be==="paint"&&!Object.keys(pe).length)})},C.prototype._validate=function(re,pe,be,Me,Fe){return Fe===void 0&&(Fe={}),Fe&&Fe.validate===!1?!1:Mo(this,re.call(Po,{key:pe,layerType:this.type,objectKey:be,value:Me,styleSpec:cr,style:{glyphs:!0,sprite:!0}}))},C.prototype.is3D=function(){return!1},C.prototype.isTileClipped=function(){return!1},C.prototype.hasOffscreenPass=function(){return!1},C.prototype.resize=function(){},C.prototype.isStateDependent=function(){for(var re in this.paint._values){var pe=this.paint.get(re);if(!(!(pe instanceof Zi)||!ui(pe.property.specification))&&(pe.value.kind==="source"||pe.value.kind==="composite")&&pe.value.isStateDependent)return!0}return!1},C}(gr),Nu={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},$i=function(C,V){this._structArray=C,this._pos1=V*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Rc=128,gu=5,Vi=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};Vi.serialize=function(C,V){return C._trim(),V&&(C.isTransferred=!0,V.push(C.arrayBuffer)),{length:C.length,arrayBuffer:C.arrayBuffer}},Vi.deserialize=function(C){var V=Object.create(this.prototype);return V.arrayBuffer=C.arrayBuffer,V.length=C.length,V.capacity=C.arrayBuffer.byteLength/V.bytesPerElement,V._refreshViews(),V},Vi.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Vi.prototype.clear=function(){this.length=0},Vi.prototype.resize=function(C){this.reserve(C),this.length=C},Vi.prototype.reserve=function(C){if(C>this.capacity){this.capacity=Math.max(C,Math.floor(this.capacity*gu),Rc),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var V=this.uint8;this._refreshViews(),V&&this.uint8.set(V)}},Vi.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};function Zo(E,C){C===void 0&&(C=1);var V=0,re=0,pe=E.map(function(Me){var Fe=hm(Me.type),tt=V=Zh(V,Math.max(C,Fe)),ct=Me.components||1;return re=Math.max(re,Fe),V+=Fe*ct,{name:Me.name,type:Me.type,components:ct,offset:tt}}),be=Zh(V,Math.max(re,C));return{members:pe,size:be,alignment:C}}function hm(E){return Nu[E].BYTES_PER_ELEMENT}function Zh(E,C){return Math.ceil(E/C)*C}var yh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe){var be=this.length;return this.resize(be+1),this.emplace(be,re,pe)},C.prototype.emplace=function(re,pe,be){var Me=re*2;return this.int16[Me+0]=pe,this.int16[Me+1]=be,re},C}(Vi);yh.prototype.bytesPerElement=4,Ne("StructArrayLayout2i4",yh);var $f=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,re,pe,be,Me)},C.prototype.emplace=function(re,pe,be,Me,Fe){var tt=re*4;return this.int16[tt+0]=pe,this.int16[tt+1]=be,this.int16[tt+2]=Me,this.int16[tt+3]=Fe,re},C}(Vi);$f.prototype.bytesPerElement=8,Ne("StructArrayLayout4i8",$f);var Dc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,re,pe,be,Me,Fe,tt)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct){var mt=re*6;return this.int16[mt+0]=pe,this.int16[mt+1]=be,this.int16[mt+2]=Me,this.int16[mt+3]=Fe,this.int16[mt+4]=tt,this.int16[mt+5]=ct,re},C}(Vi);Dc.prototype.bytesPerElement=12,Ne("StructArrayLayout2i4i12",Dc);var Kh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,re,pe,be,Me,Fe,tt)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct){var mt=re*4,Dt=re*8;return this.int16[mt+0]=pe,this.int16[mt+1]=be,this.uint8[Dt+4]=Me,this.uint8[Dt+5]=Fe,this.uint8[Dt+6]=tt,this.uint8[Dt+7]=ct,re},C}(Vi);Kh.prototype.bytesPerElement=8,Ne("StructArrayLayout2i4ub8",Kh);var hl=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt){var Ht=this.length;return this.resize(Ht+1),this.emplace(Ht,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht){var lr=re*9,Ir=re*18;return this.uint16[lr+0]=pe,this.uint16[lr+1]=be,this.uint16[lr+2]=Me,this.uint16[lr+3]=Fe,this.uint16[lr+4]=tt,this.uint16[lr+5]=ct,this.uint16[lr+6]=mt,this.uint16[lr+7]=Dt,this.uint8[Ir+16]=Zt,this.uint8[Ir+17]=Ht,re},C}(Vi);hl.prototype.bytesPerElement=18,Ne("StructArrayLayout8ui2ub18",hl);var qf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr){var Ir=this.length;return this.resize(Ir+1),this.emplace(Ir,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir){var ln=re*12;return this.int16[ln+0]=pe,this.int16[ln+1]=be,this.int16[ln+2]=Me,this.int16[ln+3]=Fe,this.uint16[ln+4]=tt,this.uint16[ln+5]=ct,this.uint16[ln+6]=mt,this.uint16[ln+7]=Dt,this.int16[ln+8]=Zt,this.int16[ln+9]=Ht,this.int16[ln+10]=lr,this.int16[ln+11]=Ir,re},C}(Vi);qf.prototype.bytesPerElement=24,Ne("StructArrayLayout4i4ui4i24",qf);var sp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,re,pe,be)},C.prototype.emplace=function(re,pe,be,Me){var Fe=re*3;return this.float32[Fe+0]=pe,this.float32[Fe+1]=be,this.float32[Fe+2]=Me,re},C}(Vi);sp.prototype.bytesPerElement=12,Ne("StructArrayLayout3f12",sp);var lp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re){var pe=this.length;return this.resize(pe+1),this.emplace(pe,re)},C.prototype.emplace=function(re,pe){var be=re*1;return this.uint32[be+0]=pe,re},C}(Vi);lp.prototype.bytesPerElement=4,Ne("StructArrayLayout1ul4",lp);var xh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt,ct,mt,Dt){var Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,re,pe,be,Me,Fe,tt,ct,mt,Dt)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt){var Ht=re*10,lr=re*5;return this.int16[Ht+0]=pe,this.int16[Ht+1]=be,this.int16[Ht+2]=Me,this.int16[Ht+3]=Fe,this.int16[Ht+4]=tt,this.int16[Ht+5]=ct,this.uint32[lr+3]=mt,this.uint16[Ht+8]=Dt,this.uint16[Ht+9]=Zt,re},C}(Vi);xh.prototype.bytesPerElement=20,Ne("StructArrayLayout6i1ul2ui20",xh);var Jh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt){var ct=this.length;return this.resize(ct+1),this.emplace(ct,re,pe,be,Me,Fe,tt)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct){var mt=re*6;return this.int16[mt+0]=pe,this.int16[mt+1]=be,this.int16[mt+2]=Me,this.int16[mt+3]=Fe,this.int16[mt+4]=tt,this.int16[mt+5]=ct,re},C}(Vi);Jh.prototype.bytesPerElement=12,Ne("StructArrayLayout2i2i2i12",Jh);var Lf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe){var tt=this.length;return this.resize(tt+1),this.emplace(tt,re,pe,be,Me,Fe)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt){var ct=re*4,mt=re*8;return this.float32[ct+0]=pe,this.float32[ct+1]=be,this.float32[ct+2]=Me,this.int16[mt+6]=Fe,this.int16[mt+7]=tt,re},C}(Vi);Lf.prototype.bytesPerElement=16,Ne("StructArrayLayout2f1f2i16",Lf);var Rl=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,re,pe,be,Me)},C.prototype.emplace=function(re,pe,be,Me,Fe){var tt=re*12,ct=re*3;return this.uint8[tt+0]=pe,this.uint8[tt+1]=be,this.float32[ct+1]=Me,this.float32[ct+2]=Fe,re},C}(Vi);Rl.prototype.bytesPerElement=12,Ne("StructArrayLayout2ub2f12",Rl);var Pf=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,re,pe,be)},C.prototype.emplace=function(re,pe,be,Me){var Fe=re*3;return this.uint16[Fe+0]=pe,this.uint16[Fe+1]=be,this.uint16[Fe+2]=Me,re},C}(Vi);Pf.prototype.bytesPerElement=6,Ne("StructArrayLayout3ui6",Pf);var bh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr,Mn,bn){var An=this.length;return this.resize(An+1),this.emplace(An,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr,Mn,bn)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An){var Rn=re*24,Xn=re*12,la=re*48;return this.int16[Rn+0]=pe,this.int16[Rn+1]=be,this.uint16[Rn+2]=Me,this.uint16[Rn+3]=Fe,this.uint32[Xn+2]=tt,this.uint32[Xn+3]=ct,this.uint32[Xn+4]=mt,this.uint16[Rn+10]=Dt,this.uint16[Rn+11]=Zt,this.uint16[Rn+12]=Ht,this.float32[Xn+7]=lr,this.float32[Xn+8]=Ir,this.uint8[la+36]=ln,this.uint8[la+37]=qr,this.uint8[la+38]=Mn,this.uint32[Xn+10]=bn,this.int16[Rn+22]=An,re},C}(Vi);bh.prototype.bytesPerElement=48,Ne("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",bh);var Qh=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Rn,Xn,la,ia,Oa,Ma,Ea,ai,Ia,Fa){var hi=this.length;return this.resize(hi+1),this.emplace(hi,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Rn,Xn,la,ia,Oa,Ma,Ea,ai,Ia,Fa)},C.prototype.emplace=function(re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Rn,Xn,la,ia,Oa,Ma,Ea,ai,Ia,Fa,hi){var ti=re*34,Li=re*17;return this.int16[ti+0]=pe,this.int16[ti+1]=be,this.int16[ti+2]=Me,this.int16[ti+3]=Fe,this.int16[ti+4]=tt,this.int16[ti+5]=ct,this.int16[ti+6]=mt,this.int16[ti+7]=Dt,this.uint16[ti+8]=Zt,this.uint16[ti+9]=Ht,this.uint16[ti+10]=lr,this.uint16[ti+11]=Ir,this.uint16[ti+12]=ln,this.uint16[ti+13]=qr,this.uint16[ti+14]=Mn,this.uint16[ti+15]=bn,this.uint16[ti+16]=An,this.uint16[ti+17]=Rn,this.uint16[ti+18]=Xn,this.uint16[ti+19]=la,this.uint16[ti+20]=ia,this.uint16[ti+21]=Oa,this.uint16[ti+22]=Ma,this.uint32[Li+12]=Ea,this.float32[Li+13]=ai,this.float32[Li+14]=Ia,this.float32[Li+15]=Fa,this.float32[Li+16]=hi,re},C}(Vi);Qh.prototype.bytesPerElement=68,Ne("StructArrayLayout8i15ui1ul4f68",Qh);var Ic=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re){var pe=this.length;return this.resize(pe+1),this.emplace(pe,re)},C.prototype.emplace=function(re,pe){var be=re*1;return this.float32[be+0]=pe,re},C}(Vi);Ic.prototype.bytesPerElement=4,Ne("StructArrayLayout1f4",Ic);var up=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,re,pe,be)},C.prototype.emplace=function(re,pe,be,Me){var Fe=re*3;return this.int16[Fe+0]=pe,this.int16[Fe+1]=be,this.int16[Fe+2]=Me,re},C}(Vi);up.prototype.bytesPerElement=6,Ne("StructArrayLayout3i6",up);var ec=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be){var Me=this.length;return this.resize(Me+1),this.emplace(Me,re,pe,be)},C.prototype.emplace=function(re,pe,be,Me){var Fe=re*2,tt=re*4;return this.uint32[Fe+0]=pe,this.uint16[tt+2]=be,this.uint16[tt+3]=Me,re},C}(Vi);ec.prototype.bytesPerElement=8,Ne("StructArrayLayout1ul2ui8",ec);var _h=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe){var be=this.length;return this.resize(be+1),this.emplace(be,re,pe)},C.prototype.emplace=function(re,pe,be){var Me=re*2;return this.uint16[Me+0]=pe,this.uint16[Me+1]=be,re},C}(Vi);_h.prototype.bytesPerElement=4,Ne("StructArrayLayout2ui4",_h);var zc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re){var pe=this.length;return this.resize(pe+1),this.emplace(pe,re)},C.prototype.emplace=function(re,pe){var be=re*1;return this.uint16[be+0]=pe,re},C}(Vi);zc.prototype.bytesPerElement=2,Ne("StructArrayLayout1ui2",zc);var tc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe){var be=this.length;return this.resize(be+1),this.emplace(be,re,pe)},C.prototype.emplace=function(re,pe,be){var Me=re*2;return this.float32[Me+0]=pe,this.float32[Me+1]=be,re},C}(Vi);tc.prototype.bytesPerElement=8,Ne("StructArrayLayout2f8",tc);var fp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},C.prototype.emplaceBack=function(re,pe,be,Me){var Fe=this.length;return this.resize(Fe+1),this.emplace(Fe,re,pe,be,Me)},C.prototype.emplace=function(re,pe,be,Me,Fe){var tt=re*4;return this.float32[tt+0]=pe,this.float32[tt+1]=be,this.float32[tt+2]=Me,this.float32[tt+3]=Fe,re},C}(Vi);fp.prototype.bytesPerElement=16,Ne("StructArrayLayout4f16",fp);var $d=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var V={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return V.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},V.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},V.x1.get=function(){return this._structArray.int16[this._pos2+2]},V.y1.get=function(){return this._structArray.int16[this._pos2+3]},V.x2.get=function(){return this._structArray.int16[this._pos2+4]},V.y2.get=function(){return this._structArray.int16[this._pos2+5]},V.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},V.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},V.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},V.anchorPoint.get=function(){return new f(this.anchorPointX,this.anchorPointY)},Object.defineProperties(C.prototype,V),C}($i);$d.prototype.size=20;var rc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new $d(this,re)},C}(xh);Ne("CollisionBoxArray",rc);var cp=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var V={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return V.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},V.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},V.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},V.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},V.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},V.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},V.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},V.segment.get=function(){return this._structArray.uint16[this._pos2+10]},V.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},V.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},V.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},V.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},V.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},V.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},V.placedOrientation.set=function(re){this._structArray.uint8[this._pos1+37]=re},V.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},V.hidden.set=function(re){this._structArray.uint8[this._pos1+38]=re},V.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},V.crossTileID.set=function(re){this._structArray.uint32[this._pos4+10]=re},V.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(C.prototype,V),C}($i);cp.prototype.size=48;var Fc=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new cp(this,re)},C}(bh);Ne("PlacedSymbolArray",Fc);var qd=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var V={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return V.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},V.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},V.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},V.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},V.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},V.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},V.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},V.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},V.key.get=function(){return this._structArray.uint16[this._pos2+8]},V.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},V.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},V.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},V.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},V.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},V.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},V.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},V.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},V.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},V.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},V.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},V.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},V.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},V.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},V.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},V.crossTileID.set=function(re){this._structArray.uint32[this._pos4+12]=re},V.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},V.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},V.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},V.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(C.prototype,V),C}($i);qd.prototype.size=68;var e0=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new qd(this,re)},C}(Qh);Ne("SymbolInstanceArray",e0);var Bu=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getoffsetX=function(re){return this.float32[re*1+0]},C}(Ic);Ne("GlyphOffsetArray",Bu);var t0=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.getx=function(re){return this.int16[re*3+0]},C.prototype.gety=function(re){return this.int16[re*3+1]},C.prototype.gettileUnitDistanceFromAnchor=function(re){return this.int16[re*3+2]},C}(up);Ne("SymbolLineVertexArray",t0);var r0=function(E){function C(){E.apply(this,arguments)}E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C;var V={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return V.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},V.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},V.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(C.prototype,V),C}($i);r0.prototype.size=8;var hp=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.get=function(re){return new r0(this,re)},C}(ec);Ne("FeatureIndexArray",hp);var n0=Zo([{name:"a_pos",components:2,type:"Int16"}],4),ve=n0.members,X=function(C){C===void 0&&(C=[]),this.segments=C};X.prototype.prepareSegment=function(C,V,re,pe){var be=this.segments[this.segments.length-1];return C>X.MAX_VERTEX_ARRAY_LENGTH&&U("Max vertices per segment is "+X.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+C),(!be||be.vertexLength+C>X.MAX_VERTEX_ARRAY_LENGTH||be.sortKey!==pe)&&(be={vertexOffset:V.length,primitiveOffset:re.length,vertexLength:0,primitiveLength:0},pe!==void 0&&(be.sortKey=pe),this.segments.push(be)),be},X.prototype.get=function(){return this.segments},X.prototype.destroy=function(){for(var C=0,V=this.segments;C<V.length;C+=1){var re=V[C];for(var pe in re.vaos)re.vaos[pe].destroy()}},X.simpleSegment=function(C,V,re,pe){return new X([{vertexOffset:C,primitiveOffset:V,vertexLength:re,primitiveLength:pe,vaos:{},sortKey:0}])},X.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ne("SegmentVector",X);function de(E,C){return E=p(Math.floor(E),0,255),C=p(Math.floor(C),0,255),256*E+C}var Q=Zo([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),ge=i(function(E){function C(V,re){var pe,be,Me,Fe,tt,ct,mt,Dt;for(pe=V.length&3,be=V.length-pe,Me=re,tt=3432918353,ct=461845907,Dt=0;Dt<be;)mt=V.charCodeAt(Dt)&255|(V.charCodeAt(++Dt)&255)<<8|(V.charCodeAt(++Dt)&255)<<16|(V.charCodeAt(++Dt)&255)<<24,++Dt,mt=(mt&65535)*tt+(((mt>>>16)*tt&65535)<<16)&4294967295,mt=mt<<15|mt>>>17,mt=(mt&65535)*ct+(((mt>>>16)*ct&65535)<<16)&4294967295,Me^=mt,Me=Me<<13|Me>>>19,Fe=(Me&65535)*5+(((Me>>>16)*5&65535)<<16)&4294967295,Me=(Fe&65535)+27492+(((Fe>>>16)+58964&65535)<<16);switch(mt=0,pe){case 3:mt^=(V.charCodeAt(Dt+2)&255)<<16;case 2:mt^=(V.charCodeAt(Dt+1)&255)<<8;case 1:mt^=V.charCodeAt(Dt)&255,mt=(mt&65535)*tt+(((mt>>>16)*tt&65535)<<16)&4294967295,mt=mt<<15|mt>>>17,mt=(mt&65535)*ct+(((mt>>>16)*ct&65535)<<16)&4294967295,Me^=mt}return Me^=V.length,Me^=Me>>>16,Me=(Me&65535)*2246822507+(((Me>>>16)*2246822507&65535)<<16)&4294967295,Me^=Me>>>13,Me=(Me&65535)*3266489909+(((Me>>>16)*3266489909&65535)<<16)&4294967295,Me^=Me>>>16,Me>>>0}E.exports=C}),Ee=i(function(E){function C(V,re){for(var pe=V.length,be=re^pe,Me=0,Fe;pe>=4;)Fe=V.charCodeAt(Me)&255|(V.charCodeAt(++Me)&255)<<8|(V.charCodeAt(++Me)&255)<<16|(V.charCodeAt(++Me)&255)<<24,Fe=(Fe&65535)*1540483477+(((Fe>>>16)*1540483477&65535)<<16),Fe^=Fe>>>24,Fe=(Fe&65535)*1540483477+(((Fe>>>16)*1540483477&65535)<<16),be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)^Fe,pe-=4,++Me;switch(pe){case 3:be^=(V.charCodeAt(Me+2)&255)<<16;case 2:be^=(V.charCodeAt(Me+1)&255)<<8;case 1:be^=V.charCodeAt(Me)&255,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16)}return be^=be>>>13,be=(be&65535)*1540483477+(((be>>>16)*1540483477&65535)<<16),be^=be>>>15,be>>>0}E.exports=C}),Pe=ge,Ze=ge,ft=Ee;Pe.murmur3=Ze,Pe.murmur2=ft;var At=function(){this.ids=[],this.positions=[],this.indexed=!1};At.prototype.add=function(C,V,re,pe){this.ids.push($t(C)),this.positions.push(V,re,pe)},At.prototype.getPositions=function(C){for(var V=$t(C),re=0,pe=this.ids.length-1;re<pe;){var be=re+pe>>1;this.ids[be]>=V?pe=be:re=be+1}for(var Me=[];this.ids[re]===V;){var Fe=this.positions[3*re],tt=this.positions[3*re+1],ct=this.positions[3*re+2];Me.push({index:Fe,start:tt,end:ct}),re++}return Me},At.serialize=function(C,V){var re=new Float64Array(C.ids),pe=new Uint32Array(C.positions);return ir(re,pe,0,re.length-1),V&&V.push(re.buffer,pe.buffer),{ids:re,positions:pe}},At.deserialize=function(C){var V=new At;return V.ids=C.ids,V.positions=C.positions,V.indexed=!0,V};var Vt=Math.pow(2,53)-1;function $t(E){var C=+E;return!isNaN(C)&&C<=Vt?C:Pe(String(E))}function ir(E,C,V,re){for(;V<re;){for(var pe=E[V+re>>1],be=V-1,Me=re+1;;){do be++;while(E[be]<pe);do Me--;while(E[Me]>pe);if(be>=Me)break;Sr(E,be,Me),Sr(C,3*be,3*Me),Sr(C,3*be+1,3*Me+1),Sr(C,3*be+2,3*Me+2)}Me-V<re-Me?(ir(E,C,V,Me),V=Me+1):(ir(E,C,Me+1,re),re=Me)}}function Sr(E,C,V){var re=E[C];E[C]=E[V],E[V]=re}Ne("FeaturePositionMap",At);var Br=function(C,V){this.gl=C.gl,this.location=V},Vr=function(E){function C(V,re){E.call(this,V,re),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){this.current!==re&&(this.current=re,this.gl.uniform1i(this.location,re))},C}(Br),Nr=function(E){function C(V,re){E.call(this,V,re),this.current=0}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){this.current!==re&&(this.current=re,this.gl.uniform1f(this.location,re))},C}(Br),Kr=function(E){function C(V,re){E.call(this,V,re),this.current=[0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re[0]!==this.current[0]||re[1]!==this.current[1])&&(this.current=re,this.gl.uniform2f(this.location,re[0],re[1]))},C}(Br),hn=function(E){function C(V,re){E.call(this,V,re),this.current=[0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re[0]!==this.current[0]||re[1]!==this.current[1]||re[2]!==this.current[2])&&(this.current=re,this.gl.uniform3f(this.location,re[0],re[1],re[2]))},C}(Br),Sn=function(E){function C(V,re){E.call(this,V,re),this.current=[0,0,0,0]}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re[0]!==this.current[0]||re[1]!==this.current[1]||re[2]!==this.current[2]||re[3]!==this.current[3])&&(this.current=re,this.gl.uniform4f(this.location,re[0],re[1],re[2],re[3]))},C}(Br),Nn=function(E){function C(V,re){E.call(this,V,re),this.current=di.transparent}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){(re.r!==this.current.r||re.g!==this.current.g||re.b!==this.current.b||re.a!==this.current.a)&&(this.current=re,this.gl.uniform4f(this.location,re.r,re.g,re.b,re.a))},C}(Br),Qn=new Float32Array(16),ta=function(E){function C(V,re){E.call(this,V,re),this.current=Qn}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.set=function(re){if(re[12]!==this.current[12]||re[0]!==this.current[0]){this.current=re,this.gl.uniformMatrix4fv(this.location,!1,re);return}for(var pe=1;pe<16;pe++)if(re[pe]!==this.current[pe]){this.current=re,this.gl.uniformMatrix4fv(this.location,!1,re);break}},C}(Br);function qn(E){return[de(255*E.r,255*E.g),de(255*E.b,255*E.a)]}var pa=function(C,V,re){this.value=C,this.uniformNames=V.map(function(pe){return"u_"+pe}),this.type=re};pa.prototype.setUniform=function(C,V,re){C.set(re.constantOr(this.value))},pa.prototype.getBinding=function(C,V,re){return this.type==="color"?new Nn(C,V):new Nr(C,V)};var Ta=function(C,V){this.uniformNames=V.map(function(re){return"u_"+re}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Ta.prototype.setConstantPatternPositions=function(C,V){this.pixelRatioFrom=V.pixelRatio,this.pixelRatioTo=C.pixelRatio,this.patternFrom=V.tlbr,this.patternTo=C.tlbr},Ta.prototype.setUniform=function(C,V,re,pe){var be=pe==="u_pattern_to"?this.patternTo:pe==="u_pattern_from"?this.patternFrom:pe==="u_pixel_ratio_to"?this.pixelRatioTo:pe==="u_pixel_ratio_from"?this.pixelRatioFrom:null;be&&C.set(be)},Ta.prototype.getBinding=function(C,V,re){return re.substr(0,9)==="u_pattern"?new Sn(C,V):new Nr(C,V)};var _a=function(C,V,re,pe){this.expression=C,this.type=re,this.maxValue=0,this.paintVertexAttributes=V.map(function(be){return{name:"a_"+be,type:"Float32",components:re==="color"?2:1,offset:0}}),this.paintVertexArray=new pe};_a.prototype.populatePaintArray=function(C,V,re,pe,be){var Me=this.paintVertexArray.length,Fe=this.expression.evaluate(new fi(0),V,{},pe,[],be);this.paintVertexArray.resize(C),this._setPaintValue(Me,C,Fe)},_a.prototype.updatePaintArray=function(C,V,re,pe){var be=this.expression.evaluate({zoom:0},re,pe);this._setPaintValue(C,V,be)},_a.prototype._setPaintValue=function(C,V,re){if(this.type==="color")for(var pe=qn(re),be=C;be<V;be++)this.paintVertexArray.emplace(be,pe[0],pe[1]);else{for(var Me=C;Me<V;Me++)this.paintVertexArray.emplace(Me,re);this.maxValue=Math.max(this.maxValue,Math.abs(re))}},_a.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},_a.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ka=function(C,V,re,pe,be,Me){this.expression=C,this.uniformNames=V.map(function(Fe){return"u_"+Fe+"_t"}),this.type=re,this.useIntegerZoom=pe,this.zoom=be,this.maxValue=0,this.paintVertexAttributes=V.map(function(Fe){return{name:"a_"+Fe,type:"Float32",components:re==="color"?4:2,offset:0}}),this.paintVertexArray=new Me};ka.prototype.populatePaintArray=function(C,V,re,pe,be){var Me=this.expression.evaluate(new fi(this.zoom),V,{},pe,[],be),Fe=this.expression.evaluate(new fi(this.zoom+1),V,{},pe,[],be),tt=this.paintVertexArray.length;this.paintVertexArray.resize(C),this._setPaintValue(tt,C,Me,Fe)},ka.prototype.updatePaintArray=function(C,V,re,pe){var be=this.expression.evaluate({zoom:this.zoom},re,pe),Me=this.expression.evaluate({zoom:this.zoom+1},re,pe);this._setPaintValue(C,V,be,Me)},ka.prototype._setPaintValue=function(C,V,re,pe){if(this.type==="color")for(var be=qn(re),Me=qn(pe),Fe=C;Fe<V;Fe++)this.paintVertexArray.emplace(Fe,be[0],be[1],Me[0],Me[1]);else{for(var tt=C;tt<V;tt++)this.paintVertexArray.emplace(tt,re,pe);this.maxValue=Math.max(this.maxValue,Math.abs(re),Math.abs(pe))}},ka.prototype.upload=function(C){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=C.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ka.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ka.prototype.setUniform=function(C,V){var re=this.useIntegerZoom?Math.floor(V.zoom):V.zoom,pe=p(this.expression.interpolationFactor(re,this.zoom,this.zoom+1),0,1);C.set(pe)},ka.prototype.getBinding=function(C,V,re){return new Nr(C,V)};var Da=function(C,V,re,pe,be,Me){this.expression=C,this.type=V,this.useIntegerZoom=re,this.zoom=pe,this.layerId=Me,this.zoomInPaintVertexArray=new be,this.zoomOutPaintVertexArray=new be};Da.prototype.populatePaintArray=function(C,V,re){var pe=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(C),this.zoomOutPaintVertexArray.resize(C),this._setPaintValues(pe,C,V.patterns&&V.patterns[this.layerId],re)},Da.prototype.updatePaintArray=function(C,V,re,pe,be){this._setPaintValues(C,V,re.patterns&&re.patterns[this.layerId],be)},Da.prototype._setPaintValues=function(C,V,re,pe){if(!(!pe||!re)){var be=re.min,Me=re.mid,Fe=re.max,tt=pe[be],ct=pe[Me],mt=pe[Fe];if(!(!tt||!ct||!mt))for(var Dt=C;Dt<V;Dt++)this.zoomInPaintVertexArray.emplace(Dt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],tt.tl[0],tt.tl[1],tt.br[0],tt.br[1],ct.pixelRatio,tt.pixelRatio),this.zoomOutPaintVertexArray.emplace(Dt,ct.tl[0],ct.tl[1],ct.br[0],ct.br[1],mt.tl[0],mt.tl[1],mt.br[0],mt.br[1],ct.pixelRatio,mt.pixelRatio)}},Da.prototype.upload=function(C){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=C.createVertexBuffer(this.zoomInPaintVertexArray,Q.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=C.createVertexBuffer(this.zoomOutPaintVertexArray,Q.members,this.expression.isStateDependent))},Da.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Wa=function(C,V,re,pe){this.binders={},this.layoutAttributes=pe,this._buffers=[];var be=[];for(var Me in C.paint._values)if(!!re(Me)){var Fe=C.paint.get(Me);if(!(!(Fe instanceof Zi)||!ui(Fe.property.specification))){var tt=Di(Me,C.type),ct=Fe.value,mt=Fe.property.specification.type,Dt=Fe.property.useIntegerZoom,Zt=Fe.property.specification["property-type"],Ht=Zt==="cross-faded"||Zt==="cross-faded-data-driven";if(ct.kind==="constant")this.binders[Me]=Ht?new Ta(ct.value,tt):new pa(ct.value,tt,mt),be.push("/u_"+Me);else if(ct.kind==="source"||Ht){var lr=gi(Me,mt,"source");this.binders[Me]=Ht?new Da(ct,mt,Dt,V,lr,C.id):new _a(ct,tt,mt,lr),be.push("/a_"+Me)}else{var Ir=gi(Me,mt,"composite");this.binders[Me]=new ka(ct,tt,mt,Dt,V,Ir),be.push("/z_"+Me)}}}this.cacheKey=be.sort().join("")};Wa.prototype.getMaxValue=function(C){var V=this.binders[C];return V instanceof _a||V instanceof ka?V.maxValue:0},Wa.prototype.populatePaintArrays=function(C,V,re,pe,be){for(var Me in this.binders){var Fe=this.binders[Me];(Fe instanceof _a||Fe instanceof ka||Fe instanceof Da)&&Fe.populatePaintArray(C,V,re,pe,be)}},Wa.prototype.setConstantPatternPositions=function(C,V){for(var re in this.binders){var pe=this.binders[re];pe instanceof Ta&&pe.setConstantPatternPositions(C,V)}},Wa.prototype.updatePaintArrays=function(C,V,re,pe,be){var Me=!1;for(var Fe in C)for(var tt=V.getPositions(Fe),ct=0,mt=tt;ct<mt.length;ct+=1){var Dt=mt[ct],Zt=re.feature(Dt.index);for(var Ht in this.binders){var lr=this.binders[Ht];if((lr instanceof _a||lr instanceof ka||lr instanceof Da)&&lr.expression.isStateDependent===!0){var Ir=pe.paint.get(Ht);lr.expression=Ir.value,lr.updatePaintArray(Dt.start,Dt.end,Zt,C[Fe],be),Me=!0}}}return Me},Wa.prototype.defines=function(){var C=[];for(var V in this.binders){var re=this.binders[V];(re instanceof pa||re instanceof Ta)&&C.push.apply(C,re.uniformNames.map(function(pe){return"#define HAS_UNIFORM_"+pe}))}return C},Wa.prototype.getPaintVertexBuffers=function(){return this._buffers},Wa.prototype.getUniforms=function(C,V){var re=[];for(var pe in this.binders){var be=this.binders[pe];if(be instanceof pa||be instanceof Ta||be instanceof ka)for(var Me=0,Fe=be.uniformNames;Me<Fe.length;Me+=1){var tt=Fe[Me];if(V[tt]){var ct=be.getBinding(C,V[tt],tt);re.push({name:tt,property:pe,binding:ct})}}}return re},Wa.prototype.setUniforms=function(C,V,re,pe){for(var be=0,Me=V;be<Me.length;be+=1){var Fe=Me[be],tt=Fe.name,ct=Fe.property,mt=Fe.binding;this.binders[ct].setUniform(mt,pe,re.get(ct),tt)}},Wa.prototype.updatePaintBuffers=function(C){this._buffers=[];for(var V in this.binders){var re=this.binders[V];if(C&&re instanceof Da){var pe=C.fromScale===2?re.zoomInPaintVertexBuffer:re.zoomOutPaintVertexBuffer;pe&&this._buffers.push(pe)}else(re instanceof _a||re instanceof ka)&&re.paintVertexBuffer&&this._buffers.push(re.paintVertexBuffer)}},Wa.prototype.upload=function(C){for(var V in this.binders){var re=this.binders[V];(re instanceof _a||re instanceof ka||re instanceof Da)&&re.upload(C)}this.updatePaintBuffers()},Wa.prototype.destroy=function(){for(var C in this.binders){var V=this.binders[C];(V instanceof _a||V instanceof ka||V instanceof Da)&&V.destroy()}};var oi=function(C,V,re,pe){pe===void 0&&(pe=function(){return!0}),this.programConfigurations={};for(var be=0,Me=V;be<Me.length;be+=1){var Fe=Me[be];this.programConfigurations[Fe.id]=new Wa(Fe,re,pe,C)}this.needsUpload=!1,this._featureMap=new At,this._bufferOffset=0};oi.prototype.populatePaintArrays=function(C,V,re,pe,be,Me){for(var Fe in this.programConfigurations)this.programConfigurations[Fe].populatePaintArrays(C,V,pe,be,Me);V.id!==void 0&&this._featureMap.add(V.id,re,this._bufferOffset,C),this._bufferOffset=C,this.needsUpload=!0},oi.prototype.updatePaintArrays=function(C,V,re,pe){for(var be=0,Me=re;be<Me.length;be+=1){var Fe=Me[be];this.needsUpload=this.programConfigurations[Fe.id].updatePaintArrays(C,this._featureMap,V,Fe,pe)||this.needsUpload}},oi.prototype.get=function(C){return this.programConfigurations[C]},oi.prototype.upload=function(C){if(!!this.needsUpload){for(var V in this.programConfigurations)this.programConfigurations[V].upload(C);this.needsUpload=!1}},oi.prototype.destroy=function(){for(var C in this.programConfigurations)this.programConfigurations[C].destroy()};function Di(E,C){var V={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]};return V[E]||[E.replace(C+"-","").replace(/-/g,"_")]}function ci(E){var C={"line-pattern":{source:hl,composite:hl},"fill-pattern":{source:hl,composite:hl},"fill-extrusion-pattern":{source:hl,composite:hl}};return C[E]}function gi(E,C,V){var re={color:{source:tc,composite:fp},number:{source:Ic,composite:tc}},pe=ci(E);return pe&&pe[V]||re[C][V]}Ne("ConstantBinder",pa),Ne("CrossFadedConstantBinder",Ta),Ne("SourceExpressionBinder",_a),Ne("CrossFadedCompositeBinder",Da),Ne("CompositeExpressionBinder",ka),Ne("ProgramConfiguration",Wa,{omit:["_buffers"]}),Ne("ProgramConfigurationSet",oi);var Ha=8192;function Ii(E){return{min:-1*Math.pow(2,E-1),max:Math.pow(2,E-1)-1}}var Bi=Ii(15);function Gi(E){for(var C=Ha/E.extent,V=E.loadGeometry(),re=0;re<V.length;re++)for(var pe=V[re],be=0;be<pe.length;be++){var Me=pe[be];Me.x=Math.round(Me.x*C),Me.y=Math.round(Me.y*C),(Me.x<Bi.min||Me.x>Bi.max||Me.y<Bi.min||Me.y>Bi.max)&&(U("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Me.x=p(Me.x,Bi.min,Bi.max),Me.y=p(Me.y,Bi.min,Bi.max))}return V}function Ai(E,C,V,re,pe){E.emplaceBack(C*2+(re+1)/2,V*2+(pe+1)/2)}var qi=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new yh,this.indexArray=new Pf,this.segments=new X,this.programConfigurations=new oi(ve,C.layers,C.zoom),this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};qi.prototype.populate=function(C,V,re){var pe=this.layers[0],be=[],Me=null;pe.type==="circle"&&(Me=pe.layout.get("circle-sort-key"));for(var Fe=0,tt=C;Fe<tt.length;Fe+=1){var ct=tt[Fe],mt=ct.feature,Dt=ct.id,Zt=ct.index,Ht=ct.sourceLayerIndex,lr=this.layers[0]._featureFilter.needGeometry,Ir={type:mt.type,id:Dt,properties:mt.properties,geometry:lr?Gi(mt):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),Ir,re)){lr||(Ir.geometry=Gi(mt));var ln=Me?Me.evaluate(Ir,{},re):void 0,qr={id:Dt,properties:mt.properties,type:mt.type,sourceLayerIndex:Ht,index:Zt,geometry:Ir.geometry,patterns:{},sortKey:ln};be.push(qr)}}Me&&be.sort(function(Ma,Ea){return Ma.sortKey-Ea.sortKey});for(var Mn=0,bn=be;Mn<bn.length;Mn+=1){var An=bn[Mn],Rn=An,Xn=Rn.geometry,la=Rn.index,ia=Rn.sourceLayerIndex,Oa=C[la].feature;this.addFeature(An,Xn,la,re),V.featureIndex.insert(Oa,Xn,la,ia,this.index)}},qi.prototype.update=function(C,V,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,V,this.stateDependentLayers,re)},qi.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},qi.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},qi.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ve),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},qi.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},qi.prototype.addFeature=function(C,V,re,pe){for(var be=0,Me=V;be<Me.length;be+=1)for(var Fe=Me[be],tt=0,ct=Fe;tt<ct.length;tt+=1){var mt=ct[tt],Dt=mt.x,Zt=mt.y;if(!(Dt<0||Dt>=Ha||Zt<0||Zt>=Ha)){var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,C.sortKey),lr=Ht.vertexLength;Ai(this.layoutVertexArray,Dt,Zt,-1,-1),Ai(this.layoutVertexArray,Dt,Zt,1,-1),Ai(this.layoutVertexArray,Dt,Zt,1,1),Ai(this.layoutVertexArray,Dt,Zt,-1,1),this.indexArray.emplaceBack(lr,lr+1,lr+2),this.indexArray.emplaceBack(lr,lr+3,lr+2),Ht.vertexLength+=4,Ht.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,{},pe)},Ne("CircleBucket",qi,{omit:["layers"]});function li(E,C){for(var V=0;V<E.length;V++)if(vl(C,E[V]))return!0;for(var re=0;re<C.length;re++)if(vl(E,C[re]))return!0;return!!yu(E,C)}function Mi(E,C,V){return!!(vl(E,C)||rf(C,E,V))}function Ro(E,C){if(E.length===1)return nf(C,E[0]);for(var V=0;V<C.length;V++)for(var re=C[V],pe=0;pe<re.length;pe++)if(vl(E,re[pe]))return!0;for(var be=0;be<E.length;be++)if(nf(C,E[be]))return!0;for(var Me=0;Me<C.length;Me++)if(yu(E,C[Me]))return!0;return!1}function ts(E,C,V){for(var re=0;re<C.length;re++){var pe=C[re];if(E.length>=3){for(var be=0;be<pe.length;be++)if(vl(E,pe[be]))return!0}if(mu(E,pe,V))return!0}return!1}function mu(E,C,V){if(E.length>1){if(yu(E,C))return!0;for(var re=0;re<C.length;re++)if(rf(C[re],E,V))return!0}for(var pe=0;pe<E.length;pe++)if(rf(E[pe],C,V))return!0;return!1}function yu(E,C){if(E.length===0||C.length===0)return!1;for(var V=0;V<E.length-1;V++)for(var re=E[V],pe=E[V+1],be=0;be<C.length-1;be++){var Me=C[be],Fe=C[be+1];if(tf(re,pe,Me,Fe))return!0}return!1}function tf(E,C,V,re){return B(E,V,re)!==B(C,V,re)&&B(E,C,V)!==B(E,C,re)}function rf(E,C,V){var re=V*V;if(C.length===1)return E.distSqr(C[0])<re;for(var pe=1;pe<C.length;pe++){var be=C[pe-1],Me=C[pe];if(Rf(E,be,Me)<re)return!0}return!1}function Rf(E,C,V){var re=C.distSqr(V);if(re===0)return E.distSqr(C);var pe=((E.x-C.x)*(V.x-C.x)+(E.y-C.y)*(V.y-C.y))/re;return pe<0?E.distSqr(C):pe>1?E.distSqr(V):E.distSqr(V.sub(C)._mult(pe)._add(C))}function nf(E,C){for(var V=!1,re,pe,be,Me=0;Me<E.length;Me++){re=E[Me];for(var Fe=0,tt=re.length-1;Fe<re.length;tt=Fe++)pe=re[Fe],be=re[tt],pe.y>C.y!=be.y>C.y&&C.x<(be.x-pe.x)*(C.y-pe.y)/(be.y-pe.y)+pe.x&&(V=!V)}return V}function vl(E,C){for(var V=!1,re=0,pe=E.length-1;re<E.length;pe=re++){var be=E[re],Me=E[pe];be.y>C.y!=Me.y>C.y&&C.x<(Me.x-be.x)*(C.y-be.y)/(Me.y-be.y)+be.x&&(V=!V)}return V}function nc(E,C,V,re,pe){for(var be=0,Me=E;be<Me.length;be+=1){var Fe=Me[be];if(C<=Fe.x&&V<=Fe.y&&re>=Fe.x&&pe>=Fe.y)return!0}var tt=[new f(C,V),new f(C,pe),new f(re,pe),new f(re,V)];if(E.length>2)for(var ct=0,mt=tt;ct<mt.length;ct+=1){var Dt=mt[ct];if(vl(E,Dt))return!0}for(var Zt=0;Zt<E.length-1;Zt++){var Ht=E[Zt],lr=E[Zt+1];if(Hs(Ht,lr,tt))return!0}return!1}function Hs(E,C,V){var re=V[0],pe=V[2];if(E.x<re.x&&C.x<re.x||E.x>pe.x&&C.x>pe.x||E.y<re.y&&C.y<re.y||E.y>pe.y&&C.y>pe.y)return!1;var be=B(E,C,V[0]);return be!==B(E,C,V[1])||be!==B(E,C,V[2])||be!==B(E,C,V[3])}function Ql(E,C,V){var re=C.paint.get(E).value;return re.kind==="constant"?re.value:V.programConfigurations.get(C.id).getMaxValue(E)}function af(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function Uu(E,C,V,re,pe){if(!C[0]&&!C[1])return E;var be=f.convert(C)._mult(pe);V==="viewport"&&be._rotate(-re);for(var Me=[],Fe=0;Fe<E.length;Fe++){var tt=E[Fe];Me.push(tt.sub(be))}return Me}var of=new Qi({"circle-sort-key":new Ka(cr.layout_circle["circle-sort-key"])}),$h=new Qi({"circle-radius":new Ka(cr.paint_circle["circle-radius"]),"circle-color":new Ka(cr.paint_circle["circle-color"]),"circle-blur":new Ka(cr.paint_circle["circle-blur"]),"circle-opacity":new Ka(cr.paint_circle["circle-opacity"]),"circle-translate":new Na(cr.paint_circle["circle-translate"]),"circle-translate-anchor":new Na(cr.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Na(cr.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Na(cr.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Ka(cr.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Ka(cr.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Ka(cr.paint_circle["circle-stroke-opacity"])}),yc={paint:$h,layout:of},Rs=typeof Float32Array!="undefined"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var E=arguments,C=0,V=arguments.length;V--;)C+=E[V]*E[V];return Math.sqrt(C)});function wh(){var E=new Rs(4);return Rs!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E}function $s(E,C,V){var re=C[0],pe=C[1],be=C[2],Me=C[3],Fe=Math.sin(V),tt=Math.cos(V);return E[0]=re*tt+be*Fe,E[1]=pe*tt+Me*Fe,E[2]=re*-Fe+be*tt,E[3]=pe*-Fe+Me*tt,E}function Th(){var E=new Rs(9);return Rs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E}function qh(E,C){var V=Math.sin(C),re=Math.cos(C);return E[0]=re,E[1]=V,E[2]=0,E[3]=-V,E[4]=re,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E}function ev(){var E=new Rs(16);return Rs!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E}function a0(E){var C=new Rs(16);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C[3]=E[3],C[4]=E[4],C[5]=E[5],C[6]=E[6],C[7]=E[7],C[8]=E[8],C[9]=E[9],C[10]=E[10],C[11]=E[11],C[12]=E[12],C[13]=E[13],C[14]=E[14],C[15]=E[15],C}function tv(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function Oc(E,C){var V=C[0],re=C[1],pe=C[2],be=C[3],Me=C[4],Fe=C[5],tt=C[6],ct=C[7],mt=C[8],Dt=C[9],Zt=C[10],Ht=C[11],lr=C[12],Ir=C[13],ln=C[14],qr=C[15],Mn=V*Fe-re*Me,bn=V*tt-pe*Me,An=V*ct-be*Me,Rn=re*tt-pe*Fe,Xn=re*ct-be*Fe,la=pe*ct-be*tt,ia=mt*Ir-Dt*lr,Oa=mt*ln-Zt*lr,Ma=mt*qr-Ht*lr,Ea=Dt*ln-Zt*Ir,ai=Dt*qr-Ht*Ir,Ia=Zt*qr-Ht*ln,Fa=Mn*Ia-bn*ai+An*Ea+Rn*Ma-Xn*Oa+la*ia;return Fa?(Fa=1/Fa,E[0]=(Fe*Ia-tt*ai+ct*Ea)*Fa,E[1]=(pe*ai-re*Ia-be*Ea)*Fa,E[2]=(Ir*la-ln*Xn+qr*Rn)*Fa,E[3]=(Zt*Xn-Dt*la-Ht*Rn)*Fa,E[4]=(tt*Ma-Me*Ia-ct*Oa)*Fa,E[5]=(V*Ia-pe*Ma+be*Oa)*Fa,E[6]=(ln*An-lr*la-qr*bn)*Fa,E[7]=(mt*la-Zt*An+Ht*bn)*Fa,E[8]=(Me*ai-Fe*Ma+ct*ia)*Fa,E[9]=(re*Ma-V*ai-be*ia)*Fa,E[10]=(lr*Xn-Ir*An+qr*Mn)*Fa,E[11]=(Dt*An-mt*Xn-Ht*Mn)*Fa,E[12]=(Fe*Oa-Me*Ea-tt*ia)*Fa,E[13]=(V*Ea-re*Oa+pe*ia)*Fa,E[14]=(Ir*bn-lr*Rn-ln*Mn)*Fa,E[15]=(mt*Rn-Dt*bn+Zt*Mn)*Fa,E):null}function Nc(E,C,V){var re=C[0],pe=C[1],be=C[2],Me=C[3],Fe=C[4],tt=C[5],ct=C[6],mt=C[7],Dt=C[8],Zt=C[9],Ht=C[10],lr=C[11],Ir=C[12],ln=C[13],qr=C[14],Mn=C[15],bn=V[0],An=V[1],Rn=V[2],Xn=V[3];return E[0]=bn*re+An*Fe+Rn*Dt+Xn*Ir,E[1]=bn*pe+An*tt+Rn*Zt+Xn*ln,E[2]=bn*be+An*ct+Rn*Ht+Xn*qr,E[3]=bn*Me+An*mt+Rn*lr+Xn*Mn,bn=V[4],An=V[5],Rn=V[6],Xn=V[7],E[4]=bn*re+An*Fe+Rn*Dt+Xn*Ir,E[5]=bn*pe+An*tt+Rn*Zt+Xn*ln,E[6]=bn*be+An*ct+Rn*Ht+Xn*qr,E[7]=bn*Me+An*mt+Rn*lr+Xn*Mn,bn=V[8],An=V[9],Rn=V[10],Xn=V[11],E[8]=bn*re+An*Fe+Rn*Dt+Xn*Ir,E[9]=bn*pe+An*tt+Rn*Zt+Xn*ln,E[10]=bn*be+An*ct+Rn*Ht+Xn*qr,E[11]=bn*Me+An*mt+Rn*lr+Xn*Mn,bn=V[12],An=V[13],Rn=V[14],Xn=V[15],E[12]=bn*re+An*Fe+Rn*Dt+Xn*Ir,E[13]=bn*pe+An*tt+Rn*Zt+Xn*ln,E[14]=bn*be+An*ct+Rn*Ht+Xn*qr,E[15]=bn*Me+An*mt+Rn*lr+Xn*Mn,E}function Vo(E,C,V){var re=V[0],pe=V[1],be=V[2],Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr;return C===E?(E[12]=C[0]*re+C[4]*pe+C[8]*be+C[12],E[13]=C[1]*re+C[5]*pe+C[9]*be+C[13],E[14]=C[2]*re+C[6]*pe+C[10]*be+C[14],E[15]=C[3]*re+C[7]*pe+C[11]*be+C[15]):(Me=C[0],Fe=C[1],tt=C[2],ct=C[3],mt=C[4],Dt=C[5],Zt=C[6],Ht=C[7],lr=C[8],Ir=C[9],ln=C[10],qr=C[11],E[0]=Me,E[1]=Fe,E[2]=tt,E[3]=ct,E[4]=mt,E[5]=Dt,E[6]=Zt,E[7]=Ht,E[8]=lr,E[9]=Ir,E[10]=ln,E[11]=qr,E[12]=Me*re+mt*pe+lr*be+C[12],E[13]=Fe*re+Dt*pe+Ir*be+C[13],E[14]=tt*re+Zt*pe+ln*be+C[14],E[15]=ct*re+Ht*pe+qr*be+C[15]),E}function Dl(E,C,V){var re=V[0],pe=V[1],be=V[2];return E[0]=C[0]*re,E[1]=C[1]*re,E[2]=C[2]*re,E[3]=C[3]*re,E[4]=C[4]*pe,E[5]=C[5]*pe,E[6]=C[6]*pe,E[7]=C[7]*pe,E[8]=C[8]*be,E[9]=C[9]*be,E[10]=C[10]*be,E[11]=C[11]*be,E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15],E}function Il(E,C,V){var re=Math.sin(V),pe=Math.cos(V),be=C[4],Me=C[5],Fe=C[6],tt=C[7],ct=C[8],mt=C[9],Dt=C[10],Zt=C[11];return C!==E&&(E[0]=C[0],E[1]=C[1],E[2]=C[2],E[3]=C[3],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[4]=be*pe+ct*re,E[5]=Me*pe+mt*re,E[6]=Fe*pe+Dt*re,E[7]=tt*pe+Zt*re,E[8]=ct*pe-be*re,E[9]=mt*pe-Me*re,E[10]=Dt*pe-Fe*re,E[11]=Zt*pe-tt*re,E}function rv(E,C,V){var re=Math.sin(V),pe=Math.cos(V),be=C[0],Me=C[1],Fe=C[2],tt=C[3],ct=C[4],mt=C[5],Dt=C[6],Zt=C[7];return C!==E&&(E[8]=C[8],E[9]=C[9],E[10]=C[10],E[11]=C[11],E[12]=C[12],E[13]=C[13],E[14]=C[14],E[15]=C[15]),E[0]=be*pe+ct*re,E[1]=Me*pe+mt*re,E[2]=Fe*pe+Dt*re,E[3]=tt*pe+Zt*re,E[4]=ct*pe-be*re,E[5]=mt*pe-Me*re,E[6]=Dt*pe-Fe*re,E[7]=Zt*pe-tt*re,E}function vp(E,C,V,re,pe){var be=1/Math.tan(C/2),Me;return E[0]=be/V,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=be,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,pe!=null&&pe!==1/0?(Me=1/(re-pe),E[10]=(pe+re)*Me,E[14]=2*pe*re*Me):(E[10]=-1,E[14]=-2*re),E}function vm(E,C,V,re,pe,be,Me){var Fe=1/(C-V),tt=1/(re-pe),ct=1/(be-Me);return E[0]=-2*Fe,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*tt,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*ct,E[11]=0,E[12]=(C+V)*Fe,E[13]=(pe+re)*tt,E[14]=(Me+be)*ct,E[15]=1,E}var pm=Nc;function Ah(){var E=new Rs(3);return Rs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0),E}function dm(E){var C=new Rs(3);return C[0]=E[0],C[1]=E[1],C[2]=E[2],C}function nv(E,C,V){return E[0]=C[0]+V[0],E[1]=C[1]+V[1],E[2]=C[2]+V[2],E}function gm(E,C,V){return E[0]=C[0]-V[0],E[1]=C[1]-V[1],E[2]=C[2]-V[2],E}function mm(E,C,V){return E[0]=C[0]*V,E[1]=C[1]*V,E[2]=C[2]*V,E}function pp(E,C){var V=C[0],re=C[1],pe=C[2],be=V*V+re*re+pe*pe;return be>0&&(be=1/Math.sqrt(be)),E[0]=C[0]*be,E[1]=C[1]*be,E[2]=C[2]*be,E}function _5(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]}function w5(E,C,V){var re=C[0],pe=C[1],be=C[2],Me=V[0],Fe=V[1],tt=V[2];return E[0]=pe*tt-be*Fe,E[1]=be*Me-re*tt,E[2]=re*Fe-pe*Me,E}function T5(E,C,V){var re=C[0],pe=C[1],be=C[2];return E[0]=re*V[0]+pe*V[3]+be*V[6],E[1]=re*V[1]+pe*V[4]+be*V[7],E[2]=re*V[2]+pe*V[5]+be*V[8],E}var A5=gm;(function(){var E=Ah();return function(C,V,re,pe,be,Me){var Fe,tt;for(V||(V=3),re||(re=0),pe?tt=Math.min(pe*V+re,C.length):tt=C.length,Fe=re;Fe<tt;Fe+=V)E[0]=C[Fe],E[1]=C[Fe+1],E[2]=C[Fe+2],be(E,E,Me),C[Fe]=E[0],C[Fe+1]=E[1],C[Fe+2]=E[2];return C}})();function M5(){var E=new Rs(4);return Rs!=Float32Array&&(E[0]=0,E[1]=0,E[2]=0,E[3]=0),E}function S5(E,C,V){return E[0]=C[0]*V,E[1]=C[1]*V,E[2]=C[2]*V,E[3]=C[3]*V,E}function k5(E,C){return E[0]*C[0]+E[1]*C[1]+E[2]*C[2]+E[3]*C[3]}function i0(E,C,V){var re=C[0],pe=C[1],be=C[2],Me=C[3];return E[0]=V[0]*re+V[4]*pe+V[8]*be+V[12]*Me,E[1]=V[1]*re+V[5]*pe+V[9]*be+V[13]*Me,E[2]=V[2]*re+V[6]*pe+V[10]*be+V[14]*Me,E[3]=V[3]*re+V[7]*pe+V[11]*be+V[15]*Me,E}(function(){var E=M5();return function(C,V,re,pe,be,Me){var Fe,tt;for(V||(V=4),re||(re=0),pe?tt=Math.min(pe*V+re,C.length):tt=C.length,Fe=re;Fe<tt;Fe+=V)E[0]=C[Fe],E[1]=C[Fe+1],E[2]=C[Fe+2],E[3]=C[Fe+3],be(E,E,Me),C[Fe]=E[0],C[Fe+1]=E[1],C[Fe+2]=E[2],C[Fe+3]=E[3];return C}})();function E5(){var E=new Rs(2);return Rs!=Float32Array&&(E[0]=0,E[1]=0),E}function C5(E){var C=E[0],V=E[1];return C*C+V*V}var L5=C5;(function(){var E=E5();return function(C,V,re,pe,be,Me){var Fe,tt;for(V||(V=2),re||(re=0),pe?tt=Math.min(pe*V+re,C.length):tt=C.length,Fe=re;Fe<tt;Fe+=V)E[0]=C[Fe],E[1]=C[Fe+1],be(E,E,Me),C[Fe]=E[0],C[Fe+1]=E[1];return C}})();var P5=function(E){function C(V){E.call(this,V,yc)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(re){return new qi(re)},C.prototype.queryRadius=function(re){var pe=re;return Ql("circle-radius",this,pe)+Ql("circle-stroke-width",this,pe)+af(this.paint.get("circle-translate"))},C.prototype.queryIntersectsFeature=function(re,pe,be,Me,Fe,tt,ct,mt){for(var Dt=Uu(re,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),tt.angle,ct),Zt=this.paint.get("circle-radius").evaluate(pe,be),Ht=this.paint.get("circle-stroke-width").evaluate(pe,be),lr=Zt+Ht,Ir=this.paint.get("circle-pitch-alignment")==="map",ln=Ir?Dt:R5(Dt,mt),qr=Ir?lr*ct:lr,Mn=0,bn=Me;Mn<bn.length;Mn+=1)for(var An=bn[Mn],Rn=0,Xn=An;Rn<Xn.length;Rn+=1){var la=Xn[Rn],ia=Ir?la:Yx(la,mt),Oa=qr,Ma=i0([],[la.x,la.y,0,1],mt);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Oa*=Ma[3]/tt.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Oa*=tt.cameraToCenterDistance/Ma[3]),Mi(ln,ia,Oa))return!0}return!1},C}(Vs);function Yx(E,C){var V=i0([],[E.x,E.y,0,1],C);return new f(V[0]/V[3],V[1]/V[3])}function R5(E,C){return E.map(function(V){return Yx(V,C)})}var jx=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(qi);Ne("HeatmapBucket",jx,{omit:["layers"]});function ym(E,C,V,re){var pe=C.width,be=C.height;if(!re)re=new Uint8Array(pe*be*V);else if(re instanceof Uint8ClampedArray)re=new Uint8Array(re.buffer);else if(re.length!==pe*be*V)throw new RangeError("mismatched image size");return E.width=pe,E.height=be,E.data=re,E}function Xx(E,C,V){var re=C.width,pe=C.height;if(!(re===E.width&&pe===E.height)){var be=ym({},{width:re,height:pe},V);xm(E,be,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,re),height:Math.min(E.height,pe)},V),E.width=re,E.height=pe,E.data=be.data}}function xm(E,C,V,re,pe,be){if(pe.width===0||pe.height===0)return C;if(pe.width>E.width||pe.height>E.height||V.x>E.width-pe.width||V.y>E.height-pe.height)throw new RangeError("out of range source coordinates for image copy");if(pe.width>C.width||pe.height>C.height||re.x>C.width-pe.width||re.y>C.height-pe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Me=E.data,Fe=C.data,tt=0;tt<pe.height;tt++)for(var ct=((V.y+tt)*E.width+V.x)*be,mt=((re.y+tt)*C.width+re.x)*be,Dt=0;Dt<pe.width*be;Dt++)Fe[mt+Dt]=Me[ct+Dt];return C}var Mh=function(C,V){ym(this,C,1,V)};Mh.prototype.resize=function(C){Xx(this,C,1)},Mh.prototype.clone=function(){return new Mh({width:this.width,height:this.height},new Uint8Array(this.data))},Mh.copy=function(C,V,re,pe,be){xm(C,V,re,pe,be,1)};var zl=function(C,V){ym(this,C,4,V)};zl.prototype.resize=function(C){Xx(this,C,4)},zl.prototype.replace=function(C,V){V?this.data.set(C):C instanceof Uint8ClampedArray?this.data=new Uint8Array(C.buffer):this.data=C},zl.prototype.clone=function(){return new zl({width:this.width,height:this.height},new Uint8Array(this.data))},zl.copy=function(C,V,re,pe,be){xm(C,V,re,pe,be,4)},Ne("AlphaImage",Mh),Ne("RGBAImage",zl);var D5=new Qi({"heatmap-radius":new Ka(cr.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Ka(cr.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Na(cr.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Xo(cr.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Na(cr.paint_heatmap["heatmap-opacity"])}),I5={paint:D5};function Zx(E,C){for(var V=new Uint8Array(256*4),re={},pe=0,be=0;pe<256;pe++,be+=4){re[C]=pe/255;var Me=E.evaluate(re);V[be+0]=Math.floor(Me.r*255/Me.a),V[be+1]=Math.floor(Me.g*255/Me.a),V[be+2]=Math.floor(Me.b*255/Me.a),V[be+3]=Math.floor(Me.a*255)}return new zl({width:256,height:1},V)}var z5=function(E){function C(V){E.call(this,V,I5),this._updateColorRamp()}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(re){return new jx(re)},C.prototype._handleSpecialPaintPropertyUpdate=function(re){re==="heatmap-color"&&this._updateColorRamp()},C.prototype._updateColorRamp=function(){var re=this._transitionablePaint._values["heatmap-color"].value.expression;this.colorRamp=Zx(re,"heatmapDensity"),this.colorRampTexture=null},C.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},C}(Vs),F5=new Qi({"hillshade-illumination-direction":new Na(cr.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Na(cr.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Na(cr.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Na(cr.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Na(cr.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Na(cr.paint_hillshade["hillshade-accent-color"])}),O5={paint:F5},N5=function(E){function C(V){E.call(this,V,O5)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},C}(Vs),B5=Zo([{name:"a_pos",components:2,type:"Int16"}],4),Kx=B5.members,bm=o0,U5=o0;function o0(E,C,V){V=V||2;var re=C&&C.length,pe=re?C[0]*V:E.length,be=Jx(E,0,pe,V,!0),Me=[];if(!be||be.next===be.prev)return Me;var Fe,tt,ct,mt,Dt,Zt,Ht;if(re&&(be=Y5(E,C,be,V)),E.length>80*V){Fe=ct=E[0],tt=mt=E[1];for(var lr=V;lr<pe;lr+=V)Dt=E[lr],Zt=E[lr+1],Dt<Fe&&(Fe=Dt),Zt<tt&&(tt=Zt),Dt>ct&&(ct=Dt),Zt>mt&&(mt=Zt);Ht=Math.max(ct-Fe,mt-tt),Ht=Ht!==0?1/Ht:0}return dp(be,Me,V,Fe,tt,Ht),Me}function Jx(E,C,V,re,pe){var be,Me;if(pe===Tm(E,C,V,re)>0)for(be=C;be<V;be+=re)Me=qx(be,E[be],E[be+1],Me);else for(be=V-re;be>=C;be-=re)Me=qx(be,E[be],E[be+1],Me);return Me&&s0(Me,Me.next)&&(mp(Me),Me=Me.next),Me}function Bc(E,C){if(!E)return E;C||(C=E);var V=E,re;do if(re=!1,!V.steiner&&(s0(V,V.next)||rs(V.prev,V,V.next)===0)){if(mp(V),V=C=V.prev,V===V.next)break;re=!0}else V=V.next;while(re||V!==C);return C}function dp(E,C,V,re,pe,be,Me){if(!!E){!Me&&be&&J5(E,re,pe,be);for(var Fe=E,tt,ct;E.prev!==E.next;){if(tt=E.prev,ct=E.next,be?H5(E,re,pe,be):V5(E)){C.push(tt.i/V),C.push(E.i/V),C.push(ct.i/V),mp(E),E=ct.next,Fe=ct.next;continue}if(E=ct,E===Fe){Me?Me===1?(E=G5(Bc(E),C,V),dp(E,C,V,re,pe,be,2)):Me===2&&W5(E,C,V,re,pe,be):dp(Bc(E),C,V,re,pe,be,1);break}}}}function V5(E){var C=E.prev,V=E,re=E.next;if(rs(C,V,re)>=0)return!1;for(var pe=E.next.next;pe!==E.prev;){if(av(C.x,C.y,V.x,V.y,re.x,re.y,pe.x,pe.y)&&rs(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function H5(E,C,V,re){var pe=E.prev,be=E,Me=E.next;if(rs(pe,be,Me)>=0)return!1;for(var Fe=pe.x<be.x?pe.x<Me.x?pe.x:Me.x:be.x<Me.x?be.x:Me.x,tt=pe.y<be.y?pe.y<Me.y?pe.y:Me.y:be.y<Me.y?be.y:Me.y,ct=pe.x>be.x?pe.x>Me.x?pe.x:Me.x:be.x>Me.x?be.x:Me.x,mt=pe.y>be.y?pe.y>Me.y?pe.y:Me.y:be.y>Me.y?be.y:Me.y,Dt=_m(Fe,tt,C,V,re),Zt=_m(ct,mt,C,V,re),Ht=E.prevZ,lr=E.nextZ;Ht&&Ht.z>=Dt&&lr&&lr.z<=Zt;){if(Ht!==E.prev&&Ht!==E.next&&av(pe.x,pe.y,be.x,be.y,Me.x,Me.y,Ht.x,Ht.y)&&rs(Ht.prev,Ht,Ht.next)>=0||(Ht=Ht.prevZ,lr!==E.prev&&lr!==E.next&&av(pe.x,pe.y,be.x,be.y,Me.x,Me.y,lr.x,lr.y)&&rs(lr.prev,lr,lr.next)>=0))return!1;lr=lr.nextZ}for(;Ht&&Ht.z>=Dt;){if(Ht!==E.prev&&Ht!==E.next&&av(pe.x,pe.y,be.x,be.y,Me.x,Me.y,Ht.x,Ht.y)&&rs(Ht.prev,Ht,Ht.next)>=0)return!1;Ht=Ht.prevZ}for(;lr&&lr.z<=Zt;){if(lr!==E.prev&&lr!==E.next&&av(pe.x,pe.y,be.x,be.y,Me.x,Me.y,lr.x,lr.y)&&rs(lr.prev,lr,lr.next)>=0)return!1;lr=lr.nextZ}return!0}function G5(E,C,V){var re=E;do{var pe=re.prev,be=re.next.next;!s0(pe,be)&&Qx(pe,re,re.next,be)&&gp(pe,be)&&gp(be,pe)&&(C.push(pe.i/V),C.push(re.i/V),C.push(be.i/V),mp(re),mp(re.next),re=E=be),re=re.next}while(re!==E);return Bc(re)}function W5(E,C,V,re,pe,be){var Me=E;do{for(var Fe=Me.next.next;Fe!==Me.prev;){if(Me.i!==Fe.i&&q5(Me,Fe)){var tt=$x(Me,Fe);Me=Bc(Me,Me.next),tt=Bc(tt,tt.next),dp(Me,C,V,re,pe,be),dp(tt,C,V,re,pe,be);return}Fe=Fe.next}Me=Me.next}while(Me!==E)}function Y5(E,C,V,re){var pe=[],be,Me,Fe,tt,ct;for(be=0,Me=C.length;be<Me;be++)Fe=C[be]*re,tt=be<Me-1?C[be+1]*re:E.length,ct=Jx(E,Fe,tt,re,!1),ct===ct.next&&(ct.steiner=!0),pe.push($5(ct));for(pe.sort(j5),be=0;be<pe.length;be++)X5(pe[be],V),V=Bc(V,V.next);return V}function j5(E,C){return E.x-C.x}function X5(E,C){if(C=Z5(E,C),C){var V=$x(C,E);Bc(C,C.next),Bc(V,V.next)}}function Z5(E,C){var V=C,re=E.x,pe=E.y,be=-1/0,Me;do{if(pe<=V.y&&pe>=V.next.y&&V.next.y!==V.y){var Fe=V.x+(pe-V.y)*(V.next.x-V.x)/(V.next.y-V.y);if(Fe<=re&&Fe>be){if(be=Fe,Fe===re){if(pe===V.y)return V;if(pe===V.next.y)return V.next}Me=V.x<V.next.x?V:V.next}}V=V.next}while(V!==C);if(!Me)return null;if(re===be)return Me;var tt=Me,ct=Me.x,mt=Me.y,Dt=1/0,Zt;V=Me;do re>=V.x&&V.x>=ct&&re!==V.x&&av(pe<mt?re:be,pe,ct,mt,pe<mt?be:re,pe,V.x,V.y)&&(Zt=Math.abs(pe-V.y)/(re-V.x),gp(V,E)&&(Zt<Dt||Zt===Dt&&(V.x>Me.x||V.x===Me.x&&K5(Me,V)))&&(Me=V,Dt=Zt)),V=V.next;while(V!==tt);return Me}function K5(E,C){return rs(E.prev,E,C.prev)<0&&rs(C.next,E,E.next)<0}function J5(E,C,V,re){var pe=E;do pe.z===null&&(pe.z=_m(pe.x,pe.y,C,V,re)),pe.prevZ=pe.prev,pe.nextZ=pe.next,pe=pe.next;while(pe!==E);pe.prevZ.nextZ=null,pe.prevZ=null,Q5(pe)}function Q5(E){var C,V,re,pe,be,Me,Fe,tt,ct=1;do{for(V=E,E=null,be=null,Me=0;V;){for(Me++,re=V,Fe=0,C=0;C<ct&&(Fe++,re=re.nextZ,!!re);C++);for(tt=ct;Fe>0||tt>0&&re;)Fe!==0&&(tt===0||!re||V.z<=re.z)?(pe=V,V=V.nextZ,Fe--):(pe=re,re=re.nextZ,tt--),be?be.nextZ=pe:E=pe,pe.prevZ=be,be=pe;V=re}be.nextZ=null,ct*=2}while(Me>1);return E}function _m(E,C,V,re,pe){return E=32767*(E-V)*pe,C=32767*(C-re)*pe,E=(E|E<<8)&16711935,E=(E|E<<4)&252645135,E=(E|E<<2)&858993459,E=(E|E<<1)&1431655765,C=(C|C<<8)&16711935,C=(C|C<<4)&252645135,C=(C|C<<2)&858993459,C=(C|C<<1)&1431655765,E|C<<1}function $5(E){var C=E,V=E;do(C.x<V.x||C.x===V.x&&C.y<V.y)&&(V=C),C=C.next;while(C!==E);return V}function av(E,C,V,re,pe,be,Me,Fe){return(pe-Me)*(C-Fe)-(E-Me)*(be-Fe)>=0&&(E-Me)*(re-Fe)-(V-Me)*(C-Fe)>=0&&(V-Me)*(be-Fe)-(pe-Me)*(re-Fe)>=0}function q5(E,C){return E.next.i!==C.i&&E.prev.i!==C.i&&!eA(E,C)&&(gp(E,C)&&gp(C,E)&&tA(E,C)&&(rs(E.prev,E,C.prev)||rs(E,C.prev,C))||s0(E,C)&&rs(E.prev,E,E.next)>0&&rs(C.prev,C,C.next)>0)}function rs(E,C,V){return(C.y-E.y)*(V.x-C.x)-(C.x-E.x)*(V.y-C.y)}function s0(E,C){return E.x===C.x&&E.y===C.y}function Qx(E,C,V,re){var pe=u0(rs(E,C,V)),be=u0(rs(E,C,re)),Me=u0(rs(V,re,E)),Fe=u0(rs(V,re,C));return!!(pe!==be&&Me!==Fe||pe===0&&l0(E,V,C)||be===0&&l0(E,re,C)||Me===0&&l0(V,E,re)||Fe===0&&l0(V,C,re))}function l0(E,C,V){return C.x<=Math.max(E.x,V.x)&&C.x>=Math.min(E.x,V.x)&&C.y<=Math.max(E.y,V.y)&&C.y>=Math.min(E.y,V.y)}function u0(E){return E>0?1:E<0?-1:0}function eA(E,C){var V=E;do{if(V.i!==E.i&&V.next.i!==E.i&&V.i!==C.i&&V.next.i!==C.i&&Qx(V,V.next,E,C))return!0;V=V.next}while(V!==E);return!1}function gp(E,C){return rs(E.prev,E,E.next)<0?rs(E,C,E.next)>=0&&rs(E,E.prev,C)>=0:rs(E,C,E.prev)<0||rs(E,E.next,C)<0}function tA(E,C){var V=E,re=!1,pe=(E.x+C.x)/2,be=(E.y+C.y)/2;do V.y>be!=V.next.y>be&&V.next.y!==V.y&&pe<(V.next.x-V.x)*(be-V.y)/(V.next.y-V.y)+V.x&&(re=!re),V=V.next;while(V!==E);return re}function $x(E,C){var V=new wm(E.i,E.x,E.y),re=new wm(C.i,C.x,C.y),pe=E.next,be=C.prev;return E.next=C,C.prev=E,V.next=pe,pe.prev=V,re.next=V,V.prev=re,be.next=re,re.prev=be,re}function qx(E,C,V,re){var pe=new wm(E,C,V);return re?(pe.next=re.next,pe.prev=re,re.next.prev=pe,re.next=pe):(pe.prev=pe,pe.next=pe),pe}function mp(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function wm(E,C,V){this.i=E,this.x=C,this.y=V,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}o0.deviation=function(E,C,V,re){var pe=C&&C.length,be=pe?C[0]*V:E.length,Me=Math.abs(Tm(E,0,be,V));if(pe)for(var Fe=0,tt=C.length;Fe<tt;Fe++){var ct=C[Fe]*V,mt=Fe<tt-1?C[Fe+1]*V:E.length;Me-=Math.abs(Tm(E,ct,mt,V))}var Dt=0;for(Fe=0;Fe<re.length;Fe+=3){var Zt=re[Fe]*V,Ht=re[Fe+1]*V,lr=re[Fe+2]*V;Dt+=Math.abs((E[Zt]-E[lr])*(E[Ht+1]-E[Zt+1])-(E[Zt]-E[Ht])*(E[lr+1]-E[Zt+1]))}return Me===0&&Dt===0?0:Math.abs((Dt-Me)/Me)};function Tm(E,C,V,re){for(var pe=0,be=C,Me=V-re;be<V;be+=re)pe+=(E[Me]-E[be])*(E[be+1]+E[Me+1]),Me=be;return pe}o0.flatten=function(E){for(var C=E[0][0].length,V={vertices:[],holes:[],dimensions:C},re=0,pe=0;pe<E.length;pe++){for(var be=0;be<E[pe].length;be++)for(var Me=0;Me<C;Me++)V.vertices.push(E[pe][be][Me]);pe>0&&(re+=E[pe-1].length,V.holes.push(re))}return V},bm.default=U5;function rA(E,C,V,re,pe){eb(E,C,V||0,re||E.length-1,pe||nA)}function eb(E,C,V,re,pe){for(;re>V;){if(re-V>600){var be=re-V+1,Me=C-V+1,Fe=Math.log(be),tt=.5*Math.exp(2*Fe/3),ct=.5*Math.sqrt(Fe*tt*(be-tt)/be)*(Me-be/2<0?-1:1),mt=Math.max(V,Math.floor(C-Me*tt/be+ct)),Dt=Math.min(re,Math.floor(C+(be-Me)*tt/be+ct));eb(E,C,mt,Dt,pe)}var Zt=E[C],Ht=V,lr=re;for(yp(E,V,C),pe(E[re],Zt)>0&&yp(E,V,re);Ht<lr;){for(yp(E,Ht,lr),Ht++,lr--;pe(E[Ht],Zt)<0;)Ht++;for(;pe(E[lr],Zt)>0;)lr--}pe(E[V],Zt)===0?yp(E,V,lr):(lr++,yp(E,lr,re)),lr<=C&&(V=lr+1),C<=lr&&(re=lr-1)}}function yp(E,C,V){var re=E[C];E[C]=E[V],E[V]=re}function nA(E,C){return E<C?-1:E>C?1:0}function Am(E,C){var V=E.length;if(V<=1)return[E];for(var re=[],pe,be,Me=0;Me<V;Me++){var Fe=j(E[Me]);Fe!==0&&(E[Me].area=Math.abs(Fe),be===void 0&&(be=Fe<0),be===Fe<0?(pe&&re.push(pe),pe=[E[Me]]):pe.push(E[Me]))}if(pe&&re.push(pe),C>1)for(var tt=0;tt<re.length;tt++)re[tt].length<=C||(rA(re[tt],C,1,re[tt].length-1,aA),re[tt]=re[tt].slice(0,C));return re}function aA(E,C){return C.area-E.area}function Mm(E,C,V){for(var re=V.patternDependencies,pe=!1,be=0,Me=C;be<Me.length;be+=1){var Fe=Me[be],tt=Fe.paint.get(E+"-pattern");tt.isConstant()||(pe=!0);var ct=tt.constantOr(null);ct&&(pe=!0,re[ct.to]=!0,re[ct.from]=!0)}return pe}function Sm(E,C,V,re,pe){for(var be=pe.patternDependencies,Me=0,Fe=C;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt.paint.get(E+"-pattern"),mt=ct.value;if(mt.kind!=="constant"){var Dt=mt.evaluate({zoom:re-1},V,{},pe.availableImages),Zt=mt.evaluate({zoom:re},V,{},pe.availableImages),Ht=mt.evaluate({zoom:re+1},V,{},pe.availableImages);Dt=Dt&&Dt.name?Dt.name:Dt,Zt=Zt&&Zt.name?Zt.name:Zt,Ht=Ht&&Ht.name?Ht.name:Ht,be[Dt]=!0,be[Zt]=!0,be[Ht]=!0,V.patterns[tt.id]={min:Dt,mid:Zt,max:Ht}}}return V}var iA=500,Df=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new yh,this.indexArray=new Pf,this.indexArray2=new _h,this.programConfigurations=new oi(Kx,C.layers,C.zoom),this.segments=new X,this.segments2=new X,this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};Df.prototype.populate=function(C,V,re){this.hasPattern=Mm("fill",this.layers,V);for(var pe=this.layers[0].layout.get("fill-sort-key"),be=[],Me=0,Fe=C;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt.feature,mt=tt.id,Dt=tt.index,Zt=tt.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,lr={type:ct.type,id:mt,properties:ct.properties,geometry:Ht?Gi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),lr,re)){Ht||(lr.geometry=Gi(ct));var Ir=pe?pe.evaluate(lr,{},re,V.availableImages):void 0,ln={id:mt,properties:ct.properties,type:ct.type,sourceLayerIndex:Zt,index:Dt,geometry:lr.geometry,patterns:{},sortKey:Ir};be.push(ln)}}pe&&be.sort(function(Ma,Ea){return Ma.sortKey-Ea.sortKey});for(var qr=0,Mn=be;qr<Mn.length;qr+=1){var bn=Mn[qr],An=bn,Rn=An.geometry,Xn=An.index,la=An.sourceLayerIndex;if(this.hasPattern){var ia=Sm("fill",this.layers,bn,this.zoom,V);this.patternFeatures.push(ia)}else this.addFeature(bn,Rn,Xn,re,{});var Oa=C[Xn].feature;V.featureIndex.insert(Oa,Rn,Xn,la,this.index)}},Df.prototype.update=function(C,V,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,V,this.stateDependentLayers,re)},Df.prototype.addFeatures=function(C,V,re){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Me=be[pe];this.addFeature(Me,Me.geometry,Me.index,V,re)}},Df.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Df.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Df.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Kx),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.indexBuffer2=C.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(C),this.uploaded=!0},Df.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Df.prototype.addFeature=function(C,V,re,pe,be){for(var Me=0,Fe=Am(V,iA);Me<Fe.length;Me+=1){for(var tt=Fe[Me],ct=0,mt=0,Dt=tt;mt<Dt.length;mt+=1){var Zt=Dt[mt];ct+=Zt.length}for(var Ht=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray),lr=Ht.vertexLength,Ir=[],ln=[],qr=0,Mn=tt;qr<Mn.length;qr+=1){var bn=Mn[qr];if(bn.length!==0){bn!==tt[0]&&ln.push(Ir.length/2);var An=this.segments2.prepareSegment(bn.length,this.layoutVertexArray,this.indexArray2),Rn=An.vertexLength;this.layoutVertexArray.emplaceBack(bn[0].x,bn[0].y),this.indexArray2.emplaceBack(Rn+bn.length-1,Rn),Ir.push(bn[0].x),Ir.push(bn[0].y);for(var Xn=1;Xn<bn.length;Xn++)this.layoutVertexArray.emplaceBack(bn[Xn].x,bn[Xn].y),this.indexArray2.emplaceBack(Rn+Xn-1,Rn+Xn),Ir.push(bn[Xn].x),Ir.push(bn[Xn].y);An.vertexLength+=bn.length,An.primitiveLength+=bn.length}}for(var la=bm(Ir,ln),ia=0;ia<la.length;ia+=3)this.indexArray.emplaceBack(lr+la[ia],lr+la[ia+1],lr+la[ia+2]);Ht.vertexLength+=ct,Ht.primitiveLength+=la.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,be,pe)},Ne("FillBucket",Df,{omit:["layers","patternFeatures"]});var oA=new Qi({"fill-sort-key":new Ka(cr.layout_fill["fill-sort-key"])}),sA=new Qi({"fill-antialias":new Na(cr.paint_fill["fill-antialias"]),"fill-opacity":new Ka(cr.paint_fill["fill-opacity"]),"fill-color":new Ka(cr.paint_fill["fill-color"]),"fill-outline-color":new Ka(cr.paint_fill["fill-outline-color"]),"fill-translate":new Na(cr.paint_fill["fill-translate"]),"fill-translate-anchor":new Na(cr.paint_fill["fill-translate-anchor"]),"fill-pattern":new Lo(cr.paint_fill["fill-pattern"])}),lA={paint:sA,layout:oA},uA=function(E){function C(V){E.call(this,V,lA)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(re,pe){E.prototype.recalculate.call(this,re,pe);var be=this.paint._values["fill-outline-color"];be.value.kind==="constant"&&be.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},C.prototype.createBucket=function(re){return new Df(re)},C.prototype.queryRadius=function(){return af(this.paint.get("fill-translate"))},C.prototype.queryIntersectsFeature=function(re,pe,be,Me,Fe,tt,ct){var mt=Uu(re,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),tt.angle,ct);return Ro(mt,Me)},C.prototype.isTileClipped=function(){return!0},C}(Vs),fA=Zo([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),tb=fA.members,rb=iv;function iv(E,C,V,re,pe){this.properties={},this.extent=V,this.type=0,this._pbf=E,this._geometry=-1,this._keys=re,this._values=pe,E.readFields(cA,this,C)}function cA(E,C,V){E==1?C.id=V.readVarint():E==2?hA(V,C):E==3?C.type=V.readVarint():E==4&&(C._geometry=V.pos)}function hA(E,C){for(var V=E.readVarint()+E.pos;E.pos<V;){var re=C._keys[E.readVarint()],pe=C._values[E.readVarint()];C.properties[re]=pe}}iv.types=["Unknown","Point","LineString","Polygon"],iv.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,V=1,re=0,pe=0,be=0,Me=[],Fe;E.pos<C;){if(re<=0){var tt=E.readVarint();V=tt&7,re=tt>>3}if(re--,V===1||V===2)pe+=E.readSVarint(),be+=E.readSVarint(),V===1&&(Fe&&Me.push(Fe),Fe=[]),Fe.push(new f(pe,be));else if(V===7)Fe&&Fe.push(Fe[0].clone());else throw new Error("unknown command "+V)}return Fe&&Me.push(Fe),Me},iv.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var C=E.readVarint()+E.pos,V=1,re=0,pe=0,be=0,Me=1/0,Fe=-1/0,tt=1/0,ct=-1/0;E.pos<C;){if(re<=0){var mt=E.readVarint();V=mt&7,re=mt>>3}if(re--,V===1||V===2)pe+=E.readSVarint(),be+=E.readSVarint(),pe<Me&&(Me=pe),pe>Fe&&(Fe=pe),be<tt&&(tt=be),be>ct&&(ct=be);else if(V!==7)throw new Error("unknown command "+V)}return[Me,tt,Fe,ct]},iv.prototype.toGeoJSON=function(E,C,V){var re=this.extent*Math.pow(2,V),pe=this.extent*E,be=this.extent*C,Me=this.loadGeometry(),Fe=iv.types[this.type],tt,ct;function mt(Ht){for(var lr=0;lr<Ht.length;lr++){var Ir=Ht[lr],ln=180-(Ir.y+be)*360/re;Ht[lr]=[(Ir.x+pe)*360/re-180,360/Math.PI*Math.atan(Math.exp(ln*Math.PI/180))-90]}}switch(this.type){case 1:var Dt=[];for(tt=0;tt<Me.length;tt++)Dt[tt]=Me[tt][0];Me=Dt,mt(Me);break;case 2:for(tt=0;tt<Me.length;tt++)mt(Me[tt]);break;case 3:for(Me=vA(Me),tt=0;tt<Me.length;tt++)for(ct=0;ct<Me[tt].length;ct++)mt(Me[tt][ct]);break}Me.length===1?Me=Me[0]:Fe="Multi"+Fe;var Zt={type:"Feature",geometry:{type:Fe,coordinates:Me},properties:this.properties};return"id"in this&&(Zt.id=this.id),Zt};function vA(E){var C=E.length;if(C<=1)return[E];for(var V=[],re,pe,be=0;be<C;be++){var Me=pA(E[be]);Me!==0&&(pe===void 0&&(pe=Me<0),pe===Me<0?(re&&V.push(re),re=[E[be]]):re.push(E[be]))}return re&&V.push(re),V}function pA(E){for(var C=0,V=0,re=E.length,pe=re-1,be,Me;V<re;pe=V++)be=E[V],Me=E[pe],C+=(Me.x-be.x)*(be.y+Me.y);return C}var nb=ab;function ab(E,C){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(dA,this,C),this.length=this._features.length}function dA(E,C,V){E===15?C.version=V.readVarint():E===1?C.name=V.readString():E===5?C.extent=V.readVarint():E===2?C._features.push(V.pos):E===3?C._keys.push(V.readString()):E===4&&C._values.push(gA(V))}function gA(E){for(var C=null,V=E.readVarint()+E.pos;E.pos<V;){var re=E.readVarint()>>3;C=re===1?E.readString():re===2?E.readFloat():re===3?E.readDouble():re===4?E.readVarint64():re===5?E.readVarint():re===6?E.readSVarint():re===7?E.readBoolean():null}return C}ab.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var C=this._pbf.readVarint()+this._pbf.pos;return new rb(this._pbf,C,this.extent,this._keys,this._values)};var mA=yA;function yA(E,C){this.layers=E.readFields(xA,{},C)}function xA(E,C,V){if(E===3){var re=new nb(V,V.readVarint()+V.pos);re.length&&(C[re.name]=re)}}var bA=mA,_A=rb,wA=nb,ov={VectorTile:bA,VectorTileFeature:_A,VectorTileLayer:wA},TA=ov.VectorTileFeature.types,AA=500,km=Math.pow(2,13);function xp(E,C,V,re,pe,be,Me,Fe){E.emplaceBack(C,V,Math.floor(re*km)*2+Me,pe*km*2,be*km*2,Math.round(Fe))}var If=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=C.index,this.hasPattern=!1,this.layoutVertexArray=new Dc,this.indexArray=new Pf,this.programConfigurations=new oi(tb,C.layers,C.zoom),this.segments=new X,this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};If.prototype.populate=function(C,V,re){this.features=[],this.hasPattern=Mm("fill-extrusion",this.layers,V);for(var pe=0,be=C;pe<be.length;pe+=1){var Me=be[pe],Fe=Me.feature,tt=Me.id,ct=Me.index,mt=Me.sourceLayerIndex,Dt=this.layers[0]._featureFilter.needGeometry,Zt={type:Fe.type,id:tt,properties:Fe.properties,geometry:Dt?Gi(Fe):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),Zt,re)){var Ht={id:tt,sourceLayerIndex:mt,index:ct,geometry:Dt?Zt.geometry:Gi(Fe),properties:Fe.properties,type:Fe.type,patterns:{}};typeof Fe.id!="undefined"&&(Ht.id=Fe.id),this.hasPattern?this.features.push(Sm("fill-extrusion",this.layers,Ht,this.zoom,V)):this.addFeature(Ht,Ht.geometry,ct,re,{}),V.featureIndex.insert(Fe,Ht.geometry,ct,mt,this.index,!0)}}},If.prototype.addFeatures=function(C,V,re){for(var pe=0,be=this.features;pe<be.length;pe+=1){var Me=be[pe],Fe=Me.geometry;this.addFeature(Me,Fe,Me.index,V,re)}},If.prototype.update=function(C,V,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,V,this.stateDependentLayers,re)},If.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},If.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},If.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,tb),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},If.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},If.prototype.addFeature=function(C,V,re,pe,be){for(var Me=0,Fe=Am(V,AA);Me<Fe.length;Me+=1){for(var tt=Fe[Me],ct=0,mt=0,Dt=tt;mt<Dt.length;mt+=1){var Zt=Dt[mt];ct+=Zt.length}for(var Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),lr=0,Ir=tt;lr<Ir.length;lr+=1){var ln=Ir[lr];if(ln.length!==0&&!SA(ln))for(var qr=0,Mn=0;Mn<ln.length;Mn++){var bn=ln[Mn];if(Mn>=1){var An=ln[Mn-1];if(!MA(bn,An)){Ht.vertexLength+4>X.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var Rn=bn.sub(An)._perp()._unit(),Xn=An.dist(bn);qr+Xn>32768&&(qr=0),xp(this.layoutVertexArray,bn.x,bn.y,Rn.x,Rn.y,0,0,qr),xp(this.layoutVertexArray,bn.x,bn.y,Rn.x,Rn.y,0,1,qr),qr+=Xn,xp(this.layoutVertexArray,An.x,An.y,Rn.x,Rn.y,0,0,qr),xp(this.layoutVertexArray,An.x,An.y,Rn.x,Rn.y,0,1,qr);var la=Ht.vertexLength;this.indexArray.emplaceBack(la,la+2,la+1),this.indexArray.emplaceBack(la+1,la+2,la+3),Ht.vertexLength+=4,Ht.primitiveLength+=2}}}}if(Ht.vertexLength+ct>X.MAX_VERTEX_ARRAY_LENGTH&&(Ht=this.segments.prepareSegment(ct,this.layoutVertexArray,this.indexArray)),TA[C.type]==="Polygon"){for(var ia=[],Oa=[],Ma=Ht.vertexLength,Ea=0,ai=tt;Ea<ai.length;Ea+=1){var Ia=ai[Ea];if(Ia.length!==0){Ia!==tt[0]&&Oa.push(ia.length/2);for(var Fa=0;Fa<Ia.length;Fa++){var hi=Ia[Fa];xp(this.layoutVertexArray,hi.x,hi.y,0,0,1,1,0),ia.push(hi.x),ia.push(hi.y)}}}for(var ti=bm(ia,Oa),Li=0;Li<ti.length;Li+=3)this.indexArray.emplaceBack(Ma+ti[Li],Ma+ti[Li+2],Ma+ti[Li+1]);Ht.primitiveLength+=ti.length/3,Ht.vertexLength+=ct}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,be,pe)},Ne("FillExtrusionBucket",If,{omit:["layers","features"]});function MA(E,C){return E.x===C.x&&(E.x<0||E.x>Ha)||E.y===C.y&&(E.y<0||E.y>Ha)}function SA(E){return E.every(function(C){return C.x<0})||E.every(function(C){return C.x>Ha})||E.every(function(C){return C.y<0})||E.every(function(C){return C.y>Ha})}var kA=new Qi({"fill-extrusion-opacity":new Na(cr["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Ka(cr["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Na(cr["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Na(cr["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Lo(cr["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Ka(cr["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Ka(cr["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Na(cr["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])}),EA={paint:kA},CA=function(E){function C(V){E.call(this,V,EA)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.createBucket=function(re){return new If(re)},C.prototype.queryRadius=function(){return af(this.paint.get("fill-extrusion-translate"))},C.prototype.is3D=function(){return!0},C.prototype.queryIntersectsFeature=function(re,pe,be,Me,Fe,tt,ct,mt){var Dt=Uu(re,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),tt.angle,ct),Zt=this.paint.get("fill-extrusion-height").evaluate(pe,be),Ht=this.paint.get("fill-extrusion-base").evaluate(pe,be),lr=RA(Dt,mt,tt,0),Ir=PA(Me,Ht,Zt,mt),ln=Ir[0],qr=Ir[1];return LA(ln,qr,lr)},C}(Vs);function bp(E,C){return E.x*C.x+E.y*C.y}function ib(E,C){if(E.length===1){for(var V=0,re=C[V++],pe;!pe||re.equals(pe);)if(pe=C[V++],!pe)return 1/0;for(;V<C.length;V++){var be=C[V],Me=E[0],Fe=pe.sub(re),tt=be.sub(re),ct=Me.sub(re),mt=bp(Fe,Fe),Dt=bp(Fe,tt),Zt=bp(tt,tt),Ht=bp(ct,Fe),lr=bp(ct,tt),Ir=mt*Zt-Dt*Dt,ln=(Zt*Ht-Dt*lr)/Ir,qr=(mt*lr-Dt*Ht)/Ir,Mn=1-ln-qr,bn=re.z*Mn+pe.z*ln+be.z*qr;if(isFinite(bn))return bn}return 1/0}else{for(var An=1/0,Rn=0,Xn=C;Rn<Xn.length;Rn+=1){var la=Xn[Rn];An=Math.min(An,la.z)}return An}}function LA(E,C,V){var re=1/0;Ro(V,C)&&(re=ib(V,C[0]));for(var pe=0;pe<C.length;pe++)for(var be=C[pe],Me=E[pe],Fe=0;Fe<be.length-1;Fe++){var tt=be[Fe],ct=be[Fe+1],mt=Me[Fe],Dt=Me[Fe+1],Zt=[tt,ct,Dt,mt,tt];li(V,Zt)&&(re=Math.min(re,ib(V,Zt)))}return re===1/0?!1:re}function PA(E,C,V,re){for(var pe=[],be=[],Me=re[8]*C,Fe=re[9]*C,tt=re[10]*C,ct=re[11]*C,mt=re[8]*V,Dt=re[9]*V,Zt=re[10]*V,Ht=re[11]*V,lr=0,Ir=E;lr<Ir.length;lr+=1){for(var ln=Ir[lr],qr=[],Mn=[],bn=0,An=ln;bn<An.length;bn+=1){var Rn=An[bn],Xn=Rn.x,la=Rn.y,ia=re[0]*Xn+re[4]*la+re[12],Oa=re[1]*Xn+re[5]*la+re[13],Ma=re[2]*Xn+re[6]*la+re[14],Ea=re[3]*Xn+re[7]*la+re[15],ai=ia+Me,Ia=Oa+Fe,Fa=Ma+tt,hi=Ea+ct,ti=ia+mt,Li=Oa+Dt,Ji=Ma+Zt,Pi=Ea+Ht,Ri=new f(ai/hi,Ia/hi);Ri.z=Fa/hi,qr.push(Ri);var Si=new f(ti/Pi,Li/Pi);Si.z=Ji/Pi,Mn.push(Si)}pe.push(qr),be.push(Mn)}return[pe,be]}function RA(E,C,V,re){for(var pe=[],be=0,Me=E;be<Me.length;be+=1){var Fe=Me[be],tt=[Fe.x,Fe.y,re,1];i0(tt,tt,C),pe.push(new f(tt[0]/tt[3],tt[1]/tt[3]))}return pe}var DA=Zo([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),ob=DA.members,IA=ov.VectorTileFeature.types,sb=63,zA=Math.cos(75/2*(Math.PI/180)),FA=15,OA=20,NA=15,lb=1/2,ub=Math.pow(2,NA-1)/lb,Fl=function(C){this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(V){return V.id}),this.index=C.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Kh,this.indexArray=new Pf,this.programConfigurations=new oi(ob,C.layers,C.zoom),this.segments=new X,this.stateDependentLayerIds=this.layers.filter(function(V){return V.isStateDependent()}).map(function(V){return V.id})};Fl.prototype.populate=function(C,V,re){this.hasPattern=Mm("line",this.layers,V);for(var pe=this.layers[0].layout.get("line-sort-key"),be=[],Me=0,Fe=C;Me<Fe.length;Me+=1){var tt=Fe[Me],ct=tt.feature,mt=tt.id,Dt=tt.index,Zt=tt.sourceLayerIndex,Ht=this.layers[0]._featureFilter.needGeometry,lr={type:ct.type,id:mt,properties:ct.properties,geometry:Ht?Gi(ct):[]};if(!!this.layers[0]._featureFilter.filter(new fi(this.zoom),lr,re)){Ht||(lr.geometry=Gi(ct));var Ir=pe?pe.evaluate(lr,{},re):void 0,ln={id:mt,properties:ct.properties,type:ct.type,sourceLayerIndex:Zt,index:Dt,geometry:lr.geometry,patterns:{},sortKey:Ir};be.push(ln)}}pe&&be.sort(function(Ma,Ea){return Ma.sortKey-Ea.sortKey});for(var qr=0,Mn=be;qr<Mn.length;qr+=1){var bn=Mn[qr],An=bn,Rn=An.geometry,Xn=An.index,la=An.sourceLayerIndex;if(this.hasPattern){var ia=Sm("line",this.layers,bn,this.zoom,V);this.patternFeatures.push(ia)}else this.addFeature(bn,Rn,Xn,re,{});var Oa=C[Xn].feature;V.featureIndex.insert(Oa,Rn,Xn,la,this.index)}},Fl.prototype.update=function(C,V,re){!this.stateDependentLayers.length||this.programConfigurations.updatePaintArrays(C,V,this.stateDependentLayers,re)},Fl.prototype.addFeatures=function(C,V,re){for(var pe=0,be=this.patternFeatures;pe<be.length;pe+=1){var Me=be[pe];this.addFeature(Me,Me.geometry,Me.index,V,re)}},Fl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Fl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Fl.prototype.upload=function(C){this.uploaded||(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,ob),this.indexBuffer=C.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(C),this.uploaded=!0},Fl.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Fl.prototype.addFeature=function(C,V,re,pe,be){for(var Me=this.layers[0].layout,Fe=Me.get("line-join").evaluate(C,{}),tt=Me.get("line-cap"),ct=Me.get("line-miter-limit"),mt=Me.get("line-round-limit"),Dt=0,Zt=V;Dt<Zt.length;Dt+=1){var Ht=Zt[Dt];this.addLine(Ht,C,Fe,tt,ct,mt)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,C,re,be,pe)},Fl.prototype.addLine=function(C,V,re,pe,be,Me){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,!!V.properties&&V.properties.hasOwnProperty("mapbox_clip_start")&&V.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+V.properties.mapbox_clip_start,this.clipEnd=+V.properties.mapbox_clip_end;for(var Fe=0;Fe<C.length-1;Fe++)this.totalDistance+=C[Fe].dist(C[Fe+1]);this.updateScaledDistance()}for(var tt=IA[V.type]==="Polygon",ct=C.length;ct>=2&&C[ct-1].equals(C[ct-2]);)ct--;for(var mt=0;mt<ct-1&&C[mt].equals(C[mt+1]);)mt++;if(!(ct<(tt?3:2))){re==="bevel"&&(be=1.05);var Dt=this.overscaling<=16?FA*Ha/(512*this.overscaling):0,Zt=this.segments.prepareSegment(ct*10,this.layoutVertexArray,this.indexArray),Ht,lr=void 0,Ir=void 0,ln=void 0,qr=void 0;this.e1=this.e2=-1,tt&&(Ht=C[ct-2],qr=C[mt].sub(Ht)._unit()._perp());for(var Mn=mt;Mn<ct;Mn++)if(Ir=Mn===ct-1?tt?C[mt+1]:void 0:C[Mn+1],!(Ir&&C[Mn].equals(Ir))){qr&&(ln=qr),Ht&&(lr=Ht),Ht=C[Mn],qr=Ir?Ir.sub(Ht)._unit()._perp():ln,ln=ln||qr;var bn=ln.add(qr);(bn.x!==0||bn.y!==0)&&bn._unit();var An=ln.x*qr.x+ln.y*qr.y,Rn=bn.x*qr.x+bn.y*qr.y,Xn=Rn!==0?1/Rn:1/0,la=2*Math.sqrt(2-2*Rn),ia=Rn<zA&&lr&&Ir,Oa=ln.x*qr.y-ln.y*qr.x>0;if(ia&&Mn>mt){var Ma=Ht.dist(lr);if(Ma>2*Dt){var Ea=Ht.sub(Ht.sub(lr)._mult(Dt/Ma)._round());this.updateDistance(lr,Ea),this.addCurrentVertex(Ea,ln,0,0,Zt),lr=Ea}}var ai=lr&&Ir,Ia=ai?re:tt?"butt":pe;if(ai&&Ia==="round"&&(Xn<Me?Ia="miter":Xn<=2&&(Ia="fakeround")),Ia==="miter"&&Xn>be&&(Ia="bevel"),Ia==="bevel"&&(Xn>2&&(Ia="flipbevel"),Xn<be&&(Ia="miter")),lr&&this.updateDistance(lr,Ht),Ia==="miter")bn._mult(Xn),this.addCurrentVertex(Ht,bn,0,0,Zt);else if(Ia==="flipbevel"){if(Xn>100)bn=qr.mult(-1);else{var Fa=Xn*ln.add(qr).mag()/ln.sub(qr).mag();bn._perp()._mult(Fa*(Oa?-1:1))}this.addCurrentVertex(Ht,bn,0,0,Zt),this.addCurrentVertex(Ht,bn.mult(-1),0,0,Zt)}else if(Ia==="bevel"||Ia==="fakeround"){var hi=-Math.sqrt(Xn*Xn-1),ti=Oa?hi:0,Li=Oa?0:hi;if(lr&&this.addCurrentVertex(Ht,ln,ti,Li,Zt),Ia==="fakeround")for(var Ji=Math.round(la*180/Math.PI/OA),Pi=1;Pi<Ji;Pi++){var Ri=Pi/Ji;if(Ri!==.5){var Si=Ri-.5,ao=1.0904+An*(-3.2452+An*(3.55645-An*1.43519)),uo=.848013+An*(-1.06021+An*.215638);Ri=Ri+Ri*Si*(Ri-1)*(ao*Si*Si+uo)}var Do=qr.sub(ln)._mult(Ri)._add(ln)._unit()._mult(Oa?-1:1);this.addHalfVertex(Ht,Do.x,Do.y,!1,Oa,0,Zt)}Ir&&this.addCurrentVertex(Ht,qr,-ti,-Li,Zt)}else if(Ia==="butt")this.addCurrentVertex(Ht,bn,0,0,Zt);else if(Ia==="square"){var Ho=lr?1:-1;this.addCurrentVertex(Ht,bn,Ho,Ho,Zt)}else Ia==="round"&&(lr&&(this.addCurrentVertex(Ht,ln,0,0,Zt),this.addCurrentVertex(Ht,ln,1,1,Zt,!0)),Ir&&(this.addCurrentVertex(Ht,qr,-1,-1,Zt,!0),this.addCurrentVertex(Ht,qr,0,0,Zt)));if(ia&&Mn<ct-1){var xs=Ht.dist(Ir);if(xs>2*Dt){var is=Ht.add(Ir.sub(Ht)._mult(Dt/xs)._round());this.updateDistance(Ht,is),this.addCurrentVertex(is,qr,0,0,Zt),Ht=is}}}}},Fl.prototype.addCurrentVertex=function(C,V,re,pe,be,Me){Me===void 0&&(Me=!1);var Fe=V.x+V.y*re,tt=V.y-V.x*re,ct=-V.x+V.y*pe,mt=-V.y-V.x*pe;this.addHalfVertex(C,Fe,tt,Me,!1,re,be),this.addHalfVertex(C,ct,mt,Me,!0,-pe,be),this.distance>ub/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(C,V,re,pe,be,Me))},Fl.prototype.addHalfVertex=function(C,V,re,pe,be,Me,Fe){var tt=C.x,ct=C.y,mt=this.scaledDistance*lb;this.layoutVertexArray.emplaceBack((tt<<1)+(pe?1:0),(ct<<1)+(be?1:0),Math.round(sb*V)+128,Math.round(sb*re)+128,(Me===0?0:Me<0?-1:1)+1|(mt&63)<<2,mt>>6);var Dt=Fe.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Dt),Fe.primitiveLength++),be?this.e2=Dt:this.e1=Dt},Fl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(ub-1):this.distance},Fl.prototype.updateDistance=function(C,V){this.distance+=C.dist(V),this.updateScaledDistance()},Ne("LineBucket",Fl,{omit:["layers","patternFeatures"]});var BA=new Qi({"line-cap":new Na(cr.layout_line["line-cap"]),"line-join":new Ka(cr.layout_line["line-join"]),"line-miter-limit":new Na(cr.layout_line["line-miter-limit"]),"line-round-limit":new Na(cr.layout_line["line-round-limit"]),"line-sort-key":new Ka(cr.layout_line["line-sort-key"])}),UA=new Qi({"line-opacity":new Ka(cr.paint_line["line-opacity"]),"line-color":new Ka(cr.paint_line["line-color"]),"line-translate":new Na(cr.paint_line["line-translate"]),"line-translate-anchor":new Na(cr.paint_line["line-translate-anchor"]),"line-width":new Ka(cr.paint_line["line-width"]),"line-gap-width":new Ka(cr.paint_line["line-gap-width"]),"line-offset":new Ka(cr.paint_line["line-offset"]),"line-blur":new Ka(cr.paint_line["line-blur"]),"line-dasharray":new so(cr.paint_line["line-dasharray"]),"line-pattern":new Lo(cr.paint_line["line-pattern"]),"line-gradient":new Xo(cr.paint_line["line-gradient"])}),fb={paint:UA,layout:BA},VA=function(E){function C(){E.apply(this,arguments)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.possiblyEvaluate=function(re,pe){return pe=new fi(Math.floor(pe.zoom),{now:pe.now,fadeDuration:pe.fadeDuration,zoomHistory:pe.zoomHistory,transition:pe.transition}),E.prototype.possiblyEvaluate.call(this,re,pe)},C.prototype.evaluate=function(re,pe,be,Me){return pe=M({},pe,{zoom:Math.floor(pe.zoom)}),E.prototype.evaluate.call(this,re,pe,be,Me)},C}(Ka),cb=new VA(fb.paint.properties["line-width"].specification);cb.useIntegerZoom=!0;var HA=function(E){function C(V){E.call(this,V,fb)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype._handleSpecialPaintPropertyUpdate=function(re){re==="line-gradient"&&this._updateGradient()},C.prototype._updateGradient=function(){var re=this._transitionablePaint._values["line-gradient"].value.expression;this.gradient=Zx(re,"lineProgress"),this.gradientTexture=null},C.prototype.recalculate=function(re,pe){E.prototype.recalculate.call(this,re,pe),this.paint._values["line-floorwidth"]=cb.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,re)},C.prototype.createBucket=function(re){return new Fl(re)},C.prototype.queryRadius=function(re){var pe=re,be=hb(Ql("line-width",this,pe),Ql("line-gap-width",this,pe)),Me=Ql("line-offset",this,pe);return be/2+Math.abs(Me)+af(this.paint.get("line-translate"))},C.prototype.queryIntersectsFeature=function(re,pe,be,Me,Fe,tt,ct){var mt=Uu(re,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),tt.angle,ct),Dt=ct/2*hb(this.paint.get("line-width").evaluate(pe,be),this.paint.get("line-gap-width").evaluate(pe,be)),Zt=this.paint.get("line-offset").evaluate(pe,be);return Zt&&(Me=GA(Me,Zt*ct)),ts(mt,Me,Dt)},C.prototype.isTileClipped=function(){return!0},C}(Vs);function hb(E,C){return C>0?C+2*E:E}function GA(E,C){for(var V=[],re=new f(0,0),pe=0;pe<E.length;pe++){for(var be=E[pe],Me=[],Fe=0;Fe<be.length;Fe++){var tt=be[Fe-1],ct=be[Fe],mt=be[Fe+1],Dt=Fe===0?re:ct.sub(tt)._unit()._perp(),Zt=Fe===be.length-1?re:mt.sub(ct)._unit()._perp(),Ht=Dt._add(Zt)._unit(),lr=Ht.x*Zt.x+Ht.y*Zt.y;Ht._mult(1/lr),Me.push(Ht._mult(C)._add(ct))}V.push(Me)}return V}var Em=Zo([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),WA=Zo([{name:"a_projected_pos",components:3,type:"Float32"}],4);Zo([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);var YA=Zo([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]);Zo([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);var vb=Zo([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),jA=Zo([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Zo([{name:"triangle",components:3,type:"Uint16"}]),Zo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Zo([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Zo([{type:"Float32",name:"offsetX"}]),Zo([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);function XA(E,C,V){var re=C.layout.get("text-transform").evaluate(V,{});return re==="uppercase"?E=E.toLocaleUpperCase():re==="lowercase"&&(E=E.toLocaleLowerCase()),Za.applyArabicShaping&&(E=Za.applyArabicShaping(E)),E}function ZA(E,C,V){return E.sections.forEach(function(re){re.text=XA(re.text,C,V)}),E}function KA(E){var C={},V={},re=[],pe=0;function be(qr){re.push(E[qr]),pe++}function Me(qr,Mn,bn){var An=V[qr];return delete V[qr],V[Mn]=An,re[An].geometry[0].pop(),re[An].geometry[0]=re[An].geometry[0].concat(bn[0]),An}function Fe(qr,Mn,bn){var An=C[Mn];return delete C[Mn],C[qr]=An,re[An].geometry[0].shift(),re[An].geometry[0]=bn[0].concat(re[An].geometry[0]),An}function tt(qr,Mn,bn){var An=bn?Mn[0][Mn[0].length-1]:Mn[0][0];return qr+":"+An.x+":"+An.y}for(var ct=0;ct<E.length;ct++){var mt=E[ct],Dt=mt.geometry,Zt=mt.text?mt.text.toString():null;if(!Zt){be(ct);continue}var Ht=tt(Zt,Dt),lr=tt(Zt,Dt,!0);if(Ht in V&&lr in C&&V[Ht]!==C[lr]){var Ir=Fe(Ht,lr,Dt),ln=Me(Ht,lr,re[Ir].geometry);delete C[Ht],delete V[lr],V[tt(Zt,re[ln].geometry,!0)]=ln,re[Ir].geometry=null}else Ht in V?Me(Ht,lr,Dt):lr in C?Fe(Ht,lr,Dt):(be(ct),C[Ht]=pe-1,V[lr]=pe-1)}return re.filter(function(qr){return qr.geometry})}var _p={"!":"\uFE15","#":"\uFF03",$:"\uFF04","%":"\uFF05","&":"\uFF06","(":"\uFE35",")":"\uFE36","*":"\uFF0A","+":"\uFF0B",",":"\uFE10","-":"\uFE32",".":"\u30FB","/":"\uFF0F",":":"\uFE13",";":"\uFE14","<":"\uFE3F","=":"\uFF1D",">":"\uFE40","?":"\uFE16","@":"\uFF20","[":"\uFE47","\\":"\uFF3C","]":"\uFE48","^":"\uFF3E",_:"\uFE33","`":"\uFF40","{":"\uFE37","|":"\u2015","}":"\uFE38","~":"\uFF5E","\xA2":"\uFFE0","\xA3":"\uFFE1","\xA5":"\uFFE5","\xA6":"\uFFE4","\xAC":"\uFFE2","\xAF":"\uFFE3","\u2013":"\uFE32","\u2014":"\uFE31","\u2018":"\uFE43","\u2019":"\uFE44","\u201C":"\uFE41","\u201D":"\uFE42","\u2026":"\uFE19","\u2027":"\u30FB","\u20A9":"\uFFE6","\u3001":"\uFE11","\u3002":"\uFE12","\u3008":"\uFE3F","\u3009":"\uFE40","\u300A":"\uFE3D","\u300B":"\uFE3E","\u300C":"\uFE41","\u300D":"\uFE42","\u300E":"\uFE43","\u300F":"\uFE44","\u3010":"\uFE3B","\u3011":"\uFE3C","\u3014":"\uFE39","\u3015":"\uFE3A","\u3016":"\uFE17","\u3017":"\uFE18","\uFF01":"\uFE15","\uFF08":"\uFE35","\uFF09":"\uFE36","\uFF0C":"\uFE10","\uFF0D":"\uFE32","\uFF0E":"\u30FB","\uFF1A":"\uFE13","\uFF1B":"\uFE14","\uFF1C":"\uFE3F","\uFF1E":"\uFE40","\uFF1F":"\uFE16","\uFF3B":"\uFE47","\uFF3D":"\uFE48","\uFF3F":"\uFE33","\uFF5B":"\uFE37","\uFF5C":"\u2015","\uFF5D":"\uFE38","\uFF5F":"\uFE35","\uFF60":"\uFE36","\uFF61":"\uFE12","\uFF62":"\uFE41","\uFF63":"\uFE42"};function JA(E){for(var C="",V=0;V<E.length;V++){var re=E.charCodeAt(V+1)||null,pe=E.charCodeAt(V-1)||null,be=(!re||!sn(re)||_p[E[V+1]])&&(!pe||!sn(pe)||_p[E[V-1]]);be&&_p[E[V]]?C+=_p[E[V]]:C+=E[V]}return C}var Ds=24,QA=function(E,C,V,re,pe){var be,Me,Fe=pe*8-re-1,tt=(1<<Fe)-1,ct=tt>>1,mt=-7,Dt=V?pe-1:0,Zt=V?-1:1,Ht=E[C+Dt];for(Dt+=Zt,be=Ht&(1<<-mt)-1,Ht>>=-mt,mt+=Fe;mt>0;be=be*256+E[C+Dt],Dt+=Zt,mt-=8);for(Me=be&(1<<-mt)-1,be>>=-mt,mt+=re;mt>0;Me=Me*256+E[C+Dt],Dt+=Zt,mt-=8);if(be===0)be=1-ct;else{if(be===tt)return Me?NaN:(Ht?-1:1)*(1/0);Me=Me+Math.pow(2,re),be=be-ct}return(Ht?-1:1)*Me*Math.pow(2,be-re)},$A=function(E,C,V,re,pe,be){var Me,Fe,tt,ct=be*8-pe-1,mt=(1<<ct)-1,Dt=mt>>1,Zt=pe===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ht=re?0:be-1,lr=re?1:-1,Ir=C<0||C===0&&1/C<0?1:0;for(C=Math.abs(C),isNaN(C)||C===1/0?(Fe=isNaN(C)?1:0,Me=mt):(Me=Math.floor(Math.log(C)/Math.LN2),C*(tt=Math.pow(2,-Me))<1&&(Me--,tt*=2),Me+Dt>=1?C+=Zt/tt:C+=Zt*Math.pow(2,1-Dt),C*tt>=2&&(Me++,tt/=2),Me+Dt>=mt?(Fe=0,Me=mt):Me+Dt>=1?(Fe=(C*tt-1)*Math.pow(2,pe),Me=Me+Dt):(Fe=C*Math.pow(2,Dt-1)*Math.pow(2,pe),Me=0));pe>=8;E[V+Ht]=Fe&255,Ht+=lr,Fe/=256,pe-=8);for(Me=Me<<pe|Fe,ct+=pe;ct>0;E[V+Ht]=Me&255,Ht+=lr,Me/=256,ct-=8);E[V+Ht-lr]|=Ir*128},f0={read:QA,write:$A},c0=lo;function lo(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}lo.Varint=0,lo.Fixed64=1,lo.Bytes=2,lo.Fixed32=5;var Cm=(1<<16)*(1<<16),pb=1/Cm,qA=12,db=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");lo.prototype={destroy:function(){this.buf=null},readFields:function(E,C,V){for(V=V||this.length;this.pos<V;){var re=this.readVarint(),pe=re>>3,be=this.pos;this.type=re&7,E(pe,C,this),this.pos===be&&this.skip(re)}return C},readMessage:function(E,C){return this.readFields(E,C,this.readVarint()+this.pos)},readFixed32:function(){var E=h0(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=mb(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=h0(this.buf,this.pos)+h0(this.buf,this.pos+4)*Cm;return this.pos+=8,E},readSFixed64:function(){var E=h0(this.buf,this.pos)+mb(this.buf,this.pos+4)*Cm;return this.pos+=8,E},readFloat:function(){var E=f0.read(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=f0.read(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var C=this.buf,V,re;return re=C[this.pos++],V=re&127,re<128||(re=C[this.pos++],V|=(re&127)<<7,re<128)||(re=C[this.pos++],V|=(re&127)<<14,re<128)||(re=C[this.pos++],V|=(re&127)<<21,re<128)?V:(re=C[this.pos],V|=(re&15)<<28,eM(V,E,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2==1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,C=this.pos;return this.pos=E,E-C>=qA&&db?pM(this.buf,C,E):vM(this.buf,C,E)},readBytes:function(){var E=this.readVarint()+this.pos,C=this.buf.subarray(this.pos,E);return this.pos=E,C},readPackedVarint:function(E,C){if(this.type!==lo.Bytes)return E.push(this.readVarint(C));var V=xc(this);for(E=E||[];this.pos<V;)E.push(this.readVarint(C));return E},readPackedSVarint:function(E){if(this.type!==lo.Bytes)return E.push(this.readSVarint());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==lo.Bytes)return E.push(this.readBoolean());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==lo.Bytes)return E.push(this.readFloat());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==lo.Bytes)return E.push(this.readDouble());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==lo.Bytes)return E.push(this.readFixed32());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==lo.Bytes)return E.push(this.readSFixed32());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==lo.Bytes)return E.push(this.readFixed64());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==lo.Bytes)return E.push(this.readSFixed64());var C=xc(this);for(E=E||[];this.pos<C;)E.push(this.readSFixed64());return E},skip:function(E){var C=E&7;if(C===lo.Varint)for(;this.buf[this.pos++]>127;);else if(C===lo.Bytes)this.pos=this.readVarint()+this.pos;else if(C===lo.Fixed32)this.pos+=4;else if(C===lo.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+C)},writeTag:function(E,C){this.writeVarint(E<<3|C)},realloc:function(E){for(var C=this.length||16;C<this.pos+E;)C*=2;if(C!==this.length){var V=new Uint8Array(C);V.set(this.buf),this.buf=V,this.length=C}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),lv(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),lv(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),lv(this.buf,E&-1,this.pos),lv(this.buf,Math.floor(E*pb),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),lv(this.buf,E&-1,this.pos),lv(this.buf,Math.floor(E*pb),this.pos+4),this.pos+=8},writeVarint:function(E){if(E=+E||0,E>268435455||E<0){tM(E,this);return}this.realloc(4),this.buf[this.pos++]=E&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=(E>>>=7)&127|(E>127?128:0),!(E<=127)&&(this.buf[this.pos++]=E>>>7&127)))},writeSVarint:function(E){this.writeVarint(E<0?-E*2-1:E*2)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(E.length*4),this.pos++;var C=this.pos;this.pos=dM(this.buf,E,this.pos);var V=this.pos-C;V>=128&&gb(C,V,this),this.pos=C-1,this.writeVarint(V),this.pos+=V},writeFloat:function(E){this.realloc(4),f0.write(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),f0.write(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var C=E.length;this.writeVarint(C),this.realloc(C);for(var V=0;V<C;V++)this.buf[this.pos++]=E[V]},writeRawMessage:function(E,C){this.pos++;var V=this.pos;E(C,this);var re=this.pos-V;re>=128&&gb(V,re,this),this.pos=V-1,this.writeVarint(re),this.pos+=re},writeMessage:function(E,C,V){this.writeTag(E,lo.Bytes),this.writeRawMessage(C,V)},writePackedVarint:function(E,C){C.length&&this.writeMessage(E,aM,C)},writePackedSVarint:function(E,C){C.length&&this.writeMessage(E,iM,C)},writePackedBoolean:function(E,C){C.length&&this.writeMessage(E,lM,C)},writePackedFloat:function(E,C){C.length&&this.writeMessage(E,oM,C)},writePackedDouble:function(E,C){C.length&&this.writeMessage(E,sM,C)},writePackedFixed32:function(E,C){C.length&&this.writeMessage(E,uM,C)},writePackedSFixed32:function(E,C){C.length&&this.writeMessage(E,fM,C)},writePackedFixed64:function(E,C){C.length&&this.writeMessage(E,cM,C)},writePackedSFixed64:function(E,C){C.length&&this.writeMessage(E,hM,C)},writeBytesField:function(E,C){this.writeTag(E,lo.Bytes),this.writeBytes(C)},writeFixed32Field:function(E,C){this.writeTag(E,lo.Fixed32),this.writeFixed32(C)},writeSFixed32Field:function(E,C){this.writeTag(E,lo.Fixed32),this.writeSFixed32(C)},writeFixed64Field:function(E,C){this.writeTag(E,lo.Fixed64),this.writeFixed64(C)},writeSFixed64Field:function(E,C){this.writeTag(E,lo.Fixed64),this.writeSFixed64(C)},writeVarintField:function(E,C){this.writeTag(E,lo.Varint),this.writeVarint(C)},writeSVarintField:function(E,C){this.writeTag(E,lo.Varint),this.writeSVarint(C)},writeStringField:function(E,C){this.writeTag(E,lo.Bytes),this.writeString(C)},writeFloatField:function(E,C){this.writeTag(E,lo.Fixed32),this.writeFloat(C)},writeDoubleField:function(E,C){this.writeTag(E,lo.Fixed64),this.writeDouble(C)},writeBooleanField:function(E,C){this.writeVarintField(E,Boolean(C))}};function eM(E,C,V){var re=V.buf,pe,be;if(be=re[V.pos++],pe=(be&112)>>4,be<128||(be=re[V.pos++],pe|=(be&127)<<3,be<128)||(be=re[V.pos++],pe|=(be&127)<<10,be<128)||(be=re[V.pos++],pe|=(be&127)<<17,be<128)||(be=re[V.pos++],pe|=(be&127)<<24,be<128)||(be=re[V.pos++],pe|=(be&1)<<31,be<128))return sv(E,pe,C);throw new Error("Expected varint not more than 10 bytes")}function xc(E){return E.type===lo.Bytes?E.readVarint()+E.pos:E.pos+1}function sv(E,C,V){return V?C*4294967296+(E>>>0):(C>>>0)*4294967296+(E>>>0)}function tM(E,C){var V,re;if(E>=0?(V=E%4294967296|0,re=E/4294967296|0):(V=~(-E%4294967296),re=~(-E/4294967296),V^4294967295?V=V+1|0:(V=0,re=re+1|0)),E>=18446744073709552e3||E<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");C.realloc(10),rM(V,re,C),nM(re,C)}function rM(E,C,V){V.buf[V.pos++]=E&127|128,E>>>=7,V.buf[V.pos++]=E&127|128,E>>>=7,V.buf[V.pos++]=E&127|128,E>>>=7,V.buf[V.pos++]=E&127|128,E>>>=7,V.buf[V.pos]=E&127}function nM(E,C){var V=(E&7)<<4;C.buf[C.pos++]|=V|((E>>>=3)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127|((E>>>=7)?128:0),!!E&&(C.buf[C.pos++]=E&127)))))}function gb(E,C,V){var re=C<=16383?1:C<=2097151?2:C<=268435455?3:Math.floor(Math.log(C)/(Math.LN2*7));V.realloc(re);for(var pe=V.pos-1;pe>=E;pe--)V.buf[pe+re]=V.buf[pe]}function aM(E,C){for(var V=0;V<E.length;V++)C.writeVarint(E[V])}function iM(E,C){for(var V=0;V<E.length;V++)C.writeSVarint(E[V])}function oM(E,C){for(var V=0;V<E.length;V++)C.writeFloat(E[V])}function sM(E,C){for(var V=0;V<E.length;V++)C.writeDouble(E[V])}function lM(E,C){for(var V=0;V<E.length;V++)C.writeBoolean(E[V])}function uM(E,C){for(var V=0;V<E.length;V++)C.writeFixed32(E[V])}function fM(E,C){for(var V=0;V<E.length;V++)C.writeSFixed32(E[V])}function cM(E,C){for(var V=0;V<E.length;V++)C.writeFixed64(E[V])}function hM(E,C){for(var V=0;V<E.length;V++)C.writeSFixed64(E[V])}function h0(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+E[C+3]*16777216}function lv(E,C,V){E[V]=C,E[V+1]=C>>>8,E[V+2]=C>>>16,E[V+3]=C>>>24}function mb(E,C){return(E[C]|E[C+1]<<8|E[C+2]<<16)+(E[C+3]<<24)}function vM(E,C,V){for(var re="",pe=C;pe<V;){var be=E[pe],Me=null,Fe=be>239?4:be>223?3:be>191?2:1;if(pe+Fe>V)break;var tt,ct,mt;Fe===1?be<128&&(Me=be):Fe===2?(tt=E[pe+1],(tt&192)==128&&(Me=(be&31)<<6|tt&63,Me<=127&&(Me=null))):Fe===3?(tt=E[pe+1],ct=E[pe+2],(tt&192)==128&&(ct&192)==128&&(Me=(be&15)<<12|(tt&63)<<6|ct&63,(Me<=2047||Me>=55296&&Me<=57343)&&(Me=null))):Fe===4&&(tt=E[pe+1],ct=E[pe+2],mt=E[pe+3],(tt&192)==128&&(ct&192)==128&&(mt&192)==128&&(Me=(be&15)<<18|(tt&63)<<12|(ct&63)<<6|mt&63,(Me<=65535||Me>=1114112)&&(Me=null))),Me===null?(Me=65533,Fe=1):Me>65535&&(Me-=65536,re+=String.fromCharCode(Me>>>10&1023|55296),Me=56320|Me&1023),re+=String.fromCharCode(Me),pe+=Fe}return re}function pM(E,C,V){return db.decode(E.subarray(C,V))}function dM(E,C,V){for(var re=0,pe,be;re<C.length;re++){if(pe=C.charCodeAt(re),pe>55295&&pe<57344)if(be)if(pe<56320){E[V++]=239,E[V++]=191,E[V++]=189,be=pe;continue}else pe=be-55296<<10|pe-56320|65536,be=null;else{pe>56319||re+1===C.length?(E[V++]=239,E[V++]=191,E[V++]=189):be=pe;continue}else be&&(E[V++]=239,E[V++]=191,E[V++]=189,be=null);pe<128?E[V++]=pe:(pe<2048?E[V++]=pe>>6|192:(pe<65536?E[V++]=pe>>12|224:(E[V++]=pe>>18|240,E[V++]=pe>>12&63|128),E[V++]=pe>>6&63|128),E[V++]=pe&63|128)}return V}var Lm=3;function gM(E,C,V){E===1&&V.readMessage(mM,C)}function mM(E,C,V){if(E===3){var re=V.readMessage(yM,{}),pe=re.id,be=re.bitmap,Me=re.width,Fe=re.height,tt=re.left,ct=re.top,mt=re.advance;C.push({id:pe,bitmap:new Mh({width:Me+2*Lm,height:Fe+2*Lm},be),metrics:{width:Me,height:Fe,left:tt,top:ct,advance:mt}})}}function yM(E,C,V){E===1?C.id=V.readVarint():E===2?C.bitmap=V.readBytes():E===3?C.width=V.readVarint():E===4?C.height=V.readVarint():E===5?C.left=V.readSVarint():E===6?C.top=V.readSVarint():E===7&&(C.advance=V.readVarint())}function xM(E){return new c0(E).readFields(gM,[])}var yb=Lm;function xb(E){for(var C=0,V=0,re=0,pe=E;re<pe.length;re+=1){var be=pe[re];C+=be.w*be.h,V=Math.max(V,be.w)}E.sort(function(ln,qr){return qr.h-ln.h});for(var Me=Math.max(Math.ceil(Math.sqrt(C/.95)),V),Fe=[{x:0,y:0,w:Me,h:1/0}],tt=0,ct=0,mt=0,Dt=E;mt<Dt.length;mt+=1)for(var Zt=Dt[mt],Ht=Fe.length-1;Ht>=0;Ht--){var lr=Fe[Ht];if(!(Zt.w>lr.w||Zt.h>lr.h)){if(Zt.x=lr.x,Zt.y=lr.y,ct=Math.max(ct,Zt.y+Zt.h),tt=Math.max(tt,Zt.x+Zt.w),Zt.w===lr.w&&Zt.h===lr.h){var Ir=Fe.pop();Ht<Fe.length&&(Fe[Ht]=Ir)}else Zt.h===lr.h?(lr.x+=Zt.w,lr.w-=Zt.w):Zt.w===lr.w?(lr.y+=Zt.h,lr.h-=Zt.h):(Fe.push({x:lr.x+Zt.w,y:lr.y,w:lr.w-Zt.w,h:Zt.h}),lr.y+=Zt.h,lr.h-=Zt.h);break}}return{w:tt,h:ct,fill:C/(tt*ct)||0}}var $l=1,v0=function(C,V){var re=V.pixelRatio,pe=V.version,be=V.stretchX,Me=V.stretchY,Fe=V.content;this.paddedRect=C,this.pixelRatio=re,this.stretchX=be,this.stretchY=Me,this.content=Fe,this.version=pe},wp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};wp.tl.get=function(){return[this.paddedRect.x+$l,this.paddedRect.y+$l]},wp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-$l,this.paddedRect.y+this.paddedRect.h-$l]},wp.tlbr.get=function(){return this.tl.concat(this.br)},wp.displaySize.get=function(){return[(this.paddedRect.w-$l*2)/this.pixelRatio,(this.paddedRect.h-$l*2)/this.pixelRatio]},Object.defineProperties(v0.prototype,wp);var Tp=function(C,V){var re={},pe={};this.haveRenderCallbacks=[];var be=[];this.addImages(C,re,be),this.addImages(V,pe,be);var Me=xb(be),Fe=Me.w,tt=Me.h,ct=new zl({width:Fe||1,height:tt||1});for(var mt in C){var Dt=C[mt],Zt=re[mt].paddedRect;zl.copy(Dt.data,ct,{x:0,y:0},{x:Zt.x+$l,y:Zt.y+$l},Dt.data)}for(var Ht in V){var lr=V[Ht],Ir=pe[Ht].paddedRect,ln=Ir.x+$l,qr=Ir.y+$l,Mn=lr.data.width,bn=lr.data.height;zl.copy(lr.data,ct,{x:0,y:0},{x:ln,y:qr},lr.data),zl.copy(lr.data,ct,{x:0,y:bn-1},{x:ln,y:qr-1},{width:Mn,height:1}),zl.copy(lr.data,ct,{x:0,y:0},{x:ln,y:qr+bn},{width:Mn,height:1}),zl.copy(lr.data,ct,{x:Mn-1,y:0},{x:ln-1,y:qr},{width:1,height:bn}),zl.copy(lr.data,ct,{x:0,y:0},{x:ln+Mn,y:qr},{width:1,height:bn})}this.image=ct,this.iconPositions=re,this.patternPositions=pe};Tp.prototype.addImages=function(C,V,re){for(var pe in C){var be=C[pe],Me={x:0,y:0,w:be.data.width+2*$l,h:be.data.height+2*$l};re.push(Me),V[pe]=new v0(Me,be),be.hasRenderCallback&&this.haveRenderCallbacks.push(pe)}},Tp.prototype.patchUpdatedImages=function(C,V){C.dispatchRenderCallbacks(this.haveRenderCallbacks);for(var re in C.updatedImages)this.patchUpdatedImage(this.iconPositions[re],C.getImage(re),V),this.patchUpdatedImage(this.patternPositions[re],C.getImage(re),V)},Tp.prototype.patchUpdatedImage=function(C,V,re){if(!(!C||!V)&&C.version!==V.version){C.version=V.version;var pe=C.tl,be=pe[0],Me=pe[1];re.update(V.data,void 0,{x:be,y:Me})}},Ne("ImagePosition",v0),Ne("ImageAtlas",Tp);var xu={horizontal:1,vertical:2,horizontalOnly:3},Ap=-17;function bM(E){for(var C=0,V=E;C<V.length;C+=1){var re=V[C];if(re.positionedGlyphs.length!==0)return!1}return!0}var bb=57344,_b=63743,uv=function(){this.scale=1,this.fontStack="",this.imageName=null};uv.forText=function(C,V){var re=new uv;return re.scale=C||1,re.fontStack=V,re},uv.forImage=function(C){var V=new uv;return V.imageName=C,V};var qs=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};qs.fromFeature=function(C,V){for(var re=new qs,pe=0;pe<C.sections.length;pe++){var be=C.sections[pe];be.image?re.addImageSection(be):re.addTextSection(be,V)}return re},qs.prototype.length=function(){return this.text.length},qs.prototype.getSection=function(C){return this.sections[this.sectionIndex[C]]},qs.prototype.getSectionIndex=function(C){return this.sectionIndex[C]},qs.prototype.getCharCode=function(C){return this.text.charCodeAt(C)},qs.prototype.verticalizePunctuation=function(){this.text=JA(this.text)},qs.prototype.trim=function(){for(var C=0,V=0;V<this.text.length&&ac[this.text.charCodeAt(V)];V++)C++;for(var re=this.text.length,pe=this.text.length-1;pe>=0&&pe>=C&&ac[this.text.charCodeAt(pe)];pe--)re--;this.text=this.text.substring(C,re),this.sectionIndex=this.sectionIndex.slice(C,re)},qs.prototype.substring=function(C,V){var re=new qs;return re.text=this.text.substring(C,V),re.sectionIndex=this.sectionIndex.slice(C,V),re.sections=this.sections,re},qs.prototype.toString=function(){return this.text},qs.prototype.getMaxScale=function(){var C=this;return this.sectionIndex.reduce(function(V,re){return Math.max(V,C.sections[re].scale)},0)},qs.prototype.addTextSection=function(C,V){this.text+=C.text,this.sections.push(uv.forText(C.scale,C.fontStack||V));for(var re=this.sections.length-1,pe=0;pe<C.text.length;++pe)this.sectionIndex.push(re)},qs.prototype.addImageSection=function(C){var V=C.image?C.image.name:"";if(V.length===0){U("Can't add FormattedSection with an empty image.");return}var re=this.getNextImageSectionCharCode();if(!re){U("Reached maximum number of images "+(_b-bb+2));return}this.text+=String.fromCharCode(re),this.sections.push(uv.forImage(V)),this.sectionIndex.push(this.sections.length-1)},qs.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=_b?null:++this.imageSectionID:(this.imageSectionID=bb,this.imageSectionID)};function _M(E,C){for(var V=[],re=E.text,pe=0,be=0,Me=C;be<Me.length;be+=1){var Fe=Me[be];V.push(E.substring(pe,Fe)),pe=Fe}return pe<re.length&&V.push(E.substring(pe,re.length)),V}function p0(E,C,V,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir){var ln=qs.fromFeature(E,pe);Dt===xu.vertical&&ln.verticalizePunctuation();var qr,Mn=Za.processBidirectionalText,bn=Za.processStyledBidirectionalText;if(Mn&&ln.sections.length===1){qr=[];for(var An=Mn(ln.toString(),Pm(ln,ct,be,C,re,Ht,lr)),Rn=0,Xn=An;Rn<Xn.length;Rn+=1){var la=Xn[Rn],ia=new qs;ia.text=la,ia.sections=ln.sections;for(var Oa=0;Oa<la.length;Oa++)ia.sectionIndex.push(0);qr.push(ia)}}else if(bn){qr=[];for(var Ma=bn(ln.text,ln.sectionIndex,Pm(ln,ct,be,C,re,Ht,lr)),Ea=0,ai=Ma;Ea<ai.length;Ea+=1){var Ia=ai[Ea],Fa=new qs;Fa.text=Ia[0],Fa.sectionIndex=Ia[1],Fa.sections=ln.sections,qr.push(Fa)}}else qr=_M(ln,Pm(ln,ct,be,C,re,Ht,lr));var hi=[],ti={positionedLines:hi,text:ln.toString(),top:mt[1],bottom:mt[1],left:mt[0],right:mt[0],writingMode:Dt,iconsInText:!1,verticalizable:!1};return AM(ti,C,V,re,qr,Me,Fe,tt,Dt,ct,Zt,Ir),bM(hi)?!1:ti}var ac={};ac[9]=!0,ac[10]=!0,ac[11]=!0,ac[12]=!0,ac[13]=!0,ac[32]=!0;var ql={};ql[10]=!0,ql[32]=!0,ql[38]=!0,ql[40]=!0,ql[41]=!0,ql[43]=!0,ql[45]=!0,ql[47]=!0,ql[173]=!0,ql[183]=!0,ql[8203]=!0,ql[8208]=!0,ql[8211]=!0,ql[8231]=!0;function wb(E,C,V,re,pe,be){if(C.imageName){var tt=re[C.imageName];return tt?tt.displaySize[0]*C.scale*Ds/be+pe:0}else{var Me=V[C.fontStack],Fe=Me&&Me[E];return Fe?Fe.metrics.advance*C.scale+pe:0}}function wM(E,C,V,re,pe,be){for(var Me=0,Fe=0;Fe<E.length();Fe++){var tt=E.getSection(Fe);Me+=wb(E.getCharCode(Fe),tt,re,pe,C,be)}var ct=Math.max(1,Math.ceil(Me/V));return Me/ct}function Tb(E,C,V,re){var pe=Math.pow(E-C,2);return re?E<C?pe/2:pe*2:pe+Math.abs(V)*V}function TM(E,C,V){var re=0;return E===10&&(re-=1e4),V&&(re+=150),(E===40||E===65288)&&(re+=50),(C===41||C===65289)&&(re+=50),re}function Ab(E,C,V,re,pe,be){for(var Me=null,Fe=Tb(C,V,pe,be),tt=0,ct=re;tt<ct.length;tt+=1){var mt=ct[tt],Dt=C-mt.x,Zt=Tb(Dt,V,pe,be)+mt.badness;Zt<=Fe&&(Me=mt,Fe=Zt)}return{index:E,x:C,priorBreak:Me,badness:Fe}}function Mb(E){return E?Mb(E.priorBreak).concat(E.index):[]}function Pm(E,C,V,re,pe,be,Me){if(be!=="point")return[];if(!E)return[];for(var Fe=[],tt=wM(E,C,V,re,pe,Me),ct=E.text.indexOf("\u200B")>=0,mt=0,Dt=0;Dt<E.length();Dt++){var Zt=E.getSection(Dt),Ht=E.getCharCode(Dt);if(ac[Ht]||(mt+=wb(Ht,Zt,re,pe,C,Me)),Dt<E.length()-1){var lr=Mr(Ht);(ql[Ht]||lr||Zt.imageName)&&Fe.push(Ab(Dt+1,mt,tt,Fe,TM(Ht,E.getCharCode(Dt+1),lr&&ct),!1))}}return Mb(Ab(E.length(),mt,tt,Fe,0,!0))}function Rm(E){var C=.5,V=.5;switch(E){case"right":case"top-right":case"bottom-right":C=1;break;case"left":case"top-left":case"bottom-left":C=0;break}switch(E){case"bottom":case"bottom-right":case"bottom-left":V=1;break;case"top":case"top-right":case"top-left":V=0;break}return{horizontalAlign:C,verticalAlign:V}}function AM(E,C,V,re,pe,be,Me,Fe,tt,ct,mt,Dt){for(var Zt=0,Ht=Ap,lr=0,Ir=0,ln=Fe==="right"?1:Fe==="left"?0:.5,qr=0,Mn=0,bn=pe;Mn<bn.length;Mn+=1){var An=bn[Mn];An.trim();var Rn=An.getMaxScale(),Xn=(Rn-1)*Ds,la={positionedGlyphs:[],lineOffset:0};E.positionedLines[qr]=la;var ia=la.positionedGlyphs,Oa=0;if(!An.length()){Ht+=be,++qr;continue}for(var Ma=0;Ma<An.length();Ma++){var Ea=An.getSection(Ma),ai=An.getSectionIndex(Ma),Ia=An.getCharCode(Ma),Fa=0,hi=null,ti=null,Li=null,Ji=Ds,Pi=!(tt===xu.horizontal||!mt&&!Ur(Ia)||mt&&(ac[Ia]||un(Ia)));if(Ea.imageName){var Do=re[Ea.imageName];if(!Do)continue;Li=Ea.imageName,E.iconsInText=E.iconsInText||!0,ti=Do.paddedRect;var Ho=Do.displaySize;Ea.scale=Ea.scale*Ds/Dt,hi={width:Ho[0],height:Ho[1],left:$l,top:-yb,advance:Pi?Ho[1]:Ho[0]};var xs=Ds-Ho[1]*Ea.scale;Fa=Xn+xs,Ji=hi.advance;var is=Pi?Ho[0]*Ea.scale-Ds*Rn:Ho[1]*Ea.scale-Ds*Rn;is>0&&is>Oa&&(Oa=is)}else{var Ri=V[Ea.fontStack],Si=Ri&&Ri[Ia];if(Si&&Si.rect)ti=Si.rect,hi=Si.metrics;else{var ao=C[Ea.fontStack],uo=ao&&ao[Ia];if(!uo)continue;hi=uo.metrics}Fa=(Rn-Ea.scale)*Ds}Pi?(E.verticalizable=!0,ia.push({glyph:Ia,imageName:Li,x:Zt,y:Ht+Fa,vertical:Pi,scale:Ea.scale,fontStack:Ea.fontStack,sectionIndex:ai,metrics:hi,rect:ti}),Zt+=Ji*Ea.scale+ct):(ia.push({glyph:Ia,imageName:Li,x:Zt,y:Ht+Fa,vertical:Pi,scale:Ea.scale,fontStack:Ea.fontStack,sectionIndex:ai,metrics:hi,rect:ti}),Zt+=hi.advance*Ea.scale+ct)}if(ia.length!==0){var el=Zt-ct;lr=Math.max(el,lr),MM(ia,0,ia.length-1,ln,Oa)}Zt=0;var tl=be*Rn+Oa;la.lineOffset=Math.max(Oa,Xn),Ht+=tl,Ir=Math.max(tl,Ir),++qr}var bs=Ht-Ap,pl=Rm(Me),dl=pl.horizontalAlign,fs=pl.verticalAlign;SM(E.positionedLines,ln,dl,fs,lr,Ir,be,bs,pe.length),E.top+=-fs*bs,E.bottom=E.top+bs,E.left+=-dl*lr,E.right=E.left+lr}function MM(E,C,V,re,pe){if(!(!re&&!pe))for(var be=E[V],Me=be.metrics.advance*be.scale,Fe=(E[V].x+Me)*re,tt=C;tt<=V;tt++)E[tt].x-=Fe,E[tt].y+=pe}function SM(E,C,V,re,pe,be,Me,Fe,tt){var ct=(C-V)*pe,mt=0;be!==Me?mt=-Fe*re-Ap:mt=(-re*tt+.5)*Me;for(var Dt=0,Zt=E;Dt<Zt.length;Dt+=1)for(var Ht=Zt[Dt],lr=0,Ir=Ht.positionedGlyphs;lr<Ir.length;lr+=1){var ln=Ir[lr];ln.x+=ct,ln.y+=mt}}function kM(E,C,V){var re=Rm(V),pe=re.horizontalAlign,be=re.verticalAlign,Me=C[0],Fe=C[1],tt=Me-E.displaySize[0]*pe,ct=tt+E.displaySize[0],mt=Fe-E.displaySize[1]*be,Dt=mt+E.displaySize[1];return{image:E,top:mt,bottom:Dt,left:tt,right:ct}}function Sb(E,C,V,re,pe,be){var Me=E.image,Fe;if(Me.content){var tt=Me.content,ct=Me.pixelRatio||1;Fe=[tt[0]/ct,tt[1]/ct,Me.displaySize[0]-tt[2]/ct,Me.displaySize[1]-tt[3]/ct]}var mt=C.left*be,Dt=C.right*be,Zt,Ht,lr,Ir;V==="width"||V==="both"?(Ir=pe[0]+mt-re[3],Ht=pe[0]+Dt+re[1]):(Ir=pe[0]+(mt+Dt-Me.displaySize[0])/2,Ht=Ir+Me.displaySize[0]);var ln=C.top*be,qr=C.bottom*be;return V==="height"||V==="both"?(Zt=pe[1]+ln-re[0],lr=pe[1]+qr+re[2]):(Zt=pe[1]+(ln+qr-Me.displaySize[1])/2,lr=Zt+Me.displaySize[1]),{image:Me,top:Zt,right:Ht,bottom:lr,left:Ir,collisionPadding:Fe}}var fv=function(E){function C(V,re,pe,be){E.call(this,V,re),this.angle=pe,be!==void 0&&(this.segment=be)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.clone=function(){return new C(this.x,this.y,this.angle,this.segment)},C}(f);Ne("Anchor",fv);var zf=128;function Dm(E,C){var V=C.expression;if(V.kind==="constant"){var re=V.evaluate(new fi(E+1));return{kind:"constant",layoutSize:re}}else{if(V.kind==="source")return{kind:"source"};for(var pe=V.zoomStops,be=V.interpolationType,Me=0;Me<pe.length&&pe[Me]<=E;)Me++;Me=Math.max(0,Me-1);for(var Fe=Me;Fe<pe.length&&pe[Fe]<E+1;)Fe++;Fe=Math.min(pe.length-1,Fe);var tt=pe[Me],ct=pe[Fe];if(V.kind==="composite")return{kind:"composite",minZoom:tt,maxZoom:ct,interpolationType:be};var mt=V.evaluate(new fi(tt)),Dt=V.evaluate(new fi(ct));return{kind:"camera",minZoom:tt,maxZoom:ct,minSize:mt,maxSize:Dt,interpolationType:be}}}function kb(E,C,V){var re=C.uSize,pe=C.uSizeT,be=V.lowerSize,Me=V.upperSize;return E.kind==="source"?be/zf:E.kind==="composite"?go(be/zf,Me/zf,pe):re}function Eb(E,C){var V=0,re=0;if(E.kind==="constant")re=E.layoutSize;else if(E.kind!=="source"){var pe=E.interpolationType,be=E.minZoom,Me=E.maxZoom,Fe=pe?p(mo.interpolationFactor(pe,C,be,Me),0,1):0;E.kind==="camera"?re=go(E.minSize,E.maxSize,Fe):V=Fe}return{uSizeT:V,uSize:re}}var EM=Object.freeze({__proto__:null,getSizeData:Dm,evaluateSizeForFeature:kb,evaluateSizeForZoom:Eb,SIZE_PACK_FACTOR:zf});function Cb(E,C,V,re,pe){if(C.segment===void 0)return!0;for(var be=C,Me=C.segment+1,Fe=0;Fe>-V/2;){if(Me--,Me<0)return!1;Fe-=E[Me].dist(be),be=E[Me]}Fe+=E[Me].dist(E[Me+1]),Me++;for(var tt=[],ct=0;Fe<V/2;){var mt=E[Me-1],Dt=E[Me],Zt=E[Me+1];if(!Zt)return!1;var Ht=mt.angleTo(Dt)-Dt.angleTo(Zt);for(Ht=Math.abs((Ht+3*Math.PI)%(Math.PI*2)-Math.PI),tt.push({distance:Fe,angleDelta:Ht}),ct+=Ht;Fe-tt[0].distance>re;)ct-=tt.shift().angleDelta;if(ct>pe)return!1;Me++,Fe+=Dt.dist(Zt)}return!0}function Lb(E){for(var C=0,V=0;V<E.length-1;V++)C+=E[V].dist(E[V+1]);return C}function Pb(E,C,V){return E?3/5*C*V:0}function Rb(E,C){return Math.max(E?E.right-E.left:0,C?C.right-C.left:0)}function CM(E,C,V,re,pe,be){for(var Me=Pb(V,pe,be),Fe=Rb(V,re)*be,tt=0,ct=Lb(E)/2,mt=0;mt<E.length-1;mt++){var Dt=E[mt],Zt=E[mt+1],Ht=Dt.dist(Zt);if(tt+Ht>ct){var lr=(ct-tt)/Ht,Ir=go(Dt.x,Zt.x,lr),ln=go(Dt.y,Zt.y,lr),qr=new fv(Ir,ln,Zt.angleTo(Dt),mt);return qr._round(),!Me||Cb(E,qr,Fe,Me,C)?qr:void 0}tt+=Ht}}function LM(E,C,V,re,pe,be,Me,Fe,tt){var ct=Pb(re,be,Me),mt=Rb(re,pe),Dt=mt*Me,Zt=E[0].x===0||E[0].x===tt||E[0].y===0||E[0].y===tt;C-Dt<C/4&&(C=Dt+C/4);var Ht=be*2,lr=Zt?C/2*Fe%C:(mt/2+Ht)*Me*Fe%C;return Db(E,lr,C,ct,V,Dt,Zt,!1,tt)}function Db(E,C,V,re,pe,be,Me,Fe,tt){for(var ct=be/2,mt=Lb(E),Dt=0,Zt=C-V,Ht=[],lr=0;lr<E.length-1;lr++){for(var Ir=E[lr],ln=E[lr+1],qr=Ir.dist(ln),Mn=ln.angleTo(Ir);Zt+V<Dt+qr;){Zt+=V;var bn=(Zt-Dt)/qr,An=go(Ir.x,ln.x,bn),Rn=go(Ir.y,ln.y,bn);if(An>=0&&An<tt&&Rn>=0&&Rn<tt&&Zt-ct>=0&&Zt+ct<=mt){var Xn=new fv(An,Rn,Mn,lr);Xn._round(),(!re||Cb(E,Xn,be,re,pe))&&Ht.push(Xn)}}Dt+=qr}return!Fe&&!Ht.length&&!Me&&(Ht=Db(E,Dt/2,V,re,pe,be,Me,!0,tt)),Ht}function Ib(E,C,V,re,pe){for(var be=[],Me=0;Me<E.length;Me++)for(var Fe=E[Me],tt=void 0,ct=0;ct<Fe.length-1;ct++){var mt=Fe[ct],Dt=Fe[ct+1];mt.x<C&&Dt.x<C||(mt.x<C?mt=new f(C,mt.y+(Dt.y-mt.y)*((C-mt.x)/(Dt.x-mt.x)))._round():Dt.x<C&&(Dt=new f(C,mt.y+(Dt.y-mt.y)*((C-mt.x)/(Dt.x-mt.x)))._round()),!(mt.y<V&&Dt.y<V)&&(mt.y<V?mt=new f(mt.x+(Dt.x-mt.x)*((V-mt.y)/(Dt.y-mt.y)),V)._round():Dt.y<V&&(Dt=new f(mt.x+(Dt.x-mt.x)*((V-mt.y)/(Dt.y-mt.y)),V)._round()),!(mt.x>=re&&Dt.x>=re)&&(mt.x>=re?mt=new f(re,mt.y+(Dt.y-mt.y)*((re-mt.x)/(Dt.x-mt.x)))._round():Dt.x>=re&&(Dt=new f(re,mt.y+(Dt.y-mt.y)*((re-mt.x)/(Dt.x-mt.x)))._round()),!(mt.y>=pe&&Dt.y>=pe)&&(mt.y>=pe?mt=new f(mt.x+(Dt.x-mt.x)*((pe-mt.y)/(Dt.y-mt.y)),pe)._round():Dt.y>=pe&&(Dt=new f(mt.x+(Dt.x-mt.x)*((pe-mt.y)/(Dt.y-mt.y)),pe)._round()),(!tt||!mt.equals(tt[tt.length-1]))&&(tt=[mt],be.push(tt)),tt.push(Dt)))))}return be}var cv=$l;function zb(E,C,V,re){var pe=[],be=E.image,Me=be.pixelRatio,Fe=be.paddedRect.w-2*cv,tt=be.paddedRect.h-2*cv,ct=E.right-E.left,mt=E.bottom-E.top,Dt=be.stretchX||[[0,Fe]],Zt=be.stretchY||[[0,tt]],Ht=function(Ri,Si){return Ri+Si[1]-Si[0]},lr=Dt.reduce(Ht,0),Ir=Zt.reduce(Ht,0),ln=Fe-lr,qr=tt-Ir,Mn=0,bn=lr,An=0,Rn=Ir,Xn=0,la=ln,ia=0,Oa=qr;if(be.content&&re){var Ma=be.content;Mn=d0(Dt,0,Ma[0]),An=d0(Zt,0,Ma[1]),bn=d0(Dt,Ma[0],Ma[2]),Rn=d0(Zt,Ma[1],Ma[3]),Xn=Ma[0]-Mn,ia=Ma[1]-An,la=Ma[2]-Ma[0]-bn,Oa=Ma[3]-Ma[1]-Rn}var Ea=function(Ri,Si,ao,uo){var Do=g0(Ri.stretch-Mn,bn,ct,E.left),Ho=m0(Ri.fixed-Xn,la,Ri.stretch,lr),xs=g0(Si.stretch-An,Rn,mt,E.top),is=m0(Si.fixed-ia,Oa,Si.stretch,Ir),el=g0(ao.stretch-Mn,bn,ct,E.left),tl=m0(ao.fixed-Xn,la,ao.stretch,lr),bs=g0(uo.stretch-An,Rn,mt,E.top),pl=m0(uo.fixed-ia,Oa,uo.stretch,Ir),dl=new f(Do,xs),fs=new f(el,xs),ml=new f(el,bs),bu=new f(Do,bs),wc=new f(Ho/Me,is/Me),Hc=new f(tl/Me,pl/Me),Gc=C*Math.PI/180;if(Gc){var Wc=Math.sin(Gc),xv=Math.cos(Gc),sf=[xv,-Wc,Wc,xv];dl._matMult(sf),fs._matMult(sf),bu._matMult(sf),ml._matMult(sf)}var T0=Ri.stretch+Ri.fixed,Vm=ao.stretch+ao.fixed,A0=Si.stretch+Si.fixed,Hm=uo.stretch+uo.fixed,Vu={x:be.paddedRect.x+cv+T0,y:be.paddedRect.y+cv+A0,w:Vm-T0,h:Hm-A0},bv=la/Me/ct,M0=Oa/Me/mt;return{tl:dl,tr:fs,bl:bu,br:ml,tex:Vu,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:wc,pixelOffsetBR:Hc,minFontScaleX:bv,minFontScaleY:M0,isSDF:V}};if(!re||!be.stretchX&&!be.stretchY)pe.push(Ea({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:Fe+1},{fixed:0,stretch:tt+1}));else for(var ai=Fb(Dt,ln,lr),Ia=Fb(Zt,qr,Ir),Fa=0;Fa<ai.length-1;Fa++)for(var hi=ai[Fa],ti=ai[Fa+1],Li=0;Li<Ia.length-1;Li++){var Ji=Ia[Li],Pi=Ia[Li+1];pe.push(Ea(hi,Ji,ti,Pi))}return pe}function d0(E,C,V){for(var re=0,pe=0,be=E;pe<be.length;pe+=1){var Me=be[pe];re+=Math.max(C,Math.min(V,Me[1]))-Math.max(C,Math.min(V,Me[0]))}return re}function Fb(E,C,V){for(var re=[{fixed:-cv,stretch:0}],pe=0,be=E;pe<be.length;pe+=1){var Me=be[pe],Fe=Me[0],tt=Me[1],ct=re[re.length-1];re.push({fixed:Fe-ct.stretch,stretch:ct.stretch}),re.push({fixed:Fe-ct.stretch,stretch:ct.stretch+(tt-Fe)})}return re.push({fixed:C+cv,stretch:V}),re}function g0(E,C,V,re){return E/C*V+re}function m0(E,C,V,re){return E-C*V/re}function PM(E,C,V,re,pe,be,Me,Fe){for(var tt=re.layout.get("text-rotate").evaluate(be,{})*Math.PI/180,ct=[],mt=0,Dt=C.positionedLines;mt<Dt.length;mt+=1)for(var Zt=Dt[mt],Ht=0,lr=Zt.positionedGlyphs;Ht<lr.length;Ht+=1){var Ir=lr[Ht];if(!!Ir.rect){var ln=Ir.rect||{},qr=1,Mn=yb+qr,bn=!0,An=1,Rn=0,Xn=(pe||Fe)&&Ir.vertical,la=Ir.metrics.advance*Ir.scale/2;if(Fe&&C.verticalizable){var ia=(Ir.scale-1)*Ds,Oa=(Ds-Ir.metrics.width*Ir.scale)/2;Rn=Zt.lineOffset/2-(Ir.imageName?-Oa:ia)}if(Ir.imageName){var Ma=Me[Ir.imageName];bn=Ma.sdf,An=Ma.pixelRatio,Mn=$l/An}var Ea=pe?[Ir.x+la,Ir.y]:[0,0],ai=pe?[0,0]:[Ir.x+la+V[0],Ir.y+V[1]-Rn],Ia=[0,0];Xn&&(Ia=ai,ai=[0,0]);var Fa=(Ir.metrics.left-Mn)*Ir.scale-la+ai[0],hi=(-Ir.metrics.top-Mn)*Ir.scale+ai[1],ti=Fa+ln.w*Ir.scale/An,Li=hi+ln.h*Ir.scale/An,Ji=new f(Fa,hi),Pi=new f(ti,hi),Ri=new f(Fa,Li),Si=new f(ti,Li);if(Xn){var ao=new f(-la,la-Ap),uo=-Math.PI/2,Do=Ds/2-la,Ho=Ir.imageName?Do:0,xs=new f(5-Ap-Do,-Ho),is=new(Function.prototype.bind.apply(f,[null].concat(Ia)));Ji._rotateAround(uo,ao)._add(xs)._add(is),Pi._rotateAround(uo,ao)._add(xs)._add(is),Ri._rotateAround(uo,ao)._add(xs)._add(is),Si._rotateAround(uo,ao)._add(xs)._add(is)}if(tt){var el=Math.sin(tt),tl=Math.cos(tt),bs=[tl,-el,el,tl];Ji._matMult(bs),Pi._matMult(bs),Ri._matMult(bs),Si._matMult(bs)}var pl=new f(0,0),dl=new f(0,0),fs=0,ml=0;ct.push({tl:Ji,tr:Pi,bl:Ri,br:Si,tex:ln,writingMode:C.writingMode,glyphOffset:Ea,sectionIndex:Ir.sectionIndex,isSDF:bn,pixelOffsetTL:pl,pixelOffsetBR:dl,minFontScaleX:fs,minFontScaleY:ml})}}return ct}var y0=function(C,V,re,pe,be,Me,Fe,tt,ct,mt){if(this.boxStartIndex=C.length,ct){var Dt=Me.top,Zt=Me.bottom,Ht=Me.collisionPadding;Ht&&(Dt-=Ht[1],Zt+=Ht[3]);var lr=Zt-Dt;lr>0&&(lr=Math.max(10,lr),this.circleDiameter=lr)}else{var Ir=Me.top*Fe-tt,ln=Me.bottom*Fe+tt,qr=Me.left*Fe-tt,Mn=Me.right*Fe+tt,bn=Me.collisionPadding;if(bn&&(qr-=bn[0]*Fe,Ir-=bn[1]*Fe,Mn+=bn[2]*Fe,ln+=bn[3]*Fe),mt){var An=new f(qr,Ir),Rn=new f(Mn,Ir),Xn=new f(qr,ln),la=new f(Mn,ln),ia=mt*Math.PI/180;An._rotate(ia),Rn._rotate(ia),Xn._rotate(ia),la._rotate(ia),qr=Math.min(An.x,Rn.x,Xn.x,la.x),Mn=Math.max(An.x,Rn.x,Xn.x,la.x),Ir=Math.min(An.y,Rn.y,Xn.y,la.y),ln=Math.max(An.y,Rn.y,Xn.y,la.y)}C.emplaceBack(V.x,V.y,qr,Ir,Mn,ln,re,pe,be)}this.boxEndIndex=C.length},hv=function(C,V){if(C===void 0&&(C=[]),V===void 0&&(V=RM),this.data=C,this.length=this.data.length,this.compare=V,this.length>0)for(var re=(this.length>>1)-1;re>=0;re--)this._down(re)};hv.prototype.push=function(C){this.data.push(C),this.length++,this._up(this.length-1)},hv.prototype.pop=function(){if(this.length!==0){var C=this.data[0],V=this.data.pop();return this.length--,this.length>0&&(this.data[0]=V,this._down(0)),C}},hv.prototype.peek=function(){return this.data[0]},hv.prototype._up=function(C){for(var V=this,re=V.data,pe=V.compare,be=re[C];C>0;){var Me=C-1>>1,Fe=re[Me];if(pe(be,Fe)>=0)break;re[C]=Fe,C=Me}re[C]=be},hv.prototype._down=function(C){for(var V=this,re=V.data,pe=V.compare,be=this.length>>1,Me=re[C];C<be;){var Fe=(C<<1)+1,tt=re[Fe],ct=Fe+1;if(ct<this.length&&pe(re[ct],tt)<0&&(Fe=ct,tt=re[ct]),pe(tt,Me)>=0)break;re[C]=tt,C=Fe}re[C]=Me};function RM(E,C){return E<C?-1:E>C?1:0}function DM(E,C,V){C===void 0&&(C=1),V===void 0&&(V=!1);for(var re=1/0,pe=1/0,be=-1/0,Me=-1/0,Fe=E[0],tt=0;tt<Fe.length;tt++){var ct=Fe[tt];(!tt||ct.x<re)&&(re=ct.x),(!tt||ct.y<pe)&&(pe=ct.y),(!tt||ct.x>be)&&(be=ct.x),(!tt||ct.y>Me)&&(Me=ct.y)}var mt=be-re,Dt=Me-pe,Zt=Math.min(mt,Dt),Ht=Zt/2,lr=new hv([],IM);if(Zt===0)return new f(re,pe);for(var Ir=re;Ir<be;Ir+=Zt)for(var ln=pe;ln<Me;ln+=Zt)lr.push(new vv(Ir+Ht,ln+Ht,Ht,E));for(var qr=FM(E),Mn=lr.length;lr.length;){var bn=lr.pop();(bn.d>qr.d||!qr.d)&&(qr=bn,V&&console.log("found best %d after %d probes",Math.round(1e4*bn.d)/1e4,Mn)),!(bn.max-qr.d<=C)&&(Ht=bn.h/2,lr.push(new vv(bn.p.x-Ht,bn.p.y-Ht,Ht,E)),lr.push(new vv(bn.p.x+Ht,bn.p.y-Ht,Ht,E)),lr.push(new vv(bn.p.x-Ht,bn.p.y+Ht,Ht,E)),lr.push(new vv(bn.p.x+Ht,bn.p.y+Ht,Ht,E)),Mn+=4)}return V&&(console.log("num probes: "+Mn),console.log("best distance: "+qr.d)),qr.p}function IM(E,C){return C.max-E.max}function vv(E,C,V,re){this.p=new f(E,C),this.h=V,this.d=zM(this.p,re),this.max=this.d+this.h*Math.SQRT2}function zM(E,C){for(var V=!1,re=1/0,pe=0;pe<C.length;pe++)for(var be=C[pe],Me=0,Fe=be.length,tt=Fe-1;Me<Fe;tt=Me++){var ct=be[Me],mt=be[tt];ct.y>E.y!=mt.y>E.y&&E.x<(mt.x-ct.x)*(E.y-ct.y)/(mt.y-ct.y)+ct.x&&(V=!V),re=Math.min(re,Rf(E,ct,mt))}return(V?1:-1)*Math.sqrt(re)}function FM(E){for(var C=0,V=0,re=0,pe=E[0],be=0,Me=pe.length,Fe=Me-1;be<Me;Fe=be++){var tt=pe[be],ct=pe[Fe],mt=tt.x*ct.y-ct.x*tt.y;V+=(tt.x+ct.x)*mt,re+=(tt.y+ct.y)*mt,C+=mt*3}return new vv(V/C,re/C,0,E)}var pv=7,Im=Number.POSITIVE_INFINITY;function Ob(E,C){function V(pe,be){var Me=0,Fe=0;be<0&&(be=0);var tt=be/Math.sqrt(2);switch(pe){case"top-right":case"top-left":Fe=tt-pv;break;case"bottom-right":case"bottom-left":Fe=-tt+pv;break;case"bottom":Fe=-be+pv;break;case"top":Fe=be-pv;break}switch(pe){case"top-right":case"bottom-right":Me=-tt;break;case"top-left":case"bottom-left":Me=tt;break;case"left":Me=be;break;case"right":Me=-be;break}return[Me,Fe]}function re(pe,be,Me){var Fe=0,tt=0;switch(be=Math.abs(be),Me=Math.abs(Me),pe){case"top-right":case"top-left":case"top":tt=Me-pv;break;case"bottom-right":case"bottom-left":case"bottom":tt=-Me+pv;break}switch(pe){case"top-right":case"bottom-right":case"right":Fe=-be;break;case"top-left":case"bottom-left":case"left":Fe=be;break}return[Fe,tt]}return C[1]!==Im?re(E,C[0],C[1]):V(E,C[0])}function OM(E,C,V,re,pe,be,Me){E.createArrays();var Fe=512*E.overscaling;E.tilePixelRatio=Ha/Fe,E.compareText={},E.iconsNeedLinear=!1;var tt=E.layers[0].layout,ct=E.layers[0]._unevaluatedLayout._values,mt={};if(E.textSizeData.kind==="composite"){var Dt=E.textSizeData,Zt=Dt.minZoom,Ht=Dt.maxZoom;mt.compositeTextSizes=[ct["text-size"].possiblyEvaluate(new fi(Zt),Me),ct["text-size"].possiblyEvaluate(new fi(Ht),Me)]}if(E.iconSizeData.kind==="composite"){var lr=E.iconSizeData,Ir=lr.minZoom,ln=lr.maxZoom;mt.compositeIconSizes=[ct["icon-size"].possiblyEvaluate(new fi(Ir),Me),ct["icon-size"].possiblyEvaluate(new fi(ln),Me)]}mt.layoutTextSize=ct["text-size"].possiblyEvaluate(new fi(E.zoom+1),Me),mt.layoutIconSize=ct["icon-size"].possiblyEvaluate(new fi(E.zoom+1),Me),mt.textMaxSize=ct["text-size"].possiblyEvaluate(new fi(18));for(var qr=tt.get("text-line-height")*Ds,Mn=tt.get("text-rotation-alignment")==="map"&&tt.get("symbol-placement")!=="point",bn=tt.get("text-keep-upright"),An=tt.get("text-size"),Rn=function(){var ia=la[Xn],Oa=tt.get("text-font").evaluate(ia,{},Me).join(","),Ma=An.evaluate(ia,{},Me),Ea=mt.layoutTextSize.evaluate(ia,{},Me),ai=mt.layoutIconSize.evaluate(ia,{},Me),Ia={horizontal:{},vertical:void 0},Fa=ia.text,hi=[0,0];if(Fa){var ti=Fa.toString(),Li=tt.get("text-letter-spacing").evaluate(ia,{},Me)*Ds,Ji=Qr(ti)?Li:0,Pi=tt.get("text-anchor").evaluate(ia,{},Me),Ri=tt.get("text-variable-anchor");if(!Ri){var Si=tt.get("text-radial-offset").evaluate(ia,{},Me);Si?hi=Ob(Pi,[Si*Ds,Im]):hi=tt.get("text-offset").evaluate(ia,{},Me).map(function(wc){return wc*Ds})}var ao=Mn?"center":tt.get("text-justify").evaluate(ia,{},Me),uo=tt.get("symbol-placement"),Do=uo==="point"?tt.get("text-max-width").evaluate(ia,{},Me)*Ds:0,Ho=function(){E.allowVerticalPlacement&&_r(ti)&&(Ia.vertical=p0(Fa,C,V,pe,Oa,Do,qr,Pi,"left",Ji,hi,xu.vertical,!0,uo,Ea,Ma))};if(!Mn&&Ri){for(var xs=ao==="auto"?Ri.map(function(wc){return zm(wc)}):[ao],is=!1,el=0;el<xs.length;el++){var tl=xs[el];if(!Ia.horizontal[tl])if(is)Ia.horizontal[tl]=Ia.horizontal[0];else{var bs=p0(Fa,C,V,pe,Oa,Do,qr,"center",tl,Ji,hi,xu.horizontal,!1,uo,Ea,Ma);bs&&(Ia.horizontal[tl]=bs,is=bs.positionedLines.length===1)}}Ho()}else{ao==="auto"&&(ao=zm(Pi));var pl=p0(Fa,C,V,pe,Oa,Do,qr,Pi,ao,Ji,hi,xu.horizontal,!1,uo,Ea,Ma);pl&&(Ia.horizontal[ao]=pl),Ho(),_r(ti)&&Mn&&bn&&(Ia.vertical=p0(Fa,C,V,pe,Oa,Do,qr,Pi,ao,Ji,hi,xu.vertical,!1,uo,Ea,Ma))}}var dl=void 0,fs=!1;if(ia.icon&&ia.icon.name){var ml=re[ia.icon.name];ml&&(dl=kM(pe[ia.icon.name],tt.get("icon-offset").evaluate(ia,{},Me),tt.get("icon-anchor").evaluate(ia,{},Me)),fs=ml.sdf,E.sdfIcons===void 0?E.sdfIcons=ml.sdf:E.sdfIcons!==ml.sdf&&U("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(ml.pixelRatio!==E.pixelRatio||tt.get("icon-rotate").constantOr(1)!==0)&&(E.iconsNeedLinear=!0))}var bu=Bb(Ia.horizontal)||Ia.vertical;E.iconsInText=bu?bu.iconsInText:!1,(bu||dl)&&NM(E,ia,Ia,dl,re,mt,Ea,ai,hi,fs,Me)},Xn=0,la=E.features;Xn<la.length;Xn+=1)Rn();be&&E.generateCollisionDebugBuffers()}function zm(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function NM(E,C,V,re,pe,be,Me,Fe,tt,ct,mt){var Dt=be.textMaxSize.evaluate(C,{});Dt===void 0&&(Dt=Me);var Zt=E.layers[0].layout,Ht=Zt.get("icon-offset").evaluate(C,{},mt),lr=Bb(V.horizontal),Ir=24,ln=Me/Ir,qr=E.tilePixelRatio*ln,Mn=E.tilePixelRatio*Dt/Ir,bn=E.tilePixelRatio*Fe,An=E.tilePixelRatio*Zt.get("symbol-spacing"),Rn=Zt.get("text-padding")*E.tilePixelRatio,Xn=Zt.get("icon-padding")*E.tilePixelRatio,la=Zt.get("text-max-angle")/180*Math.PI,ia=Zt.get("text-rotation-alignment")==="map"&&Zt.get("symbol-placement")!=="point",Oa=Zt.get("icon-rotation-alignment")==="map"&&Zt.get("symbol-placement")!=="point",Ma=Zt.get("symbol-placement"),Ea=An/2,ai=Zt.get("icon-text-fit"),Ia;re&&ai!=="none"&&(E.allowVerticalPlacement&&V.vertical&&(Ia=Sb(re,V.vertical,ai,Zt.get("icon-text-fit-padding"),Ht,ln)),lr&&(re=Sb(re,lr,ai,Zt.get("icon-text-fit-padding"),Ht,ln)));var Fa=function(xv,sf){sf.x<0||sf.x>=Ha||sf.y<0||sf.y>=Ha||BM(E,sf,xv,V,re,pe,Ia,E.layers[0],E.collisionBoxArray,C.index,C.sourceLayerIndex,E.index,qr,Rn,ia,tt,bn,Xn,Oa,Ht,C,be,ct,mt,Me)};if(Ma==="line")for(var hi=0,ti=Ib(C.geometry,0,0,Ha,Ha);hi<ti.length;hi+=1)for(var Li=ti[hi],Ji=LM(Li,An,la,V.vertical||lr,re,Ir,Mn,E.overscaling,Ha),Pi=0,Ri=Ji;Pi<Ri.length;Pi+=1){var Si=Ri[Pi],ao=lr;(!ao||!UM(E,ao.text,Ea,Si))&&Fa(Li,Si)}else if(Ma==="line-center")for(var uo=0,Do=C.geometry;uo<Do.length;uo+=1){var Ho=Do[uo];if(Ho.length>1){var xs=CM(Ho,la,V.vertical||lr,re,Ir,Mn);xs&&Fa(Ho,xs)}}else if(C.type==="Polygon")for(var is=0,el=Am(C.geometry,0);is<el.length;is+=1){var tl=el[is],bs=DM(tl,16);Fa(tl[0],new fv(bs.x,bs.y,0))}else if(C.type==="LineString")for(var pl=0,dl=C.geometry;pl<dl.length;pl+=1){var fs=dl[pl];Fa(fs,new fv(fs[0].x,fs[0].y,0))}else if(C.type==="Point")for(var ml=0,bu=C.geometry;ml<bu.length;ml+=1)for(var wc=bu[ml],Hc=0,Gc=wc;Hc<Gc.length;Hc+=1){var Wc=Gc[Hc];Fa([Wc],new fv(Wc.x,Wc.y,0))}}var Mp=255,Uc=Mp*zf;function Nb(E,C,V,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr){var Ir=PM(C,V,Fe,pe,be,Me,re,E.allowVerticalPlacement),ln=E.textSizeData,qr=null;ln.kind==="source"?(qr=[zf*pe.layout.get("text-size").evaluate(Me,{})],qr[0]>Uc&&U(E.layerIds[0]+': Value for "text-size" is >= '+Mp+'. Reduce your "text-size".')):ln.kind==="composite"&&(qr=[zf*Ht.compositeTextSizes[0].evaluate(Me,{},lr),zf*Ht.compositeTextSizes[1].evaluate(Me,{},lr)],(qr[0]>Uc||qr[1]>Uc)&&U(E.layerIds[0]+': Value for "text-size" is >= '+Mp+'. Reduce your "text-size".')),E.addSymbols(E.text,Ir,qr,Fe,be,Me,ct,C,tt.lineStartIndex,tt.lineLength,Zt,lr);for(var Mn=0,bn=mt;Mn<bn.length;Mn+=1){var An=bn[Mn];Dt[An]=E.text.placedSymbolArray.length-1}return Ir.length*4}function Bb(E){for(var C in E)return E[C];return null}function BM(E,C,V,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt,Ht,lr,Ir,ln,qr,Mn,bn,An,Rn,Xn,la,ia){var Oa,Ma=E.addToLineVertexArray(C,V),Ea,ai,Ia,Fa,hi=0,ti=0,Li=0,Ji=0,Pi=-1,Ri=-1,Si={},ao=Pe(""),uo=0,Do=0;if(Fe._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Oa=Fe.layout.get("text-offset").evaluate(An,{},la).map(function(Ep){return Ep*Ds}),uo=Oa[0],Do=Oa[1]):(uo=Fe.layout.get("text-radial-offset").evaluate(An,{},la)*Ds,Do=Im),E.allowVerticalPlacement&&re.vertical){var Ho=Fe.layout.get("text-rotate").evaluate(An,{},la),xs=Ho+90,is=re.vertical;Ia=new y0(tt,C,ct,mt,Dt,is,Zt,Ht,lr,xs),Me&&(Fa=new y0(tt,C,ct,mt,Dt,Me,ln,qr,lr,xs))}if(pe){var el=Fe.layout.get("icon-rotate").evaluate(An,{}),tl=Fe.layout.get("icon-text-fit")!=="none",bs=zb(pe,el,Xn,tl),pl=Me?zb(Me,el,Xn,tl):void 0;ai=new y0(tt,C,ct,mt,Dt,pe,ln,qr,!1,el),hi=bs.length*4;var dl=E.iconSizeData,fs=null;dl.kind==="source"?(fs=[zf*Fe.layout.get("icon-size").evaluate(An,{})],fs[0]>Uc&&U(E.layerIds[0]+': Value for "icon-size" is >= '+Mp+'. Reduce your "icon-size".')):dl.kind==="composite"&&(fs=[zf*Rn.compositeIconSizes[0].evaluate(An,{},la),zf*Rn.compositeIconSizes[1].evaluate(An,{},la)],(fs[0]>Uc||fs[1]>Uc)&&U(E.layerIds[0]+': Value for "icon-size" is >= '+Mp+'. Reduce your "icon-size".')),E.addSymbols(E.icon,bs,fs,bn,Mn,An,!1,C,Ma.lineStartIndex,Ma.lineLength,-1,la),Pi=E.icon.placedSymbolArray.length-1,pl&&(ti=pl.length*4,E.addSymbols(E.icon,pl,fs,bn,Mn,An,xu.vertical,C,Ma.lineStartIndex,Ma.lineLength,-1,la),Ri=E.icon.placedSymbolArray.length-1)}for(var ml in re.horizontal){var bu=re.horizontal[ml];if(!Ea){ao=Pe(bu.text);var wc=Fe.layout.get("text-rotate").evaluate(An,{},la);Ea=new y0(tt,C,ct,mt,Dt,bu,Zt,Ht,lr,wc)}var Hc=bu.positionedLines.length===1;if(Li+=Nb(E,C,bu,be,Fe,lr,An,Ir,Ma,re.vertical?xu.horizontal:xu.horizontalOnly,Hc?Object.keys(re.horizontal):[ml],Si,Pi,Rn,la),Hc)break}re.vertical&&(Ji+=Nb(E,C,re.vertical,be,Fe,lr,An,Ir,Ma,xu.vertical,["vertical"],Si,Ri,Rn,la));var Gc=Ea?Ea.boxStartIndex:E.collisionBoxArray.length,Wc=Ea?Ea.boxEndIndex:E.collisionBoxArray.length,xv=Ia?Ia.boxStartIndex:E.collisionBoxArray.length,sf=Ia?Ia.boxEndIndex:E.collisionBoxArray.length,T0=ai?ai.boxStartIndex:E.collisionBoxArray.length,Vm=ai?ai.boxEndIndex:E.collisionBoxArray.length,A0=Fa?Fa.boxStartIndex:E.collisionBoxArray.length,Hm=Fa?Fa.boxEndIndex:E.collisionBoxArray.length,Vu=-1,bv=function(Ep,t2){return Ep&&Ep.circleDiameter?Math.max(Ep.circleDiameter,t2):t2};Vu=bv(Ea,Vu),Vu=bv(Ia,Vu),Vu=bv(ai,Vu),Vu=bv(Fa,Vu);var M0=Vu>-1?1:0;M0&&(Vu*=ia/Ds),E.glyphOffsetArray.length>=Ki.MAX_GLYPHS&&U("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),An.sortKey!==void 0&&E.addToSortKeyRanges(E.symbolInstances.length,An.sortKey),E.symbolInstances.emplaceBack(C.x,C.y,Si.right>=0?Si.right:-1,Si.center>=0?Si.center:-1,Si.left>=0?Si.left:-1,Si.vertical||-1,Pi,Ri,ao,Gc,Wc,xv,sf,T0,Vm,A0,Hm,ct,Li,Ji,hi,ti,M0,0,Zt,uo,Do,Vu)}function UM(E,C,V,re){var pe=E.compareText;if(!(C in pe))pe[C]=[];else for(var be=pe[C],Me=be.length-1;Me>=0;Me--)if(re.dist(be[Me])<V)return!0;return pe[C].push(re),!1}var VM=ov.VectorTileFeature.types,HM=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function x0(E,C,V,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt){var Ht=Fe?Math.min(Uc,Math.round(Fe[0])):0,lr=Fe?Math.min(Uc,Math.round(Fe[1])):0;E.emplaceBack(C,V,Math.round(re*32),Math.round(pe*32),be,Me,(Ht<<1)+(tt?1:0),lr,ct*16,mt*16,Dt*256,Zt*256)}function Fm(E,C,V){E.emplaceBack(C.x,C.y,V),E.emplaceBack(C.x,C.y,V),E.emplaceBack(C.x,C.y,V),E.emplaceBack(C.x,C.y,V)}function GM(E){for(var C=0,V=E.sections;C<V.length;C+=1){var re=V[C];if(aa(re.text))return!0}return!1}var dv=function(C){this.layoutVertexArray=new qf,this.indexArray=new Pf,this.programConfigurations=C,this.segments=new X,this.dynamicLayoutVertexArray=new sp,this.opacityVertexArray=new lp,this.placedSymbolArray=new Fc};dv.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},dv.prototype.upload=function(C,V,re,pe){this.isEmpty()||(re&&(this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,Em.members),this.indexBuffer=C.createIndexBuffer(this.indexArray,V),this.dynamicLayoutVertexBuffer=C.createVertexBuffer(this.dynamicLayoutVertexArray,WA.members,!0),this.opacityVertexBuffer=C.createVertexBuffer(this.opacityVertexArray,HM,!0),this.opacityVertexBuffer.itemSize=1),(re||pe)&&this.programConfigurations.upload(C))},dv.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},Ne("SymbolBuffers",dv);var Sp=function(C,V,re){this.layoutVertexArray=new C,this.layoutAttributes=V,this.indexArray=new re,this.segments=new X,this.collisionVertexArray=new Rl};Sp.prototype.upload=function(C){this.layoutVertexBuffer=C.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=C.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=C.createVertexBuffer(this.collisionVertexArray,YA.members,!0)},Sp.prototype.destroy=function(){!this.layoutVertexBuffer||(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},Ne("CollisionBuffers",Sp);var Ki=function(C){this.collisionBoxArray=C.collisionBoxArray,this.zoom=C.zoom,this.overscaling=C.overscaling,this.layers=C.layers,this.layerIds=this.layers.map(function(tt){return tt.id}),this.index=C.index,this.pixelRatio=C.pixelRatio,this.sourceLayerIndex=C.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=tv([]),this.placementViewportMatrix=tv([]);var V=this.layers[0],re=V._unevaluatedLayout._values;this.textSizeData=Dm(this.zoom,re["text-size"]),this.iconSizeData=Dm(this.zoom,re["icon-size"]);var pe=this.layers[0].layout,be=pe.get("symbol-sort-key"),Me=pe.get("symbol-z-order");this.sortFeaturesByKey=Me!=="viewport-y"&&be.constantOr(1)!==void 0;var Fe=Me==="viewport-y"||Me==="auto"&&!this.sortFeaturesByKey;this.sortFeaturesByY=Fe&&(pe.get("text-allow-overlap")||pe.get("icon-allow-overlap")||pe.get("text-ignore-placement")||pe.get("icon-ignore-placement")),pe.get("symbol-placement")==="point"&&(this.writingModes=pe.get("text-writing-mode").map(function(tt){return xu[tt]})),this.stateDependentLayerIds=this.layers.filter(function(tt){return tt.isStateDependent()}).map(function(tt){return tt.id}),this.sourceID=C.sourceID};Ki.prototype.createArrays=function(){this.text=new dv(new oi(Em.members,this.layers,this.zoom,function(C){return/^text/.test(C)})),this.icon=new dv(new oi(Em.members,this.layers,this.zoom,function(C){return/^icon/.test(C)})),this.glyphOffsetArray=new Bu,this.lineVertexArray=new t0,this.symbolInstances=new e0},Ki.prototype.calculateGlyphDependencies=function(C,V,re,pe,be){for(var Me=0;Me<C.length;Me++)if(V[C.charCodeAt(Me)]=!0,(re||pe)&&be){var Fe=_p[C.charAt(Me)];Fe&&(V[Fe.charCodeAt(0)]=!0)}},Ki.prototype.populate=function(C,V,re){var pe=this.layers[0],be=pe.layout,Me=be.get("text-font"),Fe=be.get("text-field"),tt=be.get("icon-image"),ct=(Fe.value.kind!=="constant"||Fe.value.value instanceof Yi&&!Fe.value.value.isEmpty()||Fe.value.value.toString().length>0)&&(Me.value.kind!=="constant"||Me.value.value.length>0),mt=tt.value.kind!=="constant"||!!tt.value.value||Object.keys(tt.parameters).length>0,Dt=be.get("symbol-sort-key");if(this.features=[],!(!ct&&!mt)){for(var Zt=V.iconDependencies,Ht=V.glyphDependencies,lr=V.availableImages,Ir=new fi(this.zoom),ln=0,qr=C;ln<qr.length;ln+=1){var Mn=qr[ln],bn=Mn.feature,An=Mn.id,Rn=Mn.index,Xn=Mn.sourceLayerIndex,la=pe._featureFilter.needGeometry,ia={type:bn.type,id:An,properties:bn.properties,geometry:la?Gi(bn):[]};if(!!pe._featureFilter.filter(Ir,ia,re)){la||(ia.geometry=Gi(bn));var Oa=void 0;if(ct){var Ma=pe.getValueAndResolveTokens("text-field",ia,re,lr),Ea=Yi.factory(Ma);GM(Ea)&&(this.hasRTLText=!0),(!this.hasRTLText||bo()==="unavailable"||this.hasRTLText&&Za.isParsed())&&(Oa=ZA(Ea,pe,ia))}var ai=void 0;if(mt){var Ia=pe.getValueAndResolveTokens("icon-image",ia,re,lr);Ia instanceof Oo?ai=Ia:ai=Oo.fromString(Ia)}if(!(!Oa&&!ai)){var Fa=this.sortFeaturesByKey?Dt.evaluate(ia,{},re):void 0,hi={id:An,text:Oa,icon:ai,index:Rn,sourceLayerIndex:Xn,geometry:Gi(bn),properties:bn.properties,type:VM[bn.type],sortKey:Fa};if(this.features.push(hi),ai&&(Zt[ai.name]=!0),Oa){var ti=Me.evaluate(ia,{},re).join(","),Li=be.get("text-rotation-alignment")==="map"&&be.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(xu.vertical)>=0;for(var Ji=0,Pi=Oa.sections;Ji<Pi.length;Ji+=1){var Ri=Pi[Ji];if(Ri.image)Zt[Ri.image.name]=!0;else{var Si=_r(Oa.toString()),ao=Ri.fontStack||ti,uo=Ht[ao]=Ht[ao]||{};this.calculateGlyphDependencies(Ri.text,uo,Li,this.allowVerticalPlacement,Si)}}}}}}be.get("symbol-placement")==="line"&&(this.features=KA(this.features)),this.sortFeaturesByKey&&this.features.sort(function(Do,Ho){return Do.sortKey-Ho.sortKey})}},Ki.prototype.update=function(C,V,re){!this.stateDependentLayers.length||(this.text.programConfigurations.updatePaintArrays(C,V,this.layers,re),this.icon.programConfigurations.updatePaintArrays(C,V,this.layers,re))},Ki.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},Ki.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ki.prototype.upload=function(C){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(C),this.iconCollisionBox.upload(C)),this.text.upload(C,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(C,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ki.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ki.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ki.prototype.addToLineVertexArray=function(C,V){var re=this.lineVertexArray.length;if(C.segment!==void 0){for(var pe=C.dist(V[C.segment+1]),be=C.dist(V[C.segment]),Me={},Fe=C.segment+1;Fe<V.length;Fe++)Me[Fe]={x:V[Fe].x,y:V[Fe].y,tileUnitDistanceFromAnchor:pe},Fe<V.length-1&&(pe+=V[Fe+1].dist(V[Fe]));for(var tt=C.segment||0;tt>=0;tt--)Me[tt]={x:V[tt].x,y:V[tt].y,tileUnitDistanceFromAnchor:be},tt>0&&(be+=V[tt-1].dist(V[tt]));for(var ct=0;ct<V.length;ct++){var mt=Me[ct];this.lineVertexArray.emplaceBack(mt.x,mt.y,mt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:re,lineLength:this.lineVertexArray.length-re}},Ki.prototype.addSymbols=function(C,V,re,pe,be,Me,Fe,tt,ct,mt,Dt,Zt){for(var Ht=C.indexArray,lr=C.layoutVertexArray,Ir=C.segments.prepareSegment(4*V.length,lr,Ht,Me.sortKey),ln=this.glyphOffsetArray.length,qr=Ir.vertexLength,Mn=this.allowVerticalPlacement&&Fe===xu.vertical?Math.PI/2:0,bn=Me.text&&Me.text.sections,An=0;An<V.length;An++){var Rn=V[An],Xn=Rn.tl,la=Rn.tr,ia=Rn.bl,Oa=Rn.br,Ma=Rn.tex,Ea=Rn.pixelOffsetTL,ai=Rn.pixelOffsetBR,Ia=Rn.minFontScaleX,Fa=Rn.minFontScaleY,hi=Rn.glyphOffset,ti=Rn.isSDF,Li=Rn.sectionIndex,Ji=Ir.vertexLength,Pi=hi[1];x0(lr,tt.x,tt.y,Xn.x,Pi+Xn.y,Ma.x,Ma.y,re,ti,Ea.x,Ea.y,Ia,Fa),x0(lr,tt.x,tt.y,la.x,Pi+la.y,Ma.x+Ma.w,Ma.y,re,ti,ai.x,Ea.y,Ia,Fa),x0(lr,tt.x,tt.y,ia.x,Pi+ia.y,Ma.x,Ma.y+Ma.h,re,ti,Ea.x,ai.y,Ia,Fa),x0(lr,tt.x,tt.y,Oa.x,Pi+Oa.y,Ma.x+Ma.w,Ma.y+Ma.h,re,ti,ai.x,ai.y,Ia,Fa),Fm(C.dynamicLayoutVertexArray,tt,Mn),Ht.emplaceBack(Ji,Ji+1,Ji+2),Ht.emplaceBack(Ji+1,Ji+2,Ji+3),Ir.vertexLength+=4,Ir.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(hi[0]),(An===V.length-1||Li!==V[An+1].sectionIndex)&&C.programConfigurations.populatePaintArrays(lr.length,Me,Me.index,{},Zt,bn&&bn[Li])}C.placedSymbolArray.emplaceBack(tt.x,tt.y,ln,this.glyphOffsetArray.length-ln,qr,ct,mt,tt.segment,re?re[0]:0,re?re[1]:0,pe[0],pe[1],Fe,0,!1,0,Dt)},Ki.prototype._addCollisionDebugVertex=function(C,V,re,pe,be,Me){return V.emplaceBack(0,0),C.emplaceBack(re.x,re.y,pe,be,Math.round(Me.x),Math.round(Me.y))},Ki.prototype.addCollisionDebugVertices=function(C,V,re,pe,be,Me,Fe){var tt=be.segments.prepareSegment(4,be.layoutVertexArray,be.indexArray),ct=tt.vertexLength,mt=be.layoutVertexArray,Dt=be.collisionVertexArray,Zt=Fe.anchorX,Ht=Fe.anchorY;this._addCollisionDebugVertex(mt,Dt,Me,Zt,Ht,new f(C,V)),this._addCollisionDebugVertex(mt,Dt,Me,Zt,Ht,new f(re,V)),this._addCollisionDebugVertex(mt,Dt,Me,Zt,Ht,new f(re,pe)),this._addCollisionDebugVertex(mt,Dt,Me,Zt,Ht,new f(C,pe)),tt.vertexLength+=4;var lr=be.indexArray;lr.emplaceBack(ct,ct+1),lr.emplaceBack(ct+1,ct+2),lr.emplaceBack(ct+2,ct+3),lr.emplaceBack(ct+3,ct),tt.primitiveLength+=4},Ki.prototype.addDebugCollisionBoxes=function(C,V,re,pe){for(var be=C;be<V;be++){var Me=this.collisionBoxArray.get(be),Fe=Me.x1,tt=Me.y1,ct=Me.x2,mt=Me.y2;this.addCollisionDebugVertices(Fe,tt,ct,mt,pe?this.textCollisionBox:this.iconCollisionBox,Me.anchorPoint,re)}},Ki.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Sp(Jh,vb.members,_h),this.iconCollisionBox=new Sp(Jh,vb.members,_h);for(var C=0;C<this.symbolInstances.length;C++){var V=this.symbolInstances.get(C);this.addDebugCollisionBoxes(V.textBoxStartIndex,V.textBoxEndIndex,V,!0),this.addDebugCollisionBoxes(V.verticalTextBoxStartIndex,V.verticalTextBoxEndIndex,V,!0),this.addDebugCollisionBoxes(V.iconBoxStartIndex,V.iconBoxEndIndex,V,!1),this.addDebugCollisionBoxes(V.verticalIconBoxStartIndex,V.verticalIconBoxEndIndex,V,!1)}},Ki.prototype._deserializeCollisionBoxesForSymbol=function(C,V,re,pe,be,Me,Fe,tt,ct){for(var mt={},Dt=V;Dt<re;Dt++){var Zt=C.get(Dt);mt.textBox={x1:Zt.x1,y1:Zt.y1,x2:Zt.x2,y2:Zt.y2,anchorPointX:Zt.anchorPointX,anchorPointY:Zt.anchorPointY},mt.textFeatureIndex=Zt.featureIndex;break}for(var Ht=pe;Ht<be;Ht++){var lr=C.get(Ht);mt.verticalTextBox={x1:lr.x1,y1:lr.y1,x2:lr.x2,y2:lr.y2,anchorPointX:lr.anchorPointX,anchorPointY:lr.anchorPointY},mt.verticalTextFeatureIndex=lr.featureIndex;break}for(var Ir=Me;Ir<Fe;Ir++){var ln=C.get(Ir);mt.iconBox={x1:ln.x1,y1:ln.y1,x2:ln.x2,y2:ln.y2,anchorPointX:ln.anchorPointX,anchorPointY:ln.anchorPointY},mt.iconFeatureIndex=ln.featureIndex;break}for(var qr=tt;qr<ct;qr++){var Mn=C.get(qr);mt.verticalIconBox={x1:Mn.x1,y1:Mn.y1,x2:Mn.x2,y2:Mn.y2,anchorPointX:Mn.anchorPointX,anchorPointY:Mn.anchorPointY},mt.verticalIconFeatureIndex=Mn.featureIndex;break}return mt},Ki.prototype.deserializeCollisionBoxes=function(C){this.collisionArrays=[];for(var V=0;V<this.symbolInstances.length;V++){var re=this.symbolInstances.get(V);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(C,re.textBoxStartIndex,re.textBoxEndIndex,re.verticalTextBoxStartIndex,re.verticalTextBoxEndIndex,re.iconBoxStartIndex,re.iconBoxEndIndex,re.verticalIconBoxStartIndex,re.verticalIconBoxEndIndex))}},Ki.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ki.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ki.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ki.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ki.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ki.prototype.addIndicesForPlacedSymbol=function(C,V){for(var re=C.placedSymbolArray.get(V),pe=re.vertexStartIndex+re.numGlyphs*4,be=re.vertexStartIndex;be<pe;be+=4)C.indexArray.emplaceBack(be,be+1,be+2),C.indexArray.emplaceBack(be+1,be+2,be+3)},Ki.prototype.getSortedSymbolIndexes=function(C){if(this.sortedAngle===C&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var V=Math.sin(C),re=Math.cos(C),pe=[],be=[],Me=[],Fe=0;Fe<this.symbolInstances.length;++Fe){Me.push(Fe);var tt=this.symbolInstances.get(Fe);pe.push(Math.round(V*tt.anchorX+re*tt.anchorY)|0),be.push(tt.featureIndex)}return Me.sort(function(ct,mt){return pe[ct]-pe[mt]||be[mt]-be[ct]}),Me},Ki.prototype.addToSortKeyRanges=function(C,V){var re=this.sortKeyRanges[this.sortKeyRanges.length-1];re&&re.sortKey===V?re.symbolInstanceEnd=C+1:this.sortKeyRanges.push({sortKey:V,symbolInstanceStart:C,symbolInstanceEnd:C+1})},Ki.prototype.sortFeatures=function(C){var V=this;if(!!this.sortFeaturesByY&&this.sortedAngle!==C&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(C),this.sortedAngle=C,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var re=0,pe=this.symbolInstanceIndexes;re<pe.length;re+=1){var be=pe[re],Me=this.symbolInstances.get(be);this.featureSortOrder.push(Me.featureIndex),[Me.rightJustifiedTextSymbolIndex,Me.centerJustifiedTextSymbolIndex,Me.leftJustifiedTextSymbolIndex].forEach(function(Fe,tt,ct){Fe>=0&&ct.indexOf(Fe)===tt&&V.addIndicesForPlacedSymbol(V.text,Fe)}),Me.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Me.verticalPlacedTextSymbolIndex),Me.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.placedIconSymbolIndex),Me.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Me.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},Ne("SymbolBucket",Ki,{omit:["layers","collisionBoxArray","features","compareText"]}),Ki.MAX_GLYPHS=65535,Ki.addDynamicAttributes=Fm;function WM(E,C){return C.replace(/{([^{}]+)}/g,function(V,re){return re in E?String(E[re]):""})}var YM=new Qi({"symbol-placement":new Na(cr.layout_symbol["symbol-placement"]),"symbol-spacing":new Na(cr.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Na(cr.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Ka(cr.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Na(cr.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Na(cr.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Na(cr.layout_symbol["icon-ignore-placement"]),"icon-optional":new Na(cr.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Na(cr.layout_symbol["icon-rotation-alignment"]),"icon-size":new Ka(cr.layout_symbol["icon-size"]),"icon-text-fit":new Na(cr.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Na(cr.layout_symbol["icon-text-fit-padding"]),"icon-image":new Ka(cr.layout_symbol["icon-image"]),"icon-rotate":new Ka(cr.layout_symbol["icon-rotate"]),"icon-padding":new Na(cr.layout_symbol["icon-padding"]),"icon-keep-upright":new Na(cr.layout_symbol["icon-keep-upright"]),"icon-offset":new Ka(cr.layout_symbol["icon-offset"]),"icon-anchor":new Ka(cr.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Na(cr.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Na(cr.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Na(cr.layout_symbol["text-rotation-alignment"]),"text-field":new Ka(cr.layout_symbol["text-field"]),"text-font":new Ka(cr.layout_symbol["text-font"]),"text-size":new Ka(cr.layout_symbol["text-size"]),"text-max-width":new Ka(cr.layout_symbol["text-max-width"]),"text-line-height":new Na(cr.layout_symbol["text-line-height"]),"text-letter-spacing":new Ka(cr.layout_symbol["text-letter-spacing"]),"text-justify":new Ka(cr.layout_symbol["text-justify"]),"text-radial-offset":new Ka(cr.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Na(cr.layout_symbol["text-variable-anchor"]),"text-anchor":new Ka(cr.layout_symbol["text-anchor"]),"text-max-angle":new Na(cr.layout_symbol["text-max-angle"]),"text-writing-mode":new Na(cr.layout_symbol["text-writing-mode"]),"text-rotate":new Ka(cr.layout_symbol["text-rotate"]),"text-padding":new Na(cr.layout_symbol["text-padding"]),"text-keep-upright":new Na(cr.layout_symbol["text-keep-upright"]),"text-transform":new Ka(cr.layout_symbol["text-transform"]),"text-offset":new Ka(cr.layout_symbol["text-offset"]),"text-allow-overlap":new Na(cr.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Na(cr.layout_symbol["text-ignore-placement"]),"text-optional":new Na(cr.layout_symbol["text-optional"])}),jM=new Qi({"icon-opacity":new Ka(cr.paint_symbol["icon-opacity"]),"icon-color":new Ka(cr.paint_symbol["icon-color"]),"icon-halo-color":new Ka(cr.paint_symbol["icon-halo-color"]),"icon-halo-width":new Ka(cr.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Ka(cr.paint_symbol["icon-halo-blur"]),"icon-translate":new Na(cr.paint_symbol["icon-translate"]),"icon-translate-anchor":new Na(cr.paint_symbol["icon-translate-anchor"]),"text-opacity":new Ka(cr.paint_symbol["text-opacity"]),"text-color":new Ka(cr.paint_symbol["text-color"],{runtimeType:ua,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new Ka(cr.paint_symbol["text-halo-color"]),"text-halo-width":new Ka(cr.paint_symbol["text-halo-width"]),"text-halo-blur":new Ka(cr.paint_symbol["text-halo-blur"]),"text-translate":new Na(cr.paint_symbol["text-translate"]),"text-translate-anchor":new Na(cr.paint_symbol["text-translate-anchor"])}),Om={paint:jM,layout:YM},gv=function(C){this.type=C.property.overrides?C.property.overrides.runtimeType:Un,this.defaultValue=C};gv.prototype.evaluate=function(C){if(C.formattedSection){var V=this.defaultValue.property.overrides;if(V&&V.hasOverride(C.formattedSection))return V.getOverride(C.formattedSection)}return C.feature&&C.featureState?this.defaultValue.evaluate(C.feature,C.featureState):this.defaultValue.property.specification.default},gv.prototype.eachChild=function(C){if(!this.defaultValue.isConstant()){var V=this.defaultValue.value;C(V._styleExpression.expression)}},gv.prototype.outputDefined=function(){return!1},gv.prototype.serialize=function(){return null},Ne("FormatSectionOverride",gv,{omit:["defaultValue"]});var XM=function(E){function C(V){E.call(this,V,Om)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.recalculate=function(re,pe){if(E.prototype.recalculate.call(this,re,pe),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout.get("symbol-placement")!=="point"?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var be=this.layout.get("text-writing-mode");if(be){for(var Me=[],Fe=0,tt=be;Fe<tt.length;Fe+=1){var ct=tt[Fe];Me.indexOf(ct)<0&&Me.push(ct)}this.layout._values["text-writing-mode"]=Me}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},C.prototype.getValueAndResolveTokens=function(re,pe,be,Me){var Fe=this.layout.get(re).evaluate(pe,{},be,Me),tt=this._unevaluatedLayout._values[re];return!tt.isDataDriven()&&!Co(tt.value)&&Fe?WM(pe.properties,Fe):Fe},C.prototype.createBucket=function(re){return new Ki(re)},C.prototype.queryRadius=function(){return 0},C.prototype.queryIntersectsFeature=function(){return!1},C.prototype._setPaintOverrides=function(){for(var re=0,pe=Om.paint.overridableProperties;re<pe.length;re+=1){var be=pe[re];if(!!C.hasPaintOverride(this.layout,be)){var Me=this.paint.get(be),Fe=new gv(Me),tt=new Cs(Fe,Me.property.specification),ct=null;Me.value.kind==="constant"||Me.value.kind==="source"?ct=new ef("source",tt):ct=new Ls("composite",tt,Me.value.zoomStops,Me.value._interpolationType),this.paint._values[be]=new Zi(Me.property,ct,Me.parameters)}}},C.prototype._handleOverridablePaintPropertyUpdate=function(re,pe,be){return!this.layout||pe.isDataDriven()||be.isDataDriven()?!1:C.hasPaintOverride(this.layout,re)},C.hasPaintOverride=function(re,pe){var be=re.get("text-field"),Me=Om.paint.properties[pe],Fe=!1,tt=function(Dt){for(var Zt=0,Ht=Dt;Zt<Ht.length;Zt+=1){var lr=Ht[Zt];if(Me.overrides&&Me.overrides.hasOverride(lr)){Fe=!0;return}}};if(be.value.kind==="constant"&&be.value.value instanceof Yi)tt(be.value.value.sections);else if(be.value.kind==="source"){var ct=function(Dt){if(!Fe)if(Dt instanceof to&&Fi(Dt.value)===vs){var Zt=Dt.value;tt(Zt.sections)}else Dt instanceof ws?tt(Dt.sections):Dt.eachChild(ct)},mt=be.value;mt._styleExpression&&ct(mt._styleExpression.expression)}return Fe},C}(Vs),ZM=new Qi({"background-color":new Na(cr.paint_background["background-color"]),"background-pattern":new so(cr.paint_background["background-pattern"]),"background-opacity":new Na(cr.paint_background["background-opacity"])}),KM={paint:ZM},JM=function(E){function C(V){E.call(this,V,KM)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Vs),QM=new Qi({"raster-opacity":new Na(cr.paint_raster["raster-opacity"]),"raster-hue-rotate":new Na(cr.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Na(cr.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Na(cr.paint_raster["raster-brightness-max"]),"raster-saturation":new Na(cr.paint_raster["raster-saturation"]),"raster-contrast":new Na(cr.paint_raster["raster-contrast"]),"raster-resampling":new Na(cr.paint_raster["raster-resampling"]),"raster-fade-duration":new Na(cr.paint_raster["raster-fade-duration"])}),$M={paint:QM},qM=function(E){function C(V){E.call(this,V,$M)}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C}(Vs);function eS(E){var C=[],V=E.id;return V===void 0&&C.push({message:"layers."+V+': missing required property "id"'}),E.render===void 0&&C.push({message:"layers."+V+': missing required method "render"'}),E.renderingMode&&E.renderingMode!=="2d"&&E.renderingMode!=="3d"&&C.push({message:"layers."+V+': property "renderingMode" must be either "2d" or "3d"'}),C}var tS=function(E){function C(V){E.call(this,V,{}),this.implementation=V}return E&&(C.__proto__=E),C.prototype=Object.create(E&&E.prototype),C.prototype.constructor=C,C.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},C.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},C.prototype.recalculate=function(){},C.prototype.updateTransitions=function(){},C.prototype.hasTransition=function(){},C.prototype.serialize=function(){},C.prototype.onAdd=function(re){this.implementation.onAdd&&this.implementation.onAdd(re,re.painter.context.gl)},C.prototype.onRemove=function(re){this.implementation.onRemove&&this.implementation.onRemove(re,re.painter.context.gl)},C}(Vs),rS={circle:P5,heatmap:z5,hillshade:N5,fill:uA,"fill-extrusion":CA,line:HA,symbol:XM,background:JM,raster:qM};function nS(E){return E.type==="custom"?new tS(E):new rS[E.type](E)}var Ub=self.HTMLImageElement,Vb=self.HTMLCanvasElement,Hb=self.HTMLVideoElement,Gb=self.ImageData,b0=self.ImageBitmap,Sh=function(C,V,re,pe){this.context=C,this.format=re,this.texture=C.gl.createTexture(),this.update(V,pe)};Sh.prototype.update=function(C,V,re){var pe=C.width,be=C.height,Me=(!this.size||this.size[0]!==pe||this.size[1]!==be)&&!re,Fe=this,tt=Fe.context,ct=tt.gl;if(this.useMipmap=Boolean(V&&V.useMipmap),ct.bindTexture(ct.TEXTURE_2D,this.texture),tt.pixelStoreUnpackFlipY.set(!1),tt.pixelStoreUnpack.set(1),tt.pixelStoreUnpackPremultiplyAlpha.set(this.format===ct.RGBA&&(!V||V.premultiply!==!1)),Me)this.size=[pe,be],C instanceof Ub||C instanceof Vb||C instanceof Hb||C instanceof Gb||b0&&C instanceof b0?ct.texImage2D(ct.TEXTURE_2D,0,this.format,this.format,ct.UNSIGNED_BYTE,C):ct.texImage2D(ct.TEXTURE_2D,0,this.format,pe,be,0,this.format,ct.UNSIGNED_BYTE,C.data);else{var mt=re||{x:0,y:0},Dt=mt.x,Zt=mt.y;C instanceof Ub||C instanceof Vb||C instanceof Hb||C instanceof Gb||b0&&C instanceof b0?ct.texSubImage2D(ct.TEXTURE_2D,0,Dt,Zt,ct.RGBA,ct.UNSIGNED_BYTE,C):ct.texSubImage2D(ct.TEXTURE_2D,0,Dt,Zt,pe,be,ct.RGBA,ct.UNSIGNED_BYTE,C.data)}this.useMipmap&&this.isSizePowerOfTwo()&&ct.generateMipmap(ct.TEXTURE_2D)},Sh.prototype.bind=function(C,V,re){var pe=this,be=pe.context,Me=be.gl;Me.bindTexture(Me.TEXTURE_2D,this.texture),re===Me.LINEAR_MIPMAP_NEAREST&&!this.isSizePowerOfTwo()&&(re=Me.LINEAR),C!==this.filter&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MAG_FILTER,C),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_MIN_FILTER,re||C),this.filter=C),V!==this.wrap&&(Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_S,V),Me.texParameteri(Me.TEXTURE_2D,Me.TEXTURE_WRAP_T,V),this.wrap=V)},Sh.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Sh.prototype.destroy=function(){var C=this.context,V=C.gl;V.deleteTexture(this.texture),this.texture=null};var Nm=function(C){var V=this;this._callback=C,this._triggered=!1,typeof MessageChannel!="undefined"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){V._triggered=!1,V._callback()})};Nm.prototype.trigger=function(){var C=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){C._triggered=!1,C._callback()},0))},Nm.prototype.remove=function(){delete this._channel,this._callback=function(){}};var mv=function(C,V,re){this.target=C,this.parent=V,this.mapId=re,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},S(["receive","process"],this),this.invoker=new Nm(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=ee()?C:self};mv.prototype.send=function(C,V,re,pe,be){var Me=this;be===void 0&&(be=!1);var Fe=Math.round(Math.random()*1e18).toString(36).substring(0,10);re&&(this.callbacks[Fe]=re);var tt=J(this.globalScope)?void 0:[];return this.target.postMessage({id:Fe,type:C,hasCallback:!!re,targetMapId:pe,mustQueue:be,sourceMapId:this.mapId,data:Ct(V,tt)},tt),{cancel:function(){re&&delete Me.callbacks[Fe],Me.target.postMessage({id:Fe,type:"<cancel>",targetMapId:pe,sourceMapId:Me.mapId})}}},mv.prototype.receive=function(C){var V=C.data,re=V.id;if(!!re&&!(V.targetMapId&&this.mapId!==V.targetMapId))if(V.type==="<cancel>"){delete this.tasks[re];var pe=this.cancelCallbacks[re];delete this.cancelCallbacks[re],pe&&pe()}else ee()||V.mustQueue?(this.tasks[re]=V,this.taskQueue.push(re),this.invoker.trigger()):this.processTask(re,V)},mv.prototype.process=function(){if(!!this.taskQueue.length){var C=this.taskQueue.shift(),V=this.tasks[C];delete this.tasks[C],this.taskQueue.length&&this.invoker.trigger(),!!V&&this.processTask(C,V)}},mv.prototype.processTask=function(C,V){var re=this;if(V.type==="<response>"){var pe=this.callbacks[C];delete this.callbacks[C],pe&&(V.error?pe(Ut(V.error)):pe(null,Ut(V.data)))}else{var be=!1,Me=J(this.globalScope)?void 0:[],Fe=V.hasCallback?function(Zt,Ht){be=!0,delete re.cancelCallbacks[C],re.target.postMessage({id:C,type:"<response>",sourceMapId:re.mapId,error:Zt?Ct(Zt):null,data:Ct(Ht,Me)},Me)}:function(Zt){be=!0},tt=null,ct=Ut(V.data);if(this.parent[V.type])tt=this.parent[V.type](V.sourceMapId,ct,Fe);else if(this.parent.getWorkerSource){var mt=V.type.split("."),Dt=this.parent.getWorkerSource(V.sourceMapId,mt[0],ct.source);tt=Dt[mt[1]](ct,Fe)}else Fe(new Error("Could not find function "+V.type));!be&&tt&&tt.cancel&&(this.cancelCallbacks[C]=tt.cancel)}},mv.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};function aS(E,C,V){C=Math.pow(2,V)-C-1;var re=Wb(E*256,C*256,V),pe=Wb((E+1)*256,(C+1)*256,V);return re[0]+","+re[1]+","+pe[0]+","+pe[1]}function Wb(E,C,V){var re=2*Math.PI*6378137/256/Math.pow(2,V),pe=E*re-2*Math.PI*6378137/2,be=C*re-2*Math.PI*6378137/2;return[pe,be]}var ns=function(C,V){C&&(V?this.setSouthWest(C).setNorthEast(V):C.length===4?this.setSouthWest([C[0],C[1]]).setNorthEast([C[2],C[3]]):this.setSouthWest(C[0]).setNorthEast(C[1]))};ns.prototype.setNorthEast=function(C){return this._ne=C instanceof _o?new _o(C.lng,C.lat):_o.convert(C),this},ns.prototype.setSouthWest=function(C){return this._sw=C instanceof _o?new _o(C.lng,C.lat):_o.convert(C),this},ns.prototype.extend=function(C){var V=this._sw,re=this._ne,pe,be;if(C instanceof _o)pe=C,be=C;else if(C instanceof ns){if(pe=C._sw,be=C._ne,!pe||!be)return this}else{if(Array.isArray(C))if(C.length===4||C.every(Array.isArray)){var Me=C;return this.extend(ns.convert(Me))}else{var Fe=C;return this.extend(_o.convert(Fe))}return this}return!V&&!re?(this._sw=new _o(pe.lng,pe.lat),this._ne=new _o(be.lng,be.lat)):(V.lng=Math.min(pe.lng,V.lng),V.lat=Math.min(pe.lat,V.lat),re.lng=Math.max(be.lng,re.lng),re.lat=Math.max(be.lat,re.lat)),this},ns.prototype.getCenter=function(){return new _o((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ns.prototype.getSouthWest=function(){return this._sw},ns.prototype.getNorthEast=function(){return this._ne},ns.prototype.getNorthWest=function(){return new _o(this.getWest(),this.getNorth())},ns.prototype.getSouthEast=function(){return new _o(this.getEast(),this.getSouth())},ns.prototype.getWest=function(){return this._sw.lng},ns.prototype.getSouth=function(){return this._sw.lat},ns.prototype.getEast=function(){return this._ne.lng},ns.prototype.getNorth=function(){return this._ne.lat},ns.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ns.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ns.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ns.prototype.contains=function(C){var V=_o.convert(C),re=V.lng,pe=V.lat,be=this._sw.lat<=pe&&pe<=this._ne.lat,Me=this._sw.lng<=re&&re<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Me=this._sw.lng>=re&&re>=this._ne.lng),be&&Me},ns.convert=function(C){return!C||C instanceof ns?C:new ns(C)};var Yb=63710088e-1,_o=function(C,V){if(isNaN(C)||isNaN(V))throw new Error("Invalid LngLat object: ("+C+", "+V+")");if(this.lng=+C,this.lat=+V,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};_o.prototype.wrap=function(){return new _o(y(this.lng,-180,180),this.lat)},_o.prototype.toArray=function(){return[this.lng,this.lat]},_o.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},_o.prototype.distanceTo=function(C){var V=Math.PI/180,re=this.lat*V,pe=C.lat*V,be=Math.sin(re)*Math.sin(pe)+Math.cos(re)*Math.cos(pe)*Math.cos((C.lng-this.lng)*V),Me=Yb*Math.acos(Math.min(be,1));return Me},_o.prototype.toBounds=function(C){C===void 0&&(C=0);var V=40075017,re=360*C/V,pe=re/Math.cos(Math.PI/180*this.lat);return new ns(new _o(this.lng-pe,this.lat-re),new _o(this.lng+pe,this.lat+re))},_o.convert=function(C){if(C instanceof _o)return C;if(Array.isArray(C)&&(C.length===2||C.length===3))return new _o(Number(C[0]),Number(C[1]));if(!Array.isArray(C)&&typeof C=="object"&&C!==null)return new _o(Number("lng"in C?C.lng:C.lon),Number(C.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var jb=2*Math.PI*Yb;function Xb(E){return jb*Math.cos(E*Math.PI/180)}function Zb(E){return(180+E)/360}function Kb(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function Jb(E,C){return E/Xb(C)}function iS(E){return E*360-180}function Bm(E){var C=180-E*360;return 360/Math.PI*Math.atan(Math.exp(C*Math.PI/180))-90}function oS(E,C){return E*Xb(Bm(C))}function sS(E){return 1/Math.cos(E*Math.PI/180)}var kh=function(C,V,re){re===void 0&&(re=0),this.x=+C,this.y=+V,this.z=+re};kh.fromLngLat=function(C,V){V===void 0&&(V=0);var re=_o.convert(C);return new kh(Zb(re.lng),Kb(re.lat),Jb(V,re.lat))},kh.prototype.toLngLat=function(){return new _o(iS(this.x),Bm(this.y))},kh.prototype.toAltitude=function(){return oS(this.z,this.y)},kh.prototype.meterInMercatorCoordinateUnits=function(){return 1/jb*sS(Bm(this.y))};var Eh=function(C,V,re){this.z=C,this.x=V,this.y=re,this.key=kp(0,C,C,V,re)};Eh.prototype.equals=function(C){return this.z===C.z&&this.x===C.x&&this.y===C.y},Eh.prototype.url=function(C,V){var re=aS(this.x,this.y,this.z),pe=lS(this.z,this.x,this.y);return C[(this.x+this.y)%C.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(V==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",pe).replace("{bbox-epsg-3857}",re)},Eh.prototype.getTilePoint=function(C){var V=Math.pow(2,this.z);return new f((C.x*V-this.x)*Ha,(C.y*V-this.y)*Ha)},Eh.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Qb=function(C,V){this.wrap=C,this.canonical=V,this.key=kp(C,V.z,V.z,V.x,V.y)},as=function(C,V,re,pe,be){this.overscaledZ=C,this.wrap=V,this.canonical=new Eh(re,+pe,+be),this.key=kp(V,C,re,pe,be)};as.prototype.equals=function(C){return this.overscaledZ===C.overscaledZ&&this.wrap===C.wrap&&this.canonical.equals(C.canonical)},as.prototype.scaledTo=function(C){var V=this.canonical.z-C;return C>this.canonical.z?new as(C,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new as(C,this.wrap,C,this.canonical.x>>V,this.canonical.y>>V)},as.prototype.calculateScaledKey=function(C,V){var re=this.canonical.z-C;return C>this.canonical.z?kp(this.wrap*+V,C,this.canonical.z,this.canonical.x,this.canonical.y):kp(this.wrap*+V,C,C,this.canonical.x>>re,this.canonical.y>>re)},as.prototype.isChildOf=function(C){if(C.wrap!==this.wrap)return!1;var V=this.canonical.z-C.canonical.z;return C.overscaledZ===0||C.overscaledZ<this.overscaledZ&&C.canonical.x===this.canonical.x>>V&&C.canonical.y===this.canonical.y>>V},as.prototype.children=function(C){if(this.overscaledZ>=C)return[new as(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var V=this.canonical.z+1,re=this.canonical.x*2,pe=this.canonical.y*2;return[new as(V,this.wrap,V,re,pe),new as(V,this.wrap,V,re+1,pe),new as(V,this.wrap,V,re,pe+1),new as(V,this.wrap,V,re+1,pe+1)]},as.prototype.isLessThan=function(C){return this.wrap<C.wrap?!0:this.wrap>C.wrap?!1:this.overscaledZ<C.overscaledZ?!0:this.overscaledZ>C.overscaledZ?!1:this.canonical.x<C.canonical.x?!0:this.canonical.x>C.canonical.x?!1:this.canonical.y<C.canonical.y},as.prototype.wrapped=function(){return new as(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},as.prototype.unwrapTo=function(C){return new as(this.overscaledZ,C,this.canonical.z,this.canonical.x,this.canonical.y)},as.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},as.prototype.toUnwrapped=function(){return new Qb(this.wrap,this.canonical)},as.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},as.prototype.getTilePoint=function(C){return this.canonical.getTilePoint(new kh(C.x-this.wrap,C.y))};function kp(E,C,V,re,pe){E*=2,E<0&&(E=E*-1-1);var be=1<<V;return(be*be*E+be*pe+re).toString(36)+V.toString(36)+C.toString(36)}function lS(E,C,V){for(var re="",pe,be=E;be>0;be--)pe=1<<be-1,re+=(C&pe?1:0)+(V&pe?2:0);return re}Ne("CanonicalTileID",Eh),Ne("OverscaledTileID",as,{omit:["posMatrix"]});var bc=function(C,V,re){if(this.uid=C,V.height!==V.width)throw new RangeError("DEM tiles must be square");if(re&&re!=="mapbox"&&re!=="terrarium")return U('"'+re+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=V.height;var pe=this.dim=V.height-2;this.data=new Uint32Array(V.data.buffer),this.encoding=re||"mapbox";for(var be=0;be<pe;be++)this.data[this._idx(-1,be)]=this.data[this._idx(0,be)],this.data[this._idx(pe,be)]=this.data[this._idx(pe-1,be)],this.data[this._idx(be,-1)]=this.data[this._idx(be,0)],this.data[this._idx(be,pe)]=this.data[this._idx(be,pe-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(pe,-1)]=this.data[this._idx(pe-1,0)],this.data[this._idx(-1,pe)]=this.data[this._idx(0,pe-1)],this.data[this._idx(pe,pe)]=this.data[this._idx(pe-1,pe-1)]};bc.prototype.get=function(C,V){var re=new Uint8Array(this.data.buffer),pe=this._idx(C,V)*4,be=this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox;return be(re[pe],re[pe+1],re[pe+2])},bc.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},bc.prototype._idx=function(C,V){if(C<-1||C>=this.dim+1||V<-1||V>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(V+1)*this.stride+(C+1)},bc.prototype._unpackMapbox=function(C,V,re){return(C*256*256+V*256+re)/10-1e4},bc.prototype._unpackTerrarium=function(C,V,re){return C*256+V+re/256-32768},bc.prototype.getPixels=function(){return new zl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},bc.prototype.backfillBorder=function(C,V,re){if(this.dim!==C.dim)throw new Error("dem dimension mismatch");var pe=V*this.dim,be=V*this.dim+this.dim,Me=re*this.dim,Fe=re*this.dim+this.dim;switch(V){case-1:pe=be-1;break;case 1:be=pe+1;break}switch(re){case-1:Me=Fe-1;break;case 1:Fe=Me+1;break}for(var tt=-V*this.dim,ct=-re*this.dim,mt=Me;mt<Fe;mt++)for(var Dt=pe;Dt<be;Dt++)this.data[this._idx(Dt,mt)]=C.data[this._idx(Dt+tt,mt+ct)]},Ne("DEMData",bc);function uS(E,C){var V={};if(!C)return V;for(var re=function(){var Me=be[pe],Fe=Me.layerIds.map(function(Dt){return C.getLayer(Dt)}).filter(Boolean);if(Fe.length!==0){Me.layers=Fe,Me.stateDependentLayerIds&&(Me.stateDependentLayers=Me.stateDependentLayerIds.map(function(Dt){return Fe.filter(function(Zt){return Zt.id===Dt})[0]}));for(var tt=0,ct=Fe;tt<ct.length;tt+=1){var mt=ct[tt];V[mt.id]=Me}}},pe=0,be=E;pe<be.length;pe+=1)re();return V}var _0=function(C){this._stringToNumber={},this._numberToString=[];for(var V=0;V<C.length;V++){var re=C[V];this._stringToNumber[re]=V,this._numberToString[V]=re}};_0.prototype.encode=function(C){return this._stringToNumber[C]},_0.prototype.decode=function(C){return this._numberToString[C]};var w0=function(C,V,re,pe,be){this.type="Feature",this._vectorTileFeature=C,C._z=V,C._x=re,C._y=pe,this.properties=C.properties,this.id=be},Um={geometry:{configurable:!0}};Um.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Um.geometry.set=function(E){this._geometry=E},w0.prototype.toJSON=function(){var C={geometry:this.geometry};for(var V in this)V==="_geometry"||V==="_vectorTileFeature"||(C[V]=this[V]);return C},Object.defineProperties(w0.prototype,Um);var yv=function(){this.state={},this.stateChanges={},this.deletedStates={}};yv.prototype.updateState=function(C,V,re){var pe=String(V);if(this.stateChanges[C]=this.stateChanges[C]||{},this.stateChanges[C][pe]=this.stateChanges[C][pe]||{},M(this.stateChanges[C][pe],re),this.deletedStates[C]===null){this.deletedStates[C]={};for(var be in this.state[C])be!==pe&&(this.deletedStates[C][be]=null)}else{var Me=this.deletedStates[C]&&this.deletedStates[C][pe]===null;if(Me){this.deletedStates[C][pe]={};for(var Fe in this.state[C][pe])re[Fe]||(this.deletedStates[C][pe][Fe]=null)}else for(var tt in re){var ct=this.deletedStates[C]&&this.deletedStates[C][pe]&&this.deletedStates[C][pe][tt]===null;ct&&delete this.deletedStates[C][pe][tt]}}},yv.prototype.removeFeatureState=function(C,V,re){var pe=this.deletedStates[C]===null;if(!pe){var be=String(V);if(this.deletedStates[C]=this.deletedStates[C]||{},re&&V!==void 0)this.deletedStates[C][be]!==null&&(this.deletedStates[C][be]=this.deletedStates[C][be]||{},this.deletedStates[C][be][re]=null);else if(V!==void 0){var Me=this.stateChanges[C]&&this.stateChanges[C][be];if(Me){this.deletedStates[C][be]={};for(re in this.stateChanges[C][be])this.deletedStates[C][be][re]=null}else this.deletedStates[C][be]=null}else this.deletedStates[C]=null}},yv.prototype.getState=function(C,V){var re=String(V),pe=this.state[C]||{},be=this.stateChanges[C]||{},Me=M({},pe[re],be[re]);if(this.deletedStates[C]===null)return{};if(this.deletedStates[C]){var Fe=this.deletedStates[C][V];if(Fe===null)return{};for(var tt in Fe)delete Me[tt]}return Me},yv.prototype.initializeTileState=function(C,V){C.setFeatureState(this.state,V)},yv.prototype.coalesceChanges=function(C,V){var re={};for(var pe in this.stateChanges){this.state[pe]=this.state[pe]||{};var be={};for(var Me in this.stateChanges[pe])this.state[pe][Me]||(this.state[pe][Me]={}),M(this.state[pe][Me],this.stateChanges[pe][Me]),be[Me]=this.state[pe][Me];re[pe]=be}for(var Fe in this.deletedStates){this.state[Fe]=this.state[Fe]||{};var tt={};if(this.deletedStates[Fe]===null)for(var ct in this.state[Fe])tt[ct]={},this.state[Fe][ct]={};else for(var mt in this.deletedStates[Fe]){var Dt=this.deletedStates[Fe][mt]===null;if(Dt)this.state[Fe][mt]={};else for(var Zt=0,Ht=Object.keys(this.deletedStates[Fe][mt]);Zt<Ht.length;Zt+=1){var lr=Ht[Zt];delete this.state[Fe][mt][lr]}tt[mt]=this.state[Fe][mt]}re[Fe]=re[Fe]||{},M(re[Fe],tt)}if(this.stateChanges={},this.deletedStates={},Object.keys(re).length!==0)for(var Ir in C){var ln=C[Ir];ln.setFeatureState(re,V)}};var _c=function(C,V){this.tileID=C,this.x=C.canonical.x,this.y=C.canonical.y,this.z=C.canonical.z,this.grid=new jo(Ha,16,0),this.grid3D=new jo(Ha,16,0),this.featureIndexArray=new hp,this.promoteId=V};_c.prototype.insert=function(C,V,re,pe,be,Me){var Fe=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(re,pe,be);for(var tt=Me?this.grid3D:this.grid,ct=0;ct<V.length;ct++){for(var mt=V[ct],Dt=[1/0,1/0,-1/0,-1/0],Zt=0;Zt<mt.length;Zt++){var Ht=mt[Zt];Dt[0]=Math.min(Dt[0],Ht.x),Dt[1]=Math.min(Dt[1],Ht.y),Dt[2]=Math.max(Dt[2],Ht.x),Dt[3]=Math.max(Dt[3],Ht.y)}Dt[0]<Ha&&Dt[1]<Ha&&Dt[2]>=0&&Dt[3]>=0&&tt.insert(Fe,Dt[0],Dt[1],Dt[2],Dt[3])}},_c.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new ov.VectorTile(new c0(this.rawTileData)).layers,this.sourceLayerCoder=new _0(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},_c.prototype.query=function(C,V,re,pe){var be=this;this.loadVTLayers();for(var Me=C.params||{},Fe=Ha/C.tileSize/C.scale,tt=Qf(Me.filter),ct=C.queryGeometry,mt=C.queryPadding*Fe,Dt=qb(ct),Zt=this.grid.query(Dt.minX-mt,Dt.minY-mt,Dt.maxX+mt,Dt.maxY+mt),Ht=qb(C.cameraQueryGeometry),lr=this.grid3D.query(Ht.minX-mt,Ht.minY-mt,Ht.maxX+mt,Ht.maxY+mt,function(Xn,la,ia,Oa){return nc(C.cameraQueryGeometry,Xn-mt,la-mt,ia+mt,Oa+mt)}),Ir=0,ln=lr;Ir<ln.length;Ir+=1){var qr=ln[Ir];Zt.push(qr)}Zt.sort(fS);for(var Mn={},bn,An=function(Xn){var la=Zt[Xn];if(la!==bn){bn=la;var ia=be.featureIndexArray.get(la),Oa=null;be.loadMatchingFeature(Mn,ia.bucketIndex,ia.sourceLayerIndex,ia.featureIndex,tt,Me.layers,Me.availableImages,V,re,pe,function(Ma,Ea,ai){return Oa||(Oa=Gi(Ma)),Ea.queryIntersectsFeature(ct,Ma,ai,Oa,be.z,C.transform,Fe,C.pixelPosMatrix)})}},Rn=0;Rn<Zt.length;Rn++)An(Rn);return Mn},_c.prototype.loadMatchingFeature=function(C,V,re,pe,be,Me,Fe,tt,ct,mt,Dt){var Zt=this.bucketLayerIDs[V];if(!(Me&&!I(Me,Zt))){var Ht=this.sourceLayerCoder.decode(re),lr=this.vtLayers[Ht],Ir=lr.feature(pe);if(!!be.filter(new fi(this.tileID.overscaledZ),Ir))for(var ln=this.getId(Ir,Ht),qr=0;qr<Zt.length;qr++){var Mn=Zt[qr];if(!(Me&&Me.indexOf(Mn)<0)){var bn=tt[Mn];if(!!bn){var An={};ln!==void 0&&mt&&(An=mt.getState(bn.sourceLayer||"_geojsonTileLayer",ln));var Rn=ct[Mn];Rn.paint=$b(Rn.paint,bn.paint,Ir,An,Fe),Rn.layout=$b(Rn.layout,bn.layout,Ir,An,Fe);var Xn=!Dt||Dt(Ir,bn,An);if(!!Xn){var la=new w0(Ir,this.z,this.x,this.y,ln);la.layer=Rn;var ia=C[Mn];ia===void 0&&(ia=C[Mn]=[]),ia.push({featureIndex:pe,feature:la,intersectionZ:Xn})}}}}}},_c.prototype.lookupSymbolFeatures=function(C,V,re,pe,be,Me,Fe,tt){var ct={};this.loadVTLayers();for(var mt=Qf(be),Dt=0,Zt=C;Dt<Zt.length;Dt+=1){var Ht=Zt[Dt];this.loadMatchingFeature(ct,re,pe,Ht,mt,Me,Fe,tt,V)}return ct},_c.prototype.hasLayer=function(C){for(var V=0,re=this.bucketLayerIDs;V<re.length;V+=1)for(var pe=re[V],be=0,Me=pe;be<Me.length;be+=1){var Fe=Me[be];if(C===Fe)return!0}return!1},_c.prototype.getId=function(C,V){var re=C.id;if(this.promoteId){var pe=typeof this.promoteId=="string"?this.promoteId:this.promoteId[V];re=C.properties[pe],typeof re=="boolean"&&(re=Number(re))}return re},Ne("FeatureIndex",_c,{omit:["rawTileData","sourceLayerCoder"]});function $b(E,C,V,re,pe){return P(E,function(be,Me){var Fe=C instanceof Hi?C.get(Me):null;return Fe&&Fe.evaluate?Fe.evaluate(V,re,pe):Fe})}function qb(E){for(var C=1/0,V=1/0,re=-1/0,pe=-1/0,be=0,Me=E;be<Me.length;be+=1){var Fe=Me[be];C=Math.min(C,Fe.x),V=Math.min(V,Fe.y),re=Math.max(re,Fe.x),pe=Math.max(pe,Fe.y)}return{minX:C,minY:V,maxX:re,maxY:pe}}function fS(E,C){return C-E}var cS=3e4,ys=function(C,V){this.tileID=C,this.uid=w(),this.uses=0,this.tileSize=V,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};ys.prototype.registerFadeDuration=function(C){var V=C+this.timeAdded;V<$.now()||this.fadeEndTime&&V<this.fadeEndTime||(this.fadeEndTime=V)},ys.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},ys.prototype.loadVectorData=function(C,V,re){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!C){this.collisionBoxArray=new rc;return}C.featureIndex&&(this.latestFeatureIndex=C.featureIndex,C.rawTileData?(this.latestRawTileData=C.rawTileData,this.latestFeatureIndex.rawTileData=C.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=C.collisionBoxArray,this.buckets=uS(C.buckets,V.style),this.hasSymbolBuckets=!1;for(var pe in this.buckets){var be=this.buckets[pe];if(be instanceof Ki)if(this.hasSymbolBuckets=!0,re)be.justReloaded=!0;else break}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Me in this.buckets){var Fe=this.buckets[Me];if(Fe instanceof Ki&&Fe.hasRTLText){this.hasRTLText=!0,Ci();break}}this.queryPadding=0;for(var tt in this.buckets){var ct=this.buckets[tt];this.queryPadding=Math.max(this.queryPadding,V.style.getLayer(tt).queryRadius(ct))}C.imageAtlas&&(this.imageAtlas=C.imageAtlas),C.glyphAtlasImage&&(this.glyphAtlasImage=C.glyphAtlasImage)},ys.prototype.unloadVectorData=function(){for(var C in this.buckets)this.buckets[C].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},ys.prototype.getBucket=function(C){return this.buckets[C.id]},ys.prototype.upload=function(C){for(var V in this.buckets){var re=this.buckets[V];re.uploadPending()&&re.upload(C)}var pe=C.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Sh(C,this.imageAtlas.image,pe.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Sh(C,this.glyphAtlasImage,pe.ALPHA),this.glyphAtlasImage=null)},ys.prototype.prepare=function(C){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(C,this.imageAtlasTexture)},ys.prototype.queryRenderedFeatures=function(C,V,re,pe,be,Me,Fe,tt,ct,mt){return!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData?{}:this.latestFeatureIndex.query({queryGeometry:pe,cameraQueryGeometry:be,scale:Me,tileSize:this.tileSize,pixelPosMatrix:mt,transform:tt,params:Fe,queryPadding:this.queryPadding*ct},C,V,re)},ys.prototype.querySourceFeatures=function(C,V){var re=this.latestFeatureIndex;if(!(!re||!re.rawTileData)){var pe=re.loadVTLayers(),be=V?V.sourceLayer:"",Me=pe._geojsonTileLayer||pe[be];if(!!Me)for(var Fe=Qf(V&&V.filter),tt=this.tileID.canonical,ct=tt.z,mt=tt.x,Dt=tt.y,Zt={z:ct,x:mt,y:Dt},Ht=0;Ht<Me.length;Ht++){var lr=Me.feature(Ht);if(Fe.filter(new fi(this.tileID.overscaledZ),lr)){var Ir=re.getId(lr,be),ln=new w0(lr,ct,mt,Dt,Ir);ln.tile=Zt,C.push(ln)}}}},ys.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},ys.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},ys.prototype.setExpiryData=function(C){var V=this.expirationTime;if(C.cacheControl){var re=q(C.cacheControl);re["max-age"]&&(this.expirationTime=Date.now()+re["max-age"]*1e3)}else C.expires&&(this.expirationTime=new Date(C.expires).getTime());if(this.expirationTime){var pe=Date.now(),be=!1;if(this.expirationTime>pe)be=!1;else if(!V)be=!0;else if(this.expirationTime<V)be=!0;else{var Me=this.expirationTime-V;Me?this.expirationTime=pe+Math.max(Me,cS):be=!0}be?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},ys.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},ys.prototype.setFeatureState=function(C,V){if(!(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(C).length===0)){var re=this.latestFeatureIndex.loadVTLayers();for(var pe in this.buckets)if(!!V.style.hasLayer(pe)){var be=this.buckets[pe],Me=be.layers[0].sourceLayer||"_geojsonTileLayer",Fe=re[Me],tt=C[Me];if(!(!Fe||!tt||Object.keys(tt).length===0)){be.update(tt,Fe,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ct=V&&V.style&&V.style.getLayer(pe);ct&&(this.queryPadding=Math.max(this.queryPadding,ct.queryRadius(be)))}}}},ys.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},ys.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$.now()},ys.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},ys.prototype.setHoldDuration=function(C){this.symbolFadeHoldUntil=$.now()+C},ys.prototype.setDependencies=function(C,V){for(var re={},pe=0,be=V;pe<be.length;pe+=1){var Me=be[pe];re[Me]=!0}this.dependencies[C]=re},ys.prototype.hasDependency=function(C,V){for(var re=0,pe=C;re<pe.length;re+=1){var be=pe[re],Me=this.dependencies[be];if(Me)for(var Fe=0,tt=V;Fe<tt.length;Fe+=1){var ct=tt[Fe];if(Me[ct])return!0}}return!1};var hS=["type","source","source-layer","minzoom","maxzoom","filter","layout"],Vc=self.performance,e2=function(C){this._marks={start:[C.url,"start"].join("#"),end:[C.url,"end"].join("#"),measure:C.url.toString()},Vc.mark(this._marks.start)};e2.prototype.finish=function(){Vc.mark(this._marks.end);var C=Vc.getEntriesByName(this._marks.measure);return C.length===0&&(Vc.measure(this._marks.measure,this._marks.start,this._marks.end),C=Vc.getEntriesByName(this._marks.measure),Vc.clearMarks(this._marks.start),Vc.clearMarks(this._marks.end),Vc.clearMeasures(this._marks.measure)),C},t.Actor=mv,t.AlphaImage=Mh,t.CanonicalTileID=Eh,t.CollisionBoxArray=rc,t.Color=di,t.DEMData=bc,t.DataConstantProperty=Na,t.DictionaryCoder=_0,t.EXTENT=Ha,t.ErrorEvent=wr,t.EvaluationParameters=fi,t.Event=tn,t.Evented=gr,t.FeatureIndex=_c,t.FillBucket=Df,t.FillExtrusionBucket=If,t.ImageAtlas=Tp,t.ImagePosition=v0,t.LineBucket=Fl,t.LngLat=_o,t.LngLatBounds=ns,t.MercatorCoordinate=kh,t.ONE_EM=Ds,t.OverscaledTileID=as,t.Point=f,t.Point$1=f,t.Properties=Qi,t.Protobuf=c0,t.RGBAImage=zl,t.RequestManager=Oe,t.RequestPerformance=e2,t.ResourceType=dr,t.SegmentVector=X,t.SourceFeatureState=yv,t.StructArrayLayout1ui2=zc,t.StructArrayLayout2f1f2i16=Lf,t.StructArrayLayout2i4=yh,t.StructArrayLayout3ui6=Pf,t.StructArrayLayout4i8=$f,t.SymbolBucket=Ki,t.Texture=Sh,t.Tile=ys,t.Transitionable=So,t.Uniform1f=Nr,t.Uniform1i=Vr,t.Uniform2f=Kr,t.Uniform3f=hn,t.Uniform4f=Sn,t.UniformColor=Nn,t.UniformMatrix4f=ta,t.UnwrappedTileID=Qb,t.ValidationError=ar,t.WritingMode=xu,t.ZoomHistory=Yt,t.add=nv,t.addDynamicAttributes=Fm,t.asyncAll=g,t.bezier=h,t.bindAll=S,t.browser=$,t.cacheEntryPossiblyAdded=Je,t.clamp=p,t.clearTileCache=Et,t.clipLine=Ib,t.clone=a0,t.clone$1=F,t.clone$2=dm,t.collisionCircleLayout=jA,t.config=ae,t.create=ev,t.create$1=Th,t.create$2=wh,t.createCommonjsModule=i,t.createExpression=Fu,t.createLayout=Zo,t.createStyleLayer=nS,t.cross=w5,t.deepEqual=o,t.dot=_5,t.dot$1=k5,t.ease=d,t.emitValidationErrors=Mo,t.endsWith=k,t.enforceCacheSizeLimit=gt,t.evaluateSizeForFeature=kb,t.evaluateSizeForZoom=Eb,t.evaluateVariableOffset=Ob,t.evented=bi,t.extend=M,t.featureFilter=Qf,t.filterObject=O,t.fromRotation=qh,t.getAnchorAlignment=Rm,t.getAnchorJustification=zm,t.getArrayBuffer=De,t.getImage=xr,t.getJSON=Se,t.getRTLTextPluginStatus=bo,t.getReferrer=kr,t.getVideo=Tr,t.identity=tv,t.invert=Oc,t.isChar=Xt,t.isMapboxURL=He,t.keysDifference=b,t.makeRequest=we,t.mapObject=P,t.mercatorXfromLng=Zb,t.mercatorYfromLat=Kb,t.mercatorZfromAltitude=Jb,t.mul=pm,t.multiply=Nc,t.mvt=ov,t.normalize=pp,t.number=go,t.offscreenCanvasSupported=or,t.ortho=vm,t.parseGlyphPBF=xM,t.pbf=c0,t.performSymbolLayout=OM,t.perspective=vp,t.pick=_,t.plugin=Za,t.polygonIntersectsPolygon=li,t.postMapLoadEvent=Mt,t.postTurnstileEvent=Bt,t.potpack=xb,t.refProperties=hS,t.register=Ne,t.registerForPluginStateChange=Ni,t.rotate=$s,t.rotateX=Il,t.rotateZ=rv,t.scale=Dl,t.scale$1=S5,t.scale$2=mm,t.setCacheLimits=rr,t.setRTLTextPlugin=va,t.sphericalToCartesian=Z,t.sqrLen=L5,t.styleSpec=cr,t.sub=A5,t.symbolSize=EM,t.transformMat3=T5,t.transformMat4=i0,t.translate=Vo,t.triggerPluginCompletionEvent=za,t.uniqueId=w,t.validateCustomStyleLayer=eS,t.validateLight=Ti,t.validateStyle=Po,t.values=A,t.vectorTile=ov,t.version=a,t.warnOnce=U,t.webpSupported=ie,t.window=self,t.wrap=y}),x(["./shared"],function(t){function i(et){var we=typeof et;if(we==="number"||we==="boolean"||we==="string"||et===void 0||et===null)return JSON.stringify(et);if(Array.isArray(et)){for(var Se="[",De=0,je=et;De<je.length;De+=1){var $e=je[De];Se+=i($e)+","}return Se+"]"}for(var ot=Object.keys(et).sort(),st="{",pt=0;pt<ot.length;pt++)st+=JSON.stringify(ot[pt])+":"+i(et[ot[pt]])+",";return st+"}"}function a(et){for(var we="",Se=0,De=t.refProperties;Se<De.length;Se+=1){var je=De[Se];we+="/"+i(et[je])}return we}function r(et,we){for(var Se={},De=0;De<et.length;De++){var je=we&&we[et[De].id]||a(et[De]);we&&(we[et[De].id]=je);var $e=Se[je];$e||($e=Se[je]=[]),$e.push(et[De])}var ot=[];for(var st in Se)ot.push(Se[st]);return ot}var n=function(we){this.keyCache={},we&&this.replace(we)};n.prototype.replace=function(we){this._layerConfigs={},this._layers={},this.update(we,[])},n.prototype.update=function(we,Se){for(var De=this,je=0,$e=we;je<$e.length;je+=1){var ot=$e[je];this._layerConfigs[ot.id]=ot;var st=this._layers[ot.id]=t.createStyleLayer(ot);st._featureFilter=t.featureFilter(st.filter),this.keyCache[ot.id]&&delete this.keyCache[ot.id]}for(var pt=0,wt=Se;pt<wt.length;pt+=1){var Wt=wt[pt];delete this.keyCache[Wt],delete this._layerConfigs[Wt],delete this._layers[Wt]}this.familiesBySource={};for(var yr=r(t.values(this._layerConfigs),this.keyCache),xr=0,Tr=yr;xr<Tr.length;xr+=1){var mr=Tr[xr],Rr=mr.map(function(Ar){return De._layers[Ar.id]}),tn=Rr[0];if(tn.visibility!=="none"){var wr=tn.source||"",gr=this.familiesBySource[wr];gr||(gr=this.familiesBySource[wr]={});var mn=tn.sourceLayer||"_geojsonTileLayer",Gr=gr[mn];Gr||(Gr=gr[mn]=[]),Gr.push(Rr)}}};var f=1,l=function(we){var Se={},De=[];for(var je in we){var $e=we[je],ot=Se[je]={};for(var st in $e){var pt=$e[+st];if(!(!pt||pt.bitmap.width===0||pt.bitmap.height===0)){var wt={x:0,y:0,w:pt.bitmap.width+2*f,h:pt.bitmap.height+2*f};De.push(wt),ot[st]={rect:wt,metrics:pt.metrics}}}}var Wt=t.potpack(De),yr=Wt.w,xr=Wt.h,Tr=new t.AlphaImage({width:yr||1,height:xr||1});for(var mr in we){var Rr=we[mr];for(var tn in Rr){var wr=Rr[+tn];if(!(!wr||wr.bitmap.width===0||wr.bitmap.height===0)){var gr=Se[mr][tn].rect;t.AlphaImage.copy(wr.bitmap,Tr,{x:0,y:0},{x:gr.x+f,y:gr.y+f},wr.bitmap)}}}this.image=Tr,this.positions=Se};t.register("GlyphAtlas",l);var o=function(we){this.tileID=new t.OverscaledTileID(we.tileID.overscaledZ,we.tileID.wrap,we.tileID.canonical.z,we.tileID.canonical.x,we.tileID.canonical.y),this.uid=we.uid,this.zoom=we.zoom,this.pixelRatio=we.pixelRatio,this.tileSize=we.tileSize,this.source=we.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=we.showCollisionBoxes,this.collectResourceTiming=!!we.collectResourceTiming,this.returnDependencies=!!we.returnDependencies,this.promoteId=we.promoteId};o.prototype.parse=function(we,Se,De,je,$e){var ot=this;this.status="parsing",this.data=we,this.collisionBoxArray=new t.CollisionBoxArray;var st=new t.DictionaryCoder(Object.keys(we.layers).sort()),pt=new t.FeatureIndex(this.tileID,this.promoteId);pt.bucketLayerIDs=[];var wt={},Wt={featureIndex:pt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:De},yr=Se.familiesBySource[this.source];for(var xr in yr){var Tr=we.layers[xr];if(!!Tr){Tr.version===1&&t.warnOnce('Vector tile source "'+this.source+'" layer "'+xr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var mr=st.encode(xr),Rr=[],tn=0;tn<Tr.length;tn++){var wr=Tr.feature(tn),gr=pt.getId(wr,xr);Rr.push({feature:wr,id:gr,index:tn,sourceLayerIndex:mr})}for(var mn=0,Gr=yr[xr];mn<Gr.length;mn+=1){var Ar=Gr[mn],nn=Ar[0];if(!(nn.minzoom&&this.zoom<Math.floor(nn.minzoom))&&!(nn.maxzoom&&this.zoom>=nn.maxzoom)&&nn.visibility!=="none"){c(Ar,this.zoom,De);var fn=wt[nn.id]=nn.createBucket({index:pt.bucketLayerIDs.length,layers:Ar,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:mr,sourceID:this.source});fn.populate(Rr,Wt,this.tileID.canonical),pt.bucketLayerIDs.push(Ar.map(function(br){return br.id}))}}}}var jr,at,Ft,er,hr=t.mapObject(Wt.glyphDependencies,function(br){return Object.keys(br).map(Number)});Object.keys(hr).length?je.send("getGlyphs",{uid:this.uid,stacks:hr},function(br,Xr){jr||(jr=br,at=Xr,Pr.call(ot))}):at={};var Wr=Object.keys(Wt.iconDependencies);Wr.length?je.send("getImages",{icons:Wr,source:this.source,tileID:this.tileID,type:"icons"},function(br,Xr){jr||(jr=br,Ft=Xr,Pr.call(ot))}):Ft={};var zr=Object.keys(Wt.patternDependencies);zr.length?je.send("getImages",{icons:zr,source:this.source,tileID:this.tileID,type:"patterns"},function(br,Xr){jr||(jr=br,er=Xr,Pr.call(ot))}):er={},Pr.call(this);function Pr(){if(jr)return $e(jr);if(at&&Ft&&er){var br=new l(at),Xr=new t.ImageAtlas(Ft,er);for(var Fn in wt){var kn=wt[Fn];kn instanceof t.SymbolBucket?(c(kn.layers,this.zoom,De),t.performSymbolLayout(kn,at,br.positions,Ft,Xr.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):kn.hasPattern&&(kn instanceof t.LineBucket||kn instanceof t.FillBucket||kn instanceof t.FillExtrusionBucket)&&(c(kn.layers,this.zoom,De),kn.addFeatures(Wt,this.tileID.canonical,Xr.patternPositions))}this.status="done",$e(null,{buckets:t.values(wt).filter(function(ra){return!ra.isEmpty()}),featureIndex:pt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:br.image,imageAtlas:Xr,glyphMap:this.returnDependencies?at:null,iconMap:this.returnDependencies?Ft:null,glyphPositions:this.returnDependencies?br.positions:null})}}};function c(et,we,Se){for(var De=new t.EvaluationParameters(we),je=0,$e=et;je<$e.length;je+=1){var ot=$e[je];ot.recalculate(De,Se)}}function h(et,we){var Se=t.getArrayBuffer(et.request,function(De,je,$e,ot){De?we(De):je&&we(null,{vectorTile:new t.vectorTile.VectorTile(new t.pbf(je)),rawData:je,cacheControl:$e,expires:ot})});return function(){Se.cancel(),we()}}var d=function(we,Se,De,je){this.actor=we,this.layerIndex=Se,this.availableImages=De,this.loadVectorData=je||h,this.loading={},this.loaded={}};d.prototype.loadTile=function(we,Se){var De=this,je=we.uid;this.loading||(this.loading={});var $e=we&&we.request&&we.request.collectResourceTiming?new t.RequestPerformance(we.request):!1,ot=this.loading[je]=new o(we);ot.abort=this.loadVectorData(we,function(st,pt){if(delete De.loading[je],st||!pt)return ot.status="done",De.loaded[je]=ot,Se(st);var wt=pt.rawData,Wt={};pt.expires&&(Wt.expires=pt.expires),pt.cacheControl&&(Wt.cacheControl=pt.cacheControl);var yr={};if($e){var xr=$e.finish();xr&&(yr.resourceTiming=JSON.parse(JSON.stringify(xr)))}ot.vectorTile=pt.vectorTile,ot.parse(pt.vectorTile,De.layerIndex,De.availableImages,De.actor,function(Tr,mr){if(Tr||!mr)return Se(Tr);Se(null,t.extend({rawTileData:wt.slice(0)},mr,Wt,yr))}),De.loaded=De.loaded||{},De.loaded[je]=ot})},d.prototype.reloadTile=function(we,Se){var De=this,je=this.loaded,$e=we.uid,ot=this;if(je&&je[$e]){var st=je[$e];st.showCollisionBoxes=we.showCollisionBoxes;var pt=function(wt,Wt){var yr=st.reloadCallback;yr&&(delete st.reloadCallback,st.parse(st.vectorTile,ot.layerIndex,De.availableImages,ot.actor,yr)),Se(wt,Wt)};st.status==="parsing"?st.reloadCallback=pt:st.status==="done"&&(st.vectorTile?st.parse(st.vectorTile,this.layerIndex,this.availableImages,this.actor,pt):pt())}},d.prototype.abortTile=function(we,Se){var De=this.loading,je=we.uid;De&&De[je]&&De[je].abort&&(De[je].abort(),delete De[je]),Se()},d.prototype.removeTile=function(we,Se){var De=this.loaded,je=we.uid;De&&De[je]&&delete De[je],Se()};var p=t.window.ImageBitmap,y=function(){this.loaded={}};y.prototype.loadTile=function(we,Se){var De=we.uid,je=we.encoding,$e=we.rawImageData,ot=p&&$e instanceof p?this.getImageData($e):$e,st=new t.DEMData(De,ot,je);this.loaded=this.loaded||{},this.loaded[De]=st,Se(null,st)},y.prototype.getImageData=function(we){(!this.offscreenCanvas||!this.offscreenCanvasContext)&&(this.offscreenCanvas=new OffscreenCanvas(we.width,we.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=we.width,this.offscreenCanvas.height=we.height,this.offscreenCanvasContext.drawImage(we,0,0,we.width,we.height);var Se=this.offscreenCanvasContext.getImageData(-1,-1,we.width+2,we.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new t.RGBAImage({width:Se.width,height:Se.height},Se.data)},y.prototype.removeTile=function(we){var Se=this.loaded,De=we.uid;Se&&Se[De]&&delete Se[De]};var g=A;function A(et,we){var Se=et&&et.type,De;if(Se==="FeatureCollection")for(De=0;De<et.features.length;De++)A(et.features[De],we);else if(Se==="GeometryCollection")for(De=0;De<et.geometries.length;De++)A(et.geometries[De],we);else if(Se==="Feature")A(et.geometry,we);else if(Se==="Polygon")b(et.coordinates,we);else if(Se==="MultiPolygon")for(De=0;De<et.coordinates.length;De++)b(et.coordinates[De],we);return et}function b(et,we){if(et.length!==0){M(et[0],we);for(var Se=1;Se<et.length;Se++)M(et[Se],!we)}}function M(et,we){for(var Se=0,De=0,je=et.length,$e=je-1;De<je;$e=De++)Se+=(et[De][0]-et[$e][0])*(et[$e][1]+et[De][1]);Se>=0!=!!we&&et.reverse()}var _=t.vectorTile.VectorTileFeature.prototype.toGeoJSON,T=function(we){this._feature=we,this.extent=t.EXTENT,this.type=we.type,this.properties=we.tags,"id"in we&&!isNaN(we.id)&&(this.id=parseInt(we.id,10))};T.prototype.loadGeometry=function(){if(this._feature.type===1){for(var we=[],Se=0,De=this._feature.geometry;Se<De.length;Se+=1){var je=De[Se];we.push([new t.Point$1(je[0],je[1])])}return we}else{for(var $e=[],ot=0,st=this._feature.geometry;ot<st.length;ot+=1){for(var pt=st[ot],wt=[],Wt=0,yr=pt;Wt<yr.length;Wt+=1){var xr=yr[Wt];wt.push(new t.Point$1(xr[0],xr[1]))}$e.push(wt)}return $e}},T.prototype.toGeoJSON=function(we,Se,De){return _.call(this,we,Se,De)};var w=function(we){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=t.EXTENT,this.length=we.length,this._features=we};w.prototype.feature=function(we){return new T(this._features[we])};var v=t.vectorTile.VectorTileFeature,L=S;function S(et,we){this.options=we||{},this.features=et,this.length=et.length}S.prototype.feature=function(et){return new k(this.features[et],this.options.extent)};function k(et,we){this.id=typeof et.id=="number"?et.id:void 0,this.type=et.type,this.rawGeometry=et.type===1?[et.geometry]:et.geometry,this.properties=et.tags,this.extent=we||4096}k.prototype.loadGeometry=function(){var et=this.rawGeometry;this.geometry=[];for(var we=0;we<et.length;we++){for(var Se=et[we],De=[],je=0;je<Se.length;je++)De.push(new t.Point$1(Se[je][0],Se[je][1]));this.geometry.push(De)}return this.geometry},k.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var et=this.geometry,we=1/0,Se=-1/0,De=1/0,je=-1/0,$e=0;$e<et.length;$e++)for(var ot=et[$e],st=0;st<ot.length;st++){var pt=ot[st];we=Math.min(we,pt.x),Se=Math.max(Se,pt.x),De=Math.min(De,pt.y),je=Math.max(je,pt.y)}return[we,De,Se,je]},k.prototype.toGeoJSON=v.prototype.toGeoJSON;var P=D,O=D,F=U,I=L;function D(et){var we=new t.pbf;return B(et,we),we.finish()}function U(et,we){we=we||{};var Se={};for(var De in et)Se[De]=new L(et[De].features,we),Se[De].name=De,Se[De].version=we.version,Se[De].extent=we.extent;return D({layers:Se})}function B(et,we){for(var Se in et.layers)we.writeMessage(3,j,et.layers[Se])}function j(et,we){we.writeVarintField(15,et.version||1),we.writeStringField(1,et.name||""),we.writeVarintField(5,et.extent||4096);var Se,De={keys:[],values:[],keycache:{},valuecache:{}};for(Se=0;Se<et.length;Se++)De.feature=et.feature(Se),we.writeMessage(2,Z,De);var je=De.keys;for(Se=0;Se<je.length;Se++)we.writeStringField(3,je[Se]);var $e=De.values;for(Se=0;Se<$e.length;Se++)we.writeMessage(4,le,$e[Se])}function Z(et,we){var Se=et.feature;Se.id!==void 0&&we.writeVarintField(1,Se.id),we.writeMessage(2,ee,et),we.writeVarintField(3,Se.type),we.writeMessage(4,J,Se)}function ee(et,we){var Se=et.feature,De=et.keys,je=et.values,$e=et.keycache,ot=et.valuecache;for(var st in Se.properties){var pt=$e[st];typeof pt=="undefined"&&(De.push(st),pt=De.length-1,$e[st]=pt),we.writeVarint(pt);var wt=Se.properties[st],Wt=typeof wt;Wt!=="string"&&Wt!=="boolean"&&Wt!=="number"&&(wt=JSON.stringify(wt));var yr=Wt+":"+wt,xr=ot[yr];typeof xr=="undefined"&&(je.push(wt),xr=je.length-1,ot[yr]=xr),we.writeVarint(xr)}}function q(et,we){return(we<<3)+(et&7)}function W(et){return et<<1^et>>31}function J(et,we){for(var Se=et.loadGeometry(),De=et.type,je=0,$e=0,ot=Se.length,st=0;st<ot;st++){var pt=Se[st],wt=1;De===1&&(wt=pt.length),we.writeVarint(q(1,wt));for(var Wt=De===3?pt.length-1:pt.length,yr=0;yr<Wt;yr++){yr===1&&De!==1&&we.writeVarint(q(2,Wt-1));var xr=pt[yr].x-je,Tr=pt[yr].y-$e;we.writeVarint(W(xr)),we.writeVarint(W(Tr)),je+=xr,$e+=Tr}De===3&&we.writeVarint(q(7,1))}}function le(et,we){var Se=typeof et;Se==="string"?we.writeStringField(1,et):Se==="boolean"?we.writeBooleanField(7,et):Se==="number"&&(et%1!=0?we.writeDoubleField(3,et):et<0?we.writeSVarintField(6,et):we.writeVarintField(5,et))}P.fromVectorTileJs=O,P.fromGeojsonVt=F,P.GeoJSONWrapper=I;function fe(et,we,Se,De,je,$e){if(!(je-De<=Se)){var ot=De+je>>1;se(et,we,ot,De,je,$e%2),fe(et,we,Se,De,ot-1,$e+1),fe(et,we,Se,ot+1,je,$e+1)}}function se(et,we,Se,De,je,$e){for(;je>De;){if(je-De>600){var ot=je-De+1,st=Se-De+1,pt=Math.log(ot),wt=.5*Math.exp(2*pt/3),Wt=.5*Math.sqrt(pt*wt*(ot-wt)/ot)*(st-ot/2<0?-1:1),yr=Math.max(De,Math.floor(Se-st*wt/ot+Wt)),xr=Math.min(je,Math.floor(Se+(ot-st)*wt/ot+Wt));se(et,we,Se,yr,xr,$e)}var Tr=we[2*Se+$e],mr=De,Rr=je;for(H(et,we,De,Se),we[2*je+$e]>Tr&&H(et,we,De,je);mr<Rr;){for(H(et,we,mr,Rr),mr++,Rr--;we[2*mr+$e]<Tr;)mr++;for(;we[2*Rr+$e]>Tr;)Rr--}we[2*De+$e]===Tr?H(et,we,De,Rr):(Rr++,H(et,we,Rr,je)),Rr<=Se&&(De=Rr+1),Se<=Rr&&(je=Rr-1)}}function H(et,we,Se,De){Y(et,Se,De),Y(we,2*Se,2*De),Y(we,2*Se+1,2*De+1)}function Y(et,we,Se){var De=et[we];et[we]=et[Se],et[Se]=De}function ne(et,we,Se,De,je,$e,ot){for(var st=[0,et.length-1,0],pt=[],wt,Wt;st.length;){var yr=st.pop(),xr=st.pop(),Tr=st.pop();if(xr-Tr<=ot){for(var mr=Tr;mr<=xr;mr++)wt=we[2*mr],Wt=we[2*mr+1],wt>=Se&&wt<=je&&Wt>=De&&Wt<=$e&&pt.push(et[mr]);continue}var Rr=Math.floor((Tr+xr)/2);wt=we[2*Rr],Wt=we[2*Rr+1],wt>=Se&&wt<=je&&Wt>=De&&Wt<=$e&&pt.push(et[Rr]);var tn=(yr+1)%2;(yr===0?Se<=wt:De<=Wt)&&(st.push(Tr),st.push(Rr-1),st.push(tn)),(yr===0?je>=wt:$e>=Wt)&&(st.push(Rr+1),st.push(xr),st.push(tn))}return pt}function te(et,we,Se,De,je,$e){for(var ot=[0,et.length-1,0],st=[],pt=je*je;ot.length;){var wt=ot.pop(),Wt=ot.pop(),yr=ot.pop();if(Wt-yr<=$e){for(var xr=yr;xr<=Wt;xr++)K(we[2*xr],we[2*xr+1],Se,De)<=pt&&st.push(et[xr]);continue}var Tr=Math.floor((yr+Wt)/2),mr=we[2*Tr],Rr=we[2*Tr+1];K(mr,Rr,Se,De)<=pt&&st.push(et[Tr]);var tn=(wt+1)%2;(wt===0?Se-je<=mr:De-je<=Rr)&&(ot.push(yr),ot.push(Tr-1),ot.push(tn)),(wt===0?Se+je>=mr:De+je>=Rr)&&(ot.push(Tr+1),ot.push(Wt),ot.push(tn))}return st}function K(et,we,Se,De){var je=et-Se,$e=we-De;return je*je+$e*$e}var $=function(et){return et[0]},ae=function(et){return et[1]},ie=function(we,Se,De,je,$e){Se===void 0&&(Se=$),De===void 0&&(De=ae),je===void 0&&(je=64),$e===void 0&&($e=Float64Array),this.nodeSize=je,this.points=we;for(var ot=we.length<65536?Uint16Array:Uint32Array,st=this.ids=new ot(we.length),pt=this.coords=new $e(we.length*2),wt=0;wt<we.length;wt++)st[wt]=wt,pt[2*wt]=Se(we[wt]),pt[2*wt+1]=De(we[wt]);fe(st,pt,je,0,st.length-1,0)};ie.prototype.range=function(we,Se,De,je){return ne(this.ids,this.coords,we,Se,De,je,this.nodeSize)},ie.prototype.within=function(we,Se,De){return te(this.ids,this.coords,we,Se,De,this.nodeSize)};var oe={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(et){return et}},ue=function(we){this.options=Ge(Object.create(oe),we),this.trees=new Array(this.options.maxZoom+1)};ue.prototype.load=function(we){var Se=this.options,De=Se.log,je=Se.minZoom,$e=Se.maxZoom,ot=Se.nodeSize;De&&console.time("total time");var st="prepare "+we.length+" points";De&&console.time(st),this.points=we;for(var pt=[],wt=0;wt<we.length;wt++)!we[wt].geometry||pt.push(ce(we[wt],wt));this.trees[$e+1]=new ie(pt,_e,Re,ot,Float32Array),De&&console.timeEnd(st);for(var Wt=$e;Wt>=je;Wt--){var yr=+Date.now();pt=this._cluster(pt,Wt),this.trees[Wt]=new ie(pt,_e,Re,ot,Float32Array),De&&console.log("z%d: %d clusters in %dms",Wt,pt.length,+Date.now()-yr)}return De&&console.timeEnd("total time"),this},ue.prototype.getClusters=function(we,Se){var De=((we[0]+180)%360+360)%360-180,je=Math.max(-90,Math.min(90,we[1])),$e=we[2]===180?180:((we[2]+180)%360+360)%360-180,ot=Math.max(-90,Math.min(90,we[3]));if(we[2]-we[0]>=360)De=-180,$e=180;else if(De>$e){var st=this.getClusters([De,je,180,ot],Se),pt=this.getClusters([-180,je,$e,ot],Se);return st.concat(pt)}for(var wt=this.trees[this._limitZoom(Se)],Wt=wt.range(ke(De),Ae(ot),ke($e),Ae(je)),yr=[],xr=0,Tr=Wt;xr<Tr.length;xr+=1){var mr=Tr[xr],Rr=wt.points[mr];yr.push(Rr.numPoints?me(Rr):this.points[Rr.index])}return yr},ue.prototype.getChildren=function(we){var Se=this._getOriginId(we),De=this._getOriginZoom(we),je="No cluster with the specified id.",$e=this.trees[De];if(!$e)throw new Error(je);var ot=$e.points[Se];if(!ot)throw new Error(je);for(var st=this.options.radius/(this.options.extent*Math.pow(2,De-1)),pt=$e.within(ot.x,ot.y,st),wt=[],Wt=0,yr=pt;Wt<yr.length;Wt+=1){var xr=yr[Wt],Tr=$e.points[xr];Tr.parentId===we&&wt.push(Tr.numPoints?me(Tr):this.points[Tr.index])}if(wt.length===0)throw new Error(je);return wt},ue.prototype.getLeaves=function(we,Se,De){Se=Se||10,De=De||0;var je=[];return this._appendLeaves(je,we,Se,De,0),je},ue.prototype.getTile=function(we,Se,De){var je=this.trees[this._limitZoom(we)],$e=Math.pow(2,we),ot=this.options,st=ot.extent,pt=ot.radius,wt=pt/st,Wt=(De-wt)/$e,yr=(De+1+wt)/$e,xr={features:[]};return this._addTileFeatures(je.range((Se-wt)/$e,Wt,(Se+1+wt)/$e,yr),je.points,Se,De,$e,xr),Se===0&&this._addTileFeatures(je.range(1-wt/$e,Wt,1,yr),je.points,$e,De,$e,xr),Se===$e-1&&this._addTileFeatures(je.range(0,Wt,wt/$e,yr),je.points,-1,De,$e,xr),xr.features.length?xr:null},ue.prototype.getClusterExpansionZoom=function(we){for(var Se=this._getOriginZoom(we)-1;Se<=this.options.maxZoom;){var De=this.getChildren(we);if(Se++,De.length!==1)break;we=De[0].properties.cluster_id}return Se},ue.prototype._appendLeaves=function(we,Se,De,je,$e){for(var ot=this.getChildren(Se),st=0,pt=ot;st<pt.length;st+=1){var wt=pt[st],Wt=wt.properties;if(Wt&&Wt.cluster?$e+Wt.point_count<=je?$e+=Wt.point_count:$e=this._appendLeaves(we,Wt.cluster_id,De,je,$e):$e<je?$e++:we.push(wt),we.length===De)break}return $e},ue.prototype._addTileFeatures=function(we,Se,De,je,$e,ot){for(var st=0,pt=we;st<pt.length;st+=1){var wt=pt[st],Wt=Se[wt],yr=Wt.numPoints,xr={type:1,geometry:[[Math.round(this.options.extent*(Wt.x*$e-De)),Math.round(this.options.extent*(Wt.y*$e-je))]],tags:yr?xe(Wt):this.points[Wt.index].properties},Tr=void 0;yr?Tr=Wt.id:this.options.generateId?Tr=Wt.index:this.points[Wt.index].id&&(Tr=this.points[Wt.index].id),Tr!==void 0&&(xr.id=Tr),ot.features.push(xr)}},ue.prototype._limitZoom=function(we){return Math.max(this.options.minZoom,Math.min(we,this.options.maxZoom+1))},ue.prototype._cluster=function(we,Se){for(var De=[],je=this.options,$e=je.radius,ot=je.extent,st=je.reduce,pt=$e/(ot*Math.pow(2,Se)),wt=0;wt<we.length;wt++){var Wt=we[wt];if(!(Wt.zoom<=Se)){Wt.zoom=Se;for(var yr=this.trees[Se+1],xr=yr.within(Wt.x,Wt.y,pt),Tr=Wt.numPoints||1,mr=Wt.x*Tr,Rr=Wt.y*Tr,tn=st&&Tr>1?this._map(Wt,!0):null,wr=(wt<<5)+(Se+1)+this.points.length,gr=0,mn=xr;gr<mn.length;gr+=1){var Gr=mn[gr],Ar=yr.points[Gr];if(!(Ar.zoom<=Se)){Ar.zoom=Se;var nn=Ar.numPoints||1;mr+=Ar.x*nn,Rr+=Ar.y*nn,Tr+=nn,Ar.parentId=wr,st&&(tn||(tn=this._map(Wt,!0)),st(tn,this._map(Ar)))}}Tr===1?De.push(Wt):(Wt.parentId=wr,De.push(ye(mr/Tr,Rr/Tr,wr,Tr,tn)))}}return De},ue.prototype._getOriginId=function(we){return we-this.points.length>>5},ue.prototype._getOriginZoom=function(we){return(we-this.points.length)%32},ue.prototype._map=function(we,Se){if(we.numPoints)return Se?Ge({},we.properties):we.properties;var De=this.points[we.index].properties,je=this.options.map(De);return Se&&je===De?Ge({},je):je};function ye(et,we,Se,De,je){return{x:et,y:we,zoom:1/0,id:Se,parentId:-1,numPoints:De,properties:je}}function ce(et,we){var Se=et.geometry.coordinates,De=Se[0],je=Se[1];return{x:ke(De),y:Ae(je),zoom:1/0,index:we,parentId:-1}}function me(et){return{type:"Feature",id:et.id,properties:xe(et),geometry:{type:"Point",coordinates:[Oe(et.x),He(et.y)]}}}function xe(et){var we=et.numPoints,Se=we>=1e4?Math.round(we/1e3)+"k":we>=1e3?Math.round(we/100)/10+"k":we;return Ge(Ge({},et.properties),{cluster:!0,cluster_id:et.id,point_count:we,point_count_abbreviated:Se})}function ke(et){return et/360+.5}function Ae(et){var we=Math.sin(et*Math.PI/180),Se=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Se<0?0:Se>1?1:Se}function Oe(et){return(et-.5)*360}function He(et){var we=(180-et*360)*Math.PI/180;return 360*Math.atan(Math.exp(we))/Math.PI-90}function Ge(et,we){for(var Se in we)et[Se]=we[Se];return et}function _e(et){return et.x}function Re(et){return et.y}function We(et,we,Se,De){for(var je=De,$e=Se-we>>1,ot=Se-we,st,pt=et[we],wt=et[we+1],Wt=et[Se],yr=et[Se+1],xr=we+3;xr<Se;xr+=3){var Tr=qe(et[xr],et[xr+1],pt,wt,Wt,yr);if(Tr>je)st=xr,je=Tr;else if(Tr===je){var mr=Math.abs(xr-$e);mr<ot&&(st=xr,ot=mr)}}je>De&&(st-we>3&&We(et,we,st,De),et[st+2]=je,Se-st>3&&We(et,st,Se,De))}function qe(et,we,Se,De,je,$e){var ot=je-Se,st=$e-De;if(ot!==0||st!==0){var pt=((et-Se)*ot+(we-De)*st)/(ot*ot+st*st);pt>1?(Se=je,De=$e):pt>0&&(Se+=ot*pt,De+=st*pt)}return ot=et-Se,st=we-De,ot*ot+st*st}function Ue(et,we,Se,De){var je={id:typeof et=="undefined"?null:et,type:we,geometry:Se,tags:De,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return Ie(je),je}function Ie(et){var we=et.geometry,Se=et.type;if(Se==="Point"||Se==="MultiPoint"||Se==="LineString")Ve(et,we);else if(Se==="Polygon"||Se==="MultiLineString")for(var De=0;De<we.length;De++)Ve(et,we[De]);else if(Se==="MultiPolygon")for(De=0;De<we.length;De++)for(var je=0;je<we[De].length;je++)Ve(et,we[De][je])}function Ve(et,we){for(var Se=0;Se<we.length;Se+=3)et.minX=Math.min(et.minX,we[Se]),et.minY=Math.min(et.minY,we[Se+1]),et.maxX=Math.max(et.maxX,we[Se]),et.maxY=Math.max(et.maxY,we[Se+1])}function dt(et,we){var Se=[];if(et.type==="FeatureCollection")for(var De=0;De<et.features.length;De++)Rt(Se,et.features[De],we,De);else et.type==="Feature"?Rt(Se,et,we):Rt(Se,{geometry:et},we);return Se}function Rt(et,we,Se,De){if(!!we.geometry){var je=we.geometry.coordinates,$e=we.geometry.type,ot=Math.pow(Se.tolerance/((1<<Se.maxZoom)*Se.extent),2),st=[],pt=we.id;if(Se.promoteId?pt=we.properties[Se.promoteId]:Se.generateId&&(pt=De||0),$e==="Point")Gt(je,st);else if($e==="MultiPoint")for(var wt=0;wt<je.length;wt++)Gt(je[wt],st);else if($e==="LineString")kt(je,st,ot,!1);else if($e==="MultiLineString")if(Se.lineMetrics){for(wt=0;wt<je.length;wt++)st=[],kt(je[wt],st,ot,!1),et.push(Ue(pt,"LineString",st,we.properties));return}else zt(je,st,ot,!1);else if($e==="Polygon")zt(je,st,ot,!0);else if($e==="MultiPolygon")for(wt=0;wt<je.length;wt++){var Wt=[];zt(je[wt],Wt,ot,!0),st.push(Wt)}else if($e==="GeometryCollection"){for(wt=0;wt<we.geometry.geometries.length;wt++)Rt(et,{id:pt,geometry:we.geometry.geometries[wt],properties:we.properties},Se,De);return}else throw new Error("Input data is not a valid GeoJSON object.");et.push(Ue(pt,$e,st,we.properties))}}function Gt(et,we){we.push(Bt(et[0])),we.push(Lt(et[1])),we.push(0)}function kt(et,we,Se,De){for(var je,$e,ot=0,st=0;st<et.length;st++){var pt=Bt(et[st][0]),wt=Lt(et[st][1]);we.push(pt),we.push(wt),we.push(0),st>0&&(De?ot+=(je*wt-pt*$e)/2:ot+=Math.sqrt(Math.pow(pt-je,2)+Math.pow(wt-$e,2))),je=pt,$e=wt}var Wt=we.length-3;we[2]=1,We(we,0,Wt,Se),we[Wt+2]=1,we.size=Math.abs(ot),we.start=0,we.end=we.size}function zt(et,we,Se,De){for(var je=0;je<et.length;je++){var $e=[];kt(et[je],$e,Se,De),we.push($e)}}function Bt(et){return et/360+.5}function Lt(et){var we=Math.sin(et*Math.PI/180),Se=.5-.25*Math.log((1+we)/(1-we))/Math.PI;return Se<0?0:Se>1?1:Se}function Mt(et,we,Se,De,je,$e,ot,st){if(Se/=we,De/=we,$e>=Se&&ot<De)return et;if(ot<Se||$e>=De)return null;for(var pt=[],wt=0;wt<et.length;wt++){var Wt=et[wt],yr=Wt.geometry,xr=Wt.type,Tr=je===0?Wt.minX:Wt.minY,mr=je===0?Wt.maxX:Wt.maxY;if(Tr>=Se&&mr<De){pt.push(Wt);continue}else if(mr<Se||Tr>=De)continue;var Rr=[];if(xr==="Point"||xr==="MultiPoint")it(yr,Rr,Se,De,je);else if(xr==="LineString")ht(yr,Rr,Se,De,je,!1,st.lineMetrics);else if(xr==="MultiLineString")Ce(yr,Rr,Se,De,je,!1);else if(xr==="Polygon")Ce(yr,Rr,Se,De,je,!0);else if(xr==="MultiPolygon")for(var tn=0;tn<yr.length;tn++){var wr=[];Ce(yr[tn],wr,Se,De,je,!0),wr.length&&Rr.push(wr)}if(Rr.length){if(st.lineMetrics&&xr==="LineString"){for(tn=0;tn<Rr.length;tn++)pt.push(Ue(Wt.id,xr,Rr[tn],Wt.tags));continue}(xr==="LineString"||xr==="MultiLineString")&&(Rr.length===1?(xr="LineString",Rr=Rr[0]):xr="MultiLineString"),(xr==="Point"||xr==="MultiPoint")&&(xr=Rr.length===3?"Point":"MultiPoint"),pt.push(Ue(Wt.id,xr,Rr,Wt.tags))}}return pt.length?pt:null}function it(et,we,Se,De,je){for(var $e=0;$e<et.length;$e+=3){var ot=et[$e+je];ot>=Se&&ot<=De&&(we.push(et[$e]),we.push(et[$e+1]),we.push(et[$e+2]))}}function ht(et,we,Se,De,je,$e,ot){for(var st=Qe(et),pt=je===0?rt:ut,wt=et.start,Wt,yr,xr=0;xr<et.length-3;xr+=3){var Tr=et[xr],mr=et[xr+1],Rr=et[xr+2],tn=et[xr+3],wr=et[xr+4],gr=je===0?Tr:mr,mn=je===0?tn:wr,Gr=!1;ot&&(Wt=Math.sqrt(Math.pow(Tr-tn,2)+Math.pow(mr-wr,2))),gr<Se?mn>Se&&(yr=pt(st,Tr,mr,tn,wr,Se),ot&&(st.start=wt+Wt*yr)):gr>De?mn<De&&(yr=pt(st,Tr,mr,tn,wr,De),ot&&(st.start=wt+Wt*yr)):Xe(st,Tr,mr,Rr),mn<Se&&gr>=Se&&(yr=pt(st,Tr,mr,tn,wr,Se),Gr=!0),mn>De&&gr<=De&&(yr=pt(st,Tr,mr,tn,wr,De),Gr=!0),!$e&&Gr&&(ot&&(st.end=wt+Wt*yr),we.push(st),st=Qe(et)),ot&&(wt+=Wt)}var Ar=et.length-3;Tr=et[Ar],mr=et[Ar+1],Rr=et[Ar+2],gr=je===0?Tr:mr,gr>=Se&&gr<=De&&Xe(st,Tr,mr,Rr),Ar=st.length-3,$e&&Ar>=3&&(st[Ar]!==st[0]||st[Ar+1]!==st[1])&&Xe(st,st[0],st[1],st[2]),st.length&&we.push(st)}function Qe(et){var we=[];return we.size=et.size,we.start=et.start,we.end=et.end,we}function Ce(et,we,Se,De,je,$e){for(var ot=0;ot<et.length;ot++)ht(et[ot],we,Se,De,je,$e,!1)}function Xe(et,we,Se,De){et.push(we),et.push(Se),et.push(De)}function rt(et,we,Se,De,je,$e){var ot=($e-we)/(De-we);return et.push($e),et.push(Se+(je-Se)*ot),et.push(1),ot}function ut(et,we,Se,De,je,$e){var ot=($e-Se)/(je-Se);return et.push(we+(De-we)*ot),et.push($e),et.push(1),ot}function Pt(et,we){var Se=we.buffer/we.extent,De=et,je=Mt(et,1,-1-Se,Se,0,-1,2,we),$e=Mt(et,1,1-Se,2+Se,0,-1,2,we);return(je||$e)&&(De=Mt(et,1,-Se,1+Se,0,-1,2,we)||[],je&&(De=St(je,1).concat(De)),$e&&(De=De.concat(St($e,-1)))),De}function St(et,we){for(var Se=[],De=0;De<et.length;De++){var je=et[De],$e=je.type,ot;if($e==="Point"||$e==="MultiPoint"||$e==="LineString")ot=Nt(je.geometry,we);else if($e==="MultiLineString"||$e==="Polygon"){ot=[];for(var st=0;st<je.geometry.length;st++)ot.push(Nt(je.geometry[st],we))}else if($e==="MultiPolygon")for(ot=[],st=0;st<je.geometry.length;st++){for(var pt=[],wt=0;wt<je.geometry[st].length;wt++)pt.push(Nt(je.geometry[st][wt],we));ot.push(pt)}Se.push(Ue(je.id,$e,ot,je.tags))}return Se}function Nt(et,we){var Se=[];Se.size=et.size,et.start!==void 0&&(Se.start=et.start,Se.end=et.end);for(var De=0;De<et.length;De+=3)Se.push(et[De]+we,et[De+1],et[De+2]);return Se}function jt(et,we){if(et.transformed)return et;var Se=1<<et.z,De=et.x,je=et.y,$e,ot,st;for($e=0;$e<et.features.length;$e++){var pt=et.features[$e],wt=pt.geometry,Wt=pt.type;if(pt.geometry=[],Wt===1)for(ot=0;ot<wt.length;ot+=2)pt.geometry.push(Ot(wt[ot],wt[ot+1],we,Se,De,je));else for(ot=0;ot<wt.length;ot++){var yr=[];for(st=0;st<wt[ot].length;st+=2)yr.push(Ot(wt[ot][st],wt[ot][st+1],we,Se,De,je));pt.geometry.push(yr)}}return et.transformed=!0,et}function Ot(et,we,Se,De,je,$e){return[Math.round(Se*(et*De-je)),Math.round(Se*(we*De-$e))]}function Kt(et,we,Se,De,je){for(var $e=we===je.maxZoom?0:je.tolerance/((1<<we)*je.extent),ot={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Se,y:De,z:we,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},st=0;st<et.length;st++){ot.numFeatures++,Je(ot,et[st],$e,je);var pt=et[st].minX,wt=et[st].minY,Wt=et[st].maxX,yr=et[st].maxY;pt<ot.minX&&(ot.minX=pt),wt<ot.minY&&(ot.minY=wt),Wt>ot.maxX&&(ot.maxX=Wt),yr>ot.maxY&&(ot.maxY=yr)}return ot}function Je(et,we,Se,De){var je=we.geometry,$e=we.type,ot=[];if($e==="Point"||$e==="MultiPoint")for(var st=0;st<je.length;st+=3)ot.push(je[st]),ot.push(je[st+1]),et.numPoints++,et.numSimplified++;else if($e==="LineString")gt(ot,je,et,Se,!1,!1);else if($e==="MultiLineString"||$e==="Polygon")for(st=0;st<je.length;st++)gt(ot,je[st],et,Se,$e==="Polygon",st===0);else if($e==="MultiPolygon")for(var pt=0;pt<je.length;pt++){var wt=je[pt];for(st=0;st<wt.length;st++)gt(ot,wt[st],et,Se,!0,st===0)}if(ot.length){var Wt=we.tags||null;if($e==="LineString"&&De.lineMetrics){Wt={};for(var yr in we.tags)Wt[yr]=we.tags[yr];Wt.mapbox_clip_start=je.start/je.size,Wt.mapbox_clip_end=je.end/je.size}var xr={geometry:ot,type:$e==="Polygon"||$e==="MultiPolygon"?3:$e==="LineString"||$e==="MultiLineString"?2:1,tags:Wt};we.id!==null&&(xr.id=we.id),et.features.push(xr)}}function gt(et,we,Se,De,je,$e){var ot=De*De;if(De>0&&we.size<(je?ot:De)){Se.numPoints+=we.length/3;return}for(var st=[],pt=0;pt<we.length;pt+=3)(De===0||we[pt+2]>ot)&&(Se.numSimplified++,st.push(we[pt]),st.push(we[pt+1])),Se.numPoints++;je&&Et(st,$e),et.push(st)}function Et(et,we){for(var Se=0,De=0,je=et.length,$e=je-2;De<je;$e=De,De+=2)Se+=(et[De]-et[$e])*(et[De+1]+et[$e+1]);if(Se>0===we)for(De=0,je=et.length;De<je/2;De+=2){var ot=et[De],st=et[De+1];et[De]=et[je-2-De],et[De+1]=et[je-1-De],et[je-2-De]=ot,et[je-1-De]=st}}function rr(et,we){return new vr(et,we)}function vr(et,we){we=this.options=dr(Object.create(this.options),we);var Se=we.debug;if(Se&&console.time("preprocess data"),we.maxZoom<0||we.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(we.promoteId&&we.generateId)throw new Error("promoteId and generateId cannot be used together.");var De=dt(et,we);this.tiles={},this.tileCoords=[],Se&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",we.indexMaxZoom,we.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),De=Pt(De,we),De.length&&this.splitTile(De,0,0,0),Se&&(De.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}vr.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},vr.prototype.splitTile=function(et,we,Se,De,je,$e,ot){for(var st=[et,we,Se,De],pt=this.options,wt=pt.debug;st.length;){De=st.pop(),Se=st.pop(),we=st.pop(),et=st.pop();var Wt=1<<we,yr=or(we,Se,De),xr=this.tiles[yr];if(!xr&&(wt>1&&console.time("creation"),xr=this.tiles[yr]=Kt(et,we,Se,De,pt),this.tileCoords.push({z:we,x:Se,y:De}),wt)){wt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",we,Se,De,xr.numFeatures,xr.numPoints,xr.numSimplified),console.timeEnd("creation"));var Tr="z"+we;this.stats[Tr]=(this.stats[Tr]||0)+1,this.total++}if(xr.source=et,je){if(we===pt.maxZoom||we===je)continue;var mr=1<<je-we;if(Se!==Math.floor($e/mr)||De!==Math.floor(ot/mr))continue}else if(we===pt.indexMaxZoom||xr.numPoints<=pt.indexMaxPoints)continue;if(xr.source=null,et.length!==0){wt>1&&console.time("clipping");var Rr=.5*pt.buffer/pt.extent,tn=.5-Rr,wr=.5+Rr,gr=1+Rr,mn,Gr,Ar,nn,fn,jr;mn=Gr=Ar=nn=null,fn=Mt(et,Wt,Se-Rr,Se+wr,0,xr.minX,xr.maxX,pt),jr=Mt(et,Wt,Se+tn,Se+gr,0,xr.minX,xr.maxX,pt),et=null,fn&&(mn=Mt(fn,Wt,De-Rr,De+wr,1,xr.minY,xr.maxY,pt),Gr=Mt(fn,Wt,De+tn,De+gr,1,xr.minY,xr.maxY,pt),fn=null),jr&&(Ar=Mt(jr,Wt,De-Rr,De+wr,1,xr.minY,xr.maxY,pt),nn=Mt(jr,Wt,De+tn,De+gr,1,xr.minY,xr.maxY,pt),jr=null),wt>1&&console.timeEnd("clipping"),st.push(mn||[],we+1,Se*2,De*2),st.push(Gr||[],we+1,Se*2,De*2+1),st.push(Ar||[],we+1,Se*2+1,De*2),st.push(nn||[],we+1,Se*2+1,De*2+1)}}},vr.prototype.getTile=function(et,we,Se){var De=this.options,je=De.extent,$e=De.debug;if(et<0||et>24)return null;var ot=1<<et;we=(we%ot+ot)%ot;var st=or(et,we,Se);if(this.tiles[st])return jt(this.tiles[st],je);$e>1&&console.log("drilling down to z%d-%d-%d",et,we,Se);for(var pt=et,wt=we,Wt=Se,yr;!yr&&pt>0;)pt--,wt=Math.floor(wt/2),Wt=Math.floor(Wt/2),yr=this.tiles[or(pt,wt,Wt)];return!yr||!yr.source?null:($e>1&&console.log("found parent tile z%d-%d-%d",pt,wt,Wt),$e>1&&console.time("drilling down"),this.splitTile(yr.source,pt,wt,Wt,et,we,Se),$e>1&&console.timeEnd("drilling down"),this.tiles[st]?jt(this.tiles[st],je):null)};function or(et,we,Se){return((1<<et)*Se+we)*32+et}function dr(et,we){for(var Se in we)et[Se]=we[Se];return et}function Lr(et,we){var Se=et.tileID.canonical;if(!this._geoJSONIndex)return we(null,null);var De=this._geoJSONIndex.getTile(Se.z,Se.x,Se.y);if(!De)return we(null,null);var je=new w(De.features),$e=P(je);($e.byteOffset!==0||$e.byteLength!==$e.buffer.byteLength)&&($e=new Uint8Array($e)),we(null,{vectorTile:je,rawData:$e.buffer})}var kr=function(et){function we(Se,De,je,$e){et.call(this,Se,De,je,Lr),$e&&(this.loadGeoJSON=$e)}return et&&(we.__proto__=et),we.prototype=Object.create(et&&et.prototype),we.prototype.constructor=we,we.prototype.loadData=function(De,je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=je,this._pendingLoadDataParams=De,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},we.prototype._loadData=function(){var De=this;if(!(!this._pendingCallback||!this._pendingLoadDataParams)){var je=this._pendingCallback,$e=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var ot=$e&&$e.request&&$e.request.collectResourceTiming?new t.RequestPerformance($e.request):!1;this.loadGeoJSON($e,function(st,pt){if(st||!pt)return je(st);if(typeof pt!="object")return je(new Error("Input data given to '"+$e.source+"' is not a valid GeoJSON object."));g(pt,!0);try{De._geoJSONIndex=$e.cluster?new ue(tr($e)).load(pt.features):rr(pt,$e.geojsonVtOptions)}catch(yr){return je(yr)}De.loaded={};var wt={};if(ot){var Wt=ot.finish();Wt&&(wt.resourceTiming={},wt.resourceTiming[$e.source]=JSON.parse(JSON.stringify(Wt)))}je(null,wt)})}},we.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},we.prototype.reloadTile=function(De,je){var $e=this.loaded,ot=De.uid;return $e&&$e[ot]?et.prototype.reloadTile.call(this,De,je):this.loadTile(De,je)},we.prototype.loadGeoJSON=function(De,je){if(De.request)t.getJSON(De.request,je);else if(typeof De.data=="string")try{return je(null,JSON.parse(De.data))}catch{return je(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."))}else return je(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."))},we.prototype.removeSource=function(De,je){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),je()},we.prototype.getClusterExpansionZoom=function(De,je){try{je(null,this._geoJSONIndex.getClusterExpansionZoom(De.clusterId))}catch($e){je($e)}},we.prototype.getClusterChildren=function(De,je){try{je(null,this._geoJSONIndex.getChildren(De.clusterId))}catch($e){je($e)}},we.prototype.getClusterLeaves=function(De,je){try{je(null,this._geoJSONIndex.getLeaves(De.clusterId,De.limit,De.offset))}catch($e){je($e)}},we}(d);function tr(et){var we=et.superclusterOptions,Se=et.clusterProperties;if(!Se||!we)return we;for(var De={},je={},$e={accumulated:null,zoom:0},ot={properties:null},st=Object.keys(Se),pt=0,wt=st;pt<wt.length;pt+=1){var Wt=wt[pt],yr=Se[Wt],xr=yr[0],Tr=yr[1],mr=t.createExpression(Tr),Rr=t.createExpression(typeof xr=="string"?[xr,["accumulated"],["get",Wt]]:xr);De[Wt]=mr.value,je[Wt]=Rr.value}return we.map=function(tn){ot.properties=tn;for(var wr={},gr=0,mn=st;gr<mn.length;gr+=1){var Gr=mn[gr];wr[Gr]=De[Gr].evaluate($e,ot)}return wr},we.reduce=function(tn,wr){ot.properties=wr;for(var gr=0,mn=st;gr<mn.length;gr+=1){var Gr=mn[gr];$e.accumulated=tn[Gr],tn[Gr]=je[Gr].evaluate($e,ot)}},we}var Or=function(we){var Se=this;this.self=we,this.actor=new t.Actor(we,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:d,geojson:kr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(De,je){if(Se.workerSourceTypes[De])throw new Error('Worker source with name "'+De+'" already registered.');Se.workerSourceTypes[De]=je},this.self.registerRTLTextPlugin=function(De){if(t.plugin.isParsed())throw new Error("RTL text plugin already registered.");t.plugin.applyArabicShaping=De.applyArabicShaping,t.plugin.processBidirectionalText=De.processBidirectionalText,t.plugin.processStyledBidirectionalText=De.processStyledBidirectionalText}};return Or.prototype.setReferrer=function(we,Se){this.referrer=Se},Or.prototype.setImages=function(we,Se,De){this.availableImages[we]=Se;for(var je in this.workerSources[we]){var $e=this.workerSources[we][je];for(var ot in $e)$e[ot].availableImages=Se}De()},Or.prototype.setLayers=function(we,Se,De){this.getLayerIndex(we).replace(Se),De()},Or.prototype.updateLayers=function(we,Se,De){this.getLayerIndex(we).update(Se.layers,Se.removedIds),De()},Or.prototype.loadTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).loadTile(Se,De)},Or.prototype.loadDEMTile=function(we,Se,De){this.getDEMWorkerSource(we,Se.source).loadTile(Se,De)},Or.prototype.reloadTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).reloadTile(Se,De)},Or.prototype.abortTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).abortTile(Se,De)},Or.prototype.removeTile=function(we,Se,De){this.getWorkerSource(we,Se.type,Se.source).removeTile(Se,De)},Or.prototype.removeDEMTile=function(we,Se){this.getDEMWorkerSource(we,Se.source).removeTile(Se)},Or.prototype.removeSource=function(we,Se,De){if(!(!this.workerSources[we]||!this.workerSources[we][Se.type]||!this.workerSources[we][Se.type][Se.source])){var je=this.workerSources[we][Se.type][Se.source];delete this.workerSources[we][Se.type][Se.source],je.removeSource!==void 0?je.removeSource(Se,De):De()}},Or.prototype.loadWorkerSource=function(we,Se,De){try{this.self.importScripts(Se.url),De()}catch(je){De(je.toString())}},Or.prototype.syncRTLPluginState=function(we,Se,De){try{t.plugin.setState(Se);var je=t.plugin.getPluginURL();if(t.plugin.isLoaded()&&!t.plugin.isParsed()&&je!=null){this.self.importScripts(je);var $e=t.plugin.isParsed(),ot=$e?void 0:new Error("RTL Text Plugin failed to import scripts from "+je);De(ot,$e)}}catch(st){De(st.toString())}},Or.prototype.getAvailableImages=function(we){var Se=this.availableImages[we];return Se||(Se=[]),Se},Or.prototype.getLayerIndex=function(we){var Se=this.layerIndexes[we];return Se||(Se=this.layerIndexes[we]=new n),Se},Or.prototype.getWorkerSource=function(we,Se,De){var je=this;if(this.workerSources[we]||(this.workerSources[we]={}),this.workerSources[we][Se]||(this.workerSources[we][Se]={}),!this.workerSources[we][Se][De]){var $e={send:function(ot,st,pt){je.actor.send(ot,st,pt,we)}};this.workerSources[we][Se][De]=new this.workerSourceTypes[Se]($e,this.getLayerIndex(we),this.getAvailableImages(we))}return this.workerSources[we][Se][De]},Or.prototype.getDEMWorkerSource=function(we,Se){return this.demWorkerSources[we]||(this.demWorkerSources[we]={}),this.demWorkerSources[we][Se]||(this.demWorkerSources[we][Se]=new y),this.demWorkerSources[we][Se]},Or.prototype.enforceCacheSizeLimit=function(we,Se){t.enforceCacheSizeLimit(Se)},typeof WorkerGlobalScope!="undefined"&&typeof t.window!="undefined"&&t.window instanceof WorkerGlobalScope&&(t.window.worker=new Or(t.window)),Or}),x(["./shared"],function(t){var i=t.createCommonjsModule(function(ve){ve.exports?ve.exports=X:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=X,window.mapboxgl.notSupportedReason=de);function X(Nr){return!de(Nr)}function de(Nr){if(!Q())return"not a browser";if(!ge())return"insufficent Array support";if(!Ee())return"insufficient Function support";if(!Pe())return"insufficient Object support";if(!Ze())return"insufficient JSON support";if(!ft())return"insufficient worker support";if(!At())return"insufficient Uint8ClampedArray support";if(!Vt())return"insufficient ArrayBuffer support";if(!$t())return"insufficient Canvas/getImageData support";if(!Sr(Nr&&Nr.failIfMajorPerformanceCaveat))return"insufficient WebGL support"}function Q(){return typeof window!="undefined"&&typeof document!="undefined"}function ge(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function Ee(){return Function.prototype&&Function.prototype.bind}function Pe(){return Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions}function Ze(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function ft(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var Nr=new Blob([""],{type:"text/javascript"}),Kr=URL.createObjectURL(Nr),hn,Sn;try{Sn=new Worker(Kr),hn=!0}catch{hn=!1}return Sn&&Sn.terminate(),URL.revokeObjectURL(Kr),hn}function At(){return"Uint8ClampedArray"in window}function Vt(){return ArrayBuffer.isView}function $t(){var Nr=document.createElement("canvas");Nr.width=Nr.height=1;var Kr=Nr.getContext("2d");if(!Kr)return!1;var hn=Kr.getImageData(0,0,1,1);return hn&&hn.width===Nr.width}var ir={};function Sr(Nr){return ir[Nr]===void 0&&(ir[Nr]=Vr(Nr)),ir[Nr]}X.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};function Br(Nr){var Kr=document.createElement("canvas"),hn=Object.create(X.webGLContextAttributes);return hn.failIfMajorPerformanceCaveat=Nr,Kr.probablySupportsContext?Kr.probablySupportsContext("webgl",hn)||Kr.probablySupportsContext("experimental-webgl",hn):Kr.supportsContext?Kr.supportsContext("webgl",hn)||Kr.supportsContext("experimental-webgl",hn):Kr.getContext("webgl",hn)||Kr.getContext("experimental-webgl",hn)}function Vr(Nr){var Kr=Br(Nr);if(!Kr)return!1;var hn=Kr.createShader(Kr.VERTEX_SHADER);return!hn||Kr.isContextLost()?!1:(Kr.shaderSource(hn,"void main() {}"),Kr.compileShader(hn),Kr.getShaderParameter(hn,Kr.COMPILE_STATUS)===!0)}}),a={};a.create=function(ve,X,de){var Q=t.window.document.createElement(ve);return X!==void 0&&(Q.className=X),de&&de.appendChild(Q),Q},a.createNS=function(ve,X){var de=t.window.document.createElementNS(ve,X);return de};var r=t.window.document.documentElement.style;function n(ve){if(!r)return ve[0];for(var X=0;X<ve.length;X++)if(ve[X]in r)return ve[X];return ve[0]}var f=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),l;a.disableDrag=function(){r&&f&&(l=r[f],r[f]="none")},a.enableDrag=function(){r&&f&&(r[f]=l)};var o=n(["transform","WebkitTransform"]);a.setTransform=function(ve,X){ve.style[o]=X};var c=!1;try{var h=Object.defineProperty({},"passive",{get:function(){c=!0}});t.window.addEventListener("test",h,h),t.window.removeEventListener("test",h,h)}catch{c=!1}a.addEventListener=function(ve,X,de,Q){Q===void 0&&(Q={}),"passive"in Q&&c?ve.addEventListener(X,de,Q):ve.addEventListener(X,de,Q.capture)},a.removeEventListener=function(ve,X,de,Q){Q===void 0&&(Q={}),"passive"in Q&&c?ve.removeEventListener(X,de,Q):ve.removeEventListener(X,de,Q.capture)};var d=function(ve){ve.preventDefault(),ve.stopPropagation(),t.window.removeEventListener("click",d,!0)};a.suppressClick=function(){t.window.addEventListener("click",d,!0),t.window.setTimeout(function(){t.window.removeEventListener("click",d,!0)},0)},a.mousePos=function(ve,X){var de=ve.getBoundingClientRect();return new t.Point(X.clientX-de.left-ve.clientLeft,X.clientY-de.top-ve.clientTop)},a.touchPos=function(ve,X){for(var de=ve.getBoundingClientRect(),Q=[],ge=0;ge<X.length;ge++)Q.push(new t.Point(X[ge].clientX-de.left-ve.clientLeft,X[ge].clientY-de.top-ve.clientTop));return Q},a.mouseButton=function(ve){return typeof t.window.InstallTrigger!="undefined"&&ve.button===2&&ve.ctrlKey&&t.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:ve.button},a.remove=function(ve){ve.parentNode&&ve.parentNode.removeChild(ve)};function p(ve,X,de){var Q,ge,Ee,Pe=t.browser.devicePixelRatio>1?"@2x":"",Ze=t.getJSON(X.transformRequest(X.normalizeSpriteURL(ve,Pe,".json"),t.ResourceType.SpriteJSON),function(Vt,$t){Ze=null,Ee||(Ee=Vt,Q=$t,At())}),ft=t.getImage(X.transformRequest(X.normalizeSpriteURL(ve,Pe,".png"),t.ResourceType.SpriteImage),function(Vt,$t){ft=null,Ee||(Ee=Vt,ge=$t,At())});function At(){if(Ee)de(Ee);else if(Q&&ge){var Vt=t.browser.getImageData(ge),$t={};for(var ir in Q){var Sr=Q[ir],Br=Sr.width,Vr=Sr.height,Nr=Sr.x,Kr=Sr.y,hn=Sr.sdf,Sn=Sr.pixelRatio,Nn=Sr.stretchX,Qn=Sr.stretchY,ta=Sr.content,qn=new t.RGBAImage({width:Br,height:Vr});t.RGBAImage.copy(Vt,qn,{x:Nr,y:Kr},{x:0,y:0},{width:Br,height:Vr}),$t[ir]={data:qn,pixelRatio:Sn,sdf:hn,stretchX:Nn,stretchY:Qn,content:ta}}de(null,$t)}}return{cancel:function(){Ze&&(Ze.cancel(),Ze=null),ft&&(ft.cancel(),ft=null)}}}function y(ve){var X=ve.userImage;if(X&&X.render){var de=X.render();if(de)return ve.data.replace(new Uint8Array(X.data.buffer)),!0}return!1}var g=1,A=function(ve){function X(){ve.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new t.RGBAImage({width:1,height:1}),this.dirty=!0}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.isLoaded=function(){return this.loaded},X.prototype.setLoaded=function(Q){if(this.loaded!==Q&&(this.loaded=Q,Q)){for(var ge=0,Ee=this.requestors;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe.ids,ft=Pe.callback;this._notify(Ze,ft)}this.requestors=[]}},X.prototype.getImage=function(Q){return this.images[Q]},X.prototype.addImage=function(Q,ge){this._validate(Q,ge)&&(this.images[Q]=ge)},X.prototype._validate=function(Q,ge){var Ee=!0;return this._validateStretch(ge.stretchX,ge.data&&ge.data.width)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchX" value'))),Ee=!1),this._validateStretch(ge.stretchY,ge.data&&ge.data.height)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "stretchY" value'))),Ee=!1),this._validateContent(ge.content,ge)||(this.fire(new t.ErrorEvent(new Error('Image "'+Q+'" has invalid "content" value'))),Ee=!1),Ee},X.prototype._validateStretch=function(Q,ge){if(!Q)return!0;for(var Ee=0,Pe=0,Ze=Q;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];if(ft[0]<Ee||ft[1]<ft[0]||ge<ft[1])return!1;Ee=ft[1]}return!0},X.prototype._validateContent=function(Q,ge){return Q?!(Q.length!==4||Q[0]<0||ge.data.width<Q[0]||Q[1]<0||ge.data.height<Q[1]||Q[2]<0||ge.data.width<Q[2]||Q[3]<0||ge.data.height<Q[3]||Q[2]<Q[0]||Q[3]<Q[1]):!0},X.prototype.updateImage=function(Q,ge){var Ee=this.images[Q];ge.version=Ee.version+1,this.images[Q]=ge,this.updatedImages[Q]=!0},X.prototype.removeImage=function(Q){var ge=this.images[Q];delete this.images[Q],delete this.patterns[Q],ge.userImage&&ge.userImage.onRemove&&ge.userImage.onRemove()},X.prototype.listImages=function(){return Object.keys(this.images)},X.prototype.getImages=function(Q,ge){var Ee=!0;if(!this.isLoaded())for(var Pe=0,Ze=Q;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||(Ee=!1)}this.isLoaded()||Ee?this._notify(Q,ge):this.requestors.push({ids:Q,callback:ge})},X.prototype._notify=function(Q,ge){for(var Ee={},Pe=0,Ze=Q;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];this.images[ft]||this.fire(new t.Event("styleimagemissing",{id:ft}));var At=this.images[ft];At?Ee[ft]={data:At.data.clone(),pixelRatio:At.pixelRatio,sdf:At.sdf,version:At.version,stretchX:At.stretchX,stretchY:At.stretchY,content:At.content,hasRenderCallback:Boolean(At.userImage&&At.userImage.render)}:t.warnOnce('Image "'+ft+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}ge(null,Ee)},X.prototype.getPixelSize=function(){var Q=this.atlasImage,ge=Q.width,Ee=Q.height;return{width:ge,height:Ee}},X.prototype.getPattern=function(Q){var ge=this.patterns[Q],Ee=this.getImage(Q);if(!Ee)return null;if(ge&&ge.position.version===Ee.version)return ge.position;if(ge)ge.position.version=Ee.version;else{var Pe=Ee.data.width+g*2,Ze=Ee.data.height+g*2,ft={w:Pe,h:Ze,x:0,y:0},At=new t.ImagePosition(ft,Ee);this.patterns[Q]={bin:ft,position:At}}return this._updatePatternAtlas(),this.patterns[Q].position},X.prototype.bind=function(Q){var ge=Q.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new t.Texture(Q,this.atlasImage,ge.RGBA),this.atlasTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)},X.prototype._updatePatternAtlas=function(){var Q=[];for(var ge in this.patterns)Q.push(this.patterns[ge].bin);var Ee=t.potpack(Q),Pe=Ee.w,Ze=Ee.h,ft=this.atlasImage;ft.resize({width:Pe||1,height:Ze||1});for(var At in this.patterns){var Vt=this.patterns[At],$t=Vt.bin,ir=$t.x+g,Sr=$t.y+g,Br=this.images[At].data,Vr=Br.width,Nr=Br.height;t.RGBAImage.copy(Br,ft,{x:0,y:0},{x:ir,y:Sr},{width:Vr,height:Nr}),t.RGBAImage.copy(Br,ft,{x:0,y:Nr-1},{x:ir,y:Sr-1},{width:Vr,height:1}),t.RGBAImage.copy(Br,ft,{x:0,y:0},{x:ir,y:Sr+Nr},{width:Vr,height:1}),t.RGBAImage.copy(Br,ft,{x:Vr-1,y:0},{x:ir-1,y:Sr},{width:1,height:Nr}),t.RGBAImage.copy(Br,ft,{x:0,y:0},{x:ir+Vr,y:Sr},{width:1,height:Nr})}this.dirty=!0},X.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},X.prototype.dispatchRenderCallbacks=function(Q){for(var ge=0,Ee=Q;ge<Ee.length;ge+=1){var Pe=Ee[ge];if(!this.callbackDispatchedThisFrame[Pe]){this.callbackDispatchedThisFrame[Pe]=!0;var Ze=this.images[Pe],ft=y(Ze);ft&&this.updateImage(Pe,Ze)}}},X}(t.Evented);function b(ve,X,de,Q,ge){var Ee=X*256,Pe=Ee+255,Ze=Q.transformRequest(Q.normalizeGlyphsURL(de).replace("{fontstack}",ve).replace("{range}",Ee+"-"+Pe),t.ResourceType.Glyphs);t.getArrayBuffer(Ze,function(ft,At){if(ft)ge(ft);else if(At){for(var Vt={},$t=0,ir=t.parseGlyphPBF(At);$t<ir.length;$t+=1){var Sr=ir[$t];Vt[Sr.id]=Sr}ge(null,Vt)}})}var M=w,_=w,T=1e20;function w(ve,X,de,Q,ge,Ee){this.fontSize=ve||24,this.buffer=X===void 0?3:X,this.cutoff=Q||.25,this.fontFamily=ge||"sans-serif",this.fontWeight=Ee||"normal",this.radius=de||8;var Pe=this.size=this.fontSize+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=Pe,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(Pe*Pe),this.gridInner=new Float64Array(Pe*Pe),this.f=new Float64Array(Pe),this.d=new Float64Array(Pe),this.z=new Float64Array(Pe+1),this.v=new Int16Array(Pe),this.middle=Math.round(Pe/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}w.prototype.draw=function(ve){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(ve,this.buffer,this.middle);for(var X=this.ctx.getImageData(0,0,this.size,this.size),de=new Uint8ClampedArray(this.size*this.size),Q=0;Q<this.size*this.size;Q++){var ge=X.data[Q*4+3]/255;this.gridOuter[Q]=ge===1?0:ge===0?T:Math.pow(Math.max(0,.5-ge),2),this.gridInner[Q]=ge===1?T:ge===0?0:Math.pow(Math.max(0,ge-.5),2)}for(v(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),v(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),Q=0;Q<this.size*this.size;Q++){var Ee=this.gridOuter[Q]-this.gridInner[Q];de[Q]=Math.max(0,Math.min(255,Math.round(255-255*(Ee/this.radius+this.cutoff))))}return de};function v(ve,X,de,Q,ge,Ee,Pe){for(var Ze=0;Ze<X;Ze++){for(var ft=0;ft<de;ft++)Q[ft]=ve[ft*X+Ze];for(L(Q,ge,Ee,Pe,de),ft=0;ft<de;ft++)ve[ft*X+Ze]=ge[ft]}for(ft=0;ft<de;ft++){for(Ze=0;Ze<X;Ze++)Q[Ze]=ve[ft*X+Ze];for(L(Q,ge,Ee,Pe,X),Ze=0;Ze<X;Ze++)ve[ft*X+Ze]=Math.sqrt(ge[Ze])}}function L(ve,X,de,Q,ge){de[0]=0,Q[0]=-T,Q[1]=+T;for(var Ee=1,Pe=0;Ee<ge;Ee++){for(var Ze=(ve[Ee]+Ee*Ee-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ee-2*de[Pe]);Ze<=Q[Pe];)Pe--,Ze=(ve[Ee]+Ee*Ee-(ve[de[Pe]]+de[Pe]*de[Pe]))/(2*Ee-2*de[Pe]);Pe++,de[Pe]=Ee,Q[Pe]=Ze,Q[Pe+1]=+T}for(Ee=0,Pe=0;Ee<ge;Ee++){for(;Q[Pe+1]<Ee;)Pe++;X[Ee]=(Ee-de[Pe])*(Ee-de[Pe])+ve[de[Pe]]}}M.default=_;var S=function(X,de){this.requestManager=X,this.localIdeographFontFamily=de,this.entries={}};S.prototype.setURL=function(X){this.url=X},S.prototype.getGlyphs=function(X,de){var Q=this,ge=[];for(var Ee in X)for(var Pe=0,Ze=X[Ee];Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ge.push({stack:Ee,id:ft})}t.asyncAll(ge,function(At,Vt){var $t=At.stack,ir=At.id,Sr=Q.entries[$t];Sr||(Sr=Q.entries[$t]={glyphs:{},requests:{},ranges:{}});var Br=Sr.glyphs[ir];if(Br!==void 0){Vt(null,{stack:$t,id:ir,glyph:Br});return}if(Br=Q._tinySDF(Sr,$t,ir),Br){Sr.glyphs[ir]=Br,Vt(null,{stack:$t,id:ir,glyph:Br});return}var Vr=Math.floor(ir/256);if(Vr*256>65535){Vt(new Error("glyphs > 65535 not supported"));return}if(Sr.ranges[Vr]){Vt(null,{stack:$t,id:ir,glyph:Br});return}var Nr=Sr.requests[Vr];Nr||(Nr=Sr.requests[Vr]=[],S.loadGlyphRange($t,Vr,Q.url,Q.requestManager,function(Kr,hn){if(hn){for(var Sn in hn)Q._doesCharSupportLocalGlyph(+Sn)||(Sr.glyphs[+Sn]=hn[+Sn]);Sr.ranges[Vr]=!0}for(var Nn=0,Qn=Nr;Nn<Qn.length;Nn+=1){var ta=Qn[Nn];ta(Kr,hn)}delete Sr.requests[Vr]})),Nr.push(function(Kr,hn){Kr?Vt(Kr):hn&&Vt(null,{stack:$t,id:ir,glyph:hn[ir]||null})})},function(At,Vt){if(At)de(At);else if(Vt){for(var $t={},ir=0,Sr=Vt;ir<Sr.length;ir+=1){var Br=Sr[ir],Vr=Br.stack,Nr=Br.id,Kr=Br.glyph;($t[Vr]||($t[Vr]={}))[Nr]=Kr&&{id:Kr.id,bitmap:Kr.bitmap.clone(),metrics:Kr.metrics}}de(null,$t)}})},S.prototype._doesCharSupportLocalGlyph=function(X){return!!this.localIdeographFontFamily&&(t.isChar["CJK Unified Ideographs"](X)||t.isChar["Hangul Syllables"](X)||t.isChar.Hiragana(X)||t.isChar.Katakana(X))},S.prototype._tinySDF=function(X,de,Q){var ge=this.localIdeographFontFamily;if(!!ge&&!!this._doesCharSupportLocalGlyph(Q)){var Ee=X.tinySDF;if(!Ee){var Pe="400";/bold/i.test(de)?Pe="900":/medium/i.test(de)?Pe="500":/light/i.test(de)&&(Pe="200"),Ee=X.tinySDF=new S.TinySDF(24,3,8,.25,ge,Pe)}return{id:Q,bitmap:new t.AlphaImage({width:30,height:30},Ee.draw(String.fromCharCode(Q))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},S.loadGlyphRange=b,S.TinySDF=M;var k=function(){this.specification=t.styleSpec.light.position};k.prototype.possiblyEvaluate=function(X,de){return t.sphericalToCartesian(X.expression.evaluate(de))},k.prototype.interpolate=function(X,de,Q){return{x:t.number(X.x,de.x,Q),y:t.number(X.y,de.y,Q),z:t.number(X.z,de.z,Q)}};var P=new t.Properties({anchor:new t.DataConstantProperty(t.styleSpec.light.anchor),position:new k,color:new t.DataConstantProperty(t.styleSpec.light.color),intensity:new t.DataConstantProperty(t.styleSpec.light.intensity)}),O="-transition",F=function(ve){function X(de){ve.call(this),this._transitionable=new t.Transitionable(P),this.setLight(de),this._transitioning=this._transitionable.untransitioned()}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getLight=function(){return this._transitionable.serialize()},X.prototype.setLight=function(Q,ge){if(ge===void 0&&(ge={}),!this._validate(t.validateLight,Q,ge))for(var Ee in Q){var Pe=Q[Ee];t.endsWith(Ee,O)?this._transitionable.setTransition(Ee.slice(0,-O.length),Pe):this._transitionable.setValue(Ee,Pe)}},X.prototype.updateTransitions=function(Q){this._transitioning=this._transitionable.transitioned(Q,this._transitioning)},X.prototype.hasTransition=function(){return this._transitioning.hasTransition()},X.prototype.recalculate=function(Q){this.properties=this._transitioning.possiblyEvaluate(Q)},X.prototype._validate=function(Q,ge,Ee){return Ee&&Ee.validate===!1?!1:t.emitValidationErrors(this,Q.call(t.validateStyle,t.extend({value:ge,style:{glyphs:!0,sprite:!0},styleSpec:t.styleSpec})))},X}(t.Evented),I=function(X,de){this.width=X,this.height=de,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};I.prototype.getDash=function(X,de){var Q=X.join(",")+String(de);return this.dashEntry[Q]||(this.dashEntry[Q]=this.addDash(X,de)),this.dashEntry[Q]},I.prototype.getDashRanges=function(X,de,Q){var ge=X.length%2==1,Ee=[],Pe=ge?-X[X.length-1]*Q:0,Ze=X[0]*Q,ft=!0;Ee.push({left:Pe,right:Ze,isDash:ft,zeroLength:X[0]===0});for(var At=X[0],Vt=1;Vt<X.length;Vt++){ft=!ft;var $t=X[Vt];Pe=At*Q,At+=$t,Ze=At*Q,Ee.push({left:Pe,right:Ze,isDash:ft,zeroLength:$t===0})}return Ee},I.prototype.addRoundDash=function(X,de,Q){for(var ge=de/2,Ee=-Q;Ee<=Q;Ee++)for(var Pe=this.nextRow+Q+Ee,Ze=this.width*Pe,ft=0,At=X[ft],Vt=0;Vt<this.width;Vt++){Vt/At.right>1&&(At=X[++ft]);var $t=Math.abs(Vt-At.left),ir=Math.abs(Vt-At.right),Sr=Math.min($t,ir),Br=void 0,Vr=Ee/Q*(ge+1);if(At.isDash){var Nr=ge-Math.abs(Vr);Br=Math.sqrt(Sr*Sr+Nr*Nr)}else Br=ge-Math.sqrt(Sr*Sr+Vr*Vr);this.data[Ze+Vt]=Math.max(0,Math.min(255,Br+128))}},I.prototype.addRegularDash=function(X){for(var de=X.length-1;de>=0;--de){var Q=X[de],ge=X[de+1];Q.zeroLength?X.splice(de,1):ge&&ge.isDash===Q.isDash&&(ge.left=Q.left,X.splice(de,1))}var Ee=X[0],Pe=X[X.length-1];Ee.isDash===Pe.isDash&&(Ee.left=Pe.left-this.width,Pe.right=Ee.right+this.width);for(var Ze=this.width*this.nextRow,ft=0,At=X[ft],Vt=0;Vt<this.width;Vt++){Vt/At.right>1&&(At=X[++ft]);var $t=Math.abs(Vt-At.left),ir=Math.abs(Vt-At.right),Sr=Math.min($t,ir),Br=At.isDash?Sr:-Sr;this.data[Ze+Vt]=Math.max(0,Math.min(255,Br+128))}},I.prototype.addDash=function(X,de){var Q=de?7:0,ge=2*Q+1;if(this.nextRow+ge>this.height)return t.warnOnce("LineAtlas out of space"),null;for(var Ee=0,Pe=0;Pe<X.length;Pe++)Ee+=X[Pe];if(Ee!==0){var Ze=this.width/Ee,ft=this.getDashRanges(X,this.width,Ze);de?this.addRoundDash(ft,Ze,Q):this.addRegularDash(ft)}var At={y:(this.nextRow+Q+.5)/this.height,height:2*Q/this.height,width:Ee};return this.nextRow+=ge,this.dirty=!0,At},I.prototype.bind=function(X){var de=X.gl;this.texture?(de.bindTexture(de.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,de.texSubImage2D(de.TEXTURE_2D,0,0,0,this.width,this.height,de.ALPHA,de.UNSIGNED_BYTE,this.data))):(this.texture=de.createTexture(),de.bindTexture(de.TEXTURE_2D,this.texture),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.REPEAT),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),de.texImage2D(de.TEXTURE_2D,0,de.ALPHA,this.width,this.height,0,de.ALPHA,de.UNSIGNED_BYTE,this.data))};var D=function ve(X,de){this.workerPool=X,this.actors=[],this.currentActor=0,this.id=t.uniqueId();for(var Q=this.workerPool.acquire(this.id),ge=0;ge<Q.length;ge++){var Ee=Q[ge],Pe=new ve.Actor(Ee,de,this.id);Pe.name="Worker "+ge,this.actors.push(Pe)}};D.prototype.broadcast=function(X,de,Q){Q=Q||function(){},t.asyncAll(this.actors,function(ge,Ee){ge.send(X,de,Ee)},Q)},D.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},D.prototype.remove=function(){this.actors.forEach(function(X){X.remove()}),this.actors=[],this.workerPool.release(this.id)},D.Actor=t.Actor;function U(ve,X,de){var Q=function(ge,Ee){if(ge)return de(ge);if(Ee){var Pe=t.pick(t.extend(Ee,ve),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);Ee.vector_layers&&(Pe.vectorLayers=Ee.vector_layers,Pe.vectorLayerIds=Pe.vectorLayers.map(function(Ze){return Ze.id})),Pe.tiles=X.canonicalizeTileset(Pe,ve.url),de(null,Pe)}};return ve.url?t.getJSON(X.transformRequest(X.normalizeSourceURL(ve.url),t.ResourceType.Source),Q):t.browser.frame(function(){return Q(null,ve)})}var B=function(X,de,Q){this.bounds=t.LngLatBounds.convert(this.validateBounds(X)),this.minzoom=de||0,this.maxzoom=Q||24};B.prototype.validateBounds=function(X){return!Array.isArray(X)||X.length!==4?[-180,-90,180,90]:[Math.max(-180,X[0]),Math.max(-90,X[1]),Math.min(180,X[2]),Math.min(90,X[3])]},B.prototype.contains=function(X){var de=Math.pow(2,X.z),Q={minX:Math.floor(t.mercatorXfromLng(this.bounds.getWest())*de),minY:Math.floor(t.mercatorYfromLat(this.bounds.getNorth())*de),maxX:Math.ceil(t.mercatorXfromLng(this.bounds.getEast())*de),maxY:Math.ceil(t.mercatorYfromLat(this.bounds.getSouth())*de)},ge=X.x>=Q.minX&&X.x<Q.maxX&&X.y>=Q.minY&&X.y<Q.maxY;return ge};var j=function(ve){function X(de,Q,ge,Ee){if(ve.call(this),this.id=de,this.dispatcher=ge,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,t.extend(this,t.pick(Q,["url","scheme","tileSize","promoteId"])),this._options=t.extend({type:"vector"},Q),this._collectResourceTiming=Q.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Ee)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,function(ge,Ee){Q._tileJSONRequest=null,Q._loaded=!0,ge?Q.fire(new t.ErrorEvent(ge)):Ee&&(t.extend(Q,Ee),Ee.bounds&&(Q.tileBounds=new B(Ee.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Ee.tiles,Q.map._requestManager._customAccessToken),t.postMapLoadEvent(Ee.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken,Q.map._requestManager._customAccessToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},X.prototype.onAdd=function(Q){this.map=Q,this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return t.extend({},this._options)},X.prototype.loadTile=function(Q,ge){var Ee=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme)),Pe={request:this.map._requestManager.transformRequest(Ee,t.ResourceType.Tile),uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,tileSize:this.tileSize*Q.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Pe.request.collectResourceTiming=this._collectResourceTiming,!Q.actor||Q.state==="expired"?(Q.actor=this.dispatcher.getActor(),Q.request=Q.actor.send("loadTile",Pe,Ze.bind(this))):Q.state==="loading"?Q.reloadCallback=ge:Q.request=Q.actor.send("reloadTile",Pe,Ze.bind(this));function Ze(ft,At){if(delete Q.request,Q.aborted)return ge(null);if(ft&&ft.status!==404)return ge(ft);At&&At.resourceTiming&&(Q.resourceTiming=At.resourceTiming),this.map._refreshExpiredTiles&&At&&Q.setExpiryData(At),Q.loadVectorData(At,this.map.painter),t.cacheEntryPossiblyAdded(this.dispatcher),ge(null),Q.reloadCallback&&(this.loadTile(Q,Q.reloadCallback),Q.reloadCallback=null)}},X.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.actor&&Q.actor.send("abortTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},X.prototype.unloadTile=function(Q){Q.unloadVectorData(),Q.actor&&Q.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id},void 0)},X.prototype.hasTransition=function(){return!1},X}(t.Evented),Z=function(ve){function X(de,Q,ge,Ee){ve.call(this),this.id=de,this.dispatcher=ge,this.setEventedParent(Ee),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=t.extend({type:"raster"},Q),t.extend(this,t.pick(Q,["url","scheme","tileSize"]))}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var Q=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=U(this._options,this.map._requestManager,function(ge,Ee){Q._tileJSONRequest=null,Q._loaded=!0,ge?Q.fire(new t.ErrorEvent(ge)):Ee&&(t.extend(Q,Ee),Ee.bounds&&(Q.tileBounds=new B(Ee.bounds,Q.minzoom,Q.maxzoom)),t.postTurnstileEvent(Ee.tiles),t.postMapLoadEvent(Ee.tiles,Q.map._getMapId(),Q.map._requestManager._skuToken),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})),Q.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})))})},X.prototype.loaded=function(){return this._loaded},X.prototype.onAdd=function(Q){this.map=Q,this.load()},X.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},X.prototype.serialize=function(){return t.extend({},this._options)},X.prototype.hasTile=function(Q){return!this.tileBounds||this.tileBounds.contains(Q.canonical)},X.prototype.loadTile=function(Q,ge){var Ee=this,Pe=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=t.getImage(this.map._requestManager.transformRequest(Pe,t.ResourceType.Tile),function(Ze,ft){if(delete Q.request,Q.aborted)Q.state="unloaded",ge(null);else if(Ze)Q.state="errored",ge(Ze);else if(ft){Ee.map._refreshExpiredTiles&&Q.setExpiryData(ft),delete ft.cacheControl,delete ft.expires;var At=Ee.map.painter.context,Vt=At.gl;Q.texture=Ee.map.painter.getTileTexture(ft.width),Q.texture?Q.texture.update(ft,{useMipmap:!0}):(Q.texture=new t.Texture(At,ft,Vt.RGBA,{useMipmap:!0}),Q.texture.bind(Vt.LINEAR,Vt.CLAMP_TO_EDGE,Vt.LINEAR_MIPMAP_NEAREST),At.extTextureFilterAnisotropic&&Vt.texParameterf(Vt.TEXTURE_2D,At.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,At.extTextureFilterAnisotropicMax)),Q.state="loaded",t.cacheEntryPossiblyAdded(Ee.dispatcher),ge(null)}})},X.prototype.abortTile=function(Q,ge){Q.request&&(Q.request.cancel(),delete Q.request),ge()},X.prototype.unloadTile=function(Q,ge){Q.texture&&this.map.painter.saveTileTexture(Q.texture),ge()},X.prototype.hasTransition=function(){return!1},X}(t.Evented),ee=function(ve){function X(de,Q,ge,Ee){ve.call(this,de,Q,ge,Ee),this.type="raster-dem",this.maxzoom=22,this._options=t.extend({type:"raster-dem"},Q),this.encoding=Q.encoding||"mapbox"}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},X.prototype.loadTile=function(Q,ge){var Ee=this.map._requestManager.normalizeTileURL(Q.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);Q.request=t.getImage(this.map._requestManager.transformRequest(Ee,t.ResourceType.Tile),Pe.bind(this)),Q.neighboringTiles=this._getNeighboringTiles(Q.tileID);function Pe(ft,At){if(delete Q.request,Q.aborted)Q.state="unloaded",ge(null);else if(ft)Q.state="errored",ge(ft);else if(At){this.map._refreshExpiredTiles&&Q.setExpiryData(At),delete At.cacheControl,delete At.expires;var Vt=t.window.ImageBitmap&&At instanceof t.window.ImageBitmap&&t.offscreenCanvasSupported(),$t=Vt?At:t.browser.getImageData(At,1),ir={uid:Q.uid,coord:Q.tileID,source:this.id,rawImageData:$t,encoding:this.encoding};(!Q.actor||Q.state==="expired")&&(Q.actor=this.dispatcher.getActor(),Q.actor.send("loadDEMTile",ir,Ze.bind(this)))}}function Ze(ft,At){ft&&(Q.state="errored",ge(ft)),At&&(Q.dem=At,Q.needsHillshadePrepare=!0,Q.state="loaded",ge(null))}},X.prototype._getNeighboringTiles=function(Q){var ge=Q.canonical,Ee=Math.pow(2,ge.z),Pe=(ge.x-1+Ee)%Ee,Ze=ge.x===0?Q.wrap-1:Q.wrap,ft=(ge.x+1+Ee)%Ee,At=ge.x+1===Ee?Q.wrap+1:Q.wrap,Vt={};return Vt[new t.OverscaledTileID(Q.overscaledZ,Ze,ge.z,Pe,ge.y).key]={backfilled:!1},Vt[new t.OverscaledTileID(Q.overscaledZ,At,ge.z,ft,ge.y).key]={backfilled:!1},ge.y>0&&(Vt[new t.OverscaledTileID(Q.overscaledZ,Ze,ge.z,Pe,ge.y-1).key]={backfilled:!1},Vt[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,ge.z,ge.x,ge.y-1).key]={backfilled:!1},Vt[new t.OverscaledTileID(Q.overscaledZ,At,ge.z,ft,ge.y-1).key]={backfilled:!1}),ge.y+1<Ee&&(Vt[new t.OverscaledTileID(Q.overscaledZ,Ze,ge.z,Pe,ge.y+1).key]={backfilled:!1},Vt[new t.OverscaledTileID(Q.overscaledZ,Q.wrap,ge.z,ge.x,ge.y+1).key]={backfilled:!1},Vt[new t.OverscaledTileID(Q.overscaledZ,At,ge.z,ft,ge.y+1).key]={backfilled:!1}),Vt},X.prototype.unloadTile=function(Q){Q.demTexture&&this.map.painter.saveTileTexture(Q.demTexture),Q.fbo&&(Q.fbo.destroy(),delete Q.fbo),Q.dem&&delete Q.dem,delete Q.neighboringTiles,Q.state="unloaded",Q.actor&&Q.actor.send("removeDEMTile",{uid:Q.uid,source:this.id})},X}(Z),q=function(ve){function X(de,Q,ge,Ee){ve.call(this),this.id=de,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=ge.getActor(),this.setEventedParent(Ee),this._data=Q.data,this._options=t.extend({},Q),this._collectResourceTiming=Q.collectResourceTiming,this._resourceTiming=[],Q.maxzoom!==void 0&&(this.maxzoom=Q.maxzoom),Q.type&&(this.type=Q.type),Q.attribution&&(this.attribution=Q.attribution),this.promoteId=Q.promoteId;var Pe=t.EXTENT/this.tileSize;this.workerOptions=t.extend({source:this.id,cluster:Q.cluster||!1,geojsonVtOptions:{buffer:(Q.buffer!==void 0?Q.buffer:128)*Pe,tolerance:(Q.tolerance!==void 0?Q.tolerance:.375)*Pe,extent:t.EXTENT,maxZoom:this.maxzoom,lineMetrics:Q.lineMetrics||!1,generateId:Q.generateId||!1},superclusterOptions:{maxZoom:Q.clusterMaxZoom!==void 0?Math.min(Q.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:t.EXTENT,radius:(Q.clusterRadius||50)*Pe,log:!1,generateId:Q.generateId||!1},clusterProperties:Q.clusterProperties},Q.workerOptions)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var Q=this;this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(ge){if(ge){Q.fire(new t.ErrorEvent(ge));return}var Ee={dataType:"source",sourceDataType:"metadata"};Q._collectResourceTiming&&Q._resourceTiming&&Q._resourceTiming.length>0&&(Ee.resourceTiming=Q._resourceTiming,Q._resourceTiming=[]),Q.fire(new t.Event("data",Ee))})},X.prototype.onAdd=function(Q){this.map=Q,this.load()},X.prototype.setData=function(Q){var ge=this;return this._data=Q,this.fire(new t.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(Ee){if(Ee){ge.fire(new t.ErrorEvent(Ee));return}var Pe={dataType:"source",sourceDataType:"content"};ge._collectResourceTiming&&ge._resourceTiming&&ge._resourceTiming.length>0&&(Pe.resourceTiming=ge._resourceTiming,ge._resourceTiming=[]),ge.fire(new t.Event("data",Pe))}),this},X.prototype.getClusterExpansionZoom=function(Q,ge){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:Q,source:this.id},ge),this},X.prototype.getClusterChildren=function(Q,ge){return this.actor.send("geojson.getClusterChildren",{clusterId:Q,source:this.id},ge),this},X.prototype.getClusterLeaves=function(Q,ge,Ee,Pe){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:Q,limit:ge,offset:Ee},Pe),this},X.prototype._updateWorkerData=function(Q){var ge=this;this._loaded=!1;var Ee=t.extend({},this.workerOptions),Pe=this._data;typeof Pe=="string"?(Ee.request=this.map._requestManager.transformRequest(t.browser.resolveURL(Pe),t.ResourceType.Source),Ee.request.collectResourceTiming=this._collectResourceTiming):Ee.data=JSON.stringify(Pe),this.actor.send(this.type+".loadData",Ee,function(Ze,ft){ge._removed||ft&&ft.abandoned||(ge._loaded=!0,ft&&ft.resourceTiming&&ft.resourceTiming[ge.id]&&(ge._resourceTiming=ft.resourceTiming[ge.id].slice(0)),ge.actor.send(ge.type+".coalesce",{source:Ee.source},null),Q(Ze))})},X.prototype.loaded=function(){return this._loaded},X.prototype.loadTile=function(Q,ge){var Ee=this,Pe=Q.actor?"reloadTile":"loadTile";Q.actor=this.actor;var Ze={type:this.type,uid:Q.uid,tileID:Q.tileID,zoom:Q.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:t.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};Q.request=this.actor.send(Pe,Ze,function(ft,At){return delete Q.request,Q.unloadVectorData(),Q.aborted?ge(null):ft?ge(ft):(Q.loadVectorData(At,Ee.map.painter,Pe==="reloadTile"),ge(null))})},X.prototype.abortTile=function(Q){Q.request&&(Q.request.cancel(),delete Q.request),Q.aborted=!0},X.prototype.unloadTile=function(Q){Q.unloadVectorData(),this.actor.send("removeTile",{uid:Q.uid,type:this.type,source:this.id})},X.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},X.prototype.serialize=function(){return t.extend({},this._options,{type:this.type,data:this._data})},X.prototype.hasTransition=function(){return!1},X}(t.Evented),W=t.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),J=function(ve){function X(de,Q,ge,Ee){ve.call(this),this.id=de,this.dispatcher=ge,this.coordinates=Q.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(Ee),this.options=Q}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(Q,ge){var Ee=this;this._loaded=!1,this.fire(new t.Event("dataloading",{dataType:"source"})),this.url=this.options.url,t.getImage(this.map._requestManager.transformRequest(this.url,t.ResourceType.Image),function(Pe,Ze){Ee._loaded=!0,Pe?Ee.fire(new t.ErrorEvent(Pe)):Ze&&(Ee.image=Ze,Q&&(Ee.coordinates=Q),ge&&ge(),Ee._finishLoading())})},X.prototype.loaded=function(){return this._loaded},X.prototype.updateImage=function(Q){var ge=this;return!this.image||!Q.url?this:(this.options.url=Q.url,this.load(Q.coordinates,function(){ge.texture=null}),this)},X.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"metadata"})))},X.prototype.onAdd=function(Q){this.map=Q,this.load()},X.prototype.setCoordinates=function(Q){var ge=this;this.coordinates=Q;var Ee=Q.map(t.MercatorCoordinate.fromLngLat);this.tileID=le(Ee),this.minzoom=this.maxzoom=this.tileID.z;var Pe=Ee.map(function(Ze){return ge.tileID.getTilePoint(Ze)._round()});return this._boundsArray=new t.StructArrayLayout4i8,this._boundsArray.emplaceBack(Pe[0].x,Pe[0].y,0,0),this._boundsArray.emplaceBack(Pe[1].x,Pe[1].y,t.EXTENT,0),this._boundsArray.emplaceBack(Pe[3].x,Pe[3].y,0,t.EXTENT),this._boundsArray.emplaceBack(Pe[2].x,Pe[2].y,t.EXTENT,t.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new t.Event("data",{dataType:"source",sourceDataType:"content"})),this},X.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||!this.image)){var Q=this.map.painter.context,ge=Q.gl;this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new t.Texture(Q,this.image,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Pe=this.tiles[Ee];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},X.prototype.loadTile=function(Q,ge){this.tileID&&this.tileID.equals(Q.tileID.canonical)?(this.tiles[String(Q.tileID.wrap)]=Q,Q.buckets={},ge(null)):(Q.state="errored",ge(null))},X.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return!1},X}(t.Evented);function le(ve){for(var X=1/0,de=1/0,Q=-1/0,ge=-1/0,Ee=0,Pe=ve;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee];X=Math.min(X,Ze.x),de=Math.min(de,Ze.y),Q=Math.max(Q,Ze.x),ge=Math.max(ge,Ze.y)}var ft=Q-X,At=ge-de,Vt=Math.max(ft,At),$t=Math.max(0,Math.floor(-Math.log(Vt)/Math.LN2)),ir=Math.pow(2,$t);return new t.CanonicalTileID($t,Math.floor((X+Q)/2*ir),Math.floor((de+ge)/2*ir))}var fe=function(ve){function X(de,Q,ge,Ee){ve.call(this,de,Q,ge,Ee),this.roundZoom=!0,this.type="video",this.options=Q}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){var Q=this;this._loaded=!1;var ge=this.options;this.urls=[];for(var Ee=0,Pe=ge.urls;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee];this.urls.push(this.map._requestManager.transformRequest(Ze,t.ResourceType.Source).url)}t.getVideo(this.urls,function(ft,At){Q._loaded=!0,ft?Q.fire(new t.ErrorEvent(ft)):At&&(Q.video=At,Q.video.loop=!0,Q.video.addEventListener("playing",function(){Q.map.triggerRepaint()}),Q.map&&Q.video.play(),Q._finishLoading())})},X.prototype.pause=function(){this.video&&this.video.pause()},X.prototype.play=function(){this.video&&this.video.play()},X.prototype.seek=function(Q){if(this.video){var ge=this.video.seekable;Q<ge.start(0)||Q>ge.end(0)?this.fire(new t.ErrorEvent(new t.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+ge.start(0)+" and "+ge.end(0)+"-second mark."))):this.video.currentTime=Q}},X.prototype.getVideo=function(){return this.video},X.prototype.onAdd=function(Q){this.map||(this.map=Q,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},X.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var Q=this.map.painter.context,ge=Q.gl;this.boundsBuffer||(this.boundsBuffer=Q.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),ge.texSubImage2D(ge.TEXTURE_2D,0,0,0,ge.RGBA,ge.UNSIGNED_BYTE,this.video)):(this.texture=new t.Texture(Q,this.video,ge.RGBA),this.texture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE));for(var Ee in this.tiles){var Pe=this.tiles[Ee];Pe.state!=="loaded"&&(Pe.state="loaded",Pe.texture=this.texture)}}},X.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this.video&&!this.video.paused},X}(J),se=function(ve){function X(de,Q,ge,Ee){ve.call(this,de,Q,ge,Ee),Q.coordinates?(!Array.isArray(Q.coordinates)||Q.coordinates.length!==4||Q.coordinates.some(function(Pe){return!Array.isArray(Pe)||Pe.length!==2||Pe.some(function(Ze){return typeof Ze!="number"})}))&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'missing required property "coordinates"'))),Q.animate&&typeof Q.animate!="boolean"&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'optional "animate" property must be a boolean value'))),Q.canvas?typeof Q.canvas!="string"&&!(Q.canvas instanceof t.window.HTMLCanvasElement)&&this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new t.ErrorEvent(new t.ValidationError("sources."+de,null,'missing required property "canvas"'))),this.options=Q,this.animate=Q.animate!==void 0?Q.animate:!0}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.load=function(){if(this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof t.window.HTMLCanvasElement?this.options.canvas:t.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()){this.fire(new t.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero.")));return}this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading()},X.prototype.getCanvas=function(){return this.canvas},X.prototype.onAdd=function(Q){this.map=Q,this.load(),this.canvas&&this.animate&&this.play()},X.prototype.onRemove=function(){this.pause()},X.prototype.prepare=function(){var Q=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,Q=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,Q=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var ge=this.map.painter.context,Ee=ge.gl;this.boundsBuffer||(this.boundsBuffer=ge.createVertexBuffer(this._boundsArray,W.members)),this.boundsSegments||(this.boundsSegments=t.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(Q||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new t.Texture(ge,this.canvas,Ee.RGBA,{premultiply:!0});for(var Pe in this.tiles){var Ze=this.tiles[Pe];Ze.state!=="loaded"&&(Ze.state="loaded",Ze.texture=this.texture)}}},X.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},X.prototype.hasTransition=function(){return this._playing},X.prototype._hasInvalidDimensions=function(){for(var Q=0,ge=[this.canvas.width,this.canvas.height];Q<ge.length;Q+=1){var Ee=ge[Q];if(isNaN(Ee)||Ee<=0)return!0}return!1},X}(J),H={vector:j,raster:Z,"raster-dem":ee,geojson:q,video:fe,image:J,canvas:se},Y=function(ve,X,de,Q){var ge=new H[X.type](ve,X,de,Q);if(ge.id!==ve)throw new Error("Expected Source id to be "+ve+" instead of "+ge.id);return t.bindAll(["load","abort","unload","serialize","prepare"],ge),ge},ne=function(ve){return H[ve]},te=function(ve,X){H[ve]=X};function K(ve,X){var de=t.identity([]);return t.translate(de,de,[1,1,0]),t.scale(de,de,[ve.width*.5,ve.height*.5,1]),t.multiply(de,de,ve.calculatePosMatrix(X.toUnwrapped()))}function $(ve,X,de){if(ve)for(var Q=0,ge=ve;Q<ge.length;Q+=1){var Ee=ge[Q],Pe=X[Ee];if(Pe&&Pe.source===de&&Pe.type==="fill-extrusion")return!0}else for(var Ze in X){var ft=X[Ze];if(ft.source===de&&ft.type==="fill-extrusion")return!0}return!1}function ae(ve,X,de,Q,ge,Ee){var Pe=$(ge&&ge.layers,X,ve.id),Ze=Ee.maxPitchScaleFactor(),ft=ve.tilesIn(Q,Ze,Pe);ft.sort(ue);for(var At=[],Vt=0,$t=ft;Vt<$t.length;Vt+=1){var ir=$t[Vt];At.push({wrappedTileID:ir.tileID.wrapped().key,queryResults:ir.tile.queryRenderedFeatures(X,de,ve._state,ir.queryGeometry,ir.cameraQueryGeometry,ir.scale,ge,Ee,Ze,K(ve.transform,ir.tileID))})}var Sr=ye(At);for(var Br in Sr)Sr[Br].forEach(function(Vr){var Nr=Vr.feature,Kr=ve.getFeatureState(Nr.layer["source-layer"],Nr.id);Nr.source=Nr.layer.source,Nr.layer["source-layer"]&&(Nr.sourceLayer=Nr.layer["source-layer"]),Nr.state=Kr});return Sr}function ie(ve,X,de,Q,ge,Ee,Pe){for(var Ze={},ft=Ee.queryRenderedSymbols(Q),At=[],Vt=0,$t=Object.keys(ft).map(Number);Vt<$t.length;Vt+=1){var ir=$t[Vt];At.push(Pe[ir])}At.sort(ue);for(var Sr=function(){var hn=Vr[Br],Sn=hn.featureIndex.lookupSymbolFeatures(ft[hn.bucketInstanceId],X,hn.bucketIndex,hn.sourceLayerIndex,ge.filter,ge.layers,ge.availableImages,ve);for(var Nn in Sn){var Qn=Ze[Nn]=Ze[Nn]||[],ta=Sn[Nn];ta.sort(function(_a,ka){var Da=hn.featureSortOrder;if(Da){var Wa=Da.indexOf(_a.featureIndex),oi=Da.indexOf(ka.featureIndex);return oi-Wa}else return ka.featureIndex-_a.featureIndex});for(var qn=0,pa=ta;qn<pa.length;qn+=1){var Ta=pa[qn];Qn.push(Ta)}}},Br=0,Vr=At;Br<Vr.length;Br+=1)Sr();var Nr=function(hn){Ze[hn].forEach(function(Sn){var Nn=Sn.feature,Qn=ve[hn],ta=de[Qn.source],qn=ta.getFeatureState(Nn.layer["source-layer"],Nn.id);Nn.source=Nn.layer.source,Nn.layer["source-layer"]&&(Nn.sourceLayer=Nn.layer["source-layer"]),Nn.state=qn})};for(var Kr in Ze)Nr(Kr);return Ze}function oe(ve,X){for(var de=ve.getRenderableIds().map(function(ft){return ve.getTileByID(ft)}),Q=[],ge={},Ee=0;Ee<de.length;Ee++){var Pe=de[Ee],Ze=Pe.tileID.canonical.key;ge[Ze]||(ge[Ze]=!0,Pe.querySourceFeatures(Q,X))}return Q}function ue(ve,X){var de=ve.tileID,Q=X.tileID;return de.overscaledZ-Q.overscaledZ||de.canonical.y-Q.canonical.y||de.wrap-Q.wrap||de.canonical.x-Q.canonical.x}function ye(ve){for(var X={},de={},Q=0,ge=ve;Q<ge.length;Q+=1){var Ee=ge[Q],Pe=Ee.queryResults,Ze=Ee.wrappedTileID,ft=de[Ze]=de[Ze]||{};for(var At in Pe)for(var Vt=Pe[At],$t=ft[At]=ft[At]||{},ir=X[At]=X[At]||[],Sr=0,Br=Vt;Sr<Br.length;Sr+=1){var Vr=Br[Sr];$t[Vr.featureIndex]||($t[Vr.featureIndex]=!0,ir.push(Vr))}}return X}var ce=function(X,de){this.max=X,this.onRemove=de,this.reset()};ce.prototype.reset=function(){for(var X in this.data)for(var de=0,Q=this.data[X];de<Q.length;de+=1){var ge=Q[de];ge.timeout&&clearTimeout(ge.timeout),this.onRemove(ge.value)}return this.data={},this.order=[],this},ce.prototype.add=function(X,de,Q){var ge=this,Ee=X.wrapped().key;this.data[Ee]===void 0&&(this.data[Ee]=[]);var Pe={value:de,timeout:void 0};if(Q!==void 0&&(Pe.timeout=setTimeout(function(){ge.remove(X,Pe)},Q)),this.data[Ee].push(Pe),this.order.push(Ee),this.order.length>this.max){var Ze=this._getAndRemoveByKey(this.order[0]);Ze&&this.onRemove(Ze)}return this},ce.prototype.has=function(X){return X.wrapped().key in this.data},ce.prototype.getAndRemove=function(X){return this.has(X)?this._getAndRemoveByKey(X.wrapped().key):null},ce.prototype._getAndRemoveByKey=function(X){var de=this.data[X].shift();return de.timeout&&clearTimeout(de.timeout),this.data[X].length===0&&delete this.data[X],this.order.splice(this.order.indexOf(X),1),de.value},ce.prototype.getByKey=function(X){var de=this.data[X];return de?de[0].value:null},ce.prototype.get=function(X){if(!this.has(X))return null;var de=this.data[X.wrapped().key][0];return de.value},ce.prototype.remove=function(X,de){if(!this.has(X))return this;var Q=X.wrapped().key,ge=de===void 0?0:this.data[Q].indexOf(de),Ee=this.data[Q][ge];return this.data[Q].splice(ge,1),Ee.timeout&&clearTimeout(Ee.timeout),this.data[Q].length===0&&delete this.data[Q],this.onRemove(Ee.value),this.order.splice(this.order.indexOf(Q),1),this},ce.prototype.setMaxSize=function(X){for(this.max=X;this.order.length>this.max;){var de=this._getAndRemoveByKey(this.order[0]);de&&this.onRemove(de)}return this},ce.prototype.filter=function(X){var de=[];for(var Q in this.data)for(var ge=0,Ee=this.data[Q];ge<Ee.length;ge+=1){var Pe=Ee[ge];X(Pe.value)||de.push(Pe)}for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var At=ft[Ze];this.remove(At.value.tileID,At)}};var me=function(X,de,Q){this.context=X;var ge=X.gl;this.buffer=ge.createBuffer(),this.dynamicDraw=Boolean(Q),this.context.unbindVAO(),X.bindElementBuffer.set(this.buffer),ge.bufferData(ge.ELEMENT_ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?ge.DYNAMIC_DRAW:ge.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};me.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},me.prototype.updateData=function(X){var de=this.context.gl;this.context.unbindVAO(),this.bind(),de.bufferSubData(de.ELEMENT_ARRAY_BUFFER,0,X.arrayBuffer)},me.prototype.destroy=function(){var X=this.context.gl;this.buffer&&(X.deleteBuffer(this.buffer),delete this.buffer)};var xe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},ke=function(X,de,Q,ge){this.length=de.length,this.attributes=Q,this.itemSize=de.bytesPerElement,this.dynamicDraw=ge,this.context=X;var Ee=X.gl;this.buffer=Ee.createBuffer(),X.bindVertexBuffer.set(this.buffer),Ee.bufferData(Ee.ARRAY_BUFFER,de.arrayBuffer,this.dynamicDraw?Ee.DYNAMIC_DRAW:Ee.STATIC_DRAW),this.dynamicDraw||delete de.arrayBuffer};ke.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},ke.prototype.updateData=function(X){var de=this.context.gl;this.bind(),de.bufferSubData(de.ARRAY_BUFFER,0,X.arrayBuffer)},ke.prototype.enableAttributes=function(X,de){for(var Q=0;Q<this.attributes.length;Q++){var ge=this.attributes[Q],Ee=de.attributes[ge.name];Ee!==void 0&&X.enableVertexAttribArray(Ee)}},ke.prototype.setVertexAttribPointers=function(X,de,Q){for(var ge=0;ge<this.attributes.length;ge++){var Ee=this.attributes[ge],Pe=de.attributes[Ee.name];Pe!==void 0&&X.vertexAttribPointer(Pe,Ee.components,X[xe[Ee.type]],!1,this.itemSize,Ee.offset+this.itemSize*(Q||0))}},ke.prototype.destroy=function(){var X=this.context.gl;this.buffer&&(X.deleteBuffer(this.buffer),delete this.buffer)};var Ae=function(X){this.gl=X.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Ae.prototype.get=function(){return this.current},Ae.prototype.set=function(X){},Ae.prototype.getDefault=function(){return this.default},Ae.prototype.setDefault=function(){this.set(this.default)};var Oe=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return t.Color.transparent},X.prototype.set=function(Q){var ge=this.current;Q.r===ge.r&&Q.g===ge.g&&Q.b===ge.b&&Q.a===ge.a&&!this.dirty||(this.gl.clearColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},X}(Ae),He=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 1},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearDepth(Q),this.current=Q,this.dirty=!1)},X}(Ae),Ge=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 0},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.clearStencil(Q),this.current=Q,this.dirty=!1)},X}(Ae),_e=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return[!0,!0,!0,!0]},X.prototype.set=function(Q){var ge=this.current;Q[0]===ge[0]&&Q[1]===ge[1]&&Q[2]===ge[2]&&Q[3]===ge[3]&&!this.dirty||(this.gl.colorMask(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},X}(Ae),Re=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!0},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthMask(Q),this.current=Q,this.dirty=!1)},X}(Ae),We=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 255},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.stencilMask(Q),this.current=Q,this.dirty=!1)},X}(Ae),qe=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},X.prototype.set=function(Q){var ge=this.current;Q.func===ge.func&&Q.ref===ge.ref&&Q.mask===ge.mask&&!this.dirty||(this.gl.stencilFunc(Q.func,Q.ref,Q.mask),this.current=Q,this.dirty=!1)},X}(Ae),Ue=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){var Q=this.gl;return[Q.KEEP,Q.KEEP,Q.KEEP]},X.prototype.set=function(Q){var ge=this.current;Q[0]===ge[0]&&Q[1]===ge[1]&&Q[2]===ge[2]&&!this.dirty||(this.gl.stencilOp(Q[0],Q[1],Q[2]),this.current=Q,this.dirty=!1)},X}(Ae),Ie=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;Q?ge.enable(ge.STENCIL_TEST):ge.disable(ge.STENCIL_TEST),this.current=Q,this.dirty=!1}},X}(Ae),Ve=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return[0,1]},X.prototype.set=function(Q){var ge=this.current;Q[0]===ge[0]&&Q[1]===ge[1]&&!this.dirty||(this.gl.depthRange(Q[0],Q[1]),this.current=Q,this.dirty=!1)},X}(Ae),dt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;Q?ge.enable(ge.DEPTH_TEST):ge.disable(ge.DEPTH_TEST),this.current=Q,this.dirty=!1}},X}(Ae),Rt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.LESS},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.depthFunc(Q),this.current=Q,this.dirty=!1)},X}(Ae),Gt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;Q?ge.enable(ge.BLEND):ge.disable(ge.BLEND),this.current=Q,this.dirty=!1}},X}(Ae),kt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){var Q=this.gl;return[Q.ONE,Q.ZERO]},X.prototype.set=function(Q){var ge=this.current;Q[0]===ge[0]&&Q[1]===ge[1]&&!this.dirty||(this.gl.blendFunc(Q[0],Q[1]),this.current=Q,this.dirty=!1)},X}(Ae),zt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return t.Color.transparent},X.prototype.set=function(Q){var ge=this.current;Q.r===ge.r&&Q.g===ge.g&&Q.b===ge.b&&Q.a===ge.a&&!this.dirty||(this.gl.blendColor(Q.r,Q.g,Q.b,Q.a),this.current=Q,this.dirty=!1)},X}(Ae),Bt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.FUNC_ADD},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.blendEquation(Q),this.current=Q,this.dirty=!1)},X}(Ae),Lt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;Q?ge.enable(ge.CULL_FACE):ge.disable(ge.CULL_FACE),this.current=Q,this.dirty=!1}},X}(Ae),Mt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.BACK},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.cullFace(Q),this.current=Q,this.dirty=!1)},X}(Ae),it=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.CCW},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.frontFace(Q),this.current=Q,this.dirty=!1)},X}(Ae),ht=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.useProgram(Q),this.current=Q,this.dirty=!1)},X}(Ae),Qe=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return this.gl.TEXTURE0},X.prototype.set=function(Q){Q===this.current&&!this.dirty||(this.gl.activeTexture(Q),this.current=Q,this.dirty=!1)},X}(Ae),Ce=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){var Q=this.gl;return[0,0,Q.drawingBufferWidth,Q.drawingBufferHeight]},X.prototype.set=function(Q){var ge=this.current;Q[0]===ge[0]&&Q[1]===ge[1]&&Q[2]===ge[2]&&Q[3]===ge[3]&&!this.dirty||(this.gl.viewport(Q[0],Q[1],Q[2],Q[3]),this.current=Q,this.dirty=!1)},X}(Ae),Xe=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;ge.bindFramebuffer(ge.FRAMEBUFFER,Q),this.current=Q,this.dirty=!1}},X}(Ae),rt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;ge.bindRenderbuffer(ge.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},X}(Ae),ut=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;ge.bindTexture(ge.TEXTURE_2D,Q),this.current=Q,this.dirty=!1}},X}(Ae),Pt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;ge.bindBuffer(ge.ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1}},X}(Ae),St=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(Q){var ge=this.gl;ge.bindBuffer(ge.ELEMENT_ARRAY_BUFFER,Q),this.current=Q,this.dirty=!1},X}(Ae),Nt=function(ve){function X(de){ve.call(this,de),this.vao=de.extVertexArrayObject}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X.prototype.set=function(Q){!this.vao||Q===this.current&&!this.dirty||(this.vao.bindVertexArrayOES(Q),this.current=Q,this.dirty=!1)},X}(Ae),jt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return 4},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_ALIGNMENT,Q),this.current=Q,this.dirty=!1}},X}(Ae),Ot=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Q),this.current=Q,this.dirty=!1}},X}(Ae),Kt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return!1},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){var ge=this.gl;ge.pixelStorei(ge.UNPACK_FLIP_Y_WEBGL,Q),this.current=Q,this.dirty=!1}},X}(Ae),Je=function(ve){function X(de,Q){ve.call(this,de),this.context=de,this.parent=Q}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getDefault=function(){return null},X}(Ae),gt=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.setDirty=function(){this.dirty=!0},X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferTexture2D(ge.FRAMEBUFFER,ge.COLOR_ATTACHMENT0,ge.TEXTURE_2D,Q,0),this.current=Q,this.dirty=!1}},X}(Je),Et=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.set=function(Q){if(!(Q===this.current&&!this.dirty)){this.context.bindFramebuffer.set(this.parent);var ge=this.gl;ge.framebufferRenderbuffer(ge.FRAMEBUFFER,ge.DEPTH_ATTACHMENT,ge.RENDERBUFFER,Q),this.current=Q,this.dirty=!1}},X}(Je),rr=function(X,de,Q,ge){this.context=X,this.width=de,this.height=Q;var Ee=X.gl,Pe=this.framebuffer=Ee.createFramebuffer();this.colorAttachment=new gt(X,Pe),ge&&(this.depthAttachment=new Et(X,Pe))};rr.prototype.destroy=function(){var X=this.context.gl,de=this.colorAttachment.get();if(de&&X.deleteTexture(de),this.depthAttachment){var Q=this.depthAttachment.get();Q&&X.deleteRenderbuffer(Q)}X.deleteFramebuffer(this.framebuffer)};var vr=519,or=function(X,de,Q){this.func=X,this.mask=de,this.range=Q};or.ReadOnly=!1,or.ReadWrite=!0,or.disabled=new or(vr,or.ReadOnly,[0,1]);var dr=519,Lr=7680,kr=function(X,de,Q,ge,Ee,Pe){this.test=X,this.ref=de,this.mask=Q,this.fail=ge,this.depthFail=Ee,this.pass=Pe};kr.disabled=new kr({func:dr,mask:0},0,0,Lr,Lr,Lr);var tr=0,Or=1,et=771,we=function(X,de,Q){this.blendFunction=X,this.blendColor=de,this.mask=Q};we.Replace=[Or,tr],we.disabled=new we(we.Replace,t.Color.transparent,[!1,!1,!1,!1]),we.unblended=new we(we.Replace,t.Color.transparent,[!0,!0,!0,!0]),we.alphaBlended=new we([Or,et],t.Color.transparent,[!0,!0,!0,!0]);var Se=1029,De=2305,je=function(X,de,Q){this.enable=X,this.mode=de,this.frontFace=Q};je.disabled=new je(!1,Se,De),je.backCCW=new je(!0,Se,De);var $e=function(X){this.gl=X,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new Oe(this),this.clearDepth=new He(this),this.clearStencil=new Ge(this),this.colorMask=new _e(this),this.depthMask=new Re(this),this.stencilMask=new We(this),this.stencilFunc=new qe(this),this.stencilOp=new Ue(this),this.stencilTest=new Ie(this),this.depthRange=new Ve(this),this.depthTest=new dt(this),this.depthFunc=new Rt(this),this.blend=new Gt(this),this.blendFunc=new kt(this),this.blendColor=new zt(this),this.blendEquation=new Bt(this),this.cullFace=new Lt(this),this.cullFaceSide=new Mt(this),this.frontFace=new it(this),this.program=new ht(this),this.activeTexture=new Qe(this),this.viewport=new Ce(this),this.bindFramebuffer=new Xe(this),this.bindRenderbuffer=new rt(this),this.bindTexture=new ut(this),this.bindVertexBuffer=new Pt(this),this.bindElementBuffer=new St(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Nt(this),this.pixelStoreUnpack=new jt(this),this.pixelStoreUnpackPremultiplyAlpha=new Ot(this),this.pixelStoreUnpackFlipY=new Kt(this),this.extTextureFilterAnisotropic=X.getExtension("EXT_texture_filter_anisotropic")||X.getExtension("MOZ_EXT_texture_filter_anisotropic")||X.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=X.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=X.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(X.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=X.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=X.getExtension("EXT_disjoint_timer_query")};$e.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},$e.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},$e.prototype.createIndexBuffer=function(X,de){return new me(this,X,de)},$e.prototype.createVertexBuffer=function(X,de,Q){return new ke(this,X,de,Q)},$e.prototype.createRenderbuffer=function(X,de,Q){var ge=this.gl,Ee=ge.createRenderbuffer();return this.bindRenderbuffer.set(Ee),ge.renderbufferStorage(ge.RENDERBUFFER,X,de,Q),this.bindRenderbuffer.set(null),Ee},$e.prototype.createFramebuffer=function(X,de,Q){return new rr(this,X,de,Q)},$e.prototype.clear=function(X){var de=X.color,Q=X.depth,ge=this.gl,Ee=0;de&&(Ee|=ge.COLOR_BUFFER_BIT,this.clearColor.set(de),this.colorMask.set([!0,!0,!0,!0])),typeof Q!="undefined"&&(Ee|=ge.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(Q),this.depthMask.set(!0)),ge.clear(Ee)},$e.prototype.setCullFace=function(X){X.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(X.mode),this.frontFace.set(X.frontFace))},$e.prototype.setDepthMode=function(X){X.func===this.gl.ALWAYS&&!X.mask?this.depthTest.set(!1):(this.depthTest.set(!0),this.depthFunc.set(X.func),this.depthMask.set(X.mask),this.depthRange.set(X.range))},$e.prototype.setStencilMode=function(X){X.test.func===this.gl.ALWAYS&&!X.mask?this.stencilTest.set(!1):(this.stencilTest.set(!0),this.stencilMask.set(X.mask),this.stencilOp.set([X.fail,X.depthFail,X.pass]),this.stencilFunc.set({func:X.test.func,ref:X.ref,mask:X.test.mask}))},$e.prototype.setColorMode=function(X){t.deepEqual(X.blendFunction,we.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(X.blendFunction),this.blendColor.set(X.blendColor)),this.colorMask.set(X.mask)},$e.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var ot=function(ve){function X(de,Q,ge){var Ee=this;ve.call(this),this.id=de,this.dispatcher=ge,this.on("data",function(Pe){Pe.dataType==="source"&&Pe.sourceDataType==="metadata"&&(Ee._sourceLoaded=!0),Ee._sourceLoaded&&!Ee._paused&&Pe.dataType==="source"&&Pe.sourceDataType==="content"&&(Ee.reload(),Ee.transform&&Ee.update(Ee.transform))}),this.on("error",function(){Ee._sourceErrored=!0}),this._source=Y(de,Q,ge,this),this._tiles={},this._cache=new ce(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new t.SourceFeatureState}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.onAdd=function(Q){this.map=Q,this._maxTileCacheSize=Q?Q._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(Q)},X.prototype.onRemove=function(Q){this._source&&this._source.onRemove&&this._source.onRemove(Q)},X.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var Q in this._tiles){var ge=this._tiles[Q];if(ge.state!=="loaded"&&ge.state!=="errored")return!1}return!0},X.prototype.getSource=function(){return this._source},X.prototype.pause=function(){this._paused=!0},X.prototype.resume=function(){if(!!this._paused){var Q=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,Q&&this.reload(),this.transform&&this.update(this.transform)}},X.prototype._loadTile=function(Q,ge){return this._source.loadTile(Q,ge)},X.prototype._unloadTile=function(Q){if(this._source.unloadTile)return this._source.unloadTile(Q,function(){})},X.prototype._abortTile=function(Q){if(this._source.abortTile)return this._source.abortTile(Q,function(){})},X.prototype.serialize=function(){return this._source.serialize()},X.prototype.prepare=function(Q){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(var ge in this._tiles){var Ee=this._tiles[ge];Ee.upload(Q),Ee.prepare(this.map.style.imageManager)}},X.prototype.getIds=function(){return t.values(this._tiles).map(function(Q){return Q.tileID}).sort(st).map(function(Q){return Q.key})},X.prototype.getRenderableIds=function(Q){var ge=this,Ee=[];for(var Pe in this._tiles)this._isIdRenderable(Pe,Q)&&Ee.push(this._tiles[Pe]);return Q?Ee.sort(function(Ze,ft){var At=Ze.tileID,Vt=ft.tileID,$t=new t.Point(At.canonical.x,At.canonical.y)._rotate(ge.transform.angle),ir=new t.Point(Vt.canonical.x,Vt.canonical.y)._rotate(ge.transform.angle);return At.overscaledZ-Vt.overscaledZ||ir.y-$t.y||ir.x-$t.x}).map(function(Ze){return Ze.tileID.key}):Ee.map(function(Ze){return Ze.tileID}).sort(st).map(function(Ze){return Ze.key})},X.prototype.hasRenderableParent=function(Q){var ge=this.findLoadedParent(Q,0);return ge?this._isIdRenderable(ge.tileID.key):!1},X.prototype._isIdRenderable=function(Q,ge){return this._tiles[Q]&&this._tiles[Q].hasData()&&!this._coveredTiles[Q]&&(ge||!this._tiles[Q].holdingForFade())},X.prototype.reload=function(){if(this._paused){this._shouldReloadOnResume=!0;return}this._cache.reset();for(var Q in this._tiles)this._tiles[Q].state!=="errored"&&this._reloadTile(Q,"reloading")},X.prototype._reloadTile=function(Q,ge){var Ee=this._tiles[Q];!Ee||(Ee.state!=="loading"&&(Ee.state=ge),this._loadTile(Ee,this._tileLoaded.bind(this,Ee,Q,ge)))},X.prototype._tileLoaded=function(Q,ge,Ee,Pe){if(Pe){Q.state="errored",Pe.status!==404?this._source.fire(new t.ErrorEvent(Pe,{tile:Q})):this.update(this.transform);return}Q.timeAdded=t.browser.now(),Ee==="expired"&&(Q.refreshedUponExpiration=!0),this._setTileReloadTimer(ge,Q),this.getSource().type==="raster-dem"&&Q.dem&&this._backfillDEM(Q),this._state.initializeTileState(Q,this.map?this.map.painter:null),this._source.fire(new t.Event("data",{dataType:"source",tile:Q,coord:Q.tileID}))},X.prototype._backfillDEM=function(Q){for(var ge=this.getRenderableIds(),Ee=0;Ee<ge.length;Ee++){var Pe=ge[Ee];if(Q.neighboringTiles&&Q.neighboringTiles[Pe]){var Ze=this.getTileByID(Pe);ft(Q,Ze),ft(Ze,Q)}}function ft(At,Vt){At.needsHillshadePrepare=!0;var $t=Vt.tileID.canonical.x-At.tileID.canonical.x,ir=Vt.tileID.canonical.y-At.tileID.canonical.y,Sr=Math.pow(2,At.tileID.canonical.z),Br=Vt.tileID.key;$t===0&&ir===0||Math.abs(ir)>1||(Math.abs($t)>1&&(Math.abs($t+Sr)===1?$t+=Sr:Math.abs($t-Sr)===1&&($t-=Sr)),!(!Vt.dem||!At.dem)&&(At.dem.backfillBorder(Vt.dem,$t,ir),At.neighboringTiles&&At.neighboringTiles[Br]&&(At.neighboringTiles[Br].backfilled=!0)))}},X.prototype.getTile=function(Q){return this.getTileByID(Q.key)},X.prototype.getTileByID=function(Q){return this._tiles[Q]},X.prototype._retainLoadedChildren=function(Q,ge,Ee,Pe){for(var Ze in this._tiles){var ft=this._tiles[Ze];if(!(Pe[Ze]||!ft.hasData()||ft.tileID.overscaledZ<=ge||ft.tileID.overscaledZ>Ee)){for(var At=ft.tileID;ft&&ft.tileID.overscaledZ>ge+1;){var Vt=ft.tileID.scaledTo(ft.tileID.overscaledZ-1);ft=this._tiles[Vt.key],ft&&ft.hasData()&&(At=Vt)}for(var $t=At;$t.overscaledZ>ge;)if($t=$t.scaledTo($t.overscaledZ-1),Q[$t.key]){Pe[At.key]=At;break}}}},X.prototype.findLoadedParent=function(Q,ge){if(Q.key in this._loadedParentTiles){var Ee=this._loadedParentTiles[Q.key];return Ee&&Ee.tileID.overscaledZ>=ge?Ee:null}for(var Pe=Q.overscaledZ-1;Pe>=ge;Pe--){var Ze=Q.scaledTo(Pe),ft=this._getLoadedTile(Ze);if(ft)return ft}},X.prototype._getLoadedTile=function(Q){var ge=this._tiles[Q.key];if(ge&&ge.hasData())return ge;var Ee=this._cache.getByKey(Q.wrapped().key);return Ee},X.prototype.updateCacheSize=function(Q){var ge=Math.ceil(Q.width/this._source.tileSize)+1,Ee=Math.ceil(Q.height/this._source.tileSize)+1,Pe=ge*Ee,Ze=5,ft=Math.floor(Pe*Ze),At=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,ft):ft;this._cache.setMaxSize(At)},X.prototype.handleWrapJump=function(Q){var ge=this._prevLng===void 0?Q:this._prevLng,Ee=Q-ge,Pe=Ee/360,Ze=Math.round(Pe);if(this._prevLng=Q,Ze){var ft={};for(var At in this._tiles){var Vt=this._tiles[At];Vt.tileID=Vt.tileID.unwrapTo(Vt.tileID.wrap+Ze),ft[Vt.tileID.key]=Vt}this._tiles=ft;for(var $t in this._timers)clearTimeout(this._timers[$t]),delete this._timers[$t];for(var ir in this._tiles){var Sr=this._tiles[ir];this._setTileReloadTimer(ir,Sr)}}},X.prototype.update=function(Q){var ge=this;if(this.transform=Q,!(!this._sourceLoaded||this._paused)){this.updateCacheSize(Q),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={};var Ee;this.used?this._source.tileID?Ee=Q.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(_a){return new t.OverscaledTileID(_a.canonical.z,_a.wrap,_a.canonical.z,_a.canonical.x,_a.canonical.y)}):(Ee=Q.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(Ee=Ee.filter(function(_a){return ge._source.hasTile(_a)}))):Ee=[];var Pe=Q.coveringZoomLevel(this._source),Ze=Math.max(Pe-X.maxOverzooming,this._source.minzoom),ft=Math.max(Pe+X.maxUnderzooming,this._source.minzoom),At=this._updateRetainedTiles(Ee,Pe);if(pt(this._source.type)){for(var Vt={},$t={},ir=Object.keys(At),Sr=0,Br=ir;Sr<Br.length;Sr+=1){var Vr=Br[Sr],Nr=At[Vr],Kr=this._tiles[Vr];if(!(!Kr||Kr.fadeEndTime&&Kr.fadeEndTime<=t.browser.now())){var hn=this.findLoadedParent(Nr,Ze);hn&&(this._addTile(hn.tileID),Vt[hn.tileID.key]=hn.tileID),$t[Vr]=Nr}}this._retainLoadedChildren($t,Pe,ft,At);for(var Sn in Vt)At[Sn]||(this._coveredTiles[Sn]=!0,At[Sn]=Vt[Sn])}for(var Nn in At)this._tiles[Nn].clearFadeHold();for(var Qn=t.keysDifference(this._tiles,At),ta=0,qn=Qn;ta<qn.length;ta+=1){var pa=qn[ta],Ta=this._tiles[pa];Ta.hasSymbolBuckets&&!Ta.holdingForFade()?Ta.setHoldDuration(this.map._fadeDuration):(!Ta.hasSymbolBuckets||Ta.symbolFadeFinished())&&this._removeTile(pa)}this._updateLoadedParentTileCache()}},X.prototype.releaseSymbolFadeTiles=function(){for(var Q in this._tiles)this._tiles[Q].holdingForFade()&&this._removeTile(Q)},X.prototype._updateRetainedTiles=function(Q,ge){for(var Ee={},Pe={},Ze=Math.max(ge-X.maxOverzooming,this._source.minzoom),ft=Math.max(ge+X.maxUnderzooming,this._source.minzoom),At={},Vt=0,$t=Q;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=this._addTile(ir);Ee[ir.key]=ir,!Sr.hasData()&&ge<this._source.maxzoom&&(At[ir.key]=ir)}this._retainLoadedChildren(At,ge,ft,Ee);for(var Br=0,Vr=Q;Br<Vr.length;Br+=1){var Nr=Vr[Br],Kr=this._tiles[Nr.key];if(!Kr.hasData()){if(ge+1>this._source.maxzoom){var hn=Nr.children(this._source.maxzoom)[0],Sn=this.getTile(hn);if(!!Sn&&Sn.hasData()){Ee[hn.key]=hn;continue}}else{var Nn=Nr.children(this._source.maxzoom);if(Ee[Nn[0].key]&&Ee[Nn[1].key]&&Ee[Nn[2].key]&&Ee[Nn[3].key])continue}for(var Qn=Kr.wasRequested(),ta=Nr.overscaledZ-1;ta>=Ze;--ta){var qn=Nr.scaledTo(ta);if(Pe[qn.key]||(Pe[qn.key]=!0,Kr=this.getTile(qn),!Kr&&Qn&&(Kr=this._addTile(qn)),Kr&&(Ee[qn.key]=qn,Qn=Kr.wasRequested(),Kr.hasData())))break}}}return Ee},X.prototype._updateLoadedParentTileCache=function(){this._loadedParentTiles={};for(var Q in this._tiles){for(var ge=[],Ee=void 0,Pe=this._tiles[Q].tileID;Pe.overscaledZ>0;){if(Pe.key in this._loadedParentTiles){Ee=this._loadedParentTiles[Pe.key];break}ge.push(Pe.key);var Ze=Pe.scaledTo(Pe.overscaledZ-1);if(Ee=this._getLoadedTile(Ze),Ee)break;Pe=Ze}for(var ft=0,At=ge;ft<At.length;ft+=1){var Vt=At[ft];this._loadedParentTiles[Vt]=Ee}}},X.prototype._addTile=function(Q){var ge=this._tiles[Q.key];if(ge)return ge;ge=this._cache.getAndRemove(Q),ge&&(this._setTileReloadTimer(Q.key,ge),ge.tileID=Q,this._state.initializeTileState(ge,this.map?this.map.painter:null),this._cacheTimers[Q.key]&&(clearTimeout(this._cacheTimers[Q.key]),delete this._cacheTimers[Q.key],this._setTileReloadTimer(Q.key,ge)));var Ee=Boolean(ge);return Ee||(ge=new t.Tile(Q,this._source.tileSize*Q.overscaleFactor()),this._loadTile(ge,this._tileLoaded.bind(this,ge,Q.key,ge.state))),ge?(ge.uses++,this._tiles[Q.key]=ge,Ee||this._source.fire(new t.Event("dataloading",{tile:ge,coord:ge.tileID,dataType:"source"})),ge):null},X.prototype._setTileReloadTimer=function(Q,ge){var Ee=this;Q in this._timers&&(clearTimeout(this._timers[Q]),delete this._timers[Q]);var Pe=ge.getExpiryTimeout();Pe&&(this._timers[Q]=setTimeout(function(){Ee._reloadTile(Q,"expired"),delete Ee._timers[Q]},Pe))},X.prototype._removeTile=function(Q){var ge=this._tiles[Q];!ge||(ge.uses--,delete this._tiles[Q],this._timers[Q]&&(clearTimeout(this._timers[Q]),delete this._timers[Q]),!(ge.uses>0)&&(ge.hasData()&&ge.state!=="reloading"?this._cache.add(ge.tileID,ge,ge.getExpiryTimeout()):(ge.aborted=!0,this._abortTile(ge),this._unloadTile(ge))))},X.prototype.clearTiles=function(){this._shouldReloadOnResume=!1,this._paused=!1;for(var Q in this._tiles)this._removeTile(Q);this._cache.reset()},X.prototype.tilesIn=function(Q,ge,Ee){var Pe=this,Ze=[],ft=this.transform;if(!ft)return Ze;for(var At=Ee?ft.getCameraQueryGeometry(Q):Q,Vt=Q.map(function(ta){return ft.pointCoordinate(ta)}),$t=At.map(function(ta){return ft.pointCoordinate(ta)}),ir=this.getIds(),Sr=1/0,Br=1/0,Vr=-1/0,Nr=-1/0,Kr=0,hn=$t;Kr<hn.length;Kr+=1){var Sn=hn[Kr];Sr=Math.min(Sr,Sn.x),Br=Math.min(Br,Sn.y),Vr=Math.max(Vr,Sn.x),Nr=Math.max(Nr,Sn.y)}for(var Nn=function(ta){var qn=Pe._tiles[ir[ta]];if(!qn.holdingForFade()){var pa=qn.tileID,Ta=Math.pow(2,ft.zoom-qn.tileID.overscaledZ),_a=ge*qn.queryPadding*t.EXTENT/qn.tileSize/Ta,ka=[pa.getTilePoint(new t.MercatorCoordinate(Sr,Br)),pa.getTilePoint(new t.MercatorCoordinate(Vr,Nr))];if(ka[0].x-_a<t.EXTENT&&ka[0].y-_a<t.EXTENT&&ka[1].x+_a>=0&&ka[1].y+_a>=0){var Da=Vt.map(function(oi){return pa.getTilePoint(oi)}),Wa=$t.map(function(oi){return pa.getTilePoint(oi)});Ze.push({tile:qn,tileID:pa,queryGeometry:Da,cameraQueryGeometry:Wa,scale:Ta})}}},Qn=0;Qn<ir.length;Qn++)Nn(Qn);return Ze},X.prototype.getVisibleCoordinates=function(Q){for(var ge=this,Ee=this.getRenderableIds(Q).map(function(At){return ge._tiles[At].tileID}),Pe=0,Ze=Ee;Pe<Ze.length;Pe+=1){var ft=Ze[Pe];ft.posMatrix=this.transform.calculatePosMatrix(ft.toUnwrapped())}return Ee},X.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(pt(this._source.type))for(var Q in this._tiles){var ge=this._tiles[Q];if(ge.fadeEndTime!==void 0&&ge.fadeEndTime>=t.browser.now())return!0}return!1},X.prototype.setFeatureState=function(Q,ge,Ee){Q=Q||"_geojsonTileLayer",this._state.updateState(Q,ge,Ee)},X.prototype.removeFeatureState=function(Q,ge,Ee){Q=Q||"_geojsonTileLayer",this._state.removeFeatureState(Q,ge,Ee)},X.prototype.getFeatureState=function(Q,ge){return Q=Q||"_geojsonTileLayer",this._state.getState(Q,ge)},X.prototype.setDependencies=function(Q,ge,Ee){var Pe=this._tiles[Q];Pe&&Pe.setDependencies(ge,Ee)},X.prototype.reloadTilesForDependencies=function(Q,ge){for(var Ee in this._tiles){var Pe=this._tiles[Ee];Pe.hasDependency(Q,ge)&&this._reloadTile(Ee,"reloading")}this._cache.filter(function(Ze){return!Ze.hasDependency(Q,ge)})},X}(t.Evented);ot.maxOverzooming=10,ot.maxUnderzooming=3;function st(ve,X){var de=Math.abs(ve.wrap*2)-+(ve.wrap<0),Q=Math.abs(X.wrap*2)-+(X.wrap<0);return ve.overscaledZ-X.overscaledZ||Q-de||X.canonical.y-ve.canonical.y||X.canonical.x-ve.canonical.x}function pt(ve){return ve==="raster"||ve==="image"||ve==="video"}function wt(){return new t.window.Worker(n0.workerUrl)}var Wt="mapboxgl_preloaded_worker_pool",yr=function(){this.active={}};yr.prototype.acquire=function(X){if(!this.workers)for(this.workers=[];this.workers.length<yr.workerCount;)this.workers.push(new wt);return this.active[X]=!0,this.workers.slice()},yr.prototype.release=function(X){delete this.active[X],this.numActive()===0&&(this.workers.forEach(function(de){de.terminate()}),this.workers=null)},yr.prototype.isPreloaded=function(){return!!this.active[Wt]},yr.prototype.numActive=function(){return Object.keys(this.active).length};var xr=Math.floor(t.browser.hardwareConcurrency/2);yr.workerCount=Math.max(Math.min(xr,6),1);var Tr;function mr(){return Tr||(Tr=new yr),Tr}function Rr(){var ve=mr();ve.acquire(Wt)}function tn(){var ve=Tr;ve&&(ve.isPreloaded()&&ve.numActive()===1?(ve.release(Wt),Tr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))}function wr(ve,X){var de={};for(var Q in ve)Q!=="ref"&&(de[Q]=ve[Q]);return t.refProperties.forEach(function(ge){ge in X&&(de[ge]=X[ge])}),de}function gr(ve){ve=ve.slice();for(var X=Object.create(null),de=0;de<ve.length;de++)X[ve[de].id]=ve[de];for(var Q=0;Q<ve.length;Q++)"ref"in ve[Q]&&(ve[Q]=wr(ve[Q],X[ve[Q].ref]));return ve}function mn(){var ve={},X=t.styleSpec.$version;for(var de in t.styleSpec.$root){var Q=t.styleSpec.$root[de];if(Q.required){var ge=null;de==="version"?ge=X:Q.type==="array"?ge=[]:ge={},ge!=null&&(ve[de]=ge)}}return ve}var Gr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function Ar(ve,X,de){de.push({command:Gr.addSource,args:[ve,X[ve]]})}function nn(ve,X,de){X.push({command:Gr.removeSource,args:[ve]}),de[ve]=!0}function fn(ve,X,de,Q){nn(ve,de,Q),Ar(ve,X,de)}function jr(ve,X,de){var Q;for(Q in ve[de])if(!!ve[de].hasOwnProperty(Q)&&Q!=="data"&&!t.deepEqual(ve[de][Q],X[de][Q]))return!1;for(Q in X[de])if(!!X[de].hasOwnProperty(Q)&&Q!=="data"&&!t.deepEqual(ve[de][Q],X[de][Q]))return!1;return!0}function at(ve,X,de,Q){ve=ve||{},X=X||{};var ge;for(ge in ve)!ve.hasOwnProperty(ge)||X.hasOwnProperty(ge)||nn(ge,de,Q);for(ge in X)!X.hasOwnProperty(ge)||(ve.hasOwnProperty(ge)?t.deepEqual(ve[ge],X[ge])||(ve[ge].type==="geojson"&&X[ge].type==="geojson"&&jr(ve,X,ge)?de.push({command:Gr.setGeoJSONSourceData,args:[ge,X[ge].data]}):fn(ge,X,de,Q)):Ar(ge,X,de))}function Ft(ve,X,de,Q,ge,Ee){ve=ve||{},X=X||{};var Pe;for(Pe in ve)!ve.hasOwnProperty(Pe)||t.deepEqual(ve[Pe],X[Pe])||de.push({command:Ee,args:[Q,Pe,X[Pe],ge]});for(Pe in X)!X.hasOwnProperty(Pe)||ve.hasOwnProperty(Pe)||t.deepEqual(ve[Pe],X[Pe])||de.push({command:Ee,args:[Q,Pe,X[Pe],ge]})}function er(ve){return ve.id}function hr(ve,X){return ve[X.id]=X,ve}function Wr(ve,X,de){ve=ve||[],X=X||[];var Q=ve.map(er),ge=X.map(er),Ee=ve.reduce(hr,{}),Pe=X.reduce(hr,{}),Ze=Q.slice(),ft=Object.create(null),At,Vt,$t,ir,Sr,Br,Vr;for(At=0,Vt=0;At<Q.length;At++)$t=Q[At],Pe.hasOwnProperty($t)?Vt++:(de.push({command:Gr.removeLayer,args:[$t]}),Ze.splice(Ze.indexOf($t,Vt),1));for(At=0,Vt=0;At<ge.length;At++)$t=ge[ge.length-1-At],Ze[Ze.length-1-At]!==$t&&(Ee.hasOwnProperty($t)?(de.push({command:Gr.removeLayer,args:[$t]}),Ze.splice(Ze.lastIndexOf($t,Ze.length-Vt),1)):Vt++,Br=Ze[Ze.length-At],de.push({command:Gr.addLayer,args:[Pe[$t],Br]}),Ze.splice(Ze.length-At,0,$t),ft[$t]=!0);for(At=0;At<ge.length;At++)if($t=ge[At],ir=Ee[$t],Sr=Pe[$t],!(ft[$t]||t.deepEqual(ir,Sr))){if(!t.deepEqual(ir.source,Sr.source)||!t.deepEqual(ir["source-layer"],Sr["source-layer"])||!t.deepEqual(ir.type,Sr.type)){de.push({command:Gr.removeLayer,args:[$t]}),Br=Ze[Ze.lastIndexOf($t)+1],de.push({command:Gr.addLayer,args:[Sr,Br]});continue}Ft(ir.layout,Sr.layout,de,$t,null,Gr.setLayoutProperty),Ft(ir.paint,Sr.paint,de,$t,null,Gr.setPaintProperty),t.deepEqual(ir.filter,Sr.filter)||de.push({command:Gr.setFilter,args:[$t,Sr.filter]}),(!t.deepEqual(ir.minzoom,Sr.minzoom)||!t.deepEqual(ir.maxzoom,Sr.maxzoom))&&de.push({command:Gr.setLayerZoomRange,args:[$t,Sr.minzoom,Sr.maxzoom]});for(Vr in ir)!ir.hasOwnProperty(Vr)||Vr==="layout"||Vr==="paint"||Vr==="filter"||Vr==="metadata"||Vr==="minzoom"||Vr==="maxzoom"||(Vr.indexOf("paint.")===0?Ft(ir[Vr],Sr[Vr],de,$t,Vr.slice(6),Gr.setPaintProperty):t.deepEqual(ir[Vr],Sr[Vr])||de.push({command:Gr.setLayerProperty,args:[$t,Vr,Sr[Vr]]}));for(Vr in Sr)!Sr.hasOwnProperty(Vr)||ir.hasOwnProperty(Vr)||Vr==="layout"||Vr==="paint"||Vr==="filter"||Vr==="metadata"||Vr==="minzoom"||Vr==="maxzoom"||(Vr.indexOf("paint.")===0?Ft(ir[Vr],Sr[Vr],de,$t,Vr.slice(6),Gr.setPaintProperty):t.deepEqual(ir[Vr],Sr[Vr])||de.push({command:Gr.setLayerProperty,args:[$t,Vr,Sr[Vr]]}))}}function zr(ve,X){if(!ve)return[{command:Gr.setStyle,args:[X]}];var de=[];try{if(!t.deepEqual(ve.version,X.version))return[{command:Gr.setStyle,args:[X]}];t.deepEqual(ve.center,X.center)||de.push({command:Gr.setCenter,args:[X.center]}),t.deepEqual(ve.zoom,X.zoom)||de.push({command:Gr.setZoom,args:[X.zoom]}),t.deepEqual(ve.bearing,X.bearing)||de.push({command:Gr.setBearing,args:[X.bearing]}),t.deepEqual(ve.pitch,X.pitch)||de.push({command:Gr.setPitch,args:[X.pitch]}),t.deepEqual(ve.sprite,X.sprite)||de.push({command:Gr.setSprite,args:[X.sprite]}),t.deepEqual(ve.glyphs,X.glyphs)||de.push({command:Gr.setGlyphs,args:[X.glyphs]}),t.deepEqual(ve.transition,X.transition)||de.push({command:Gr.setTransition,args:[X.transition]}),t.deepEqual(ve.light,X.light)||de.push({command:Gr.setLight,args:[X.light]});var Q={},ge=[];at(ve.sources,X.sources,ge,Q);var Ee=[];ve.layers&&ve.layers.forEach(function(Pe){Q[Pe.source]?de.push({command:Gr.removeLayer,args:[Pe.id]}):Ee.push(Pe)}),de=de.concat(ge),Wr(Ee,X.layers,de)}catch(Pe){console.warn("Unable to compute style diff:",Pe),de=[{command:Gr.setStyle,args:[X]}]}return de}var Pr=function(X,de){this.reset(X,de)};Pr.prototype.reset=function(X,de){this.points=X||[],this._distances=[0];for(var Q=1;Q<this.points.length;Q++)this._distances[Q]=this._distances[Q-1]+this.points[Q].dist(this.points[Q-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(de||0,this.length*.5),this.paddedLength=this.length-this.padding*2},Pr.prototype.lerp=function(X){if(this.points.length===1)return this.points[0];X=t.clamp(X,0,1);for(var de=1,Q=this._distances[de],ge=X*this.paddedLength+this.padding;Q<ge&&de<this._distances.length;)Q=this._distances[++de];var Ee=de-1,Pe=this._distances[Ee],Ze=Q-Pe,ft=Ze>0?(ge-Pe)/Ze:0;return this.points[Ee].mult(1-ft).add(this.points[de].mult(ft))};var br=function(X,de,Q){var ge=this.boxCells=[],Ee=this.circleCells=[];this.xCellCount=Math.ceil(X/Q),this.yCellCount=Math.ceil(de/Q);for(var Pe=0;Pe<this.xCellCount*this.yCellCount;Pe++)ge.push([]),Ee.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=X,this.height=de,this.xScale=this.xCellCount/X,this.yScale=this.yCellCount/de,this.boxUid=0,this.circleUid=0};br.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},br.prototype.insert=function(X,de,Q,ge,Ee){this._forEachCell(de,Q,ge,Ee,this._insertBoxCell,this.boxUid++),this.boxKeys.push(X),this.bboxes.push(de),this.bboxes.push(Q),this.bboxes.push(ge),this.bboxes.push(Ee)},br.prototype.insertCircle=function(X,de,Q,ge){this._forEachCell(de-ge,Q-ge,de+ge,Q+ge,this._insertCircleCell,this.circleUid++),this.circleKeys.push(X),this.circles.push(de),this.circles.push(Q),this.circles.push(ge)},br.prototype._insertBoxCell=function(X,de,Q,ge,Ee,Pe){this.boxCells[Ee].push(Pe)},br.prototype._insertCircleCell=function(X,de,Q,ge,Ee,Pe){this.circleCells[Ee].push(Pe)},br.prototype._query=function(X,de,Q,ge,Ee,Pe){if(Q<0||X>this.width||ge<0||de>this.height)return Ee?!1:[];var Ze=[];if(X<=0&&de<=0&&this.width<=Q&&this.height<=ge){if(Ee)return!0;for(var ft=0;ft<this.boxKeys.length;ft++)Ze.push({key:this.boxKeys[ft],x1:this.bboxes[ft*4],y1:this.bboxes[ft*4+1],x2:this.bboxes[ft*4+2],y2:this.bboxes[ft*4+3]});for(var At=0;At<this.circleKeys.length;At++){var Vt=this.circles[At*3],$t=this.circles[At*3+1],ir=this.circles[At*3+2];Ze.push({key:this.circleKeys[At],x1:Vt-ir,y1:$t-ir,x2:Vt+ir,y2:$t+ir})}return Pe?Ze.filter(Pe):Ze}else{var Sr={hitTest:Ee,seenUids:{box:{},circle:{}}};return this._forEachCell(X,de,Q,ge,this._queryCell,Ze,Sr,Pe),Ee?Ze.length>0:Ze}},br.prototype._queryCircle=function(X,de,Q,ge,Ee){var Pe=X-Q,Ze=X+Q,ft=de-Q,At=de+Q;if(Ze<0||Pe>this.width||At<0||ft>this.height)return ge?!1:[];var Vt=[],$t={hitTest:ge,circle:{x:X,y:de,radius:Q},seenUids:{box:{},circle:{}}};return this._forEachCell(Pe,ft,Ze,At,this._queryCellCircle,Vt,$t,Ee),ge?Vt.length>0:Vt},br.prototype.query=function(X,de,Q,ge,Ee){return this._query(X,de,Q,ge,!1,Ee)},br.prototype.hitTest=function(X,de,Q,ge,Ee){return this._query(X,de,Q,ge,!0,Ee)},br.prototype.hitTestCircle=function(X,de,Q,ge){return this._queryCircle(X,de,Q,!0,ge)},br.prototype._queryCell=function(X,de,Q,ge,Ee,Pe,Ze,ft){var At=Ze.seenUids,Vt=this.boxCells[Ee];if(Vt!==null)for(var $t=this.bboxes,ir=0,Sr=Vt;ir<Sr.length;ir+=1){var Br=Sr[ir];if(!At.box[Br]){At.box[Br]=!0;var Vr=Br*4;if(X<=$t[Vr+2]&&de<=$t[Vr+3]&&Q>=$t[Vr+0]&&ge>=$t[Vr+1]&&(!ft||ft(this.boxKeys[Br]))){if(Ze.hitTest)return Pe.push(!0),!0;Pe.push({key:this.boxKeys[Br],x1:$t[Vr],y1:$t[Vr+1],x2:$t[Vr+2],y2:$t[Vr+3]})}}}var Nr=this.circleCells[Ee];if(Nr!==null)for(var Kr=this.circles,hn=0,Sn=Nr;hn<Sn.length;hn+=1){var Nn=Sn[hn];if(!At.circle[Nn]){At.circle[Nn]=!0;var Qn=Nn*3;if(this._circleAndRectCollide(Kr[Qn],Kr[Qn+1],Kr[Qn+2],X,de,Q,ge)&&(!ft||ft(this.circleKeys[Nn]))){if(Ze.hitTest)return Pe.push(!0),!0;var ta=Kr[Qn],qn=Kr[Qn+1],pa=Kr[Qn+2];Pe.push({key:this.circleKeys[Nn],x1:ta-pa,y1:qn-pa,x2:ta+pa,y2:qn+pa})}}}},br.prototype._queryCellCircle=function(X,de,Q,ge,Ee,Pe,Ze,ft){var At=Ze.circle,Vt=Ze.seenUids,$t=this.boxCells[Ee];if($t!==null)for(var ir=this.bboxes,Sr=0,Br=$t;Sr<Br.length;Sr+=1){var Vr=Br[Sr];if(!Vt.box[Vr]){Vt.box[Vr]=!0;var Nr=Vr*4;if(this._circleAndRectCollide(At.x,At.y,At.radius,ir[Nr+0],ir[Nr+1],ir[Nr+2],ir[Nr+3])&&(!ft||ft(this.boxKeys[Vr])))return Pe.push(!0),!0}}var Kr=this.circleCells[Ee];if(Kr!==null)for(var hn=this.circles,Sn=0,Nn=Kr;Sn<Nn.length;Sn+=1){var Qn=Nn[Sn];if(!Vt.circle[Qn]){Vt.circle[Qn]=!0;var ta=Qn*3;if(this._circlesCollide(hn[ta],hn[ta+1],hn[ta+2],At.x,At.y,At.radius)&&(!ft||ft(this.circleKeys[Qn])))return Pe.push(!0),!0}}},br.prototype._forEachCell=function(X,de,Q,ge,Ee,Pe,Ze,ft){for(var At=this._convertToXCellCoord(X),Vt=this._convertToYCellCoord(de),$t=this._convertToXCellCoord(Q),ir=this._convertToYCellCoord(ge),Sr=At;Sr<=$t;Sr++)for(var Br=Vt;Br<=ir;Br++){var Vr=this.xCellCount*Br+Sr;if(Ee.call(this,X,de,Q,ge,Vr,Pe,Ze,ft))return}},br.prototype._convertToXCellCoord=function(X){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(X*this.xScale)))},br.prototype._convertToYCellCoord=function(X){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(X*this.yScale)))},br.prototype._circlesCollide=function(X,de,Q,ge,Ee,Pe){var Ze=ge-X,ft=Ee-de,At=Q+Pe;return At*At>Ze*Ze+ft*ft},br.prototype._circleAndRectCollide=function(X,de,Q,ge,Ee,Pe,Ze){var ft=(Pe-ge)/2,At=Math.abs(X-(ge+ft));if(At>ft+Q)return!1;var Vt=(Ze-Ee)/2,$t=Math.abs(de-(Ee+Vt));if($t>Vt+Q)return!1;if(At<=ft||$t<=Vt)return!0;var ir=At-ft,Sr=$t-Vt;return ir*ir+Sr*Sr<=Q*Q};function Xr(ve,X,de,Q,ge){var Ee=t.create();return X?(t.scale(Ee,Ee,[1/ge,1/ge,1]),de||t.rotateZ(Ee,Ee,Q.angle)):t.multiply(Ee,Q.labelPlaneMatrix,ve),Ee}function Fn(ve,X,de,Q,ge){if(X){var Ee=t.clone(ve);return t.scale(Ee,Ee,[ge,ge,1]),de||t.rotateZ(Ee,Ee,-Q.angle),Ee}else return Q.glCoordMatrix}function kn(ve,X){var de=[ve.x,ve.y,0,1];na(de,de,X);var Q=de[3];return{point:new t.Point(de[0]/Q,de[1]/Q),signedDistanceFromCamera:Q}}function ra(ve,X){return .5+.5*(ve/X)}function oa(ve,X){var de=ve[0]/ve[3],Q=ve[1]/ve[3],ge=de>=-X[0]&&de<=X[0]&&Q>=-X[1]&&Q<=X[1];return ge}function Sa(ve,X,de,Q,ge,Ee,Pe,Ze){var ft=Q?ve.textSizeData:ve.iconSizeData,At=t.evaluateSizeForZoom(ft,de.transform.zoom),Vt=[256/de.width*2+1,256/de.height*2+1],$t=Q?ve.text.dynamicLayoutVertexArray:ve.icon.dynamicLayoutVertexArray;$t.clear();for(var ir=ve.lineVertexArray,Sr=Q?ve.text.placedSymbolArray:ve.icon.placedSymbolArray,Br=de.transform.width/de.transform.height,Vr=!1,Nr=0;Nr<Sr.length;Nr++){var Kr=Sr.get(Nr);if(Kr.hidden||Kr.writingMode===t.WritingMode.vertical&&!Vr){ha(Kr.numGlyphs,$t);continue}Vr=!1;var hn=[Kr.anchorX,Kr.anchorY,0,1];if(t.transformMat4(hn,hn,X),!oa(hn,Vt)){ha(Kr.numGlyphs,$t);continue}var Sn=hn[3],Nn=ra(de.transform.cameraToCenterDistance,Sn),Qn=t.evaluateSizeForFeature(ft,At,Kr),ta=Pe?Qn/Nn:Qn*Nn,qn=new t.Point(Kr.anchorX,Kr.anchorY),pa=kn(qn,ge).point,Ta={},_a=vn(Kr,ta,!1,Ze,X,ge,Ee,ve.glyphOffsetArray,ir,$t,pa,qn,Ta,Br);Vr=_a.useVertical,(_a.notEnoughRoom||Vr||_a.needsFlipping&&vn(Kr,ta,!0,Ze,X,ge,Ee,ve.glyphOffsetArray,ir,$t,pa,qn,Ta,Br).notEnoughRoom)&&ha(Kr.numGlyphs,$t)}Q?ve.text.dynamicLayoutVertexBuffer.updateData($t):ve.icon.dynamicLayoutVertexBuffer.updateData($t)}function ya(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt){var $t=Ze.glyphStartIndex+Ze.numGlyphs,ir=Ze.lineStartIndex,Sr=Ze.lineStartIndex+Ze.lineLength,Br=X.getoffsetX(Ze.glyphStartIndex),Vr=X.getoffsetX($t-1),Nr=On(ve*Br,de,Q,ge,Ee,Pe,Ze.segment,ir,Sr,ft,At,Vt);if(!Nr)return null;var Kr=On(ve*Vr,de,Q,ge,Ee,Pe,Ze.segment,ir,Sr,ft,At,Vt);return Kr?{first:Nr,last:Kr}:null}function pr(ve,X,de,Q){if(ve===t.WritingMode.horizontal){var ge=Math.abs(de.y-X.y),Ee=Math.abs(de.x-X.x)*Q;if(ge>Ee)return{useVertical:!0}}return(ve===t.WritingMode.vertical?X.y<de.y:X.x>de.x)?{needsFlipping:!0}:null}function vn(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr){var Br=X/24,Vr=ve.lineOffsetX*Br,Nr=ve.lineOffsetY*Br,Kr;if(ve.numGlyphs>1){var hn=ve.glyphStartIndex+ve.numGlyphs,Sn=ve.lineStartIndex,Nn=ve.lineStartIndex+ve.lineLength,Qn=ya(Br,Ze,Vr,Nr,de,Vt,$t,ve,ft,Ee,ir);if(!Qn)return{notEnoughRoom:!0};var ta=kn(Qn.first.point,Pe).point,qn=kn(Qn.last.point,Pe).point;if(Q&&!de){var pa=pr(ve.writingMode,ta,qn,Sr);if(pa)return pa}Kr=[Qn.first];for(var Ta=ve.glyphStartIndex+1;Ta<hn-1;Ta++)Kr.push(On(Br*Ze.getoffsetX(Ta),Vr,Nr,de,Vt,$t,ve.segment,Sn,Nn,ft,Ee,ir));Kr.push(Qn.last)}else{if(Q&&!de){var _a=kn($t,ge).point,ka=ve.lineStartIndex+ve.segment+1,Da=new t.Point(ft.getx(ka),ft.gety(ka)),Wa=kn(Da,ge),oi=Wa.signedDistanceFromCamera>0?Wa.point:$r($t,Da,_a,1,ge),Di=pr(ve.writingMode,_a,oi,Sr);if(Di)return Di}var ci=On(Br*Ze.getoffsetX(ve.glyphStartIndex),Vr,Nr,de,Vt,$t,ve.segment,ve.lineStartIndex,ve.lineStartIndex+ve.lineLength,ft,Ee,ir);if(!ci)return{notEnoughRoom:!0};Kr=[ci]}for(var gi=0,Ha=Kr;gi<Ha.length;gi+=1){var Ii=Ha[gi];t.addDynamicAttributes(At,Ii.point,Ii.angle)}return{}}function $r(ve,X,de,Q,ge){var Ee=kn(ve.add(ve.sub(X)._unit()),ge).point,Pe=de.sub(Ee);return de.add(Pe._mult(Q/Pe.mag()))}function On(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt,$t){var ir=Q?ve-X:ve+X,Sr=ir>0?1:-1,Br=0;Q&&(Sr*=-1,Br=Math.PI),Sr<0&&(Br+=Math.PI);for(var Vr=Sr>0?Ze+Pe:Ze+Pe+1,Nr=ge,Kr=ge,hn=0,Sn=0,Nn=Math.abs(ir),Qn=[];hn+Sn<=Nn;){if(Vr+=Sr,Vr<Ze||Vr>=ft)return null;if(Kr=Nr,Qn.push(Nr),Nr=$t[Vr],Nr===void 0){var ta=new t.Point(At.getx(Vr),At.gety(Vr)),qn=kn(ta,Vt);if(qn.signedDistanceFromCamera>0)Nr=$t[Vr]=qn.point;else{var pa=Vr-Sr,Ta=hn===0?Ee:new t.Point(At.getx(pa),At.gety(pa));Nr=$r(Ta,ta,Kr,Nn-hn+1,Vt)}}hn+=Sn,Sn=Kr.dist(Nr)}var _a=(Nn-hn)/Sn,ka=Nr.sub(Kr),Da=ka.mult(_a)._add(Kr);Da._add(ka._unit()._perp()._mult(de*Sr));var Wa=Br+Math.atan2(Nr.y-Kr.y,Nr.x-Kr.x);return Qn.push(Da),{point:Da,angle:Wa,path:Qn}}var Bn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ha(ve,X){for(var de=0;de<ve;de++){var Q=X.length;X.resize(Q+4),X.float32.set(Bn,Q*3)}}function na(ve,X,de){var Q=X[0],ge=X[1];return ve[0]=de[0]*Q+de[4]*ge+de[12],ve[1]=de[1]*Q+de[5]*ge+de[13],ve[3]=de[3]*Q+de[7]*ge+de[15],ve}var Vn=100,fa=function(X,de,Q){de===void 0&&(de=new br(X.width+2*Vn,X.height+2*Vn,25)),Q===void 0&&(Q=new br(X.width+2*Vn,X.height+2*Vn,25)),this.transform=X,this.grid=de,this.ignoredGrid=Q,this.pitchfactor=Math.cos(X._pitch)*X.cameraToCenterDistance,this.screenRightBoundary=X.width+Vn,this.screenBottomBoundary=X.height+Vn,this.gridRightBoundary=X.width+2*Vn,this.gridBottomBoundary=X.height+2*Vn};fa.prototype.placeCollisionBox=function(X,de,Q,ge,Ee){var Pe=this.projectAndGetPerspectiveRatio(ge,X.anchorPointX,X.anchorPointY),Ze=Q*Pe.perspectiveRatio,ft=X.x1*Ze+Pe.point.x,At=X.y1*Ze+Pe.point.y,Vt=X.x2*Ze+Pe.point.x,$t=X.y2*Ze+Pe.point.y;return!this.isInsideGrid(ft,At,Vt,$t)||!de&&this.grid.hitTest(ft,At,Vt,$t,Ee)?{box:[],offscreen:!1}:{box:[ft,At,Vt,$t],offscreen:this.isOffscreen(ft,At,Vt,$t)}},fa.prototype.placeCollisionCircles=function(X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr){var Br=[],Vr=new t.Point(de.anchorX,de.anchorY),Nr=kn(Vr,Pe),Kr=ra(this.transform.cameraToCenterDistance,Nr.signedDistanceFromCamera),hn=Vt?Ee/Kr:Ee*Kr,Sn=hn/t.ONE_EM,Nn=kn(Vr,Ze).point,Qn={},ta=de.lineOffsetX*Sn,qn=de.lineOffsetY*Sn,pa=ya(Sn,ge,ta,qn,!1,Nn,Vr,de,Q,Ze,Qn),Ta=!1,_a=!1,ka=!0;if(pa){for(var Da=ir*.5*Kr+Sr,Wa=new t.Point(-Vn,-Vn),oi=new t.Point(this.screenRightBoundary,this.screenBottomBoundary),Di=new Pr,ci=pa.first,gi=pa.last,Ha=[],Ii=ci.path.length-1;Ii>=1;Ii--)Ha.push(ci.path[Ii]);for(var Bi=1;Bi<gi.path.length;Bi++)Ha.push(gi.path[Bi]);var Gi=Da*2.5;if(ft){var Ai=Ha.map(function(of){return kn(of,ft)});Ai.some(function(of){return of.signedDistanceFromCamera<=0})?Ha=[]:Ha=Ai.map(function(of){return of.point})}var qi=[];if(Ha.length>0){for(var li=Ha[0].clone(),Mi=Ha[0].clone(),Ro=1;Ro<Ha.length;Ro++)li.x=Math.min(li.x,Ha[Ro].x),li.y=Math.min(li.y,Ha[Ro].y),Mi.x=Math.max(Mi.x,Ha[Ro].x),Mi.y=Math.max(Mi.y,Ha[Ro].y);li.x>=Wa.x&&Mi.x<=oi.x&&li.y>=Wa.y&&Mi.y<=oi.y?qi=[Ha]:Mi.x<Wa.x||li.x>oi.x||Mi.y<Wa.y||li.y>oi.y?qi=[]:qi=t.clipLine([Ha],Wa.x,Wa.y,oi.x,oi.y)}for(var ts=0,mu=qi;ts<mu.length;ts+=1){var yu=mu[ts];Di.reset(yu,Da*.25);var tf=0;Di.length<=.5*Da?tf=1:tf=Math.ceil(Di.paddedLength/Gi)+1;for(var rf=0;rf<tf;rf++){var Rf=rf/Math.max(tf-1,1),nf=Di.lerp(Rf),vl=nf.x+Vn,nc=nf.y+Vn;Br.push(vl,nc,Da,0);var Hs=vl-Da,Ql=nc-Da,af=vl+Da,Uu=nc+Da;if(ka=ka&&this.isOffscreen(Hs,Ql,af,Uu),_a=_a||this.isInsideGrid(Hs,Ql,af,Uu),!X&&this.grid.hitTestCircle(vl,nc,Da,$t)&&(Ta=!0,!At))return{circles:[],offscreen:!1,collisionDetected:Ta}}}}return{circles:!At&&Ta||!_a?[]:Br,offscreen:ka,collisionDetected:Ta}},fa.prototype.queryRenderedSymbols=function(X){if(X.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var de=[],Q=1/0,ge=1/0,Ee=-1/0,Pe=-1/0,Ze=0,ft=X;Ze<ft.length;Ze+=1){var At=ft[Ze],Vt=new t.Point(At.x+Vn,At.y+Vn);Q=Math.min(Q,Vt.x),ge=Math.min(ge,Vt.y),Ee=Math.max(Ee,Vt.x),Pe=Math.max(Pe,Vt.y),de.push(Vt)}for(var $t=this.grid.query(Q,ge,Ee,Pe).concat(this.ignoredGrid.query(Q,ge,Ee,Pe)),ir={},Sr={},Br=0,Vr=$t;Br<Vr.length;Br+=1){var Nr=Vr[Br],Kr=Nr.key;if(ir[Kr.bucketInstanceId]===void 0&&(ir[Kr.bucketInstanceId]={}),!ir[Kr.bucketInstanceId][Kr.featureIndex]){var hn=[new t.Point(Nr.x1,Nr.y1),new t.Point(Nr.x2,Nr.y1),new t.Point(Nr.x2,Nr.y2),new t.Point(Nr.x1,Nr.y2)];!t.polygonIntersectsPolygon(de,hn)||(ir[Kr.bucketInstanceId][Kr.featureIndex]=!0,Sr[Kr.bucketInstanceId]===void 0&&(Sr[Kr.bucketInstanceId]=[]),Sr[Kr.bucketInstanceId].push(Kr.featureIndex))}}return Sr},fa.prototype.insertCollisionBox=function(X,de,Q,ge,Ee){var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:Q,featureIndex:ge,collisionGroupID:Ee};Pe.insert(Ze,X[0],X[1],X[2],X[3])},fa.prototype.insertCollisionCircles=function(X,de,Q,ge,Ee){for(var Pe=de?this.ignoredGrid:this.grid,Ze={bucketInstanceId:Q,featureIndex:ge,collisionGroupID:Ee},ft=0;ft<X.length;ft+=4)Pe.insertCircle(Ze,X[ft],X[ft+1],X[ft+2])},fa.prototype.projectAndGetPerspectiveRatio=function(X,de,Q){var ge=[de,Q,0,1];na(ge,ge,X);var Ee=new t.Point((ge[0]/ge[3]+1)/2*this.transform.width+Vn,(-ge[1]/ge[3]+1)/2*this.transform.height+Vn);return{point:Ee,perspectiveRatio:.5+.5*(this.transform.cameraToCenterDistance/ge[3])}},fa.prototype.isOffscreen=function(X,de,Q,ge){return Q<Vn||X>=this.screenRightBoundary||ge<Vn||de>this.screenBottomBoundary},fa.prototype.isInsideGrid=function(X,de,Q,ge){return Q>=0&&X<this.gridRightBoundary&&ge>=0&&de<this.gridBottomBoundary},fa.prototype.getViewportMatrix=function(){var X=t.identity([]);return t.translate(X,X,[-Vn,-Vn,0]),X};function ga(ve,X,de){return X*(t.EXTENT/(ve.tileSize*Math.pow(2,de-ve.tileID.overscaledZ)))}var ur=function(X,de,Q,ge){X?this.opacity=Math.max(0,Math.min(1,X.opacity+(X.placed?de:-de))):this.opacity=ge&&Q?1:0,this.placed=Q};ur.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Dr=function(X,de,Q,ge,Ee){this.text=new ur(X?X.text:null,de,Q,Ee),this.icon=new ur(X?X.icon:null,de,ge,Ee)};Dr.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var on=function(X,de,Q){this.text=X,this.icon=de,this.skipFade=Q},rn=function(){this.invProjMatrix=t.create(),this.viewportMatrix=t.create(),this.circles=[]},gn=function(X,de,Q,ge,Ee){this.bucketInstanceId=X,this.featureIndex=de,this.sourceLayerIndex=Q,this.bucketIndex=ge,this.tileID=Ee},wn=function(X){this.crossSourceCollisions=X,this.maxGroupID=0,this.collisionGroups={}};wn.prototype.get=function(X){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[X]){var de=++this.maxGroupID;this.collisionGroups[X]={ID:de,predicate:function(Q){return Q.collisionGroupID===de}}}return this.collisionGroups[X]};function pn(ve,X,de,Q,ge){var Ee=t.getAnchorAlignment(ve),Pe=Ee.horizontalAlign,Ze=Ee.verticalAlign,ft=-(Pe-.5)*X,At=-(Ze-.5)*de,Vt=t.evaluateVariableOffset(ve,Q);return new t.Point(ft+Vt[0]*ge,At+Vt[1]*ge)}function cr(ve,X,de,Q,ge,Ee){var Pe=ve.x1,Ze=ve.x2,ft=ve.y1,At=ve.y2,Vt=ve.anchorPointX,$t=ve.anchorPointY,ir=new t.Point(X,de);return Q&&ir._rotate(ge?Ee:-Ee),{x1:Pe+ir.x,y1:ft+ir.y,x2:Ze+ir.x,y2:At+ir.y,anchorPointX:Vt,anchorPointY:$t}}var ar=function(X,de,Q,ge){this.transform=X.clone(),this.collisionIndex=new fa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=de,this.retainedQueryData={},this.collisionGroups=new wn(Q),this.collisionCircleArrays={},this.prevPlacement=ge,ge&&(ge.prevPlacement=void 0),this.placedOrientations={}};ar.prototype.getBucketParts=function(X,de,Q,ge){var Ee=Q.getBucket(de),Pe=Q.latestFeatureIndex;if(!(!Ee||!Pe||de.id!==Ee.layerIds[0])){var Ze=Q.collisionBoxArray,ft=Ee.layers[0].layout,At=Math.pow(2,this.transform.zoom-Q.tileID.overscaledZ),Vt=Q.tileSize/t.EXTENT,$t=this.transform.calculatePosMatrix(Q.tileID.toUnwrapped()),ir=ft.get("text-pitch-alignment")==="map",Sr=ft.get("text-rotation-alignment")==="map",Br=ga(Q,1,this.transform.zoom),Vr=Xr($t,ir,Sr,this.transform,Br),Nr=null;if(ir){var Kr=Fn($t,ir,Sr,this.transform,Br);Nr=t.multiply([],this.transform.labelPlaneMatrix,Kr)}this.retainedQueryData[Ee.bucketInstanceId]=new gn(Ee.bucketInstanceId,Pe,Ee.sourceLayerIndex,Ee.index,Q.tileID);var hn={bucket:Ee,layout:ft,posMatrix:$t,textLabelPlaneMatrix:Vr,labelToScreenMatrix:Nr,scale:At,textPixelRatio:Vt,holdingForFade:Q.holdingForFade(),collisionBoxArray:Ze,partiallyEvaluatedTextSize:t.evaluateSizeForZoom(Ee.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(Ee.sourceID)};if(ge)for(var Sn=0,Nn=Ee.sortKeyRanges;Sn<Nn.length;Sn+=1){var Qn=Nn[Sn],ta=Qn.sortKey,qn=Qn.symbolInstanceStart,pa=Qn.symbolInstanceEnd;X.push({sortKey:ta,symbolInstanceStart:qn,symbolInstanceEnd:pa,parameters:hn})}else X.push({symbolInstanceStart:0,symbolInstanceEnd:Ee.symbolInstances.length,parameters:hn})}},ar.prototype.attemptAnchorPlacement=function(X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr,Br,Vr){var Nr=[ir.textOffset0,ir.textOffset1],Kr=pn(X,Q,ge,Nr,Ee),hn=this.collisionIndex.placeCollisionBox(cr(de,Kr.x,Kr.y,Pe,Ze,this.transform.angle),$t,ft,At,Vt.predicate);if(Vr){var Sn=this.collisionIndex.placeCollisionBox(cr(Vr,Kr.x,Kr.y,Pe,Ze,this.transform.angle),$t,ft,At,Vt.predicate);if(Sn.box.length===0)return}if(hn.box.length>0){var Nn;return this.prevPlacement&&this.prevPlacement.variableOffsets[ir.crossTileID]&&this.prevPlacement.placements[ir.crossTileID]&&this.prevPlacement.placements[ir.crossTileID].text&&(Nn=this.prevPlacement.variableOffsets[ir.crossTileID].anchor),this.variableOffsets[ir.crossTileID]={textOffset:Nr,width:Q,height:ge,anchor:X,textBoxScale:Ee,prevAnchor:Nn},this.markUsedJustification(Sr,X,ir,Br),Sr.allowVerticalPlacement&&(this.markUsedOrientation(Sr,Br,ir),this.placedOrientations[ir.crossTileID]=Br),{shift:Kr,placedGlyphBoxes:hn}}},ar.prototype.placeLayerBucketPart=function(X,de,Q){var ge=this,Ee=X.parameters,Pe=Ee.bucket,Ze=Ee.layout,ft=Ee.posMatrix,At=Ee.textLabelPlaneMatrix,Vt=Ee.labelToScreenMatrix,$t=Ee.textPixelRatio,ir=Ee.holdingForFade,Sr=Ee.collisionBoxArray,Br=Ee.partiallyEvaluatedTextSize,Vr=Ee.collisionGroup,Nr=Ze.get("text-optional"),Kr=Ze.get("icon-optional"),hn=Ze.get("text-allow-overlap"),Sn=Ze.get("icon-allow-overlap"),Nn=Ze.get("text-rotation-alignment")==="map",Qn=Ze.get("text-pitch-alignment")==="map",ta=Ze.get("icon-text-fit")!=="none",qn=Ze.get("symbol-z-order")==="viewport-y",pa=hn&&(Sn||!Pe.hasIconData()||Kr),Ta=Sn&&(hn||!Pe.hasTextData()||Nr);!Pe.collisionArrays&&Sr&&Pe.deserializeCollisionBoxes(Sr);var _a=function(ci,gi){if(!de[ci.crossTileID]){if(ir){ge.placements[ci.crossTileID]=new on(!1,!1,!1);return}var Ha=!1,Ii=!1,Bi=!0,Gi=null,Ai={box:null,offscreen:null},qi={box:null,offscreen:null},li=null,Mi=null,Ro=null,ts=0,mu=0,yu=0;gi.textFeatureIndex?ts=gi.textFeatureIndex:ci.useRuntimeCollisionCircles&&(ts=ci.featureIndex),gi.verticalTextFeatureIndex&&(mu=gi.verticalTextFeatureIndex);var tf=gi.textBox;if(tf){var rf=function(Vo){var Dl=t.WritingMode.horizontal;if(Pe.allowVerticalPlacement&&!Vo&&ge.prevPlacement){var Il=ge.prevPlacement.placedOrientations[ci.crossTileID];Il&&(ge.placedOrientations[ci.crossTileID]=Il,Dl=Il,ge.markUsedOrientation(Pe,Dl,ci))}return Dl},Rf=function(Vo,Dl){if(Pe.allowVerticalPlacement&&ci.numVerticalGlyphVertices>0&&gi.verticalTextBox)for(var Il=0,rv=Pe.writingModes;Il<rv.length;Il+=1){var vp=rv[Il];if(vp===t.WritingMode.vertical?(Ai=Dl(),qi=Ai):Ai=Vo(),Ai&&Ai.box&&Ai.box.length)break}else Ai=Vo()};if(Ze.get("text-variable-anchor")){var Hs=Ze.get("text-variable-anchor");if(ge.prevPlacement&&ge.prevPlacement.variableOffsets[ci.crossTileID]){var Ql=ge.prevPlacement.variableOffsets[ci.crossTileID];Hs.indexOf(Ql.anchor)>0&&(Hs=Hs.filter(function(Vo){return Vo!==Ql.anchor}),Hs.unshift(Ql.anchor))}var af=function(Vo,Dl,Il){for(var rv=Vo.x2-Vo.x1,vp=Vo.y2-Vo.y1,vm=ci.textBoxScale,pm=ta&&!Sn?Dl:null,Ah={box:[],offscreen:!1},dm=hn?Hs.length*2:Hs.length,nv=0;nv<dm;++nv){var gm=Hs[nv%Hs.length],mm=nv>=Hs.length,pp=ge.attemptAnchorPlacement(gm,Vo,rv,vp,vm,Nn,Qn,$t,ft,Vr,mm,ci,Pe,Il,pm);if(pp&&(Ah=pp.placedGlyphBoxes,Ah&&Ah.box&&Ah.box.length)){Ha=!0,Gi=pp.shift;break}}return Ah},Uu=function(){return af(tf,gi.iconBox,t.WritingMode.horizontal)},of=function(){var Vo=gi.verticalTextBox,Dl=Ai&&Ai.box&&Ai.box.length;return Pe.allowVerticalPlacement&&!Dl&&ci.numVerticalGlyphVertices>0&&Vo?af(Vo,gi.verticalIconBox,t.WritingMode.vertical):{box:null,offscreen:null}};Rf(Uu,of),Ai&&(Ha=Ai.box,Bi=Ai.offscreen);var $h=rf(Ai&&Ai.box);if(!Ha&&ge.prevPlacement){var yc=ge.prevPlacement.variableOffsets[ci.crossTileID];yc&&(ge.variableOffsets[ci.crossTileID]=yc,ge.markUsedJustification(Pe,yc.anchor,ci,$h))}}else{var nf=function(Vo,Dl){var Il=ge.collisionIndex.placeCollisionBox(Vo,hn,$t,ft,Vr.predicate);return Il&&Il.box&&Il.box.length&&(ge.markUsedOrientation(Pe,Dl,ci),ge.placedOrientations[ci.crossTileID]=Dl),Il},vl=function(){return nf(tf,t.WritingMode.horizontal)},nc=function(){var Vo=gi.verticalTextBox;return Pe.allowVerticalPlacement&&ci.numVerticalGlyphVertices>0&&Vo?nf(Vo,t.WritingMode.vertical):{box:null,offscreen:null}};Rf(vl,nc),rf(Ai&&Ai.box&&Ai.box.length)}}if(li=Ai,Ha=li&&li.box&&li.box.length>0,Bi=li&&li.offscreen,ci.useRuntimeCollisionCircles){var Rs=Pe.text.placedSymbolArray.get(ci.centerJustifiedTextSymbolIndex),wh=t.evaluateSizeForFeature(Pe.textSizeData,Br,Rs),$s=Ze.get("text-padding"),Th=ci.collisionCircleDiameter;Mi=ge.collisionIndex.placeCollisionCircles(hn,Rs,Pe.lineVertexArray,Pe.glyphOffsetArray,wh,ft,At,Vt,Q,Qn,Vr.predicate,Th,$s),Ha=hn||Mi.circles.length>0&&!Mi.collisionDetected,Bi=Bi&&Mi.offscreen}if(gi.iconFeatureIndex&&(yu=gi.iconFeatureIndex),gi.iconBox){var qh=function(Vo){var Dl=ta&&Gi?cr(Vo,Gi.x,Gi.y,Nn,Qn,ge.transform.angle):Vo;return ge.collisionIndex.placeCollisionBox(Dl,Sn,$t,ft,Vr.predicate)};qi&&qi.box&&qi.box.length&&gi.verticalIconBox?(Ro=qh(gi.verticalIconBox),Ii=Ro.box.length>0):(Ro=qh(gi.iconBox),Ii=Ro.box.length>0),Bi=Bi&&Ro.offscreen}var ev=Nr||ci.numHorizontalGlyphVertices===0&&ci.numVerticalGlyphVertices===0,a0=Kr||ci.numIconVertices===0;if(!ev&&!a0?Ii=Ha=Ii&&Ha:a0?ev||(Ii=Ii&&Ha):Ha=Ii&&Ha,Ha&&li&&li.box&&(qi&&qi.box&&mu?ge.collisionIndex.insertCollisionBox(li.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,mu,Vr.ID):ge.collisionIndex.insertCollisionBox(li.box,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,ts,Vr.ID)),Ii&&Ro&&ge.collisionIndex.insertCollisionBox(Ro.box,Ze.get("icon-ignore-placement"),Pe.bucketInstanceId,yu,Vr.ID),Mi&&(Ha&&ge.collisionIndex.insertCollisionCircles(Mi.circles,Ze.get("text-ignore-placement"),Pe.bucketInstanceId,ts,Vr.ID),Q)){var tv=Pe.bucketInstanceId,Oc=ge.collisionCircleArrays[tv];Oc===void 0&&(Oc=ge.collisionCircleArrays[tv]=new rn);for(var Nc=0;Nc<Mi.circles.length;Nc+=4)Oc.circles.push(Mi.circles[Nc+0]),Oc.circles.push(Mi.circles[Nc+1]),Oc.circles.push(Mi.circles[Nc+2]),Oc.circles.push(Mi.collisionDetected?1:0)}ge.placements[ci.crossTileID]=new on(Ha||pa,Ii||Ta,Bi||Pe.justReloaded),de[ci.crossTileID]=!0}};if(qn)for(var ka=Pe.getSortedSymbolIndexes(this.transform.angle),Da=ka.length-1;Da>=0;--Da){var Wa=ka[Da];_a(Pe.symbolInstances.get(Wa),Pe.collisionArrays[Wa])}else for(var oi=X.symbolInstanceStart;oi<X.symbolInstanceEnd;oi++)_a(Pe.symbolInstances.get(oi),Pe.collisionArrays[oi]);if(Q&&Pe.bucketInstanceId in this.collisionCircleArrays){var Di=this.collisionCircleArrays[Pe.bucketInstanceId];t.invert(Di.invProjMatrix,ft),Di.viewportMatrix=this.collisionIndex.getViewportMatrix()}Pe.justReloaded=!1},ar.prototype.markUsedJustification=function(X,de,Q,ge){var Ee={left:Q.leftJustifiedTextSymbolIndex,center:Q.centerJustifiedTextSymbolIndex,right:Q.rightJustifiedTextSymbolIndex},Pe;ge===t.WritingMode.vertical?Pe=Q.verticalPlacedTextSymbolIndex:Pe=Ee[t.getAnchorJustification(de)];for(var Ze=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex,Q.verticalPlacedTextSymbolIndex],ft=0,At=Ze;ft<At.length;ft+=1){var Vt=At[ft];Vt>=0&&(Pe>=0&&Vt!==Pe?X.text.placedSymbolArray.get(Vt).crossTileID=0:X.text.placedSymbolArray.get(Vt).crossTileID=Q.crossTileID)}},ar.prototype.markUsedOrientation=function(X,de,Q){for(var ge=de===t.WritingMode.horizontal||de===t.WritingMode.horizontalOnly?de:0,Ee=de===t.WritingMode.vertical?de:0,Pe=[Q.leftJustifiedTextSymbolIndex,Q.centerJustifiedTextSymbolIndex,Q.rightJustifiedTextSymbolIndex],Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var At=ft[Ze];X.text.placedSymbolArray.get(At).placedOrientation=ge}Q.verticalPlacedTextSymbolIndex&&(X.text.placedSymbolArray.get(Q.verticalPlacedTextSymbolIndex).placedOrientation=Ee)},ar.prototype.commit=function(X){this.commitTime=X,this.zoomAtLastRecencyCheck=this.transform.zoom;var de=this.prevPlacement,Q=!1;this.prevZoomAdjustment=de?de.zoomAdjustment(this.transform.zoom):0;var ge=de?de.symbolFadeChange(X):1,Ee=de?de.opacities:{},Pe=de?de.variableOffsets:{},Ze=de?de.placedOrientations:{};for(var ft in this.placements){var At=this.placements[ft],Vt=Ee[ft];Vt?(this.opacities[ft]=new Dr(Vt,ge,At.text,At.icon),Q=Q||At.text!==Vt.text.placed||At.icon!==Vt.icon.placed):(this.opacities[ft]=new Dr(null,ge,At.text,At.icon,At.skipFade),Q=Q||At.text||At.icon)}for(var $t in Ee){var ir=Ee[$t];if(!this.opacities[$t]){var Sr=new Dr(ir,ge,!1,!1);Sr.isHidden()||(this.opacities[$t]=Sr,Q=Q||ir.text.placed||ir.icon.placed)}}for(var Br in Pe)!this.variableOffsets[Br]&&this.opacities[Br]&&!this.opacities[Br].isHidden()&&(this.variableOffsets[Br]=Pe[Br]);for(var Vr in Ze)!this.placedOrientations[Vr]&&this.opacities[Vr]&&!this.opacities[Vr].isHidden()&&(this.placedOrientations[Vr]=Ze[Vr]);Q?this.lastPlacementChangeTime=X:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=de?de.lastPlacementChangeTime:X)},ar.prototype.updateLayerOpacities=function(X,de){for(var Q={},ge=0,Ee=de;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe.getBucket(X);Ze&&Pe.latestFeatureIndex&&X.id===Ze.layerIds[0]&&this.updateBucketOpacities(Ze,Q,Pe.collisionBoxArray)}},ar.prototype.updateBucketOpacities=function(X,de,Q){var ge=this;X.hasTextData()&&X.text.opacityVertexArray.clear(),X.hasIconData()&&X.icon.opacityVertexArray.clear(),X.hasIconCollisionBoxData()&&X.iconCollisionBox.collisionVertexArray.clear(),X.hasTextCollisionBoxData()&&X.textCollisionBox.collisionVertexArray.clear();var Ee=X.layers[0].layout,Pe=new Dr(null,0,!1,!1,!0),Ze=Ee.get("text-allow-overlap"),ft=Ee.get("icon-allow-overlap"),At=Ee.get("text-variable-anchor"),Vt=Ee.get("text-rotation-alignment")==="map",$t=Ee.get("text-pitch-alignment")==="map",ir=Ee.get("icon-text-fit")!=="none",Sr=new Dr(null,0,Ze&&(ft||!X.hasIconData()||Ee.get("icon-optional")),ft&&(Ze||!X.hasTextData()||Ee.get("text-optional")),!0);!X.collisionArrays&&Q&&(X.hasIconCollisionBoxData()||X.hasTextCollisionBoxData())&&X.deserializeCollisionBoxes(Q);for(var Br=function(hn,Sn,Nn){for(var Qn=0;Qn<Sn/4;Qn++)hn.opacityVertexArray.emplaceBack(Nn)},Vr=function(hn){var Sn=X.symbolInstances.get(hn),Nn=Sn.numHorizontalGlyphVertices,Qn=Sn.numVerticalGlyphVertices,ta=Sn.crossTileID,qn=de[ta],pa=ge.opacities[ta];qn?pa=Pe:pa||(pa=Sr,ge.opacities[ta]=pa),de[ta]=!0;var Ta=Nn>0||Qn>0,_a=Sn.numIconVertices>0,ka=ge.placedOrientations[Sn.crossTileID],Da=ka===t.WritingMode.vertical,Wa=ka===t.WritingMode.horizontal||ka===t.WritingMode.horizontalOnly;if(Ta){var oi=Dn(pa.text),Di=Da?Yn:oi;Br(X.text,Nn,Di);var ci=Wa?Yn:oi;Br(X.text,Qn,ci);var gi=pa.text.isHidden();[Sn.rightJustifiedTextSymbolIndex,Sn.centerJustifiedTextSymbolIndex,Sn.leftJustifiedTextSymbolIndex].forEach(function(yu){yu>=0&&(X.text.placedSymbolArray.get(yu).hidden=gi||Da?1:0)}),Sn.verticalPlacedTextSymbolIndex>=0&&(X.text.placedSymbolArray.get(Sn.verticalPlacedTextSymbolIndex).hidden=gi||Wa?1:0);var Ha=ge.variableOffsets[Sn.crossTileID];Ha&&ge.markUsedJustification(X,Ha.anchor,Sn,ka);var Ii=ge.placedOrientations[Sn.crossTileID];Ii&&(ge.markUsedJustification(X,"left",Sn,Ii),ge.markUsedOrientation(X,Ii,Sn))}if(_a){var Bi=Dn(pa.icon),Gi=!(ir&&Sn.verticalPlacedIconSymbolIndex&&Da);if(Sn.placedIconSymbolIndex>=0){var Ai=Gi?Bi:Yn;Br(X.icon,Sn.numIconVertices,Ai),X.icon.placedSymbolArray.get(Sn.placedIconSymbolIndex).hidden=pa.icon.isHidden()}if(Sn.verticalPlacedIconSymbolIndex>=0){var qi=Gi?Yn:Bi;Br(X.icon,Sn.numVerticalIconVertices,qi),X.icon.placedSymbolArray.get(Sn.verticalPlacedIconSymbolIndex).hidden=pa.icon.isHidden()}}if(X.hasIconCollisionBoxData()||X.hasTextCollisionBoxData()){var li=X.collisionArrays[hn];if(li){var Mi=new t.Point(0,0);if(li.textBox||li.verticalTextBox){var Ro=!0;if(At){var ts=ge.variableOffsets[ta];ts?(Mi=pn(ts.anchor,ts.width,ts.height,ts.textOffset,ts.textBoxScale),Vt&&Mi._rotate($t?ge.transform.angle:-ge.transform.angle)):Ro=!1}li.textBox&&Fr(X.textCollisionBox.collisionVertexArray,pa.text.placed,!Ro||Da,Mi.x,Mi.y),li.verticalTextBox&&Fr(X.textCollisionBox.collisionVertexArray,pa.text.placed,!Ro||Wa,Mi.x,Mi.y)}var mu=Boolean(!Wa&&li.verticalIconBox);li.iconBox&&Fr(X.iconCollisionBox.collisionVertexArray,pa.icon.placed,mu,ir?Mi.x:0,ir?Mi.y:0),li.verticalIconBox&&Fr(X.iconCollisionBox.collisionVertexArray,pa.icon.placed,!mu,ir?Mi.x:0,ir?Mi.y:0)}}},Nr=0;Nr<X.symbolInstances.length;Nr++)Vr(Nr);if(X.sortFeatures(this.transform.angle),this.retainedQueryData[X.bucketInstanceId]&&(this.retainedQueryData[X.bucketInstanceId].featureSortOrder=X.featureSortOrder),X.hasTextData()&&X.text.opacityVertexBuffer&&X.text.opacityVertexBuffer.updateData(X.text.opacityVertexArray),X.hasIconData()&&X.icon.opacityVertexBuffer&&X.icon.opacityVertexBuffer.updateData(X.icon.opacityVertexArray),X.hasIconCollisionBoxData()&&X.iconCollisionBox.collisionVertexBuffer&&X.iconCollisionBox.collisionVertexBuffer.updateData(X.iconCollisionBox.collisionVertexArray),X.hasTextCollisionBoxData()&&X.textCollisionBox.collisionVertexBuffer&&X.textCollisionBox.collisionVertexBuffer.updateData(X.textCollisionBox.collisionVertexArray),X.bucketInstanceId in this.collisionCircleArrays){var Kr=this.collisionCircleArrays[X.bucketInstanceId];X.placementInvProjMatrix=Kr.invProjMatrix,X.placementViewportMatrix=Kr.viewportMatrix,X.collisionCircleArray=Kr.circles,delete this.collisionCircleArrays[X.bucketInstanceId]}},ar.prototype.symbolFadeChange=function(X){return this.fadeDuration===0?1:(X-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},ar.prototype.zoomAdjustment=function(X){return Math.max(0,(this.transform.zoom-X)/1.5)},ar.prototype.hasTransitions=function(X){return this.stale||X-this.lastPlacementChangeTime<this.fadeDuration},ar.prototype.stillRecent=function(X,de){var Q=this.zoomAtLastRecencyCheck===de?1-this.zoomAdjustment(de):1;return this.zoomAtLastRecencyCheck=de,this.commitTime+this.fadeDuration*Q>X},ar.prototype.setStale=function(){this.stale=!0};function Fr(ve,X,de,Q,ge){ve.emplaceBack(X?1:0,de?1:0,Q||0,ge||0),ve.emplaceBack(X?1:0,de?1:0,Q||0,ge||0),ve.emplaceBack(X?1:0,de?1:0,Q||0,ge||0),ve.emplaceBack(X?1:0,de?1:0,Q||0,ge||0)}var Jr=Math.pow(2,25),En=Math.pow(2,24),Hn=Math.pow(2,17),Jn=Math.pow(2,16),Zn=Math.pow(2,9),Un=Math.pow(2,8),yn=Math.pow(2,1);function Dn(ve){if(ve.opacity===0&&!ve.placed)return 0;if(ve.opacity===1&&ve.placed)return 4294967295;var X=ve.placed?1:0,de=Math.floor(ve.opacity*127);return de*Jr+X*En+de*Hn+X*Jn+de*Zn+X*Un+de*yn+X}var Yn=0,ua=function(X){this._sortAcrossTiles=X.layout.get("symbol-z-order")!=="viewport-y"&&X.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};ua.prototype.continuePlacement=function(X,de,Q,ge,Ee){for(var Pe=this._bucketParts;this._currentTileIndex<X.length;){var Ze=X[this._currentTileIndex];if(de.getBucketParts(Pe,ge,Ze,this._sortAcrossTiles),this._currentTileIndex++,Ee())return!0}for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,Pe.sort(function(At,Vt){return At.sortKey-Vt.sortKey}));this._currentPartIndex<Pe.length;){var ft=Pe[this._currentPartIndex];if(de.placeLayerBucketPart(ft,this._seenCrossTileIDs,Q),this._currentPartIndex++,Ee())return!0}return!1};var Ya=function(X,de,Q,ge,Ee,Pe,Ze){this.placement=new ar(X,Ee,Pe,Ze),this._currentPlacementIndex=de.length-1,this._forceFullPlacement=Q,this._showCollisionBoxes=ge,this._done=!1};Ya.prototype.isDone=function(){return this._done},Ya.prototype.continuePlacement=function(X,de,Q){for(var ge=this,Ee=t.browser.now(),Pe=function(){var $t=t.browser.now()-Ee;return ge._forceFullPlacement?!1:$t>2};this._currentPlacementIndex>=0;){var Ze=X[this._currentPlacementIndex],ft=de[Ze],At=this.placement.collisionIndex.transform.zoom;if(ft.type==="symbol"&&(!ft.minzoom||ft.minzoom<=At)&&(!ft.maxzoom||ft.maxzoom>At)){this._inProgressLayer||(this._inProgressLayer=new ua(ft));var Vt=this._inProgressLayer.continuePlacement(Q[ft.source],this.placement,this._showCollisionBoxes,ft,Pe);if(Vt)return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ya.prototype.commit=function(X){return this.placement.commit(X),this.placement};var Ca=512/t.EXTENT/2,wl=function(X,de,Q){this.tileID=X,this.indexedSymbolInstances={},this.bucketInstanceId=Q;for(var ge=0;ge<de.length;ge++){var Ee=de.get(ge),Pe=Ee.key;this.indexedSymbolInstances[Pe]||(this.indexedSymbolInstances[Pe]=[]),this.indexedSymbolInstances[Pe].push({crossTileID:Ee.crossTileID,coord:this.getScaledCoordinates(Ee,X)})}};wl.prototype.getScaledCoordinates=function(X,de){var Q=de.canonical.z-this.tileID.canonical.z,ge=Ca/Math.pow(2,Q);return{x:Math.floor((de.canonical.x*t.EXTENT+X.anchorX)*ge),y:Math.floor((de.canonical.y*t.EXTENT+X.anchorY)*ge)}},wl.prototype.findMatches=function(X,de,Q){for(var ge=this.tileID.canonical.z<de.canonical.z?1:Math.pow(2,this.tileID.canonical.z-de.canonical.z),Ee=0;Ee<X.length;Ee++){var Pe=X.get(Ee);if(!Pe.crossTileID){var Ze=this.indexedSymbolInstances[Pe.key];if(!!Ze)for(var ft=this.getScaledCoordinates(Pe,de),At=0,Vt=Ze;At<Vt.length;At+=1){var $t=Vt[At];if(Math.abs($t.coord.x-ft.x)<=ge&&Math.abs($t.coord.y-ft.y)<=ge&&!Q[$t.crossTileID]){Q[$t.crossTileID]=!0,Pe.crossTileID=$t.crossTileID;break}}}}};var Qo=function(){this.maxCrossTileID=0};Qo.prototype.generate=function(){return++this.maxCrossTileID};var vs=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};vs.prototype.handleWrapJump=function(X){var de=Math.round((X-this.lng)/360);if(de!==0)for(var Q in this.indexes){var ge=this.indexes[Q],Ee={};for(var Pe in ge){var Ze=ge[Pe];Ze.tileID=Ze.tileID.unwrapTo(Ze.tileID.wrap+de),Ee[Ze.tileID.key]=Ze}this.indexes[Q]=Ee}this.lng=X},vs.prototype.addBucket=function(X,de,Q){if(this.indexes[X.overscaledZ]&&this.indexes[X.overscaledZ][X.key]){if(this.indexes[X.overscaledZ][X.key].bucketInstanceId===de.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(X.overscaledZ,this.indexes[X.overscaledZ][X.key])}for(var ge=0;ge<de.symbolInstances.length;ge++){var Ee=de.symbolInstances.get(ge);Ee.crossTileID=0}this.usedCrossTileIDs[X.overscaledZ]||(this.usedCrossTileIDs[X.overscaledZ]={});var Pe=this.usedCrossTileIDs[X.overscaledZ];for(var Ze in this.indexes){var ft=this.indexes[Ze];if(Number(Ze)>X.overscaledZ)for(var At in ft){var Vt=ft[At];Vt.tileID.isChildOf(X)&&Vt.findMatches(de.symbolInstances,X,Pe)}else{var $t=X.scaledTo(Number(Ze)),ir=ft[$t.key];ir&&ir.findMatches(de.symbolInstances,X,Pe)}}for(var Sr=0;Sr<de.symbolInstances.length;Sr++){var Br=de.symbolInstances.get(Sr);Br.crossTileID||(Br.crossTileID=Q.generate(),Pe[Br.crossTileID]=!0)}return this.indexes[X.overscaledZ]===void 0&&(this.indexes[X.overscaledZ]={}),this.indexes[X.overscaledZ][X.key]=new wl(X,de.symbolInstances,de.bucketInstanceId),!0},vs.prototype.removeBucketCrossTileIDs=function(X,de){for(var Q in de.indexedSymbolInstances)for(var ge=0,Ee=de.indexedSymbolInstances[Q];ge<Ee.length;ge+=1){var Pe=Ee[ge];delete this.usedCrossTileIDs[X][Pe.crossTileID]}},vs.prototype.removeStaleBuckets=function(X){var de=!1;for(var Q in this.indexes){var ge=this.indexes[Q];for(var Ee in ge)X[ge[Ee].bucketInstanceId]||(this.removeBucketCrossTileIDs(Q,ge[Ee]),delete ge[Ee],de=!0)}return de};var Ws=function(){this.layerIndexes={},this.crossTileIDs=new Qo,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Ws.prototype.addLayer=function(X,de,Q){var ge=this.layerIndexes[X.id];ge===void 0&&(ge=this.layerIndexes[X.id]=new vs);var Ee=!1,Pe={};ge.handleWrapJump(Q);for(var Ze=0,ft=de;Ze<ft.length;Ze+=1){var At=ft[Ze],Vt=At.getBucket(X);!Vt||X.id!==Vt.layerIds[0]||(Vt.bucketInstanceId||(Vt.bucketInstanceId=++this.maxBucketInstanceId),ge.addBucket(At.tileID,Vt,this.crossTileIDs)&&(Ee=!0),Pe[Vt.bucketInstanceId]=!0)}return ge.removeStaleBuckets(Pe)&&(Ee=!0),Ee},Ws.prototype.pruneUnusedLayers=function(X){var de={};X.forEach(function(ge){de[ge]=!0});for(var Q in this.layerIndexes)de[Q]||delete this.layerIndexes[Q]};var io=function(ve,X){return t.emitValidationErrors(ve,X&&X.filter(function(de){return de.identifier!=="source.canvas"}))},zi=t.pick(Gr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),il=t.pick(Gr,["setCenter","setZoom","setBearing","setPitch"]),ol=mn(),ps=function(ve){function X(de,Q){var ge=this;Q===void 0&&(Q={}),ve.call(this),this.map=de,this.dispatcher=new D(mr(),this),this.imageManager=new A,this.imageManager.setEventedParent(this),this.glyphManager=new S(de._requestManager,Q.localIdeographFontFamily),this.lineAtlas=new I(256,512),this.crossTileSymbolIndex=new Ws,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new t.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",t.getReferrer());var Ee=this;this._rtlTextPluginCallback=X.registerForPluginStateChange(function(Pe){var Ze={pluginStatus:Pe.pluginStatus,pluginURL:Pe.pluginURL};Ee.dispatcher.broadcast("syncRTLPluginState",Ze,function(ft,At){if(t.triggerPluginCompletionEvent(ft),At){var Vt=At.every(function(ir){return ir});if(Vt)for(var $t in Ee.sourceCaches)Ee.sourceCaches[$t].reload()}})}),this.on("data",function(Pe){if(!(Pe.dataType!=="source"||Pe.sourceDataType!=="metadata")){var Ze=ge.sourceCaches[Pe.sourceId];if(!!Ze){var ft=Ze.getSource();if(!(!ft||!ft.vectorLayerIds))for(var At in ge._layers){var Vt=ge._layers[At];Vt.source===ft.id&&ge._validateLayer(Vt)}}}})}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.loadURL=function(Q,ge){var Ee=this;ge===void 0&&(ge={}),this.fire(new t.Event("dataloading",{dataType:"style"}));var Pe=typeof ge.validate=="boolean"?ge.validate:!t.isMapboxURL(Q);Q=this.map._requestManager.normalizeStyleURL(Q,ge.accessToken);var Ze=this.map._requestManager.transformRequest(Q,t.ResourceType.Style);this._request=t.getJSON(Ze,function(ft,At){Ee._request=null,ft?Ee.fire(new t.ErrorEvent(ft)):At&&Ee._load(At,Pe)})},X.prototype.loadJSON=function(Q,ge){var Ee=this;ge===void 0&&(ge={}),this.fire(new t.Event("dataloading",{dataType:"style"})),this._request=t.browser.frame(function(){Ee._request=null,Ee._load(Q,ge.validate!==!1)})},X.prototype.loadEmpty=function(){this.fire(new t.Event("dataloading",{dataType:"style"})),this._load(ol,!1)},X.prototype._load=function(Q,ge){if(!(ge&&io(this,t.validateStyle(Q)))){this._loaded=!0,this.stylesheet=Q;for(var Ee in Q.sources)this.addSource(Ee,Q.sources[Ee],{validate:!1});Q.sprite?this._loadSprite(Q.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(Q.glyphs);var Pe=gr(this.stylesheet.layers);this._order=Pe.map(function(Vt){return Vt.id}),this._layers={},this._serializedLayers={};for(var Ze=0,ft=Pe;Ze<ft.length;Ze+=1){var At=ft[Ze];At=t.createStyleLayer(At),At.setEventedParent(this,{layer:{id:At.id}}),this._layers[At.id]=At,this._serializedLayers[At.id]=At.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new F(this.stylesheet.light),this.fire(new t.Event("data",{dataType:"style"})),this.fire(new t.Event("style.load"))}},X.prototype._loadSprite=function(Q){var ge=this;this._spriteRequest=p(Q,this.map._requestManager,function(Ee,Pe){if(ge._spriteRequest=null,Ee)ge.fire(new t.ErrorEvent(Ee));else if(Pe)for(var Ze in Pe)ge.imageManager.addImage(Ze,Pe[Ze]);ge.imageManager.setLoaded(!0),ge._availableImages=ge.imageManager.listImages(),ge.dispatcher.broadcast("setImages",ge._availableImages),ge.fire(new t.Event("data",{dataType:"style"}))})},X.prototype._validateLayer=function(Q){var ge=this.sourceCaches[Q.source];if(!!ge){var Ee=Q.sourceLayer;if(!!Ee){var Pe=ge.getSource();(Pe.type==="geojson"||Pe.vectorLayerIds&&Pe.vectorLayerIds.indexOf(Ee)===-1)&&this.fire(new t.ErrorEvent(new Error('Source layer "'+Ee+'" does not exist on source "'+Pe.id+'" as specified by style layer "'+Q.id+'"')))}}},X.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var Q in this.sourceCaches)if(!this.sourceCaches[Q].loaded())return!1;return!!this.imageManager.isLoaded()},X.prototype._serializeLayers=function(Q){for(var ge=[],Ee=0,Pe=Q;Ee<Pe.length;Ee+=1){var Ze=Pe[Ee],ft=this._layers[Ze];ft.type!=="custom"&&ge.push(ft.serialize())}return ge},X.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var Q in this.sourceCaches)if(this.sourceCaches[Q].hasTransition())return!0;for(var ge in this._layers)if(this._layers[ge].hasTransition())return!0;return!1},X.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},X.prototype.update=function(Q){if(!!this._loaded){var ge=this._changed;if(this._changed){var Ee=Object.keys(this._updatedLayers),Pe=Object.keys(this._removedLayers);(Ee.length||Pe.length)&&this._updateWorkerLayers(Ee,Pe);for(var Ze in this._updatedSources){var ft=this._updatedSources[Ze];ft==="reload"?this._reloadSource(Ze):ft==="clear"&&this._clearSource(Ze)}this._updateTilesForChangedImages();for(var At in this._updatedPaintProps)this._layers[At].updateTransitions(Q);this.light.updateTransitions(Q),this._resetUpdates()}for(var Vt in this.sourceCaches)this.sourceCaches[Vt].used=!1;for(var $t=0,ir=this._order;$t<ir.length;$t+=1){var Sr=ir[$t],Br=this._layers[Sr];Br.recalculate(Q,this._availableImages),!Br.isHidden(Q.zoom)&&Br.source&&(this.sourceCaches[Br.source].used=!0)}this.light.recalculate(Q),this.z=Q.zoom,ge&&this.fire(new t.Event("data",{dataType:"style"}))}},X.prototype._updateTilesForChangedImages=function(){var Q=Object.keys(this._changedImages);if(Q.length){for(var ge in this.sourceCaches)this.sourceCaches[ge].reloadTilesForDependencies(["icons","patterns"],Q);this._changedImages={}}},X.prototype._updateWorkerLayers=function(Q,ge){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(Q),removedIds:ge})},X.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},X.prototype.setState=function(Q){var ge=this;if(this._checkLoaded(),io(this,t.validateStyle(Q)))return!1;Q=t.clone$1(Q),Q.layers=gr(Q.layers);var Ee=zr(this.serialize(),Q).filter(function(Ze){return!(Ze.command in il)});if(Ee.length===0)return!1;var Pe=Ee.filter(function(Ze){return!(Ze.command in zi)});if(Pe.length>0)throw new Error("Unimplemented: "+Pe.map(function(Ze){return Ze.command}).join(", ")+".");return Ee.forEach(function(Ze){Ze.command!=="setTransition"&&ge[Ze.command].apply(ge,Ze.args)}),this.stylesheet=Q,!0},X.prototype.addImage=function(Q,ge){if(this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(Q,ge),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},X.prototype.updateImage=function(Q,ge){this.imageManager.updateImage(Q,ge)},X.prototype.getImage=function(Q){return this.imageManager.getImage(Q)},X.prototype.removeImage=function(Q){if(!this.getImage(Q))return this.fire(new t.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(Q),this._availableImages=this.imageManager.listImages(),this._changedImages[Q]=!0,this._changed=!0,this.fire(new t.Event("data",{dataType:"style"}))},X.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},X.prototype.addSource=function(Q,ge,Ee){var Pe=this;if(Ee===void 0&&(Ee={}),this._checkLoaded(),this.sourceCaches[Q]!==void 0)throw new Error("There is already a source with this ID");if(!ge.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(ge).join(", ")+".");var Ze=["vector","raster","geojson","video","image"],ft=Ze.indexOf(ge.type)>=0;if(!(ft&&this._validate(t.validateStyle.source,"sources."+Q,ge,null,Ee))){this.map&&this.map._collectResourceTiming&&(ge.collectResourceTiming=!0);var At=this.sourceCaches[Q]=new ot(Q,ge,this.dispatcher);At.style=this,At.setEventedParent(this,function(){return{isSourceLoaded:Pe.loaded(),source:At.serialize(),sourceId:Q}}),At.onAdd(this.map),this._changed=!0}},X.prototype.removeSource=function(Q){if(this._checkLoaded(),this.sourceCaches[Q]===void 0)throw new Error("There is no source with this ID");for(var ge in this._layers)if(this._layers[ge].source===Q)return this.fire(new t.ErrorEvent(new Error('Source "'+Q+'" cannot be removed while layer "'+ge+'" is using it.')));var Ee=this.sourceCaches[Q];delete this.sourceCaches[Q],delete this._updatedSources[Q],Ee.fire(new t.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:Q})),Ee.setEventedParent(null),Ee.clearTiles(),Ee.onRemove&&Ee.onRemove(this.map),this._changed=!0},X.prototype.setGeoJSONSourceData=function(Q,ge){this._checkLoaded();var Ee=this.sourceCaches[Q].getSource();Ee.setData(ge),this._changed=!0},X.prototype.getSource=function(Q){return this.sourceCaches[Q]&&this.sourceCaches[Q].getSource()},X.prototype.addLayer=function(Q,ge,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Pe=Q.id;if(this.getLayer(Pe)){this.fire(new t.ErrorEvent(new Error('Layer with id "'+Pe+'" already exists on this map')));return}var Ze;if(Q.type==="custom"){if(io(this,t.validateCustomStyleLayer(Q)))return;Ze=t.createStyleLayer(Q)}else{if(typeof Q.source=="object"&&(this.addSource(Pe,Q.source),Q=t.clone$1(Q),Q=t.extend(Q,{source:Pe})),this._validate(t.validateStyle.layer,"layers."+Pe,Q,{arrayIndex:-1},Ee))return;Ze=t.createStyleLayer(Q),this._validateLayer(Ze),Ze.setEventedParent(this,{layer:{id:Pe}}),this._serializedLayers[Ze.id]=Ze.serialize()}var ft=ge?this._order.indexOf(ge):this._order.length;if(ge&&ft===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}if(this._order.splice(ft,0,Pe),this._layerOrderChanged=!0,this._layers[Pe]=Ze,this._removedLayers[Pe]&&Ze.source&&Ze.type!=="custom"){var At=this._removedLayers[Pe];delete this._removedLayers[Pe],At.type!==Ze.type?this._updatedSources[Ze.source]="clear":(this._updatedSources[Ze.source]="reload",this.sourceCaches[Ze.source].pause())}this._updateLayer(Ze),Ze.onAdd&&Ze.onAdd(this.map)},X.prototype.moveLayer=function(Q,ge){this._checkLoaded(),this._changed=!0;var Ee=this._layers[Q];if(!Ee){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be moved.")));return}if(Q!==ge){var Pe=this._order.indexOf(Q);this._order.splice(Pe,1);var Ze=ge?this._order.indexOf(ge):this._order.length;if(ge&&Ze===-1){this.fire(new t.ErrorEvent(new Error('Layer with id "'+ge+'" does not exist on this map.')));return}this._order.splice(Ze,0,Q),this._layerOrderChanged=!0}},X.prototype.removeLayer=function(Q){this._checkLoaded();var ge=this._layers[Q];if(!ge){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be removed.")));return}ge.setEventedParent(null);var Ee=this._order.indexOf(Q);this._order.splice(Ee,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[Q]=ge,delete this._layers[Q],delete this._serializedLayers[Q],delete this._updatedLayers[Q],delete this._updatedPaintProps[Q],ge.onRemove&&ge.onRemove(this.map)},X.prototype.getLayer=function(Q){return this._layers[Q]},X.prototype.hasLayer=function(Q){return Q in this._layers},X.prototype.setLayerZoomRange=function(Q,ge,Ee){this._checkLoaded();var Pe=this.getLayer(Q);if(!Pe){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot have zoom extent.")));return}Pe.minzoom===ge&&Pe.maxzoom===Ee||(ge!=null&&(Pe.minzoom=ge),Ee!=null&&(Pe.maxzoom=Ee),this._updateLayer(Pe))},X.prototype.setFilter=function(Q,ge,Ee){Ee===void 0&&(Ee={}),this._checkLoaded();var Pe=this.getLayer(Q);if(!Pe){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be filtered.")));return}if(!t.deepEqual(Pe.filter,ge)){if(ge==null){Pe.filter=void 0,this._updateLayer(Pe);return}this._validate(t.validateStyle.filter,"layers."+Pe.id+".filter",ge,null,Ee)||(Pe.filter=t.clone$1(ge),this._updateLayer(Pe))}},X.prototype.getFilter=function(Q){return t.clone$1(this.getLayer(Q).filter)},X.prototype.setLayoutProperty=function(Q,ge,Ee,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer(Q);if(!Ze){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")));return}t.deepEqual(Ze.getLayoutProperty(ge),Ee)||(Ze.setLayoutProperty(ge,Ee,Pe),this._updateLayer(Ze))},X.prototype.getLayoutProperty=function(Q,ge){var Ee=this.getLayer(Q);if(!Ee){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style.")));return}return Ee.getLayoutProperty(ge)},X.prototype.setPaintProperty=function(Q,ge,Ee,Pe){Pe===void 0&&(Pe={}),this._checkLoaded();var Ze=this.getLayer(Q);if(!Ze){this.fire(new t.ErrorEvent(new Error("The layer '"+Q+"' does not exist in the map's style and cannot be styled.")));return}if(!t.deepEqual(Ze.getPaintProperty(ge),Ee)){var ft=Ze.setPaintProperty(ge,Ee,Pe);ft&&this._updateLayer(Ze),this._changed=!0,this._updatedPaintProps[Q]=!0}},X.prototype.getPaintProperty=function(Q,ge){return this.getLayer(Q).getPaintProperty(ge)},X.prototype.setFeatureState=function(Q,ge){this._checkLoaded();var Ee=Q.source,Pe=Q.sourceLayer,Ze=this.sourceCaches[Ee];if(Ze===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var ft=Ze.getSource().type;if(ft==="geojson"&&Pe){this.fire(new t.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));return}if(ft==="vector"&&!Pe){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Ze.setFeatureState(Pe,Q.id,ge)},X.prototype.removeFeatureState=function(Q,ge){this._checkLoaded();var Ee=Q.source,Pe=this.sourceCaches[Ee];if(Pe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+Ee+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type,ft=Ze==="vector"?Q.sourceLayer:void 0;if(Ze==="vector"&&!ft){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}if(ge&&typeof Q.id!="string"&&typeof Q.id!="number"){this.fire(new t.ErrorEvent(new Error("A feature id is requred to remove its specific state property.")));return}Pe.removeFeatureState(ft,Q.id,ge)},X.prototype.getFeatureState=function(Q){this._checkLoaded();var ge=Q.source,Ee=Q.sourceLayer,Pe=this.sourceCaches[ge];if(Pe===void 0){this.fire(new t.ErrorEvent(new Error("The source '"+ge+"' does not exist in the map's style.")));return}var Ze=Pe.getSource().type;if(Ze==="vector"&&!Ee){this.fire(new t.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));return}return Q.id===void 0&&this.fire(new t.ErrorEvent(new Error("The feature id parameter must be provided."))),Pe.getFeatureState(Ee,Q.id)},X.prototype.getTransition=function(){return t.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},X.prototype.serialize=function(){return t.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:t.mapObject(this.sourceCaches,function(Q){return Q.serialize()}),layers:this._serializeLayers(this._order)},function(Q){return Q!==void 0})},X.prototype._updateLayer=function(Q){this._updatedLayers[Q.id]=!0,Q.source&&!this._updatedSources[Q.source]&&this.sourceCaches[Q.source].getSource().type!=="raster"&&(this._updatedSources[Q.source]="reload",this.sourceCaches[Q.source].pause()),this._changed=!0},X.prototype._flattenAndSortRenderedFeatures=function(Q){for(var ge=this,Ee=function(Wa){return ge._layers[Wa].type==="fill-extrusion"},Pe={},Ze=[],ft=this._order.length-1;ft>=0;ft--){var At=this._order[ft];if(Ee(At)){Pe[At]=ft;for(var Vt=0,$t=Q;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=ir[At];if(Sr)for(var Br=0,Vr=Sr;Br<Vr.length;Br+=1){var Nr=Vr[Br];Ze.push(Nr)}}}}Ze.sort(function(Wa,oi){return oi.intersectionZ-Wa.intersectionZ});for(var Kr=[],hn=this._order.length-1;hn>=0;hn--){var Sn=this._order[hn];if(Ee(Sn))for(var Nn=Ze.length-1;Nn>=0;Nn--){var Qn=Ze[Nn].feature;if(Pe[Qn.layer.id]<hn)break;Kr.push(Qn),Ze.pop()}else for(var ta=0,qn=Q;ta<qn.length;ta+=1){var pa=qn[ta],Ta=pa[Sn];if(Ta)for(var _a=0,ka=Ta;_a<ka.length;_a+=1){var Da=ka[_a];Kr.push(Da.feature)}}}return Kr},X.prototype.queryRenderedFeatures=function(Q,ge,Ee){ge&&ge.filter&&this._validate(t.validateStyle.filter,"queryRenderedFeatures.filter",ge.filter,null,ge);var Pe={};if(ge&&ge.layers){if(!Array.isArray(ge.layers))return this.fire(new t.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var Ze=0,ft=ge.layers;Ze<ft.length;Ze+=1){var At=ft[Ze],Vt=this._layers[At];if(!Vt)return this.fire(new t.ErrorEvent(new Error("The layer '"+At+"' does not exist in the map's style and cannot be queried for features."))),[];Pe[Vt.source]=!0}}var $t=[];ge.availableImages=this._availableImages;for(var ir in this.sourceCaches)ge.layers&&!Pe[ir]||$t.push(ae(this.sourceCaches[ir],this._layers,this._serializedLayers,Q,ge,Ee));return this.placement&&$t.push(ie(this._layers,this._serializedLayers,this.sourceCaches,Q,ge,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures($t)},X.prototype.querySourceFeatures=function(Q,ge){ge&&ge.filter&&this._validate(t.validateStyle.filter,"querySourceFeatures.filter",ge.filter,null,ge);var Ee=this.sourceCaches[Q];return Ee?oe(Ee,ge):[]},X.prototype.addSourceType=function(Q,ge,Ee){if(X.getSourceType(Q))return Ee(new Error('A source type called "'+Q+'" already exists.'));if(X.setSourceType(Q,ge),!ge.workerSourceURL)return Ee(null,null);this.dispatcher.broadcast("loadWorkerSource",{name:Q,url:ge.workerSourceURL},Ee)},X.prototype.getLight=function(){return this.light.getLight()},X.prototype.setLight=function(Q,ge){ge===void 0&&(ge={}),this._checkLoaded();var Ee=this.light.getLight(),Pe=!1;for(var Ze in Q)if(!t.deepEqual(Q[Ze],Ee[Ze])){Pe=!0;break}if(!!Pe){var ft={now:t.browser.now(),transition:t.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(Q,ge),this.light.updateTransitions(ft)}},X.prototype._validate=function(Q,ge,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),Ze&&Ze.validate===!1?!1:io(this,Q.call(t.validateStyle,t.extend({key:ge,style:this.serialize(),value:Ee,styleSpec:t.styleSpec},Pe)))},X.prototype._remove=function(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),t.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(var Q in this._layers){var ge=this._layers[Q];ge.setEventedParent(null)}for(var Ee in this.sourceCaches)this.sourceCaches[Ee].clearTiles(),this.sourceCaches[Ee].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},X.prototype._clearSource=function(Q){this.sourceCaches[Q].clearTiles()},X.prototype._reloadSource=function(Q){this.sourceCaches[Q].resume(),this.sourceCaches[Q].reload()},X.prototype._updateSources=function(Q){for(var ge in this.sourceCaches)this.sourceCaches[ge].update(Q)},X.prototype._generateCollisionBoxes=function(){for(var Q in this.sourceCaches)this._reloadSource(Q)},X.prototype._updatePlacement=function(Q,ge,Ee,Pe,Ze){Ze===void 0&&(Ze=!1);for(var ft=!1,At=!1,Vt={},$t=0,ir=this._order;$t<ir.length;$t+=1){var Sr=ir[$t],Br=this._layers[Sr];if(Br.type==="symbol"){if(!Vt[Br.source]){var Vr=this.sourceCaches[Br.source];Vt[Br.source]=Vr.getRenderableIds(!0).map(function(ta){return Vr.getTileByID(ta)}).sort(function(ta,qn){return qn.tileID.overscaledZ-ta.tileID.overscaledZ||(ta.tileID.isLessThan(qn.tileID)?-1:1)})}var Nr=this.crossTileSymbolIndex.addLayer(Br,Vt[Br.source],Q.center.lng);ft=ft||Nr}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),Ze=Ze||this._layerOrderChanged||Ee===0,(Ze||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(t.browser.now(),Q.zoom))&&(this.pauseablePlacement=new Ya(Q,this._order,Ze,ge,Ee,Pe,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Vt),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(t.browser.now()),At=!0),ft&&this.pauseablePlacement.placement.setStale()),At||ft)for(var Kr=0,hn=this._order;Kr<hn.length;Kr+=1){var Sn=hn[Kr],Nn=this._layers[Sn];Nn.type==="symbol"&&this.placement.updateLayerOpacities(Nn,Vt[Nn.source])}var Qn=!this.pauseablePlacement.isDone()||this.placement.hasTransitions(t.browser.now());return Qn},X.prototype._releaseSymbolFadeTiles=function(){for(var Q in this.sourceCaches)this.sourceCaches[Q].releaseSymbolFadeTiles()},X.prototype.getImages=function(Q,ge,Ee){this.imageManager.getImages(ge.icons,Ee),this._updateTilesForChangedImages();var Pe=this.sourceCaches[ge.source];Pe&&Pe.setDependencies(ge.tileID.key,ge.type,ge.icons)},X.prototype.getGlyphs=function(Q,ge,Ee){this.glyphManager.getGlyphs(ge.stacks,Ee)},X.prototype.getResource=function(Q,ge,Ee){return t.makeRequest(ge,Ee)},X}(t.Evented);ps.getSourceType=ne,ps.setSourceType=te,ps.registerForPluginStateChange=t.registerForPluginStateChange;var Gl=t.createLayout([{name:"a_pos",type:"Int16",components:2}]),ou=`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,Xu=`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`,di=`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Tl="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",sl=`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Yi="uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}",Oo=`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,su=`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`,zs="void main() {gl_FragColor=vec4(1.0);}",Fi="attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}",Wl=`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,to=`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`,Ui=`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,co="uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}",ro="varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}",ws="attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}",Al="varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",df="attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}",ds="uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",gf="attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}",ll=`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,No=`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`,Uf=`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,ul=`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Ys=`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Eu=`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`,Vf=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Hf=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`,Ml=`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Cu=`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`,js=`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Zu=`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`,Yl=`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ku="uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}",mf=`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Lu="uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}",Gf=`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Sl=`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Ju=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Pu=`
#define MAX_LINE_DISTANCE 32767.0
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`,Fs=`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,lu=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`,Qu=`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,yf=`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`,xf=`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Ru="uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}",Wf=`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,bf=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`,gs=`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,jl=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`,Xl=`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,$u=`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`,Os=Oi(ou,Xu),Bo=Oi(di,Tl),Du=Oi(sl,Yi),Xs=Oi(Oo,su),Zs=Oi(zs,Fi),go=Oi(Wl,to),uu=Oi(Ui,co),fu=Oi(ro,ws),kl=Oi(Al,df),Ns=Oi(ds,gf),cu=Oi(ll,No),Zl=Oi(Uf,ul),Iu=Oi(Ys,Eu),hu=Oi(Vf,Hf),El=Oi(Ml,Cu),Yf=Oi(js,Zu),Ts=Oi(Yl,Ku),dc=Oi(mf,Lu),qu=Oi(Gf,Sl),Kl=Oi(Ju,Pu),vu=Oi(Fs,lu),Cl=Oi(Qu,yf),pu=Oi(xf,Ru),_f=Oi(Wf,bf),wf=Oi(gs,jl),gc=Oi(Xl,$u);function Oi(ve,X){var de=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,Q={};return ve=ve.replace(de,function(ge,Ee,Pe,Ze,ft){return Q[ft]=!0,Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),X=X.replace(de,function(ge,Ee,Pe,Ze,ft){var At=Ze==="float"?"vec2":"vec4",Vt=ft.match(/color/)?"color":At;return Q[ft]?Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+At+" a_"+ft+`;
varying `+Pe+" "+Ze+" "+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Vt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+ft+" = unpack_mix_"+Vt+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:Ee==="define"?`
#ifndef HAS_UNIFORM_u_`+ft+`
uniform lowp float u_`+ft+`_t;
attribute `+Pe+" "+At+" a_"+ft+`;
#else
uniform `+Pe+" "+Ze+" u_"+ft+`;
#endif
`:Vt==="vec4"?`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = a_"+ft+`;
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+ft+`
    `+Pe+" "+Ze+" "+ft+" = unpack_mix_"+Vt+"(a_"+ft+", u_"+ft+`_t);
#else
    `+Pe+" "+Ze+" "+ft+" = u_"+ft+`;
#endif
`}),{fragmentSource:ve,vertexSource:X}}var Jl=Object.freeze({__proto__:null,prelude:Os,background:Bo,backgroundPattern:Du,circle:Xs,clippingMask:Zs,heatmap:go,heatmapTexture:uu,collisionBox:fu,collisionCircle:kl,debug:Ns,fill:cu,fillOutline:Zl,fillOutlinePattern:Iu,fillPattern:hu,fillExtrusion:El,fillExtrusionPattern:Yf,hillshadePrepare:Ts,hillshade:dc,line:qu,lineGradient:Kl,linePattern:vu,lineSDF:Cl,raster:pu,symbolIcon:_f,symbolSDF:wf,symbolTextAndIcon:gc}),Ll=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};Ll.prototype.bind=function(X,de,Q,ge,Ee,Pe,Ze,ft){this.context=X;for(var At=this.boundPaintVertexBuffers.length!==ge.length,Vt=0;!At&&Vt<ge.length;Vt++)this.boundPaintVertexBuffers[Vt]!==ge[Vt]&&(At=!0);var $t=!this.vao||this.boundProgram!==de||this.boundLayoutVertexBuffer!==Q||At||this.boundIndexBuffer!==Ee||this.boundVertexOffset!==Pe||this.boundDynamicVertexBuffer!==Ze||this.boundDynamicVertexBuffer2!==ft;!X.extVertexArrayObject||$t?this.freshBind(de,Q,ge,Ee,Pe,Ze,ft):(X.bindVertexArrayOES.set(this.vao),Ze&&Ze.bind(),Ee&&Ee.dynamicDraw&&Ee.bind(),ft&&ft.bind())},Ll.prototype.freshBind=function(X,de,Q,ge,Ee,Pe,Ze){var ft,At=X.numAttributes,Vt=this.context,$t=Vt.gl;if(Vt.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Vt.extVertexArrayObject.createVertexArrayOES(),Vt.bindVertexArrayOES.set(this.vao),ft=0,this.boundProgram=X,this.boundLayoutVertexBuffer=de,this.boundPaintVertexBuffers=Q,this.boundIndexBuffer=ge,this.boundVertexOffset=Ee,this.boundDynamicVertexBuffer=Pe,this.boundDynamicVertexBuffer2=Ze;else{ft=Vt.currentNumAttributes||0;for(var ir=At;ir<ft;ir++)$t.disableVertexAttribArray(ir)}de.enableAttributes($t,X);for(var Sr=0,Br=Q;Sr<Br.length;Sr+=1){var Vr=Br[Sr];Vr.enableAttributes($t,X)}Pe&&Pe.enableAttributes($t,X),Ze&&Ze.enableAttributes($t,X),de.bind(),de.setVertexAttribPointers($t,X,Ee);for(var Nr=0,Kr=Q;Nr<Kr.length;Nr+=1){var hn=Kr[Nr];hn.bind(),hn.setVertexAttribPointers($t,X,Ee)}Pe&&(Pe.bind(),Pe.setVertexAttribPointers($t,X,Ee)),ge&&ge.bind(),Ze&&(Ze.bind(),Ze.setVertexAttribPointers($t,X,Ee)),Vt.currentNumAttributes=At},Ll.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var ms=function(X,de,Q,ge,Ee){var Pe=X.gl;this.program=Pe.createProgram();var Ze=Q?Q.defines():[];Ee&&Ze.push("#define OVERDRAW_INSPECTOR;");var ft=Ze.concat(Os.fragmentSource,de.fragmentSource).join(`
`),At=Ze.concat(Os.vertexSource,de.vertexSource).join(`
`),Vt=Pe.createShader(Pe.FRAGMENT_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource(Vt,ft),Pe.compileShader(Vt),Pe.attachShader(this.program,Vt);var $t=Pe.createShader(Pe.VERTEX_SHADER);if(Pe.isContextLost()){this.failedToCreate=!0;return}Pe.shaderSource($t,At),Pe.compileShader($t),Pe.attachShader(this.program,$t);for(var ir=Q?Q.layoutAttributes:[],Sr=0;Sr<ir.length;Sr++)Pe.bindAttribLocation(this.program,Sr,ir[Sr].name);Pe.linkProgram(this.program),Pe.deleteShader($t),Pe.deleteShader(Vt),this.numAttributes=Pe.getProgramParameter(this.program,Pe.ACTIVE_ATTRIBUTES),this.attributes={};for(var Br={},Vr=0;Vr<this.numAttributes;Vr++){var Nr=Pe.getActiveAttrib(this.program,Vr);Nr&&(this.attributes[Nr.name]=Pe.getAttribLocation(this.program,Nr.name))}for(var Kr=Pe.getProgramParameter(this.program,Pe.ACTIVE_UNIFORMS),hn=0;hn<Kr;hn++){var Sn=Pe.getActiveUniform(this.program,hn);Sn&&(Br[Sn.name]=Pe.getUniformLocation(this.program,Sn.name))}this.fixedUniforms=ge(X,Br),this.binderUniforms=Q?Q.getUniforms(X,Br):[]};ms.prototype.draw=function(X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt,$t,ir,Sr,Br,Vr,Nr){var Kr,hn=X.gl;if(!this.failedToCreate){X.program.set(this.program),X.setDepthMode(Q),X.setStencilMode(ge),X.setColorMode(Ee),X.setCullFace(Pe);for(var Sn in this.fixedUniforms)this.fixedUniforms[Sn].set(Ze[Sn]);Br&&Br.setUniforms(X,this.binderUniforms,ir,{zoom:Sr});for(var Nn=(Kr={},Kr[hn.LINES]=2,Kr[hn.TRIANGLES]=3,Kr[hn.LINE_STRIP]=1,Kr)[de],Qn=0,ta=$t.get();Qn<ta.length;Qn+=1){var qn=ta[Qn],pa=qn.vaos||(qn.vaos={}),Ta=pa[ft]||(pa[ft]=new Ll);Ta.bind(X,this,At,Br?Br.getPaintVertexBuffers():[],Vt,qn.vertexOffset,Vr,Nr),hn.drawElements(de,qn.primitiveLength*Nn,hn.UNSIGNED_SHORT,qn.primitiveOffset*Nn*2)}}};function As(ve,X,de){var Q=1/ga(de,1,X.transform.tileZoom),ge=Math.pow(2,de.tileID.overscaledZ),Ee=de.tileSize*Math.pow(2,X.transform.tileZoom)/ge,Pe=Ee*(de.tileID.canonical.x+de.tileID.wrap*ge),Ze=Ee*de.tileID.canonical.y;return{u_image:0,u_texsize:de.imageAtlasTexture.size,u_scale:[Q,ve.fromScale,ve.toScale],u_fade:ve.t,u_pixel_coord_upper:[Pe>>16,Ze>>16],u_pixel_coord_lower:[Pe&65535,Ze&65535]}}function du(ve,X,de,Q){var ge=de.imageManager.getPattern(ve.from.toString()),Ee=de.imageManager.getPattern(ve.to.toString()),Pe=de.imageManager.getPixelSize(),Ze=Pe.width,ft=Pe.height,At=Math.pow(2,Q.tileID.overscaledZ),Vt=Q.tileSize*Math.pow(2,de.transform.tileZoom)/At,$t=Vt*(Q.tileID.canonical.x+Q.tileID.wrap*At),ir=Vt*Q.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:ge.tl,u_pattern_br_a:ge.br,u_pattern_tl_b:Ee.tl,u_pattern_br_b:Ee.br,u_texsize:[Ze,ft],u_mix:X.t,u_pattern_size_a:ge.displaySize,u_pattern_size_b:Ee.displaySize,u_scale_a:X.fromScale,u_scale_b:X.toScale,u_tile_units_to_pixels:1/ga(Q,1,de.transform.tileZoom),u_pixel_coord_upper:[$t>>16,ir>>16],u_pixel_coord_lower:[$t&65535,ir&65535]}}var mo=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_lightpos:new t.Uniform3f(ve,X.u_lightpos),u_lightintensity:new t.Uniform1f(ve,X.u_lightintensity),u_lightcolor:new t.Uniform3f(ve,X.u_lightcolor),u_vertical_gradient:new t.Uniform1f(ve,X.u_vertical_gradient),u_opacity:new t.Uniform1f(ve,X.u_opacity)}},Tf=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_lightpos:new t.Uniform3f(ve,X.u_lightpos),u_lightintensity:new t.Uniform1f(ve,X.u_lightintensity),u_lightcolor:new t.Uniform3f(ve,X.u_lightcolor),u_vertical_gradient:new t.Uniform1f(ve,X.u_vertical_gradient),u_height_factor:new t.Uniform1f(ve,X.u_height_factor),u_image:new t.Uniform1i(ve,X.u_image),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade),u_opacity:new t.Uniform1f(ve,X.u_opacity)}},Ms=function(ve,X,de,Q){var ge=X.style.light,Ee=ge.properties.get("position"),Pe=[Ee.x,Ee.y,Ee.z],Ze=t.create$1();ge.properties.get("anchor")==="viewport"&&t.fromRotation(Ze,-X.transform.angle),t.transformMat3(Pe,Pe,Ze);var ft=ge.properties.get("color");return{u_matrix:ve,u_lightpos:Pe,u_lightintensity:ge.properties.get("intensity"),u_lightcolor:[ft.r,ft.g,ft.b],u_vertical_gradient:+de,u_opacity:Q}},fl=function(ve,X,de,Q,ge,Ee,Pe){return t.extend(Ms(ve,X,de,Q),As(Ee,X,Pe),{u_height_factor:-Math.pow(2,ge.overscaledZ)/Pe.tileSize/8})},cl=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},Ks=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_image:new t.Uniform1i(ve,X.u_image),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade)}},Ss=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_world:new t.Uniform2f(ve,X.u_world)}},ji=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_world:new t.Uniform2f(ve,X.u_world),u_image:new t.Uniform1i(ve,X.u_image),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade)}},Uo=function(ve){return{u_matrix:ve}},ks=function(ve,X,de,Q){return t.extend(Uo(ve),As(de,X,Q))},Af=function(ve,X){return{u_matrix:ve,u_world:X}},zu=function(ve,X,de,Q,ge){return t.extend(ks(ve,X,de,Q),{u_world:ge})},Mf=function(ve,X){return{u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_scale_with_map:new t.Uniform1i(ve,X.u_scale_with_map),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_extrude_scale:new t.Uniform2f(ve,X.u_extrude_scale),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},xt=function(ve,X,de,Q){var ge=ve.transform,Ee,Pe;if(Q.paint.get("circle-pitch-alignment")==="map"){var Ze=ga(de,1,ge.zoom);Ee=!0,Pe=[Ze,Ze]}else Ee=!1,Pe=ge.pixelsToGLUnits;return{u_camera_to_center_distance:ge.cameraToCenterDistance,u_scale_with_map:+(Q.paint.get("circle-pitch-scale")==="map"),u_matrix:ve.translatePosMatrix(X.posMatrix,de,Q.paint.get("circle-translate"),Q.paint.get("circle-translate-anchor")),u_pitch_with_map:+Ee,u_device_pixel_ratio:t.browser.devicePixelRatio,u_extrude_scale:Pe}},It=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pixels_to_tile_units:new t.Uniform1f(ve,X.u_pixels_to_tile_units),u_extrude_scale:new t.Uniform2f(ve,X.u_extrude_scale),u_overscale_factor:new t.Uniform1f(ve,X.u_overscale_factor)}},nr=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_inv_matrix:new t.UniformMatrix4f(ve,X.u_inv_matrix),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_viewport_size:new t.Uniform2f(ve,X.u_viewport_size)}},Jt=function(ve,X,de){var Q=ga(de,1,X.zoom),ge=Math.pow(2,X.zoom-de.tileID.overscaledZ),Ee=de.tileID.overscaleFactor();return{u_matrix:ve,u_camera_to_center_distance:X.cameraToCenterDistance,u_pixels_to_tile_units:Q,u_extrude_scale:[X.pixelsToGLUnits[0]/(Q*ge),X.pixelsToGLUnits[1]/(Q*ge)],u_overscale_factor:Ee}},Cr=function(ve,X,de){return{u_matrix:ve,u_inv_matrix:X,u_camera_to_center_distance:de.cameraToCenterDistance,u_viewport_size:[de.width,de.height]}},an=function(ve,X){return{u_color:new t.UniformColor(ve,X.u_color),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_overlay:new t.Uniform1i(ve,X.u_overlay),u_overlay_scale:new t.Uniform1f(ve,X.u_overlay_scale)}},dn=function(ve,X,de){return de===void 0&&(de=1),{u_matrix:ve,u_color:X,u_overlay:0,u_overlay_scale:de}},Tn=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},Cn=function(ve){return{u_matrix:ve}},Gn=function(ve,X){return{u_extrude_scale:new t.Uniform1f(ve,X.u_extrude_scale),u_intensity:new t.Uniform1f(ve,X.u_intensity),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix)}},xn=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_world:new t.Uniform2f(ve,X.u_world),u_image:new t.Uniform1i(ve,X.u_image),u_color_ramp:new t.Uniform1i(ve,X.u_color_ramp),u_opacity:new t.Uniform1f(ve,X.u_opacity)}},In=function(ve,X,de,Q){return{u_matrix:ve,u_extrude_scale:ga(X,1,de),u_intensity:Q}},Ln=function(ve,X,de,Q){var ge=t.create();t.ortho(ge,0,ve.width,ve.height,0,0,1);var Ee=ve.context.gl;return{u_matrix:ge,u_world:[Ee.drawingBufferWidth,Ee.drawingBufferHeight],u_image:de,u_color_ramp:Q,u_opacity:X.paint.get("heatmap-opacity")}},jn=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_image:new t.Uniform1i(ve,X.u_image),u_latrange:new t.Uniform2f(ve,X.u_latrange),u_light:new t.Uniform2f(ve,X.u_light),u_shadow:new t.UniformColor(ve,X.u_shadow),u_highlight:new t.UniformColor(ve,X.u_highlight),u_accent:new t.UniformColor(ve,X.u_accent)}},ea=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_image:new t.Uniform1i(ve,X.u_image),u_dimension:new t.Uniform2f(ve,X.u_dimension),u_zoom:new t.Uniform1f(ve,X.u_zoom),u_maxzoom:new t.Uniform1f(ve,X.u_maxzoom),u_unpack:new t.Uniform4f(ve,X.u_unpack)}},Ba=function(ve,X,de){var Q=de.paint.get("hillshade-shadow-color"),ge=de.paint.get("hillshade-highlight-color"),Ee=de.paint.get("hillshade-accent-color"),Pe=de.paint.get("hillshade-illumination-direction")*(Math.PI/180);de.paint.get("hillshade-illumination-anchor")==="viewport"&&(Pe-=ve.transform.angle);var Ze=!ve.options.moving;return{u_matrix:ve.transform.calculatePosMatrix(X.tileID.toUnwrapped(),Ze),u_image:0,u_latrange:Ua(ve,X.tileID),u_light:[de.paint.get("hillshade-exaggeration"),Pe],u_shadow:Q,u_highlight:ge,u_accent:Ee}},Ra=function(ve,X,de){var Q=X.stride,ge=t.create();return t.ortho(ge,0,t.EXTENT,-t.EXTENT,0,0,1),t.translate(ge,ge,[0,-t.EXTENT,0]),{u_matrix:ge,u_image:1,u_dimension:[Q,Q],u_zoom:ve.overscaledZ,u_maxzoom:de,u_unpack:X.getUnpackVector()}};function Ua(ve,X){var de=Math.pow(2,X.canonical.z),Q=X.canonical.y;return[new t.MercatorCoordinate(0,Q/de).toLngLat().lat,new t.MercatorCoordinate(0,(Q+1)/de).toLngLat().lat]}var Va=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels)}},$n=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels),u_image:new t.Uniform1i(ve,X.u_image)}},da=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_image:new t.Uniform1i(ve,X.u_image),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels),u_scale:new t.Uniform3f(ve,X.u_scale),u_fade:new t.Uniform1f(ve,X.u_fade)}},ja=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_ratio:new t.Uniform1f(ve,X.u_ratio),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_units_to_pixels:new t.Uniform2f(ve,X.u_units_to_pixels),u_patternscale_a:new t.Uniform2f(ve,X.u_patternscale_a),u_patternscale_b:new t.Uniform2f(ve,X.u_patternscale_b),u_sdfgamma:new t.Uniform1f(ve,X.u_sdfgamma),u_image:new t.Uniform1i(ve,X.u_image),u_tex_y_a:new t.Uniform1f(ve,X.u_tex_y_a),u_tex_y_b:new t.Uniform1f(ve,X.u_tex_y_b),u_mix:new t.Uniform1f(ve,X.u_mix)}},qa=function(ve,X,de){var Q=ve.transform;return{u_matrix:ui(ve,X,de),u_ratio:1/ga(X,1,Q.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_units_to_pixels:[1/Q.pixelsToGLUnits[0],1/Q.pixelsToGLUnits[1]]}},yi=function(ve,X,de){return t.extend(qa(ve,X,de),{u_image:0})},xi=function(ve,X,de,Q){var ge=ve.transform,Ee=ki(X,ge);return{u_matrix:ui(ve,X,de),u_texsize:X.imageAtlasTexture.size,u_ratio:1/ga(X,1,ge.zoom),u_device_pixel_ratio:t.browser.devicePixelRatio,u_image:0,u_scale:[Ee,Q.fromScale,Q.toScale],u_fade:Q.t,u_units_to_pixels:[1/ge.pixelsToGLUnits[0],1/ge.pixelsToGLUnits[1]]}},_i=function(ve,X,de,Q,ge){var Ee=ve.transform,Pe=ve.lineAtlas,Ze=ki(X,Ee),ft=de.layout.get("line-cap")==="round",At=Pe.getDash(Q.from,ft),Vt=Pe.getDash(Q.to,ft),$t=At.width*ge.fromScale,ir=Vt.width*ge.toScale;return t.extend(qa(ve,X,de),{u_patternscale_a:[Ze/$t,-At.height/2],u_patternscale_b:[Ze/ir,-Vt.height/2],u_sdfgamma:Pe.width/(Math.min($t,ir)*256*t.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:At.y,u_tex_y_b:Vt.y,u_mix:ge.t})};function ki(ve,X){return 1/ga(ve,1,X.tileZoom)}function ui(ve,X,de){return ve.translatePosMatrix(X.tileID.posMatrix,X,de.paint.get("line-translate"),de.paint.get("line-translate-anchor"))}var Eo=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_tl_parent:new t.Uniform2f(ve,X.u_tl_parent),u_scale_parent:new t.Uniform1f(ve,X.u_scale_parent),u_buffer_scale:new t.Uniform1f(ve,X.u_buffer_scale),u_fade_t:new t.Uniform1f(ve,X.u_fade_t),u_opacity:new t.Uniform1f(ve,X.u_opacity),u_image0:new t.Uniform1i(ve,X.u_image0),u_image1:new t.Uniform1i(ve,X.u_image1),u_brightness_low:new t.Uniform1f(ve,X.u_brightness_low),u_brightness_high:new t.Uniform1f(ve,X.u_brightness_high),u_saturation_factor:new t.Uniform1f(ve,X.u_saturation_factor),u_contrast_factor:new t.Uniform1f(ve,X.u_contrast_factor),u_spin_weights:new t.Uniform3f(ve,X.u_spin_weights)}},oo=function(ve,X,de,Q,ge){return{u_matrix:ve,u_tl_parent:X,u_scale_parent:de,u_buffer_scale:1,u_fade_t:Q.mix,u_opacity:Q.opacity*ge.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ge.paint.get("raster-brightness-min"),u_brightness_high:ge.paint.get("raster-brightness-max"),u_saturation_factor:wi(ge.paint.get("raster-saturation")),u_contrast_factor:ma(ge.paint.get("raster-contrast")),u_spin_weights:Qa(ge.paint.get("raster-hue-rotate"))}};function Qa(ve){ve*=Math.PI/180;var X=Math.sin(ve),de=Math.cos(ve);return[(2*de+1)/3,(-Math.sqrt(3)*X-de+1)/3,(Math.sqrt(3)*X-de+1)/3]}function ma(ve){return ve>0?1/(1-ve):1+ve}function wi(ve){return ve>0?1-1/(1.001-ve):-ve}var yo=function(ve,X){return{u_is_size_zoom_constant:new t.Uniform1i(ve,X.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,X.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,X.u_size_t),u_size:new t.Uniform1f(ve,X.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,X.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,X.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,X.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,X.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,X.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,X.u_coord_matrix),u_is_text:new t.Uniform1i(ve,X.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_texture:new t.Uniform1i(ve,X.u_texture)}},Ao=function(ve,X){return{u_is_size_zoom_constant:new t.Uniform1i(ve,X.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,X.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,X.u_size_t),u_size:new t.Uniform1f(ve,X.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,X.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,X.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,X.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,X.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,X.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,X.u_coord_matrix),u_is_text:new t.Uniform1i(ve,X.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_texture:new t.Uniform1i(ve,X.u_texture),u_gamma_scale:new t.Uniform1f(ve,X.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(ve,X.u_is_halo)}},Es=function(ve,X){return{u_is_size_zoom_constant:new t.Uniform1i(ve,X.u_is_size_zoom_constant),u_is_size_feature_constant:new t.Uniform1i(ve,X.u_is_size_feature_constant),u_size_t:new t.Uniform1f(ve,X.u_size_t),u_size:new t.Uniform1f(ve,X.u_size),u_camera_to_center_distance:new t.Uniform1f(ve,X.u_camera_to_center_distance),u_pitch:new t.Uniform1f(ve,X.u_pitch),u_rotate_symbol:new t.Uniform1i(ve,X.u_rotate_symbol),u_aspect_ratio:new t.Uniform1f(ve,X.u_aspect_ratio),u_fade_change:new t.Uniform1f(ve,X.u_fade_change),u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_label_plane_matrix:new t.UniformMatrix4f(ve,X.u_label_plane_matrix),u_coord_matrix:new t.UniformMatrix4f(ve,X.u_coord_matrix),u_is_text:new t.Uniform1i(ve,X.u_is_text),u_pitch_with_map:new t.Uniform1i(ve,X.u_pitch_with_map),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_texsize_icon:new t.Uniform2f(ve,X.u_texsize_icon),u_texture:new t.Uniform1i(ve,X.u_texture),u_texture_icon:new t.Uniform1i(ve,X.u_texture_icon),u_gamma_scale:new t.Uniform1f(ve,X.u_gamma_scale),u_device_pixel_ratio:new t.Uniform1f(ve,X.u_device_pixel_ratio),u_is_halo:new t.Uniform1i(ve,X.u_is_halo)}},Js=function(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At){var Vt=ge.transform;return{u_is_size_zoom_constant:+(ve==="constant"||ve==="source"),u_is_size_feature_constant:+(ve==="constant"||ve==="camera"),u_size_t:X?X.uSizeT:0,u_size:X?X.uSize:0,u_camera_to_center_distance:Vt.cameraToCenterDistance,u_pitch:Vt.pitch/360*2*Math.PI,u_rotate_symbol:+de,u_aspect_ratio:Vt.width/Vt.height,u_fade_change:ge.options.fadeDuration?ge.symbolFadeChange:1,u_matrix:Ee,u_label_plane_matrix:Pe,u_coord_matrix:Ze,u_is_text:+ft,u_pitch_with_map:+Q,u_texsize:At,u_texture:0}},$o=function(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt){var $t=ge.transform;return t.extend(Js(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At),{u_gamma_scale:Q?Math.cos($t._pitch)*$t.cameraToCenterDistance:1,u_device_pixel_ratio:t.browser.devicePixelRatio,u_is_halo:+Vt})},Pl=function(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At){return t.extend($o(ve,X,de,Q,ge,Ee,Pe,Ze,!0,ft,!0),{u_texsize_icon:At,u_texture_icon:1})},Bs=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_opacity:new t.Uniform1f(ve,X.u_opacity),u_color:new t.UniformColor(ve,X.u_color)}},Cs=function(ve,X){return{u_matrix:new t.UniformMatrix4f(ve,X.u_matrix),u_opacity:new t.Uniform1f(ve,X.u_opacity),u_image:new t.Uniform1i(ve,X.u_image),u_pattern_tl_a:new t.Uniform2f(ve,X.u_pattern_tl_a),u_pattern_br_a:new t.Uniform2f(ve,X.u_pattern_br_a),u_pattern_tl_b:new t.Uniform2f(ve,X.u_pattern_tl_b),u_pattern_br_b:new t.Uniform2f(ve,X.u_pattern_br_b),u_texsize:new t.Uniform2f(ve,X.u_texsize),u_mix:new t.Uniform1f(ve,X.u_mix),u_pattern_size_a:new t.Uniform2f(ve,X.u_pattern_size_a),u_pattern_size_b:new t.Uniform2f(ve,X.u_pattern_size_b),u_scale_a:new t.Uniform1f(ve,X.u_scale_a),u_scale_b:new t.Uniform1f(ve,X.u_scale_b),u_pixel_coord_upper:new t.Uniform2f(ve,X.u_pixel_coord_upper),u_pixel_coord_lower:new t.Uniform2f(ve,X.u_pixel_coord_lower),u_tile_units_to_pixels:new t.Uniform1f(ve,X.u_tile_units_to_pixels)}},Co=function(ve,X,de){return{u_matrix:ve,u_opacity:X,u_color:de}},Fu=function(ve,X,de,Q,ge,Ee){return t.extend(du(Q,Ee,de,ge),{u_matrix:ve,u_opacity:X})},ef={fillExtrusion:mo,fillExtrusionPattern:Tf,fill:cl,fillPattern:Ks,fillOutline:Ss,fillOutlinePattern:ji,circle:Mf,collisionBox:It,collisionCircle:nr,debug:an,clippingMask:Tn,heatmap:Gn,heatmapTexture:xn,hillshade:jn,hillshadePrepare:ea,line:Va,lineGradient:$n,linePattern:da,lineSDF:ja,raster:Eo,symbolIcon:yo,symbolSDF:Ao,symbolTextAndIcon:Es,background:Bs,backgroundPattern:Cs},Ls;function Sf(ve,X,de,Q,ge,Ee,Pe){for(var Ze=ve.context,ft=Ze.gl,At=ve.useProgram("collisionBox"),Vt=[],$t=0,ir=0,Sr=0;Sr<Q.length;Sr++){var Br=Q[Sr],Vr=X.getTile(Br),Nr=Vr.getBucket(de);if(!!Nr){var Kr=Br.posMatrix;(ge[0]!==0||ge[1]!==0)&&(Kr=ve.translatePosMatrix(Br.posMatrix,Vr,ge,Ee));var hn=Pe?Nr.textCollisionBox:Nr.iconCollisionBox,Sn=Nr.collisionCircleArray;if(Sn.length>0){var Nn=t.create(),Qn=Kr;t.mul(Nn,Nr.placementInvProjMatrix,ve.transform.glCoordMatrix),t.mul(Nn,Nn,Nr.placementViewportMatrix),Vt.push({circleArray:Sn,circleOffset:ir,transform:Qn,invTransform:Nn}),$t+=Sn.length/4,ir=$t}!hn||At.draw(Ze,ft.LINES,or.disabled,kr.disabled,ve.colorModeForRenderPass(),je.disabled,Jt(Kr,ve.transform,Vr),de.id,hn.layoutVertexBuffer,hn.indexBuffer,hn.segments,null,ve.transform.zoom,null,null,hn.collisionVertexBuffer)}}if(!(!Pe||!Vt.length)){var ta=ve.useProgram("collisionCircle"),qn=new t.StructArrayLayout2f1f2i16;qn.resize($t*4),qn._trim();for(var pa=0,Ta=0,_a=Vt;Ta<_a.length;Ta+=1)for(var ka=_a[Ta],Da=0;Da<ka.circleArray.length/4;Da++){var Wa=Da*4,oi=ka.circleArray[Wa+0],Di=ka.circleArray[Wa+1],ci=ka.circleArray[Wa+2],gi=ka.circleArray[Wa+3];qn.emplace(pa++,oi,Di,ci,gi,0),qn.emplace(pa++,oi,Di,ci,gi,1),qn.emplace(pa++,oi,Di,ci,gi,2),qn.emplace(pa++,oi,Di,ci,gi,3)}(!Ls||Ls.length<$t*2)&&(Ls=Ou($t));for(var Ha=Ze.createIndexBuffer(Ls,!0),Ii=Ze.createVertexBuffer(qn,t.collisionCircleLayout.members,!0),Bi=0,Gi=Vt;Bi<Gi.length;Bi+=1){var Ai=Gi[Bi],qi=Cr(Ai.transform,Ai.invTransform,ve.transform);ta.draw(Ze,ft.TRIANGLES,or.disabled,kr.disabled,ve.colorModeForRenderPass(),je.disabled,qi,de.id,Ii,Ha,t.SegmentVector.simpleSegment(0,Ai.circleOffset*2,Ai.circleArray.length,Ai.circleArray.length/2),null,ve.transform.zoom,null,null,null)}Ii.destroy(),Ha.destroy()}}function Ou(ve){var X=ve*2,de=new t.StructArrayLayout3ui6;de.resize(X),de._trim();for(var Q=0;Q<X;Q++){var ge=Q*6;de.uint16[ge+0]=Q*4+0,de.uint16[ge+1]=Q*4+1,de.uint16[ge+2]=Q*4+2,de.uint16[ge+3]=Q*4+2,de.uint16[ge+4]=Q*4+3,de.uint16[ge+5]=Q*4+0}return de}var mh=t.identity(new Float32Array(16));function jf(ve,X,de,Q,ge){if(ve.renderPass==="translucent"){var Ee=kr.disabled,Pe=ve.colorModeForRenderPass(),Ze=de.layout.get("text-variable-anchor");Ze&&Xf(Q,ve,de,X,de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),ge),de.paint.get("icon-opacity").constantOr(1)!==0&&Zf(ve,X,de,Q,!1,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),de.layout.get("icon-rotation-alignment"),de.layout.get("icon-pitch-alignment"),de.layout.get("icon-keep-upright"),Ee,Pe),de.paint.get("text-opacity").constantOr(1)!==0&&Zf(ve,X,de,Q,!0,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),de.layout.get("text-rotation-alignment"),de.layout.get("text-pitch-alignment"),de.layout.get("text-keep-upright"),Ee,Pe),X.map.showCollisionBoxes&&(Sf(ve,X,de,Q,de.paint.get("text-translate"),de.paint.get("text-translate-anchor"),!0),Sf(ve,X,de,Q,de.paint.get("icon-translate"),de.paint.get("icon-translate-anchor"),!1))}}function kf(ve,X,de,Q,ge,Ee){var Pe=t.getAnchorAlignment(ve),Ze=Pe.horizontalAlign,ft=Pe.verticalAlign,At=-(Ze-.5)*X,Vt=-(ft-.5)*de,$t=t.evaluateVariableOffset(ve,Q);return new t.Point((At/ge+$t[0])*Ee,(Vt/ge+$t[1])*Ee)}function Xf(ve,X,de,Q,ge,Ee,Pe){for(var Ze=X.transform,ft=ge==="map",At=Ee==="map",Vt=0,$t=ve;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=Q.getTile(ir),Br=Sr.getBucket(de);if(!(!Br||!Br.text||!Br.text.segments.get().length)){var Vr=Br.textSizeData,Nr=t.evaluateSizeForZoom(Vr,Ze.zoom),Kr=ga(Sr,1,X.transform.zoom),hn=Xr(ir.posMatrix,At,ft,X.transform,Kr),Sn=de.layout.get("icon-text-fit")!=="none"&&Br.hasIconData();if(Nr){var Nn=Math.pow(2,Ze.zoom-Sr.tileID.overscaledZ);Qs(Br,ft,At,Pe,t.symbolSize,Ze,hn,ir.posMatrix,Nn,Nr,Sn)}}}}function Qs(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt){var $t=ve.text.placedSymbolArray,ir=ve.text.dynamicLayoutVertexArray,Sr=ve.icon.dynamicLayoutVertexArray,Br={};ir.clear();for(var Vr=0;Vr<$t.length;Vr++){var Nr=$t.get(Vr),Kr=ve.allowVerticalPlacement&&!Nr.placedOrientation,hn=!Nr.hidden&&Nr.crossTileID&&!Kr?Q[Nr.crossTileID]:null;if(!hn)ha(Nr.numGlyphs,ir);else{var Sn=new t.Point(Nr.anchorX,Nr.anchorY),Nn=kn(Sn,de?Ze:Pe),Qn=ra(Ee.cameraToCenterDistance,Nn.signedDistanceFromCamera),ta=ge.evaluateSizeForFeature(ve.textSizeData,At,Nr)*Qn/t.ONE_EM;de&&(ta*=ve.tilePixelRatio/ft);for(var qn=hn.width,pa=hn.height,Ta=hn.anchor,_a=hn.textOffset,ka=hn.textBoxScale,Da=kf(Ta,qn,pa,_a,ka,ta),Wa=de?kn(Sn.add(Da),Pe).point:Nn.point.add(X?Da.rotate(-Ee.angle):Da),oi=ve.allowVerticalPlacement&&Nr.placedOrientation===t.WritingMode.vertical?Math.PI/2:0,Di=0;Di<Nr.numGlyphs;Di++)t.addDynamicAttributes(ir,Wa,oi);Vt&&Nr.associatedIconIndex>=0&&(Br[Nr.associatedIconIndex]={shiftedAnchor:Wa,angle:oi})}}if(Vt){Sr.clear();for(var ci=ve.icon.placedSymbolArray,gi=0;gi<ci.length;gi++){var Ha=ci.get(gi);if(Ha.hidden)ha(Ha.numGlyphs,Sr);else{var Ii=Br[gi];if(!Ii)ha(Ha.numGlyphs,Sr);else for(var Bi=0;Bi<Ha.numGlyphs;Bi++)t.addDynamicAttributes(Sr,Ii.shiftedAnchor,Ii.angle)}}ve.icon.dynamicLayoutVertexBuffer.updateData(Sr)}ve.text.dynamicLayoutVertexBuffer.updateData(ir)}function mc(ve,X,de){return de.iconsInText&&X?"symbolTextAndIcon":ve?"symbolSDF":"symbolIcon"}function Zf(ve,X,de,Q,ge,Ee,Pe,Ze,ft,At,Vt,$t){for(var ir=ve.context,Sr=ir.gl,Br=ve.transform,Vr=Ze==="map",Nr=ft==="map",Kr=Vr&&de.layout.get("symbol-placement")!=="point",hn=Vr&&!Nr&&!Kr,Sn=de.layout.get("symbol-sort-key").constantOr(1)!==void 0,Nn=ve.depthModeForSublayer(0,or.ReadOnly),Qn=de.layout.get("text-variable-anchor"),ta=[],qn=0,pa=Q;qn<pa.length;qn+=1){var Ta=pa[qn],_a=X.getTile(Ta),ka=_a.getBucket(de);if(!!ka){var Da=ge?ka.text:ka.icon;if(!(!Da||!Da.segments.get().length)){var Wa=Da.programConfigurations.get(de.id),oi=ge||ka.sdfIcons,Di=ge?ka.textSizeData:ka.iconSizeData,ci=Nr||Br.pitch!==0,gi=ve.useProgram(mc(oi,ge,ka),Wa),Ha=t.evaluateSizeForZoom(Di,Br.zoom),Ii=void 0,Bi=[0,0],Gi=void 0,Ai=void 0,qi=null,li=void 0;if(ge){if(Gi=_a.glyphAtlasTexture,Ai=Sr.LINEAR,Ii=_a.glyphAtlasTexture.size,ka.iconsInText){Bi=_a.imageAtlasTexture.size,qi=_a.imageAtlasTexture;var Mi=Di.kind==="composite"||Di.kind==="camera";li=ci||ve.options.rotating||ve.options.zooming||Mi?Sr.LINEAR:Sr.NEAREST}}else{var Ro=de.layout.get("icon-size").constantOr(0)!==1||ka.iconsNeedLinear;Gi=_a.imageAtlasTexture,Ai=oi||ve.options.rotating||ve.options.zooming||Ro||ci?Sr.LINEAR:Sr.NEAREST,Ii=_a.imageAtlasTexture.size}var ts=ga(_a,1,ve.transform.zoom),mu=Xr(Ta.posMatrix,Nr,Vr,ve.transform,ts),yu=Fn(Ta.posMatrix,Nr,Vr,ve.transform,ts),tf=Qn&&ka.hasTextData(),rf=de.layout.get("icon-text-fit")!=="none"&&tf&&ka.hasIconData();Kr&&Sa(ka,Ta.posMatrix,ve,ge,mu,yu,Nr,At);var Rf=ve.translatePosMatrix(Ta.posMatrix,_a,Ee,Pe),nf=Kr||ge&&Qn||rf?mh:mu,vl=ve.translatePosMatrix(yu,_a,Ee,Pe,!0),nc=oi&&de.paint.get(ge?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Hs=void 0;oi?ka.iconsInText?Hs=Pl(Di.kind,Ha,hn,Nr,ve,Rf,nf,vl,Ii,Bi):Hs=$o(Di.kind,Ha,hn,Nr,ve,Rf,nf,vl,ge,Ii,!0):Hs=Js(Di.kind,Ha,hn,Nr,ve,Rf,nf,vl,ge,Ii);var Ql={program:gi,buffers:Da,uniformValues:Hs,atlasTexture:Gi,atlasTextureIcon:qi,atlasInterpolation:Ai,atlasInterpolationIcon:li,isSDF:oi,hasHalo:nc};if(Sn)for(var af=Da.segments.get(),Uu=0,of=af;Uu<of.length;Uu+=1){var $h=of[Uu];ta.push({segments:new t.SegmentVector([$h]),sortKey:$h.sortKey,state:Ql})}else ta.push({segments:Da.segments,sortKey:0,state:Ql})}}}Sn&&ta.sort(function(qh,ev){return qh.sortKey-ev.sortKey});for(var yc=0,Rs=ta;yc<Rs.length;yc+=1){var wh=Rs[yc],$s=wh.state;if(ir.activeTexture.set(Sr.TEXTURE0),$s.atlasTexture.bind($s.atlasInterpolation,Sr.CLAMP_TO_EDGE),$s.atlasTextureIcon&&(ir.activeTexture.set(Sr.TEXTURE1),$s.atlasTextureIcon&&$s.atlasTextureIcon.bind($s.atlasInterpolationIcon,Sr.CLAMP_TO_EDGE)),$s.isSDF){var Th=$s.uniformValues;$s.hasHalo&&(Th.u_is_halo=1,Kf($s.buffers,wh.segments,de,ve,$s.program,Nn,Vt,$t,Th)),Th.u_is_halo=0}Kf($s.buffers,wh.segments,de,ve,$s.program,Nn,Vt,$t,$s.uniformValues)}}function Kf(ve,X,de,Q,ge,Ee,Pe,Ze,ft){var At=Q.context,Vt=At.gl;ge.draw(At,Vt.TRIANGLES,Ee,Pe,Ze,je.disabled,ft,de.id,ve.layoutVertexBuffer,ve.indexBuffer,X,de.paint,Q.transform.zoom,ve.programConfigurations.get(de.id),ve.dynamicLayoutVertexBuffer,ve.opacityVertexBuffer)}function qo(ve,X,de,Q){if(ve.renderPass==="translucent"){var ge=de.paint.get("circle-opacity"),Ee=de.paint.get("circle-stroke-width"),Pe=de.paint.get("circle-stroke-opacity"),Ze=de.layout.get("circle-sort-key").constantOr(1)!==void 0;if(!(ge.constantOr(1)===0&&(Ee.constantOr(1)===0||Pe.constantOr(1)===0))){for(var ft=ve.context,At=ft.gl,Vt=ve.depthModeForSublayer(0,or.ReadOnly),$t=kr.disabled,ir=ve.colorModeForRenderPass(),Sr=[],Br=0;Br<Q.length;Br++){var Vr=Q[Br],Nr=X.getTile(Vr),Kr=Nr.getBucket(de);if(!!Kr){var hn=Kr.programConfigurations.get(de.id),Sn=ve.useProgram("circle",hn),Nn=Kr.layoutVertexBuffer,Qn=Kr.indexBuffer,ta=xt(ve,Vr,Nr,de),qn={programConfiguration:hn,program:Sn,layoutVertexBuffer:Nn,indexBuffer:Qn,uniformValues:ta};if(Ze)for(var pa=Kr.segments.get(),Ta=0,_a=pa;Ta<_a.length;Ta+=1){var ka=_a[Ta];Sr.push({segments:new t.SegmentVector([ka]),sortKey:ka.sortKey,state:qn})}else Sr.push({segments:Kr.segments,sortKey:0,state:qn})}}Ze&&Sr.sort(function(Ai,qi){return Ai.sortKey-qi.sortKey});for(var Da=0,Wa=Sr;Da<Wa.length;Da+=1){var oi=Wa[Da],Di=oi.state,ci=Di.programConfiguration,gi=Di.program,Ha=Di.layoutVertexBuffer,Ii=Di.indexBuffer,Bi=Di.uniformValues,Gi=oi.segments;gi.draw(ft,At.TRIANGLES,Vt,$t,ir,je.disabled,Bi,de.id,Ha,Ii,Gi,de.paint,ve.transform.zoom,ci)}}}}function Jf(ve,X,de,Q){if(de.paint.get("heatmap-opacity")!==0)if(ve.renderPass==="offscreen"){var ge=ve.context,Ee=ge.gl,Pe=kr.disabled,Ze=new we([Ee.ONE,Ee.ONE],t.Color.transparent,[!0,!0,!0,!0]);Pc(ge,ve,de),ge.clear({color:t.Color.transparent});for(var ft=0;ft<Q.length;ft++){var At=Q[ft];if(!X.hasRenderableParent(At)){var Vt=X.getTile(At),$t=Vt.getBucket(de);if(!!$t){var ir=$t.programConfigurations.get(de.id),Sr=ve.useProgram("heatmap",ir),Br=ve.transform,Vr=Br.zoom;Sr.draw(ge,Ee.TRIANGLES,or.disabled,Pe,Ze,je.disabled,In(At.posMatrix,Vt,Vr,de.paint.get("heatmap-intensity")),de.id,$t.layoutVertexBuffer,$t.indexBuffer,$t.segments,de.paint,ve.transform.zoom,ir)}}}ge.viewport.set([0,0,ve.width,ve.height])}else ve.renderPass==="translucent"&&(ve.context.setColorMode(ve.colorModeForRenderPass()),Ef(ve,de))}function Pc(ve,X,de){var Q=ve.gl;ve.activeTexture.set(Q.TEXTURE1),ve.viewport.set([0,0,X.width/4,X.height/4]);var ge=de.heatmapFbo;if(ge)Q.bindTexture(Q.TEXTURE_2D,ge.colorAttachment.get()),ve.bindFramebuffer.set(ge.framebuffer);else{var Ee=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,Ee),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),ge=de.heatmapFbo=ve.createFramebuffer(X.width/4,X.height/4,!1),Us(ve,X,Ee,ge)}}function Us(ve,X,de,Q){var ge=ve.gl,Ee=ve.extRenderToTextureHalfFloat?ve.extTextureHalfFloat.HALF_FLOAT_OES:ge.UNSIGNED_BYTE;ge.texImage2D(ge.TEXTURE_2D,0,ge.RGBA,X.width/4,X.height/4,0,ge.RGBA,Ee,null),Q.colorAttachment.set(de)}function Ef(ve,X){var de=ve.context,Q=de.gl,ge=X.heatmapFbo;if(!!ge){de.activeTexture.set(Q.TEXTURE0),Q.bindTexture(Q.TEXTURE_2D,ge.colorAttachment.get()),de.activeTexture.set(Q.TEXTURE1);var Ee=X.colorRampTexture;Ee||(Ee=X.colorRampTexture=new t.Texture(de,X.colorRamp,Q.RGBA)),Ee.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),ve.useProgram("heatmapTexture").draw(de,Q.TRIANGLES,or.disabled,kr.disabled,ve.colorModeForRenderPass(),je.disabled,Ln(ve,X,0,1),X.id,ve.viewportBuffer,ve.quadTriangleIndexBuffer,ve.viewportSegments,X.paint,ve.transform.zoom)}}function Cf(ve,X,de,Q){if(ve.renderPass==="translucent"){var ge=de.paint.get("line-opacity"),Ee=de.paint.get("line-width");if(!(ge.constantOr(1)===0||Ee.constantOr(1)===0)){var Pe=ve.depthModeForSublayer(0,or.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=de.paint.get("line-dasharray"),At=de.paint.get("line-pattern"),Vt=At.constantOr(1),$t=de.paint.get("line-gradient"),ir=de.getCrossfadeParameters(),Sr=Vt?"linePattern":ft?"lineSDF":$t?"lineGradient":"line",Br=ve.context,Vr=Br.gl,Nr=!0;if($t){Br.activeTexture.set(Vr.TEXTURE0);var Kr=de.gradientTexture;if(!de.gradient)return;Kr||(Kr=de.gradientTexture=new t.Texture(Br,de.gradient,Vr.RGBA)),Kr.bind(Vr.LINEAR,Vr.CLAMP_TO_EDGE)}for(var hn=0,Sn=Q;hn<Sn.length;hn+=1){var Nn=Sn[hn],Qn=X.getTile(Nn);if(!(Vt&&!Qn.patternsLoaded())){var ta=Qn.getBucket(de);if(!!ta){var qn=ta.programConfigurations.get(de.id),pa=ve.context.program.get(),Ta=ve.useProgram(Sr,qn),_a=Nr||Ta.program!==pa,ka=At.constantOr(null);if(ka&&Qn.imageAtlas){var Da=Qn.imageAtlas,Wa=Da.patternPositions[ka.to.toString()],oi=Da.patternPositions[ka.from.toString()];Wa&&oi&&qn.setConstantPatternPositions(Wa,oi)}var Di=Vt?xi(ve,Qn,de,ir):ft?_i(ve,Qn,de,ft,ir):$t?yi(ve,Qn,de):qa(ve,Qn,de);Vt?(Br.activeTexture.set(Vr.TEXTURE0),Qn.imageAtlasTexture.bind(Vr.LINEAR,Vr.CLAMP_TO_EDGE),qn.updatePaintBuffers(ir)):ft&&(_a||ve.lineAtlas.dirty)&&(Br.activeTexture.set(Vr.TEXTURE0),ve.lineAtlas.bind(Br)),Ta.draw(Br,Vr.TRIANGLES,Pe,ve.stencilModeForClipping(Nn),Ze,je.disabled,Di,de.id,ta.layoutVertexBuffer,ta.indexBuffer,ta.segments,de.paint,ve.transform.zoom,qn),Nr=!1}}}}}}function Qf(ve,X,de,Q){var ge=de.paint.get("fill-color"),Ee=de.paint.get("fill-opacity");if(Ee.constantOr(1)!==0){var Pe=ve.colorModeForRenderPass(),Ze=de.paint.get("fill-pattern"),ft=ve.opaquePassEnabledForLayer()&&!Ze.constantOr(1)&&ge.constantOr(t.Color.transparent).a===1&&Ee.constantOr(0)===1?"opaque":"translucent";if(ve.renderPass===ft){var At=ve.depthModeForSublayer(1,ve.renderPass==="opaque"?or.ReadWrite:or.ReadOnly);ze(ve,X,de,Q,At,Pe,!1)}if(ve.renderPass==="translucent"&&de.paint.get("fill-antialias")){var Vt=ve.depthModeForSublayer(de.getPaintProperty("fill-outline-color")?2:0,or.ReadOnly);ze(ve,X,de,Q,Vt,Pe,!0)}}}function ze(ve,X,de,Q,ge,Ee,Pe){var Ze=ve.context.gl,ft=de.paint.get("fill-pattern"),At=ft&&ft.constantOr(1),Vt=de.getCrossfadeParameters(),$t,ir,Sr,Br,Vr;Pe?(ir=At&&!de.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",$t=Ze.LINES):(ir=At?"fillPattern":"fill",$t=Ze.TRIANGLES);for(var Nr=0,Kr=Q;Nr<Kr.length;Nr+=1){var hn=Kr[Nr],Sn=X.getTile(hn);if(!(At&&!Sn.patternsLoaded())){var Nn=Sn.getBucket(de);if(!!Nn){var Qn=Nn.programConfigurations.get(de.id),ta=ve.useProgram(ir,Qn);At&&(ve.context.activeTexture.set(Ze.TEXTURE0),Sn.imageAtlasTexture.bind(Ze.LINEAR,Ze.CLAMP_TO_EDGE),Qn.updatePaintBuffers(Vt));var qn=ft.constantOr(null);if(qn&&Sn.imageAtlas){var pa=Sn.imageAtlas,Ta=pa.patternPositions[qn.to.toString()],_a=pa.patternPositions[qn.from.toString()];Ta&&_a&&Qn.setConstantPatternPositions(Ta,_a)}var ka=ve.translatePosMatrix(hn.posMatrix,Sn,de.paint.get("fill-translate"),de.paint.get("fill-translate-anchor"));if(!Pe)Br=Nn.indexBuffer,Vr=Nn.segments,Sr=At?ks(ka,ve,Vt,Sn):Uo(ka);else{Br=Nn.indexBuffer2,Vr=Nn.segments2;var Da=[Ze.drawingBufferWidth,Ze.drawingBufferHeight];Sr=ir==="fillOutlinePattern"&&At?zu(ka,ve,Vt,Sn,Da):Af(ka,Da)}ta.draw(ve.context,$t,ge,ve.stencilModeForClipping(hn),Ee,je.disabled,Sr,de.id,Nn.layoutVertexBuffer,Br,Vr,de.paint,ve.transform.zoom,Qn)}}}}function Ye(ve,X,de,Q){var ge=de.paint.get("fill-extrusion-opacity");if(ge!==0&&ve.renderPass==="translucent"){var Ee=new or(ve.context.gl.LEQUAL,or.ReadWrite,ve.depthRangeFor3D);if(ge===1&&!de.paint.get("fill-extrusion-pattern").constantOr(1)){var Pe=ve.colorModeForRenderPass();nt(ve,X,de,Q,Ee,kr.disabled,Pe)}else nt(ve,X,de,Q,Ee,kr.disabled,we.disabled),nt(ve,X,de,Q,Ee,ve.stencilModeFor3D(),ve.colorModeForRenderPass())}}function nt(ve,X,de,Q,ge,Ee,Pe){for(var Ze=ve.context,ft=Ze.gl,At=de.paint.get("fill-extrusion-pattern"),Vt=At.constantOr(1),$t=de.getCrossfadeParameters(),ir=de.paint.get("fill-extrusion-opacity"),Sr=0,Br=Q;Sr<Br.length;Sr+=1){var Vr=Br[Sr],Nr=X.getTile(Vr),Kr=Nr.getBucket(de);if(!!Kr){var hn=Kr.programConfigurations.get(de.id),Sn=ve.useProgram(Vt?"fillExtrusionPattern":"fillExtrusion",hn);Vt&&(ve.context.activeTexture.set(ft.TEXTURE0),Nr.imageAtlasTexture.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),hn.updatePaintBuffers($t));var Nn=At.constantOr(null);if(Nn&&Nr.imageAtlas){var Qn=Nr.imageAtlas,ta=Qn.patternPositions[Nn.to.toString()],qn=Qn.patternPositions[Nn.from.toString()];ta&&qn&&hn.setConstantPatternPositions(ta,qn)}var pa=ve.translatePosMatrix(Vr.posMatrix,Nr,de.paint.get("fill-extrusion-translate"),de.paint.get("fill-extrusion-translate-anchor")),Ta=de.paint.get("fill-extrusion-vertical-gradient"),_a=Vt?fl(pa,ve,Ta,ir,Vr,$t,Nr):Ms(pa,ve,Ta,ir);Sn.draw(Ze,Ze.gl.TRIANGLES,ge,Ee,Pe,je.backCCW,_a,de.id,Kr.layoutVertexBuffer,Kr.indexBuffer,Kr.segments,de.paint,ve.transform.zoom,hn)}}}function lt(ve,X,de,Q){if(!(ve.renderPass!=="offscreen"&&ve.renderPass!=="translucent")){for(var ge=ve.context,Ee=X.getSource().maxzoom,Pe=ve.depthModeForSublayer(0,or.ReadOnly),Ze=ve.colorModeForRenderPass(),ft=ve.renderPass==="translucent"?ve.stencilConfigForOverlap(Q):[{},Q],At=ft[0],Vt=ft[1],$t=0,ir=Vt;$t<ir.length;$t+=1){var Sr=ir[$t],Br=X.getTile(Sr);Br.needsHillshadePrepare&&ve.renderPass==="offscreen"?bt(ve,Br,de,Ee,Pe,kr.disabled,Ze):ve.renderPass==="translucent"&&_t(ve,Br,de,Pe,At[Sr.overscaledZ],Ze)}ge.viewport.set([0,0,ve.width,ve.height])}}function _t(ve,X,de,Q,ge,Ee){var Pe=ve.context,Ze=Pe.gl,ft=X.fbo;if(!!ft){var At=ve.useProgram("hillshade");Pe.activeTexture.set(Ze.TEXTURE0),Ze.bindTexture(Ze.TEXTURE_2D,ft.colorAttachment.get());var Vt=Ba(ve,X,de);At.draw(Pe,Ze.TRIANGLES,Q,ge,Ee,je.disabled,Vt,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function bt(ve,X,de,Q,ge,Ee,Pe){var Ze=ve.context,ft=Ze.gl,At=X.dem;if(At&&At.data){var Vt=At.dim,$t=At.stride,ir=At.getPixels();if(Ze.activeTexture.set(ft.TEXTURE1),Ze.pixelStoreUnpackPremultiplyAlpha.set(!1),X.demTexture=X.demTexture||ve.getTileTexture($t),X.demTexture){var Sr=X.demTexture;Sr.update(ir,{premultiply:!1}),Sr.bind(ft.NEAREST,ft.CLAMP_TO_EDGE)}else X.demTexture=new t.Texture(Ze,ir,ft.RGBA,{premultiply:!1}),X.demTexture.bind(ft.NEAREST,ft.CLAMP_TO_EDGE);Ze.activeTexture.set(ft.TEXTURE0);var Br=X.fbo;if(!Br){var Vr=new t.Texture(Ze,{width:Vt,height:Vt,data:null},ft.RGBA);Vr.bind(ft.LINEAR,ft.CLAMP_TO_EDGE),Br=X.fbo=Ze.createFramebuffer(Vt,Vt,!0),Br.colorAttachment.set(Vr.texture)}Ze.bindFramebuffer.set(Br.framebuffer),Ze.viewport.set([0,0,Vt,Vt]),ve.useProgram("hillshadePrepare").draw(Ze,ft.TRIANGLES,ge,Ee,Pe,je.disabled,Ra(X.tileID,At,Q),de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments),X.needsHillshadePrepare=!1}}function Tt(ve,X,de,Q){if(ve.renderPass==="translucent"&&de.paint.get("raster-opacity")!==0&&!!Q.length)for(var ge=ve.context,Ee=ge.gl,Pe=X.getSource(),Ze=ve.useProgram("raster"),ft=ve.colorModeForRenderPass(),At=Pe instanceof J?[{},Q]:ve.stencilConfigForOverlap(Q),Vt=At[0],$t=At[1],ir=$t[$t.length-1].overscaledZ,Sr=!ve.options.moving,Br=0,Vr=$t;Br<Vr.length;Br+=1){var Nr=Vr[Br],Kr=ve.depthModeForSublayer(Nr.overscaledZ-ir,de.paint.get("raster-opacity")===1?or.ReadWrite:or.ReadOnly,Ee.LESS),hn=X.getTile(Nr),Sn=ve.transform.calculatePosMatrix(Nr.toUnwrapped(),Sr);hn.registerFadeDuration(de.paint.get("raster-fade-duration"));var Nn=X.findLoadedParent(Nr,0),Qn=qt(hn,Nn,X,de,ve.transform),ta=void 0,qn=void 0,pa=de.paint.get("raster-resampling")==="nearest"?Ee.NEAREST:Ee.LINEAR;ge.activeTexture.set(Ee.TEXTURE0),hn.texture.bind(pa,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ge.activeTexture.set(Ee.TEXTURE1),Nn?(Nn.texture.bind(pa,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST),ta=Math.pow(2,Nn.tileID.overscaledZ-hn.tileID.overscaledZ),qn=[hn.tileID.canonical.x*ta%1,hn.tileID.canonical.y*ta%1]):hn.texture.bind(pa,Ee.CLAMP_TO_EDGE,Ee.LINEAR_MIPMAP_NEAREST);var Ta=oo(Sn,qn||[0,0],ta||1,Qn,de);Pe instanceof J?Ze.draw(ge,Ee.TRIANGLES,Kr,kr.disabled,ft,je.disabled,Ta,de.id,Pe.boundsBuffer,ve.quadTriangleIndexBuffer,Pe.boundsSegments):Ze.draw(ge,Ee.TRIANGLES,Kr,Vt[Nr.overscaledZ],ft,je.disabled,Ta,de.id,ve.rasterBoundsBuffer,ve.quadTriangleIndexBuffer,ve.rasterBoundsSegments)}}function qt(ve,X,de,Q,ge){var Ee=Q.paint.get("raster-fade-duration");if(Ee>0){var Pe=t.browser.now(),Ze=(Pe-ve.timeAdded)/Ee,ft=X?(Pe-X.timeAdded)/Ee:-1,At=de.getSource(),Vt=ge.coveringZoomLevel({tileSize:At.tileSize,roundZoom:At.roundZoom}),$t=!X||Math.abs(X.tileID.overscaledZ-Vt)>Math.abs(ve.tileID.overscaledZ-Vt),ir=$t&&ve.refreshedUponExpiration?1:t.clamp($t?Ze:1-ft,0,1);return ve.refreshedUponExpiration&&Ze>=1&&(ve.refreshedUponExpiration=!1),X?{opacity:1,mix:1-ir}:{opacity:ir,mix:0}}else return{opacity:1,mix:0}}function sr(ve,X,de){var Q=de.paint.get("background-color"),ge=de.paint.get("background-opacity");if(ge!==0){var Ee=ve.context,Pe=Ee.gl,Ze=ve.transform,ft=Ze.tileSize,At=de.paint.get("background-pattern");if(!ve.isPatternMissing(At)){var Vt=!At&&Q.a===1&&ge===1&&ve.opaquePassEnabledForLayer()?"opaque":"translucent";if(ve.renderPass===Vt){var $t=kr.disabled,ir=ve.depthModeForSublayer(0,Vt==="opaque"?or.ReadWrite:or.ReadOnly),Sr=ve.colorModeForRenderPass(),Br=ve.useProgram(At?"backgroundPattern":"background"),Vr=Ze.coveringTiles({tileSize:ft});At&&(Ee.activeTexture.set(Pe.TEXTURE0),ve.imageManager.bind(ve.context));for(var Nr=de.getCrossfadeParameters(),Kr=0,hn=Vr;Kr<hn.length;Kr+=1){var Sn=hn[Kr],Nn=ve.transform.calculatePosMatrix(Sn.toUnwrapped()),Qn=At?Fu(Nn,ge,ve,At,{tileID:Sn,tileSize:ft},Nr):Co(Nn,ge,Q);Br.draw(Ee,Pe.TRIANGLES,ir,$t,Sr,je.disabled,Qn,de.id,ve.tileExtentBuffer,ve.quadTriangleIndexBuffer,ve.tileExtentSegments)}}}}}var Qt=new t.Color(1,0,0,1),fr=new t.Color(0,1,0,1),Er=new t.Color(0,0,1,1),Hr=new t.Color(1,0,1,1),en=new t.Color(0,1,1,1);function _n(ve){var X=ve.transform.padding,de=3;Kn(ve,ve.transform.height-(X.top||0),de,Qt),Kn(ve,X.bottom||0,de,fr),xa(ve,X.left||0,de,Er),xa(ve,ve.transform.width-(X.right||0),de,Hr);var Q=ve.transform.centerPoint;Pn(ve,Q.x,ve.transform.height-Q.y,en)}function Pn(ve,X,de,Q){var ge=20,Ee=2;wa(ve,X-Ee/2,de-ge/2,Ee,ge,Q),wa(ve,X-ge/2,de-Ee/2,ge,Ee,Q)}function Kn(ve,X,de,Q){wa(ve,0,X+de/2,ve.transform.width,de,Q)}function xa(ve,X,de,Q){wa(ve,X-de/2,0,de,ve.transform.height,Q)}function wa(ve,X,de,Q,ge,Ee){var Pe=ve.context,Ze=Pe.gl;Ze.enable(Ze.SCISSOR_TEST),Ze.scissor(X*t.browser.devicePixelRatio,de*t.browser.devicePixelRatio,Q*t.browser.devicePixelRatio,ge*t.browser.devicePixelRatio),Pe.clear({color:Ee}),Ze.disable(Ze.SCISSOR_TEST)}function Ja(ve,X,de){for(var Q=0;Q<de.length;Q++)Xa(ve,X,de[Q])}function Xa(ve,X,de){var Q=ve.context,ge=Q.gl,Ee=de.posMatrix,Pe=ve.useProgram("debug"),Ze=or.disabled,ft=kr.disabled,At=ve.colorModeForRenderPass(),Vt="$debug";Q.activeTexture.set(ge.TEXTURE0),ve.emptyTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Pe.draw(Q,ge.LINE_STRIP,Ze,ft,At,je.disabled,dn(Ee,t.Color.red),Vt,ve.debugBuffer,ve.tileBorderIndexBuffer,ve.debugSegments);var $t=X.getTileByID(de.key).latestRawTileData,ir=$t&&$t.byteLength||0,Sr=Math.floor(ir/1024),Br=X.getTile(de).tileSize,Vr=512/Math.min(Br,512)*(de.overscaledZ/ve.transform.zoom)*.5,Nr=de.canonical.toString();de.overscaledZ!==de.canonical.z&&(Nr+=" => "+de.overscaledZ);var Kr=Nr+" "+Sr+"kb";ni(ve,Kr),Pe.draw(Q,ge.TRIANGLES,Ze,ft,we.alphaBlended,je.disabled,dn(Ee,t.Color.transparent,Vr),Vt,ve.debugBuffer,ve.quadTriangleIndexBuffer,ve.debugSegments)}function ni(ve,X){ve.initDebugOverlayCanvas();var de=ve.debugOverlayCanvas,Q=ve.context.gl,ge=ve.debugOverlayCanvas.getContext("2d");ge.clearRect(0,0,de.width,de.height),ge.shadowColor="white",ge.shadowBlur=2,ge.lineWidth=1.5,ge.strokeStyle="white",ge.textBaseline="top",ge.font="bold "+36+"px Open Sans, sans-serif",ge.fillText(X,5,5),ge.strokeText(X,5,5),ve.debugOverlayTexture.update(de),ve.debugOverlayTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE)}function vi(ve,X,de){var Q=ve.context,ge=de.implementation;if(ve.renderPass==="offscreen"){var Ee=ge.prerender;Ee&&(ve.setCustomLayerDefaults(),Q.setColorMode(ve.colorModeForRenderPass()),Ee.call(ge,Q.gl,ve.transform.customLayerMatrix()),Q.setDirty(),ve.setBaseState())}else if(ve.renderPass==="translucent"){ve.setCustomLayerDefaults(),Q.setColorMode(ve.colorModeForRenderPass()),Q.setStencilMode(kr.disabled);var Pe=ge.renderingMode==="3d"?new or(ve.context.gl.LEQUAL,or.ReadWrite,ve.depthRangeFor3D):ve.depthModeForSublayer(0,or.ReadOnly);Q.setDepthMode(Pe),ge.render(Q.gl,ve.transform.customLayerMatrix()),Q.setDirty(),ve.setBaseState(),Q.bindFramebuffer.set(null)}}var ho={symbol:jf,circle:qo,heatmap:Jf,line:Cf,fill:Qf,"fill-extrusion":Ye,hillshade:lt,raster:Tt,background:sr,debug:Ja,custom:vi},ii=function(X,de){this.context=new $e(X),this.transform=de,this._tileTextures={},this.setup(),this.numSublayers=ot.maxUnderzooming+ot.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Ws,this.gpuTimers={}};ii.prototype.resize=function(X,de){if(this.width=X*t.browser.devicePixelRatio,this.height=de*t.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var Q=0,ge=this.style._order;Q<ge.length;Q+=1){var Ee=ge[Q];this.style._layers[Ee].resize()}},ii.prototype.setup=function(){var X=this.context,de=new t.StructArrayLayout2i4;de.emplaceBack(0,0),de.emplaceBack(t.EXTENT,0),de.emplaceBack(0,t.EXTENT),de.emplaceBack(t.EXTENT,t.EXTENT),this.tileExtentBuffer=X.createVertexBuffer(de,Gl.members),this.tileExtentSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Q=new t.StructArrayLayout2i4;Q.emplaceBack(0,0),Q.emplaceBack(t.EXTENT,0),Q.emplaceBack(0,t.EXTENT),Q.emplaceBack(t.EXTENT,t.EXTENT),this.debugBuffer=X.createVertexBuffer(Q,Gl.members),this.debugSegments=t.SegmentVector.simpleSegment(0,0,4,5);var ge=new t.StructArrayLayout4i8;ge.emplaceBack(0,0,0,0),ge.emplaceBack(t.EXTENT,0,t.EXTENT,0),ge.emplaceBack(0,t.EXTENT,0,t.EXTENT),ge.emplaceBack(t.EXTENT,t.EXTENT,t.EXTENT,t.EXTENT),this.rasterBoundsBuffer=X.createVertexBuffer(ge,W.members),this.rasterBoundsSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Ee=new t.StructArrayLayout2i4;Ee.emplaceBack(0,0),Ee.emplaceBack(1,0),Ee.emplaceBack(0,1),Ee.emplaceBack(1,1),this.viewportBuffer=X.createVertexBuffer(Ee,Gl.members),this.viewportSegments=t.SegmentVector.simpleSegment(0,0,4,2);var Pe=new t.StructArrayLayout1ui2;Pe.emplaceBack(0),Pe.emplaceBack(1),Pe.emplaceBack(3),Pe.emplaceBack(2),Pe.emplaceBack(0),this.tileBorderIndexBuffer=X.createIndexBuffer(Pe);var Ze=new t.StructArrayLayout3ui6;Ze.emplaceBack(0,1,2),Ze.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=X.createIndexBuffer(Ze),this.emptyTexture=new t.Texture(X,{width:1,height:1,data:new Uint8Array([0,0,0,0])},X.gl.RGBA);var ft=this.context.gl;this.stencilClearMode=new kr({func:ft.ALWAYS,mask:0},0,255,ft.ZERO,ft.ZERO,ft.ZERO)},ii.prototype.clearStencil=function(){var X=this.context,de=X.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var Q=t.create();t.ortho(Q,0,this.width,this.height,0,0,1),t.scale(Q,Q,[de.drawingBufferWidth,de.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(X,de.TRIANGLES,or.disabled,this.stencilClearMode,we.disabled,je.disabled,Cn(Q),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ii.prototype._renderTileClippingMasks=function(X,de){if(!(this.currentStencilSource===X.source||!X.isTileClipped()||!de||!de.length)){this.currentStencilSource=X.source;var Q=this.context,ge=Q.gl;this.nextStencilID+de.length>256&&this.clearStencil(),Q.setColorMode(we.disabled),Q.setDepthMode(or.disabled);var Ee=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var Pe=0,Ze=de;Pe<Ze.length;Pe+=1){var ft=Ze[Pe],At=this._tileClippingMaskIDs[ft.key]=this.nextStencilID++;Ee.draw(Q,ge.TRIANGLES,or.disabled,new kr({func:ge.ALWAYS,mask:0},At,255,ge.KEEP,ge.KEEP,ge.REPLACE),we.disabled,je.disabled,Cn(ft.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ii.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var X=this.nextStencilID++,de=this.context.gl;return new kr({func:de.NOTEQUAL,mask:255},X,255,de.KEEP,de.KEEP,de.REPLACE)},ii.prototype.stencilModeForClipping=function(X){var de=this.context.gl;return new kr({func:de.EQUAL,mask:255},this._tileClippingMaskIDs[X.key],0,de.KEEP,de.KEEP,de.REPLACE)},ii.prototype.stencilConfigForOverlap=function(X){var de,Q=this.context.gl,ge=X.sort(function(At,Vt){return Vt.overscaledZ-At.overscaledZ}),Ee=ge[ge.length-1].overscaledZ,Pe=ge[0].overscaledZ-Ee+1;if(Pe>1){this.currentStencilSource=void 0,this.nextStencilID+Pe>256&&this.clearStencil();for(var Ze={},ft=0;ft<Pe;ft++)Ze[ft+Ee]=new kr({func:Q.GEQUAL,mask:255},ft+this.nextStencilID,255,Q.KEEP,Q.KEEP,Q.REPLACE);return this.nextStencilID+=Pe,[Ze,ge]}return[(de={},de[Ee]=kr.disabled,de),ge]},ii.prototype.colorModeForRenderPass=function(){var X=this.context.gl;if(this._showOverdrawInspector){var de=8,Q=1/de;return new we([X.CONSTANT_COLOR,X.ONE],new t.Color(Q,Q,Q,0),[!0,!0,!0,!0])}else return this.renderPass==="opaque"?we.unblended:we.alphaBlended},ii.prototype.depthModeForSublayer=function(X,de,Q){if(!this.opaquePassEnabledForLayer())return or.disabled;var ge=1-((1+this.currentLayer)*this.numSublayers+X)*this.depthEpsilon;return new or(Q||this.context.gl.LEQUAL,de,[ge,ge])},ii.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ii.prototype.render=function(X,de){var Q=this;this.style=X,this.options=de,this.lineAtlas=X.lineAtlas,this.imageManager=X.imageManager,this.glyphManager=X.glyphManager,this.symbolFadeChange=X.placement.symbolFadeChange(t.browser.now()),this.imageManager.beginFrame();var ge=this.style._order,Ee=this.style.sourceCaches;for(var Pe in Ee){var Ze=Ee[Pe];Ze.used&&Ze.prepare(this.context)}var ft={},At={},Vt={};for(var $t in Ee){var ir=Ee[$t];ft[$t]=ir.getVisibleCoordinates(),At[$t]=ft[$t].slice().reverse(),Vt[$t]=ir.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var Sr=0;Sr<ge.length;Sr++){var Br=ge[Sr];if(this.style._layers[Br].is3D()){this.opaquePassCutoff=Sr;break}}this.renderPass="offscreen";for(var Vr=0,Nr=ge;Vr<Nr.length;Vr+=1){var Kr=Nr[Vr],hn=this.style._layers[Kr];if(!(!hn.hasOffscreenPass()||hn.isHidden(this.transform.zoom))){var Sn=At[hn.source];hn.type!=="custom"&&!Sn.length||this.renderLayer(this,Ee[hn.source],hn,Sn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:de.showOverdrawInspector?t.Color.black:t.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=de.showOverdrawInspector,this.depthRangeFor3D=[0,1-(X._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=ge.length-1;this.currentLayer>=0;this.currentLayer--){var Nn=this.style._layers[ge[this.currentLayer]],Qn=Ee[Nn.source],ta=ft[Nn.source];this._renderTileClippingMasks(Nn,ta),this.renderLayer(this,Qn,Nn,ta)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<ge.length;this.currentLayer++){var qn=this.style._layers[ge[this.currentLayer]],pa=Ee[qn.source],Ta=(qn.type==="symbol"?Vt:At)[qn.source];this._renderTileClippingMasks(qn,ft[qn.source]),this.renderLayer(this,pa,qn,Ta)}if(this.options.showTileBoundaries){var _a,ka,Da=t.values(this.style._layers);Da.forEach(function(Wa){Wa.source&&!Wa.isHidden(Q.transform.zoom)&&(Wa.source!==(ka&&ka.id)&&(ka=Q.style.sourceCaches[Wa.source]),(!_a||_a.getSource().maxzoom<ka.getSource().maxzoom)&&(_a=ka))}),_a&&ho.debug(this,_a,_a.getVisibleCoordinates())}this.options.showPadding&&_n(this),this.context.setDefault()},ii.prototype.renderLayer=function(X,de,Q,ge){Q.isHidden(this.transform.zoom)||Q.type!=="background"&&Q.type!=="custom"&&!ge.length||(this.id=Q.id,this.gpuTimingStart(Q),ho[Q.type](X,de,Q,ge,this.style.placement.variableOffsets),this.gpuTimingEnd())},ii.prototype.gpuTimingStart=function(X){if(!!this.options.gpuTiming){var de=this.context.extTimerQuery,Q=this.gpuTimers[X.id];Q||(Q=this.gpuTimers[X.id]={calls:0,cpuTime:0,query:de.createQueryEXT()}),Q.calls++,de.beginQueryEXT(de.TIME_ELAPSED_EXT,Q.query)}},ii.prototype.gpuTimingEnd=function(){if(!!this.options.gpuTiming){var X=this.context.extTimerQuery;X.endQueryEXT(X.TIME_ELAPSED_EXT)}},ii.prototype.collectGpuTimers=function(){var X=this.gpuTimers;return this.gpuTimers={},X},ii.prototype.queryGpuTimers=function(X){var de={};for(var Q in X){var ge=X[Q],Ee=this.context.extTimerQuery,Pe=Ee.getQueryObjectEXT(ge.query,Ee.QUERY_RESULT_EXT)/(1e3*1e3);Ee.deleteQueryEXT(ge.query),de[Q]=Pe}return de},ii.prototype.translatePosMatrix=function(X,de,Q,ge,Ee){if(!Q[0]&&!Q[1])return X;var Pe=Ee?ge==="map"?this.transform.angle:0:ge==="viewport"?-this.transform.angle:0;if(Pe){var Ze=Math.sin(Pe),ft=Math.cos(Pe);Q=[Q[0]*ft-Q[1]*Ze,Q[0]*Ze+Q[1]*ft]}var At=[Ee?Q[0]:ga(de,Q[0],this.transform.zoom),Ee?Q[1]:ga(de,Q[1],this.transform.zoom),0],Vt=new Float32Array(16);return t.translate(Vt,X,At),Vt},ii.prototype.saveTileTexture=function(X){var de=this._tileTextures[X.size[0]];de?de.push(X):this._tileTextures[X.size[0]]=[X]},ii.prototype.getTileTexture=function(X){var de=this._tileTextures[X];return de&&de.length>0?de.pop():null},ii.prototype.isPatternMissing=function(X){if(!X)return!1;if(!X.from||!X.to)return!0;var de=this.imageManager.getPattern(X.from.toString()),Q=this.imageManager.getPattern(X.to.toString());return!de||!Q},ii.prototype.useProgram=function(X,de){this.cache=this.cache||{};var Q=""+X+(de?de.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[Q]||(this.cache[Q]=new ms(this.context,Jl[X],de,ef[X],this._showOverdrawInspector)),this.cache[Q]},ii.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ii.prototype.setBaseState=function(){var X=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(X.FUNC_ADD)},ii.prototype.initDebugOverlayCanvas=function(){if(this.debugOverlayCanvas==null){this.debugOverlayCanvas=t.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512;var X=this.context.gl;this.debugOverlayTexture=new t.Texture(this.context,this.debugOverlayCanvas,X.RGBA)}},ii.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Xi=function(X,de){this.points=X,this.planes=de};Xi.fromInvProjectionMatrix=function(X,de,Q){var ge=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]],Ee=Math.pow(2,Q),Pe=ge.map(function(At){return t.transformMat4([],At,X)}).map(function(At){return t.scale$1([],At,1/At[3]/de*Ee)}),Ze=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],ft=Ze.map(function(At){var Vt=t.sub([],Pe[At[0]],Pe[At[1]]),$t=t.sub([],Pe[At[2]],Pe[At[1]]),ir=t.normalize([],t.cross([],Vt,$t)),Sr=-t.dot(ir,Pe[At[1]]);return ir.concat(Sr)});return new Xi(Pe,ft)};var xo=function(X,de){this.min=X,this.max=de,this.center=t.scale$2([],t.add([],this.min,this.max),.5)};xo.prototype.quadrant=function(X){for(var de=[X%2==0,X<2],Q=t.clone$2(this.min),ge=t.clone$2(this.max),Ee=0;Ee<de.length;Ee++)Q[Ee]=de[Ee]?this.min[Ee]:this.center[Ee],ge[Ee]=de[Ee]?this.center[Ee]:this.max[Ee];return ge[2]=this.max[2],new xo(Q,ge)},xo.prototype.distanceX=function(X){var de=Math.max(Math.min(this.max[0],X[0]),this.min[0]);return de-X[0]},xo.prototype.distanceY=function(X){var de=Math.max(Math.min(this.max[1],X[1]),this.min[1]);return de-X[1]},xo.prototype.intersects=function(X){for(var de=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],Q=!0,ge=0;ge<X.planes.length;ge++){for(var Ee=X.planes[ge],Pe=0,Ze=0;Ze<de.length;Ze++)Pe+=t.dot$1(Ee,de[Ze])>=0;if(Pe===0)return 0;Pe!==de.length&&(Q=!1)}if(Q)return 2;for(var ft=0;ft<3;ft++){for(var At=Number.MAX_VALUE,Vt=-Number.MAX_VALUE,$t=0;$t<X.points.length;$t++){var ir=X.points[$t][ft]-this.min[ft];At=Math.min(At,ir),Vt=Math.max(Vt,ir)}if(Vt<0||At>this.max[ft]-this.min[ft])return 0}return 1};var Po=function(X,de,Q,ge){if(X===void 0&&(X=0),de===void 0&&(de=0),Q===void 0&&(Q=0),ge===void 0&&(ge=0),isNaN(X)||X<0||isNaN(de)||de<0||isNaN(Q)||Q<0||isNaN(ge)||ge<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=X,this.bottom=de,this.left=Q,this.right=ge};Po.prototype.interpolate=function(X,de,Q){return de.top!=null&&X.top!=null&&(this.top=t.number(X.top,de.top,Q)),de.bottom!=null&&X.bottom!=null&&(this.bottom=t.number(X.bottom,de.bottom,Q)),de.left!=null&&X.left!=null&&(this.left=t.number(X.left,de.left,Q)),de.right!=null&&X.right!=null&&(this.right=t.number(X.right,de.right,Q)),this},Po.prototype.getCenter=function(X,de){var Q=t.clamp((this.left+X-this.right)/2,0,X),ge=t.clamp((this.top+de-this.bottom)/2,0,de);return new t.Point(Q,ge)},Po.prototype.equals=function(X){return this.top===X.top&&this.bottom===X.bottom&&this.left===X.left&&this.right===X.right},Po.prototype.clone=function(){return new Po(this.top,this.bottom,this.left,this.right)},Po.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Ti=function(X,de,Q,ge,Ee){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=Ee===void 0?!0:Ee,this._minZoom=X||0,this._maxZoom=de||22,this._minPitch=Q==null?0:Q,this._maxPitch=ge==null?60:ge,this.setMaxBounds(),this.width=0,this.height=0,this._center=new t.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Po,this._posMatrixCache={},this._alignedPosMatrixCache={}},Ei={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Ti.prototype.clone=function(){var X=new Ti(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return X.tileSize=this.tileSize,X.latRange=this.latRange,X.width=this.width,X.height=this.height,X._center=this._center,X.zoom=this.zoom,X.angle=this.angle,X._fov=this._fov,X._pitch=this._pitch,X._unmodified=this._unmodified,X._edgeInsets=this._edgeInsets.clone(),X._calcMatrices(),X},Ei.minZoom.get=function(){return this._minZoom},Ei.minZoom.set=function(ve){this._minZoom!==ve&&(this._minZoom=ve,this.zoom=Math.max(this.zoom,ve))},Ei.maxZoom.get=function(){return this._maxZoom},Ei.maxZoom.set=function(ve){this._maxZoom!==ve&&(this._maxZoom=ve,this.zoom=Math.min(this.zoom,ve))},Ei.minPitch.get=function(){return this._minPitch},Ei.minPitch.set=function(ve){this._minPitch!==ve&&(this._minPitch=ve,this.pitch=Math.max(this.pitch,ve))},Ei.maxPitch.get=function(){return this._maxPitch},Ei.maxPitch.set=function(ve){this._maxPitch!==ve&&(this._maxPitch=ve,this.pitch=Math.min(this.pitch,ve))},Ei.renderWorldCopies.get=function(){return this._renderWorldCopies},Ei.renderWorldCopies.set=function(ve){ve===void 0?ve=!0:ve===null&&(ve=!1),this._renderWorldCopies=ve},Ei.worldSize.get=function(){return this.tileSize*this.scale},Ei.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},Ei.size.get=function(){return new t.Point(this.width,this.height)},Ei.bearing.get=function(){return-this.angle/Math.PI*180},Ei.bearing.set=function(ve){var X=-t.wrap(ve,-180,180)*Math.PI/180;this.angle!==X&&(this._unmodified=!1,this.angle=X,this._calcMatrices(),this.rotationMatrix=t.create$2(),t.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},Ei.pitch.get=function(){return this._pitch/Math.PI*180},Ei.pitch.set=function(ve){var X=t.clamp(ve,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==X&&(this._unmodified=!1,this._pitch=X,this._calcMatrices())},Ei.fov.get=function(){return this._fov/Math.PI*180},Ei.fov.set=function(ve){ve=Math.max(.01,Math.min(60,ve)),this._fov!==ve&&(this._unmodified=!1,this._fov=ve/180*Math.PI,this._calcMatrices())},Ei.zoom.get=function(){return this._zoom},Ei.zoom.set=function(ve){var X=Math.min(Math.max(ve,this.minZoom),this.maxZoom);this._zoom!==X&&(this._unmodified=!1,this._zoom=X,this.scale=this.zoomScale(X),this.tileZoom=Math.floor(X),this.zoomFraction=X-this.tileZoom,this._constrain(),this._calcMatrices())},Ei.center.get=function(){return this._center},Ei.center.set=function(ve){ve.lat===this._center.lat&&ve.lng===this._center.lng||(this._unmodified=!1,this._center=ve,this._constrain(),this._calcMatrices())},Ei.padding.get=function(){return this._edgeInsets.toJSON()},Ei.padding.set=function(ve){this._edgeInsets.equals(ve)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,ve,1),this._calcMatrices())},Ei.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Ti.prototype.isPaddingEqual=function(X){return this._edgeInsets.equals(X)},Ti.prototype.interpolatePadding=function(X,de,Q){this._unmodified=!1,this._edgeInsets.interpolate(X,de,Q),this._constrain(),this._calcMatrices()},Ti.prototype.coveringZoomLevel=function(X){var de=(X.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/X.tileSize));return Math.max(0,de)},Ti.prototype.getVisibleUnwrappedCoordinates=function(X){var de=[new t.UnwrappedTileID(0,X)];if(this._renderWorldCopies)for(var Q=this.pointCoordinate(new t.Point(0,0)),ge=this.pointCoordinate(new t.Point(this.width,0)),Ee=this.pointCoordinate(new t.Point(this.width,this.height)),Pe=this.pointCoordinate(new t.Point(0,this.height)),Ze=Math.floor(Math.min(Q.x,ge.x,Ee.x,Pe.x)),ft=Math.floor(Math.max(Q.x,ge.x,Ee.x,Pe.x)),At=1,Vt=Ze-At;Vt<=ft+At;Vt++)Vt!==0&&de.push(new t.UnwrappedTileID(Vt,X));return de},Ti.prototype.coveringTiles=function(X){var de=this.coveringZoomLevel(X),Q=de;if(X.minzoom!==void 0&&de<X.minzoom)return[];X.maxzoom!==void 0&&de>X.maxzoom&&(de=X.maxzoom);var ge=t.MercatorCoordinate.fromLngLat(this.center),Ee=Math.pow(2,de),Pe=[Ee*ge.x,Ee*ge.y,0],Ze=Xi.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,de),ft=X.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ft=de);var At=3,Vt=function(Da){return{aabb:new xo([Da*Ee,0,0],[(Da+1)*Ee,Ee,0]),zoom:0,x:0,y:0,wrap:Da,fullyVisible:!1}},$t=[],ir=[],Sr=de,Br=X.reparseOverscaled?Q:de;if(this._renderWorldCopies)for(var Vr=1;Vr<=3;Vr++)$t.push(Vt(-Vr)),$t.push(Vt(Vr));for($t.push(Vt(0));$t.length>0;){var Nr=$t.pop(),Kr=Nr.x,hn=Nr.y,Sn=Nr.fullyVisible;if(!Sn){var Nn=Nr.aabb.intersects(Ze);if(Nn===0)continue;Sn=Nn===2}var Qn=Nr.aabb.distanceX(Pe),ta=Nr.aabb.distanceY(Pe),qn=Math.max(Math.abs(Qn),Math.abs(ta)),pa=At+(1<<Sr-Nr.zoom)-2;if(Nr.zoom===Sr||qn>pa&&Nr.zoom>=ft){ir.push({tileID:new t.OverscaledTileID(Nr.zoom===Sr?Br:Nr.zoom,Nr.wrap,Nr.zoom,Kr,hn),distanceSq:t.sqrLen([Pe[0]-.5-Kr,Pe[1]-.5-hn])});continue}for(var Ta=0;Ta<4;Ta++){var _a=(Kr<<1)+Ta%2,ka=(hn<<1)+(Ta>>1);$t.push({aabb:Nr.aabb.quadrant(Ta),zoom:Nr.zoom+1,x:_a,y:ka,wrap:Nr.wrap,fullyVisible:Sn})}}return ir.sort(function(Da,Wa){return Da.distanceSq-Wa.distanceSq}).map(function(Da){return Da.tileID})},Ti.prototype.resize=function(X,de){this.width=X,this.height=de,this.pixelsToGLUnits=[2/X,-2/de],this._constrain(),this._calcMatrices()},Ei.unmodified.get=function(){return this._unmodified},Ti.prototype.zoomScale=function(X){return Math.pow(2,X)},Ti.prototype.scaleZoom=function(X){return Math.log(X)/Math.LN2},Ti.prototype.project=function(X){var de=t.clamp(X.lat,-this.maxValidLatitude,this.maxValidLatitude);return new t.Point(t.mercatorXfromLng(X.lng)*this.worldSize,t.mercatorYfromLat(de)*this.worldSize)},Ti.prototype.unproject=function(X){return new t.MercatorCoordinate(X.x/this.worldSize,X.y/this.worldSize).toLngLat()},Ei.point.get=function(){return this.project(this.center)},Ti.prototype.setLocationAtPoint=function(X,de){var Q=this.pointCoordinate(de),ge=this.pointCoordinate(this.centerPoint),Ee=this.locationCoordinate(X),Pe=new t.MercatorCoordinate(Ee.x-(Q.x-ge.x),Ee.y-(Q.y-ge.y));this.center=this.coordinateLocation(Pe),this._renderWorldCopies&&(this.center=this.center.wrap())},Ti.prototype.locationPoint=function(X){return this.coordinatePoint(this.locationCoordinate(X))},Ti.prototype.pointLocation=function(X){return this.coordinateLocation(this.pointCoordinate(X))},Ti.prototype.locationCoordinate=function(X){return t.MercatorCoordinate.fromLngLat(X)},Ti.prototype.coordinateLocation=function(X){return X.toLngLat()},Ti.prototype.pointCoordinate=function(X){var de=0,Q=[X.x,X.y,0,1],ge=[X.x,X.y,1,1];t.transformMat4(Q,Q,this.pixelMatrixInverse),t.transformMat4(ge,ge,this.pixelMatrixInverse);var Ee=Q[3],Pe=ge[3],Ze=Q[0]/Ee,ft=ge[0]/Pe,At=Q[1]/Ee,Vt=ge[1]/Pe,$t=Q[2]/Ee,ir=ge[2]/Pe,Sr=$t===ir?0:(de-$t)/(ir-$t);return new t.MercatorCoordinate(t.number(Ze,ft,Sr)/this.worldSize,t.number(At,Vt,Sr)/this.worldSize)},Ti.prototype.coordinatePoint=function(X){var de=[X.x*this.worldSize,X.y*this.worldSize,0,1];return t.transformMat4(de,de,this.pixelMatrix),new t.Point(de[0]/de[3],de[1]/de[3])},Ti.prototype.getBounds=function(){return new t.LngLatBounds().extend(this.pointLocation(new t.Point(0,0))).extend(this.pointLocation(new t.Point(this.width,0))).extend(this.pointLocation(new t.Point(this.width,this.height))).extend(this.pointLocation(new t.Point(0,this.height)))},Ti.prototype.getMaxBounds=function(){return!this.latRange||this.latRange.length!==2||!this.lngRange||this.lngRange.length!==2?null:new t.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]])},Ti.prototype.setMaxBounds=function(X){X?(this.lngRange=[X.getWest(),X.getEast()],this.latRange=[X.getSouth(),X.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Ti.prototype.calculatePosMatrix=function(X,de){de===void 0&&(de=!1);var Q=X.key,ge=de?this._alignedPosMatrixCache:this._posMatrixCache;if(ge[Q])return ge[Q];var Ee=X.canonical,Pe=this.worldSize/this.zoomScale(Ee.z),Ze=Ee.x+Math.pow(2,Ee.z)*X.wrap,ft=t.identity(new Float64Array(16));return t.translate(ft,ft,[Ze*Pe,Ee.y*Pe,0]),t.scale(ft,ft,[Pe/t.EXTENT,Pe/t.EXTENT,1]),t.multiply(ft,de?this.alignedProjMatrix:this.projMatrix,ft),ge[Q]=new Float32Array(ft),ge[Q]},Ti.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Ti.prototype._constrain=function(){if(!(!this.center||!this.width||!this.height||this._constraining)){this._constraining=!0;var X=-90,de=90,Q=-180,ge=180,Ee,Pe,Ze,ft,At=this.size,Vt=this._unmodified;if(this.latRange){var $t=this.latRange;X=t.mercatorYfromLat($t[1])*this.worldSize,de=t.mercatorYfromLat($t[0])*this.worldSize,Ee=de-X<At.y?At.y/(de-X):0}if(this.lngRange){var ir=this.lngRange;Q=t.mercatorXfromLng(ir[0])*this.worldSize,ge=t.mercatorXfromLng(ir[1])*this.worldSize,Pe=ge-Q<At.x?At.x/(ge-Q):0}var Sr=this.point,Br=Math.max(Pe||0,Ee||0);if(Br){this.center=this.unproject(new t.Point(Pe?(ge+Q)/2:Sr.x,Ee?(de+X)/2:Sr.y)),this.zoom+=this.scaleZoom(Br),this._unmodified=Vt,this._constraining=!1;return}if(this.latRange){var Vr=Sr.y,Nr=At.y/2;Vr-Nr<X&&(ft=X+Nr),Vr+Nr>de&&(ft=de-Nr)}if(this.lngRange){var Kr=Sr.x,hn=At.x/2;Kr-hn<Q&&(Ze=Q+hn),Kr+hn>ge&&(Ze=ge-hn)}(Ze!==void 0||ft!==void 0)&&(this.center=this.unproject(new t.Point(Ze!==void 0?Ze:Sr.x,ft!==void 0?ft:Sr.y))),this._unmodified=Vt,this._constraining=!1}},Ti.prototype._calcMatrices=function(){if(!!this.height){var X=this._fov/2,de=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(X)*this.height;var Q=Math.PI/2+this._pitch,ge=this._fov*(.5+de.y/this.height),Ee=Math.sin(ge)*this.cameraToCenterDistance/Math.sin(t.clamp(Math.PI-Q-ge,.01,Math.PI-.01)),Pe=this.point,Ze=Pe.x,ft=Pe.y,At=Math.cos(Math.PI/2-this._pitch)*Ee+this.cameraToCenterDistance,Vt=At*1.01,$t=this.height/50,ir=new Float64Array(16);t.perspective(ir,this._fov,this.width/this.height,$t,Vt),ir[8]=-de.x*2/this.width,ir[9]=de.y*2/this.height,t.scale(ir,ir,[1,-1,1]),t.translate(ir,ir,[0,0,-this.cameraToCenterDistance]),t.rotateX(ir,ir,this._pitch),t.rotateZ(ir,ir,this.angle),t.translate(ir,ir,[-Ze,-ft,0]),this.mercatorMatrix=t.scale([],ir,[this.worldSize,this.worldSize,this.worldSize]),t.scale(ir,ir,[1,1,t.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=ir,this.invProjMatrix=t.invert([],this.projMatrix);var Sr=this.width%2/2,Br=this.height%2/2,Vr=Math.cos(this.angle),Nr=Math.sin(this.angle),Kr=Ze-Math.round(Ze)+Vr*Sr+Nr*Br,hn=ft-Math.round(ft)+Vr*Br+Nr*Sr,Sn=new Float64Array(ir);if(t.translate(Sn,Sn,[Kr>.5?Kr-1:Kr,hn>.5?hn-1:hn,0]),this.alignedProjMatrix=Sn,ir=t.create(),t.scale(ir,ir,[this.width/2,-this.height/2,1]),t.translate(ir,ir,[1,-1,0]),this.labelPlaneMatrix=ir,ir=t.create(),t.scale(ir,ir,[1,-1,1]),t.translate(ir,ir,[-1,-1,0]),t.scale(ir,ir,[2/this.width,2/this.height,1]),this.glCoordMatrix=ir,this.pixelMatrix=t.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),ir=t.invert(new Float64Array(16),this.pixelMatrix),!ir)throw new Error("failed to invert matrix");this.pixelMatrixInverse=ir,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Ti.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var X=this.pointCoordinate(new t.Point(0,0)),de=[X.x*this.worldSize,X.y*this.worldSize,0,1],Q=t.transformMat4(de,de,this.pixelMatrix);return Q[3]/this.cameraToCenterDistance},Ti.prototype.getCameraPoint=function(){var X=this._pitch,de=Math.tan(X)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new t.Point(0,de))},Ti.prototype.getCameraQueryGeometry=function(X){var de=this.getCameraPoint();if(X.length===1)return[X[0],de];for(var Q=de.x,ge=de.y,Ee=de.x,Pe=de.y,Ze=0,ft=X;Ze<ft.length;Ze+=1){var At=ft[Ze];Q=Math.min(Q,At.x),ge=Math.min(ge,At.y),Ee=Math.max(Ee,At.x),Pe=Math.max(Pe,At.y)}return[new t.Point(Q,ge),new t.Point(Ee,ge),new t.Point(Ee,Pe),new t.Point(Q,Pe),new t.Point(Q,ge)]},Object.defineProperties(Ti.prototype,Ei);function Ps(ve,X){var de=!1,Q=null,ge=function(){Q=null,de&&(ve(),Q=setTimeout(ge,X),de=!1)};return function(){return de=!0,Q||ge(),Q}}var Mo=function(X){this._hashName=X&&encodeURIComponent(X),t.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Ps(this._updateHashUnthrottled.bind(this),30*1e3/100)};Mo.prototype.addTo=function(X){return this._map=X,t.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Mo.prototype.remove=function(){return t.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Mo.prototype.getHashString=function(X){var de=this._map.getCenter(),Q=Math.round(this._map.getZoom()*100)/100,ge=Math.ceil((Q*Math.LN2+Math.log(512/360/.5))/Math.LN10),Ee=Math.pow(10,ge),Pe=Math.round(de.lng*Ee)/Ee,Ze=Math.round(de.lat*Ee)/Ee,ft=this._map.getBearing(),At=this._map.getPitch(),Vt="";if(X?Vt+="/"+Pe+"/"+Ze+"/"+Q:Vt+=Q+"/"+Ze+"/"+Pe,(ft||At)&&(Vt+="/"+Math.round(ft*10)/10),At&&(Vt+="/"+Math.round(At)),this._hashName){var $t=this._hashName,ir=!1,Sr=t.window.location.hash.slice(1).split("&").map(function(Br){var Vr=Br.split("=")[0];return Vr===$t?(ir=!0,Vr+"="+Vt):Br}).filter(function(Br){return Br});return ir||Sr.push($t+"="+Vt),"#"+Sr.join("&")}return"#"+Vt},Mo.prototype._getCurrentHash=function(){var X=this,de=t.window.location.hash.replace("#","");if(this._hashName){var Q;return de.split("&").map(function(ge){return ge.split("=")}).forEach(function(ge){ge[0]===X._hashName&&(Q=ge)}),(Q&&Q[1]||"").split("/")}return de.split("/")},Mo.prototype._onHashChange=function(){var X=this._getCurrentHash();if(X.length>=3&&!X.some(function(Q){return isNaN(Q)})){var de=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(X[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+X[2],+X[1]],zoom:+X[0],bearing:de,pitch:+(X[4]||0)}),!0}return!1},Mo.prototype._updateHashUnthrottled=function(){var X=this.getHashString();try{t.window.history.replaceState(t.window.history.state,"",X)}catch{}};var jo={linearity:.3,easing:t.bezier(0,0,.3,1)},os=t.extend({deceleration:2500,maxSpeed:1400},jo),he=t.extend({deceleration:20,maxSpeed:1400},jo),Te=t.extend({deceleration:1e3,maxSpeed:360},jo),Le=t.extend({deceleration:1e3,maxSpeed:90},jo),Be=function(X){this._map=X,this.clear()};Be.prototype.clear=function(){this._inertiaBuffer=[]},Be.prototype.record=function(X){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:t.browser.now(),settings:X})},Be.prototype._drainInertiaBuffer=function(){for(var X=this._inertiaBuffer,de=t.browser.now(),Q=160;X.length>0&&de-X[0].time>Q;)X.shift()},Be.prototype._onMoveEnd=function(X){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var de={zoom:0,bearing:0,pitch:0,pan:new t.Point(0,0),pinchAround:void 0,around:void 0},Q=0,ge=this._inertiaBuffer;Q<ge.length;Q+=1){var Ee=ge[Q],Pe=Ee.settings;de.zoom+=Pe.zoomDelta||0,de.bearing+=Pe.bearingDelta||0,de.pitch+=Pe.pitchDelta||0,Pe.panDelta&&de.pan._add(Pe.panDelta),Pe.around&&(de.around=Pe.around),Pe.pinchAround&&(de.pinchAround=Pe.pinchAround)}var Ze=this._inertiaBuffer[this._inertiaBuffer.length-1],ft=Ze.time-this._inertiaBuffer[0].time,At={};if(de.pan.mag()){var Vt=Ke(de.pan.mag(),ft,t.extend({},os,X||{}));At.offset=de.pan.mult(Vt.amount/de.pan.mag()),At.center=this._map.transform.center,Ne(At,Vt)}if(de.zoom){var $t=Ke(de.zoom,ft,he);At.zoom=this._map.transform.zoom+$t.amount,Ne(At,$t)}if(de.bearing){var ir=Ke(de.bearing,ft,Te);At.bearing=this._map.transform.bearing+t.clamp(ir.amount,-179,179),Ne(At,ir)}if(de.pitch){var Sr=Ke(de.pitch,ft,Le);At.pitch=this._map.transform.pitch+Sr.amount,Ne(At,Sr)}if(At.zoom||At.bearing){var Br=de.pinchAround===void 0?de.around:de.pinchAround;At.around=Br?this._map.unproject(Br):this._map.getCenter()}return this.clear(),t.extend(At,{noMoveStart:!0})}};function Ne(ve,X){(!ve.duration||ve.duration<X.duration)&&(ve.duration=X.duration,ve.easing=X.easing)}function Ke(ve,X,de){var Q=de.maxSpeed,ge=de.linearity,Ee=de.deceleration,Pe=t.clamp(ve*ge/(X/1e3),-Q,Q),Ze=Math.abs(Pe)/(Ee*ge);return{easing:de.easing,duration:Ze*1e3,amount:Pe*(Ze/2)}}var yt=function(ve){function X(Q,ge,Ee,Pe){Pe===void 0&&(Pe={});var Ze=a.mousePos(ge.getCanvasContainer(),Ee),ft=ge.unproject(Ze);ve.call(this,Q,t.extend({point:Ze,lngLat:ft,originalEvent:Ee},Pe)),this._defaultPrevented=!1,this.target=ge}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,de),X}(t.Event),vt=function(ve){function X(Q,ge,Ee){var Pe=Q==="touchend"?Ee.changedTouches:Ee.touches,Ze=a.touchPos(ge.getCanvasContainer(),Pe),ft=Ze.map(function($t){return ge.unproject($t)}),At=Ze.reduce(function($t,ir,Sr,Br){return $t.add(ir.div(Br.length))},new t.Point(0,0)),Vt=ge.unproject(At);ve.call(this,Q,{points:Ze,point:At,lngLats:ft,lngLat:Vt,originalEvent:Ee}),this._defaultPrevented=!1}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,de),X}(t.Event),Ct=function(ve){function X(Q,ge,Ee){ve.call(this,Q,{originalEvent:Ee}),this._defaultPrevented=!1}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={defaultPrevented:{configurable:!0}};return X.prototype.preventDefault=function(){this._defaultPrevented=!0},de.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(X.prototype,de),X}(t.Event),Ut=function(X,de){this._map=X,this._clickTolerance=de.clickTolerance};Ut.prototype.reset=function(){delete this._mousedownPos},Ut.prototype.wheel=function(X){return this._firePreventable(new Ct(X.type,this._map,X))},Ut.prototype.mousedown=function(X,de){return this._mousedownPos=de,this._firePreventable(new yt(X.type,this._map,X))},Ut.prototype.mouseup=function(X){this._map.fire(new yt(X.type,this._map,X))},Ut.prototype.click=function(X,de){this._mousedownPos&&this._mousedownPos.dist(de)>=this._clickTolerance||this._map.fire(new yt(X.type,this._map,X))},Ut.prototype.dblclick=function(X){return this._firePreventable(new yt(X.type,this._map,X))},Ut.prototype.mouseover=function(X){this._map.fire(new yt(X.type,this._map,X))},Ut.prototype.mouseout=function(X){this._map.fire(new yt(X.type,this._map,X))},Ut.prototype.touchstart=function(X){return this._firePreventable(new vt(X.type,this._map,X))},Ut.prototype.touchmove=function(X){this._map.fire(new vt(X.type,this._map,X))},Ut.prototype.touchend=function(X){this._map.fire(new vt(X.type,this._map,X))},Ut.prototype.touchcancel=function(X){this._map.fire(new vt(X.type,this._map,X))},Ut.prototype._firePreventable=function(X){if(this._map.fire(X),X.defaultPrevented)return{}},Ut.prototype.isEnabled=function(){return!0},Ut.prototype.isActive=function(){return!1},Ut.prototype.enable=function(){},Ut.prototype.disable=function(){};var Yt=function(X){this._map=X};Yt.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Yt.prototype.mousemove=function(X){this._map.fire(new yt(X.type,this._map,X))},Yt.prototype.mousedown=function(){this._delayContextMenu=!0},Yt.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new yt("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Yt.prototype.contextmenu=function(X){this._delayContextMenu?this._contextMenuEvent=X:this._map.fire(new yt(X.type,this._map,X)),this._map.listens("contextmenu")&&X.preventDefault()},Yt.prototype.isEnabled=function(){return!0},Yt.prototype.isActive=function(){return!1},Yt.prototype.enable=function(){},Yt.prototype.disable=function(){};var Xt=function(X,de){this._map=X,this._el=X.getCanvasContainer(),this._container=X.getContainer(),this._clickTolerance=de.clickTolerance||1};Xt.prototype.isEnabled=function(){return!!this._enabled},Xt.prototype.isActive=function(){return!!this._active},Xt.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Xt.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Xt.prototype.mousedown=function(X,de){!this.isEnabled()||!(X.shiftKey&&X.button===0)||(a.disableDrag(),this._startPos=this._lastPos=de,this._active=!0)},Xt.prototype.mousemoveWindow=function(X,de){if(!!this._active){var Q=de;if(!(this._lastPos.equals(Q)||!this._box&&Q.dist(this._startPos)<this._clickTolerance)){var ge=this._startPos;this._lastPos=Q,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",X));var Ee=Math.min(ge.x,Q.x),Pe=Math.max(ge.x,Q.x),Ze=Math.min(ge.y,Q.y),ft=Math.max(ge.y,Q.y);a.setTransform(this._box,"translate("+Ee+"px,"+Ze+"px)"),this._box.style.width=Pe-Ee+"px",this._box.style.height=ft-Ze+"px"}}},Xt.prototype.mouseupWindow=function(X,de){var Q=this;if(!!this._active&&X.button===0){var ge=this._startPos,Ee=de;if(this.reset(),a.suppressClick(),ge.x===Ee.x&&ge.y===Ee.y)this._fireEvent("boxzoomcancel",X);else return this._map.fire(new t.Event("boxzoomend",{originalEvent:X})),{cameraAnimation:function(Pe){return Pe.fitScreenCoordinates(ge,Ee,Q._map.getBearing(),{linear:!0})}}}},Xt.prototype.keydown=function(X){!this._active||X.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",X))},Xt.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},Xt.prototype._fireEvent=function(X,de){return this._map.fire(new t.Event(X,{originalEvent:de}))};function _r(ve,X){for(var de={},Q=0;Q<ve.length;Q++)de[ve[Q].identifier]=X[Q];return de}function Qr(ve){for(var X=new t.Point(0,0),de=0,Q=ve;de<Q.length;de+=1){var ge=Q[de];X._add(ge)}return X.div(ve.length)}var cn=500,Mr=500,Ur=30,Yr=function(X){this.reset(),this.numTouches=X.numTouches};Yr.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},Yr.prototype.touchstart=function(X,de,Q){(this.centroid||Q.length>this.numTouches)&&(this.aborted=!0),!this.aborted&&(this.startTime===void 0&&(this.startTime=X.timeStamp),Q.length===this.numTouches&&(this.centroid=Qr(de),this.touches=_r(Q,de)))},Yr.prototype.touchmove=function(X,de,Q){if(!(this.aborted||!this.centroid)){var ge=_r(Q,de);for(var Ee in this.touches){var Pe=this.touches[Ee],Ze=ge[Ee];(!Ze||Ze.dist(Pe)>Ur)&&(this.aborted=!0)}}},Yr.prototype.touchend=function(X,de,Q){if((!this.centroid||X.timeStamp-this.startTime>Mr)&&(this.aborted=!0),Q.length===0){var ge=!this.aborted&&this.centroid;if(this.reset(),ge)return ge}};var sn=function(X){this.singleTap=new Yr(X),this.numTaps=X.numTaps,this.reset()};sn.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},sn.prototype.touchstart=function(X,de,Q){this.singleTap.touchstart(X,de,Q)},sn.prototype.touchmove=function(X,de,Q){this.singleTap.touchmove(X,de,Q)},sn.prototype.touchend=function(X,de,Q){var ge=this.singleTap.touchend(X,de,Q);if(ge){var Ee=X.timeStamp-this.lastTime<cn,Pe=!this.lastTap||this.lastTap.dist(ge)<Ur;if((!Ee||!Pe)&&this.reset(),this.count++,this.lastTime=X.timeStamp,this.lastTap=ge,this.count===this.numTaps)return this.reset(),ge}};var un=function(){this._zoomIn=new sn({numTouches:1,numTaps:2}),this._zoomOut=new sn({numTouches:2,numTaps:1}),this.reset()};un.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},un.prototype.touchstart=function(X,de,Q){this._zoomIn.touchstart(X,de,Q),this._zoomOut.touchstart(X,de,Q)},un.prototype.touchmove=function(X,de,Q){this._zoomIn.touchmove(X,de,Q),this._zoomOut.touchmove(X,de,Q)},un.prototype.touchend=function(X,de,Q){var ge=this,Ee=this._zoomIn.touchend(X,de,Q),Pe=this._zoomOut.touchend(X,de,Q);if(Ee)return this._active=!0,X.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()+1,around:Ze.unproject(Ee)},{originalEvent:X})}};if(Pe)return this._active=!0,X.preventDefault(),setTimeout(function(){return ge.reset()},0),{cameraAnimation:function(Ze){return Ze.easeTo({duration:300,zoom:Ze.getZoom()-1,around:Ze.unproject(Pe)},{originalEvent:X})}}},un.prototype.touchcancel=function(){this.reset()},un.prototype.enable=function(){this._enabled=!0},un.prototype.disable=function(){this._enabled=!1,this.reset()},un.prototype.isEnabled=function(){return this._enabled},un.prototype.isActive=function(){return this._active};var Zr=0,Wn=2,aa=function(X){this.reset(),this._clickTolerance=X.clickTolerance||1};aa.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},aa.prototype._correctButton=function(X,de){return!1},aa.prototype._move=function(X,de){return{}},aa.prototype.mousedown=function(X,de){if(!this._lastPoint){var Q=a.mouseButton(X);!this._correctButton(X,Q)||(this._lastPoint=de,this._eventButton=Q)}},aa.prototype.mousemoveWindow=function(X,de){var Q=this._lastPoint;if(!!Q&&(X.preventDefault(),!(!this._moved&&de.dist(Q)<this._clickTolerance)))return this._moved=!0,this._lastPoint=de,this._move(Q,de)},aa.prototype.mouseupWindow=function(X){var de=a.mouseButton(X);de===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},aa.prototype.enable=function(){this._enabled=!0},aa.prototype.disable=function(){this._enabled=!1,this.reset()},aa.prototype.isEnabled=function(){return this._enabled},aa.prototype.isActive=function(){return this._active};var Aa=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.mousedown=function(Q,ge){ve.prototype.mousedown.call(this,Q,ge),this._lastPoint&&(this._active=!0)},X.prototype._correctButton=function(Q,ge){return ge===Zr&&!Q.ctrlKey},X.prototype._move=function(Q,ge){return{around:ge,panDelta:ge.sub(Q)}},X}(aa),sa=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype._correctButton=function(Q,ge){return ge===Zr&&Q.ctrlKey||ge===Wn},X.prototype._move=function(Q,ge){var Ee=.8,Pe=(ge.x-Q.x)*Ee;if(Pe)return this._active=!0,{bearingDelta:Pe}},X.prototype.contextmenu=function(Q){Q.preventDefault()},X}(aa),La=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype._correctButton=function(Q,ge){return ge===Zr&&Q.ctrlKey||ge===Wn},X.prototype._move=function(Q,ge){var Ee=-.5,Pe=(ge.y-Q.y)*Ee;if(Pe)return this._active=!0,{pitchDelta:Pe}},X.prototype.contextmenu=function(Q){Q.preventDefault()},X}(aa),ca=function(X){this._minTouches=1,this._clickTolerance=X.clickTolerance||1,this.reset()};ca.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new t.Point(0,0)},ca.prototype.touchstart=function(X,de,Q){return this._calculateTransform(X,de,Q)},ca.prototype.touchmove=function(X,de,Q){if(!!this._active)return X.preventDefault(),this._calculateTransform(X,de,Q)},ca.prototype.touchend=function(X,de,Q){this._calculateTransform(X,de,Q),this._active&&Q.length<this._minTouches&&this.reset()},ca.prototype.touchcancel=function(){this.reset()},ca.prototype._calculateTransform=function(X,de,Q){Q.length>0&&(this._active=!0);var ge=_r(Q,de),Ee=new t.Point(0,0),Pe=new t.Point(0,0),Ze=0;for(var ft in ge){var At=ge[ft],Vt=this._touches[ft];Vt&&(Ee._add(At),Pe._add(At.sub(Vt)),Ze++,ge[ft]=At)}if(this._touches=ge,!(Ze<this._minTouches||!Pe.mag())){var $t=Pe.div(Ze);if(this._sum._add($t),!(this._sum.mag()<this._clickTolerance)){var ir=Ee.div(Ze);return{around:ir,panDelta:$t}}}},ca.prototype.enable=function(){this._enabled=!0},ca.prototype.disable=function(){this._enabled=!1,this.reset()},ca.prototype.isEnabled=function(){return this._enabled},ca.prototype.isActive=function(){return this._active};var Ga=function(){this.reset()};Ga.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},Ga.prototype._start=function(X){},Ga.prototype._move=function(X,de,Q){return{}},Ga.prototype.touchstart=function(X,de,Q){this._firstTwoTouches||Q.length<2||(this._firstTwoTouches=[Q[0].identifier,Q[1].identifier],this._start([de[0],de[1]]))},Ga.prototype.touchmove=function(X,de,Q){if(!!this._firstTwoTouches){X.preventDefault();var ge=this._firstTwoTouches,Ee=ge[0],Pe=ge[1],Ze=za(Q,de,Ee),ft=za(Q,de,Pe);if(!(!Ze||!ft)){var At=this._aroundCenter?null:Ze.add(ft).div(2);return this._move([Ze,ft],At,X)}}},Ga.prototype.touchend=function(X,de,Q){if(!!this._firstTwoTouches){var ge=this._firstTwoTouches,Ee=ge[0],Pe=ge[1],Ze=za(Q,de,Ee),ft=za(Q,de,Pe);Ze&&ft||(this._active&&a.suppressClick(),this.reset())}},Ga.prototype.touchcancel=function(){this.reset()},Ga.prototype.enable=function(X){this._enabled=!0,this._aroundCenter=!!X&&X.around==="center"},Ga.prototype.disable=function(){this._enabled=!1,this.reset()},Ga.prototype.isEnabled=function(){return this._enabled},Ga.prototype.isActive=function(){return this._active};function za(ve,X,de){for(var Q=0;Q<ve.length;Q++)if(ve[Q].identifier===de)return X[Q]}var ei=.1;function bi(ve,X){return Math.log(ve/X)/Math.LN2}var bo=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.reset=function(){ve.prototype.reset.call(this),delete this._distance,delete this._startDistance},X.prototype._start=function(Q){this._startDistance=this._distance=Q[0].dist(Q[1])},X.prototype._move=function(Q,ge){var Ee=this._distance;if(this._distance=Q[0].dist(Q[1]),!(!this._active&&Math.abs(bi(this._distance,this._startDistance))<ei))return this._active=!0,{zoomDelta:bi(this._distance,Ee),pinchAround:ge}},X}(Ga),Ni=25;function va(ve,X){return ve.angleWith(X)*180/Math.PI}var si=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.reset=function(){ve.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},X.prototype._start=function(Q){this._startVector=this._vector=Q[0].sub(Q[1]),this._minDiameter=Q[0].dist(Q[1])},X.prototype._move=function(Q,ge){var Ee=this._vector;if(this._vector=Q[0].sub(Q[1]),!(!this._active&&this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:va(this._vector,Ee),pinchAround:ge}},X.prototype._isBelowThreshold=function(Q){this._minDiameter=Math.min(this._minDiameter,Q.mag());var ge=Math.PI*this._minDiameter,Ee=Ni/ge*360,Pe=va(Q,this._startVector);return Math.abs(Pe)<Ee},X}(Ga);function Za(ve){return Math.abs(ve.y)>Math.abs(ve.x)}var Ci=100,fi=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.reset=function(){ve.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},X.prototype._start=function(Q){this._lastPoints=Q,Za(Q[0].sub(Q[1]))&&(this._valid=!1)},X.prototype._move=function(Q,ge,Ee){var Pe=Q[0].sub(this._lastPoints[0]),Ze=Q[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(Pe,Ze,Ee.timeStamp),!!this._valid){this._lastPoints=Q,this._active=!0;var ft=(Pe.y+Ze.y)/2,At=-.5;return{pitchDelta:ft*At}}},X.prototype.gestureBeginsVertically=function(Q,ge,Ee){if(this._valid!==void 0)return this._valid;var Pe=2,Ze=Q.mag()>=Pe,ft=ge.mag()>=Pe;if(!(!Ze&&!ft)){if(!Ze||!ft)return this._firstMove===void 0&&(this._firstMove=Ee),Ee-this._firstMove<Ci?void 0:!1;var At=Q.y>0==ge.y>0;return Za(Q)&&Za(ge)&&At}},X}(Ga),vo={panStep:100,bearingStep:15,pitchStep:10},no=function(){var X=vo;this._panStep=X.panStep,this._bearingStep=X.bearingStep,this._pitchStep=X.pitchStep};no.prototype.reset=function(){this._active=!1},no.prototype.keydown=function(X){var de=this;if(!(X.altKey||X.ctrlKey||X.metaKey)){var Q=0,ge=0,Ee=0,Pe=0,Ze=0;switch(X.keyCode){case 61:case 107:case 171:case 187:Q=1;break;case 189:case 109:case 173:Q=-1;break;case 37:X.shiftKey?ge=-1:(X.preventDefault(),Pe=-1);break;case 39:X.shiftKey?ge=1:(X.preventDefault(),Pe=1);break;case 38:X.shiftKey?Ee=1:(X.preventDefault(),Ze=-1);break;case 40:X.shiftKey?Ee=-1:(X.preventDefault(),Ze=1);break;default:return}return{cameraAnimation:function(ft){var At=ft.getZoom();ft.easeTo({duration:300,easeId:"keyboardHandler",easing:So,zoom:Q?Math.round(At)+Q*(X.shiftKey?2:1):At,bearing:ft.getBearing()+ge*de._bearingStep,pitch:ft.getPitch()+Ee*de._pitchStep,offset:[-Pe*de._panStep,-Ze*de._panStep],center:ft.getCenter()},{originalEvent:X})}}}},no.prototype.enable=function(){this._enabled=!0},no.prototype.disable=function(){this._enabled=!1,this.reset()},no.prototype.isEnabled=function(){return this._enabled},no.prototype.isActive=function(){return this._active};function So(ve){return ve*(2-ve)}var ss=4.000244140625,es=1/100,ls=1/450,Zi=2,Hi=function(X,de){this._map=X,this._el=X.getCanvasContainer(),this._handler=de,this._delta=0,this._defaultZoomRate=es,this._wheelZoomRate=ls,t.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Hi.prototype.setZoomRate=function(X){this._defaultZoomRate=X},Hi.prototype.setWheelZoomRate=function(X){this._wheelZoomRate=X},Hi.prototype.isEnabled=function(){return!!this._enabled},Hi.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},Hi.prototype.isZooming=function(){return!!this._zooming},Hi.prototype.enable=function(X){this.isEnabled()||(this._enabled=!0,this._aroundCenter=X&&X.around==="center")},Hi.prototype.disable=function(){!this.isEnabled()||(this._enabled=!1)},Hi.prototype.wheel=function(X){if(!!this.isEnabled()){var de=X.deltaMode===t.window.WheelEvent.DOM_DELTA_LINE?X.deltaY*40:X.deltaY,Q=t.browser.now(),ge=Q-(this._lastWheelEventTime||0);this._lastWheelEventTime=Q,de!==0&&de%ss==0?this._type="wheel":de!==0&&Math.abs(de)<4?this._type="trackpad":ge>400?(this._type=null,this._lastValue=de,this._timeout=setTimeout(this._onTimeout,40,X)):this._type||(this._type=Math.abs(ge*de)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,de+=this._lastValue)),X.shiftKey&&de&&(de=de/4),this._type&&(this._lastWheelEvent=X,this._delta-=de,this._active||this._start(X)),X.preventDefault()}},Hi.prototype._onTimeout=function(X){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(X)},Hi.prototype._start=function(X){if(!!this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var de=a.mousePos(this._el,X);this._around=t.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(de)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Hi.prototype.renderFrame=function(){return this._onScrollFrame()},Hi.prototype._onScrollFrame=function(){var X=this;if(!!this._frameId&&(this._frameId=null,!!this.isActive())){var de=this._map.transform;if(this._delta!==0){var Q=this._type==="wheel"&&Math.abs(this._delta)>ss?this._wheelZoomRate:this._defaultZoomRate,ge=Zi/(1+Math.exp(-Math.abs(this._delta*Q)));this._delta<0&&ge!==0&&(ge=1/ge);var Ee=typeof this._targetZoom=="number"?de.zoomScale(this._targetZoom):de.scale;this._targetZoom=Math.min(de.maxZoom,Math.max(de.minZoom,de.scaleZoom(Ee*ge))),this._type==="wheel"&&(this._startZoom=de.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var Pe=typeof this._targetZoom=="number"?this._targetZoom:de.zoom,Ze=this._startZoom,ft=this._easing,At=!1,Vt;if(this._type==="wheel"&&Ze&&ft){var $t=Math.min((t.browser.now()-this._lastWheelEventTime)/200,1),ir=ft($t);Vt=t.number(Ze,Pe,ir),$t<1?this._frameId||(this._frameId=!0):At=!0}else Vt=Pe,At=!0;return this._active=!0,At&&(this._active=!1,this._finishTimeout=setTimeout(function(){X._zooming=!1,X._handler._triggerRenderFrame(),delete X._targetZoom,delete X._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!At,zoomDelta:Vt-de.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Hi.prototype._smoothOutEasing=function(X){var de=t.ease;if(this._prevEase){var Q=this._prevEase,ge=(t.browser.now()-Q.start)/Q.duration,Ee=Q.easing(ge+.01)-Q.easing(ge),Pe=.27/Math.sqrt(Ee*Ee+1e-4)*.01,Ze=Math.sqrt(.27*.27-Pe*Pe);de=t.bezier(Pe,Ze,.25,1)}return this._prevEase={start:t.browser.now(),duration:X,easing:de},de},Hi.prototype.reset=function(){this._active=!1};var Na=function(X,de){this._clickZoom=X,this._tapZoom=de};Na.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Na.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Na.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Na.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Ka=function(){this.reset()};Ka.prototype.reset=function(){this._active=!1},Ka.prototype.dblclick=function(X,de){return X.preventDefault(),{cameraAnimation:function(Q){Q.easeTo({duration:300,zoom:Q.getZoom()+(X.shiftKey?-1:1),around:Q.unproject(de)},{originalEvent:X})}}},Ka.prototype.enable=function(){this._enabled=!0},Ka.prototype.disable=function(){this._enabled=!1,this.reset()},Ka.prototype.isEnabled=function(){return this._enabled},Ka.prototype.isActive=function(){return this._active};var Lo=function(){this._tap=new sn({numTouches:1,numTaps:1}),this.reset()};Lo.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},Lo.prototype.touchstart=function(X,de,Q){this._swipePoint||(this._tapTime&&X.timeStamp-this._tapTime>cn&&this.reset(),this._tapTime?Q.length>0&&(this._swipePoint=de[0],this._swipeTouch=Q[0].identifier):this._tap.touchstart(X,de,Q))},Lo.prototype.touchmove=function(X,de,Q){if(!this._tapTime)this._tap.touchmove(X,de,Q);else if(this._swipePoint){if(Q[0].identifier!==this._swipeTouch)return;var ge=de[0],Ee=ge.y-this._swipePoint.y;return this._swipePoint=ge,X.preventDefault(),this._active=!0,{zoomDelta:Ee/128}}},Lo.prototype.touchend=function(X,de,Q){if(this._tapTime)this._swipePoint&&Q.length===0&&this.reset();else{var ge=this._tap.touchend(X,de,Q);ge&&(this._tapTime=X.timeStamp)}},Lo.prototype.touchcancel=function(){this.reset()},Lo.prototype.enable=function(){this._enabled=!0},Lo.prototype.disable=function(){this._enabled=!1,this.reset()},Lo.prototype.isEnabled=function(){return this._enabled},Lo.prototype.isActive=function(){return this._active};var so=function(X,de,Q){this._el=X,this._mousePan=de,this._touchPan=Q};so.prototype.enable=function(X){this._inertiaOptions=X||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},so.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},so.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},so.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Xo=function(X,de,Q){this._pitchWithRotate=X.pitchWithRotate,this._mouseRotate=de,this._mousePitch=Q};Xo.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Xo.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Xo.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Xo.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Qi=function(X,de,Q,ge){this._el=X,this._touchZoom=de,this._touchRotate=Q,this._tapDragZoom=ge,this._rotationDisabled=!1,this._enabled=!0};Qi.prototype.enable=function(X){this._touchZoom.enable(X),this._rotationDisabled||this._touchRotate.enable(X),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Qi.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Qi.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Qi.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Qi.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Qi.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var us=function(ve){return ve.zoom||ve.drag||ve.pitch||ve.rotate},Vs=function(ve){function X(){ve.apply(this,arguments)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X}(t.Event);function Nu(ve){return ve.panDelta&&ve.panDelta.mag()||ve.zoomDelta||ve.bearingDelta||ve.pitchDelta}var $i=function(X,de){this._map=X,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Be(X),this._bearingSnap=de.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(de),t.bindAll(["handleEvent","handleWindowEvent"],this);var Q=this._el;this._listeners=[[Q,"touchstart",{passive:!1}],[Q,"touchmove",{passive:!1}],[Q,"touchend",void 0],[Q,"touchcancel",void 0],[Q,"mousedown",void 0],[Q,"mousemove",void 0],[Q,"mouseup",void 0],[t.window.document,"mousemove",{capture:!0}],[t.window.document,"mouseup",void 0],[Q,"mouseover",void 0],[Q,"mouseout",void 0],[Q,"dblclick",void 0],[Q,"click",void 0],[Q,"keydown",{capture:!1}],[Q,"keyup",void 0],[Q,"wheel",{passive:!1}],[Q,"contextmenu",void 0],[t.window,"blur",void 0]];for(var ge=0,Ee=this._listeners;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe[0],ft=Pe[1],At=Pe[2];a.addEventListener(Ze,ft,Ze===t.window.document?this.handleWindowEvent:this.handleEvent,At)}};$i.prototype.destroy=function(){for(var X=0,de=this._listeners;X<de.length;X+=1){var Q=de[X],ge=Q[0],Ee=Q[1],Pe=Q[2];a.removeEventListener(ge,Ee,ge===t.window.document?this.handleWindowEvent:this.handleEvent,Pe)}},$i.prototype._addDefaultHandlers=function(X){var de=this._map,Q=de.getCanvasContainer();this._add("mapEvent",new Ut(de,X));var ge=de.boxZoom=new Xt(de,X);this._add("boxZoom",ge);var Ee=new un,Pe=new Ka;de.doubleClickZoom=new Na(Pe,Ee),this._add("tapZoom",Ee),this._add("clickZoom",Pe);var Ze=new Lo;this._add("tapDragZoom",Ze);var ft=de.touchPitch=new fi;this._add("touchPitch",ft);var At=new sa(X),Vt=new La(X);de.dragRotate=new Xo(X,At,Vt),this._add("mouseRotate",At,["mousePitch"]),this._add("mousePitch",Vt,["mouseRotate"]);var $t=new Aa(X),ir=new ca(X);de.dragPan=new so(Q,$t,ir),this._add("mousePan",$t),this._add("touchPan",ir,["touchZoom","touchRotate"]);var Sr=new si,Br=new bo;de.touchZoomRotate=new Qi(Q,Br,Sr,Ze),this._add("touchRotate",Sr,["touchPan","touchZoom"]),this._add("touchZoom",Br,["touchPan","touchRotate"]);var Vr=de.scrollZoom=new Hi(de,this);this._add("scrollZoom",Vr,["mousePan"]);var Nr=de.keyboard=new no;this._add("keyboard",Nr),this._add("blockableMapEvent",new Yt(de));for(var Kr=0,hn=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Kr<hn.length;Kr+=1){var Sn=hn[Kr];X.interactive&&X[Sn]&&de[Sn].enable(X[Sn])}},$i.prototype._add=function(X,de,Q){this._handlers.push({handlerName:X,handler:de,allowed:Q}),this._handlersById[X]=de},$i.prototype.stop=function(){if(!this._updatingCamera){for(var X=0,de=this._handlers;X<de.length;X+=1){var Q=de[X],ge=Q.handler;ge.reset()}this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},$i.prototype.isActive=function(){for(var X=0,de=this._handlers;X<de.length;X+=1){var Q=de[X],ge=Q.handler;if(ge.isActive())return!0}return!1},$i.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},$i.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},$i.prototype.isMoving=function(){return Boolean(us(this._eventsInProgress))||this.isZooming()},$i.prototype._blockedByActive=function(X,de,Q){for(var ge in X)if(ge!==Q&&(!de||de.indexOf(ge)<0))return!0;return!1},$i.prototype.handleWindowEvent=function(X){this.handleEvent(X,X.type+"Window")},$i.prototype._getMapTouches=function(X){for(var de=[],Q=0,ge=X;Q<ge.length;Q+=1){var Ee=ge[Q],Pe=Ee.target;this._el.contains(Pe)&&de.push(Ee)}return de},$i.prototype.handleEvent=function(X,de){if(X.type==="blur"){this.stop();return}this._updatingCamera=!0;for(var Q=X.type==="renderFrame"?void 0:X,ge={needsRenderFrame:!1},Ee={},Pe={},Ze=X.touches?this._getMapTouches(X.touches):void 0,ft=Ze?a.touchPos(this._el,Ze):a.mousePos(this._el,X),At=0,Vt=this._handlers;At<Vt.length;At+=1){var $t=Vt[At],ir=$t.handlerName,Sr=$t.handler,Br=$t.allowed;if(!!Sr.isEnabled()){var Vr=void 0;this._blockedByActive(Pe,Br,ir)?Sr.reset():Sr[de||X.type]&&(Vr=Sr[de||X.type](X,ft,Ze),this.mergeHandlerResult(ge,Ee,Vr,ir,Q),Vr&&Vr.needsRenderFrame&&this._triggerRenderFrame()),(Vr||Sr.isActive())&&(Pe[ir]=Sr)}}var Nr={};for(var Kr in this._previousActiveHandlers)Pe[Kr]||(Nr[Kr]=Q);this._previousActiveHandlers=Pe,(Object.keys(Nr).length||Nu(ge))&&(this._changes.push([ge,Ee,Nr]),this._triggerRenderFrame()),(Object.keys(Pe).length||Nu(ge))&&this._map._stop(!0),this._updatingCamera=!1;var hn=ge.cameraAnimation;hn&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],hn(this._map))},$i.prototype.mergeHandlerResult=function(X,de,Q,ge,Ee){if(!!Q){t.extend(X,Q);var Pe={handlerName:ge,originalEvent:Q.originalEvent||Ee};Q.zoomDelta!==void 0&&(de.zoom=Pe),Q.panDelta!==void 0&&(de.drag=Pe),Q.pitchDelta!==void 0&&(de.pitch=Pe),Q.bearingDelta!==void 0&&(de.rotate=Pe)}},$i.prototype._applyChanges=function(){for(var X={},de={},Q={},ge=0,Ee=this._changes;ge<Ee.length;ge+=1){var Pe=Ee[ge],Ze=Pe[0],ft=Pe[1],At=Pe[2];Ze.panDelta&&(X.panDelta=(X.panDelta||new t.Point(0,0))._add(Ze.panDelta)),Ze.zoomDelta&&(X.zoomDelta=(X.zoomDelta||0)+Ze.zoomDelta),Ze.bearingDelta&&(X.bearingDelta=(X.bearingDelta||0)+Ze.bearingDelta),Ze.pitchDelta&&(X.pitchDelta=(X.pitchDelta||0)+Ze.pitchDelta),Ze.around!==void 0&&(X.around=Ze.around),Ze.pinchAround!==void 0&&(X.pinchAround=Ze.pinchAround),Ze.noInertia&&(X.noInertia=Ze.noInertia),t.extend(de,ft),t.extend(Q,At)}this._updateMapTransform(X,de,Q),this._changes=[]},$i.prototype._updateMapTransform=function(X,de,Q){var ge=this._map,Ee=ge.transform;if(!Nu(X))return this._fireEvents(de,Q);var Pe=X.panDelta,Ze=X.zoomDelta,ft=X.bearingDelta,At=X.pitchDelta,Vt=X.around,$t=X.pinchAround;$t!==void 0&&(Vt=$t),ge._stop(!0),Vt=Vt||ge.transform.centerPoint;var ir=Ee.pointLocation(Pe?Vt.sub(Pe):Vt);ft&&(Ee.bearing+=ft),At&&(Ee.pitch+=At),Ze&&(Ee.zoom+=Ze),Ee.setLocationAtPoint(ir,Vt),this._map._update(),X.noInertia||this._inertia.record(X),this._fireEvents(de,Q)},$i.prototype._fireEvents=function(X,de){var Q=this,ge=us(this._eventsInProgress),Ee=us(X),Pe={};for(var Ze in X){var ft=X[Ze],At=ft.originalEvent;this._eventsInProgress[Ze]||(Pe[Ze+"start"]=At),this._eventsInProgress[Ze]=X[Ze]}!ge&&Ee&&this._fireEvent("movestart",Ee.originalEvent);for(var Vt in Pe)this._fireEvent(Vt,Pe[Vt]);X.rotate&&(this._bearingChanged=!0),Ee&&this._fireEvent("move",Ee.originalEvent);for(var $t in X){var ir=X[$t],Sr=ir.originalEvent;this._fireEvent($t,Sr)}var Br={},Vr;for(var Nr in this._eventsInProgress){var Kr=this._eventsInProgress[Nr],hn=Kr.handlerName,Sn=Kr.originalEvent;this._handlersById[hn].isActive()||(delete this._eventsInProgress[Nr],Vr=de[hn]||Sn,Br[Nr+"end"]=Vr)}for(var Nn in Br)this._fireEvent(Nn,Br[Nn]);var Qn=us(this._eventsInProgress);if((ge||Ee)&&!Qn){this._updatingCamera=!0;var ta=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),qn=function(pa){return pa!==0&&-Q._bearingSnap<pa&&pa<Q._bearingSnap};ta?(qn(ta.bearing||this._map.getBearing())&&(ta.bearing=0),this._map.easeTo(ta,{originalEvent:Vr})):(this._map.fire(new t.Event("moveend",{originalEvent:Vr})),qn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},$i.prototype._fireEvent=function(X,de){this._map.fire(new t.Event(X,de?{originalEvent:de}:{}))},$i.prototype._triggerRenderFrame=function(){var X=this;this._frameId===void 0&&(this._frameId=this._map._requestRenderFrame(function(de){delete X._frameId,X.handleEvent(new Vs("renderFrame",{timeStamp:de})),X._applyChanges()}))};var Rc=function(ve){function X(de,Q){ve.call(this),this._moving=!1,this._zooming=!1,this.transform=de,this._bearingSnap=Q.bearingSnap,t.bindAll(["_renderFrameCallback"],this)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.getCenter=function(){return new t.LngLat(this.transform.center.lng,this.transform.center.lat)},X.prototype.setCenter=function(Q,ge){return this.jumpTo({center:Q},ge)},X.prototype.panBy=function(Q,ge,Ee){return Q=t.Point.convert(Q).mult(-1),this.panTo(this.transform.center,t.extend({offset:Q},ge),Ee)},X.prototype.panTo=function(Q,ge,Ee){return this.easeTo(t.extend({center:Q},ge),Ee)},X.prototype.getZoom=function(){return this.transform.zoom},X.prototype.setZoom=function(Q,ge){return this.jumpTo({zoom:Q},ge),this},X.prototype.zoomTo=function(Q,ge,Ee){return this.easeTo(t.extend({zoom:Q},ge),Ee)},X.prototype.zoomIn=function(Q,ge){return this.zoomTo(this.getZoom()+1,Q,ge),this},X.prototype.zoomOut=function(Q,ge){return this.zoomTo(this.getZoom()-1,Q,ge),this},X.prototype.getBearing=function(){return this.transform.bearing},X.prototype.setBearing=function(Q,ge){return this.jumpTo({bearing:Q},ge),this},X.prototype.getPadding=function(){return this.transform.padding},X.prototype.setPadding=function(Q,ge){return this.jumpTo({padding:Q},ge),this},X.prototype.rotateTo=function(Q,ge,Ee){return this.easeTo(t.extend({bearing:Q},ge),Ee)},X.prototype.resetNorth=function(Q,ge){return this.rotateTo(0,t.extend({duration:1e3},Q),ge),this},X.prototype.resetNorthPitch=function(Q,ge){return this.easeTo(t.extend({bearing:0,pitch:0,duration:1e3},Q),ge),this},X.prototype.snapToNorth=function(Q,ge){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(Q,ge):this},X.prototype.getPitch=function(){return this.transform.pitch},X.prototype.setPitch=function(Q,ge){return this.jumpTo({pitch:Q},ge),this},X.prototype.cameraForBounds=function(Q,ge){return Q=t.LngLatBounds.convert(Q),this._cameraForBoxAndBearing(Q.getNorthWest(),Q.getSouthEast(),0,ge)},X.prototype._cameraForBoxAndBearing=function(Q,ge,Ee,Pe){var Ze={top:0,bottom:0,right:0,left:0};if(Pe=t.extend({padding:Ze,offset:[0,0],maxZoom:this.transform.maxZoom},Pe),typeof Pe.padding=="number"){var ft=Pe.padding;Pe.padding={top:ft,bottom:ft,right:ft,left:ft}}Pe.padding=t.extend(Ze,Pe.padding);var At=this.transform,Vt=At.padding,$t=At.project(t.LngLat.convert(Q)),ir=At.project(t.LngLat.convert(ge)),Sr=$t.rotate(-Ee*Math.PI/180),Br=ir.rotate(-Ee*Math.PI/180),Vr=new t.Point(Math.max(Sr.x,Br.x),Math.max(Sr.y,Br.y)),Nr=new t.Point(Math.min(Sr.x,Br.x),Math.min(Sr.y,Br.y)),Kr=Vr.sub(Nr),hn=(At.width-(Vt.left+Vt.right+Pe.padding.left+Pe.padding.right))/Kr.x,Sn=(At.height-(Vt.top+Vt.bottom+Pe.padding.top+Pe.padding.bottom))/Kr.y;if(Sn<0||hn<0){t.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.");return}var Nn=Math.min(At.scaleZoom(At.scale*Math.min(hn,Sn)),Pe.maxZoom),Qn=t.Point.convert(Pe.offset),ta=(Pe.padding.left-Pe.padding.right)/2,qn=(Pe.padding.top-Pe.padding.bottom)/2,pa=new t.Point(Qn.x+ta,Qn.y+qn),Ta=pa.mult(At.scale/At.zoomScale(Nn)),_a=At.unproject($t.add(ir).div(2).sub(Ta));return{center:_a,zoom:Nn,bearing:Ee}},X.prototype.fitBounds=function(Q,ge,Ee){return this._fitInternal(this.cameraForBounds(Q,ge),ge,Ee)},X.prototype.fitScreenCoordinates=function(Q,ge,Ee,Pe,Ze){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(t.Point.convert(Q)),this.transform.pointLocation(t.Point.convert(ge)),Ee,Pe),Pe,Ze)},X.prototype._fitInternal=function(Q,ge,Ee){return Q?(ge=t.extend(Q,ge),delete ge.padding,ge.linear?this.easeTo(ge,Ee):this.flyTo(ge,Ee)):this},X.prototype.jumpTo=function(Q,ge){this.stop();var Ee=this.transform,Pe=!1,Ze=!1,ft=!1;return"zoom"in Q&&Ee.zoom!==+Q.zoom&&(Pe=!0,Ee.zoom=+Q.zoom),Q.center!==void 0&&(Ee.center=t.LngLat.convert(Q.center)),"bearing"in Q&&Ee.bearing!==+Q.bearing&&(Ze=!0,Ee.bearing=+Q.bearing),"pitch"in Q&&Ee.pitch!==+Q.pitch&&(ft=!0,Ee.pitch=+Q.pitch),Q.padding!=null&&!Ee.isPaddingEqual(Q.padding)&&(Ee.padding=Q.padding),this.fire(new t.Event("movestart",ge)).fire(new t.Event("move",ge)),Pe&&this.fire(new t.Event("zoomstart",ge)).fire(new t.Event("zoom",ge)).fire(new t.Event("zoomend",ge)),Ze&&this.fire(new t.Event("rotatestart",ge)).fire(new t.Event("rotate",ge)).fire(new t.Event("rotateend",ge)),ft&&this.fire(new t.Event("pitchstart",ge)).fire(new t.Event("pitch",ge)).fire(new t.Event("pitchend",ge)),this.fire(new t.Event("moveend",ge))},X.prototype.easeTo=function(Q,ge){var Ee=this;this._stop(!1,Q.easeId),Q=t.extend({offset:[0,0],duration:500,easing:t.ease},Q),(Q.animate===!1||!Q.essential&&t.browser.prefersReducedMotion)&&(Q.duration=0);var Pe=this.transform,Ze=this.getZoom(),ft=this.getBearing(),At=this.getPitch(),Vt=this.getPadding(),$t="zoom"in Q?+Q.zoom:Ze,ir="bearing"in Q?this._normalizeBearing(Q.bearing,ft):ft,Sr="pitch"in Q?+Q.pitch:At,Br="padding"in Q?Q.padding:Pe.padding,Vr=t.Point.convert(Q.offset),Nr=Pe.centerPoint.add(Vr),Kr=Pe.pointLocation(Nr),hn=t.LngLat.convert(Q.center||Kr);this._normalizeCenter(hn);var Sn=Pe.project(Kr),Nn=Pe.project(hn).sub(Sn),Qn=Pe.zoomScale($t-Ze),ta,qn;Q.around&&(ta=t.LngLat.convert(Q.around),qn=Pe.locationPoint(ta));var pa={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||$t!==Ze,this._rotating=this._rotating||ft!==ir,this._pitching=this._pitching||Sr!==At,this._padding=!Pe.isPaddingEqual(Br),this._easeId=Q.easeId,this._prepareEase(ge,Q.noMoveStart,pa),clearTimeout(this._easeEndTimeoutID),this._ease(function(Ta){if(Ee._zooming&&(Pe.zoom=t.number(Ze,$t,Ta)),Ee._rotating&&(Pe.bearing=t.number(ft,ir,Ta)),Ee._pitching&&(Pe.pitch=t.number(At,Sr,Ta)),Ee._padding&&(Pe.interpolatePadding(Vt,Br,Ta),Nr=Pe.centerPoint.add(Vr)),ta)Pe.setLocationAtPoint(ta,qn);else{var _a=Pe.zoomScale(Pe.zoom-Ze),ka=$t>Ze?Math.min(2,Qn):Math.max(.5,Qn),Da=Math.pow(ka,1-Ta),Wa=Pe.unproject(Sn.add(Nn.mult(Ta*Da)).mult(_a));Pe.setLocationAtPoint(Pe.renderWorldCopies?Wa.wrap():Wa,Nr)}Ee._fireMoveEvents(ge)},function(Ta){Ee._afterEase(ge,Ta)},Q),this},X.prototype._prepareEase=function(Q,ge,Ee){Ee===void 0&&(Ee={}),this._moving=!0,!ge&&!Ee.moving&&this.fire(new t.Event("movestart",Q)),this._zooming&&!Ee.zooming&&this.fire(new t.Event("zoomstart",Q)),this._rotating&&!Ee.rotating&&this.fire(new t.Event("rotatestart",Q)),this._pitching&&!Ee.pitching&&this.fire(new t.Event("pitchstart",Q))},X.prototype._fireMoveEvents=function(Q){this.fire(new t.Event("move",Q)),this._zooming&&this.fire(new t.Event("zoom",Q)),this._rotating&&this.fire(new t.Event("rotate",Q)),this._pitching&&this.fire(new t.Event("pitch",Q))},X.prototype._afterEase=function(Q,ge){if(!(this._easeId&&ge&&this._easeId===ge)){delete this._easeId;var Ee=this._zooming,Pe=this._rotating,Ze=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,Ee&&this.fire(new t.Event("zoomend",Q)),Pe&&this.fire(new t.Event("rotateend",Q)),Ze&&this.fire(new t.Event("pitchend",Q)),this.fire(new t.Event("moveend",Q))}},X.prototype.flyTo=function(Q,ge){var Ee=this;if(!Q.essential&&t.browser.prefersReducedMotion){var Pe=t.pick(Q,["center","zoom","bearing","pitch","around"]);return this.jumpTo(Pe,ge)}this.stop(),Q=t.extend({offset:[0,0],speed:1.2,curve:1.42,easing:t.ease},Q);var Ze=this.transform,ft=this.getZoom(),At=this.getBearing(),Vt=this.getPitch(),$t=this.getPadding(),ir="zoom"in Q?t.clamp(+Q.zoom,Ze.minZoom,Ze.maxZoom):ft,Sr="bearing"in Q?this._normalizeBearing(Q.bearing,At):At,Br="pitch"in Q?+Q.pitch:Vt,Vr="padding"in Q?Q.padding:Ze.padding,Nr=Ze.zoomScale(ir-ft),Kr=t.Point.convert(Q.offset),hn=Ze.centerPoint.add(Kr),Sn=Ze.pointLocation(hn),Nn=t.LngLat.convert(Q.center||Sn);this._normalizeCenter(Nn);var Qn=Ze.project(Sn),ta=Ze.project(Nn).sub(Qn),qn=Q.curve,pa=Math.max(Ze.width,Ze.height),Ta=pa/Nr,_a=ta.mag();if("minZoom"in Q){var ka=t.clamp(Math.min(Q.minZoom,ft,ir),Ze.minZoom,Ze.maxZoom),Da=pa/Ze.zoomScale(ka-ft);qn=Math.sqrt(Da/_a*2)}var Wa=qn*qn;function oi(li){var Mi=(Ta*Ta-pa*pa+(li?-1:1)*Wa*Wa*_a*_a)/(2*(li?Ta:pa)*Wa*_a);return Math.log(Math.sqrt(Mi*Mi+1)-Mi)}function Di(li){return(Math.exp(li)-Math.exp(-li))/2}function ci(li){return(Math.exp(li)+Math.exp(-li))/2}function gi(li){return Di(li)/ci(li)}var Ha=oi(0),Ii=function(li){return ci(Ha)/ci(Ha+qn*li)},Bi=function(li){return pa*((ci(Ha)*gi(Ha+qn*li)-Di(Ha))/Wa)/_a},Gi=(oi(1)-Ha)/qn;if(Math.abs(_a)<1e-6||!isFinite(Gi)){if(Math.abs(pa-Ta)<1e-6)return this.easeTo(Q,ge);var Ai=Ta<pa?-1:1;Gi=Math.abs(Math.log(Ta/pa))/qn,Bi=function(){return 0},Ii=function(li){return Math.exp(Ai*qn*li)}}if("duration"in Q)Q.duration=+Q.duration;else{var qi="screenSpeed"in Q?+Q.screenSpeed/qn:+Q.speed;Q.duration=1e3*Gi/qi}return Q.maxDuration&&Q.duration>Q.maxDuration&&(Q.duration=0),this._zooming=!0,this._rotating=At!==Sr,this._pitching=Br!==Vt,this._padding=!Ze.isPaddingEqual(Vr),this._prepareEase(ge,!1),this._ease(function(li){var Mi=li*Gi,Ro=1/Ii(Mi);Ze.zoom=li===1?ir:ft+Ze.scaleZoom(Ro),Ee._rotating&&(Ze.bearing=t.number(At,Sr,li)),Ee._pitching&&(Ze.pitch=t.number(Vt,Br,li)),Ee._padding&&(Ze.interpolatePadding($t,Vr,li),hn=Ze.centerPoint.add(Kr));var ts=li===1?Nn:Ze.unproject(Qn.add(ta.mult(Bi(Mi))).mult(Ro));Ze.setLocationAtPoint(Ze.renderWorldCopies?ts.wrap():ts,hn),Ee._fireMoveEvents(ge)},function(){return Ee._afterEase(ge)},Q),this},X.prototype.isEasing=function(){return!!this._easeFrameId},X.prototype.stop=function(){return this._stop()},X.prototype._stop=function(Q,ge){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var Ee=this._onEaseEnd;delete this._onEaseEnd,Ee.call(this,ge)}if(!Q){var Pe=this.handlers;Pe&&Pe.stop()}return this},X.prototype._ease=function(Q,ge,Ee){Ee.animate===!1||Ee.duration===0?(Q(1),ge()):(this._easeStart=t.browser.now(),this._easeOptions=Ee,this._onEaseFrame=Q,this._onEaseEnd=ge,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},X.prototype._renderFrameCallback=function(){var Q=Math.min((t.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(Q)),Q<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},X.prototype._normalizeBearing=function(Q,ge){Q=t.wrap(Q,-180,180);var Ee=Math.abs(Q-ge);return Math.abs(Q-360-ge)<Ee&&(Q-=360),Math.abs(Q+360-ge)<Ee&&(Q+=360),Q},X.prototype._normalizeCenter=function(Q){var ge=this.transform;if(!(!ge.renderWorldCopies||ge.lngRange)){var Ee=Q.lng-ge.center.lng;Q.lng+=Ee>180?-360:Ee<-180?360:0}},X}(t.Evented),gu=function(X){X===void 0&&(X={}),this.options=X,t.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};gu.prototype.getDefaultPosition=function(){return"bottom-right"},gu.prototype.onAdd=function(X){var de=this.options&&this.options.compact;return this._map=X,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),de&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),de===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},gu.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},gu.prototype._updateEditLink=function(){var X=this._editLink;X||(X=this._editLink=this._container.querySelector(".mapbox-improve-map"));var de=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||t.config.ACCESS_TOKEN}];if(X){var Q=de.reduce(function(ge,Ee,Pe){return Ee.value&&(ge+=Ee.key+"="+Ee.value+(Pe<de.length-1?"&":"")),ge},"?");X.href=t.config.FEEDBACK_URL+"/"+Q+(this._map._hash?this._map._hash.getHashString(!0):""),X.rel="noopener nofollow"}},gu.prototype._updateData=function(X){X&&(X.sourceDataType==="metadata"||X.dataType==="style")&&(this._updateAttributions(),this._updateEditLink())},gu.prototype._updateAttributions=function(){if(!!this._map.style){var X=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?X=X.concat(this.options.customAttribution.map(function(ft){return typeof ft!="string"?"":ft})):typeof this.options.customAttribution=="string"&&X.push(this.options.customAttribution)),this._map.style.stylesheet){var de=this._map.style.stylesheet;this.styleOwner=de.owner,this.styleId=de.id}var Q=this._map.style.sourceCaches;for(var ge in Q){var Ee=Q[ge];if(Ee.used){var Pe=Ee.getSource();Pe.attribution&&X.indexOf(Pe.attribution)<0&&X.push(Pe.attribution)}}X.sort(function(ft,At){return ft.length-At.length}),X=X.filter(function(ft,At){for(var Vt=At+1;Vt<X.length;Vt++)if(X[Vt].indexOf(ft)>=0)return!1;return!0});var Ze=X.join(" | ");Ze!==this._attribHTML&&(this._attribHTML=Ze,X.length?(this._innerContainer.innerHTML=Ze,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},gu.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var Vi=function(){t.bindAll(["_updateLogo"],this),t.bindAll(["_updateCompact"],this)};Vi.prototype.onAdd=function(X){this._map=X,this._container=a.create("div","mapboxgl-ctrl");var de=a.create("a","mapboxgl-ctrl-logo");return de.target="_blank",de.rel="noopener nofollow",de.href="https://www.mapbox.com/",de.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),de.setAttribute("rel","noopener nofollow"),this._container.appendChild(de),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},Vi.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},Vi.prototype.getDefaultPosition=function(){return"bottom-left"},Vi.prototype._updateLogo=function(X){(!X||X.sourceDataType==="metadata")&&(this._container.style.display=this._logoRequired()?"block":"none")},Vi.prototype._logoRequired=function(){if(!!this._map.style){var X=this._map.style.sourceCaches;for(var de in X){var Q=X[de].getSource();if(Q.mapbox_logo)return!0}return!1}},Vi.prototype._updateCompact=function(){var X=this._container.children;if(X.length){var de=X[0];this._map.getCanvasContainer().offsetWidth<250?de.classList.add("mapboxgl-compact"):de.classList.remove("mapboxgl-compact")}};var Zo=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Zo.prototype.add=function(X){var de=++this._id,Q=this._queue;return Q.push({callback:X,id:de,cancelled:!1}),de},Zo.prototype.remove=function(X){for(var de=this._currentlyRunning,Q=de?this._queue.concat(de):this._queue,ge=0,Ee=Q;ge<Ee.length;ge+=1){var Pe=Ee[ge];if(Pe.id===X){Pe.cancelled=!0;return}}},Zo.prototype.run=function(X){X===void 0&&(X=0);var de=this._currentlyRunning=this._queue;this._queue=[];for(var Q=0,ge=de;Q<ge.length;Q+=1){var Ee=ge[Q];if(!Ee.cancelled&&(Ee.callback(X),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Zo.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var hm={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Zh=t.window.HTMLImageElement,yh=t.window.HTMLElement,$f=t.window.ImageBitmap,Dc=-2,Kh=22,hl=0,qf=60,sp={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:Dc,maxZoom:Kh,minPitch:hl,maxPitch:qf,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},lp=function(ve){function X(Q){var ge=this;if(Q=t.extend({},sp,Q),Q.minZoom!=null&&Q.maxZoom!=null&&Q.minZoom>Q.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(Q.minPitch!=null&&Q.maxPitch!=null&&Q.minPitch>Q.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(Q.minPitch!=null&&Q.minPitch<hl)throw new Error("minPitch must be greater than or equal to "+hl);if(Q.maxPitch!=null&&Q.maxPitch>qf)throw new Error("maxPitch must be less than or equal to "+qf);var Ee=new Ti(Q.minZoom,Q.maxZoom,Q.minPitch,Q.maxPitch,Q.renderWorldCopies);if(ve.call(this,Ee,Q),this._interactive=Q.interactive,this._maxTileCacheSize=Q.maxTileCacheSize,this._failIfMajorPerformanceCaveat=Q.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=Q.preserveDrawingBuffer,this._antialias=Q.antialias,this._trackResize=Q.trackResize,this._bearingSnap=Q.bearingSnap,this._refreshExpiredTiles=Q.refreshExpiredTiles,this._fadeDuration=Q.fadeDuration,this._crossSourceCollisions=Q.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=Q.collectResourceTiming,this._renderTaskQueue=new Zo,this._controls=[],this._mapId=t.uniqueId(),this._locale=t.extend({},hm,Q.locale),this._requestManager=new t.RequestManager(Q.transformRequest,Q.accessToken),typeof Q.container=="string"){if(this._container=t.window.document.getElementById(Q.container),!this._container)throw new Error("Container '"+Q.container+"' not found.")}else if(Q.container instanceof yh)this._container=Q.container;else throw new Error("Invalid type: 'container' must be a String or HTMLElement.");if(Q.maxBounds&&this.setMaxBounds(Q.maxBounds),t.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return ge._update(!1)}),this.on("moveend",function(){return ge._update(!1)}),this.on("zoom",function(){return ge._update(!0)}),typeof t.window!="undefined"&&(t.window.addEventListener("online",this._onWindowOnline,!1),t.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new $i(this,Q);var Pe=typeof Q.hash=="string"&&Q.hash||void 0;this._hash=Q.hash&&new Mo(Pe).addTo(this),(!this._hash||!this._hash._onHashChange())&&(this.jumpTo({center:Q.center,zoom:Q.zoom,bearing:Q.bearing,pitch:Q.pitch}),Q.bounds&&(this.resize(),this.fitBounds(Q.bounds,t.extend({},Q.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=Q.localIdeographFontFamily,Q.style&&this.setStyle(Q.style,{localIdeographFontFamily:Q.localIdeographFontFamily}),Q.attributionControl&&this.addControl(new gu({customAttribution:Q.customAttribution})),this.addControl(new Vi,Q.logoPosition),this.on("style.load",function(){ge.transform.unmodified&&ge.jumpTo(ge.style.stylesheet)}),this.on("data",function(Ze){ge._update(Ze.dataType==="style"),ge.fire(new t.Event(Ze.dataType+"data",Ze))}),this.on("dataloading",function(Ze){ge.fire(new t.Event(Ze.dataType+"dataloading",Ze))})}ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X;var de={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return X.prototype._getMapId=function(){return this._mapId},X.prototype.addControl=function(ge,Ee){if(Ee===void 0&&ge.getDefaultPosition&&(Ee=ge.getDefaultPosition()),Ee===void 0&&(Ee="top-right"),!ge||!ge.onAdd)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var Pe=ge.onAdd(this);this._controls.push(ge);var Ze=this._controlPositions[Ee];return Ee.indexOf("bottom")!==-1?Ze.insertBefore(Pe,Ze.firstChild):Ze.appendChild(Pe),this},X.prototype.removeControl=function(ge){if(!ge||!ge.onRemove)return this.fire(new t.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var Ee=this._controls.indexOf(ge);return Ee>-1&&this._controls.splice(Ee,1),ge.onRemove(this),this},X.prototype.resize=function(ge){var Ee=this._containerDimensions(),Pe=Ee[0],Ze=Ee[1];this._resizeCanvas(Pe,Ze),this.transform.resize(Pe,Ze),this.painter.resize(Pe,Ze);var ft=!this._moving;return ft&&(this.stop(),this.fire(new t.Event("movestart",ge)).fire(new t.Event("move",ge))),this.fire(new t.Event("resize",ge)),ft&&this.fire(new t.Event("moveend",ge)),this},X.prototype.getBounds=function(){return this.transform.getBounds()},X.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},X.prototype.setMaxBounds=function(ge){return this.transform.setMaxBounds(t.LngLatBounds.convert(ge)),this._update()},X.prototype.setMinZoom=function(ge){if(ge=ge==null?Dc:ge,ge>=Dc&&ge<=this.transform.maxZoom)return this.transform.minZoom=ge,this._update(),this.getZoom()<ge&&this.setZoom(ge),this;throw new Error("minZoom must be between "+Dc+" and the current maxZoom, inclusive")},X.prototype.getMinZoom=function(){return this.transform.minZoom},X.prototype.setMaxZoom=function(ge){if(ge=ge==null?Kh:ge,ge>=this.transform.minZoom)return this.transform.maxZoom=ge,this._update(),this.getZoom()>ge&&this.setZoom(ge),this;throw new Error("maxZoom must be greater than the current minZoom")},X.prototype.getMaxZoom=function(){return this.transform.maxZoom},X.prototype.setMinPitch=function(ge){if(ge=ge==null?hl:ge,ge<hl)throw new Error("minPitch must be greater than or equal to "+hl);if(ge>=hl&&ge<=this.transform.maxPitch)return this.transform.minPitch=ge,this._update(),this.getPitch()<ge&&this.setPitch(ge),this;throw new Error("minPitch must be between "+hl+" and the current maxPitch, inclusive")},X.prototype.getMinPitch=function(){return this.transform.minPitch},X.prototype.setMaxPitch=function(ge){if(ge=ge==null?qf:ge,ge>qf)throw new Error("maxPitch must be less than or equal to "+qf);if(ge>=this.transform.minPitch)return this.transform.maxPitch=ge,this._update(),this.getPitch()>ge&&this.setPitch(ge),this;throw new Error("maxPitch must be greater than the current minPitch")},X.prototype.getMaxPitch=function(){return this.transform.maxPitch},X.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},X.prototype.setRenderWorldCopies=function(ge){return this.transform.renderWorldCopies=ge,this._update()},X.prototype.project=function(ge){return this.transform.locationPoint(t.LngLat.convert(ge))},X.prototype.unproject=function(ge){return this.transform.pointLocation(t.Point.convert(ge))},X.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},X.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},X.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},X.prototype._createDelegatedListener=function(ge,Ee,Pe){var Ze=this,ft;if(ge==="mouseenter"||ge==="mouseover"){var At=!1,Vt=function(Nr){var Kr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Nr.point,{layers:[Ee]}):[];Kr.length?At||(At=!0,Pe.call(Ze,new yt(ge,Ze,Nr.originalEvent,{features:Kr}))):At=!1},$t=function(){At=!1};return{layer:Ee,listener:Pe,delegates:{mousemove:Vt,mouseout:$t}}}else if(ge==="mouseleave"||ge==="mouseout"){var ir=!1,Sr=function(Nr){var Kr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Nr.point,{layers:[Ee]}):[];Kr.length?ir=!0:ir&&(ir=!1,Pe.call(Ze,new yt(ge,Ze,Nr.originalEvent)))},Br=function(Nr){ir&&(ir=!1,Pe.call(Ze,new yt(ge,Ze,Nr.originalEvent)))};return{layer:Ee,listener:Pe,delegates:{mousemove:Sr,mouseout:Br}}}else{var Vr=function(Nr){var Kr=Ze.getLayer(Ee)?Ze.queryRenderedFeatures(Nr.point,{layers:[Ee]}):[];Kr.length&&(Nr.features=Kr,Pe.call(Ze,Nr),delete Nr.features)};return{layer:Ee,listener:Pe,delegates:(ft={},ft[ge]=Vr,ft)}}},X.prototype.on=function(ge,Ee,Pe){if(Pe===void 0)return ve.prototype.on.call(this,ge,Ee);var Ze=this._createDelegatedListener(ge,Ee,Pe);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[ge]=this._delegatedListeners[ge]||[],this._delegatedListeners[ge].push(Ze);for(var ft in Ze.delegates)this.on(ft,Ze.delegates[ft]);return this},X.prototype.once=function(ge,Ee,Pe){if(Pe===void 0)return ve.prototype.once.call(this,ge,Ee);var Ze=this._createDelegatedListener(ge,Ee,Pe);for(var ft in Ze.delegates)this.once(ft,Ze.delegates[ft]);return this},X.prototype.off=function(ge,Ee,Pe){var Ze=this;if(Pe===void 0)return ve.prototype.off.call(this,ge,Ee);var ft=function(At){for(var Vt=At[ge],$t=0;$t<Vt.length;$t++){var ir=Vt[$t];if(ir.layer===Ee&&ir.listener===Pe){for(var Sr in ir.delegates)Ze.off(Sr,ir.delegates[Sr]);return Vt.splice($t,1),Ze}}};return this._delegatedListeners&&this._delegatedListeners[ge]&&ft(this._delegatedListeners),this},X.prototype.queryRenderedFeatures=function(ge,Ee){if(!this.style)return[];Ee===void 0&&ge!==void 0&&!(ge instanceof t.Point)&&!Array.isArray(ge)&&(Ee=ge,ge=void 0),Ee=Ee||{},ge=ge||[[0,0],[this.transform.width,this.transform.height]];var Pe;if(ge instanceof t.Point||typeof ge[0]=="number")Pe=[t.Point.convert(ge)];else{var Ze=t.Point.convert(ge[0]),ft=t.Point.convert(ge[1]);Pe=[Ze,new t.Point(ft.x,Ze.y),ft,new t.Point(Ze.x,ft.y),Ze]}return this.style.queryRenderedFeatures(Pe,Ee,this.transform)},X.prototype.querySourceFeatures=function(ge,Ee){return this.style.querySourceFeatures(ge,Ee)},X.prototype.setStyle=function(ge,Ee){return Ee=t.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},Ee),Ee.diff!==!1&&Ee.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&ge?(this._diffStyle(ge,Ee),this):(this._localIdeographFontFamily=Ee.localIdeographFontFamily,this._updateStyle(ge,Ee))},X.prototype._getUIString=function(ge){var Ee=this._locale[ge];if(Ee==null)throw new Error("Missing UI string '"+ge+"'");return Ee},X.prototype._updateStyle=function(ge,Ee){if(this.style&&(this.style.setEventedParent(null),this.style._remove()),ge)this.style=new ps(this,Ee||{});else return delete this.style,this;return this.style.setEventedParent(this,{style:this.style}),typeof ge=="string"?this.style.loadURL(ge):this.style.loadJSON(ge),this},X.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new ps(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},X.prototype._diffStyle=function(ge,Ee){var Pe=this;if(typeof ge=="string"){var Ze=this._requestManager.normalizeStyleURL(ge),ft=this._requestManager.transformRequest(Ze,t.ResourceType.Style);t.getJSON(ft,function(At,Vt){At?Pe.fire(new t.ErrorEvent(At)):Vt&&Pe._updateDiff(Vt,Ee)})}else typeof ge=="object"&&this._updateDiff(ge,Ee)},X.prototype._updateDiff=function(ge,Ee){try{this.style.setState(ge)&&this._update(!0)}catch(Pe){t.warnOnce("Unable to perform style diff: "+(Pe.message||Pe.error||Pe)+".  Rebuilding the style from scratch."),this._updateStyle(ge,Ee)}},X.prototype.getStyle=function(){if(this.style)return this.style.serialize()},X.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():t.warnOnce("There is no style added to the map.")},X.prototype.addSource=function(ge,Ee){return this._lazyInitEmptyStyle(),this.style.addSource(ge,Ee),this._update(!0)},X.prototype.isSourceLoaded=function(ge){var Ee=this.style&&this.style.sourceCaches[ge];if(Ee===void 0){this.fire(new t.ErrorEvent(new Error("There is no source with ID '"+ge+"'")));return}return Ee.loaded()},X.prototype.areTilesLoaded=function(){var ge=this.style&&this.style.sourceCaches;for(var Ee in ge){var Pe=ge[Ee],Ze=Pe._tiles;for(var ft in Ze){var At=Ze[ft];if(!(At.state==="loaded"||At.state==="errored"))return!1}}return!0},X.prototype.addSourceType=function(ge,Ee,Pe){return this._lazyInitEmptyStyle(),this.style.addSourceType(ge,Ee,Pe)},X.prototype.removeSource=function(ge){return this.style.removeSource(ge),this._update(!0)},X.prototype.getSource=function(ge){return this.style.getSource(ge)},X.prototype.addImage=function(ge,Ee,Pe){Pe===void 0&&(Pe={});var Ze=Pe.pixelRatio;Ze===void 0&&(Ze=1);var ft=Pe.sdf;ft===void 0&&(ft=!1);var At=Pe.stretchX,Vt=Pe.stretchY,$t=Pe.content;this._lazyInitEmptyStyle();var ir=0;if(Ee instanceof Zh||$f&&Ee instanceof $f){var Sr=t.browser.getImageData(Ee),Br=Sr.width,Vr=Sr.height,Nr=Sr.data;this.style.addImage(ge,{data:new t.RGBAImage({width:Br,height:Vr},Nr),pixelRatio:Ze,stretchX:At,stretchY:Vt,content:$t,sdf:ft,version:ir})}else{if(Ee.width===void 0||Ee.height===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var Kr=Ee.width,hn=Ee.height,Sn=Ee.data,Nn=Ee;this.style.addImage(ge,{data:new t.RGBAImage({width:Kr,height:hn},new Uint8Array(Sn)),pixelRatio:Ze,stretchX:At,stretchY:Vt,content:$t,sdf:ft,version:ir,userImage:Nn}),Nn.onAdd&&Nn.onAdd(this,ge)}},X.prototype.updateImage=function(ge,Ee){var Pe=this.style.getImage(ge);if(!Pe)return this.fire(new t.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var Ze=Ee instanceof Zh||$f&&Ee instanceof $f?t.browser.getImageData(Ee):Ee,ft=Ze.width,At=Ze.height,Vt=Ze.data;if(ft===void 0||At===void 0)return this.fire(new t.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(ft!==Pe.data.width||At!==Pe.data.height)return this.fire(new t.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image")));var $t=!(Ee instanceof Zh||$f&&Ee instanceof $f);Pe.data.replace(Vt,$t),this.style.updateImage(ge,Pe)},X.prototype.hasImage=function(ge){return ge?!!this.style.getImage(ge):(this.fire(new t.ErrorEvent(new Error("Missing required image id"))),!1)},X.prototype.removeImage=function(ge){this.style.removeImage(ge)},X.prototype.loadImage=function(ge,Ee){t.getImage(this._requestManager.transformRequest(ge,t.ResourceType.Image),Ee)},X.prototype.listImages=function(){return this.style.listImages()},X.prototype.addLayer=function(ge,Ee){return this._lazyInitEmptyStyle(),this.style.addLayer(ge,Ee),this._update(!0)},X.prototype.moveLayer=function(ge,Ee){return this.style.moveLayer(ge,Ee),this._update(!0)},X.prototype.removeLayer=function(ge){return this.style.removeLayer(ge),this._update(!0)},X.prototype.getLayer=function(ge){return this.style.getLayer(ge)},X.prototype.setLayerZoomRange=function(ge,Ee,Pe){return this.style.setLayerZoomRange(ge,Ee,Pe),this._update(!0)},X.prototype.setFilter=function(ge,Ee,Pe){return Pe===void 0&&(Pe={}),this.style.setFilter(ge,Ee,Pe),this._update(!0)},X.prototype.getFilter=function(ge){return this.style.getFilter(ge)},X.prototype.setPaintProperty=function(ge,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setPaintProperty(ge,Ee,Pe,Ze),this._update(!0)},X.prototype.getPaintProperty=function(ge,Ee){return this.style.getPaintProperty(ge,Ee)},X.prototype.setLayoutProperty=function(ge,Ee,Pe,Ze){return Ze===void 0&&(Ze={}),this.style.setLayoutProperty(ge,Ee,Pe,Ze),this._update(!0)},X.prototype.getLayoutProperty=function(ge,Ee){return this.style.getLayoutProperty(ge,Ee)},X.prototype.setLight=function(ge,Ee){return Ee===void 0&&(Ee={}),this._lazyInitEmptyStyle(),this.style.setLight(ge,Ee),this._update(!0)},X.prototype.getLight=function(){return this.style.getLight()},X.prototype.setFeatureState=function(ge,Ee){return this.style.setFeatureState(ge,Ee),this._update()},X.prototype.removeFeatureState=function(ge,Ee){return this.style.removeFeatureState(ge,Ee),this._update()},X.prototype.getFeatureState=function(ge){return this.style.getFeatureState(ge)},X.prototype.getContainer=function(){return this._container},X.prototype.getCanvasContainer=function(){return this._canvasContainer},X.prototype.getCanvas=function(){return this._canvas},X.prototype._containerDimensions=function(){var ge=0,Ee=0;return this._container&&(ge=this._container.clientWidth||400,Ee=this._container.clientHeight||300),[ge,Ee]},X.prototype._detectMissingCSS=function(){var ge=t.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color");ge!=="rgb(250, 128, 114)"&&t.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},X.prototype._setupContainer=function(){var ge=this._container;ge.classList.add("mapboxgl-map");var Ee=this._missingCSSCanary=a.create("div","mapboxgl-canary",ge);Ee.style.visibility="hidden",this._detectMissingCSS();var Pe=this._canvasContainer=a.create("div","mapboxgl-canvas-container",ge);this._interactive&&Pe.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",Pe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var Ze=this._containerDimensions();this._resizeCanvas(Ze[0],Ze[1]);var ft=this._controlContainer=a.create("div","mapboxgl-control-container",ge),At=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Vt){At[Vt]=a.create("div","mapboxgl-ctrl-"+Vt,ft)})},X.prototype._resizeCanvas=function(ge,Ee){var Pe=t.browser.devicePixelRatio||1;this._canvas.width=Pe*ge,this._canvas.height=Pe*Ee,this._canvas.style.width=ge+"px",this._canvas.style.height=Ee+"px"},X.prototype._setupPainter=function(){var ge=t.extend({},i.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),Ee=this._canvas.getContext("webgl",ge)||this._canvas.getContext("experimental-webgl",ge);if(!Ee){this.fire(new t.ErrorEvent(new Error("Failed to initialize WebGL")));return}this.painter=new ii(Ee,this.transform),t.webpSupported.testSupport(Ee)},X.prototype._contextLost=function(ge){ge.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new t.Event("webglcontextlost",{originalEvent:ge}))},X.prototype._contextRestored=function(ge){this._setupPainter(),this.resize(),this._update(),this.fire(new t.Event("webglcontextrestored",{originalEvent:ge}))},X.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},X.prototype._update=function(ge){return this.style?(this._styleDirty=this._styleDirty||ge,this._sourcesDirty=!0,this.triggerRepaint(),this):this},X.prototype._requestRenderFrame=function(ge){return this._update(),this._renderTaskQueue.add(ge)},X.prototype._cancelRenderFrame=function(ge){this._renderTaskQueue.remove(ge)},X.prototype._render=function(ge){var Ee=this,Pe,Ze=0,ft=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(Pe=ft.createQueryEXT(),ft.beginQueryEXT(ft.TIME_ELAPSED_EXT,Pe),Ze=t.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(ge),!this._removed){var At=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Vt=this.transform.zoom,$t=t.browser.now();this.style.zoomHistory.update(Vt,$t);var ir=new t.EvaluationParameters(Vt,{now:$t,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Sr=ir.crossFadingFactor();(Sr!==1||Sr!==this._crossFadingFactor)&&(At=!0,this._crossFadingFactor=Sr),this.style.update(ir)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new t.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new t.Event("load"))),this.style&&(this.style.hasTransitions()||At)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Br=t.browser.now()-Ze;ft.endQueryEXT(ft.TIME_ELAPSED_EXT,Pe),setTimeout(function(){var Kr=ft.getQueryObjectEXT(Pe,ft.QUERY_RESULT_EXT)/(1e3*1e3);ft.deleteQueryEXT(Pe),Ee.fire(new t.Event("gpu-timing-frame",{cpuTime:Br,gpuTime:Kr}))},50)}if(this.listens("gpu-timing-layer")){var Vr=this.painter.collectGpuTimers();setTimeout(function(){var Kr=Ee.painter.queryGpuTimers(Vr);Ee.fire(new t.Event("gpu-timing-layer",{layerTimes:Kr}))},50)}var Nr=this._sourcesDirty||this._styleDirty||this._placementDirty;return Nr||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new t.Event("idle"))),this}},X.prototype.remove=function(){this._hash&&this._hash.remove();for(var ge=0,Ee=this._controls;ge<Ee.length;ge+=1){var Pe=Ee[ge];Pe.onRemove(this)}this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof t.window!="undefined"&&(t.window.removeEventListener("resize",this._onWindowResize,!1),t.window.removeEventListener("online",this._onWindowOnline,!1));var Ze=this.painter.context.gl.getExtension("WEBGL_lose_context");Ze&&Ze.loseContext(),xh(this._canvasContainer),xh(this._controlContainer),xh(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new t.Event("remove"))},X.prototype.triggerRepaint=function(){var ge=this;this.style&&!this._frame&&(this._frame=t.browser.frame(function(Ee){ge._frame=null,ge._render(Ee)}))},X.prototype._onWindowOnline=function(){this._update()},X.prototype._onWindowResize=function(ge){this._trackResize&&this.resize({originalEvent:ge})._update()},de.showTileBoundaries.get=function(){return!!this._showTileBoundaries},de.showTileBoundaries.set=function(Q){this._showTileBoundaries!==Q&&(this._showTileBoundaries=Q,this._update())},de.showPadding.get=function(){return!!this._showPadding},de.showPadding.set=function(Q){this._showPadding!==Q&&(this._showPadding=Q,this._update())},de.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},de.showCollisionBoxes.set=function(Q){this._showCollisionBoxes!==Q&&(this._showCollisionBoxes=Q,Q?this.style._generateCollisionBoxes():this._update())},de.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},de.showOverdrawInspector.set=function(Q){this._showOverdrawInspector!==Q&&(this._showOverdrawInspector=Q,this._update())},de.repaint.get=function(){return!!this._repaint},de.repaint.set=function(Q){this._repaint!==Q&&(this._repaint=Q,this.triggerRepaint())},de.vertices.get=function(){return!!this._vertices},de.vertices.set=function(Q){this._vertices=Q,this._update()},X.prototype._setCacheLimits=function(ge,Ee){t.setCacheLimits(ge,Ee)},de.version.get=function(){return t.version},Object.defineProperties(X.prototype,de),X}(Rc);function xh(ve){ve.parentNode&&ve.parentNode.removeChild(ve)}var Jh={showCompass:!0,showZoom:!0,visualizePitch:!1},Lf=function(X){var de=this;this.options=t.extend({},Jh,X),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(Q){return Q.preventDefault()}),this.options.showZoom&&(t.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(Q){return de._map.zoomIn({},{originalEvent:Q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(Q){return de._map.zoomOut({},{originalEvent:Q})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(t.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(Q){de.options.visualizePitch?de._map.resetNorthPitch({},{originalEvent:Q}):de._map.resetNorth({},{originalEvent:Q})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Lf.prototype._updateZoomButtons=function(){var X=this._map.getZoom();this._zoomInButton.disabled=X===this._map.getMaxZoom(),this._zoomOutButton.disabled=X===this._map.getMinZoom()},Lf.prototype._rotateCompassArrow=function(){var X=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=X},Lf.prototype.onAdd=function(X){return this._map=X,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Rl(this._map,this._compass,this.options.visualizePitch)),this._container},Lf.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Lf.prototype._createButton=function(X,de){var Q=a.create("button",X,this._container);return Q.type="button",Q.addEventListener("click",de),Q},Lf.prototype._setButtonTitle=function(X,de){var Q=this._map._getUIString("NavigationControl."+de);X.title=Q,X.setAttribute("aria-label",Q)};var Rl=function(X,de,Q){Q===void 0&&(Q=!1),this._clickTolerance=10,this.element=de,this.mouseRotate=new sa({clickTolerance:X.dragRotate._mouseRotate._clickTolerance}),this.map=X,Q&&(this.mousePitch=new La({clickTolerance:X.dragRotate._mousePitch._clickTolerance})),t.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(de,"mousedown",this.mousedown),a.addEventListener(de,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(de,"touchmove",this.touchmove),a.addEventListener(de,"touchend",this.touchend),a.addEventListener(de,"touchcancel",this.reset)};Rl.prototype.down=function(X,de){this.mouseRotate.mousedown(X,de),this.mousePitch&&this.mousePitch.mousedown(X,de),a.disableDrag()},Rl.prototype.move=function(X,de){var Q=this.map,ge=this.mouseRotate.mousemoveWindow(X,de);if(ge&&ge.bearingDelta&&Q.setBearing(Q.getBearing()+ge.bearingDelta),this.mousePitch){var Ee=this.mousePitch.mousemoveWindow(X,de);Ee&&Ee.pitchDelta&&Q.setPitch(Q.getPitch()+Ee.pitchDelta)}},Rl.prototype.off=function(){var X=this.element;a.removeEventListener(X,"mousedown",this.mousedown),a.removeEventListener(X,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(X,"touchmove",this.touchmove),a.removeEventListener(X,"touchend",this.touchend),a.removeEventListener(X,"touchcancel",this.reset),this.offTemp()},Rl.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(t.window,"mousemove",this.mousemove),a.removeEventListener(t.window,"mouseup",this.mouseup)},Rl.prototype.mousedown=function(X){this.down(t.extend({},X,{ctrlKey:!0,preventDefault:function(){return X.preventDefault()}}),a.mousePos(this.element,X)),a.addEventListener(t.window,"mousemove",this.mousemove),a.addEventListener(t.window,"mouseup",this.mouseup)},Rl.prototype.mousemove=function(X){this.move(X,a.mousePos(this.element,X))},Rl.prototype.mouseup=function(X){this.mouseRotate.mouseupWindow(X),this.mousePitch&&this.mousePitch.mouseupWindow(X),this.offTemp()},Rl.prototype.touchstart=function(X){X.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,X.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return X.preventDefault()}},this._startPos))},Rl.prototype.touchmove=function(X){X.targetTouches.length!==1?this.reset():(this._lastPos=a.touchPos(this.element,X.targetTouches)[0],this.move({preventDefault:function(){return X.preventDefault()}},this._lastPos))},Rl.prototype.touchend=function(X){X.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Rl.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};function Pf(ve,X,de){if(ve=new t.LngLat(ve.lng,ve.lat),X){var Q=new t.LngLat(ve.lng-360,ve.lat),ge=new t.LngLat(ve.lng+360,ve.lat),Ee=de.locationPoint(ve).distSqr(X);de.locationPoint(Q).distSqr(X)<Ee?ve=Q:de.locationPoint(ge).distSqr(X)<Ee&&(ve=ge)}for(;Math.abs(ve.lng-de.center.lng)>180;){var Pe=de.locationPoint(ve);if(Pe.x>=0&&Pe.y>=0&&Pe.x<=de.width&&Pe.y<=de.height)break;ve.lng>de.center.lng?ve.lng-=360:ve.lng+=360}return ve}var bh={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Qh(ve,X,de){var Q=ve.classList;for(var ge in bh)Q.remove("mapboxgl-"+de+"-anchor-"+ge);Q.add("mapboxgl-"+de+"-anchor-"+X)}var Ic=function(ve){function X(de,Q){var ge=this;if(ve.call(this),(de instanceof t.window.HTMLElement||Q)&&(de=t.extend({element:de},Q)),t.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=de&&de.anchor||"center",this._color=de&&de.color||"#3FB1CE",this._draggable=de&&de.draggable||!1,this._state="inactive",this._rotation=de&&de.rotation||0,this._rotationAlignment=de&&de.rotationAlignment||"auto",this._pitchAlignment=de&&de.pitchAlignment&&de.pitchAlignment!=="auto"?de.pitchAlignment:this._rotationAlignment,!de||!de.element){this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var Ee=a.createNS("http://www.w3.org/2000/svg","svg");Ee.setAttributeNS(null,"display","block"),Ee.setAttributeNS(null,"height","41px"),Ee.setAttributeNS(null,"width","27px"),Ee.setAttributeNS(null,"viewBox","0 0 27 41");var Pe=a.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"stroke","none"),Pe.setAttributeNS(null,"stroke-width","1"),Pe.setAttributeNS(null,"fill","none"),Pe.setAttributeNS(null,"fill-rule","evenodd");var Ze=a.createNS("http://www.w3.org/2000/svg","g");Ze.setAttributeNS(null,"fill-rule","nonzero");var ft=a.createNS("http://www.w3.org/2000/svg","g");ft.setAttributeNS(null,"transform","translate(3.0, 29.0)"),ft.setAttributeNS(null,"fill","#000000");for(var At=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],Vt=0,$t=At;Vt<$t.length;Vt+=1){var ir=$t[Vt],Sr=a.createNS("http://www.w3.org/2000/svg","ellipse");Sr.setAttributeNS(null,"opacity","0.04"),Sr.setAttributeNS(null,"cx","10.5"),Sr.setAttributeNS(null,"cy","5.80029008"),Sr.setAttributeNS(null,"rx",ir.rx),Sr.setAttributeNS(null,"ry",ir.ry),ft.appendChild(Sr)}var Br=a.createNS("http://www.w3.org/2000/svg","g");Br.setAttributeNS(null,"fill",this._color);var Vr=a.createNS("http://www.w3.org/2000/svg","path");Vr.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Br.appendChild(Vr);var Nr=a.createNS("http://www.w3.org/2000/svg","g");Nr.setAttributeNS(null,"opacity","0.25"),Nr.setAttributeNS(null,"fill","#000000");var Kr=a.createNS("http://www.w3.org/2000/svg","path");Kr.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Nr.appendChild(Kr);var hn=a.createNS("http://www.w3.org/2000/svg","g");hn.setAttributeNS(null,"transform","translate(6.0, 7.0)"),hn.setAttributeNS(null,"fill","#FFFFFF");var Sn=a.createNS("http://www.w3.org/2000/svg","g");Sn.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Nn=a.createNS("http://www.w3.org/2000/svg","circle");Nn.setAttributeNS(null,"fill","#000000"),Nn.setAttributeNS(null,"opacity","0.25"),Nn.setAttributeNS(null,"cx","5.5"),Nn.setAttributeNS(null,"cy","5.5"),Nn.setAttributeNS(null,"r","5.4999962");var Qn=a.createNS("http://www.w3.org/2000/svg","circle");Qn.setAttributeNS(null,"fill","#FFFFFF"),Qn.setAttributeNS(null,"cx","5.5"),Qn.setAttributeNS(null,"cy","5.5"),Qn.setAttributeNS(null,"r","5.4999962"),Sn.appendChild(Nn),Sn.appendChild(Qn),Ze.appendChild(ft),Ze.appendChild(Br),Ze.appendChild(Nr),Ze.appendChild(hn),Ze.appendChild(Sn),Ee.appendChild(Ze),this._element.appendChild(Ee),this._offset=t.Point.convert(de&&de.offset||[0,-14])}else this._element=de.element,this._offset=t.Point.convert(de&&de.offset||[0,0]);this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(ta){ta.preventDefault()}),this._element.addEventListener("mousedown",function(ta){ta.preventDefault()}),this._element.addEventListener("focus",function(){var ta=ge._map.getContainer();ta.scrollTop=0,ta.scrollLeft=0}),Qh(this._element,this._anchor,"marker"),this._popup=null}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.addTo=function(Q){return this.remove(),this._map=Q,Q.getCanvasContainer().appendChild(this._element),Q.on("move",this._update),Q.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},X.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},X.prototype.getElement=function(){return this._element},X.prototype.setPopup=function(Q){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),Q){if(!("offset"in Q.options)){var ge=41-5.8/2,Ee=13.5,Pe=Math.sqrt(Math.pow(Ee,2)/2);Q.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-ge],"bottom-left":[Pe,(ge-Ee+Pe)*-1],"bottom-right":[-Pe,(ge-Ee+Pe)*-1],left:[Ee,(ge-Ee)*-1],right:[-Ee,(ge-Ee)*-1]}:this._offset}this._popup=Q,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},X.prototype._onKeyPress=function(Q){var ge=Q.code,Ee=Q.charCode||Q.keyCode;(ge==="Space"||ge==="Enter"||Ee===32||Ee===13)&&this.togglePopup()},X.prototype._onMapClick=function(Q){var ge=Q.originalEvent.target,Ee=this._element;this._popup&&(ge===Ee||Ee.contains(ge))&&this.togglePopup()},X.prototype.getPopup=function(){return this._popup},X.prototype.togglePopup=function(){var Q=this._popup;if(Q)Q.isOpen()?Q.remove():Q.addTo(this._map);else return this;return this},X.prototype._update=function(Q){if(!!this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Pf(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var ge="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?ge="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(ge="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var Ee="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?Ee="rotateX(0deg)":this._pitchAlignment==="map"&&(Ee="rotateX("+this._map.getPitch()+"deg)"),(!Q||Q.type==="moveend")&&(this._pos=this._pos.round()),a.setTransform(this._element,bh[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+Ee+" "+ge)}},X.prototype.getOffset=function(){return this._offset},X.prototype.setOffset=function(Q){return this._offset=t.Point.convert(Q),this._update(),this},X.prototype._onMove=function(Q){this._pos=Q.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new t.Event("dragstart"))),this.fire(new t.Event("drag"))},X.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new t.Event("dragend")),this._state="inactive"},X.prototype._addDragHandler=function(Q){this._element.contains(Q.originalEvent.target)&&(Q.preventDefault(),this._positionDelta=Q.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},X.prototype.setDraggable=function(Q){return this._draggable=!!Q,this._map&&(Q?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},X.prototype.isDraggable=function(){return this._draggable},X.prototype.setRotation=function(Q){return this._rotation=Q||0,this._update(),this},X.prototype.getRotation=function(){return this._rotation},X.prototype.setRotationAlignment=function(Q){return this._rotationAlignment=Q||"auto",this._update(),this},X.prototype.getRotationAlignment=function(){return this._rotationAlignment},X.prototype.setPitchAlignment=function(Q){return this._pitchAlignment=Q&&Q!=="auto"?Q:this._rotationAlignment,this._update(),this},X.prototype.getPitchAlignment=function(){return this._pitchAlignment},X}(t.Evented),up={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},ec;function _h(ve){ec!==void 0?ve(ec):t.window.navigator.permissions!==void 0?t.window.navigator.permissions.query({name:"geolocation"}).then(function(X){ec=X.state!=="denied",ve(ec)}):(ec=!!t.window.navigator.geolocation,ve(ec))}var zc=0,tc=!1,fp=function(ve){function X(de){ve.call(this),this.options=t.extend({},up,de),t.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.onAdd=function(Q){return this._map=Q,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),_h(this._setupUI),this._container},X.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,zc=0,tc=!1},X.prototype._isOutOfMapMaxBounds=function(Q){var ge=this._map.getMaxBounds(),Ee=Q.coords;return ge&&(Ee.longitude<ge.getWest()||Ee.longitude>ge.getEast()||Ee.latitude<ge.getSouth()||Ee.latitude>ge.getNorth())},X.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break}},X.prototype._onSuccess=function(Q){if(!!this._map){if(this._isOutOfMapMaxBounds(Q)){this._setErrorState(),this.fire(new t.Event("outofmaxbounds",Q)),this._updateMarker(),this._finish();return}if(this.options.trackUserLocation)switch(this._lastKnownPosition=Q,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(Q),(!this.options.trackUserLocation||this._watchState==="ACTIVE_LOCK")&&this._updateCamera(Q),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("geolocate",Q)),this._finish()}},X.prototype._updateCamera=function(Q){var ge=new t.LngLat(Q.coords.longitude,Q.coords.latitude),Ee=Q.coords.accuracy,Pe=this._map.getBearing(),Ze=t.extend({bearing:Pe},this.options.fitBoundsOptions);this._map.fitBounds(ge.toBounds(Ee),Ze,{geolocateSource:!0})},X.prototype._updateMarker=function(Q){if(Q){var ge=new t.LngLat(Q.coords.longitude,Q.coords.latitude);this._accuracyCircleMarker.setLngLat(ge).addTo(this._map),this._userLocationDotMarker.setLngLat(ge).addTo(this._map),this._accuracy=Q.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},X.prototype._updateCircleRadius=function(){var Q=this._map._container.clientHeight/2,ge=this._map.unproject([0,Q]),Ee=this._map.unproject([1,Q]),Pe=ge.distanceTo(Ee),Ze=Math.ceil(2*this._accuracy/Pe);this._circleElement.style.width=Ze+"px",this._circleElement.style.height=Ze+"px"},X.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},X.prototype._onError=function(Q){if(!!this._map){if(this.options.trackUserLocation)if(Q.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var ge=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=ge,this._geolocateButton.setAttribute("aria-label",ge),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(Q.code===3&&tc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new t.Event("error",Q)),this._finish()}},X.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},X.prototype._setupUI=function(Q){var ge=this;if(this._container.addEventListener("contextmenu",function(Ze){return Ze.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",Q===!1){t.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var Ee=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=Ee,this._geolocateButton.setAttribute("aria-label",Ee)}else{var Pe=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=Pe,this._geolocateButton.setAttribute("aria-label",Pe)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Ic(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ic({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(Ze){var ft=Ze.originalEvent&&Ze.originalEvent.type==="resize";!Ze.geolocateSource&&ge._watchState==="ACTIVE_LOCK"&&!ft&&(ge._watchState="BACKGROUND",ge._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),ge._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),ge.fire(new t.Event("trackuserlocationend")))})},X.prototype.trigger=function(){if(!this._setup)return t.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new t.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":zc--,tc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new t.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new t.Event("trackuserlocationstart"));break}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error");break}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),zc++;var Q;zc>1?(Q={maximumAge:6e5,timeout:0},tc=!0):(Q=this.options.positionOptions,tc=!1),this._geolocationWatchID=t.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,Q)}}else t.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},X.prototype._clearWatch=function(){t.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},X}(t.Evented),$d={maxWidth:100,unit:"metric"},rc=function(X){this.options=t.extend({},$d,X),t.bindAll(["_onMove","setUnit"],this)};rc.prototype.getDefaultPosition=function(){return"bottom-left"},rc.prototype._onMove=function(){cp(this._map,this._container,this.options)},rc.prototype.onAdd=function(X){return this._map=X,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",X.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},rc.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},rc.prototype.setUnit=function(X){this.options.unit=X,cp(this._map,this._container,this.options)};function cp(ve,X,de){var Q=de&&de.maxWidth||100,ge=ve._container.clientHeight/2,Ee=ve.unproject([0,ge]),Pe=ve.unproject([Q,ge]),Ze=Ee.distanceTo(Pe);if(de&&de.unit==="imperial"){var ft=3.2808*Ze;if(ft>5280){var At=ft/5280;Fc(X,Q,At,ve._getUIString("ScaleControl.Miles"))}else Fc(X,Q,ft,ve._getUIString("ScaleControl.Feet"))}else if(de&&de.unit==="nautical"){var Vt=Ze/1852;Fc(X,Q,Vt,ve._getUIString("ScaleControl.NauticalMiles"))}else Ze>=1e3?Fc(X,Q,Ze/1e3,ve._getUIString("ScaleControl.Kilometers")):Fc(X,Q,Ze,ve._getUIString("ScaleControl.Meters"))}function Fc(ve,X,de,Q){var ge=e0(de),Ee=ge/de;ve.style.width=X*Ee+"px",ve.innerHTML=ge+"&nbsp;"+Q}function qd(ve){var X=Math.pow(10,Math.ceil(-Math.log(ve)/Math.LN10));return Math.round(ve*X)/X}function e0(ve){var X=Math.pow(10,(""+Math.floor(ve)).length-1),de=ve/X;return de=de>=10?10:de>=5?5:de>=3?3:de>=2?2:de>=1?1:qd(de),X*de}var Bu=function(X){this._fullscreen=!1,X&&X.container&&(X.container instanceof t.window.HTMLElement?this._container=X.container:t.warnOnce("Full screen control 'container' must be a DOM element.")),t.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in t.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in t.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in t.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in t.window.document&&(this._fullscreenchange="MSFullscreenChange")};Bu.prototype.onAdd=function(X){return this._map=X,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",t.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Bu.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,t.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Bu.prototype._checkFullscreenSupport=function(){return!!(t.window.document.fullscreenEnabled||t.window.document.mozFullScreenEnabled||t.window.document.msFullscreenEnabled||t.window.document.webkitFullscreenEnabled)},Bu.prototype._setupUI=function(){var X=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",X).setAttribute("aria-hidden",!0),X.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),t.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Bu.prototype._updateTitle=function(){var X=this._getTitle();this._fullscreenButton.setAttribute("aria-label",X),this._fullscreenButton.title=X},Bu.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Bu.prototype._isFullscreen=function(){return this._fullscreen},Bu.prototype._changeIcon=function(){var X=t.window.document.fullscreenElement||t.window.document.mozFullScreenElement||t.window.document.webkitFullscreenElement||t.window.document.msFullscreenElement;X===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Bu.prototype._onClickFullscreen=function(){this._isFullscreen()?t.window.document.exitFullscreen?t.window.document.exitFullscreen():t.window.document.mozCancelFullScreen?t.window.document.mozCancelFullScreen():t.window.document.msExitFullscreen?t.window.document.msExitFullscreen():t.window.document.webkitCancelFullScreen&&t.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var t0={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},r0=function(ve){function X(de){ve.call(this),this.options=t.extend(Object.create(t0),de),t.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return ve&&(X.__proto__=ve),X.prototype=Object.create(ve&&ve.prototype),X.prototype.constructor=X,X.prototype.addTo=function(Q){return this._map&&this.remove(),this._map=Q,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new t.Event("open")),this},X.prototype.isOpen=function(){return!!this._map},X.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new t.Event("close")),this},X.prototype.getLngLat=function(){return this._lngLat},X.prototype.setLngLat=function(Q){return this._lngLat=t.LngLat.convert(Q),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},X.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},X.prototype.getElement=function(){return this._container},X.prototype.setText=function(Q){return this.setDOMContent(t.window.document.createTextNode(Q))},X.prototype.setHTML=function(Q){var ge=t.window.document.createDocumentFragment(),Ee=t.window.document.createElement("body"),Pe;for(Ee.innerHTML=Q;Pe=Ee.firstChild,!!Pe;)ge.appendChild(Pe);return this.setDOMContent(ge)},X.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},X.prototype.setMaxWidth=function(Q){return this.options.maxWidth=Q,this._update(),this},X.prototype.setDOMContent=function(Q){return this._createContent(),this._content.appendChild(Q),this._update(),this},X.prototype.addClassName=function(Q){this._container&&this._container.classList.add(Q)},X.prototype.removeClassName=function(Q){this._container&&this._container.classList.remove(Q)},X.prototype.toggleClassName=function(Q){if(this._container)return this._container.classList.toggle(Q)},X.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},X.prototype._onMouseUp=function(Q){this._update(Q.point)},X.prototype._onMouseMove=function(Q){this._update(Q.point)},X.prototype._onDrag=function(Q){this._update(Q.point)},X.prototype._update=function(Q){var ge=this,Ee=this._lngLat||this._trackPointer;if(!(!this._map||!Ee||!this._content)&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Sr){return ge._container.classList.add(Sr)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Pf(this._lngLat,this._pos,this._map.transform)),!(this._trackPointer&&!Q))){var Pe=this._pos=this._trackPointer&&Q?Q:this._map.project(this._lngLat),Ze=this.options.anchor,ft=hp(this.options.offset);if(!Ze){var At=this._container.offsetWidth,Vt=this._container.offsetHeight,$t;Pe.y+ft.bottom.y<Vt?$t=["top"]:Pe.y>this._map.transform.height-Vt?$t=["bottom"]:$t=[],Pe.x<At/2?$t.push("left"):Pe.x>this._map.transform.width-At/2&&$t.push("right"),$t.length===0?Ze="bottom":Ze=$t.join("-")}var ir=Pe.add(ft[Ze]).round();a.setTransform(this._container,bh[Ze]+" translate("+ir.x+"px,"+ir.y+"px)"),Qh(this._container,Ze,"popup")}},X.prototype._onClose=function(){this.remove()},X}(t.Evented);function hp(ve){if(ve)if(typeof ve=="number"){var X=Math.round(Math.sqrt(.5*Math.pow(ve,2)));return{center:new t.Point(0,0),top:new t.Point(0,ve),"top-left":new t.Point(X,X),"top-right":new t.Point(-X,X),bottom:new t.Point(0,-ve),"bottom-left":new t.Point(X,-X),"bottom-right":new t.Point(-X,-X),left:new t.Point(ve,0),right:new t.Point(-ve,0)}}else if(ve instanceof t.Point||Array.isArray(ve)){var de=t.Point.convert(ve);return{center:de,top:de,"top-left":de,"top-right":de,bottom:de,"bottom-left":de,"bottom-right":de,left:de,right:de}}else return{center:t.Point.convert(ve.center||[0,0]),top:t.Point.convert(ve.top||[0,0]),"top-left":t.Point.convert(ve["top-left"]||[0,0]),"top-right":t.Point.convert(ve["top-right"]||[0,0]),bottom:t.Point.convert(ve.bottom||[0,0]),"bottom-left":t.Point.convert(ve["bottom-left"]||[0,0]),"bottom-right":t.Point.convert(ve["bottom-right"]||[0,0]),left:t.Point.convert(ve.left||[0,0]),right:t.Point.convert(ve.right||[0,0])};else return hp(new t.Point(0,0))}var n0={version:t.version,supported:i,setRTLTextPlugin:t.setRTLTextPlugin,getRTLTextPluginStatus:t.getRTLTextPluginStatus,Map:lp,NavigationControl:Lf,GeolocateControl:fp,AttributionControl:gu,ScaleControl:rc,FullscreenControl:Bu,Popup:r0,Marker:Ic,Style:ps,LngLat:t.LngLat,LngLatBounds:t.LngLatBounds,Point:t.Point,MercatorCoordinate:t.MercatorCoordinate,Evented:t.Evented,config:t.config,prewarm:Rr,clearPrewarmedResources:tn,get accessToken(){return t.config.ACCESS_TOKEN},set accessToken(ve){t.config.ACCESS_TOKEN=ve},get baseApiUrl(){return t.config.API_URL},set baseApiUrl(ve){t.config.API_URL=ve},get workerCount(){return yr.workerCount},set workerCount(ve){yr.workerCount=ve},get maxParallelImageRequests(){return t.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(ve){t.config.MAX_PARALLEL_IMAGE_REQUESTS=ve},clearStorage:function(X){t.clearTileCache(X)},workerUrl:""};return n0}),m})},{}],240:[function(e,z,N){z.exports=Math.log2||function(u){return Math.log(u)*Math.LOG2E}},{}],241:[function(e,z,N){z.exports=s;var u=e("mouse-event");function s(m,x){x||(x=m,m=window);var t=0,i=0,a=0,r={shift:!1,alt:!1,control:!1,meta:!1},n=!1;function f(M){var _=!1;return"altKey"in M&&(_=_||M.altKey!==r.alt,r.alt=!!M.altKey),"shiftKey"in M&&(_=_||M.shiftKey!==r.shift,r.shift=!!M.shiftKey),"ctrlKey"in M&&(_=_||M.ctrlKey!==r.control,r.control=!!M.ctrlKey),"metaKey"in M&&(_=_||M.metaKey!==r.meta,r.meta=!!M.metaKey),_}function l(M,_){var T=u.x(_),w=u.y(_);"buttons"in _&&(M=_.buttons|0),(M!==t||T!==i||w!==a||f(_))&&(t=M|0,i=T||0,a=w||0,x&&x(t,i,a,r))}function o(M){l(0,M)}function c(){(t||i||a||r.shift||r.alt||r.meta||r.control)&&(i=a=0,t=0,r.shift=r.alt=r.control=r.meta=!1,x&&x(0,0,0,r))}function h(M){f(M)&&x&&x(t,i,a,r)}function d(M){u.buttons(M)===0?l(0,M):l(t,M)}function p(M){l(t|u.buttons(M),M)}function y(M){l(t&~u.buttons(M),M)}function g(){n||(n=!0,m.addEventListener("mousemove",d),m.addEventListener("mousedown",p),m.addEventListener("mouseup",y),m.addEventListener("mouseleave",o),m.addEventListener("mouseenter",o),m.addEventListener("mouseout",o),m.addEventListener("mouseover",o),m.addEventListener("blur",c),m.addEventListener("keyup",h),m.addEventListener("keydown",h),m.addEventListener("keypress",h),m!==window&&(window.addEventListener("blur",c),window.addEventListener("keyup",h),window.addEventListener("keydown",h),window.addEventListener("keypress",h)))}function A(){!n||(n=!1,m.removeEventListener("mousemove",d),m.removeEventListener("mousedown",p),m.removeEventListener("mouseup",y),m.removeEventListener("mouseleave",o),m.removeEventListener("mouseenter",o),m.removeEventListener("mouseout",o),m.removeEventListener("mouseover",o),m.removeEventListener("blur",c),m.removeEventListener("keyup",h),m.removeEventListener("keydown",h),m.removeEventListener("keypress",h),m!==window&&(window.removeEventListener("blur",c),window.removeEventListener("keyup",h),window.removeEventListener("keydown",h),window.removeEventListener("keypress",h)))}g();var b={element:m};return Object.defineProperties(b,{enabled:{get:function(){return n},set:function(M){M?g():A()},enumerable:!0},buttons:{get:function(){return t},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return a},enumerable:!0},mods:{get:function(){return r},enumerable:!0}}),b}},{"mouse-event":243}],242:[function(e,z,N){var u={left:0,top:0};z.exports=s;function s(x,t,i){t=t||x.currentTarget||x.srcElement,Array.isArray(i)||(i=[0,0]);var a=x.clientX||0,r=x.clientY||0,n=m(t);return i[0]=a-n.left,i[1]=r-n.top,i}function m(x){return x===window||x===document||x===document.body?u:x.getBoundingClientRect()}},{}],243:[function(e,z,N){function u(t){if(typeof t=="object"){if("buttons"in t)return t.buttons;if("which"in t){var i=t.which;if(i===2)return 4;if(i===3)return 2;if(i>0)return 1<<i-1}else if("button"in t){var i=t.button;if(i===1)return 4;if(i===2)return 2;if(i>=0)return 1<<i}}return 0}N.buttons=u;function s(t){return t.target||t.srcElement||window}N.element=s;function m(t){if(typeof t=="object"){if("offsetX"in t)return t.offsetX;var i=s(t),a=i.getBoundingClientRect();return t.clientX-a.left}return 0}N.x=m;function x(t){if(typeof t=="object"){if("offsetY"in t)return t.offsetY;var i=s(t),a=i.getBoundingClientRect();return t.clientY-a.top}return 0}N.y=x},{}],244:[function(e,z,N){var u=e("to-px");z.exports=s;function s(m,x,t){typeof m=="function"&&(t=!!x,x=m,m=window);var i=u("ex",m),a=function(r){t&&r.preventDefault();var n=r.deltaX||0,f=r.deltaY||0,l=r.deltaZ||0,o=r.deltaMode,c=1;switch(o){case 1:c=i;break;case 2:c=window.innerHeight;break}if(n*=c,f*=c,l*=c,n||f||l)return x(n,f,l,r)};return m.addEventListener("wheel",a),a}},{"to-px":314}],245:[function(e,z,N){(function(u,s){(function(){/*! Native Promise Only
    v0.8.1 (c) Kyle Simpson
    MIT License: http://getify.mit-license.org
*/(function(x,t,i){t[x]=t[x]||i(),typeof z!="undefined"&&z.exports&&(z.exports=t[x])})("Promise",typeof u!="undefined"?u:this,function(){var x,t,i,a=Object.prototype.toString,r=typeof s!="undefined"?function(M){return s(M)}:setTimeout;try{Object.defineProperty({},"x",{}),x=function(M,_,T,w){return Object.defineProperty(M,_,{value:T,writable:!0,configurable:w!==!1})}}catch{x=function(_,T,w){return _[T]=w,_}}i=function(){var M,_,T;function w(v,L){this.fn=v,this.self=L,this.next=void 0}return{add:function(L,S){T=new w(L,S),_?_.next=T:M=T,_=T,T=void 0},drain:function(){var L=M;for(M=_=t=void 0;L;)L.fn.call(L.self),L=L.next}}}();function n(b,M){i.add(b,M),t||(t=r(i.drain))}function f(b){var M,_=typeof b;return b!=null&&(_=="object"||_=="function")&&(M=b.then),typeof M=="function"?M:!1}function l(){for(var b=0;b<this.chain.length;b++)o(this,this.state===1?this.chain[b].success:this.chain[b].failure,this.chain[b]);this.chain.length=0}function o(b,M,_){var T,w;try{M===!1?_.reject(b.msg):(M===!0?T=b.msg:T=M.call(void 0,b.msg),T===_.promise?_.reject(TypeError("Promise-chain cycle")):(w=f(T))?w.call(T,_.resolve,_.reject):_.resolve(T))}catch(v){_.reject(v)}}function c(b){var M,_=this;if(!_.triggered){_.triggered=!0,_.def&&(_=_.def);try{(M=f(b))?n(function(){var T=new p(_);try{M.call(b,function(){c.apply(T,arguments)},function(){h.apply(T,arguments)})}catch(w){h.call(T,w)}}):(_.msg=b,_.state=1,_.chain.length>0&&n(l,_))}catch(T){h.call(new p(_),T)}}}function h(b){var M=this;M.triggered||(M.triggered=!0,M.def&&(M=M.def),M.msg=b,M.state=2,M.chain.length>0&&n(l,M))}function d(b,M,_,T){for(var w=0;w<M.length;w++)(function(L){b.resolve(M[L]).then(function(k){_(L,k)},T)})(w)}function p(b){this.def=b,this.triggered=!1}function y(b){this.promise=b,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(b){if(typeof b!="function")throw TypeError("Not a function");if(this.__NPO__!==0)throw TypeError("Not a promise");this.__NPO__=1;var M=new y(this);this.then=function(T,w){var v={success:typeof T=="function"?T:!0,failure:typeof w=="function"?w:!1};return v.promise=new this.constructor(function(S,k){if(typeof S!="function"||typeof k!="function")throw TypeError("Not a function");v.resolve=S,v.reject=k}),M.chain.push(v),M.state!==0&&n(l,M),v.promise},this.catch=function(T){return this.then(void 0,T)};try{b.call(void 0,function(T){c.call(M,T)},function(T){h.call(M,T)})}catch(_){h.call(M,_)}}var A=x({},"constructor",g,!1);return g.prototype=A,x(A,"__NPO__",0,!1),x(g,"resolve",function(M){var _=this;return M&&typeof M=="object"&&M.__NPO__===1?M:new _(function(w,v){if(typeof w!="function"||typeof v!="function")throw TypeError("Not a function");w(M)})}),x(g,"reject",function(M){return new this(function(T,w){if(typeof T!="function"||typeof w!="function")throw TypeError("Not a function");w(M)})}),x(g,"all",function(M){var _=this;return a.call(M)!="[object Array]"?_.reject(TypeError("Not an array")):M.length===0?_.resolve([]):new _(function(w,v){if(typeof w!="function"||typeof v!="function")throw TypeError("Not a function");var L=M.length,S=Array(L),k=0;d(_,M,function(O,F){S[O]=F,++k===L&&w(S)},v)})}),x(g,"race",function(M){var _=this;return a.call(M)!="[object Array]"?_.reject(TypeError("Not an array")):new _(function(w,v){if(typeof w!="function"||typeof v!="function")throw TypeError("Not a function");d(_,M,function(S,k){w(k)},v)})}),g})}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{},e("timers").setImmediate)},{timers:311}],246:[function(e,z,N){var u=Math.PI,s=r(120);z.exports=m;function m(n){for(var f,l=[],o=0,c=0,h=0,d=0,p=null,y=null,g=0,A=0,b=0,M=n.length;b<M;b++){var _=n[b],T=_[0];switch(T){case"M":h=_[1],d=_[2];break;case"A":_=i(g,A,_[1],_[2],r(_[3]),_[4],_[5],_[6],_[7]),_.unshift("C"),_.length>7&&(l.push(_.splice(0,7)),_.unshift("C"));break;case"S":var w=g,v=A;(f=="C"||f=="S")&&(w+=w-o,v+=v-c),_=["C",w,v,_[1],_[2],_[3],_[4]];break;case"T":f=="Q"||f=="T"?(p=g*2-p,y=A*2-y):(p=g,y=A),_=t(g,A,p,y,_[1],_[2]);break;case"Q":p=_[1],y=_[2],_=t(g,A,_[1],_[2],_[3],_[4]);break;case"L":_=x(g,A,_[1],_[2]);break;case"H":_=x(g,A,_[1],A);break;case"V":_=x(g,A,g,_[1]);break;case"Z":_=x(g,A,h,d);break}f=T,g=_[_.length-2],A=_[_.length-1],_.length>4?(o=_[_.length-4],c=_[_.length-3]):(o=g,c=A),l.push(_)}return l}function x(n,f,l,o){return["C",n,f,l,o,l,o]}function t(n,f,l,o,c,h){return["C",n/3+2/3*l,f/3+2/3*o,c/3+2/3*l,h/3+2/3*o,c,h]}function i(n,f,l,o,c,h,d,p,y,g){if(g)k=g[0],P=g[1],L=g[2],S=g[3];else{var A=a(n,f,-c);n=A.x,f=A.y,A=a(p,y,-c),p=A.x,y=A.y;var b=(n-p)/2,M=(f-y)/2,_=b*b/(l*l)+M*M/(o*o);_>1&&(_=Math.sqrt(_),l=_*l,o=_*o);var T=l*l,w=o*o,v=(h==d?-1:1)*Math.sqrt(Math.abs((T*w-T*M*M-w*b*b)/(T*M*M+w*b*b)));v==1/0&&(v=1);var L=v*l*M/o+(n+p)/2,S=v*-o*b/l+(f+y)/2,k=Math.asin(((f-S)/o).toFixed(9)),P=Math.asin(((y-S)/o).toFixed(9));k=n<L?u-k:k,P=p<L?u-P:P,k<0&&(k=u*2+k),P<0&&(P=u*2+P),d&&k>P&&(k=k-u*2),!d&&P>k&&(P=P-u*2)}if(Math.abs(P-k)>s){var O=P,F=p,I=y;P=k+s*(d&&P>k?1:-1),p=L+l*Math.cos(P),y=S+o*Math.sin(P);var D=i(p,y,l,o,c,0,d,F,I,[P,O,L,S])}var U=Math.tan((P-k)/4),B=4/3*l*U,j=4/3*o*U,Z=[2*n-(n+B*Math.sin(k)),2*f-(f-j*Math.cos(k)),p+B*Math.sin(P),y-j*Math.cos(P),p,y];if(g)return Z;D&&(Z=Z.concat(D));for(var ee=0;ee<Z.length;){var q=a(Z[ee],Z[ee+1],c);Z[ee++]=q.x,Z[ee++]=q.y}return Z}function a(n,f,l){return{x:n*Math.cos(l)-f*Math.sin(l),y:n*Math.sin(l)+f*Math.cos(l)}}function r(n){return n*(u/180)}},{}],247:[function(e,z,N){var u=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable;function x(i){if(i==null)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(i)}function t(){try{if(!Object.assign)return!1;var i=new String("abc");if(i[5]="de",Object.getOwnPropertyNames(i)[0]==="5")return!1;for(var a={},r=0;r<10;r++)a["_"+String.fromCharCode(r)]=r;var n=Object.getOwnPropertyNames(a).map(function(l){return a[l]});if(n.join("")!=="0123456789")return!1;var f={};return"abcdefghijklmnopqrst".split("").forEach(function(l){f[l]=l}),Object.keys(Object.assign({},f)).join("")==="abcdefghijklmnopqrst"}catch{return!1}}z.exports=t()?Object.assign:function(i,a){for(var r,n=x(i),f,l=1;l<arguments.length;l++){r=Object(arguments[l]);for(var o in r)s.call(r,o)&&(n[o]=r[o]);if(u){f=u(r);for(var c=0;c<f.length;c++)m.call(r,f[c])&&(n[f[c]]=r[f[c]])}}return n}},{}],248:[function(e,z,N){function u(x,t){if(typeof x!="string")return[x];var i=[x];typeof t=="string"||Array.isArray(t)?t={brackets:t}:t||(t={});var a=t.brackets?Array.isArray(t.brackets)?t.brackets:[t.brackets]:["{}","[]","()"],r=t.escape||"___",n=!!t.flat;a.forEach(function(o){var c=new RegExp(["\\",o[0],"[^\\",o[0],"\\",o[1],"]*\\",o[1]].join("")),h=[];function d(p,y,g){var A=i.push(p.slice(o[0].length,-o[1].length))-1;return h.push(A),r+A+r}i.forEach(function(p,y){for(var g,A=0;p!=g;)if(g=p,p=p.replace(c,d),A++>1e4)throw Error("References have circular dependency. Please, check them.");i[y]=p}),h=h.reverse(),i=i.map(function(p){return h.forEach(function(y){p=p.replace(new RegExp("(\\"+r+y+"\\"+r+")","g"),o[0]+"$1"+o[1])}),p})});var f=new RegExp("\\"+r+"([0-9]+)\\"+r);function l(o,c,h){for(var d=[],p,y=0;p=f.exec(o);){if(y++>1e4)throw Error("Circular references in parenthesis");d.push(o.slice(0,p.index)),d.push(l(c[p[1]],c)),o=o.slice(p.index+p[0].length)}return d.push(o),d}return n?i:l(i[0],i)}function s(x,t){if(t&&t.flat){var i=t&&t.escape||"___",a=x[0],r;if(!a)return"";for(var n=new RegExp("\\"+i+"([0-9]+)\\"+i),f=0;a!=r;){if(f++>1e4)throw Error("Circular references in "+x);r=a,a=a.replace(n,l)}return a}return x.reduce(function o(c,h){return Array.isArray(h)&&(h=h.reduce(o,"")),c+h},"");function l(o,c){if(x[c]==null)throw Error("Reference "+c+"is undefined");return x[c]}}function m(x,t){return Array.isArray(x)?s(x,t):u(x,t)}m.parse=u,m.stringify=s,z.exports=m},{}],249:[function(e,z,N){var u=e("pick-by-alias");z.exports=s;function s(m){var x;return arguments.length>1&&(m=arguments),typeof m=="string"?m=m.split(/\s/).map(parseFloat):typeof m=="number"&&(m=[m]),m.length&&typeof m[0]=="number"?m.length===1?x={width:m[0],height:m[0],x:0,y:0}:m.length===2?x={width:m[0],height:m[1],x:0,y:0}:x={x:m[0],y:m[1],width:m[2]-m[0]||0,height:m[3]-m[1]||0}:m&&(m=u(m,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"}),x={x:m.left||0,y:m.top||0},m.width==null?m.right?x.width=m.right-x.x:x.width=0:x.width=m.width,m.height==null?m.bottom?x.height=m.bottom-x.y:x.height=0:x.height=m.height),x}},{"pick-by-alias":253}],250:[function(e,z,N){z.exports=m;var u={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},s=/([astvzqmhlc])([^astvzqmhlc]*)/ig;function m(i){var a=[];return i.replace(s,function(r,n,f){var l=n.toLowerCase();for(f=t(f),l=="m"&&f.length>2&&(a.push([n].concat(f.splice(0,2))),l="l",n=n=="m"?"l":"L");;){if(f.length==u[l])return f.unshift(n),a.push(f);if(f.length<u[l])throw new Error("malformed path data");a.push([n].concat(f.splice(0,u[l])))}}),a}var x=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/ig;function t(i){var a=i.match(x);return a?a.map(Number):[]}},{}],251:[function(e,z,N){z.exports=function(s,m){m||(m=[0,""]),s=String(s);var x=parseFloat(s,10);return m[0]=x,m[1]=s.match(/[\d.\-\+]*\s*(.*)/)[1]||"",m}},{}],252:[function(e,z,N){(function(u){(function(){(function(){var s,m,x,t,i,a;typeof performance!="undefined"&&performance!==null&&performance.now?z.exports=function(){return performance.now()}:typeof u!="undefined"&&u!==null&&u.hrtime?(z.exports=function(){return(s()-i)/1e6},m=u.hrtime,s=function(){var r;return r=m(),r[0]*1e9+r[1]},t=s(),a=u.uptime()*1e9,i=t-a):Date.now?(z.exports=function(){return Date.now()-x},x=Date.now()):(z.exports=function(){return new Date().getTime()-x},x=new Date().getTime())}).call(this)}).call(this)}).call(this,e("_process"))},{_process:277}],253:[function(e,z,N){z.exports=function(x,t,i){var a={},r,n;if(typeof t=="string"&&(t=s(t)),Array.isArray(t)){var f={};for(n=0;n<t.length;n++)f[t[n]]=!0;t=f}for(r in t)t[r]=s(t[r]);var l={};for(r in t){var o=t[r];if(Array.isArray(o))for(n=0;n<o.length;n++){var c=o[n];if(i&&(l[c]=!0),c in x){if(a[r]=x[c],i)for(var h=n;h<o.length;h++)l[o[h]]=!0;break}}else r in x&&(t[r]&&(a[r]=x[r]),i&&(l[r]=!0))}if(i)for(r in x)l[r]||(a[r]=x[r]);return a};var u={};function s(m){return u[m]?u[m]:(typeof m=="string"&&(m=u[m]=m.split(/\s*,\s*|\s+/)),m)}},{}],254:[function(e,z,N){/*
 * @copyright 2016 Sean Connelly (@voidqk), http://syntheti.cc
 * @license MIT
 * @preserve Project Home: https://github.com/voidqk/polybooljs
 */var u=e("./lib/build-log"),s=e("./lib/epsilon"),m=e("./lib/intersecter"),x=e("./lib/segment-chainer"),t=e("./lib/segment-selector"),i=e("./lib/geojson"),a=!1,r=s(),n;n={buildLog:function(l){return l===!0?a=u():l===!1&&(a=!1),a===!1?!1:a.list},epsilon:function(l){return r.epsilon(l)},segments:function(l){var o=m(!0,r,a);return l.regions.forEach(o.addRegion),{segments:o.calculate(l.inverted),inverted:l.inverted}},combine:function(l,o){var c=m(!1,r,a);return{combined:c.calculate(l.segments,l.inverted,o.segments,o.inverted),inverted1:l.inverted,inverted2:o.inverted}},selectUnion:function(l){return{segments:t.union(l.combined,a),inverted:l.inverted1||l.inverted2}},selectIntersect:function(l){return{segments:t.intersect(l.combined,a),inverted:l.inverted1&&l.inverted2}},selectDifference:function(l){return{segments:t.difference(l.combined,a),inverted:l.inverted1&&!l.inverted2}},selectDifferenceRev:function(l){return{segments:t.differenceRev(l.combined,a),inverted:!l.inverted1&&l.inverted2}},selectXor:function(l){return{segments:t.xor(l.combined,a),inverted:l.inverted1!==l.inverted2}},polygon:function(l){return{regions:x(l.segments,r,a),inverted:l.inverted}},polygonFromGeoJSON:function(l){return i.toPolygon(n,l)},polygonToGeoJSON:function(l){return i.fromPolygon(n,r,l)},union:function(l,o){return f(l,o,n.selectUnion)},intersect:function(l,o){return f(l,o,n.selectIntersect)},difference:function(l,o){return f(l,o,n.selectDifference)},differenceRev:function(l,o){return f(l,o,n.selectDifferenceRev)},xor:function(l,o){return f(l,o,n.selectXor)}};function f(l,o,c){var h=n.segments(l),d=n.segments(o),p=n.combine(h,d),y=c(p);return n.polygon(y)}typeof window=="object"&&(window.PolyBool=n),z.exports=n},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(e,z,N){function u(){var s,m=0,x=!1;function t(i,a){return s.list.push({type:i,data:a?JSON.parse(JSON.stringify(a)):void 0}),s}return s={list:[],segmentId:function(){return m++},checkIntersection:function(i,a){return t("check",{seg1:i,seg2:a})},segmentChop:function(i,a){return t("div_seg",{seg:i,pt:a}),t("chop",{seg:i,pt:a})},statusRemove:function(i){return t("pop_seg",{seg:i})},segmentUpdate:function(i){return t("seg_update",{seg:i})},segmentNew:function(i,a){return t("new_seg",{seg:i,primary:a})},segmentRemove:function(i){return t("rem_seg",{seg:i})},tempStatus:function(i,a,r){return t("temp_status",{seg:i,above:a,below:r})},rewind:function(i){return t("rewind",{seg:i})},status:function(i,a,r){return t("status",{seg:i,above:a,below:r})},vert:function(i){return i===x?s:(x=i,t("vert",{x:i}))},log:function(i){return typeof i!="string"&&(i=JSON.stringify(i,!1,"  ")),t("log",{txt:i})},reset:function(){return t("reset")},selected:function(i){return t("selected",{segs:i})},chainStart:function(i){return t("chain_start",{seg:i})},chainRemoveHead:function(i,a){return t("chain_rem_head",{index:i,pt:a})},chainRemoveTail:function(i,a){return t("chain_rem_tail",{index:i,pt:a})},chainNew:function(i,a){return t("chain_new",{pt1:i,pt2:a})},chainMatch:function(i){return t("chain_match",{index:i})},chainClose:function(i){return t("chain_close",{index:i})},chainAddHead:function(i,a){return t("chain_add_head",{index:i,pt:a})},chainAddTail:function(i,a){return t("chain_add_tail",{index:i,pt:a})},chainConnect:function(i,a){return t("chain_con",{index1:i,index2:a})},chainReverse:function(i){return t("chain_rev",{index:i})},chainJoin:function(i,a){return t("chain_join",{index1:i,index2:a})},done:function(){return t("done")}},s}z.exports=u},{}],256:[function(e,z,N){function u(s){typeof s!="number"&&(s=1e-10);var m={epsilon:function(x){return typeof x=="number"&&(s=x),s},pointAboveOrOnLine:function(x,t,i){var a=t[0],r=t[1],n=i[0],f=i[1],l=x[0],o=x[1];return(n-a)*(o-r)-(f-r)*(l-a)>=-s},pointBetween:function(x,t,i){var a=x[1]-t[1],r=i[0]-t[0],n=x[0]-t[0],f=i[1]-t[1],l=n*r+a*f;if(l<s)return!1;var o=r*r+f*f;return!(l-o>-s)},pointsSameX:function(x,t){return Math.abs(x[0]-t[0])<s},pointsSameY:function(x,t){return Math.abs(x[1]-t[1])<s},pointsSame:function(x,t){return m.pointsSameX(x,t)&&m.pointsSameY(x,t)},pointsCompare:function(x,t){return m.pointsSameX(x,t)?m.pointsSameY(x,t)?0:x[1]<t[1]?-1:1:x[0]<t[0]?-1:1},pointsCollinear:function(x,t,i){var a=x[0]-t[0],r=x[1]-t[1],n=t[0]-i[0],f=t[1]-i[1];return Math.abs(a*f-n*r)<s},linesIntersect:function(x,t,i,a){var r=t[0]-x[0],n=t[1]-x[1],f=a[0]-i[0],l=a[1]-i[1],o=r*l-n*f;if(Math.abs(o)<s)return!1;var c=x[0]-i[0],h=x[1]-i[1],d=(f*h-l*c)/o,p=(r*h-n*c)/o,y={alongA:0,alongB:0,pt:[x[0]+d*r,x[1]+d*n]};return d<=-s?y.alongA=-2:d<s?y.alongA=-1:d-1<=-s?y.alongA=0:d-1<s?y.alongA=1:y.alongA=2,p<=-s?y.alongB=-2:p<s?y.alongB=-1:p-1<=-s?y.alongB=0:p-1<s?y.alongB=1:y.alongB=2,y},pointInsideRegion:function(x,t){for(var i=x[0],a=x[1],r=t[t.length-1][0],n=t[t.length-1][1],f=!1,l=0;l<t.length;l++){var o=t[l][0],c=t[l][1];c-a>s!=n-a>s&&(r-o)*(a-c)/(n-c)+o-i>s&&(f=!f),r=o,n=c}return f}};return m}z.exports=u},{}],257:[function(e,z,N){var u={toPolygon:function(s,m){function x(a){if(a.length<=0)return s.segments({inverted:!1,regions:[]});function r(l){var o=l.slice(0,l.length-1);return s.segments({inverted:!1,regions:[o]})}for(var n=r(a[0]),f=1;f<a.length;f++)n=s.selectDifference(s.combine(n,r(a[f])));return n}if(m.type==="Polygon")return s.polygon(x(m.coordinates));if(m.type==="MultiPolygon"){for(var t=s.segments({inverted:!1,regions:[]}),i=0;i<m.coordinates.length;i++)t=s.selectUnion(s.combine(t,x(m.coordinates[i])));return s.polygon(t)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(s,m,x){x=s.polygon(s.segments(x));function t(d,p){return m.pointInsideRegion([(d[0][0]+d[1][0])*.5,(d[0][1]+d[1][1])*.5],p)}function i(d){return{region:d,children:[]}}var a=i(null);function r(d,p){for(var y=0;y<d.children.length;y++){var g=d.children[y];if(t(p,g.region)){r(g,p);return}}for(var A=i(p),y=0;y<d.children.length;y++){var g=d.children[y];t(g.region,p)&&(A.children.push(g),d.children.splice(y,1),y--)}d.children.push(A)}for(var n=0;n<x.regions.length;n++){var f=x.regions[n];f.length<3||r(a,f)}function l(d,p){for(var y=0,g=d[d.length-1][0],A=d[d.length-1][1],b=[],M=0;M<d.length;M++){var _=d[M][0],T=d[M][1];b.push([_,T]),y+=T*g-_*A,g=_,A=T}var w=y<0;return w!==p&&b.reverse(),b.push([b[0][0],b[0][1]]),b}var o=[];function c(d){var p=[l(d.region,!1)];o.push(p);for(var y=0;y<d.children.length;y++)p.push(h(d.children[y]))}function h(d){for(var p=0;p<d.children.length;p++)c(d.children[p]);return l(d.region,!0)}for(var n=0;n<a.children.length;n++)c(a.children[n]);return o.length<=0?{type:"Polygon",coordinates:[]}:o.length==1?{type:"Polygon",coordinates:o[0]}:{type:"MultiPolygon",coordinates:o}}};z.exports=u},{}],258:[function(e,z,N){var u=e("./linked-list");function s(m,x,t){function i(y,g){return{id:t?t.segmentId():-1,start:y,end:g,myFill:{above:null,below:null},otherFill:null}}function a(y,g,A){return{id:t?t.segmentId():-1,start:y,end:g,myFill:{above:A.myFill.above,below:A.myFill.below},otherFill:null}}var r=u.create();function n(y,g,A,b,M,_){var T=x.pointsCompare(g,M);return T!==0?T:x.pointsSame(A,_)?0:y!==b?y?1:-1:x.pointAboveOrOnLine(A,b?M:_,b?_:M)?1:-1}function f(y,g){r.insertBefore(y,function(A){var b=n(y.isStart,y.pt,g,A.isStart,A.pt,A.other.pt);return b<0})}function l(y,g){var A=u.node({isStart:!0,pt:y.start,seg:y,primary:g,other:null,status:null});return f(A,y.end),A}function o(y,g,A){var b=u.node({isStart:!1,pt:g.end,seg:g,primary:A,other:y,status:null});y.other=b,f(b,y.pt)}function c(y,g){var A=l(y,g);return o(A,y,g),A}function h(y,g){t&&t.segmentChop(y.seg,g),y.other.remove(),y.seg.end=g,y.other.pt=g,f(y.other,y.pt)}function d(y,g){var A=a(g,y.seg.end,y.seg);return h(y,g),c(A,y.primary)}function p(y,g){var A=u.create();function b(D,U){var B=D.seg.start,j=D.seg.end,Z=U.seg.start,ee=U.seg.end;return x.pointsCollinear(B,Z,ee)?x.pointsCollinear(j,Z,ee)||x.pointAboveOrOnLine(j,Z,ee)?1:-1:x.pointAboveOrOnLine(B,Z,ee)?1:-1}function M(D){return A.findTransition(function(U){var B=b(D,U.ev);return B>0})}function _(D,U){var B=D.seg,j=U.seg,Z=B.start,ee=B.end,q=j.start,W=j.end;t&&t.checkIntersection(B,j);var J=x.linesIntersect(Z,ee,q,W);if(J===!1){if(!x.pointsCollinear(Z,ee,q)||x.pointsSame(Z,W)||x.pointsSame(ee,q))return!1;var le=x.pointsSame(Z,q),fe=x.pointsSame(ee,W);if(le&&fe)return U;var se=!le&&x.pointBetween(Z,q,W),H=!fe&&x.pointBetween(ee,q,W);if(le)return H?d(U,ee):d(D,W),U;se&&(fe||(H?d(U,ee):d(D,W)),d(U,Z))}else J.alongA===0&&(J.alongB===-1?d(D,q):J.alongB===0?d(D,J.pt):J.alongB===1&&d(D,W)),J.alongB===0&&(J.alongA===-1?d(U,Z):J.alongA===0?d(U,J.pt):J.alongA===1&&d(U,ee));return!1}for(var T=[];!r.isEmpty();){var w=r.getHead();if(t&&t.vert(w.pt[0]),w.isStart){let D=function(){if(L){var U=_(w,L);if(U)return U}return S?_(w,S):!1};t&&t.segmentNew(w.seg,w.primary);var v=M(w),L=v.before?v.before.ev:null,S=v.after?v.after.ev:null;t&&t.tempStatus(w.seg,L?L.seg:!1,S?S.seg:!1);var k=D();if(k){if(m){var P;w.seg.myFill.below===null?P=!0:P=w.seg.myFill.above!==w.seg.myFill.below,P&&(k.seg.myFill.above=!k.seg.myFill.above)}else k.seg.otherFill=w.seg.myFill;t&&t.segmentUpdate(k.seg),w.other.remove(),w.remove()}if(r.getHead()!==w){t&&t.rewind(w.seg);continue}if(m){var P;w.seg.myFill.below===null?P=!0:P=w.seg.myFill.above!==w.seg.myFill.below,S?w.seg.myFill.below=S.seg.myFill.above:w.seg.myFill.below=y,P?w.seg.myFill.above=!w.seg.myFill.below:w.seg.myFill.above=w.seg.myFill.below}else if(w.seg.otherFill===null){var O;S?w.primary===S.primary?O=S.seg.otherFill.above:O=S.seg.myFill.above:O=w.primary?g:y,w.seg.otherFill={above:O,below:O}}t&&t.status(w.seg,L?L.seg:!1,S?S.seg:!1),w.other.status=v.insert(u.node({ev:w}))}else{var F=w.status;if(F===null)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(A.exists(F.prev)&&A.exists(F.next)&&_(F.prev.ev,F.next.ev),t&&t.statusRemove(F.ev.seg),F.remove(),!w.primary){var I=w.seg.myFill;w.seg.myFill=w.seg.otherFill,w.seg.otherFill=I}T.push(w.seg)}r.getHead().remove()}return t&&t.done(),T}return m?{addRegion:function(y){for(var g,A=y[y.length-1],b=0;b<y.length;b++){g=A,A=y[b];var M=x.pointsCompare(g,A);M!==0&&c(i(M<0?g:A,M<0?A:g),!0)}},calculate:function(y){return p(y,!1)}}:{calculate:function(y,g,A,b){return y.forEach(function(M){c(a(M.start,M.end,M),!0)}),A.forEach(function(M){c(a(M.start,M.end,M),!1)}),p(g,b)}}}z.exports=s},{"./linked-list":259}],259:[function(e,z,N){var u={create:function(){var s={root:{root:!0,next:null},exists:function(m){return!(m===null||m===s.root)},isEmpty:function(){return s.root.next===null},getHead:function(){return s.root.next},insertBefore:function(m,x){for(var t=s.root,i=s.root.next;i!==null;){if(x(i)){m.prev=i.prev,m.next=i,i.prev.next=m,i.prev=m;return}t=i,i=i.next}t.next=m,m.prev=t,m.next=null},findTransition:function(m){for(var x=s.root,t=s.root.next;t!==null&&!m(t);)x=t,t=t.next;return{before:x===s.root?null:x,after:t,insert:function(i){return i.prev=x,i.next=t,x.next=i,t!==null&&(t.prev=i),i}}}};return s},node:function(s){return s.prev=null,s.next=null,s.remove=function(){s.prev.next=s.next,s.next&&(s.next.prev=s.prev),s.prev=null,s.next=null},s}};z.exports=u},{}],260:[function(e,z,N){function u(s,m,x){var t=[],i=[];return s.forEach(function(a){var r=a.start,n=a.end;if(m.pointsSame(r,n)){console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");return}x&&x.chainStart(a);var f={index:0,matches_head:!1,matches_pt1:!1},l={index:0,matches_head:!1,matches_pt1:!1},o=f;function c(O,F,I){return o.index=O,o.matches_head=F,o.matches_pt1=I,o===f?(o=l,!1):(o=null,!0)}for(var h=0;h<t.length;h++){var d=t[h],p=d[0];d[1];var y=d[d.length-1];if(d[d.length-2],m.pointsSame(p,r)){if(c(h,!0,!0))break}else if(m.pointsSame(p,n)){if(c(h,!0,!1))break}else if(m.pointsSame(y,r)){if(c(h,!1,!0))break}else if(m.pointsSame(y,n)&&c(h,!1,!1))break}if(o===f){t.push([r,n]),x&&x.chainNew(r,n);return}if(o===l){x&&x.chainMatch(f.index);var g=f.index,A=f.matches_pt1?n:r,b=f.matches_head,d=t[g],M=b?d[0]:d[d.length-1],_=b?d[1]:d[d.length-2],T=b?d[d.length-1]:d[0],w=b?d[d.length-2]:d[1];if(m.pointsCollinear(_,M,A)&&(b?(x&&x.chainRemoveHead(f.index,A),d.shift()):(x&&x.chainRemoveTail(f.index,A),d.pop()),M=_),m.pointsSame(T,A)){t.splice(g,1),m.pointsCollinear(w,T,M)&&(b?(x&&x.chainRemoveTail(f.index,M),d.pop()):(x&&x.chainRemoveHead(f.index,M),d.shift())),x&&x.chainClose(f.index),i.push(d);return}b?(x&&x.chainAddHead(f.index,A),d.unshift(A)):(x&&x.chainAddTail(f.index,A),d.push(A));return}function v(O){x&&x.chainReverse(O),t[O].reverse()}function L(O,F){var I=t[O],D=t[F],U=I[I.length-1],B=I[I.length-2],j=D[0],Z=D[1];m.pointsCollinear(B,U,j)&&(x&&x.chainRemoveTail(O,U),I.pop(),U=B),m.pointsCollinear(U,j,Z)&&(x&&x.chainRemoveHead(F,j),D.shift()),x&&x.chainJoin(O,F),t[O]=I.concat(D),t.splice(F,1)}var S=f.index,k=l.index;x&&x.chainConnect(S,k);var P=t[S].length<t[k].length;f.matches_head?l.matches_head?P?(v(S),L(S,k)):(v(k),L(k,S)):L(k,S):l.matches_head?L(S,k):P?(v(S),L(k,S)):(v(k),L(S,k))}),i}z.exports=u},{}],261:[function(e,z,N){function u(m,x,t){var i=[];return m.forEach(function(a){var r=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);x[r]!==0&&i.push({id:t?t.segmentId():-1,start:a.start,end:a.end,myFill:{above:x[r]===1,below:x[r]===2},otherFill:null})}),t&&t.selected(i),i}var s={union:function(m,x){return u(m,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],x)},intersect:function(m,x){return u(m,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],x)},difference:function(m,x){return u(m,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],x)},differenceRev:function(m,x){return u(m,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],x)},xor:function(m,x){return u(m,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],x)}};z.exports=s},{}],262:[function(e,z,N){var u=e("stream").Transform,s=e("stream-parser");function m(){u.call(this,{readableObjectMode:!0})}m.prototype=Object.create(u.prototype),m.prototype.constructor=m,s(m.prototype),N.ParserStream=m,N.sliceEq=function(t,i,a){for(var r=i,n=0;n<a.length;)if(t[r++]!==a[n++])return!1;return!0},N.str2arr=function(t,i){var a=[],r=0;if(i&&i==="hex")for(;r<t.length;)a.push(parseInt(t.slice(r,r+2),16)),r+=2;else for(;r<t.length;r++)a.push(t.charCodeAt(r)&255);return a},N.readUInt16LE=function(t,i){return t[i]|t[i+1]<<8},N.readUInt16BE=function(t,i){return t[i+1]|t[i]<<8},N.readUInt32LE=function(t,i){return t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]*16777216},N.readUInt32BE=function(t,i){return t[i+3]|t[i+2]<<8|t[i+1]<<16|t[i]*16777216};function x(t,i,a){Error.call(this),Error.captureStackTrace(this,this.constructor),this.name=this.constructor.name,this.message=t,i&&(this.code=i),a&&(this.statusCode=a)}x.prototype=Object.create(Error.prototype),x.prototype.constructor=x,N.ProbeError=x},{stream:285,"stream-parser":301}],263:[function(e,z,N){function u(x,t){var i=new Error(x);return i.code=t,i}function s(x){try{return decodeURIComponent(escape(x))}catch{return x}}function m(x,t,i){this.input=x.subarray(t,i),this.start=t;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if(a!=="II*\0"&&a!=="MM\0*")throw u("invalid TIFF signature","EBADDATA");this.big_endian=a[0]==="M"}m.prototype.each=function(x){this.aborted=!1;var t=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:t}];this.ifds_to_read.length>0&&!this.aborted;){var i=this.ifds_to_read.shift();!i.offset||this.scan_ifd(i.id,i.offset,x)}},m.prototype.read_uint16=function(x){var t=this.input;if(x+2>t.length)throw u("unexpected EOF","EBADDATA");return this.big_endian?t[x]*256+t[x+1]:t[x]+t[x+1]*256},m.prototype.read_uint32=function(x){var t=this.input;if(x+4>t.length)throw u("unexpected EOF","EBADDATA");return this.big_endian?t[x]*16777216+t[x+1]*65536+t[x+2]*256+t[x+3]:t[x]+t[x+1]*256+t[x+2]*65536+t[x+3]*16777216},m.prototype.is_subifd_link=function(x,t){return x===0&&t===34665||x===0&&t===34853||x===34665&&t===40965},m.prototype.exif_format_length=function(x){switch(x){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},m.prototype.exif_format_read=function(x,t){var i;switch(x){case 1:case 2:return i=this.input[t],i;case 6:return i=this.input[t],i|(i&128)*33554430;case 3:return i=this.read_uint16(t),i;case 8:return i=this.read_uint16(t),i|(i&32768)*131070;case 4:return i=this.read_uint32(t),i;case 9:return i=this.read_uint32(t),i|0;case 5:case 10:case 11:case 12:return null;case 7:return null;default:return null}},m.prototype.scan_ifd=function(x,t,i){var a=this.read_uint16(t);t+=2;for(var r=0;r<a;r++){var n=this.read_uint16(t),f=this.read_uint16(t+2),l=this.read_uint32(t+4),o=this.exif_format_length(f),c=l*o,h=c<=4?t+8:this.read_uint32(t+8),d=!1;if(h+c>this.input.length)throw u("unexpected EOF","EBADDATA");for(var p=[],y=h,g=0;g<l;g++,y+=o){var A=this.exif_format_read(f,y);if(A===null){p=null;break}p.push(A)}Array.isArray(p)&&f===2&&(p=s(String.fromCharCode.apply(null,p)),p&&p[p.length-1]==="\0"&&(p=p.slice(0,-1))),this.is_subifd_link(x,n)&&Array.isArray(p)&&Number.isInteger(p[0])&&p[0]>0&&(this.ifds_to_read.push({id:n,offset:p[0]}),d=!0);var b={is_big_endian:this.big_endian,ifd:x,tag:n,format:f,count:l,entry_offset:t+this.start,data_length:c,data_offset:h+this.start,value:p,is_subifd_link:d};if(i(b)===!1){this.aborted=!0;return}t+=12}x===0&&this.ifds_to_read.push({id:1,offset:this.read_uint32(t)})},z.exports.ExifParser=m,z.exports.get_orientation=function(x){var t=0;try{return new m(x,0,x.length).each(function(i){if(i.ifd===0&&i.tag===274&&Array.isArray(i.value))return t=i.value[0],!1}),t}catch{return-1}}},{}],264:[function(e,z,N){var u=e("./common").readUInt16BE,s=e("./common").readUInt32BE;function m(l,o){if(l.length<4+o)return null;var c=s(l,o);return l.length<c+o||c<8?null:{boxtype:String.fromCharCode.apply(null,l.slice(o+4,o+8)),data:l.slice(o+8,o+c),end:o+c}}z.exports.unbox=m;function x(l,o){for(var c=0;;){var h=m(l,c);if(!h)break;switch(h.boxtype){case"ispe":o.sizes.push({width:s(h.data,4),height:s(h.data,8)});break;case"irot":o.transforms.push({type:"irot",value:h.data[0]&3});break;case"imir":o.transforms.push({type:"imir",value:h.data[0]&1});break}c=h.end}}function t(l,o,c){for(var h=0,d=0;d<c;d++)h=h*256+(l[o+d]||0);return h}function i(l,o){for(var c=l[4]>>4&15,h=l[4]&15,d=l[5]>>4&15,p=u(l,6),y=8,g=0;g<p;g++){var A=u(l,y);y+=2;var b=u(l,y);y+=2;var M=t(l,y,d);y+=d;var _=u(l,y);if(y+=2,b===0&&_===1){var T=t(l,y,c),w=t(l,y+c,h);o.item_loc[A]={length:w,offset:T+M}}y+=_*(c+h)}}function a(l,o){for(var c=u(l,4),h=6,d=0;d<c;d++){var p=m(l,h);if(!p)break;if(p.boxtype==="infe"){for(var y=u(p.data,4),g="",A=8;A<p.data.length&&p.data[A];A++)g+=String.fromCharCode(p.data[A]);o.item_inf[g]=y}h=p.end}}function r(l,o){for(var c=0;;){var h=m(l,c);if(!h)break;h.boxtype==="ipco"&&x(h.data,o),c=h.end}}function n(l,o){for(var c=4;;){var h=m(l,c);if(!h)break;h.boxtype==="iprp"&&r(h.data,o),h.boxtype==="iloc"&&i(h.data,o),h.boxtype==="iinf"&&a(h.data,o),c=h.end}}function f(l){var o=l.reduce(function(d,p){return d.width>p.width||d.width===p.width&&d.height>p.height?d:p}),c=l.reduce(function(d,p){return d.height>p.height||d.height===p.height&&d.width>p.width?d:p}),h;return o.width>c.height||o.width===c.height&&o.height>c.width?h=o:h=c,h}z.exports.readSizeFromMeta=function(l){var o={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(n(l,o),!!o.sizes.length){var c=f(o.sizes),h=1;o.transforms.forEach(function(p){var y={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},g={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if(p.type==="imir"&&(p.value===0?h=g[h]:(h=g[h],h=y[h],h=y[h])),p.type==="irot")for(var A=0;A<p.value;A++)h=y[h]});var d=null;return o.item_inf.Exif&&(d=o.item_loc[o.item_inf.Exif]),{width:c.width,height:c.height,orientation:o.transforms.length?h:null,variants:o.sizes,exif_location:d}}},z.exports.getMimeType=function(l){var o=String.fromCharCode.apply(null,l.slice(0,4)),c={};c[o]=!0;for(var h=8;h<l.length;h+=4)c[String.fromCharCode.apply(null,l.slice(h,h+4))]=!0;if(!(!c.mif1&&!c.msf1&&!c.miaf))return o==="avif"||o==="avis"||o==="avio"?{type:"avif",mime:"image/avif"}:o==="heic"||o==="heix"?{type:"heic",mime:"image/heic"}:o==="hevc"||o==="hevx"?{type:"heic",mime:"image/heic-sequence"}:c.avif||c.avis?{type:"avif",mime:"image/avif"}:c.heic||c.heix||c.hevc||c.hevx||c.heis?c.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(e,z,N){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt32BE,x=e("../miaf_utils"),t=e("../exif_utils"),i=u("ftyp");z.exports=function(a){if(!!s(a,4,i)){var r=x.unbox(a,0);if(!!r){var n=x.getMimeType(r.data);if(!!n){for(var f,l=r.end;;){var o=x.unbox(a,l);if(!o)break;if(l=o.end,o.boxtype==="mdat")return;if(o.boxtype==="meta"){f=o.data;break}}if(!!f){var c=x.readSizeFromMeta(f);if(!!c){var h={width:c.width,height:c.height,type:n.type,mime:n.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1&&(h.variants=c.variants),c.orientation&&(h.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=a.length){var d=m(a,c.exif_location.offset),p=a.slice(c.exif_location.offset+d+4,c.exif_location.offset+c.exif_location.length),y=t.get_orientation(p);y>0&&(h.orientation=y)}return h}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(e,z,N){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=u("BM");z.exports=function(t){if(!(t.length<26)&&!!s(t,0,x))return{width:m(t,18),height:m(t,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(e,z,N){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=u("GIF87a"),t=u("GIF89a");z.exports=function(i){if(!(i.length<10)&&!(!s(i,0,x)&&!s(i,0,t)))return{width:m(i,6),height:m(i,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(e,z,N){var u=e("../common").readUInt16LE,s=0,m=1,x=16;z.exports=function(t){var i=u(t,0),a=u(t,2),r=u(t,4);if(!(i!==s||a!==m||!r)){for(var n=[],f={width:0,height:0},l=0;l<r;l++){var o=t[6+x*l]||256,c=t[6+x*l+1]||256,h={width:o,height:c};n.push(h),(o>f.width||c>f.height)&&(f=h)}return{width:f.width,height:f.height,variants:n,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(e,z,N){var u=e("../common").readUInt16BE,s=e("../common").str2arr,m=e("../common").sliceEq,x=e("../exif_utils"),t=s("Exif\0\0");z.exports=function(i){if(!(i.length<2)&&!(i[0]!==255||i[1]!==216||i[2]!==255))for(var a=2;;){for(;;){if(i.length-a<2)return;if(i[a++]===255)break}for(var r=i[a++],n;r===255;)r=i[a++];if(208<=r&&r<=217||r===1)n=0;else if(192<=r&&r<=254){if(i.length-a<2)return;n=u(i,a)-2,a+=2}else return;if(r===217||r===218)return;var f;if(r===225&&n>=10&&m(i,a,t)&&(f=x.get_orientation(i.slice(a+6,a+n))),n>=5&&192<=r&&r<=207&&r!==196&&r!==200&&r!==204){if(i.length-a<n)return;var l={width:u(i,a+3),height:u(i,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return f>0&&(l.orientation=f),l}a+=n}}},{"../common":262,"../exif_utils":263}],270:[function(e,z,N){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt32BE,x=u(`\x89PNG\r

`),t=u("IHDR");z.exports=function(i){if(!(i.length<24)&&!!s(i,0,x)&&!!s(i,12,t))return{width:m(i,16),height:m(i,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(e,z,N){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt32BE,x=u("8BPS\0");z.exports=function(t){if(!(t.length<6+16)&&!!s(t,0,x))return{width:m(t,6+12),height:m(t,6+8),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(e,z,N){function u(o){return o===32||o===9||o===13||o===10}function s(o){return typeof o=="number"&&isFinite(o)&&o>0}function m(o){var c=0,h=o.length;for(o[0]===239&&o[1]===187&&o[2]===191&&(c=3);c<h&&u(o[c]);)c++;return c===h?!1:o[c]===60}var x=/<[-_.:a-zA-Z0-9][^>]*>/,t=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,i=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,a=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,r=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,n=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function f(o){var c=o.match(i),h=o.match(a),d=o.match(r);return{width:c&&(c[1]||c[2]),height:h&&(h[1]||h[2]),viewbox:d&&(d[1]||d[2])}}function l(o){return n.test(o)?o.match(n)[0]:"px"}z.exports=function(o){if(!!m(o)){for(var c="",h=0;h<o.length;h++)c+=String.fromCharCode(o[h]);var d=(c.match(x)||[""])[0];if(!!t.test(d)){var p=f(d),y=parseFloat(p.width),g=parseFloat(p.height);if(p.width&&p.height)return!s(y)||!s(g)?void 0:{width:y,height:g,type:"svg",mime:"image/svg+xml",wUnits:l(p.width),hUnits:l(p.height)};var A=(p.viewbox||"").split(" "),b={width:A[2],height:A[3]},M=parseFloat(b.width),_=parseFloat(b.height);if(!(!s(M)||!s(_))&&l(b.width)===l(b.height)){var T=M/_;return p.width?s(y)?{width:y,height:y/T,type:"svg",mime:"image/svg+xml",wUnits:l(p.width),hUnits:l(p.width)}:void 0:p.height?s(g)?{width:g*T,height:g,type:"svg",mime:"image/svg+xml",wUnits:l(p.height),hUnits:l(p.height)}:void 0:{width:M,height:_,type:"svg",mime:"image/svg+xml",wUnits:l(b.width),hUnits:l(b.height)}}}}}},{}],273:[function(e,z,N){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=e("../common").readUInt16BE,t=e("../common").readUInt32LE,i=e("../common").readUInt32BE,a=u("II*\0"),r=u("MM\0*");function n(o,c,h){return h?x(o,c):m(o,c)}function f(o,c,h){return h?i(o,c):t(o,c)}function l(o,c,h){var d=n(o,c+2,h),p=f(o,c+4,h);return p!==1||d!==3&&d!==4?null:d===3?n(o,c+8,h):f(o,c+8,h)}z.exports=function(o){if(!(o.length<8)&&!(!s(o,0,a)&&!s(o,0,r))){var c=o[0]===77,h=f(o,4,c)-8;if(!(h<0)){var d=h+8;if(!(o.length-d<2)){var p=n(o,d+0,c)*12;if(!(p<=0)&&(d+=2,!(o.length-d<p))){var y,g,A,b;for(y=0;y<p;y+=12)b=n(o,d+y,c),b===256?g=l(o,d+y,c):b===257&&(A=l(o,d+y,c));if(g&&A)return{width:g,height:A,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}}}}}}},{"../common":262}],274:[function(e,z,N){var u=e("../common").str2arr,s=e("../common").sliceEq,m=e("../common").readUInt16LE,x=e("../common").readUInt32LE,t=e("../exif_utils"),i=u("RIFF"),a=u("WEBP");function r(l,o){if(!(l[o+3]!==157||l[o+4]!==1||l[o+5]!==42))return{width:m(l,o+6)&16383,height:m(l,o+8)&16383,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function n(l,o){if(l[o]===47){var c=x(l,o+1);return{width:(c&16383)+1,height:(c>>14&16383)+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function f(l,o){return{width:(l[o+6]<<16|l[o+5]<<8|l[o+4])+1,height:(l[o+9]<<o|l[o+8]<<8|l[o+7])+1,type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}z.exports=function(l){if(!(l.length<16)&&!(!s(l,0,i)&&!s(l,8,a))){var o=12,c=null,h=0,d=x(l,4)+8;if(!(d>l.length)){for(;o+8<d;){if(l[o]===0){o++;continue}var p=String.fromCharCode.apply(null,l.slice(o,o+4)),y=x(l,o+4);p==="VP8 "&&y>=10?c=c||r(l,o+8):p==="VP8L"&&y>=9?c=c||n(l,o+8):p==="VP8X"&&y>=10?c=c||f(l,o+8):p==="EXIF"&&(h=t.get_orientation(l.slice(o+8,o+8+y)),o=1/0),o+=8+y}if(!!c)return h>0&&(c.orientation=h),c}}}},{"../common":262,"../exif_utils":263}],275:[function(e,z,N){z.exports={avif:e("./parse_sync/avif"),bmp:e("./parse_sync/bmp"),gif:e("./parse_sync/gif"),ico:e("./parse_sync/ico"),jpeg:e("./parse_sync/jpeg"),png:e("./parse_sync/png"),psd:e("./parse_sync/psd"),svg:e("./parse_sync/svg"),tiff:e("./parse_sync/tiff"),webp:e("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(e,z,N){var u=e("./lib/parsers_sync");function s(m){for(var x=Object.keys(u),t=0;t<x.length;t++){var i=u[x[t]](m);if(i)return i}return null}z.exports=function(x){return s(x)},z.exports.parsers=u},{"./lib/parsers_sync":275}],277:[function(e,z,N){var u=z.exports={},s,m;function x(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?s=setTimeout:s=x}catch{s=x}try{typeof clearTimeout=="function"?m=clearTimeout:m=t}catch{m=t}})();function i(p){if(s===setTimeout)return setTimeout(p,0);if((s===x||!s)&&setTimeout)return s=setTimeout,setTimeout(p,0);try{return s(p,0)}catch{try{return s.call(null,p,0)}catch{return s.call(this,p,0)}}}function a(p){if(m===clearTimeout)return clearTimeout(p);if((m===t||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(p);try{return m(p)}catch{try{return m.call(null,p)}catch{return m.call(this,p)}}}var r=[],n=!1,f,l=-1;function o(){!n||!f||(n=!1,f.length?r=f.concat(r):l=-1,r.length&&c())}function c(){if(!n){var p=i(o);n=!0;for(var y=r.length;y;){for(f=r,r=[];++l<y;)f&&f[l].run();l=-1,y=r.length}f=null,n=!1,a(p)}}u.nextTick=function(p){var y=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)y[g-1]=arguments[g];r.push(new h(p,y)),r.length===1&&!n&&i(c)};function h(p,y){this.fun=p,this.array=y}h.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={};function d(){}u.on=d,u.addListener=d,u.once=d,u.off=d,u.removeListener=d,u.removeAllListeners=d,u.emit=d,u.prependListener=d,u.prependOnceListener=d,u.listeners=function(p){return[]},u.binding=function(p){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(p){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],278:[function(e,z,N){(function(u){(function(){for(var s=e("performance-now"),m=typeof window=="undefined"?u:window,x=["moz","webkit"],t="AnimationFrame",i=m["request"+t],a=m["cancel"+t]||m["cancelRequest"+t],r=0;!i&&r<x.length;r++)i=m[x[r]+"Request"+t],a=m[x[r]+"Cancel"+t]||m[x[r]+"CancelRequest"+t];if(!i||!a){var n=0,f=0,l=[],o=1e3/60;i=function(c){if(l.length===0){var h=s(),d=Math.max(0,o-(h-n));n=d+h,setTimeout(function(){var p=l.slice(0);l.length=0;for(var y=0;y<p.length;y++)if(!p[y].cancelled)try{p[y].callback(n)}catch(g){setTimeout(function(){throw g},0)}},Math.round(d))}return l.push({handle:++f,callback:c,cancelled:!1}),f},a=function(c){for(var h=0;h<l.length;h++)l[h].handle===c&&(l[h].cancelled=!0)}}z.exports=function(c){return i.call(m,c)},z.exports.cancel=function(){a.apply(m,arguments)},z.exports.polyfill=function(c){c||(c=m),c.requestAnimationFrame=i,c.cancelAnimationFrame=a}}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"performance-now":252}],279:[function(e,z,N){var u=e("array-bounds"),s=e("color-normalize"),m=e("update-diff"),x=e("pick-by-alias"),t=e("object-assign"),i=e("flatten-vertex-data"),a=e("to-float32"),r=a.float32,n=a.fract32;z.exports=l;var f=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]];function l(o,c){if(typeof o=="function"?(c||(c={}),c.regl=o):c=o,c.length&&(c.positions=c),o=c.regl,!o.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var h=o._gl,d,p,y,g,A,b,M={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},_=[];return g=o.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),p=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),y=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),A=o.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),b=o.buffer({usage:"static",type:"float",data:f}),L(c),d=o({vert:`
		precision highp float;

		attribute vec2 position, positionFract;
		attribute vec4 error;
		attribute vec4 color;

		attribute vec2 direction, lineOffset, capOffset;

		uniform vec4 viewport;
		uniform float lineWidth, capSize;
		uniform vec2 scale, scaleFract, translate, translateFract;

		varying vec4 fragColor;

		void main() {
			fragColor = color / 255.;

			vec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;

			vec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;

			vec2 position = position + dxy;

			vec2 pos = (position + translate) * scale
				+ (positionFract + translateFract) * scale
				+ (position + translate) * scaleFract
				+ (positionFract + translateFract) * scaleFract;

			pos += pixelOffset / viewport.zw;

			gl_Position = vec4(pos * 2. - 1., 0, 1);
		}
		`,frag:`
		precision highp float;

		varying vec4 fragColor;

		uniform float opacity;

		void main() {
			gl_FragColor = fragColor;
			gl_FragColor.a *= opacity;
		}
		`,uniforms:{range:o.prop("range"),lineWidth:o.prop("lineWidth"),capSize:o.prop("capSize"),opacity:o.prop("opacity"),scale:o.prop("scale"),translate:o.prop("translate"),scaleFract:o.prop("scaleFract"),translateFract:o.prop("translateFract"),viewport:function(k,P){return[P.viewport.x,P.viewport.y,k.viewportWidth,k.viewportHeight]}},attributes:{color:{buffer:g,offset:function(k,P){return P.offset*4},divisor:1},position:{buffer:p,offset:function(k,P){return P.offset*8},divisor:1},positionFract:{buffer:y,offset:function(k,P){return P.offset*8},divisor:1},error:{buffer:A,offset:function(k,P){return P.offset*16},divisor:1},direction:{buffer:b,stride:24,offset:0},lineOffset:{buffer:b,stride:24,offset:8},capOffset:{buffer:b,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:o.prop("viewport")},viewport:o.prop("viewport"),stencil:!1,instances:o.prop("count"),count:f.length}),t(T,{update:L,draw:w,destroy:S,regl:o,gl:h,canvas:h.canvas,groups:_}),T;function T(k){k?L(k):k===null&&S(),w()}function w(k){if(typeof k=="number")return v(k);k&&!Array.isArray(k)&&(k=[k]),o._refresh(),_.forEach(function(P,O){if(!!P){if(k&&(k[O]?P.draw=!0:P.draw=!1),!P.draw){P.draw=!0;return}v(O)}})}function v(k){typeof k=="number"&&(k=_[k]),k!=null&&(!(k&&k.count&&k.color&&k.opacity&&k.positions&&k.positions.length>1)||(k.scaleRatio=[k.scale[0]*k.viewport.width,k.scale[1]*k.viewport.height],d(k),k.after&&k.after(k)))}function L(k){if(!!k){k.length!=null?typeof k[0]=="number"&&(k=[{positions:k}]):Array.isArray(k)||(k=[k]);var P=0,O=0;if(T.groups=_=k.map(function(Z,ee){var q=_[ee];if(Z)typeof Z=="function"?Z={after:Z}:typeof Z[0]=="number"&&(Z={positions:Z});else return q;return Z=x(Z,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),q||(_[ee]=q={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},Z=t({},M,Z)),m(q,Z,[{lineWidth:function(W){return+W*.5},capSize:function(W){return+W*.5},opacity:parseFloat,errors:function(W){return W=i(W),O+=W.length,W},positions:function(W,J){return W=i(W,"float64"),J.count=Math.floor(W.length/2),J.bounds=u(W,2),J.offset=P,P+=J.count,W}},{color:function(W,J){var le=J.count;if(W||(W="transparent"),!Array.isArray(W)||typeof W[0]=="number"){var fe=W;W=Array(le);for(var se=0;se<le;se++)W[se]=fe}if(W.length<le)throw Error("Not enough colors");for(var H=new Uint8Array(le*4),Y=0;Y<le;Y++){var ne=s(W[Y],"uint8");H.set(ne,Y*4)}return H},range:function(W,J,le){var fe=J.bounds;return W||(W=fe),J.scale=[1/(W[2]-W[0]),1/(W[3]-W[1])],J.translate=[-W[0],-W[1]],J.scaleFract=n(J.scale),J.translateFract=n(J.translate),W},viewport:function(W){var J;return Array.isArray(W)?J={x:W[0],y:W[1],width:W[2]-W[0],height:W[3]-W[1]}:W?(J={x:W.x||W.left||0,y:W.y||W.top||0},W.right?J.width=W.right-J.x:J.width=W.w||W.width||0,W.bottom?J.height=W.bottom-J.y:J.height=W.h||W.height||0):J={x:0,y:0,width:h.drawingBufferWidth,height:h.drawingBufferHeight},J}}]),q}),P||O){var F=_.reduce(function(Z,ee,q){return Z+(ee?ee.count:0)},0),I=new Float64Array(F*2),D=new Uint8Array(F*4),U=new Float32Array(F*4);_.forEach(function(Z,ee){if(!!Z){var q=Z.positions,W=Z.count,J=Z.offset,le=Z.color,fe=Z.errors;!W||(D.set(le,J*4),U.set(fe,J*4),I.set(q,J*2))}});var B=r(I);p(B);var j=n(I,B);y(j),g(D),A(U)}}}function S(){p.destroy(),y.destroy(),g.destroy(),A.destroy(),b.destroy()}}},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(e,z,N){var u=e("color-normalize"),s=e("array-bounds"),m=e("object-assign"),x=e("glslify"),t=e("pick-by-alias"),i=e("flatten-vertex-data"),a=e("earcut"),r=e("array-normalize"),n=e("to-float32"),f=n.float32,l=n.fract32,o=e("es6-weak-map"),c=e("parse-rect"),h=e("array-find-index");z.exports=d;function d(p,y){if(!(this instanceof d))return new d(p,y);if(typeof p=="function"?(y||(y={}),y.regl=p):y=p,y.length&&(y.positions=y),p=y.regl,!p.hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=p._gl,this.regl=p,this.passes=[],this.shaders=d.shaders.has(p)?d.shaders.get(p):d.shaders.set(p,d.createShaders(p)).get(p),this.update(y)}d.dashMult=2,d.maxPatternLength=256,d.precisionThreshold=3e6,d.maxPoints=1e4,d.maxLines=2048,d.shaders=new o,d.createShaders=function(p){var y=p.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),g={primitive:"triangle strip",instances:p.prop("count"),count:4,offset:0,uniforms:{miterMode:function(_,T){return T.join==="round"?2:1},miterLimit:p.prop("miterLimit"),scale:p.prop("scale"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),thickness:p.prop("thickness"),dashTexture:p.prop("dashTexture"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),dashLength:p.prop("dashLength"),viewport:function(_,T){return[T.viewport.x,T.viewport.y,_.viewportWidth,_.viewportHeight]},depth:p.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(_,T){return!T.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:p.prop("viewport")},viewport:p.prop("viewport")},A=p(m({vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;
attribute vec4 color;
attribute float lineEnd, lineTop;

uniform vec2 scale, scaleFract, translate, translateFract;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;

varying vec4 fragColor;
varying vec2 tangent;

vec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {
	// the order is important
	return position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;
}

void main() {
	float lineStart = 1. - lineEnd;
	float lineOffset = lineTop * 2. - 1.;

	vec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);
	tangent = normalize(diff * scale * viewport.zw);
	vec2 normal = vec2(-tangent.y, tangent.x);

	vec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart
		+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd

		+ thickness * normal * .5 * lineOffset / viewport.zw;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;

void main() {
	float alpha = 1.;

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},g)),b;try{b=p(m({cull:{enable:!0,face:"back"},vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 aCoord, bCoord, nextCoord, prevCoord;
attribute vec4 aColor, bColor;
attribute float lineEnd, lineTop;

uniform vec2 scale, translate;
uniform float thickness, pixelRatio, id, depth;
uniform vec4 viewport;
uniform float miterLimit, miterMode;

varying vec4 fragColor;
varying vec4 startCutoff, endCutoff;
varying vec2 tangent;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

const float REVERSE_THRESHOLD = -.875;
const float MIN_DIFF = 1e-6;

// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead
// TODO: precalculate dot products, normalize things beforehead etc.
// TODO: refactor to rectangular algorithm

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

bool isNaN( float val ){
  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;
}

void main() {
	vec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;

  vec2 adjustedScale;
  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;
  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;

  vec2 scaleRatio = adjustedScale * viewport.zw;
	vec2 normalWidth = thickness / scaleRatio;

	float lineStart = 1. - lineEnd;
	float lineBot = 1. - lineTop;

	fragColor = (lineStart * aColor + lineEnd * bColor) / 255.;

	if (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;

	if (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);
	if (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);

	vec2 prevDiff = aCoord - prevCoord;
	vec2 currDiff = bCoord - aCoord;
	vec2 nextDiff = nextCoord - bCoord;

	vec2 prevTangent = normalize(prevDiff * scaleRatio);
	vec2 currTangent = normalize(currDiff * scaleRatio);
	vec2 nextTangent = normalize(nextDiff * scaleRatio);

	vec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);
	vec2 currNormal = vec2(-currTangent.y, currTangent.x);
	vec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);

	vec2 startJoinDirection = normalize(prevTangent - currTangent);
	vec2 endJoinDirection = normalize(currTangent - nextTangent);

	// collapsed/unidirectional segment cases
	// FIXME: there should be more elegant solution
	vec2 prevTanDiff = abs(prevTangent - currTangent);
	vec2 nextTanDiff = abs(nextTangent - currTangent);
	if (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {
		startJoinDirection = currNormal;
	}
	if (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {
		endJoinDirection = currNormal;
	}
	if (aCoord == bCoord) {
		endJoinDirection = startJoinDirection;
		currNormal = prevNormal;
		currTangent = prevTangent;
	}

	tangent = currTangent;

	//calculate join shifts relative to normals
	float startJoinShift = dot(currNormal, startJoinDirection);
	float endJoinShift = dot(currNormal, endJoinDirection);

	float startMiterRatio = abs(1. / startJoinShift);
	float endMiterRatio = abs(1. / endJoinShift);

	vec2 startJoin = startJoinDirection * startMiterRatio;
	vec2 endJoin = endJoinDirection * endMiterRatio;

	vec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;
	startTopJoin = sign(startJoinShift) * startJoin * .5;
	startBotJoin = -startTopJoin;

	endTopJoin = sign(endJoinShift) * endJoin * .5;
	endBotJoin = -endTopJoin;

	vec2 aTopCoord = aCoord + normalWidth * startTopJoin;
	vec2 bTopCoord = bCoord + normalWidth * endTopJoin;
	vec2 aBotCoord = aCoord + normalWidth * startBotJoin;
	vec2 bBotCoord = bCoord + normalWidth * endBotJoin;

	//miter anti-clipping
	float baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));
	float abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));

	//prevent close to reverse direction switch
	bool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);
	bool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);

	if (prevReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);
		aBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		aTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {
		//handle miter clipping
		bTopCoord -= normalWidth * endTopJoin;
		bTopCoord += normalize(endTopJoin * normalWidth) * baClipping;
	}

	if (nextReverse) {
		//make join rectangular
		vec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;
		float normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);
		bBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;
		bTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;
	}
	else if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {
		//handle miter clipping
		aBotCoord -= normalWidth * startBotJoin;
		aBotCoord += normalize(startBotJoin * normalWidth) * abClipping;
	}

	vec2 aTopPosition = (aTopCoord) * adjustedScale + translate;
	vec2 aBotPosition = (aBotCoord) * adjustedScale + translate;

	vec2 bTopPosition = (bTopCoord) * adjustedScale + translate;
	vec2 bBotPosition = (bBotCoord) * adjustedScale + translate;

	//position is normalized 0..1 coord on the screen
	vec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;

	startCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;
	endCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;

	gl_Position = vec4(position  * 2.0 - 1.0, depth, 1);

	enableStartMiter = step(dot(currTangent, prevTangent), .5);
	enableEndMiter = step(dot(currTangent, nextTangent), .5);

	//bevel miter cutoffs
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}

	//round miter cutoffs
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			vec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;
			startCutoff = vec4(aCoord, aCoord);
			startCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;
			startCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			startCutoff += viewport.xyxy;
			startCutoff += startMiterWidth.xyxy;
		}

		if (enableEndMiter == 1.) {
			vec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;
			endCutoff = vec4(bCoord, bCoord);
			endCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;
			endCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;
			endCutoff += viewport.xyxy;
			endCutoff += endMiterWidth.xyxy;
		}
	}
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

uniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;
uniform sampler2D dashTexture;

varying vec4 fragColor;
varying vec2 tangent;
varying vec4 startCutoff, endCutoff;
varying vec2 startCoord, endCoord;
varying float enableStartMiter, enableEndMiter;

float distToLine(vec2 p, vec2 a, vec2 b) {
	vec2 diff = b - a;
	vec2 perp = normalize(vec2(-diff.y, diff.x));
	return dot(p - a, perp);
}

void main() {
	float alpha = 1., distToStart, distToEnd;
	float cutoff = thickness * .5;

	//bevel miter
	if (miterMode == 1.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToStart + 1., 0.), 1.);
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < -1.) {
				discard;
				return;
			}
			alpha *= min(max(distToEnd + 1., 0.), 1.);
		}
	}

	// round miter
	else if (miterMode == 2.) {
		if (enableStartMiter == 1.) {
			distToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);
			if (distToStart < 0.) {
				float radius = length(gl_FragCoord.xy - startCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}

		if (enableEndMiter == 1.) {
			distToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);
			if (distToEnd < 0.) {
				float radius = length(gl_FragCoord.xy - endCoord);

				if(radius > cutoff + .5) {
					discard;
					return;
				}

				alpha -= smoothstep(cutoff - .5, cutoff + .5, radius);
			}
		}
	}

	float t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;
	float dash = texture2D(dashTexture, vec2(t, .5)).r;

	gl_FragColor = fragColor;
	gl_FragColor.a *= alpha * opacity * dash;
}
`]),attributes:{lineEnd:{buffer:y,divisor:0,stride:8,offset:0},lineTop:{buffer:y,divisor:0,stride:8,offset:4},aColor:{buffer:p.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:p.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:p.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},g))}catch{b=A}var M=p({primitive:"triangle",elements:function(_,T){return T.triangles},offset:0,vert:x([`precision highp float;
#define GLSLIFY 1

attribute vec2 position, positionFract;

uniform vec4 color;
uniform vec2 scale, scaleFract, translate, translateFract;
uniform float pixelRatio, id;
uniform vec4 viewport;
uniform float opacity;

varying vec4 fragColor;

const float MAX_LINES = 256.;

void main() {
	float depth = (MAX_LINES - 4. - id) / (MAX_LINES);

	vec2 position = position * scale + translate
       + positionFract * scale + translateFract
       + position * scaleFract
       + positionFract * scaleFract;

	gl_Position = vec4(position * 2.0 - 1.0, depth, 1);

	fragColor = color / 255.;
	fragColor.a *= opacity;
}
`]),frag:x([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
	gl_FragColor = fragColor;
}
`]),uniforms:{scale:p.prop("scale"),color:p.prop("fill"),scaleFract:p.prop("scaleFract"),translateFract:p.prop("translateFract"),translate:p.prop("translate"),opacity:p.prop("opacity"),pixelRatio:p.context("pixelRatio"),id:p.prop("id"),viewport:function(_,T){return[T.viewport.x,T.viewport.y,_.viewportWidth,_.viewportHeight]}},attributes:{position:{buffer:p.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:p.prop("positionFractBuffer"),stride:8,offset:8}},blend:g.blend,depth:{enable:!1},scissor:g.scissor,stencil:g.stencil,viewport:g.viewport});return{fill:M,rect:A,miter:b}},d.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},d.prototype.render=function(){for(var p,y=[],g=arguments.length;g--;)y[g]=arguments[g];y.length&&(p=this).update.apply(p,y),this.draw()},d.prototype.draw=function(){for(var p=this,y=[],g=arguments.length;g--;)y[g]=arguments[g];return(y.length?y:this.passes).forEach(function(A,b){var M;if(A&&Array.isArray(A))return(M=p).draw.apply(M,A);typeof A=="number"&&(A=p.passes[A]),!!(A&&A.count>1&&A.opacity)&&(p.regl._refresh(),A.fill&&A.triangles&&A.triangles.length>2&&p.shaders.fill(A),!!A.thickness&&(A.scale[0]*A.viewport.width>d.precisionThreshold||A.scale[1]*A.viewport.height>d.precisionThreshold||A.join==="rect"||!A.join&&(A.thickness<=2||A.count>=d.maxPoints)?p.shaders.rect(A):p.shaders.miter(A)))}),this},d.prototype.update=function(p){var y=this;if(!!p){p.length!=null?typeof p[0]=="number"&&(p=[{positions:p}]):Array.isArray(p)||(p=[p]);var g=this,A=g.regl,b=g.gl;if(p.forEach(function(v,L){var S=y.passes[L];if(v!==void 0){if(v===null){y.passes[L]=null;return}if(typeof v[0]=="number"&&(v={positions:v}),v=t(v,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),S||(y.passes[L]=S={id:L,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:A.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:A.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:A.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},v=m({},d.defaults,v)),v.thickness!=null&&(S.thickness=parseFloat(v.thickness)),v.opacity!=null&&(S.opacity=parseFloat(v.opacity)),v.miterLimit!=null&&(S.miterLimit=parseFloat(v.miterLimit)),v.overlay!=null&&(S.overlay=!!v.overlay,L<d.maxLines&&(S.depth=2*(d.maxLines-1-L%d.maxLines)/d.maxLines-1)),v.join!=null&&(S.join=v.join),v.hole!=null&&(S.hole=v.hole),v.fill!=null&&(S.fill=v.fill?u(v.fill,"uint8"):null),v.viewport!=null&&(S.viewport=c(v.viewport)),S.viewport||(S.viewport=c([b.drawingBufferWidth,b.drawingBufferHeight])),v.close!=null&&(S.close=v.close),v.positions===null&&(v.positions=[]),v.positions){var k,P;if(v.positions.x&&v.positions.y){var O=v.positions.x,F=v.positions.y;P=S.count=Math.max(O.length,F.length),k=new Float64Array(P*2);for(var I=0;I<P;I++)k[I*2]=O[I],k[I*2+1]=F[I]}else k=i(v.positions,"float64"),P=S.count=Math.floor(k.length/2);var D=S.bounds=s(k,2);if(S.fill){for(var U=[],B={},j=0,Z=0,ee=0,q=S.count;Z<q;Z++){var W=k[Z*2],J=k[Z*2+1];isNaN(W)||isNaN(J)||W==null||J==null?(W=k[j*2],J=k[j*2+1],B[Z]=j):j=Z,U[ee++]=W,U[ee++]=J}if(v.splitNull){S.count-1 in B||(B[S.count]=S.count-1);var le=Object.keys(B).map(Number).sort(function(it,ht){return it-ht}),fe=[],se=0,H=S.hole!=null?S.hole[0]:null;if(H!=null){var Y=h(le,function(it){return it>=H});le=le.slice(0,Y),le.push(H)}for(var ne=function(it){var ht=U.slice(se*2,le[it]*2).concat(H?U.slice(H*2):[]),Qe=(S.hole||[]).map(function(Xe){return Xe-H+(le[it]-se)}),Ce=a(ht,Qe);Ce=Ce.map(function(Xe){return Xe+se+(Xe+se<le[it]?0:H-le[it])}),fe.push.apply(fe,Ce),se=le[it]+1},te=0;te<le.length;te++)ne(te);for(var K=0,$=fe.length;K<$;K++)B[fe[K]]!=null&&(fe[K]=B[fe[K]]);S.triangles=fe}else{for(var ae=a(U,S.hole||[]),ie=0,oe=ae.length;ie<oe;ie++)B[ae[ie]]!=null&&(ae[ie]=B[ae[ie]]);S.triangles=ae}}var ue=new Float64Array(k);r(ue,2,D);var ye=new Float64Array(P*2+6);S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(ye[0]=ue[P*2-4],ye[1]=ue[P*2-3]):(ye[0]=ue[P*2-2],ye[1]=ue[P*2-1]):(ye[0]=ue[0],ye[1]=ue[1]),ye.set(ue,2),S.close?k[0]===k[P*2-2]&&k[1]===k[P*2-1]?(ye[P*2+2]=ue[2],ye[P*2+3]=ue[3],S.count-=1):(ye[P*2+2]=ue[0],ye[P*2+3]=ue[1],ye[P*2+4]=ue[2],ye[P*2+5]=ue[3]):(ye[P*2+2]=ue[P*2-2],ye[P*2+3]=ue[P*2-1],ye[P*2+4]=ue[P*2-2],ye[P*2+5]=ue[P*2-1]);var ce=f(ye);S.positionBuffer(ce);var me=l(ye,ce);S.positionFractBuffer(me)}if(v.range?S.range=v.range:S.range||(S.range=S.bounds),(v.range||v.positions)&&S.count){var xe=S.bounds,ke=xe[2]-xe[0],Ae=xe[3]-xe[1],Oe=S.range[2]-S.range[0],He=S.range[3]-S.range[1];S.scale=[ke/Oe,Ae/He],S.translate=[-S.range[0]/Oe+xe[0]/Oe||0,-S.range[1]/He+xe[1]/He||0],S.scaleFract=l(S.scale),S.translateFract=l(S.translate)}if(v.dashes){var Ge=0,_e;if(!v.dashes||v.dashes.length<2)Ge=1,_e=new Uint8Array([255,255,255,255,255,255,255,255]);else{Ge=0;for(var Re=0;Re<v.dashes.length;++Re)Ge+=v.dashes[Re];_e=new Uint8Array(Ge*d.dashMult);for(var We=0,qe=255,Ue=0;Ue<2;Ue++)for(var Ie=0;Ie<v.dashes.length;++Ie){for(var Ve=0,dt=v.dashes[Ie]*d.dashMult*.5;Ve<dt;++Ve)_e[We++]=qe;qe^=255}}S.dashLength=Ge,S.dashTexture({channels:1,data:_e,width:_e.length,height:1,mag:"linear",min:"linear"},0,0)}if(v.color){var Rt=S.count,Gt=v.color;Gt||(Gt="transparent");var kt=new Uint8Array(Rt*4+4);if(!Array.isArray(Gt)||typeof Gt[0]=="number")for(var zt=u(Gt,"uint8"),Bt=0;Bt<Rt+1;Bt++)kt.set(zt,Bt*4);else{for(var Lt=0;Lt<Rt;Lt++){var Mt=u(Gt[Lt],"uint8");kt.set(Mt,Lt*4)}kt.set(u(Gt[0],"uint8"),Rt*4)}S.colorBuffer({usage:"dynamic",type:"uint8",data:kt})}}}),p.length<this.passes.length){for(var M=p.length;M<this.passes.length;M++){var _=this.passes[M];!_||(_.colorBuffer.destroy(),_.positionBuffer.destroy(),_.dashTexture.destroy())}this.passes.length=p.length}for(var T=[],w=0;w<this.passes.length;w++)this.passes[w]!==null&&T.push(this.passes[w]);return this.passes=T,this}},d.prototype.destroy=function(){return this.passes.forEach(function(p){p.colorBuffer.destroy(),p.positionBuffer.destroy(),p.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(e,z,N){function u(S,k){return x(S)||i(S,k)||a(S,k)||f()}function s(S){return m(S)||t(S)||a(S)||n()}function m(S){if(Array.isArray(S))return r(S)}function x(S){if(Array.isArray(S))return S}function t(S){if(typeof Symbol!="undefined"&&S[Symbol.iterator]!=null||S["@@iterator"]!=null)return Array.from(S)}function i(S,k){var P=S==null?null:typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(P!=null){var O=[],F=!0,I=!1,D,U;try{for(P=P.call(S);!(F=(D=P.next()).done)&&(O.push(D.value),!(k&&O.length===k));F=!0);}catch(B){I=!0,U=B}finally{try{!F&&P.return!=null&&P.return()}finally{if(I)throw U}}return O}}function a(S,k){if(!!S){if(typeof S=="string")return r(S,k);var P=Object.prototype.toString.call(S).slice(8,-1);if(P==="Object"&&S.constructor&&(P=S.constructor.name),P==="Map"||P==="Set")return Array.from(S);if(P==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(P))return r(S,k)}}function r(S,k){(k==null||k>S.length)&&(k=S.length);for(var P=0,O=new Array(k);P<k;P++)O[P]=S[P];return O}function n(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function f(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var l=e("color-normalize"),o=e("array-bounds"),c=e("color-id"),h=e("@plotly/point-cluster"),d=e("object-assign"),p=e("glslify"),y=e("pick-by-alias"),g=e("update-diff"),A=e("flatten-vertex-data"),b=e("is-iexplorer"),M=e("to-float32"),_=e("parse-rect"),T=w;function w(S,k){var P=this;if(!(this instanceof w))return new w(S,k);typeof S=="function"?(k||(k={}),k.regl=S):(k=S,S=null),k&&k.length&&(k.positions=k),S=k.regl;var O=S._gl,F,I=[],D={},U=[],B=[null],j=[null],Z=255,ee=100;this.tooManyColors=b,F=S.texture({data:new Uint8Array(Z*4),width:Z,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),d(this,{regl:S,gl:O,groups:U,markerCache:j,markerTextures:B,palette:I,paletteIds:D,paletteTexture:F,maxColors:Z,maxSize:ee,canvas:O.canvas}),this.update(k);var q={uniforms:{constPointSize:!!k.constPointSize,opacity:S.prop("opacity"),paletteSize:function(fe,se){return[P.tooManyColors?0:Z,F.height]},pixelRatio:S.context("pixelRatio"),scale:S.prop("scale"),scaleFract:S.prop("scaleFract"),translate:S.prop("translate"),translateFract:S.prop("translateFract"),markerTexture:S.prop("markerTexture"),paletteTexture:F},attributes:{x:function(fe,se){return se.xAttr||{buffer:se.positionBuffer,stride:8,offset:0}},y:function(fe,se){return se.yAttr||{buffer:se.positionBuffer,stride:8,offset:4}},xFract:function(fe,se){return se.xAttr?{constant:[0,0]}:{buffer:se.positionFractBuffer,stride:8,offset:0}},yFract:function(fe,se){return se.yAttr?{constant:[0,0]}:{buffer:se.positionFractBuffer,stride:8,offset:4}},size:function(fe,se){return se.size.length?{buffer:se.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(se.size*255/P.maxSize)]}},borderSize:function(fe,se){return se.borderSize.length?{buffer:se.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(se.borderSize*255/P.maxSize)]}},colorId:function(fe,se){return se.color.length?{buffer:se.colorBuffer,stride:P.tooManyColors?8:4,offset:0}:{constant:P.tooManyColors?I.slice(se.color*4,se.color*4+4):[se.color]}},borderColorId:function(fe,se){return se.borderColor.length?{buffer:se.colorBuffer,stride:P.tooManyColors?8:4,offset:P.tooManyColors?4:2}:{constant:P.tooManyColors?I.slice(se.borderColor*4,se.borderColor*4+4):[se.borderColor]}},isActive:function(fe,se){return se.activation===!0?{constant:[1]}:se.activation?se.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:S.prop("viewport")},viewport:S.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:S.prop("elements"),count:S.prop("count"),offset:S.prop("offset"),primitive:"points"},W=d({},q);W.frag=p([`precision highp float;
#define GLSLIFY 1

uniform float opacity;
uniform sampler2D markerTexture;

varying vec4 fragColor, fragBorderColor;
varying float fragWidth, fragBorderColorLevel, fragColorLevel;

float smoothStep(float x, float y) {
  return 1.0 / (1.0 + exp(50.0*(x - y)));
}

void main() {
  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;

  // max-distance alpha
  if (dist < 0.003) discard;

  // null-border case
  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {
    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);
    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);
  }
  else {
    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);
    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);

    vec4 color = fragBorderColor;
    color.a *= borderColorAmt;
    color = mix(color, fragColor, colorAmt);
    color.a *= opacity;

    gl_FragColor = color;
  }

}
`]),W.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 scale, scaleFract, translate, translateFract, paletteSize;
uniform sampler2D paletteTexture;

const float maxSize = 100.;
const float borderLevel = .5;

varying vec4 fragColor, fragBorderColor;
varying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = 2. * size * pointSizeScale;
  fragPointSize = size * pixelRatio;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragColor = color;
  fragBorderColor = borderColor;
  fragWidth = 1. / gl_PointSize;

  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);
  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);
}`]),this.drawMarker=S(W);var J=d({},q);J.frag=p([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

uniform float opacity;

float smoothStep(float edge0, float edge1, float x) {
	float t;
	t = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);
	return t * t * (3.0 - 2.0 * t);
}

void main() {
	float radius, alpha = 1.0, delta = fragWidth;

	radius = length(2.0 * gl_PointCoord.xy - 1.0);

	if (radius > 1.0 + delta) {
		discard;
	}

	alpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);

	float borderRadius = fragBorderRadius;
	float ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);
	vec4 color = mix(fragColor, fragBorderColor, ratio);
	color.a *= alpha * opacity;
	gl_FragColor = color;
}
`]),J.vert=p([`precision highp float;
#define GLSLIFY 1

attribute float x, y, xFract, yFract;
attribute float size, borderSize;
attribute vec4 colorId, borderColorId;
attribute float isActive;

uniform bool constPointSize;
uniform float pixelRatio;
uniform vec2 paletteSize, scale, scaleFract, translate, translateFract;
uniform sampler2D paletteTexture;

const float maxSize = 100.;

varying vec4 fragColor, fragBorderColor;
varying float fragBorderRadius, fragWidth;

float pointSizeScale = (constPointSize) ? 2. : pixelRatio;

bool isDirect = (paletteSize.x < 1.);

vec4 getColor(vec4 id) {
  return isDirect ? id / 255. : texture2D(paletteTexture,
    vec2(
      (id.x + .5) / paletteSize.x,
      (id.y + .5) / paletteSize.y
    )
  );
}

void main() {
  // ignore inactive points
  if (isActive == 0.) return;

  vec2 position = vec2(x, y);
  vec2 positionFract = vec2(xFract, yFract);

  vec4 color = getColor(colorId);
  vec4 borderColor = getColor(borderColorId);

  float size = size * maxSize / 255.;
  float borderSize = borderSize * maxSize / 255.;

  gl_PointSize = (size + borderSize) * pointSizeScale;

  vec2 pos = (position + translate) * scale
      + (positionFract + translateFract) * scale
      + (position + translate) * scaleFract
      + (positionFract + translateFract) * scaleFract;

  gl_Position = vec4(pos * 2. - 1., 0., 1.);

  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);
  fragColor = color;
  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;
  fragWidth = 1. / gl_PointSize;
}
`]),b&&(J.frag=J.frag.replace("smoothstep","smoothStep"),W.frag=W.frag.replace("smoothstep","smoothStep")),this.drawCircle=S(J)}w.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},w.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},w.prototype.draw=function(){for(var S=this,k=arguments.length,P=new Array(k),O=0;O<k;O++)P[O]=arguments[O];var F=this.groups;if(P.length===1&&Array.isArray(P[0])&&(P[0][0]===null||Array.isArray(P[0][0]))&&(P=P[0]),this.regl._refresh(),P.length)for(var I=0;I<P.length;I++)this.drawItem(I,P[I]);else F.forEach(function(D,U){S.drawItem(U)});return this},w.prototype.drawItem=function(S,k){var P=this.groups,O=P[S];if(typeof k=="number"&&(S=k,O=P[k],k=null),!!(O&&O.count&&O.opacity)){O.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,O,k));for(var F=[],I=1;I<O.activation.length;I++)!O.activation[I]||O.activation[I]!==!0&&!O.activation[I].data.length||F.push.apply(F,s(this.getMarkerDrawOptions(I,O,k)));F.length&&this.drawMarker(F)}},w.prototype.getMarkerDrawOptions=function(S,k,P){var O=k.range,F=k.tree,I=k.viewport,D=k.activation,U=k.selectionBuffer,B=k.count;if(this.regl,!F)return P?[d({},k,{markerTexture:this.markerTextures[S],activation:D[S],count:P.length,elements:P,offset:0})]:[d({},k,{markerTexture:this.markerTextures[S],activation:D[S],offset:0})];var j=[],Z=F.range(O,{lod:!0,px:[(O[2]-O[0])/I.width,(O[3]-O[1])/I.height]});if(P){for(var ee=D[S],q=ee.data,W=new Uint8Array(B),J=0;J<P.length;J++){var le=P[J];W[le]=q?q[le]:1}U.subdata(W)}for(var fe=Z.length;fe--;){var se=u(Z[fe],2),H=se[0],Y=se[1];j.push(d({},k,{markerTexture:this.markerTextures[S],activation:P?U:D[S],offset:H,count:Y-H}))}return j},w.prototype.update=function(){for(var S=this,k=arguments.length,P=new Array(k),O=0;O<k;O++)P[O]=arguments[O];if(!!P.length){P.length===1&&Array.isArray(P[0])&&(P=P[0]);var F=this.groups,I=this.gl,D=this.regl,U=this.maxSize,B=this.maxColors,j=this.palette;this.groups=F=P.map(function(Z,ee){var q=F[ee];if(Z===void 0)return q;Z===null?Z={positions:null}:typeof Z=="function"?Z={ondraw:Z}:typeof Z[0]=="number"&&(Z={positions:Z}),Z=y(Z,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"}),Z.positions===null&&(Z.positions=[]),Z.tooManyColors!=null&&(S.tooManyColors=Z.tooManyColors),q||(F[ee]=q={id:ee,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},Z=d({},w.defaults,Z)),Z.positions&&!("marker"in Z)&&(Z.marker=q.marker,delete q.marker),Z.marker&&!("positions"in Z)&&(Z.positions=q.positions,delete q.positions);var W=0,J=0;if(g(q,Z,[{snap:!0,size:function(Ae,Oe){return Ae==null&&(Ae=w.defaults.size),W+=Ae&&Ae.length?1:0,Ae},borderSize:function(Ae,Oe){return Ae==null&&(Ae=w.defaults.borderSize),W+=Ae&&Ae.length?1:0,Ae},opacity:parseFloat,color:function(Ae,Oe){return Ae==null&&(Ae=w.defaults.color),Ae=S.updateColor(Ae),J++,Ae},borderColor:function(Ae,Oe){return Ae==null&&(Ae=w.defaults.borderColor),Ae=S.updateColor(Ae),J++,Ae},bounds:function(Ae,Oe,He){return"range"in He||(He.range=null),Ae},positions:function(Ae,Oe,He){var Ge=Oe.snap,_e=Oe.positionBuffer,Re=Oe.positionFractBuffer,We=Oe.selectionBuffer;if(Ae.x||Ae.y)return Ae.x.length?Oe.xAttr={buffer:D.buffer(Ae.x),offset:0,stride:4,count:Ae.x.length}:Oe.xAttr={buffer:Ae.x.buffer,offset:Ae.x.offset*4||0,stride:(Ae.x.stride||1)*4,count:Ae.x.count},Ae.y.length?Oe.yAttr={buffer:D.buffer(Ae.y),offset:0,stride:4,count:Ae.y.length}:Oe.yAttr={buffer:Ae.y.buffer,offset:Ae.y.offset*4||0,stride:(Ae.y.stride||1)*4,count:Ae.y.count},Oe.count=Math.max(Oe.xAttr.count,Oe.yAttr.count),Ae;Ae=A(Ae,"float64");var qe=Oe.count=Math.floor(Ae.length/2),Ue=Oe.bounds=qe?o(Ae,2):null;if(!He.range&&!Oe.range&&(delete Oe.range,He.range=Ue),!He.marker&&!Oe.marker&&(delete Oe.marker,He.marker=null),Ge&&(Ge===!0||qe>Ge)?Oe.tree=h(Ae,{bounds:Ue}):Ge&&Ge.length&&(Oe.tree=Ge),Oe.tree){var Ie={primitive:"points",usage:"static",data:Oe.tree,type:"uint32"};Oe.elements?Oe.elements(Ie):Oe.elements=D.elements(Ie)}var Ve=M.float32(Ae);_e({data:Ve,usage:"dynamic"});var dt=M.fract32(Ae,Ve);return Re({data:dt,usage:"dynamic"}),We({data:new Uint8Array(qe),type:"uint8",usage:"stream"}),Ae}},{marker:function(Ae,Oe,He){var Ge=Oe.activation;if(Ge.forEach(function(dt){return dt&&dt.destroy&&dt.destroy()}),Ge.length=0,!Ae||typeof Ae[0]=="number"){var _e=S.addMarker(Ae);Ge[_e]=!0}else{for(var Re=[],We=0,qe=Math.min(Ae.length,Oe.count);We<qe;We++){var Ue=S.addMarker(Ae[We]);Re[Ue]||(Re[Ue]=new Uint8Array(Oe.count)),Re[Ue][We]=1}for(var Ie=0;Ie<Re.length;Ie++)if(!!Re[Ie]){var Ve={data:Re[Ie],type:"uint8",usage:"static"};Ge[Ie]?Ge[Ie](Ve):Ge[Ie]=D.buffer(Ve),Ge[Ie].data=Re[Ie]}}return Ae},range:function(Ae,Oe,He){var Ge=Oe.bounds;if(!!Ge)return Ae||(Ae=Ge),Oe.scale=[1/(Ae[2]-Ae[0]),1/(Ae[3]-Ae[1])],Oe.translate=[-Ae[0],-Ae[1]],Oe.scaleFract=M.fract(Oe.scale),Oe.translateFract=M.fract(Oe.translate),Ae},viewport:function(Ae){var Oe=_(Ae||[I.drawingBufferWidth,I.drawingBufferHeight]);return Oe}}]),W){var le=q,fe=le.count,se=le.size,H=le.borderSize,Y=le.sizeBuffer,ne=new Uint8Array(fe*2);if(se.length||H.length)for(var te=0;te<fe;te++)ne[te*2]=Math.round((se[te]==null?se:se[te])*255/U),ne[te*2+1]=Math.round((H[te]==null?H:H[te])*255/U);Y({data:ne,usage:"dynamic"})}if(J){var K=q,$=K.count,ae=K.color,ie=K.borderColor,oe=K.colorBuffer,ue;if(S.tooManyColors){if(ae.length||ie.length){ue=new Uint8Array($*8);for(var ye=0;ye<$;ye++){var ce=ae[ye];ue[ye*8]=j[ce*4],ue[ye*8+1]=j[ce*4+1],ue[ye*8+2]=j[ce*4+2],ue[ye*8+3]=j[ce*4+3];var me=ie[ye];ue[ye*8+4]=j[me*4],ue[ye*8+5]=j[me*4+1],ue[ye*8+6]=j[me*4+2],ue[ye*8+7]=j[me*4+3]}}}else if(ae.length||ie.length){ue=new Uint8Array($*4+2);for(var xe=0;xe<$;xe++)ae[xe]!=null&&(ue[xe*4]=ae[xe]%B,ue[xe*4+1]=Math.floor(ae[xe]/B)),ie[xe]!=null&&(ue[xe*4+2]=ie[xe]%B,ue[xe*4+3]=Math.floor(ie[xe]/B))}oe({data:ue||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return q})}},w.prototype.addMarker=function(S){var k=this.markerTextures,P=this.regl,O=this.markerCache,F=S==null?0:O.indexOf(S);if(F>=0)return F;var I;if(S instanceof Uint8Array||S instanceof Uint8ClampedArray)I=S;else{I=new Uint8Array(S.length);for(var D=0,U=S.length;D<U;D++)I[D]=S[D]*255}var B=Math.floor(Math.sqrt(I.length));return F=k.length,O.push(S),k.push(P.texture({channels:1,data:I,radius:B,mag:"linear",min:"linear"})),F},w.prototype.updateColor=function(S){var k=this.paletteIds,P=this.palette,O=this.maxColors;Array.isArray(S)||(S=[S]);var F=[];if(typeof S[0]=="number"){var I=[];if(Array.isArray(S))for(var D=0;D<S.length;D+=4)I.push(S.slice(D,D+4));else for(var U=0;U<S.length;U+=4)I.push(S.subarray(U,U+4));S=I}for(var B=0;B<S.length;B++){var j=S[B];j=l(j,"uint8");var Z=c(j,!1);if(k[Z]==null){var ee=P.length;k[Z]=Math.floor(ee/4),P[ee]=j[0],P[ee+1]=j[1],P[ee+2]=j[2],P[ee+3]=j[3]}F[B]=k[Z]}return!this.tooManyColors&&P.length>O*4&&(this.tooManyColors=!0),this.updatePalette(P),F.length===1?F[0]:F},w.prototype.updatePalette=function(S){if(!this.tooManyColors){var k=this.maxColors,P=this.paletteTexture,O=Math.ceil(S.length*.25/k);if(O>1){S=S.slice();for(var F=S.length*.25%k;F<O*k;F++)S.push(0,0,0,0)}P.height<O&&P.resize(k,O),P.subimage({width:Math.min(S.length*.25,k),height:O,data:S},0,0)}},w.prototype.destroy=function(){return this.groups.forEach(function(S){S.sizeBuffer.destroy(),S.positionBuffer.destroy(),S.positionFractBuffer.destroy(),S.colorBuffer.destroy(),S.activation.forEach(function(k){return k&&k.destroy&&k.destroy()}),S.selectionBuffer.destroy(),S.elements&&S.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(S){return S&&S.destroy&&S.destroy()}),this};var v=e("object-assign"),L=function(k,P){var O=new T(k,P),F=O.render.bind(O);return v(F,{render:F,update:O.update.bind(O),draw:O.draw.bind(O),destroy:O.destroy.bind(O),regl:O.regl,gl:O.gl,canvas:O.gl.canvas,groups:O.groups,markers:O.markerCache,palette:O.palette}),F};z.exports=L},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(e,z,N){var u=e("regl-scatter2d"),s=e("pick-by-alias"),m=e("array-bounds"),x=e("raf"),t=e("array-range"),i=e("parse-rect"),a=e("flatten-vertex-data");z.exports=r;function r(o,c){if(!(this instanceof r))return new r(o,c);this.traces=[],this.passes={},this.regl=o,this.scatter=u(o),this.canvas=this.scatter.canvas}r.prototype.render=function(){for(var o=this,c,h=[],d=arguments.length;d--;)h[d]=arguments[d];return h.length&&(c=this).update.apply(c,h),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?this.planned==null&&(this.planned=x(function(){o.draw(),o.dirty=!0,o.planned=null})):(this.draw(),this.dirty=!0,x(function(){o.dirty=!1})),this)},r.prototype.update=function(){for(var o,c=[],h=arguments.length;h--;)c[h]=arguments[h];if(!!c.length){for(var d=0;d<c.length;d++)this.updateItem(d,c[d]);this.traces=this.traces.filter(Boolean);for(var p=[],y=0,g=0;g<this.traces.length;g++){for(var A=this.traces[g],b=this.traces[g].passes,M=0;M<b.length;M++)p.push(this.passes[b[M]]);A.passOffset=y,y+=A.passes.length}return(o=this.scatter).update.apply(o,p),this}},r.prototype.updateItem=function(o,c){var h=this,d=h.regl;if(c===null)return this.traces[o]=null,this;if(!c)return this;var p=s(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),y=this.traces[o]||(this.traces[o]={id:o,buffer:d.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:i([d._gl.drawingBufferWidth,d._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(p.color!=null&&(y.color=p.color),p.size!=null&&(y.size=p.size),p.marker!=null&&(y.marker=p.marker),p.borderColor!=null&&(y.borderColor=p.borderColor),p.borderSize!=null&&(y.borderSize=p.borderSize),p.opacity!=null&&(y.opacity=p.opacity),p.viewport&&(y.viewport=i(p.viewport)),p.diagonal!=null&&(y.diagonal=p.diagonal),p.upper!=null&&(y.upper=p.upper),p.lower!=null&&(y.lower=p.lower),p.data){y.buffer(a(p.data)),y.columns=p.data.length,y.count=p.data[0].length,y.bounds=[];for(var g=0;g<y.columns;g++)y.bounds[g]=m(p.data[g],1)}var A;p.range&&(y.range=p.range,A=y.range&&typeof y.range[0]!="number"),p.domain&&(y.domain=p.domain);var b=!1;p.padding!=null&&(Array.isArray(p.padding)&&p.padding.length===y.columns&&typeof p.padding[p.padding.length-1]=="number"?(y.padding=p.padding.map(l),b=!0):y.padding=l(p.padding));var M=y.columns,_=y.count,T=y.viewport.width,w=y.viewport.height,v=y.viewport.x,L=y.viewport.y,S=T/M,k=w/M;y.passes=[];for(var P=0;P<M;P++)for(var O=0;O<M;O++)if(!(!y.diagonal&&O===P)&&!(!y.upper&&P>O)&&!(!y.lower&&P<O)){var F=n(y.id,P,O),I=this.passes[F]||(this.passes[F]={});if(p.data&&(p.transpose?I.positions={x:{buffer:y.buffer,offset:O,count:_,stride:M},y:{buffer:y.buffer,offset:P,count:_,stride:M}}:I.positions={x:{buffer:y.buffer,offset:O*_,count:_},y:{buffer:y.buffer,offset:P*_,count:_}},I.bounds=f(y.bounds,P,O)),p.domain||p.viewport||p.data){var D=b?f(y.padding,P,O):y.padding;if(y.domain){var U=f(y.domain,P,O),B=U[0],j=U[1],Z=U[2],ee=U[3];I.viewport=[v+B*T+D[0],L+j*w+D[1],v+Z*T-D[2],L+ee*w-D[3]]}else I.viewport=[v+O*S+S*D[0],L+P*k+k*D[1],v+(O+1)*S-S*D[2],L+(P+1)*k-k*D[3]]}p.color&&(I.color=y.color),p.size&&(I.size=y.size),p.marker&&(I.marker=y.marker),p.borderSize&&(I.borderSize=y.borderSize),p.borderColor&&(I.borderColor=y.borderColor),p.opacity&&(I.opacity=y.opacity),p.range&&(I.range=A?f(y.range,P,O):y.range||I.bounds),y.passes.push(F)}return this},r.prototype.draw=function(){for(var o,c=[],h=arguments.length;h--;)c[h]=arguments[h];if(!c.length)this.scatter.draw();else{for(var d=[],p=0;p<c.length;p++)if(typeof c[p]=="number"){var y=this.traces[c[p]],g=y.passes,A=y.passOffset;d.push.apply(d,t(A,A+g.length))}else if(c[p].length){var b=c[p],M=this.traces[p],_=M.passes,T=M.passOffset;_=_.map(function(w,v){d[T+v]=b})}(o=this.scatter).draw.apply(o,d)}return this},r.prototype.destroy=function(){return this.traces.forEach(function(o){o.buffer&&o.buffer.destroy&&o.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this};function n(o,c,h){var d=o.id!=null?o.id:o,p=c,y=h,g=d<<16|(p&255)<<8|y&255;return g}function f(o,c,h){var d,p,y,g,A=o[c],b=o[h];return A.length>2?(d=A[1],p=A[3]):A.length?(d=A[0],p=A[1]):(d=A.y,A.x+A.width,p=A.y+A.height),b.length>2?(y=b[0],g=b[2]):b.length?(y=b[0],g=b[1]):(y=b.x,g=b.x+b.width,b.y+b.height),[y,d,g,p]}function l(o){if(typeof o=="number")return[o,o,o,o];if(o.length===2)return[o[0],o[1],o[0],o[1]];var c=i(o);return[c.x,c.y,c.x+c.width,c.y+c.height]}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?z.exports=s():u.createREGL=s()})(this,function(){function u(Je,gt){this.id=$++,this.type=Je,this.data=gt}function s(Je){if(Je.length===0)return[];var gt=Je.charAt(0),Et=Je.charAt(Je.length-1);if(1<Je.length&&gt===Et&&(gt==='"'||gt==="'"))return['"'+Je.substr(1,Je.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(gt=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Je))return s(Je.substr(0,gt.index)).concat(s(gt[1])).concat(s(Je.substr(gt.index+gt[0].length)));if(gt=Je.split("."),gt.length===1)return['"'+Je.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Je=[],Et=0;Et<gt.length;++Et)Je=Je.concat(s(gt[Et]));return Je}function m(Je){return"["+s(Je).join("][")+"]"}function x(Je,gt){if(typeof Je=="function")return new u(0,Je);if(typeof Je=="number"||typeof Je=="boolean")return new u(5,Je);if(Array.isArray(Je))return new u(6,Je.map(function(Et,rr){return x(Et)}));if(Je instanceof u)return Je}function t(){var Je={"":0},gt=[""];return{id:function(Et){var rr=Je[Et];return rr||(rr=Je[Et]=gt.length,gt.push(Et),rr)},str:function(Et){return gt[Et]}}}function i(Je,gt,Et){function rr(){var dr=window.innerWidth,Lr=window.innerHeight;Je!==document.body&&(Lr=vr.getBoundingClientRect(),dr=Lr.right-Lr.left,Lr=Lr.bottom-Lr.top),vr.width=Et*dr,vr.height=Et*Lr}var vr=document.createElement("canvas");K(vr.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Je.appendChild(vr),Je===document.body&&(vr.style.position="absolute",K(Je.style,{margin:0,padding:0}));var or;return Je!==document.body&&typeof ResizeObserver=="function"?(or=new ResizeObserver(function(){setTimeout(rr)}),or.observe(Je)):window.addEventListener("resize",rr,!1),rr(),{canvas:vr,onDestroy:function(){or?or.disconnect():window.removeEventListener("resize",rr),Je.removeChild(vr)}}}function a(Je,gt){function Et(rr){try{return Je.getContext(rr,gt)}catch{return null}}return Et("webgl")||Et("experimental-webgl")||Et("webgl-experimental")}function r(Je){return typeof Je=="string"?Je.split():Je}function n(Je){return typeof Je=="string"?document.querySelector(Je):Je}function f(Je){var gt=Je||{},Et,rr,vr,or;Je={};var dr=[],Lr=[],kr=typeof window=="undefined"?1:window.devicePixelRatio,tr=!1,Or=function(we){},et=function(){};if(typeof gt=="string"?Et=document.querySelector(gt):typeof gt=="object"&&(typeof gt.nodeName=="string"&&typeof gt.appendChild=="function"&&typeof gt.getBoundingClientRect=="function"?Et=gt:typeof gt.drawArrays=="function"||typeof gt.drawElements=="function"?(or=gt,vr=or.canvas):("gl"in gt?or=gt.gl:"canvas"in gt?vr=n(gt.canvas):"container"in gt&&(rr=n(gt.container)),"attributes"in gt&&(Je=gt.attributes),"extensions"in gt&&(dr=r(gt.extensions)),"optionalExtensions"in gt&&(Lr=r(gt.optionalExtensions)),"onDone"in gt&&(Or=gt.onDone),"profile"in gt&&(tr=!!gt.profile),"pixelRatio"in gt&&(kr=+gt.pixelRatio))),Et&&(Et.nodeName.toLowerCase()==="canvas"?vr=Et:rr=Et),!or){if(!vr){if(Et=i(rr||document.body,Or,kr),!Et)return null;vr=Et.canvas,et=Et.onDestroy}Je.premultipliedAlpha===void 0&&(Je.premultipliedAlpha=!0),or=a(vr,Je)}return or?{gl:or,canvas:vr,container:rr,extensions:dr,optionalExtensions:Lr,pixelRatio:kr,profile:tr,onDone:Or,onDestroy:et}:(et(),Or("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function l(Je,gt){function Et(dr){dr=dr.toLowerCase();var Lr;try{Lr=rr[dr]=Je.getExtension(dr)}catch{}return!!Lr}for(var rr={},vr=0;vr<gt.extensions.length;++vr){var or=gt.extensions[vr];if(!Et(or))return gt.onDestroy(),gt.onDone('"'+or+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return gt.optionalExtensions.forEach(Et),{extensions:rr,restore:function(){Object.keys(rr).forEach(function(dr){if(rr[dr]&&!Et(dr))throw Error("(regl): error restoring extension "+dr)})}}}function o(Je,gt){for(var Et=Array(Je),rr=0;rr<Je;++rr)Et[rr]=gt(rr);return Et}function c(Je){var gt,Et;return gt=(65535<Je)<<4,Je>>>=gt,Et=(255<Je)<<3,Je>>>=Et,gt|=Et,Et=(15<Je)<<2,Je>>>=Et,gt|=Et,Et=(3<Je)<<1,gt|Et|Je>>>Et>>1}function h(){function Je(rr){e:{for(var vr=16;268435456>=vr;vr*=16)if(rr<=vr){rr=vr;break e}rr=0}return vr=Et[c(rr)>>2],0<vr.length?vr.pop():new ArrayBuffer(rr)}function gt(rr){Et[c(rr.byteLength)>>2].push(rr)}var Et=o(8,function(){return[]});return{alloc:Je,free:gt,allocType:function(rr,vr){var or=null;switch(rr){case 5120:or=new Int8Array(Je(vr),0,vr);break;case 5121:or=new Uint8Array(Je(vr),0,vr);break;case 5122:or=new Int16Array(Je(2*vr),0,vr);break;case 5123:or=new Uint16Array(Je(2*vr),0,vr);break;case 5124:or=new Int32Array(Je(4*vr),0,vr);break;case 5125:or=new Uint32Array(Je(4*vr),0,vr);break;case 5126:or=new Float32Array(Je(4*vr),0,vr);break;default:return null}return or.length!==vr?or.subarray(0,vr):or},freeType:function(rr){gt(rr.buffer)}}}function d(Je){return!!Je&&typeof Je=="object"&&Array.isArray(Je.shape)&&Array.isArray(Je.stride)&&typeof Je.offset=="number"&&Je.shape.length===Je.stride.length&&(Array.isArray(Je.data)||ce(Je.data))}function p(Je,gt,Et,rr,vr,or){for(var dr=0;dr<gt;++dr)for(var Lr=Je[dr],kr=0;kr<Et;++kr)for(var tr=Lr[kr],Or=0;Or<rr;++Or)vr[or++]=tr[Or]}function y(Je,gt,Et,rr,vr){for(var or=1,dr=Et+1;dr<gt.length;++dr)or*=gt[dr];var Lr=gt[Et];if(gt.length-Et==4){var kr=gt[Et+1],tr=gt[Et+2];for(gt=gt[Et+3],dr=0;dr<Lr;++dr)p(Je[dr],kr,tr,gt,rr,vr),vr+=or}else for(dr=0;dr<Lr;++dr)y(Je[dr],gt,Et+1,rr,vr),vr+=or}function g(Je){return ke[Object.prototype.toString.call(Je)]|0}function A(Je,gt){for(var Et=0;Et<gt.length;++Et)Je[Et]=gt[Et]}function b(Je,gt,Et,rr,vr,or,dr){for(var Lr=0,kr=0;kr<Et;++kr)for(var tr=0;tr<rr;++tr)Je[Lr++]=gt[vr*kr+or*tr+dr]}function M(Je,gt,Et,rr){function vr(et){this.id=kr++,this.buffer=Je.createBuffer(),this.type=et,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Et.profile&&(this.stats={size:0})}function or(et,we,Se){et.byteLength=we.byteLength,Je.bufferData(et.type,we,Se)}function dr(et,we,Se,De,je,$e){if(et.usage=Se,Array.isArray(we)){if(et.dtype=De||5126,0<we.length)if(Array.isArray(we[0])){je=Ge(we);for(var ot=De=1;ot<je.length;++ot)De*=je[ot];et.dimension=De,we=He(we,je,et.dtype),or(et,we,Se),$e?et.persistentData=we:ue.freeType(we)}else typeof we[0]=="number"?(et.dimension=je,je=ue.allocType(et.dtype,we.length),A(je,we),or(et,je,Se),$e?et.persistentData=je:ue.freeType(je)):ce(we[0])&&(et.dimension=we[0].length,et.dtype=De||g(we[0])||5126,we=He(we,[we.length,we[0].length],et.dtype),or(et,we,Se),$e?et.persistentData=we:ue.freeType(we))}else if(ce(we))et.dtype=De||g(we),et.dimension=je,or(et,we,Se),$e&&(et.persistentData=new Uint8Array(new Uint8Array(we.buffer)));else if(d(we)){je=we.shape;var st=we.stride,ot=we.offset,pt=0,wt=0,Wt=0,yr=0;je.length===1?(pt=je[0],wt=1,Wt=st[0],yr=0):je.length===2&&(pt=je[0],wt=je[1],Wt=st[0],yr=st[1]),et.dtype=De||g(we.data)||5126,et.dimension=wt,je=ue.allocType(et.dtype,pt*wt),b(je,we.data,pt,wt,Wt,yr,ot),or(et,je,Se),$e?et.persistentData=je:ue.freeType(je)}else we instanceof ArrayBuffer&&(et.dtype=5121,et.dimension=je,or(et,we,Se),$e&&(et.persistentData=new Uint8Array(new Uint8Array(we))))}function Lr(et){gt.bufferCount--,rr(et),Je.deleteBuffer(et.buffer),et.buffer=null,delete tr[et.id]}var kr=0,tr={};vr.prototype.bind=function(){Je.bindBuffer(this.type,this.buffer)},vr.prototype.destroy=function(){Lr(this)};var Or=[];return Et.profile&&(gt.getTotalBufferSize=function(){var et=0;return Object.keys(tr).forEach(function(we){et+=tr[we].stats.size}),et}),{create:function(et,we,Se,De){function je(ot){var st=35044,pt=null,wt=0,Wt=0,yr=1;return Array.isArray(ot)||ce(ot)||d(ot)||ot instanceof ArrayBuffer?pt=ot:typeof ot=="number"?wt=ot|0:ot&&("data"in ot&&(pt=ot.data),"usage"in ot&&(st=Oe[ot.usage]),"type"in ot&&(Wt=Ae[ot.type]),"dimension"in ot&&(yr=ot.dimension|0),"length"in ot&&(wt=ot.length|0)),$e.bind(),pt?dr($e,pt,st,Wt,yr,De):(wt&&Je.bufferData($e.type,wt,st),$e.dtype=Wt||5121,$e.usage=st,$e.dimension=yr,$e.byteLength=wt),Et.profile&&($e.stats.size=$e.byteLength*_e[$e.dtype]),je}gt.bufferCount++;var $e=new vr(we);return tr[$e.id]=$e,Se||je(et),je._reglType="buffer",je._buffer=$e,je.subdata=function(ot,st){var pt=(st||0)|0,wt;if($e.bind(),ce(ot)||ot instanceof ArrayBuffer)Je.bufferSubData($e.type,pt,ot);else if(Array.isArray(ot)){if(0<ot.length)if(typeof ot[0]=="number"){var Wt=ue.allocType($e.dtype,ot.length);A(Wt,ot),Je.bufferSubData($e.type,pt,Wt),ue.freeType(Wt)}else(Array.isArray(ot[0])||ce(ot[0]))&&(wt=Ge(ot),Wt=He(ot,wt,$e.dtype),Je.bufferSubData($e.type,pt,Wt),ue.freeType(Wt))}else if(d(ot)){wt=ot.shape;var yr=ot.stride,xr=Wt=0,Tr=0,mr=0;wt.length===1?(Wt=wt[0],xr=1,Tr=yr[0],mr=0):wt.length===2&&(Wt=wt[0],xr=wt[1],Tr=yr[0],mr=yr[1]),wt=Array.isArray(ot.data)?$e.dtype:g(ot.data),wt=ue.allocType(wt,Wt*xr),b(wt,ot.data,Wt,xr,Tr,mr,ot.offset),Je.bufferSubData($e.type,pt,wt),ue.freeType(wt)}return je},Et.profile&&(je.stats=$e.stats),je.destroy=function(){Lr($e)},je},createStream:function(et,we){var Se=Or.pop();return Se||(Se=new vr(et)),Se.bind(),dr(Se,we,35040,0,1,!1),Se},destroyStream:function(et){Or.push(et)},clear:function(){me(tr).forEach(Lr),Or.forEach(Lr)},getBuffer:function(et){return et&&et._buffer instanceof vr?et._buffer:null},restore:function(){me(tr).forEach(function(et){et.buffer=Je.createBuffer(),Je.bindBuffer(et.type,et.buffer),Je.bufferData(et.type,et.persistentData||et.byteLength,et.usage)})},_initBuffer:dr}}function _(Je,gt,Et,rr){function vr(et){this.id=kr++,Lr[this.id]=this,this.buffer=et,this.primType=4,this.type=this.vertCount=0}function or(et,we,Se,De,je,$e,ot){et.buffer.bind();var st;if(we?((st=ot)||ce(we)&&(!d(we)||ce(we.data))||(st=gt.oes_element_index_uint?5125:5123),Et._initBuffer(et.buffer,we,Se,st,3)):(Je.bufferData(34963,$e,Se),et.buffer.dtype=st||5121,et.buffer.usage=Se,et.buffer.dimension=3,et.buffer.byteLength=$e),st=ot,!ot){switch(et.buffer.dtype){case 5121:case 5120:st=5121;break;case 5123:case 5122:st=5123;break;case 5125:case 5124:st=5125}et.buffer.dtype=st}et.type=st,we=je,0>we&&(we=et.buffer.byteLength,st===5123?we>>=1:st===5125&&(we>>=2)),et.vertCount=we,we=De,0>De&&(we=4,De=et.buffer.dimension,De===1&&(we=0),De===2&&(we=1),De===3&&(we=4)),et.primType=we}function dr(et){rr.elementsCount--,delete Lr[et.id],et.buffer.destroy(),et.buffer=null}var Lr={},kr=0,tr={uint8:5121,uint16:5123};gt.oes_element_index_uint&&(tr.uint32=5125),vr.prototype.bind=function(){this.buffer.bind()};var Or=[];return{create:function(et,we){function Se($e){if($e)if(typeof $e=="number")De($e),je.primType=4,je.vertCount=$e|0,je.type=5121;else{var ot=null,st=35044,pt=-1,wt=-1,Wt=0,yr=0;Array.isArray($e)||ce($e)||d($e)?ot=$e:("data"in $e&&(ot=$e.data),"usage"in $e&&(st=Oe[$e.usage]),"primitive"in $e&&(pt=Re[$e.primitive]),"count"in $e&&(wt=$e.count|0),"type"in $e&&(yr=tr[$e.type]),"length"in $e?Wt=$e.length|0:(Wt=wt,yr===5123||yr===5122?Wt*=2:(yr===5125||yr===5124)&&(Wt*=4))),or(je,ot,st,pt,wt,Wt,yr)}else De(),je.primType=4,je.vertCount=0,je.type=5121;return Se}var De=Et.create(null,34963,!0),je=new vr(De._buffer);return rr.elementsCount++,Se(et),Se._reglType="elements",Se._elements=je,Se.subdata=function($e,ot){return De.subdata($e,ot),Se},Se.destroy=function(){dr(je)},Se},createStream:function(et){var we=Or.pop();return we||(we=new vr(Et.create(null,34963,!0,!1)._buffer)),or(we,et,35040,-1,-1,0,0),we},destroyStream:function(et){Or.push(et)},getElements:function(et){return typeof et=="function"&&et._elements instanceof vr?et._elements:null},clear:function(){me(Lr).forEach(dr)}}}function T(Je){for(var gt=ue.allocType(5123,Je.length),Et=0;Et<Je.length;++Et)if(isNaN(Je[Et]))gt[Et]=65535;else if(Je[Et]===1/0)gt[Et]=31744;else if(Je[Et]===-1/0)gt[Et]=64512;else{We[0]=Je[Et];var rr=qe[0],vr=rr>>>31<<15,or=(rr<<1>>>24)-127,rr=rr>>13&1023;gt[Et]=-24>or?vr:-14>or?vr+(rr+1024>>-14-or):15<or?vr+31744:vr+(or+15<<10)+rr}return gt}function w(Je){return Array.isArray(Je)||ce(Je)}function v(Je){return"[object "+Je+"]"}function L(Je){return Array.isArray(Je)&&(Je.length===0||typeof Je[0]=="number")}function S(Je){return!!(Array.isArray(Je)&&Je.length!==0&&w(Je[0]))}function k(Je){return Object.prototype.toString.call(Je)}function P(Je){if(!Je)return!1;var gt=k(Je);return 0<=Lt.indexOf(gt)?!0:L(Je)||S(Je)||d(Je)}function O(Je,gt){Je.type===36193?(Je.data=T(gt),ue.freeType(gt)):Je.data=gt}function F(Je,gt,Et,rr,vr,or){if(Je=typeof it[Je]!="undefined"?it[Je]:Ve[Je]*Mt[gt],or&&(Je*=6),vr){for(rr=0;1<=Et;)rr+=Je*Et*Et,Et/=2;return rr}return Je*Et*rr}function I(Je,gt,Et,rr,vr,or,dr){function Lr(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function kr(pr,vn){pr.internalformat=vn.internalformat,pr.format=vn.format,pr.type=vn.type,pr.compressed=vn.compressed,pr.premultiplyAlpha=vn.premultiplyAlpha,pr.flipY=vn.flipY,pr.unpackAlignment=vn.unpackAlignment,pr.colorSpace=vn.colorSpace,pr.width=vn.width,pr.height=vn.height,pr.channels=vn.channels}function tr(pr,vn){if(typeof vn=="object"&&vn){"premultiplyAlpha"in vn&&(pr.premultiplyAlpha=vn.premultiplyAlpha),"flipY"in vn&&(pr.flipY=vn.flipY),"alignment"in vn&&(pr.unpackAlignment=vn.alignment),"colorSpace"in vn&&(pr.colorSpace=nn[vn.colorSpace]),"type"in vn&&(pr.type=fn[vn.type]);var $r=pr.width,On=pr.height,Bn=pr.channels,ha=!1;"shape"in vn?($r=vn.shape[0],On=vn.shape[1],vn.shape.length===3&&(Bn=vn.shape[2],ha=!0)):("radius"in vn&&($r=On=vn.radius),"width"in vn&&($r=vn.width),"height"in vn&&(On=vn.height),"channels"in vn&&(Bn=vn.channels,ha=!0)),pr.width=$r|0,pr.height=On|0,pr.channels=Bn|0,$r=!1,"format"in vn&&($r=vn.format,On=pr.internalformat=jr[$r],pr.format=Xr[On],$r in fn&&!("type"in vn)&&(pr.type=fn[$r]),$r in at&&(pr.compressed=!0),$r=!0),!ha&&$r?pr.channels=Ve[pr.format]:ha&&!$r&&pr.channels!==Ie[pr.format]&&(pr.format=pr.internalformat=Ie[pr.channels])}}function Or(pr){Je.pixelStorei(37440,pr.flipY),Je.pixelStorei(37441,pr.premultiplyAlpha),Je.pixelStorei(37443,pr.colorSpace),Je.pixelStorei(3317,pr.unpackAlignment)}function et(){Lr.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function we(pr,vn){var $r=null;if(P(vn)?$r=vn:vn&&(tr(pr,vn),"x"in vn&&(pr.xOffset=vn.x|0),"y"in vn&&(pr.yOffset=vn.y|0),P(vn.data)&&($r=vn.data)),vn.copy){var On=vr.viewportWidth,Bn=vr.viewportHeight;pr.width=pr.width||On-pr.xOffset,pr.height=pr.height||Bn-pr.yOffset,pr.needsCopy=!0}else if(!$r)pr.width=pr.width||1,pr.height=pr.height||1,pr.channels=pr.channels||4;else if(ce($r))pr.channels=pr.channels||4,pr.data=$r,"type"in vn||pr.type!==5121||(pr.type=ke[Object.prototype.toString.call($r)]|0);else if(L($r)){switch(pr.channels=pr.channels||4,On=$r,Bn=On.length,pr.type){case 5121:case 5123:case 5125:case 5126:Bn=ue.allocType(pr.type,Bn),Bn.set(On),pr.data=Bn;break;case 36193:pr.data=T(On)}pr.alignment=1,pr.needsFree=!0}else if(d($r)){On=$r.data,Array.isArray(On)||pr.type!==5121||(pr.type=ke[Object.prototype.toString.call(On)]|0);var Bn=$r.shape,ha=$r.stride,na,Vn,fa,ga;Bn.length===3?(fa=Bn[2],ga=ha[2]):ga=fa=1,na=Bn[0],Vn=Bn[1],Bn=ha[0],ha=ha[1],pr.alignment=1,pr.width=na,pr.height=Vn,pr.channels=fa,pr.format=pr.internalformat=Ie[fa],pr.needsFree=!0,na=ga,$r=$r.offset,fa=pr.width,ga=pr.height,Vn=pr.channels;for(var ur=ue.allocType(pr.type===36193?5126:pr.type,fa*ga*Vn),Dr=0,on=0;on<ga;++on)for(var rn=0;rn<fa;++rn)for(var gn=0;gn<Vn;++gn)ur[Dr++]=On[Bn*rn+ha*on+na*gn+$r];O(pr,ur)}else if(k($r)===dt||k($r)===Rt||k($r)===Gt)k($r)===dt||k($r)===Rt?pr.element=$r:pr.element=$r.canvas,pr.width=pr.element.width,pr.height=pr.element.height,pr.channels=4;else if(k($r)===kt)pr.element=$r,pr.width=$r.width,pr.height=$r.height,pr.channels=4;else if(k($r)===zt)pr.element=$r,pr.width=$r.naturalWidth,pr.height=$r.naturalHeight,pr.channels=4;else if(k($r)===Bt)pr.element=$r,pr.width=$r.videoWidth,pr.height=$r.videoHeight,pr.channels=4;else if(S($r)){for(On=pr.width||$r[0].length,Bn=pr.height||$r.length,ha=pr.channels,ha=w($r[0][0])?ha||$r[0][0].length:ha||1,na=xe.shape($r),fa=1,ga=0;ga<na.length;++ga)fa*=na[ga];fa=ue.allocType(pr.type===36193?5126:pr.type,fa),xe.flatten($r,na,"",fa),O(pr,fa),pr.alignment=1,pr.width=On,pr.height=Bn,pr.channels=ha,pr.format=pr.internalformat=Ie[ha],pr.needsFree=!0}}function Se(pr,vn,$r,On,Bn){var ha=pr.element,na=pr.data,Vn=pr.internalformat,fa=pr.format,ga=pr.type,ur=pr.width,Dr=pr.height;Or(pr),ha?Je.texSubImage2D(vn,Bn,$r,On,fa,ga,ha):pr.compressed?Je.compressedTexSubImage2D(vn,Bn,$r,On,Vn,ur,Dr,na):pr.needsCopy?(rr(),Je.copyTexSubImage2D(vn,Bn,$r,On,pr.xOffset,pr.yOffset,ur,Dr)):Je.texSubImage2D(vn,Bn,$r,On,ur,Dr,fa,ga,na)}function De(){return Fn.pop()||new et}function je(pr){pr.needsFree&&ue.freeType(pr.data),et.call(pr),Fn.push(pr)}function $e(){Lr.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function ot(pr,vn,$r){var On=pr.images[0]=De();pr.mipmask=1,On.width=pr.width=vn,On.height=pr.height=$r,On.channels=pr.channels=4}function st(pr,vn){var $r=null;if(P(vn))$r=pr.images[0]=De(),kr($r,pr),we($r,vn),pr.mipmask=1;else if(tr(pr,vn),Array.isArray(vn.mipmap))for(var On=vn.mipmap,Bn=0;Bn<On.length;++Bn)$r=pr.images[Bn]=De(),kr($r,pr),$r.width>>=Bn,$r.height>>=Bn,we($r,On[Bn]),pr.mipmask|=1<<Bn;else $r=pr.images[0]=De(),kr($r,pr),we($r,vn),pr.mipmask=1;kr(pr,pr.images[0])}function pt(pr,vn){for(var $r=pr.images,On=0;On<$r.length&&$r[On];++On){var Bn=$r[On],ha=vn,na=On,Vn=Bn.element,fa=Bn.data,ga=Bn.internalformat,ur=Bn.format,Dr=Bn.type,on=Bn.width,rn=Bn.height;Or(Bn),Vn?Je.texImage2D(ha,na,ur,ur,Dr,Vn):Bn.compressed?Je.compressedTexImage2D(ha,na,ga,on,rn,0,fa):Bn.needsCopy?(rr(),Je.copyTexImage2D(ha,na,ur,Bn.xOffset,Bn.yOffset,on,rn,0)):Je.texImage2D(ha,na,ur,on,rn,0,ur,Dr,fa||null)}}function wt(){var pr=kn.pop()||new $e;Lr.call(pr);for(var vn=pr.mipmask=0;16>vn;++vn)pr.images[vn]=null;return pr}function Wt(pr){for(var vn=pr.images,$r=0;$r<vn.length;++$r)vn[$r]&&je(vn[$r]),vn[$r]=null;kn.push(pr)}function yr(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function xr(pr,vn){"min"in vn&&(pr.minFilter=Ar[vn.min],0<=Ue.indexOf(pr.minFilter)&&!("faces"in vn)&&(pr.genMipmaps=!0)),"mag"in vn&&(pr.magFilter=Gr[vn.mag]);var $r=pr.wrapS,On=pr.wrapT;if("wrap"in vn){var Bn=vn.wrap;typeof Bn=="string"?$r=On=mn[Bn]:Array.isArray(Bn)&&($r=mn[Bn[0]],On=mn[Bn[1]])}else"wrapS"in vn&&($r=mn[vn.wrapS]),"wrapT"in vn&&(On=mn[vn.wrapT]);if(pr.wrapS=$r,pr.wrapT=On,"anisotropic"in vn&&(pr.anisotropic=vn.anisotropic),"mipmap"in vn){switch($r=!1,typeof vn.mipmap){case"string":pr.mipmapHint=gr[vn.mipmap],$r=pr.genMipmaps=!0;break;case"boolean":$r=pr.genMipmaps=vn.mipmap;break;case"object":pr.genMipmaps=!1,$r=!0}!$r||"min"in vn||(pr.minFilter=9984)}}function Tr(pr,vn){Je.texParameteri(vn,10241,pr.minFilter),Je.texParameteri(vn,10240,pr.magFilter),Je.texParameteri(vn,10242,pr.wrapS),Je.texParameteri(vn,10243,pr.wrapT),gt.ext_texture_filter_anisotropic&&Je.texParameteri(vn,34046,pr.anisotropic),pr.genMipmaps&&(Je.hint(33170,pr.mipmapHint),Je.generateMipmap(vn))}function mr(pr){Lr.call(this),this.mipmask=0,this.internalformat=6408,this.id=ra++,this.refCount=1,this.target=pr,this.texture=Je.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new yr,dr.profile&&(this.stats={size:0})}function Rr(pr){Je.activeTexture(33984),Je.bindTexture(pr.target,pr.texture)}function tn(){var pr=ya[0];pr?Je.bindTexture(pr.target,pr.texture):Je.bindTexture(3553,null)}function wr(pr){var vn=pr.texture,$r=pr.unit,On=pr.target;0<=$r&&(Je.activeTexture(33984+$r),Je.bindTexture(On,null),ya[$r]=null),Je.deleteTexture(vn),pr.texture=null,pr.params=null,pr.pixels=null,pr.refCount=0,delete oa[pr.id],or.textureCount--}var gr={"don't care":4352,"dont care":4352,nice:4354,fast:4353},mn={repeat:10497,clamp:33071,mirror:33648},Gr={nearest:9728,linear:9729},Ar=K({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},Gr),nn={none:0,browser:37444},fn={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},jr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},at={};gt.ext_srgb&&(jr.srgb=35904,jr.srgba=35906),gt.oes_texture_float&&(fn.float32=fn.float=5126),gt.oes_texture_half_float&&(fn.float16=fn["half float"]=36193),gt.webgl_depth_texture&&(K(jr,{depth:6402,"depth stencil":34041}),K(fn,{uint16:5123,uint32:5125,"depth stencil":34042})),gt.webgl_compressed_texture_s3tc&&K(at,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),gt.webgl_compressed_texture_atc&&K(at,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),gt.webgl_compressed_texture_pvrtc&&K(at,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),gt.webgl_compressed_texture_etc1&&(at["rgb etc1"]=36196);var Ft=Array.prototype.slice.call(Je.getParameter(34467));Object.keys(at).forEach(function(pr){var vn=at[pr];0<=Ft.indexOf(vn)&&(jr[pr]=vn)});var er=Object.keys(jr);Et.textureFormats=er;var hr=[];Object.keys(jr).forEach(function(pr){hr[jr[pr]]=pr});var Wr=[];Object.keys(fn).forEach(function(pr){Wr[fn[pr]]=pr});var zr=[];Object.keys(Gr).forEach(function(pr){zr[Gr[pr]]=pr});var Pr=[];Object.keys(Ar).forEach(function(pr){Pr[Ar[pr]]=pr});var br=[];Object.keys(mn).forEach(function(pr){br[mn[pr]]=pr});var Xr=er.reduce(function(pr,vn){var $r=jr[vn];return $r===6409||$r===6406||$r===6409||$r===6410||$r===6402||$r===34041||gt.ext_srgb&&($r===35904||$r===35906)?pr[$r]=$r:$r===32855||0<=vn.indexOf("rgba")?pr[$r]=6408:pr[$r]=6407,pr},{}),Fn=[],kn=[],ra=0,oa={},Sa=Et.maxTextureUnits,ya=Array(Sa).map(function(){return null});return K(mr.prototype,{bind:function(){this.bindCount+=1;var pr=this.unit;if(0>pr){for(var vn=0;vn<Sa;++vn){var $r=ya[vn];if($r){if(0<$r.bindCount)continue;$r.unit=-1}ya[vn]=this,pr=vn;break}dr.profile&&or.maxTextureUnits<pr+1&&(or.maxTextureUnits=pr+1),this.unit=pr,Je.activeTexture(33984+pr),Je.bindTexture(this.target,this.texture)}return pr},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&wr(this)}}),dr.profile&&(or.getTotalTextureSize=function(){var pr=0;return Object.keys(oa).forEach(function(vn){pr+=oa[vn].stats.size}),pr}),{create2D:function(pr,vn){function $r(Bn,ha){var na=On.texInfo;yr.call(na);var Vn=wt();return typeof Bn=="number"?typeof ha=="number"?ot(Vn,Bn|0,ha|0):ot(Vn,Bn|0,Bn|0):Bn?(xr(na,Bn),st(Vn,Bn)):ot(Vn,1,1),na.genMipmaps&&(Vn.mipmask=(Vn.width<<1)-1),On.mipmask=Vn.mipmask,kr(On,Vn),On.internalformat=Vn.internalformat,$r.width=Vn.width,$r.height=Vn.height,Rr(On),pt(Vn,3553),Tr(na,3553),tn(),Wt(Vn),dr.profile&&(On.stats.size=F(On.internalformat,On.type,Vn.width,Vn.height,na.genMipmaps,!1)),$r.format=hr[On.internalformat],$r.type=Wr[On.type],$r.mag=zr[na.magFilter],$r.min=Pr[na.minFilter],$r.wrapS=br[na.wrapS],$r.wrapT=br[na.wrapT],$r}var On=new mr(3553);return oa[On.id]=On,or.textureCount++,$r(pr,vn),$r.subimage=function(Bn,ha,na,Vn){ha|=0,na|=0,Vn|=0;var fa=De();return kr(fa,On),fa.width=0,fa.height=0,we(fa,Bn),fa.width=fa.width||(On.width>>Vn)-ha,fa.height=fa.height||(On.height>>Vn)-na,Rr(On),Se(fa,3553,ha,na,Vn),tn(),je(fa),$r},$r.resize=function(Bn,ha){var na=Bn|0,Vn=ha|0||na;if(na===On.width&&Vn===On.height)return $r;$r.width=On.width=na,$r.height=On.height=Vn,Rr(On);for(var fa=0;On.mipmask>>fa;++fa){var ga=na>>fa,ur=Vn>>fa;if(!ga||!ur)break;Je.texImage2D(3553,fa,On.format,ga,ur,0,On.format,On.type,null)}return tn(),dr.profile&&(On.stats.size=F(On.internalformat,On.type,na,Vn,!1,!1)),$r},$r._reglType="texture2d",$r._texture=On,dr.profile&&($r.stats=On.stats),$r.destroy=function(){On.decRef()},$r},createCube:function(pr,vn,$r,On,Bn,ha){function na(ga,ur,Dr,on,rn,gn){var wn,pn=Vn.texInfo;for(yr.call(pn),wn=0;6>wn;++wn)fa[wn]=wt();if(typeof ga=="number"||!ga)for(ga=ga|0||1,wn=0;6>wn;++wn)ot(fa[wn],ga,ga);else if(typeof ga=="object")if(ur)st(fa[0],ga),st(fa[1],ur),st(fa[2],Dr),st(fa[3],on),st(fa[4],rn),st(fa[5],gn);else if(xr(pn,ga),tr(Vn,ga),"faces"in ga)for(ga=ga.faces,wn=0;6>wn;++wn)kr(fa[wn],Vn),st(fa[wn],ga[wn]);else for(wn=0;6>wn;++wn)st(fa[wn],ga);for(kr(Vn,fa[0]),Vn.mipmask=pn.genMipmaps?(fa[0].width<<1)-1:fa[0].mipmask,Vn.internalformat=fa[0].internalformat,na.width=fa[0].width,na.height=fa[0].height,Rr(Vn),wn=0;6>wn;++wn)pt(fa[wn],34069+wn);for(Tr(pn,34067),tn(),dr.profile&&(Vn.stats.size=F(Vn.internalformat,Vn.type,na.width,na.height,pn.genMipmaps,!0)),na.format=hr[Vn.internalformat],na.type=Wr[Vn.type],na.mag=zr[pn.magFilter],na.min=Pr[pn.minFilter],na.wrapS=br[pn.wrapS],na.wrapT=br[pn.wrapT],wn=0;6>wn;++wn)Wt(fa[wn]);return na}var Vn=new mr(34067);oa[Vn.id]=Vn,or.cubeCount++;var fa=Array(6);return na(pr,vn,$r,On,Bn,ha),na.subimage=function(ga,ur,Dr,on,rn){Dr|=0,on|=0,rn|=0;var gn=De();return kr(gn,Vn),gn.width=0,gn.height=0,we(gn,ur),gn.width=gn.width||(Vn.width>>rn)-Dr,gn.height=gn.height||(Vn.height>>rn)-on,Rr(Vn),Se(gn,34069+ga,Dr,on,rn),tn(),je(gn),na},na.resize=function(ga){if(ga|=0,ga!==Vn.width){na.width=Vn.width=ga,na.height=Vn.height=ga,Rr(Vn);for(var ur=0;6>ur;++ur)for(var Dr=0;Vn.mipmask>>Dr;++Dr)Je.texImage2D(34069+ur,Dr,Vn.format,ga>>Dr,ga>>Dr,0,Vn.format,Vn.type,null);return tn(),dr.profile&&(Vn.stats.size=F(Vn.internalformat,Vn.type,na.width,na.height,!1,!0)),na}},na._reglType="textureCube",na._texture=Vn,dr.profile&&(na.stats=Vn.stats),na.destroy=function(){Vn.decRef()},na},clear:function(){for(var pr=0;pr<Sa;++pr)Je.activeTexture(33984+pr),Je.bindTexture(3553,null),ya[pr]=null;me(oa).forEach(wr),or.cubeCount=0,or.textureCount=0},getTexture:function(pr){return null},restore:function(){for(var pr=0;pr<Sa;++pr){var vn=ya[pr];vn&&(vn.bindCount=0,vn.unit=-1,ya[pr]=null)}me(oa).forEach(function($r){$r.texture=Je.createTexture(),Je.bindTexture($r.target,$r.texture);for(var On=0;32>On;++On)if(($r.mipmask&1<<On)!=0)if($r.target===3553)Je.texImage2D(3553,On,$r.internalformat,$r.width>>On,$r.height>>On,0,$r.internalformat,$r.type,null);else for(var Bn=0;6>Bn;++Bn)Je.texImage2D(34069+Bn,On,$r.internalformat,$r.width>>On,$r.height>>On,0,$r.internalformat,$r.type,null);Tr($r.texInfo,$r.target)})},refresh:function(){for(var pr=0;pr<Sa;++pr){var vn=ya[pr];vn&&(vn.bindCount=0,vn.unit=-1,ya[pr]=null),Je.activeTexture(33984+pr),Je.bindTexture(3553,null),Je.bindTexture(34067,null)}}}}function D(Je,gt,Et,rr,vr,or){function dr(mr,Rr,tn){this.target=mr,this.texture=Rr,this.renderbuffer=tn;var wr=mr=0;Rr?(mr=Rr.width,wr=Rr.height):tn&&(mr=tn.width,wr=tn.height),this.width=mr,this.height=wr}function Lr(mr){mr&&(mr.texture&&mr.texture._texture.decRef(),mr.renderbuffer&&mr.renderbuffer._renderbuffer.decRef())}function kr(mr,Rr,tn){mr&&(mr.texture?mr.texture._texture.refCount+=1:mr.renderbuffer._renderbuffer.refCount+=1)}function tr(mr,Rr){Rr&&(Rr.texture?Je.framebufferTexture2D(36160,mr,Rr.target,Rr.texture._texture.texture,0):Je.framebufferRenderbuffer(36160,mr,36161,Rr.renderbuffer._renderbuffer.renderbuffer))}function Or(mr){var Rr=3553,tn=null,wr=null,gr=mr;return typeof mr=="object"&&(gr=mr.data,"target"in mr&&(Rr=mr.target|0)),mr=gr._reglType,mr==="texture2d"||mr==="textureCube"?tn=gr:mr==="renderbuffer"&&(wr=gr,Rr=36161),new dr(Rr,tn,wr)}function et(mr,Rr,tn,wr,gr){return tn?(mr=rr.create2D({width:mr,height:Rr,format:wr,type:gr}),mr._texture.refCount=0,new dr(3553,mr,null)):(mr=vr.create({width:mr,height:Rr,format:wr}),mr._renderbuffer.refCount=0,new dr(36161,null,mr))}function we(mr){return mr&&(mr.texture||mr.renderbuffer)}function Se(mr,Rr,tn){mr&&(mr.texture?mr.texture.resize(Rr,tn):mr.renderbuffer&&mr.renderbuffer.resize(Rr,tn),mr.width=Rr,mr.height=tn)}function De(){this.id=xr++,Tr[this.id]=this,this.framebuffer=Je.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function je(mr){mr.colorAttachments.forEach(Lr),Lr(mr.depthAttachment),Lr(mr.stencilAttachment),Lr(mr.depthStencilAttachment)}function $e(mr){Je.deleteFramebuffer(mr.framebuffer),mr.framebuffer=null,or.framebufferCount--,delete Tr[mr.id]}function ot(mr){var Rr;Je.bindFramebuffer(36160,mr.framebuffer);var tn=mr.colorAttachments;for(Rr=0;Rr<tn.length;++Rr)tr(36064+Rr,tn[Rr]);for(Rr=tn.length;Rr<Et.maxColorAttachments;++Rr)Je.framebufferTexture2D(36160,36064+Rr,3553,null,0);Je.framebufferTexture2D(36160,33306,3553,null,0),Je.framebufferTexture2D(36160,36096,3553,null,0),Je.framebufferTexture2D(36160,36128,3553,null,0),tr(36096,mr.depthAttachment),tr(36128,mr.stencilAttachment),tr(33306,mr.depthStencilAttachment),Je.checkFramebufferStatus(36160),Je.isContextLost(),Je.bindFramebuffer(36160,pt.next?pt.next.framebuffer:null),pt.cur=pt.next,Je.getError()}function st(mr,Rr){function tn(gr,mn){var Gr,Ar=0,nn=0,fn=!0,jr=!0;Gr=null;var at=!0,Ft="rgba",er="uint8",hr=1,Wr=null,zr=null,Pr=null,br=!1;typeof gr=="number"?(Ar=gr|0,nn=mn|0||Ar):gr?("shape"in gr?(nn=gr.shape,Ar=nn[0],nn=nn[1]):("radius"in gr&&(Ar=nn=gr.radius),"width"in gr&&(Ar=gr.width),"height"in gr&&(nn=gr.height)),("color"in gr||"colors"in gr)&&(Gr=gr.color||gr.colors),Gr||("colorCount"in gr&&(hr=gr.colorCount|0),"colorTexture"in gr&&(at=!!gr.colorTexture,Ft="rgba4"),"colorType"in gr&&(er=gr.colorType,!at)&&(er==="half float"||er==="float16"?Ft="rgba16f":(er==="float"||er==="float32")&&(Ft="rgba32f")),"colorFormat"in gr&&(Ft=gr.colorFormat,0<=wt.indexOf(Ft)?at=!0:0<=Wt.indexOf(Ft)&&(at=!1))),("depthTexture"in gr||"depthStencilTexture"in gr)&&(br=!(!gr.depthTexture&&!gr.depthStencilTexture)),"depth"in gr&&(typeof gr.depth=="boolean"?fn=gr.depth:(Wr=gr.depth,jr=!1)),"stencil"in gr&&(typeof gr.stencil=="boolean"?jr=gr.stencil:(zr=gr.stencil,fn=!1)),"depthStencil"in gr&&(typeof gr.depthStencil=="boolean"?fn=jr=gr.depthStencil:(Pr=gr.depthStencil,jr=fn=!1))):Ar=nn=1;var Xr=null,Fn=null,kn=null,ra=null;if(Array.isArray(Gr))Xr=Gr.map(Or);else if(Gr)Xr=[Or(Gr)];else for(Xr=Array(hr),Gr=0;Gr<hr;++Gr)Xr[Gr]=et(Ar,nn,at,Ft,er);for(Ar=Ar||Xr[0].width,nn=nn||Xr[0].height,Wr?Fn=Or(Wr):fn&&!jr&&(Fn=et(Ar,nn,br,"depth","uint32")),zr?kn=Or(zr):jr&&!fn&&(kn=et(Ar,nn,!1,"stencil","uint8")),Pr?ra=Or(Pr):!Wr&&!zr&&jr&&fn&&(ra=et(Ar,nn,br,"depth stencil","depth stencil")),fn=null,Gr=0;Gr<Xr.length;++Gr)kr(Xr[Gr]),Xr[Gr]&&Xr[Gr].texture&&(jr=Ce[Xr[Gr].texture._texture.format]*Xe[Xr[Gr].texture._texture.type],fn===null&&(fn=jr));return kr(Fn),kr(kn),kr(ra),je(wr),wr.width=Ar,wr.height=nn,wr.colorAttachments=Xr,wr.depthAttachment=Fn,wr.stencilAttachment=kn,wr.depthStencilAttachment=ra,tn.color=Xr.map(we),tn.depth=we(Fn),tn.stencil=we(kn),tn.depthStencil=we(ra),tn.width=wr.width,tn.height=wr.height,ot(wr),tn}var wr=new De;return or.framebufferCount++,tn(mr,Rr),K(tn,{resize:function(gr,mn){var Gr=Math.max(gr|0,1),Ar=Math.max(mn|0||Gr,1);if(Gr===wr.width&&Ar===wr.height)return tn;for(var nn=wr.colorAttachments,fn=0;fn<nn.length;++fn)Se(nn[fn],Gr,Ar);return Se(wr.depthAttachment,Gr,Ar),Se(wr.stencilAttachment,Gr,Ar),Se(wr.depthStencilAttachment,Gr,Ar),wr.width=tn.width=Gr,wr.height=tn.height=Ar,ot(wr),tn},_reglType:"framebuffer",_framebuffer:wr,destroy:function(){$e(wr),je(wr)},use:function(gr){pt.setFBO({framebuffer:tn},gr)}})}var pt={cur:null,next:null,dirty:!1,setFBO:null},wt=["rgba"],Wt=["rgba4","rgb565","rgb5 a1"];gt.ext_srgb&&Wt.push("srgba"),gt.ext_color_buffer_half_float&&Wt.push("rgba16f","rgb16f"),gt.webgl_color_buffer_float&&Wt.push("rgba32f");var yr=["uint8"];gt.oes_texture_half_float&&yr.push("half float","float16"),gt.oes_texture_float&&yr.push("float","float32");var xr=0,Tr={};return K(pt,{getFramebuffer:function(mr){return typeof mr=="function"&&mr._reglType==="framebuffer"&&(mr=mr._framebuffer,mr instanceof De)?mr:null},create:st,createCube:function(mr){function Rr(wr){var gr,mn={color:null},Gr=0,Ar=null;gr="rgba";var nn="uint8",fn=1;if(typeof wr=="number"?Gr=wr|0:wr?("shape"in wr?Gr=wr.shape[0]:("radius"in wr&&(Gr=wr.radius|0),"width"in wr?Gr=wr.width|0:"height"in wr&&(Gr=wr.height|0)),("color"in wr||"colors"in wr)&&(Ar=wr.color||wr.colors),Ar||("colorCount"in wr&&(fn=wr.colorCount|0),"colorType"in wr&&(nn=wr.colorType),"colorFormat"in wr&&(gr=wr.colorFormat)),"depth"in wr&&(mn.depth=wr.depth),"stencil"in wr&&(mn.stencil=wr.stencil),"depthStencil"in wr&&(mn.depthStencil=wr.depthStencil)):Gr=1,Ar)if(Array.isArray(Ar))for(wr=[],gr=0;gr<Ar.length;++gr)wr[gr]=Ar[gr];else wr=[Ar];else for(wr=Array(fn),Ar={radius:Gr,format:gr,type:nn},gr=0;gr<fn;++gr)wr[gr]=rr.createCube(Ar);for(mn.color=Array(wr.length),gr=0;gr<wr.length;++gr)fn=wr[gr],Gr=Gr||fn.width,mn.color[gr]={target:34069,data:wr[gr]};for(gr=0;6>gr;++gr){for(fn=0;fn<wr.length;++fn)mn.color[fn].target=34069+gr;0<gr&&(mn.depth=tn[0].depth,mn.stencil=tn[0].stencil,mn.depthStencil=tn[0].depthStencil),tn[gr]?tn[gr](mn):tn[gr]=st(mn)}return K(Rr,{width:Gr,height:Gr,color:wr})}var tn=Array(6);return Rr(mr),K(Rr,{faces:tn,resize:function(wr){var gr=wr|0;if(gr===Rr.width)return Rr;var mn=Rr.color;for(wr=0;wr<mn.length;++wr)mn[wr].resize(gr);for(wr=0;6>wr;++wr)tn[wr].resize(gr);return Rr.width=Rr.height=gr,Rr},_reglType:"framebufferCube",destroy:function(){tn.forEach(function(wr){wr.destroy()})}})},clear:function(){me(Tr).forEach($e)},restore:function(){pt.cur=null,pt.next=null,pt.dirty=!0,me(Tr).forEach(function(mr){mr.framebuffer=Je.createFramebuffer(),ot(mr)})}})}function U(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(Je,gt,Et,rr,vr,or,dr){function Lr(ot){if(ot!==$e.currentVAO){var st=gt.oes_vertex_array_object;ot?st.bindVertexArrayOES(ot.vao):st.bindVertexArrayOES(null),$e.currentVAO=ot}}function kr(ot){if(ot!==$e.currentVAO){if(ot)ot.bindAttrs();else{for(var st=gt.angle_instanced_arrays,pt=0;pt<Se.length;++pt){var wt=Se[pt];wt.buffer?(Je.enableVertexAttribArray(pt),wt.buffer.bind(),Je.vertexAttribPointer(pt,wt.size,wt.type,wt.normalized,wt.stride,wt.offfset),st&&wt.divisor&&st.vertexAttribDivisorANGLE(pt,wt.divisor)):(Je.disableVertexAttribArray(pt),Je.vertexAttrib4f(pt,wt.x,wt.y,wt.z,wt.w))}dr.elements?Je.bindBuffer(34963,dr.elements.buffer.buffer):Je.bindBuffer(34963,null)}$e.currentVAO=ot}}function tr(){me(je).forEach(function(ot){ot.destroy()})}function Or(){this.id=++De,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var ot=gt.oes_vertex_array_object;this.vao=ot?ot.createVertexArrayOES():null,je[this.id]=this,this.buffers=[]}function et(){gt.oes_vertex_array_object&&me(je).forEach(function(ot){ot.refresh()})}var we=Et.maxAttributes,Se=Array(we);for(Et=0;Et<we;++Et)Se[Et]=new U;var De=0,je={},$e={Record:U,scope:{},state:Se,currentVAO:null,targetVAO:null,restore:gt.oes_vertex_array_object?et:function(){},createVAO:function(ot){function st(wt){var Wt;Array.isArray(wt)?(Wt=wt,pt.elements&&pt.ownsElements&&pt.elements.destroy(),pt.elements=null,pt.ownsElements=!1,pt.offset=0,pt.count=0,pt.instances=-1,pt.primitive=4):(wt.elements?(Wt=wt.elements,pt.ownsElements?(typeof Wt=="function"&&Wt._reglType==="elements"?pt.elements.destroy():pt.elements(Wt),pt.ownsElements=!1):or.getElements(wt.elements)?(pt.elements=wt.elements,pt.ownsElements=!1):(pt.elements=or.create(wt.elements),pt.ownsElements=!0)):(pt.elements=null,pt.ownsElements=!1),Wt=wt.attributes,pt.offset=0,pt.count=-1,pt.instances=-1,pt.primitive=4,pt.elements&&(pt.count=pt.elements._elements.vertCount,pt.primitive=pt.elements._elements.primType),"offset"in wt&&(pt.offset=wt.offset|0),"count"in wt&&(pt.count=wt.count|0),"instances"in wt&&(pt.instances=wt.instances|0),"primitive"in wt&&(pt.primitive=Re[wt.primitive])),wt={};var yr=pt.attributes;yr.length=Wt.length;for(var xr=0;xr<Wt.length;++xr){var Tr=Wt[xr],mr=yr[xr]=new U,Rr=Tr.data||Tr;if(Array.isArray(Rr)||ce(Rr)||d(Rr)){var tn;pt.buffers[xr]&&(tn=pt.buffers[xr],ce(Rr)&&tn._buffer.byteLength>=Rr.byteLength?tn.subdata(Rr):(tn.destroy(),pt.buffers[xr]=null)),pt.buffers[xr]||(tn=pt.buffers[xr]=vr.create(Tr,34962,!1,!0)),mr.buffer=vr.getBuffer(tn),mr.size=mr.buffer.dimension|0,mr.normalized=!1,mr.type=mr.buffer.dtype,mr.offset=0,mr.stride=0,mr.divisor=0,mr.state=1,wt[xr]=1}else vr.getBuffer(Tr)?(mr.buffer=vr.getBuffer(Tr),mr.size=mr.buffer.dimension|0,mr.normalized=!1,mr.type=mr.buffer.dtype,mr.offset=0,mr.stride=0,mr.divisor=0,mr.state=1):vr.getBuffer(Tr.buffer)?(mr.buffer=vr.getBuffer(Tr.buffer),mr.size=(+Tr.size||mr.buffer.dimension)|0,mr.normalized=!!Tr.normalized||!1,mr.type="type"in Tr?Ae[Tr.type]:mr.buffer.dtype,mr.offset=(Tr.offset||0)|0,mr.stride=(Tr.stride||0)|0,mr.divisor=(Tr.divisor||0)|0,mr.state=1):"x"in Tr&&(mr.x=+Tr.x||0,mr.y=+Tr.y||0,mr.z=+Tr.z||0,mr.w=+Tr.w||0,mr.state=2)}for(tn=0;tn<pt.buffers.length;++tn)!wt[tn]&&pt.buffers[tn]&&(pt.buffers[tn].destroy(),pt.buffers[tn]=null);return pt.refresh(),st}var pt=new Or;return rr.vaoCount+=1,st.destroy=function(){for(var wt=0;wt<pt.buffers.length;++wt)pt.buffers[wt]&&pt.buffers[wt].destroy();pt.buffers.length=0,pt.ownsElements&&(pt.elements.destroy(),pt.elements=null,pt.ownsElements=!1),pt.destroy()},st._vao=pt,st._reglType="vao",st(ot)},getVAO:function(ot){return typeof ot=="function"&&ot._vao?ot._vao:null},destroyBuffer:function(ot){for(var st=0;st<Se.length;++st){var pt=Se[st];pt.buffer===ot&&(Je.disableVertexAttribArray(st),pt.buffer=null)}},setVAO:gt.oes_vertex_array_object?Lr:kr,clear:gt.oes_vertex_array_object?tr:function(){}};return Or.prototype.bindAttrs=function(){for(var ot=gt.angle_instanced_arrays,st=this.attributes,pt=0;pt<st.length;++pt){var wt=st[pt];wt.buffer?(Je.enableVertexAttribArray(pt),Je.bindBuffer(34962,wt.buffer.buffer),Je.vertexAttribPointer(pt,wt.size,wt.type,wt.normalized,wt.stride,wt.offset),ot&&wt.divisor&&ot.vertexAttribDivisorANGLE(pt,wt.divisor)):(Je.disableVertexAttribArray(pt),Je.vertexAttrib4f(pt,wt.x,wt.y,wt.z,wt.w))}for(ot=st.length;ot<we;++ot)Je.disableVertexAttribArray(ot);(ot=or.getElements(this.elements))?Je.bindBuffer(34963,ot.buffer.buffer):Je.bindBuffer(34963,null)},Or.prototype.refresh=function(){var ot=gt.oes_vertex_array_object;ot&&(ot.bindVertexArrayOES(this.vao),this.bindAttrs(),$e.currentVAO=null,ot.bindVertexArrayOES(null))},Or.prototype.destroy=function(){if(this.vao){var ot=gt.oes_vertex_array_object;this===$e.currentVAO&&($e.currentVAO=null,ot.bindVertexArrayOES(null)),ot.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),je[this.id]&&(delete je[this.id],--rr.vaoCount)},$e}function j(Je,gt,Et,rr){function vr(De,je,$e,ot){this.name=De,this.id=je,this.location=$e,this.info=ot}function or(De,je){for(var $e=0;$e<De.length;++$e)if(De[$e].id===je.id){De[$e].location=je.location;return}De.push(je)}function dr(De,je,$e){$e=De===35632?tr:Or;var ot=$e[je];if(!ot){var st=gt.str(je),ot=Je.createShader(De);Je.shaderSource(ot,st),Je.compileShader(ot),$e[je]=ot}return ot}function Lr(De,je){this.id=Se++,this.fragId=De,this.vertId=je,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,rr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function kr(De,je,$e){var ot;ot=dr(35632,De.fragId);var st=dr(35633,De.vertId);if(je=De.program=Je.createProgram(),Je.attachShader(je,ot),Je.attachShader(je,st),$e)for(ot=0;ot<$e.length;++ot)st=$e[ot],Je.bindAttribLocation(je,st[0],st[1]);Je.linkProgram(je),st=Je.getProgramParameter(je,35718),rr.profile&&(De.stats.uniformsCount=st);var pt=De.uniforms;for(ot=0;ot<st;++ot)if($e=Je.getActiveUniform(je,ot)){if(1<$e.size)for(var wt=0;wt<$e.size;++wt){var Wt=$e.name.replace("[0]","["+wt+"]");or(pt,new vr(Wt,gt.id(Wt),Je.getUniformLocation(je,Wt),$e))}wt=$e.name,1<$e.size&&(wt=wt.replace("[0]","")),or(pt,new vr(wt,gt.id(wt),Je.getUniformLocation(je,wt),$e))}for(st=Je.getProgramParameter(je,35721),rr.profile&&(De.stats.attributesCount=st),De=De.attributes,ot=0;ot<st;++ot)($e=Je.getActiveAttrib(je,ot))&&or(De,new vr($e.name,gt.id($e.name),Je.getAttribLocation(je,$e.name),$e))}var tr={},Or={},et={},we=[],Se=0;return rr.profile&&(Et.getMaxUniformsCount=function(){var De=0;return we.forEach(function(je){je.stats.uniformsCount>De&&(De=je.stats.uniformsCount)}),De},Et.getMaxAttributesCount=function(){var De=0;return we.forEach(function(je){je.stats.attributesCount>De&&(De=je.stats.attributesCount)}),De}),{clear:function(){var De=Je.deleteShader.bind(Je);me(tr).forEach(De),tr={},me(Or).forEach(De),Or={},we.forEach(function(je){Je.deleteProgram(je.program)}),we.length=0,et={},Et.shaderCount=0},program:function(De,je,$e,ot){var st=et[je];st||(st=et[je]={});var pt=st[De];if(pt&&(pt.refCount++,!ot))return pt;var wt=new Lr(je,De);return Et.shaderCount++,kr(wt,$e,ot),pt||(st[De]=wt),we.push(wt),K(wt,{destroy:function(){if(wt.refCount--,0>=wt.refCount){Je.deleteProgram(wt.program);var Wt=we.indexOf(wt);we.splice(Wt,1),Et.shaderCount--}0>=st[wt.vertId].refCount&&(Je.deleteShader(Or[wt.vertId]),delete Or[wt.vertId],delete et[wt.fragId][wt.vertId]),Object.keys(et[wt.fragId]).length||(Je.deleteShader(tr[wt.fragId]),delete tr[wt.fragId],delete et[wt.fragId])}})},restore:function(){tr={},Or={};for(var De=0;De<we.length;++De)kr(we[De],null,we[De].attributes.map(function(je){return[je.location,je.name]}))},shader:dr,frag:-1,vert:-1}}function Z(Je,gt,Et,rr,vr,or,dr){function Lr(tr){var Or;Or=gt.next===null?5121:gt.next.colorAttachments[0].texture._texture.type;var et=0,we=0,Se=rr.framebufferWidth,De=rr.framebufferHeight,je=null;return ce(tr)?je=tr:tr&&(et=tr.x|0,we=tr.y|0,Se=(tr.width||rr.framebufferWidth-et)|0,De=(tr.height||rr.framebufferHeight-we)|0,je=tr.data||null),Et(),tr=Se*De*4,je||(Or===5121?je=new Uint8Array(tr):Or===5126&&(je=je||new Float32Array(tr))),Je.pixelStorei(3333,4),Je.readPixels(et,we,Se,De,6408,Or,je),je}function kr(tr){var Or;return gt.setFBO({framebuffer:tr.framebuffer},function(){Or=Lr(tr)}),Or}return function(tr){return tr&&"framebuffer"in tr?kr(tr):Lr(tr)}}function ee(Je){return Array.prototype.slice.call(Je)}function q(Je){return ee(Je).join("")}function W(){function Je(){var Lr=[],kr=[];return K(function(){Lr.push.apply(Lr,ee(arguments))},{def:function(){var tr="v"+Et++;return kr.push(tr),0<arguments.length&&(Lr.push(tr,"="),Lr.push.apply(Lr,ee(arguments)),Lr.push(";")),tr},toString:function(){return q([0<kr.length?"var "+kr.join(",")+";":"",q(Lr)])}})}function gt(){function Lr(we,Se){tr(we,Se,"=",kr.def(we,Se),";")}var kr=Je(),tr=Je(),Or=kr.toString,et=tr.toString;return K(function(){kr.apply(kr,ee(arguments))},{def:kr.def,entry:kr,exit:tr,save:Lr,set:function(we,Se,De){Lr(we,Se),kr(we,Se,"=",De,";")},toString:function(){return Or()+et()}})}var Et=0,rr=[],vr=[],or=Je(),dr={};return{global:or,link:function(Lr){for(var kr=0;kr<vr.length;++kr)if(vr[kr]===Lr)return rr[kr];return kr="g"+Et++,rr.push(kr),vr.push(Lr),kr},block:Je,proc:function(Lr,kr){function tr(){var Se="a"+Or.length;return Or.push(Se),Se}var Or=[];kr=kr||0;for(var et=0;et<kr;++et)tr();var et=gt(),we=et.toString;return dr[Lr]=K(et,{arg:tr,toString:function(){return q(["function(",Or.join(),"){",we(),"}"])}})},scope:gt,cond:function(){var Lr=q(arguments),kr=gt(),tr=gt(),Or=kr.toString,et=tr.toString;return K(kr,{then:function(){return kr.apply(kr,ee(arguments)),this},else:function(){return tr.apply(tr,ee(arguments)),this},toString:function(){var we=et();return we&&(we="else{"+we+"}"),q(["if(",Lr,"){",Or(),"}",we])}})},compile:function(){var Lr=['"use strict";',or,"return {"];Object.keys(dr).forEach(function(tr){Lr.push('"',tr,'":',dr[tr].toString(),",")}),Lr.push("}");var kr=q(Lr).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`);return Function.apply(null,rr.concat(kr)).apply(null,vr)}}}function J(Je){return Array.isArray(Je)||ce(Je)||d(Je)}function le(Je){return Je.sort(function(gt,Et){return gt==="viewport"?-1:Et==="viewport"?1:gt<Et?-1:1})}function fe(Je,gt,Et,rr){this.thisDep=Je,this.contextDep=gt,this.propDep=Et,this.append=rr}function se(Je){return Je&&!(Je.thisDep||Je.contextDep||Je.propDep)}function H(Je){return new fe(!1,!1,!1,Je)}function Y(Je,gt){var Et=Je.type;if(Et===0)return Et=Je.data.length,new fe(!0,1<=Et,2<=Et,gt);if(Et===4)return Et=Je.data,new fe(Et.thisDep,Et.contextDep,Et.propDep,gt);if(Et===5)return new fe(!1,!1,!1,gt);if(Et===6){for(var rr=Et=!1,vr=!1,or=0;or<Je.data.length;++or){var dr=Je.data[or];dr.type===1?vr=!0:dr.type===2?rr=!0:dr.type===3?Et=!0:dr.type===0?(Et=!0,dr=dr.data,1<=dr&&(rr=!0),2<=dr&&(vr=!0)):dr.type===4&&(Et=Et||dr.data.thisDep,rr=rr||dr.data.contextDep,vr=vr||dr.data.propDep)}return new fe(Et,rr,vr,gt)}return new fe(Et===3,Et===2,Et===1,gt)}function ne(Je,gt,Et,rr,vr,or,dr,Lr,kr,tr,Or,et,we,Se,De){function je(ur){return ur.replace(".","_")}function $e(ur,Dr,on){var rn=je(ur);Bn.push(ur),On[rn]=$r[rn]=!!on,ha[rn]=Dr}function ot(ur,Dr,on){var rn=je(ur);Bn.push(ur),Array.isArray(on)?($r[rn]=on.slice(),On[rn]=on.slice()):$r[rn]=On[rn]=on,na[rn]=Dr}function st(){var ur=W(),Dr=ur.link,on=ur.global;ur.id=ga++,ur.batchId="0";var rn=Dr(Vn),gn=ur.shared={props:"a0"};Object.keys(Vn).forEach(function(Fr){gn[Fr]=on.def(rn,".",Fr)});var wn=ur.next={},pn=ur.current={};Object.keys(na).forEach(function(Fr){Array.isArray($r[Fr])&&(wn[Fr]=on.def(gn.next,".",Fr),pn[Fr]=on.def(gn.current,".",Fr))});var cr=ur.constants={};Object.keys(fa).forEach(function(Fr){cr[Fr]=on.def(JSON.stringify(fa[Fr]))}),ur.invoke=function(Fr,Jr){switch(Jr.type){case 0:var En=["this",gn.context,gn.props,ur.batchId];return Fr.def(Dr(Jr.data),".call(",En.slice(0,Math.max(Jr.data.length+1,4)),")");case 1:return Fr.def(gn.props,Jr.data);case 2:return Fr.def(gn.context,Jr.data);case 3:return Fr.def("this",Jr.data);case 4:return Jr.data.append(ur,Fr),Jr.data.ref;case 5:return Jr.data.toString();case 6:return Jr.data.map(function(Hn){return ur.invoke(Fr,Hn)})}},ur.attribCache={};var ar={};return ur.scopeAttrib=function(Fr){if(Fr=gt.id(Fr),Fr in ar)return ar[Fr];var Jr=tr.scope[Fr];return Jr||(Jr=tr.scope[Fr]=new oa),ar[Fr]=Dr(Jr)},ur}function pt(ur){var Dr=ur.static;ur=ur.dynamic;var on;if("profile"in Dr){var rn=!!Dr.profile;on=H(function(wn,pn){return rn}),on.enable=rn}else if("profile"in ur){var gn=ur.profile;on=Y(gn,function(wn,pn){return wn.invoke(pn,gn)})}return on}function wt(ur,Dr){var on=ur.static,rn=ur.dynamic;if("framebuffer"in on){var gn=on.framebuffer;return gn?(gn=Lr.getFramebuffer(gn),H(function(pn,cr){var ar=pn.link(gn),Fr=pn.shared;return cr.set(Fr.framebuffer,".next",ar),Fr=Fr.context,cr.set(Fr,".framebufferWidth",ar+".width"),cr.set(Fr,".framebufferHeight",ar+".height"),ar})):H(function(pn,cr){var ar=pn.shared;return cr.set(ar.framebuffer,".next","null"),ar=ar.context,cr.set(ar,".framebufferWidth",ar+".drawingBufferWidth"),cr.set(ar,".framebufferHeight",ar+".drawingBufferHeight"),"null"})}if("framebuffer"in rn){var wn=rn.framebuffer;return Y(wn,function(pn,cr){var ar=pn.invoke(cr,wn),Fr=pn.shared,Jr=Fr.framebuffer,ar=cr.def(Jr,".getFramebuffer(",ar,")");return cr.set(Jr,".next",ar),Fr=Fr.context,cr.set(Fr,".framebufferWidth",ar+"?"+ar+".width:"+Fr+".drawingBufferWidth"),cr.set(Fr,".framebufferHeight",ar+"?"+ar+".height:"+Fr+".drawingBufferHeight"),ar})}return null}function Wt(ur,Dr,on){function rn(cr){if(cr in gn){var ar=gn[cr];cr=!0;var Fr=ar.x|0,Jr=ar.y|0,En,Hn;return"width"in ar?En=ar.width|0:cr=!1,"height"in ar?Hn=ar.height|0:cr=!1,new fe(!cr&&Dr&&Dr.thisDep,!cr&&Dr&&Dr.contextDep,!cr&&Dr&&Dr.propDep,function(Zn,Un){var yn=Zn.shared.context,Dn=En;"width"in ar||(Dn=Un.def(yn,".","framebufferWidth","-",Fr));var Yn=Hn;return"height"in ar||(Yn=Un.def(yn,".","framebufferHeight","-",Jr)),[Fr,Jr,Dn,Yn]})}if(cr in wn){var Jn=wn[cr];return cr=Y(Jn,function(Zn,Un){var yn=Zn.invoke(Un,Jn),Dn=Zn.shared.context,Yn=Un.def(yn,".x|0"),ua=Un.def(yn,".y|0"),Ya=Un.def('"width" in ',yn,"?",yn,".width|0:","(",Dn,".","framebufferWidth","-",Yn,")"),yn=Un.def('"height" in ',yn,"?",yn,".height|0:","(",Dn,".","framebufferHeight","-",ua,")");return[Yn,ua,Ya,yn]}),Dr&&(cr.thisDep=cr.thisDep||Dr.thisDep,cr.contextDep=cr.contextDep||Dr.contextDep,cr.propDep=cr.propDep||Dr.propDep),cr}return Dr?new fe(Dr.thisDep,Dr.contextDep,Dr.propDep,function(Zn,Un){var yn=Zn.shared.context;return[0,0,Un.def(yn,".","framebufferWidth"),Un.def(yn,".","framebufferHeight")]}):null}var gn=ur.static,wn=ur.dynamic;if(ur=rn("viewport")){var pn=ur;ur=new fe(ur.thisDep,ur.contextDep,ur.propDep,function(cr,ar){var Fr=pn.append(cr,ar),Jr=cr.shared.context;return ar.set(Jr,".viewportWidth",Fr[2]),ar.set(Jr,".viewportHeight",Fr[3]),Fr})}return{viewport:ur,scissor_box:rn("scissor.box")}}function yr(ur,Dr){var on=ur.static;if(typeof on.frag=="string"&&typeof on.vert=="string"){if(0<Object.keys(Dr.dynamic).length)return null;var on=Dr.static,rn=Object.keys(on);if(0<rn.length&&typeof on[rn[0]]=="number"){for(var gn=[],wn=0;wn<rn.length;++wn)gn.push([on[rn[wn]]|0,rn[wn]]);return gn}}return null}function xr(ur,Dr,on){function rn(Fr){if(Fr in gn){var Jr=gt.id(gn[Fr]);return Fr=H(function(){return Jr}),Fr.id=Jr,Fr}if(Fr in wn){var En=wn[Fr];return Y(En,function(Hn,Jn){var Zn=Hn.invoke(Jn,En);return Jn.def(Hn.shared.strings,".id(",Zn,")")})}return null}var gn=ur.static,wn=ur.dynamic,pn=rn("frag"),cr=rn("vert"),ar=null;return se(pn)&&se(cr)?(ar=Or.program(cr.id,pn.id,null,on),ur=H(function(Fr,Jr){return Fr.link(ar)})):ur=new fe(pn&&pn.thisDep||cr&&cr.thisDep,pn&&pn.contextDep||cr&&cr.contextDep,pn&&pn.propDep||cr&&cr.propDep,function(Fr,Jr){var En=Fr.shared.shader,Hn;Hn=pn?pn.append(Fr,Jr):Jr.def(En,".","frag");var Jn;return Jn=cr?cr.append(Fr,Jr):Jr.def(En,".","vert"),Jr.def(En+".program("+Jn+","+Hn+")")}),{frag:pn,vert:cr,progVar:ur,program:ar}}function Tr(ur,Dr){function on(Zn,Un){if(Zn in rn){var yn=rn[Zn]|0;return Un?wn.offset=yn:wn.instances=yn,H(function(Yn,ua){return Un&&(Yn.OFFSET=yn),yn})}if(Zn in gn){var Dn=gn[Zn];return Y(Dn,function(Yn,ua){var Ya=Yn.invoke(ua,Dn);return Un&&(Yn.OFFSET=Ya),Ya})}if(Un){if(ar)return H(function(Yn,ua){return Yn.OFFSET=0});if(pn)return new fe(cr.thisDep,cr.contextDep,cr.propDep,function(Yn,ua){return ua.def(Yn.shared.vao+".currentVAO?"+Yn.shared.vao+".currentVAO.offset:0")})}else if(pn)return new fe(cr.thisDep,cr.contextDep,cr.propDep,function(Yn,ua){return ua.def(Yn.shared.vao+".currentVAO?"+Yn.shared.vao+".currentVAO.instances:-1")});return null}var rn=ur.static,gn=ur.dynamic,wn={},pn=!1,cr=function(){if("vao"in rn){var Zn=rn.vao;return Zn!==null&&tr.getVAO(Zn)===null&&(Zn=tr.createVAO(Zn)),pn=!0,wn.vao=Zn,H(function(yn){var Dn=tr.getVAO(Zn);return Dn?yn.link(Dn):"null"})}if("vao"in gn){pn=!0;var Un=gn.vao;return Y(Un,function(yn,Dn){var Yn=yn.invoke(Dn,Un);return Dn.def(yn.shared.vao+".getVAO("+Yn+")")})}return null}(),ar=!1,Fr=function(){if("elements"in rn){var Zn=rn.elements;if(wn.elements=Zn,J(Zn)){var Un=wn.elements=or.create(Zn,!0),Zn=or.getElements(Un);ar=!0}else Zn&&(Zn=or.getElements(Zn),ar=!0);return Un=H(function(Dn,Yn){if(Zn){var ua=Dn.link(Zn);return Dn.ELEMENTS=ua}return Dn.ELEMENTS=null}),Un.value=Zn,Un}if("elements"in gn){ar=!0;var yn=gn.elements;return Y(yn,function(Dn,Yn){var ua=Dn.shared,Ya=ua.isBufferArgs,ua=ua.elements,Ca=Dn.invoke(Yn,yn),wl=Yn.def("null"),Ya=Yn.def(Ya,"(",Ca,")"),Ca=Dn.cond(Ya).then(wl,"=",ua,".createStream(",Ca,");").else(wl,"=",ua,".getElements(",Ca,");");return Yn.entry(Ca),Yn.exit(Dn.cond(Ya).then(ua,".destroyStream(",wl,");")),Dn.ELEMENTS=wl})}return pn?new fe(cr.thisDep,cr.contextDep,cr.propDep,function(Dn,Yn){return Yn.def(Dn.shared.vao+".currentVAO?"+Dn.shared.elements+".getElements("+Dn.shared.vao+".currentVAO.elements):null")}):null}(),Jr=on("offset",!0),En=function(){if("primitive"in rn){var Zn=rn.primitive;return wn.primitive=Zn,H(function(yn,Dn){return Re[Zn]})}if("primitive"in gn){var Un=gn.primitive;return Y(Un,function(yn,Dn){var Yn=yn.constants.primTypes,ua=yn.invoke(Dn,Un);return Dn.def(Yn,"[",ua,"]")})}return ar?se(Fr)?Fr.value?H(function(yn,Dn){return Dn.def(yn.ELEMENTS,".primType")}):H(function(){return 4}):new fe(Fr.thisDep,Fr.contextDep,Fr.propDep,function(yn,Dn){var Yn=yn.ELEMENTS;return Dn.def(Yn,"?",Yn,".primType:",4)}):pn?new fe(cr.thisDep,cr.contextDep,cr.propDep,function(yn,Dn){return Dn.def(yn.shared.vao+".currentVAO?"+yn.shared.vao+".currentVAO.primitive:4")}):null}(),Hn=function(){if("count"in rn){var Zn=rn.count|0;return wn.count=Zn,H(function(){return Zn})}if("count"in gn){var Un=gn.count;return Y(Un,function(yn,Dn){return yn.invoke(Dn,Un)})}return ar?se(Fr)?Fr?Jr?new fe(Jr.thisDep,Jr.contextDep,Jr.propDep,function(yn,Dn){return Dn.def(yn.ELEMENTS,".vertCount-",yn.OFFSET)}):H(function(yn,Dn){return Dn.def(yn.ELEMENTS,".vertCount")}):H(function(){return-1}):new fe(Fr.thisDep||Jr.thisDep,Fr.contextDep||Jr.contextDep,Fr.propDep||Jr.propDep,function(yn,Dn){var Yn=yn.ELEMENTS;return yn.OFFSET?Dn.def(Yn,"?",Yn,".vertCount-",yn.OFFSET,":-1"):Dn.def(Yn,"?",Yn,".vertCount:-1")}):pn?new fe(cr.thisDep,cr.contextDep,cr.propDep,function(yn,Dn){return Dn.def(yn.shared.vao,".currentVAO?",yn.shared.vao,".currentVAO.count:-1")}):null}(),Jn=on("instances",!1);return{elements:Fr,primitive:En,count:Hn,instances:Jn,offset:Jr,vao:cr,vaoActive:pn,elementsActive:ar,static:wn}}function mr(ur,Dr){var on=ur.static,rn=ur.dynamic,gn={};return Bn.forEach(function(wn){function pn(ar,Fr){if(wn in on){var Jr=ar(on[wn]);gn[cr]=H(function(){return Jr})}else if(wn in rn){var En=rn[wn];gn[cr]=Y(En,function(Hn,Jn){return Fr(Hn,Jn,Hn.invoke(Jn,En))})}}var cr=je(wn);switch(wn){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":return pn(function(ar){return ar},function(ar,Fr,Jr){return Jr});case"depth.func":return pn(function(ar){return St[ar]},function(ar,Fr,Jr){return Fr.def(ar.constants.compareFuncs,"[",Jr,"]")});case"depth.range":return pn(function(ar){return ar},function(ar,Fr,Jr){return ar=Fr.def("+",Jr,"[0]"),Fr=Fr.def("+",Jr,"[1]"),[ar,Fr]});case"blend.func":return pn(function(ar){return[Pt["srcRGB"in ar?ar.srcRGB:ar.src],Pt["dstRGB"in ar?ar.dstRGB:ar.dst],Pt["srcAlpha"in ar?ar.srcAlpha:ar.src],Pt["dstAlpha"in ar?ar.dstAlpha:ar.dst]]},function(ar,Fr,Jr){function En(Un,yn){return Fr.def('"',Un,yn,'" in ',Jr,"?",Jr,".",Un,yn,":",Jr,".",Un)}ar=ar.constants.blendFuncs;var Hn=En("src","RGB"),Jn=En("dst","RGB"),Hn=Fr.def(ar,"[",Hn,"]"),Zn=Fr.def(ar,"[",En("src","Alpha"),"]"),Jn=Fr.def(ar,"[",Jn,"]");return ar=Fr.def(ar,"[",En("dst","Alpha"),"]"),[Hn,Jn,Zn,ar]});case"blend.equation":return pn(function(ar){if(typeof ar=="string")return[Sa[ar],Sa[ar]];if(typeof ar=="object")return[Sa[ar.rgb],Sa[ar.alpha]]},function(ar,Fr,Jr){var En=ar.constants.blendEquations,Hn=Fr.def(),Jn=Fr.def();return ar=ar.cond("typeof ",Jr,'==="string"'),ar.then(Hn,"=",Jn,"=",En,"[",Jr,"];"),ar.else(Hn,"=",En,"[",Jr,".rgb];",Jn,"=",En,"[",Jr,".alpha];"),Fr(ar),[Hn,Jn]});case"blend.color":return pn(function(ar){return o(4,function(Fr){return+ar[Fr]})},function(ar,Fr,Jr){return o(4,function(En){return Fr.def("+",Jr,"[",En,"]")})});case"stencil.mask":return pn(function(ar){return ar|0},function(ar,Fr,Jr){return Fr.def(Jr,"|0")});case"stencil.func":return pn(function(ar){return[St[ar.cmp||"keep"],ar.ref||0,"mask"in ar?ar.mask:-1]},function(ar,Fr,Jr){ar=Fr.def('"cmp" in ',Jr,"?",ar.constants.compareFuncs,"[",Jr,".cmp]",":",7680);var En=Fr.def(Jr,".ref|0");return Fr=Fr.def('"mask" in ',Jr,"?",Jr,".mask|0:-1"),[ar,En,Fr]});case"stencil.opFront":case"stencil.opBack":return pn(function(ar){return[wn==="stencil.opBack"?1029:1028,Nt[ar.fail||"keep"],Nt[ar.zfail||"keep"],Nt[ar.zpass||"keep"]]},function(ar,Fr,Jr){function En(Jn){return Fr.def('"',Jn,'" in ',Jr,"?",Hn,"[",Jr,".",Jn,"]:",7680)}var Hn=ar.constants.stencilOps;return[wn==="stencil.opBack"?1029:1028,En("fail"),En("zfail"),En("zpass")]});case"polygonOffset.offset":return pn(function(ar){return[ar.factor|0,ar.units|0]},function(ar,Fr,Jr){return ar=Fr.def(Jr,".factor|0"),Fr=Fr.def(Jr,".units|0"),[ar,Fr]});case"cull.face":return pn(function(ar){var Fr=0;return ar==="front"?Fr=1028:ar==="back"&&(Fr=1029),Fr},function(ar,Fr,Jr){return Fr.def(Jr,'==="front"?',1028,":",1029)});case"lineWidth":return pn(function(ar){return ar},function(ar,Fr,Jr){return Jr});case"frontFace":return pn(function(ar){return jt[ar]},function(ar,Fr,Jr){return Fr.def(Jr+'==="cw"?2304:2305')});case"colorMask":return pn(function(ar){return ar.map(function(Fr){return!!Fr})},function(ar,Fr,Jr){return o(4,function(En){return"!!"+Jr+"["+En+"]"})});case"sample.coverage":return pn(function(ar){return["value"in ar?ar.value:1,!!ar.invert]},function(ar,Fr,Jr){return ar=Fr.def('"value" in ',Jr,"?+",Jr,".value:1"),Fr=Fr.def("!!",Jr,".invert"),[ar,Fr]})}}),gn}function Rr(ur,Dr){var on=ur.static,rn=ur.dynamic,gn={};return Object.keys(on).forEach(function(wn){var pn=on[wn],cr;if(typeof pn=="number"||typeof pn=="boolean")cr=H(function(){return pn});else if(typeof pn=="function"){var ar=pn._reglType;ar==="texture2d"||ar==="textureCube"?cr=H(function(Fr){return Fr.link(pn)}):(ar==="framebuffer"||ar==="framebufferCube")&&(cr=H(function(Fr){return Fr.link(pn.color[0])}))}else w(pn)&&(cr=H(function(Fr){return Fr.global.def("[",o(pn.length,function(Jr){return pn[Jr]}),"]")}));cr.value=pn,gn[wn]=cr}),Object.keys(rn).forEach(function(wn){var pn=rn[wn];gn[wn]=Y(pn,function(cr,ar){return cr.invoke(ar,pn)})}),gn}function tn(ur,Dr){var on=ur.static,rn=ur.dynamic,gn={};return Object.keys(on).forEach(function(wn){var pn=on[wn],cr=gt.id(wn),ar=new oa;if(J(pn))ar.state=1,ar.buffer=vr.getBuffer(vr.create(pn,34962,!1,!0)),ar.type=0;else{var Fr=vr.getBuffer(pn);if(Fr)ar.state=1,ar.buffer=Fr,ar.type=0;else if("constant"in pn){var Jr=pn.constant;ar.buffer="null",ar.state=2,typeof Jr=="number"?ar.x=Jr:rt.forEach(function(yn,Dn){Dn<Jr.length&&(ar[yn]=Jr[Dn])})}else{var Fr=J(pn.buffer)?vr.getBuffer(vr.create(pn.buffer,34962,!1,!0)):vr.getBuffer(pn.buffer),En=pn.offset|0,Hn=pn.stride|0,Jn=pn.size|0,Zn=!!pn.normalized,Un=0;"type"in pn&&(Un=Ae[pn.type]),pn=pn.divisor|0,ar.buffer=Fr,ar.state=1,ar.size=Jn,ar.normalized=Zn,ar.type=Un||Fr.dtype,ar.offset=En,ar.stride=Hn,ar.divisor=pn}}gn[wn]=H(function(yn,Dn){var Yn=yn.attribCache;if(cr in Yn)return Yn[cr];var ua={isStream:!1};return Object.keys(ar).forEach(function(Ya){ua[Ya]=ar[Ya]}),ar.buffer&&(ua.buffer=yn.link(ar.buffer),ua.type=ua.type||ua.buffer+".dtype"),Yn[cr]=ua})}),Object.keys(rn).forEach(function(wn){var pn=rn[wn];gn[wn]=Y(pn,function(cr,ar){function Fr(Yn){ar(Zn[Yn],"=",Jr,".",Yn,"|0;")}var Jr=cr.invoke(ar,pn),En=cr.shared,Hn=cr.constants,Jn=En.isBufferArgs,En=En.buffer,Zn={isStream:ar.def(!1)},Un=new oa;Un.state=1,Object.keys(Un).forEach(function(Yn){Zn[Yn]=ar.def(""+Un[Yn])});var yn=Zn.buffer,Dn=Zn.type;return ar("if(",Jn,"(",Jr,")){",Zn.isStream,"=true;",yn,"=",En,".createStream(",34962,",",Jr,");",Dn,"=",yn,".dtype;","}else{",yn,"=",En,".getBuffer(",Jr,");","if(",yn,"){",Dn,"=",yn,".dtype;",'}else if("constant" in ',Jr,"){",Zn.state,"=",2,";","if(typeof "+Jr+'.constant === "number"){',Zn[rt[0]],"=",Jr,".constant;",rt.slice(1).map(function(Yn){return Zn[Yn]}).join("="),"=0;","}else{",rt.map(function(Yn,ua){return Zn[Yn]+"="+Jr+".constant.length>"+ua+"?"+Jr+".constant["+ua+"]:0;"}).join(""),"}}else{","if(",Jn,"(",Jr,".buffer)){",yn,"=",En,".createStream(",34962,",",Jr,".buffer);","}else{",yn,"=",En,".getBuffer(",Jr,".buffer);","}",Dn,'="type" in ',Jr,"?",Hn.glTypes,"[",Jr,".type]:",yn,".dtype;",Zn.normalized,"=!!",Jr,".normalized;"),Fr("size"),Fr("offset"),Fr("stride"),Fr("divisor"),ar("}}"),ar.exit("if(",Zn.isStream,"){",En,".destroyStream(",yn,");","}"),Zn})}),gn}function wr(ur){var Dr=ur.static,on=ur.dynamic,rn={};return Object.keys(Dr).forEach(function(gn){var wn=Dr[gn];rn[gn]=H(function(pn,cr){return typeof wn=="number"||typeof wn=="boolean"?""+wn:pn.link(wn)})}),Object.keys(on).forEach(function(gn){var wn=on[gn];rn[gn]=Y(wn,function(pn,cr){return pn.invoke(cr,wn)})}),rn}function gr(ur,Dr,on,rn,gn){function wn(Un){var yn=ar[Un];yn&&(Jr[Un]=yn)}var pn=yr(ur,Dr),cr=wt(ur),ar=Wt(ur,cr),Fr=Tr(ur),Jr=mr(ur),En=xr(ur,gn,pn);wn("viewport"),wn(je("scissor.box"));var Hn=0<Object.keys(Jr).length,cr={framebuffer:cr,draw:Fr,shader:En,state:Jr,dirty:Hn,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(cr.profile=pt(ur),cr.uniforms=Rr(on),cr.drawVAO=cr.scopeVAO=Fr.vao,!cr.drawVAO&&En.program&&!pn&&Et.angle_instanced_arrays&&Fr.static.elements){var Jn=!0;if(ur=En.program.attributes.map(function(Un){return Un=Dr.static[Un],Jn=Jn&&!!Un,Un}),Jn&&0<ur.length){var Zn=tr.getVAO(tr.createVAO({attributes:ur,elements:Fr.static.elements}));cr.drawVAO=new fe(null,null,null,function(Un,yn){return Un.link(Zn)}),cr.useVAO=!0}}return pn?cr.useVAO=!0:cr.attributes=tn(Dr),cr.context=wr(rn),cr}function mn(ur,Dr,on){var rn=ur.shared.context,gn=ur.scope();Object.keys(on).forEach(function(wn){Dr.save(rn,"."+wn);var pn=on[wn].append(ur,Dr);Array.isArray(pn)?gn(rn,".",wn,"=[",pn.join(),"];"):gn(rn,".",wn,"=",pn,";")}),Dr(gn)}function Gr(ur,Dr,on,rn){var gn=ur.shared,wn=gn.gl,pn=gn.framebuffer,cr;pr&&(cr=Dr.def(gn.extensions,".webgl_draw_buffers"));var ar=ur.constants,gn=ar.drawBuffer,ar=ar.backBuffer;ur=on?on.append(ur,Dr):Dr.def(pn,".next"),rn||Dr("if(",ur,"!==",pn,".cur){"),Dr("if(",ur,"){",wn,".bindFramebuffer(",36160,",",ur,".framebuffer);"),pr&&Dr(cr,".drawBuffersWEBGL(",gn,"[",ur,".colorAttachments.length]);"),Dr("}else{",wn,".bindFramebuffer(",36160,",null);"),pr&&Dr(cr,".drawBuffersWEBGL(",ar,");"),Dr("}",pn,".cur=",ur,";"),rn||Dr("}")}function Ar(ur,Dr,on){var rn=ur.shared,gn=rn.gl,wn=ur.current,pn=ur.next,cr=rn.current,ar=rn.next,Fr=ur.cond(cr,".dirty");Bn.forEach(function(Jr){if(Jr=je(Jr),!(Jr in on.state)){var En,Hn;if(Jr in pn){En=pn[Jr],Hn=wn[Jr];var Jn=o($r[Jr].length,function(Zn){return Fr.def(En,"[",Zn,"]")});Fr(ur.cond(Jn.map(function(Zn,Un){return Zn+"!=="+Hn+"["+Un+"]"}).join("||")).then(gn,".",na[Jr],"(",Jn,");",Jn.map(function(Zn,Un){return Hn+"["+Un+"]="+Zn}).join(";"),";"))}else En=Fr.def(ar,".",Jr),Jn=ur.cond(En,"!==",cr,".",Jr),Fr(Jn),Jr in ha?Jn(ur.cond(En).then(gn,".enable(",ha[Jr],");").else(gn,".disable(",ha[Jr],");"),cr,".",Jr,"=",En,";"):Jn(gn,".",na[Jr],"(",En,");",cr,".",Jr,"=",En,";")}}),Object.keys(on.state).length===0&&Fr(cr,".dirty=false;"),Dr(Fr)}function nn(ur,Dr,on,rn){var gn=ur.shared,wn=ur.current,pn=gn.current,cr=gn.gl;le(Object.keys(on)).forEach(function(ar){var Fr=on[ar];if(!rn||rn(Fr)){var Jr=Fr.append(ur,Dr);if(ha[ar]){var En=ha[ar];se(Fr)?Jr?Dr(cr,".enable(",En,");"):Dr(cr,".disable(",En,");"):Dr(ur.cond(Jr).then(cr,".enable(",En,");").else(cr,".disable(",En,");")),Dr(pn,".",ar,"=",Jr,";")}else if(w(Jr)){var Hn=wn[ar];Dr(cr,".",na[ar],"(",Jr,");",Jr.map(function(Jn,Zn){return Hn+"["+Zn+"]="+Jn}).join(";"),";")}else Dr(cr,".",na[ar],"(",Jr,");",pn,".",ar,"=",Jr,";")}})}function fn(ur,Dr){ya&&(ur.instancing=Dr.def(ur.shared.extensions,".angle_instanced_arrays"))}function jr(ur,Dr,on,rn,gn){function wn(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}function pn(Un){Jn=Dr.def(),Un(Jn,"=",wn(),";"),typeof gn=="string"?Un(Jr,".count+=",gn,";"):Un(Jr,".count++;"),Se&&(rn?(Zn=Dr.def(),Un(Zn,"=",Hn,".getNumPendingQueries();")):Un(Hn,".beginQuery(",Jr,");"))}function cr(Un){Un(Jr,".cpuTime+=",wn(),"-",Jn,";"),Se&&(rn?Un(Hn,".pushScopeStats(",Zn,",",Hn,".getNumPendingQueries(),",Jr,");"):Un(Hn,".endQuery();"))}function ar(Un){var yn=Dr.def(En,".profile");Dr(En,".profile=",Un,";"),Dr.exit(En,".profile=",yn,";")}var Fr=ur.shared,Jr=ur.stats,En=Fr.current,Hn=Fr.timer;on=on.profile;var Jn,Zn;if(on){if(se(on)){on.enable?(pn(Dr),cr(Dr.exit),ar("true")):ar("false");return}on=on.append(ur,Dr),ar(on)}else on=Dr.def(En,".profile");Fr=ur.block(),pn(Fr),Dr("if(",on,"){",Fr,"}"),ur=ur.block(),cr(ur),Dr.exit("if(",on,"){",ur,"}")}function at(ur,Dr,on,rn,gn){function wn(ar){switch(ar){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}function pn(ar,Fr,Jr){function En(){Dr("if(!",Un,".buffer){",Jn,".enableVertexAttribArray(",Zn,");}");var ua=Jr.type,Ya;Ya=Jr.size?Dr.def(Jr.size,"||",Fr):Fr,Dr("if(",Un,".type!==",ua,"||",Un,".size!==",Ya,"||",Yn.map(function(Ca){return Un+"."+Ca+"!=="+Jr[Ca]}).join("||"),"){",Jn,".bindBuffer(",34962,",",yn,".buffer);",Jn,".vertexAttribPointer(",[Zn,Ya,ua,Jr.normalized,Jr.stride,Jr.offset],");",Un,".type=",ua,";",Un,".size=",Ya,";",Yn.map(function(Ca){return Un+"."+Ca+"="+Jr[Ca]+";"}).join(""),"}"),ya&&(ua=Jr.divisor,Dr("if(",Un,".divisor!==",ua,"){",ur.instancing,".vertexAttribDivisorANGLE(",[Zn,ua],");",Un,".divisor=",ua,";}"))}function Hn(){Dr("if(",Un,".buffer){",Jn,".disableVertexAttribArray(",Zn,");",Un,".buffer=null;","}if(",rt.map(function(ua,Ya){return Un+"."+ua+"!=="+Dn[Ya]}).join("||"),"){",Jn,".vertexAttrib4f(",Zn,",",Dn,");",rt.map(function(ua,Ya){return Un+"."+ua+"="+Dn[Ya]+";"}).join(""),"}")}var Jn=cr.gl,Zn=Dr.def(ar,".location"),Un=Dr.def(cr.attributes,"[",Zn,"]");ar=Jr.state;var yn=Jr.buffer,Dn=[Jr.x,Jr.y,Jr.z,Jr.w],Yn=["buffer","normalized","offset","stride"];ar===1?En():ar===2?Hn():(Dr("if(",ar,"===",1,"){"),En(),Dr("}else{"),Hn(),Dr("}"))}var cr=ur.shared;rn.forEach(function(ar){var Fr=ar.name,Jr=on.attributes[Fr],En;if(Jr){if(!gn(Jr))return;En=Jr.append(ur,Dr)}else{if(!gn(Ot))return;var Hn=ur.scopeAttrib(Fr);En={},Object.keys(new oa).forEach(function(Jn){En[Jn]=Dr.def(Hn,".",Jn)})}pn(ur.link(ar),wn(ar.info.type),En)})}function Ft(ur,Dr,on,rn,gn,wn){for(var pn=ur.shared,cr=pn.gl,ar={},Fr,Jr=0;Jr<rn.length;++Jr){var En=rn[Jr],Hn=En.name,Jn=En.info.type,Zn=En.info.size,Un=on.uniforms[Hn];if(1<Zn){if(!Un)continue;var yn=Hn.replace("[0]","");if(ar[yn])continue;ar[yn]=1}var En=ur.link(En)+".location",Dn;if(Un){if(!gn(Un))continue;if(se(Un)){if(Hn=Un.value,Jn===35678||Jn===35680)Jn=ur.link(Hn._texture||Hn.color[0]._texture),Dr(cr,".uniform1i(",En,",",Jn+".bind());"),Dr.exit(Jn,".unbind();");else if(Jn===35674||Jn===35675||Jn===35676)Zn=ur.global.def("new Float32Array(["+Array.prototype.slice.call(Hn)+"])"),Hn=2,Jn===35675?Hn=3:Jn===35676&&(Hn=4),Dr(cr,".uniformMatrix",Hn,"fv(",En,",false,",Zn,");");else{switch(Jn){case 5126:Fr="1f";break;case 35664:Fr="2f";break;case 35665:Fr="3f";break;case 35666:Fr="4f";break;case 35670:Fr="1i";break;case 5124:Fr="1i";break;case 35671:Fr="2i";break;case 35667:Fr="2i";break;case 35672:Fr="3i";break;case 35668:Fr="3i";break;case 35673:Fr="4i";break;case 35669:Fr="4i"}1<Zn?(Fr+="v",Hn=ur.global.def("["+Array.prototype.slice.call(Hn)+"]")):Hn=w(Hn)?Array.prototype.slice.call(Hn):Hn,Dr(cr,".uniform",Fr,"(",En,",",Hn,");")}continue}else Dn=Un.append(ur,Dr)}else{if(!gn(Ot))continue;Dn=Dr.def(pn.uniforms,"[",gt.id(Hn),"]")}switch(Jn===35678?Dr("if(",Dn,"&&",Dn,'._reglType==="framebuffer"){',Dn,"=",Dn,".color[0];","}"):Jn===35680&&Dr("if(",Dn,"&&",Dn,'._reglType==="framebufferCube"){',Dn,"=",Dn,".color[0];","}"),Hn=1,Jn){case 35678:case 35680:Jn=Dr.def(Dn,"._texture"),Dr(cr,".uniform1i(",En,",",Jn,".bind());"),Dr.exit(Jn,".unbind();");continue;case 5124:case 35670:Fr="1i";break;case 35667:case 35671:Fr="2i",Hn=2;break;case 35668:case 35672:Fr="3i",Hn=3;break;case 35669:case 35673:Fr="4i",Hn=4;break;case 5126:Fr="1f";break;case 35664:Fr="2f",Hn=2;break;case 35665:Fr="3f",Hn=3;break;case 35666:Fr="4f",Hn=4;break;case 35674:Fr="Matrix2fv";break;case 35675:Fr="Matrix3fv";break;case 35676:Fr="Matrix4fv"}if(Fr.indexOf("Matrix")===-1&&1<Zn&&(Fr+="v",Hn=1),Fr.charAt(0)==="M"){Dr(cr,".uniform",Fr,"(",En,",");var En=Math.pow(Jn-35674+2,2),Yn=ur.global.def("new Float32Array(",En,")");Array.isArray(Dn)?Dr("false,(",o(En,function(Ca){return Yn+"["+Ca+"]="+Dn[Ca]}),",",Yn,")"):Dr("false,(Array.isArray(",Dn,")||",Dn," instanceof Float32Array)?",Dn,":(",o(En,function(Ca){return Yn+"["+Ca+"]="+Dn+"["+Ca+"]"}),",",Yn,")"),Dr(");")}else{if(1<Hn){for(var Jn=[],ua=[],Zn=0;Zn<Hn;++Zn)Array.isArray(Dn)?ua.push(Dn[Zn]):ua.push(Dr.def(Dn+"["+Zn+"]")),wn&&Jn.push(Dr.def());wn&&Dr("if(!",ur.batchId,"||",Jn.map(function(Ya,Ca){return Ya+"!=="+ua[Ca]}).join("||"),"){",Jn.map(function(Ya,Ca){return Ya+"="+ua[Ca]+";"}).join("")),Dr(cr,".uniform",Fr,"(",En,",",ua.join(","),");")}else wn&&(Jn=Dr.def(),Dr("if(!",ur.batchId,"||",Jn,"!==",Dn,"){",Jn,"=",Dn,";")),Dr(cr,".uniform",Fr,"(",En,",",Dn,");");wn&&Dr("}")}}}function er(ur,Dr,on,rn){function gn(ua){var Ya=Jr[ua];return Ya?Ya.contextDep&&rn.contextDynamic||Ya.propDep?Ya.append(ur,on):Ya.append(ur,Dr):Dr.def(Fr,".",ua)}function wn(){function ua(){on(yn,".drawElementsInstancedANGLE(",[Hn,Zn,Dn,Jn+"<<(("+Dn+"-5121)>>1)",Un],");")}function Ya(){on(yn,".drawArraysInstancedANGLE(",[Hn,Jn,Zn,Un],");")}En&&En!=="null"?Yn?ua():(on("if(",En,"){"),ua(),on("}else{"),Ya(),on("}")):Ya()}function pn(){function ua(){on(ar+".drawElements("+[Hn,Zn,Dn,Jn+"<<(("+Dn+"-5121)>>1)"]+");")}function Ya(){on(ar+".drawArrays("+[Hn,Jn,Zn]+");")}En&&En!=="null"?Yn?ua():(on("if(",En,"){"),ua(),on("}else{"),Ya(),on("}")):Ya()}var cr=ur.shared,ar=cr.gl,Fr=cr.draw,Jr=rn.draw,En=function(){var ua=Jr.elements,Ya=Dr;return ua?((ua.contextDep&&rn.contextDynamic||ua.propDep)&&(Ya=on),ua=ua.append(ur,Ya),Jr.elementsActive&&Ya("if("+ua+")"+ar+".bindBuffer(34963,"+ua+".buffer.buffer);")):(ua=Ya.def(),Ya(ua,"=",Fr,".","elements",";","if(",ua,"){",ar,".bindBuffer(",34963,",",ua,".buffer.buffer);}","else if(",cr.vao,".currentVAO){",ua,"=",ur.shared.elements+".getElements("+cr.vao,".currentVAO.elements);",vn?"":"if("+ua+")"+ar+".bindBuffer(34963,"+ua+".buffer.buffer);","}")),ua}(),Hn=gn("primitive"),Jn=gn("offset"),Zn=function(){var ua=Jr.count,Ya=Dr;return ua?((ua.contextDep&&rn.contextDynamic||ua.propDep)&&(Ya=on),ua=ua.append(ur,Ya)):ua=Ya.def(Fr,".","count"),ua}();if(typeof Zn=="number"){if(Zn===0)return}else on("if(",Zn,"){"),on.exit("}");var Un,yn;ya&&(Un=gn("instances"),yn=ur.instancing);var Dn=En+".type",Yn=Jr.elements&&se(Jr.elements)&&!Jr.vaoActive;ya&&(typeof Un!="number"||0<=Un)?typeof Un=="string"?(on("if(",Un,">0){"),wn(),on("}else if(",Un,"<0){"),pn(),on("}")):wn():pn()}function hr(ur,Dr,on,rn,gn){return Dr=st(),gn=Dr.proc("body",gn),ya&&(Dr.instancing=gn.def(Dr.shared.extensions,".angle_instanced_arrays")),ur(Dr,gn,on,rn),Dr.compile().body}function Wr(ur,Dr,on,rn){fn(ur,Dr),on.useVAO?on.drawVAO?Dr(ur.shared.vao,".setVAO(",on.drawVAO.append(ur,Dr),");"):Dr(ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"):(Dr(ur.shared.vao,".setVAO(null);"),at(ur,Dr,on,rn.attributes,function(){return!0})),Ft(ur,Dr,on,rn.uniforms,function(){return!0},!1),er(ur,Dr,Dr,on)}function zr(ur,Dr){var on=ur.proc("draw",1);fn(ur,on),mn(ur,on,Dr.context),Gr(ur,on,Dr.framebuffer),Ar(ur,on,Dr),nn(ur,on,Dr.state),jr(ur,on,Dr,!1,!0);var rn=Dr.shader.progVar.append(ur,on);if(on(ur.shared.gl,".useProgram(",rn,".program);"),Dr.shader.program)Wr(ur,on,Dr,Dr.shader.program);else{on(ur.shared.vao,".setVAO(null);");var gn=ur.global.def("{}"),wn=on.def(rn,".id"),pn=on.def(gn,"[",wn,"]");on(ur.cond(pn).then(pn,".call(this,a0);").else(pn,"=",gn,"[",wn,"]=",ur.link(function(cr){return hr(Wr,ur,Dr,cr,1)}),"(",rn,");",pn,".call(this,a0);"))}0<Object.keys(Dr.state).length&&on(ur.shared.current,".dirty=true;"),ur.shared.vao&&on(ur.shared.vao,".setVAO(null);")}function Pr(ur,Dr,on,rn){function gn(){return!0}ur.batchId="a1",fn(ur,Dr),at(ur,Dr,on,rn.attributes,gn),Ft(ur,Dr,on,rn.uniforms,gn,!1),er(ur,Dr,Dr,on)}function br(ur,Dr,on,rn){function gn(En){return En.contextDep&&pn||En.propDep}function wn(En){return!gn(En)}fn(ur,Dr);var pn=on.contextDep,cr=Dr.def(),ar=Dr.def();ur.shared.props=ar,ur.batchId=cr;var Fr=ur.scope(),Jr=ur.scope();Dr(Fr.entry,"for(",cr,"=0;",cr,"<","a1",";++",cr,"){",ar,"=","a0","[",cr,"];",Jr,"}",Fr.exit),on.needsContext&&mn(ur,Jr,on.context),on.needsFramebuffer&&Gr(ur,Jr,on.framebuffer),nn(ur,Jr,on.state,gn),on.profile&&gn(on.profile)&&jr(ur,Jr,on,!1,!0),rn?(on.useVAO?on.drawVAO?gn(on.drawVAO)?Jr(ur.shared.vao,".setVAO(",on.drawVAO.append(ur,Jr),");"):Fr(ur.shared.vao,".setVAO(",on.drawVAO.append(ur,Fr),");"):Fr(ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"):(Fr(ur.shared.vao,".setVAO(null);"),at(ur,Fr,on,rn.attributes,wn),at(ur,Jr,on,rn.attributes,gn)),Ft(ur,Fr,on,rn.uniforms,wn,!1),Ft(ur,Jr,on,rn.uniforms,gn,!0),er(ur,Fr,Jr,on)):(Dr=ur.global.def("{}"),rn=on.shader.progVar.append(ur,Jr),ar=Jr.def(rn,".id"),Fr=Jr.def(Dr,"[",ar,"]"),Jr(ur.shared.gl,".useProgram(",rn,".program);","if(!",Fr,"){",Fr,"=",Dr,"[",ar,"]=",ur.link(function(En){return hr(Pr,ur,on,En,2)}),"(",rn,");}",Fr,".call(this,a0[",cr,"],",cr,");"))}function Xr(ur,Dr){function on(Fr){return Fr.contextDep&&gn||Fr.propDep}var rn=ur.proc("batch",2);ur.batchId="0",fn(ur,rn);var gn=!1,wn=!0;Object.keys(Dr.context).forEach(function(Fr){gn=gn||Dr.context[Fr].propDep}),gn||(mn(ur,rn,Dr.context),wn=!1);var pn=Dr.framebuffer,cr=!1;if(pn?(pn.propDep?gn=cr=!0:pn.contextDep&&gn&&(cr=!0),cr||Gr(ur,rn,pn)):Gr(ur,rn,null),Dr.state.viewport&&Dr.state.viewport.propDep&&(gn=!0),Ar(ur,rn,Dr),nn(ur,rn,Dr.state,function(Fr){return!on(Fr)}),Dr.profile&&on(Dr.profile)||jr(ur,rn,Dr,!1,"a1"),Dr.contextDep=gn,Dr.needsContext=wn,Dr.needsFramebuffer=cr,wn=Dr.shader.progVar,wn.contextDep&&gn||wn.propDep)br(ur,rn,Dr,null);else if(wn=wn.append(ur,rn),rn(ur.shared.gl,".useProgram(",wn,".program);"),Dr.shader.program)br(ur,rn,Dr,Dr.shader.program);else{rn(ur.shared.vao,".setVAO(null);");var pn=ur.global.def("{}"),cr=rn.def(wn,".id"),ar=rn.def(pn,"[",cr,"]");rn(ur.cond(ar).then(ar,".call(this,a0,a1);").else(ar,"=",pn,"[",cr,"]=",ur.link(function(En){return hr(br,ur,Dr,En,2)}),"(",wn,");",ar,".call(this,a0,a1);"))}0<Object.keys(Dr.state).length&&rn(ur.shared.current,".dirty=true;"),ur.shared.vao&&rn(ur.shared.vao,".setVAO(null);")}function Fn(ur,Dr){function on(pn){var cr=Dr.shader[pn];cr&&rn.set(gn.shader,"."+pn,cr.append(ur,rn))}var rn=ur.proc("scope",3);ur.batchId="a2";var gn=ur.shared,wn=gn.current;mn(ur,rn,Dr.context),Dr.framebuffer&&Dr.framebuffer.append(ur,rn),le(Object.keys(Dr.state)).forEach(function(pn){var cr=Dr.state[pn].append(ur,rn);w(cr)?cr.forEach(function(ar,Fr){rn.set(ur.next[pn],"["+Fr+"]",ar)}):rn.set(gn.next,"."+pn,cr)}),jr(ur,rn,Dr,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(pn){var cr=Dr.draw[pn];cr&&rn.set(gn.draw,"."+pn,""+cr.append(ur,rn))}),Object.keys(Dr.uniforms).forEach(function(pn){var cr=Dr.uniforms[pn].append(ur,rn);Array.isArray(cr)&&(cr="["+cr.join()+"]"),rn.set(gn.uniforms,"["+gt.id(pn)+"]",cr)}),Object.keys(Dr.attributes).forEach(function(pn){var cr=Dr.attributes[pn].append(ur,rn),ar=ur.scopeAttrib(pn);Object.keys(new oa).forEach(function(Fr){rn.set(ar,"."+Fr,cr[Fr])})}),Dr.scopeVAO&&rn.set(gn.vao,".targetVAO",Dr.scopeVAO.append(ur,rn)),on("vert"),on("frag"),0<Object.keys(Dr.state).length&&(rn(wn,".dirty=true;"),rn.exit(wn,".dirty=true;")),rn("a1(",ur.shared.context,",a0,",ur.batchId,");")}function kn(ur){if(typeof ur=="object"&&!w(ur)){for(var Dr=Object.keys(ur),on=0;on<Dr.length;++on)if(ae.isDynamic(ur[Dr[on]]))return!0;return!1}}function ra(ur,Dr,on){function rn(En,Hn){pn.forEach(function(Jn){var Zn=gn[Jn];ae.isDynamic(Zn)&&(Zn=En.invoke(Hn,Zn),Hn(Jr,".",Jn,"=",Zn,";"))})}var gn=Dr.static[on];if(gn&&kn(gn)){var wn=ur.global,pn=Object.keys(gn),cr=!1,ar=!1,Fr=!1,Jr=ur.global.def("{}");pn.forEach(function(En){var Hn=gn[En];if(ae.isDynamic(Hn))typeof Hn=="function"&&(Hn=gn[En]=ae.unbox(Hn)),En=Y(Hn,null),cr=cr||En.thisDep,Fr=Fr||En.propDep,ar=ar||En.contextDep;else{switch(wn(Jr,".",En,"="),typeof Hn){case"number":wn(Hn);break;case"string":wn('"',Hn,'"');break;case"object":Array.isArray(Hn)&&wn("[",Hn.join(),"]");break;default:wn(ur.link(Hn))}wn(";")}}),Dr.dynamic[on]=new ae.DynamicVariable(4,{thisDep:cr,contextDep:ar,propDep:Fr,ref:Jr,append:rn}),delete Dr.static[on]}}var oa=tr.Record,Sa={add:32774,subtract:32778,"reverse subtract":32779};Et.ext_blend_minmax&&(Sa.min=32775,Sa.max=32776);var ya=Et.angle_instanced_arrays,pr=Et.webgl_draw_buffers,vn=Et.oes_vertex_array_object,$r={dirty:!0,profile:De.profile},On={},Bn=[],ha={},na={};$e("dither",3024),$e("blend.enable",3042),ot("blend.color","blendColor",[0,0,0,0]),ot("blend.equation","blendEquationSeparate",[32774,32774]),ot("blend.func","blendFuncSeparate",[1,0,1,0]),$e("depth.enable",2929,!0),ot("depth.func","depthFunc",513),ot("depth.range","depthRange",[0,1]),ot("depth.mask","depthMask",!0),ot("colorMask","colorMask",[!0,!0,!0,!0]),$e("cull.enable",2884),ot("cull.face","cullFace",1029),ot("frontFace","frontFace",2305),ot("lineWidth","lineWidth",1),$e("polygonOffset.enable",32823),ot("polygonOffset.offset","polygonOffset",[0,0]),$e("sample.alpha",32926),$e("sample.enable",32928),ot("sample.coverage","sampleCoverage",[1,!1]),$e("stencil.enable",2960),ot("stencil.mask","stencilMask",-1),ot("stencil.func","stencilFunc",[519,0,-1]),ot("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),ot("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),$e("scissor.enable",3089),ot("scissor.box","scissor",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]),ot("viewport","viewport",[0,0,Je.drawingBufferWidth,Je.drawingBufferHeight]);var Vn={gl:Je,context:we,strings:gt,next:On,current:$r,draw:et,elements:or,buffer:vr,shader:Or,attributes:tr.state,vao:tr,uniforms:kr,framebuffer:Lr,extensions:Et,timer:Se,isBufferArgs:J},fa={primTypes:Re,compareFuncs:St,blendFuncs:Pt,blendEquations:Sa,stencilOps:Nt,glTypes:Ae,orientationType:jt};pr&&(fa.backBuffer=[1029],fa.drawBuffer=o(rr.maxDrawbuffers,function(ur){return ur===0?[0]:o(ur,function(Dr){return 36064+Dr})}));var ga=0;return{next:On,current:$r,procs:function(){var ur=st(),Dr=ur.proc("poll"),on=ur.proc("refresh"),rn=ur.block();Dr(rn),on(rn);var gn=ur.shared,wn=gn.gl,pn=gn.next,cr=gn.current;rn(cr,".dirty=false;"),Gr(ur,Dr),Gr(ur,on,null,!0);var ar;ya&&(ar=ur.link(ya)),Et.oes_vertex_array_object&&on(ur.link(Et.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Fr=0;Fr<rr.maxAttributes;++Fr){var Jr=on.def(gn.attributes,"[",Fr,"]"),En=ur.cond(Jr,".buffer");En.then(wn,".enableVertexAttribArray(",Fr,");",wn,".bindBuffer(",34962,",",Jr,".buffer.buffer);",wn,".vertexAttribPointer(",Fr,",",Jr,".size,",Jr,".type,",Jr,".normalized,",Jr,".stride,",Jr,".offset);").else(wn,".disableVertexAttribArray(",Fr,");",wn,".vertexAttrib4f(",Fr,",",Jr,".x,",Jr,".y,",Jr,".z,",Jr,".w);",Jr,".buffer=null;"),on(En),ya&&on(ar,".vertexAttribDivisorANGLE(",Fr,",",Jr,".divisor);")}return on(ur.shared.vao,".currentVAO=null;",ur.shared.vao,".setVAO(",ur.shared.vao,".targetVAO);"),Object.keys(ha).forEach(function(Hn){var Jn=ha[Hn],Zn=rn.def(pn,".",Hn),Un=ur.block();Un("if(",Zn,"){",wn,".enable(",Jn,")}else{",wn,".disable(",Jn,")}",cr,".",Hn,"=",Zn,";"),on(Un),Dr("if(",Zn,"!==",cr,".",Hn,"){",Un,"}")}),Object.keys(na).forEach(function(Hn){var Jn=na[Hn],Zn=$r[Hn],Un,yn,Dn=ur.block();Dn(wn,".",Jn,"("),w(Zn)?(Jn=Zn.length,Un=ur.global.def(pn,".",Hn),yn=ur.global.def(cr,".",Hn),Dn(o(Jn,function(Yn){return Un+"["+Yn+"]"}),");",o(Jn,function(Yn){return yn+"["+Yn+"]="+Un+"["+Yn+"];"}).join("")),Dr("if(",o(Jn,function(Yn){return Un+"["+Yn+"]!=="+yn+"["+Yn+"]"}).join("||"),"){",Dn,"}")):(Un=rn.def(pn,".",Hn),yn=rn.def(cr,".",Hn),Dn(Un,");",cr,".",Hn,"=",Un,";"),Dr("if(",Un,"!==",yn,"){",Dn,"}")),on(Dn)}),ur.compile()}(),compile:function(ur,Dr,on,rn,gn){var wn=st();wn.stats=wn.link(gn),Object.keys(Dr.static).forEach(function(cr){ra(wn,Dr,cr)}),ut.forEach(function(cr){ra(wn,ur,cr)});var pn=gr(ur,Dr,on,rn,wn);return zr(wn,pn),Fn(wn,pn),Xr(wn,pn),K(wn.compile(),{destroy:function(){pn.shader.program.destroy()}})}}}function te(Je,gt){for(var Et=0;Et<Je.length;++Et)if(Je[Et]===gt)return Et;return-1}var K=function(Je,gt){for(var Et=Object.keys(gt),rr=0;rr<Et.length;++rr)Je[Et[rr]]=gt[Et[rr]];return Je},$=0,ae={DynamicVariable:u,define:function(Je,gt){return new u(Je,m(gt+""))},isDynamic:function(Je){return typeof Je=="function"&&!Je._reglType||Je instanceof u},unbox:x,accessor:m},ie={next:typeof requestAnimationFrame=="function"?function(Je){return requestAnimationFrame(Je)}:function(Je){return setTimeout(Je,16)},cancel:typeof cancelAnimationFrame=="function"?function(Je){return cancelAnimationFrame(Je)}:clearTimeout},oe=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date},ue=h();ue.zero=h();var ye=function(Je,gt){var Et=1;gt.ext_texture_filter_anisotropic&&(Et=Je.getParameter(34047));var rr=1,vr=1;gt.webgl_draw_buffers&&(rr=Je.getParameter(34852),vr=Je.getParameter(36063));var or=!!gt.oes_texture_float;if(or){or=Je.createTexture(),Je.bindTexture(3553,or),Je.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var dr=Je.createFramebuffer();if(Je.bindFramebuffer(36160,dr),Je.framebufferTexture2D(36160,36064,3553,or,0),Je.bindTexture(3553,null),Je.checkFramebufferStatus(36160)!==36053)or=!1;else{Je.viewport(0,0,1,1),Je.clearColor(1,0,0,1),Je.clear(16384);var Lr=ue.allocType(5126,4);Je.readPixels(0,0,1,1,6408,5126,Lr),Je.getError()?or=!1:(Je.deleteFramebuffer(dr),Je.deleteTexture(or),or=Lr[0]===1),ue.freeType(Lr)}}return Lr=!0,typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(Lr=Je.createTexture(),dr=ue.allocType(5121,36),Je.activeTexture(33984),Je.bindTexture(34067,Lr),Je.texImage2D(34069,0,6408,3,3,0,6408,5121,dr),ue.freeType(dr),Je.bindTexture(34067,null),Je.deleteTexture(Lr),Lr=!Je.getError()),{colorBits:[Je.getParameter(3410),Je.getParameter(3411),Je.getParameter(3412),Je.getParameter(3413)],depthBits:Je.getParameter(3414),stencilBits:Je.getParameter(3415),subpixelBits:Je.getParameter(3408),extensions:Object.keys(gt).filter(function(kr){return!!gt[kr]}),maxAnisotropic:Et,maxDrawbuffers:rr,maxColorAttachments:vr,pointSizeDims:Je.getParameter(33901),lineWidthDims:Je.getParameter(33902),maxViewportDims:Je.getParameter(3386),maxCombinedTextureUnits:Je.getParameter(35661),maxCubeMapSize:Je.getParameter(34076),maxRenderbufferSize:Je.getParameter(34024),maxTextureUnits:Je.getParameter(34930),maxTextureSize:Je.getParameter(3379),maxAttributes:Je.getParameter(34921),maxVertexUniforms:Je.getParameter(36347),maxVertexTextureUnits:Je.getParameter(35660),maxVaryingVectors:Je.getParameter(36348),maxFragmentUniforms:Je.getParameter(36349),glsl:Je.getParameter(35724),renderer:Je.getParameter(7937),vendor:Je.getParameter(7936),version:Je.getParameter(7938),readFloat:or,npotTextureCube:Lr}},ce=function(Je){return Je instanceof Uint8Array||Je instanceof Uint16Array||Je instanceof Uint32Array||Je instanceof Int8Array||Je instanceof Int16Array||Je instanceof Int32Array||Je instanceof Float32Array||Je instanceof Float64Array||Je instanceof Uint8ClampedArray},me=function(Je){return Object.keys(Je).map(function(gt){return Je[gt]})},xe={shape:function(Je){for(var gt=[];Je.length;Je=Je[0])gt.push(Je.length);return gt},flatten:function(Je,gt,Et,rr){var vr=1;if(gt.length)for(var or=0;or<gt.length;++or)vr*=gt[or];else vr=0;switch(Et=rr||ue.allocType(Et,vr),gt.length){case 0:break;case 1:for(rr=gt[0],gt=0;gt<rr;++gt)Et[gt]=Je[gt];break;case 2:for(rr=gt[0],gt=gt[1],or=vr=0;or<rr;++or)for(var dr=Je[or],Lr=0;Lr<gt;++Lr)Et[vr++]=dr[Lr];break;case 3:p(Je,gt[0],gt[1],gt[2],Et,0);break;default:y(Je,gt,0,Et,0)}return Et}},ke={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Ae={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},Oe={dynamic:35048,stream:35040,static:35044},He=xe.flatten,Ge=xe.shape,_e=[];_e[5120]=1,_e[5122]=2,_e[5124]=4,_e[5121]=1,_e[5123]=2,_e[5125]=4,_e[5126]=4;var Re={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},We=new Float32Array(1),qe=new Uint32Array(We.buffer),Ue=[9984,9986,9985,9987],Ie=[0,6409,6410,6407,6408],Ve={};Ve[6409]=Ve[6406]=Ve[6402]=1,Ve[34041]=Ve[6410]=2,Ve[6407]=Ve[35904]=3,Ve[6408]=Ve[35906]=4;var dt=v("HTMLCanvasElement"),Rt=v("OffscreenCanvas"),Gt=v("CanvasRenderingContext2D"),kt=v("ImageBitmap"),zt=v("HTMLImageElement"),Bt=v("HTMLVideoElement"),Lt=Object.keys(ke).concat([dt,Rt,Gt,kt,zt,Bt]),Mt=[];Mt[5121]=1,Mt[5126]=4,Mt[36193]=2,Mt[5123]=2,Mt[5125]=4;var it=[];it[32854]=2,it[32855]=2,it[36194]=2,it[34041]=4,it[33776]=.5,it[33777]=.5,it[33778]=1,it[33779]=1,it[35986]=.5,it[35987]=1,it[34798]=1,it[35840]=.5,it[35841]=.25,it[35842]=.5,it[35843]=.25,it[36196]=.5;var ht=[];ht[32854]=2,ht[32855]=2,ht[36194]=2,ht[33189]=2,ht[36168]=1,ht[34041]=4,ht[35907]=4,ht[34836]=16,ht[34842]=8,ht[34843]=6;var Qe=function(Je,gt,Et,rr,vr){function or(et){this.id=tr++,this.refCount=1,this.renderbuffer=et,this.format=32854,this.height=this.width=0,vr.profile&&(this.stats={size:0})}function dr(et){var we=et.renderbuffer;Je.bindRenderbuffer(36161,null),Je.deleteRenderbuffer(we),et.renderbuffer=null,et.refCount=0,delete Or[et.id],rr.renderbufferCount--}var Lr={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};gt.ext_srgb&&(Lr.srgba=35907),gt.ext_color_buffer_half_float&&(Lr.rgba16f=34842,Lr.rgb16f=34843),gt.webgl_color_buffer_float&&(Lr.rgba32f=34836);var kr=[];Object.keys(Lr).forEach(function(et){kr[Lr[et]]=et});var tr=0,Or={};return or.prototype.decRef=function(){0>=--this.refCount&&dr(this)},vr.profile&&(rr.getTotalRenderbufferSize=function(){var et=0;return Object.keys(Or).forEach(function(we){et+=Or[we].stats.size}),et}),{create:function(et,we){function Se(je,$e){var ot=0,st=0,pt=32854;if(typeof je=="object"&&je?("shape"in je?(st=je.shape,ot=st[0]|0,st=st[1]|0):("radius"in je&&(ot=st=je.radius|0),"width"in je&&(ot=je.width|0),"height"in je&&(st=je.height|0)),"format"in je&&(pt=Lr[je.format])):typeof je=="number"?(ot=je|0,st=typeof $e=="number"?$e|0:ot):je||(ot=st=1),ot!==De.width||st!==De.height||pt!==De.format)return Se.width=De.width=ot,Se.height=De.height=st,De.format=pt,Je.bindRenderbuffer(36161,De.renderbuffer),Je.renderbufferStorage(36161,pt,ot,st),vr.profile&&(De.stats.size=ht[De.format]*De.width*De.height),Se.format=kr[De.format],Se}var De=new or(Je.createRenderbuffer());return Or[De.id]=De,rr.renderbufferCount++,Se(et,we),Se.resize=function(je,$e){var ot=je|0,st=$e|0||ot;return ot===De.width&&st===De.height||(Se.width=De.width=ot,Se.height=De.height=st,Je.bindRenderbuffer(36161,De.renderbuffer),Je.renderbufferStorage(36161,De.format,ot,st),vr.profile&&(De.stats.size=ht[De.format]*De.width*De.height)),Se},Se._reglType="renderbuffer",Se._renderbuffer=De,vr.profile&&(Se.stats=De.stats),Se.destroy=function(){De.decRef()},Se},clear:function(){me(Or).forEach(dr)},restore:function(){me(Or).forEach(function(et){et.renderbuffer=Je.createRenderbuffer(),Je.bindRenderbuffer(36161,et.renderbuffer),Je.renderbufferStorage(36161,et.format,et.width,et.height)}),Je.bindRenderbuffer(36161,null)}}},Ce=[];Ce[6408]=4,Ce[6407]=3;var Xe=[];Xe[5121]=1,Xe[5126]=4,Xe[36193]=2;var rt=["x","y","z","w"],ut="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Pt={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},St={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Nt={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},jt={cw:2304,ccw:2305},Ot=new fe(!1,!1,!1,function(){}),Kt=function(Je,gt){function Et(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function rr(Or,et,we){var Se=dr.pop()||new Et;Se.startQueryIndex=Or,Se.endQueryIndex=et,Se.sum=0,Se.stats=we,Lr.push(Se)}if(!gt.ext_disjoint_timer_query)return null;var vr=[],or=[],dr=[],Lr=[],kr=[],tr=[];return{beginQuery:function(Or){var et=vr.pop()||gt.ext_disjoint_timer_query.createQueryEXT();gt.ext_disjoint_timer_query.beginQueryEXT(35007,et),or.push(et),rr(or.length-1,or.length,Or)},endQuery:function(){gt.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:rr,update:function(){var Or,et;if(Or=or.length,Or!==0){tr.length=Math.max(tr.length,Or+1),kr.length=Math.max(kr.length,Or+1),kr[0]=0;var we=tr[0]=0;for(et=Or=0;et<or.length;++et){var Se=or[et];gt.ext_disjoint_timer_query.getQueryObjectEXT(Se,34919)?(we+=gt.ext_disjoint_timer_query.getQueryObjectEXT(Se,34918),vr.push(Se)):or[Or++]=Se,kr[et+1]=we,tr[et+1]=Or}for(or.length=Or,et=Or=0;et<Lr.length;++et){var we=Lr[et],De=we.startQueryIndex,Se=we.endQueryIndex;we.sum+=kr[Se]-kr[De],De=tr[De],Se=tr[Se],Se===De?(we.stats.gpuTime+=we.sum/1e6,dr.push(we)):(we.startQueryIndex=De,we.endQueryIndex=Se,Lr[Or++]=we)}Lr.length=Or}},getNumPendingQueries:function(){return or.length},clear:function(){vr.push.apply(vr,or);for(var Or=0;Or<vr.length;Or++)gt.ext_disjoint_timer_query.deleteQueryEXT(vr[Or]);or.length=0,vr.length=0},restore:function(){or.length=0,vr.length=0}}};return function(Je){function gt(){if(jr.length===0)pt&&pt.update(),hr=null;else{hr=ie.next(gt),Or();for(var zr=jr.length-1;0<=zr;--zr){var Pr=jr[zr];Pr&&Pr(xr,null,0)}Se.flush(),pt&&pt.update()}}function Et(){!hr&&0<jr.length&&(hr=ie.next(gt))}function rr(){hr&&(ie.cancel(gt),hr=null)}function vr(zr){zr.preventDefault(),rr(),at.forEach(function(Pr){Pr()})}function or(zr){Se.getError(),je.restore(),wr.restore(),mr.restore(),gr.restore(),mn.restore(),Gr.restore(),tn.restore(),pt&&pt.restore(),Ar.procs.refresh(),Et(),Ft.forEach(function(Pr){Pr()})}function dr(zr){function Pr($r,On){var Bn={},ha={};return Object.keys($r).forEach(function(na){var Vn=$r[na];if(ae.isDynamic(Vn))ha[na]=ae.unbox(Vn,na);else{if(On&&Array.isArray(Vn)){for(var fa=0;fa<Vn.length;++fa)if(ae.isDynamic(Vn[fa])){ha[na]=ae.unbox(Vn,na);return}}Bn[na]=Vn}}),{dynamic:ha,static:Bn}}function br($r){for(;vn.length<$r;)vn.push(null);return vn}var Xr=Pr(zr.context||{},!0),Fn=Pr(zr.uniforms||{},!0),kn=Pr(zr.attributes||{},!1);zr=Pr(function($r){function On(ha){if(ha in Bn){var na=Bn[ha];delete Bn[ha],Object.keys(na).forEach(function(Vn){Bn[ha+"."+Vn]=na[Vn]})}}var Bn=K({},$r);return delete Bn.uniforms,delete Bn.attributes,delete Bn.context,delete Bn.vao,"stencil"in Bn&&Bn.stencil.op&&(Bn.stencil.opBack=Bn.stencil.opFront=Bn.stencil.op,delete Bn.stencil.op),On("blend"),On("depth"),On("cull"),On("stencil"),On("polygonOffset"),On("scissor"),On("sample"),"vao"in $r&&(Bn.vao=$r.vao),Bn}(zr),!1);var ra={gpuTime:0,cpuTime:0,count:0},oa=Ar.compile(zr,kn,Fn,Xr,ra),Sa=oa.draw,ya=oa.batch,pr=oa.scope,vn=[];return K(function($r,On){var Bn;if(typeof $r=="function")return pr.call(this,null,$r,0);if(typeof On=="function")if(typeof $r=="number")for(Bn=0;Bn<$r;++Bn)pr.call(this,null,On,Bn);else if(Array.isArray($r))for(Bn=0;Bn<$r.length;++Bn)pr.call(this,$r[Bn],On,Bn);else return pr.call(this,$r,On,0);else if(typeof $r=="number"){if(0<$r)return ya.call(this,br($r|0),$r|0)}else if(Array.isArray($r)){if($r.length)return ya.call(this,$r,$r.length)}else return Sa.call(this,$r)},{stats:ra,destroy:function(){oa.destroy()}})}function Lr(zr,Pr){var br=0;Ar.procs.poll();var Xr=Pr.color;Xr&&(Se.clearColor(+Xr[0]||0,+Xr[1]||0,+Xr[2]||0,+Xr[3]||0),br|=16384),"depth"in Pr&&(Se.clearDepth(+Pr.depth),br|=256),"stencil"in Pr&&(Se.clearStencil(Pr.stencil|0),br|=1024),Se.clear(br)}function kr(zr){return jr.push(zr),Et(),{cancel:function(){function Pr(){var Xr=te(jr,Pr);jr[Xr]=jr[jr.length-1],--jr.length,0>=jr.length&&rr()}var br=te(jr,zr);jr[br]=Pr}}}function tr(){var zr=nn.viewport,Pr=nn.scissor_box;zr[0]=zr[1]=Pr[0]=Pr[1]=0,xr.viewportWidth=xr.framebufferWidth=xr.drawingBufferWidth=zr[2]=Pr[2]=Se.drawingBufferWidth,xr.viewportHeight=xr.framebufferHeight=xr.drawingBufferHeight=zr[3]=Pr[3]=Se.drawingBufferHeight}function Or(){xr.tick+=1,xr.time=we(),tr(),Ar.procs.poll()}function et(){gr.refresh(),tr(),Ar.procs.refresh(),pt&&pt.update()}function we(){return(oe()-wt)/1e3}if(Je=f(Je),!Je)return null;var Se=Je.gl,De=Se.getContextAttributes();Se.isContextLost();var je=l(Se,Je);if(!je)return null;var $e=t(),ot={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},st=je.extensions,pt=Kt(Se,st),wt=oe(),Wt=Se.drawingBufferWidth,yr=Se.drawingBufferHeight,xr={tick:0,time:0,viewportWidth:Wt,viewportHeight:yr,framebufferWidth:Wt,framebufferHeight:yr,drawingBufferWidth:Wt,drawingBufferHeight:yr,pixelRatio:Je.pixelRatio},Wt={elements:null,primitive:4,count:-1,offset:0,instances:-1},Tr=ye(Se,st),mr=M(Se,ot,Je,function(zr){return tn.destroyBuffer(zr)}),Rr=_(Se,st,mr,ot),tn=B(Se,st,Tr,ot,mr,Rr,Wt),wr=j(Se,$e,ot,Je),gr=I(Se,st,Tr,function(){Ar.procs.poll()},xr,ot,Je),mn=Qe(Se,st,Tr,ot,Je),Gr=D(Se,st,Tr,gr,mn,ot),Ar=ne(Se,$e,st,Tr,mr,Rr,gr,Gr,{},tn,wr,Wt,xr,pt,Je),$e=Z(Se,Gr,Ar.procs.poll,xr),nn=Ar.next,fn=Se.canvas,jr=[],at=[],Ft=[],er=[Je.onDestroy],hr=null;fn&&(fn.addEventListener("webglcontextlost",vr,!1),fn.addEventListener("webglcontextrestored",or,!1));var Wr=Gr.setFBO=dr({framebuffer:ae.define.call(null,1,"framebuffer")});return et(),De=K(dr,{clear:function(zr){if("framebuffer"in zr)if(zr.framebuffer&&zr.framebuffer_reglType==="framebufferCube")for(var Pr=0;6>Pr;++Pr)Wr(K({framebuffer:zr.framebuffer.faces[Pr]},zr),Lr);else Wr(zr,Lr);else Lr(null,zr)},prop:ae.define.bind(null,1),context:ae.define.bind(null,2),this:ae.define.bind(null,3),draw:dr({}),buffer:function(zr){return mr.create(zr,34962,!1,!1)},elements:function(zr){return Rr.create(zr,!1)},texture:gr.create2D,cube:gr.createCube,renderbuffer:mn.create,framebuffer:Gr.create,framebufferCube:Gr.createCube,vao:tn.createVAO,attributes:De,frame:kr,on:function(zr,Pr){var br;switch(zr){case"frame":return kr(Pr);case"lost":br=at;break;case"restore":br=Ft;break;case"destroy":br=er}return br.push(Pr),{cancel:function(){for(var Xr=0;Xr<br.length;++Xr)if(br[Xr]===Pr){br[Xr]=br[br.length-1],br.pop();break}}}},limits:Tr,hasExtension:function(zr){return 0<=Tr.extensions.indexOf(zr.toLowerCase())},read:$e,destroy:function(){jr.length=0,rr(),fn&&(fn.removeEventListener("webglcontextlost",vr),fn.removeEventListener("webglcontextrestored",or)),wr.clear(),Gr.clear(),mn.clear(),tn.clear(),gr.clear(),Rr.clear(),mr.clear(),pt&&pt.clear(),er.forEach(function(zr){zr()})},_gl:Se,_refresh:et,poll:function(){Or(),pt&&pt.update()},now:we,stats:ot}),Je.onDone(null,De),De}})},{}],284:[function(e,z,N){var u=e("buffer"),s=u.Buffer;function m(t,i){for(var a in t)i[a]=t[a]}s.from&&s.alloc&&s.allocUnsafe&&s.allocUnsafeSlow?z.exports=u:(m(u,N),N.Buffer=x);function x(t,i,a){return s(t,i,a)}x.prototype=Object.create(s.prototype),m(s,x),x.from=function(t,i,a){if(typeof t=="number")throw new TypeError("Argument must not be a number");return s(t,i,a)},x.alloc=function(t,i,a){if(typeof t!="number")throw new TypeError("Argument must be a number");var r=s(t);return i!==void 0?typeof a=="string"?r.fill(i,a):r.fill(i):r.fill(0),r},x.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return s(t)},x.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(t)}},{buffer:85}],285:[function(e,z,N){z.exports=m;var u=e("events").EventEmitter,s=e("inherits");s(m,u),m.Readable=e("readable-stream/lib/_stream_readable.js"),m.Writable=e("readable-stream/lib/_stream_writable.js"),m.Duplex=e("readable-stream/lib/_stream_duplex.js"),m.Transform=e("readable-stream/lib/_stream_transform.js"),m.PassThrough=e("readable-stream/lib/_stream_passthrough.js"),m.finished=e("readable-stream/lib/internal/streams/end-of-stream.js"),m.pipeline=e("readable-stream/lib/internal/streams/pipeline.js"),m.Stream=m;function m(){u.call(this)}m.prototype.pipe=function(x,t){var i=this;function a(h){x.writable&&x.write(h)===!1&&i.pause&&i.pause()}i.on("data",a);function r(){i.readable&&i.resume&&i.resume()}x.on("drain",r),!x._isStdio&&(!t||t.end!==!1)&&(i.on("end",f),i.on("close",l));var n=!1;function f(){n||(n=!0,x.end())}function l(){n||(n=!0,typeof x.destroy=="function"&&x.destroy())}function o(h){if(c(),u.listenerCount(this,"error")===0)throw h}i.on("error",o),x.on("error",o);function c(){i.removeListener("data",a),x.removeListener("drain",r),i.removeListener("end",f),i.removeListener("close",l),i.removeListener("error",o),x.removeListener("error",o),i.removeListener("end",c),i.removeListener("close",c),x.removeListener("close",c)}return i.on("end",c),i.on("close",c),x.on("close",c),x.emit("pipe",i),x}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(e,z,N){function u(r,n){r.prototype=Object.create(n.prototype),r.prototype.constructor=r,r.__proto__=n}var s={};function m(r,n,f){f||(f=Error);function l(c,h,d){return typeof n=="string"?n:n(c,h,d)}var o=function(c){u(h,c);function h(d,p,y){return c.call(this,l(d,p,y))||this}return h}(f);o.prototype.name=f.name,o.prototype.code=r,s[r]=o}function x(r,n){if(Array.isArray(r)){var f=r.length;return r=r.map(function(l){return String(l)}),f>2?"one of ".concat(n," ").concat(r.slice(0,f-1).join(", "),", or ")+r[f-1]:f===2?"one of ".concat(n," ").concat(r[0]," or ").concat(r[1]):"of ".concat(n," ").concat(r[0])}else return"of ".concat(n," ").concat(String(r))}function t(r,n,f){return r.substr(!f||f<0?0:+f,n.length)===n}function i(r,n,f){return(f===void 0||f>r.length)&&(f=r.length),r.substring(f-n.length,f)===n}function a(r,n,f){return typeof f!="number"&&(f=0),f+n.length>r.length?!1:r.indexOf(n,f)!==-1}m("ERR_INVALID_OPT_VALUE",function(r,n){return'The value "'+n+'" is invalid for option "'+r+'"'},TypeError),m("ERR_INVALID_ARG_TYPE",function(r,n,f){var l;typeof n=="string"&&t(n,"not ")?(l="must not be",n=n.replace(/^not /,"")):l="must be";var o;if(i(r," argument"))o="The ".concat(r," ").concat(l," ").concat(x(n,"type"));else{var c=a(r,".")?"property":"argument";o='The "'.concat(r,'" ').concat(c," ").concat(l," ").concat(x(n,"type"))}return o+=". Received type ".concat(typeof f),o},TypeError),m("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),m("ERR_METHOD_NOT_IMPLEMENTED",function(r){return"The "+r+" method is not implemented"}),m("ERR_STREAM_PREMATURE_CLOSE","Premature close"),m("ERR_STREAM_DESTROYED",function(r){return"Cannot call "+r+" after a stream was destroyed"}),m("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),m("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),m("ERR_STREAM_WRITE_AFTER_END","write after end"),m("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),m("ERR_UNKNOWN_ENCODING",function(r){return"Unknown encoding: "+r},TypeError),m("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),z.exports.codes=s},{}],287:[function(e,z,N){(function(u){(function(){var s=Object.keys||function(l){var o=[];for(var c in l)o.push(c);return o};z.exports=r;var m=e("./_stream_readable"),x=e("./_stream_writable");e("inherits")(r,m);for(var t=s(x.prototype),i=0;i<t.length;i++){var a=t[i];r.prototype[a]||(r.prototype[a]=x.prototype[a])}function r(l){if(!(this instanceof r))return new r(l);m.call(this,l),x.call(this,l),this.allowHalfOpen=!0,l&&(l.readable===!1&&(this.readable=!1),l.writable===!1&&(this.writable=!1),l.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",n)))}Object.defineProperty(r.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(r.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(r.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function n(){this._writableState.ended||u.nextTick(f,this)}function f(l){l.end()}Object.defineProperty(r.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(o){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=o,this._writableState.destroyed=o)}})}).call(this)}).call(this,e("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(e,z,N){z.exports=s;var u=e("./_stream_transform");e("inherits")(s,u);function s(m){if(!(this instanceof s))return new s(m);u.call(this,m)}s.prototype._transform=function(m,x,t){t(null,m)}},{"./_stream_transform":290,inherits:231}],289:[function(e,z,N){(function(u,s){(function(){z.exports=k;var m;k.ReadableState=S,e("events").EventEmitter;var x=function(ae,ie){return ae.listeners(ie).length},t=e("./internal/streams/stream"),i=e("buffer").Buffer,a=s.Uint8Array||function(){};function r($){return i.from($)}function n($){return i.isBuffer($)||$ instanceof a}var f=e("util"),l;f&&f.debuglog?l=f.debuglog("stream"):l=function(){};var o=e("./internal/streams/buffer_list"),c=e("./internal/streams/destroy"),h=e("./internal/streams/state"),d=h.getHighWaterMark,p=e("../errors").codes,y=p.ERR_INVALID_ARG_TYPE,g=p.ERR_STREAM_PUSH_AFTER_EOF,A=p.ERR_METHOD_NOT_IMPLEMENTED,b=p.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,M,_,T;e("inherits")(k,t);var w=c.errorOrDestroy,v=["error","close","destroy","pause","resume"];function L($,ae,ie){if(typeof $.prependListener=="function")return $.prependListener(ae,ie);!$._events||!$._events[ae]?$.on(ae,ie):Array.isArray($._events[ae])?$._events[ae].unshift(ie):$._events[ae]=[ie,$._events[ae]]}function S($,ae,ie){m=m||e("./_stream_duplex"),$=$||{},typeof ie!="boolean"&&(ie=ae instanceof m),this.objectMode=!!$.objectMode,ie&&(this.objectMode=this.objectMode||!!$.readableObjectMode),this.highWaterMark=d(this,$,"readableHighWaterMark",ie),this.buffer=new o,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=$.emitClose!==!1,this.autoDestroy=!!$.autoDestroy,this.destroyed=!1,this.defaultEncoding=$.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,$.encoding&&(M||(M=e("string_decoder/").StringDecoder),this.decoder=new M($.encoding),this.encoding=$.encoding)}function k($){if(m=m||e("./_stream_duplex"),!(this instanceof k))return new k($);var ae=this instanceof m;this._readableState=new S($,this,ae),this.readable=!0,$&&(typeof $.read=="function"&&(this._read=$.read),typeof $.destroy=="function"&&(this._destroy=$.destroy)),t.call(this)}Object.defineProperty(k.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(ae){!this._readableState||(this._readableState.destroyed=ae)}}),k.prototype.destroy=c.destroy,k.prototype._undestroy=c.undestroy,k.prototype._destroy=function($,ae){ae($)},k.prototype.push=function($,ae){var ie=this._readableState,oe;return ie.objectMode?oe=!0:typeof $=="string"&&(ae=ae||ie.defaultEncoding,ae!==ie.encoding&&($=i.from($,ae),ae=""),oe=!0),P(this,$,ae,!1,oe)},k.prototype.unshift=function($){return P(this,$,null,!0,!1)};function P($,ae,ie,oe,ue){l("readableAddChunk",ae);var ye=$._readableState;if(ae===null)ye.reading=!1,B($,ye);else{var ce;if(ue||(ce=F(ye,ae)),ce)w($,ce);else if(ye.objectMode||ae&&ae.length>0)if(typeof ae!="string"&&!ye.objectMode&&Object.getPrototypeOf(ae)!==i.prototype&&(ae=r(ae)),oe)ye.endEmitted?w($,new b):O($,ye,ae,!0);else if(ye.ended)w($,new g);else{if(ye.destroyed)return!1;ye.reading=!1,ye.decoder&&!ie?(ae=ye.decoder.write(ae),ye.objectMode||ae.length!==0?O($,ye,ae,!1):ee($,ye)):O($,ye,ae,!1)}else oe||(ye.reading=!1,ee($,ye))}return!ye.ended&&(ye.length<ye.highWaterMark||ye.length===0)}function O($,ae,ie,oe){ae.flowing&&ae.length===0&&!ae.sync?(ae.awaitDrain=0,$.emit("data",ie)):(ae.length+=ae.objectMode?1:ie.length,oe?ae.buffer.unshift(ie):ae.buffer.push(ie),ae.needReadable&&j($)),ee($,ae)}function F($,ae){var ie;return!n(ae)&&typeof ae!="string"&&ae!==void 0&&!$.objectMode&&(ie=new y("chunk",["string","Buffer","Uint8Array"],ae)),ie}k.prototype.isPaused=function(){return this._readableState.flowing===!1},k.prototype.setEncoding=function($){M||(M=e("string_decoder/").StringDecoder);var ae=new M($);this._readableState.decoder=ae,this._readableState.encoding=this._readableState.decoder.encoding;for(var ie=this._readableState.buffer.head,oe="";ie!==null;)oe+=ae.write(ie.data),ie=ie.next;return this._readableState.buffer.clear(),oe!==""&&this._readableState.buffer.push(oe),this._readableState.length=oe.length,this};var I=1073741824;function D($){return $>=I?$=I:($--,$|=$>>>1,$|=$>>>2,$|=$>>>4,$|=$>>>8,$|=$>>>16,$++),$}function U($,ae){return $<=0||ae.length===0&&ae.ended?0:ae.objectMode?1:$!==$?ae.flowing&&ae.length?ae.buffer.head.data.length:ae.length:($>ae.highWaterMark&&(ae.highWaterMark=D($)),$<=ae.length?$:ae.ended?ae.length:(ae.needReadable=!0,0))}k.prototype.read=function($){l("read",$),$=parseInt($,10);var ae=this._readableState,ie=$;if($!==0&&(ae.emittedReadable=!1),$===0&&ae.needReadable&&((ae.highWaterMark!==0?ae.length>=ae.highWaterMark:ae.length>0)||ae.ended))return l("read: emitReadable",ae.length,ae.ended),ae.length===0&&ae.ended?ne(this):j(this),null;if($=U($,ae),$===0&&ae.ended)return ae.length===0&&ne(this),null;var oe=ae.needReadable;l("need readable",oe),(ae.length===0||ae.length-$<ae.highWaterMark)&&(oe=!0,l("length less than watermark",oe)),ae.ended||ae.reading?(oe=!1,l("reading or ended",oe)):oe&&(l("do read"),ae.reading=!0,ae.sync=!0,ae.length===0&&(ae.needReadable=!0),this._read(ae.highWaterMark),ae.sync=!1,ae.reading||($=U(ie,ae)));var ue;return $>0?ue=Y($,ae):ue=null,ue===null?(ae.needReadable=ae.length<=ae.highWaterMark,$=0):(ae.length-=$,ae.awaitDrain=0),ae.length===0&&(ae.ended||(ae.needReadable=!0),ie!==$&&ae.ended&&ne(this)),ue!==null&&this.emit("data",ue),ue};function B($,ae){if(l("onEofChunk"),!ae.ended){if(ae.decoder){var ie=ae.decoder.end();ie&&ie.length&&(ae.buffer.push(ie),ae.length+=ae.objectMode?1:ie.length)}ae.ended=!0,ae.sync?j($):(ae.needReadable=!1,ae.emittedReadable||(ae.emittedReadable=!0,Z($)))}}function j($){var ae=$._readableState;l("emitReadable",ae.needReadable,ae.emittedReadable),ae.needReadable=!1,ae.emittedReadable||(l("emitReadable",ae.flowing),ae.emittedReadable=!0,u.nextTick(Z,$))}function Z($){var ae=$._readableState;l("emitReadable_",ae.destroyed,ae.length,ae.ended),!ae.destroyed&&(ae.length||ae.ended)&&($.emit("readable"),ae.emittedReadable=!1),ae.needReadable=!ae.flowing&&!ae.ended&&ae.length<=ae.highWaterMark,H($)}function ee($,ae){ae.readingMore||(ae.readingMore=!0,u.nextTick(q,$,ae))}function q($,ae){for(;!ae.reading&&!ae.ended&&(ae.length<ae.highWaterMark||ae.flowing&&ae.length===0);){var ie=ae.length;if(l("maybeReadMore read 0"),$.read(0),ie===ae.length)break}ae.readingMore=!1}k.prototype._read=function($){w(this,new A("_read()"))},k.prototype.pipe=function($,ae){var ie=this,oe=this._readableState;switch(oe.pipesCount){case 0:oe.pipes=$;break;case 1:oe.pipes=[oe.pipes,$];break;default:oe.pipes.push($);break}oe.pipesCount+=1,l("pipe count=%d opts=%j",oe.pipesCount,ae);var ue=(!ae||ae.end!==!1)&&$!==u.stdout&&$!==u.stderr,ye=ue?me:Re;oe.endEmitted?u.nextTick(ye):ie.once("end",ye),$.on("unpipe",ce);function ce(We,qe){l("onunpipe"),We===ie&&qe&&qe.hasUnpiped===!1&&(qe.hasUnpiped=!0,Ae())}function me(){l("onend"),$.end()}var xe=W(ie);$.on("drain",xe);var ke=!1;function Ae(){l("cleanup"),$.removeListener("close",Ge),$.removeListener("finish",_e),$.removeListener("drain",xe),$.removeListener("error",He),$.removeListener("unpipe",ce),ie.removeListener("end",me),ie.removeListener("end",Re),ie.removeListener("data",Oe),ke=!0,oe.awaitDrain&&(!$._writableState||$._writableState.needDrain)&&xe()}ie.on("data",Oe);function Oe(We){l("ondata");var qe=$.write(We);l("dest.write",qe),qe===!1&&((oe.pipesCount===1&&oe.pipes===$||oe.pipesCount>1&&K(oe.pipes,$)!==-1)&&!ke&&(l("false write response, pause",oe.awaitDrain),oe.awaitDrain++),ie.pause())}function He(We){l("onerror",We),Re(),$.removeListener("error",He),x($,"error")===0&&w($,We)}L($,"error",He);function Ge(){$.removeListener("finish",_e),Re()}$.once("close",Ge);function _e(){l("onfinish"),$.removeListener("close",Ge),Re()}$.once("finish",_e);function Re(){l("unpipe"),ie.unpipe($)}return $.emit("pipe",ie),oe.flowing||(l("pipe resume"),ie.resume()),$};function W($){return function(){var ie=$._readableState;l("pipeOnDrain",ie.awaitDrain),ie.awaitDrain&&ie.awaitDrain--,ie.awaitDrain===0&&x($,"data")&&(ie.flowing=!0,H($))}}k.prototype.unpipe=function($){var ae=this._readableState,ie={hasUnpiped:!1};if(ae.pipesCount===0)return this;if(ae.pipesCount===1)return $&&$!==ae.pipes?this:($||($=ae.pipes),ae.pipes=null,ae.pipesCount=0,ae.flowing=!1,$&&$.emit("unpipe",this,ie),this);if(!$){var oe=ae.pipes,ue=ae.pipesCount;ae.pipes=null,ae.pipesCount=0,ae.flowing=!1;for(var ye=0;ye<ue;ye++)oe[ye].emit("unpipe",this,{hasUnpiped:!1});return this}var ce=K(ae.pipes,$);return ce===-1?this:(ae.pipes.splice(ce,1),ae.pipesCount-=1,ae.pipesCount===1&&(ae.pipes=ae.pipes[0]),$.emit("unpipe",this,ie),this)},k.prototype.on=function($,ae){var ie=t.prototype.on.call(this,$,ae),oe=this._readableState;return $==="data"?(oe.readableListening=this.listenerCount("readable")>0,oe.flowing!==!1&&this.resume()):$==="readable"&&!oe.endEmitted&&!oe.readableListening&&(oe.readableListening=oe.needReadable=!0,oe.flowing=!1,oe.emittedReadable=!1,l("on readable",oe.length,oe.reading),oe.length?j(this):oe.reading||u.nextTick(le,this)),ie},k.prototype.addListener=k.prototype.on,k.prototype.removeListener=function($,ae){var ie=t.prototype.removeListener.call(this,$,ae);return $==="readable"&&u.nextTick(J,this),ie},k.prototype.removeAllListeners=function($){var ae=t.prototype.removeAllListeners.apply(this,arguments);return($==="readable"||$===void 0)&&u.nextTick(J,this),ae};function J($){var ae=$._readableState;ae.readableListening=$.listenerCount("readable")>0,ae.resumeScheduled&&!ae.paused?ae.flowing=!0:$.listenerCount("data")>0&&$.resume()}function le($){l("readable nexttick read 0"),$.read(0)}k.prototype.resume=function(){var $=this._readableState;return $.flowing||(l("resume"),$.flowing=!$.readableListening,fe(this,$)),$.paused=!1,this};function fe($,ae){ae.resumeScheduled||(ae.resumeScheduled=!0,u.nextTick(se,$,ae))}function se($,ae){l("resume",ae.reading),ae.reading||$.read(0),ae.resumeScheduled=!1,$.emit("resume"),H($),ae.flowing&&!ae.reading&&$.read(0)}k.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function H($){var ae=$._readableState;for(l("flow",ae.flowing);ae.flowing&&$.read()!==null;);}k.prototype.wrap=function($){var ae=this,ie=this._readableState,oe=!1;$.on("end",function(){if(l("wrapped end"),ie.decoder&&!ie.ended){var ce=ie.decoder.end();ce&&ce.length&&ae.push(ce)}ae.push(null)}),$.on("data",function(ce){if(l("wrapped data"),ie.decoder&&(ce=ie.decoder.write(ce)),!(ie.objectMode&&ce==null)&&!(!ie.objectMode&&(!ce||!ce.length))){var me=ae.push(ce);me||(oe=!0,$.pause())}});for(var ue in $)this[ue]===void 0&&typeof $[ue]=="function"&&(this[ue]=function(me){return function(){return $[me].apply($,arguments)}}(ue));for(var ye=0;ye<v.length;ye++)$.on(v[ye],this.emit.bind(this,v[ye]));return this._read=function(ce){l("wrapped _read",ce),oe&&(oe=!1,$.resume())},this},typeof Symbol=="function"&&(k.prototype[Symbol.asyncIterator]=function(){return _===void 0&&(_=e("./internal/streams/async_iterator")),_(this)}),Object.defineProperty(k.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(k.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(k.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(ae){this._readableState&&(this._readableState.flowing=ae)}}),k._fromList=Y,Object.defineProperty(k.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Y($,ae){if(ae.length===0)return null;var ie;return ae.objectMode?ie=ae.buffer.shift():!$||$>=ae.length?(ae.decoder?ie=ae.buffer.join(""):ae.buffer.length===1?ie=ae.buffer.first():ie=ae.buffer.concat(ae.length),ae.buffer.clear()):ie=ae.buffer.consume($,ae.decoder),ie}function ne($){var ae=$._readableState;l("endReadable",ae.endEmitted),ae.endEmitted||(ae.ended=!0,u.nextTick(te,ae,$))}function te($,ae){if(l("endReadableNT",$.endEmitted,$.length),!$.endEmitted&&$.length===0&&($.endEmitted=!0,ae.readable=!1,ae.emit("end"),$.autoDestroy)){var ie=ae._writableState;(!ie||ie.autoDestroy&&ie.finished)&&ae.destroy()}}typeof Symbol=="function"&&(k.from=function($,ae){return T===void 0&&(T=e("./internal/streams/from")),T(k,$,ae)});function K($,ae){for(var ie=0,oe=$.length;ie<oe;ie++)if($[ie]===ae)return ie;return-1}}).call(this)}).call(this,e("_process"),typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(e,z,N){z.exports=r;var u=e("../errors").codes,s=u.ERR_METHOD_NOT_IMPLEMENTED,m=u.ERR_MULTIPLE_CALLBACK,x=u.ERR_TRANSFORM_ALREADY_TRANSFORMING,t=u.ERR_TRANSFORM_WITH_LENGTH_0,i=e("./_stream_duplex");e("inherits")(r,i);function a(l,o){var c=this._transformState;c.transforming=!1;var h=c.writecb;if(h===null)return this.emit("error",new m);c.writechunk=null,c.writecb=null,o!=null&&this.push(o),h(l);var d=this._readableState;d.reading=!1,(d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}function r(l){if(!(this instanceof r))return new r(l);i.call(this,l),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,l&&(typeof l.transform=="function"&&(this._transform=l.transform),typeof l.flush=="function"&&(this._flush=l.flush)),this.on("prefinish",n)}function n(){var l=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(o,c){f(l,o,c)}):f(this,null,null)}r.prototype.push=function(l,o){return this._transformState.needTransform=!1,i.prototype.push.call(this,l,o)},r.prototype._transform=function(l,o,c){c(new s("_transform()"))},r.prototype._write=function(l,o,c){var h=this._transformState;if(h.writecb=c,h.writechunk=l,h.writeencoding=o,!h.transforming){var d=this._readableState;(h.needTransform||d.needReadable||d.length<d.highWaterMark)&&this._read(d.highWaterMark)}},r.prototype._read=function(l){var o=this._transformState;o.writechunk!==null&&!o.transforming?(o.transforming=!0,this._transform(o.writechunk,o.writeencoding,o.afterTransform)):o.needTransform=!0},r.prototype._destroy=function(l,o){i.prototype._destroy.call(this,l,function(c){o(c)})};function f(l,o,c){if(o)return l.emit("error",o);if(c!=null&&l.push(c),l._writableState.length)throw new t;if(l._transformState.transforming)throw new x;return l.push(null)}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(e,z,N){(function(u,s){(function(){z.exports=S;function m(H){var Y=this;this.next=null,this.entry=null,this.finish=function(){se(Y,H)}}var x;S.WritableState=v;var t={deprecate:e("util-deprecate")},i=e("./internal/streams/stream"),a=e("buffer").Buffer,r=s.Uint8Array||function(){};function n(H){return a.from(H)}function f(H){return a.isBuffer(H)||H instanceof r}var l=e("./internal/streams/destroy"),o=e("./internal/streams/state"),c=o.getHighWaterMark,h=e("../errors").codes,d=h.ERR_INVALID_ARG_TYPE,p=h.ERR_METHOD_NOT_IMPLEMENTED,y=h.ERR_MULTIPLE_CALLBACK,g=h.ERR_STREAM_CANNOT_PIPE,A=h.ERR_STREAM_DESTROYED,b=h.ERR_STREAM_NULL_VALUES,M=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,T=l.errorOrDestroy;e("inherits")(S,i);function w(){}function v(H,Y,ne){x=x||e("./_stream_duplex"),H=H||{},typeof ne!="boolean"&&(ne=Y instanceof x),this.objectMode=!!H.objectMode,ne&&(this.objectMode=this.objectMode||!!H.writableObjectMode),this.highWaterMark=c(this,H,"writableHighWaterMark",ne),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var te=H.decodeStrings===!1;this.decodeStrings=!te,this.defaultEncoding=H.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(K){B(Y,K)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=H.emitClose!==!1,this.autoDestroy=!!H.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new m(this)}v.prototype.getBuffer=function(){for(var Y=this.bufferedRequest,ne=[];Y;)ne.push(Y),Y=Y.next;return ne},function(){try{Object.defineProperty(v.prototype,"buffer",{get:t.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}}();var L;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(L=Function.prototype[Symbol.hasInstance],Object.defineProperty(S,Symbol.hasInstance,{value:function(Y){return L.call(this,Y)?!0:this!==S?!1:Y&&Y._writableState instanceof v}})):L=function(Y){return Y instanceof this};function S(H){x=x||e("./_stream_duplex");var Y=this instanceof x;if(!Y&&!L.call(S,this))return new S(H);this._writableState=new v(H,this,Y),this.writable=!0,H&&(typeof H.write=="function"&&(this._write=H.write),typeof H.writev=="function"&&(this._writev=H.writev),typeof H.destroy=="function"&&(this._destroy=H.destroy),typeof H.final=="function"&&(this._final=H.final)),i.call(this)}S.prototype.pipe=function(){T(this,new g)};function k(H,Y){var ne=new M;T(H,ne),u.nextTick(Y,ne)}function P(H,Y,ne,te){var K;return ne===null?K=new b:typeof ne!="string"&&!Y.objectMode&&(K=new d("chunk",["string","Buffer"],ne)),K?(T(H,K),u.nextTick(te,K),!1):!0}S.prototype.write=function(H,Y,ne){var te=this._writableState,K=!1,$=!te.objectMode&&f(H);return $&&!a.isBuffer(H)&&(H=n(H)),typeof Y=="function"&&(ne=Y,Y=null),$?Y="buffer":Y||(Y=te.defaultEncoding),typeof ne!="function"&&(ne=w),te.ending?k(this,ne):($||P(this,te,H,ne))&&(te.pendingcb++,K=F(this,te,$,H,Y,ne)),K},S.prototype.cork=function(){this._writableState.corked++},S.prototype.uncork=function(){var H=this._writableState;H.corked&&(H.corked--,!H.writing&&!H.corked&&!H.bufferProcessing&&H.bufferedRequest&&ee(this,H))},S.prototype.setDefaultEncoding=function(Y){if(typeof Y=="string"&&(Y=Y.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((Y+"").toLowerCase())>-1))throw new _(Y);return this._writableState.defaultEncoding=Y,this},Object.defineProperty(S.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function O(H,Y,ne){return!H.objectMode&&H.decodeStrings!==!1&&typeof Y=="string"&&(Y=a.from(Y,ne)),Y}Object.defineProperty(S.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function F(H,Y,ne,te,K,$){if(!ne){var ae=O(Y,te,K);te!==ae&&(ne=!0,K="buffer",te=ae)}var ie=Y.objectMode?1:te.length;Y.length+=ie;var oe=Y.length<Y.highWaterMark;if(oe||(Y.needDrain=!0),Y.writing||Y.corked){var ue=Y.lastBufferedRequest;Y.lastBufferedRequest={chunk:te,encoding:K,isBuf:ne,callback:$,next:null},ue?ue.next=Y.lastBufferedRequest:Y.bufferedRequest=Y.lastBufferedRequest,Y.bufferedRequestCount+=1}else I(H,Y,!1,ie,te,K,$);return oe}function I(H,Y,ne,te,K,$,ae){Y.writelen=te,Y.writecb=ae,Y.writing=!0,Y.sync=!0,Y.destroyed?Y.onwrite(new A("write")):ne?H._writev(K,Y.onwrite):H._write(K,$,Y.onwrite),Y.sync=!1}function D(H,Y,ne,te,K){--Y.pendingcb,ne?(u.nextTick(K,te),u.nextTick(le,H,Y),H._writableState.errorEmitted=!0,T(H,te)):(K(te),H._writableState.errorEmitted=!0,T(H,te),le(H,Y))}function U(H){H.writing=!1,H.writecb=null,H.length-=H.writelen,H.writelen=0}function B(H,Y){var ne=H._writableState,te=ne.sync,K=ne.writecb;if(typeof K!="function")throw new y;if(U(ne),Y)D(H,ne,te,Y,K);else{var $=q(ne)||H.destroyed;!$&&!ne.corked&&!ne.bufferProcessing&&ne.bufferedRequest&&ee(H,ne),te?u.nextTick(j,H,ne,$,K):j(H,ne,$,K)}}function j(H,Y,ne,te){ne||Z(H,Y),Y.pendingcb--,te(),le(H,Y)}function Z(H,Y){Y.length===0&&Y.needDrain&&(Y.needDrain=!1,H.emit("drain"))}function ee(H,Y){Y.bufferProcessing=!0;var ne=Y.bufferedRequest;if(H._writev&&ne&&ne.next){var te=Y.bufferedRequestCount,K=new Array(te),$=Y.corkedRequestsFree;$.entry=ne;for(var ae=0,ie=!0;ne;)K[ae]=ne,ne.isBuf||(ie=!1),ne=ne.next,ae+=1;K.allBuffers=ie,I(H,Y,!0,Y.length,K,"",$.finish),Y.pendingcb++,Y.lastBufferedRequest=null,$.next?(Y.corkedRequestsFree=$.next,$.next=null):Y.corkedRequestsFree=new m(Y),Y.bufferedRequestCount=0}else{for(;ne;){var oe=ne.chunk,ue=ne.encoding,ye=ne.callback,ce=Y.objectMode?1:oe.length;if(I(H,Y,!1,ce,oe,ue,ye),ne=ne.next,Y.bufferedRequestCount--,Y.writing)break}ne===null&&(Y.lastBufferedRequest=null)}Y.bufferedRequest=ne,Y.bufferProcessing=!1}S.prototype._write=function(H,Y,ne){ne(new p("_write()"))},S.prototype._writev=null,S.prototype.end=function(H,Y,ne){var te=this._writableState;return typeof H=="function"?(ne=H,H=null,Y=null):typeof Y=="function"&&(ne=Y,Y=null),H!=null&&this.write(H,Y),te.corked&&(te.corked=1,this.uncork()),te.ending||fe(this,te,ne),this},Object.defineProperty(S.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function q(H){return H.ending&&H.length===0&&H.bufferedRequest===null&&!H.finished&&!H.writing}function W(H,Y){H._final(function(ne){Y.pendingcb--,ne&&T(H,ne),Y.prefinished=!0,H.emit("prefinish"),le(H,Y)})}function J(H,Y){!Y.prefinished&&!Y.finalCalled&&(typeof H._final=="function"&&!Y.destroyed?(Y.pendingcb++,Y.finalCalled=!0,u.nextTick(W,H,Y)):(Y.prefinished=!0,H.emit("prefinish")))}function le(H,Y){var ne=q(Y);if(ne&&(J(H,Y),Y.pendingcb===0&&(Y.finished=!0,H.emit("finish"),Y.autoDestroy))){var te=H._readableState;(!te||te.autoDestroy&&te.endEmitted)&&H.destroy()}return ne}function fe(H,Y,ne){Y.ending=!0,le(H,Y),ne&&(Y.finished?u.nextTick(ne):H.once("finish",ne)),Y.ended=!0,H.writable=!1}function se(H,Y,ne){var te=H.entry;for(H.entry=null;te;){var K=te.callback;Y.pendingcb--,K(ne),te=te.next}Y.corkedRequestsFree.next=H}Object.defineProperty(S.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(Y){!this._writableState||(this._writableState.destroyed=Y)}}),S.prototype.destroy=l.destroy,S.prototype._undestroy=l.undestroy,S.prototype._destroy=function(H,Y){Y(H)}}).call(this)}).call(this,e("_process"),typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(e,z,N){(function(u){(function(){var s;function m(A,b,M){return b in A?Object.defineProperty(A,b,{value:M,enumerable:!0,configurable:!0,writable:!0}):A[b]=M,A}var x=e("./end-of-stream"),t=Symbol("lastResolve"),i=Symbol("lastReject"),a=Symbol("error"),r=Symbol("ended"),n=Symbol("lastPromise"),f=Symbol("handlePromise"),l=Symbol("stream");function o(A,b){return{value:A,done:b}}function c(A){var b=A[t];if(b!==null){var M=A[l].read();M!==null&&(A[n]=null,A[t]=null,A[i]=null,b(o(M,!1)))}}function h(A){u.nextTick(c,A)}function d(A,b){return function(M,_){A.then(function(){if(b[r]){M(o(void 0,!0));return}b[f](M,_)},_)}}var p=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((s={get stream(){return this[l]},next:function(){var b=this,M=this[a];if(M!==null)return Promise.reject(M);if(this[r])return Promise.resolve(o(void 0,!0));if(this[l].destroyed)return new Promise(function(v,L){u.nextTick(function(){b[a]?L(b[a]):v(o(void 0,!0))})});var _=this[n],T;if(_)T=new Promise(d(_,this));else{var w=this[l].read();if(w!==null)return Promise.resolve(o(w,!1));T=new Promise(this[f])}return this[n]=T,T}},m(s,Symbol.asyncIterator,function(){return this}),m(s,"return",function(){var b=this;return new Promise(function(M,_){b[l].destroy(null,function(T){if(T){_(T);return}M(o(void 0,!0))})})}),s),p),g=function(b){var M,_=Object.create(y,(M={},m(M,l,{value:b,writable:!0}),m(M,t,{value:null,writable:!0}),m(M,i,{value:null,writable:!0}),m(M,a,{value:null,writable:!0}),m(M,r,{value:b._readableState.endEmitted,writable:!0}),m(M,f,{value:function(w,v){var L=_[l].read();L?(_[n]=null,_[t]=null,_[i]=null,w(o(L,!1))):(_[t]=w,_[i]=v)},writable:!0}),M));return _[n]=null,x(b,function(T){if(T&&T.code!=="ERR_STREAM_PREMATURE_CLOSE"){var w=_[i];w!==null&&(_[n]=null,_[t]=null,_[i]=null,w(T)),_[a]=T;return}var v=_[t];v!==null&&(_[n]=null,_[t]=null,_[i]=null,v(o(void 0,!0))),_[r]=!0}),b.on("readable",h.bind(null,_)),_};z.exports=g}).call(this)}).call(this,e("_process"))},{"./end-of-stream":295,_process:277}],293:[function(e,z,N){function u(c,h){var d=Object.keys(c);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(c);h&&(p=p.filter(function(y){return Object.getOwnPropertyDescriptor(c,y).enumerable})),d.push.apply(d,p)}return d}function s(c){for(var h=1;h<arguments.length;h++){var d=arguments[h]!=null?arguments[h]:{};h%2?u(Object(d),!0).forEach(function(p){m(c,p,d[p])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(d)):u(Object(d)).forEach(function(p){Object.defineProperty(c,p,Object.getOwnPropertyDescriptor(d,p))})}return c}function m(c,h,d){return h in c?Object.defineProperty(c,h,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[h]=d,c}function x(c,h){if(!(c instanceof h))throw new TypeError("Cannot call a class as a function")}function t(c,h){for(var d=0;d<h.length;d++){var p=h[d];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(c,p.key,p)}}function i(c,h,d){return h&&t(c.prototype,h),d&&t(c,d),c}var a=e("buffer"),r=a.Buffer,n=e("util"),f=n.inspect,l=f&&f.custom||"inspect";function o(c,h,d){r.prototype.copy.call(c,h,d)}z.exports=function(){function c(){x(this,c),this.head=null,this.tail=null,this.length=0}return i(c,[{key:"push",value:function(d){var p={data:d,next:null};this.length>0?this.tail.next=p:this.head=p,this.tail=p,++this.length}},{key:"unshift",value:function(d){var p={data:d,next:this.head};this.length===0&&(this.tail=p),this.head=p,++this.length}},{key:"shift",value:function(){if(this.length!==0){var d=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,d}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(d){if(this.length===0)return"";for(var p=this.head,y=""+p.data;p=p.next;)y+=d+p.data;return y}},{key:"concat",value:function(d){if(this.length===0)return r.alloc(0);for(var p=r.allocUnsafe(d>>>0),y=this.head,g=0;y;)o(y.data,p,g),g+=y.data.length,y=y.next;return p}},{key:"consume",value:function(d,p){var y;return d<this.head.data.length?(y=this.head.data.slice(0,d),this.head.data=this.head.data.slice(d)):d===this.head.data.length?y=this.shift():y=p?this._getString(d):this._getBuffer(d),y}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(d){var p=this.head,y=1,g=p.data;for(d-=g.length;p=p.next;){var A=p.data,b=d>A.length?A.length:d;if(b===A.length?g+=A:g+=A.slice(0,d),d-=b,d===0){b===A.length?(++y,p.next?this.head=p.next:this.head=this.tail=null):(this.head=p,p.data=A.slice(b));break}++y}return this.length-=y,g}},{key:"_getBuffer",value:function(d){var p=r.allocUnsafe(d),y=this.head,g=1;for(y.data.copy(p),d-=y.data.length;y=y.next;){var A=y.data,b=d>A.length?A.length:d;if(A.copy(p,p.length-d,0,b),d-=b,d===0){b===A.length?(++g,y.next?this.head=y.next:this.head=this.tail=null):(this.head=y,y.data=A.slice(b));break}++g}return this.length-=g,p}},{key:l,value:function(d,p){return f(this,s({},p,{depth:0,customInspect:!1}))}}]),c}()},{buffer:85,util:83}],294:[function(e,z,N){(function(u){(function(){function s(r,n){var f=this,l=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return l||o?(n?n(r):r&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,u.nextTick(i,this,r)):u.nextTick(i,this,r)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(r||null,function(c){!n&&c?f._writableState?f._writableState.errorEmitted?u.nextTick(x,f):(f._writableState.errorEmitted=!0,u.nextTick(m,f,c)):u.nextTick(m,f,c):n?(u.nextTick(x,f),n(c)):u.nextTick(x,f)}),this)}function m(r,n){i(r,n),x(r)}function x(r){r._writableState&&!r._writableState.emitClose||r._readableState&&!r._readableState.emitClose||r.emit("close")}function t(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function i(r,n){r.emit("error",n)}function a(r,n){var f=r._readableState,l=r._writableState;f&&f.autoDestroy||l&&l.autoDestroy?r.destroy(n):r.emit("error",n)}z.exports={destroy:s,undestroy:t,errorOrDestroy:a}}).call(this)}).call(this,e("_process"))},{_process:277}],295:[function(e,z,N){var u=e("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function s(i){var a=!1;return function(){if(!a){a=!0;for(var r=arguments.length,n=new Array(r),f=0;f<r;f++)n[f]=arguments[f];i.apply(this,n)}}}function m(){}function x(i){return i.setHeader&&typeof i.abort=="function"}function t(i,a,r){if(typeof a=="function")return t(i,null,a);a||(a={}),r=s(r||m);var n=a.readable||a.readable!==!1&&i.readable,f=a.writable||a.writable!==!1&&i.writable,l=function(){i.writable||c()},o=i._writableState&&i._writableState.finished,c=function(){f=!1,o=!0,n||r.call(i)},h=i._readableState&&i._readableState.endEmitted,d=function(){n=!1,h=!0,f||r.call(i)},p=function(b){r.call(i,b)},y=function(){var b;if(n&&!h)return(!i._readableState||!i._readableState.ended)&&(b=new u),r.call(i,b);if(f&&!o)return(!i._writableState||!i._writableState.ended)&&(b=new u),r.call(i,b)},g=function(){i.req.on("finish",c)};return x(i)?(i.on("complete",c),i.on("abort",y),i.req?g():i.on("request",g)):f&&!i._writableState&&(i.on("end",l),i.on("close",l)),i.on("end",d),i.on("finish",c),a.error!==!1&&i.on("error",p),i.on("close",y),function(){i.removeListener("complete",c),i.removeListener("abort",y),i.removeListener("request",g),i.req&&i.req.removeListener("finish",c),i.removeListener("end",l),i.removeListener("close",l),i.removeListener("finish",c),i.removeListener("end",d),i.removeListener("error",p),i.removeListener("close",y)}}z.exports=t},{"../../../errors":286}],296:[function(e,z,N){z.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(e,z,N){var u;function s(c){var h=!1;return function(){h||(h=!0,c.apply(void 0,arguments))}}var m=e("../../../errors").codes,x=m.ERR_MISSING_ARGS,t=m.ERR_STREAM_DESTROYED;function i(c){if(c)throw c}function a(c){return c.setHeader&&typeof c.abort=="function"}function r(c,h,d,p){p=s(p);var y=!1;c.on("close",function(){y=!0}),u===void 0&&(u=e("./end-of-stream")),u(c,{readable:h,writable:d},function(A){if(A)return p(A);y=!0,p()});var g=!1;return function(A){if(!y&&!g){if(g=!0,a(c))return c.abort();if(typeof c.destroy=="function")return c.destroy();p(A||new t("pipe"))}}}function n(c){c()}function f(c,h){return c.pipe(h)}function l(c){return!c.length||typeof c[c.length-1]!="function"?i:c.pop()}function o(){for(var c=arguments.length,h=new Array(c),d=0;d<c;d++)h[d]=arguments[d];var p=l(h);if(Array.isArray(h[0])&&(h=h[0]),h.length<2)throw new x("streams");var y,g=h.map(function(A,b){var M=b<h.length-1,_=b>0;return r(A,M,_,function(T){y||(y=T),T&&g.forEach(n),!M&&(g.forEach(n),p(y))})});return h.reduce(f)}z.exports=o},{"../../../errors":286,"./end-of-stream":295}],298:[function(e,z,N){var u=e("../../../errors").codes.ERR_INVALID_OPT_VALUE;function s(x,t,i){return x.highWaterMark!=null?x.highWaterMark:t?x[i]:null}function m(x,t,i,a){var r=s(t,a,i);if(r!=null){if(!(isFinite(r)&&Math.floor(r)===r)||r<0){var n=a?i:"highWaterMark";throw new u(n,r)}return Math.floor(r)}return x.objectMode?16:16*1024}z.exports={getHighWaterMark:m}},{"../../../errors":286}],299:[function(e,z,N){z.exports=e("events").EventEmitter},{events:84}],300:[function(e,z,N){var u=e("safe-buffer").Buffer,s=u.isEncoding||function(g){switch(g=""+g,g&&g.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function m(g){if(!g)return"utf8";for(var A;;)switch(g){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return g;default:if(A)return;g=(""+g).toLowerCase(),A=!0}}function x(g){var A=m(g);if(typeof A!="string"&&(u.isEncoding===s||!s(g)))throw new Error("Unknown encoding: "+g);return A||g}N.StringDecoder=t;function t(g){this.encoding=x(g);var A;switch(this.encoding){case"utf16le":this.text=o,this.end=c,A=4;break;case"utf8":this.fillLast=n,A=4;break;case"base64":this.text=h,this.end=d,A=3;break;default:this.write=p,this.end=y;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=u.allocUnsafe(A)}t.prototype.write=function(g){if(g.length===0)return"";var A,b;if(this.lastNeed){if(A=this.fillLast(g),A===void 0)return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<g.length?A?A+this.text(g,b):this.text(g,b):A||""},t.prototype.end=l,t.prototype.text=f,t.prototype.fillLast=function(g){if(this.lastNeed<=g.length)return g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,this.lastTotal-this.lastNeed,0,g.length),this.lastNeed-=g.length};function i(g){return g<=127?0:g>>5==6?2:g>>4==14?3:g>>3==30?4:g>>6==2?-1:-2}function a(g,A,b){var M=A.length-1;if(M<b)return 0;var _=i(A[M]);return _>=0?(_>0&&(g.lastNeed=_-1),_):--M<b||_===-2?0:(_=i(A[M]),_>=0?(_>0&&(g.lastNeed=_-2),_):--M<b||_===-2?0:(_=i(A[M]),_>=0?(_>0&&(_===2?_=0:g.lastNeed=_-3),_):0))}function r(g,A,b){if((A[0]&192)!=128)return g.lastNeed=0,"\uFFFD";if(g.lastNeed>1&&A.length>1){if((A[1]&192)!=128)return g.lastNeed=1,"\uFFFD";if(g.lastNeed>2&&A.length>2&&(A[2]&192)!=128)return g.lastNeed=2,"\uFFFD"}}function n(g){var A=this.lastTotal-this.lastNeed,b=r(this,g);if(b!==void 0)return b;if(this.lastNeed<=g.length)return g.copy(this.lastChar,A,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);g.copy(this.lastChar,A,0,g.length),this.lastNeed-=g.length}function f(g,A){var b=a(this,g,A);if(!this.lastNeed)return g.toString("utf8",A);this.lastTotal=b;var M=g.length-(b-this.lastNeed);return g.copy(this.lastChar,0,M),g.toString("utf8",A,M)}function l(g){var A=g&&g.length?this.write(g):"";return this.lastNeed?A+"\uFFFD":A}function o(g,A){if((g.length-A)%2==0){var b=g.toString("utf16le",A);if(b){var M=b.charCodeAt(b.length-1);if(M>=55296&&M<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=g[g.length-1],g.toString("utf16le",A,g.length-1)}function c(g){var A=g&&g.length?this.write(g):"";if(this.lastNeed){var b=this.lastTotal-this.lastNeed;return A+this.lastChar.toString("utf16le",0,b)}return A}function h(g,A){var b=(g.length-A)%3;return b===0?g.toString("base64",A):(this.lastNeed=3-b,this.lastTotal=3,b===1?this.lastChar[0]=g[g.length-1]:(this.lastChar[0]=g[g.length-2],this.lastChar[1]=g[g.length-1]),g.toString("base64",A,g.length-b))}function d(g){var A=g&&g.length?this.write(g):"";return this.lastNeed?A+this.lastChar.toString("base64",0,3-this.lastNeed):A}function p(g){return g.toString(this.encoding)}function y(g){return g&&g.length?this.write(g):""}},{"safe-buffer":284}],301:[function(e,z,N){(function(u,s){(function(){var m=e("assert"),x=e("debug")("stream-parser");z.exports=n;var t=-1,i=0,a=1,r=2;function n(b){var M=b&&typeof b._transform=="function",_=b&&typeof b._write=="function";if(!M&&!_)throw new Error("must pass a Writable or Transform stream in");x("extending Parser into stream"),b._bytes=l,b._skipBytes=o,M&&(b._passthrough=c),M?b._transform=d:b._write=h}function f(b){x("initializing parser stream"),b._parserBytesLeft=0,b._parserBuffers=[],b._parserBuffered=0,b._parserState=t,b._parserCallback=null,typeof b.push=="function"&&(b._parserOutput=b.push.bind(b)),b._parserInit=!0}function l(b,M){m(!this._parserCallback,'there is already a "callback" set!'),m(isFinite(b)&&b>0,'can only buffer a finite number of bytes > 0, got "'+b+'"'),this._parserInit||f(this),x("buffering %o bytes",b),this._parserBytesLeft=b,this._parserCallback=M,this._parserState=i}function o(b,M){m(!this._parserCallback,'there is already a "callback" set!'),m(b>0,'can only skip > 0 bytes, got "'+b+'"'),this._parserInit||f(this),x("skipping %o bytes",b),this._parserBytesLeft=b,this._parserCallback=M,this._parserState=a}function c(b,M){m(!this._parserCallback,'There is already a "callback" set!'),m(b>0,'can only pass through > 0 bytes, got "'+b+'"'),this._parserInit||f(this),x("passing through %o bytes",b),this._parserBytesLeft=b,this._parserCallback=M,this._parserState=r}function h(b,M,_){this._parserInit||f(this),x("write(%o bytes)",b.length),typeof M=="function"&&(_=M),g(this,b,null,_)}function d(b,M,_){this._parserInit||f(this),x("transform(%o bytes)",b.length),typeof M!="function"&&(M=this._parserOutput),g(this,b,M,_)}function p(b,M,_,T){return b._parserBytesLeft<=0?T(new Error("got data but not currently parsing anything")):M.length<=b._parserBytesLeft?function(){return y(b,M,_,T)}:function(){var w=M.slice(0,b._parserBytesLeft);return y(b,w,_,function(v){if(v)return T(v);if(M.length>w.length)return function(){return p(b,M.slice(w.length),_,T)}})}}function y(b,M,_,T){if(b._parserBytesLeft-=M.length,x("%o bytes left for stream piece",b._parserBytesLeft),b._parserState===i?(b._parserBuffers.push(M),b._parserBuffered+=M.length):b._parserState===r&&_(M),b._parserBytesLeft===0){var w=b._parserCallback;if(w&&b._parserState===i&&b._parserBuffers.length>1&&(M=s.concat(b._parserBuffers,b._parserBuffered)),b._parserState!==i&&(M=null),b._parserCallback=null,b._parserBuffered=0,b._parserState=t,b._parserBuffers.splice(0),w){var v=[];M&&v.push(M),_&&v.push(_);var L=w.length>v.length;L&&v.push(A(T));var S=w.apply(b,v);if(!L||T===S)return T}}else return T}var g=A(p);function A(b){return function(){for(var M=b.apply(this,arguments);typeof M=="function";)M=M();return M}}}).call(this)}).call(this,e("_process"),e("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(e,z,N){(function(u){(function(){N=z.exports=e("./debug"),N.log=x,N.formatArgs=m,N.save=t,N.load=i,N.useColors=s,N.storage=typeof chrome!="undefined"&&typeof chrome.storage!="undefined"?chrome.storage.local:a(),N.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function s(){return typeof window!="undefined"&&window.process&&window.process.type==="renderer"?!0:typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}N.formatters.j=function(r){try{return JSON.stringify(r)}catch(n){return"[UnexpectedJSONParseError]: "+n.message}};function m(r){var n=this.useColors;if(r[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+r[0]+(n?"%c ":" ")+"+"+N.humanize(this.diff),!!n){var f="color: "+this.color;r.splice(1,0,f,"color: inherit");var l=0,o=0;r[0].replace(/%[a-zA-Z%]/g,function(c){c!=="%%"&&(l++,c==="%c"&&(o=l))}),r.splice(o,0,f)}}function x(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function t(r){try{r==null?N.storage.removeItem("debug"):N.storage.debug=r}catch{}}function i(){var r;try{r=N.storage.debug}catch{}return!r&&typeof u!="undefined"&&"env"in u&&(r={}.DEBUG),r}N.enable(i());function a(){try{return window.localStorage}catch{}}}).call(this)}).call(this,e("_process"))},{"./debug":303,_process:277}],303:[function(e,z,N){N=z.exports=m.debug=m.default=m,N.coerce=a,N.disable=t,N.enable=x,N.enabled=i,N.humanize=e("ms"),N.names=[],N.skips=[],N.formatters={};var u;function s(r){var n=0,f;for(f in r)n=(n<<5)-n+r.charCodeAt(f),n|=0;return N.colors[Math.abs(n)%N.colors.length]}function m(r){function n(){if(!!n.enabled){var f=n,l=+new Date,o=l-(u||l);f.diff=o,f.prev=u,f.curr=l,u=l;for(var c=new Array(arguments.length),h=0;h<c.length;h++)c[h]=arguments[h];c[0]=N.coerce(c[0]),typeof c[0]!="string"&&c.unshift("%O");var d=0;c[0]=c[0].replace(/%([a-zA-Z%])/g,function(y,g){if(y==="%%")return y;d++;var A=N.formatters[g];if(typeof A=="function"){var b=c[d];y=A.call(f,b),c.splice(d,1),d--}return y}),N.formatArgs.call(f,c);var p=n.log||N.log||console.log.bind(console);p.apply(f,c)}}return n.namespace=r,n.enabled=N.enabled(r),n.useColors=N.useColors(),n.color=s(r),typeof N.init=="function"&&N.init(n),n}function x(r){N.save(r),N.names=[],N.skips=[];for(var n=(typeof r=="string"?r:"").split(/[\s,]+/),f=n.length,l=0;l<f;l++)!n[l]||(r=n[l].replace(/\*/g,".*?"),r[0]==="-"?N.skips.push(new RegExp("^"+r.substr(1)+"$")):N.names.push(new RegExp("^"+r+"$")))}function t(){N.enable("")}function i(r){var n,f;for(n=0,f=N.skips.length;n<f;n++)if(N.skips[n].test(r))return!1;for(n=0,f=N.names.length;n<f;n++)if(N.names[n].test(r))return!0;return!1}function a(r){return r instanceof Error?r.stack||r.message:r}},{ms:304}],304:[function(e,z,N){var u=1e3,s=u*60,m=s*60,x=m*24,t=x*365.25;z.exports=function(f,l){l=l||{};var o=typeof f;if(o==="string"&&f.length>0)return i(f);if(o==="number"&&isNaN(f)===!1)return l.long?r(f):a(f);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(f))};function i(f){if(f=String(f),!(f.length>100)){var l=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(f);if(!!l){var o=parseFloat(l[1]),c=(l[2]||"ms").toLowerCase();switch(c){case"years":case"year":case"yrs":case"yr":case"y":return o*t;case"days":case"day":case"d":return o*x;case"hours":case"hour":case"hrs":case"hr":case"h":return o*m;case"minutes":case"minute":case"mins":case"min":case"m":return o*s;case"seconds":case"second":case"secs":case"sec":case"s":return o*u;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}function a(f){return f>=x?Math.round(f/x)+"d":f>=m?Math.round(f/m)+"h":f>=s?Math.round(f/s)+"m":f>=u?Math.round(f/u)+"s":f+"ms"}function r(f){return n(f,x,"day")||n(f,m,"hour")||n(f,s,"minute")||n(f,u,"second")||f+" ms"}function n(f,l,o){if(!(f<l))return f<l*1.5?Math.floor(f/l)+" "+o:Math.ceil(f/l)+" "+o+"s"}},{}],305:[function(e,z,N){var u=e("parenthesis");z.exports=function(m,x,t){if(m==null)throw Error("First argument should be a string");if(x==null)throw Error("Separator should be a string or a RegExp");t?(typeof t=="string"||Array.isArray(t))&&(t={ignore:t}):t={},t.escape==null&&(t.escape=!0),t.ignore==null?t.ignore=["[]","()","{}","<>",'""',"''","``","\u201C\u201D","\xAB\xBB"]:(typeof t.ignore=="string"&&(t.ignore=[t.ignore]),t.ignore=t.ignore.map(function(c){return c.length===1&&(c=c+c),c}));var i=u.parse(m,{flat:!0,brackets:t.ignore}),a=i[0],r=a.split(x);if(t.escape){for(var n=[],f=0;f<r.length;f++){var l=r[f],o=r[f+1];l[l.length-1]==="\\"&&l[l.length-2]!=="\\"?(n.push(l+x+o),f++):n.push(l)}r=n}for(var f=0;f<r.length;f++)i[0]=r[f],r[f]=u.stringify(i,{flat:!0});return r}},{parenthesis:248}],306:[function(e,z,N){z.exports=u;function u(s){for(var m=s.length,x=new Array(m),t=new Array(m),i=new Array(m),a=new Array(m),r=new Array(m),n=new Array(m),f=0;f<m;++f)x[f]=-1,t[f]=0,i[f]=!1,a[f]=0,r[f]=-1,n[f]=[];var l=0,o=[],c=[];function h(g){var A=[g],b=[g];for(x[g]=t[g]=l,i[g]=!0,l+=1;b.length>0;){g=b[b.length-1];var M=s[g];if(a[g]<M.length){for(var _=a[g];_<M.length;++_){var T=M[_];if(x[T]<0){x[T]=t[T]=l,i[T]=!0,l+=1,A.push(T),b.push(T);break}else i[T]&&(t[g]=Math.min(t[g],t[T])|0);r[T]>=0&&n[g].push(r[T])}a[g]=_}else{if(t[g]===x[g]){for(var w=[],v=[],L=0,_=A.length-1;_>=0;--_){var S=A[_];if(i[S]=!1,w.push(S),v.push(n[S]),L+=n[S].length,r[S]=o.length,S===g){A.length=_;break}}o.push(w);for(var k=new Array(L),_=0;_<v.length;_++)for(var P=0;P<v[_].length;P++)k[--L]=v[_][P];c.push(k)}b.pop()}}}for(var f=0;f<m;++f)x[f]<0&&h(f);for(var d,f=0;f<c.length;f++){var p=c[f];if(p.length!==0){p.sort(function(A,b){return A-b}),d=[p[0]];for(var y=1;y<p.length;y++)p[y]!==p[y-1]&&d.push(p[y]);c[f]=d}}return{components:o,adjacencyList:c}}},{}],307:[function(e,z,N){Object.defineProperty(N,"__esModule",{value:!0});var u=function(){function r(n,f){var l=[],o=!0,c=!1,h=void 0;try{for(var d=n[Symbol.iterator](),p;!(o=(p=d.next()).done)&&(l.push(p.value),!(f&&l.length===f));o=!0);}catch(y){c=!0,h=y}finally{try{!o&&d.return&&d.return()}finally{if(c)throw h}}return l}return function(n,f){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return r(n,f);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=Math.PI*2,m=function(n,f,l,o,c,h,d){var p=n.x,y=n.y;p*=f,y*=l;var g=o*p-c*y,A=c*p+o*y;return{x:g+h,y:A+d}},x=function(n,f){var l=f===1.5707963267948966?.551915024494:f===-1.5707963267948966?-.551915024494:4/3*Math.tan(f/4),o=Math.cos(n),c=Math.sin(n),h=Math.cos(n+f),d=Math.sin(n+f);return[{x:o-c*l,y:c+o*l},{x:h+d*l,y:d-h*l},{x:h,y:d}]},t=function(n,f,l,o){var c=n*o-f*l<0?-1:1,h=n*l+f*o;return h>1&&(h=1),h<-1&&(h=-1),c*Math.acos(h)},i=function(n,f,l,o,c,h,d,p,y,g,A,b){var M=Math.pow(c,2),_=Math.pow(h,2),T=Math.pow(A,2),w=Math.pow(b,2),v=M*_-M*w-_*T;v<0&&(v=0),v/=M*w+_*T,v=Math.sqrt(v)*(d===p?-1:1);var L=v*c/h*b,S=v*-h/c*A,k=g*L-y*S+(n+l)/2,P=y*L+g*S+(f+o)/2,O=(A-L)/c,F=(b-S)/h,I=(-A-L)/c,D=(-b-S)/h,U=t(1,0,O,F),B=t(O,F,I,D);return p===0&&B>0&&(B-=s),p===1&&B<0&&(B+=s),[k,P,U,B]},a=function(n){var f=n.px,l=n.py,o=n.cx,c=n.cy,h=n.rx,d=n.ry,p=n.xAxisRotation,y=p===void 0?0:p,g=n.largeArcFlag,A=g===void 0?0:g,b=n.sweepFlag,M=b===void 0?0:b,_=[];if(h===0||d===0)return[];var T=Math.sin(y*s/360),w=Math.cos(y*s/360),v=w*(f-o)/2+T*(l-c)/2,L=-T*(f-o)/2+w*(l-c)/2;if(v===0&&L===0)return[];h=Math.abs(h),d=Math.abs(d);var S=Math.pow(v,2)/Math.pow(h,2)+Math.pow(L,2)/Math.pow(d,2);S>1&&(h*=Math.sqrt(S),d*=Math.sqrt(S));var k=i(f,l,o,c,h,d,A,M,T,w,v,L),P=u(k,4),O=P[0],F=P[1],I=P[2],D=P[3],U=Math.abs(D)/(s/4);Math.abs(1-U)<1e-7&&(U=1);var B=Math.max(Math.ceil(U),1);D/=B;for(var j=0;j<B;j++)_.push(x(I,D)),I+=D;return _.map(function(Z){var ee=m(Z[0],h,d,w,T,O,F),q=ee.x,W=ee.y,J=m(Z[1],h,d,w,T,O,F),le=J.x,fe=J.y,se=m(Z[2],h,d,w,T,O,F),H=se.x,Y=se.y;return{x1:q,y1:W,x2:le,y2:fe,x:H,y:Y}})};N.default=a,z.exports=N.default},{}],308:[function(e,z,N){var u=e("parse-svg-path"),s=e("abs-svg-path"),m=e("normalize-svg-path"),x=e("is-svg-path"),t=e("assert");z.exports=i;function i(a){if(Array.isArray(a)&&a.length===1&&typeof a[0]=="string"&&(a=a[0]),typeof a=="string"&&(t(x(a),"String is not an SVG path."),a=u(a)),t(Array.isArray(a),"Argument should be a string or an array of path segments."),a=s(a),a=m(a),!a.length)return[0,0,0,0];for(var r=[1/0,1/0,-1/0,-1/0],n=0,f=a.length;n<f;n++)for(var l=a[n].slice(1),o=0;o<l.length;o+=2)l[o+0]<r[0]&&(r[0]=l[o+0]),l[o+1]<r[1]&&(r[1]=l[o+1]),l[o+0]>r[2]&&(r[2]=l[o+0]),l[o+1]>r[3]&&(r[3]=l[o+1]);return r}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(e,z,N){z.exports=s;var u=e("svg-arc-to-cubic-bezier");function s(t){for(var i,a=[],r=0,n=0,f=0,l=0,o=null,c=null,h=0,d=0,p=0,y=t.length;p<y;p++){var g=t[p],A=g[0];switch(A){case"M":f=g[1],l=g[2];break;case"A":var b=u({px:h,py:d,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!b.length)continue;for(var M=0,_;M<b.length;M++)_=b[M],g=["C",_.x1,_.y1,_.x2,_.y2,_.x,_.y],M<b.length-1&&a.push(g);break;case"S":var T=h,w=d;(i=="C"||i=="S")&&(T+=T-r,w+=w-n),g=["C",T,w,g[1],g[2],g[3],g[4]];break;case"T":i=="Q"||i=="T"?(o=h*2-o,c=d*2-c):(o=h,c=d),g=x(h,d,o,c,g[1],g[2]);break;case"Q":o=g[1],c=g[2],g=x(h,d,g[1],g[2],g[3],g[4]);break;case"L":g=m(h,d,g[1],g[2]);break;case"H":g=m(h,d,g[1],d);break;case"V":g=m(h,d,h,g[1]);break;case"Z":g=m(h,d,f,l);break}i=A,h=g[g.length-2],d=g[g.length-1],g.length>4?(r=g[g.length-4],n=g[g.length-3]):(r=h,n=d),a.push(g)}return a}function m(t,i,a,r){return["C",t,i,a,r,a,r]}function x(t,i,a,r,n,f){return["C",t/3+2/3*a,i/3+2/3*r,n/3+2/3*a,f/3+2/3*r,n,f]}},{"svg-arc-to-cubic-bezier":307}],310:[function(e,z,N){var u=e("svg-path-bounds"),s=e("parse-svg-path"),m=e("draw-svg-path"),x=e("is-svg-path"),t=e("bitmap-sdf"),i=document.createElement("canvas"),a=i.getContext("2d");z.exports=r;function r(l,o){if(!x(l))throw Error("Argument should be valid svg path string");o||(o={});var c,h;o.shape?(c=o.shape[0],h=o.shape[1]):(c=i.width=o.w||o.width||200,h=i.height=o.h||o.height||200);var d=Math.min(c,h),p=o.stroke||0,y=o.viewbox||o.viewBox||u(l),g=[c/(y[2]-y[0]),h/(y[3]-y[1])],A=Math.min(g[0]||0,g[1]||0)/2;if(a.fillStyle="black",a.fillRect(0,0,c,h),a.fillStyle="white",p&&(typeof p!="number"&&(p=1),p>0?a.strokeStyle="white":a.strokeStyle="black",a.lineWidth=Math.abs(p)),a.translate(c*.5,h*.5),a.scale(A,A),f()){var b=new Path2D(l);a.fill(b),p&&a.stroke(b)}else{var M=s(l);m(a,M),a.fill(),p&&a.stroke()}a.setTransform(1,0,0,1,0,0);var _=t(a,{cutoff:o.cutoff!=null?o.cutoff:.5,radius:o.radius!=null?o.radius:d*.5});return _}var n;function f(){if(n!=null)return n;var l=document.createElement("canvas").getContext("2d");if(l.canvas.width=l.canvas.height=1,!window.Path2D)return n=!1;var o=new Path2D("M0,0h1v1h-1v-1Z");l.fillStyle="black",l.fill(o);var c=l.getImageData(0,0,1,1);return n=c&&c.data&&c.data[3]===255}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(e,z,N){(function(u,s){(function(){var m=e("process/browser.js").nextTick,x=Function.prototype.apply,t=Array.prototype.slice,i={},a=0;N.setTimeout=function(){return new r(x.call(setTimeout,window,arguments),clearTimeout)},N.setInterval=function(){return new r(x.call(setInterval,window,arguments),clearInterval)},N.clearTimeout=N.clearInterval=function(n){n.close()};function r(n,f){this._id=n,this._clearFn=f}r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},N.enroll=function(n,f){clearTimeout(n._idleTimeoutId),n._idleTimeout=f},N.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},N._unrefActive=N.active=function(n){clearTimeout(n._idleTimeoutId);var f=n._idleTimeout;f>=0&&(n._idleTimeoutId=setTimeout(function(){n._onTimeout&&n._onTimeout()},f))},N.setImmediate=typeof u=="function"?u:function(n){var f=a++,l=arguments.length<2?!1:t.call(arguments,1);return i[f]=!0,m(function(){i[f]&&(l?n.apply(null,l):n.call(null),N.clearImmediate(f))}),f},N.clearImmediate=typeof s=="function"?s:function(n){delete i[n]}}).call(this)}).call(this,e("timers").setImmediate,e("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(e,z,N){(function(u){var s=/^\s+/,m=/\s+$/,x=0,t=u.round,i=u.min,a=u.max,r=u.random;function n(K,$){if(K=K||"",$=$||{},K instanceof n)return K;if(!(this instanceof n))return new n(K,$);var ae=f(K);this._originalInput=K,this._r=ae.r,this._g=ae.g,this._b=ae.b,this._a=ae.a,this._roundA=t(100*this._a)/100,this._format=$.format||ae.format,this._gradientType=$.gradientType,this._r<1&&(this._r=t(this._r)),this._g<1&&(this._g=t(this._g)),this._b<1&&(this._b=t(this._b)),this._ok=ae.ok,this._tc_id=x++}n.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var K=this.toRgb();return(K.r*299+K.g*587+K.b*114)/1e3},getLuminance:function(){var K=this.toRgb(),$,ae,ie,oe,ue,ye;return $=K.r/255,ae=K.g/255,ie=K.b/255,$<=.03928?oe=$/12.92:oe=u.pow(($+.055)/1.055,2.4),ae<=.03928?ue=ae/12.92:ue=u.pow((ae+.055)/1.055,2.4),ie<=.03928?ye=ie/12.92:ye=u.pow((ie+.055)/1.055,2.4),.2126*oe+.7152*ue+.0722*ye},setAlpha:function(K){return this._a=B(K),this._roundA=t(100*this._a)/100,this},toHsv:function(){var K=h(this._r,this._g,this._b);return{h:K.h*360,s:K.s,v:K.v,a:this._a}},toHsvString:function(){var K=h(this._r,this._g,this._b),$=t(K.h*360),ae=t(K.s*100),ie=t(K.v*100);return this._a==1?"hsv("+$+", "+ae+"%, "+ie+"%)":"hsva("+$+", "+ae+"%, "+ie+"%, "+this._roundA+")"},toHsl:function(){var K=o(this._r,this._g,this._b);return{h:K.h*360,s:K.s,l:K.l,a:this._a}},toHslString:function(){var K=o(this._r,this._g,this._b),$=t(K.h*360),ae=t(K.s*100),ie=t(K.l*100);return this._a==1?"hsl("+$+", "+ae+"%, "+ie+"%)":"hsla("+$+", "+ae+"%, "+ie+"%, "+this._roundA+")"},toHex:function(K){return p(this._r,this._g,this._b,K)},toHexString:function(K){return"#"+this.toHex(K)},toHex8:function(K){return y(this._r,this._g,this._b,this._a,K)},toHex8String:function(K){return"#"+this.toHex8(K)},toRgb:function(){return{r:t(this._r),g:t(this._g),b:t(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+t(this._r)+", "+t(this._g)+", "+t(this._b)+")":"rgba("+t(this._r)+", "+t(this._g)+", "+t(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:t(j(this._r,255)*100)+"%",g:t(j(this._g,255)*100)+"%",b:t(j(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+t(j(this._r,255)*100)+"%, "+t(j(this._g,255)*100)+"%, "+t(j(this._b,255)*100)+"%)":"rgba("+t(j(this._r,255)*100)+"%, "+t(j(this._g,255)*100)+"%, "+t(j(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:D[p(this._r,this._g,this._b,!0)]||!1},toFilter:function(K){var $="#"+g(this._r,this._g,this._b,this._a),ae=$,ie=this._gradientType?"GradientType = 1, ":"";if(K){var oe=n(K);ae="#"+g(oe._r,oe._g,oe._b,oe._a)}return"progid:DXImageTransform.Microsoft.gradient("+ie+"startColorstr="+$+",endColorstr="+ae+")"},toString:function(K){var $=!!K;K=K||this._format;var ae=!1,ie=this._a<1&&this._a>=0,oe=!$&&ie&&(K==="hex"||K==="hex6"||K==="hex3"||K==="hex4"||K==="hex8"||K==="name");return oe?K==="name"&&this._a===0?this.toName():this.toRgbString():(K==="rgb"&&(ae=this.toRgbString()),K==="prgb"&&(ae=this.toPercentageRgbString()),(K==="hex"||K==="hex6")&&(ae=this.toHexString()),K==="hex3"&&(ae=this.toHexString(!0)),K==="hex4"&&(ae=this.toHex8String(!0)),K==="hex8"&&(ae=this.toHex8String()),K==="name"&&(ae=this.toName()),K==="hsl"&&(ae=this.toHslString()),K==="hsv"&&(ae=this.toHsvString()),ae||this.toHexString())},clone:function(){return n(this.toString())},_applyModification:function(K,$){var ae=K.apply(null,[this].concat([].slice.call($)));return this._r=ae._r,this._g=ae._g,this._b=ae._b,this.setAlpha(ae._a),this},lighten:function(){return this._applyModification(_,arguments)},brighten:function(){return this._applyModification(T,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(A,arguments)},saturate:function(){return this._applyModification(b,arguments)},greyscale:function(){return this._applyModification(M,arguments)},spin:function(){return this._applyModification(v,arguments)},_applyCombination:function(K,$){return K.apply(null,[this].concat([].slice.call($)))},analogous:function(){return this._applyCombination(O,arguments)},complement:function(){return this._applyCombination(L,arguments)},monochromatic:function(){return this._applyCombination(F,arguments)},splitcomplement:function(){return this._applyCombination(P,arguments)},triad:function(){return this._applyCombination(S,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},n.fromRatio=function(K,$){if(typeof K=="object"){var ae={};for(var ie in K)K.hasOwnProperty(ie)&&(ie==="a"?ae[ie]=K[ie]:ae[ie]=le(K[ie]));K=ae}return n(K,$)};function f(K){var $={r:0,g:0,b:0},ae=1,ie=null,oe=null,ue=null,ye=!1,ce=!1;return typeof K=="string"&&(K=ne(K)),typeof K=="object"&&(Y(K.r)&&Y(K.g)&&Y(K.b)?($=l(K.r,K.g,K.b),ye=!0,ce=String(K.r).substr(-1)==="%"?"prgb":"rgb"):Y(K.h)&&Y(K.s)&&Y(K.v)?(ie=le(K.s),oe=le(K.v),$=d(K.h,ie,oe),ye=!0,ce="hsv"):Y(K.h)&&Y(K.s)&&Y(K.l)&&(ie=le(K.s),ue=le(K.l),$=c(K.h,ie,ue),ye=!0,ce="hsl"),K.hasOwnProperty("a")&&(ae=K.a)),ae=B(ae),{ok:ye,format:K.format||ce,r:i(255,a($.r,0)),g:i(255,a($.g,0)),b:i(255,a($.b,0)),a:ae}}function l(K,$,ae){return{r:j(K,255)*255,g:j($,255)*255,b:j(ae,255)*255}}function o(K,$,ae){K=j(K,255),$=j($,255),ae=j(ae,255);var ie=a(K,$,ae),oe=i(K,$,ae),ue,ye,ce=(ie+oe)/2;if(ie==oe)ue=ye=0;else{var me=ie-oe;switch(ye=ce>.5?me/(2-ie-oe):me/(ie+oe),ie){case K:ue=($-ae)/me+($<ae?6:0);break;case $:ue=(ae-K)/me+2;break;case ae:ue=(K-$)/me+4;break}ue/=6}return{h:ue,s:ye,l:ce}}function c(K,$,ae){var ie,oe,ue;K=j(K,360),$=j($,100),ae=j(ae,100);function ye(xe,ke,Ae){return Ae<0&&(Ae+=1),Ae>1&&(Ae-=1),Ae<1/6?xe+(ke-xe)*6*Ae:Ae<1/2?ke:Ae<2/3?xe+(ke-xe)*(2/3-Ae)*6:xe}if($===0)ie=oe=ue=ae;else{var ce=ae<.5?ae*(1+$):ae+$-ae*$,me=2*ae-ce;ie=ye(me,ce,K+1/3),oe=ye(me,ce,K),ue=ye(me,ce,K-1/3)}return{r:ie*255,g:oe*255,b:ue*255}}function h(K,$,ae){K=j(K,255),$=j($,255),ae=j(ae,255);var ie=a(K,$,ae),oe=i(K,$,ae),ue,ye,ce=ie,me=ie-oe;if(ye=ie===0?0:me/ie,ie==oe)ue=0;else{switch(ie){case K:ue=($-ae)/me+($<ae?6:0);break;case $:ue=(ae-K)/me+2;break;case ae:ue=(K-$)/me+4;break}ue/=6}return{h:ue,s:ye,v:ce}}function d(K,$,ae){K=j(K,360)*6,$=j($,100),ae=j(ae,100);var ie=u.floor(K),oe=K-ie,ue=ae*(1-$),ye=ae*(1-oe*$),ce=ae*(1-(1-oe)*$),me=ie%6,xe=[ae,ye,ue,ue,ce,ae][me],ke=[ce,ae,ae,ye,ue,ue][me],Ae=[ue,ue,ce,ae,ae,ye][me];return{r:xe*255,g:ke*255,b:Ae*255}}function p(K,$,ae,ie){var oe=[J(t(K).toString(16)),J(t($).toString(16)),J(t(ae).toString(16))];return ie&&oe[0].charAt(0)==oe[0].charAt(1)&&oe[1].charAt(0)==oe[1].charAt(1)&&oe[2].charAt(0)==oe[2].charAt(1)?oe[0].charAt(0)+oe[1].charAt(0)+oe[2].charAt(0):oe.join("")}function y(K,$,ae,ie,oe){var ue=[J(t(K).toString(16)),J(t($).toString(16)),J(t(ae).toString(16)),J(fe(ie))];return oe&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("")}function g(K,$,ae,ie){var oe=[J(fe(ie)),J(t(K).toString(16)),J(t($).toString(16)),J(t(ae).toString(16))];return oe.join("")}n.equals=function(K,$){return!K||!$?!1:n(K).toRgbString()==n($).toRgbString()},n.random=function(){return n.fromRatio({r:r(),g:r(),b:r()})};function A(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.s-=$/100,ae.s=Z(ae.s),n(ae)}function b(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.s+=$/100,ae.s=Z(ae.s),n(ae)}function M(K){return n(K).desaturate(100)}function _(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.l+=$/100,ae.l=Z(ae.l),n(ae)}function T(K,$){$=$===0?0:$||10;var ae=n(K).toRgb();return ae.r=a(0,i(255,ae.r-t(255*-($/100)))),ae.g=a(0,i(255,ae.g-t(255*-($/100)))),ae.b=a(0,i(255,ae.b-t(255*-($/100)))),n(ae)}function w(K,$){$=$===0?0:$||10;var ae=n(K).toHsl();return ae.l-=$/100,ae.l=Z(ae.l),n(ae)}function v(K,$){var ae=n(K).toHsl(),ie=(ae.h+$)%360;return ae.h=ie<0?360+ie:ie,n(ae)}function L(K){var $=n(K).toHsl();return $.h=($.h+180)%360,n($)}function S(K){var $=n(K).toHsl(),ae=$.h;return[n(K),n({h:(ae+120)%360,s:$.s,l:$.l}),n({h:(ae+240)%360,s:$.s,l:$.l})]}function k(K){var $=n(K).toHsl(),ae=$.h;return[n(K),n({h:(ae+90)%360,s:$.s,l:$.l}),n({h:(ae+180)%360,s:$.s,l:$.l}),n({h:(ae+270)%360,s:$.s,l:$.l})]}function P(K){var $=n(K).toHsl(),ae=$.h;return[n(K),n({h:(ae+72)%360,s:$.s,l:$.l}),n({h:(ae+216)%360,s:$.s,l:$.l})]}function O(K,$,ae){$=$||6,ae=ae||30;var ie=n(K).toHsl(),oe=360/ae,ue=[n(K)];for(ie.h=(ie.h-(oe*$>>1)+720)%360;--$;)ie.h=(ie.h+oe)%360,ue.push(n(ie));return ue}function F(K,$){$=$||6;for(var ae=n(K).toHsv(),ie=ae.h,oe=ae.s,ue=ae.v,ye=[],ce=1/$;$--;)ye.push(n({h:ie,s:oe,v:ue})),ue=(ue+ce)%1;return ye}n.mix=function(K,$,ae){ae=ae===0?0:ae||50;var ie=n(K).toRgb(),oe=n($).toRgb(),ue=ae/100,ye={r:(oe.r-ie.r)*ue+ie.r,g:(oe.g-ie.g)*ue+ie.g,b:(oe.b-ie.b)*ue+ie.b,a:(oe.a-ie.a)*ue+ie.a};return n(ye)},n.readability=function(K,$){var ae=n(K),ie=n($);return(u.max(ae.getLuminance(),ie.getLuminance())+.05)/(u.min(ae.getLuminance(),ie.getLuminance())+.05)},n.isReadable=function(K,$,ae){var ie=n.readability(K,$),oe,ue;switch(ue=!1,oe=te(ae),oe.level+oe.size){case"AAsmall":case"AAAlarge":ue=ie>=4.5;break;case"AAlarge":ue=ie>=3;break;case"AAAsmall":ue=ie>=7;break}return ue},n.mostReadable=function(K,$,ae){var ie=null,oe=0,ue,ye,ce,me;ae=ae||{},ye=ae.includeFallbackColors,ce=ae.level,me=ae.size;for(var xe=0;xe<$.length;xe++)ue=n.readability(K,$[xe]),ue>oe&&(oe=ue,ie=n($[xe]));return n.isReadable(K,ie,{level:ce,size:me})||!ye?ie:(ae.includeFallbackColors=!1,n.mostReadable(K,["#fff","#000"],ae))};var I=n.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},D=n.hexNames=U(I);function U(K){var $={};for(var ae in K)K.hasOwnProperty(ae)&&($[K[ae]]=ae);return $}function B(K){return K=parseFloat(K),(isNaN(K)||K<0||K>1)&&(K=1),K}function j(K,$){q(K)&&(K="100%");var ae=W(K);return K=i($,a(0,parseFloat(K))),ae&&(K=parseInt(K*$,10)/100),u.abs(K-$)<1e-6?1:K%$/parseFloat($)}function Z(K){return i(1,a(0,K))}function ee(K){return parseInt(K,16)}function q(K){return typeof K=="string"&&K.indexOf(".")!=-1&&parseFloat(K)===1}function W(K){return typeof K=="string"&&K.indexOf("%")!=-1}function J(K){return K.length==1?"0"+K:""+K}function le(K){return K<=1&&(K=K*100+"%"),K}function fe(K){return u.round(parseFloat(K)*255).toString(16)}function se(K){return ee(K)/255}var H=function(){var K="[-\\+]?\\d+%?",$="[-\\+]?\\d*\\.\\d+%?",ae="(?:"+$+")|(?:"+K+")",ie="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?",oe="[\\s|\\(]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")[,|\\s]+("+ae+")\\s*\\)?";return{CSS_UNIT:new RegExp(ae),rgb:new RegExp("rgb"+ie),rgba:new RegExp("rgba"+oe),hsl:new RegExp("hsl"+ie),hsla:new RegExp("hsla"+oe),hsv:new RegExp("hsv"+ie),hsva:new RegExp("hsva"+oe),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Y(K){return!!H.CSS_UNIT.exec(K)}function ne(K){K=K.replace(s,"").replace(m,"").toLowerCase();var $=!1;if(I[K])K=I[K],$=!0;else if(K=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var ae;return(ae=H.rgb.exec(K))?{r:ae[1],g:ae[2],b:ae[3]}:(ae=H.rgba.exec(K))?{r:ae[1],g:ae[2],b:ae[3],a:ae[4]}:(ae=H.hsl.exec(K))?{h:ae[1],s:ae[2],l:ae[3]}:(ae=H.hsla.exec(K))?{h:ae[1],s:ae[2],l:ae[3],a:ae[4]}:(ae=H.hsv.exec(K))?{h:ae[1],s:ae[2],v:ae[3]}:(ae=H.hsva.exec(K))?{h:ae[1],s:ae[2],v:ae[3],a:ae[4]}:(ae=H.hex8.exec(K))?{r:ee(ae[1]),g:ee(ae[2]),b:ee(ae[3]),a:se(ae[4]),format:$?"name":"hex8"}:(ae=H.hex6.exec(K))?{r:ee(ae[1]),g:ee(ae[2]),b:ee(ae[3]),format:$?"name":"hex"}:(ae=H.hex4.exec(K))?{r:ee(ae[1]+""+ae[1]),g:ee(ae[2]+""+ae[2]),b:ee(ae[3]+""+ae[3]),a:se(ae[4]+""+ae[4]),format:$?"name":"hex8"}:(ae=H.hex3.exec(K))?{r:ee(ae[1]+""+ae[1]),g:ee(ae[2]+""+ae[2]),b:ee(ae[3]+""+ae[3]),format:$?"name":"hex"}:!1}function te(K){var $,ae;return K=K||{level:"AA",size:"small"},$=(K.level||"AA").toUpperCase(),ae=(K.size||"small").toLowerCase(),$!=="AA"&&$!=="AAA"&&($="AA"),ae!=="small"&&ae!=="large"&&(ae="small"),{level:$,size:ae}}typeof z!="undefined"&&z.exports?z.exports=n:window.tinycolor=n})(Math)},{}],313:[function(e,z,N){z.exports=m,z.exports.float32=z.exports.float=m,z.exports.fract32=z.exports.fract=s;var u=new Float32Array(1);function s(x,t){if(x.length){if(x instanceof Float32Array)return new Float32Array(x.length);t instanceof Float32Array||(t=m(x));for(var i=0,a=t.length;i<a;i++)t[i]=x[i]-t[i];return t}return m(x-m(x))}function m(x){return x.length?x instanceof Float32Array?x:new Float32Array(x):(u[0]=x,u[0])}},{}],314:[function(e,z,N){var u=e("parse-unit");z.exports=t;var s=96;function m(i,a){var r=u(getComputedStyle(i).getPropertyValue(a));return r[0]*t(r[1],i)}function x(i,a){var r=document.createElement("div");r.style["font-size"]="128"+i,a.appendChild(r);var n=m(r,"font-size")/128;return a.removeChild(r),n}function t(i,a){switch(a=a||document.body,i=(i||"px").trim().toLowerCase(),(a===window||a===document)&&(a=document.body),i){case"%":return a.clientHeight/100;case"ch":case"ex":return x(i,a);case"em":return m(a,"font-size");case"rem":return m(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return s;case"cm":return s/2.54;case"mm":return s/25.4;case"pt":return s/72;case"pc":return s/6}return 1}},{"parse-unit":251}],315:[function(e,z,N){(function(u,s){typeof N=="object"&&typeof z!="undefined"?s(N):(u=u||self,s(u.topojson=u.topojson||{}))})(this,function(u){function s(b){return b}function m(b){if(b==null)return s;var M,_,T=b.scale[0],w=b.scale[1],v=b.translate[0],L=b.translate[1];return function(S,k){k||(M=_=0);var P=2,O=S.length,F=new Array(O);for(F[0]=(M+=S[0])*T+v,F[1]=(_+=S[1])*w+L;P<O;)F[P]=S[P],++P;return F}}function x(b){var M=m(b.transform),_,T=1/0,w=T,v=-T,L=-T;function S(P){P=M(P),P[0]<T&&(T=P[0]),P[0]>v&&(v=P[0]),P[1]<w&&(w=P[1]),P[1]>L&&(L=P[1])}function k(P){switch(P.type){case"GeometryCollection":P.geometries.forEach(k);break;case"Point":S(P.coordinates);break;case"MultiPoint":P.coordinates.forEach(S);break}}b.arcs.forEach(function(P){for(var O=-1,F=P.length,I;++O<F;)I=M(P[O],O),I[0]<T&&(T=I[0]),I[0]>v&&(v=I[0]),I[1]<w&&(w=I[1]),I[1]>L&&(L=I[1])});for(_ in b.objects)k(b.objects[_]);return[T,w,v,L]}function t(b,M){for(var _,T=b.length,w=T-M;w<--T;)_=b[w],b[w++]=b[T],b[T]=_}function i(b,M){return typeof M=="string"&&(M=b.objects[M]),M.type==="GeometryCollection"?{type:"FeatureCollection",features:M.geometries.map(function(_){return a(b,_)})}:a(b,M)}function a(b,M){var _=M.id,T=M.bbox,w=M.properties==null?{}:M.properties,v=r(b,M);return _==null&&T==null?{type:"Feature",properties:w,geometry:v}:T==null?{type:"Feature",id:_,properties:w,geometry:v}:{type:"Feature",id:_,bbox:T,properties:w,geometry:v}}function r(b,M){var _=m(b.transform),T=b.arcs;function w(O,F){F.length&&F.pop();for(var I=T[O<0?~O:O],D=0,U=I.length;D<U;++D)F.push(_(I[D],D));O<0&&t(F,U)}function v(O){return _(O)}function L(O){for(var F=[],I=0,D=O.length;I<D;++I)w(O[I],F);return F.length<2&&F.push(F[0]),F}function S(O){for(var F=L(O);F.length<4;)F.push(F[0]);return F}function k(O){return O.map(S)}function P(O){var F=O.type,I;switch(F){case"GeometryCollection":return{type:F,geometries:O.geometries.map(P)};case"Point":I=v(O.coordinates);break;case"MultiPoint":I=O.coordinates.map(v);break;case"LineString":I=L(O.arcs);break;case"MultiLineString":I=O.arcs.map(L);break;case"Polygon":I=k(O.arcs);break;case"MultiPolygon":I=O.arcs.map(k);break;default:return null}return{type:F,coordinates:I}}return P(M)}function n(b,M){var _={},T={},w={},v=[],L=-1;M.forEach(function(P,O){var F=b.arcs[P<0?~P:P],I;F.length<3&&!F[1][0]&&!F[1][1]&&(I=M[++L],M[L]=P,M[O]=I)}),M.forEach(function(P){var O=S(P),F=O[0],I=O[1],D,U;if(D=w[F])if(delete w[D.end],D.push(P),D.end=I,U=T[I]){delete T[U.start];var B=U===D?D:D.concat(U);T[B.start=D.start]=w[B.end=U.end]=B}else T[D.start]=w[D.end]=D;else if(D=T[I])if(delete T[D.start],D.unshift(P),D.start=F,U=w[F]){delete w[U.end];var j=U===D?D:U.concat(D);T[j.start=U.start]=w[j.end=D.end]=j}else T[D.start]=w[D.end]=D;else D=[P],T[D.start=F]=w[D.end=I]=D});function S(P){var O=b.arcs[P<0?~P:P],F=O[0],I;return b.transform?(I=[0,0],O.forEach(function(D){I[0]+=D[0],I[1]+=D[1]})):I=O[O.length-1],P<0?[I,F]:[F,I]}function k(P,O){for(var F in P){var I=P[F];delete O[I.start],delete I.start,delete I.end,I.forEach(function(D){_[D<0?~D:D]=1}),v.push(I)}}return k(w,T),k(T,w),M.forEach(function(P){_[P<0?~P:P]||v.push([P])}),v}function f(b){return r(b,l.apply(this,arguments))}function l(b,M,_){var T,w,v;if(arguments.length>1)T=o(b,M,_);else for(w=0,T=new Array(v=b.arcs.length);w<v;++w)T[w]=w;return{type:"MultiLineString",arcs:n(b,T)}}function o(b,M,_){var T=[],w=[],v;function L(F){var I=F<0?~F:F;(w[I]||(w[I]=[])).push({i:F,g:v})}function S(F){F.forEach(L)}function k(F){F.forEach(S)}function P(F){F.forEach(k)}function O(F){switch(v=F,F.type){case"GeometryCollection":F.geometries.forEach(O);break;case"LineString":S(F.arcs);break;case"MultiLineString":case"Polygon":k(F.arcs);break;case"MultiPolygon":P(F.arcs);break}}return O(M),w.forEach(_==null?function(F){T.push(F[0].i)}:function(F){_(F[0].g,F[F.length-1].g)&&T.push(F[0].i)}),T}function c(b){for(var M=-1,_=b.length,T,w=b[_-1],v=0;++M<_;)T=w,w=b[M],v+=T[0]*w[1]-T[1]*w[0];return Math.abs(v)}function h(b){return r(b,d.apply(this,arguments))}function d(b,M){var _={},T=[],w=[];M.forEach(v);function v(k){switch(k.type){case"GeometryCollection":k.geometries.forEach(v);break;case"Polygon":L(k.arcs);break;case"MultiPolygon":k.arcs.forEach(L);break}}function L(k){k.forEach(function(P){P.forEach(function(O){(_[O=O<0?~O:O]||(_[O]=[])).push(k)})}),T.push(k)}function S(k){return c(r(b,{type:"Polygon",arcs:[k]}).coordinates[0])}return T.forEach(function(k){if(!k._){var P=[],O=[k];for(k._=1,w.push(P);k=O.pop();)P.push(k),k.forEach(function(F){F.forEach(function(I){_[I<0?~I:I].forEach(function(D){D._||(D._=1,O.push(D))})})})}}),T.forEach(function(k){delete k._}),{type:"MultiPolygon",arcs:w.map(function(k){var P=[],O;if(k.forEach(function(B){B.forEach(function(j){j.forEach(function(Z){_[Z<0?~Z:Z].length<2&&P.push(Z)})})}),P=n(b,P),(O=P.length)>1)for(var F=1,I=S(P[0]),D,U;F<O;++F)(D=S(P[F]))>I&&(U=P[0],P[0]=P[F],P[F]=U,I=D);return P}).filter(function(k){return k.length>0})}}function p(b,M){for(var _=0,T=b.length;_<T;){var w=_+T>>>1;b[w]<M?_=w+1:T=w}return _}function y(b){var M={},_=b.map(function(){return[]});function T(B,j){B.forEach(function(Z){Z<0&&(Z=~Z);var ee=M[Z];ee?ee.push(j):M[Z]=[j]})}function w(B,j){B.forEach(function(Z){T(Z,j)})}function v(B,j){B.type==="GeometryCollection"?B.geometries.forEach(function(Z){v(Z,j)}):B.type in L&&L[B.type](B.arcs,j)}var L={LineString:T,MultiLineString:w,Polygon:w,MultiPolygon:function(B,j){B.forEach(function(Z){w(Z,j)})}};b.forEach(v);for(var S in M)for(var k=M[S],P=k.length,O=0;O<P;++O)for(var F=O+1;F<P;++F){var I=k[O],D=k[F],U;(U=_[I])[S=p(U,D)]!==D&&U.splice(S,0,D),(U=_[D])[S=p(U,I)]!==I&&U.splice(S,0,I)}return _}function g(b){if(b==null)return s;var M,_,T=b.scale[0],w=b.scale[1],v=b.translate[0],L=b.translate[1];return function(S,k){k||(M=_=0);var P=2,O=S.length,F=new Array(O),I=Math.round((S[0]-v)/T),D=Math.round((S[1]-L)/w);for(F[0]=I-M,M=I,F[1]=D-_,_=D;P<O;)F[P]=S[P],++P;return F}}function A(b,M){if(b.transform)throw new Error("already quantized");if(!M||!M.scale){if(!((L=Math.floor(M))>=2))throw new Error("n must be \u22652");k=b.bbox||x(b);var _=k[0],T=k[1],w=k[2],v=k[3],L;M={scale:[w-_?(w-_)/(L-1):1,v-T?(v-T)/(L-1):1],translate:[_,T]}}else k=b.bbox;var S=g(M),k,P,O=b.objects,F={};function I(B){return S(B)}function D(B){var j;switch(B.type){case"GeometryCollection":j={type:"GeometryCollection",geometries:B.geometries.map(D)};break;case"Point":j={type:"Point",coordinates:I(B.coordinates)};break;case"MultiPoint":j={type:"MultiPoint",coordinates:B.coordinates.map(I)};break;default:return B}return B.id!=null&&(j.id=B.id),B.bbox!=null&&(j.bbox=B.bbox),B.properties!=null&&(j.properties=B.properties),j}function U(B){var j=0,Z=1,ee=B.length,q,W=new Array(ee);for(W[0]=S(B[0],0);++j<ee;)((q=S(B[j],j))[0]||q[1])&&(W[Z++]=q);return Z===1&&(W[Z++]=[0,0]),W.length=Z,W}for(P in O)F[P]=D(O[P]);return{type:"Topology",bbox:k,transform:M,objects:F,arcs:b.arcs.map(U)}}u.bbox=x,u.feature=i,u.merge=h,u.mergeArcs=d,u.mesh=f,u.meshArcs=l,u.neighbors=y,u.quantize=A,u.transform=m,u.untransform=g,Object.defineProperty(u,"__esModule",{value:!0})})},{}],316:[function(e,z,N){var u=e("../prototype/is");z.exports=function(s){if(typeof s!="function"||!hasOwnProperty.call(s,"length"))return!1;try{if(typeof s.length!="number"||typeof s.call!="function"||typeof s.apply!="function")return!1}catch{return!1}return!u(s)}},{"../prototype/is":323}],317:[function(e,z,N){var u=e("../value/is"),s=e("../object/is"),m=e("../string/coerce"),x=e("./to-short-string"),t=function(i,a){return i.replace("%v",x(a))};z.exports=function(i,a,r){if(!s(r))throw new TypeError(t(a,i));if(!u(i)){if("default"in r)return r.default;if(r.isOptional)return null}var n=m(r.errorMessage);throw u(n)||(n=a),new TypeError(t(n,i))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(e,z,N){z.exports=function(u){try{return u.toString()}catch{try{return String(u)}catch{return null}}}},{}],319:[function(e,z,N){var u=e("./safe-to-string"),s=/[\n\r\u2028\u2029]/g;z.exports=function(m){var x=u(m);return x===null?"<Non-coercible to string value>":(x.length>100&&(x=x.slice(0,99)+"\u2026"),x=x.replace(s,function(t){switch(t){case`
`:return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}),x)}},{"./safe-to-string":318}],320:[function(e,z,N){var u=e("../value/is"),s={object:!0,function:!0,undefined:!0};z.exports=function(m){return u(m)?hasOwnProperty.call(s,typeof m):!1}},{"../value/is":326}],321:[function(e,z,N){var u=e("../lib/resolve-exception"),s=e("./is");z.exports=function(m){return s(m)?m:u(m,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(e,z,N){var u=e("../function/is"),s=/^\s*class[\s{/}]/,m=Function.prototype.toString;z.exports=function(x){return!(!u(x)||s.test(m.call(x)))}},{"../function/is":316}],323:[function(e,z,N){var u=e("../object/is");z.exports=function(s){if(!u(s))return!1;try{return s.constructor?s.constructor.prototype===s:!1}catch{return!1}}},{"../object/is":320}],324:[function(e,z,N){var u=e("../value/is"),s=e("../object/is"),m=Object.prototype.toString;z.exports=function(x){if(!u(x))return null;if(s(x)){var t=x.toString;if(typeof t!="function"||t===m)return null}try{return""+x}catch{return null}}},{"../object/is":320,"../value/is":326}],325:[function(e,z,N){var u=e("../lib/resolve-exception"),s=e("./is");z.exports=function(m){return s(m)?m:u(m,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(e,z,N){var u=void 0;z.exports=function(s){return s!==u&&s!==null}},{}],327:[function(e,z,N){(function(u){(function(){var s=e("bit-twiddle"),m=e("dup"),x=e("buffer").Buffer;u.__TYPEDARRAY_POOL||(u.__TYPEDARRAY_POOL={UINT8:m([32,0]),UINT16:m([32,0]),UINT32:m([32,0]),BIGUINT64:m([32,0]),INT8:m([32,0]),INT16:m([32,0]),INT32:m([32,0]),BIGINT64:m([32,0]),FLOAT:m([32,0]),DOUBLE:m([32,0]),DATA:m([32,0]),UINT8C:m([32,0]),BUFFER:m([32,0])});var t=typeof Uint8ClampedArray!="undefined",i=typeof BigUint64Array!="undefined",a=typeof BigInt64Array!="undefined",r=u.__TYPEDARRAY_POOL;r.UINT8C||(r.UINT8C=m([32,0])),r.BIGUINT64||(r.BIGUINT64=m([32,0])),r.BIGINT64||(r.BIGINT64=m([32,0])),r.BUFFER||(r.BUFFER=m([32,0]));var n=r.DATA,f=r.BUFFER;N.free=function(k){if(x.isBuffer(k))f[s.log2(k.length)].push(k);else{if(Object.prototype.toString.call(k)!=="[object ArrayBuffer]"&&(k=k.buffer),!k)return;var P=k.length||k.byteLength,O=s.log2(P)|0;n[O].push(k)}};function l(S){if(!!S){var k=S.length||S.byteLength,P=s.log2(k);n[P].push(S)}}function o(S){l(S.buffer)}N.freeUint8=N.freeUint16=N.freeUint32=N.freeBigUint64=N.freeInt8=N.freeInt16=N.freeInt32=N.freeBigInt64=N.freeFloat32=N.freeFloat=N.freeFloat64=N.freeDouble=N.freeUint8Clamped=N.freeDataView=o,N.freeArrayBuffer=l,N.freeBuffer=function(k){f[s.log2(k.length)].push(k)},N.malloc=function(k,P){if(P===void 0||P==="arraybuffer")return c(k);switch(P){case"uint8":return h(k);case"uint16":return d(k);case"uint32":return p(k);case"int8":return y(k);case"int16":return g(k);case"int32":return A(k);case"float":case"float32":return b(k);case"double":case"float64":return M(k);case"uint8_clamped":return _(k);case"bigint64":return w(k);case"biguint64":return T(k);case"buffer":return L(k);case"data":case"dataview":return v(k);default:return null}return null};function c(S){var S=s.nextPow2(S),k=s.log2(S),P=n[k];return P.length>0?P.pop():new ArrayBuffer(S)}N.mallocArrayBuffer=c;function h(S){return new Uint8Array(c(S),0,S)}N.mallocUint8=h;function d(S){return new Uint16Array(c(2*S),0,S)}N.mallocUint16=d;function p(S){return new Uint32Array(c(4*S),0,S)}N.mallocUint32=p;function y(S){return new Int8Array(c(S),0,S)}N.mallocInt8=y;function g(S){return new Int16Array(c(2*S),0,S)}N.mallocInt16=g;function A(S){return new Int32Array(c(4*S),0,S)}N.mallocInt32=A;function b(S){return new Float32Array(c(4*S),0,S)}N.mallocFloat32=N.mallocFloat=b;function M(S){return new Float64Array(c(8*S),0,S)}N.mallocFloat64=N.mallocDouble=M;function _(S){return t?new Uint8ClampedArray(c(S),0,S):h(S)}N.mallocUint8Clamped=_;function T(S){return i?new BigUint64Array(c(8*S),0,S):null}N.mallocBigUint64=T;function w(S){return a?new BigInt64Array(c(8*S),0,S):null}N.mallocBigInt64=w;function v(S){return new DataView(c(S),0,S)}N.mallocDataView=v;function L(S){S=s.nextPow2(S);var k=s.log2(S),P=f[k];return P.length>0?P.pop():new x(S)}N.mallocBuffer=L,N.clearCache=function(){for(var k=0;k<32;++k)r.UINT8[k].length=0,r.UINT16[k].length=0,r.UINT32[k].length=0,r.INT8[k].length=0,r.INT16[k].length=0,r.INT32[k].length=0,r.FLOAT[k].length=0,r.DOUBLE[k].length=0,r.BIGUINT64[k].length=0,r.BIGINT64[k].length=0,r.UINT8C[k].length=0,n[k].length=0,f[k].length=0}}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(e,z,N){var u=/[\'\"]/;z.exports=function(m){return m?(u.test(m.charAt(0))&&(m=m.substr(1)),u.test(m.charAt(m.length-1))&&(m=m.substr(0,m.length-1)),m):""}},{}],329:[function(e,z,N){z.exports=function(s,m,x){Array.isArray(x)||(x=[].slice.call(arguments,2));for(var t=0,i=x.length;t<i;t++){var a=x[t];for(var r in a)if(!(m[r]!==void 0&&!Array.isArray(m[r])&&s[r]===m[r])&&r in m){var n;if(a[r]===!0)n=m[r];else{if(a[r]===!1)continue;if(typeof a[r]=="function"&&(n=a[r](m[r],s,m),n===void 0))continue}s[r]=n}}return s}},{}],330:[function(e,z,N){(function(u){(function(){z.exports=s;function s(x,t){if(m("noDeprecation"))return x;var i=!1;function a(){if(!i){if(m("throwDeprecation"))throw new Error(t);m("traceDeprecation")?console.trace(t):console.warn(t),i=!0}return x.apply(this,arguments)}return a}function m(x){try{if(!u.localStorage)return!1}catch{return!1}var t=u.localStorage[x];return t==null?!1:String(t).toLowerCase()==="true"}}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],331:[function(e,z,N){var u=e("get-canvas-context");z.exports=function(m){return u("webgl",m)}},{"get-canvas-context":194}],332:[function(e,z,N){var u=e("../main"),s=e("object-assign"),m=u.instance();function x(c){this.local=this.regionalOptions[c||""]||this.regionalOptions[""]}x.prototype=new u.baseCalendar,s(x.prototype,{name:"Chinese",jdEpoch:17214255e-1,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(c,h){if(typeof c=="string"){var d=c.match(i);return d?d[0]:""}var p=this._validateYear(c),y=c.month(),g=""+this.toChineseMonth(p,y);return h&&g.length<2&&(g="0"+g),this.isIntercalaryMonth(p,y)&&(g+="i"),g},monthNames:function(c){if(typeof c=="string"){var h=c.match(a);return h?h[0]:""}var d=this._validateYear(c),p=c.month(),y=this.toChineseMonth(d,p),g=["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"][y-1];return this.isIntercalaryMonth(d,p)&&(g="\u95F0"+g),g},monthNamesShort:function(c){if(typeof c=="string"){var h=c.match(r);return h?h[0]:""}var d=this._validateYear(c),p=c.month(),y=this.toChineseMonth(d,p),g=["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"][y-1];return this.isIntercalaryMonth(d,p)&&(g="\u95F0"+g),g},parseMonth:function(c,h){c=this._validateYear(c);var d=parseInt(h),p;if(isNaN(d))h[0]==="\u95F0"&&(p=!0,h=h.substring(1)),h[h.length-1]==="\u6708"&&(h=h.substring(0,h.length-1)),d=1+["\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D","\u5341","\u5341\u4E00","\u5341\u4E8C"].indexOf(h);else{var y=h[h.length-1];p=y==="i"||y==="I"}var g=this.toMonthIndex(c,d,p);return g},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(c,h){if(c.year&&(c=c.year()),typeof c!="number"||c<1888||c>2111)throw h.replace(/\{0\}/,this.local.name);return c},toMonthIndex:function(c,h,d){var p=this.intercalaryMonth(c),y=d&&h!==p;if(y||h<1||h>12)throw u.local.invalidMonth.replace(/\{0\}/,this.local.name);var g;return p?!d&&h<=p?g=h-1:g=h:g=h-1,g},toChineseMonth:function(c,h){c.year&&(c=c.year(),h=c.month());var d=this.intercalaryMonth(c),p=d?12:11;if(h<0||h>p)throw u.local.invalidMonth.replace(/\{0\}/,this.local.name);var y;return d?h<d?y=h+1:y=h:y=h+1,y},intercalaryMonth:function(c){c=this._validateYear(c);var h=n[c-n[0]],d=h>>13;return d},isIntercalaryMonth:function(c,h){c.year&&(c=c.year(),h=c.month());var d=this.intercalaryMonth(c);return!!d&&d===h},leapYear:function(c){return this.intercalaryMonth(c)!==0},weekOfYear:function(c,h,d){var p=this._validateYear(c,u.local.invalidyear),y=f[p-f[0]],g=y>>9&4095,A=y>>5&15,b=y&31,M;M=m.newDate(g,A,b),M.add(4-(M.dayOfWeek()||7),"d");var _=this.toJD(c,h,d)-M.toJD();return 1+Math.floor(_/7)},monthsInYear:function(c){return this.leapYear(c)?13:12},daysInMonth:function(c,h){c.year&&(h=c.month(),c=c.year()),c=this._validateYear(c);var d=n[c-n[0]],p=d>>13,y=p?12:11;if(h>y)throw u.local.invalidMonth.replace(/\{0\}/,this.local.name);var g=d&1<<12-h?30:29;return g},weekDay:function(c,h,d){return(this.dayOfWeek(c,h,d)||7)<6},toJD:function(c,h,d){var p=this._validate(c,g,d,u.local.invalidDate);c=this._validateYear(p.year()),h=p.month(),d=p.day();var y=this.isIntercalaryMonth(c,h),g=this.toChineseMonth(c,h),A=o(c,g,d,y);return m.toJD(A.year,A.month,A.day)},fromJD:function(c){var h=m.fromJD(c),d=l(h.year(),h.month(),h.day()),p=this.toMonthIndex(d.year,d.month,d.isIntercalary);return this.newDate(d.year,p,d.day)},fromString:function(c){var h=c.match(t),d=this._validateYear(+h[1]),p=+h[2],y=!!h[3],g=this.toMonthIndex(d,p,y),A=+h[4];return this.newDate(d,g,A)},add:function(c,h,d){var p=c.year(),y=c.month(),g=this.isIntercalaryMonth(p,y),A=this.toChineseMonth(p,y),b=Object.getPrototypeOf(x.prototype).add.call(this,c,h,d);if(d==="y"){var M=b.year(),_=b.month(),T=this.isIntercalaryMonth(M,A),w=g&&T?this.toMonthIndex(M,A,!0):this.toMonthIndex(M,A,!1);w!==_&&b.month(w)}return b}});var t=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,i=/^\d?\d[iI]?/m,a=/^闰?十?[一二三四五六七八九]?月/m,r=/^闰?十?[一二三四五六七八九]?/m;u.calendars.chinese=x;var n=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],f=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904];function l(c,h,d,p){var y,g;if(typeof c=="object")y=c,g=h||{};else{var A=typeof c=="number"&&c>=1888&&c<=2111;if(!A)throw new Error("Solar year outside range 1888-2111");var b=typeof h=="number"&&h>=1&&h<=12;if(!b)throw new Error("Solar month outside range 1 - 12");var M=typeof d=="number"&&d>=1&&d<=31;if(!M)throw new Error("Solar day outside range 1 - 31");y={year:c,month:h,day:d},g=p||{}}var _=f[y.year-f[0]],T=y.year<<9|y.month<<5|y.day;g.year=T>=_?y.year:y.year-1,_=f[g.year-f[0]];var w=_>>9&4095,v=_>>5&15,L=_&31,S,k=new Date(w,v-1,L),P=new Date(y.year,y.month-1,y.day);S=Math.round((P-k)/(24*3600*1e3));var O=n[g.year-n[0]],F;for(F=0;F<13;F++){var I=O&1<<12-F?30:29;if(S<I)break;S-=I}var D=O>>13;return!D||F<D?(g.isIntercalary=!1,g.month=1+F):F===D?(g.isIntercalary=!0,g.month=F):(g.isIntercalary=!1,g.month=F),g.day=1+S,g}function o(c,h,d,p,y){var g,A;if(typeof c=="object")A=c,g=h||{};else{var b=typeof c=="number"&&c>=1888&&c<=2111;if(!b)throw new Error("Lunar year outside range 1888-2111");var M=typeof h=="number"&&h>=1&&h<=12;if(!M)throw new Error("Lunar month outside range 1 - 12");var _=typeof d=="number"&&d>=1&&d<=30;if(!_)throw new Error("Lunar day outside range 1 - 30");var T;typeof p=="object"?(T=!1,g=p):(T=!!p,g=y||{}),A={year:c,month:h,day:d,isIntercalary:T}}var w;w=A.day-1;var v=n[A.year-n[0]],L=v>>13,S;L&&(A.month>L||A.isIntercalary)?S=A.month:S=A.month-1;for(var k=0;k<S;k++){var P=v&1<<12-k?30:29;w+=P}var O=f[A.year-f[0]],F=O>>9&4095,I=O>>5&15,D=O&31,U=new Date(F,I-1,D+w);return g.year=U.getFullYear(),g.month=1+U.getMonth(),g.day=U.getDate(),g}},{"../main":346,"object-assign":247}],333:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Coptic",jdEpoch:18250295e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear),x=t.year()+(t.year()<0?1:0);return x%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear),13},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===13&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return(this.dayOfWeek(x,t,i)||7)<6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),x<0&&x++,a.day()+(a.month()-1)*30+(x-1)*365+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var t=Math.floor(x)+.5-this.jdEpoch,i=Math.floor((t-Math.floor((t+366)/1461))/365)+1;i<=0&&i--,t=Math.floor(x)+.5-this.newDate(i,1,1).toJD();var a=Math.floor(t/30)+1,r=t-(a-1)*30+1;return this.newDate(i,a,r)}}),u.calendars.coptic=m},{"../main":346,"object-assign":247}],334:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Discworld",jdEpoch:17214255e-1,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),!1},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),13},daysInYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),400},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/8)+1},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return(r.day()+1)%8},weekDay:function(t,i,a){var r=this.dayOfWeek(t,i,a);return r>=2&&r<=6},extraInfo:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return{century:x[Math.floor((r.year()-1)/100)+1]||""}},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return t=r.year()+(r.year()<0?1:0),i=r.month(),a=r.day(),a+(i>1?16:0)+(i>2?(i-2)*32:0)+(t-1)*400+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t+.5)-Math.floor(this.jdEpoch)-1;var i=Math.floor(t/400)+1;t-=(i-1)*400,t+=t>15?16:0;var a=Math.floor(t/32)+1,r=t-(a-1)*32+1;return this.newDate(i<=0?i-1:i,a,r)}});var x={20:"Fruitbat",21:"Anchovy"};u.calendars.discworld=m},{"../main":346,"object-assign":247}],335:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Ethiopian",jdEpoch:17242205e-1,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear),x=t.year()+(t.year()<0?1:0);return x%4==3||x%4==-1},monthsInYear:function(x){return this._validate(x,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear),13},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===13&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return(this.dayOfWeek(x,t,i)||7)<6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),x<0&&x++,a.day()+(a.month()-1)*30+(x-1)*365+Math.floor(x/4)+this.jdEpoch-1},fromJD:function(x){var t=Math.floor(x)+.5-this.jdEpoch,i=Math.floor((t-Math.floor((t+366)/1461))/365)+1;i<=0&&i--,t=Math.floor(x)+.5-this.newDate(i,1,1).toJD();var a=Math.floor(t/30)+1,r=t-(a-1)*30+1;return this.newDate(i,a,r)}}),u.calendars.ethiopian=m},{"../main":346,"object-assign":247}],336:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return this._leapYear(i.year())},_leapYear:function(t){return t=t<0?t+1:t,x(t*7+1,19)<7},monthsInYear:function(t){return this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),this._leapYear(t.year?t.year():t)?13:12},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return t=i.year(),this.toJD(t===-1?1:t+1,7,1)-this.toJD(t,7,1)},daysInMonth:function(t,i){return t.year&&(i=t.month(),t=t.year()),this._validate(t,i,this.minDay,u.local.invalidMonth),i===12&&this.leapYear(t)||i===8&&x(this.daysInYear(t),10)===5?30:i===9&&x(this.daysInYear(t),10)===3?29:this.daysPerMonth[i-1]},weekDay:function(t,i,a){return this.dayOfWeek(t,i,a)!==6},extraInfo:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);return{yearType:(this.leapYear(r)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(r)%10-3]}},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);t=r.year(),i=r.month(),a=r.day();var n=t<=0?t+1:t,f=this.jdEpoch+this._delay1(n)+this._delay2(n)+a+1;if(i<7){for(var l=7;l<=this.monthsInYear(t);l++)f+=this.daysInMonth(t,l);for(var l=1;l<i;l++)f+=this.daysInMonth(t,l)}else for(var l=7;l<i;l++)f+=this.daysInMonth(t,l);return f},_delay1:function(t){var i=Math.floor((235*t-234)/19),a=12084+13753*i,r=i*29+Math.floor(a/25920);return x(3*(r+1),7)<3&&r++,r},_delay2:function(t){var i=this._delay1(t-1),a=this._delay1(t),r=this._delay1(t+1);return r-a==356?2:a-i==382?1:0},fromJD:function(t){t=Math.floor(t)+.5;for(var i=Math.floor((t-this.jdEpoch)*98496/35975351)-1;t>=this.toJD(i===-1?1:i+1,7,1);)i++;for(var a=t<this.toJD(i,1,1)?7:1;t>this.toJD(i,a,this.daysInMonth(i,a));)a++;var r=t-this.toJD(i,a,1)+1;return this.newDate(i,a,r)}});function x(t,i){return t-i*Math.floor(t/i)}u.calendars.hebrew=m},{"../main":346,"object-assign":247}],337:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Islamic",jdEpoch:19484395e-1,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012Bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear);return(t.year()*11+14)%30<11},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(x){return this.leapYear(x)?355:354},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===12&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return this.dayOfWeek(x,t,i)!==5},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),t=a.month(),i=a.day(),x=x<=0?x+1:x,i+Math.ceil(29.5*(t-1))+(x-1)*354+Math.floor((3+11*x)/30)+this.jdEpoch-1},fromJD:function(x){x=Math.floor(x)+.5;var t=Math.floor((30*(x-this.jdEpoch)+10646)/10631);t=t<=0?t-1:t;var i=Math.min(12,Math.ceil((x-29-this.toJD(t,1,1))/29.5)+1),a=x-this.toJD(t,i,1)+1;return this.newDate(t,i,a)}}),u.calendars.islamic=m},{"../main":346,"object-assign":247}],338:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Julian",jdEpoch:17214235e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear),x=t.year()<0?t.year()+1:t.year();return x%4==0},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(x,t){var i=this._validate(x,t,this.minDay,u.local.invalidMonth);return this.daysPerMonth[i.month()-1]+(i.month()===2&&this.leapYear(i.year())?1:0)},weekDay:function(x,t,i){return(this.dayOfWeek(x,t,i)||7)<6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);return x=a.year(),t=a.month(),i=a.day(),x<0&&x++,t<=2&&(x--,t+=12),Math.floor(365.25*(x+4716))+Math.floor(30.6001*(t+1))+i-1524.5},fromJD:function(x){var t=Math.floor(x+.5),i=t+1524,a=Math.floor((i-122.1)/365.25),r=Math.floor(365.25*a),n=Math.floor((i-r)/30.6001),f=n-Math.floor(n<14?1:13),l=a-Math.floor(f>2?4716:4715),o=i-r-Math.floor(30.6001*n);return l<=0&&l--,this.newDate(l,f,o)}}),u.calendars.julian=m},{"../main":346,"object-assign":247}],339:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(i){this.local=this.regionalOptions[i||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(i){return this._validate(i,this.minMonth,this.minDay,u.local.invalidYear),!1},formatYear:function(i){var a=this._validate(i,this.minMonth,this.minDay,u.local.invalidYear);i=a.year();var r=Math.floor(i/400);i=i%400,i+=i<0?400:0;var n=Math.floor(i/20);return r+"."+n+"."+i%20},forYear:function(i){if(i=i.split("."),i.length<3)throw"Invalid Mayan year";for(var a=0,r=0;r<i.length;r++){var n=parseInt(i[r],10);if(Math.abs(n)>19||r>0&&n<0)throw"Invalid Mayan year";a=a*20+n}return a},monthsInYear:function(i){return this._validate(i,this.minMonth,this.minDay,u.local.invalidYear),18},weekOfYear:function(i,a,r){return this._validate(i,a,r,u.local.invalidDate),0},daysInYear:function(i){return this._validate(i,this.minMonth,this.minDay,u.local.invalidYear),360},daysInMonth:function(i,a){return this._validate(i,a,this.minDay,u.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(i,a,r){var n=this._validate(i,a,r,u.local.invalidDate);return n.day()},weekDay:function(i,a,r){return this._validate(i,a,r,u.local.invalidDate),!0},extraInfo:function(i,a,r){var n=this._validate(i,a,r,u.local.invalidDate),f=n.toJD(),l=this._toHaab(f),o=this._toTzolkin(f);return{haabMonthName:this.local.haabMonths[l[0]-1],haabMonth:l[0],haabDay:l[1],tzolkinDayName:this.local.tzolkinMonths[o[0]-1],tzolkinDay:o[0],tzolkinTrecena:o[1]}},_toHaab:function(i){i-=this.jdEpoch;var a=x(i+8+(18-1)*20,365);return[Math.floor(a/20)+1,x(a,20)]},_toTzolkin:function(i){return i-=this.jdEpoch,[t(i+20,20),t(i+4,13)]},toJD:function(i,a,r){var n=this._validate(i,a,r,u.local.invalidDate);return n.day()+n.month()*20+n.year()*360+this.jdEpoch},fromJD:function(i){i=Math.floor(i)+.5-this.jdEpoch;var a=Math.floor(i/360);i=i%360,i+=i<0?360:0;var r=Math.floor(i/20),n=i%20;return this.newDate(a,r,n)}});function x(i,a){return i-a*Math.floor(i/a)}function t(i,a){return x(i-1,a)+1}u.calendars.mayan=m},{"../main":346,"object-assign":247}],340:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar;var x=u.instance("gregorian");s(m.prototype,{name:"Nanakshahi",jdEpoch:22576735e-1,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear||u.regionalOptions[""].invalidYear);return x.leapYear(i.year()+(i.year()<1?1:0)+1469)},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(1-(r.dayOfWeek()||7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return(this.dayOfWeek(t,i,a)||7)<6},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidMonth),t=r.year();t<0&&t++;for(var n=r.day(),f=1;f<r.month();f++)n+=this.daysPerMonth[f-1];return n+x.toJD(t+1468,3,13)},fromJD:function(t){t=Math.floor(t+.5);for(var i=Math.floor((t-(this.jdEpoch-1))/366);t>=this.toJD(i+1,1,1);)i++;for(var a=t-Math.floor(this.toJD(i,1,1)+.5)+1,r=1;a>this.daysInMonth(i,r);)a-=this.daysInMonth(i,r),r++;return this.newDate(i,r,a)}}),u.calendars.nanakshahi=m},{"../main":346,"object-assign":247}],341:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(x){this.local=this.regionalOptions[x||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Nepali",jdEpoch:17007095e-1,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(x){return this.daysInYear(x)!==this.daysPerYear},weekOfYear:function(x,t,i){var a=this.newDate(x,t,i);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(x){var t=this._validate(x,this.minMonth,this.minDay,u.local.invalidYear);if(x=t.year(),typeof this.NEPALI_CALENDAR_DATA[x]=="undefined")return this.daysPerYear;for(var i=0,a=this.minMonth;a<=12;a++)i+=this.NEPALI_CALENDAR_DATA[x][a];return i},daysInMonth:function(x,t){return x.year&&(t=x.month(),x=x.year()),this._validate(x,t,this.minDay,u.local.invalidMonth),typeof this.NEPALI_CALENDAR_DATA[x]=="undefined"?this.daysPerMonth[t-1]:this.NEPALI_CALENDAR_DATA[x][t]},weekDay:function(x,t,i){return this.dayOfWeek(x,t,i)!==6},toJD:function(x,t,i){var a=this._validate(x,t,i,u.local.invalidDate);x=a.year(),t=a.month(),i=a.day();var r=u.instance(),n=0,f=t,l=x;this._createMissingCalendarData(x);var o=x-(f>9||f===9&&i>=this.NEPALI_CALENDAR_DATA[l][0]?56:57);for(t!==9&&(n=i,f--);f!==9;)f<=0&&(f=12,l--),n+=this.NEPALI_CALENDAR_DATA[l][f],f--;return t===9?(n+=i-this.NEPALI_CALENDAR_DATA[l][0],n<0&&(n+=r.daysInYear(o))):n+=this.NEPALI_CALENDAR_DATA[l][9]-this.NEPALI_CALENDAR_DATA[l][0],r.newDate(o,1,1).add(n,"d").toJD()},fromJD:function(x){var t=u.instance(),i=t.fromJD(x),a=i.year(),r=i.dayOfYear(),n=a+56;this._createMissingCalendarData(n);for(var f=9,l=this.NEPALI_CALENDAR_DATA[n][0],o=this.NEPALI_CALENDAR_DATA[n][f]-l+1;r>o;)f++,f>12&&(f=1,n++),o+=this.NEPALI_CALENDAR_DATA[n][f];var c=this.NEPALI_CALENDAR_DATA[n][f]-(o-r);return this.newDate(n,f,c)},_createMissingCalendarData:function(x){var t=this.daysPerMonth.slice(0);t.unshift(17);for(var i=x-1;i<x+2;i++)typeof this.NEPALI_CALENDAR_DATA[i]=="undefined"&&(this.NEPALI_CALENDAR_DATA[i]=t)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),u.calendars.nepali=m},{"../main":346,"object-assign":247}],342:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"Persian",jdEpoch:19483205e-1,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xE6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xE6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return((i.year()-(i.year()>0?474:473))%2820+474+38)*682%2816<682},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-((r.dayOfWeek()+1)%7),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===12&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return this.dayOfWeek(t,i,a)!==5},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate);t=r.year(),i=r.month(),a=r.day();var n=t-(t>=0?474:473),f=474+x(n,2820);return a+(i<=7?(i-1)*31:(i-1)*30+6)+Math.floor((f*682-110)/2816)+(f-1)*365+Math.floor(n/2820)*1029983+this.jdEpoch-1},fromJD:function(t){t=Math.floor(t)+.5;var i=t-this.toJD(475,1,1),a=Math.floor(i/1029983),r=x(i,1029983),n=2820;if(r!==1029982){var f=Math.floor(r/366),l=x(r,366);n=Math.floor((2134*f+2816*l+2815)/1028522)+f+1}var o=n+2820*a+474;o=o<=0?o-1:o;var c=t-this.toJD(o,1,1)+1,h=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),d=t-this.toJD(o,h,1)+1;return this.newDate(o,h,d)}});function x(t,i){return t-i*Math.floor(t/i)}u.calendars.persian=m,u.calendars.jalali=m},{"../main":346,"object-assign":247}],343:[function(e,z,N){var u=e("../main"),s=e("object-assign"),m=u.instance();function x(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}x.prototype=new u.baseCalendar,s(x.prototype,{name:"Taiwan",jdEpoch:24194025e-1,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(i.year());return m.leapYear(t)},weekOfYear:function(t,i,a){var r=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(r.year());return m.weekOfYear(t,r.month(),r.day())},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return(this.dayOfWeek(t,i,a)||7)<6},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate),t=this._t2gYear(r.year());return m.toJD(t,r.month(),r.day())},fromJD:function(t){var i=m.fromJD(t),a=this._g2tYear(i.year());return this.newDate(a,i.month(),i.day())},_t2gYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)},_g2tYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)}}),u.calendars.taiwan=x},{"../main":346,"object-assign":247}],344:[function(e,z,N){var u=e("../main"),s=e("object-assign"),m=u.instance();function x(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}x.prototype=new u.baseCalendar,s(x.prototype,{name:"Thai",jdEpoch:15230985e-1,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(i.year());return m.leapYear(t)},weekOfYear:function(t,i,a){var r=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear),t=this._t2gYear(r.year());return m.weekOfYear(t,r.month(),r.day())},daysInMonth:function(t,i){var a=this._validate(t,i,this.minDay,u.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(a.month()===2&&this.leapYear(a.year())?1:0)},weekDay:function(t,i,a){return(this.dayOfWeek(t,i,a)||7)<6},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate),t=this._t2gYear(r.year());return m.toJD(t,r.month(),r.day())},fromJD:function(t){var i=m.fromJD(t),a=this._g2tYear(i.year());return this.newDate(a,i.month(),i.day())},_t2gYear:function(t){return t-this.yearsOffset-(t>=1&&t<=this.yearsOffset?1:0)},_g2tYear:function(t){return t+this.yearsOffset+(t>=-this.yearsOffset&&t<=-1?1:0)}}),u.calendars.thai=x},{"../main":346,"object-assign":247}],345:[function(e,z,N){var u=e("../main"),s=e("object-assign");function m(t){this.local=this.regionalOptions[t||""]||this.regionalOptions[""]}m.prototype=new u.baseCalendar,s(m.prototype,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012Bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(t){var i=this._validate(t,this.minMonth,this.minDay,u.local.invalidYear);return this.daysInYear(i.year())===355},weekOfYear:function(t,i,a){var r=this.newDate(t,i,a);return r.add(-r.dayOfWeek(),"d"),Math.floor((r.dayOfYear()-1)/7)+1},daysInYear:function(t){for(var i=0,a=1;a<=12;a++)i+=this.daysInMonth(t,a);return i},daysInMonth:function(t,i){for(var a=this._validate(t,i,this.minDay,u.local.invalidMonth),r=a.toJD()-24e5+.5,n=0,f=0;f<x.length;f++){if(x[f]>r)return x[n]-x[n-1];n++}return 30},weekDay:function(t,i,a){return this.dayOfWeek(t,i,a)!==5},toJD:function(t,i,a){var r=this._validate(t,i,a,u.local.invalidDate),n=12*(r.year()-1)+r.month()-15292,f=r.day()+x[n-1]-1;return f+24e5-.5},fromJD:function(t){for(var i=t-24e5+.5,a=0,r=0;r<x.length&&!(x[r]>i);r++)a++;var n=a+15292,f=Math.floor((n-1)/12),l=f+1,o=n-12*f,c=i-x[a-1]+1;return this.newDate(l,o,c)},isValid:function(t,i,a){var r=u.baseCalendar.prototype.isValid.apply(this,arguments);return r&&(t=t.year!=null?t.year:t,r=t>=1276&&t<=1500),r},_validate:function(t,i,a,r){var n=u.baseCalendar.prototype._validate.apply(this,arguments);if(n.year<1276||n.year>1500)throw r.replace(/\{0\}/,this.local.name);return n}}),u.calendars.ummalqura=m;var x=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(e,z,N){var u=e("object-assign");function s(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}u(s.prototype,{instance:function(r,n){r=(r||"gregorian").toLowerCase(),n=n||"";var f=this._localCals[r+"-"+n];if(!f&&this.calendars[r]&&(f=new this.calendars[r](n),this._localCals[r+"-"+n]=f),!f)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,r);return f},newDate:function(r,n,f,l,o){return l=(r!=null&&r.year?r.calendar():typeof l=="string"?this.instance(l,o):l)||this.instance(),l.newDate(r,n,f)},substituteDigits:function(r){return function(n){return(n+"").replace(/[0-9]/g,function(f){return r[f]})}},substituteChineseDigits:function(r,n){return function(f){for(var l="",o=0;f>0;){var c=f%10;l=(c===0?"":r[c]+n[o])+l,o++,f=Math.floor(f/10)}return l.indexOf(r[1]+n[1])===0&&(l=l.substr(1)),l||r[0]}}});function m(r,n,f,l){if(this._calendar=r,this._year=n,this._month=f,this._day=l,this._calendar._validateLevel===0&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function x(r,n){return r=""+r,"000000".substring(0,n-r.length)+r}u(m.prototype,{newDate:function(r,n,f){return this._calendar.newDate(r==null?this:r,n,f)},year:function(r){return arguments.length===0?this._year:this.set(r,"y")},month:function(r){return arguments.length===0?this._month:this.set(r,"m")},day:function(r){return arguments.length===0?this._day:this.set(r,"d")},date:function(r,n,f){if(!this._calendar.isValid(r,n,f))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=r,this._month=n,this._day=f,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(r,n){return this._calendar.add(this,r,n)},set:function(r,n){return this._calendar.set(this,r,n)},compareTo:function(r){if(this._calendar.name!==r._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,r._calendar.local.name);var n=this._year!==r._year?this._year-r._year:this._month!==r._month?this.monthOfYear()-r.monthOfYear():this._day-r._day;return n===0?0:n<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(r){return this._calendar.fromJD(r)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(r){return this._calendar.fromJSDate(r)},toString:function(){return(this.year()<0?"-":"")+x(Math.abs(this.year()),4)+"-"+x(this.month(),2)+"-"+x(this.day(),2)}});function t(){this.shortYearCutoff="+10"}u(t.prototype,{_validateLevel:0,newDate:function(r,n,f){return r==null?this.today():(r.year&&(this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),f=r.day(),n=r.month(),r=r.year()),new m(this,r,n,f))},today:function(){return this.fromJSDate(new Date)},epoch:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return n.year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(n.year()<0?"-":"")+x(Math.abs(n.year()),4)},monthsInYear:function(r){return this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(r,n){var f=this._validate(r,n,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(f.month()+this.monthsInYear(f)-this.firstMonth)%this.monthsInYear(f)+this.minMonth},fromMonthOfYear:function(r,n){var f=(n+this.firstMonth-2*this.minMonth)%this.monthsInYear(r)+this.minMonth;return this._validate(r,f,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),f},daysInYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(n)?366:365},dayOfYear:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return l.toJD()-this.newDate(l.year(),this.fromMonthOfYear(l.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(l))+2)%this.daysInWeek()},extraInfo:function(r,n,f){return this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(r,n,f){return this._validate(r,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(r,this._add(r,n,f),n,f)},_add:function(r,n,f){if(this._validateLevel++,f==="d"||f==="w"){var l=r.toJD()+n*(f==="w"?this.daysInWeek():1),o=r.calendar().fromJD(l);return this._validateLevel--,[o.year(),o.month(),o.day()]}try{var c=r.year()+(f==="y"?n:0),h=r.monthOfYear()+(f==="m"?n:0),o=r.day(),d=function(g){for(;h<g.minMonth;)c--,h+=g.monthsInYear(c);for(var A=g.monthsInYear(c);h>A-1+g.minMonth;)c++,h-=A,A=g.monthsInYear(c)};f==="y"?(r.month()!==this.fromMonthOfYear(c,h)&&(h=this.newDate(c,r.month(),this.minDay).monthOfYear()),h=Math.min(h,this.monthsInYear(c)),o=Math.min(o,this.daysInMonth(c,this.fromMonthOfYear(c,h)))):f==="m"&&(d(this),o=Math.min(o,this.daysInMonth(c,this.fromMonthOfYear(c,h))));var p=[c,this.fromMonthOfYear(c,h),o];return this._validateLevel--,p}catch(y){throw this._validateLevel--,y}},_correctAdd:function(r,n,f,l){if(!this.hasYearZero&&(l==="y"||l==="m")&&(n[0]===0||r.year()>0!=n[0]>0)){var o={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[l],c=f<0?-1:1;n=this._add(r,f*o[0]+c*o[1],o[2])}return r.date(n[0],n[1],n[2])},set:function(r,n,f){this._validate(r,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var l=f==="y"?n:r.year(),o=f==="m"?n:r.month(),c=f==="d"?n:r.day();return(f==="y"||f==="m")&&(c=Math.min(c,this.daysInMonth(l,o))),r.date(l,o,c)},isValid:function(r,n,f){this._validateLevel++;var l=this.hasYearZero||r!==0;if(l){var o=this.newDate(r,n,this.minDay);l=n>=this.minMonth&&n-this.minMonth<this.monthsInYear(o)&&f>=this.minDay&&f-this.minDay<this.daysInMonth(o)}return this._validateLevel--,l},toJSDate:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(l)).toJSDate()},fromJSDate:function(r){return this.fromJD(a.instance().fromJSDate(r).toJD())},_validate:function(r,n,f,l){if(r.year){if(this._validateLevel===0&&this.name!==r.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,r.calendar().local.name);return r}try{if(this._validateLevel++,this._validateLevel===1&&!this.isValid(r,n,f))throw l.replace(/\{0\}/,this.local.name);var o=this.newDate(r,n,f);return this._validateLevel--,o}catch(c){throw this._validateLevel--,c}}});function i(r){this.local=this.regionalOptions[r]||this.regionalOptions[""]}i.prototype=new t,u(i.prototype,{name:"Gregorian",jdEpoch:17214255e-1,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(r){var n=this._validate(r,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),r=n.year()+(n.year()<0?1:0);return r%4==0&&(r%100!=0||r%400==0)},weekOfYear:function(r,n,f){var l=this.newDate(r,n,f);return l.add(4-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(r,n){var f=this._validate(r,n,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[f.month()-1]+(f.month()===2&&this.leapYear(f.year())?1:0)},weekDay:function(r,n,f){return(this.dayOfWeek(r,n,f)||7)<6},toJD:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate);r=l.year(),n=l.month(),f=l.day(),r<0&&r++,n<3&&(n+=12,r--);var o=Math.floor(r/100),c=2-o+Math.floor(o/4);return Math.floor(365.25*(r+4716))+Math.floor(30.6001*(n+1))+f+c-1524.5},fromJD:function(r){var n=Math.floor(r+.5),f=Math.floor((n-186721625e-2)/36524.25);f=n+1+f-Math.floor(f/4);var l=f+1524,o=Math.floor((l-122.1)/365.25),c=Math.floor(365.25*o),h=Math.floor((l-c)/30.6001),d=l-c-Math.floor(h*30.6001),p=h-(h>13.5?13:1),y=o-(p>2.5?4716:4715);return y<=0&&y--,this.newDate(y,p,d)},toJSDate:function(r,n,f){var l=this._validate(r,n,f,a.local.invalidDate||a.regionalOptions[""].invalidDate),o=new Date(l.year(),l.month()-1,l.day());return o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0),o.setHours(o.getHours()>12?o.getHours()+2:0),o},fromJSDate:function(r){return this.newDate(r.getFullYear(),r.getMonth()+1,r.getDate())}});var a=z.exports=new s;a.cdate=m,a.baseCalendar=t,a.calendars.gregorian=i},{"object-assign":247}],347:[function(e,z,N){var u=e("object-assign"),s=e("./main");u(s.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),s.local=s.regionalOptions[""],u(s.cdate.prototype,{formatDate:function(m,x){return typeof m!="string"&&(x=m,m=""),this._calendar.formatDate(m||"",this,x)}}),u(s.baseCalendar.prototype,{UNIX_EPOCH:s.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:24*60*60,TICKS_EPOCH:s.instance().jdEpoch,TICKS_PER_DAY:24*60*60*1e7,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(m,x,t){if(typeof m!="string"&&(t=x,x=m,m=""),!x)return"";if(x.calendar()!==this)throw s.local.invalidFormat||s.regionalOptions[""].invalidFormat;m=m||this.local.dateFormat,t=t||{};var i=t.dayNamesShort||this.local.dayNamesShort,a=t.dayNames||this.local.dayNames,r=t.monthNumbers||this.local.monthNumbers,n=t.monthNamesShort||this.local.monthNamesShort,f=t.monthNames||this.local.monthNames;t.calculateWeek||this.local.calculateWeek;for(var l=function(_,T){for(var w=1;M+w<m.length&&m.charAt(M+w)===_;)w++;return M+=w-1,Math.floor(w/(T||1))>1},o=function(_,T,w,v){var L=""+T;if(l(_,v))for(;L.length<w;)L="0"+L;return L},c=function(_,T,w,v){return l(_)?v[T]:w[T]},h=this,d=function(_){return typeof r=="function"?r.call(h,_,l("m")):g(o("m",_.month(),2))},p=function(_,T){return T?typeof f=="function"?f.call(h,_):f[_.month()-h.minMonth]:typeof n=="function"?n.call(h,_):n[_.month()-h.minMonth]},y=this.local.digits,g=function(_){return t.localNumbers&&y?y(_):_},A="",b=!1,M=0;M<m.length;M++)if(b)m.charAt(M)==="'"&&!l("'")?b=!1:A+=m.charAt(M);else switch(m.charAt(M)){case"d":A+=g(o("d",x.day(),2));break;case"D":A+=c("D",x.dayOfWeek(),i,a);break;case"o":A+=o("o",x.dayOfYear(),3);break;case"w":A+=o("w",x.weekOfYear(),2);break;case"m":A+=d(x);break;case"M":A+=p(x,l("M"));break;case"y":A+=l("y",2)?x.year():(x.year()%100<10?"0":"")+x.year()%100;break;case"Y":l("Y",2),A+=x.formatYear();break;case"J":A+=x.toJD();break;case"@":A+=(x.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":A+=(x.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?A+="'":b=!0;break;default:A+=m.charAt(M)}return A},parseDate:function(m,x,t){if(x==null)throw s.local.invalidArguments||s.regionalOptions[""].invalidArguments;if(x=typeof x=="object"?x.toString():x+"",x==="")return null;m=m||this.local.dateFormat,t=t||{};var i=t.shortYearCutoff||this.shortYearCutoff;i=typeof i!="string"?i:this.today().year()%100+parseInt(i,10);for(var a=t.dayNamesShort||this.local.dayNamesShort,r=t.dayNames||this.local.dayNames,n=t.parseMonth||this.local.parseMonth,f=t.monthNumbers||this.local.monthNumbers,l=t.monthNamesShort||this.local.monthNamesShort,o=t.monthNames||this.local.monthNames,c=-1,h=-1,d=-1,p=-1,y=-1,g=!1,A=!1,b=function(F,I){for(var D=1;k+D<m.length&&m.charAt(k+D)===F;)D++;return k+=D-1,Math.floor(D/(I||1))>1},M=function(F,I){var D=b(F,I),U=[2,3,D?4:2,D?4:2,10,11,20]["oyYJ@!".indexOf(F)+1],B=new RegExp("^-?\\d{1,"+U+"}"),j=x.substring(S).match(B);if(!j)throw(s.local.missingNumberAt||s.regionalOptions[""].missingNumberAt).replace(/\{0\}/,S);return S+=j[0].length,parseInt(j[0],10)},_=this,T=function(){if(typeof f=="function"){b("m");var F=f.call(_,x.substring(S));return S+=F.length,F}return M("m")},w=function(F,I,D,U){for(var B=b(F,U)?D:I,j=0;j<B.length;j++)if(x.substr(S,B[j].length).toLowerCase()===B[j].toLowerCase())return S+=B[j].length,j+_.minMonth;throw(s.local.unknownNameAt||s.regionalOptions[""].unknownNameAt).replace(/\{0\}/,S)},v=function(){if(typeof o=="function"){var F=b("M")?o.call(_,x.substring(S)):l.call(_,x.substring(S));return S+=F.length,F}return w("M",l,o)},L=function(){if(x.charAt(S)!==m.charAt(k))throw(s.local.unexpectedLiteralAt||s.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,S);S++},S=0,k=0;k<m.length;k++)if(A)m.charAt(k)==="'"&&!b("'")?A=!1:L();else switch(m.charAt(k)){case"d":p=M("d");break;case"D":w("D",a,r);break;case"o":y=M("o");break;case"w":M("w");break;case"m":d=T();break;case"M":d=v();break;case"y":var P=k;g=!b("y",2),k=P,h=M("y",2);break;case"Y":h=M("Y",2);break;case"J":c=M("J")+.5,x.charAt(S)==="."&&(S++,M("J"));break;case"@":c=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":S=x.length;break;case"'":b("'")?L():A=!0;break;default:L()}if(S<x.length)throw s.local.unexpectedText||s.regionalOptions[""].unexpectedText;if(h===-1?h=this.today().year():h<100&&g&&(h+=i===-1?1900:this.today().year()-this.today().year()%100-(h<=i?0:100)),typeof d=="string"&&(d=n.call(this,h,d)),y>-1){d=1,p=y;for(var O=this.daysInMonth(h,d);p>O;O=this.daysInMonth(h,d))d++,p-=O}return c>-1?this.fromJD(c):this.newDate(h,d,p)},determineDate:function(m,x,t,i,a){t&&typeof t!="object"&&(a=i,i=t,t=null),typeof i!="string"&&(a=i,i="");var r=this,n=function(f){try{return r.parseDate(i,f,a)}catch{}f=f.toLowerCase();for(var l=(f.match(/^c/)&&t?t.newDate():null)||r.today(),o=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,c=o.exec(f);c;)l.add(parseInt(c[1],10),c[2]||"d"),c=o.exec(f);return l};return x=x?x.newDate():null,m=m==null?x:typeof m=="string"?n(m):typeof m=="number"?isNaN(m)||m===1/0||m===-1/0?x:r.today().add(m,"d"):r.newDate(m),m}})},{"./main":346,"object-assign":247}],348:[function(e,z,N){z.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(e,z,N){var u=e("./arrow_paths"),s=e("../../plots/font_attributes"),m=e("../../plots/cartesian/constants"),x=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),z.exports=x("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:s({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:u.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:u.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",m.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:s({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("./draw").draw;z.exports=function(a){var r=a._fullLayout,n=u.filterVisible(r.annotations);if(n.length&&a._fullData.length)return u.syncOrAsync([m,x],a)};function x(i){var a=i._fullLayout;u.filterVisible(a.annotations).forEach(function(r){var n=s.getFromId(i,r.xref),f=s.getFromId(i,r.yref),l=s.getRefType(r.xref),o=s.getRefType(r.yref);r._extremes={},l==="range"&&t(r,n),o==="range"&&t(r,f)})}function t(i,a){var r=a._id,n=r.charAt(0),f=i[n],l=i["a"+n],o=i[n+"ref"],c=i["a"+n+"ref"],h=i["_"+n+"padplus"],d=i["_"+n+"padminus"],p={x:1,y:-1}[n]*i[n+"shift"],y=3*i.arrowsize*i.arrowwidth||0,g=y+p,A=y-p,b=3*i.startarrowsize*i.arrowwidth||0,M=b+p,_=b-p,T;if(c===o){var w=s.findExtremes(a,[a.r2c(f)],{ppadplus:g,ppadminus:A}),v=s.findExtremes(a,[a.r2c(l)],{ppadplus:Math.max(h,M),ppadminus:Math.max(d,_)});T={min:[w.min[0],v.min[0]],max:[w.max[0],v.max[0]]}}else M=l?M+l:M,_=l?_-l:_,T=s.findExtremes(a,[a.r2c(f)],{ppadplus:Math.max(h,g,M),ppadminus:Math.max(d,A,_)});i._extremes[r]=T}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(e,z,N){var u=e("../../lib"),s=e("../../registry"),m=e("../../plot_api/plot_template").arrayEditor;z.exports={hasClickToShow:x,onClick:t};function x(r,n){var f=i(r,n);return f.on.length>0||f.explicitOff.length>0}function t(r,n){var f=i(r,n),l=f.on,o=f.off.concat(f.explicitOff),c={},h=r._fullLayout.annotations,d,p;if(!!(l.length||o.length)){for(d=0;d<l.length;d++)p=m(r.layout,"annotations",h[l[d]]),p.modifyItem("visible",!0),u.extendFlat(c,p.getUpdateObj());for(d=0;d<o.length;d++)p=m(r.layout,"annotations",h[o[d]]),p.modifyItem("visible",!1),u.extendFlat(c,p.getUpdateObj());return s.call("update",r,{},c)}}function i(r,n){var f=r._fullLayout.annotations,l=[],o=[],c=[],h=(n||[]).length,d,p,y,g,A,b,M,_;for(d=0;d<f.length;d++)if(y=f[d],g=y.clicktoshow,g){for(p=0;p<h;p++)if(A=n[p],b=A.xaxis,M=A.yaxis,b._id===y.xref&&M._id===y.yref&&b.d2r(A.x)===a(y._xclick,b)&&M.d2r(A.y)===a(y._yclick,M)){y.visible?g==="onout"?_=o:_=c:_=l,_.push(d);break}p===h&&y.visible&&g==="onout"&&o.push(d)}return{on:l,off:o,explicitOff:c}}function a(r,n){return n.type==="log"?n.l2r(r):n.d2r(r)}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(e,z,N){var u=e("../../lib"),s=e("../color");z.exports=function(x,t,i,a){a("opacity");var r=a("bgcolor"),n=a("bordercolor"),f=s.opacity(n);a("borderpad");var l=a("borderwidth"),o=a("showarrow");a("text",o?" ":i._dfltTitle.annotation),a("textangle"),u.coerceFont(a,"font",i.font),a("width"),a("align");var c=a("height");if(c&&a("valign"),o){var h=a("arrowside"),d,p;h.indexOf("end")!==-1&&(d=a("arrowhead"),p=a("arrowsize")),h.indexOf("start")!==-1&&(a("startarrowhead",d),a("startarrowsize",p)),a("arrowcolor",f?t.bordercolor:s.defaultLine),a("arrowwidth",(f&&l||1)*2),a("standoff"),a("startstandoff")}var y=a("hovertext"),g=i.hoverlabel||{};if(y){var A=a("hoverlabel.bgcolor",g.bgcolor||(s.opacity(r)?s.rgb(r):s.defaultLine)),b=a("hoverlabel.bordercolor",g.bordercolor||s.contrast(A));u.coerceFont(a,"hoverlabel.font",{family:g.font.family,size:g.font.size,color:g.font.color||b})}a("captureevents",!!y)}},{"../../lib":503,"../color":366}],353:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib/to_log_range");z.exports=function(x,t,i,a){t=t||{};var r=i==="log"&&t.type==="linear",n=i==="linear"&&t.type==="log";if(!(r||n))return;var f=x._fullLayout.annotations,l=t._id.charAt(0),o,c;function h(p){var y=o[p],g=null;r?g=s(y,t.range):g=Math.pow(10,y),u(g)||(g=null),a(c+p,g)}for(var d=0;d<f.length;d++)o=f[d],c="annotations["+d+"].",o[l+"ref"]===t._id&&h(l),o["a"+l+"ref"]===t._id&&h("a"+l)}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./common_defaults"),t=e("./attributes");z.exports=function(r,n){m(r,n,{name:"annotations",handleItemDefaults:i})};function i(a,r,n){function f(L,S){return u.coerce(a,r,t,L,S)}var l=f("visible"),o=f("clicktoshow");if(!!(l||o)){x(a,r,n,f);for(var c=r.showarrow,h=["x","y"],d=[-10,-30],p={_fullLayout:n},y=0;y<2;y++){var g=h[y],A=s.coerceRef(a,r,p,g,"","paper");if(A!=="paper"){var b=s.getFromId(p,A);b._annIndices.push(r._index)}if(s.coercePosition(r,p,f,A,g,.5),c){var M="a"+g,_=s.coerceRef(a,r,p,M,"pixel",["pixel","paper"]);_!=="pixel"&&_!==A&&(_=r[M]="pixel");var T=_==="pixel"?d[y]:.4;s.coercePosition(r,p,f,_,M,T)}f(g+"anchor"),f(g+"shift")}if(u.noneOrAll(a,r,["x","y"]),c&&u.noneOrAll(a,r,["ax","ay"]),o){var w=f("xclick"),v=f("yclick");r._xclick=w===void 0?r.x:s.cleanPosition(w,p,r.xref),r._yclick=v===void 0?r.y:s.cleanPosition(v,p,r.yref)}}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../plots/plots"),x=e("../../lib"),t=x.strTranslate,i=e("../../plots/cartesian/axes"),a=e("../color"),r=e("../drawing"),n=e("../fx"),f=e("../../lib/svg_text_utils"),l=e("../../lib/setcursor"),o=e("../dragelement"),c=e("../../plot_api/plot_template").arrayEditor,h=e("./draw_arrow_head");z.exports={draw:d,drawOne:p,drawRaw:g};function d(A){var b=A._fullLayout;b._infolayer.selectAll(".annotation").remove();for(var M=0;M<b.annotations.length;M++)b.annotations[M].visible&&p(A,M);return m.previousPromises(A)}function p(A,b){var M=A._fullLayout,_=M.annotations[b]||{},T=i.getFromId(A,_.xref),w=i.getFromId(A,_.yref);T&&T.setScale(),w&&w.setScale(),g(A,_,b,!1,T,w)}function y(A,b,M,_,T){var w=T[M],v=T[M+"ref"],L=M.indexOf("y")!==-1,S=i.getRefType(v)==="domain",k=L?_.h:_.w;return A?S?w+(L?-b:b)/A._length:A.p2r(A.r2p(w)+b):w+(L?-b:b)/k}function g(A,b,M,_,T,w){var v=A._fullLayout,L=A._fullLayout._size,S=A._context.edits,k,P;_?(k="annotation-"+_,P=_+".annotations"):(k="annotation",P="annotations");var O=c(A.layout,P,b),F=O.modifyBase,I=O.modifyItem,D=O.getUpdateObj;v._infolayer.selectAll("."+k+'[data-index="'+M+'"]').remove();var U="clip"+v._uid+"_ann"+M;if(!b._input||b.visible===!1){u.selectAll("#"+U).remove();return}var B={x:{},y:{}},j=+b.textangle||0,Z=v._infolayer.append("g").classed(k,!0).attr("data-index",String(M)).style("opacity",b.opacity),ee=Z.append("g").classed("annotation-text-g",!0),q=S[b.showarrow?"annotationTail":"annotationPosition"],W=b.captureevents||S.annotationText||q;function J(ue){var ye={index:M,annotation:b._input,fullAnnotation:b,event:ue};return _&&(ye.subplotId=_),ye}var le=ee.append("g").style("pointer-events",W?"all":null).call(l,"pointer").on("click",function(){A._dragging=!1,A.emit("plotly_clickannotation",J(u.event))});b.hovertext&&le.on("mouseover",function(){var ue=b.hoverlabel,ye=ue.font,ce=this.getBoundingClientRect(),me=A.getBoundingClientRect();n.loneHover({x0:ce.left-me.left,x1:ce.right-me.left,y:(ce.top+ce.bottom)/2-me.top,text:b.hovertext,color:ue.bgcolor,borderColor:ue.bordercolor,fontFamily:ye.family,fontSize:ye.size,fontColor:ye.color},{container:v._hoverlayer.node(),outerContainer:v._paper.node(),gd:A})}).on("mouseout",function(){n.loneUnhover(v._hoverlayer.node())});var fe=b.borderwidth,se=b.borderpad,H=fe+se,Y=le.append("rect").attr("class","bg").style("stroke-width",fe+"px").call(a.stroke,b.bordercolor).call(a.fill,b.bgcolor),ne=b.width||b.height,te=v._topclips.selectAll("#"+U).data(ne?[0]:[]);te.enter().append("clipPath").classed("annclip",!0).attr("id",U).append("rect"),te.exit().remove();var K=b.font,$=v._meta?x.templateString(b.text,v._meta):b.text,ae=le.append("text").classed("annotation-text",!0).text($);function ie(ue){return ue.call(r.font,K).attr({"text-anchor":{left:"start",right:"end"}[b.align]||"middle"}),f.convertToTspans(ue,A,oe),ue}function oe(){var ue=ae.selectAll("a");if(ue.size()===1&&ue.text()===ae.text()){var ye=le.insert("a",":first-child").attr({"xlink:xlink:href":ue.attr("xlink:href"),"xlink:xlink:show":ue.attr("xlink:show")}).style({cursor:"pointer"});ye.node().appendChild(Y.node())}var ce=le.select(".annotation-text-math-group"),me=!ce.empty(),xe=r.bBox((me?ce:ae).node()),ke=xe.width,Ae=xe.height,Oe=b.width||ke,He=b.height||Ae,Ge=Math.round(Oe+2*H),_e=Math.round(He+2*H);function Re(Lr,kr){return kr==="auto"&&(Lr<1/3?kr="left":Lr>2/3?kr="right":kr="center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[kr]}for(var We=!1,qe=["x","y"],Ue=0;Ue<qe.length;Ue++){var Ie=qe[Ue],Ve=b[Ie+"ref"]||Ie,dt=b["a"+Ie+"ref"],Rt={x:T,y:w}[Ie],Gt=(j+(Ie==="x"?0:-90))*Math.PI/180,kt=Ge*Math.cos(Gt),zt=_e*Math.sin(Gt),Bt=Math.abs(kt)+Math.abs(zt),Lt=b[Ie+"anchor"],Mt=b[Ie+"shift"]*(Ie==="x"?1:-1),it=B[Ie],ht,Qe,Ce,Xe,rt,ut=i.getRefType(Ve);if(Rt&&ut!=="domain"){var Pt=Rt.r2fraction(b[Ie]);(Pt<0||Pt>1)&&(dt===Ve?(Pt=Rt.r2fraction(b["a"+Ie]),(Pt<0||Pt>1)&&(We=!0)):We=!0),ht=Rt._offset+Rt.r2p(b[Ie]),Xe=.5}else{var St=ut==="domain";Ie==="x"?(Ce=b[Ie],ht=St?Rt._offset+Rt._length*Ce:ht=L.l+L.w*Ce):(Ce=1-b[Ie],ht=St?Rt._offset+Rt._length*Ce:ht=L.t+L.h*Ce),Xe=b.showarrow?.5:Ce}if(b.showarrow){it.head=ht;var Nt=b["a"+Ie];if(rt=kt*Re(.5,b.xanchor)-zt*Re(.5,b.yanchor),dt===Ve){var jt=i.getRefType(dt);jt==="domain"?(Ie==="y"&&(Nt=1-Nt),it.tail=Rt._offset+Rt._length*Nt):jt==="paper"?Ie==="y"?(Nt=1-Nt,it.tail=L.t+L.h*Nt):it.tail=L.l+L.w*Nt:it.tail=Rt._offset+Rt.r2p(Nt),Qe=rt}else it.tail=ht+Nt,Qe=rt+Nt;it.text=it.tail+rt;var Ot=v[Ie==="x"?"width":"height"];if(Ve==="paper"&&(it.head=x.constrain(it.head,1,Ot-1)),dt==="pixel"){var Kt=-Math.max(it.tail-3,it.text),Je=Math.min(it.tail+3,it.text)-Ot;Kt>0?(it.tail+=Kt,it.text+=Kt):Je>0&&(it.tail-=Je,it.text-=Je)}it.tail+=Mt,it.head+=Mt}else rt=Bt*Re(Xe,Lt),Qe=rt,it.text=ht+rt;it.text+=Mt,rt+=Mt,Qe+=Mt,b["_"+Ie+"padplus"]=Bt/2+Qe,b["_"+Ie+"padminus"]=Bt/2-Qe,b["_"+Ie+"size"]=Bt,b["_"+Ie+"shift"]=rt}if(We){le.remove();return}var gt=0,Et=0;if(b.align!=="left"&&(gt=(Oe-ke)*(b.align==="center"?.5:1)),b.valign!=="top"&&(Et=(He-Ae)*(b.valign==="middle"?.5:1)),me)ce.select("svg").attr({x:H+gt-1,y:H+Et}).call(r.setClipUrl,ne?U:null,A);else{var rr=H+Et-xe.top,vr=H+gt-xe.left;ae.call(f.positionText,vr,rr).call(r.setClipUrl,ne?U:null,A)}te.select("rect").call(r.setRect,H,H,Oe,He),Y.call(r.setRect,fe/2,fe/2,Ge-fe,_e-fe),le.call(r.setTranslate,Math.round(B.x.text-Ge/2),Math.round(B.y.text-_e/2)),ee.attr({transform:"rotate("+j+","+B.x.text+","+B.y.text+")"});var or=function(Lr,kr){Z.selectAll(".annotation-arrow-g").remove();var tr=B.x.head,Or=B.y.head,et=B.x.tail+Lr,we=B.y.tail+kr,Se=B.x.text+Lr,De=B.y.text+kr,je=x.rotationXYMatrix(j,Se,De),$e=x.apply2DTransform(je),ot=x.apply2DTransform2(je),st=+Y.attr("width"),pt=+Y.attr("height"),wt=Se-.5*st,Wt=wt+st,yr=De-.5*pt,xr=yr+pt,Tr=[[wt,yr,wt,xr],[wt,xr,Wt,xr],[Wt,xr,Wt,yr],[Wt,yr,wt,yr]].map(ot);if(!Tr.reduce(function(at,Ft){return at^!!x.segmentsIntersect(tr,Or,tr+1e6,Or+1e6,Ft[0],Ft[1],Ft[2],Ft[3])},!1)){Tr.forEach(function(at){var Ft=x.segmentsIntersect(et,we,tr,Or,at[0],at[1],at[2],at[3]);Ft&&(et=Ft.x,we=Ft.y)});var mr=b.arrowwidth,Rr=b.arrowcolor,tn=b.arrowside,wr=Z.append("g").style({opacity:a.opacity(Rr)}).classed("annotation-arrow-g",!0),gr=wr.append("path").attr("d","M"+et+","+we+"L"+tr+","+Or).style("stroke-width",mr+"px").call(a.stroke,a.rgb(Rr));if(h(gr,tn,b),S.annotationPosition&&gr.node().parentNode&&!_){var mn=tr,Gr=Or;if(b.standoff){var Ar=Math.sqrt(Math.pow(tr-et,2)+Math.pow(Or-we,2));mn+=b.standoff*(et-tr)/Ar,Gr+=b.standoff*(we-Or)/Ar}var nn=wr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(et-mn)+","+(we-Gr),transform:t(mn,Gr)}).style("stroke-width",mr+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)"),fn,jr;o.init({element:nn.node(),gd:A,prepFn:function(){var at=r.getTranslate(le);fn=at.x,jr=at.y,T&&T.autorange&&F(T._name+".autorange",!0),w&&w.autorange&&F(w._name+".autorange",!0)},moveFn:function(at,Ft){var er=$e(fn,jr),hr=er[0]+at,Wr=er[1]+Ft;le.call(r.setTranslate,hr,Wr),I("x",y(T,at,"x",L,b)),I("y",y(w,Ft,"y",L,b)),b.axref===b.xref&&I("ax",y(T,at,"ax",L,b)),b.ayref===b.yref&&I("ay",y(w,Ft,"ay",L,b)),wr.attr("transform",t(at,Ft)),ee.attr({transform:"rotate("+j+","+hr+","+Wr+")"})},doneFn:function(){s.call("_guiRelayout",A,D());var at=document.querySelector(".js-notes-box-panel");at&&at.redraw(at.selectedObj)}})}}};if(b.showarrow&&or(0,0),q){var dr;o.init({element:le.node(),gd:A,prepFn:function(){dr=ee.attr("transform")},moveFn:function(Lr,kr){var tr="pointer";if(b.showarrow)b.axref===b.xref?I("ax",y(T,Lr,"ax",L,b)):I("ax",b.ax+Lr),b.ayref===b.yref?I("ay",y(w,kr,"ay",L.w,b)):I("ay",b.ay+kr),or(Lr,kr);else{if(_)return;var Or,et;if(T)Or=y(T,Lr,"x",L,b);else{var we=b._xsize/L.w,Se=b.x+(b._xshift-b.xshift)/L.w-we/2;Or=o.align(Se+Lr/L.w,we,0,1,b.xanchor)}if(w)et=y(w,kr,"y",L,b);else{var De=b._ysize/L.h,je=b.y-(b._yshift+b.yshift)/L.h-De/2;et=o.align(je-kr/L.h,De,0,1,b.yanchor)}I("x",Or),I("y",et),(!T||!w)&&(tr=o.getCursor(T?.5:Or,w?.5:et,b.xanchor,b.yanchor))}ee.attr({transform:t(Lr,kr)+dr}),l(le,tr)},clickFn:function(Lr,kr){b.captureevents&&A.emit("plotly_clickannotation",J(kr))},doneFn:function(){l(le),s.call("_guiRelayout",A,D());var Lr=document.querySelector(".js-notes-box-panel");Lr&&Lr.redraw(Lr.selectedObj)}})}}S.annotationText?ae.call(f.makeEditable,{delegate:le,gd:A}).call(ie).on("edit",function(ue){b.text=ue,this.call(ie),I("text",ue),T&&T.autorange&&F(T._name+".autorange",!0),w&&w.autorange&&F(w._name+".autorange",!0),s.call("_guiRelayout",A,D())}):ae.call(ie)}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(e,z,N){var u=e("@plotly/d3"),s=e("../color"),m=e("./arrow_paths"),x=e("../../lib"),t=x.strScale,i=x.strRotate,a=x.strTranslate;z.exports=function(n,f,l){var o=n.node(),c=m[l.arrowhead||0],h=m[l.startarrowhead||0],d=(l.arrowwidth||1)*(l.arrowsize||1),p=(l.arrowwidth||1)*(l.startarrowsize||1),y=f.indexOf("start")>=0,g=f.indexOf("end")>=0,A=c.backoff*d+l.standoff,b=h.backoff*p+l.startstandoff,M,_,T,w;if(o.nodeName==="line"){M={x:+n.attr("x1"),y:+n.attr("y1")},_={x:+n.attr("x2"),y:+n.attr("y2")};var v=M.x-_.x,L=M.y-_.y;if(T=Math.atan2(L,v),w=T+Math.PI,A&&b&&A+b>Math.sqrt(v*v+L*L)){ee();return}if(A){if(A*A>v*v+L*L){ee();return}var S=A*Math.cos(T),k=A*Math.sin(T);_.x+=S,_.y+=k,n.attr({x2:_.x,y2:_.y})}if(b){if(b*b>v*v+L*L){ee();return}var P=b*Math.cos(T),O=b*Math.sin(T);M.x-=P,M.y-=O,n.attr({x1:M.x,y1:M.y})}}else if(o.nodeName==="path"){var F=o.getTotalLength(),I="";if(F<A+b){ee();return}var D=o.getPointAtLength(0),U=o.getPointAtLength(.1);T=Math.atan2(D.y-U.y,D.x-U.x),M=o.getPointAtLength(Math.min(b,F)),I="0px,"+b+"px,";var B=o.getPointAtLength(F),j=o.getPointAtLength(F-.1);w=Math.atan2(B.y-j.y,B.x-j.x),_=o.getPointAtLength(Math.max(0,F-A));var Z=I?b+A:A;I+=F-Z+"px,"+F+"px",n.style("stroke-dasharray",I)}function ee(){n.style("stroke-dasharray","0px,100px")}function q(W,J,le,fe){!W.path||(W.noRotate&&(le=0),u.select(o.parentNode).append("path").attr({class:n.attr("class"),d:W.path,transform:a(J.x,J.y)+i(le*180/Math.PI)+t(fe)}).style({fill:s.rgb(l.arrowcolor),"stroke-width":0}))}y&&q(h,M,T,p),g&&q(c,_,w,d)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(e,z,N){var u=e("./draw"),s=e("./click");z.exports={moduleType:"component",name:"annotations",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("annotations"),calcAutorange:e("./calc_autorange"),draw:u.draw,drawOne:u.drawOne,drawRaw:u.drawRaw,hasClickToShow:s.hasClickToShow,onClick:s.onClick,convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(e,z,N){var u=e("../annotations/attributes"),s=e("../../plot_api/edit_types").overrideAll,m=e("../../plot_api/plot_template").templatedArray;z.exports=s(m("annotation",{visible:u.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:u.xanchor,xshift:u.xshift,yanchor:u.yanchor,yshift:u.yshift,text:u.text,textangle:u.textangle,font:u.font,width:u.width,height:u.height,opacity:u.opacity,align:u.align,valign:u.valign,bgcolor:u.bgcolor,bordercolor:u.bordercolor,borderpad:u.borderpad,borderwidth:u.borderwidth,showarrow:u.showarrow,arrowcolor:u.arrowcolor,arrowhead:u.arrowhead,startarrowhead:u.startarrowhead,arrowside:u.arrowside,arrowsize:u.arrowsize,startarrowsize:u.startarrowsize,arrowwidth:u.arrowwidth,standoff:u.standoff,startstandoff:u.startstandoff,hovertext:u.hovertext,hoverlabel:u.hoverlabel,captureevents:u.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes");z.exports=function(t){for(var i=t.fullSceneLayout,a=i.annotations,r=0;r<a.length;r++)m(a[r],t);t.fullLayout._infolayer.selectAll(".annotation-"+t.id).remove()};function m(x,t){var i=t.fullSceneLayout,a=i.domain,r=t.fullLayout._size,n={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};x._xa={},u.extendFlat(x._xa,n),s.setConvert(x._xa),x._xa._offset=r.l+a.x[0]*r.w,x._xa.l2p=function(){return .5*(1+x._pdata[0]/x._pdata[3])*r.w*(a.x[1]-a.x[0])},x._ya={},u.extendFlat(x._ya,n),s.setConvert(x._ya),x._ya._offset=r.t+(1-a.y[1])*r.h,x._ya.l2p=function(){return .5*(1-x._pdata[1]/x._pdata[3])*r.h*(a.y[1]-a.y[0])}}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("../annotations/common_defaults"),t=e("./attributes");z.exports=function(r,n,f){m(r,n,{name:"annotations",handleItemDefaults:i,fullLayout:f.fullLayout})};function i(a,r,n,f){function l(h,d){return u.coerce(a,r,t,h,d)}function o(h){var d=h+"axis",p={_fullLayout:{}};return p._fullLayout[d]=n[d],s.coercePosition(r,p,l,h,h,.5)}var c=l("visible");!c||(x(a,r,f.fullLayout,l),o("x"),o("y"),o("z"),u.noneOrAll(a,r,["x","y","z"]),r.xref="x",r.yref="y",r.zref="z",l("xanchor"),l("yanchor"),l("xshift"),l("yshift"),r.showarrow&&(r.axref="pixel",r.ayref="pixel",l("ax",-10),l("ay",-30),u.noneOrAll(a,r,["ax","ay"])))}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(e,z,N){var u=e("../annotations/draw").drawRaw,s=e("../../plots/gl3d/project"),m=["x","y","z"];z.exports=function(t){for(var i=t.fullSceneLayout,a=t.dataScale,r=i.annotations,n=0;n<r.length;n++){for(var f=r[n],l=!1,o=0;o<3;o++){var c=m[o],h=f[c],d=i[c+"axis"],p=d.r2fraction(h);if(p<0||p>1){l=!0;break}}l?t.fullLayout._infolayer.select(".annotation-"+t.id+'[data-index="'+n+'"]').remove():(f._pdata=s(t.glplot.cameraParams,[i.xaxis.r2l(f.x)*a[0],i.yaxis.r2l(f.y)*a[1],i.zaxis.r2l(f.z)*a[2]]),u(t.graphDiv,f,n,t.id,f._xa,f._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(e,z,N){var u=e("../../registry"),s=e("../../lib");z.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),includeBasePlot:m,convert:e("./convert"),draw:e("./draw")};function m(x,t){var i=u.subplotsRegistry.gl3d;if(!!i)for(var a=i.attrRegex,r=Object.keys(x),n=0;n<r.length;n++){var f=r[n];a.test(f)&&(x[f].annotations||[]).length&&(s.pushUnique(t._basePlotModules,i),s.pushUnique(t._subplots.gl3d,f))}}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(e,z,N){z.exports=e("world-calendars/dist/main"),e("world-calendars/dist/plus"),e("world-calendars/dist/calendars/chinese"),e("world-calendars/dist/calendars/coptic"),e("world-calendars/dist/calendars/discworld"),e("world-calendars/dist/calendars/ethiopian"),e("world-calendars/dist/calendars/hebrew"),e("world-calendars/dist/calendars/islamic"),e("world-calendars/dist/calendars/julian"),e("world-calendars/dist/calendars/mayan"),e("world-calendars/dist/calendars/nanakshahi"),e("world-calendars/dist/calendars/nepali"),e("world-calendars/dist/calendars/persian"),e("world-calendars/dist/calendars/taiwan"),e("world-calendars/dist/calendars/thai"),e("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(e,z,N){var u=e("./calendars"),s=e("../../lib"),m=e("../../constants/numerical"),x=m.EPOCHJD,t=m.ONEDAY,i={valType:"enumerated",values:s.sortObjectKeys(u.calendars),editType:"calc",dflt:"gregorian"},a=function(T,w,v,L){var S={};return S[v]=i,s.coerce(T,w,S,v,L)},r=function(T,w,v,L){for(var S=0;S<v.length;S++)a(T,w,v[S]+"calendar",L.calendar)},n={chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},f={chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},l={chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},o="##",c={d:{"0":"dd","-":"d"},e:{"0":"d","-":"d"},a:{"0":"D","-":"D"},A:{"0":"DD","-":"DD"},j:{"0":"oo","-":"o"},W:{"0":"ww","-":"w"},m:{"0":"mm","-":"m"},b:{"0":"M","-":"M"},B:{"0":"MM","-":"MM"},y:{"0":"yy","-":"yy"},Y:{"0":"yyyy","-":"yyyy"},U:o,w:o,c:{"0":"D M d %X yyyy","-":"D M d %X yyyy"},x:{"0":"mm/dd/yyyy","-":"mm/dd/yyyy"}};function h(T,w,v){for(var L=Math.floor((w+.05)/t)+x,S=p(v).fromJD(L),k=0,P,O,F,I,D;(k=T.indexOf("%",k))!==-1;)P=T.charAt(k+1),P==="0"||P==="-"||P==="_"?(F=3,O=T.charAt(k+2),P==="_"&&(P="-")):(O=P,P="0",F=2),I=c[O],I?(I===o?D=o:D=S.formatDate(I[P]),T=T.substr(0,k)+D+T.substr(k+F),k+=D.length):k+=F;return T}var d={};function p(T){var w=d[T];return w||(w=d[T]=u.instance(T),w)}function y(T){return s.extendFlat({},i,{description:T})}function g(T){return"Sets the calendar system to use with `"+T+"` date data."}var A={xcalendar:y(g("x"))},b=s.extendFlat({},A,{ycalendar:y(g("y"))}),M=s.extendFlat({},b,{zcalendar:y(g("z"))}),_=y(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));z.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:b,bar:b,box:b,heatmap:b,contour:b,histogram:b,histogram2d:b,histogram2dcontour:b,scatter3d:M,surface:M,mesh3d:M,scattergl:b,ohlc:A,candlestick:A},layout:{calendar:y(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:_},yaxis:{calendar:_},scene:{xaxis:{calendar:_},yaxis:{calendar:_},zaxis:{calendar:_}},polar:{radialaxis:{calendar:_}}},transforms:{filter:{valuecalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:y(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:i,handleDefaults:a,handleTraceDefaults:r,CANONICAL_SUNDAY:f,CANONICAL_TICK:n,DFLTRANGE:l,getCal:p,worldCalFmt:h}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(e,z,N){N.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],N.defaultLine="#444",N.lightLine="#eee",N.background="#fff",N.borderLine="#BEC8D9",N.lightFraction=100*(14-4)/(15-4)},{}],366:[function(e,z,N){var u=e("tinycolor2"),s=e("fast-isnumeric"),m=e("../../lib/array").isTypedArray,x=z.exports={},t=e("./attributes");x.defaults=t.defaults;var i=x.defaultLine=t.defaultLine;x.lightLine=t.lightLine;var a=x.background=t.background;x.tinyRGB=function(n){var f=n.toRgb();return"rgb("+Math.round(f.r)+", "+Math.round(f.g)+", "+Math.round(f.b)+")"},x.rgb=function(n){return x.tinyRGB(u(n))},x.opacity=function(n){return n?u(n).getAlpha():0},x.addOpacity=function(n,f){var l=u(n).toRgb();return"rgba("+Math.round(l.r)+", "+Math.round(l.g)+", "+Math.round(l.b)+", "+f+")"},x.combine=function(n,f){var l=u(n).toRgb();if(l.a===1)return u(n).toRgbString();var o=u(f||a).toRgb(),c=o.a===1?o:{r:255*(1-o.a)+o.r*o.a,g:255*(1-o.a)+o.g*o.a,b:255*(1-o.a)+o.b*o.a},h={r:c.r*(1-l.a)+l.r*l.a,g:c.g*(1-l.a)+l.g*l.a,b:c.b*(1-l.a)+l.b*l.a};return u(h).toRgbString()},x.contrast=function(n,f,l){var o=u(n);o.getAlpha()!==1&&(o=u(x.combine(n,a)));var c=o.isDark()?f?o.lighten(f):a:l?o.darken(l):i;return c.toString()},x.stroke=function(n,f){var l=u(f);n.style({stroke:x.tinyRGB(l),"stroke-opacity":l.getAlpha()})},x.fill=function(n,f){var l=u(f);n.style({fill:x.tinyRGB(l),"fill-opacity":l.getAlpha()})},x.clean=function(n){if(!(!n||typeof n!="object")){var f=Object.keys(n),l,o,c,h;for(l=0;l<f.length;l++)if(c=f[l],h=n[c],c.substr(c.length-5)==="color")if(Array.isArray(h))for(o=0;o<h.length;o++)h[o]=r(h[o]);else n[c]=r(h);else if(c.substr(c.length-10)==="colorscale"&&Array.isArray(h))for(o=0;o<h.length;o++)Array.isArray(h[o])&&(h[o][1]=r(h[o][1]));else if(Array.isArray(h)){var d=h[0];if(!Array.isArray(d)&&d&&typeof d=="object")for(o=0;o<h.length;o++)x.clean(h[o])}else h&&typeof h=="object"&&!m(h)&&x.clean(h)}};function r(n){if(s(n)||typeof n!="string")return n;var f=n.trim();if(f.substr(0,3)!=="rgb")return n;var l=f.match(/^rgba?\s*\(([^()]*)\)$/);if(!l)return n;var o=l[1].trim().split(/\s*[\s,]\s*/),c=f.charAt(3)==="a"&&o.length===4;if(!c&&o.length!==3)return n;for(var h=0;h<o.length;h++){if(!o[h].length||(o[h]=Number(o[h]),!(o[h]>=0)))return n;if(h===3)o[h]>1&&(o[h]=1);else if(o[h]>=1)return n}var d=Math.round(o[0]*255)+", "+Math.round(o[1]*255)+", "+Math.round(o[2]*255);return c?"rgba("+d+", "+o[3]+")":"rgb("+d+")"}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(e,z,N){var u=e("../../plots/cartesian/layout_attributes"),s=e("../../plots/font_attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll;z.exports=x({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:u.linecolor,outlinewidth:u.linewidth,bordercolor:u.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:u.tickmode,nticks:u.nticks,tick0:u.tick0,dtick:u.dtick,tickvals:u.tickvals,ticktext:u.ticktext,ticks:m({},u.ticks,{dflt:""}),ticklabeloverflow:m({},u.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:u.ticklen,tickwidth:u.tickwidth,tickcolor:u.tickcolor,showticklabels:u.showticklabels,tickfont:s({}),tickangle:u.tickangle,tickformat:u.tickformat,tickformatstops:u.tickformatstops,tickprefix:u.tickprefix,showtickprefix:u.showtickprefix,ticksuffix:u.ticksuffix,showticksuffix:u.showticksuffix,separatethousands:u.separatethousands,exponentformat:u.exponentformat,minexponent:u.minexponent,showexponent:u.showexponent,title:{text:{valType:"string"},font:s({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:s({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(e,z,N){z.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(e,z,N){var u=e("../../lib"),s=e("../../plot_api/plot_template"),m=e("../../plots/cartesian/tick_value_defaults"),x=e("../../plots/cartesian/tick_mark_defaults"),t=e("../../plots/cartesian/tick_label_defaults"),i=e("../../plots/cartesian/prefix_suffix_defaults"),a=e("./attributes");z.exports=function(n,f,l){var o=s.newContainer(f,"colorbar"),c=n.colorbar||{};function h(S,k){return u.coerce(c,o,a,S,k)}var d=l.margin||{t:0,b:0,l:0,r:0},p=l.width-d.l-d.r,y=l.height-d.t-d.b,g=h("orientation"),A=g==="v",b=h("thicknessmode");h("thickness",b==="fraction"?30/(A?p:y):30);var M=h("lenmode");h("len",M==="fraction"?1:A?y:p),h("x",A?1.02:.5),h("xanchor",A?"left":"center"),h("xpad"),h("y",A?.5:1.02),h("yanchor",A?"middle":"bottom"),h("ypad"),u.noneOrAll(c,o,["x","y"]),h("outlinecolor"),h("outlinewidth"),h("bordercolor"),h("borderwidth"),h("bgcolor");var _=u.coerce(c,o,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:A?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");h("ticklabeloverflow",_.indexOf("inside")!==-1?"hide past domain":"hide past div"),m(c,o,h,"linear");var T=l.font,w={outerTicks:!1,font:T};_.indexOf("inside")!==-1&&(w.bgColor="black"),i(c,o,h,"linear",w),t(c,o,h,"linear",w),x(c,o,h,"linear",w),h("title.text",l._dfltTitle.colorbar);var v=o.tickfont,L=u.extendFlat({},v,{color:T.color,size:u.bigFont(v.size)});u.coerceFont(h,"title.font",L),h("title.side",A?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(e,z,N){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../plots/cartesian/axes"),i=e("../dragelement"),a=e("../../lib"),r=a.strTranslate,n=e("../../lib/extend").extendFlat,f=e("../../lib/setcursor"),l=e("../drawing"),o=e("../color"),c=e("../titles"),h=e("../../lib/svg_text_utils"),d=e("../colorscale/helpers").flipScale,p=e("../../plots/cartesian/axis_defaults"),y=e("../../plots/cartesian/position_defaults"),g=e("../../plots/cartesian/layout_attributes"),A=e("../../constants/alignment"),b=A.LINE_SPACING,M=A.FROM_TL,_=A.FROM_BR,T=e("./constants").cn;function w(O){var F=O._fullLayout,I=F._infolayer.selectAll("g."+T.colorbar).data(v(O),function(D){return D._id});I.enter().append("g").attr("class",function(D){return D._id}).classed(T.colorbar,!0),I.each(function(D){var U=u.select(this);a.ensureSingle(U,"rect",T.cbbg),a.ensureSingle(U,"g",T.cbfills),a.ensureSingle(U,"g",T.cblines),a.ensureSingle(U,"g",T.cbaxis,function(j){j.classed(T.crisp,!0)}),a.ensureSingle(U,"g",T.cbtitleunshift,function(j){j.append("g").classed(T.cbtitle,!0)}),a.ensureSingle(U,"rect",T.cboutline);var B=L(U,D,O);B&&B.then&&(O._promises||[]).push(B),O._context.edits.colorbarPosition&&S(U,D,O)}),I.exit().each(function(D){m.autoMargin(O,D._id)}).remove(),I.order()}function v(O){var F=O._fullLayout,I=O.calcdata,D=[],U,B,j,Z;function ee(K){return n(K,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function q(){typeof Z.calc=="function"?Z.calc(O,j,U):(U._fillgradient=B.reversescale?d(B.colorscale):B.colorscale,U._zrange=[B[Z.min],B[Z.max]])}for(var W=0;W<I.length;W++){var J=I[W];j=J[0].trace;var le=j._module.colorbar;if(j.visible===!0&&le)for(var fe=Array.isArray(le),se=fe?le:[le],H=0;H<se.length;H++){Z=se[H];var Y=Z.container;B=Y?j[Y]:j,B&&B.showscale&&(U=ee(B.colorbar),U._id="cb"+j.uid+(fe&&Y?"-"+Y:""),U._traceIndex=j.index,U._propPrefix=(Y?Y+".":"")+"colorbar.",U._meta=j._meta,q(),D.push(U))}}for(var ne in F._colorAxes)if(B=F[ne],B.showscale){var te=F._colorAxes[ne];U=ee(B.colorbar),U._id="cb"+ne,U._propPrefix=ne+".colorbar.",U._meta=F._meta,Z={min:"cmin",max:"cmax"},te[0]!=="heatmap"&&(j=te[1],Z.calc=j._module.colorbar.calc),q(),D.push(U)}return D}function L(O,F,I){var D=F.orientation==="v",U=F.len,B=F.lenmode,j=F.thickness,Z=F.thicknessmode,ee=F.outlinewidth,q=F.borderwidth,W=F.bgcolor,J=F.xanchor,le=F.yanchor,fe=F.xpad,se=F.ypad,H=F.x,Y=D?F.y:1-F.y,ne=I._fullLayout,te=ne._size,K=F._fillcolor,$=F._line,ae=F.title,ie=ae.side,oe=F._zrange||u.extent((typeof K=="function"?K:$.color).domain()),ue=typeof $.color=="function"?$.color:function(){return $.color},ye=typeof K=="function"?K:function(){return K},ce=F._levels,me=k(I,F,oe),xe=me.fill,ke=me.line,Ae=Math.round(j*(Z==="fraction"?D?te.w:te.h:1)),Oe=Ae/(D?te.w:te.h),He=Math.round(U*(B==="fraction"?D?te.h:te.w:1)),Ge=He/(D?te.h:te.w),_e=Math.round(D?H*te.w+fe:Y*te.h+se),Re={center:.5,right:1}[J]||0,We={top:1,middle:.5}[le]||0,qe=D?H-Re*Oe:Y-We*Oe,Ue=D?Y-We*Ge:H-Re*Ge,Ie=Math.round(D?te.h*(1-Ue):te.w*Ue);F._lenFrac=Ge,F._thickFrac=Oe,F._uFrac=qe,F._vFrac=Ue;var Ve=F._axis=P(I,F,oe);Ve.position=Oe+(D?H+fe/te.w:Y+se/te.h);var dt=["top","bottom"].indexOf(ie)!==-1;if(D&&dt&&(Ve.title.side=ie,Ve.titlex=H+fe/te.w,Ve.titley=Ue+(ae.side==="top"?Ge-se/te.h:se/te.h)),!D&&!dt&&(Ve.title.side=ie,Ve.titley=Y+se/te.h,Ve.titlex=Ue+fe/te.w),$.color&&F.tickmode==="auto"){Ve.tickmode="linear",Ve.tick0=ce.start;var Rt=ce.size,Gt=a.constrain(He/50,4,15)+1,kt=(oe[1]-oe[0])/((F.nticks||Gt)*Rt);if(kt>1){var zt=Math.pow(10,Math.floor(Math.log(kt)/Math.LN10));Rt*=zt*a.roundUp(kt/zt,[2,5,10]),(Math.abs(ce.start)/ce.size+1e-6)%1<2e-6&&(Ve.tick0=0)}Ve.dtick=Rt}Ve.domain=D?[Ue+se/te.h,Ue+Ge-se/te.h]:[Ue+fe/te.w,Ue+Ge-fe/te.w],Ve.setScale(),O.attr("transform",r(Math.round(te.l),Math.round(te.t)));var Bt=O.select("."+T.cbtitleunshift).attr("transform",r(-Math.round(te.l),-Math.round(te.t))),Lt=Ve.ticklabelposition,Mt=Ve.title.font.size,it=O.select("."+T.cbaxis),ht,Qe=0,Ce=0;function Xe(Nt,jt){var Ot={propContainer:Ve,propName:F._propPrefix+"title",traceIndex:F._traceIndex,_meta:F._meta,placeholder:ne._dfltTitle.colorbar,containerGroup:O.select("."+T.cbtitle)},Kt=Nt.charAt(0)==="h"?Nt.substr(1):"h"+Nt;O.selectAll("."+Kt+",."+Kt+"-math-group").remove(),c.draw(I,Nt,n(Ot,jt||{}))}function rt(){if(D&&dt||!D&&!dt){var Nt,jt;ie==="top"&&(Nt=fe+te.l+te.w*H,jt=se+te.t+te.h*(1-Ue-Ge)+3+Mt*.75),ie==="bottom"&&(Nt=fe+te.l+te.w*H,jt=se+te.t+te.h*(1-Ue)-3-Mt*.25),ie==="right"&&(jt=se+te.t+te.h*Y+3+Mt*.75,Nt=fe+te.l+te.w*Ue),Xe(Ve._id+"title",{attributes:{x:Nt,y:jt,"text-anchor":D?"start":"middle"}})}}function ut(){if(D&&!dt||!D&&dt){var Nt=Ve.position||0,jt=Ve._offset+Ve._length/2,Ot,Kt;if(ie==="right")Kt=jt,Ot=te.l+te.w*Nt+10+Mt*(Ve.showticklabels?1:.5);else if(Ot=jt,ie==="bottom"&&(Kt=te.t+te.h*Nt+10+(Lt.indexOf("inside")===-1?Ve.tickfont.size:0)+(Ve.ticks!=="intside"&&F.ticklen||0)),ie==="top"){var Je=ae.text.split("<br>").length;Kt=te.t+te.h*Nt+10-Ae-b*Mt*Je}Xe((D?"h":"v")+Ve._id+"title",{avoid:{selection:u.select(I).selectAll("g."+Ve._id+"tick"),side:ie,offsetTop:D?0:te.t,offsetLeft:D?te.l:0,maxShift:D?ne.width:ne.height},attributes:{x:Ot,y:Kt,"text-anchor":"middle"},transform:{rotate:D?-90:0,offset:0}})}}function Pt(){if(!D&&!dt||D&&dt){var Nt=O.select("."+T.cbtitle),jt=Nt.select("text"),Ot=[-ee/2,ee/2],Kt=Nt.select(".h"+Ve._id+"title-math-group").node(),Je=15.6;jt.node()&&(Je=parseInt(jt.node().style.fontSize,10)*b);var gt;if(Kt?(gt=l.bBox(Kt),Ce=gt.width,Qe=gt.height,Qe>Je&&(Ot[1]-=(Qe-Je)/2)):jt.node()&&!jt.classed(T.jsPlaceholder)&&(gt=l.bBox(jt.node()),Ce=gt.width,Qe=gt.height),D){if(Qe){if(Qe+=5,ie==="top")Ve.domain[1]-=Qe/te.h,Ot[1]*=-1;else{Ve.domain[0]+=Qe/te.h;var Et=h.lineCount(jt);Ot[1]+=(1-Et)*Je}Nt.attr("transform",r(Ot[0],Ot[1])),Ve.setScale()}}else Ce&&(ie==="right"&&(Ve.domain[0]+=(Ce+Mt/2)/te.w),Nt.attr("transform",r(Ot[0],Ot[1])),Ve.setScale())}O.selectAll("."+T.cbfills+",."+T.cblines).attr("transform",D?r(0,Math.round(te.h*(1-Ve.domain[1]))):r(Math.round(te.w*Ve.domain[0]),0)),it.attr("transform",D?r(0,Math.round(-te.t)):r(Math.round(-te.l),0));var rr=O.select("."+T.cbfills).selectAll("rect."+T.cbfill).attr("style","").data(xe);rr.enter().append("rect").classed(T.cbfill,!0).style("stroke","none"),rr.exit().remove();var vr=oe.map(Ve.c2p).map(Math.round).sort(function(tr,Or){return tr-Or});rr.each(function(tr,Or){var et=[Or===0?oe[0]:(xe[Or]+xe[Or-1])/2,Or===xe.length-1?oe[1]:(xe[Or]+xe[Or+1])/2].map(Ve.c2p).map(Math.round);D&&(et[1]=a.constrain(et[1]+(et[1]>et[0])?1:-1,vr[0],vr[1]));var we=u.select(this).attr(D?"x":"y",_e).attr(D?"y":"x",u.min(et)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(u.max(et)-u.min(et),2));if(F._fillgradient)l.gradient(we,I,F._id,D?"vertical":"horizontalreversed",F._fillgradient,"fill");else{var Se=ye(tr).replace("e-","");we.attr("fill",s(Se).toHexString())}});var or=O.select("."+T.cblines).selectAll("path."+T.cbline).data($.color&&$.width?ke:[]);or.enter().append("path").classed(T.cbline,!0),or.exit().remove(),or.each(function(tr){var Or=_e,et=Math.round(Ve.c2p(tr))+$.width/2%1;u.select(this).attr("d","M"+(D?Or+","+et:et+","+Or)+(D?"h":"v")+Ae).call(l.lineGroupStyle,$.width,ue(tr),$.dash)}),it.selectAll("g."+Ve._id+"tick,path").remove();var dr=_e+Ae+(ee||0)/2-(F.ticks==="outside"?1:0),Lr=t.calcTicks(Ve),kr=t.getTickSigns(Ve)[2];return t.drawTicks(I,Ve,{vals:Ve.ticks==="inside"?t.clipEnds(Ve,Lr):Lr,layer:it,path:t.makeTickPath(Ve,dr,kr),transFn:t.makeTransTickFn(Ve)}),t.drawLabels(I,Ve,{vals:Lr,layer:it,transFn:t.makeTransTickLabelFn(Ve),labelFns:t.makeLabelFns(Ve,dr)})}function St(){var Nt,jt=Ae+ee/2;Lt.indexOf("inside")===-1&&(Nt=l.bBox(it.node()),jt+=D?Nt.width:Nt.height),ht=Bt.select("text");var Ot=0,Kt=D&&ie==="top",Je=!D&&ie==="right",gt=0;if(ht.node()&&!ht.classed(T.jsPlaceholder)){var Et,rr=Bt.select(".h"+Ve._id+"title-math-group").node();rr&&(D&&dt||!D&&!dt)?(Nt=l.bBox(rr),Ot=Nt.width,Et=Nt.height):(Nt=l.bBox(Bt.node()),Ot=Nt.right-te.l-(D?_e:Ie),Et=Nt.bottom-te.t-(D?Ie:_e),!D&&ie==="top"&&(jt+=Nt.height,gt=Nt.height)),Je&&(ht.attr("transform",r(Ot/2+Mt/2,0)),Ot*=2),jt=Math.max(jt,D?Ot:Et)}var vr=(D?fe:se)*2+jt+q+ee/2,or=0;!D&&ae.text&&le==="bottom"&&Y<=0&&(or=vr/2,vr+=or,gt+=or),ne._hColorbarMoveTitle=or,ne._hColorbarMoveCBTitle=gt;var dr=q+ee;O.select("."+T.cbbg).attr("x",(D?_e:Ie)-dr/2-(D?fe:0)).attr("y",(D?Ie:_e)-(D?He:se+gt-or)).attr(D?"width":"height",Math.max(vr-or,2)).attr(D?"height":"width",Math.max(He+dr,2)).call(o.fill,W).call(o.stroke,F.bordercolor).style("stroke-width",q);var Lr=Je?Math.max(Ot-10,0):0;if(O.selectAll("."+T.cboutline).attr("x",(D?_e:Ie+fe)+Lr).attr("y",(D?Ie+se-He:_e)+(Kt?Qe:0)).attr(D?"width":"height",Math.max(Ae,2)).attr(D?"height":"width",Math.max(He-(D?2*se+Qe:2*fe+Lr),2)).call(o.stroke,F.outlinecolor).style({fill:"none","stroke-width":ee}),O.attr("transform",r(te.l-(D?Re*vr:0),te.t-(D?0:(1-We)*vr-gt))),!D&&(q||s(W).getAlpha()&&!s.equals(ne.paper_bgcolor,W))){var kr=it.selectAll("text"),tr=kr[0].length,Or=O.select("."+T.cbbg).node(),et=l.bBox(Or),we=l.getTranslate(O),Se=2;kr.each(function(wt,Wt){var yr=0,xr=tr-1;if(Wt===yr||Wt===xr){var Tr=l.bBox(this),mr=l.getTranslate(this),Rr;if(Wt===xr){var tn=Tr.right+mr.x,wr=et.right+we.x+Ie-q-Se+H;Rr=wr-tn,Rr>0&&(Rr=0)}else if(Wt===yr){var gr=Tr.left+mr.x,mn=et.left+we.x+Ie+q+Se;Rr=mn-gr,Rr<0&&(Rr=0)}Rr&&(tr<3?this.setAttribute("transform","translate("+Rr+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var De={},je=M[J],$e=_[J],ot=M[le],st=_[le],pt=vr-Ae;D?(B==="pixels"?(De.y=Y,De.t=He*ot,De.b=He*st):(De.t=De.b=0,De.yt=Y+U*ot,De.yb=Y-U*st),Z==="pixels"?(De.x=H,De.l=vr*je,De.r=vr*$e):(De.l=pt*je,De.r=pt*$e,De.xl=H-j*je,De.xr=H+j*$e)):(B==="pixels"?(De.x=H,De.l=He*je,De.r=He*$e):(De.l=De.r=0,De.xl=H+U*je,De.xr=H-U*$e),Z==="pixels"?(De.y=1-Y,De.t=vr*ot,De.b=vr*st):(De.t=pt*ot,De.b=pt*st,De.yt=Y-j*ot,De.yb=Y+j*st)),m.autoMargin(I,F._id,De)}return a.syncOrAsync([m.previousPromises,rt,Pt,ut,m.previousPromises,St],I)}function S(O,F,I){var D=F.orientation==="v",U=I._fullLayout,B=U._size,j,Z,ee;i.init({element:O.node(),gd:I,prepFn:function(){j=O.attr("transform"),f(O)},moveFn:function(q,W){O.attr("transform",j+r(q,W)),Z=i.align((D?F._uFrac:F._vFrac)+q/B.w,D?F._thickFrac:F._lenFrac,0,1,F.xanchor),ee=i.align((D?F._vFrac:1-F._uFrac)-W/B.h,D?F._lenFrac:F._thickFrac,0,1,F.yanchor);var J=i.getCursor(Z,ee,F.xanchor,F.yanchor);f(O,J)},doneFn:function(){if(f(O),Z!==void 0&&ee!==void 0){var q={};q[F._propPrefix+"x"]=Z,q[F._propPrefix+"y"]=ee,F._traceIndex!==void 0?x.call("_guiRestyle",I,q,F._traceIndex):x.call("_guiRelayout",I,q)}}})}function k(O,F,I){var D=F._levels,U=[],B=[],j,Z,ee=D.end+D.size/100,q=D.size,W=1.001*I[0]-.001*I[1],J=1.001*I[1]-.001*I[0];for(Z=0;Z<1e5&&(j=D.start+Z*q,!(q>0?j>=ee:j<=ee));Z++)j>W&&j<J&&U.push(j);if(F._fillgradient)B=[0];else if(typeof F._fillcolor=="function"){var le=F._filllevels;if(le)for(ee=le.end+le.size/100,q=le.size,Z=0;Z<1e5&&(j=le.start+Z*q,!(q>0?j>=ee:j<=ee));Z++)j>I[0]&&j<I[1]&&B.push(j);else B=U.map(function(fe){return fe-D.size/2}),B.push(B[B.length-1]+D.size)}else F._fillcolor&&typeof F._fillcolor=="string"&&(B=[0]);return D.size<0&&(U.reverse(),B.reverse()),{line:U,fill:B}}function P(O,F,I){var D=O._fullLayout,U=F.orientation==="v",B={type:"linear",range:I,tickmode:F.tickmode,nticks:F.nticks,tick0:F.tick0,dtick:F.dtick,tickvals:F.tickvals,ticktext:F.ticktext,ticks:F.ticks,ticklen:F.ticklen,tickwidth:F.tickwidth,tickcolor:F.tickcolor,showticklabels:F.showticklabels,ticklabelposition:F.ticklabelposition,ticklabeloverflow:F.ticklabeloverflow,tickfont:F.tickfont,tickangle:F.tickangle,tickformat:F.tickformat,exponentformat:F.exponentformat,minexponent:F.minexponent,separatethousands:F.separatethousands,showexponent:F.showexponent,showtickprefix:F.showtickprefix,tickprefix:F.tickprefix,showticksuffix:F.showticksuffix,ticksuffix:F.ticksuffix,title:F.title,showline:!0,anchor:"free",side:U?"right":"bottom",position:1},j=U?"y":"x",Z={type:"linear",_id:j+F._id},ee={letter:j,font:D.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:D.calendar};function q(W,J){return a.coerce(B,Z,g,W,J)}return p(B,Z,q,ee,D),y(B,Z,q,ee),Z}z.exports={draw:w}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(e,z,N){var u=e("../../lib");z.exports=function(m){return u.isPlainObject(m.colorbar)}},{"../../lib":503}],372:[function(e,z,N){z.exports={moduleType:"component",name:"colorbar",attributes:e("./attributes"),supplyDefaults:e("./defaults"),draw:e("./draw").draw,hasColorbar:e("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(e,z,N){var u=e("../colorbar/attributes"),s=e("../../lib/regex").counter,m=e("../../lib/sort_object_keys"),x=e("./scales.js").scales;m(x),z.exports=function(i,a){i=i||"",a=a||{};var r=a.cLetter||"c";"onlyIfNumerical"in a?a.onlyIfNumerical:Boolean(i);var n="noScale"in a?a.noScale:i==="marker.line",f="showScaleDflt"in a?a.showScaleDflt:r==="z",l=typeof a.colorscaleDflt=="string"?x[a.colorscaleDflt]:null,o=a.editTypeOverride||"",c;"colorAttr"in a?c=a.colorAttr:c={z:"z",c:"color"}[r];var h=r+"auto",d=r+"min",p=r+"max",y=r+"mid",g={};g[d]=g[p]=void 0;var A={};A[h]=!1;var b={};return c==="color"&&(b.color={valType:"color",arrayOk:!0,editType:o||"style"},a.anim&&(b.color.anim=!0)),b[h]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:g},b[d]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:A},b[p]={valType:"number",dflt:null,editType:o||"plot",impliedEdits:A},b[y]={valType:"number",dflt:null,editType:"calc",impliedEdits:g},b.colorscale={valType:"colorscale",editType:"calc",dflt:l,impliedEdits:{autocolorscale:!1}},b.autocolorscale={valType:"boolean",dflt:a.autoColorDflt!==!1,editType:"calc",impliedEdits:{colorscale:void 0}},b.reversescale={valType:"boolean",dflt:!1,editType:"plot"},n||(b.showscale={valType:"boolean",dflt:f,editType:"calc"},b.colorbar=u),a.noColorAxis||(b.coloraxis={valType:"subplotid",regex:s("coloraxis"),dflt:null,editType:"calc"}),b}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("./helpers").extractOpts;z.exports=function(t,i,a){var r=t._fullLayout,n=a.vals,f=a.containerStr,l=f?s.nestedProperty(i,f).get():i,o=m(l),c=o.auto!==!1,h=o.min,d=o.max,p=o.mid,y=function(){return s.aggNums(Math.min,null,n)},g=function(){return s.aggNums(Math.max,null,n)};if(h===void 0?h=y():c&&(l._colorAx&&u(h)?h=Math.min(h,y()):h=y()),d===void 0?d=g():c&&(l._colorAx&&u(d)?d=Math.max(d,g()):d=g()),c&&p!==void 0&&(d-p>p-h?h=p-(d-p):d-p<p-h&&(d=p+(p-h))),h===d&&(h-=.5,d+=.5),o._sync("min",h),o._sync("max",d),o.autocolorscale){var A;h*d<0?A=r.colorscale.diverging:h>=0?A=r.colorscale.sequential:A=r.colorscale.sequentialminus,o._sync("colorscale",A)}}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(e,z,N){var u=e("../../lib"),s=e("./helpers").hasColorscale,m=e("./helpers").extractOpts;z.exports=function(t,i){function a(h,d){var p=h["_"+d];p!==void 0&&(h[d]=p)}function r(h,d){var p=d.container?u.nestedProperty(h,d.container).get():h;if(p)if(p.coloraxis)p._colorAx=i[p.coloraxis];else{var y=m(p),g=y.auto;(g||y.min===void 0)&&a(p,d.min),(g||y.max===void 0)&&a(p,d.max),y.autocolorscale&&a(p,"colorscale")}}for(var n=0;n<t.length;n++){var f=t[n],l=f._module.colorbar;if(l)if(Array.isArray(l))for(var o=0;o<l.length;o++)r(f,l[o]);else r(f,l);s(f,"marker.line")&&r(f,{container:"marker.line",min:"cmin",max:"cmax"})}for(var c in i._colorAxes)r(i[c],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../colorbar/has_colorbar"),x=e("../colorbar/defaults"),t=e("./scales").isValid,i=e("../../registry").traceIs;function a(r,n){var f=n.slice(0,n.length-1);return n?s.nestedProperty(r,f).get()||{}:r}z.exports=function r(n,f,l,o,c){var h=c.prefix,d=c.cLetter,p="_module"in f,y=a(n,h),g=a(f,h),A=a(f._template||{},h)||{},b=function(){return delete n.coloraxis,delete f.coloraxis,r(n,f,l,o,c)};if(p){var M=l._colorAxes||{},_=o(h+"coloraxis");if(_){var T=i(f,"contour")&&s.nestedProperty(f,"contours.coloring").get()||"heatmap",w=M[_];w?(w[2].push(b),w[0]!==T&&(w[0]=!1,s.warn(["Ignoring coloraxis:",_,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[_]=[T,f,[b]];return}}var v=y[d+"min"],L=y[d+"max"],S=u(v)&&u(L)&&v<L,k=o(h+d+"auto",!S);k?o(h+d+"mid"):(o(h+d+"min"),o(h+d+"max"));var P=y.colorscale,O=A.colorscale,F;if(P!==void 0&&(F=!t(P)),O!==void 0&&(F=!t(O)),o(h+"autocolorscale",F),o(h+"colorscale"),o(h+"reversescale"),h!=="marker.line."){var I;h&&p&&(I=m(y));var D=o(h+"showscale",I);D&&(h&&A&&(g._template=A),x(y,g,l))}}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(e,z,N){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("fast-isnumeric"),x=e("../../lib"),t=e("../color"),i=e("./scales").isValid;function a(p,y,g){var A=y?x.nestedProperty(p,y).get()||{}:p,b=A[g||"color"],M=!1;if(x.isArrayOrTypedArray(b)){for(var _=0;_<b.length;_++)if(m(b[_])){M=!0;break}}return x.isPlainObject(A)&&(M||A.showscale===!0||m(A.cmin)&&m(A.cmax)||i(A.colorscale)||x.isPlainObject(A.colorbar))}var r=["showscale","autocolorscale","colorscale","reversescale","colorbar"],n=["min","max","mid","auto"];function f(p){var y=p._colorAx,g=y||p,A={},b,M,_;for(M=0;M<r.length;M++)_=r[M],A[_]=g[_];if(y)for(b="c",M=0;M<n.length;M++)_=n[M],A[_]=g["c"+_];else{var T;for(M=0;M<n.length;M++){if(_=n[M],T="c"+_,T in g){A[_]=g[T];continue}T="z"+_,T in g&&(A[_]=g[T])}b=T.charAt(0)}return A._sync=function(w,v){var L=n.indexOf(w)!==-1?b+w:w;g[L]=g["_"+L]=v},A}function l(p){for(var y=f(p),g=y.min,A=y.max,b=y.reversescale?o(y.colorscale):y.colorscale,M=b.length,_=new Array(M),T=new Array(M),w=0;w<M;w++){var v=b[w];_[w]=g+v[0]*(A-g),T[w]=v[1]}return{domain:_,range:T}}function o(p){for(var y=p.length,g=new Array(y),A=y-1,b=0;A>=0;A--,b++){var M=p[A];g[b]=[1-M[0],M[1]]}return g}function c(p,y){y=y||{};for(var g=p.domain,A=p.range,b=A.length,M=new Array(b),_=0;_<b;_++){var T=s(A[_]).toRgb();M[_]=[T.r,T.g,T.b,T.a]}var w=u.scale.linear().domain(g).range(M).clamp(!0),v=y.noNumericCheck,L=y.returnArray,S;return v&&L?S=w:v?S=function(k){return d(w(k))}:L?S=function(k){return m(k)?w(k):s(k).isValid()?k:t.defaultLine}:S=function(k){return m(k)?d(w(k)):s(k).isValid()?k:t.defaultLine},S.domain=w.domain,S.range=function(){return A},S}function h(p,y){return c(l(p),y)}function d(p){var y={r:p[0],g:p[1],b:p[2],a:p[3]};return s(y).toRgbString()}z.exports={hasColorscale:a,extractOpts:f,extractScale:l,flipScale:o,makeColorScaleFunc:c,makeColorScaleFuncFromTrace:h}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(e,z,N){var u=e("./scales"),s=e("./helpers");z.exports={moduleType:"component",name:"colorscale",attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),handleDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc"),scales:u.scales,defaultScale:u.defaultScale,getScale:u.get,isValidScale:u.isValid,hasColorscale:s.hasColorscale,extractOpts:s.extractOpts,extractScale:s.extractScale,flipScale:s.flipScale,makeColorScaleFunc:s.makeColorScaleFunc,makeColorScaleFuncFromTrace:s.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(e,z,N){var u=e("../../lib/extend").extendFlat,s=e("./attributes"),m=e("./scales").scales;z.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:m.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:m.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:m.RdBu,editType:"calc"}},coloraxis:u({_isSubplotObj:!0,editType:"calc"},s("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(e,z,N){var u=e("../../lib"),s=e("../../plot_api/plot_template"),m=e("./layout_attributes"),x=e("./defaults");z.exports=function(i,a){function r(p,y){return u.coerce(i,a,m,p,y)}r("colorscale.sequential"),r("colorscale.sequentialminus"),r("colorscale.diverging");var n=a._colorAxes,f,l;function o(p,y){return u.coerce(f,l,m.coloraxis,p,y)}for(var c in n){var h=n[c];if(h[0])f=i[c]||{},l=s.newContainer(a,c,"coloraxis"),l._name=c,x(f,l,a,o,{prefix:"",cLetter:"c"});else{for(var d=0;d<h[2].length;d++)h[2][d]();delete a._colorAxes[c]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(e,z,N){var u=e("tinycolor2"),s={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},m=s.RdBu;function x(a,r){if(r||(r=m),!a)return r;function n(){try{a=s[a]||JSON.parse(a)}catch{a=r}}return typeof a=="string"&&(n(),typeof a=="string"&&n()),t(a)?a:r}function t(a){var r=0;if(!Array.isArray(a)||a.length<2||!a[0]||!a[a.length-1]||+a[0][0]!=0||+a[a.length-1][0]!=1)return!1;for(var n=0;n<a.length;n++){var f=a[n];if(f.length!==2||+f[0]<r||!u(f[1]).isValid())return!1;r=+f[0]}return!0}function i(a){return s[a]!==void 0?!0:t(a)}z.exports={scales:s,defaultScale:m,get:x,isValid:i}},{tinycolor2:312}],382:[function(e,z,N){z.exports=function(s,m,x,t,i){var a=(s-x)/(t-x),r=a+m/(t-x),n=(a+r)/2;return i==="left"||i==="bottom"?a:i==="center"||i==="middle"?n:i==="right"||i==="top"?r:a<2/3-n?a:r>4/3-n?r:n}},{}],383:[function(e,z,N){var u=e("../../lib"),s=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];z.exports=function(x,t,i,a){return i==="left"?x=0:i==="center"?x=1:i==="right"?x=2:x=u.constrain(Math.floor(x*3),0,2),a==="bottom"?t=0:a==="middle"?t=1:a==="top"?t=2:t=u.constrain(Math.floor(t*3),0,2),s[t][x]}},{"../../lib":503}],384:[function(e,z,N){N.selectMode=function(u){return u==="lasso"||u==="select"},N.drawMode=function(u){return u==="drawclosedpath"||u==="drawopenpath"||u==="drawline"||u==="drawrect"||u==="drawcircle"},N.openMode=function(u){return u==="drawline"||u==="drawopenpath"},N.rectMode=function(u){return u==="select"||u==="drawline"||u==="drawrect"||u==="drawcircle"},N.freeMode=function(u){return u==="lasso"||u==="drawclosedpath"||u==="drawopenpath"},N.selectingOrDrawing=function(u){return N.freeMode(u)||N.rectMode(u)}},{}],385:[function(e,z,N){var u=e("mouse-event-offset"),s=e("has-hover"),m=e("has-passive-events"),x=e("../../lib").removeElement,t=e("../../plots/cartesian/constants"),i=z.exports={};i.align=e("./align"),i.getCursor=e("./cursor");var a=e("./unhover");i.unhover=a.wrapped,i.unhoverRaw=a.raw,i.init=function(l){var o=l.gd,c=1,h=o._context.doubleClickDelay,d=l.element,p,y,g,A,b,M,_,T;o._mouseDownTime||(o._mouseDownTime=0),d.style.pointerEvents="all",d.onmousedown=L,m?(d._ontouchstart&&d.removeEventListener("touchstart",d._ontouchstart),d._ontouchstart=L,d.addEventListener("touchstart",L,{passive:!1})):d.ontouchstart=L;function w(P,O,F){return Math.abs(P)<F&&(P=0),Math.abs(O)<F&&(O=0),[P,O]}var v=l.clampFn||w;function L(P){o._dragged=!1,o._dragging=!0;var O=n(P);p=O[0],y=O[1],_=P.target,M=P,T=P.buttons===2||P.ctrlKey,typeof P.clientX=="undefined"&&typeof P.clientY=="undefined"&&(P.clientX=p,P.clientY=y),g=new Date().getTime(),g-o._mouseDownTime<h?c+=1:(c=1,o._mouseDownTime=g),l.prepFn&&l.prepFn(P,p,y),s&&!T?(b=r(),b.style.cursor=window.getComputedStyle(d).cursor):s||(b=document,A=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(d).cursor),document.addEventListener("mouseup",k),document.addEventListener("touchend",k),l.dragmode!==!1&&(P.preventDefault(),document.addEventListener("mousemove",S),document.addEventListener("touchmove",S,{passive:!1}))}function S(P){P.preventDefault();var O=n(P),F=l.minDrag||t.MINDRAG,I=v(O[0]-p,O[1]-y,F),D=I[0],U=I[1];(D||U)&&(o._dragged=!0,i.unhover(o,P)),o._dragged&&l.moveFn&&!T&&(o._dragdata={element:d,dx:D,dy:U},l.moveFn(D,U))}function k(P){if(delete o._dragdata,l.dragmode!==!1&&(P.preventDefault(),document.removeEventListener("mousemove",S),document.removeEventListener("touchmove",S)),document.removeEventListener("mouseup",k),document.removeEventListener("touchend",k),s?x(b):A&&(b.documentElement.style.cursor=A,A=null),!o._dragging){o._dragged=!1;return}if(o._dragging=!1,new Date().getTime()-o._mouseDownTime>h&&(c=Math.max(c-1,1)),o._dragged)l.doneFn&&l.doneFn();else if(l.clickFn&&l.clickFn(c,M),!T){var O;try{O=new MouseEvent("click",P)}catch{var F=n(P);O=document.createEvent("MouseEvents"),O.initMouseEvent("click",P.bubbles,P.cancelable,P.view,P.detail,P.screenX,P.screenY,F[0],F[1],P.ctrlKey,P.altKey,P.shiftKey,P.metaKey,P.button,P.relatedTarget)}_.dispatchEvent(O)}o._dragging=!1,o._dragged=!1}};function r(){var f=document.createElement("div");f.className="dragcover";var l=f.style;return l.position="fixed",l.left=0,l.right=0,l.top=0,l.bottom=0,l.zIndex=999999999,l.background="none",document.body.appendChild(f),f}i.coverSlip=r;function n(f){return u(f.changedTouches?f.changedTouches[0]:f,document.body)}},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(e,z,N){var u=e("../../lib/events"),s=e("../../lib/throttle"),m=e("../../lib/dom").getGraphDiv,x=e("../fx/constants"),t=z.exports={};t.wrapped=function(i,a,r){i=m(i),i._fullLayout&&s.clear(i._fullLayout._uid+x.HOVERID),t.raw(i,a,r)},t.raw=function(a,r){var n=a._fullLayout,f=a._hoverdata;r||(r={}),!(r.target&&!a._dragged&&u.triggerHandler(a,"plotly_beforehover",r)===!1)&&(n._hoverlayer.selectAll("g").remove(),n._hoverlayer.selectAll("line").remove(),n._hoverlayer.selectAll("circle").remove(),a._hoverdata=void 0,r.target&&f&&a.emit("plotly_unhover",{event:r,points:f}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(e,z,N){N.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},N.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("fast-isnumeric"),t=e("tinycolor2"),i=e("../../registry"),a=e("../color"),r=e("../colorscale"),n=s.strTranslate,f=e("../../lib/svg_text_utils"),l=e("../../constants/xmlns_namespaces"),o=e("../../constants/alignment"),c=o.LINE_SPACING,h=e("../../constants/interactions").DESELECTDIM,d=e("../../traces/scatter/subtypes"),p=e("../../traces/scatter/make_bubble_size_func"),y=e("../../components/fx/helpers").appendArrayPointValue,g=z.exports={};g.font=function(W,J,le,fe){s.isPlainObject(J)&&(fe=J.color,le=J.size,J=J.family),J&&W.style("font-family",J),le+1&&W.style("font-size",le+"px"),fe&&W.call(a.fill,fe)},g.setPosition=function(W,J,le){W.attr("x",J).attr("y",le)},g.setSize=function(W,J,le){W.attr("width",J).attr("height",le)},g.setRect=function(W,J,le,fe,se){W.call(g.setPosition,J,le).call(g.setSize,fe,se)},g.translatePoint=function(W,J,le,fe){var se=le.c2p(W.x),H=fe.c2p(W.y);if(x(se)&&x(H)&&J.node())J.node().nodeName==="text"?J.attr("x",se).attr("y",H):J.attr("transform",n(se,H));else return!1;return!0},g.translatePoints=function(W,J,le){W.each(function(fe){var se=u.select(this);g.translatePoint(fe,se,J,le)})},g.hideOutsideRangePoint=function(W,J,le,fe,se,H){J.attr("display",le.isPtWithinRange(W,se)&&fe.isPtWithinRange(W,H)?null:"none")},g.hideOutsideRangePoints=function(W,J){if(!!J._hasClipOnAxisFalse){var le=J.xaxis,fe=J.yaxis;W.each(function(se){var H=se[0].trace,Y=H.xcalendar,ne=H.ycalendar,te=i.traceIs(H,"bar-like")?".bartext":".point,.textpoint";W.selectAll(te).each(function(K){g.hideOutsideRangePoint(K,u.select(this),le,fe,Y,ne)})})}},g.crispRound=function(W,J,le){return!J||!x(J)?le||0:W._context.staticPlot?J:J<1?1:Math.round(J)},g.singleLineStyle=function(W,J,le,fe,se){J.style("fill","none");var H=(((W||[])[0]||{}).trace||{}).line||{},Y=le||H.width||0,ne=se||H.dash||"";a.stroke(J,fe||H.color),g.dashLine(J,ne,Y)},g.lineGroupStyle=function(W,J,le,fe){W.style("fill","none").each(function(se){var H=(((se||[])[0]||{}).trace||{}).line||{},Y=J||H.width||0,ne=fe||H.dash||"";u.select(this).call(a.stroke,le||H.color).call(g.dashLine,ne,Y)})},g.dashLine=function(W,J,le){le=+le||0,J=g.dashStyle(J,le),W.style({"stroke-dasharray":J,"stroke-width":le+"px"})},g.dashStyle=function(W,J){J=+J||1;var le=Math.max(J,3);return W==="solid"?W="":W==="dot"?W=le+"px,"+le+"px":W==="dash"?W=3*le+"px,"+3*le+"px":W==="longdash"?W=5*le+"px,"+5*le+"px":W==="dashdot"?W=3*le+"px,"+le+"px,"+le+"px,"+le+"px":W==="longdashdot"&&(W=5*le+"px,"+2*le+"px,"+le+"px,"+2*le+"px"),W},g.singleFillStyle=function(W){var J=u.select(W.node()),le=J.data(),fe=(((le[0]||[])[0]||{}).trace||{}).fillcolor;fe&&W.call(a.fill,fe)},g.fillGroupStyle=function(W){W.style("stroke-width",0).each(function(J){var le=u.select(this);J[0].trace&&le.call(a.fill,J[0].trace.fillcolor)})};var A=e("./symbol_defs");g.symbolNames=[],g.symbolFuncs=[],g.symbolNeedLines={},g.symbolNoDot={},g.symbolNoFill={},g.symbolList=[],Object.keys(A).forEach(function(W){var J=A[W],le=J.n;g.symbolList.push(le,String(le),W,le+100,String(le+100),W+"-open"),g.symbolNames[le]=W,g.symbolFuncs[le]=J.f,J.needLine&&(g.symbolNeedLines[le]=!0),J.noDot?g.symbolNoDot[le]=!0:g.symbolList.push(le+200,String(le+200),W+"-dot",le+300,String(le+300),W+"-open-dot"),J.noFill&&(g.symbolNoFill[le]=!0)});var b=g.symbolNames.length,M="M0,0.5L0.5,0L0,-0.5L-0.5,0Z";g.symbolNumber=function(W){if(x(W))W=+W;else if(typeof W=="string"){var J=0;W.indexOf("-open")>0&&(J=100,W=W.replace("-open","")),W.indexOf("-dot")>0&&(J+=200,W=W.replace("-dot","")),W=g.symbolNames.indexOf(W),W>=0&&(W+=J)}return W%100>=b||W>=400?0:Math.floor(Math.max(W,0))};function _(W,J){var le=W%100;return g.symbolFuncs[le](J)+(W>=200?M:"")}var T={x1:1,x2:0,y1:0,y2:0},w={x1:0,x2:0,y1:1,y2:0},v=m("~f"),L={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:T},horizontalreversed:{node:"linearGradient",attrs:T,reversed:!0},vertical:{node:"linearGradient",attrs:w},verticalreversed:{node:"linearGradient",attrs:w,reversed:!0}};g.gradient=function(W,J,le,fe,se,H){for(var Y=se.length,ne=L[fe],te=new Array(Y),K=0;K<Y;K++)ne.reversed?te[Y-1-K]=[v((1-se[K][0])*100),se[K][1]]:te[K]=[v(se[K][0]*100),se[K][1]];var $=J._fullLayout,ae="g"+$._uid+"-"+le,ie=$._defs.select(".gradients").selectAll("#"+ae).data([fe+te.join(";")],s.identity);ie.exit().remove(),ie.enter().append(ne.node).each(function(){var ye=u.select(this);ne.attrs&&ye.attr(ne.attrs),ye.attr("id",ae);var ce=ye.selectAll("stop").data(te);ce.exit().remove(),ce.enter().append("stop"),ce.each(function(me){var xe=t(me[1]);u.select(this).attr({offset:me[0]+"%","stop-color":a.tinyRGB(xe),"stop-opacity":xe.getAlpha()})})}),W.style(H,Z(ae,J)).style(H+"-opacity",null);var oe=function(ye){return"."+ye.attr("class").replace(/\s/g,".")},ue=oe(u.select(W.node().parentNode))+">"+oe(W);$._gradientUrlQueryParts[ue]=1},g.pattern=function(W,J,le,fe,se,H,Y,ne,te,K,$,ae){var ie=J==="legend";ne&&(te==="overlay"?(K=ne,$=a.contrast(K)):(K=void 0,$=ne));var oe=le._fullLayout,ue="p"+oe._uid+"-"+fe,ye,ce,me=function(qe,Ue,Ie,Ve,dt){return Ve+(dt-Ve)*(qe-Ue)/(Ie-Ue)},xe,ke,Ae,Oe,He={};switch(se){case"/":ye=H*Math.sqrt(2),ce=H*Math.sqrt(2),xe="M-"+ye/4+","+ce/4+"l"+ye/2+",-"+ce/2+"M0,"+ce+"L"+ye+",0M"+ye/4*3+","+ce/4*5+"l"+ye/2+",-"+ce/2,ke=Y*H,Oe="path",He={d:xe,opacity:ae,stroke:$,"stroke-width":ke+"px"};break;case"\\":ye=H*Math.sqrt(2),ce=H*Math.sqrt(2),xe="M"+ye/4*3+",-"+ce/4+"l"+ye/2+","+ce/2+"M0,0L"+ye+","+ce+"M-"+ye/4+","+ce/4*3+"l"+ye/2+","+ce/2,ke=Y*H,Oe="path",He={d:xe,opacity:ae,stroke:$,"stroke-width":ke+"px"};break;case"x":ye=H*Math.sqrt(2),ce=H*Math.sqrt(2),xe="M-"+ye/4+","+ce/4+"l"+ye/2+",-"+ce/2+"M0,"+ce+"L"+ye+",0M"+ye/4*3+","+ce/4*5+"l"+ye/2+",-"+ce/2+"M"+ye/4*3+",-"+ce/4+"l"+ye/2+","+ce/2+"M0,0L"+ye+","+ce+"M-"+ye/4+","+ce/4*3+"l"+ye/2+","+ce/2,ke=H-H*Math.sqrt(1-Y),Oe="path",He={d:xe,opacity:ae,stroke:$,"stroke-width":ke+"px"};break;case"|":ye=H,ce=H,Oe="path",xe="M"+ye/2+",0L"+ye/2+","+ce,ke=Y*H,Oe="path",He={d:xe,opacity:ae,stroke:$,"stroke-width":ke+"px"};break;case"-":ye=H,ce=H,Oe="path",xe="M0,"+ce/2+"L"+ye+","+ce/2,ke=Y*H,Oe="path",He={d:xe,opacity:ae,stroke:$,"stroke-width":ke+"px"};break;case"+":ye=H,ce=H,Oe="path",xe="M"+ye/2+",0L"+ye/2+","+ce+"M0,"+ce/2+"L"+ye+","+ce/2,ke=H-H*Math.sqrt(1-Y),Oe="path",He={d:xe,opacity:ae,stroke:$,"stroke-width":ke+"px"};break;case".":ye=H,ce=H,Y<Math.PI/4?Ae=Math.sqrt(Y*H*H/Math.PI):Ae=me(Y,Math.PI/4,1,H/2,H/Math.sqrt(2)),Oe="circle",He={cx:ye/2,cy:ce/2,r:Ae,opacity:ae,fill:$};break}var Ge=[se||"noSh",K||"noBg",$||"noFg",H,Y].join(";"),_e=oe._defs.select(".patterns").selectAll("#"+ue).data([Ge],s.identity);_e.exit().remove(),_e.enter().append("pattern").each(function(){var qe=u.select(this);if(qe.attr({id:ue,width:ye+"px",height:ce+"px",patternUnits:"userSpaceOnUse",patternTransform:ie?"scale(0.8)":""}),K){var Ue=qe.selectAll("rect").data([0]);Ue.exit().remove(),Ue.enter().append("rect").attr({width:ye+"px",height:ce+"px",fill:K})}var Ie=qe.selectAll(Oe).data([0]);Ie.exit().remove(),Ie.enter().append(Oe).attr(He)}),W.style("fill",Z(ue,le)).style("fill-opacity",null),W.classed("pattern_filled",!0);var Re=function(qe){return"."+qe.attr("class").replace(/\s/g,".")},We=Re(u.select(W.node().parentNode))+">.pattern_filled";oe._patternUrlQueryParts[We]=1},g.initGradients=function(W){var J=W._fullLayout,le=s.ensureSingle(J._defs,"g","gradients");le.selectAll("linearGradient,radialGradient").remove(),J._gradientUrlQueryParts={}},g.initPatterns=function(W){var J=W._fullLayout,le=s.ensureSingle(J._defs,"g","patterns");le.selectAll("pattern").remove(),J._patternUrlQueryParts={}},g.getPatternAttr=function(W,J,le){return W&&s.isArrayOrTypedArray(W)?J<W.length?W[J]:le:W},g.pointStyle=function(W,J,le){if(!!W.size()){var fe=g.makePointStyleFns(J);W.each(function(se){g.singlePointStyle(se,u.select(this),J,fe,le)})}},g.singlePointStyle=function(W,J,le,fe,se){var H=le.marker,Y=H.line;if(J.style("opacity",fe.selectedOpacityFn?fe.selectedOpacityFn(W):W.mo===void 0?H.opacity:W.mo),fe.ms2mrc){var ne;W.ms==="various"||H.size==="various"?ne=3:ne=fe.ms2mrc(W.ms),W.mrc=ne,fe.selectedSizeFn&&(ne=W.mrc=fe.selectedSizeFn(W));var te=g.symbolNumber(W.mx||H.symbol)||0;W.om=te%200>=100,J.attr("d",_(te,ne))}var K=!1,$,ae,ie;if(W.so)ie=Y.outlierwidth,ae=Y.outliercolor,$=H.outliercolor;else{var oe=(Y||{}).width;ie=(W.mlw+1||oe+1||(W.trace?(W.trace.marker.line||{}).width:0)+1)-1||0,"mlc"in W?ae=W.mlcc=fe.lineScale(W.mlc):s.isArrayOrTypedArray(Y.color)?ae=a.defaultLine:ae=Y.color,s.isArrayOrTypedArray(H.color)&&($=a.defaultLine,K=!0),"mc"in W?$=W.mcc=fe.markerScale(W.mc):$=H.color||"rgba(0,0,0,0)",fe.selectedColorFn&&($=fe.selectedColorFn(W))}if(W.om)J.call(a.stroke,$).style({"stroke-width":(ie||1)+"px",fill:"none"});else{J.style("stroke-width",(W.isBlank?0:ie)+"px");var ue=H.gradient,ye=W.mgt;ye?K=!0:ye=ue&&ue.type,s.isArrayOrTypedArray(ye)&&(ye=ye[0],L[ye]||(ye=0));var ce=H.pattern,me=ce&&g.getPatternAttr(ce.shape,W.i,"");if(ye&&ye!=="none"){var xe=W.mgc;xe?K=!0:xe=ue.color;var ke=le.uid;K&&(ke+="-"+W.i),g.gradient(J,se,ke,ye,[[0,xe],[1,$]],"fill")}else if(me){var Ae=g.getPatternAttr(ce.bgcolor,W.i,null),Oe=g.getPatternAttr(ce.fgcolor,W.i,null),He=ce.fgopacity,Ge=g.getPatternAttr(ce.size,W.i,8),_e=g.getPatternAttr(ce.solidity,W.i,.3),Re=W.mcc||s.isArrayOrTypedArray(ce.shape)||s.isArrayOrTypedArray(ce.bgcolor)||s.isArrayOrTypedArray(ce.size)||s.isArrayOrTypedArray(ce.solidity),We=le.uid;Re&&(We+="-"+W.i),g.pattern(J,"point",se,We,me,Ge,_e,W.mcc,ce.fillmode,Ae,Oe,He)}else a.fill(J,$);ie&&a.stroke(J,ae)}},g.makePointStyleFns=function(W){var J={},le=W.marker;return J.markerScale=g.tryColorscale(le,""),J.lineScale=g.tryColorscale(le,"line"),i.traceIs(W,"symbols")&&(J.ms2mrc=d.isBubble(W)?p(W):function(){return(le.size||6)/2}),W.selectedpoints&&s.extendFlat(J,g.makeSelectedPointStyleFns(W)),J},g.makeSelectedPointStyleFns=function(W){var J={},le=W.selected||{},fe=W.unselected||{},se=W.marker||{},H=le.marker||{},Y=fe.marker||{},ne=se.opacity,te=H.opacity,K=Y.opacity,$=te!==void 0,ae=K!==void 0;(s.isArrayOrTypedArray(ne)||$||ae)&&(J.selectedOpacityFn=function(Ae){var Oe=Ae.mo===void 0?se.opacity:Ae.mo;return Ae.selected?$?te:Oe:ae?K:h*Oe});var ie=se.color,oe=H.color,ue=Y.color;(oe||ue)&&(J.selectedColorFn=function(Ae){var Oe=Ae.mcc||ie;return Ae.selected?oe||Oe:ue||Oe});var ye=se.size,ce=H.size,me=Y.size,xe=ce!==void 0,ke=me!==void 0;return i.traceIs(W,"symbols")&&(xe||ke)&&(J.selectedSizeFn=function(Ae){var Oe=Ae.mrc||ye/2;return Ae.selected?xe?ce/2:Oe:ke?me/2:Oe}),J},g.makeSelectedTextStyleFns=function(W){var J={},le=W.selected||{},fe=W.unselected||{},se=W.textfont||{},H=le.textfont||{},Y=fe.textfont||{},ne=se.color,te=H.color,K=Y.color;return J.selectedTextColorFn=function($){var ae=$.tc||ne;return $.selected?te||ae:K||(te?ae:a.addOpacity(ae,h))},J},g.selectedPointStyle=function(W,J){if(!(!W.size()||!J.selectedpoints)){var le=g.makeSelectedPointStyleFns(J),fe=J.marker||{},se=[];le.selectedOpacityFn&&se.push(function(H,Y){H.style("opacity",le.selectedOpacityFn(Y))}),le.selectedColorFn&&se.push(function(H,Y){a.fill(H,le.selectedColorFn(Y))}),le.selectedSizeFn&&se.push(function(H,Y){var ne=Y.mx||fe.symbol||0,te=le.selectedSizeFn(Y);H.attr("d",_(g.symbolNumber(ne),te)),Y.mrc2=te}),se.length&&W.each(function(H){for(var Y=u.select(this),ne=0;ne<se.length;ne++)se[ne](Y,H)})}},g.tryColorscale=function(W,J){var le=J?s.nestedProperty(W,J).get():W;if(le){var fe=le.color;if((le.colorscale||le._colorAx)&&s.isArrayOrTypedArray(fe))return r.makeColorScaleFuncFromTrace(le)}return s.identity};var S={start:1,end:-1,middle:0,bottom:1,top:-1};function k(W,J,le,fe,se){var H=u.select(W.node().parentNode),Y=J.indexOf("top")!==-1?"top":J.indexOf("bottom")!==-1?"bottom":"middle",ne=J.indexOf("left")!==-1?"end":J.indexOf("right")!==-1?"start":"middle",te=fe?fe/.8+1:0,K=(f.lineCount(W)-1)*c+1,$=S[ne]*te,ae=le*.75+S[Y]*te+(S[Y]-1)*K*le/2;W.attr("text-anchor",ne),se||H.attr("transform",n($,ae))}function P(W,J){var le=W.ts||J.textfont.size;return x(le)&&le>0?le:0}g.textPointStyle=function(W,J,le){if(!!W.size()){var fe;if(J.selectedpoints){var se=g.makeSelectedTextStyleFns(J);fe=se.selectedTextColorFn}var H=J.texttemplate,Y=le._fullLayout;W.each(function(ne){var te=u.select(this),K=H?s.extractOption(ne,J,"txt","texttemplate"):s.extractOption(ne,J,"tx","text");if(!K&&K!==0){te.remove();return}if(H){var $=J._module.formatLabels,ae=$?$(ne,J,Y):{},ie={};y(ie,J,ne.i);var oe=J._meta||{};K=s.texttemplateString(K,ae,Y._d3locale,ie,ne,oe)}var ue=ne.tp||J.textposition,ye=P(ne,J),ce=fe?fe(ne):ne.tc||J.textfont.color;te.call(g.font,ne.tf||J.textfont.family,ye,ce).text(K).call(f.convertToTspans,le).call(k,ue,ye,ne.mrc)})}},g.selectedTextStyle=function(W,J){if(!(!W.size()||!J.selectedpoints)){var le=g.makeSelectedTextStyleFns(J);W.each(function(fe){var se=u.select(this),H=le.selectedTextColorFn(fe),Y=fe.tp||J.textposition,ne=P(fe,J);a.fill(se,H);var te=i.traceIs(J,"bar-like");k(se,Y,ne,fe.mrc2||fe.mrc,te)})}};var O=.5;g.smoothopen=function(W,J){if(W.length<3)return"M"+W.join("L");var le="M"+W[0],fe=[],se;for(se=1;se<W.length-1;se++)fe.push(F(W[se-1],W[se],W[se+1],J));for(le+="Q"+fe[0][0]+" "+W[1],se=2;se<W.length-1;se++)le+="C"+fe[se-2][1]+" "+fe[se-1][0]+" "+W[se];return le+="Q"+fe[W.length-3][1]+" "+W[W.length-1],le},g.smoothclosed=function(W,J){if(W.length<3)return"M"+W.join("L")+"Z";var le="M"+W[0],fe=W.length-1,se=[F(W[fe],W[0],W[1],J)],H;for(H=1;H<fe;H++)se.push(F(W[H-1],W[H],W[H+1],J));for(se.push(F(W[fe-1],W[fe],W[0],J)),H=1;H<=fe;H++)le+="C"+se[H-1][1]+" "+se[H][0]+" "+W[H];return le+="C"+se[fe][1]+" "+se[0][0]+" "+W[0]+"Z",le};function F(W,J,le,fe){var se=W[0]-J[0],H=W[1]-J[1],Y=le[0]-J[0],ne=le[1]-J[1],te=Math.pow(se*se+H*H,O/2),K=Math.pow(Y*Y+ne*ne,O/2),$=(K*K*se-te*te*Y)*fe,ae=(K*K*H-te*te*ne)*fe,ie=3*K*(te+K),oe=3*te*(te+K);return[[u.round(J[0]+(ie&&$/ie),2),u.round(J[1]+(ie&&ae/ie),2)],[u.round(J[0]-(oe&&$/oe),2),u.round(J[1]-(oe&&ae/oe),2)]]}var I={hv:function(W,J){return"H"+u.round(J[0],2)+"V"+u.round(J[1],2)},vh:function(W,J){return"V"+u.round(J[1],2)+"H"+u.round(J[0],2)},hvh:function(W,J){return"H"+u.round((W[0]+J[0])/2,2)+"V"+u.round(J[1],2)+"H"+u.round(J[0],2)},vhv:function(W,J){return"V"+u.round((W[1]+J[1])/2,2)+"H"+u.round(J[0],2)+"V"+u.round(J[1],2)}},D=function(W,J){return"L"+u.round(J[0],2)+","+u.round(J[1],2)};g.steps=function(W){var J=I[W]||D;return function(le){for(var fe="M"+u.round(le[0][0],2)+","+u.round(le[0][1],2),se=1;se<le.length;se++)fe+=J(le[se-1],le[se]);return fe}},g.makeTester=function(){var W=s.ensureSingleById(u.select("body"),"svg","js-plotly-tester",function(le){le.attr(l.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),J=s.ensureSingle(W,"path","js-reference-point",function(le){le.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});g.tester=W,g.testref=J},g.savedBBoxes={};var U=0,B=1e4;g.bBox=function(W,J,le){le||(le=j(W));var fe;if(le){if(fe=g.savedBBoxes[le],fe)return s.extendFlat({},fe)}else if(W.childNodes.length===1){var se=W.childNodes[0];if(le=j(se),le){var H=+se.getAttribute("x")||0,Y=+se.getAttribute("y")||0,ne=se.getAttribute("transform");if(!ne){var te=g.bBox(se,!1,le);return H&&(te.left+=H,te.right+=H),Y&&(te.top+=Y,te.bottom+=Y),te}if(le+="~"+H+"~"+Y+"~"+ne,fe=g.savedBBoxes[le],fe)return s.extendFlat({},fe)}}var K,$;J?K=W:($=g.tester.node(),K=W.cloneNode(!0),$.appendChild(K)),u.select(K).attr("transform",null).call(f.positionText,0,0);var ae=K.getBoundingClientRect(),ie=g.testref.node().getBoundingClientRect();J||$.removeChild(K);var oe={height:ae.height,width:ae.width,left:ae.left-ie.left,top:ae.top-ie.top,right:ae.right-ie.left,bottom:ae.bottom-ie.top};return U>=B&&(g.savedBBoxes={},U=0),le&&(g.savedBBoxes[le]=oe),U++,s.extendFlat({},oe)};function j(W){var J=W.getAttribute("data-unformatted");if(J!==null)return J+W.getAttribute("data-math")+W.getAttribute("text-anchor")+W.getAttribute("style")}g.setClipUrl=function(W,J,le){W.attr("clip-path",Z(J,le))};function Z(W,J){if(!W)return null;var le=J._context,fe=le._exportedPlot?"":le._baseUrl||"";return fe?"url('"+fe+"#"+W+"')":"url(#"+W+")"}g.getTranslate=function(W){var J=/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,le=W.attr?"attr":"getAttribute",fe=W[le]("transform")||"",se=fe.replace(J,function(H,Y,ne){return[Y,ne].join(" ")}).split(" ");return{x:+se[0]||0,y:+se[1]||0}},g.setTranslate=function(W,J,le){var fe=/(\btranslate\(.*?\);?)/,se=W.attr?"attr":"getAttribute",H=W.attr?"attr":"setAttribute",Y=W[se]("transform")||"";return J=J||0,le=le||0,Y=Y.replace(fe,"").trim(),Y+=n(J,le),Y=Y.trim(),W[H]("transform",Y),Y},g.getScale=function(W){var J=/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,le=W.attr?"attr":"getAttribute",fe=W[le]("transform")||"",se=fe.replace(J,function(H,Y,ne){return[Y,ne].join(" ")}).split(" ");return{x:+se[0]||1,y:+se[1]||1}},g.setScale=function(W,J,le){var fe=/(\bscale\(.*?\);?)/,se=W.attr?"attr":"getAttribute",H=W.attr?"attr":"setAttribute",Y=W[se]("transform")||"";return J=J||1,le=le||1,Y=Y.replace(fe,"").trim(),Y+="scale("+J+","+le+")",Y=Y.trim(),W[H]("transform",Y),Y};var ee=/\s*sc.*/;g.setPointGroupScale=function(W,J,le){if(J=J||1,le=le||1,!!W){var fe=J===1&&le===1?"":"scale("+J+","+le+")";W.each(function(){var se=(this.getAttribute("transform")||"").replace(ee,"");se+=fe,se=se.trim(),this.setAttribute("transform",se)})}};var q=/translate\([^)]*\)\s*$/;g.setTextPointsScale=function(W,J,le){!W||W.each(function(){var fe,se=u.select(this),H=se.select("text");if(!!H.node()){var Y=parseFloat(H.attr("x")||0),ne=parseFloat(H.attr("y")||0),te=(se.attr("transform")||"").match(q);J===1&&le===1?fe=[]:fe=[n(Y,ne),"scale("+J+","+le+")",n(-Y,-ne)],te&&fe.push(te),se.attr("transform",fe.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(e,z,N){var u=e("@plotly/d3");z.exports={circle:{n:0,f:function(s){var m=u.round(s,2);return"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"}},square:{n:1,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"}},diamond:{n:2,f:function(s){var m=u.round(s*1.3,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"Z"}},cross:{n:3,f:function(s){var m=u.round(s*.4,2),x=u.round(s*1.2,2);return"M"+x+","+m+"H"+m+"V"+x+"H-"+m+"V"+m+"H-"+x+"V-"+m+"H-"+m+"V-"+x+"H"+m+"V-"+m+"H"+x+"Z"}},x:{n:4,f:function(s){var m=u.round(s*.8/Math.sqrt(2),2),x="l"+m+","+m,t="l"+m+",-"+m,i="l-"+m+",-"+m,a="l-"+m+","+m;return"M0,"+m+x+t+i+t+i+a+i+a+x+a+x+"Z"}},"triangle-up":{n:5,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M-"+m+","+x+"H"+m+"L0,-"+t+"Z"}},"triangle-down":{n:6,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M-"+m+",-"+x+"H"+m+"L0,"+t+"Z"}},"triangle-left":{n:7,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M"+x+",-"+m+"V"+m+"L-"+t+",0Z"}},"triangle-right":{n:8,f:function(s){var m=u.round(s*2/Math.sqrt(3),2),x=u.round(s/2,2),t=u.round(s,2);return"M-"+x+",-"+m+"V"+m+"L"+t+",0Z"}},"triangle-ne":{n:9,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M-"+x+",-"+m+"H"+m+"V"+x+"Z"}},"triangle-se":{n:10,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M"+m+",-"+x+"V"+m+"H-"+x+"Z"}},"triangle-sw":{n:11,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M"+x+","+m+"H-"+m+"V-"+x+"Z"}},"triangle-nw":{n:12,f:function(s){var m=u.round(s*.6,2),x=u.round(s*1.2,2);return"M-"+m+","+x+"V-"+m+"H"+x+"Z"}},pentagon:{n:13,f:function(s){var m=u.round(s*.951,2),x=u.round(s*.588,2),t=u.round(-s,2),i=u.round(s*-.309,2),a=u.round(s*.809,2);return"M"+m+","+i+"L"+x+","+a+"H-"+x+"L-"+m+","+i+"L0,"+t+"Z"}},hexagon:{n:14,f:function(s){var m=u.round(s,2),x=u.round(s/2,2),t=u.round(s*Math.sqrt(3)/2,2);return"M"+t+",-"+x+"V"+x+"L0,"+m+"L-"+t+","+x+"V-"+x+"L0,-"+m+"Z"}},hexagon2:{n:15,f:function(s){var m=u.round(s,2),x=u.round(s/2,2),t=u.round(s*Math.sqrt(3)/2,2);return"M-"+x+","+t+"H"+x+"L"+m+",0L"+x+",-"+t+"H-"+x+"L-"+m+",0Z"}},octagon:{n:16,f:function(s){var m=u.round(s*.924,2),x=u.round(s*.383,2);return"M-"+x+",-"+m+"H"+x+"L"+m+",-"+x+"V"+x+"L"+x+","+m+"H-"+x+"L-"+m+","+x+"V-"+x+"Z"}},star:{n:17,f:function(s){var m=s*1.4,x=u.round(m*.225,2),t=u.round(m*.951,2),i=u.round(m*.363,2),a=u.round(m*.588,2),r=u.round(-m,2),n=u.round(m*-.309,2),f=u.round(m*.118,2),l=u.round(m*.809,2),o=u.round(m*.382,2);return"M"+x+","+n+"H"+t+"L"+i+","+f+"L"+a+","+l+"L0,"+o+"L-"+a+","+l+"L-"+i+","+f+"L-"+t+","+n+"H-"+x+"L0,"+r+"Z"}},hexagram:{n:18,f:function(s){var m=u.round(s*.66,2),x=u.round(s*.38,2),t=u.round(s*.76,2);return"M-"+t+",0l-"+x+",-"+m+"h"+t+"l"+x+",-"+m+"l"+x+","+m+"h"+t+"l-"+x+","+m+"l"+x+","+m+"h-"+t+"l-"+x+","+m+"l-"+x+",-"+m+"h-"+t+"Z"}},"star-triangle-up":{n:19,f:function(s){var m=u.round(s*Math.sqrt(3)*.8,2),x=u.round(s*.8,2),t=u.round(s*1.6,2),i=u.round(s*4,2),a="A "+i+","+i+" 0 0 1 ";return"M-"+m+","+x+a+m+","+x+a+"0,-"+t+a+"-"+m+","+x+"Z"}},"star-triangle-down":{n:20,f:function(s){var m=u.round(s*Math.sqrt(3)*.8,2),x=u.round(s*.8,2),t=u.round(s*1.6,2),i=u.round(s*4,2),a="A "+i+","+i+" 0 0 1 ";return"M"+m+",-"+x+a+"-"+m+",-"+x+a+"0,"+t+a+m+",-"+x+"Z"}},"star-square":{n:21,f:function(s){var m=u.round(s*1.1,2),x=u.round(s*2,2),t="A "+x+","+x+" 0 0 1 ";return"M-"+m+",-"+m+t+"-"+m+","+m+t+m+","+m+t+m+",-"+m+t+"-"+m+",-"+m+"Z"}},"star-diamond":{n:22,f:function(s){var m=u.round(s*1.4,2),x=u.round(s*1.9,2),t="A "+x+","+x+" 0 0 1 ";return"M-"+m+",0"+t+"0,"+m+t+m+",0"+t+"0,-"+m+t+"-"+m+",0Z"}},"diamond-tall":{n:23,f:function(s){var m=u.round(s*.7,2),x=u.round(s*1.4,2);return"M0,"+x+"L"+m+",0L0,-"+x+"L-"+m+",0Z"}},"diamond-wide":{n:24,f:function(s){var m=u.round(s*1.4,2),x=u.round(s*.7,2);return"M0,"+x+"L"+m+",0L0,-"+x+"L-"+m+",0Z"}},hourglass:{n:25,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"H-"+m+"L"+m+",-"+m+"H-"+m+"Z"},noDot:!0},bowtie:{n:26,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"V-"+m+"L-"+m+","+m+"V-"+m+"Z"},noDot:!0},"circle-cross":{n:27,f:function(s){var m=u.round(s,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(s){var m=u.round(s,2),x=u.round(s/Math.sqrt(2),2);return"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x+"M"+m+",0A"+m+","+m+" 0 1,1 0,-"+m+"A"+m+","+m+" 0 0,1 "+m+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(s){var m=u.round(s,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m+"M"+m+","+m+"H-"+m+"V-"+m+"H"+m+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(s){var m=u.round(s*1.3,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM0,-"+m+"V"+m+"M-"+m+",0H"+m},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(s){var m=u.round(s*1.3,2),x=u.round(s*.65,2);return"M"+m+",0L0,"+m+"L-"+m+",0L0,-"+m+"ZM-"+x+",-"+x+"L"+x+","+x+"M-"+x+","+x+"L"+x+",-"+x},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(s){var m=u.round(s*1.4,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"L-"+m+",-"+m+"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*.85,2);return"M0,"+m+"V-"+m+"M"+m+",0H-"+m+"M"+x+","+x+"L-"+x+",-"+x+"M"+x+",-"+x+"L-"+x+","+x},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(s){var m=u.round(s/2,2),x=u.round(s,2);return"M"+m+","+x+"V-"+x+"m-"+x+",0V"+x+"M"+x+","+m+"H-"+x+"m0,-"+x+"H"+x},needLine:!0,noFill:!0},"y-up":{n:37,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M-"+m+","+t+"L0,0M"+m+","+t+"L0,0M0,-"+x+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M-"+m+",-"+t+"L0,0M"+m+",-"+t+"L0,0M0,"+x+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M"+t+","+m+"L0,0M"+t+",-"+m+"L0,0M-"+x+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(s){var m=u.round(s*1.2,2),x=u.round(s*1.6,2),t=u.round(s*.8,2);return"M-"+t+","+m+"L0,0M-"+t+",-"+m+"L0,0M"+x+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(s){var m=u.round(s*1.4,2);return"M"+m+",0H-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(s){var m=u.round(s*1.4,2);return"M0,"+m+"V-"+m},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(s){var m=u.round(s,2);return"M"+m+",-"+m+"L-"+m+","+m},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(s){var m=u.round(s,2);return"M"+m+","+m+"L-"+m+",-"+m},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M0,0L-"+m+","+x+"H"+m+"Z"},noDot:!0},"arrow-down":{n:46,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M0,0L-"+m+",-"+x+"H"+m+"Z"},noDot:!0},"arrow-left":{n:47,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,0L"+m+",-"+x+"V"+x+"Z"},noDot:!0},"arrow-right":{n:48,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,0L-"+m+",-"+x+"V"+x+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M-"+m+",0H"+m+"M0,0L-"+m+","+x+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(s){var m=u.round(s,2),x=u.round(s*2,2);return"M-"+m+",0H"+m+"M0,0L-"+m+",-"+x+"H"+m+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,-"+x+"V"+x+"M0,0L"+m+",-"+x+"V"+x+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(s){var m=u.round(s*2,2),x=u.round(s,2);return"M0,-"+x+"V"+x+"M0,0L-"+m+",-"+x+"V"+x+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(e,z,N){z.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../registry"),m=e("../../plots/cartesian/axes"),x=e("../../lib"),t=e("./compute_error");z.exports=function(r){for(var n=r.calcdata,f=0;f<n.length;f++){var l=n[f],o=l[0].trace;if(o.visible===!0&&s.traceIs(o,"errorBarsOK")){var c=m.getFromId(r,o.xaxis),h=m.getFromId(r,o.yaxis);i(l,o,c,"x"),i(l,o,h,"y")}}};function i(a,r,n,f){var l=r["error_"+f]||{},o=l.visible&&["linear","log"].indexOf(n.type)!==-1,c=[];if(!!o){for(var h=t(l),d=0;d<a.length;d++){var p=a[d],y=p.i;if(y===void 0)y=d;else if(y===null)continue;var g=p[f];if(!!u(n.c2l(g))){var A=h(g,y);if(u(A[0])&&u(A[1])){var b=p[f+"s"]=g-A[0],M=p[f+"h"]=g+A[1];c.push(b,M)}}}var _=n._id,T=r._extremes[_],w=m.findExtremes(n,c,x.extendFlat({tozero:T.opts.tozero},{padded:!0}));T.min=T.min.concat(w.min),T.max=T.max.concat(w.max)}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(e,z,N){z.exports=function(m){var x=m.type,t=m.symmetric;if(x==="data"){var i=m.array||[];if(t)return function(l,o){var c=+i[o];return[c,c]};var a=m.arrayminus||[];return function(l,o){var c=+i[o],h=+a[o];return!isNaN(c)||!isNaN(h)?[h||0,c||0]:[NaN,NaN]}}else{var r=u(x,m.value),n=u(x,m.valueminus);return t||m.valueminus===void 0?function(l){var o=r(l);return[o,o]}:function(l){return[n(l),r(l)]}}};function u(s,m){if(s==="percent")return function(x){return Math.abs(x*m/100)};if(s==="constant")return function(){return Math.abs(m)};if(s==="sqrt")return function(x){return Math.sqrt(Math.abs(x))}}},{}],393:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../registry"),m=e("../../lib"),x=e("../../plot_api/plot_template"),t=e("./attributes");z.exports=function(i,a,r,n){var f="error_"+n.axis,l=x.newContainer(a,f),o=i[f]||{};function c(b,M){return m.coerce(o,l,t,b,M)}var h=o.array!==void 0||o.value!==void 0||o.type==="sqrt",d=c("visible",h);if(d!==!1){var p=c("type","array"in o?"data":"percent"),y=!0;p!=="sqrt"&&(y=c("symmetric",!((p==="data"?"arrayminus":"valueminus")in o))),p==="data"?(c("array"),c("traceref"),y||(c("arrayminus"),c("tracerefminus"))):(p==="percent"||p==="constant")&&(c("value"),y||c("valueminus"));var g="copy_"+n.inherit+"style";if(n.inherit){var A=a["error_"+n.inherit];(A||{}).visible&&c(g,!(o.color||u(o.thickness)||u(o.width)))}(!n.inherit||!l[g])&&(c("color",r),c("thickness"),c("width",s.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(e,z,N){var u=e("../../lib"),s=e("../../plot_api/edit_types").overrideAll,m=e("./attributes"),x={error_x:u.extendFlat({},m),error_y:u.extendFlat({},m)};delete x.error_x.copy_zstyle,delete x.error_y.copy_zstyle,delete x.error_y.copy_ystyle;var t={error_x:u.extendFlat({},m),error_y:u.extendFlat({},m),error_z:u.extendFlat({},m)};delete t.error_x.copy_ystyle,delete t.error_y.copy_ystyle,delete t.error_z.copy_ystyle,delete t.error_z.copy_zstyle,z.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:x,bar:x,histogram:x,scatter3d:s(t,"calc","nested"),scattergl:s(x,"calc","nested")}},supplyDefaults:e("./defaults"),calc:e("./calc"),makeComputeError:e("./compute_error"),plot:e("./plot"),style:e("./style"),hoverInfo:i};function i(a,r,n){(r.error_y||{}).visible&&(n.yerr=a.yh-a.y,r.error_y.symmetric||(n.yerrneg=a.y-a.ys)),(r.error_x||{}).visible&&(n.xerr=a.xh-a.x,r.error_x.symmetric||(n.xerrneg=a.x-a.xs))}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../drawing"),x=e("../../traces/scatter/subtypes");z.exports=function(a,r,n,f){var l,o=n.xaxis,c=n.yaxis,h=f&&f.duration>0;r.each(function(d){var p=d[0].trace,y=p.error_x||{},g=p.error_y||{},A;p.ids&&(A=function(T){return T.id});var b=x.hasMarkers(p)&&p.marker.maxdisplayed>0;!g.visible&&!y.visible&&(d=[]);var M=u.select(this).selectAll("g.errorbar").data(d,A);if(M.exit().remove(),!!d.length){y.visible||M.selectAll("path.xerror").remove(),g.visible||M.selectAll("path.yerror").remove(),M.style("opacity",1);var _=M.enter().append("g").classed("errorbar",!0);h&&_.style("opacity",0).transition().duration(f.duration).style("opacity",1),m.setClipUrl(M,n.layerClipId,a),M.each(function(T){var w=u.select(this),v=t(T,o,c);if(!(b&&!T.vis)){var L,S=w.select("path.yerror");if(g.visible&&s(v.x)&&s(v.yh)&&s(v.ys)){var k=g.width;L="M"+(v.x-k)+","+v.yh+"h"+2*k+"m-"+k+",0V"+v.ys,v.noYS||(L+="m-"+k+",0h"+2*k),l=!S.size(),l?S=w.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0):h&&(S=S.transition().duration(f.duration).ease(f.easing)),S.attr("d",L)}else S.remove();var P=w.select("path.xerror");if(y.visible&&s(v.y)&&s(v.xh)&&s(v.xs)){var O=(y.copy_ystyle?g:y).width;L="M"+v.xh+","+(v.y-O)+"v"+2*O+"m0,-"+O+"H"+v.xs,v.noXS||(L+="m0,-"+O+"v"+2*O),l=!P.size(),l?P=w.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0):h&&(P=P.transition().duration(f.duration).ease(f.easing)),P.attr("d",L)}else P.remove()}})}})};function t(i,a,r){var n={x:a.c2p(i.x),y:r.c2p(i.y)};return i.yh!==void 0&&(n.yh=r.c2p(i.yh),n.ys=r.c2p(i.ys),s(n.ys)||(n.noYS=!0,n.ys=r.c2p(i.ys,!0))),i.xh!==void 0&&(n.xh=a.c2p(i.xh),n.xs=a.c2p(i.xs),s(n.xs)||(n.noXS=!0,n.xs=a.c2p(i.xs,!0))),n}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(e,z,N){var u=e("@plotly/d3"),s=e("../color");z.exports=function(x){x.each(function(t){var i=t[0].trace,a=i.error_y||{},r=i.error_x||{},n=u.select(this);n.selectAll("path.yerror").style("stroke-width",a.thickness+"px").call(s.stroke,a.color),r.copy_ystyle&&(r=a),n.selectAll("path.xerror").style("stroke-width",r.thickness+"px").call(s.stroke,r.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("./layout_attributes").hoverlabel,m=e("../../lib/extend").extendFlat;z.exports={hoverlabel:{bgcolor:m({},s.bgcolor,{arrayOk:!0}),bordercolor:m({},s.bordercolor,{arrayOk:!0}),font:u({arrayOk:!0,editType:"none"}),align:m({},s.align,{arrayOk:!0}),namelength:m({},s.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(e,z,N){var u=e("../../lib"),s=e("../../registry");z.exports=function(t){var i=t.calcdata,a=t._fullLayout;function r(c){return function(h){return u.coerceHoverinfo({hoverinfo:h},{_module:c._module},a)}}for(var n=0;n<i.length;n++){var f=i[n],l=f[0].trace;if(!s.traceIs(l,"pie-like")){var o=s.traceIs(l,"2dMap")?m:u.fillArray;o(l.hoverinfo,f,"hi",r(l)),l.hovertemplate&&o(l.hovertemplate,f,"ht"),!!l.hoverlabel&&(o(l.hoverlabel.bgcolor,f,"hbg"),o(l.hoverlabel.bordercolor,f,"hbc"),o(l.hoverlabel.font.size,f,"hts"),o(l.hoverlabel.font.color,f,"htc"),o(l.hoverlabel.font.family,f,"htf"),o(l.hoverlabel.namelength,f,"hnl"),o(l.hoverlabel.align,f,"hta"))}}};function m(x,t,i,a){a=a||u.identity,Array.isArray(x)&&(t[0][i]=a(x))}},{"../../lib":503,"../../registry":638}],399:[function(e,z,N){var u=e("../../registry"),s=e("./hover").hover;z.exports=function(x,t,i){var a=u.getComponentMethod("annotations","onClick")(x,x._hoverdata);i!==void 0&&s(x,t,i,!0);function r(){x.emit("plotly_click",{points:x._hoverdata,event:t})}x._hoverdata&&t&&t.target&&(a&&a.then?a.then(r):r(),t.stopImmediatePropagation&&t.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(e,z,N){z.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("./hoverlabel_defaults");z.exports=function(t,i,a,r){function n(l,o){return u.coerce(t,i,s,l,o)}var f=u.extendFlat({},r.hoverlabel);i.hovertemplate&&(f.namelength=-1),m(t,i,n,f)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(e,z,N){var u=e("../../lib");N.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},N.isTraceInSubplots=function(a,r){if(a.type==="splom"){for(var n=a.xaxes||[],f=a.yaxes||[],l=0;l<n.length;l++)for(var o=0;o<f.length;o++)if(r.indexOf(n[l]+f[o])!==-1)return!0;return!1}return r.indexOf(N.getSubplot(a))!==-1},N.flat=function(a,r){for(var n=new Array(a.length),f=0;f<a.length;f++)n[f]=r;return n},N.p2c=function(a,r){for(var n=new Array(a.length),f=0;f<a.length;f++)n[f]=a[f].p2c(r);return n},N.getDistanceFunction=function(a,r,n,f){return a==="closest"?f||N.quadrature(r,n):a.charAt(0)==="x"?r:n},N.getClosest=function(a,r,n){if(n.index!==!1)n.index>=0&&n.index<a.length?n.distance=0:n.index=!1;else for(var f=0;f<a.length;f++){var l=r(a[f]);l<=n.distance&&(n.index=f,n.distance=l)}return n},N.inbox=function(a,r,n){return a*r<0||a===0?n:1/0},N.quadrature=function(a,r){return function(n){var f=a(n),l=r(n);return Math.sqrt(f*f+l*l)}},N.makeEventData=function(a,r,n){var f="index"in a?a.index:a.pointNumber,l={data:r._input,fullData:r,curveNumber:r.index,pointNumber:f};if(r._indexToPoints){var o=r._indexToPoints[f];o.length===1?l.pointIndex=o[0]:l.pointIndices=o}else l.pointIndex=f;return r._module.eventData?l=r._module.eventData(l,a,r,n,f):("xVal"in a?l.x=a.xVal:"x"in a&&(l.x=a.x),"yVal"in a?l.y=a.yVal:"y"in a&&(l.y=a.y),a.xa&&(l.xaxis=a.xa),a.ya&&(l.yaxis=a.ya),a.zLabelVal!==void 0&&(l.z=a.zLabelVal)),N.appendArrayPointValue(l,r,f),l},N.appendArrayPointValue=function(a,r,n){var f=r._arrayAttrs;if(!!f)for(var l=0;l<f.length;l++){var o=f[l],c=m(o);if(a[c]===void 0){var h=u.nestedProperty(r,o).get(),d=x(h,n);d!==void 0&&(a[c]=d)}}},N.appendArrayMultiPointValues=function(a,r,n){var f=r._arrayAttrs;if(!!f)for(var l=0;l<f.length;l++){var o=f[l],c=m(o);if(a[c]===void 0){for(var h=u.nestedProperty(r,o).get(),d=new Array(n.length),p=0;p<n.length;p++)d[p]=x(h,n[p]);a[c]=d}}};var s={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function m(a){return s[a]||a}function x(a,r){if(Array.isArray(r)){if(Array.isArray(a)&&Array.isArray(a[r[0]]))return a[r[0]][r[1]]}else return a[r]}var t={x:!0,y:!0},i={"x unified":!0,"y unified":!0};N.isUnifiedHover=function(a){return typeof a!="string"?!1:!!i[a]},N.isXYhover=function(a){return typeof a!="string"?!1:!!t[a]}},{"../../lib":503}],403:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("tinycolor2"),x=e("../../lib"),t=x.strTranslate,i=x.strRotate,a=e("../../lib/events"),r=e("../../lib/svg_text_utils"),n=e("../../lib/override_cursor"),f=e("../drawing"),l=e("../color"),o=e("../dragelement"),c=e("../../plots/cartesian/axes"),h=e("../../registry"),d=e("./helpers"),p=e("./constants"),y=e("../legend/defaults"),g=e("../legend/draw"),A=p.YANGLE,b=Math.PI*A/180,M=1/Math.sin(b),_=Math.cos(b),T=Math.sin(b),w=p.HOVERARROWSIZE,v=p.HOVERTEXTPAD,L={box:!0,ohlc:!0,violin:!0,candlestick:!0},S={scatter:!0,scattergl:!0,splom:!0};N.hover=function(Y,ne,te,K){Y=x.getGraphDiv(Y);var $=ne.target;x.throttle(Y._fullLayout._uid+p.HOVERID,p.HOVERMINTIME,function(){k(Y,ne,te,K,$)})},N.loneHover=function(Y,ne){var te=!0;Array.isArray(Y)||(te=!1,Y=[Y]);var K=ne.gd,$=le(K),ae=fe(K),ie=Y.map(function(Ae){var Oe=Ae._x0||Ae.x0||Ae.x||0,He=Ae._x1||Ae.x1||Ae.x||0,Ge=Ae._y0||Ae.y0||Ae.y||0,_e=Ae._y1||Ae.y1||Ae.y||0,Re=Ae.eventData;if(Re){var We=Math.min(Oe,He),qe=Math.max(Oe,He),Ue=Math.min(Ge,_e),Ie=Math.max(Ge,_e),Ve=Ae.trace;if(h.traceIs(Ve,"gl3d")){var dt=K._fullLayout[Ve.scene]._scene.container,Rt=dt.offsetLeft,Gt=dt.offsetTop;We+=Rt,qe+=Rt,Ue+=Gt,Ie+=Gt}Re.bbox={x0:We+ae,x1:qe+ae,y0:Ue+$,y1:Ie+$},ne.inOut_bbox&&ne.inOut_bbox.push(Re.bbox)}else Re=!1;return{color:Ae.color||l.defaultLine,x0:Ae.x0||Ae.x||0,x1:Ae.x1||Ae.x||0,y0:Ae.y0||Ae.y||0,y1:Ae.y1||Ae.y||0,xLabel:Ae.xLabel,yLabel:Ae.yLabel,zLabel:Ae.zLabel,text:Ae.text,name:Ae.name,idealAlign:Ae.idealAlign,borderColor:Ae.borderColor,fontFamily:Ae.fontFamily,fontSize:Ae.fontSize,fontColor:Ae.fontColor,nameLength:Ae.nameLength,textAlign:Ae.textAlign,trace:Ae.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:Ae.hovertemplate||!1,hovertemplateLabels:Ae.hovertemplateLabels||!1,eventData:Re}}),oe=!1,ue=F(ie,{gd:K,hovermode:"closest",rotateLabels:oe,bgColor:ne.bgColor||l.background,container:u.select(ne.container),outerContainer:ne.outerContainer||ne.container}),ye=5,ce=0,me=0;ue.sort(function(Ae,Oe){return Ae.y0-Oe.y0}).each(function(Ae,Oe){var He=Ae.y0-Ae.by/2;He-ye<ce?Ae.offset=ce-He+ye:Ae.offset=0,ce=He+Ae.by+Ae.offset,Oe===ne.anchorIndex&&(me=Ae.offset)}).each(function(Ae){Ae.offset-=me});var xe=K._fullLayout._invScaleX,ke=K._fullLayout._invScaleY;return U(ue,oe,xe,ke),te?ue:ue.node()};function k(H,Y,ne,te,K){ne||(ne="xy");var $=Array.isArray(ne)?ne:[ne],ae=H._fullLayout,ie=ae._plots||[],oe=ie[ne],ue=ae._has("cartesian");if(oe){var ye=oe.overlays.map(function(hr){return hr.id});$=$.concat(ye)}for(var ce=$.length,me=new Array(ce),xe=new Array(ce),ke=!1,Ae=0;Ae<ce;Ae++){var Oe=$[Ae];if(ie[Oe])ke=!0,me[Ae]=ie[Oe].xaxis,xe[Ae]=ie[Oe].yaxis;else if(ae[Oe]&&ae[Oe]._subplot){var He=ae[Oe]._subplot;me[Ae]=He.xaxis,xe[Ae]=He.yaxis}else{x.warn("Unrecognized subplot: "+Oe);return}}var Ge=Y.hovermode||ae.hovermode;if(Ge&&!ke&&(Ge="closest"),["x","y","closest","x unified","y unified"].indexOf(Ge)===-1||!H.calcdata||H.querySelector(".zoombox")||H._dragging)return o.unhoverRaw(H,Y);var _e=ae.hoverdistance;_e===-1&&(_e=1/0);var Re=ae.spikedistance;Re===-1&&(Re=1/0);var We=[],qe=[],Ue,Ie,Ve,dt,Rt,Gt,kt,zt,Bt,Lt,Mt,it,ht,Qe={hLinePoint:null,vLinePoint:null},Ce=!1;if(Array.isArray(Y))for(Ge="array",Ve=0;Ve<Y.length;Ve++)Rt=H.calcdata[Y[Ve].curveNumber||0],Rt&&(Gt=Rt[0].trace,Rt[0].trace.hoverinfo!=="skip"&&(qe.push(Rt),Gt.orientation==="h"&&(Ce=!0)));else{for(dt=0;dt<H.calcdata.length;dt++)Rt=H.calcdata[dt],Gt=Rt[0].trace,Gt.hoverinfo!=="skip"&&d.isTraceInSubplots(Gt,$)&&(qe.push(Rt),Gt.orientation==="h"&&(Ce=!0));var Xe=!K,rt,ut;if(Xe)"xpx"in Y?rt=Y.xpx:rt=me[0]._length/2,"ypx"in Y?ut=Y.ypx:ut=xe[0]._length/2;else{if(a.triggerHandler(H,"plotly_beforehover",Y)===!1)return;var Pt=K.getBoundingClientRect();rt=Y.clientX-Pt.left,ut=Y.clientY-Pt.top,ae._calcInverseTransform(H);var St=x.apply3DTransform(ae._invTransform)(rt,ut);if(rt=St[0],ut=St[1],rt<0||rt>me[0]._length||ut<0||ut>xe[0]._length)return o.unhoverRaw(H,Y)}if(Y.pointerX=rt+me[0]._offset,Y.pointerY=ut+xe[0]._offset,"xval"in Y?Ue=d.flat($,Y.xval):Ue=d.p2c(me,rt),"yval"in Y?Ie=d.flat($,Y.yval):Ie=d.p2c(xe,ut),!s(Ue[0])||!s(Ie[0]))return x.warn("Fx.hover failed",Y,H),o.unhoverRaw(H,Y)}var Nt=1/0;function jt(hr,Wr){for(dt=0;dt<qe.length;dt++)if(Rt=qe[dt],!(!Rt||!Rt[0]||!Rt[0].trace)&&(Gt=Rt[0].trace,!(Gt.visible!==!0||Gt._length===0)&&["carpet","contourcarpet"].indexOf(Gt._module.name)===-1)){if(Gt.type==="splom"?(zt=0,kt=$[zt]):(kt=d.getSubplot(Gt),zt=$.indexOf(kt)),Bt=Ge,d.isUnifiedHover(Bt)&&(Bt=Bt.charAt(0)),it={cd:Rt,trace:Gt,xa:me[zt],ya:xe[zt],maxHoverDistance:_e,maxSpikeDistance:Re,index:!1,distance:Math.min(Nt,_e),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:l.defaultLine,name:Gt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ae[kt]&&(it.subplot=ae[kt]._subplot),ae._splomScenes&&ae._splomScenes[Gt.uid]&&(it.scene=ae._splomScenes[Gt.uid]),ht=We.length,Bt==="array"){var zr=Y[dt];"pointNumber"in zr?(it.index=zr.pointNumber,Bt="closest"):(Bt="","xval"in zr&&(Lt=zr.xval,Bt="x"),"yval"in zr&&(Mt=zr.yval,Bt=Bt?"closest":"y"))}else hr!==void 0&&Wr!==void 0?(Lt=hr,Mt=Wr):(Lt=Ue[zt],Mt=Ie[zt]);if(_e!==0)if(Gt._module&&Gt._module.hoverPoints){var Pr=Gt._module.hoverPoints(it,Lt,Mt,Bt,{finiteRange:!0,hoverLayer:ae._hoverlayer});if(Pr)for(var br,Xr=0;Xr<Pr.length;Xr++)br=Pr[Xr],s(br.x0)&&s(br.y0)&&We.push(B(br,Ge))}else x.log("Unrecognized trace type in hover:",Gt);if(Ge==="closest"&&We.length>ht&&(We.splice(0,ht),Nt=We[0].distance),ue&&Re!==0&&We.length===0){it.distance=Re,it.index=!1;var Fn=Gt._module.hoverPoints(it,Lt,Mt,"closest",{hoverLayer:ae._hoverlayer});if(Fn&&(Fn=Fn.filter(function(pr){return pr.spikeDistance<=Re})),Fn&&Fn.length){var kn,ra=Fn.filter(function(pr){return pr.xa.showspikes&&pr.xa.spikesnap!=="hovered data"});if(ra.length){var oa=ra[0];s(oa.x0)&&s(oa.y0)&&(kn=Kt(oa),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>kn.spikeDistance)&&(Qe.vLinePoint=kn))}var Sa=Fn.filter(function(pr){return pr.ya.showspikes&&pr.ya.spikesnap!=="hovered data"});if(Sa.length){var ya=Sa[0];s(ya.x0)&&s(ya.y0)&&(kn=Kt(ya),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>kn.spikeDistance)&&(Qe.hLinePoint=kn))}}}}}jt();function Ot(hr,Wr,zr){for(var Pr=null,br=1/0,Xr,Fn=0;Fn<hr.length;Fn++)Xr=hr[Fn].spikeDistance,zr&&Fn===0&&(Xr=-1/0),Xr<=br&&Xr<=Wr&&(Pr=hr[Fn],br=Xr);return Pr}function Kt(hr){return hr?{xa:hr.xa,ya:hr.ya,x:hr.xSpike!==void 0?hr.xSpike:(hr.x0+hr.x1)/2,y:hr.ySpike!==void 0?hr.ySpike:(hr.y0+hr.y1)/2,distance:hr.distance,spikeDistance:hr.spikeDistance,curveNumber:hr.trace.index,color:hr.color,pointNumber:hr.index}:null}var Je={fullLayout:ae,container:ae._hoverlayer,event:Y},gt=H._spikepoints,Et={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};H._spikepoints=Et;var rr=function(){We.sort(function(hr,Wr){return hr.distance-Wr.distance}),We=W(We,Ge)};rr();var vr=Ge.charAt(0),or=(vr==="x"||vr==="y")&&We[0]&&S[We[0].trace.type];if(ue&&Re!==0&&We.length!==0){var dr=We.filter(function(hr){return hr.ya.showspikes}),Lr=Ot(dr,Re,or);Qe.hLinePoint=Kt(Lr);var kr=We.filter(function(hr){return hr.xa.showspikes}),tr=Ot(kr,Re,or);Qe.vLinePoint=Kt(tr)}if(We.length===0){var Or=o.unhoverRaw(H,Y);return ue&&(Qe.hLinePoint!==null||Qe.vLinePoint!==null)&&ee(gt)&&j(H,Qe,Je),Or}if(ue&&ee(gt)&&j(H,Qe,Je),d.isXYhover(Bt)&&We[0].length!==0&&We[0].trace.type!=="splom"){var et=We[0];L[et.trace.type]?We=We.filter(function(hr){return hr.trace.index===et.trace.index}):We=[et];var we=We.length,Se=J("x",et,ae),De=J("y",et,ae);jt(Se,De);var je=[],$e={},ot=0,st=function(hr){var Wr=L[hr.trace.type]?P(hr):hr.trace.index;if(!$e[Wr])ot++,$e[Wr]=ot,je.push(hr);else{var zr=$e[Wr]-1,Pr=je[zr];zr>0&&Math.abs(hr.distance)<Math.abs(Pr.distance)&&(je[zr]=hr)}},pt;for(pt=0;pt<we;pt++)st(We[pt]);for(pt=We.length-1;pt>we-1;pt--)st(We[pt]);We=je,rr()}var wt=H._hoverdata,Wt=[],yr=le(H),xr=fe(H);for(Ve=0;Ve<We.length;Ve++){var Tr=We[Ve],mr=d.makeEventData(Tr,Tr.trace,Tr.cd);if(Tr.hovertemplate!==!1){var Rr=!1;Tr.cd[Tr.index]&&Tr.cd[Tr.index].ht&&(Rr=Tr.cd[Tr.index].ht),Tr.hovertemplate=Rr||Tr.trace.hovertemplate||!1}if(Tr.xa&&Tr.ya){var tn=Tr.x0+Tr.xa._offset,wr=Tr.x1+Tr.xa._offset,gr=Tr.y0+Tr.ya._offset,mn=Tr.y1+Tr.ya._offset,Gr=Math.min(tn,wr),Ar=Math.max(tn,wr),nn=Math.min(gr,mn),fn=Math.max(gr,mn);mr.bbox={x0:Gr+xr,x1:Ar+xr,y0:nn+yr,y1:fn+yr}}Tr.eventData=[mr],Wt.push(mr)}H._hoverdata=Wt;var jr=Ge==="y"&&(qe.length>1||We.length>1)||Ge==="closest"&&Ce&&We.length>1,at=l.combine(ae.plot_bgcolor||l.background,ae.paper_bgcolor),Ft=F(We,{gd:H,hovermode:Ge,rotateLabels:jr,bgColor:at,container:ae._hoverlayer,outerContainer:ae._paper.node(),commonLabelOpts:ae.hoverlabel,hoverdistance:ae.hoverdistance});if(d.isUnifiedHover(Ge)||(D(Ft,jr?"xa":"ya",ae),U(Ft,jr,ae._invScaleX,ae._invScaleY)),K&&K.tagName){var er=h.getComponentMethod("annotations","hasClickToShow")(H,Wt);n(u.select(K),er?"pointer":"")}!K||te||!Z(H,Y,wt)||(wt&&H.emit("plotly_unhover",{event:Y,points:wt}),H.emit("plotly_hover",{event:Y,points:H._hoverdata,xaxes:me,yaxes:xe,xvals:Ue,yvals:Ie}))}function P(H){return[H.trace.index,H.index,H.x0,H.y0,H.name,H.attr,H.xa?H.xa._id:"",H.ya?H.ya._id:""].join(",")}var O=/<extra>([\s\S]*)<\/extra>/;function F(H,Y){var ne=Y.gd,te=ne._fullLayout,K=Y.hovermode,$=Y.rotateLabels,ae=Y.bgColor,ie=Y.container,oe=Y.outerContainer,ue=Y.commonLabelOpts||{};if(H.length===0)return[[]];var ye=Y.fontFamily||p.HOVERFONT,ce=Y.fontSize||p.HOVERFONTSIZE,me=H[0],xe=me.xa,ke=me.ya,Ae=K.charAt(0),Oe=me[Ae+"Label"],He=se(ne,oe),Ge=He.top,_e=He.width,Re=He.height,We=Oe!==void 0&&me.distance<=Y.hoverdistance&&(K==="x"||K==="y");if(We){var qe=!0,Ue,Ie;for(Ue=0;Ue<H.length;Ue++)if(qe&&H[Ue].zLabel===void 0&&(qe=!1),Ie=H[Ue].hoverinfo||H[Ue].trace.hoverinfo,Ie){var Ve=Array.isArray(Ie)?Ie:Ie.split("+");if(Ve.indexOf("all")===-1&&Ve.indexOf(K)===-1){We=!1;break}}qe&&(We=!1)}var dt=ie.selectAll("g.axistext").data(We?[0]:[]);if(dt.enter().append("g").classed("axistext",!0),dt.exit().remove(),dt.each(function(){var tr=u.select(this),Or=x.ensureSingle(tr,"path","",function(mn){mn.style({"stroke-width":"1px"})}),et=x.ensureSingle(tr,"text","",function(mn){mn.attr("data-notex",1)}),we=ue.bgcolor||l.defaultLine,Se=ue.bordercolor||l.contrast(we),De=l.contrast(we),je={family:ue.font.family||ye,size:ue.font.size||ce,color:ue.font.color||De};Or.style({fill:we,stroke:Se}),et.text(Oe).call(f.font,je).call(r.positionText,0,0).call(r.convertToTspans,ne),tr.attr("transform","");var $e=se(ne,et.node()),ot,st;if(K==="x"){var pt=xe.side==="top"?"-":"";et.attr("text-anchor","middle").call(r.positionText,0,xe.side==="top"?Ge-$e.bottom-w-v:Ge-$e.top+w+v),ot=xe._offset+(me.x0+me.x1)/2,st=ke._offset+(xe.side==="top"?0:ke._length);var wt=$e.width/2+v;ot<wt?(ot=wt,Or.attr("d","M-"+(wt-w)+",0L-"+(wt-w*2)+","+pt+w+"H"+(v+$e.width/2)+"v"+pt+(v*2+$e.height)+"H-"+wt+"V"+pt+w+"Z")):ot>te.width-wt?(ot=te.width-wt,Or.attr("d","M"+(wt-w)+",0L"+wt+","+pt+w+"v"+pt+(v*2+$e.height)+"H-"+wt+"V"+pt+w+"H"+(wt-w*2)+"Z")):Or.attr("d","M0,0L"+w+","+pt+w+"H"+(v+$e.width/2)+"v"+pt+(v*2+$e.height)+"H-"+(v+$e.width/2)+"V"+pt+w+"H-"+w+"Z")}else{var Wt,yr,xr;ke.side==="right"?(Wt="start",yr=1,xr="",ot=xe._offset+xe._length):(Wt="end",yr=-1,xr="-",ot=xe._offset),st=ke._offset+(me.y0+me.y1)/2,et.attr("text-anchor",Wt),Or.attr("d","M0,0L"+xr+w+","+w+"V"+(v+$e.height/2)+"h"+xr+(v*2+$e.width)+"V-"+(v+$e.height/2)+"H"+xr+w+"V-"+w+"Z");var Tr=$e.height/2,mr=Ge-$e.top-Tr,Rr="clip"+te._uid+"commonlabel"+ke._id,tn;if(ot<$e.width+2*v+w){tn="M-"+(w+v)+"-"+Tr+"h-"+($e.width-v)+"V"+Tr+"h"+($e.width-v)+"Z";var wr=$e.width-ot+v;r.positionText(et,wr,mr),Wt==="end"&&et.selectAll("tspan").each(function(){var mn=u.select(this),Gr=f.tester.append("text").text(mn.text()).call(f.font,je),Ar=se(ne,Gr.node());Math.round(Ar.width)<Math.round($e.width)&&mn.attr("x",wr-Ar.width),Gr.remove()})}else r.positionText(et,yr*(v+w),mr),tn=null;var gr=te._topclips.selectAll("#"+Rr).data(tn?[0]:[]);gr.enter().append("clipPath").attr("id",Rr).append("path"),gr.exit().remove(),gr.select("path").attr("d",tn),f.setClipUrl(et,tn?Rr:null,ne)}tr.attr("transform",t(ot,st))}),d.isUnifiedHover(K)){ie.selectAll("g.hovertext").remove();var Rt=H.filter(function(tr){return tr.hoverinfo!=="none"});if(Rt.length===0)return;var Gt=te.hoverlabel,kt=Gt.font,zt={showlegend:!0,legend:{title:{text:Oe,font:kt},font:kt,bgcolor:Gt.bgcolor,bordercolor:Gt.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:te.legend?te.legend.traceorder:void 0,orientation:"v"}},Bt={font:kt};y(zt,Bt,ne._fullData);var Lt=Bt.legend;Lt.entries=[];for(var Mt=0;Mt<Rt.length;Mt++){var it=Rt[Mt];if(it.hoverinfo!=="none"){var ht=I(it,!0,K,te,Oe),Qe=ht[0],Ce=ht[1];it.name=Ce,Ce!==""?it.text=Ce+" : "+Qe:it.text=Qe;var Xe=it.cd[it.index];Xe&&(Xe.mc&&(it.mc=Xe.mc),Xe.mcc&&(it.mc=Xe.mcc),Xe.mlc&&(it.mlc=Xe.mlc),Xe.mlcc&&(it.mlc=Xe.mlcc),Xe.mlw&&(it.mlw=Xe.mlw),Xe.mrc&&(it.mrc=Xe.mrc),Xe.dir&&(it.dir=Xe.dir)),it._distinct=!0,Lt.entries.push([it])}}Lt.entries.sort(function(tr,Or){return tr[0].trace.index-Or[0].trace.index}),Lt.layer=ie,Lt._inHover=!0,Lt._groupTitleFont=Gt.grouptitlefont,g(ne,Lt);var rt=ie.select("g.legend"),ut=se(ne,rt.node()),Pt=ut.width+2*v,St=ut.height+2*v,Nt=Rt[0],jt=(Nt.x0+Nt.x1)/2,Ot=(Nt.y0+Nt.y1)/2,Kt=!(h.traceIs(Nt.trace,"bar-like")||h.traceIs(Nt.trace,"box-violin")),Je,gt;Ae==="y"?Kt?(gt=Ot-v,Je=Ot+v):(gt=Math.min.apply(null,Rt.map(function(tr){return Math.min(tr.y0,tr.y1)})),Je=Math.max.apply(null,Rt.map(function(tr){return Math.max(tr.y0,tr.y1)}))):gt=Je=x.mean(Rt.map(function(tr){return(tr.y0+tr.y1)/2}))-St/2;var Et,rr;Ae==="x"?Kt?(Et=jt+v,rr=jt-v):(Et=Math.max.apply(null,Rt.map(function(tr){return Math.max(tr.x0,tr.x1)})),rr=Math.min.apply(null,Rt.map(function(tr){return Math.min(tr.x0,tr.x1)}))):Et=rr=x.mean(Rt.map(function(tr){return(tr.x0+tr.x1)/2}))-Pt/2;var vr=xe._offset,or=ke._offset;Je+=or,Et+=vr,rr+=vr-Pt,gt+=or-St;var dr,Lr;return Et+Pt<_e&&Et>=0?dr=Et:rr+Pt<_e&&rr>=0?dr=rr:vr+Pt<_e?dr=vr:Et-jt<jt-rr+Pt?dr=_e-Pt:dr=0,dr+=v,Je+St<Re&&Je>=0?Lr=Je:gt+St<Re&&gt>=0?Lr=gt:or+St<Re?Lr=or:Je-Ot<Ot-gt+St?Lr=Re-St:Lr=0,Lr+=v,rt.attr("transform",t(dr-1,Lr-1)),rt}var kr=ie.selectAll("g.hovertext").data(H,function(tr){return P(tr)});return kr.enter().append("g").classed("hovertext",!0).each(function(){var tr=u.select(this);tr.append("rect").call(l.fill,l.addOpacity(ae,.8)),tr.append("text").classed("name",!0),tr.append("path").style("stroke-width","1px"),tr.append("text").classed("nums",!0).call(f.font,ye,ce)}),kr.exit().remove(),kr.each(function(tr){var Or=u.select(this).attr("transform",""),et=tr.color;Array.isArray(et)&&(et=et[tr.eventData[0].pointNumber]);var we=tr.bgcolor||et,Se=l.combine(l.opacity(we)?we:l.defaultLine,ae),De=l.combine(l.opacity(et)?et:l.defaultLine,ae),je=tr.borderColor||l.contrast(Se),$e=I(tr,We,K,te,Oe,Or),ot=$e[0],st=$e[1],pt=Or.select("text.nums").call(f.font,tr.fontFamily||ye,tr.fontSize||ce,tr.fontColor||je).text(ot).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ne),wt=Or.select("text.name"),Wt=0,yr=0;if(st&&st!==ot){wt.call(f.font,tr.fontFamily||ye,tr.fontSize||ce,De).text(st).attr("data-notex",1).call(r.positionText,0,0).call(r.convertToTspans,ne);var xr=se(ne,wt.node());Wt=xr.width+2*v,yr=xr.height+2*v}else wt.remove(),Or.select("rect").remove();Or.select("path").style({fill:Se,stroke:je});var Tr=tr.xa._offset+(tr.x0+tr.x1)/2,mr=tr.ya._offset+(tr.y0+tr.y1)/2,Rr=Math.abs(tr.x1-tr.x0),tn=Math.abs(tr.y1-tr.y0),wr=se(ne,pt.node()),gr=wr.width/te._invScaleX,mn=wr.height/te._invScaleY;tr.ty0=(Ge-wr.top)/te._invScaleY,tr.bx=gr+2*v,tr.by=Math.max(mn+2*v,yr),tr.anchor="start",tr.txwidth=gr,tr.tx2width=Wt,tr.offset=0;var Gr=(gr+w+v+Wt)*te._invScaleX,Ar,nn;if($)tr.pos=Tr,Ar=mr+tn/2+Gr<=Re,nn=mr-tn/2-Gr>=0,(tr.idealAlign==="top"||!Ar)&&nn?(mr-=tn/2,tr.anchor="end"):Ar?(mr+=tn/2,tr.anchor="start"):tr.anchor="middle";else if(tr.pos=mr,Ar=Tr+Rr/2+Gr<=_e,nn=Tr-Rr/2-Gr>=0,(tr.idealAlign==="left"||!Ar)&&nn)Tr-=Rr/2,tr.anchor="end";else if(Ar)Tr+=Rr/2,tr.anchor="start";else{tr.anchor="middle";var fn=Gr/2,jr=Tr+fn-_e,at=Tr-fn;jr>0&&(Tr-=jr),at<0&&(Tr+=-at)}pt.attr("text-anchor",tr.anchor),Wt&&wt.attr("text-anchor",tr.anchor),Or.attr("transform",t(Tr,mr)+($?i(A):""))}),kr}function I(H,Y,ne,te,K,$){var ae="",ie="";H.nameOverride!==void 0&&(H.name=H.nameOverride),H.name&&(H.trace._meta&&(H.name=x.templateString(H.name,H.trace._meta)),ae=q(H.name,H.nameLength));var oe=ne.charAt(0),ue=oe==="x"?"y":"x";H.zLabel!==void 0?(H.xLabel!==void 0&&(ie+="x: "+H.xLabel+"<br>"),H.yLabel!==void 0&&(ie+="y: "+H.yLabel+"<br>"),H.trace.type!=="choropleth"&&H.trace.type!=="choroplethmapbox"&&(ie+=(ie?"z: ":"")+H.zLabel)):Y&&H[oe+"Label"]===K?ie=H[ue+"Label"]||"":H.xLabel===void 0?H.yLabel!==void 0&&H.trace.type!=="scattercarpet"&&(ie=H.yLabel):H.yLabel===void 0?ie=H.xLabel:ie="("+H.xLabel+", "+H.yLabel+")",(H.text||H.text===0)&&!Array.isArray(H.text)&&(ie+=(ie?"<br>":"")+H.text),H.extraText!==void 0&&(ie+=(ie?"<br>":"")+H.extraText),$&&ie===""&&!H.hovertemplate&&(ae===""&&$.remove(),ie=ae);var ye=H.hovertemplate||!1;if(ye){var ce=H.hovertemplateLabels||H;H[oe+"Label"]!==K&&(ce[oe+"other"]=ce[oe+"Val"],ce[oe+"otherLabel"]=ce[oe+"Label"]),ie=x.hovertemplateString(ye,ce,te._d3locale,H.eventData[0]||{},H.trace._meta),ie=ie.replace(O,function(me,xe){return ae=q(xe,H.nameLength),""})}return[ie,ae]}function D(H,Y,ne){var te=0,K=1,$=H.size(),ae=new Array($),ie=0;H.each(function(Ue){var Ie=Ue[Y],Ve=Ie._id.charAt(0)==="x",dt=Ie.range;ie===0&&dt&&dt[0]>dt[1]!==Ve&&(K=-1),ae[ie++]=[{datum:Ue,traceIndex:Ue.trace.index,dp:0,pos:Ue.pos,posref:Ue.posref,size:Ue.by*(Ve?M:1)/2,pmin:0,pmax:Ve?ne.width:ne.height}]}),ae.sort(function(Ue,Ie){return Ue[0].posref-Ie[0].posref||K*(Ie[0].traceIndex-Ue[0].traceIndex)});var oe,ue,ye,ce,me,xe,ke;function Ae(Ue){var Ie=Ue[0],Ve=Ue[Ue.length-1];if(ue=Ie.pmin-Ie.pos-Ie.dp+Ie.size,ye=Ve.pos+Ve.dp+Ve.size-Ie.pmax,ue>.01){for(me=Ue.length-1;me>=0;me--)Ue[me].dp+=ue;oe=!1}if(!(ye<.01)){if(ue<-.01){for(me=Ue.length-1;me>=0;me--)Ue[me].dp-=ye;oe=!1}if(!!oe){var dt=0;for(ce=0;ce<Ue.length;ce++)xe=Ue[ce],xe.pos+xe.dp+xe.size>Ie.pmax&&dt++;for(ce=Ue.length-1;ce>=0&&!(dt<=0);ce--)xe=Ue[ce],xe.pos>Ie.pmax-1&&(xe.del=!0,dt--);for(ce=0;ce<Ue.length&&!(dt<=0);ce++)if(xe=Ue[ce],xe.pos<Ie.pmin+1)for(xe.del=!0,dt--,ye=xe.size*2,me=Ue.length-1;me>=0;me--)Ue[me].dp-=ye;for(ce=Ue.length-1;ce>=0&&!(dt<=0);ce--)xe=Ue[ce],xe.pos+xe.dp+xe.size>Ie.pmax&&(xe.del=!0,dt--)}}}for(;!oe&&te<=$;){for(te++,oe=!0,ce=0;ce<ae.length-1;){var Oe=ae[ce],He=ae[ce+1],Ge=Oe[Oe.length-1],_e=He[0];if(ue=Ge.pos+Ge.dp+Ge.size-_e.pos-_e.dp+_e.size,ue>.01&&Ge.pmin===_e.pmin&&Ge.pmax===_e.pmax){for(me=He.length-1;me>=0;me--)He[me].dp+=ue;for(Oe.push.apply(Oe,He),ae.splice(ce+1,1),ke=0,me=Oe.length-1;me>=0;me--)ke+=Oe[me].dp;for(ye=ke/Oe.length,me=Oe.length-1;me>=0;me--)Oe[me].dp-=ye;oe=!1}else ce++}ae.forEach(Ae)}for(ce=ae.length-1;ce>=0;ce--){var Re=ae[ce];for(me=Re.length-1;me>=0;me--){var We=Re[me],qe=We.datum;qe.offset=We.dp,qe.del=We.del}}}function U(H,Y,ne,te){var K=function(ae){return ae*ne},$=function(ae){return ae*te};H.each(function(ae){var ie=u.select(this);if(ae.del)return ie.remove();var oe=ie.select("text.nums"),ue=ae.anchor,ye=ue==="end"?-1:1,ce={start:1,end:-1,middle:0}[ue],me=ce*(w+v),xe=me+ce*(ae.txwidth+v),ke=0,Ae=ae.offset,Oe=ue==="middle";Oe&&(me-=ae.tx2width/2,xe+=ae.txwidth/2+v),Y&&(Ae*=-T,ke=ae.offset*_),ie.select("path").attr("d",Oe?"M-"+K(ae.bx/2+ae.tx2width/2)+","+$(Ae-ae.by/2)+"h"+K(ae.bx)+"v"+$(ae.by)+"h-"+K(ae.bx)+"Z":"M0,0L"+K(ye*w+ke)+","+$(w+Ae)+"v"+$(ae.by/2-w)+"h"+K(ye*ae.bx)+"v-"+$(ae.by)+"H"+K(ye*w+ke)+"V"+$(Ae-w)+"Z");var He=ke+me,Ge=Ae+ae.ty0-ae.by/2+v,_e=ae.textAlign||"auto";_e!=="auto"&&(_e==="left"&&ue!=="start"?(oe.attr("text-anchor","start"),He=Oe?-ae.bx/2-ae.tx2width/2+v:-ae.bx-v):_e==="right"&&ue!=="end"&&(oe.attr("text-anchor","end"),He=Oe?ae.bx/2-ae.tx2width/2-v:ae.bx+v)),oe.call(r.positionText,K(He),$(Ge)),ae.tx2width&&(ie.select("text.name").call(r.positionText,K(xe+ce*v+ke),$(Ae+ae.ty0-ae.by/2+v)),ie.select("rect").call(f.setRect,K(xe+(ce-1)*ae.tx2width/2+ke),$(Ae-ae.by/2-1),K(ae.tx2width),$(ae.by+2)))})}function B(H,Y){var ne=H.index,te=H.trace||{},K=H.cd[0],$=H.cd[ne]||{};function ae(me){return me||s(me)&&me===0}var ie=Array.isArray(ne)?function(me,xe){var ke=x.castOption(K,ne,me);return ae(ke)?ke:x.extractOption({},te,"",xe)}:function(me,xe){return x.extractOption($,te,me,xe)};function oe(me,xe,ke){var Ae=ie(xe,ke);ae(Ae)&&(H[me]=Ae)}if(oe("hoverinfo","hi","hoverinfo"),oe("bgcolor","hbg","hoverlabel.bgcolor"),oe("borderColor","hbc","hoverlabel.bordercolor"),oe("fontFamily","htf","hoverlabel.font.family"),oe("fontSize","hts","hoverlabel.font.size"),oe("fontColor","htc","hoverlabel.font.color"),oe("nameLength","hnl","hoverlabel.namelength"),oe("textAlign","hta","hoverlabel.align"),H.posref=Y==="y"||Y==="closest"&&te.orientation==="h"?H.xa._offset+(H.x0+H.x1)/2:H.ya._offset+(H.y0+H.y1)/2,H.x0=x.constrain(H.x0,0,H.xa._length),H.x1=x.constrain(H.x1,0,H.xa._length),H.y0=x.constrain(H.y0,0,H.ya._length),H.y1=x.constrain(H.y1,0,H.ya._length),H.xLabelVal!==void 0&&(H.xLabel="xLabel"in H?H.xLabel:c.hoverLabelText(H.xa,H.xLabelVal,te.xhoverformat),H.xVal=H.xa.c2d(H.xLabelVal)),H.yLabelVal!==void 0&&(H.yLabel="yLabel"in H?H.yLabel:c.hoverLabelText(H.ya,H.yLabelVal,te.yhoverformat),H.yVal=H.ya.c2d(H.yLabelVal)),H.zLabelVal!==void 0&&H.zLabel===void 0&&(H.zLabel=String(H.zLabelVal)),!isNaN(H.xerr)&&!(H.xa.type==="log"&&H.xerr<=0)){var ue=c.tickText(H.xa,H.xa.c2l(H.xerr),"hover").text;H.xerrneg!==void 0?H.xLabel+=" +"+ue+" / -"+c.tickText(H.xa,H.xa.c2l(H.xerrneg),"hover").text:H.xLabel+=" \xB1 "+ue,Y==="x"&&(H.distance+=1)}if(!isNaN(H.yerr)&&!(H.ya.type==="log"&&H.yerr<=0)){var ye=c.tickText(H.ya,H.ya.c2l(H.yerr),"hover").text;H.yerrneg!==void 0?H.yLabel+=" +"+ye+" / -"+c.tickText(H.ya,H.ya.c2l(H.yerrneg),"hover").text:H.yLabel+=" \xB1 "+ye,Y==="y"&&(H.distance+=1)}var ce=H.hoverinfo||H.trace.hoverinfo;return ce&&ce!=="all"&&(ce=Array.isArray(ce)?ce:ce.split("+"),ce.indexOf("x")===-1&&(H.xLabel=void 0),ce.indexOf("y")===-1&&(H.yLabel=void 0),ce.indexOf("z")===-1&&(H.zLabel=void 0),ce.indexOf("text")===-1&&(H.text=void 0),ce.indexOf("name")===-1&&(H.name=void 0)),H}function j(H,Y,ne){var te=ne.container,K=ne.fullLayout,$=K._size,ae=ne.event,ie=!!Y.hLinePoint,oe=!!Y.vLinePoint,ue,ye;if(te.selectAll(".spikeline").remove(),!!(oe||ie)){var ce=l.combine(K.plot_bgcolor,K.paper_bgcolor);if(ie){var me=Y.hLinePoint,xe,ke;ue=me&&me.xa,ye=me&&me.ya;var Ae=ye.spikesnap;Ae==="cursor"?(xe=ae.pointerX,ke=ae.pointerY):(xe=ue._offset+me.x,ke=ye._offset+me.y);var Oe=m.readability(me.color,ce)<1.5?l.contrast(ce):me.color,He=ye.spikemode,Ge=ye.spikethickness,_e=ye.spikecolor||Oe,Re=c.getPxPosition(H,ye),We,qe;if(He.indexOf("toaxis")!==-1||He.indexOf("across")!==-1){if(He.indexOf("toaxis")!==-1&&(We=Re,qe=xe),He.indexOf("across")!==-1){var Ue=ye._counterDomainMin,Ie=ye._counterDomainMax;ye.anchor==="free"&&(Ue=Math.min(Ue,ye.position),Ie=Math.max(Ie,ye.position)),We=$.l+Ue*$.w,qe=$.l+Ie*$.w}te.insert("line",":first-child").attr({x1:We,x2:qe,y1:ke,y2:ke,"stroke-width":Ge,stroke:_e,"stroke-dasharray":f.dashStyle(ye.spikedash,Ge)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:We,x2:qe,y1:ke,y2:ke,"stroke-width":Ge+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}He.indexOf("marker")!==-1&&te.insert("circle",":first-child").attr({cx:Re+(ye.side!=="right"?Ge:-Ge),cy:ke,r:Ge,fill:_e}).classed("spikeline",!0)}if(oe){var Ve=Y.vLinePoint,dt,Rt;ue=Ve&&Ve.xa,ye=Ve&&Ve.ya;var Gt=ue.spikesnap;Gt==="cursor"?(dt=ae.pointerX,Rt=ae.pointerY):(dt=ue._offset+Ve.x,Rt=ye._offset+Ve.y);var kt=m.readability(Ve.color,ce)<1.5?l.contrast(ce):Ve.color,zt=ue.spikemode,Bt=ue.spikethickness,Lt=ue.spikecolor||kt,Mt=c.getPxPosition(H,ue),it,ht;if(zt.indexOf("toaxis")!==-1||zt.indexOf("across")!==-1){if(zt.indexOf("toaxis")!==-1&&(it=Mt,ht=Rt),zt.indexOf("across")!==-1){var Qe=ue._counterDomainMin,Ce=ue._counterDomainMax;ue.anchor==="free"&&(Qe=Math.min(Qe,ue.position),Ce=Math.max(Ce,ue.position)),it=$.t+(1-Ce)*$.h,ht=$.t+(1-Qe)*$.h}te.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Bt,stroke:Lt,"stroke-dasharray":f.dashStyle(ue.spikedash,Bt)}).classed("spikeline",!0).classed("crisp",!0),te.insert("line",":first-child").attr({x1:dt,x2:dt,y1:it,y2:ht,"stroke-width":Bt+2,stroke:ce}).classed("spikeline",!0).classed("crisp",!0)}zt.indexOf("marker")!==-1&&te.insert("circle",":first-child").attr({cx:dt,cy:Mt-(ue.side!=="top"?Bt:-Bt),r:Bt,fill:Lt}).classed("spikeline",!0)}}}function Z(H,Y,ne){if(!ne||ne.length!==H._hoverdata.length)return!0;for(var te=ne.length-1;te>=0;te--){var K=ne[te],$=H._hoverdata[te];if(K.curveNumber!==$.curveNumber||String(K.pointNumber)!==String($.pointNumber)||String(K.pointNumbers)!==String($.pointNumbers))return!0}return!1}function ee(H,Y){return!Y||Y.vLinePoint!==H._spikepoints.vLinePoint||Y.hLinePoint!==H._spikepoints.hLinePoint}function q(H,Y){return r.plainText(H||"",{len:Y,allowedTags:["br","sub","sup","b","i","em"]})}function W(H,Y){for(var ne=Y.charAt(0),te=[],K=[],$=[],ae=0;ae<H.length;ae++){var ie=H[ae];h.traceIs(ie.trace,"bar-like")||h.traceIs(ie.trace,"box-violin")?$.push(ie):ie.trace[ne+"period"]?K.push(ie):te.push(ie)}return te.concat(K).concat($)}function J(H,Y,ne){var te=Y[H+"a"],K=Y[H+"Val"],$=Y.cd[0];if(te.type==="category")K=te._categoriesMap[K];else if(te.type==="date"){var ae=Y.trace[H+"periodalignment"];if(ae){var ie=Y.cd[Y.index],oe=ie[H+"Start"];oe===void 0&&(oe=ie[H]);var ue=ie[H+"End"];ue===void 0&&(ue=ie[H]);var ye=ue-oe;ae==="end"?K+=ye:ae==="middle"&&(K+=ye/2)}K=te.d2c(K)}return $&&$.t&&$.t.posLetter===te._id&&(ne.boxmode==="group"||ne.violinmode==="group")&&(K+=$.t.dPos),K}function le(H){return H.offsetTop+H.clientTop}function fe(H){return H.offsetLeft+H.clientLeft}function se(H,Y){var ne=H._fullLayout,te=Y.getBoundingClientRect(),K=te.x,$=te.y,ae=K+te.width,ie=$+te.height,oe=x.apply3DTransform(ne._invTransform)(K,$),ue=x.apply3DTransform(ne._invTransform)(ae,ie),ye=oe[0],ce=oe[1],me=ue[0],xe=ue[1];return{x:ye,y:ce,width:me-ye,height:xe-ce,top:Math.min(ce,xe),left:Math.min(ye,me),right:Math.max(ye,me),bottom:Math.max(ce,xe)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(e,z,N){var u=e("../../lib"),s=e("../color"),m=e("./helpers").isUnifiedHover;z.exports=function(t,i,a,r){r=r||{};var n=i.legend;function f(l){r.font[l]||(r.font[l]=n?i.legend.font[l]:i.font[l])}i&&m(i.hovermode)&&(r.font||(r.font={}),f("size"),f("family"),f("color"),n?(r.bgcolor||(r.bgcolor=s.combine(i.legend.bgcolor,i.paper_bgcolor)),r.bordercolor||(r.bordercolor=i.legend.bordercolor)):r.bgcolor||(r.bgcolor=i.paper_bgcolor)),a("hoverlabel.bgcolor",r.bgcolor),a("hoverlabel.bordercolor",r.bordercolor),a("hoverlabel.namelength",r.namelength),u.coerceFont(a,"hoverlabel.font",r.font),a("hoverlabel.align",r.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(x,t){function i(a,r){return t[a]!==void 0?t[a]:u.coerce(x,t,s,a,r)}return i("clickmode"),i("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../dragelement"),x=e("./helpers"),t=e("./layout_attributes"),i=e("./hover");z.exports={moduleType:"component",name:"fx",constants:e("./constants"),schema:{layout:t},attributes:e("./attributes"),layoutAttributes:t,supplyLayoutGlobalDefaults:e("./layout_global_defaults"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),getDistanceFunction:x.getDistanceFunction,getClosest:x.getClosest,inbox:x.inbox,quadrature:x.quadrature,appendArrayPointValue:x.appendArrayPointValue,castHoverOption:r,castHoverinfo:n,hover:i.hover,unhover:m.unhover,loneHover:i.loneHover,loneUnhover:a,click:e("./click")};function a(f){var l=s.isD3Selection(f)?f:u.select(f);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()}function r(f,l,o){return s.castOption(f,l,"hoverlabel."+o)}function n(f,l,o){function c(h){return s.coerceHoverinfo({hoverinfo:h},{_module:f._module},l)}return s.castOption(f,o,"hoverinfo",c)}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(e,z,N){var u=e("./constants"),s=e("../../plots/font_attributes"),m=s({editType:"none"});m.family.dflt=u.HOVERFONT,m.size.dflt=u.HOVERFONTSIZE,z.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:m,grouptitlefont:s({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes"),m=e("./hovermode_defaults"),x=e("./hoverlabel_defaults");z.exports=function(i,a){function r(h,d){return u.coerce(i,a,s,h,d)}var n=m(i,a);n&&(r("hoverdistance"),r("spikedistance"));var f=r("dragmode");f==="select"&&r("selectdirection");var l=a._has("mapbox"),o=a._has("geo"),c=a._basePlotModules.length;a.dragmode==="zoom"&&((l||o)&&c===1||l&&o&&c===2)&&(a.dragmode="pan"),x(i,a,r),u.coerceFont(r,"hoverlabel.grouptitlefont",a.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(e,z,N){var u=e("../../lib"),s=e("./hoverlabel_defaults"),m=e("./layout_attributes");z.exports=function(t,i){function a(r,n){return u.coerce(t,i,m,r,n)}s(t,i,a)}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(e,z,N){var u=e("../../lib"),s=e("../../lib/regex").counter,m=e("../../plots/domain").attributes,x=e("../../plots/cartesian/constants").idRegex,t=e("../../plot_api/plot_template"),i={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[s("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[x.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:m({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(o,c,h){var d=c[h+"axes"],p=Object.keys((o._splomAxes||{})[h]||{});if(Array.isArray(d))return d;if(p.length)return p}function r(o,c){var h=o.grid||{},d=a(c,h,"x"),p=a(c,h,"y");if(!o.grid&&!d&&!p)return;var y=Array.isArray(h.subplots)&&Array.isArray(h.subplots[0]),g=Array.isArray(d),A=Array.isArray(p),b=g&&d!==h.xaxes&&A&&p!==h.yaxes,M,_;y?(M=h.subplots.length,_=h.subplots[0].length):(A&&(M=p.length),g&&(_=d.length));var T=t.newContainer(c,"grid");function w(U,B){return u.coerce(h,T,i,U,B)}var v=w("rows",M),L=w("columns",_);if(!(v*L>1)){delete c.grid;return}if(!y&&!g&&!A){var S=w("pattern")==="independent";S&&(y=!0)}T._hasSubplotGrid=y;var k=w("roworder"),P=k==="top to bottom",O=y?.2:.1,F=y?.3:.1,I,D;b&&c._splomGridDflt&&(I=c._splomGridDflt.xside,D=c._splomGridDflt.yside),T._domains={x:n("x",w,O,I,L),y:n("y",w,F,D,v,P)}}function n(o,c,h,d,p,y){var g=c(o+"gap",h),A=c("domain."+o);c(o+"side",d);for(var b=new Array(p),M=A[0],_=(A[1]-M)/(p-g),T=_*(1-g),w=0;w<p;w++){var v=M+_*w;b[y?p-1-w:w]=[v,v+T]}return b}function f(o,c){var h=c.grid;if(!(!h||!h._domains)){var d=o.grid||{},p=c._subplots,y=h._hasSubplotGrid,g=h.rows,A=h.columns,b=h.pattern==="independent",M,_,T,w,v,L,S,k=h._axisMap={};if(y){var P=d.subplots||[];L=h.subplots=new Array(g);var O=1;for(M=0;M<g;M++){var F=L[M]=new Array(A),I=P[M]||[];for(_=0;_<A;_++)if(b?(v=O===1?"xy":"x"+O+"y"+O,O++):v=I[_],F[_]="",p.cartesian.indexOf(v)!==-1){if(S=v.indexOf("y"),T=v.slice(0,S),w=v.slice(S),k[T]!==void 0&&k[T]!==_||k[w]!==void 0&&k[w]!==M)continue;F[_]=v,k[T]=_,k[w]=M}}}else{var D=a(c,d,"x"),U=a(c,d,"y");h.xaxes=l(D,p.xaxis,A,k,"x"),h.yaxes=l(U,p.yaxis,g,k,"y")}var B=h._anchors={},j=h.roworder==="top to bottom";for(var Z in k){var ee=Z.charAt(0),q=h[ee+"side"],W,J,le;if(q.length<8)B[Z]="free";else if(ee==="x"){if(q.charAt(0)==="t"===j?(W=0,J=1,le=g):(W=g-1,J=-1,le=-1),y){var fe=k[Z];for(M=W;M!==le;M+=J)if(v=L[M][fe],!!v&&(S=v.indexOf("y"),v.slice(0,S)===Z)){B[Z]=v.slice(S);break}}else for(M=W;M!==le;M+=J)if(w=h.yaxes[M],p.cartesian.indexOf(Z+w)!==-1){B[Z]=w;break}}else if(q.charAt(0)==="l"?(W=0,J=1,le=A):(W=A-1,J=-1,le=-1),y){var se=k[Z];for(M=W;M!==le;M+=J)if(v=L[se][M],!!v&&(S=v.indexOf("y"),v.slice(S)===Z)){B[Z]=v.slice(0,S);break}}else for(M=W;M!==le;M+=J)if(T=h.xaxes[M],p.cartesian.indexOf(T+Z)!==-1){B[Z]=T;break}}}}function l(o,c,h,d,p){var y=new Array(h),g;function A(b,M){c.indexOf(M)!==-1&&d[M]===void 0?(y[b]=M,d[M]=b):y[b]=""}if(Array.isArray(o))for(g=0;g<h;g++)A(g,o[g]);else for(A(0,p),g=1;g<h;g++)A(g,p+(g+1));return y}z.exports={moduleType:"component",name:"grid",schema:{layout:{grid:i}},layoutAttributes:i,sizeDefaults:r,contentDefaults:f}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(e,z,N){var u=e("../../plots/cartesian/constants"),s=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),z.exports=s("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",u.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",u.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib/to_log_range");z.exports=function(x,t,i,a){t=t||{};var r=i==="log"&&t.type==="linear",n=i==="linear"&&t.type==="log";if(!!(r||n)){for(var f=x._fullLayout.images,l=t._id.charAt(0),o,c,h=0;h<f.length;h++)if(o=f[h],c="images["+h+"].",o[l+"ref"]===t._id){var d=o[l],p=o["size"+l],y=null,g=null;if(r){y=s(d,t.range);var A=p/Math.pow(10,y)/2;g=2*Math.log(A+Math.sqrt(1+A*A))/Math.LN10}else y=Math.pow(10,d),g=y*(Math.pow(10,p/2)-Math.pow(10,-p/2));u(y)?u(g)||(g=null):(y=null,g=null),a(c+l,y),a(c+"size"+l,g)}}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./attributes"),t="images";z.exports=function(r,n){var f={name:t,handleItemDefaults:i};m(r,n,f)};function i(a,r,n){function f(A,b){return u.coerce(a,r,x,A,b)}var l=f("source"),o=f("visible",!!l);if(!o)return r;f("layer"),f("xanchor"),f("yanchor"),f("sizex"),f("sizey"),f("sizing"),f("opacity");for(var c={_fullLayout:n},h=["x","y"],d=0;d<2;d++){var p=h[d],y=s.coerceRef(a,r,c,p,"paper",void 0);if(y!=="paper"){var g=s.getFromId(c,y);g._imgIndices.push(r._index)}s.coercePosition(r,c,f,y,p,0)}return r}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(e,z,N){var u=e("@plotly/d3"),s=e("../drawing"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/axis_ids"),t=e("../../constants/xmlns_namespaces");z.exports=function(a){var r=a._fullLayout,n=[],f={},l=[],o,c;for(c=0;c<r.images.length;c++){var h=r.images[c];if(h.visible)if(h.layer==="below"&&h.xref!=="paper"&&h.yref!=="paper"){o=x.ref2id(h.xref)+x.ref2id(h.yref);var d=r._plots[o];if(!d){l.push(h);continue}d.mainplot&&(o=d.mainplot.id),f[o]||(f[o]=[]),f[o].push(h)}else h.layer==="above"?n.push(h):l.push(h)}var p={x:{left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-1/2},right:{sizing:"xMax",offset:-1}},y:{top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-1/2},bottom:{sizing:"YMax",offset:-1}}};function y(w){var v=u.select(this);if(this._imgSrc!==w.source)if(v.attr("xmlns",t.svg),w.source&&w.source.slice(0,5)==="data:")v.attr("xlink:href",w.source),this._imgSrc=w.source;else{var L=new Promise(function(S){var k=new Image;this.img=k,k.setAttribute("crossOrigin","anonymous"),k.onerror=P,k.onload=function(){var O=document.createElement("canvas");O.width=this.width,O.height=this.height;var F=O.getContext("2d");F.drawImage(this,0,0);var I=O.toDataURL("image/png");v.attr("xlink:href",I),S()},v.on("error",P),k.src=w.source,this._imgSrc=w.source;function P(){v.remove(),S()}}.bind(this));a._promises.push(L)}}function g(w){var v=u.select(this),L=m.getFromId(a,w.xref),S=m.getFromId(a,w.yref),k=m.getRefType(w.xref)==="domain",P=m.getRefType(w.yref)==="domain",O=r._size,F,I;L!==void 0?F=typeof w.xref=="string"&&k?L._length*w.sizex:Math.abs(L.l2p(w.sizex)-L.l2p(0)):F=w.sizex*O.w,S!==void 0?I=typeof w.yref=="string"&&P?S._length*w.sizey:Math.abs(S.l2p(w.sizey)-S.l2p(0)):I=w.sizey*O.h;var D=F*p.x[w.xanchor].offset,U=I*p.y[w.yanchor].offset,B=p.x[w.xanchor].sizing+p.y[w.yanchor].sizing,j,Z;switch(L!==void 0?j=typeof w.xref=="string"&&k?L._length*w.x+L._offset:L.r2p(w.x)+L._offset:j=w.x*O.w+O.l,j+=D,S!==void 0?Z=typeof w.yref=="string"&&P?S._length*(1-w.y)+S._offset:S.r2p(w.y)+S._offset:Z=O.h-w.y*O.h+O.t,Z+=U,w.sizing){case"fill":B+=" slice";break;case"stretch":B="none";break}v.attr({x:j,y:Z,width:F,height:I,preserveAspectRatio:B,opacity:w.opacity});var ee=L&&m.getRefType(w.xref)!=="domain"?L._id:"",q=S&&m.getRefType(w.yref)!=="domain"?S._id:"",W=ee+q;s.setClipUrl(v,W?"clip"+r._uid+W:null,a)}var A=r._imageLowerLayer.selectAll("image").data(l),b=r._imageUpperLayer.selectAll("image").data(n);A.enter().append("image"),b.enter().append("image"),A.exit().remove(),b.exit().remove(),A.each(function(w){y.bind(this)(w),g.bind(this)(w)}),b.each(function(w){y.bind(this)(w),g.bind(this)(w)});var M=Object.keys(r._plots);for(c=0;c<M.length;c++){o=M[c];var _=r._plots[o];if(!!_.imagelayer){var T=_.imagelayer.selectAll("image").data(f[o]||[]);T.enter().append("image"),T.exit().remove(),T.each(function(w){y.bind(this)(w),g.bind(this)(w)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(e,z,N){z.exports={moduleType:"component",name:"images",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("images"),draw:e("./draw"),convertCoords:e("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("../color/attributes");z.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:u({editType:"legend"}),grouptitlefont:u({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:u({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(e,z,N){z.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../../plot_api/plot_template"),x=e("../../plots/attributes"),t=e("./attributes"),i=e("../../plots/layout_attributes"),a=e("./helpers");z.exports=function(n,f,l){var o=n.legend||{},c=m.newContainer(f,"legend");function h(I,D){return s.coerce(o,c,t,I,D)}for(var d,p=function(I,D){var U=d._input,B=d;return s.coerce(U,B,x,I,D)},y=f.font||{},g=s.coerceFont(h,"grouptitlefont",s.extendFlat({},y,{size:Math.round(y.size*1.1)})),A=0,b=!1,M="normal",_=0;_<l.length;_++)d=l[_],!!d.visible&&((d.showlegend||d._dfltShowLegend&&!(d._module&&d._module.attributes&&d._module.attributes.showlegend&&d._module.attributes.showlegend.dflt===!1))&&(A++,d.showlegend&&(b=!0,(u.traceIs(d,"pie-like")||d._input.showlegend===!0)&&A++),s.coerceFont(p,"legendgrouptitle.font",g)),(u.traceIs(d,"bar")&&f.barmode==="stack"||["tonextx","tonexty"].indexOf(d.fill)!==-1)&&(M=a.isGrouped({traceorder:M})?"grouped+reversed":"reversed"),d.legendgroup!==void 0&&d.legendgroup!==""&&(M=a.isReversed({traceorder:M})?"reversed+grouped":"grouped"));var T=s.coerce(n,f,i,"showlegend",b&&A>1);if(T===!1&&(f.legend=void 0),!(T===!1&&!o.uirevision)&&(h("uirevision",f.uirevision),T!==!1)){h("bgcolor",f.paper_bgcolor),h("bordercolor"),h("borderwidth");var w=s.coerceFont(h,"font",f.font),v=h("orientation"),L=v==="h",S,k,P;L?(S=0,u.getComponentMethod("rangeslider","isVisible")(n.xaxis)?(k=1.1,P="bottom"):(k=-.1,P="top")):(S=1.02,k=1,P="auto"),h("traceorder",M),a.isGrouped(f.legend)&&h("tracegroupgap"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("x",S),h("xanchor"),h("y",k),h("yanchor",P),h("valign"),s.noneOrAll(o,c,["x","y"]);var O=h("title.text");if(O){h("title.side",L?"left":"top");var F=s.extendFlat({},w,{size:s.bigFont(w.size)});s.coerceFont(h,"title.font",F)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib/events"),i=e("../dragelement"),a=e("../drawing"),r=e("../color"),n=e("../../lib/svg_text_utils"),f=e("./handle_click"),l=e("./constants"),o=e("../../constants/alignment"),c=o.LINE_SPACING,h=o.FROM_TL,d=o.FROM_BR,p=e("./get_legend_data"),y=e("./style"),g=e("./helpers"),A=1;z.exports=function(D,U){return U||(U=D._fullLayout.legend||{}),b(D,U)};function b(I,D){var U=I._fullLayout,B="legend"+U._uid,j,Z=D._inHover;if(Z?(j=D.layer,B+="-hover"):j=U._infolayer,!!j){I._legendMouseDownTime||(I._legendMouseDownTime=0);var ee;if(Z){if(!D.entries)return;ee=p(D.entries,D)}else{if(!I.calcdata)return;ee=U.showlegend&&p(I.calcdata,D)}var q=U.hiddenlabels||[];if(!Z&&(!U.showlegend||!ee.length))return j.selectAll(".legend").remove(),U._topdefs.select("#"+B).remove(),m.autoMargin(I,"legend");var W=s.ensureSingle(j,"g","legend",function(K){Z||K.attr("pointer-events","all")}),J=s.ensureSingleById(U._topdefs,"clipPath",B,function(K){K.append("rect")}),le=s.ensureSingle(W,"rect","bg",function(K){K.attr("shape-rendering","crispEdges")});le.call(r.stroke,D.bordercolor).call(r.fill,D.bgcolor).style("stroke-width",D.borderwidth+"px");var fe=s.ensureSingle(W,"g","scrollbox"),se=D.title;if(D._titleWidth=0,D._titleHeight=0,se.text){var H=s.ensureSingle(fe,"text","legendtitletext");H.attr("text-anchor","start").call(a.font,se.font).text(se.text),v(H,fe,I,D,A)}else fe.selectAll(".legendtitletext").remove();var Y=s.ensureSingle(W,"rect","scrollbar",function(K){K.attr(l.scrollBarEnterAttrs).call(r.fill,l.scrollBarColor)}),ne=fe.selectAll("g.groups").data(ee);ne.enter().append("g").attr("class","groups"),ne.exit().remove();var te=ne.selectAll("g.traces").data(s.identity);te.enter().append("g").attr("class","traces"),te.exit().remove(),te.style("opacity",function(K){var $=K[0].trace;return x.traceIs($,"pie-like")?q.indexOf(K[0].label)!==-1?.5:1:$.visible==="legendonly"?.5:1}).each(function(){u.select(this).call(_,I,D)}).call(y,I,D).each(function(){Z||u.select(this).call(w,I)}),s.syncOrAsync([m.previousPromises,function(){return k(I,ne,te,D)},function(){var K=U._size,$=D.borderwidth;if(!Z){var ae=P(I);if(ae)return;var ie=K.l+K.w*D.x-h[O(D)]*D._width,oe=K.t+K.h*(1-D.y)-h[F(D)]*D._effHeight;if(U.margin.autoexpand){var ue=ie,ye=oe;ie=s.constrain(ie,0,U.width-D._width),oe=s.constrain(oe,0,U.height-D._effHeight),ie!==ue&&s.log("Constrain legend.x to make legend fit inside graph"),oe!==ye&&s.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(W,ie,oe)}if(Y.on(".drag",null),W.on("wheel",null),Z||D._height<=D._maxHeight||I._context.staticPlot){var ce=D._effHeight;Z&&(ce=D._height),le.attr({width:D._width-$,height:ce-$,x:$/2,y:$/2}),a.setTranslate(fe,0,0),J.select("rect").attr({width:D._width-2*$,height:ce-2*$,x:$,y:$}),a.setClipUrl(fe,B,I),a.setRect(Y,0,0,0,0),delete D._scrollY}else{var me=Math.max(l.scrollBarMinHeight,D._effHeight*D._effHeight/D._height),xe=D._effHeight-me-2*l.scrollBarMargin,ke=D._height-D._effHeight,Ae=xe/ke,Oe=Math.min(D._scrollY||0,ke);le.attr({width:D._width-2*$+l.scrollBarWidth+l.scrollBarMargin,height:D._effHeight-$,x:$/2,y:$/2}),J.select("rect").attr({width:D._width-2*$+l.scrollBarWidth+l.scrollBarMargin,height:D._effHeight-2*$,x:$,y:$+Oe}),a.setClipUrl(fe,B,I),Ie(Oe,me,Ae),W.on("wheel",function(){Oe=s.constrain(D._scrollY+u.event.deltaY/xe*ke,0,ke),Ie(Oe,me,Ae),Oe!==0&&Oe!==ke&&u.event.preventDefault()});var He,Ge,_e,Re=function(kt,zt,Bt){var Lt=(Bt-zt)/Ae+kt;return s.constrain(Lt,0,ke)},We=function(kt,zt,Bt){var Lt=(zt-Bt)/Ae+kt;return s.constrain(Lt,0,ke)},qe=u.behavior.drag().on("dragstart",function(){var kt=u.event.sourceEvent;kt.type==="touchstart"?He=kt.changedTouches[0].clientY:He=kt.clientY,_e=Oe}).on("drag",function(){var kt=u.event.sourceEvent;kt.buttons===2||kt.ctrlKey||(kt.type==="touchmove"?Ge=kt.changedTouches[0].clientY:Ge=kt.clientY,Oe=Re(_e,He,Ge),Ie(Oe,me,Ae))});Y.call(qe);var Ue=u.behavior.drag().on("dragstart",function(){var kt=u.event.sourceEvent;kt.type==="touchstart"&&(He=kt.changedTouches[0].clientY,_e=Oe)}).on("drag",function(){var kt=u.event.sourceEvent;kt.type==="touchmove"&&(Ge=kt.changedTouches[0].clientY,Oe=We(_e,He,Ge),Ie(Oe,me,Ae))});fe.call(Ue)}function Ie(kt,zt,Bt){D._scrollY=I._fullLayout.legend._scrollY=kt,a.setTranslate(fe,0,-kt),a.setRect(Y,D._width,l.scrollBarMargin+kt*Bt,l.scrollBarWidth,zt),J.select("rect").attr("y",$+kt)}if(I._context.edits.legendPosition){var Ve,dt,Rt,Gt;W.classed("cursor-move",!0),i.init({element:W.node(),gd:I,prepFn:function(){var kt=a.getTranslate(W);Rt=kt.x,Gt=kt.y},moveFn:function(kt,zt){var Bt=Rt+kt,Lt=Gt+zt;a.setTranslate(W,Bt,Lt),Ve=i.align(Bt,0,K.l,K.l+K.w,D.xanchor),dt=i.align(Lt,0,K.t+K.h,K.t,D.yanchor)},doneFn:function(){Ve!==void 0&&dt!==void 0&&x.call("_guiRelayout",I,{"legend.x":Ve,"legend.y":dt})},clickFn:function(kt,zt){var Bt=j.selectAll("g.traces").filter(function(){var Lt=this.getBoundingClientRect();return zt.clientX>=Lt.left&&zt.clientX<=Lt.right&&zt.clientY>=Lt.top&&zt.clientY<=Lt.bottom});Bt.size()>0&&M(I,W,Bt,kt,zt)}})}}],I)}}function M(I,D,U,B,j){var Z=U.data()[0][0].trace,ee={event:j,node:U.node(),curveNumber:Z.index,expandedIndex:Z._expandedIndex,data:I.data,layout:I.layout,frames:I._transitionData._frames,config:I._context,fullData:I._fullData,fullLayout:I._fullLayout};Z._group&&(ee.group=Z._group),x.traceIs(Z,"pie-like")&&(ee.label=U.datum()[0].label);var q=t.triggerHandler(I,"plotly_legendclick",ee);if(q!==!1){if(B===1)D._clickTimeout=setTimeout(function(){!I._fullLayout||f(U,I,B)},I._context.doubleClickDelay);else if(B===2){D._clickTimeout&&clearTimeout(D._clickTimeout),I._legendMouseDownTime=0;var W=t.triggerHandler(I,"plotly_legenddoubleclick",ee);W!==!1&&f(U,I,B)}}}function _(I,D,U){var B=I.data()[0][0],j=B.trace,Z=x.traceIs(j,"pie-like"),ee=!U._inHover&&D._context.edits.legendText&&!Z,q=U._maxNameLength,W,J;B.groupTitle?(W=B.groupTitle.text,J=B.groupTitle.font):(J=U.font,U.entries?W=B.text:(W=Z?B.label:j.name,j._meta&&(W=s.templateString(W,j._meta))));var le=s.ensureSingle(I,"text","legendtext");le.attr("text-anchor","start").call(a.font,J).text(ee?T(W,q):W);var fe=U.itemwidth+l.itemGap*2;n.positionText(le,fe,0),ee?le.call(n.makeEditable,{gd:D,text:W}).call(v,I,D,U).on("edit",function(se){this.text(T(se,q)).call(v,I,D,U);var H=B.trace._fullInput||{},Y={};if(x.hasTransform(H,"groupby")){var ne=x.getTransformIndices(H,"groupby"),te=ne[ne.length-1],K=s.keyedContainer(H,"transforms["+te+"].styles","target","value.name");K.set(B.trace._group,se),Y=K.constructUpdate()}else Y.name=se;return x.call("_guiRestyle",D,Y,j.index)}):v(le,I,D,U)}function T(I,D){var U=Math.max(4,D);if(I&&I.trim().length>=U/2)return I;I=I||"";for(var B=U-I.length;B>0;B--)I+=" ";return I}function w(I,D){var U=D._context.doubleClickDelay,B,j=1,Z=s.ensureSingle(I,"rect","legendtoggle",function(ee){D._context.staticPlot||ee.style("cursor","pointer").attr("pointer-events","all"),ee.call(r.fill,"rgba(0,0,0,0)")});D._context.staticPlot||(Z.on("mousedown",function(){B=new Date().getTime(),B-D._legendMouseDownTime<U?j+=1:(j=1,D._legendMouseDownTime=B)}),Z.on("mouseup",function(){if(!(D._dragged||D._editing)){var ee=D._fullLayout.legend;new Date().getTime()-D._legendMouseDownTime>U&&(j=Math.max(j-1,1)),M(D,ee,I,j,u.event)}}))}function v(I,D,U,B,j){B._inHover&&I.attr("data-notex",!0),n.convertToTspans(I,U,function(){L(D,U,B,j)})}function L(I,D,U,B){var j=I.data()[0][0];if(!U._inHover&&j&&!j.trace.showlegend){I.remove();return}var Z=I.select("g[class*=math-group]"),ee=Z.node();U||(U=D._fullLayout.legend);var q=U.borderwidth,W;B===A?W=U.title.font:j.groupTitle?W=j.groupTitle.font:W=U.font;var J=W.size*c,le,fe;if(ee){var se=a.bBox(ee);le=se.height,fe=se.width,B===A?a.setTranslate(Z,q,q+le*.75):a.setTranslate(Z,0,le*.25)}else{var H=I.select(B===A?".legendtitletext":".legendtext"),Y=n.lineCount(H),ne=H.node();if(le=J*Y,fe=ne?a.bBox(ne).width:0,B===A)U.title.side==="left"&&(fe+=l.itemGap*2),n.positionText(H,q+l.titlePad,q+J);else{var te=l.itemGap*2+U.itemwidth;j.groupTitle&&(te=l.itemGap,fe-=U.itemwidth),n.positionText(H,te,-J*((Y-1)/2-.3))}}B===A?(U._titleWidth=fe,U._titleHeight=le):(j.lineHeight=J,j.height=Math.max(le,16)+3,j.width=fe)}function S(I){var D=0,U=0,B=I.title.side;return B&&(B.indexOf("left")!==-1&&(D=I._titleWidth),B.indexOf("top")!==-1&&(U=I._titleHeight)),[D,U]}function k(I,D,U,B){var j=I._fullLayout;B||(B=j.legend);var Z=j._size,ee=g.isVertical(B),q=g.isGrouped(B),W=B.borderwidth,J=2*W,le=l.itemGap,fe=B.itemwidth+le*2,se=2*(W+le),H=F(B),Y=B.y<0||B.y===0&&H==="top",ne=B.y>1||B.y===1&&H==="bottom",te=B.tracegroupgap;B._maxHeight=Math.max(Y||ne?j.height/2:Z.h,30);var K=0;B._width=0,B._height=0;var $=S(B);if(ee)U.each(function(Ve){var dt=Ve[0].height;a.setTranslate(this,W+$[0],W+$[1]+B._height+dt/2+le),B._height+=dt,B._width=Math.max(B._width,Ve[0].width)}),K=fe+B._width,B._width+=le+fe+J,B._height+=se,q&&(D.each(function(Ve,dt){a.setTranslate(this,0,dt*B.tracegroupgap)}),B._height+=(B._lgroupsLength-1)*B.tracegroupgap);else{var ae=O(B),ie=B.x<0||B.x===0&&ae==="right",oe=B.x>1||B.x===1&&ae==="left",ue=ne||Y,ye=j.width/2;B._maxWidth=Math.max(ie?ue&&ae==="left"?Z.l+Z.w:ye:oe?ue&&ae==="right"?Z.r+Z.w:ye:Z.w,2*fe);var ce=0,me=0;U.each(function(Ve){var dt=Ve[0].width+fe;ce=Math.max(ce,dt),me+=dt}),K=null;var xe=0;if(q){var ke=0,Ae=0,Oe=0;D.each(function(){var Ve=0,dt=0;u.select(this).selectAll("g.traces").each(function(Gt){var kt=Gt[0].width,zt=Gt[0].height;a.setTranslate(this,$[0],$[1]+W+le+zt/2+dt),dt+=zt,Ve=Math.max(Ve,fe+kt)}),ke=Math.max(ke,dt);var Rt=Ve+le;Ae>0&&Rt+W+Ae>B._maxWidth&&(xe=Math.max(xe,Ae),Ae=0,Oe+=ke+te,ke=dt),a.setTranslate(this,Ae,Oe),Ae+=Rt}),B._width=Math.max(xe,Ae)+W,B._height=Oe+ke+se}else{var He=U.size(),Ge=me+J+(He-1)*le<B._maxWidth,_e=0,Re=0,We=0,qe=0;U.each(function(Ve){var dt=Ve[0].height,Rt=fe+Ve[0].width,Gt=(Ge?Rt:ce)+le;Gt+W+Re-le>=B._maxWidth&&(xe=Math.max(xe,qe),Re=0,We+=_e,B._height+=_e,_e=0),a.setTranslate(this,$[0]+W+Re,$[1]+W+We+dt/2+le),qe=Re+Rt+le,Re+=Gt,_e=Math.max(_e,dt)}),Ge?(B._width=Re+J,B._height=_e+se):(B._width=Math.max(xe,qe)+J,B._height+=_e+se)}}B._width=Math.ceil(Math.max(B._width+$[0],B._titleWidth+2*(W+l.titlePad))),B._height=Math.ceil(Math.max(B._height+$[1],B._titleHeight+2*(W+l.itemGap))),B._effHeight=Math.min(B._height,B._maxHeight);var Ue=I._context.edits,Ie=Ue.legendText||Ue.legendPosition;U.each(function(Ve){var dt=u.select(this).select(".legendtoggle"),Rt=Ve[0].height,Gt=Ie?fe:K||fe+Ve[0].width;ee||(Gt+=le/2),a.setRect(dt,0,-Rt/2,Gt,Rt)})}function P(I){var D=I._fullLayout,U=D.legend,B=O(U),j=F(U);return m.autoMargin(I,"legend",{x:U.x,y:U.y,l:U._width*h[B],r:U._width*d[B],b:U._effHeight*d[j],t:U._effHeight*h[j]})}function O(I){return s.isRightAnchor(I)?"right":s.isCenterAnchor(I)?"center":"left"}function F(I){return s.isBottomAnchor(I)?"bottom":s.isMiddleAnchor(I)?"middle":"top"}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(e,z,N){var u=e("../../registry"),s=e("./helpers");z.exports=function(x,t){var i=t._inHover,a=s.isGrouped(t),r=s.isReversed(t),n={},f=[],l=!1,o={},c=0,h=0,d,p;function y(U,B){if(U===""||!s.isGrouped(t)){var j="~~i"+c;f.push(j),n[j]=[B],c++}else f.indexOf(U)===-1?(f.push(U),l=!0,n[U]=[B]):n[U].push(B)}for(d=0;d<x.length;d++){var g=x[d],A=g[0],b=A.trace,M=b.legendgroup;if(!(!i&&(!b.visible||!b.showlegend)))if(u.traceIs(b,"pie-like"))for(o[M]||(o[M]={}),p=0;p<g.length;p++){var _=g[p].label;o[M][_]||(y(M,{label:_,color:g[p].color,i:g[p].i,trace:b,pts:g[p].pts}),o[M][_]=!0,h=Math.max(h,(_||"").length))}else y(M,A),h=Math.max(h,(b.name||"").length)}if(!f.length)return[];var T=!l||!a,w=[];for(d=0;d<f.length;d++){var v=n[f[d]];T?w.push(v[0]):w.push(v)}for(T&&(w=[w]),d=0;d<w.length;d++){var L=1/0;for(p=0;p<w[d].length;p++){var S=w[d][p].trace.legendrank;L>S&&(L=S)}w[d][0]._groupMinRank=L,w[d][0]._preGroupSort=d}var k=function(U,B){return U[0]._groupMinRank-B[0]._groupMinRank||U[0]._preGroupSort-B[0]._preGroupSort},P=function(U,B){return U.trace.legendrank-B.trace.legendrank||U._preSort-B._preSort};for(w.forEach(function(U,B){U[0]._preGroupSort=B}),w.sort(k),d=0;d<w.length;d++){w[d].forEach(function(U,B){U._preSort=B}),w[d].sort(P);var O=w[d][0].trace,F=null;for(p=0;p<w[d].length;p++){var I=w[d][p].trace.legendgrouptitle;if(I&&I.text){F=I,i&&(I.font=t._groupTitleFont);break}}if(r&&w[d].reverse(),F){var D=!1;for(p=0;p<w[d].length;p++)if(u.traceIs(w[d][p].trace,"pie-like")){D=!0;break}w[d].unshift({i:-1,groupTitle:F,noClick:D,trace:{showlegend:O.showlegend,legendgroup:O.legendgroup,visible:t.groupclick==="toggleitem"?!0:O.visible}})}for(p=0;p<w[d].length;p++)w[d][p]=[w[d][p]]}return t._lgroupsLength=w.length,t._maxNameLength=h,w}},{"../../registry":638,"./helpers":422}],421:[function(e,z,N){var u=e("../../lib"),s=e("../../registry"),m=!0;z.exports=function(t,i,a){var r=i._fullLayout;if(i._dragged||i._editing)return;var n=r.legend.itemclick,f=r.legend.itemdoubleclick,l=r.legend.groupclick;a===1&&n==="toggle"&&f==="toggleothers"&&m&&i.data&&i._context.showTips&&u.notifier(u._(i,"Double-click on legend to isolate one trace"),"long"),m=!1;var o;if(a===1?o=n:a===2&&(o=f),!o)return;var c=l==="togglegroup",h=r.hiddenlabels?r.hiddenlabels.slice():[],d=t.data()[0][0];if(d.groupTitle&&d.noClick)return;var p=i._fullData,y=d.trace,g=y.legendgroup,A,b,M,_,T,w,v={},L=[],S=[],k=[];function P(se,H,Y){var ne=L.indexOf(se),te=v[H];return te||(te=v[H]=[]),L.indexOf(se)===-1&&(L.push(se),ne=L.length-1),te[ne]=Y,ne}function O(se,H){if(!(d.groupTitle&&!c)){var Y=se._fullInput;if(s.hasTransform(Y,"groupby")){var ne=S[Y.index];if(!ne){var te=s.getTransformIndices(Y,"groupby"),K=te[te.length-1];ne=u.keyedContainer(Y,"transforms["+K+"].styles","target","value.visible"),S[Y.index]=ne}var $=ne.get(se._group);$===void 0&&($=!0),$!==!1&&ne.set(se._group,H),k[Y.index]=P(Y.index,"visible",Y.visible!==!1)}else{var ae=Y.visible===!1?!1:H;P(Y.index,"visible",ae)}}}if(s.traceIs(y,"pie-like")){var F=d.label,I=h.indexOf(F);o==="toggle"?I===-1?h.push(F):h.splice(I,1):o==="toggleothers"&&(h=[],i.calcdata[0].forEach(function(se){F!==se.label&&h.push(se.label)}),i._fullLayout.hiddenlabels&&i._fullLayout.hiddenlabels.length===h.length&&I===-1&&(h=[])),s.call("_guiRelayout",i,"hiddenlabels",h)}else{var D=g&&g.length,U=[],B;if(D)for(A=0;A<p.length;A++)B=p[A],!!B.visible&&B.legendgroup===g&&U.push(A);if(o==="toggle"){var j;switch(y.visible){case!0:j="legendonly";break;case!1:j=!1;break;case"legendonly":j=!0;break}if(D)if(c)for(A=0;A<p.length;A++)p[A].visible!==!1&&p[A].legendgroup===g&&O(p[A],j);else O(y,j);else O(y,j)}else if(o==="toggleothers"){var Z,ee,q,W,J=!0;for(A=0;A<p.length;A++)if(Z=p[A]===y,q=p[A].showlegend!==!0,!(Z||q)&&(ee=D&&p[A].legendgroup===g,!ee&&p[A].visible===!0&&!s.traceIs(p[A],"notLegendIsolatable"))){J=!1;break}for(A=0;A<p.length;A++)if(p[A].visible!==!1&&!s.traceIs(p[A],"notLegendIsolatable"))switch(y.visible){case"legendonly":O(p[A],!0);break;case!0:W=J?!0:"legendonly",Z=p[A]===y,q=p[A].showlegend!==!0&&!p[A].legendgroup,ee=Z||D&&p[A].legendgroup===g,O(p[A],ee||q?!0:W);break}}for(A=0;A<S.length;A++)if(M=S[A],!!M){var le=M.constructUpdate(),fe=Object.keys(le);for(b=0;b<fe.length;b++)_=fe[b],w=v[_]=v[_]||[],w[k[A]]=le[_]}for(T=Object.keys(v),A=0;A<T.length;A++)for(_=T[A],b=0;b<L.length;b++)v[_].hasOwnProperty(b)||(v[_][b]=void 0);s.call("_guiRestyle",i,v,L)}}},{"../../lib":503,"../../registry":638}],422:[function(e,z,N){N.isGrouped=function(s){return(s.traceorder||"").indexOf("grouped")!==-1},N.isVertical=function(s){return s.orientation!=="h"},N.isReversed=function(s){return(s.traceorder||"").indexOf("reversed")!==-1}},{}],423:[function(e,z,N){z.exports={moduleType:"component",name:"legend",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw"),style:e("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=m.strTranslate,t=e("../drawing"),i=e("../color"),a=e("../colorscale/helpers").extractOpts,r=e("../../traces/scatter/subtypes"),n=e("../../traces/pie/style_one"),f=e("../../traces/pie/helpers").castOption,l=e("./constants"),o=12,c=5,h=2,d=10,p=5;z.exports=function(M,_,T){var w=_._fullLayout;T||(T=w.legend);var v=T.itemsizing==="constant",L=T.itemwidth,S=(L+l.itemGap*2)/2,k=x(S,0),P=function(fe,se,H,Y){var ne;if(fe+1)ne=fe;else if(se&&se.width>0)ne=se.width;else return 0;return v?Y:Math.min(ne,H)};M.each(function(fe){var se=u.select(this),H=m.ensureSingle(se,"g","layers");H.style("opacity",fe[0].trace.opacity);var Y=T.valign,ne=fe[0].lineHeight,te=fe[0].height;if(Y==="middle"||!ne||!te)H.attr("transform",null);else{var K={top:1,bottom:-1}[Y],$=K*(.5*(ne-te+3));H.attr("transform",x(0,$))}var ae=H.selectAll("g.legendfill").data([fe]);ae.enter().append("g").classed("legendfill",!0);var ie=H.selectAll("g.legendlines").data([fe]);ie.enter().append("g").classed("legendlines",!0);var oe=H.selectAll("g.legendsymbols").data([fe]);oe.enter().append("g").classed("legendsymbols",!0),oe.selectAll("g.legendpoints").data([fe]).enter().append("g").classed("legendpoints",!0)}).each(le).each(I).each(U).each(D).each(j).each(W).each(q).each(O).each(F).each(Z).each(ee);function O(fe){var se=g(fe),H=se.showFill,Y=se.showLine,ne=se.showGradientLine,te=se.showGradientFill,K=se.anyFill,$=se.anyLine,ae=fe[0],ie=ae.trace,oe,ue,ye=a(ie),ce=ye.colorscale,me=ye.reversescale,xe=function(Re){if(Re.size()){var We="legendfill-"+ie.uid;t.gradient(Re,_,We,y(me),ce,"fill")}},ke=function(Re){if(Re.size()){var We="legendline-"+ie.uid;t.lineGroupStyle(Re),t.gradient(Re,_,We,y(me),ce,"stroke")}},Ae=r.hasMarkers(ie)||!K?"M5,0":$?"M5,-2":"M5,-3",Oe=u.select(this),He=Oe.select(".legendfill").selectAll("path").data(H||te?[fe]:[]);if(He.enter().append("path").classed("js-fill",!0),He.exit().remove(),He.attr("d",Ae+"h"+L+"v6h-"+L+"z").call(H?t.fillGroupStyle:xe),Y||ne){var Ge=P(void 0,ie.line,d,c);ue=m.minExtend(ie,{line:{width:Ge}}),oe=[m.minExtend(ae,{trace:ue})]}var _e=Oe.select(".legendlines").selectAll("path").data(Y||ne?[oe]:[]);_e.enter().append("path").classed("js-line",!0),_e.exit().remove(),_e.attr("d",Ae+(ne?"l"+L+",0.0001":"h"+L)).call(Y?t.lineGroupStyle:ke)}function F(fe){var se=g(fe),H=se.anyFill,Y=se.anyLine,ne=se.showLine,te=se.showMarker,K=fe[0],$=K.trace,ae=!te&&!Y&&!H&&r.hasText($),ie,oe;function ue(He,Ge,_e,Re){var We=m.nestedProperty($,He).get(),qe=m.isArrayOrTypedArray(We)&&Ge?Ge(We):We;if(v&&qe&&Re!==void 0&&(qe=Re),_e){if(qe<_e[0])return _e[0];if(qe>_e[1])return _e[1]}return qe}function ye(He){return K._distinct&&K.index&&He[K.index]?He[K.index]:He[0]}if(te||ae||ne){var ce={},me={};if(te){ce.mc=ue("marker.color",ye),ce.mx=ue("marker.symbol",ye),ce.mo=ue("marker.opacity",m.mean,[.2,1]),ce.mlc=ue("marker.line.color",ye),ce.mlw=ue("marker.line.width",m.mean,[0,5],h),me.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var xe=ue("marker.size",m.mean,[2,16],o);ce.ms=xe,me.marker.size=xe}ne&&(me.line={width:ue("line.width",ye,[0,10],c)}),ae&&(ce.tx="Aa",ce.tp=ue("textposition",ye),ce.ts=10,ce.tc=ue("textfont.color",ye),ce.tf=ue("textfont.family",ye)),ie=[m.minExtend(K,ce)],oe=m.minExtend($,me),oe.selectedpoints=null,oe.texttemplate=null}var ke=u.select(this).select("g.legendpoints"),Ae=ke.selectAll("path.scatterpts").data(te?ie:[]);Ae.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",k),Ae.exit().remove(),Ae.call(t.pointStyle,oe,_),te&&(ie[0].mrc=3);var Oe=ke.selectAll("g.pointtext").data(ae?ie:[]);Oe.enter().append("g").classed("pointtext",!0).append("text").attr("transform",k),Oe.exit().remove(),Oe.selectAll("text").call(t.textPointStyle,oe,_)}function I(fe){var se=fe[0].trace,H=se.type==="waterfall";if(fe[0]._distinct&&H){var Y=fe[0].trace[fe[0].dir].marker;return fe[0].mc=Y.color,fe[0].mlw=Y.line.width,fe[0].mlc=Y.line.color,B(fe,this,"waterfall")}var ne=[];se.visible&&H&&(ne=fe[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var te=u.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(ne);te.enter().append("path").classed("legendwaterfall",!0).attr("transform",k).style("stroke-miterlimit",1),te.exit().remove(),te.each(function(K){var $=u.select(this),ae=se[K[0]].marker,ie=P(void 0,ae.line,p,h);$.attr("d",K[1]).style("stroke-width",ie+"px").call(i.fill,ae.color),ie&&$.call(i.stroke,ae.line.color)})}function D(fe){B(fe,this)}function U(fe){B(fe,this,"funnel")}function B(fe,se,H){var Y=fe[0].trace,ne=Y.marker||{},te=ne.line||{},K=H?Y.visible&&Y.type===H:s.traceIs(Y,"bar"),$=u.select(se).select("g.legendpoints").selectAll("path.legend"+H).data(K?[fe]:[]);$.enter().append("path").classed("legend"+H,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),$.exit().remove(),$.each(function(ae){var ie=u.select(this),oe=ae[0],ue=P(oe.mlw,ne.line,p,h);ie.style("stroke-width",ue+"px");var ye=oe.mcc;if(!T._inHover&&"mc"in oe){var ce=a(ne),me=ce.mid;me===void 0&&(me=(ce.max+ce.min)/2),ye=t.tryColorscale(ne,"")(me)}var xe=ye||oe.mc||ne.color,ke=ne.pattern,Ae=ke&&t.getPatternAttr(ke.shape,0,"");if(Ae){var Oe=t.getPatternAttr(ke.bgcolor,0,null),He=t.getPatternAttr(ke.fgcolor,0,null),Ge=ke.fgopacity,_e=A(ke.size,8,10),Re=A(ke.solidity,.5,1),We="legend-"+Y.uid;ie.call(t.pattern,"legend",_,We,Ae,_e,Re,ye,ke.fillmode,Oe,He,Ge)}else ie.call(i.fill,xe);ue&&i.stroke(ie,oe.mlc||te.color)})}function j(fe){var se=fe[0].trace,H=u.select(this).select("g.legendpoints").selectAll("path.legendbox").data(se.visible&&s.traceIs(se,"box-violin")?[fe]:[]);H.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),H.exit().remove(),H.each(function(){var Y=u.select(this);if((se.boxpoints==="all"||se.points==="all")&&i.opacity(se.fillcolor)===0&&i.opacity((se.line||{}).color)===0){var ne=m.minExtend(se,{marker:{size:v?o:m.constrain(se.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});H.call(t.pointStyle,ne,_)}else{var te=P(void 0,se.line,p,h);Y.style("stroke-width",te+"px").call(i.fill,se.fillcolor),te&&i.stroke(Y,se.line.color)}})}function Z(fe){var se=fe[0].trace,H=u.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(se.visible&&se.type==="candlestick"?[fe,fe]:[]);H.enter().append("path").classed("legendcandle",!0).attr("d",function(Y,ne){return ne?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",k).style("stroke-miterlimit",1),H.exit().remove(),H.each(function(Y,ne){var te=u.select(this),K=se[ne?"increasing":"decreasing"],$=P(void 0,K.line,p,h);te.style("stroke-width",$+"px").call(i.fill,K.fillcolor),$&&i.stroke(te,K.line.color)})}function ee(fe){var se=fe[0].trace,H=u.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(se.visible&&se.type==="ohlc"?[fe,fe]:[]);H.enter().append("path").classed("legendohlc",!0).attr("d",function(Y,ne){return ne?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",k).style("stroke-miterlimit",1),H.exit().remove(),H.each(function(Y,ne){var te=u.select(this),K=se[ne?"increasing":"decreasing"],$=P(void 0,K.line,p,h);te.style("fill","none").call(t.dashLine,K.line.dash,$),$&&i.stroke(te,K.line.color)})}function q(fe){J(fe,this,"pie")}function W(fe){J(fe,this,"funnelarea")}function J(fe,se,H){var Y=fe[0],ne=Y.trace,te=H?ne.visible&&ne.type===H:s.traceIs(ne,H),K=u.select(se).select("g.legendpoints").selectAll("path.legend"+H).data(te?[fe]:[]);if(K.enter().append("path").classed("legend"+H,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",k),K.exit().remove(),K.size()){var $=(ne.marker||{}).line,ae=P(f($.width,Y.pts),$,p,h),ie=m.minExtend(ne,{marker:{line:{width:ae}}});ie.marker.line.color=$.color;var oe=m.minExtend(Y,{trace:ie});n(K,oe,ie)}}function le(fe){var se=fe[0].trace,H,Y=[];if(se.visible)switch(se.type){case"histogram2d":case"heatmap":Y=[["M-15,-2V4H15V-2Z"]],H=!0;break;case"choropleth":case"choroplethmapbox":Y=[["M-6,-6V6H6V-6Z"]],H=!0;break;case"densitymapbox":Y=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],H="radial";break;case"cone":Y=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],H=!1;break;case"streamtube":Y=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],H=!1;break;case"surface":Y=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],H=!0;break;case"mesh3d":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],H=!1;break;case"volume":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],H=!0;break;case"isosurface":Y=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],H=!1;break}var ne=u.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(Y);ne.enter().append("path").classed("legend3dandfriends",!0).attr("transform",k).style("stroke-miterlimit",1),ne.exit().remove(),ne.each(function(te,K){var $=u.select(this),ae=a(se),ie=ae.colorscale,oe=ae.reversescale,ue=function(xe){if(xe.size()){var ke="legendfill-"+se.uid;t.gradient(xe,_,ke,y(oe,H==="radial"),ie,"fill")}},ye;if(ie){if(!H){var me=ie.length;ye=K===0?ie[oe?me-1:0][1]:K===1?ie[oe?0:me-1][1]:ie[Math.floor((me-1)/2)][1]}}else{var ce=se.vertexcolor||se.facecolor||se.color;ye=m.isArrayOrTypedArray(ce)?ce[K]||ce[0]:ce}$.attr("d",te[0]),ye?$.call(i.fill,ye):$.call(ue)})}};function y(b,M){var _=M?"radial":"horizontal";return _+(b?"":"reversed")}function g(b){var M=b[0].trace,_=M.contours,T=r.hasLines(M),w=r.hasMarkers(M),v=M.visible&&M.fill&&M.fill!=="none",L=!1,S=!1;if(_){var k=_.coloring;k==="lines"?L=!0:T=k==="none"||k==="heatmap"||_.showlines,_.type==="constraint"?v=_._operation!=="=":(k==="fill"||k==="heatmap")&&(S=!0)}return{showMarker:w,showLine:T,showFill:v,showGradientLine:L,showGradientFill:S,anyLine:T||L,anyFill:v||S}}function A(b,M,_){return b&&m.isArrayOrTypedArray(b)?M:b>_?_:b}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(e,z,N){e("./constants"),z.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(e,z,N){var u=e("../../registry"),s=e("../../plots/plots"),m=e("../../plots/cartesian/axis_ids"),x=e("../../fonts/ploticon"),t=e("../shapes/draw").eraseActiveShape,i=e("../../lib"),a=i._,r=z.exports={};r.toImage={name:"toImage",title:function(b){var M=b._context.toImageButtonOptions||{},_=M.format||"png";return _==="png"?a(b,"Download plot as a png"):a(b,"Download plot")},icon:x.camera,click:function(b){var M=b._context.toImageButtonOptions,_={format:M.format||"png"};i.notifier(a(b,"Taking snapshot - this may take a few seconds"),"long"),_.format!=="svg"&&i.isIE()&&(i.notifier(a(b,"IE only supports svg.  Changing format to svg."),"long"),_.format="svg"),["filename","width","height","scale"].forEach(function(T){T in M&&(_[T]=M[T])}),u.call("downloadImage",b,_).then(function(T){i.notifier(a(b,"Snapshot succeeded")+" - "+T,"long")}).catch(function(){i.notifier(a(b,"Sorry, there was a problem downloading your snapshot!"),"long")})}},r.sendDataToCloud={name:"sendDataToCloud",title:function(b){return a(b,"Edit in Chart Studio")},icon:x.disk,click:function(b){s.sendDataToCloud(b)}},r.editInChartStudio={name:"editInChartStudio",title:function(b){return a(b,"Edit in Chart Studio")},icon:x.pencil,click:function(b){s.sendDataToCloud(b)}},r.zoom2d={name:"zoom2d",_cat:"zoom",title:function(b){return a(b,"Zoom")},attr:"dragmode",val:"zoom",icon:x.zoombox,click:n},r.pan2d={name:"pan2d",_cat:"pan",title:function(b){return a(b,"Pan")},attr:"dragmode",val:"pan",icon:x.pan,click:n},r.select2d={name:"select2d",_cat:"select",title:function(b){return a(b,"Box Select")},attr:"dragmode",val:"select",icon:x.selectbox,click:n},r.lasso2d={name:"lasso2d",_cat:"lasso",title:function(b){return a(b,"Lasso Select")},attr:"dragmode",val:"lasso",icon:x.lasso,click:n},r.drawclosedpath={name:"drawclosedpath",title:function(b){return a(b,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:x.drawclosedpath,click:n},r.drawopenpath={name:"drawopenpath",title:function(b){return a(b,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:x.drawopenpath,click:n},r.drawline={name:"drawline",title:function(b){return a(b,"Draw line")},attr:"dragmode",val:"drawline",icon:x.drawline,click:n},r.drawrect={name:"drawrect",title:function(b){return a(b,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:x.drawrect,click:n},r.drawcircle={name:"drawcircle",title:function(b){return a(b,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:x.drawcircle,click:n},r.eraseshape={name:"eraseshape",title:function(b){return a(b,"Erase active shape")},icon:x.eraseshape,click:t},r.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:n},r.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:n},r.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(b){return a(b,"Autoscale")},attr:"zoom",val:"auto",icon:x.autoscale,click:n},r.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(b){return a(b,"Reset axes")},attr:"zoom",val:"reset",icon:x.home,click:n},r.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(b){return a(b,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:n},r.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(b){return a(b,"Compare data on hover")},attr:"hovermode",val:function(b){return b._fullLayout._isHoriz?"y":"x"},icon:x.tooltip_compare,gravity:"ne",click:n};function n(b,M){var _=M.currentTarget,T=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,v=b._fullLayout,L={},S=m.list(b,null,!0),k=v._cartesianSpikesEnabled,P,O;if(T==="zoom"){var F=w==="in"?.5:2,I=(1+F)/2,D=(1-F)/2,U;for(O=0;O<S.length;O++)if(P=S[O],!P.fixedrange)if(U=P._name,w==="auto")L[U+".autorange"]=!0;else if(w==="reset"){if(P._rangeInitial===void 0)L[U+".autorange"]=!0;else{var B=P._rangeInitial.slice();L[U+".range[0]"]=B[0],L[U+".range[1]"]=B[1]}P._showSpikeInitial!==void 0&&(L[U+".showspikes"]=P._showSpikeInitial,k==="on"&&!P._showSpikeInitial&&(k="off"))}else{var j=[P.r2l(P.range[0]),P.r2l(P.range[1])],Z=[I*j[0]+D*j[1],I*j[1]+D*j[0]];L[U+".range[0]"]=P.l2r(Z[0]),L[U+".range[1]"]=P.l2r(Z[1])}}else T==="hovermode"&&(w==="x"||w==="y")&&(w=v._isHoriz?"y":"x",_.setAttribute("data-val",w)),L[T]=w;v._cartesianSpikesEnabled=k,u.call("_guiRelayout",b,L)}r.zoom3d={name:"zoom3d",_cat:"zoom",title:function(b){return a(b,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:x.zoombox,click:f},r.pan3d={name:"pan3d",_cat:"pan",title:function(b){return a(b,"Pan")},attr:"scene.dragmode",val:"pan",icon:x.pan,click:f},r.orbitRotation={name:"orbitRotation",title:function(b){return a(b,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:x["3d_rotate"],click:f},r.tableRotation={name:"tableRotation",title:function(b){return a(b,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:x["z-axis"],click:f};function f(b,M){for(var _=M.currentTarget,T=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,v=b._fullLayout._subplots.gl3d||[],L={},S=T.split("."),k=0;k<v.length;k++)L[v[k]+"."+S[1]]=w;var P=w==="pan"?w:"zoom";L.dragmode=P,u.call("_guiRelayout",b,L)}r.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(b){return a(b,"Reset camera to default")},attr:"resetDefault",icon:x.home,click:l},r.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(b){return a(b,"Reset camera to last save")},attr:"resetLastSave",icon:x.movie,click:l};function l(b,M){for(var _=M.currentTarget,T=_.getAttribute("data-attr"),w=T==="resetLastSave",v=T==="resetDefault",L=b._fullLayout,S=L._subplots.gl3d||[],k={},P=0;P<S.length;P++){var O=S[P],F=O+".camera",I=O+".aspectratio",D=O+".aspectmode",U=L[O]._scene,B;w?(k[F+".up"]=U.viewInitial.up,k[F+".eye"]=U.viewInitial.eye,k[F+".center"]=U.viewInitial.center,B=!0):v&&(k[F+".up"]=null,k[F+".eye"]=null,k[F+".center"]=null,B=!0),B&&(k[I+".x"]=U.viewInitial.aspectratio.x,k[I+".y"]=U.viewInitial.aspectratio.y,k[I+".z"]=U.viewInitial.aspectratio.z,k[D]=U.viewInitial.aspectmode)}u.call("_guiRelayout",b,k)}r.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:c};function o(b,M){var _=M.currentTarget,T=_._previousVal,w=b._fullLayout,v=w._subplots.gl3d||[],L=["xaxis","yaxis","zaxis"],S={},k={};if(T)k=T,_._previousVal=null;else{for(var P=0;P<v.length;P++){var O=v[P],F=w[O],I=O+".hovermode";S[I]=F.hovermode,k[I]=!1;for(var D=0;D<3;D++){var U=L[D],B=O+"."+U+".showspikes";k[B]=!1,S[B]=F[U].showspikes}}_._previousVal=S}return k}function c(b,M){var _=o(b,M);u.call("_guiRelayout",b,_)}r.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:h},r.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:h},r.resetGeo={name:"resetGeo",_cat:"reset",title:function(b){return a(b,"Reset")},attr:"reset",val:null,icon:x.autoscale,click:h},r.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:p};function h(b,M){for(var _=M.currentTarget,T=_.getAttribute("data-attr"),w=_.getAttribute("data-val")||!0,v=b._fullLayout,L=v._subplots.geo||[],S=0;S<L.length;S++){var k=L[S],P=v[k];if(T==="zoom"){var O=P.projection.scale,F=w==="in"?2*O:.5*O;u.call("_guiRelayout",b,k+".projection.scale",F)}}T==="reset"&&A(b,"geo")}r.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:p},r.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:x.tooltip_basic,gravity:"ne",click:p};function d(b){var M=b._fullLayout;return M.hovermode?!1:M._has("cartesian")?M._isHoriz?"y":"x":"closest"}function p(b){var M=d(b);u.call("_guiRelayout",b,"hovermode",M)}r.resetViewSankey={name:"resetSankeyGroup",title:function(b){return a(b,"Reset view")},icon:x.home,click:function(b){for(var M={"node.groups":[],"node.x":[],"node.y":[]},_=0;_<b._fullData.length;_++){var T=b._fullData[_]._viewInitial;M["node.groups"].push(T.node.groups.slice()),M["node.x"].push(T.node.x.slice()),M["node.y"].push(T.node.y.slice())}u.call("restyle",b,M)}},r.toggleHover={name:"toggleHover",title:function(b){return a(b,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:x.tooltip_basic,gravity:"ne",click:function(b,M){var _=o(b,M);_.hovermode=d(b),u.call("_guiRelayout",b,_)}},r.resetViews={name:"resetViews",title:function(b){return a(b,"Reset views")},icon:x.home,click:function(b,M){var _=M.currentTarget;_.setAttribute("data-attr","zoom"),_.setAttribute("data-val","reset"),n(b,M),_.setAttribute("data-attr","resetLastSave"),l(b,M),A(b,"geo"),A(b,"mapbox")}},r.toggleSpikelines={name:"toggleSpikelines",title:function(b){return a(b,"Toggle Spike Lines")},icon:x.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(b){var M=b._fullLayout,_=M._cartesianSpikesEnabled;M._cartesianSpikesEnabled=_==="on"?"off":"on",u.call("_guiRelayout",b,y(b))}};function y(b){for(var M=b._fullLayout,_=M._cartesianSpikesEnabled==="on",T=m.list(b,null,!0),w={},v=0;v<T.length;v++){var L=T[v];w[L._name+".showspikes"]=_?!0:L._showSpikeInitial}return w}r.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(b){return a(b,"Reset view")},attr:"reset",icon:x.home,click:function(b){A(b,"mapbox")}},r.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(b){return a(b,"Zoom in")},attr:"zoom",val:"in",icon:x.zoom_plus,click:g},r.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(b){return a(b,"Zoom out")},attr:"zoom",val:"out",icon:x.zoom_minus,click:g};function g(b,M){for(var _=M.currentTarget,T=_.getAttribute("data-val"),w=b._fullLayout,v=w._subplots.mapbox||[],L=1.05,S={},k=0;k<v.length;k++){var P=v[k],O=w[P].zoom,F=T==="in"?L*O:O/L;S[P+".zoom"]=F}u.call("_guiRelayout",b,S)}function A(b,M){for(var _=b._fullLayout,T=_._subplots[M]||[],w={},v=0;v<T.length;v++)for(var L=T[v],S=_[L]._subplot,k=S.viewInitial,P=Object.keys(k),O=0;O<P.length;O++){var F=P[O];w[L+"."+F]=k[F]}u.call("_guiRelayout",b,w)}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(e,z,N){var u=e("./buttons"),s=Object.keys(u),m=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],x=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(m),t=[],i=function(a){if(x.indexOf(a._cat||a.name)===-1){var r=a.name,n=(a._cat||a.name).toLowerCase();t.indexOf(r)===-1&&t.push(r),t.indexOf(n)===-1&&t.push(n)}};s.forEach(function(a){i(u[a])}),t.sort(),z.exports={DRAW_MODES:m,backButtons:x,foreButtons:t}},{"./buttons":426}],428:[function(e,z,N){var u=e("../../lib"),s=e("../color"),m=e("../../plot_api/plot_template"),x=e("./attributes");z.exports=function(i,a){var r=i.modebar||{},n=m.newContainer(a,"modebar");function f(o,c){return u.coerce(r,n,x,o,c)}f("orientation"),f("bgcolor",s.addOpacity(a.paper_bgcolor,.5));var l=s.contrast(s.rgb(a.modebar.bgcolor));f("color",s.addOpacity(l,.3)),f("activecolor",s.addOpacity(l,.7)),f("uirevision",a.uirevision),f("add"),f("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(e,z,N){z.exports={moduleType:"component",name:"modebar",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),manage:e("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(e,z,N){var u=e("../../plots/cartesian/axis_ids"),s=e("../../traces/scatter/subtypes"),m=e("../../registry"),x=e("../fx/helpers").isUnifiedHover,t=e("./modebar"),i=e("./buttons"),a=e("./constants").DRAW_MODES;z.exports=function(d){var p=d._fullLayout,y=d._context,g=p._modeBar;if(!y.displayModeBar&&!y.watermark){g&&(g.destroy(),delete p._modeBar);return}if(!Array.isArray(y.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(y.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var A=y.modeBarButtons,b;Array.isArray(A)&&A.length?b=c(A):!y.displayModeBar&&y.watermark?b=[]:b=r(d),g?g.update(d,b):p._modeBar=t(d,b)};function r(h){var d=h._fullLayout,p=h._fullData,y=h._context;function g(te,K){if(typeof K=="string"){if(K.toLowerCase()===te.toLowerCase())return!0}else{var $=K.name,ae=K._cat||K.name;if($===te||ae===te.toLowerCase())return!0}return!1}var A=d.modebar.add;typeof A=="string"&&(A=[A]);var b=d.modebar.remove;typeof b=="string"&&(b=[b]);var M=y.modeBarButtonsToAdd.concat(A.filter(function(te){for(var K=0;K<y.modeBarButtonsToRemove.length;K++)if(g(te,y.modeBarButtonsToRemove[K]))return!1;return!0})),_=y.modeBarButtonsToRemove.concat(b.filter(function(te){for(var K=0;K<y.modeBarButtonsToAdd.length;K++)if(g(te,y.modeBarButtonsToAdd[K]))return!1;return!0})),T=d._has("cartesian"),w=d._has("gl3d"),v=d._has("geo"),L=d._has("pie"),S=d._has("funnelarea"),k=d._has("gl2d"),P=d._has("ternary"),O=d._has("mapbox"),F=d._has("polar"),I=d._has("smith"),D=d._has("sankey"),U=n(d),B=x(d.hovermode),j=[];function Z(te){if(!!te.length){for(var K=[],$=0;$<te.length;$++){for(var ae=te[$],ie=i[ae],oe=ie.name.toLowerCase(),ue=(ie._cat||ie.name).toLowerCase(),ye=!1,ce=0;ce<_.length;ce++){var me=_[ce].toLowerCase();if(me===oe||me===ue){ye=!0;break}}ye||K.push(i[ae])}j.push(K)}}var ee=["toImage"];y.showEditInChartStudio?ee.push("editInChartStudio"):y.showSendToCloud&&ee.push("sendDataToCloud"),Z(ee);var q=[],W=[],J=[],le=[];(T||k||L||S||P)+v+w+O+F+I>1?(W=["toggleHover"],J=["resetViews"]):v?(q=["zoomInGeo","zoomOutGeo"],W=["hoverClosestGeo"],J=["resetGeo"]):w?(W=["hoverClosest3d"],J=["resetCameraDefault3d","resetCameraLastSave3d"]):O?(q=["zoomInMapbox","zoomOutMapbox"],W=["toggleHover"],J=["resetViewMapbox"]):k?W=["hoverClosestGl2d"]:L?W=["hoverClosestPie"]:D?(W=["hoverClosestCartesian","hoverCompareCartesian"],J=["resetViewSankey"]):W=["toggleHover"],T&&(W=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(l(p)||B)&&(W=[]),(T||k)&&!U&&(q=["zoomIn2d","zoomOut2d","autoScale2d"],J[0]!=="resetViews"&&(J=["resetScale2d"])),w?le=["zoom3d","pan3d","orbitRotation","tableRotation"]:(T||k)&&!U||P?le=["zoom2d","pan2d"]:O||v?le=["pan2d"]:F&&(le=["zoom2d"]),f(p)&&le.push("select2d","lasso2d");var fe=[],se=function(te){fe.indexOf(te)===-1&&W.indexOf(te)!==-1&&fe.push(te)};if(Array.isArray(M)){for(var H=[],Y=0;Y<M.length;Y++){var ne=M[Y];typeof ne=="string"?(ne=ne.toLowerCase(),a.indexOf(ne)!==-1?(d._has("mapbox")||d._has("cartesian"))&&le.push(ne):ne==="togglespikelines"?se("toggleSpikelines"):ne==="togglehover"?se("toggleHover"):ne==="hovercompare"?se("hoverCompareCartesian"):ne==="hoverclosest"?(se("hoverClosestCartesian"),se("hoverClosestGeo"),se("hoverClosest3d"),se("hoverClosestGl2d"),se("hoverClosestPie")):ne==="v1hovermode"&&(se("toggleHover"),se("hoverClosestCartesian"),se("hoverCompareCartesian"),se("hoverClosestGeo"),se("hoverClosest3d"),se("hoverClosestGl2d"),se("hoverClosestPie"))):H.push(ne)}M=H}return Z(le),Z(q.concat(J)),Z(fe),o(j,M)}function n(h){for(var d=u.list({_fullLayout:h},null,!0),p=0;p<d.length;p++)if(!d[p].fixedrange)return!1;return!0}function f(h){for(var d=!1,p=0;p<h.length&&!d;p++){var y=h[p];!y._module||!y._module.selectPoints||(m.traceIs(y,"scatter-like")?(s.hasMarkers(y)||s.hasText(y))&&(d=!0):m.traceIs(y,"box-violin")?(y.boxpoints==="all"||y.points==="all")&&(d=!0):d=!0)}return d}function l(h){for(var d=0;d<h.length;d++)if(!m.traceIs(h[d],"noHover"))return!1;return!0}function o(h,d){if(d.length)if(Array.isArray(d[0]))for(var p=0;p<d.length;p++)h.push(d[p]);else h.push(d);return h}function c(h){for(var d=0;d<h.length;d++)for(var p=h[d],y=0;y<p.length;y++){var g=p[y];if(typeof g=="string")if(i[g]!==void 0)h[d][y]=i[g];else throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "))}return h}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../fonts/ploticon"),t=new DOMParser;function i(n){this.container=n.container,this.element=document.createElement("div"),this.update(n.graphInfo,n.buttons),this.container.appendChild(this.element)}var a=i.prototype;a.update=function(n,f){this.graphInfo=n;var l=this.graphInfo._context,o=this.graphInfo._fullLayout,c="modebar-"+o._uid;this.element.setAttribute("id",c),this._uid=c,this.element.className="modebar",l.displayModeBar==="hover"&&(this.element.className+=" modebar--hover ease-bg"),o.modebar.orientation==="v"&&(this.element.className+=" vertical",f=f.reverse());var h=o.modebar,d=l.displayModeBar==="hover"?".js-plotly-plot .plotly:hover ":"";m.deleteRelatedStyleRule(c),m.addRelatedStyleRule(c,d+"#"+c+" .modebar-group","background-color: "+h.bgcolor),m.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+h.color),m.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+h.activecolor),m.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+h.activecolor);var p=!this.hasButtons(f),y=this.hasLogo!==l.displaylogo,g=this.locale!==l.locale;if(this.locale=l.locale,(p||y||g)&&(this.removeAllButtons(),this.updateButtons(f),l.watermark||l.displaylogo)){var A=this.getLogo();l.watermark&&(A.className=A.className+" watermark"),o.modebar.orientation==="v"?this.element.insertBefore(A,this.element.childNodes[0]):this.element.appendChild(A),this.hasLogo=!0}this.updateActiveButton()},a.updateButtons=function(n){var f=this;this.buttons=n,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(l){var o=f.createGroup();l.forEach(function(c){var h=c.name;if(!h)throw new Error("must provide button 'name' in button config");if(f.buttonsNames.indexOf(h)!==-1)throw new Error("button name '"+h+"' is taken");f.buttonsNames.push(h);var d=f.createButton(c);f.buttonElements.push(d),o.appendChild(d)}),f.element.appendChild(o)})},a.createGroup=function(){var n=document.createElement("div");return n.className="modebar-group",n},a.createButton=function(n){var f=this,l=document.createElement("a");l.setAttribute("rel","tooltip"),l.className="modebar-btn";var o=n.title;o===void 0?o=n.name:typeof o=="function"&&(o=o(this.graphInfo)),(o||o===0)&&l.setAttribute("data-title",o),n.attr!==void 0&&l.setAttribute("data-attr",n.attr);var c=n.val;c!==void 0&&(typeof c=="function"&&(c=c(this.graphInfo)),l.setAttribute("data-val",c));var h=n.click;if(typeof h!="function")throw new Error("must provide button 'click' function in button config");l.addEventListener("click",function(p){n.click(f.graphInfo,p),f.updateActiveButton(p.currentTarget)}),l.setAttribute("data-toggle",n.toggle||!1),n.toggle&&u.select(l).classed("active",!0);var d=n.icon;return typeof d=="function"?l.appendChild(d()):l.appendChild(this.createIcon(d||x.question)),l.setAttribute("data-gravity",n.gravity||"n"),l},a.createIcon=function(n){var f=s(n.height)?Number(n.height):n.ascent-n.descent,l="http://www.w3.org/2000/svg",o;if(n.path){o=document.createElementNS(l,"svg"),o.setAttribute("viewBox",[0,0,n.width,f].join(" ")),o.setAttribute("class","icon");var c=document.createElementNS(l,"path");c.setAttribute("d",n.path),n.transform?c.setAttribute("transform",n.transform):n.ascent!==void 0&&c.setAttribute("transform","matrix(1 0 0 -1 0 "+n.ascent+")"),o.appendChild(c)}if(n.svg){var h=t.parseFromString(n.svg,"application/xml");o=h.childNodes[0]}return o.setAttribute("height","1em"),o.setAttribute("width","1em"),o},a.updateActiveButton=function(n){var f=this.graphInfo._fullLayout,l=n!==void 0?n.getAttribute("data-attr"):null;this.buttonElements.forEach(function(o){var c=o.getAttribute("data-val")||!0,h=o.getAttribute("data-attr"),d=o.getAttribute("data-toggle")==="true",p=u.select(o);if(d)h===l&&p.classed("active",!p.classed("active"));else{var y=h===null?h:m.nestedProperty(f,h).get();p.classed("active",y===c)}})},a.hasButtons=function(n){var f=this.buttons;if(!f||n.length!==f.length)return!1;for(var l=0;l<n.length;++l){if(n[l].length!==f[l].length)return!1;for(var o=0;o<n[l].length;o++)if(n[l][o].name!==f[l][o].name)return!1}return!0},a.getLogo=function(){var n=this.createGroup(),f=document.createElement("a");return f.href="https://plotly.com/",f.target="_blank",f.setAttribute("data-title",m._(this.graphInfo,"Produced with Plotly")),f.className="modebar-btn plotlyjsicon modebar-btn--logo",f.appendChild(this.createIcon(x.newplotlylogo)),n.appendChild(f),n},a.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},a.destroy=function(){m.removeElement(this.container.querySelector(".modebar")),m.deleteRelatedStyleRule(this._uid)};function r(n,f){var l=n._fullLayout,o=new i({graphInfo:n,container:l._modebardiv.node(),buttons:f});return l._privateplot&&u.select(o.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),o}z.exports=r},{"../../fonts/ploticon":482,"../../lib":503,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("../color/attributes"),m=e("../../plot_api/plot_template").templatedArray,x=m("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});z.exports={visible:{valType:"boolean",editType:"plot"},buttons:x,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:u({editType:"plot"}),bgcolor:{valType:"color",dflt:s.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:s.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(e,z,N){z.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(e,z,N){var u=e("../../lib"),s=e("../color"),m=e("../../plot_api/plot_template"),x=e("../../plots/array_container_defaults"),t=e("./attributes"),i=e("./constants");z.exports=function(f,l,o,c,h){var d=f.rangeselector||{},p=m.newContainer(l,"rangeselector");function y(_,T){return u.coerce(d,p,t,_,T)}var g=x(d,p,{name:"buttons",handleItemDefaults:a,calendar:h}),A=y("visible",g.length>0);if(A){var b=r(l,o,c);y("x",b[0]),y("y",b[1]),u.noneOrAll(f,l,["x","y"]),y("xanchor"),y("yanchor"),u.coerceFont(y,"font",o.font);var M=y("bgcolor");y("activecolor",s.contrast(M,i.lightAmount,i.darkAmount)),y("bordercolor"),y("borderwidth")}};function a(n,f,l,o){var c=o.calendar;function h(y,g){return u.coerce(n,f,t.buttons,y,g)}var d=h("visible");if(d){var p=h("step");p!=="all"&&(c&&c!=="gregorian"&&(p==="month"||p==="year")?f.stepmode="backward":h("stepmode"),h("count")),h("label")}}function r(n,f,l){for(var o=l.filter(function(p){return f[p].anchor===n._id}),c=0,h=0;h<o.length;h++){var d=f[o[h]].domain;d&&(c=Math.max(d[1],c))}return[n.domain[0],c+i.yPad]}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../plots/plots"),x=e("../color"),t=e("../drawing"),i=e("../../lib"),a=i.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../plots/cartesian/axis_ids"),f=e("../../constants/alignment"),l=f.LINE_SPACING,o=f.FROM_TL,c=f.FROM_BR,h=e("./constants"),d=e("./get_update_object");z.exports=function(v){var L=v._fullLayout,S=L._infolayer.selectAll(".rangeselector").data(p(v),y);S.enter().append("g").classed("rangeselector",!0),S.exit().remove(),S.style({cursor:"pointer","pointer-events":"all"}),S.each(function(k){var P=u.select(this),O=k,F=O.rangeselector,I=P.selectAll("g.button").data(i.filterVisible(F.buttons));I.enter().append("g").classed("button",!0),I.exit().remove(),I.each(function(D){var U=u.select(this),B=d(O,D);D._isActive=g(O,D,B),U.call(A,F,D),U.call(M,F,D,v),U.on("click",function(){v._dragged||s.call("_guiRelayout",v,B)}),U.on("mouseover",function(){D._isHovered=!0,U.call(A,F,D)}),U.on("mouseout",function(){D._isHovered=!1,U.call(A,F,D)})}),T(v,I,F,O._name,P)})};function p(w){for(var v=n.list(w,"x",!0),L=[],S=0;S<v.length;S++){var k=v[S];k.rangeselector&&k.rangeselector.visible&&L.push(k)}return L}function y(w){return w._id}function g(w,v,L){if(v.step==="all")return w.autorange===!0;var S=Object.keys(L);return w.range[0]===L[S[0]]&&w.range[1]===L[S[1]]}function A(w,v,L){var S=i.ensureSingle(w,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});S.attr({rx:h.rx,ry:h.ry}),S.call(x.stroke,v.bordercolor).call(x.fill,b(v,L)).style("stroke-width",v.borderwidth+"px")}function b(w,v){return v._isActive||v._isHovered?w.activecolor:w.bgcolor}function M(w,v,L,S){function k(O){r.convertToTspans(O,S)}var P=i.ensureSingle(w,"text","selector-text",function(O){O.attr("text-anchor","middle")});P.call(t.font,v.font).text(_(L,S._fullLayout._meta)).call(k)}function _(w,v){return w.label?v?i.templateString(w.label,v):w.label:w.step==="all"?"all":w.count+w.step.charAt(0)}function T(w,v,L,S,k){var P=0,O=0,F=L.borderwidth;v.each(function(){var Z=u.select(this),ee=Z.select(".selector-text"),q=L.font.size*l,W=Math.max(q*r.lineCount(ee),16)+3;O=Math.max(O,W)}),v.each(function(){var Z=u.select(this),ee=Z.select(".selector-rect"),q=Z.select(".selector-text"),W=q.node()&&t.bBox(q.node()).width,J=L.font.size*l,le=r.lineCount(q),fe=Math.max(W+10,h.minButtonWidth);Z.attr("transform",a(F+P,F)),ee.attr({x:0,y:0,width:fe,height:O}),r.positionText(q,fe/2,O/2-(le-1)*J/2+3),P+=fe+5});var I=w._fullLayout._size,D=I.l+I.w*L.x,U=I.t+I.h*(1-L.y),B="left";i.isRightAnchor(L)&&(D-=P,B="right"),i.isCenterAnchor(L)&&(D-=P/2,B="center");var j="top";i.isBottomAnchor(L)&&(U-=O,j="bottom"),i.isMiddleAnchor(L)&&(U-=O/2,j="middle"),P=Math.ceil(P),O=Math.ceil(O),D=Math.round(D),U=Math.round(U),m.autoMargin(w,S+"-range-selector",{x:L.x,y:L.y,l:P*o[B],r:P*c[B],b:O*c[j],t:O*o[j]}),k.attr("transform",a(D,U))}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(e,z,N){var u=e("d3-time"),s=e("../../lib").titleCase;z.exports=function(t,i){var a=t._name,r={};if(i.step==="all")r[a+".autorange"]=!0;else{var n=m(t,i);r[a+".range[0]"]=n[0],r[a+".range[1]"]=n[1]}return r};function m(x,t){var i=x.range,a=new Date(x.r2l(i[1])),r=t.step,n=u["utc"+s(r)],f=t.count,l;switch(t.stepmode){case"backward":l=x.l2r(+n.offset(a,-f));break;case"todate":var o=n.offset(a,-f);l=x.l2r(+n.ceil(o));break}var c=i[1];return[l,c]}},{"../../lib":503,"d3-time":122}],437:[function(e,z,N){z.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:e("./attributes")}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(e,z,N){var u=e("../color/attributes");z.exports={bgcolor:{valType:"color",dflt:u.background,editType:"plot"},bordercolor:{valType:"color",dflt:u.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(e,z,N){var u=e("../../plots/cartesian/axis_ids").list,s=e("../../plots/cartesian/autorange").getAutoRange,m=e("./constants");z.exports=function(t){for(var i=u(t,"x",!0),a=0;a<i.length;a++){var r=i[a],n=r[m.name];n&&n.visible&&n.autorange&&(n._input.autorange=!0,n._input.range=n.range=s(t,r))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(e,z,N){z.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(e,z,N){var u=e("../../lib"),s=e("../../plot_api/plot_template"),m=e("../../plots/cartesian/axis_ids"),x=e("./attributes"),t=e("./oppaxis_attributes");z.exports=function(a,r,n){var f=a[n],l=r[n];if(!(f.rangeslider||r._requestRangeslider[l._id]))return;u.isPlainObject(f.rangeslider)||(f.rangeslider={});var o=f.rangeslider,c=s.newContainer(l,"rangeslider");function h(S,k){return u.coerce(o,c,x,S,k)}var d,p;function y(S,k){return u.coerce(d,p,t,S,k)}var g=h("visible");if(!!g){h("bgcolor",r.plot_bgcolor),h("bordercolor"),h("borderwidth"),h("thickness"),h("autorange",!l.isValidRange(o.range)),h("range");var A=r._subplots;if(A)for(var b=A.cartesian.filter(function(S){return S.substr(0,S.indexOf("y"))===m.name2id(n)}).map(function(S){return S.substr(S.indexOf("y"),S.length)}),M=u.simpleMap(b,m.id2name),_=0;_<M.length;_++){var T=M[_];d=o[T]||{},p=s.newContainer(c,T,"yaxis");var w=r[T],v;d.range&&w.isValidRange(d.range)&&(v="fixed");var L=y("rangemode",v);L!=="match"&&y("range",w.range.slice())}c._input=o}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../plots/plots"),x=e("../../lib"),t=x.strTranslate,i=e("../drawing"),a=e("../color"),r=e("../titles"),n=e("../../plots/cartesian"),f=e("../../plots/cartesian/axis_ids"),l=e("../dragelement"),o=e("../../lib/setcursor"),c=e("./constants");z.exports=function(w){for(var v=w._fullLayout,L=v._rangeSliderData,S=0;S<L.length;S++){var k=L[S][c.name];k._clipId=k._id+"-"+v._uid}function P(F){return F._name}var O=v._infolayer.selectAll("g."+c.containerClassName).data(L,P);O.exit().each(function(F){var I=F[c.name];v._topdefs.select("#"+I._clipId).remove()}).remove(),L.length!==0&&(O.enter().append("g").classed(c.containerClassName,!0).attr("pointer-events","all"),O.each(function(F){var I=u.select(this),D=F[c.name],U=v[f.id2name(F.anchor)],B=D[f.id2name(F.anchor)];if(D.range){var j=x.simpleMap(D.range,F.r2l),Z=x.simpleMap(F.range,F.r2l),ee;Z[0]<Z[1]?ee=[Math.min(j[0],Z[0]),Math.max(j[1],Z[1])]:ee=[Math.max(j[0],Z[0]),Math.min(j[1],Z[1])],D.range=D._input.range=x.simpleMap(ee,F.l2r)}F.cleanRange("rangeslider.range");var q=v._size,W=F.domain;D._width=q.w*(W[1]-W[0]);var J=Math.round(q.l+q.w*W[0]),le=Math.round(q.t+q.h*(1-F._counterDomainMin)+(F.side==="bottom"?F._depth:0)+D._offsetShift+c.extraPad);I.attr("transform",t(J,le)),D._rl=x.simpleMap(D.range,F.r2l);var fe=D._rl[0],se=D._rl[1],H=se-fe;if(D.p2d=function(ye){return ye/D._width*H+fe},D.d2p=function(ye){return(ye-fe)/H*D._width},F.rangebreaks){var Y=F.locateBreaks(fe,se);if(Y.length){var ne,te,K=0;for(ne=0;ne<Y.length;ne++)te=Y[ne],K+=te.max-te.min;var $=D._width/(se-fe-K),ae=[-$*fe];for(ne=0;ne<Y.length;ne++)te=Y[ne],ae.push(ae[ae.length-1]-$*(te.max-te.min));for(D.d2p=function(ye){for(var ce=ae[0],me=0;me<Y.length;me++){var xe=Y[me];if(ye>=xe.max)ce=ae[me+1];else if(ye<xe.min)break}return ce+$*ye},ne=0;ne<Y.length;ne++)te=Y[ne],te.pmin=D.d2p(te.min),te.pmax=D.d2p(te.max);D.p2d=function(ye){for(var ce=ae[0],me=0;me<Y.length;me++){var xe=Y[me];if(ye>=xe.pmax)ce=ae[me+1];else if(ye<xe.pmin)break}return(ye-ce)/$}}}if(B.rangemode!=="match"){var ie=U.r2l(B.range[0]),oe=U.r2l(B.range[1]),ue=oe-ie;D.d2pOppAxis=function(ye){return(ye-ie)/ue*D._height}}I.call(y,w,F,D).call(g,w,F,D).call(A,w,F,D).call(M,w,F,D,B).call(_,w,F,D).call(T,w,F,D),h(I,w,F,D),p(I,w,F,D,U,B),F.side==="bottom"&&r.draw(w,F._id+"title",{propContainer:F,propName:F._name+".title",placeholder:v._dfltTitle.x,attributes:{x:F._offset+F._length/2,y:le+D._height+D._offsetShift+10+1.5*F.title.font.size,"text-anchor":"middle"}})}))};function h(w,v,L,S){if(v._context.staticPlot)return;var k=w.select("rect."+c.slideBoxClassName).node(),P=w.select("rect."+c.grabAreaMinClassName).node(),O=w.select("rect."+c.grabAreaMaxClassName).node();function F(){var I=u.event,D=I.target,U=I.clientX||I.touches[0].clientX,B=U-w.node().getBoundingClientRect().left,j=S.d2p(L._rl[0]),Z=S.d2p(L._rl[1]),ee=l.coverSlip();this.addEventListener("touchmove",q),this.addEventListener("touchend",W),ee.addEventListener("mousemove",q),ee.addEventListener("mouseup",W);function q(J){var le=J.clientX||J.touches[0].clientX,fe=+le-U,se,H,Y;switch(D){case k:Y="ew-resize",se=j+fe,H=Z+fe;break;case P:Y="col-resize",se=j+fe,H=Z;break;case O:Y="col-resize",se=j,H=Z+fe;break;default:Y="ew-resize",se=B,H=B+fe;break}if(H<se){var ne=H;H=se,se=ne}S._pixelMin=se,S._pixelMax=H,o(u.select(ee),Y),d(w,v,L,S)}function W(){ee.removeEventListener("mousemove",q),ee.removeEventListener("mouseup",W),this.removeEventListener("touchmove",q),this.removeEventListener("touchend",W),x.removeElement(ee)}}w.on("mousedown",F),w.on("touchstart",F)}function d(w,v,L,S){function k(F){return L.l2r(x.constrain(F,S._rl[0],S._rl[1]))}var P=k(S.p2d(S._pixelMin)),O=k(S.p2d(S._pixelMax));window.requestAnimationFrame(function(){s.call("_guiRelayout",v,L._name+".range",[P,O])})}function p(w,v,L,S,k,P){var O=c.handleWidth/2;function F(J){return x.constrain(J,0,S._width)}function I(J){return x.constrain(J,0,S._height)}function D(J){return x.constrain(J,-O,S._width+O)}var U=F(S.d2p(L._rl[0])),B=F(S.d2p(L._rl[1]));if(w.select("rect."+c.slideBoxClassName).attr("x",U).attr("width",B-U),w.select("rect."+c.maskMinClassName).attr("width",U),w.select("rect."+c.maskMaxClassName).attr("x",B).attr("width",S._width-B),P.rangemode!=="match"){var j=S._height-I(S.d2pOppAxis(k._rl[1])),Z=S._height-I(S.d2pOppAxis(k._rl[0]));w.select("rect."+c.maskMinOppAxisClassName).attr("x",U).attr("height",j).attr("width",B-U),w.select("rect."+c.maskMaxOppAxisClassName).attr("x",U).attr("y",Z).attr("height",S._height-Z).attr("width",B-U),w.select("rect."+c.slideBoxClassName).attr("y",j).attr("height",Z-j)}var ee=.5,q=Math.round(D(U-O))-ee,W=Math.round(D(B-O))+ee;w.select("g."+c.grabberMinClassName).attr("transform",t(q,ee)),w.select("g."+c.grabberMaxClassName).attr("transform",t(W,ee))}function y(w,v,L,S){var k=x.ensureSingle(w,"rect",c.bgClassName,function(I){I.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=S.borderwidth%2==0?S.borderwidth:S.borderwidth-1,O=-S._offsetShift,F=i.crispRound(v,S.borderwidth);k.attr({width:S._width+P,height:S._height+P,transform:t(O,O),fill:S.bgcolor,stroke:S.bordercolor,"stroke-width":F})}function g(w,v,L,S){var k=v._fullLayout,P=x.ensureSingleById(k._topdefs,"clipPath",S._clipId,function(O){O.append("rect").attr({x:0,y:0})});P.select("rect").attr({width:S._width,height:S._height})}function A(w,v,L,S){var k=v.calcdata,P=w.selectAll("g."+c.rangePlotClassName).data(L._subplotsWith,x.identity);P.enter().append("g").attr("class",function(F){return c.rangePlotClassName+" "+F}).call(i.setClipUrl,S._clipId,v),P.order(),P.exit().remove();var O;P.each(function(F,I){var D=u.select(this),U=I===0,B=f.getFromId(v,F,"y"),j=B._name,Z=S[j],ee={data:[],layout:{xaxis:{type:L.type,domain:[0,1],range:S.range.slice(),calendar:L.calendar},width:S._width,height:S._height,margin:{t:0,b:0,l:0,r:0}},_context:v._context};L.rangebreaks&&(ee.layout.xaxis.rangebreaks=L.rangebreaks),ee.layout[j]={type:B.type,domain:[0,1],range:Z.rangemode!=="match"?Z.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(ee.layout[j].rangebreaks=B.rangebreaks),m.supplyDefaults(ee);var q=ee._fullLayout.xaxis,W=ee._fullLayout[j];q.clearCalc(),q.setScale(),W.clearCalc(),W.setScale();var J={id:F,plotgroup:D,xaxis:q,yaxis:W,isRangePlot:!0};U?O=J:(J.mainplot="xy",J.mainplotinfo=O),n.rangePlot(v,J,b(k,F))})}function b(w,v){for(var L=[],S=0;S<w.length;S++){var k=w[S],P=k[0].trace;P.xaxis+P.yaxis===v&&L.push(k)}return L}function M(w,v,L,S,k){var P=x.ensureSingle(w,"rect",c.maskMinClassName,function(D){D.attr({x:0,y:0,"shape-rendering":"crispEdges"})});P.attr("height",S._height).call(a.fill,c.maskColor);var O=x.ensureSingle(w,"rect",c.maskMaxClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});if(O.attr("height",S._height).call(a.fill,c.maskColor),k.rangemode!=="match"){var F=x.ensureSingle(w,"rect",c.maskMinOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});F.attr("width",S._width).call(a.fill,c.maskOppAxisColor);var I=x.ensureSingle(w,"rect",c.maskMaxOppAxisClassName,function(D){D.attr({y:0,"shape-rendering":"crispEdges"})});I.attr("width",S._width).style("border-top",c.maskOppBorder).call(a.fill,c.maskOppAxisColor)}}function _(w,v,L,S){if(!v._context.staticPlot){var k=x.ensureSingle(w,"rect",c.slideBoxClassName,function(P){P.attr({y:0,cursor:c.slideBoxCursor,"shape-rendering":"crispEdges"})});k.attr({height:S._height,fill:c.slideBoxFill})}}function T(w,v,L,S){var k=x.ensureSingle(w,"g",c.grabberMinClassName),P=x.ensureSingle(w,"g",c.grabberMaxClassName),O={x:0,width:c.handleWidth,rx:c.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":c.handleStrokeWidth,"shape-rendering":"crispEdges"},F={y:Math.round(S._height/4),height:Math.round(S._height/2)},I=x.ensureSingle(k,"rect",c.handleMinClassName,function(Z){Z.attr(O)});I.attr(F);var D=x.ensureSingle(P,"rect",c.handleMaxClassName,function(Z){Z.attr(O)});D.attr(F);var U={width:c.grabAreaWidth,x:0,y:0,fill:c.grabAreaFill,cursor:v._context.staticPlot?void 0:c.grabAreaCursor},B=x.ensureSingle(k,"rect",c.grabAreaMinClassName,function(Z){Z.attr(U)});B.attr("height",S._height);var j=x.ensureSingle(P,"rect",c.grabAreaMaxClassName,function(Z){Z.attr(U)});j.attr("height",S._height)}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(e,z,N){var u=e("../../plots/cartesian/axis_ids"),s=e("../../lib/svg_text_utils"),m=e("./constants"),x=e("../../constants/alignment").LINE_SPACING,t=m.name;function i(a){var r=a&&a[t];return r&&r.visible}N.isVisible=i,N.makeData=function(a){var r=u.list({_fullLayout:a},"x",!0),n=a.margin,f=[];if(!a._has("gl2d"))for(var l=0;l<r.length;l++){var o=r[l];if(i(o)){f.push(o);var c=o[t];c._id=t+o._id,c._height=(a.height-n.b-n.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}a._rangeSliderData=f},N.autoMarginOpts=function(a,r){var n=a._fullLayout,f=r[t],l=r._id.charAt(0),o=0,c=0;if(r.side==="bottom"&&(o=r._depth,r.title.text!==n._dfltTitle[l])){c=1.5*r.title.font.size+10+f._offsetShift;var h=(r.title.text.match(s.BR_TAG_ALL)||[]).length;c+=h*r.title.font.size*x}return{x:0,y:r._counterDomainMin,l:0,r:0,t:0,b:f._height+o+Math.max(n.margin.b,c),pad:m.extraPad+f._offsetShift*2}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("./oppaxis_attributes"),x=e("./helpers");z.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:u.extendFlat({},s,{yaxis:m})}}},layoutAttributes:e("./attributes"),handleDefaults:e("./defaults"),calcAutorange:e("./calc_autorange"),draw:e("./draw"),isVisible:x.isVisible,makeData:x.makeData,autoMarginOpts:x.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(e,z,N){z.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(e,z,N){var u=e("../annotations/attributes"),s=e("../../traces/scatter/attributes").line,m=e("../drawing/attributes").dash,x=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray;e("../../constants/axis_placeable_objects"),z.exports=t("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:x({},u.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:x({},u.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:x({},s.color,{editType:"arraydraw"}),width:x({},s.width,{editType:"calc+arraydraw"}),dash:x({},m,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("./constants"),x=e("./helpers");z.exports=function(f){var l=f._fullLayout,o=u.filterVisible(l.shapes);if(!(!o.length||!f._fullData.length))for(var c=0;c<o.length;c++){var h=o[c];h._extremes={};var d,p,y=s.getRefType(h.xref),g=s.getRefType(h.yref);if(h.xref!=="paper"&&y!=="domain"){var A=h.xsizemode==="pixel"?h.xanchor:h.x0,b=h.xsizemode==="pixel"?h.xanchor:h.x1;d=s.getFromId(f,h.xref),p=r(d,A,b,h.path,m.paramIsX),p&&(h._extremes[d._id]=s.findExtremes(d,p,t(h)))}if(h.yref!=="paper"&&g!=="domain"){var M=h.ysizemode==="pixel"?h.yanchor:h.y0,_=h.ysizemode==="pixel"?h.yanchor:h.y1;d=s.getFromId(f,h.yref),p=r(d,M,_,h.path,m.paramIsY),p&&(h._extremes[d._id]=s.findExtremes(d,p,i(h)))}}};function t(n){return a(n.line.width,n.xsizemode,n.x0,n.x1,n.path,!1)}function i(n){return a(n.line.width,n.ysizemode,n.y0,n.y1,n.path,!0)}function a(n,f,l,o,c,h){var d=n/2,p=h;if(f==="pixel"){var y=c?x.extractPathCoords(c,h?m.paramIsY:m.paramIsX):[l,o],g=u.aggNums(Math.max,null,y),A=u.aggNums(Math.min,null,y),b=A<0?Math.abs(A)+d:d,M=g>0?g+d:d;return{ppad:d,ppadplus:p?b:M,ppadminus:p?M:b}}else return{ppad:d}}function r(n,f,l,o,c){var h=n.type==="category"||n.type==="multicategory"?n.r2c:n.d2c;if(f!==void 0)return[h(f),h(l)];if(!!o){var d=1/0,p=-1/0,y=o.match(m.segmentRE),g,A,b,M,_;for(n.type==="date"&&(h=x.decodeDate(h)),g=0;g<y.length;g++)A=y[g],b=c[A.charAt(0)].drawn,b!==void 0&&(M=y[g].substr(1).match(m.paramRE),!(!M||M.length<b)&&(_=h(M[b]),_<d&&(d=_),_>p&&(p=_)));if(p>=d)return[d,p]}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(e,z,N){z.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/array_container_defaults"),x=e("./attributes"),t=e("./helpers");z.exports=function(r,n){m(r,n,{name:"shapes",handleItemDefaults:i})};function i(a,r,n){function f(j,Z){return u.coerce(a,r,x,j,Z)}var l=f("visible");if(!!l){var o=f("path"),c=o?"path":"rect",h=f("type",c);r.type!=="path"&&delete r.path,f("editable"),f("layer"),f("opacity"),f("fillcolor"),f("fillrule");var d=f("line.width");d&&(f("line.color"),f("line.dash"));for(var p=f("xsizemode"),y=f("ysizemode"),g=["x","y"],A=0;A<2;A++){var b=g[A],M=b+"anchor",_=b==="x"?p:y,T={_fullLayout:n},w,v,L,S=s.coerceRef(a,r,T,b,void 0,"paper"),k=s.getRefType(S);if(k==="range"?(w=s.getFromId(T,S),w._shapeIndices.push(r._index),L=t.rangeToShapePosition(w),v=t.shapePositionToRange(w)):v=L=u.identity,h!=="path"){var P=.25,O=.75,F=b+"0",I=b+"1",D=a[F],U=a[I];a[F]=v(a[F],!0),a[I]=v(a[I],!0),_==="pixel"?(f(F,0),f(I,10)):(s.coercePosition(r,T,f,S,F,P),s.coercePosition(r,T,f,S,I,O)),r[F]=L(r[F]),r[I]=L(r[I]),a[F]=D,a[I]=U}if(_==="pixel"){var B=a[M];a[M]=v(a[M],!0),s.coercePosition(r,T,f,S,M,.25),r[M]=L(r[M]),a[M]=B}}h==="path"?f("path"):u.noneOrAll(a,r,["x0","x1","y0","y1"])}}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("./draw_newshape/helpers").readPaths,t=e("./draw_newshape/display_outlines"),i=e("../../plots/cartesian/handle_outline").clearOutlineControllers,a=e("../color"),r=e("../drawing"),n=e("../../plot_api/plot_template").arrayEditor,f=e("../dragelement"),l=e("../../lib/setcursor"),o=e("./constants"),c=e("./helpers");z.exports={draw:h,drawOne:y,eraseActiveShape:v};function h(L){var S=L._fullLayout;S._shapeUpperLayer.selectAll("path").remove(),S._shapeLowerLayer.selectAll("path").remove();for(var k in S._plots){var P=S._plots[k].shapelayer;P&&P.selectAll("path").remove()}for(var O=0;O<S.shapes.length;O++)S.shapes[O].visible&&y(L,O)}function d(L){return!!L._fullLayout._drawing}function p(L){return!L._context.edits.shapePosition}function y(L,S){L._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+S+'"]').remove();var k=c.makeOptionsAndPlotinfo(L,S),P=k.options,O=k.plotinfo;if(!P._input||P.visible===!1)return;if(P.layer!=="below")I(L._fullLayout._shapeUpperLayer);else if(P.xref==="paper"||P.yref==="paper")I(L._fullLayout._shapeLowerLayer);else if(O._hadPlotinfo){var F=O.mainplotinfo||O;I(F.shapelayer)}else I(L._fullLayout._shapeLowerLayer);function I(D){var U=b(L,P),B={"data-index":S,"fill-rule":P.fillrule,d:U},j=P.opacity,Z=P.fillcolor,ee=P.line.width?P.line.color:"rgba(0,0,0,0)",q=P.line.width,W=P.line.dash;!q&&P.editable===!0&&(q=5,W="solid");var J=U[U.length-1]!=="Z",le=p(L)&&P.editable&&L._fullLayout._activeShapeIndex===S;le&&(Z=J?"rgba(0,0,0,0)":L._fullLayout.activeshape.fillcolor,j=L._fullLayout.activeshape.opacity);var fe=D.append("path").attr(B).style("opacity",j).call(a.stroke,ee).call(a.fill,Z).call(r.dashLine,W,q);g(fe,L,P);var se;if((le||L._context.edits.shapePosition)&&(se=n(L.layout,"shapes",P)),le){fe.style({cursor:"move"});var H={element:fe.node(),plotinfo:O,gd:L,editHelpers:se,isActiveShape:!0},Y=x(U,L);t(Y,fe,H)}else L._context.edits.shapePosition?A(L,fe,P,S,D,se):P.editable===!0&&fe.style("pointer-events",J||a.opacity(Z)*j<=.5?"stroke":"all");fe.node().addEventListener("click",function(){return T(L,fe)})}}function g(L,S,k){var P=(k.xref+k.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");r.setClipUrl(L,P?"clip"+S._fullLayout._uid+P:null,S)}function A(L,S,k,P,O,F){var I=10,D=10,U=k.xsizemode==="pixel",B=k.ysizemode==="pixel",j=k.type==="line",Z=k.type==="path",ee=F.modifyItem,q,W,J,le,fe,se,H,Y,ne,te,K,$,ae,ie,oe,ue=m.getFromId(L,k.xref),ye=m.getRefType(k.xref),ce=m.getFromId(L,k.yref),me=m.getRefType(k.yref),xe=c.getDataToPixel(L,ue,!1,ye),ke=c.getDataToPixel(L,ce,!0,me),Ae=c.getPixelToData(L,ue,!1,ye),Oe=c.getPixelToData(L,ce,!0,me),He=Re(),Ge={element:He.node(),gd:L,prepFn:Ue,doneFn:Ie,clickFn:Ve},_e;f.init(Ge),He.node().onmousemove=qe;function Re(){return j?We():S}function We(){var Bt=10,Lt=Math.max(k.line.width,Bt),Mt=O.append("g").attr("data-index",P);Mt.append("path").attr("d",S.attr("d")).style({cursor:"move","stroke-width":Lt,"stroke-opacity":"0"});var it={"fill-opacity":"0"},ht=Math.max(Lt/2,Bt);return Mt.append("circle").attr({"data-line-point":"start-point",cx:U?xe(k.xanchor)+k.x0:xe(k.x0),cy:B?ke(k.yanchor)-k.y0:ke(k.y0),r:ht}).style(it).classed("cursor-grab",!0),Mt.append("circle").attr({"data-line-point":"end-point",cx:U?xe(k.xanchor)+k.x1:xe(k.x1),cy:B?ke(k.yanchor)-k.y1:ke(k.y1),r:ht}).style(it).classed("cursor-grab",!0),Mt}function qe(Bt){if(d(L)){_e=null;return}if(j)Bt.target.tagName==="path"?_e="move":_e=Bt.target.attributes["data-line-point"].value==="start-point"?"resize-over-start-point":"resize-over-end-point";else{var Lt=Ge.element.getBoundingClientRect(),Mt=Lt.right-Lt.left,it=Lt.bottom-Lt.top,ht=Bt.clientX-Lt.left,Qe=Bt.clientY-Lt.top,Ce=!Z&&Mt>I&&it>D&&!Bt.shiftKey?f.getCursor(ht/Mt,1-Qe/it):"move";l(S,Ce),_e=Ce.split("-")[0]}}function Ue(Bt){d(L)||(U&&(fe=xe(k.xanchor)),B&&(se=ke(k.yanchor)),k.type==="path"?oe=k.path:(q=U?k.x0:xe(k.x0),W=B?k.y0:ke(k.y0),J=U?k.x1:xe(k.x1),le=B?k.y1:ke(k.y1)),q<J?(ne=q,ae="x0",te=J,ie="x1"):(ne=J,ae="x1",te=q,ie="x0"),!B&&W<le||B&&W>le?(H=W,K="y0",Y=le,$="y1"):(H=le,K="y1",Y=W,$="y0"),qe(Bt),Gt(O,k),zt(S,k,L),Ge.moveFn=_e==="move"?dt:Rt,Ge.altKey=Bt.altKey)}function Ie(){d(L)||(l(S),kt(O),g(S,L,k),u.call("_guiRelayout",L,F.getUpdateObj()))}function Ve(){d(L)||kt(O)}function dt(Bt,Lt){if(k.type==="path"){var Mt=function(Qe){return Qe},it=Mt,ht=Mt;U?ee("xanchor",k.xanchor=Ae(fe+Bt)):(it=function(Ce){return Ae(xe(Ce)+Bt)},ue&&ue.type==="date"&&(it=c.encodeDate(it))),B?ee("yanchor",k.yanchor=Oe(se+Lt)):(ht=function(Ce){return Oe(ke(Ce)+Lt)},ce&&ce.type==="date"&&(ht=c.encodeDate(ht))),ee("path",k.path=_(oe,it,ht))}else U?ee("xanchor",k.xanchor=Ae(fe+Bt)):(ee("x0",k.x0=Ae(q+Bt)),ee("x1",k.x1=Ae(J+Bt))),B?ee("yanchor",k.yanchor=Oe(se+Lt)):(ee("y0",k.y0=Oe(W+Lt)),ee("y1",k.y1=Oe(le+Lt)));S.attr("d",b(L,k)),Gt(O,k)}function Rt(Bt,Lt){if(Z){var Mt=function(Et){return Et},it=Mt,ht=Mt;U?ee("xanchor",k.xanchor=Ae(fe+Bt)):(it=function(rr){return Ae(xe(rr)+Bt)},ue&&ue.type==="date"&&(it=c.encodeDate(it))),B?ee("yanchor",k.yanchor=Oe(se+Lt)):(ht=function(rr){return Oe(ke(rr)+Lt)},ce&&ce.type==="date"&&(ht=c.encodeDate(ht))),ee("path",k.path=_(oe,it,ht))}else if(j){if(_e==="resize-over-start-point"){var Qe=q+Bt,Ce=B?W-Lt:W+Lt;ee("x0",k.x0=U?Qe:Ae(Qe)),ee("y0",k.y0=B?Ce:Oe(Ce))}else if(_e==="resize-over-end-point"){var Xe=J+Bt,rt=B?le-Lt:le+Lt;ee("x1",k.x1=U?Xe:Ae(Xe)),ee("y1",k.y1=B?rt:Oe(rt))}}else{var ut=function(Et){return _e.indexOf(Et)!==-1},Pt=ut("n"),St=ut("s"),Nt=ut("w"),jt=ut("e"),Ot=Pt?H+Lt:H,Kt=St?Y+Lt:Y,Je=Nt?ne+Bt:ne,gt=jt?te+Bt:te;B&&(Pt&&(Ot=H-Lt),St&&(Kt=Y-Lt)),(!B&&Kt-Ot>D||B&&Ot-Kt>D)&&(ee(K,k[K]=B?Ot:Oe(Ot)),ee($,k[$]=B?Kt:Oe(Kt))),gt-Je>I&&(ee(ae,k[ae]=U?Je:Ae(Je)),ee(ie,k[ie]=U?gt:Ae(gt)))}S.attr("d",b(L,k)),Gt(O,k)}function Gt(Bt,Lt){(U||B)&&Mt();function Mt(){var it=Lt.type!=="path",ht=Bt.selectAll(".visual-cue").data([0]),Qe=1;ht.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":Qe}).classed("visual-cue",!0);var Ce=xe(U?Lt.xanchor:s.midRange(it?[Lt.x0,Lt.x1]:c.extractPathCoords(Lt.path,o.paramIsX))),Xe=ke(B?Lt.yanchor:s.midRange(it?[Lt.y0,Lt.y1]:c.extractPathCoords(Lt.path,o.paramIsY)));if(Ce=c.roundPositionForSharpStrokeRendering(Ce,Qe),Xe=c.roundPositionForSharpStrokeRendering(Xe,Qe),U&&B){var rt="M"+(Ce-1-Qe)+","+(Xe-1-Qe)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z";ht.attr("d",rt)}else if(U){var ut="M"+(Ce-1-Qe)+","+(Xe-9-Qe)+"v18 h2 v-18 Z";ht.attr("d",ut)}else{var Pt="M"+(Ce-9-Qe)+","+(Xe-1-Qe)+"h18 v2 h-18 Z";ht.attr("d",Pt)}}}function kt(Bt){Bt.selectAll(".visual-cue").remove()}function zt(Bt,Lt,Mt){var it=Lt.xref,ht=Lt.yref,Qe=m.getFromId(Mt,it),Ce=m.getFromId(Mt,ht),Xe="";it!=="paper"&&!Qe.autorange&&(Xe+=it),ht!=="paper"&&!Ce.autorange&&(Xe+=ht),r.setClipUrl(Bt,Xe?"clip"+Mt._fullLayout._uid+Xe:null,Mt)}}function b(L,S){var k=S.type,P=m.getRefType(S.xref),O=m.getRefType(S.yref),F=m.getFromId(L,S.xref),I=m.getFromId(L,S.yref),D=L._fullLayout._size,U,B,j,Z,ee,q,W,J;if(F?P==="domain"?B=function(ae){return F._offset+F._length*ae}:(U=c.shapePositionToRange(F),B=function(ae){return F._offset+F.r2p(U(ae,!0))}):B=function(ae){return D.l+D.w*ae},I?O==="domain"?Z=function(ae){return I._offset+I._length*(1-ae)}:(j=c.shapePositionToRange(I),Z=function(ae){return I._offset+I.r2p(j(ae,!0))}):Z=function(ae){return D.t+D.h*(1-ae)},k==="path")return F&&F.type==="date"&&(B=c.decodeDate(B)),I&&I.type==="date"&&(Z=c.decodeDate(Z)),M(S,B,Z);if(S.xsizemode==="pixel"){var le=B(S.xanchor);ee=le+S.x0,q=le+S.x1}else ee=B(S.x0),q=B(S.x1);if(S.ysizemode==="pixel"){var fe=Z(S.yanchor);W=fe-S.y0,J=fe-S.y1}else W=Z(S.y0),J=Z(S.y1);if(k==="line")return"M"+ee+","+W+"L"+q+","+J;if(k==="rect")return"M"+ee+","+W+"H"+q+"V"+J+"H"+ee+"Z";var se=(ee+q)/2,H=(W+J)/2,Y=Math.abs(se-ee),ne=Math.abs(H-W),te="A"+Y+","+ne,K=se+Y+","+H,$=se+","+(H-ne);return"M"+K+te+" 0 1,1 "+$+te+" 0 0,1 "+K+"Z"}function M(L,S,k){var P=L.path,O=L.xsizemode,F=L.ysizemode,I=L.xanchor,D=L.yanchor;return P.replace(o.segmentRE,function(U){var B=0,j=U.charAt(0),Z=o.paramIsX[j],ee=o.paramIsY[j],q=o.numParams[j],W=U.substr(1).replace(o.paramRE,function(J){return Z[B]?O==="pixel"?J=S(I)+Number(J):J=S(J):ee[B]&&(F==="pixel"?J=k(D)-Number(J):J=k(J)),B++,B>q&&(J="X"),J});return B>q&&(W=W.replace(/[\s,]*X.*/,""),s.log("Ignoring extra params in segment "+U)),j+W})}function _(L,S,k){return L.replace(o.segmentRE,function(P){var O=0,F=P.charAt(0),I=o.paramIsX[F],D=o.paramIsY[F],U=o.numParams[F],B=P.substr(1).replace(o.paramRE,function(j){return O>=U||(I[O]?j=S(j):D[O]&&(j=k(j)),O++),j});return F+B})}function T(L,S){if(!!p(L)){var k=S.node(),P=+k.getAttribute("data-index");if(P>=0){if(P===L._fullLayout._activeShapeIndex){w(L);return}L._fullLayout._activeShapeIndex=P,L._fullLayout._deactivateShape=w,h(L)}}}function w(L){if(!!p(L)){var S=L._fullLayout._activeShapeIndex;S>=0&&(i(L),delete L._fullLayout._activeShapeIndex,h(L))}}function v(L){if(!!p(L)){i(L);var S=L._fullLayout._activeShapeIndex,k=(L.layout||{}).shapes||[];if(S<k.length){for(var P=[],O=0;O<k.length;O++)O!==S&&P.push(k[O]);delete L._fullLayout._activeShapeIndex,u.call("_guiRelayout",L,{shapes:P})}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(e,z,N){var u=e("../../drawing/attributes").dash,s=e("../../../lib/extend").extendFlat;z.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:s({},u,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(e,z,N){var u=32;z.exports={CIRCLE_SIDES:u,i000:0,i090:u/4,i180:u/2,i270:u/4*3,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(e,z,N){var u=e("../../color");z.exports=function(m,x,t){t("newshape.drawdirection"),t("newshape.layer"),t("newshape.fillcolor"),t("newshape.fillrule"),t("newshape.opacity");var i=t("newshape.line.width");if(i){var a=(m||{}).plot_bgcolor||"#FFF";t("newshape.line.color",u.contrast(a)),t("newshape.line.dash")}t("activeshape.fillcolor"),t("activeshape.opacity")}},{"../../color":366}],454:[function(e,z,N){var u=e("../../dragelement"),s=e("../../dragelement/helpers"),m=s.drawMode,x=e("../../../registry"),t=e("./constants"),i=t.i000,a=t.i090,r=t.i180,n=t.i270,f=e("../../../plots/cartesian/handle_outline"),l=f.clearOutlineControllers,o=e("./helpers"),c=o.pointsShapeRectangle,h=o.pointsShapeEllipse,d=o.writePaths,p=e("./newshapes");z.exports=function g(A,b,M,_){_||(_=0);var T=M.gd;function w(){g(A,b,M,_++),h(A[0])&&v({redrawing:!0})}function v(te){M.isActiveShape=!1;var K=p(b,M);Object.keys(K).length&&x.call((te||{}).redrawing?"relayout":"_guiRelayout",T,K)}var L=M.isActiveShape,S=T._fullLayout,k=S._zoomlayer,P=M.dragmode,O=m(P);O?T._fullLayout._drawing=!0:T._fullLayout._activeShapeIndex>=0&&l(T),b.attr("d",d(A));var F,I,D,U,B;if(L&&!_){B=y([],A);var j=k.append("g").attr("class","outline-controllers");le(j),ne()}function Z(te){D=+te.srcElement.getAttribute("data-i"),U=+te.srcElement.getAttribute("data-j"),F[D][U].moveFn=ee}function ee(te,K){if(!!A.length){var $=B[D][U][1],ae=B[D][U][2],ie=A[D],oe=ie.length;if(c(ie)){for(var ue=0;ue<oe;ue++)if(ue!==U){var ye=ie[ue];ye[1]===ie[U][1]&&(ye[1]=$+te),ye[2]===ie[U][2]&&(ye[2]=ae+K)}if(ie[U][1]=$+te,ie[U][2]=ae+K,!c(ie))for(var ce=0;ce<oe;ce++)for(var me=0;me<ie[ce].length;me++)ie[ce][me]=B[D][ce][me]}else ie[U][1]=$+te,ie[U][2]=ae+K;w()}}function q(){v()}function W(){if(!!A.length&&!!A[D]&&!!A[D].length){for(var te=[],K=0;K<A[D].length;K++)K!==U&&te.push(A[D][K]);te.length>1&&!(te.length===2&&te[1][0]==="Z")&&(U===0&&(te[0][0]="M"),A[D]=te,w(),v())}}function J(te,K){if(te===2){D=+K.srcElement.getAttribute("data-i"),U=+K.srcElement.getAttribute("data-j");var $=A[D];!c($)&&!h($)&&W()}}function le(te){F=[];for(var K=0;K<A.length;K++){var $=A[K],ae=c($),ie=!ae&&h($);F[K]=[];for(var oe=0;oe<$.length;oe++)if($[oe][0]!=="Z"&&!(ie&&oe!==i&&oe!==a&&oe!==r&&oe!==n)){var ue=$[oe][1],ye=$[oe][2],ce=te.append("circle").classed("cursor-grab",!0).attr("data-i",K).attr("data-j",oe).attr("cx",ue).attr("cy",ye).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});F[K][oe]={element:ce.node(),gd:T,prepFn:Z,doneFn:q,clickFn:J},u.init(F[K][oe])}}}function fe(te,K){if(!!A.length)for(var $=0;$<A.length;$++)for(var ae=0;ae<A[$].length;ae++)for(var ie=0;ie+2<A[$][ae].length;ie+=2)A[$][ae][ie+1]=B[$][ae][ie+1]+te,A[$][ae][ie+2]=B[$][ae][ie+2]+K}function se(te,K){fe(te,K),w()}function H(te){D=+te.srcElement.getAttribute("data-i"),D||(D=0),I[D].moveFn=se}function Y(){v()}function ne(){if(I=[],!!A.length){var te=0;I[te]={element:b[0][0],gd:T,prepFn:H,doneFn:Y},u.init(I[te])}}};function y(g,A){for(var b=0;b<A.length;b++){var M=A[b];g[b]=[];for(var _=0;_<M.length;_++){g[b][_]=[];for(var T=0;T<M[_].length;T++)g[b][_][T]=M[_][T]}}return g}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(e,z,N){var u=e("parse-svg-path"),s=e("./constants"),m=s.CIRCLE_SIDES,x=s.SQRT2,t=e("../../../plots/cartesian/helpers"),i=t.p2r,a=t.r2p,r=[0,3,4,5,6,1,2],n=[0,3,4,1,2];N.writePaths=function(o){var c=o.length;if(!c)return"M0,0Z";for(var h="",d=0;d<c;d++)for(var p=o[d].length,y=0;y<p;y++){var g=o[d][y][0];if(g==="Z")h+="Z";else for(var A=o[d][y].length,b=0;b<A;b++){var M=b;g==="Q"||g==="S"?M=n[b]:g==="C"&&(M=r[b]),h+=o[d][y][M],b>0&&b<A-1&&(h+=",")}}return h},N.readPaths=function(o,c,h,d){var p=u(o),y=[],g=-1,A=function(){g++,y[g]=[]},b,M=0,_=0,T,w,v=function(){T=M,w=_};v();for(var L=0;L<p.length;L++){var S=[],k,P,O,F,I=p[L][0],D=I;switch(I){case"M":A(),M=+p[L][1],_=+p[L][2],S.push([D,M,_]),v();break;case"Q":case"S":k=+p[L][1],O=+p[L][2],M=+p[L][3],_=+p[L][4],S.push([D,M,_,k,O]);break;case"C":k=+p[L][1],O=+p[L][2],P=+p[L][3],F=+p[L][4],M=+p[L][5],_=+p[L][6],S.push([D,M,_,k,O,P,F]);break;case"T":case"L":M=+p[L][1],_=+p[L][2],S.push([D,M,_]);break;case"H":D="L",M=+p[L][1],S.push([D,M,_]);break;case"V":D="L",_=+p[L][1],S.push([D,M,_]);break;case"A":D="L";var U=+p[L][1],B=+p[L][2];+p[L][4]||(U=-U,B=-B);var j=M-U,Z=_;for(b=1;b<=m/2;b++){var ee=2*Math.PI*b/m;S.push([D,j+U*Math.cos(ee),Z+B*Math.sin(ee)])}break;case"Z":(M!==T||_!==w)&&(M=T,_=w,S.push([D,M,_]));break}for(var q=(h||{}).domain,W=c._fullLayout._size,J=h&&h.xsizemode==="pixel",le=h&&h.ysizemode==="pixel",fe=d===!1,se=0;se<S.length;se++){for(b=0;b+2<7;b+=2){var H=S[se][b+1],Y=S[se][b+2];H===void 0||Y===void 0||(M=H,_=Y,h&&(h.xaxis&&h.xaxis.p2r?(fe&&(H-=h.xaxis._offset),J?H=a(h.xaxis,h.xanchor)+H:H=i(h.xaxis,H)):(fe&&(H-=W.l),q?H=q.x[0]+H/W.w:H=H/W.w),h.yaxis&&h.yaxis.p2r?(fe&&(Y-=h.yaxis._offset),le?Y=a(h.yaxis,h.yanchor)-Y:Y=i(h.yaxis,Y)):(fe&&(Y-=W.t),q?Y=q.y[1]-Y/W.h:Y=1-Y/W.h)),S[se][b+1]=H,S[se][b+2]=Y)}y[g].push(S[se].slice())}}return y};function f(o,c){return Math.abs(o-c)<=1e-6}function l(o,c){var h=c[1]-o[1],d=c[2]-o[2];return Math.sqrt(h*h+d*d)}N.pointsShapeRectangle=function(o){var c=o.length;if(c!==5)return!1;for(var h=1;h<3;h++){var d=o[0][h]-o[1][h],p=o[3][h]-o[2][h];if(!f(d,p))return!1;var y=o[0][h]-o[3][h],g=o[1][h]-o[2][h];if(!f(y,g))return!1}return!f(o[0][1],o[1][1])&&!f(o[0][1],o[3][1])?!1:!!(l(o[0],o[1])*l(o[0],o[3]))},N.pointsShapeEllipse=function(o){var c=o.length;if(c!==m+1)return!1;c=m;for(var h=0;h<c;h++){var d=(c*2-h)%c,p=(c/2+d)%c,y=(c/2+h)%c;if(!f(l(o[h],o[y]),l(o[d],o[p])))return!1}return!0},N.handleEllipse=function(o,c,h){if(!o)return[c,h];var d=N.ellipseOver({x0:c[0],y0:c[1],x1:h[0],y1:h[1]}),p=(d.x1+d.x0)/2,y=(d.y1+d.y0)/2,g=(d.x1-d.x0)/2,A=(d.y1-d.y0)/2;g||(g=A=A/x),A||(A=g=g/x);for(var b=[],M=0;M<m;M++){var _=M*2*Math.PI/m;b.push([p+g*Math.cos(_),y+A*Math.sin(_)])}return b},N.ellipseOver=function(o){var c=o.x0,h=o.y0,d=o.x1,p=o.y1,y=d-c,g=p-h;c-=y,h-=g;var A=(c+d)/2,b=(h+p)/2,M=x;return y*=M,g*=M,{x0:A-y,y0:b-g,x1:A+y,y1:b+g}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(e,z,N){var u=e("../../dragelement/helpers"),s=u.drawMode,m=u.openMode,x=e("./constants"),t=x.i000,i=x.i090,a=x.i180,r=x.i270,n=x.cos45,f=x.sin45,l=e("../../../plots/cartesian/helpers"),o=l.p2r,c=l.r2p,h=e("../../../plots/cartesian/handle_outline"),d=h.clearSelect,p=e("./helpers"),y=p.readPaths,g=p.writePaths,A=p.ellipseOver;z.exports=function(_,T){if(!!_.length){var w=_[0][0];if(!!w){var v=w.getAttribute("d"),L=T.gd,S=L._fullLayout.newshape,k=T.plotinfo,P=k.xaxis,O=k.yaxis,F=!!k.domain||!k.xaxis,I=!!k.domain||!k.yaxis,D=T.isActiveShape,U=T.dragmode,B=(L.layout||{}).shapes||[];if(!s(U)&&D!==void 0){var j=L._fullLayout._activeShapeIndex;if(j<B.length)switch(L._fullLayout.shapes[j].type){case"rect":U="drawrect";break;case"circle":U="drawcircle";break;case"line":U="drawline";break;case"path":var Z=B[j].path||"";Z[Z.length-1]==="Z"?U="drawclosedpath":U="drawopenpath";break}}var ee=m(U),q=y(v,L,k,D),W={editable:!0,xref:F?"paper":P._id,yref:I?"paper":O._id,layer:S.layer,opacity:S.opacity,line:{color:S.line.color,width:S.line.width,dash:S.line.dash}};ee||(W.fillcolor=S.fillcolor,W.fillrule=S.fillrule);var J;if(q.length===1&&(J=q[0]),J&&U==="drawrect")W.type="rect",W.x0=J[0][1],W.y0=J[0][2],W.x1=J[2][1],W.y1=J[2][2];else if(J&&U==="drawline")W.type="line",W.x0=J[0][1],W.y0=J[0][2],W.x1=J[1][1],W.y1=J[1][2];else if(J&&U==="drawcircle"){W.type="circle";var le=J[t][1],fe=J[i][1],se=J[a][1],H=J[r][1],Y=J[t][2],ne=J[i][2],te=J[a][2],K=J[r][2],$=k.xaxis&&(k.xaxis.type==="date"||k.xaxis.type==="log"),ae=k.yaxis&&(k.yaxis.type==="date"||k.yaxis.type==="log");$&&(le=c(k.xaxis,le),fe=c(k.xaxis,fe),se=c(k.xaxis,se),H=c(k.xaxis,H)),ae&&(Y=c(k.yaxis,Y),ne=c(k.yaxis,ne),te=c(k.yaxis,te),K=c(k.yaxis,K));var ie=(fe+H)/2,oe=(Y+te)/2,ue=(H-fe+se-le)/2,ye=(K-ne+te-Y)/2,ce=A({x0:ie,y0:oe,x1:ie+ue*n,y1:oe+ye*f});$&&(ce.x0=o(k.xaxis,ce.x0),ce.x1=o(k.xaxis,ce.x1)),ae&&(ce.y0=o(k.yaxis,ce.y0),ce.y1=o(k.yaxis,ce.y1)),W.x0=ce.x0,W.y0=ce.y0,W.x1=ce.x1,W.y1=ce.y1}else W.type="path",P&&O&&b(q,P,O),W.path=g(q),J=null;d(L);for(var me=T.editHelpers,xe=(me||{}).modifyItem,ke=[],Ae=0;Ae<B.length;Ae++){var Oe=L._fullLayout.shapes[Ae];if(ke[Ae]=Oe._input,D!==void 0&&Ae===L._fullLayout._activeShapeIndex){var He=W;switch(Oe.type){case"line":case"rect":case"circle":xe("x0",He.x0),xe("x1",He.x1),xe("y0",He.y0),xe("y1",He.y1);break;case"path":xe("path",He.path);break}}}return D===void 0?(ke.push(W),ke):me?me.getUpdateObj():{}}}};function b(M,_,T){var w=_.type==="date",v=T.type==="date";if(!w&&!v)return M;for(var L=0;L<M.length;L++)for(var S=0;S<M[L].length;S++)for(var k=0;k+2<M[L][S].length;k+=2)w&&(M[L][S][k+1]=M[L][S][k+1].replace(" ","_")),v&&(M[L][S][k+2]=M[L][S][k+2].replace(" ","_"));return M}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(e,z,N){var u=e("./constants"),s=e("../../lib");N.rangeToShapePosition=function(m){return m.type==="log"?m.r2d:function(x){return x}},N.shapePositionToRange=function(m){return m.type==="log"?m.d2r:function(x){return x}},N.decodeDate=function(m){return function(x){return x.replace&&(x=x.replace("_"," ")),m(x)}},N.encodeDate=function(m){return function(x){return m(x).replace(" ","_")}},N.extractPathCoords=function(m,x){var t=[],i=m.match(u.segmentRE);return i.forEach(function(a){var r=x[a.charAt(0)].drawn;if(r!==void 0){var n=a.substr(1).match(u.paramRE);!n||n.length<r||t.push(s.cleanNumber(n[r]))}}),t},N.getDataToPixel=function(m,x,t,i){var a=m._fullLayout._size,r;if(x)if(i==="domain")r=function(f){return x._length*(t?1-f:f)+x._offset};else{var n=N.shapePositionToRange(x);r=function(f){return x._offset+x.r2p(n(f,!0))},x.type==="date"&&(r=N.decodeDate(r))}else t?r=function(f){return a.t+a.h*(1-f)}:r=function(f){return a.l+a.w*f};return r},N.getPixelToData=function(m,x,t,i){var a=m._fullLayout._size,r;if(x)if(i==="domain")r=function(f){var l=(f-x._offset)/x._length;return t?1-l:l};else{var n=N.rangeToShapePosition(x);r=function(f){return n(x.p2r(f-x._offset))}}else t?r=function(f){return 1-(f-a.t)/a.h}:r=function(f){return(f-a.l)/a.w};return r},N.roundPositionForSharpStrokeRendering=function(m,x){var t=Math.round(x%2)===1,i=Math.round(m);return t?i+.5:i},N.makeOptionsAndPlotinfo=function(m,x){var t=m._fullLayout.shapes[x]||{},i=m._fullLayout._plots[t.xref+t.yref],a=!!i;return a?i._hadPlotinfo=!0:(i={},t.xref&&t.xref!=="paper"&&(i.xaxis=m._fullLayout[t.xref+"axis"]),t.yref&&t.yref!=="paper"&&(i.yaxis=m._fullLayout[t.yref+"axis"])),i.xsizemode=t.xsizemode,i.ysizemode=t.ysizemode,i.xanchor=t.xanchor,i.yanchor=t.yanchor,{options:t,plotinfo:i}}},{"../../lib":503,"./constants":448}],458:[function(e,z,N){var u=e("./draw");z.exports={moduleType:"component",name:"shapes",layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),supplyDrawNewShapeDefaults:e("./draw_newshape/defaults"),includeBasePlot:e("../../plots/cartesian/include_components")("shapes"),calcAutorange:e("./calc_autorange"),draw:u.draw,drawOne:u.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("../../plots/pad_attributes"),m=e("../../lib/extend").extendDeepAll,x=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/animation_attributes"),i=e("../../plot_api/plot_template").templatedArray,a=e("./constants"),r=i("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});z.exports=x(i("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:r,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:m(s({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:t.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:u({})},font:u({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(e,z,N){z.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("./constants"),t=x.name,i=m.steps;z.exports=function(f,l){s(f,l,{name:t,handleItemDefaults:a})};function a(n,f,l){function o(b,M){return u.coerce(n,f,m,b,M)}for(var c=s(n,f,{name:"steps",handleItemDefaults:r}),h=0,d=0;d<c.length;d++)c[d].visible&&h++;var p;if(h<2?p=f.visible=!1:p=o("visible"),!!p){f._stepCount=h;var y=f._visibleSteps=u.filterVisible(c),g=o("active");(c[g]||{}).visible||(f.active=y[0]._index),o("x"),o("y"),u.noneOrAll(n,f,["x","y"]),o("xanchor"),o("yanchor"),o("len"),o("lenmode"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),u.coerceFont(o,"font",l.font);var A=o("currentvalue.visible");A&&(o("currentvalue.xanchor"),o("currentvalue.prefix"),o("currentvalue.suffix"),o("currentvalue.offset"),u.coerceFont(o,"currentvalue.font",f.font)),o("transition.duration"),o("transition.easing"),o("bgcolor"),o("activebgcolor"),o("bordercolor"),o("borderwidth"),o("ticklen"),o("tickwidth"),o("tickcolor"),o("minorticklen")}}function r(n,f){function l(h,d){return u.coerce(n,f,i,h,d)}var o;if(n.method!=="skip"&&!Array.isArray(n.args)?o=f.visible=!1:o=l("visible"),o){l("method"),l("args");var c=l("label","step-"+f._index);l("value",c),l("execute")}}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../plots/plots"),m=e("../color"),x=e("../drawing"),t=e("../../lib"),i=t.strTranslate,a=e("../../lib/svg_text_utils"),r=e("../../plot_api/plot_template").arrayEditor,n=e("./constants"),f=e("../../constants/alignment"),l=f.LINE_SPACING,o=f.FROM_TL,c=f.FROM_BR;z.exports=function(U){var B=U._fullLayout,j=d(B,U),Z=B._infolayer.selectAll("g."+n.containerClassName).data(j.length>0?[0]:[]);Z.enter().append("g").classed(n.containerClassName,!0).style("cursor","ew-resize");function ee(le){le._commandObserver&&(le._commandObserver.remove(),delete le._commandObserver),s.autoMargin(U,h(le))}if(Z.exit().each(function(){u.select(this).selectAll("g."+n.groupClassName).each(ee)}).remove(),j.length!==0){var q=Z.selectAll("g."+n.groupClassName).data(j,p);q.enter().append("g").classed(n.groupClassName,!0),q.exit().each(ee).remove();for(var W=0;W<j.length;W++){var J=j[W];y(U,J)}q.each(function(le){var fe=u.select(this);S(le),s.manageCommandObserver(U,le,le._visibleSteps,function(se){var H=fe.data()[0];H.active!==se.index&&(H._dragging||w(U,fe,H,se.index,!1,!0))}),g(U,u.select(this),le)})}};function h(D){return n.autoMarginIdRoot+D._index}function d(D,U){for(var B=D[n.name],j=[],Z=0;Z<B.length;Z++){var ee=B[Z];!ee.visible||(ee._gd=U,j.push(ee))}return j}function p(D){return D._index}function y(D,U){var B=x.tester.selectAll("g."+n.labelGroupClass).data(U._visibleSteps);B.enter().append("g").classed(n.labelGroupClass,!0);var j=0,Z=0;B.each(function(ne){var te=u.select(this),K=M(te,{step:ne},U),$=K.node();if($){var ae=x.bBox($);Z=Math.max(Z,ae.height),j=Math.max(j,ae.width)}}),B.remove();var ee=U._dims={};ee.inputAreaWidth=Math.max(n.railWidth,n.gripHeight);var q=D._fullLayout._size;ee.lx=q.l+q.w*U.x,ee.ly=q.t+q.h*(1-U.y),U.lenmode==="fraction"?ee.outerLength=Math.round(q.w*U.len):ee.outerLength=U.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-U.pad.l-U.pad.r);var W=ee.inputAreaLength-2*n.stepInset,J=W/(U._stepCount-1),le=j+n.labelPadding;if(ee.labelStride=Math.max(1,Math.ceil(le/J)),ee.labelHeight=Z,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,U.currentvalue.visible){var fe=x.tester.append("g");B.each(function(ne){var te=A(fe,U,ne.label),K=te.node()&&x.bBox(te.node())||{width:0,height:0},$=a.lineCount(te);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(K.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(K.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,$)}),ee.currentValueTotalHeight=ee.currentValueHeight+U.currentvalue.offset,fe.remove()}ee.height=ee.currentValueTotalHeight+n.tickOffset+U.ticklen+n.labelOffset+ee.labelHeight+U.pad.t+U.pad.b;var se="left";t.isRightAnchor(U)&&(ee.lx-=ee.outerLength,se="right"),t.isCenterAnchor(U)&&(ee.lx-=ee.outerLength/2,se="center");var H="top";t.isBottomAnchor(U)&&(ee.ly-=ee.height,H="bottom"),t.isMiddleAnchor(U)&&(ee.ly-=ee.height/2,H="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var Y={y:U.y,b:ee.height*c[H],t:ee.height*o[H]};U.lenmode==="fraction"?(Y.l=0,Y.xl=U.x-U.len*o[se],Y.r=0,Y.xr=U.x+U.len*c[se]):(Y.x=U.x,Y.l=ee.outerLength*o[se],Y.r=ee.outerLength*c[se]),s.autoMargin(D,h(U),Y)}function g(D,U,B){(B.steps[B.active]||{}).visible||(B.active=B._visibleSteps[0]._index),U.call(A,B).call(I,B).call(_,B).call(L,B).call(F,D,B).call(b,D,B);var j=B._dims;x.setTranslate(U,j.lx+B.pad.l,j.ly+B.pad.t),U.call(k,B,!1),U.call(A,B)}function A(D,U,B){if(!!U.currentvalue.visible){var j=U._dims,Z,ee;switch(U.currentvalue.xanchor){case"right":Z=j.inputAreaLength-n.currentValueInset-j.currentValueMaxWidth,ee="left";break;case"center":Z=j.inputAreaLength*.5,ee="middle";break;default:Z=n.currentValueInset,ee="left"}var q=t.ensureSingle(D,"text",n.labelClass,function(H){H.attr({"text-anchor":ee,"data-notex":1})}),W=U.currentvalue.prefix?U.currentvalue.prefix:"";if(typeof B=="string")W+=B;else{var J=U.steps[U.active].label,le=U._gd._fullLayout._meta;le&&(J=t.templateString(J,le)),W+=J}U.currentvalue.suffix&&(W+=U.currentvalue.suffix),q.call(x.font,U.currentvalue.font).text(W).call(a.convertToTspans,U._gd);var fe=a.lineCount(q),se=(j.currentValueMaxLines+1-fe)*U.currentvalue.font.size*l;return a.positionText(q,Z,se),q}}function b(D,U,B){var j=t.ensureSingle(D,"rect",n.gripRectClass,function(Z){Z.call(v,U,D,B).style("pointer-events","all")});j.attr({width:n.gripWidth,height:n.gripHeight,rx:n.gripRadius,ry:n.gripRadius}).call(m.stroke,B.bordercolor).call(m.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px")}function M(D,U,B){var j=t.ensureSingle(D,"text",n.labelClass,function(q){q.attr({"text-anchor":"middle","data-notex":1})}),Z=U.step.label,ee=B._gd._fullLayout._meta;return ee&&(Z=t.templateString(Z,ee)),j.call(x.font,B.font).text(Z).call(a.convertToTspans,B._gd),j}function _(D,U){var B=t.ensureSingle(D,"g",n.labelsClass),j=U._dims,Z=B.selectAll("g."+n.labelGroupClass).data(j.labelSteps);Z.enter().append("g").classed(n.labelGroupClass,!0),Z.exit().remove(),Z.each(function(ee){var q=u.select(this);q.call(M,ee,U),x.setTranslate(q,P(U,ee.fraction),n.tickOffset+U.ticklen+U.font.size*l+n.labelOffset+j.currentValueTotalHeight)})}function T(D,U,B,j,Z){var ee=Math.round(j*(B._stepCount-1)),q=B._visibleSteps[ee]._index;q!==B.active&&w(D,U,B,q,!0,Z)}function w(D,U,B,j,Z,ee){var q=B.active;B.active=j,r(D.layout,n.name,B).applyUpdate("active",j);var W=B.steps[B.active];U.call(k,B,ee),U.call(A,B),D.emit("plotly_sliderchange",{slider:B,step:B.steps[B.active],interaction:Z,previousActive:q}),W&&W.method&&Z&&(U._nextMethod?(U._nextMethod.step=W,U._nextMethod.doCallback=Z,U._nextMethod.doTransition=ee):(U._nextMethod={step:W,doCallback:Z,doTransition:ee},U._nextMethodRaf=window.requestAnimationFrame(function(){var J=U._nextMethod.step;!J.method||(J.execute&&s.executeAPICommand(D,J.method,J.args),U._nextMethod=null,U._nextMethodRaf=null)})))}function v(D,U,B){var j=B.node(),Z=u.select(U);function ee(){return B.data()[0]}function q(){var W=ee();U.emit("plotly_sliderstart",{slider:W});var J=B.select("."+n.gripRectClass);u.event.stopPropagation(),u.event.preventDefault(),J.call(m.fill,W.activebgcolor);var le=O(W,u.mouse(j)[0]);T(U,B,W,le,!0),W._dragging=!0;function fe(){var H=ee(),Y=O(H,u.mouse(j)[0]);T(U,B,H,Y,!1)}Z.on("mousemove",fe),Z.on("touchmove",fe);function se(){var H=ee();H._dragging=!1,J.call(m.fill,H.bgcolor),Z.on("mouseup",null),Z.on("mousemove",null),Z.on("touchend",null),Z.on("touchmove",null),U.emit("plotly_sliderend",{slider:H,step:H.steps[H.active]})}Z.on("mouseup",se),Z.on("touchend",se)}D.on("mousedown",q),D.on("touchstart",q)}function L(D,U){var B=D.selectAll("rect."+n.tickRectClass).data(U._visibleSteps),j=U._dims;B.enter().append("rect").classed(n.tickRectClass,!0),B.exit().remove(),B.attr({width:U.tickwidth+"px","shape-rendering":"crispEdges"}),B.each(function(Z,ee){var q=ee%j.labelStride==0,W=u.select(this);W.attr({height:q?U.ticklen:U.minorticklen}).call(m.fill,U.tickcolor),x.setTranslate(W,P(U,ee/(U._stepCount-1))-.5*U.tickwidth,(q?n.tickOffset:n.minorTickOffset)+j.currentValueTotalHeight)})}function S(D){var U=D._dims;U.labelSteps=[];for(var B=D._stepCount,j=0;j<B;j+=U.labelStride)U.labelSteps.push({fraction:j/(B-1),step:D._visibleSteps[j]})}function k(D,U,B){for(var j=D.select("rect."+n.gripRectClass),Z=0,ee=0;ee<U._stepCount;ee++)if(U._visibleSteps[ee]._index===U.active){Z=ee;break}var q=P(U,Z/(U._stepCount-1));if(!U._invokingCommand){var W=j;B&&U.transition.duration>0&&(W=W.transition().duration(U.transition.duration).ease(U.transition.easing)),W.attr("transform",i(q-n.gripWidth*.5,U._dims.currentValueTotalHeight))}}function P(D,U){var B=D._dims;return B.inputAreaStart+n.stepInset+(B.inputAreaLength-2*n.stepInset)*Math.min(1,Math.max(0,U))}function O(D,U){var B=D._dims;return Math.min(1,Math.max(0,(U-n.stepInset-B.inputAreaStart)/(B.inputAreaLength-2*n.stepInset-2*B.inputAreaStart)))}function F(D,U,B){var j=B._dims,Z=t.ensureSingle(D,"rect",n.railTouchRectClass,function(ee){ee.call(v,U,D,B).style("pointer-events","all")});Z.attr({width:j.inputAreaLength,height:Math.max(j.inputAreaWidth,n.tickOffset+B.ticklen+j.labelHeight)}).call(m.fill,B.bgcolor).attr("opacity",0),x.setTranslate(Z,0,j.currentValueTotalHeight)}function I(D,U){var B=U._dims,j=B.inputAreaLength-n.railInset*2,Z=t.ensureSingle(D,"rect",n.railRectClass);Z.attr({width:j,height:n.railWidth,rx:n.railRadius,ry:n.railRadius,"shape-rendering":"crispEdges"}).call(m.stroke,U.bordercolor).call(m.fill,U.bgcolor).style("stroke-width",U.borderwidth+"px"),x.setTranslate(Z,n.railInset,(B.inputAreaWidth-n.railWidth)*.5+B.currentValueTotalHeight)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(e,z,N){var u=e("./constants");z.exports={moduleType:"component",name:u.name,layoutAttributes:e("./attributes"),supplyLayoutDefaults:e("./defaults"),draw:e("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib"),i=t.strTranslate,a=e("../drawing"),r=e("../color"),n=e("../../lib/svg_text_utils"),f=e("../../constants/interactions"),l=e("../../constants/alignment").OPPOSITE_SIDE,o=/ [XY][0-9]* /;function c(h,d,p){var y=p.propContainer,g=p.propName,A=p.placeholder,b=p.traceIndex,M=p.avoid||{},_=p.attributes,T=p.transform,w=p.containerGroup,v=h._fullLayout,L=1,S=!1,k=y.title,P=(k&&k.text?k.text:"").trim(),O=k&&k.font?k.font:{},F=O.family,I=O.size,D=O.color,U;g==="title.text"?U="titleText":g.indexOf("axis")!==-1?U="axisTitleText":g.indexOf("colorbar"!==-1)&&(U="colorbarTitleText");var B=h._context.edits[U];P===""?L=0:P.replace(o," % ")===A.replace(o," % ")&&(L=.2,S=!0,B||(P="")),p._meta?P=t.templateString(P,p._meta):v._meta&&(P=t.templateString(P,v._meta));var j=P||B,Z;w||(w=t.ensureSingle(v._infolayer,"g","g-"+d),Z=v._hColorbarMoveTitle);var ee=w.selectAll("text").data(j?[0]:[]);if(ee.enter().append("text"),ee.text(P).attr("class",d),ee.exit().remove(),!j)return w;function q(fe){t.syncOrAsync([W,J],fe)}function W(fe){var se;return!T&&Z&&(T={}),T?(se="",T.rotate&&(se+="rotate("+[T.rotate,_.x,_.y]+")"),(T.offset||Z)&&(se+=i(0,(T.offset||0)-(Z||0)))):se=null,fe.attr("transform",se),fe.style({"font-family":F,"font-size":u.round(I,2)+"px",fill:r.rgb(D),opacity:L*r.opacity(D),"font-weight":m.fontWeight}).attr(_).call(n.convertToTspans,h),m.previousPromises(h)}function J(fe){var se=u.select(fe.node().parentNode);if(M&&M.selection&&M.side&&P){se.attr("transform",null);var H=l[M.side],Y=M.side==="left"||M.side==="top"?-1:1,ne=s(M.pad)?M.pad:2,te=a.bBox(se.node()),K={left:0,top:0,right:v.width,bottom:v.height},$=M.maxShift||Y*(K[M.side]-te[M.side]),ae=0;if($<0)ae=$;else{var ie=M.offsetLeft||0,oe=M.offsetTop||0;te.left-=ie,te.right-=ie,te.top-=oe,te.bottom-=oe,M.selection.each(function(){var ye=a.bBox(this);t.bBoxIntersect(te,ye,ne)&&(ae=Math.max(ae,Y*(ye[M.side]-te[H])+ne))}),ae=Math.min($,ae)}if(ae>0||$<0){var ue={left:[-ae,0],right:[ae,0],top:[0,-ae],bottom:[0,ae]}[M.side];se.attr("transform",i(ue[0],ue[1]))}}}ee.call(q);function le(){L=0,S=!0,ee.text(A).on("mouseover.opacity",function(){u.select(this).transition().duration(f.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){u.select(this).transition().duration(f.HIDE_PLACEHOLDER).style("opacity",0)})}return B&&(P?ee.on(".opacity",null):le(),ee.call(n.makeEditable,{gd:h}).on("edit",function(fe){b!==void 0?x.call("_guiRestyle",h,g,fe,b):x.call("_guiRelayout",h,g,fe)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(q)}).on("input",function(fe){this.text(fe||" ").call(n.positionText,_.x,_.y)})),ee.classed("js-placeholder",S),w}z.exports={draw:c}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("../color/attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll,t=e("../../plots/pad_attributes"),i=e("../../plot_api/plot_template").templatedArray,a=i("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});z.exports=x(i("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:m(t({editType:"arraydraw"}),{}),font:u({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:s.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(e,z,N){z.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25C4",right:"\u25BA",up:"\u25B2",down:"\u25BC"}}},{}],467:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("./constants"),t=x.name,i=m.buttons;z.exports=function(f,l){var o={name:t,handleItemDefaults:a};s(f,l,o)};function a(n,f,l){function o(d,p){return u.coerce(n,f,m,d,p)}var c=s(n,f,{name:"buttons",handleItemDefaults:r}),h=o("visible",c.length>0);!h||(o("active"),o("direction"),o("type"),o("showactive"),o("x"),o("y"),u.noneOrAll(n,f,["x","y"]),o("xanchor"),o("yanchor"),o("pad.t"),o("pad.r"),o("pad.b"),o("pad.l"),u.coerceFont(o,"font",l.font),o("bgcolor",l.paper_bgcolor),o("bordercolor"),o("borderwidth"))}function r(n,f){function l(c,h){return u.coerce(n,f,i,c,h)}var o=l("visible",n.method==="skip"||Array.isArray(n.args));o&&(l("method"),l("args"),l("args2"),l("label"),l("execute"))}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../plots/plots"),m=e("../color"),x=e("../drawing"),t=e("../../lib"),i=e("../../lib/svg_text_utils"),a=e("../../plot_api/plot_template").arrayEditor,r=e("../../constants/alignment").LINE_SPACING,n=e("./constants"),f=e("./scrollbox");z.exports=function(O){var F=O._fullLayout,I=t.filterVisible(F[n.name]);function D(J){s.autoMargin(O,L(J))}var U=F._menulayer.selectAll("g."+n.containerClassName).data(I.length>0?[0]:[]);if(U.enter().append("g").classed(n.containerClassName,!0).style("cursor","pointer"),U.exit().each(function(){u.select(this).selectAll("g."+n.headerGroupClassName).each(D)}).remove(),I.length!==0){var B=U.selectAll("g."+n.headerGroupClassName).data(I,l);B.enter().append("g").classed(n.headerGroupClassName,!0);for(var j=t.ensureSingle(U,"g",n.dropdownButtonGroupClassName,function(J){J.style("pointer-events","all")}),Z=0;Z<I.length;Z++){var ee=I[Z];v(O,ee)}var q="updatemenus"+F._uid,W=new f(O,j,q);B.enter().size()&&(j.node().parentNode.appendChild(j.node()),j.call(k)),B.exit().each(function(J){j.call(k),D(J)}).remove(),B.each(function(J){var le=u.select(this),fe=J.type==="dropdown"?j:null;s.manageCommandObserver(O,J,J.buttons,function(se){h(O,J,J.buttons[se.index],le,fe,W,se.index,!0)}),J.type==="dropdown"?(d(O,le,j,W,J),c(j,J)&&p(O,le,j,W,J)):p(O,le,null,null,J)})}};function l(P){return P._index}function o(P){return+P.attr(n.menuIndexAttrName)==-1}function c(P,O){return+P.attr(n.menuIndexAttrName)===O._index}function h(P,O,F,I,D,U,B,j){O.active=B,a(P.layout,n.name,O).applyUpdate("active",B),O.type==="buttons"?p(P,I,null,null,O):O.type==="dropdown"&&(D.attr(n.menuIndexAttrName,"-1"),d(P,I,D,U,O),j||p(P,I,D,U,O))}function d(P,O,F,I,D){var U=t.ensureSingle(O,"g",n.headerClassName,function(J){J.style("pointer-events","all")}),B=D._dims,j=D.active,Z=D.buttons[j]||n.blankHeaderOpts,ee={y:D.pad.t,yPad:0,x:D.pad.l,xPad:0,index:0},q={width:B.headerWidth,height:B.headerHeight};U.call(A,D,Z,P).call(S,D,ee,q);var W=t.ensureSingle(O,"text",n.headerArrowClassName,function(J){J.attr("text-anchor","end").call(x.font,D.font).text(n.arrowSymbol[D.direction])});W.attr({x:B.headerWidth-n.arrowOffsetX+D.pad.l,y:B.headerHeight/2+n.textOffsetY+D.pad.t}),U.on("click",function(){F.call(k,String(c(F,D)?-1:D._index)),p(P,O,F,I,D)}),U.on("mouseover",function(){U.call(T)}),U.on("mouseout",function(){U.call(w,D)}),x.setTranslate(O,B.lx,B.ly)}function p(P,O,F,I,D){F||(F=O,F.attr("pointer-events","all"));var U=!o(F)||D.type==="buttons"?D.buttons:[],B=D.type==="dropdown"?n.dropdownButtonClassName:n.buttonClassName,j=F.selectAll("g."+B).data(t.filterVisible(U)),Z=j.enter().append("g").classed(B,!0),ee=j.exit();D.type==="dropdown"?(Z.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var q=0,W=0,J=D._dims,le=["up","down"].indexOf(D.direction)!==-1;D.type==="dropdown"&&(le?W=J.headerHeight+n.gapButtonHeader:q=J.headerWidth+n.gapButtonHeader),D.type==="dropdown"&&D.direction==="up"&&(W=-n.gapButtonHeader+n.gapButton-J.openHeight),D.type==="dropdown"&&D.direction==="left"&&(q=-n.gapButtonHeader+n.gapButton-J.openWidth);var fe={x:J.lx+q+D.pad.l,y:J.ly+W+D.pad.t,yPad:n.gapButton,xPad:n.gapButton,index:0},se={l:fe.x+D.borderwidth,t:fe.y+D.borderwidth};j.each(function(H,Y){var ne=u.select(this);ne.call(A,D,H,P).call(S,D,fe),ne.on("click",function(){u.event.defaultPrevented||(H.execute&&(H.args2&&D.active===Y?(h(P,D,H,O,F,I,-1),s.executeAPICommand(P,H.method,H.args2)):(h(P,D,H,O,F,I,Y),s.executeAPICommand(P,H.method,H.args))),P.emit("plotly_buttonclicked",{menu:D,button:H,active:D.active}))}),ne.on("mouseover",function(){ne.call(T)}),ne.on("mouseout",function(){ne.call(w,D),j.call(_,D)})}),j.call(_,D),le?(se.w=Math.max(J.openWidth,J.headerWidth),se.h=fe.y-se.t):(se.w=fe.x-se.l,se.h=Math.max(J.openHeight,J.headerHeight)),se.direction=D.direction,I&&(j.size()?y(P,O,F,I,D,se):g(I))}function y(P,O,F,I,D,U){var B=D.direction,j=B==="up"||B==="down",Z=D._dims,ee=D.active,q,W,J;if(j)for(W=0,J=0;J<ee;J++)W+=Z.heights[J]+n.gapButton;else for(q=0,J=0;J<ee;J++)q+=Z.widths[J]+n.gapButton;I.enable(U,q,W),I.hbar&&I.hbar.attr("opacity","0").transition().attr("opacity","1"),I.vbar&&I.vbar.attr("opacity","0").transition().attr("opacity","1")}function g(P){var O=!!P.hbar,F=!!P.vbar;O&&P.hbar.transition().attr("opacity","0").each("end",function(){O=!1,F||P.disable()}),F&&P.vbar.transition().attr("opacity","0").each("end",function(){F=!1,O||P.disable()})}function A(P,O,F,I){P.call(b,O).call(M,O,F,I)}function b(P,O){var F=t.ensureSingle(P,"rect",n.itemRectClassName,function(I){I.attr({rx:n.rx,ry:n.ry,"shape-rendering":"crispEdges"})});F.call(m.stroke,O.bordercolor).call(m.fill,O.bgcolor).style("stroke-width",O.borderwidth+"px")}function M(P,O,F,I){var D=t.ensureSingle(P,"text",n.itemTextClassName,function(j){j.attr({"text-anchor":"start","data-notex":1})}),U=F.label,B=I._fullLayout._meta;B&&(U=t.templateString(U,B)),D.call(x.font,O.font).text(U).call(i.convertToTspans,I)}function _(P,O){var F=O.active;P.each(function(I,D){var U=u.select(this);D===F&&O.showactive&&U.select("rect."+n.itemRectClassName).call(m.fill,n.activeColor)})}function T(P){P.select("rect."+n.itemRectClassName).call(m.fill,n.hoverColor)}function w(P,O){P.select("rect."+n.itemRectClassName).call(m.fill,O.bgcolor)}function v(P,O){var F=O._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},I=x.tester.selectAll("g."+n.dropdownButtonClassName).data(t.filterVisible(O.buttons));I.enter().append("g").classed(n.dropdownButtonClassName,!0);var D=["up","down"].indexOf(O.direction)!==-1;I.each(function(q,W){var J=u.select(this);J.call(A,O,q,P);var le=J.select("."+n.itemTextClassName),fe=le.node()&&x.bBox(le.node()).width,se=Math.max(fe+n.textPadX,n.minWidth),H=O.font.size*r,Y=i.lineCount(le),ne=Math.max(H*Y,n.minHeight)+n.textOffsetY;ne=Math.ceil(ne),se=Math.ceil(se),F.widths[W]=se,F.heights[W]=ne,F.height1=Math.max(F.height1,ne),F.width1=Math.max(F.width1,se),D?(F.totalWidth=Math.max(F.totalWidth,se),F.openWidth=F.totalWidth,F.totalHeight+=ne+n.gapButton,F.openHeight+=ne+n.gapButton):(F.totalWidth+=se+n.gapButton,F.openWidth+=se+n.gapButton,F.totalHeight=Math.max(F.totalHeight,ne),F.openHeight=F.totalHeight)}),D?F.totalHeight-=n.gapButton:F.totalWidth-=n.gapButton,F.headerWidth=F.width1+n.arrowPadX,F.headerHeight=F.height1,O.type==="dropdown"&&(D?(F.width1+=n.arrowPadX,F.totalHeight=F.height1):F.totalWidth=F.width1,F.totalWidth+=n.arrowPadX),I.remove();var U=F.totalWidth+O.pad.l+O.pad.r,B=F.totalHeight+O.pad.t+O.pad.b,j=P._fullLayout._size;F.lx=j.l+j.w*O.x,F.ly=j.t+j.h*(1-O.y);var Z="left";t.isRightAnchor(O)&&(F.lx-=U,Z="right"),t.isCenterAnchor(O)&&(F.lx-=U/2,Z="center");var ee="top";t.isBottomAnchor(O)&&(F.ly-=B,ee="bottom"),t.isMiddleAnchor(O)&&(F.ly-=B/2,ee="middle"),F.totalWidth=Math.ceil(F.totalWidth),F.totalHeight=Math.ceil(F.totalHeight),F.lx=Math.round(F.lx),F.ly=Math.round(F.ly),s.autoMargin(P,L(O),{x:O.x,y:O.y,l:U*({right:1,center:.5}[Z]||0),r:U*({left:1,center:.5}[Z]||0),b:B*({top:1,middle:.5}[ee]||0),t:B*({bottom:1,middle:.5}[ee]||0)})}function L(P){return n.autoMarginIdRoot+P._index}function S(P,O,F,I){I=I||{};var D=P.select("."+n.itemRectClassName),U=P.select("."+n.itemTextClassName),B=O.borderwidth,j=F.index,Z=O._dims;x.setTranslate(P,B+F.x,B+F.y);var ee=["up","down"].indexOf(O.direction)!==-1,q=I.height||(ee?Z.heights[j]:Z.height1);D.attr({x:0,y:0,width:I.width||(ee?Z.width1:Z.widths[j]),height:q});var W=O.font.size*r,J=i.lineCount(U),le=(J-1)*W/2;i.positionText(U,n.textOffsetX,q/2-le+n.textOffsetY),ee?F.y+=Z.heights[j]+F.yPad:F.x+=Z.widths[j]+F.xPad,F.index++}function k(P,O){P.attr(n.menuIndexAttrName,O||"-1").selectAll("g."+n.dropdownButtonClassName).remove()}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(e,z,N){arguments[4][463][0].apply(N,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(e,z,N){z.exports=t;var u=e("@plotly/d3"),s=e("../color"),m=e("../drawing"),x=e("../../lib");function t(i,a,r){this.gd=i,this.container=a,this.id=r,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}t.barWidth=2,t.barLength=20,t.barRadius=2,t.barPad=1,t.barColor="#808BA4",t.prototype.enable=function(a,r,n){var f=this.gd._fullLayout,l=f.width,o=f.height;this.position=a;var c=this.position.l,h=this.position.w,d=this.position.t,p=this.position.h,y=this.position.direction,g=y==="down",A=y==="left",b=y==="right",M=y==="up",_=h,T=p,w,v,L,S;!g&&!A&&!b&&!M&&(this.position.direction="down",g=!0);var k=g||M;k?(w=c,v=w+_,g?(L=d,S=Math.min(L+T,o),T=S-L):(S=d+T,L=Math.max(S-T,0),T=S-L)):(L=d,S=L+T,A?(v=c+_,w=Math.max(v-_,0),_=v-w):(w=c,v=Math.min(w+_,l),_=v-w)),this._box={l:w,t:L,w:_,h:T};var P=h>_,O=t.barLength+2*t.barPad,F=t.barWidth+2*t.barPad,I=c,D=d+p;D+F>o&&(D=o-F);var U=this.container.selectAll("rect.scrollbar-horizontal").data(P?[0]:[]);U.exit().on(".drag",null).remove(),U.enter().append("rect").classed("scrollbar-horizontal",!0).call(s.fill,t.barColor),P?(this.hbar=U.attr({rx:t.barRadius,ry:t.barRadius,x:I,y:D,width:O,height:F}),this._hbarXMin=I+O/2,this._hbarTranslateMax=_-O):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var B=p>T,j=t.barWidth+2*t.barPad,Z=t.barLength+2*t.barPad,ee=c+h,q=d;ee+j>l&&(ee=l-j);var W=this.container.selectAll("rect.scrollbar-vertical").data(B?[0]:[]);W.exit().on(".drag",null).remove(),W.enter().append("rect").classed("scrollbar-vertical",!0).call(s.fill,t.barColor),B?(this.vbar=W.attr({rx:t.barRadius,ry:t.barRadius,x:ee,y:q,width:j,height:Z}),this._vbarYMin=q+Z/2,this._vbarTranslateMax=T-Z):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var J=this.id,le=w-.5,fe=B?v+j+.5:v+.5,se=L-.5,H=P?S+F+.5:S+.5,Y=f._topdefs.selectAll("#"+J).data(P||B?[0]:[]);if(Y.exit().remove(),Y.enter().append("clipPath").attr("id",J).append("rect"),P||B?(this._clipRect=Y.select("rect").attr({x:Math.floor(le),y:Math.floor(se),width:Math.ceil(fe)-Math.floor(le),height:Math.ceil(H)-Math.floor(se)}),this.container.call(m.setClipUrl,J,this.gd),this.bg.attr({x:c,y:d,width:h,height:p})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),P||B){var ne=u.behavior.drag().on("dragstart",function(){u.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(ne);var te=u.behavior.drag().on("dragstart",function(){u.event.sourceEvent.preventDefault(),u.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));P&&this.hbar.on(".drag",null).call(te),B&&this.vbar.on(".drag",null).call(te)}this.setTranslate(r,n)},t.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(m.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},t.prototype._onBoxDrag=function(){var a=this.translateX,r=this.translateY;this.hbar&&(a-=u.event.dx),this.vbar&&(r-=u.event.dy),this.setTranslate(a,r)},t.prototype._onBoxWheel=function(){var a=this.translateX,r=this.translateY;this.hbar&&(a+=u.event.deltaY),this.vbar&&(r+=u.event.deltaY),this.setTranslate(a,r)},t.prototype._onBarDrag=function(){var a=this.translateX,r=this.translateY;if(this.hbar){var n=a+this._hbarXMin,f=n+this._hbarTranslateMax,l=x.constrain(u.event.x,n,f),o=(l-n)/(f-n),c=this.position.w-this._box.w;a=o*c}if(this.vbar){var h=r+this._vbarYMin,d=h+this._vbarTranslateMax,p=x.constrain(u.event.y,h,d),y=(p-h)/(d-h),g=this.position.h-this._box.h;r=y*g}this.setTranslate(a,r)},t.prototype.setTranslate=function(a,r){var n=this.position.w-this._box.w,f=this.position.h-this._box.h;if(a=x.constrain(a||0,0,n),r=x.constrain(r||0,0,f),this.translateX=a,this.translateY=r,this.container.call(m.setTranslate,this._box.l-this.position.l-a,this._box.t-this.position.t-r),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+a-.5),y:Math.floor(this.position.t+r-.5)}),this.hbar){var l=a/n;this.hbar.call(m.setTranslate,a+l*this._hbarTranslateMax,r)}if(this.vbar){var o=r/f;this.vbar.call(m.setTranslate,a,r+o*this._vbarTranslateMax)}}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(e,z,N){z.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(e,z,N){z.exports={axisRefDescription:function(u,s,m){return["If set to a",u,"axis id (e.g. *"+u+"* or","*"+u+"2*), the `"+u+"` position refers to a",u,"coordinate. If set to *paper*, the `"+u+"`","position refers to the distance from the",s,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",s,"("+m+"). If set to a",u,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",s,"of the domain of that axis: e.g.,","*"+u+"2 domain* refers to the domain of the second",u," axis and a",u,"position of 0.5 refers to the","point between the",s,"and the",m,"of the domain of the","second",u,"axis."].join(" ")}}},{}],473:[function(e,z,N){z.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25B2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25BC"}}},{}],474:[function(e,z,N){z.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(e,z,N){z.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(e,z,N){z.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(e,z,N){z.exports={circle:"\u25CF","circle-open":"\u25CB",square:"\u25A0","square-open":"\u25A1",diamond:"\u25C6","diamond-open":"\u25C7",cross:"+",x:"\u274C"}},{}],478:[function(e,z,N){z.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(e,z,N){z.exports={BADNUM:void 0,FP_SAFE:Number.MAX_VALUE*1e-4,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:24405875e-1,ALMOST_EQUAL:1-1e-6,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(e,z,N){N.xmlns="http://www.w3.org/2000/xmlns/",N.svg="http://www.w3.org/2000/svg",N.xlink="http://www.w3.org/1999/xlink",N.svgAttrs={xmlns:N.svg,"xmlns:xlink":N.xlink}},{}],481:[function(e,z,N){N.version=e("./version").version,e("native-promise-only"),e("../build/plotcss");for(var u=e("./registry"),s=N.register=u.register,m=e("./plot_api"),x=Object.keys(m),t=0;t<x.length;t++){var i=x[t];i.charAt(0)!=="_"&&(N[i]=m[i]),s({moduleType:"apiMethod",name:i,fn:m[i]})}s(e("./traces/scatter")),s([e("./components/legend"),e("./components/fx"),e("./components/annotations"),e("./components/annotations3d"),e("./components/shapes"),e("./components/images"),e("./components/updatemenus"),e("./components/sliders"),e("./components/rangeslider"),e("./components/rangeselector"),e("./components/grid"),e("./components/errorbars"),e("./components/colorscale"),e("./components/colorbar"),e("./components/modebar")]),s([e("./locale-en"),e("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(s(window.PlotlyLocales),delete window.PlotlyLocales),N.Icons=e("./fonts/ploticon");var a=e("./components/fx"),r=e("./plots/plots");N.Plots={resize:r.resize,graphJson:r.graphJson,sendDataToCloud:r.sendDataToCloud},N.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},N.Snapshot=e("./snapshot"),N.PlotSchema=e("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(e,z,N){z.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(e,z,N){N.isLeftAnchor=function(s){return s.xanchor==="left"||s.xanchor==="auto"&&s.x<=1/3},N.isCenterAnchor=function(s){return s.xanchor==="center"||s.xanchor==="auto"&&s.x>1/3&&s.x<2/3},N.isRightAnchor=function(s){return s.xanchor==="right"||s.xanchor==="auto"&&s.x>=2/3},N.isTopAnchor=function(s){return s.yanchor==="top"||s.yanchor==="auto"&&s.y>=2/3},N.isMiddleAnchor=function(s){return s.yanchor==="middle"||s.yanchor==="auto"&&s.y>1/3&&s.y<2/3},N.isBottomAnchor=function(s){return s.yanchor==="bottom"||s.yanchor==="auto"&&s.y<=1/3}},{}],484:[function(e,z,N){var u=e("./mod"),s=u.mod,m=u.modHalf,x=Math.PI,t=2*x;function i(y){return y/180*x}function a(y){return y/x*180}function r(y){return Math.abs(y[1]-y[0])>t-1e-14}function n(y,g){return m(g-y,t)}function f(y,g){return Math.abs(n(y,g))}function l(y,g){if(r(g))return!0;var A,b;g[0]<g[1]?(A=g[0],b=g[1]):(A=g[1],b=g[0]),A=s(A,t),b=s(b,t),A>b&&(b+=t);var M=s(y,t),_=M+t;return M>=A&&M<=b||_>=A&&_<=b}function o(y,g,A,b){if(!l(g,b))return!1;var M,_;return A[0]<A[1]?(M=A[0],_=A[1]):(M=A[1],_=A[0]),y>=M&&y<=_}function c(y,g,A,b,M,_,T){M=M||0,_=_||0;var w=r([A,b]),v,L,S,k,P;w?(v=0,L=x,S=t):A<b?(v=A,S=b):(v=b,S=A),y<g?(k=y,P=g):(k=g,P=y);function O(U,B){return[U*Math.cos(B)+M,_-U*Math.sin(B)]}var F=Math.abs(S-v)<=x?0:1;function I(U,B,j){return"A"+[U,U]+" "+[0,F,j]+" "+O(U,B)}var D;return w?k===null?D="M"+O(P,v)+I(P,L,0)+I(P,S,0)+"Z":D="M"+O(k,v)+I(k,L,0)+I(k,S,0)+"ZM"+O(P,v)+I(P,L,1)+I(P,S,1)+"Z":k===null?(D="M"+O(P,v)+I(P,S,0),T&&(D+="L0,0Z")):D="M"+O(k,v)+"L"+O(P,v)+I(P,S,0)+"L"+O(k,S)+I(k,v,1)+"Z",D}function h(y,g,A,b,M){return c(null,y,g,A,b,M,0)}function d(y,g,A,b,M){return c(null,y,g,A,b,M,1)}function p(y,g,A,b,M,_){return c(y,g,A,b,M,_,1)}z.exports={deg2rad:i,rad2deg:a,angleDelta:n,angleDist:f,isFullCircle:r,isAngleInsideSector:l,isPtInsideSector:o,pathArc:h,pathSector:d,pathAnnulus:p}},{"./mod":510}],485:[function(e,z,N){var u=Array.isArray,s=ArrayBuffer,m=DataView;function x(r){return s.isView(r)&&!(r instanceof m)}N.isTypedArray=x;function t(r){return u(r)||x(r)}N.isArrayOrTypedArray=t;function i(r){return!t(r[0])}N.isArray1D=i,N.ensureArray=function(r,n){return u(r)||(r=[]),r.length=n,r},N.concat=function(){var r=[],n=!0,f=0,l,o,c,h,d,p,y,g;for(c=0;c<arguments.length;c++)h=arguments[c],p=h.length,p&&(o?r.push(h):(o=h,d=p),u(h)?l=!1:(n=!1,f?l!==h.constructor&&(l=!1):l=h.constructor),f+=p);if(!f)return[];if(!r.length)return o;if(n)return o.concat.apply(o,r);if(l){for(y=new l(f),y.set(o),c=0;c<r.length;c++)h=r[c],y.set(h,d),d+=h.length;return y}for(y=new Array(f),g=0;g<o.length;g++)y[g]=o[g];for(c=0;c<r.length;c++){for(h=r[c],g=0;g<h.length;g++)y[d+g]=h[g];d+=g}return y},N.maxRowLength=function(r){return a(r,Math.max,0)},N.minRowLength=function(r){return a(r,Math.min,1/0)};function a(r,n,f){if(t(r))if(t(r[0])){for(var l=f,o=0;o<r.length;o++)l=n(l,r[o].length);return l}else return r.length;return 0}},{}],486:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../constants/numerical").BADNUM,m=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;z.exports=function(t){return typeof t=="string"&&(t=t.replace(m,"")),u(t)?Number(t):s}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(e,z,N){z.exports=function(s){var m=s._fullLayout;m._glcanvas&&m._glcanvas.size()&&m._glcanvas.each(function(x){x.regl&&x.regl.clear({color:!0,depth:!0})})}},{}],488:[function(e,z,N){z.exports=function(s){s._responsiveChartHandler&&(window.removeEventListener("resize",s._responsiveChartHandler),delete s._responsiveChartHandler)}},{}],489:[function(e,z,N){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("../plots/attributes"),x=e("../components/colorscale/scales"),t=e("../components/color"),i=e("../constants/interactions").DESELECTDIM,a=e("./nested_property"),r=e("./regex").counter,n=e("./mod").modHalf,f=e("./array").isArrayOrTypedArray;N.valObjectMeta={data_array:{coerceFunction:function(o,c,h){f(o)?c.set(o):h!==void 0&&c.set(h)}},enumerated:{coerceFunction:function(o,c,h,d){d.coerceNumber&&(o=+o),d.values.indexOf(o)===-1?c.set(h):c.set(o)},validateFunction:function(o,c){c.coerceNumber&&(o=+o);for(var h=c.values,d=0;d<h.length;d++){var p=String(h[d]);if(p.charAt(0)==="/"&&p.charAt(p.length-1)==="/"){var y=new RegExp(p.substr(1,p.length-2));if(y.test(o))return!0}else if(o===h[d])return!0}return!1}},boolean:{coerceFunction:function(o,c,h){o===!0||o===!1?c.set(o):c.set(h)}},number:{coerceFunction:function(o,c,h,d){!u(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?c.set(h):c.set(+o)}},integer:{coerceFunction:function(o,c,h,d){o%1||!u(o)||d.min!==void 0&&o<d.min||d.max!==void 0&&o>d.max?c.set(h):c.set(+o)}},string:{coerceFunction:function(o,c,h,d){if(typeof o!="string"){var p=typeof o=="number";d.strict===!0||!p?c.set(h):c.set(String(o))}else d.noBlank&&!o?c.set(h):c.set(o)}},color:{coerceFunction:function(o,c,h){s(o).isValid()?c.set(o):c.set(h)}},colorlist:{coerceFunction:function(o,c,h){function d(p){return s(p).isValid()}!Array.isArray(o)||!o.length?c.set(h):o.every(d)?c.set(o):c.set(h)}},colorscale:{coerceFunction:function(o,c,h){c.set(x.get(o,h))}},angle:{coerceFunction:function(o,c,h){o==="auto"?c.set("auto"):u(o)?c.set(n(+o,360)):c.set(h)}},subplotid:{coerceFunction:function(o,c,h,d){var p=d.regex||r(h);if(typeof o=="string"&&p.test(o)){c.set(o);return}c.set(h)},validateFunction:function(o,c){var h=c.dflt;return o===h?!0:typeof o!="string"?!1:!!r(h).test(o)}},flaglist:{coerceFunction:function(o,c,h,d){if(typeof o!="string"){c.set(h);return}if((d.extras||[]).indexOf(o)!==-1){c.set(o);return}for(var p=o.split("+"),y=0;y<p.length;){var g=p[y];d.flags.indexOf(g)===-1||p.indexOf(g)<y?p.splice(y,1):y++}p.length?c.set(p.join("+")):c.set(h)}},any:{coerceFunction:function(o,c,h){o===void 0?c.set(h):c.set(o)}},info_array:{coerceFunction:function(o,c,h,d){function p(O,F,I){var D,U={set:function(B){D=B}};return I===void 0&&(I=F.dflt),N.valObjectMeta[F.valType].coerceFunction(O,U,I,F),D}var y=d.dimensions===2||d.dimensions==="1-2"&&Array.isArray(o)&&Array.isArray(o[0]);if(!Array.isArray(o)){c.set(h);return}var g=d.items,A=[],b=Array.isArray(g),M=b&&y&&Array.isArray(g[0]),_=y&&b&&!M,T=b&&!_?g.length:o.length,w,v,L,S,k,P;if(h=Array.isArray(h)?h:[],y)for(w=0;w<T;w++)for(A[w]=[],L=Array.isArray(o[w])?o[w]:[],_?k=g.length:b?k=g[w].length:k=L.length,v=0;v<k;v++)_?S=g[v]:b?S=g[w][v]:S=g,P=p(L[v],S,(h[w]||[])[v]),P!==void 0&&(A[w][v]=P);else for(w=0;w<T;w++)P=p(o[w],b?g[w]:g,h[w]),P!==void 0&&(A[w]=P);c.set(A)},validateFunction:function(o,c){if(!Array.isArray(o))return!1;var h=c.items,d=Array.isArray(h),p=c.dimensions===2;if(!c.freeLength&&o.length!==h.length)return!1;for(var y=0;y<o.length;y++)if(p){if(!Array.isArray(o[y])||!c.freeLength&&o[y].length!==h[y].length)return!1;for(var g=0;g<o[y].length;g++)if(!l(o[y][g],d?h[y][g]:h))return!1}else if(!l(o[y],d?h[y]:h))return!1;return!0}}},N.coerce=function(o,c,h,d,p){var y=a(h,d).get(),g=a(o,d),A=a(c,d),b=g.get(),M=c._template;if(b===void 0&&M&&(b=a(M,d).get(),M=0),p===void 0&&(p=y.dflt),y.arrayOk&&f(b))return A.set(b),b;var _=N.valObjectMeta[y.valType].coerceFunction;_(b,A,p,y);var T=A.get();return M&&T===p&&!l(b,y)&&(b=a(M,d).get(),_(b,A,p,y),T=A.get()),T},N.coerce2=function(o,c,h,d,p){var y=a(o,d),g=N.coerce(o,c,h,d,p),A=y.get();return A!=null?g:!1},N.coerceFont=function(o,c,h){var d={};return h=h||{},d.family=o(c+".family",h.family),d.size=o(c+".size",h.size),d.color=o(c+".color",h.color),d},N.coercePattern=function(o,c,h,d){var p=o(c+".shape");if(p){o(c+".solidity"),o(c+".size");var y=o(c+".fillmode"),g=y==="overlay";if(!d){var A=o(c+".bgcolor",g?h:void 0);o(c+".fgcolor",g?t.contrast(A):h)}o(c+".fgopacity",g?.5:1)}},N.coerceHoverinfo=function(o,c,h){var d=c._module.attributes,p=d.hoverinfo?d:m,y=p.hoverinfo,g;if(h._dataLength===1){var A=y.dflt==="all"?y.flags.slice():y.dflt.split("+");A.splice(A.indexOf("name"),1),g=A.join("+")}return N.coerce(o,c,p,"hoverinfo",g)},N.coerceSelectionMarkerOpacity=function(o,c){if(!!o.marker){var h=o.marker.opacity;if(h!==void 0){var d,p;!f(h)&&!o.selected&&!o.unselected&&(d=h,p=i*h),c("selected.marker.opacity",d),c("unselected.marker.opacity",p)}}};function l(o,c){var h=N.valObjectMeta[c.valType];if(c.arrayOk&&f(o))return!0;if(h.validateFunction)return h.validateFunction(o,c);var d={},p=d,y={set:function(g){p=g}};return h.coerceFunction(o,y,d,c),p!==d}N.validate=l},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(e,z,N){var u=e("d3-time-format").timeFormat,s=e("fast-isnumeric"),m=e("./loggers"),x=e("./mod").mod,t=e("../constants/numerical"),i=t.BADNUM,a=t.ONEDAY,r=t.ONEHOUR,n=t.ONEMIN,f=t.ONESEC,l=t.EPOCHJD,o=e("../registry"),c=e("d3-time-format").utcFormat,h=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,d=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,p=new Date().getFullYear()-70;function y(D){return D&&o.componentsRegistry.calendars&&typeof D=="string"&&D!=="gregorian"}N.dateTick0=function(D,U){var B=g(D,!!U);if(U<2)return B;var j=N.dateTime2ms(B,D);return j+=a*(U-1),N.ms2DateTime(j,0,D)};function g(D,U){return y(D)?U?o.getComponentMethod("calendars","CANONICAL_SUNDAY")[D]:o.getComponentMethod("calendars","CANONICAL_TICK")[D]:U?"2000-01-02":"2000-01-01"}N.dfltRange=function(D){return y(D)?o.getComponentMethod("calendars","DFLTRANGE")[D]:["2000-01-01","2001-01-01"]},N.isJSDate=function(D){return typeof D=="object"&&D!==null&&typeof D.getTime=="function"};var A,b;N.dateTime2ms=function(D,U){if(N.isJSDate(D)){var B=D.getTimezoneOffset()*n,j=(D.getUTCMinutes()-D.getMinutes())*n+(D.getUTCSeconds()-D.getSeconds())*f+(D.getUTCMilliseconds()-D.getMilliseconds());if(j){var Z=3*n;B=B-Z/2+x(j-B+Z/2,Z)}return D=Number(D)-B,D>=A&&D<=b?D:i}if(typeof D!="string"&&typeof D!="number")return i;D=String(D);var ee=y(U),q=D.charAt(0);ee&&(q==="G"||q==="g")&&(D=D.substr(1),U="");var W=ee&&U.substr(0,7)==="chinese",J=D.match(W?d:h);if(!J)return i;var le=J[1],fe=J[3]||"1",se=Number(J[5]||1),H=Number(J[7]||0),Y=Number(J[9]||0),ne=Number(J[11]||0);if(ee){if(le.length===2)return i;le=Number(le);var te;try{var K=o.getComponentMethod("calendars","getCal")(U);if(W){var $=fe.charAt(fe.length-1)==="i";fe=parseInt(fe,10),te=K.newDate(le,K.toMonthIndex(le,fe,$),se)}else te=K.newDate(le,Number(fe),se)}catch{return i}return te?(te.toJD()-l)*a+H*r+Y*n+ne*f:i}le.length===2?le=(Number(le)+2e3-p)%100+p:le=Number(le),fe-=1;var ae=new Date(Date.UTC(2e3,fe,se,H,Y));return ae.setUTCFullYear(le),ae.getUTCMonth()!==fe||ae.getUTCDate()!==se?i:ae.getTime()+ne*f},A=N.MIN_MS=N.dateTime2ms("-9999"),b=N.MAX_MS=N.dateTime2ms("9999-12-31 23:59:59.9999"),N.isDateTime=function(D,U){return N.dateTime2ms(D,U)!==i};function M(D,U){return String(D+Math.pow(10,U)).substr(1)}var _=90*a,T=3*r,w=5*n;N.ms2DateTime=function(D,U,B){if(typeof D!="number"||!(D>=A&&D<=b))return i;U||(U=0);var j=Math.floor(x(D+.05,1)*10),Z=Math.round(D-j/10),ee,q,W,J,le,fe;if(y(B)){var se=Math.floor(Z/a)+l,H=Math.floor(x(D,a));try{ee=o.getComponentMethod("calendars","getCal")(B).fromJD(se).formatDate("yyyy-mm-dd")}catch{ee=c("G%Y-%m-%d")(new Date(Z))}if(ee.charAt(0)==="-")for(;ee.length<11;)ee="-0"+ee.substr(1);else for(;ee.length<10;)ee="0"+ee;q=U<_?Math.floor(H/r):0,W=U<_?Math.floor(H%r/n):0,J=U<T?Math.floor(H%n/f):0,le=U<w?H%f*10+j:0}else fe=new Date(Z),ee=c("%Y-%m-%d")(fe),q=U<_?fe.getUTCHours():0,W=U<_?fe.getUTCMinutes():0,J=U<T?fe.getUTCSeconds():0,le=U<w?fe.getUTCMilliseconds()*10+j:0;return v(ee,q,W,J,le)},N.ms2DateTimeLocal=function(D){if(!(D>=A+a&&D<=b-a))return i;var U=Math.floor(x(D+.05,1)*10),B=new Date(Math.round(D-U/10)),j=u("%Y-%m-%d")(B),Z=B.getHours(),ee=B.getMinutes(),q=B.getSeconds(),W=B.getUTCMilliseconds()*10+U;return v(j,Z,ee,q,W)};function v(D,U,B,j,Z){if((U||B||j||Z)&&(D+=" "+M(U,2)+":"+M(B,2),(j||Z)&&(D+=":"+M(j,2),Z))){for(var ee=4;Z%10==0;)ee-=1,Z/=10;D+="."+M(Z,ee)}return D}N.cleanDate=function(D,U,B){if(D===i)return U;if(N.isJSDate(D)||typeof D=="number"&&isFinite(D)){if(y(B))return m.error("JS Dates and milliseconds are incompatible with world calendars",D),U;if(D=N.ms2DateTimeLocal(+D),!D&&U!==void 0)return U}else if(!N.isDateTime(D,B))return m.error("unrecognized date",D),U;return D};var L=/%\d?f/g,S=/%h/g,k={"1":"1","2":"1","3":"2","4":"2"};function P(D,U,B,j){D=D.replace(L,function(ee){var q=Math.min(+ee.charAt(1)||6,6),W=(U/1e3%1+2).toFixed(q).substr(2).replace(/0+$/,"")||"0";return W});var Z=new Date(Math.floor(U+.05));if(D=D.replace(S,function(){return k[B("%q")(Z)]}),y(j))try{D=o.getComponentMethod("calendars","worldCalFmt")(D,U,j)}catch{return"Invalid"}return B(D)(Z)}var O=[59,59.9,59.99,59.999,59.9999];function F(D,U){var B=x(D+.05,a),j=M(Math.floor(B/r),2)+":"+M(x(Math.floor(B/n),60),2);if(U!=="M"){s(U)||(U=0);var Z=Math.min(x(D/f,60),O[U]),ee=(100+Z).toFixed(U).substr(1);U>0&&(ee=ee.replace(/0+$/,"").replace(/[\.]$/,"")),j+=":"+ee}return j}N.formatDate=function(D,U,B,j,Z,ee){if(Z=y(Z)&&Z,!U)if(B==="y")U=ee.year;else if(B==="m")U=ee.month;else if(B==="d")U=ee.dayMonth+`
`+ee.year;else return F(D,B)+`
`+P(ee.dayMonthYear,D,j,Z);return P(U,D,j,Z)};var I=3*a;N.incrementMonth=function(D,U,B){B=y(B)&&B;var j=x(D,a);if(D=Math.round(D-j),B)try{var Z=Math.round(D/a)+l,ee=o.getComponentMethod("calendars","getCal")(B),q=ee.fromJD(Z);return U%12?ee.add(q,U,"m"):ee.add(q,U/12,"y"),(q.toJD()-l)*a+j}catch{m.error("invalid ms "+D+" in calendar "+B)}var W=new Date(D+I);return W.setUTCMonth(W.getUTCMonth()+U)+j-I},N.findExactDates=function(D,U){for(var B=0,j=0,Z=0,ee=0,q,W,J=y(U)&&o.getComponentMethod("calendars","getCal")(U),le=0;le<D.length;le++){if(W=D[le],!s(W)){ee++;continue}if(!(W%a))if(J)try{q=J.fromJD(W/a+l),q.day()===1?q.month()===1?B++:j++:Z++}catch{}else q=new Date(W),q.getUTCDate()===1?q.getUTCMonth()===0?B++:j++:Z++}j+=B,Z+=j;var fe=D.length-ee;return{exactYears:B/fe,exactMonths:j/fe,exactDays:Z/fe}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(e,z,N){var u=e("@plotly/d3"),s=e("./loggers"),m=e("./matrix"),x=e("gl-mat4");function t(p){var y;if(typeof p=="string"){if(y=document.getElementById(p),y===null)throw new Error("No DOM element with id '"+p+"' exists on the page.");return y}else if(p==null)throw new Error("DOM element provided is null or undefined");return p}function i(p){var y=u.select(p);return y.node()instanceof HTMLElement&&y.size()&&y.classed("js-plotly-plot")}function a(p){var y=p&&p.parentNode;y&&y.removeChild(p)}function r(p,y){n("global",p,y)}function n(p,y,g){var A="plotly.js-style-"+p,b=document.getElementById(A);b||(b=document.createElement("style"),b.setAttribute("id",A),b.appendChild(document.createTextNode("")),document.head.appendChild(b));var M=b.sheet;M.insertRule?M.insertRule(y+"{"+g+"}",0):M.addRule?M.addRule(y,g,0):s.warn("addStyleRule failed")}function f(p){var y="plotly.js-style-"+p,g=document.getElementById(y);g&&a(g)}function l(p){var y=c(p),g=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return y.forEach(function(A){var b=o(A);if(b){var M=m.convertCssMatrix(b);g=x.multiply(g,g,M)}}),g}function o(p){var y=window.getComputedStyle(p,null),g=y.getPropertyValue("-webkit-transform")||y.getPropertyValue("-moz-transform")||y.getPropertyValue("-ms-transform")||y.getPropertyValue("-o-transform")||y.getPropertyValue("transform");return g==="none"?null:g.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(A){return+A})}function c(p){for(var y=[];h(p);)y.push(p),p=p.parentNode;return y}function h(p){return p&&(p instanceof Element||p instanceof HTMLElement)}function d(p,y){return p&&y&&p.x===y.x&&p.y===y.y&&p.top===y.top&&p.left===y.left&&p.right===y.right&&p.bottom===y.bottom}z.exports={getGraphDiv:t,isPlotDiv:i,removeElement:a,addStyleRule:r,addRelatedStyleRule:n,deleteRelatedStyleRule:f,getFullTransformMatrix:l,getElementTransformMatrix:o,getElementAndAncestors:c,equalDomRects:d}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(e,z,N){var u=e("events").EventEmitter,s={init:function(m){if(m._ev instanceof u)return m;var x=new u,t=new u;return m._ev=x,m._internalEv=t,m.on=x.on.bind(x),m.once=x.once.bind(x),m.removeListener=x.removeListener.bind(x),m.removeAllListeners=x.removeAllListeners.bind(x),m._internalOn=t.on.bind(t),m._internalOnce=t.once.bind(t),m._removeInternalListener=t.removeListener.bind(t),m._removeAllInternalListeners=t.removeAllListeners.bind(t),m.emit=function(i,a){typeof jQuery!="undefined"&&jQuery(m).trigger(i,a),x.emit(i,a),t.emit(i,a)},m},triggerHandler:function(m,x,t){var i,a;typeof jQuery!="undefined"&&(i=jQuery(m).triggerHandler(x,t));var r=m._ev;if(!r)return i;var n=r._events[x];if(!n)return i;function f(o){if(o.listener){if(r.removeListener(x,o.listener),!o.fired)return o.fired=!0,o.listener.apply(r,[t])}else return o.apply(r,[t])}n=Array.isArray(n)?n:[n];var l;for(l=0;l<n.length-1;l++)f(n[l]);return a=f(n[l]),i!==void 0?i:a},purge:function(m){return delete m._ev,delete m.on,delete m.once,delete m.removeListener,delete m.removeAllListeners,delete m.emit,delete m._ev,delete m._internalEv,delete m._internalOn,delete m._internalOnce,delete m._removeInternalListener,delete m._removeAllInternalListeners,m}};z.exports=s},{events:84}],493:[function(e,z,N){var u=e("./is_plain_object.js"),s=Array.isArray;function m(t,i){var a,r;for(a=0;a<t.length;a++){if(r=t[a],r!==null&&typeof r=="object")return!1;r!==void 0&&(i[a]=r)}return!0}N.extendFlat=function(){return x(arguments,!1,!1,!1)},N.extendDeep=function(){return x(arguments,!0,!1,!1)},N.extendDeepAll=function(){return x(arguments,!0,!0,!1)},N.extendDeepNoArrays=function(){return x(arguments,!0,!1,!0)};function x(t,i,a,r){var n=t[0],f=t.length,l,o,c,h,d,p,y;if(f===2&&s(n)&&s(t[1])&&n.length===0){if(y=m(t[1],n),y)return n;n.splice(0,n.length)}for(var g=1;g<f;g++){l=t[g];for(o in l)c=n[o],h=l[o],r&&s(h)?n[o]=h:i&&h&&(u(h)||(d=s(h)))?(d?(d=!1,p=c&&s(c)?c:[]):p=c&&u(c)?c:{},n[o]=x([p,h],i,a,r)):(typeof h!="undefined"||a)&&(n[o]=h)}return n}},{"./is_plain_object.js":504}],494:[function(e,z,N){z.exports=function(s){for(var m={},x=[],t=0,i=0;i<s.length;i++){var a=s[i];m[a]!==1&&(m[a]=1,x[t++]=a)}return x}},{}],495:[function(e,z,N){z.exports=function(t){for(var i=m(t)?s:u,a=[],r=0;r<t.length;r++){var n=t[r];i(n)&&a.push(n)}return a};function u(x){return x.visible===!0}function s(x){var t=x[0].trace;return t.visible===!0&&t._length!==0}function m(x){return Array.isArray(x)&&Array.isArray(x[0])&&x[0][0]&&x[0][0].trace}},{}],496:[function(e,z,N){var u=e("@plotly/d3"),s=e("country-regex"),m=e("@turf/area"),x=e("@turf/centroid"),t=e("@turf/bbox"),i=e("./identity"),a=e("./loggers"),r=e("./is_plain_object"),n=e("./nested_property"),f=e("./polygon"),l=Object.keys(s),o={"ISO-3":i,"USA-states":i,"country names":c};function c(M){for(var _=0;_<l.length;_++){var T=l[_],w=new RegExp(s[T]);if(w.test(M.trim().toLowerCase()))return T}return a.log("Unrecognized country name: "+M+"."),!1}function h(M,_,T){if(!_||typeof _!="string")return!1;var w=o[M](_),v,L,S;if(w){if(M==="USA-states")for(v=[],S=0;S<T.length;S++)L=T[S],L.properties&&L.properties.gu&&L.properties.gu==="USA"&&v.push(L);else v=T;for(S=0;S<v.length;S++)if(L=v[S],L.id===w)return L;a.log(["Location with id",w,"does not have a matching topojson feature at this resolution."].join(" "))}return!1}function d(M){var _=M.geometry,T=_.coordinates,w=M.id,v=[],L,S,k,P;function O(F){for(var I=0;I<F.length-1;I++)if(F[I][0]>0&&F[I+1][0]<0)return I;return null}switch(w==="RUS"||w==="FJI"?L=function(F){var I;if(O(F)===null)I=F;else for(I=new Array(F.length),P=0;P<F.length;P++)I[P]=[F[P][0]<0?F[P][0]+360:F[P][0],F[P][1]];v.push(f.tester(I))}:w==="ATA"?L=function(F){var I=O(F);if(I===null)return v.push(f.tester(F));var D=new Array(F.length+1),U=0;for(P=0;P<F.length;P++)P>I?D[U++]=[F[P][0]+360,F[P][1]]:P===I?(D[U++]=F[P],D[U++]=[F[P][0],-90]):D[U++]=F[P];var B=f.tester(D);B.pts.pop(),v.push(B)}:L=function(F){v.push(f.tester(F))},_.type){case"MultiPolygon":for(S=0;S<T.length;S++)for(k=0;k<T[S].length;k++)L(T[S][k]);break;case"Polygon":for(S=0;S<T.length;S++)L(T[S]);break}return v}function p(M){var _=M.geojson,T=window.PlotlyGeoAssets||{},w=typeof _=="string"?T[_]:_;return r(w)?w:(a.error("Oops ... something went wrong when fetching "+_),!1)}function y(M){var _=M[0].trace,T=p(_);if(!T)return!1;var w={},v=[],L;for(L=0;L<_._length;L++){var S=M[L];(S.loc||S.loc===0)&&(w[S.loc]=S)}function k(F){var I=n(F,_.featureidkey||"id").get(),D=w[I];if(D){var U=F.geometry;if(U.type==="Polygon"||U.type==="MultiPolygon"){var B={type:"Feature",id:I,geometry:U,properties:{}};B.properties.ct=g(B),D.fIn=F,D.fOut=B,v.push(B)}else a.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete w[I]}switch(T.type){case"FeatureCollection":var P=T.features;for(L=0;L<P.length;L++)k(P[L]);break;case"Feature":k(T);break;default:return a.warn(["Invalid GeoJSON type",(T.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var O in w)a.log(["Location *"+O+"*","does not have a matching feature with id-key","*"+_.featureidkey+"*."].join(" "));return v}function g(M){var _=M.geometry,T;if(_.type==="MultiPolygon")for(var w=_.coordinates,v=0,L=0;L<w.length;L++){var S={type:"Polygon",coordinates:w[L]},k=m.default(S);k>v&&(v=k,T=S)}else T=_;return x.default(T).geometry.coordinates}function A(M){var _=window.PlotlyGeoAssets||{},T=[];function w(P){return new Promise(function(O,F){u.json(P,function(I,D){if(I){delete _[P];var U=I.status===404?'GeoJSON at URL "'+P+'" does not exist.':"Unexpected error while fetching from "+P;return F(new Error(U))}return _[P]=D,O(D)})})}function v(P){return new Promise(function(O,F){var I=0,D=setInterval(function(){if(_[P]&&_[P]!=="pending")return clearInterval(D),O(_[P]);if(I>100)return clearInterval(D),F("Unexpected error while fetching from "+P);I++},50)})}for(var L=0;L<M.length;L++){var S=M[L][0].trace,k=S.geojson;typeof k=="string"&&(_[k]?_[k]==="pending"&&T.push(v(k)):(_[k]="pending",T.push(w(k))))}return T}function b(M){return t.default(M)}z.exports={locationToFeature:h,feature2polygons:d,getTraceGeojson:p,extractTraceFeature:y,fetchTraceGeoData:A,computeBbox:b}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(e,z,N){var u=e("../constants/numerical").BADNUM;N.calcTraceToLineCoords=function(s){for(var m=s[0].trace,x=m.connectgaps,t=[],i=[],a=0;a<s.length;a++){var r=s[a],n=r.lonlat;n[0]!==u?i.push(n):!x&&i.length>0&&(t.push(i),i=[])}return i.length>0&&t.push(i),t},N.makeLine=function(s){return s.length===1?{type:"LineString",coordinates:s[0]}:{type:"MultiLineString",coordinates:s}},N.makePolygon=function(s){if(s.length===1)return{type:"Polygon",coordinates:s};for(var m=new Array(s.length),x=0;x<s.length;x++)m[x]=[s[x]];return{type:"MultiPolygon",coordinates:m}},N.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(e,z,N){var u=e("./mod").mod;N.segmentsIntersect=s;function s(a,r,n,f,l,o,c,h){var d=n-a,p=l-a,y=c-l,g=f-r,A=o-r,b=h-o,M=d*b-y*g;if(M===0)return null;var _=(p*b-y*A)/M,T=(p*g-d*A)/M;return T<0||T>1||_<0||_>1?null:{x:a+d*_,y:r+g*_}}N.segmentDistance=function(r,n,f,l,o,c,h,d){if(s(r,n,f,l,o,c,h,d))return 0;var p=f-r,y=l-n,g=h-o,A=d-c,b=p*p+y*y,M=g*g+A*A,_=Math.min(m(p,y,b,o-r,c-n),m(p,y,b,h-r,d-n),m(g,A,M,r-o,n-c),m(g,A,M,f-o,l-c));return Math.sqrt(_)};function m(a,r,n,f,l){var o=f*a+l*r;if(o<0)return f*f+l*l;if(o>n){var c=f-a,h=l-r;return c*c+h*h}else{var d=f*r-l*a;return d*d/n}}var x,t,i;N.getTextLocation=function(r,n,f,l){if((r!==t||l!==i)&&(x={},t=r,i=l),x[f])return x[f];var o=r.getPointAtLength(u(f-l/2,n)),c=r.getPointAtLength(u(f+l/2,n)),h=Math.atan((c.y-o.y)/(c.x-o.x)),d=r.getPointAtLength(u(f,n)),p=(d.x*4+o.x+c.x)/6,y=(d.y*4+o.y+c.y)/6,g={x:p,y,theta:h};return x[f]=g,g},N.clearLocationCache=function(){t=null},N.getVisibleSegment=function(r,n,f){var l=n.left,o=n.right,c=n.top,h=n.bottom,d=0,p=r.getTotalLength(),y=p,g,A;function b(_){var T=r.getPointAtLength(_);_===0?g=T:_===p&&(A=T);var w=T.x<l?l-T.x:T.x>o?T.x-o:0,v=T.y<c?c-T.y:T.y>h?T.y-h:0;return Math.sqrt(w*w+v*v)}for(var M=b(d);M;){if(d+=M+f,d>y)return;M=b(d)}for(M=b(y);M;){if(y-=M+f,d>y)return;M=b(y)}return{min:d,max:y,len:y-d,total:p,isClosed:d===0&&y===p&&Math.abs(g.x-A.x)<.1&&Math.abs(g.y-A.y)<.1}},N.findPointOnPath=function(r,n,f,l){l=l||{};for(var o=l.pathLength||r.getTotalLength(),c=l.tolerance||.001,h=l.iterationLimit||30,d=r.getPointAtLength(0)[f]>r.getPointAtLength(o)[f]?-1:1,p=0,y=0,g=o,A,b,M;p<h;){if(A=(y+g)/2,b=r.getPointAtLength(A),M=b[f]-n,Math.abs(M)<c)return b;d*M>0?g=A:y=A,p++}return b}},{"./mod":510}],499:[function(e,z,N){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("color-normalize"),x=e("../components/colorscale"),t=e("../components/color/attributes").defaultLine,i=e("./array").isArrayOrTypedArray,a=m(t),r=1;function n(h,d){var p=h;return p[3]*=d,p}function f(h){if(u(h))return a;var d=m(h);return d.length?d:a}function l(h){return u(h)?h:r}function o(h,d,p){var y=h.color,g=i(y),A=i(d),b=x.extractOpts(h),M=[],_,T,w,v,L;if(b.colorscale!==void 0?_=x.makeColorScaleFuncFromTrace(h):_=f,g?T=function(k,P){return k[P]===void 0?a:m(_(k[P]))}:T=f,A?w=function(k,P){return k[P]===void 0?r:l(k[P])}:w=l,g||A)for(var S=0;S<p;S++)v=T(y,S),L=w(d,S),M[S]=n(v,L);else M=n(m(y),d);return M}function c(h){var d=x.extractOpts(h),p=d.colorscale;return d.reversescale&&(p=x.flipScale(d.colorscale)),p.map(function(y){var g=y[0],A=s(y[1]),b=A.toRgb();return{index:g,rgb:[b.r,b.g,b.b,b.a]}})}z.exports={formatColor:o,parseColorScale:c}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(e,z,N){var u=e("./identity");function s(m){return[m]}z.exports={keyFun:function(m){return m.key},repeat:s,descend:u,wrap:s,unwrap:function(m){return m[0]}}},{"./identity":501}],501:[function(e,z,N){z.exports=function(s){return s}},{}],502:[function(e,z,N){z.exports=function(s,m){if(!m)return s;var x=1/Math.abs(m),t=x>1?(x*s+x*m)/x:s+m,i=String(t).length;if(i>16){var a=String(m).length,r=String(s).length;if(i>=r+a){var n=parseFloat(t).toPrecision(12);n.indexOf("e+")===-1&&(t=+n)}}return t}},{}],503:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-time-format").utcFormat,m=e("d3-format").format,x=e("fast-isnumeric"),t=e("../constants/numerical"),i=t.FP_SAFE,a=-i,r=t.BADNUM,n=z.exports={};n.adjustFormat=function(fe){return!fe||/^\d[.]\df/.test(fe)||/[.]\d%/.test(fe)?fe:fe==="0.f"?"~f":/^\d%/.test(fe)?"~%":/^\ds/.test(fe)?"~s":!/^[~,.0$]/.test(fe)&&/[&fps]/.test(fe)?"~"+fe:fe};var f={};n.warnBadFormat=function(le){var fe=String(le);f[fe]||(f[fe]=1,n.warn('encountered bad format: "'+fe+'"'))},n.noFormat=function(le){return String(le)},n.numberFormat=function(le){var fe;try{fe=m(n.adjustFormat(le))}catch{return n.warnBadFormat(le),n.noFormat}return fe},n.nestedProperty=e("./nested_property"),n.keyedContainer=e("./keyed_container"),n.relativeAttr=e("./relative_attr"),n.isPlainObject=e("./is_plain_object"),n.toLogRange=e("./to_log_range"),n.relinkPrivateKeys=e("./relink_private");var l=e("./array");n.isTypedArray=l.isTypedArray,n.isArrayOrTypedArray=l.isArrayOrTypedArray,n.isArray1D=l.isArray1D,n.ensureArray=l.ensureArray,n.concat=l.concat,n.maxRowLength=l.maxRowLength,n.minRowLength=l.minRowLength;var o=e("./mod");n.mod=o.mod,n.modHalf=o.modHalf;var c=e("./coerce");n.valObjectMeta=c.valObjectMeta,n.coerce=c.coerce,n.coerce2=c.coerce2,n.coerceFont=c.coerceFont,n.coercePattern=c.coercePattern,n.coerceHoverinfo=c.coerceHoverinfo,n.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,n.validate=c.validate;var h=e("./dates");n.dateTime2ms=h.dateTime2ms,n.isDateTime=h.isDateTime,n.ms2DateTime=h.ms2DateTime,n.ms2DateTimeLocal=h.ms2DateTimeLocal,n.cleanDate=h.cleanDate,n.isJSDate=h.isJSDate,n.formatDate=h.formatDate,n.incrementMonth=h.incrementMonth,n.dateTick0=h.dateTick0,n.dfltRange=h.dfltRange,n.findExactDates=h.findExactDates,n.MIN_MS=h.MIN_MS,n.MAX_MS=h.MAX_MS;var d=e("./search");n.findBin=d.findBin,n.sorterAsc=d.sorterAsc,n.sorterDes=d.sorterDes,n.distinctVals=d.distinctVals,n.roundUp=d.roundUp,n.sort=d.sort,n.findIndexOfMin=d.findIndexOfMin,n.sortObjectKeys=e("./sort_object_keys");var p=e("./stats");n.aggNums=p.aggNums,n.len=p.len,n.mean=p.mean,n.median=p.median,n.midRange=p.midRange,n.variance=p.variance,n.stdev=p.stdev,n.interp=p.interp;var y=e("./matrix");n.init2dArray=y.init2dArray,n.transposeRagged=y.transposeRagged,n.dot=y.dot,n.translationMatrix=y.translationMatrix,n.rotationMatrix=y.rotationMatrix,n.rotationXYMatrix=y.rotationXYMatrix,n.apply3DTransform=y.apply3DTransform,n.apply2DTransform=y.apply2DTransform,n.apply2DTransform2=y.apply2DTransform2,n.convertCssMatrix=y.convertCssMatrix,n.inverseTransformMatrix=y.inverseTransformMatrix;var g=e("./angles");n.deg2rad=g.deg2rad,n.rad2deg=g.rad2deg,n.angleDelta=g.angleDelta,n.angleDist=g.angleDist,n.isFullCircle=g.isFullCircle,n.isAngleInsideSector=g.isAngleInsideSector,n.isPtInsideSector=g.isPtInsideSector,n.pathArc=g.pathArc,n.pathSector=g.pathSector,n.pathAnnulus=g.pathAnnulus;var A=e("./anchor_utils");n.isLeftAnchor=A.isLeftAnchor,n.isCenterAnchor=A.isCenterAnchor,n.isRightAnchor=A.isRightAnchor,n.isTopAnchor=A.isTopAnchor,n.isMiddleAnchor=A.isMiddleAnchor,n.isBottomAnchor=A.isBottomAnchor;var b=e("./geometry2d");n.segmentsIntersect=b.segmentsIntersect,n.segmentDistance=b.segmentDistance,n.getTextLocation=b.getTextLocation,n.clearLocationCache=b.clearLocationCache,n.getVisibleSegment=b.getVisibleSegment,n.findPointOnPath=b.findPointOnPath;var M=e("./extend");n.extendFlat=M.extendFlat,n.extendDeep=M.extendDeep,n.extendDeepAll=M.extendDeepAll,n.extendDeepNoArrays=M.extendDeepNoArrays;var _=e("./loggers");n.log=_.log,n.warn=_.warn,n.error=_.error;var T=e("./regex");n.counterRegex=T.counter;var w=e("./throttle");n.throttle=w.throttle,n.throttleDone=w.done,n.clearThrottle=w.clear;var v=e("./dom");n.getGraphDiv=v.getGraphDiv,n.isPlotDiv=v.isPlotDiv,n.removeElement=v.removeElement,n.addStyleRule=v.addStyleRule,n.addRelatedStyleRule=v.addRelatedStyleRule,n.deleteRelatedStyleRule=v.deleteRelatedStyleRule,n.getFullTransformMatrix=v.getFullTransformMatrix,n.getElementTransformMatrix=v.getElementTransformMatrix,n.getElementAndAncestors=v.getElementAndAncestors,n.equalDomRects=v.equalDomRects,n.clearResponsive=e("./clear_responsive"),n.preserveDrawingBuffer=e("./preserve_drawing_buffer"),n.makeTraceGroups=e("./make_trace_groups"),n._=e("./localize"),n.notifier=e("./notifier"),n.filterUnique=e("./filter_unique"),n.filterVisible=e("./filter_visible"),n.pushUnique=e("./push_unique"),n.increment=e("./increment"),n.cleanNumber=e("./clean_number"),n.ensureNumber=function(fe){return x(fe)?(fe=Number(fe),fe>i||fe<a?r:fe):r},n.isIndex=function(le,fe){return fe!==void 0&&le>=fe?!1:x(le)&&le>=0&&le%1==0},n.noop=e("./noop"),n.identity=e("./identity"),n.repeat=function(le,fe){for(var se=new Array(fe),H=0;H<fe;H++)se[H]=le;return se},n.swapAttrs=function(le,fe,se,H){se||(se="x"),H||(H="y");for(var Y=0;Y<fe.length;Y++){var ne=fe[Y],te=n.nestedProperty(le,ne.replace("?",se)),K=n.nestedProperty(le,ne.replace("?",H)),$=te.get();te.set(K.get()),K.set($)}},n.raiseToTop=function(fe){fe.parentNode.appendChild(fe)},n.cancelTransition=function(le){return le.transition().duration(0)},n.constrain=function(le,fe,se){return fe>se?Math.max(se,Math.min(fe,le)):Math.max(fe,Math.min(se,le))},n.bBoxIntersect=function(le,fe,se){return se=se||0,le.left<=fe.right+se&&fe.left<=le.right+se&&le.top<=fe.bottom+se&&fe.top<=le.bottom+se},n.simpleMap=function(le,fe,se,H,Y){for(var ne=le.length,te=new Array(ne),K=0;K<ne;K++)te[K]=fe(le[K],se,H,Y);return te},n.randstr=function le(fe,se,H,Y){if(H||(H=16),se===void 0&&(se=24),se<=0)return"0";var ne=Math.log(Math.pow(2,se))/Math.log(H),te="",K,$,ae;for(K=2;ne===1/0;K*=2)ne=Math.log(Math.pow(2,se/K))/Math.log(H)*K;var ie=ne-Math.floor(ne);for(K=0;K<Math.floor(ne);K++)ae=Math.floor(Math.random()*H).toString(H),te=ae+te;ie&&($=Math.pow(H,ie),ae=Math.floor(Math.random()*$).toString(H),te=ae+te);var oe=parseInt(te,H);return fe&&fe[te]||oe!==1/0&&oe>=Math.pow(2,se)?Y>10?(n.warn("randstr failed uniqueness"),te):le(fe,se,H,(Y||0)+1):te},n.OptionControl=function(le,fe){le||(le={}),fe||(fe="opt");var se={};return se.optionList=[],se._newoption=function(H){H[fe]=le,se[H.name]=H,se.optionList.push(H)},se["_"+fe]=le,se},n.smooth=function(le,fe){if(fe=Math.round(fe)||0,fe<2)return le;var se=le.length,H=2*se,Y=2*fe-1,ne=new Array(Y),te=new Array(se),K,$,ae,ie;for(K=0;K<Y;K++)ne[K]=(1-Math.cos(Math.PI*(K+1)/fe))/(2*fe);for(K=0;K<se;K++){for(ie=0,$=0;$<Y;$++)ae=K+$+1-fe,ae<-se?ae-=H*Math.round(ae/H):ae>=H&&(ae-=H*Math.floor(ae/H)),ae<0?ae=-1-ae:ae>=se&&(ae=H-1-ae),ie+=le[ae]*ne[$];te[K]=ie}return te},n.syncOrAsync=function(le,fe,se){var H,Y;function ne(){return n.syncOrAsync(le,fe,se)}for(;le.length;)if(Y=le.splice(0,1)[0],H=Y(fe),H&&H.then)return H.then(ne);return se&&se(fe)},n.stripTrailingSlash=function(le){return le.substr(-1)==="/"?le.substr(0,le.length-1):le},n.noneOrAll=function(le,fe,se){if(!!le){var H=!1,Y=!0,ne,te;for(ne=0;ne<se.length;ne++)te=le[se[ne]],te!=null?H=!0:Y=!1;if(H&&!Y)for(ne=0;ne<se.length;ne++)le[se[ne]]=fe[se[ne]]}},n.mergeArray=function(le,fe,se,H){var Y=typeof H=="function";if(n.isArrayOrTypedArray(le))for(var ne=Math.min(le.length,fe.length),te=0;te<ne;te++){var K=le[te];fe[te][se]=Y?H(K):K}},n.mergeArrayCastPositive=function(le,fe,se){return n.mergeArray(le,fe,se,function(H){var Y=+H;return isFinite(Y)&&Y>0?Y:0})},n.fillArray=function(le,fe,se,H){if(H=H||n.identity,n.isArrayOrTypedArray(le))for(var Y=0;Y<fe.length;Y++)fe[Y][se]=H(le[Y])},n.castOption=function(le,fe,se,H){H=H||n.identity;var Y=n.nestedProperty(le,se).get();return n.isArrayOrTypedArray(Y)?Array.isArray(fe)&&n.isArrayOrTypedArray(Y[fe[0]])?H(Y[fe[0]][fe[1]]):H(Y[fe]):Y},n.extractOption=function(le,fe,se,H){if(se in le)return le[se];var Y=n.nestedProperty(fe,H).get();if(!Array.isArray(Y))return Y};function L(le){var fe={};for(var se in le)for(var H=le[se],Y=0;Y<H.length;Y++)fe[H[Y]]=+se;return fe}n.tagSelected=function(le,fe,se){var H=fe.selectedpoints,Y=fe._indexToPoints,ne;Y&&(ne=L(Y));function te(oe){return oe!==void 0&&oe<le.length}for(var K=0;K<H.length;K++){var $=H[K];if(n.isIndex($)||n.isArrayOrTypedArray($)&&n.isIndex($[0])&&n.isIndex($[1])){var ae=ne?ne[$]:$,ie=se?se[ae]:ae;te(ie)&&(le[ie].selected=1)}}},n.selIndices2selPoints=function(le){var fe=le.selectedpoints,se=le._indexToPoints;if(se){for(var H=L(se),Y=[],ne=0;ne<fe.length;ne++){var te=fe[ne];if(n.isIndex(te)){var K=H[te];n.isIndex(K)&&Y.push(K)}}return Y}else return fe},n.getTargetArray=function(le,fe){var se=fe.target;if(typeof se=="string"&&se){var H=n.nestedProperty(le,se).get();return Array.isArray(H)?H:!1}else if(Array.isArray(se))return se;return!1},n.minExtend=function(le,fe){var se={};typeof fe!="object"&&(fe={});var H=3,Y=Object.keys(le),ne,te,K;for(ne=0;ne<Y.length;ne++)te=Y[ne],K=le[te],!(te.charAt(0)==="_"||typeof K=="function")&&(te==="module"?se[te]=K:Array.isArray(K)?te==="colorscale"?se[te]=K.slice():se[te]=K.slice(0,H):n.isTypedArray(K)?se[te]=K.subarray(0,H):K&&typeof K=="object"?se[te]=n.minExtend(le[te],fe[te]):se[te]=K);for(Y=Object.keys(fe),ne=0;ne<Y.length;ne++)te=Y[ne],K=fe[te],(typeof K!="object"||!(te in se)||typeof se[te]!="object")&&(se[te]=K);return se},n.titleCase=function(le){return le.charAt(0).toUpperCase()+le.substr(1)},n.containsAny=function(le,fe){for(var se=0;se<fe.length;se++)if(le.indexOf(fe[se])!==-1)return!0;return!1},n.isIE=function(){return typeof window.navigator.msSaveBlob!="undefined"};var S=/Version\/[\d\.]+.*Safari/;n.isSafari=function(){return S.test(window.navigator.userAgent)};var k=/iPad|iPhone|iPod/;n.isIOS=function(){return k.test(window.navigator.userAgent)};var P=/Firefox\/(\d+)\.\d+/;n.getFirefoxVersion=function(){var le=P.exec(window.navigator.userAgent);if(le&&le.length===2){var fe=parseInt(le[1]);if(!isNaN(fe))return fe}return null},n.isD3Selection=function(le){return le instanceof u.selection},n.ensureSingle=function(le,fe,se,H){var Y=le.select(fe+(se?"."+se:""));if(Y.size())return Y;var ne=le.append(fe);return se&&ne.classed(se,!0),H&&ne.call(H),ne},n.ensureSingleById=function(le,fe,se,H){var Y=le.select(fe+"#"+se);if(Y.size())return Y;var ne=le.append(fe).attr("id",se);return H&&ne.call(H),ne},n.objectFromPath=function(le,fe){for(var se=le.split("."),H,Y=H={},ne=0;ne<se.length;ne++){var te=se[ne],K=null,$=se[ne].match(/(.*)\[([0-9]+)\]/);$?(te=$[1],K=$[2],H=H[te]=[],ne===se.length-1?H[K]=fe:H[K]={},H=H[K]):(ne===se.length-1?H[te]=fe:H[te]={},H=H[te])}return Y};var O=/^([^\[\.]+)\.(.+)?/,F=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;n.expandObjectPaths=function(le){var fe,se,H,Y,ne,te,K;if(typeof le=="object"&&!Array.isArray(le))for(se in le)le.hasOwnProperty(se)&&((fe=se.match(O))?(Y=le[se],H=fe[1],delete le[se],le[H]=n.extendDeepNoArrays(le[H]||{},n.objectFromPath(se,n.expandObjectPaths(Y))[H])):(fe=se.match(F))?(Y=le[se],H=fe[1],ne=parseInt(fe[2]),delete le[se],le[H]=le[H]||[],fe[3]==="."?(K=fe[4],te=le[H][ne]=le[H][ne]||{},n.extendDeepNoArrays(te,n.objectFromPath(K,n.expandObjectPaths(Y)))):le[H][ne]=n.expandObjectPaths(Y)):le[se]=n.expandObjectPaths(le[se]));return le},n.numSeparate=function(le,fe,se){if(se||(se=!1),typeof fe!="string"||fe.length===0)throw new Error("Separator string required for formatting!");typeof le=="number"&&(le=String(le));var H=/(\d+)(\d{3})/,Y=fe.charAt(0),ne=fe.charAt(1),te=le.split("."),K=te[0],$=te.length>1?Y+te[1]:"";if(ne&&(te.length>1||K.length>4||se))for(;H.test(K);)K=K.replace(H,"$1"+ne+"$2");return K+$},n.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var I=/^\w*$/;n.templateString=function(le,fe){var se={};return le.replace(n.TEMPLATE_STRING_REGEX,function(H,Y){var ne;return I.test(Y)?ne=fe[Y]:(se[Y]=se[Y]||n.nestedProperty(fe,Y).get,ne=se[Y]()),n.isValidTextValue(ne)?ne:""})};var D={max:10,count:0,name:"hovertemplate"};n.hovertemplateString=function(){return j.apply(D,arguments)};var U={max:10,count:0,name:"texttemplate"};n.texttemplateString=function(){return j.apply(U,arguments)};var B=/^[:|\|]/;function j(le,fe,se){var H=this,Y=arguments;fe||(fe={});var ne={};return le.replace(n.TEMPLATE_STRING_REGEX,function(te,K,$){var ae=K==="xother"||K==="yother",ie=K==="_xother"||K==="_yother",oe=K==="_xother_"||K==="_yother_",ue=K==="xother_"||K==="yother_",ye=ae||ie||ue||oe,ce=K;(ie||oe)&&(ce=ce.substring(1)),(ue||oe)&&(ce=ce.substring(0,ce.length-1));var me;if(ye){if(me=fe[ce],me===void 0)return""}else{var xe,ke;for(ke=3;ke<Y.length;ke++)if(xe=Y[ke],!!xe){if(xe.hasOwnProperty(ce)){me=xe[ce];break}if(I.test(ce)||(me=n.nestedProperty(xe,ce).get(),me=ne[ce]||n.nestedProperty(xe,ce).get(),me&&(ne[ce]=me)),me!==void 0)break}}if(me===void 0&&H)return H.count<H.max&&(n.warn("Variable '"+ce+"' in "+H.name+" could not be found!"),me=te),H.count===H.max&&n.warn("Too many "+H.name+" warnings - additional warnings will be suppressed"),H.count++,te;if($){var Ae;if($[0]===":"&&(Ae=se?se.numberFormat:n.numberFormat,me=Ae($.replace(B,""))(me)),$[0]==="|"){Ae=se?se.timeFormat:s;var Oe=n.dateTime2ms(me);me=n.formatDate(Oe,$.replace(B,""),!1,Ae)}}else{var He=ce+"Label";fe.hasOwnProperty(He)&&(me=fe[He])}return ye&&(me="("+me+")",(ie||oe)&&(me=" "+me),(ue||oe)&&(me=me+" ")),me})}var Z=48,ee=57;n.subplotSort=function(le,fe){for(var se=Math.min(le.length,fe.length)+1,H=0,Y=0,ne=0;ne<se;ne++){var te=le.charCodeAt(ne)||0,K=fe.charCodeAt(ne)||0,$=te>=Z&&te<=ee,ae=K>=Z&&K<=ee;if($&&(H=10*H+te-Z),ae&&(Y=10*Y+K-Z),!$||!ae){if(H!==Y)return H-Y;if(te!==K)return te-K}}return Y-H};var q=2e9;n.seedPseudoRandom=function(){q=2e9},n.pseudoRandom=function(){var le=q;return q=(69069*q+1)%4294967296,Math.abs(q-le)<429496729?n.pseudoRandom():q/4294967296},n.fillText=function(le,fe,se){var H=Array.isArray(se)?function(te){se.push(te)}:function(te){se.text=te},Y=n.extractOption(le,fe,"htx","hovertext");if(n.isValidTextValue(Y))return H(Y);var ne=n.extractOption(le,fe,"tx","text");if(n.isValidTextValue(ne))return H(ne)},n.isValidTextValue=function(le){return le||le===0},n.formatPercent=function(le,fe){fe=fe||0;for(var se=(Math.round(100*le*Math.pow(10,fe))*Math.pow(.1,fe)).toFixed(fe)+"%",H=0;H<fe;H++)se.indexOf(".")!==-1&&(se=se.replace("0%","%"),se=se.replace(".%","%"));return se},n.isHidden=function(le){var fe=window.getComputedStyle(le).display;return!fe||fe==="none"},n.strTranslate=function(le,fe){return le||fe?"translate("+le+","+fe+")":""},n.strRotate=function(le){return le?"rotate("+le+")":""},n.strScale=function(le){return le!==1?"scale("+le+")":""},n.getTextTransform=function(le){var fe=le.noCenter,se=le.textX,H=le.textY,Y=le.targetX,ne=le.targetY,te=le.anchorX||0,K=le.anchorY||0,$=le.rotate,ae=le.scale;return ae?ae>1&&(ae=1):ae=0,n.strTranslate(Y-ae*(se+te),ne-ae*(H+K))+n.strScale(ae)+($?"rotate("+$+(fe?"":" "+se+" "+H)+")":"")},n.ensureUniformFontSize=function(le,fe){var se=n.extendFlat({},fe);return se.size=Math.max(fe.size,le._fullLayout.uniformtext.minsize||0),se},n.join2=function(le,fe,se){var H=le.length;return H>1?le.slice(0,-1).join(fe)+se+le[H-1]:le.join(fe)},n.bigFont=function(le){return Math.round(1.2*le)};var W=n.getFirefoxVersion(),J=W!==null&&W<86;n.getPositionFromD3Event=function(){return J?[u.event.layerX,u.event.layerY]:[u.event.offsetX,u.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(e,z,N){z.exports=function(s){return window&&window.process&&window.process.versions?Object.prototype.toString.call(s)==="[object Object]":Object.prototype.toString.call(s)==="[object Object]"&&Object.getPrototypeOf(s).hasOwnProperty("hasOwnProperty")}},{}],505:[function(e,z,N){var u=e("./nested_property"),s=/^\w*$/,m=0,x=1,t=2,i=3,a=4;z.exports=function(n,f,l,o){l=l||"name",o=o||"value";var c,h,d,p={};f&&f.length?(d=u(n,f),h=d.get()):h=n,f=f||"";var y={};if(h)for(c=0;c<h.length;c++)y[h[c][l]]=c;var g=s.test(o),A={set:function(b,M){var _=M===null?a:m;if(!h){if(!d||_===a)return;h=[],d.set(h)}var T=y[b];if(T===void 0){if(_===a)return;_=_|i,T=h.length,y[b]=T}else M!==(g?h[T][o]:u(h[T],o).get())&&(_=_|t);var w=h[T]=h[T]||{};return w[l]=b,g?w[o]=M:u(w,o).set(M),M!==null&&(_=_&~a),p[T]=p[T]|_,A},get:function(b){if(!!h){var M=y[b];if(M!==void 0)return g?h[M][o]:u(h[M],o).get()}},rename:function(b,M){var _=y[b];return _===void 0||(p[_]=p[_]|x,y[M]=_,delete y[b],h[_][l]=M),A},remove:function(b){var M=y[b];if(M===void 0)return A;var _=h[M];if(Object.keys(_).length>2)return p[M]=p[M]|t,A.set(b,null);if(g){for(c=M;c<h.length;c++)p[c]=p[c]|i;for(c=M;c<h.length;c++)y[h[c][l]]--;h.splice(M,1),delete y[b]}else u(_,o).set(null),p[M]=p[M]|t|a;return A},constructUpdate:function(){for(var b,M,_={},T=Object.keys(p),w=0;w<T.length;w++)M=T[w],b=f+"["+M+"]",h[M]?(p[M]&x&&(_[b+"."+l]=h[M][l]),p[M]&t&&(g?_[b+"."+o]=p[M]&a?null:h[M][o]:_[b+"."+o]=p[M]&a?null:u(h[M],o).get())):_[b]=null;return _}};return A}},{"./nested_property":511}],506:[function(e,z,N){var u=e("../registry");z.exports=function(m,x){for(var t=m._context.locale,i=0;i<2;i++){for(var a=m._context.locales,r=0;r<2;r++){var n=(a[t]||{}).dictionary;if(n){var f=n[x];if(f)return f}a=u.localeRegistry}var l=t.split("-")[0];if(l===t)break;t=l}return x}},{"../registry":638}],507:[function(e,z,N){var u=e("../plot_api/plot_config").dfltConfig,s=e("./notifier"),m=z.exports={};m.log=function(){var x;if(u.logging>1){var t=["LOG:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.trace.apply(console,t)}if(u.notifyOnLogging>1){var i=[];for(x=0;x<arguments.length;x++)i.push(arguments[x]);s(i.join("<br>"),"long")}},m.warn=function(){var x;if(u.logging>0){var t=["WARN:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.trace.apply(console,t)}if(u.notifyOnLogging>0){var i=[];for(x=0;x<arguments.length;x++)i.push(arguments[x]);s(i.join("<br>"),"stick")}},m.error=function(){var x;if(u.logging>0){var t=["ERROR:"];for(x=0;x<arguments.length;x++)t.push(arguments[x]);console.error.apply(console,t)}if(u.notifyOnLogging>0){var i=[];for(x=0;x<arguments.length;x++)i.push(arguments[x]);s(i.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(e,z,N){var u=e("@plotly/d3");z.exports=function(m,x,t){var i=m.selectAll("g."+t.replace(/\s/g,".")).data(x,function(r){return r[0].trace.uid});i.exit().remove(),i.enter().append("g").attr("class",t),i.order();var a=m.classed("rangeplot")?"nodeRangePlot3":"node3";return i.each(function(r){r[0][a]=u.select(this)}),i}},{"@plotly/d3":58}],509:[function(e,z,N){var u=e("gl-mat4");N.init2dArray=function(s,m){for(var x=new Array(s),t=0;t<s;t++)x[t]=new Array(m);return x},N.transposeRagged=function(s){var m=0,x=s.length,t,i;for(t=0;t<x;t++)m=Math.max(m,s[t].length);var a=new Array(m);for(t=0;t<m;t++)for(a[t]=new Array(x),i=0;i<x;i++)a[t][i]=s[i][t];return a},N.dot=function(s,m){if(!(s.length&&m.length)||s.length!==m.length)return null;var x=s.length,t,i;if(s[0].length)for(t=new Array(x),i=0;i<x;i++)t[i]=N.dot(s[i],m);else if(m[0].length){var a=N.transposeRagged(m);for(t=new Array(a.length),i=0;i<a.length;i++)t[i]=N.dot(s,a[i])}else for(t=0,i=0;i<x;i++)t+=s[i]*m[i];return t},N.translationMatrix=function(s,m){return[[1,0,s],[0,1,m],[0,0,1]]},N.rotationMatrix=function(s){var m=s*Math.PI/180;return[[Math.cos(m),-Math.sin(m),0],[Math.sin(m),Math.cos(m),0],[0,0,1]]},N.rotationXYMatrix=function(s,m,x){return N.dot(N.dot(N.translationMatrix(m,x),N.rotationMatrix(s)),N.translationMatrix(-m,-x))},N.apply3DTransform=function(s){return function(){var m=arguments,x=arguments.length===1?m[0]:[m[0],m[1],m[2]||0];return N.dot(s,[x[0],x[1],x[2],1]).slice(0,3)}},N.apply2DTransform=function(s){return function(){var m=arguments;m.length===3&&(m=m[0]);var x=arguments.length===1?m[0]:[m[0],m[1]];return N.dot(s,[x[0],x[1],1]).slice(0,2)}},N.apply2DTransform2=function(s){var m=N.apply2DTransform(s);return function(x){return m(x.slice(0,2)).concat(m(x.slice(2,4)))}},N.convertCssMatrix=function(s){if(s){var m=s.length;if(m===16)return s;if(m===6)return[s[0],s[1],0,0,s[2],s[3],0,0,0,0,1,0,s[4],s[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},N.inverseTransformMatrix=function(s){var m=[];return u.invert(m,s),[[m[0],m[1],m[2],m[3]],[m[4],m[5],m[6],m[7]],[m[8],m[9],m[10],m[11]],[m[12],m[13],m[14],m[15]]]}},{"gl-mat4":210}],510:[function(e,z,N){function u(m,x){var t=m%x;return t<0?t+x:t}function s(m,x){return Math.abs(m)>x/2?m-Math.round(m/x)*x:m}z.exports={mod:u,modHalf:s}},{}],511:[function(e,z,N){var u=e("fast-isnumeric"),s=e("./array").isArrayOrTypedArray;z.exports=function(o,c){if(u(c))c=String(c);else if(typeof c!="string"||c.substr(c.length-4)==="[-1]")throw"bad property string";for(var h=0,d=c.split("."),p,y,g;h<d.length;){if(p=String(d[h]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/),p){if(p[1])d[h]=p[1];else if(h===0)d.splice(0,1);else throw"bad property string";for(y=p[2].substr(1,p[2].length-2).split("]["),g=0;g<y.length;g++)h++,d.splice(h,0,Number(y[g]))}h++}return typeof o!="object"?f(o,c,d):{set:i(o,d,c),get:m(o,d),astr:c,parts:d,obj:o}};function m(l,o){return function(){var c=l,h,d,p,y,g;for(y=0;y<o.length-1;y++){if(h=o[y],h===-1){for(d=!0,p=[],g=0;g<c.length;g++)p[g]=m(c[g],o.slice(y+1))(),p[g]!==p[0]&&(d=!1);return d?p[0]:p}if(typeof h=="number"&&!s(c)||(c=c[h],typeof c!="object"||c===null))return}if(!(typeof c!="object"||c===null)&&(p=c[o[y]],p!==null))return p}}var x=/(^|\.)args\[/;function t(l,o){return l===void 0||l===null&&!o.match(x)}function i(l,o,c){return function(h){var d=l,p="",y=t(h,c),g,A;for(A=0;A<o.length-1;A++){if(g=o[A],typeof g=="number"&&!s(d))throw"array index but container is not an array";if(g===-1){if(y=!r(d,o.slice(A+1),h,c),y)break;return}if(!n(d,g,o[A+1],y))break;if(d=d[g],typeof d!="object"||d===null)throw"container is not an object";p=a(p,g)}if(y){if(A===o.length-1&&(delete d[o[A]],Array.isArray(d)&&+o[A]==d.length-1))for(;d.length&&d[d.length-1]===void 0;)d.pop()}else d[o[A]]=h}}function a(l,o){var c=o;return u(o)?c="["+o+"]":l&&(c="."+o),l+c}function r(l,o,c,h){var d=s(c),p=!0,y=c,g=h.replace("-1",0),A=d?!1:t(c,g),b=o[0],M;for(M=0;M<l.length;M++)g=h.replace("-1",M),d&&(y=c[M%c.length],A=t(y,g)),A&&(p=!1),!!n(l,M,b,A)&&i(l[M],o,h.replace("-1",M))(y);return p}function n(l,o,c,h){if(l[o]===void 0){if(h)return!1;typeof c=="number"?l[o]=[]:l[o]={}}return!0}function f(l,o,c){return{set:function(){throw"bad container"},get:function(){},astr:o,parts:c,obj:l}}},{"./array":485,"fast-isnumeric":190}],512:[function(e,z,N){z.exports=function(){}},{}],513:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=[];z.exports=function(x,t){if(m.indexOf(x)!==-1)return;m.push(x);var i=1e3;s(t)?i=t:t==="long"&&(i=3e3);var a=u.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0);var r=a.selectAll(".notifier-note").data(m);function n(f){f.duration(700).style("opacity",0).each("end",function(l){var o=m.indexOf(l);o!==-1&&m.splice(o,1),u.select(this).remove()})}r.enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(f){var l=u.select(this);l.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){l.transition().call(n)});for(var o=l.append("p"),c=f.split(/<br\s*\/?>/g),h=0;h<c.length;h++)h&&o.append("br"),o.append("span").text(c[h]);t==="stick"?l.transition().duration(350).style("opacity",1):l.transition().duration(700).style("opacity",1).transition().delay(i).call(n)})}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(e,z,N){var u=e("./setcursor"),s="data-savedcursor",m="!!";z.exports=function(t,i){var a=t.attr(s);if(i){if(!a){for(var r=(t.attr("class")||"").split(" "),n=0;n<r.length;n++){var f=r[n];f.indexOf("cursor-")===0&&t.attr(s,f.substr(7)).classed(f,!1)}t.attr(s)||t.attr(s,m)}u(t,i)}else a&&(t.attr(s,null),a===m?u(t):u(t,a))}},{"./setcursor":524}],515:[function(e,z,N){var u=e("./matrix").dot,s=e("../constants/numerical").BADNUM,m=z.exports={};m.tester=function(t){var i=t.slice(),a=i[0][0],r=a,n=i[0][1],f=n,l;for(i.push(i[0]),l=1;l<i.length;l++)a=Math.min(a,i[l][0]),r=Math.max(r,i[l][0]),n=Math.min(n,i[l][1]),f=Math.max(f,i[l][1]);var o=!1,c;i.length===5&&(i[0][0]===i[1][0]?i[2][0]===i[3][0]&&i[0][1]===i[3][1]&&i[1][1]===i[2][1]&&(o=!0,c=function(g){return g[0]===i[0][0]}):i[0][1]===i[1][1]&&i[2][1]===i[3][1]&&i[0][0]===i[3][0]&&i[1][0]===i[2][0]&&(o=!0,c=function(g){return g[1]===i[0][1]}));function h(g,A){var b=g[0],M=g[1];return!(b===s||b<a||b>r||M===s||M<n||M>f||A&&c(g))}function d(g,A){var b=g[0],M=g[1];if(b===s||b<a||b>r||M===s||M<n||M>f)return!1;var _=i.length,T=i[0][0],w=i[0][1],v=0,L,S,k,P,O;for(L=1;L<_;L++)if(S=T,k=w,T=i[L][0],w=i[L][1],P=Math.min(S,T),!(b<P||b>Math.max(S,T)||M>Math.max(k,w)))if(M<Math.min(k,w))b!==P&&v++;else{if(T===S?O=M:O=k+(b-S)*(w-k)/(T-S),M===O)return!(L===1&&A);M<=O&&b!==P&&v++}return v%2==1}var p=!0,y=i[0];for(l=1;l<i.length;l++)if(y[0]!==i[l][0]||y[1]!==i[l][1]){p=!1;break}return{xmin:a,xmax:r,ymin:n,ymax:f,pts:i,contains:o?h:d,isRect:o,degenerate:p}},m.isSegmentBent=function(t,i,a,r){var n=t[i],f=[t[a][0]-n[0],t[a][1]-n[1]],l=u(f,f),o=Math.sqrt(l),c=[-f[1]/o,f[0]/o],h,d,p;for(h=i+1;h<a;h++)if(d=[t[h][0]-n[0],t[h][1]-n[1]],p=u(d,f),p<0||p>l||Math.abs(u(d,c))>r)return!0;return!1},m.filter=function(t,i){var a=[t[0]],r=0,n=0;function f(o){t.push(o);var c=a.length,h=r;a.splice(n+1);for(var d=h+1;d<t.length;d++)(d===t.length-1||m.isSegmentBent(t,h,d+1,i))&&(a.push(t[d]),a.length<c-2&&(r=d,n=a.length-1),h=d)}if(t.length>1){var l=t.pop();f(l)}return{addPt:f,raw:t,filtered:a}}},{"../constants/numerical":479,"./matrix":509}],516:[function(e,z,N){(function(u){(function(){var s=e("./show_no_webgl_msg"),m=e("regl");z.exports=function(t,i){var a=t._fullLayout,r=!0;return a._glcanvas.each(function(n){if(!n.regl&&!(n.pick&&!a._has("parcoords"))){try{n.regl=m({canvas:this,attributes:{antialias:!n.pick,preserveDrawingBuffer:!0},pixelRatio:t._context.plotGlPixelRatio||u.devicePixelRatio,extensions:i||[]})}catch{r=!1}n.regl||(r=!1),r&&this.addEventListener("webglcontextlost",function(f){t&&t.emit&&t.emit("plotly_webglcontextlost",{event:f,layer:n.key})},!1)}}),r||s({container:a._glcontainer.node()}),r}}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(e,z,N){var u=e("fast-isnumeric"),s=e("is-mobile");z.exports=function(t){var i;if(t&&t.hasOwnProperty("userAgent")?i=t.userAgent:i=m(),typeof i!="string")return!0;var a=s({ua:{headers:{"user-agent":i}},tablet:!0,featureDetect:!1});if(!a)for(var r=i.split(" "),n=1;n<r.length;n++){var f=r[n];if(f.indexOf("Safari")!==-1)for(var l=n-1;l>-1;l--){var o=r[l];if(o.substr(0,8)==="Version/"){var c=o.substr(8).split(".")[0];if(u(c)&&(c=+c),c>=13)return!0}}}return a};function m(){var x;return typeof navigator!="undefined"&&(x=navigator.userAgent),x&&x.headers&&typeof x.headers["user-agent"]=="string"&&(x=x.headers["user-agent"]),x}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(e,z,N){z.exports=function(s,m){if(m instanceof RegExp){for(var x=m.toString(),t=0;t<s.length;t++)if(s[t]instanceof RegExp&&s[t].toString()===x)return s;s.push(m)}else(m||m===0)&&s.indexOf(m)===-1&&s.push(m);return s}},{}],519:[function(e,z,N){var u=e("../lib"),s=e("../plot_api/plot_config").dfltConfig;function m(t,i){for(var a=[],r,n=0;n<i.length;n++)r=i[n],r===t?a[n]=r:typeof r=="object"?a[n]=Array.isArray(r)?u.extendDeep([],r):u.extendDeepAll({},r):a[n]=r;return a}var x={};x.add=function(t,i,a,r,n){var f,l;if(t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},l=t.undoQueue.index,t.autoplay){t.undoQueue.inSequence||(t.autoplay=!1);return}!t.undoQueue.sequence||t.undoQueue.beginSequence?(f={undo:{calls:[],args:[]},redo:{calls:[],args:[]}},t.undoQueue.queue.splice(l,t.undoQueue.queue.length-l,f),t.undoQueue.index+=1):f=t.undoQueue.queue[l-1],t.undoQueue.beginSequence=!1,f&&(f.undo.calls.unshift(i),f.undo.args.unshift(a),f.redo.calls.push(r),f.redo.args.push(n)),t.undoQueue.queue.length>s.queueLength&&(t.undoQueue.queue.shift(),t.undoQueue.index--)},x.startSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!0,t.undoQueue.beginSequence=!0},x.stopSequence=function(t){t.undoQueue=t.undoQueue||{index:0,queue:[],sequence:!1},t.undoQueue.sequence=!1,t.undoQueue.beginSequence=!1},x.undo=function(i){var a,r;if(!(i.undoQueue===void 0||isNaN(i.undoQueue.index)||i.undoQueue.index<=0)){for(i.undoQueue.index--,a=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,r=0;r<a.undo.calls.length;r++)x.plotDo(i,a.undo.calls[r],a.undo.args[r]);i.undoQueue.inSequence=!1,i.autoplay=!1}},x.redo=function(i){var a,r;if(!(i.undoQueue===void 0||isNaN(i.undoQueue.index)||i.undoQueue.index>=i.undoQueue.queue.length)){for(a=i.undoQueue.queue[i.undoQueue.index],i.undoQueue.inSequence=!0,r=0;r<a.redo.calls.length;r++)x.plotDo(i,a.redo.calls[r],a.redo.args[r]);i.undoQueue.inSequence=!1,i.autoplay=!1,i.undoQueue.index++}},x.plotDo=function(t,i,a){t.autoplay=!0,a=m(t,a),i.apply(null,a)},z.exports=x},{"../lib":503,"../plot_api/plot_config":541}],520:[function(e,z,N){N.counter=function(u,s,m,x){var t=(s||"")+(m?"":"$"),i=x===!1?"":"^";return u==="xy"?new RegExp(i+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+t):new RegExp(i+u+"([2-9]|[1-9][0-9]+)?"+t)}},{}],521:[function(e,z,N){var u=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,s=/^[^\.\[\]]+$/;z.exports=function(m,x){for(;x;){var t=m.match(u);if(t)m=t[1];else if(m.match(s))m="";else throw new Error("bad relativeAttr call:"+[m,x]);if(x.charAt(0)==="^")x=x.slice(1);else break}return m&&x.charAt(0)!=="["?m+"."+x:m+x}},{}],522:[function(e,z,N){var u=e("./array").isArrayOrTypedArray,s=e("./is_plain_object");z.exports=function m(x,t){for(var i in t){var a=t[i],r=x[i];if(r!==a)if(i.charAt(0)==="_"||typeof a=="function"){if(i in x)continue;x[i]=a}else if(u(a)&&u(r)&&s(a[0])){if(i==="customdata"||i==="ids")continue;for(var n=Math.min(a.length,r.length),f=0;f<n;f++)r[f]!==a[f]&&s(a[f])&&s(r[f])&&m(r[f],a[f])}else s(a)&&s(r)&&(m(r,a),Object.keys(r).length||delete x[i])}}},{"./array":485,"./is_plain_object":504}],523:[function(e,z,N){var u=e("fast-isnumeric"),s=e("./loggers"),m=e("./identity"),x=e("../constants/numerical").BADNUM,t=1e-9;N.findBin=function(f,l,o){if(u(l.start))return o?Math.ceil((f-l.start)/l.size-t)-1:Math.floor((f-l.start)/l.size+t);var c=0,h=l.length,d=0,p=h>1?(l[h-1]-l[0])/(h-1):1,y,g;for(p>=0?g=o?i:a:g=o?n:r,f+=p*t*(o?-1:1)*(p>=0?1:-1);c<h&&d++<100;)y=Math.floor((c+h)/2),g(l[y],f)?c=y+1:h=y;return d>90&&s.log("Long binary search..."),c-1};function i(f,l){return f<l}function a(f,l){return f<=l}function r(f,l){return f>l}function n(f,l){return f>=l}N.sorterAsc=function(f,l){return f-l},N.sorterDes=function(f,l){return l-f},N.distinctVals=function(f){var l=f.slice();l.sort(N.sorterAsc);var o;for(o=l.length-1;o>-1&&l[o]===x;o--);for(var c=l[o]-l[0]||1,h=c/(o||1)/1e4,d=[],p,y=0;y<=o;y++){var g=l[y],A=g-p;p===void 0?(d.push(g),p=g):A>h&&(c=Math.min(c,A),d.push(g),p=g)}return{vals:d,minDiff:c}},N.roundUp=function(f,l,o){for(var c=0,h=l.length-1,d,p=0,y=o?0:1,g=o?1:0,A=o?Math.ceil:Math.floor;c<h&&p++<100;)d=A((c+h)/2),l[d]<=f?c=d+y:h=d-g;return l[c]},N.sort=function(f,l){for(var o=0,c=0,h=1;h<f.length;h++){var d=l(f[h],f[h-1]);if(d<0?o=1:d>0&&(c=1),o&&c)return f.sort(l)}return c?f:f.reverse()},N.findIndexOfMin=function(f,l){l=l||m;for(var o=1/0,c,h=0;h<f.length;h++){var d=l(f[h]);d<o&&(o=d,c=h)}return c}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(e,z,N){z.exports=function(s,m){(s.attr("class")||"").split(" ").forEach(function(x){x.indexOf("cursor-")===0&&s.classed(x,!1)}),m&&s.classed("cursor-"+m,!0)}},{}],525:[function(e,z,N){var u=e("../components/color"),s=function(){};z.exports=function(x){for(var t in x)typeof x[t]=="function"&&(x[t]=s);x.destroy=function(){x.container.parentNode.removeChild(x.container)};var i=document.createElement("div");i.className="no-webgl",i.style.cursor="pointer",i.style.fontSize="24px",i.style.color=u.defaults[0],i.style.position="absolute",i.style.left=i.style.top="0px",i.style.width=i.style.height="100%",i.style["background-color"]=u.lightLine,i.style["z-index"]=30;var a=document.createElement("p");return a.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",a.style.position="relative",a.style.top="50%",a.style.left="50%",a.style.height="30%",a.style.width="50%",a.style.margin="-15% 0 0 -25%",i.appendChild(a),x.container.appendChild(i),x.container.style.background="#FFFFFF",x.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(e,z,N){z.exports=function(s){return Object.keys(s).sort()}},{}],527:[function(e,z,N){var u=e("fast-isnumeric"),s=e("./array").isArrayOrTypedArray;N.aggNums=function(m,x,t,i){var a,r;if((!i||i>t.length)&&(i=t.length),u(x)||(x=!1),s(t[0])){for(r=new Array(i),a=0;a<i;a++)r[a]=N.aggNums(m,x,t[a]);t=r}for(a=0;a<i;a++)u(x)?u(t[a])&&(x=m(+x,+t[a])):x=t[a];return x},N.len=function(m){return N.aggNums(function(x){return x+1},0,m)},N.mean=function(m,x){return x||(x=N.len(m)),N.aggNums(function(t,i){return t+i},0,m)/x},N.midRange=function(m){if(!(m===void 0||m.length===0))return(N.aggNums(Math.max,null,m)+N.aggNums(Math.min,null,m))/2},N.variance=function(m,x,t){return x||(x=N.len(m)),u(t)||(t=N.mean(m,x)),N.aggNums(function(i,a){return i+Math.pow(a-t,2)},0,m)/x},N.stdev=function(m,x,t){return Math.sqrt(N.variance(m,x,t))},N.median=function(m){var x=m.slice().sort();return N.interp(x,.5)},N.interp=function(m,x){if(!u(x))throw"n should be a finite number";if(x=x*m.length-.5,x<0)return m[0];if(x>m.length-1)return m[m.length-1];var t=x%1;return t*m[Math.ceil(x)]+(1-t)*m[Math.floor(x)]}},{"./array":485,"fast-isnumeric":190}],528:[function(e,z,N){var u=e("color-normalize");function s(m){return m?u(m):[0,0,0,1]}z.exports=s},{"color-normalize":89}],529:[function(e,z,N){var u=e("@plotly/d3"),s=e("../lib"),m=s.strTranslate,x=e("../constants/xmlns_namespaces"),t=e("../constants/alignment").LINE_SPACING,i=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;N.convertToTspans=function(U,B,j){var Z=U.text(),ee=!U.attr("data-notex")&&typeof MathJax!="undefined"&&Z.match(i),q=u.select(U.node().parentNode);if(q.empty())return;var W=U.attr("class")?U.attr("class").split(" ")[0]:"text";W+="-math",q.selectAll("svg."+W).remove(),q.selectAll("g."+W+"-group").remove(),U.style("display",null).attr({"data-unformatted":Z,"data-math":"N"});function J(){q.empty()||(W=U.attr("class")+"-math",q.select("svg."+W).remove()),U.text("").style("white-space","pre");var le=O(U.node(),Z);le&&U.style("pointer-events","all"),N.positionText(U),j&&j.call(U)}return ee?(B&&B._promises||[]).push(new Promise(function(le){U.style("display","none");var fe=parseInt(U.node().style.fontSize,10),se={fontSize:fe};f(ee[2],se,function(H,Y,ne){q.selectAll("svg."+W).remove(),q.selectAll("g."+W+"-group").remove();var te=H&&H.select("svg");if(!te||!te.node()){J(),le();return}var K=q.append("g").classed(W+"-group",!0).attr({"pointer-events":"none","data-unformatted":Z,"data-math":"Y"});K.node().appendChild(te.node()),Y&&Y.node()&&te.node().insertBefore(Y.node().cloneNode(!0),te.node().firstChild);var $=ne.width,ae=ne.height;te.attr({class:W,height:ae,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ie=U.node().style.fill||"black",oe=te.select("g");oe.attr({fill:ie,stroke:ie});var ue=oe.node().getBoundingClientRect(),ye=ue.width,ce=ue.height;(ye>$||ce>ae)&&(te.style("overflow","hidden"),ue=te.node().getBoundingClientRect(),ye=ue.width,ce=ue.height);var me=+U.attr("x"),xe=+U.attr("y"),ke=fe||U.node().getBoundingClientRect().height,Ae=-ke/4;if(W[0]==="y")K.attr({transform:"rotate("+[-90,me,xe]+")"+m(-ye/2,Ae-ce/2)});else if(W[0]==="l")xe=Ae-ce/2;else if(W[0]==="a"&&W.indexOf("atitle")!==0)me=0,xe=Ae;else{var Oe=U.attr("text-anchor");me=me-ye*(Oe==="middle"?.5:Oe==="end"?1:0),xe=xe+Ae-ce/2}te.attr({x:me,y:xe}),j&&j.call(U,K),le(K)})})):J(),U};var a=/(<|&lt;|&#60;)/g,r=/(>|&gt;|&#62;)/g;function n(U){return U.replace(a,"\\lt ").replace(r,"\\gt ")}function f(U,B,j){var Z,ee,q,W;MathJax.Hub.Queue(function(){return ee=s.extendDeepAll({},MathJax.Hub.config),q=MathJax.Hub.processSectionDelay,MathJax.Hub.processSectionDelay!==void 0&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if(Z=MathJax.Hub.config.menuSettings.renderer,Z!=="SVG")return MathJax.Hub.setRenderer("SVG")},function(){var J="math-output-"+s.randstr({},64);return W=u.select("body").append("div").attr({id:J}).style({visibility:"hidden",position:"absolute"}).style({"font-size":B.fontSize+"px"}).text(n(U)),MathJax.Hub.Typeset(W.node())},function(){var J=u.select("body").select("#MathJax_SVG_glyphs");if(W.select(".MathJax_SVG").empty()||!W.select("svg").node())s.log("There was an error in the tex syntax.",U),j();else{var le=W.select("svg").node().getBoundingClientRect();j(W.select(".MathJax_SVG"),J,le)}if(W.remove(),Z!=="SVG")return MathJax.Hub.setRenderer(Z)},function(){return q!==void 0&&(MathJax.Hub.processSectionDelay=q),MathJax.Hub.Config(ee)})}var l={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},o={sub:"0.3em",sup:"-0.6em"},c={sub:"-0.21em",sup:"0.42em"},h="\u200B",d=["http:","https:","mailto:","",void 0,":"],p=N.NEWLINES=/(\r\n?|\n)/g,y=/(<[^<>]*>)/,g=/<(\/?)([^ >]*)(\s+(.*))?>/i,A=/<br(\s+.*)?>/i;N.BR_TAG_ALL=/<br(\s+.*)?>/gi;var b=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,M=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,_=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,T=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function w(U,B){if(!U)return null;var j=U.match(B),Z=j&&(j[3]||j[4]);return Z&&k(Z)}var v=/(^|;)\s*color:/;N.plainText=function(U,B){B=B||{};for(var j=B.len!==void 0&&B.len!==-1?B.len:1/0,Z=B.allowedTags!==void 0?B.allowedTags:["br"],ee="...",q=ee.length,W=U.split(y),J=[],le="",fe=0,se=0;se<W.length;se++){var H=W[se],Y=H.match(g),ne=Y&&Y[2].toLowerCase();if(ne)Z.indexOf(ne)!==-1&&(J.push(H),le=ne);else{var te=H.length;if(fe+te<j)J.push(H),fe+=te;else if(fe<j){var K=j-fe;le&&(le!=="br"||K<=q||te<=q)&&J.pop(),j>q?J.push(H.substr(0,K-q)+ee):J.push(H.substr(0,K));break}le=""}}return J.join("")};var L={mu:"\u03BC",amp:"&",lt:"<",gt:">",nbsp:"\xA0",times:"\xD7",plusmn:"\xB1",deg:"\xB0"},S=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function k(U){return U.replace(S,function(B,j){var Z;return j.charAt(0)==="#"?Z=P(j.charAt(1)==="x"?parseInt(j.substr(2),16):parseInt(j.substr(1),10)):Z=L[j],Z||B})}N.convertEntities=k;function P(U){if(!(U>1114111)){var B=String.fromCodePoint;if(B)return B(U);var j=String.fromCharCode;return U<=65535?j(U):j((U>>10)+55232,U%1024+56320)}}function O(U,B){B=B.replace(p," ");var j=!1,Z=[],ee,q=-1;function W(){q++;var ce=document.createElementNS(x.svg,"tspan");u.select(ce).attr({class:"line",dy:q*t+"em"}),U.appendChild(ce),ee=ce;var me=Z;if(Z=[{node:ce}],me.length>1)for(var xe=1;xe<me.length;xe++)J(me[xe])}function J(ce){var me=ce.type,xe={},ke;if(me==="a"){ke="a";var Ae=ce.target,Oe=ce.href,He=ce.popup;Oe&&(xe={"xlink:xlink:show":Ae==="_blank"||Ae.charAt(0)!=="_"?"new":"replace",target:Ae,"xlink:xlink:href":Oe},He&&(xe.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+He+'");return false;'))}else ke="tspan";ce.style&&(xe.style=ce.style);var Ge=document.createElementNS(x.svg,ke);if(me==="sup"||me==="sub"){le(ee,h),ee.appendChild(Ge);var _e=document.createElementNS(x.svg,"tspan");le(_e,h),u.select(_e).attr("dy",c[me]),xe.dy=o[me],ee.appendChild(Ge),ee.appendChild(_e)}else ee.appendChild(Ge);u.select(Ge).attr(xe),ee=ce.node=Ge,Z.push(ce)}function le(ce,me){ce.appendChild(document.createTextNode(me))}function fe(ce){if(Z.length===1){s.log("Ignoring unexpected end tag </"+ce+">.",B);return}var me=Z.pop();ce!==me.type&&s.log("Start tag <"+me.type+"> doesnt match end tag <"+ce+">. Pretending it did match.",B),ee=Z[Z.length-1].node}var se=A.test(B);se?W():(ee=U,Z=[{node:U}]);for(var H=B.split(y),Y=0;Y<H.length;Y++){var ne=H[Y],te=ne.match(g),K=te&&te[2].toLowerCase(),$=l[K];if(K==="br")W();else if($===void 0)le(ee,k(ne));else if(te[1])fe(K);else{var ae=te[4],ie={type:K},oe=w(ae,b);if(oe?(oe=oe.replace(v,"$1 fill:"),$&&(oe+=";"+$)):$&&(oe=$),oe&&(ie.style=oe),K==="a"){j=!0;var ue=w(ae,M);if(ue){var ye=F(ue);ye&&(ie.href=ye,ie.target=w(ae,_)||"_blank",ie.popup=w(ae,T))}}J(ie)}}return j}function F(U){var B=encodeURI(decodeURI(U)),j=document.createElement("a"),Z=document.createElement("a");j.href=U,Z.href=B;var ee=j.protocol,q=Z.protocol;return d.indexOf(ee)!==-1&&d.indexOf(q)!==-1?B:""}N.sanitizeHTML=function(B){B=B.replace(p," ");for(var j=document.createElement("p"),Z=j,ee=[],q=B.split(y),W=0;W<q.length;W++){var J=q[W],le=J.match(g),fe=le&&le[2].toLowerCase();if(fe in l)if(le[1])ee.length&&(Z=ee.pop());else{var se=le[4],H=w(se,b),Y=H?{style:H}:{};if(fe==="a"){var ne=w(se,M);if(ne){var te=F(ne);if(te){Y.href=te;var K=w(se,_);K&&(Y.target=K)}}}var $=document.createElement(fe);Z.appendChild($),u.select($).attr(Y),Z=$,ee.push($)}else Z.appendChild(document.createTextNode(k(J)))}var ae="innerHTML";return j[ae]},N.lineCount=function(B){return B.selectAll("tspan.line").size()||1},N.positionText=function(B,j,Z){return B.each(function(){var ee=u.select(this);function q(le,fe){return fe===void 0?(fe=ee.attr(le),fe===null&&(ee.attr(le,0),fe=0)):ee.attr(le,fe),fe}var W=q("x",j),J=q("y",Z);this.nodeName==="text"&&ee.selectAll("tspan.line").attr({x:W,y:J})})};function I(U,B,j){var Z=j.horizontalAlign,ee=j.verticalAlign||"top",q=U.node().getBoundingClientRect(),W=B.node().getBoundingClientRect(),J,le,fe;return ee==="bottom"?le=function(){return q.bottom-J.height}:ee==="middle"?le=function(){return q.top+(q.height-J.height)/2}:le=function(){return q.top},Z==="right"?fe=function(){return q.right-J.width}:Z==="center"?fe=function(){return q.left+(q.width-J.width)/2}:fe=function(){return q.left},function(){J=this.node().getBoundingClientRect();var se=fe()-W.left,H=le()-W.top,Y=j.gd||{};if(j.gd){Y._fullLayout._calcInverseTransform(Y);var ne=s.apply3DTransform(Y._fullLayout._invTransform)(se,H);se=ne[0],H=ne[1]}return this.style({top:H+"px",left:se+"px","z-index":1e3}),this}}var D="1px ";N.makeTextShadow=function(U){var B=D,j=D,Z=D;return B+j+Z+U+", -"+B+"-"+j+Z+U+", "+B+"-"+j+Z+U+", -"+B+j+Z+U},N.makeEditable=function(U,B){var j=B.gd,Z=B.delegate,ee=u.dispatch("edit","input","cancel"),q=Z||U;if(U.style({"pointer-events":Z?"none":"all"}),U.size()!==1)throw new Error("boo");function W(){le(),U.style({opacity:0});var fe=q.attr("class"),se;fe?se="."+fe.split(" ")[0]+"-math-group":se="[class*=-math-group]",se&&u.select(U.node().parentNode).select(se).style({opacity:0})}function J(fe){var se=fe.node(),H=document.createRange();H.selectNodeContents(se);var Y=window.getSelection();Y.removeAllRanges(),Y.addRange(H),se.focus()}function le(){var fe=u.select(j),se=fe.select(".svg-container"),H=se.append("div"),Y=U.node().style,ne=parseFloat(Y.fontSize||12),te=B.text;te===void 0&&(te=U.attr("data-unformatted")),H.classed("plugin-editable editable",!0).style({position:"absolute","font-family":Y.fontFamily||"Arial","font-size":ne,color:B.fill||Y.fill||"black",opacity:1,"background-color":B.background||"transparent",outline:"#ffffff33 1px solid",margin:[-ne/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(te).call(I(U,se,B)).on("blur",function(){j._editing=!1,U.text(this.textContent).style({opacity:1});var K=u.select(this).attr("class"),$;K?$="."+K.split(" ")[0]+"-math-group":$="[class*=-math-group]",$&&u.select(U.node().parentNode).select($).style({opacity:0});var ae=this.textContent;u.select(this).transition().duration(0).remove(),u.select(document).on("mouseup",null),ee.edit.call(U,ae)}).on("focus",function(){var K=this;j._editing=!0,u.select(document).on("mouseup",function(){if(u.event.target===K)return!1;document.activeElement===H.node()&&H.node().blur()})}).on("keyup",function(){u.event.which===27?(j._editing=!1,U.style({opacity:1}),u.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),ee.cancel.call(U,this.textContent)):(ee.input.call(U,this.textContent),u.select(this).call(I(U,se,B)))}).on("keydown",function(){u.event.which===13&&this.blur()}).call(J)}return B.immediate?W():q.on("click",W),u.rebind(U,ee,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(e,z,N){var u={};N.throttle=function(x,t,i){var a=u[x],r=Date.now();if(!a){for(var n in u)u[n].ts<r-6e4&&delete u[n];a=u[x]={ts:0,timer:null}}s(a);function f(){i(),a.ts=Date.now(),a.onDone&&(a.onDone(),a.onDone=null)}if(r>a.ts+t){f();return}a.timer=setTimeout(function(){f(),a.timer=null},t)},N.done=function(m){var x=u[m];return!x||!x.timer?Promise.resolve():new Promise(function(t){var i=x.onDone;x.onDone=function(){i&&i(),t(),x.onDone=null}})},N.clear=function(m){if(m)s(u[m]),delete u[m];else for(var x in u)N.clear(x)};function s(m){m&&m.timer!==null&&(clearTimeout(m.timer),m.timer=null)}},{}],531:[function(e,z,N){var u=e("fast-isnumeric");z.exports=function(m,x){if(m>0)return Math.log(m)/Math.LN10;var t=Math.log(Math.min(x[0],x[1]))/Math.LN10;return u(t)||(t=Math.log(Math.max(x[0],x[1]))/Math.LN10-6),t}},{"fast-isnumeric":190}],532:[function(e,z,N){var u=z.exports={},s=e("../plots/geo/constants").locationmodeToLayer,m=e("topojson-client").feature;u.getTopojsonName=function(x){return[x.scope.replace(/ /g,"-"),"_",x.resolution.toString(),"m"].join("")},u.getTopojsonPath=function(x,t){return x+t+".json"},u.getTopojsonFeatures=function(x,t){var i=s[x.locationmode],a=t.objects[i];return m(t,a).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(e,z,N){z.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(e,z,N){z.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(e,z,N){var u=e("../registry");z.exports=function(m){for(var x=u.layoutArrayContainers,t=u.layoutArrayRegexes,i=m.split("[")[0],a,r,n=0;n<t.length;n++)if(r=m.match(t[n]),r&&r.index===0){a=r[0];break}if(a||(a=x[x.indexOf(i)]),!a)return!1;var f=m.substr(a.length);return f?(r=f.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/),r?{array:a,index:Number(r[1]),property:r[3]||""}:!1):{array:a,index:"",property:""}}},{"../registry":638}],536:[function(e,z,N){var u=e("../lib"),s=u.extendFlat,m=u.isPlainObject,x={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},t={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},i=x.flags.slice().concat(["fullReplot"]),a=t.flags.slice().concat("layoutReplot");z.exports={traces:x,layout:t,traceFlags:function(){return r(i)},layoutFlags:function(){return r(a)},update:function(l,o){var c=o.editType;if(c&&c!=="none")for(var h=c.split("+"),d=0;d<h.length;d++)l[h[d]]=!0},overrideAll:n};function r(l){for(var o={},c=0;c<l.length;c++)o[l[c]]=!1;return o}function n(l,o,c){var h=s({},l);for(var d in h){var p=h[d];m(p)&&(h[d]=f(p,o,c,d))}return c==="from-root"&&(h.editType=o),h}function f(l,o,c,h){if(l.valType){var d=s({},l);if(d.editType=o,Array.isArray(l.items)){d.items=new Array(l.items.length);for(var p=0;p<l.items.length;p++)d.items[p]=f(l.items[p],o)}return d}else return n(l,o,h.charAt(0)==="_"?"nested":"from-root")}},{"../lib":503}],537:[function(e,z,N){var u=e("fast-isnumeric"),s=e("gl-mat4/fromQuat"),m=e("../registry"),x=e("../lib"),t=e("../plots/plots"),i=e("../plots/cartesian/axis_ids"),a=e("../components/color"),r=i.cleanId,n=i.getFromTrace,f=m.traceIs;N.clearPromiseQueue=function(b){Array.isArray(b._promises)&&b._promises.length>0&&x.log("Clearing previous rejected promises from queue."),b._promises=[]},N.cleanLayout=function(b){var M,_;b||(b={}),b.xaxis1&&(b.xaxis||(b.xaxis=b.xaxis1),delete b.xaxis1),b.yaxis1&&(b.yaxis||(b.yaxis=b.yaxis1),delete b.yaxis1),b.scene1&&(b.scene||(b.scene=b.scene1),delete b.scene1);var T=(t.subplotsRegistry.cartesian||{}).attrRegex,w=(t.subplotsRegistry.polar||{}).attrRegex,v=(t.subplotsRegistry.ternary||{}).attrRegex,L=(t.subplotsRegistry.gl3d||{}).attrRegex,S=Object.keys(b);for(M=0;M<S.length;M++){var k=S[M];if(T&&T.test(k)){var P=b[k];P.anchor&&P.anchor!=="free"&&(P.anchor=r(P.anchor)),P.overlaying&&(P.overlaying=r(P.overlaying)),P.type||(P.isdate?P.type="date":P.islog?P.type="log":P.isdate===!1&&P.islog===!1&&(P.type="linear")),(P.autorange==="withzero"||P.autorange==="tozero")&&(P.autorange=!0,P.rangemode="tozero"),delete P.islog,delete P.isdate,delete P.categories,p(P,"domain")&&delete P.domain,P.autotick!==void 0&&(P.tickmode===void 0&&(P.tickmode=P.autotick?"auto":"linear"),delete P.autotick),o(P)}else if(w&&w.test(k)){var O=b[k];o(O.radialaxis)}else if(v&&v.test(k)){var F=b[k];o(F.aaxis),o(F.baxis),o(F.caxis)}else if(L&&L.test(k)){var I=b[k],D=I.cameraposition;if(Array.isArray(D)&&D[0].length===4){var U=D[0],B=D[1],j=D[2],Z=s([],U),ee=[];for(_=0;_<3;++_)ee[_]=B[_]+j*Z[2+4*_];I.camera={eye:{x:ee[0],y:ee[1],z:ee[2]},center:{x:B[0],y:B[1],z:B[2]},up:{x:0,y:0,z:1}},delete I.cameraposition}o(I.xaxis),o(I.yaxis),o(I.zaxis)}}var q=Array.isArray(b.annotations)?b.annotations.length:0;for(M=0;M<q;M++){var W=b.annotations[M];!x.isPlainObject(W)||(W.ref&&(W.ref==="paper"?(W.xref="paper",W.yref="paper"):W.ref==="data"&&(W.xref="x",W.yref="y"),delete W.ref),l(W,"xref"),l(W,"yref"))}var J=Array.isArray(b.shapes)?b.shapes.length:0;for(M=0;M<J;M++){var le=b.shapes[M];!x.isPlainObject(le)||(l(le,"xref"),l(le,"yref"))}var fe=Array.isArray(b.images)?b.images.length:0;for(M=0;M<fe;M++){var se=b.images[M];!x.isPlainObject(se)||(l(se,"xref"),l(se,"yref"))}var H=b.legend;return H&&(H.x>3?(H.x=1.02,H.xanchor="left"):H.x<-2&&(H.x=-.02,H.xanchor="right"),H.y>3?(H.y=1.02,H.yanchor="bottom"):H.y<-2&&(H.y=-.02,H.yanchor="top")),o(b),b.dragmode==="rotate"&&(b.dragmode="orbit"),a.clean(b),b.template&&b.template.layout&&N.cleanLayout(b.template.layout),b};function l(b,M){var _=b[M],T=M.charAt(0);_&&_!=="paper"&&(b[M]=r(_,T,!0))}function o(b){b&&((typeof b.title=="string"||typeof b.title=="number")&&(b.title={text:b.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"));function M(_,T){var w=b[_],v=b.title&&b.title[T];w&&!v&&(b.title||(b.title={}),b.title[T]=b[_],delete b[_])}}N.cleanData=function(b){for(var M=0;M<b.length;M++){var _=b[M],T;if(_.type==="histogramy"&&"xbins"in _&&!("ybins"in _)&&(_.ybins=_.xbins,delete _.xbins),_.error_y&&"opacity"in _.error_y){var w=a.defaults,v=_.error_y.color||(f(_,"bar")?a.defaultLine:w[M%w.length]);_.error_y.color=a.addOpacity(a.rgb(v),a.opacity(v)*_.error_y.opacity),delete _.error_y.opacity}if("bardir"in _&&(_.bardir==="h"&&(f(_,"bar")||_.type.substr(0,9)==="histogram")&&(_.orientation="h",N.swapXYData(_)),delete _.bardir),_.type==="histogramy"&&N.swapXYData(_),(_.type==="histogramx"||_.type==="histogramy")&&(_.type="histogram"),"scl"in _&&!("colorscale"in _)&&(_.colorscale=_.scl,delete _.scl),"reversescl"in _&&!("reversescale"in _)&&(_.reversescale=_.reversescl,delete _.reversescl),_.xaxis&&(_.xaxis=r(_.xaxis,"x")),_.yaxis&&(_.yaxis=r(_.yaxis,"y")),f(_,"gl3d")&&_.scene&&(_.scene=t.subplotsRegistry.gl3d.cleanId(_.scene)),!f(_,"pie-like")&&!f(_,"bar-like"))if(Array.isArray(_.textposition))for(T=0;T<_.textposition.length;T++)_.textposition[T]=d(_.textposition[T]);else _.textposition&&(_.textposition=d(_.textposition));var L=m.getModule(_);if(L&&L.colorbar){var S=L.colorbar.container,k=S?_[S]:_;k&&k.colorscale&&(k.colorscale==="YIGnBu"&&(k.colorscale="YlGnBu"),k.colorscale==="YIOrRd"&&(k.colorscale="YlOrRd"))}if(_.type==="surface"&&x.isPlainObject(_.contours)){var P=["x","y","z"];for(T=0;T<P.length;T++){var O=_.contours[P[T]];!x.isPlainObject(O)||(O.highlightColor&&(O.highlightcolor=O.highlightColor,delete O.highlightColor),O.highlightWidth&&(O.highlightwidth=O.highlightWidth,delete O.highlightWidth))}}if(_.type==="candlestick"||_.type==="ohlc"){var F=(_.increasing||{}).showlegend!==!1,I=(_.decreasing||{}).showlegend!==!1,D=c(_.increasing),U=c(_.decreasing);if(D!==!1&&U!==!1){var B=h(D,U,F,I);B&&(_.name=B)}else(D||U)&&!_.name&&(_.name=D||U)}if(Array.isArray(_.transforms)){var j=_.transforms;for(T=0;T<j.length;T++){var Z=j[T];if(!!x.isPlainObject(Z))switch(Z.type){case"filter":Z.filtersrc&&(Z.target=Z.filtersrc,delete Z.filtersrc),Z.calendar&&(Z.valuecalendar||(Z.valuecalendar=Z.calendar),delete Z.calendar);break;case"groupby":if(Z.styles=Z.styles||Z.style,Z.styles&&!Array.isArray(Z.styles)){var ee=Z.styles,q=Object.keys(ee);Z.styles=[];for(var W=0;W<q.length;W++)Z.styles.push({target:q[W],value:ee[q[W]]})}break}}}p(_,"line")&&delete _.line,"marker"in _&&(p(_.marker,"line")&&delete _.marker.line,p(_,"marker")&&delete _.marker),a.clean(_),_.autobinx&&(delete _.autobinx,delete _.xbins),_.autobiny&&(delete _.autobiny,delete _.ybins),o(_),_.colorbar&&o(_.colorbar),_.marker&&_.marker.colorbar&&o(_.marker.colorbar),_.line&&_.line.colorbar&&o(_.line.colorbar),_.aaxis&&o(_.aaxis),_.baxis&&o(_.baxis)}};function c(b){if(!x.isPlainObject(b))return!1;var M=b.name;return delete b.name,delete b.showlegend,(typeof M=="string"||typeof M=="number")&&String(M)}function h(b,M,_,T){if(_&&!T)return b;if(T&&!_||!b.trim())return M;if(!M.trim())return b;var w=Math.min(b.length,M.length),v;for(v=0;v<w&&b.charAt(v)===M.charAt(v);v++);var L=b.substr(0,v);return L.trim()}function d(b){var M="middle",_="center";return typeof b=="string"&&(b.indexOf("top")!==-1?M="top":b.indexOf("bottom")!==-1&&(M="bottom"),b.indexOf("left")!==-1?_="left":b.indexOf("right")!==-1&&(_="right")),M+" "+_}function p(b,M){return M in b&&typeof b[M]=="object"&&Object.keys(b[M]).length===0}N.swapXYData=function(b){var M;if(x.swapAttrs(b,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(b.z)&&Array.isArray(b.z[0])&&(b.transpose?delete b.transpose:b.transpose=!0),b.error_x&&b.error_y){var _=b.error_y,T="copy_ystyle"in _?_.copy_ystyle:!(_.color||_.thickness||_.width);x.swapAttrs(b,["error_?.copy_ystyle"]),T&&x.swapAttrs(b,["error_?.color","error_?.thickness","error_?.width"])}if(typeof b.hoverinfo=="string"){var w=b.hoverinfo.split("+");for(M=0;M<w.length;M++)w[M]==="x"?w[M]="y":w[M]==="y"&&(w[M]="x");b.hoverinfo=w.join("+")}},N.coerceTraceIndices=function(b,M){if(u(M))return[M];if(!Array.isArray(M)||!M.length)return b.data.map(function(w,v){return v});if(Array.isArray(M)){for(var _=[],T=0;T<M.length;T++)x.isIndex(M[T],b.data.length)?_.push(M[T]):x.warn("trace index (",M[T],") is not a number or is out of bounds");return _}return M},N.manageArrayContainers=function(b,M,_){var T=b.obj,w=b.parts,v=w.length,L=w[v-1],S=u(L);if(S&&M===null){var k=w.slice(0,v-1).join("."),P=x.nestedProperty(T,k).get();P.splice(L,1)}else S&&b.get()===void 0&&b.get()===void 0&&(_[b.astr]=null),b.set(M)};var y=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function g(b){var M=b.search(y);if(M>0)return b.substr(0,M)}N.hasParent=function(b,M){for(var _=g(M);_;){if(_ in b)return!0;_=g(_)}return!1};var A=["x","y","z"];N.clearAxisTypes=function(b,M,_){for(var T=0;T<M.length;T++)for(var w=b._fullData[T],v=0;v<3;v++){var L=n(b,w,A[v]);if(L&&L.type!=="log"){var S=L._name,k=L._id.substr(1);if(k.substr(0,5)==="scene"){if(_[k]!==void 0)continue;S=k+"."+S}var P=S+".type";_[S]===void 0&&_[P]===void 0&&x.nestedProperty(b.layout,P).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(e,z,N){var u=e("./plot_api");N._doPlot=u._doPlot,N.newPlot=u.newPlot,N.restyle=u.restyle,N.relayout=u.relayout,N.redraw=u.redraw,N.update=u.update,N._guiRestyle=u._guiRestyle,N._guiRelayout=u._guiRelayout,N._guiUpdate=u._guiUpdate,N._storeDirectGUIEdit=u._storeDirectGUIEdit,N.react=u.react,N.extendTraces=u.extendTraces,N.prependTraces=u.prependTraces,N.addTraces=u.addTraces,N.deleteTraces=u.deleteTraces,N.moveTraces=u.moveTraces,N.purge=u.purge,N.addFrames=u.addFrames,N.deleteFrames=u.deleteFrames,N.animate=u.animate,N.setPlotConfig=u.setPlotConfig,N.toImage=e("./to_image"),N.validate=e("./validate"),N.downloadImage=e("../snapshot/download");var s=e("./template_api");N.makeTemplate=s.makeTemplate,N.validateTemplate=s.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(e,z,N){var u=e("../lib/is_plain_object"),s=e("../lib/noop"),m=e("../lib/loggers"),x=e("../lib/search").sorterAsc,t=e("../registry");N.containerArrayMatch=e("./container_array_match");var i=N.isAddVal=function(n){return n==="add"||u(n)},a=N.isRemoveVal=function(n){return n===null||n==="remove"};N.applyContainerArrayChanges=function(n,f,l,o,c){var h=f.astr,d=t.getComponentMethod(h,"supplyLayoutDefaults"),p=t.getComponentMethod(h,"draw"),y=t.getComponentMethod(h,"drawOne"),g=o.replot||o.recalc||d===s||p===s,A=n.layout,b=n._fullLayout;if(l[""]){Object.keys(l).length>1&&m.warn("Full array edits are incompatible with other edits",h);var M=l[""][""];if(a(M))f.set(null);else if(Array.isArray(M))f.set(M);else return m.warn("Unrecognized full array edit value",h,M),!0;return g?!1:(d(A,b),p(n),!0)}var _=Object.keys(l).map(Number).sort(x),T=f.get(),w=T||[],v=c(b,h).get(),L=[],S=-1,k=w.length,P,O,F,I,D,U,B,j;for(P=0;P<_.length;P++){if(F=_[P],I=l[F],D=Object.keys(I),U=I[""],B=i(U),F<0||F>w.length-(B?0:1)){m.warn("index out of range",h,F);continue}if(U!==void 0)D.length>1&&m.warn("Insertion & removal are incompatible with edits to the same index.",h,F),a(U)?L.push(F):B?(U==="add"&&(U={}),w.splice(F,0,U),v&&v.splice(F,0,{})):m.warn("Unrecognized full object edit value",h,F,U),S===-1&&(S=F);else for(O=0;O<D.length;O++)j=h+"["+F+"].",c(w[F],D[O],j).set(I[D[O]])}for(P=L.length-1;P>=0;P--)w.splice(L[P],1),v&&v.splice(L[P],1);if(w.length?T||f.set(w):f.set(null),g)return!1;if(d(A,b),y!==s){var Z;if(S===-1)Z=_;else{for(k=Math.max(w.length,k),Z=[],P=0;P<_.length&&(F=_[P],!(F>=S));P++)Z.push(F);for(P=S;P<k;P++)Z.push(P)}for(P=0;P<Z.length;P++)y(n,Z[P])}else p(n);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("has-hover"),x=e("../lib"),t=x.nestedProperty,i=e("../lib/events"),a=e("../lib/queue"),r=e("../registry"),n=e("./plot_schema"),f=e("../plots/plots"),l=e("../plots/cartesian/axes"),o=e("../components/drawing"),c=e("../components/color"),h=e("../plots/cartesian/graph_interact").initInteractions,d=e("../constants/xmlns_namespaces"),p=e("../plots/cartesian/select").clearSelect,y=e("./plot_config").dfltConfig,g=e("./manage_arrays"),A=e("./helpers"),b=e("./subroutines"),M=e("./edit_types"),_=e("../plots/cartesian/constants").AX_NAME_PATTERN,T=0,w=5;function v(Ce,Xe,rt,ut){var Pt;if(Ce=x.getGraphDiv(Ce),i.init(Ce),x.isPlainObject(Xe)){var St=Xe;Xe=St.data,rt=St.layout,ut=St.config,Pt=St.frames}var Nt=i.triggerHandler(Ce,"plotly_beforeplot",[Xe,rt,ut]);if(Nt===!1)return Promise.reject();!Xe&&!rt&&!x.isPlotDiv(Ce)&&x.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",Ce);function jt(){if(Pt)return N.addFrames(Ce,Pt)}O(Ce,ut),rt||(rt={}),u.select(Ce).classed("js-plotly-plot",!0),o.makeTester(),Array.isArray(Ce._promises)||(Ce._promises=[]);var Ot=(Ce.data||[]).length===0&&Array.isArray(Xe);Array.isArray(Xe)&&(A.cleanData(Xe),Ot?Ce.data=Xe:Ce.data.push.apply(Ce.data,Xe),Ce.empty=!1),(!Ce.layout||Ot)&&(Ce.layout=A.cleanLayout(rt)),f.supplyDefaults(Ce);var Kt=Ce._fullLayout,Je=Kt._has("cartesian");Kt._replotting=!0,(Ot||Kt._shouldCreateBgLayer)&&(Qe(Ce),Kt._shouldCreateBgLayer&&delete Kt._shouldCreateBgLayer),o.initGradients(Ce),o.initPatterns(Ce),Ot&&l.saveShowSpikeInitial(Ce);var gt=!Ce.calcdata||Ce.calcdata.length!==(Ce._fullData||[]).length;gt&&f.doCalcdata(Ce);for(var Et=0;Et<Ce.calcdata.length;Et++)Ce.calcdata[Et][0].trace=Ce._fullData[Et];Ce._context.responsive?Ce._responsiveChartHandler||(Ce._responsiveChartHandler=function(){x.isHidden(Ce)||f.resize(Ce)},window.addEventListener("resize",Ce._responsiveChartHandler)):x.clearResponsive(Ce);var rr=x.extendFlat({},Kt._size),vr=0;function or(){for(var De=Kt._basePlotModules,je=0;je<De.length;je++)De[je].drawFramework&&De[je].drawFramework(Ce);!Kt._glcanvas&&Kt._has("gl")&&(Kt._glcanvas=Kt._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(pt){return pt.key}),Kt._glcanvas.enter().append("canvas").attr("class",function(pt){return"gl-canvas gl-canvas-"+pt.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var $e=Ce._context.plotGlPixelRatio;if(Kt._glcanvas){Kt._glcanvas.attr("width",Kt.width*$e).attr("height",Kt.height*$e).style("width",Kt.width+"px").style("height",Kt.height+"px");var ot=Kt._glcanvas.data()[0].regl;if(ot&&(Math.floor(Kt.width*$e)!==ot._gl.drawingBufferWidth||Math.floor(Kt.height*$e)!==ot._gl.drawingBufferHeight)){var st="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(vr)x.error(st);else return x.log(st+" Clearing graph and plotting again."),f.cleanPlot([],{},Ce._fullData,Kt),f.supplyDefaults(Ce),Kt=Ce._fullLayout,f.doCalcdata(Ce),vr++,or()}}return Kt.modebar.orientation==="h"?Kt._modebardiv.style("height",null).style("width","100%"):Kt._modebardiv.style("width",null).style("height",Kt.height+"px"),f.previousPromises(Ce)}function dr(){if(f.clearAutoMarginIds(Ce),b.drawMarginPushers(Ce),l.allowAutoMargin(Ce),Kt._has("pie"))for(var De=Ce._fullData,je=0;je<De.length;je++){var $e=De[je];$e.type==="pie"&&$e.automargin&&f.allowAutoMargin(Ce,"pie."+$e.uid+".automargin")}return f.doAutoMargin(Ce),f.previousPromises(Ce)}function Lr(){if(!!f.didMarginChange(rr,Kt._size))return x.syncOrAsync([dr,b.layoutStyles],Ce)}function kr(){if(!gt){tr();return}return x.syncOrAsync([r.getComponentMethod("shapes","calcAutorange"),r.getComponentMethod("annotations","calcAutorange"),tr],Ce)}function tr(){Ce._transitioning||(b.doAutoRangeAndConstraints(Ce),Ot&&l.saveRangeInitial(Ce),r.getComponentMethod("rangeslider","calcAutorange")(Ce))}function Or(){return l.draw(Ce,Ot?"":"redraw")}var et=[f.previousPromises,jt,or,dr,Lr];Je&&et.push(kr),et.push(b.layoutStyles),Je&&et.push(Or,function(je){je._fullLayout._insideTickLabelsAutorange&&oe(je,je._fullLayout._insideTickLabelsAutorange).then(function(){je._fullLayout._insideTickLabelsAutorange=void 0})}),et.push(b.drawData,b.finalDraw,h,f.addLinks,f.rehover,f.redrag,f.doAutoMargin,we,f.previousPromises);function we(De){De._fullLayout._insideTickLabelsAutorange&&Ot&&l.saveRangeInitial(De,!0)}var Se=x.syncOrAsync(et,Ce);return(!Se||!Se.then)&&(Se=Promise.resolve()),Se.then(function(){return L(Ce),Ce})}function L(Ce){var Xe=Ce._fullLayout;Xe._redrawFromAutoMarginCount?Xe._redrawFromAutoMarginCount--:Ce.emit("plotly_afterplot")}function S(Ce){return x.extendFlat(y,Ce)}function k(Ce,Xe){try{Ce._fullLayout._paper.style("background",Xe)}catch(rt){x.error(rt)}}function P(Ce,Xe){var rt=c.combine(Xe,"white");k(Ce,rt)}function O(Ce,Xe){if(!Ce._context){Ce._context=x.extendDeep({},y);var rt=u.select("base");Ce._context._baseUrl=rt.size()&&rt.attr("href")?window.location.href.split("#")[0]:""}var ut=Ce._context,Pt,St,Nt;if(Xe){for(St=Object.keys(Xe),Pt=0;Pt<St.length;Pt++)Nt=St[Pt],!(Nt==="editable"||Nt==="edits")&&Nt in ut&&(Nt==="setBackground"&&Xe[Nt]==="opaque"?ut[Nt]=P:ut[Nt]=Xe[Nt]);Xe.plot3dPixelRatio&&!ut.plotGlPixelRatio&&(ut.plotGlPixelRatio=ut.plot3dPixelRatio);var jt=Xe.editable;if(jt!==void 0)for(ut.editable=jt,St=Object.keys(ut.edits),Pt=0;Pt<St.length;Pt++)ut.edits[St[Pt]]=jt;if(Xe.edits)for(St=Object.keys(Xe.edits),Pt=0;Pt<St.length;Pt++)Nt=St[Pt],Nt in ut.edits&&(ut.edits[Nt]=Xe.edits[Nt]);ut._exportedPlot=Xe._exportedPlot}ut.staticPlot&&(ut.editable=!1,ut.edits={},ut.autosizable=!1,ut.scrollZoom=!1,ut.doubleClick=!1,ut.showTips=!1,ut.showLink=!1,ut.displayModeBar=!1),ut.displayModeBar==="hover"&&!m&&(ut.displayModeBar=!0),(ut.setBackground==="transparent"||typeof ut.setBackground!="function")&&(ut.setBackground=k),ut._hasZeroHeight=ut._hasZeroHeight||Ce.clientHeight===0,ut._hasZeroWidth=ut._hasZeroWidth||Ce.clientWidth===0;var Ot=ut.scrollZoom,Kt=ut._scrollZoom={};if(Ot===!0)Kt.cartesian=1,Kt.gl3d=1,Kt.geo=1,Kt.mapbox=1;else if(typeof Ot=="string"){var Je=Ot.split("+");for(Pt=0;Pt<Je.length;Pt++)Kt[Je[Pt]]=1}else Ot!==!1&&(Kt.gl3d=1,Kt.geo=1,Kt.mapbox=1)}function F(Ce){if(Ce=x.getGraphDiv(Ce),!x.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce);return A.cleanData(Ce.data),A.cleanLayout(Ce.layout),Ce.calcdata=void 0,N._doPlot(Ce).then(function(){return Ce.emit("plotly_redraw"),Ce})}function I(Ce,Xe,rt,ut){return Ce=x.getGraphDiv(Ce),f.cleanPlot([],{},Ce._fullData||[],Ce._fullLayout||{}),f.purge(Ce),N._doPlot(Ce,Xe,rt,ut)}function D(Ce,Xe){var rt=Xe+1,ut=[],Pt,St;for(Pt=0;Pt<Ce.length;Pt++)St=Ce[Pt],St<0?ut.push(rt+St):ut.push(St);return ut}function U(Ce,Xe,rt){var ut,Pt;for(ut=0;ut<Xe.length;ut++){if(Pt=Xe[ut],Pt!==parseInt(Pt,10))throw new Error("all values in "+rt+" must be integers");if(Pt>=Ce.data.length||Pt<-Ce.data.length)throw new Error(rt+" must be valid indices for gd.data.");if(Xe.indexOf(Pt,ut+1)>-1||Pt>=0&&Xe.indexOf(-Ce.data.length+Pt)>-1||Pt<0&&Xe.indexOf(Ce.data.length+Pt)>-1)throw new Error("each index in "+rt+" must be unique.")}}function B(Ce,Xe,rt){if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array.");if(typeof Xe=="undefined")throw new Error("currentIndices is a required argument.");if(Array.isArray(Xe)||(Xe=[Xe]),U(Ce,Xe,"currentIndices"),typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&U(Ce,rt,"newIndices"),typeof rt!="undefined"&&Xe.length!==rt.length)throw new Error("current and new indices must be of equal length.")}function j(Ce,Xe,rt){var ut,Pt;if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array.");if(typeof Xe=="undefined")throw new Error("traces must be defined.");for(Array.isArray(Xe)||(Xe=[Xe]),ut=0;ut<Xe.length;ut++)if(Pt=Xe[ut],typeof Pt!="object"||Array.isArray(Pt)||Pt===null)throw new Error("all values in traces array must be non-array objects");if(typeof rt!="undefined"&&!Array.isArray(rt)&&(rt=[rt]),typeof rt!="undefined"&&rt.length!==Xe.length)throw new Error("if indices is specified, traces.length must equal indices.length")}function Z(Ce,Xe,rt,ut){var Pt=x.isPlainObject(ut);if(!Array.isArray(Ce.data))throw new Error("gd.data must be an array");if(!x.isPlainObject(Xe))throw new Error("update must be a key:value object");if(typeof rt=="undefined")throw new Error("indices must be an integer or array of integers");U(Ce,rt,"indices");for(var St in Xe){if(!Array.isArray(Xe[St])||Xe[St].length!==rt.length)throw new Error("attribute "+St+" must be an array of length equal to indices array length");if(Pt&&(!(St in ut)||!Array.isArray(ut[St])||ut[St].length!==Xe[St].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}function ee(Ce,Xe,rt,ut){var Pt=x.isPlainObject(ut),St=[],Nt,jt,Ot,Kt,Je;Array.isArray(rt)||(rt=[rt]),rt=D(rt,Ce.data.length-1);for(var gt in Xe)for(var Et=0;Et<rt.length;Et++){if(Nt=Ce.data[rt[Et]],Ot=t(Nt,gt),jt=Ot.get(),Kt=Xe[gt][Et],!x.isArrayOrTypedArray(Kt))throw new Error("attribute: "+gt+" index: "+Et+" must be an array");if(!x.isArrayOrTypedArray(jt))throw new Error("cannot extend missing or non-array attribute: "+gt);if(jt.constructor!==Kt.constructor)throw new Error("cannot extend array with an array of a different type: "+gt);Je=Pt?ut[gt][Et]:ut,s(Je)||(Je=-1),St.push({prop:Ot,target:jt,insert:Kt,maxp:Math.floor(Je)})}return St}function q(Ce,Xe,rt,ut,Pt){Z(Ce,Xe,rt,ut);for(var St=ee(Ce,Xe,rt,ut),Nt={},jt={},Ot=0;Ot<St.length;Ot++){var Kt=St[Ot].prop,Je=St[Ot].maxp,gt=Pt(St[Ot].target,St[Ot].insert,Je);Kt.set(gt[0]),Array.isArray(Nt[Kt.astr])||(Nt[Kt.astr]=[]),Nt[Kt.astr].push(gt[1]),Array.isArray(jt[Kt.astr])||(jt[Kt.astr]=[]),jt[Kt.astr].push(St[Ot].target.length)}return{update:Nt,maxPoints:jt}}function W(Ce,Xe){var rt=new Ce.constructor(Ce.length+Xe.length);return rt.set(Ce),rt.set(Xe,Ce.length),rt}function J(Ce,Xe,rt,ut){Ce=x.getGraphDiv(Ce);function Pt(Ot,Kt,Je){var gt,Et;if(x.isTypedArray(Ot))if(Je<0){var rr=new Ot.constructor(0),vr=W(Ot,Kt);Je<0?(gt=vr,Et=rr):(gt=rr,Et=vr)}else if(gt=new Ot.constructor(Je),Et=new Ot.constructor(Ot.length+Kt.length-Je),Je===Kt.length)gt.set(Kt),Et.set(Ot);else if(Je<Kt.length){var or=Kt.length-Je;gt.set(Kt.subarray(or)),Et.set(Ot),Et.set(Kt.subarray(0,or),Ot.length)}else{var dr=Je-Kt.length,Lr=Ot.length-dr;gt.set(Ot.subarray(Lr)),gt.set(Kt,dr),Et.set(Ot.subarray(0,Lr))}else gt=Ot.concat(Kt),Et=Je>=0&&Je<gt.length?gt.splice(0,gt.length-Je):[];return[gt,Et]}var St=q(Ce,Xe,rt,ut,Pt),Nt=N.redraw(Ce),jt=[Ce,St.update,rt,St.maxPoints];return a.add(Ce,N.prependTraces,jt,J,arguments),Nt}function le(Ce,Xe,rt,ut){Ce=x.getGraphDiv(Ce);function Pt(Ot,Kt,Je){var gt,Et;if(x.isTypedArray(Ot))if(Je<=0){var rr=new Ot.constructor(0),vr=W(Kt,Ot);Je<0?(gt=vr,Et=rr):(gt=rr,Et=vr)}else if(gt=new Ot.constructor(Je),Et=new Ot.constructor(Ot.length+Kt.length-Je),Je===Kt.length)gt.set(Kt),Et.set(Ot);else if(Je<Kt.length){var or=Kt.length-Je;gt.set(Kt.subarray(0,or)),Et.set(Kt.subarray(or)),Et.set(Ot,or)}else{var dr=Je-Kt.length;gt.set(Kt),gt.set(Ot.subarray(0,dr),Kt.length),Et.set(Ot.subarray(dr))}else gt=Kt.concat(Ot),Et=Je>=0&&Je<gt.length?gt.splice(Je,gt.length):[];return[gt,Et]}var St=q(Ce,Xe,rt,ut,Pt),Nt=N.redraw(Ce),jt=[Ce,St.update,rt,St.maxPoints];return a.add(Ce,N.extendTraces,jt,le,arguments),Nt}function fe(Ce,Xe,rt){Ce=x.getGraphDiv(Ce);var ut=[],Pt=N.deleteTraces,St=fe,Nt=[Ce,ut],jt=[Ce,Xe],Ot,Kt;for(j(Ce,Xe,rt),Array.isArray(Xe)||(Xe=[Xe]),Xe=Xe.map(function(Je){return x.extendFlat({},Je)}),A.cleanData(Xe),Ot=0;Ot<Xe.length;Ot++)Ce.data.push(Xe[Ot]);for(Ot=0;Ot<Xe.length;Ot++)ut.push(-Xe.length+Ot);if(typeof rt=="undefined")return Kt=N.redraw(Ce),a.add(Ce,Pt,Nt,St,jt),Kt;Array.isArray(rt)||(rt=[rt]);try{B(Ce,ut,rt)}catch(Je){throw Ce.data.splice(Ce.data.length-Xe.length,Xe.length),Je}return a.startSequence(Ce),a.add(Ce,Pt,Nt,St,jt),Kt=N.moveTraces(Ce,ut,rt),a.stopSequence(Ce),Kt}function se(Ce,Xe){Ce=x.getGraphDiv(Ce);var rt=[],ut=N.addTraces,Pt=se,St=[Ce,rt,Xe],Nt=[Ce,Xe],jt,Ot;if(typeof Xe=="undefined")throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Xe)||(Xe=[Xe]),U(Ce,Xe,"indices"),Xe=D(Xe,Ce.data.length-1),Xe.sort(x.sorterDes),jt=0;jt<Xe.length;jt+=1)Ot=Ce.data.splice(Xe[jt],1)[0],rt.push(Ot);var Kt=N.redraw(Ce);return a.add(Ce,ut,St,Pt,Nt),Kt}function H(Ce,Xe,rt){Ce=x.getGraphDiv(Ce);var ut=[],Pt=[],St=H,Nt=H,jt=[Ce,rt,Xe],Ot=[Ce,Xe,rt],Kt;if(B(Ce,Xe,rt),Xe=Array.isArray(Xe)?Xe:[Xe],typeof rt=="undefined")for(rt=[],Kt=0;Kt<Xe.length;Kt++)rt.push(-Xe.length+Kt);for(rt=Array.isArray(rt)?rt:[rt],Xe=D(Xe,Ce.data.length-1),rt=D(rt,Ce.data.length-1),Kt=0;Kt<Ce.data.length;Kt++)Xe.indexOf(Kt)===-1&&ut.push(Ce.data[Kt]);for(Kt=0;Kt<Xe.length;Kt++)Pt.push({newIndex:rt[Kt],trace:Ce.data[Xe[Kt]]});for(Pt.sort(function(gt,Et){return gt.newIndex-Et.newIndex}),Kt=0;Kt<Pt.length;Kt+=1)ut.splice(Pt[Kt].newIndex,0,Pt[Kt].trace);Ce.data=ut;var Je=N.redraw(Ce);return a.add(Ce,St,jt,Nt,Ot),Je}function Y(Ce,Xe,rt,ut){Ce=x.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var Pt={};if(typeof Xe=="string")Pt[Xe]=rt;else if(x.isPlainObject(Xe))Pt=x.extendFlat({},Xe),ut===void 0&&(ut=rt);else return x.warn("Restyle fail.",Xe,rt,ut),Promise.reject();Object.keys(Pt).length&&(Ce.changed=!0);var St=A.coerceTraceIndices(Ce,ut),Nt=ae(Ce,Pt,St),jt=Nt.flags;jt.calc&&(Ce.calcdata=void 0),jt.clearAxisTypes&&A.clearAxisTypes(Ce,St,{});var Ot=[];jt.fullReplot?Ot.push(N._doPlot):(Ot.push(f.previousPromises),f.supplyDefaults(Ce),jt.markerSize&&(f.doCalcdata(Ce),ye(Ot)),jt.style&&Ot.push(b.doTraceStyle),jt.colorbars&&Ot.push(b.doColorBars),Ot.push(L)),Ot.push(f.rehover,f.redrag),a.add(Ce,Y,[Ce,Nt.undoit,Nt.traces],Y,[Ce,Nt.redoit,Nt.traces]);var Kt=x.syncOrAsync(Ot,Ce);return(!Kt||!Kt.then)&&(Kt=Promise.resolve()),Kt.then(function(){return Ce.emit("plotly_restyle",Nt.eventData),Ce})}function ne(Ce){return Ce===void 0?null:Ce}function te(Ce,Xe){return Xe?function(rt,ut,Pt){var St=t(rt,ut),Nt=St.set;return St.set=function(jt){var Ot=(Pt||"")+ut;K(Ot,St.get(),jt,Ce),Nt(jt)},St}:t}function K(Ce,Xe,rt,ut){if(Array.isArray(Xe)||Array.isArray(rt))for(var Pt=Array.isArray(Xe)?Xe:[],St=Array.isArray(rt)?rt:[],Nt=Math.max(Pt.length,St.length),jt=0;jt<Nt;jt++)K(Ce+"["+jt+"]",Pt[jt],St[jt],ut);else if(x.isPlainObject(Xe)||x.isPlainObject(rt)){var Ot=x.isPlainObject(Xe)?Xe:{},Kt=x.isPlainObject(rt)?rt:{},Je=x.extendFlat({},Ot,Kt);for(var gt in Je)K(Ce+"."+gt,Ot[gt],Kt[gt],ut)}else ut[Ce]===void 0&&(ut[Ce]=ne(Xe))}function $(Ce,Xe,rt){for(var ut in rt){var Pt=t(Ce,ut);K(ut,Pt.get(),rt[ut],Xe)}}function ae(Ce,Xe,rt){var ut=Ce._fullLayout,Pt=Ce._fullData,St=Ce.data,Nt=ut._guiEditing,jt=te(ut._preGUI,Nt),Ot=x.extendDeepAll({},Xe),Kt;ie(Xe);var Je=M.traceFlags(),gt={},Et={},rr;function vr(){return rt.map(function(){})}function or(er){var hr=l.id2name(er);rr.indexOf(hr)===-1&&rr.push(hr)}function dr(er){return"LAYOUT"+er+".autorange"}function Lr(er){return"LAYOUT"+er+".range"}function kr(er){for(var hr=er;hr<Pt.length;hr++)if(Pt[hr]._input===St[er])return Pt[hr]}function tr(er,hr,Wr){if(Array.isArray(er)){er.forEach(function(Xr){tr(Xr,hr,Wr)});return}if(!(er in Xe||A.hasParent(Xe,er))){var zr;if(er.substr(0,6)==="LAYOUT")zr=jt(Ce.layout,er.replace("LAYOUT",""));else{var Pr=rt[Wr],br=ut._tracePreGUI[kr(Pr)._fullInput.uid];zr=te(br,Nt)(St[Pr],er)}er in Et||(Et[er]=vr()),Et[er][Wr]===void 0&&(Et[er][Wr]=ne(zr.get())),hr!==void 0&&zr.set(hr)}}function Or(er){return function(hr){return Pt[hr][er]}}function et(er){return function(hr,Wr){return hr===!1?Pt[rt[Wr]][er]:null}}for(var we in Xe){if(A.hasParent(Xe,we))throw new Error("cannot set "+we+" and a parent attribute simultaneously");var Se=Xe[we],De,je,$e,ot,st,pt;if((we==="autobinx"||we==="autobiny")&&(we=we.charAt(we.length-1)+"bins",Array.isArray(Se)?Se=Se.map(et(we)):Se===!1?Se=rt.map(Or(we)):Se=null),gt[we]=Se,we.substr(0,6)==="LAYOUT"){$e=jt(Ce.layout,we.replace("LAYOUT","")),Et[we]=[ne($e.get())],$e.set(Array.isArray(Se)?Se[0]:Se),Je.calc=!0;continue}for(Et[we]=vr(),Kt=0;Kt<rt.length;Kt++){De=St[rt[Kt]],je=kr(rt[Kt]);var wt=ut._tracePreGUI[je._fullInput.uid];if($e=te(wt,Nt)(De,we),ot=$e.get(),st=Array.isArray(Se)?Se[Kt%Se.length]:Se,st!==void 0){var Wt=$e.parts[$e.parts.length-1],yr=we.substr(0,we.length-Wt.length-1),xr=yr?yr+".":"",Tr=yr?t(je,yr).get():je;if(pt=n.getTraceValObject(je,$e.parts),pt&&pt.impliedEdits&&st!==null)for(var mr in pt.impliedEdits)tr(x.relativeAttr(we,mr),pt.impliedEdits[mr],Kt);else if((Wt==="thicknessmode"||Wt==="lenmode")&&ot!==st&&(st==="fraction"||st==="pixels")&&Tr){var Rr=ut._size,tn=Tr.orient,wr=tn==="top"||tn==="bottom";if(Wt==="thicknessmode"){var gr=wr?Rr.h:Rr.w;tr(xr+"thickness",Tr.thickness*(st==="fraction"?1/gr:gr),Kt)}else{var mn=wr?Rr.w:Rr.h;tr(xr+"len",Tr.len*(st==="fraction"?1/mn:mn),Kt)}}else if(we==="type"&&(st==="pie"!=(ot==="pie")||st==="funnelarea"!=(ot==="funnelarea"))){var Gr="x",Ar="y";(st==="bar"||ot==="bar")&&De.orientation==="h"&&(Gr="y",Ar="x"),x.swapAttrs(De,["?","?src"],"labels",Gr),x.swapAttrs(De,["d?","?0"],"label",Gr),x.swapAttrs(De,["?","?src"],"values",Ar),ot==="pie"||ot==="funnelarea"?(t(De,"marker.color").set(t(De,"marker.colors").get()),ut._pielayer.selectAll("g.trace").remove()):r.traceIs(De,"cartesian")&&t(De,"marker.colors").set(t(De,"marker.color").get())}Et[we][Kt]=ne(ot);var nn=["swapxy","swapxyaxes","orientation","orientationaxes"];if(nn.indexOf(we)!==-1){if(we==="orientation"){$e.set(st);var fn=De.x&&!De.y?"h":"v";if(($e.get()||fn)===je.orientation)continue}else we==="orientationaxes"&&(De.orientation={v:"h",h:"v"}[je.orientation]);A.swapXYData(De),Je.calc=Je.clearAxisTypes=!0}else f.dataArrayContainers.indexOf($e.parts[0])!==-1?(A.manageArrayContainers($e,st,Et),Je.calc=!0):(pt?pt.arrayOk&&!r.traceIs(je,"regl")&&(x.isArrayOrTypedArray(st)||x.isArrayOrTypedArray(ot))?Je.calc=!0:M.update(Je,pt):Je.calc=!0,$e.set(st))}}if(["swapxyaxes","orientationaxes"].indexOf(we)!==-1&&l.swap(Ce,rt),we==="orientationaxes"){var jr=t(Ce.layout,"hovermode"),at=jr.get();at==="x"?jr.set("y"):at==="y"?jr.set("x"):at==="x unified"?jr.set("y unified"):at==="y unified"&&jr.set("x unified")}if(["orientation","type"].indexOf(we)!==-1){for(rr=[],Kt=0;Kt<rt.length;Kt++){var Ft=St[rt[Kt]];r.traceIs(Ft,"cartesian")&&(or(Ft.xaxis||"x"),or(Ft.yaxis||"y"))}tr(rr.map(dr),!0,0),tr(rr.map(Lr),[0,1],0)}}return(Je.calc||Je.plot)&&(Je.fullReplot=!0),{flags:Je,undoit:Et,redoit:gt,traces:rt,eventData:x.extendDeepNoArrays([],[Ot,rt])}}function ie(Ce){var Xe=x.counterRegex("axis",".title",!1,!1),rt=/colorbar\.title$/,ut=Object.keys(Ce),Pt,St,Nt;for(Pt=0;Pt<ut.length;Pt++)St=ut[Pt],Nt=Ce[St],(St==="title"||Xe.test(St)||rt.test(St))&&(typeof Nt=="string"||typeof Nt=="number")?jt(St,St.replace("title","title.text")):St.indexOf("titlefont")>-1&&St.indexOf("grouptitlefont")===-1?jt(St,St.replace("titlefont","title.font")):St.indexOf("titleposition")>-1?jt(St,St.replace("titleposition","title.position")):St.indexOf("titleside")>-1?jt(St,St.replace("titleside","title.side")):St.indexOf("titleoffset")>-1&&jt(St,St.replace("titleoffset","title.offset"));function jt(Ot,Kt){Ce[Kt]=Ce[Ot],delete Ce[Ot]}}function oe(Ce,Xe,rt){Ce=x.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var ut={};if(typeof Xe=="string")ut[Xe]=rt;else if(x.isPlainObject(Xe))ut=x.extendFlat({},Xe);else return x.warn("Relayout fail.",Xe,rt),Promise.reject();Object.keys(ut).length&&(Ce.changed=!0);var Pt=ke(Ce,ut),St=Pt.flags;St.calc&&(Ce.calcdata=void 0);var Nt=[f.previousPromises];St.layoutReplot?Nt.push(b.layoutReplot):Object.keys(ut).length&&(ue(Ce,St,Pt)||f.supplyDefaults(Ce),St.legend&&Nt.push(b.doLegend),St.layoutstyle&&Nt.push(b.layoutStyles),St.axrange&&ye(Nt,Pt.rangesAltered),St.ticks&&Nt.push(b.doTicksRelayout),St.modebar&&Nt.push(b.doModeBar),St.camera&&Nt.push(b.doCamera),St.colorbars&&Nt.push(b.doColorBars),Nt.push(L)),Nt.push(f.rehover,f.redrag),a.add(Ce,oe,[Ce,Pt.undoit],oe,[Ce,Pt.redoit]);var jt=x.syncOrAsync(Nt,Ce);return(!jt||!jt.then)&&(jt=Promise.resolve(Ce)),jt.then(function(){return Ce.emit("plotly_relayout",Pt.eventData),Ce})}function ue(Ce,Xe,rt){var ut=Ce._fullLayout;if(!Xe.axrange)return!1;for(var Pt in Xe)if(Pt!=="axrange"&&Xe[Pt])return!1;for(var St in rt.rangesAltered){var Nt=l.id2name(St),jt=Ce.layout[Nt],Ot=ut[Nt];if(Ot.autorange=jt.autorange,jt.range&&(Ot.range=jt.range.slice()),Ot.cleanRange(),Ot._matchGroup){for(var Kt in Ot._matchGroup)if(Kt!==St){var Je=ut[l.id2name(Kt)];Je.autorange=Ot.autorange,Je.range=Ot.range.slice(),Je._input.range=Ot.range.slice()}}}return!0}function ye(Ce,Xe){var rt=Xe?function(ut){var Pt=[],St=!0;for(var Nt in Xe){var jt=l.getFromId(ut,Nt);if(Pt.push(Nt),(jt.ticklabelposition||"").indexOf("inside")!==-1&&jt._anchorAxis&&Pt.push(jt._anchorAxis._id),jt._matchGroup)for(var Ot in jt._matchGroup)Xe[Ot]||Pt.push(Ot);jt.automargin&&(St=!1)}return l.draw(ut,Pt,{skipTitle:St})}:function(ut){return l.draw(ut,"redraw")};Ce.push(p,b.doAutoRangeAndConstraints,rt,b.drawData,b.finalDraw)}var ce=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,me=/^[xyz]axis[0-9]*\.autorange$/,xe=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function ke(Ce,Xe){var rt=Ce.layout,ut=Ce._fullLayout,Pt=ut._guiEditing,St=te(ut._preGUI,Pt),Nt=Object.keys(Xe),jt=l.list(Ce),Ot=x.extendDeepAll({},Xe),Kt={},Je,gt,Et;for(ie(Xe),Nt=Object.keys(Xe),gt=0;gt<Nt.length;gt++)if(Nt[gt].indexOf("allaxes")===0){for(Et=0;Et<jt.length;Et++){var rr=jt[Et]._id.substr(1),vr=rr.indexOf("scene")!==-1?rr+".":"",or=Nt[gt].replace("allaxes",vr+jt[Et]._name);Xe[or]||(Xe[or]=Xe[Nt[gt]])}delete Xe[Nt[gt]]}var dr=M.layoutFlags(),Lr={},kr={};function tr(Pr,br){if(Array.isArray(Pr)){Pr.forEach(function(Fn){tr(Fn,br)});return}if(!(Pr in Xe||A.hasParent(Xe,Pr))){var Xr=St(rt,Pr);Pr in kr||(kr[Pr]=ne(Xr.get())),br!==void 0&&Xr.set(br)}}var Or={},et;function we(Pr){var br=l.name2id(Pr.split(".")[0]);return Or[br]=1,br}for(var Se in Xe){if(A.hasParent(Xe,Se))throw new Error("cannot set "+Se+" and a parent attribute simultaneously");for(var De=St(rt,Se),je=Xe[Se],$e=De.parts.length,ot=$e-1;ot>0&&typeof De.parts[ot]!="string";)ot--;var st=De.parts[ot],pt=De.parts[ot-1]+"."+st,wt=De.parts.slice(0,ot).join("."),Wt=t(Ce.layout,wt).get(),yr=t(ut,wt).get(),xr=De.get();if(je!==void 0){Lr[Se]=je,kr[Se]=st==="reverse"?je:ne(xr);var Tr=n.getLayoutValObject(ut,De.parts);if(Tr&&Tr.impliedEdits&&je!==null)for(var mr in Tr.impliedEdits)tr(x.relativeAttr(Se,mr),Tr.impliedEdits[mr]);if(["width","height"].indexOf(Se)!==-1)if(je){tr("autosize",null);var Rr=Se==="height"?"width":"height";tr(Rr,ut[Rr])}else ut[Se]=Ce._initialAutoSize[Se];else if(Se==="autosize")tr("width",je?null:ut.width),tr("height",je?null:ut.height);else if(pt.match(ce))we(pt),t(ut,wt+"._inputRange").set(null);else if(pt.match(me)){we(pt),t(ut,wt+"._inputRange").set(null);var tn=t(ut,wt).get();tn._inputDomain&&(tn._input.domain=tn._inputDomain.slice())}else pt.match(xe)&&t(ut,wt+"._inputDomain").set(null);if(st==="type"){et=Wt;var wr=yr.type==="linear"&&je==="log",gr=yr.type==="log"&&je==="linear";if(wr||gr){if(!et||!et.range)tr(wt+".autorange",!0);else if(yr.autorange)wr&&(et.range=et.range[1]>et.range[0]?[1,2]:[2,1]);else{var mn=et.range[0],Gr=et.range[1];wr?(mn<=0&&Gr<=0&&tr(wt+".autorange",!0),mn<=0?mn=Gr/1e6:Gr<=0&&(Gr=mn/1e6),tr(wt+".range[0]",Math.log(mn)/Math.LN10),tr(wt+".range[1]",Math.log(Gr)/Math.LN10)):(tr(wt+".range[0]",Math.pow(10,mn)),tr(wt+".range[1]",Math.pow(10,Gr)))}Array.isArray(ut._subplots.polar)&&ut._subplots.polar.length&&ut[De.parts[0]]&&De.parts[1]==="radialaxis"&&delete ut[De.parts[0]]._subplot.viewInitial["radialaxis.range"],r.getComponentMethod("annotations","convertCoords")(Ce,yr,je,tr),r.getComponentMethod("images","convertCoords")(Ce,yr,je,tr)}else tr(wt+".autorange",!0),tr(wt+".range",null);t(ut,wt+"._inputRange").set(null)}else if(st.match(_)){var Ar=t(ut,Se).get(),nn=(je||{}).type;(!nn||nn==="-")&&(nn="linear"),r.getComponentMethod("annotations","convertCoords")(Ce,Ar,nn,tr),r.getComponentMethod("images","convertCoords")(Ce,Ar,nn,tr)}var fn=g.containerArrayMatch(Se);if(fn){Je=fn.array,gt=fn.index;var jr=fn.property,at=Tr||{editType:"calc"};gt!==""&&jr===""&&(g.isAddVal(je)?kr[Se]=null:g.isRemoveVal(je)?kr[Se]=(t(rt,Je).get()||[])[gt]:x.warn("unrecognized full object value",Xe)),M.update(dr,at),Kt[Je]||(Kt[Je]={});var Ft=Kt[Je][gt];Ft||(Ft=Kt[Je][gt]={}),Ft[jr]=je,delete Xe[Se]}else st==="reverse"?(Wt.range?Wt.range.reverse():(tr(wt+".autorange",!0),Wt.range=[1,0]),yr.autorange?dr.calc=!0:dr.plot=!0):(ut._has("scatter-like")&&ut._has("regl")&&Se==="dragmode"&&(je==="lasso"||je==="select")&&!(xr==="lasso"||xr==="select")||ut._has("gl2d")?dr.plot=!0:Tr?M.update(dr,Tr):dr.calc=!0,De.set(je))}}for(Je in Kt){var er=g.applyContainerArrayChanges(Ce,St(rt,Je),Kt[Je],dr,St);er||(dr.plot=!0)}for(var hr in Or){et=l.getFromId(Ce,hr);var Wr=et&&et._constraintGroup;if(Wr){dr.calc=!0;for(var zr in Wr)Or[zr]||(l.getFromId(Ce,zr)._constraintShrinkable=!0)}}return(Ae(Ce)||Xe.height||Xe.width)&&(dr.plot=!0),(dr.plot||dr.calc)&&(dr.layoutReplot=!0),{flags:dr,rangesAltered:Or,undoit:kr,redoit:Lr,eventData:Ot}}function Ae(Ce){var Xe=Ce._fullLayout,rt=Xe.width,ut=Xe.height;return Ce.layout.autosize&&f.plotAutoSize(Ce,Ce.layout,Xe),Xe.width!==rt||Xe.height!==ut}function Oe(Ce,Xe,rt,ut){Ce=x.getGraphDiv(Ce),A.clearPromiseQueue(Ce),x.isPlainObject(Xe)||(Xe={}),x.isPlainObject(rt)||(rt={}),Object.keys(Xe).length&&(Ce.changed=!0),Object.keys(rt).length&&(Ce.changed=!0);var Pt=A.coerceTraceIndices(Ce,ut),St=ae(Ce,x.extendFlat({},Xe),Pt),Nt=St.flags,jt=ke(Ce,x.extendFlat({},rt)),Ot=jt.flags;(Nt.calc||Ot.calc)&&(Ce.calcdata=void 0),Nt.clearAxisTypes&&A.clearAxisTypes(Ce,Pt,rt);var Kt=[];Ot.layoutReplot?Kt.push(b.layoutReplot):Nt.fullReplot?Kt.push(N._doPlot):(Kt.push(f.previousPromises),ue(Ce,Ot,jt)||f.supplyDefaults(Ce),Nt.style&&Kt.push(b.doTraceStyle),(Nt.colorbars||Ot.colorbars)&&Kt.push(b.doColorBars),Ot.legend&&Kt.push(b.doLegend),Ot.layoutstyle&&Kt.push(b.layoutStyles),Ot.axrange&&ye(Kt,jt.rangesAltered),Ot.ticks&&Kt.push(b.doTicksRelayout),Ot.modebar&&Kt.push(b.doModeBar),Ot.camera&&Kt.push(b.doCamera),Kt.push(L)),Kt.push(f.rehover,f.redrag),a.add(Ce,Oe,[Ce,St.undoit,jt.undoit,St.traces],Oe,[Ce,St.redoit,jt.redoit,St.traces]);var Je=x.syncOrAsync(Kt,Ce);return(!Je||!Je.then)&&(Je=Promise.resolve(Ce)),Je.then(function(){return Ce.emit("plotly_update",{data:St.eventData,layout:jt.eventData}),Ce})}function He(Ce){return function(rt){rt._fullLayout._guiEditing=!0;var ut=Ce.apply(null,arguments);return rt._fullLayout._guiEditing=!1,ut}}var Ge=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],_e=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function Re(Ce,Xe){for(var rt=0;rt<Xe.length;rt++){var ut=Xe[rt],Pt=Ce.match(ut.pattern);if(Pt){var St=Pt[1]||"";return{head:St,tail:Ce.substr(St.length+1),attr:ut.attr}}}}function We(Ce,Xe){var rt=t(Xe,Ce).get();if(rt!==void 0)return rt;var ut=Ce.split(".");for(ut.pop();ut.length>1;)if(ut.pop(),rt=t(Xe,ut.join(".")+".uirevision").get(),rt!==void 0)return rt;return Xe.uirevision}function qe(Ce,Xe){for(var rt=0;rt<Xe.length;rt++)if(Xe[rt]._fullInput.uid===Ce)return rt;return-1}function Ue(Ce,Xe,rt){for(var ut=0;ut<Xe.length;ut++)if(Xe[ut].uid===Ce)return ut;return!Xe[rt]||Xe[rt].uid?-1:rt}function Ie(Ce,Xe){var rt=x.isPlainObject(Ce),ut=Array.isArray(Ce);return rt||ut?(rt&&x.isPlainObject(Xe)||ut&&Array.isArray(Xe))&&JSON.stringify(Ce)===JSON.stringify(Xe):Ce===Xe}function Ve(Ce,Xe,rt,ut){var Pt=ut._preGUI,St,Nt,jt,Ot,Kt,Je,gt,Et,rr,vr,or=[],dr={},Lr={};for(St in Pt){if(Kt=Re(St,Ge),Kt){if(rr=Kt.head,vr=Kt.tail,Nt=Kt.attr||rr+".uirevision",jt=t(ut,Nt).get(),Ot=jt&&We(Nt,Xe),Ot&&Ot===jt){if(Je=Pt[St],Je===null&&(Je=void 0),gt=t(Xe,St),Et=gt.get(),Ie(Et,Je)){Et===void 0&&vr==="autorange"&&or.push(rr),gt.set(ne(t(ut,St).get()));continue}else if(vr==="autorange"||vr.substr(0,6)==="range["){var kr=Pt[rr+".range[0]"],tr=Pt[rr+".range[1]"],Or=Pt[rr+".autorange"];if(Or||Or===null&&kr===null&&tr===null){if(!(rr in dr)){var et=t(Xe,rr).get();dr[rr]=et&&(et.autorange||et.autorange!==!1&&(!et.range||et.range.length!==2))}if(dr[rr]){gt.set(ne(t(ut,St).get()));continue}}}}}else x.warn("unrecognized GUI edit: "+St);delete Pt[St],Kt&&Kt.tail.substr(0,6)==="range["&&(Lr[Kt.head]=1)}for(var we=0;we<or.length;we++){var Se=or[we];if(Lr[Se]){var De=t(Xe,Se).get();De&&delete De.autorange}}var je=ut._tracePreGUI;for(var $e in je){var ot=je[$e],st=null,pt;for(St in ot){if(!st){var wt=qe($e,rt);if(wt<0){delete je[$e];break}var Wt=rt[wt];pt=Wt._fullInput;var yr=Ue($e,Ce,pt.index);if(yr<0){delete je[$e];break}st=Ce[yr]}if(Kt=Re(St,_e),Kt){if(Kt.attr?(jt=t(ut,Kt.attr).get(),Ot=jt&&We(Kt.attr,Xe)):(jt=pt.uirevision,Ot=st.uirevision,Ot===void 0&&(Ot=Xe.uirevision)),Ot&&Ot===jt&&(Je=ot[St],Je===null&&(Je=void 0),gt=t(st,St),Et=gt.get(),Ie(Et,Je))){gt.set(ne(t(pt,St).get()));continue}}else x.warn("unrecognized GUI edit: "+St+" in trace uid "+$e);delete ot[St]}}}function dt(Ce,Xe,rt,ut){var Pt,St;function Nt(){return N.addFrames(Ce,Pt)}Ce=x.getGraphDiv(Ce),A.clearPromiseQueue(Ce);var jt=Ce._fullData,Ot=Ce._fullLayout;if(!x.isPlotDiv(Ce)||!jt||!Ot)St=N.newPlot(Ce,Xe,rt,ut);else{if(x.isPlainObject(Xe)){var Kt=Xe;Xe=Kt.data,rt=Kt.layout,ut=Kt.config,Pt=Kt.frames}var Je=!1;if(ut){var gt=x.extendDeep({},Ce._context);Ce._context=void 0,O(Ce,ut),Je=zt(gt,Ce._context)}Ce.data=Xe||[],A.cleanData(Ce.data),Ce.layout=rt||{},A.cleanLayout(Ce.layout),Ve(Ce.data,Ce.layout,jt,Ot),f.supplyDefaults(Ce,{skipUpdateCalc:!0});var Et=Ce._fullData,rr=Ce._fullLayout,vr=rr.datarevision===void 0,or=rr.transition,dr=Gt(Ce,Ot,rr,vr,or),Lr=dr.newDataRevision,kr=Rt(Ce,jt,Et,vr,or,Lr);if(Ae(Ce)&&(dr.layoutReplot=!0),kr.calc||dr.calc){Ce.calcdata=void 0;for(var tr=Object.getOwnPropertyNames(rr),Or=0;Or<tr.length;Or++){var et=tr[Or],we=et.substring(0,5);if(we==="xaxis"||we==="yaxis"){var Se=rr[et]._emptyCategories;Se&&Se()}}}else f.supplyDefaultsUpdateCalc(Ce.calcdata,Et);var De=[];if(Pt&&(Ce._transitionData={},f.createTransitionData(Ce),De.push(Nt)),rr.transition&&!Je&&(kr.anim||dr.anim))dr.ticks&&De.push(b.doTicksRelayout),f.doCalcdata(Ce),b.doAutoRangeAndConstraints(Ce),De.push(function(){return f.transitionFromReact(Ce,kr,dr,Ot)});else if(kr.fullReplot||dr.layoutReplot||Je)Ce._fullLayout._skipDefaults=!0,De.push(N._doPlot);else{for(var je in dr.arrays){var $e=dr.arrays[je];if($e.length){var ot=r.getComponentMethod(je,"drawOne");if(ot!==x.noop)for(var st=0;st<$e.length;st++)ot(Ce,$e[st]);else{var pt=r.getComponentMethod(je,"draw");if(pt===x.noop)throw new Error("cannot draw components: "+je);pt(Ce)}}}De.push(f.previousPromises),kr.style&&De.push(b.doTraceStyle),(kr.colorbars||dr.colorbars)&&De.push(b.doColorBars),dr.legend&&De.push(b.doLegend),dr.layoutstyle&&De.push(b.layoutStyles),dr.axrange&&ye(De),dr.ticks&&De.push(b.doTicksRelayout),dr.modebar&&De.push(b.doModeBar),dr.camera&&De.push(b.doCamera),De.push(L)}De.push(f.rehover,f.redrag),St=x.syncOrAsync(De,Ce),(!St||!St.then)&&(St=Promise.resolve(Ce))}return St.then(function(){return Ce.emit("plotly_react",{data:Xe,layout:rt}),Ce})}function Rt(Ce,Xe,rt,ut,Pt,St){var Nt=Xe.length===rt.length;if(!Pt&&!Nt)return{fullReplot:!0,calc:!0};var jt=M.traceFlags();jt.arrays={},jt.nChanges=0,jt.nChangesAnim=0;var Ot,Kt;function Je(rr){var vr=n.getTraceValObject(Kt,rr);return!Kt._module.animatable&&vr.anim&&(vr.anim=!1),vr}var gt={getValObject:Je,flags:jt,immutable:ut,transition:Pt,newDataRevision:St,gd:Ce},Et={};for(Ot=0;Ot<Xe.length;Ot++)if(rt[Ot]){if(Kt=rt[Ot]._fullInput,f.hasMakesDataTransform(Kt)&&(Kt=rt[Ot]),Et[Kt.uid])continue;Et[Kt.uid]=1,kt(Xe[Ot]._fullInput,Kt,[],gt)}return(jt.calc||jt.plot)&&(jt.fullReplot=!0),Pt&&jt.nChanges&&jt.nChangesAnim&&(jt.anim=jt.nChanges===jt.nChangesAnim&&Nt?"all":"some"),jt}function Gt(Ce,Xe,rt,ut,Pt){var St=M.layoutFlags();St.arrays={},St.rangesAltered={},St.nChanges=0,St.nChangesAnim=0;function Nt(Ot){return n.getLayoutValObject(rt,Ot)}var jt={getValObject:Nt,flags:St,immutable:ut,transition:Pt,gd:Ce};return kt(Xe,rt,[],jt),(St.plot||St.calc)&&(St.layoutReplot=!0),Pt&&St.nChanges&&St.nChangesAnim&&(St.anim=St.nChanges===St.nChangesAnim?"all":"some"),St}function kt(Ce,Xe,rt,ut){var Pt,St,Nt,jt=ut.getValObject,Ot=ut.flags,Kt=ut.immutable,Je=ut.inArray,gt=ut.arrayIndex;function Et(){var wt=Pt.editType;if(Je&&wt.indexOf("arraydraw")!==-1){x.pushUnique(Ot.arrays[Je],gt);return}M.update(Ot,Pt),wt!=="none"&&Ot.nChanges++,ut.transition&&Pt.anim&&Ot.nChangesAnim++,(ce.test(Nt)||me.test(Nt))&&(Ot.rangesAltered[rt[0]]=1),xe.test(Nt)&&t(Xe,"_inputDomain").set(null),St==="datarevision"&&(Ot.newDataRevision=1)}function rr(wt){return wt.valType==="data_array"||wt.arrayOk}for(St in Ce){if(Ot.calc&&!ut.transition)return;var vr=Ce[St],or=Xe[St],dr=rt.concat(St);if(Nt=dr.join("."),!(St.charAt(0)==="_"||typeof vr=="function"||vr===or)){if((St==="tick0"||St==="dtick")&&rt[0]!=="geo"){var Lr=Xe.tickmode;if(Lr==="auto"||Lr==="array"||!Lr)continue}if(!(St==="range"&&Xe.autorange)&&!((St==="zmin"||St==="zmax")&&Xe.type==="contourcarpet")&&(Pt=jt(dr),!!Pt&&!(Pt._compareAsJSON&&JSON.stringify(vr)===JSON.stringify(or)))){var kr=Pt.valType,tr,Or=rr(Pt),et=Array.isArray(vr),we=Array.isArray(or);if(et&&we){var Se="_input_"+St,De=Ce[Se],je=Xe[Se];if(Array.isArray(De)&&De===je)continue}if(or===void 0)Or&&et?Ot.calc=!0:Et();else if(Pt._isLinkedToArray){var $e=[],ot=!1;Je||(Ot.arrays[St]=$e);var st=Math.min(vr.length,or.length),pt=Math.max(vr.length,or.length);if(st!==pt)if(Pt.editType==="arraydraw")ot=!0;else{Et();continue}for(tr=0;tr<st;tr++)kt(vr[tr],or[tr],dr.concat(tr),x.extendFlat({inArray:St,arrayIndex:tr},ut));if(ot)for(tr=st;tr<pt;tr++)$e.push(tr)}else!kr&&x.isPlainObject(vr)?kt(vr,or,dr,ut):Or?et&&we?(Kt&&(Ot.calc=!0),(Kt||ut.newDataRevision)&&Et()):et!==we?Ot.calc=!0:Et():et&&we?(vr.length!==or.length||String(vr)!==String(or))&&Et():Et()}}}for(St in Xe)if(!(St in Ce||St.charAt(0)==="_"||typeof Xe[St]=="function"))if(Pt=jt(rt.concat(St)),rr(Pt)&&Array.isArray(Xe[St])){Ot.calc=!0;return}else Et()}function zt(Ce,Xe){var rt;for(rt in Ce)if(rt.charAt(0)!=="_"){var ut=Ce[rt],Pt=Xe[rt];if(ut!==Pt)if(x.isPlainObject(ut)&&x.isPlainObject(Pt)){if(zt(ut,Pt))return!0}else if(Array.isArray(ut)&&Array.isArray(Pt)){if(ut.length!==Pt.length)return!0;for(var St=0;St<ut.length;St++)if(ut[St]!==Pt[St])if(x.isPlainObject(ut[St])&&x.isPlainObject(Pt[St])){if(zt(ut[St],Pt[St]))return!0}else return!0}else return!0}}function Bt(Ce,Xe,rt){if(Ce=x.getGraphDiv(Ce),!x.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var ut=Ce._transitionData;ut._frameQueue||(ut._frameQueue=[]),rt=f.supplyAnimationDefaults(rt);var Pt=rt.transition,St=rt.frame;ut._frameWaitingCnt===void 0&&(ut._frameWaitingCnt=0);function Nt(Kt){return Array.isArray(Pt)?Kt>=Pt.length?Pt[0]:Pt[Kt]:Pt}function jt(Kt){return Array.isArray(St)?Kt>=St.length?St[0]:St[Kt]:St}function Ot(Kt,Je){var gt=0;return function(){if(Kt&&++gt===Je)return Kt()}}return new Promise(function(Kt,Je){function gt(){if(ut._frameQueue.length!==0){for(;ut._frameQueue.length;){var st=ut._frameQueue.pop();st.onInterrupt&&st.onInterrupt()}Ce.emit("plotly_animationinterrupted",[])}}function Et(st){if(st.length!==0){for(var pt=0;pt<st.length;pt++){var wt;st[pt].type==="byname"?wt=f.computeFrame(Ce,st[pt].name):wt=st[pt].data;var Wt=jt(pt),yr=Nt(pt);yr.duration=Math.min(yr.duration,Wt.duration);var xr={frame:wt,name:st[pt].name,frameOpts:Wt,transitionOpts:yr};pt===st.length-1&&(xr.onComplete=Ot(Kt,2),xr.onInterrupt=Je),ut._frameQueue.push(xr)}rt.mode==="immediate"&&(ut._lastFrameAt=-1/0),ut._animationRaf||or()}}function rr(){Ce.emit("plotly_animated"),window.cancelAnimationFrame(ut._animationRaf),ut._animationRaf=null}function vr(){ut._currentFrame&&ut._currentFrame.onComplete&&ut._currentFrame.onComplete();var st=ut._currentFrame=ut._frameQueue.shift();if(st){var pt=st.name?st.name.toString():null;Ce._fullLayout._currentFrame=pt,ut._lastFrameAt=Date.now(),ut._timeToNext=st.frameOpts.duration,f.transition(Ce,st.frame.data,st.frame.layout,A.coerceTraceIndices(Ce,st.frame.traces),st.frameOpts,st.transitionOpts).then(function(){st.onComplete&&st.onComplete()}),Ce.emit("plotly_animatingframe",{name:pt,frame:st.frame,animation:{frame:st.frameOpts,transition:st.transitionOpts}})}else rr()}function or(){Ce.emit("plotly_animating"),ut._lastFrameAt=-1/0,ut._timeToNext=0,ut._runningTransitions=0,ut._currentFrame=null;var st=function(){ut._animationRaf=window.requestAnimationFrame(st),Date.now()-ut._lastFrameAt>ut._timeToNext&&vr()};st()}var dr=0;function Lr(st){return Array.isArray(Pt)?dr>=Pt.length?st.transitionOpts=Pt[dr]:st.transitionOpts=Pt[0]:st.transitionOpts=Pt,dr++,st}var kr,tr,Or=[],et=Xe==null,we=Array.isArray(Xe),Se=!et&&!we&&x.isPlainObject(Xe);if(Se)Or.push({type:"object",data:Lr(x.extendFlat({},Xe))});else if(et||["string","number"].indexOf(typeof Xe)!==-1)for(kr=0;kr<ut._frames.length;kr++)tr=ut._frames[kr],!!tr&&(et||String(tr.group)===String(Xe))&&Or.push({type:"byname",name:String(tr.name),data:Lr({name:tr.name})});else if(we)for(kr=0;kr<Xe.length;kr++){var De=Xe[kr];["number","string"].indexOf(typeof De)!==-1?(De=String(De),Or.push({type:"byname",name:De,data:Lr({name:De})})):x.isPlainObject(De)&&Or.push({type:"object",data:Lr(x.extendFlat({},De))})}for(kr=0;kr<Or.length;kr++)if(tr=Or[kr],tr.type==="byname"&&!ut._frameHash[tr.data.name]){x.warn('animate failure: frame not found: "'+tr.data.name+'"'),Je();return}["next","immediate"].indexOf(rt.mode)!==-1&&gt(),rt.direction==="reverse"&&Or.reverse();var je=Ce._fullLayout._currentFrame;if(je&&rt.fromcurrent){var $e=-1;for(kr=0;kr<Or.length;kr++)if(tr=Or[kr],tr.type==="byname"&&tr.name===je){$e=kr;break}if($e>0&&$e<Or.length-1){var ot=[];for(kr=0;kr<Or.length;kr++)tr=Or[kr],(Or[kr].type!=="byname"||kr>$e)&&ot.push(tr);Or=ot}}Or.length>0?Et(Or):(Ce.emit("plotly_animated"),Kt())})}function Lt(Ce,Xe,rt){if(Ce=x.getGraphDiv(Ce),Xe==null)return Promise.resolve();if(!x.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var ut,Pt,St,Nt,jt=Ce._transitionData._frames,Ot=Ce._transitionData._frameHash;if(!Array.isArray(Xe))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Xe);var Kt=jt.length+Xe.length*2,Je=[],gt={};for(ut=Xe.length-1;ut>=0;ut--)if(!!x.isPlainObject(Xe[ut])){var Et=Xe[ut].name,rr=(Ot[Et]||gt[Et]||{}).name,vr=Xe[ut].name,or=Ot[rr]||gt[rr];rr&&vr&&typeof vr=="number"&&or&&T<w&&(T++,x.warn('addFrames: overwriting frame "'+(Ot[rr]||gt[rr]).name+'" with a frame whose name of type "number" also equates to "'+rr+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),T===w&&x.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),gt[Et]={name:Et},Je.push({frame:f.supplyFrameDefaults(Xe[ut]),index:rt&&rt[ut]!==void 0&&rt[ut]!==null?rt[ut]:Kt+ut})}Je.sort(function(Se,De){return Se.index>De.index?-1:Se.index<De.index?1:0});var dr=[],Lr=[],kr=jt.length;for(ut=Je.length-1;ut>=0;ut--){if(Pt=Je[ut].frame,typeof Pt.name=="number"&&x.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pt.name)for(;Ot[Pt.name="frame "+Ce._transitionData._counter++];);if(Ot[Pt.name]){for(St=0;St<jt.length&&(jt[St]||{}).name!==Pt.name;St++);dr.push({type:"replace",index:St,value:Pt}),Lr.unshift({type:"replace",index:St,value:jt[St]})}else Nt=Math.max(0,Math.min(Je[ut].index,kr)),dr.push({type:"insert",index:Nt,value:Pt}),Lr.unshift({type:"delete",index:Nt}),kr++}var tr=f.modifyFrames,Or=f.modifyFrames,et=[Ce,Lr],we=[Ce,dr];return a&&a.add(Ce,tr,et,Or,we),f.modifyFrames(Ce,dr)}function Mt(Ce,Xe){if(Ce=x.getGraphDiv(Ce),!x.isPlotDiv(Ce))throw new Error("This element is not a Plotly plot: "+Ce);var rt,ut,Pt=Ce._transitionData._frames,St=[],Nt=[];if(!Xe)for(Xe=[],rt=0;rt<Pt.length;rt++)Xe.push(rt);for(Xe=Xe.slice(),Xe.sort(),rt=Xe.length-1;rt>=0;rt--)ut=Xe[rt],St.push({type:"delete",index:ut}),Nt.unshift({type:"insert",index:ut,value:Pt[ut]});var jt=f.modifyFrames,Ot=f.modifyFrames,Kt=[Ce,Nt],Je=[Ce,St];return a&&a.add(Ce,jt,Kt,Ot,Je),f.modifyFrames(Ce,St)}function it(Ce){Ce=x.getGraphDiv(Ce);var Xe=Ce._fullLayout||{},rt=Ce._fullData||[];return f.cleanPlot([],{},rt,Xe),f.purge(Ce),i.purge(Ce),Xe._container&&Xe._container.remove(),delete Ce._context,Ce}function ht(Ce){var Xe=Ce._fullLayout,rt=Ce.getBoundingClientRect();if(!x.equalDomRects(rt,Xe._lastBBox)){var ut=Xe._invTransform=x.inverseTransformMatrix(x.getFullTransformMatrix(Ce));Xe._invScaleX=Math.sqrt(ut[0][0]*ut[0][0]+ut[0][1]*ut[0][1]+ut[0][2]*ut[0][2]),Xe._invScaleY=Math.sqrt(ut[1][0]*ut[1][0]+ut[1][1]*ut[1][1]+ut[1][2]*ut[1][2]),Xe._lastBBox=rt}}function Qe(Ce){var Xe=u.select(Ce),rt=Ce._fullLayout;if(rt._calcInverseTransform=ht,rt._calcInverseTransform(Ce),rt._container=Xe.selectAll(".plot-container").data([0]),rt._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),rt._paperdiv=rt._container.selectAll(".svg-container").data([0]),rt._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),rt._glcontainer=rt._paperdiv.selectAll(".gl-container").data([{}]),rt._glcontainer.enter().append("div").classed("gl-container",!0),rt._paperdiv.selectAll(".main-svg").remove(),rt._paperdiv.select(".modebar-container").remove(),rt._paper=rt._paperdiv.insert("svg",":first-child").classed("main-svg",!0),rt._toppaper=rt._paperdiv.append("svg").classed("main-svg",!0),rt._modebardiv=rt._paperdiv.append("div"),delete rt._modeBar,rt._hoverpaper=rt._paperdiv.append("svg").classed("main-svg",!0),!rt._uid){var ut={};u.selectAll("defs").each(function(){this.id&&(ut[this.id.split("-")[1]]=1)}),rt._uid=x.randstr(ut)}rt._paperdiv.selectAll(".main-svg").attr(d.svgAttrs),rt._defs=rt._paper.append("defs").attr("id","defs-"+rt._uid),rt._clips=rt._defs.append("g").classed("clips",!0),rt._topdefs=rt._toppaper.append("defs").attr("id","topdefs-"+rt._uid),rt._topclips=rt._topdefs.append("g").classed("clips",!0),rt._bgLayer=rt._paper.append("g").classed("bglayer",!0),rt._draggers=rt._paper.append("g").classed("draglayer",!0);var Pt=rt._paper.append("g").classed("layer-below",!0);rt._imageLowerLayer=Pt.append("g").classed("imagelayer",!0),rt._shapeLowerLayer=Pt.append("g").classed("shapelayer",!0),rt._cartesianlayer=rt._paper.append("g").classed("cartesianlayer",!0),rt._polarlayer=rt._paper.append("g").classed("polarlayer",!0),rt._smithlayer=rt._paper.append("g").classed("smithlayer",!0),rt._ternarylayer=rt._paper.append("g").classed("ternarylayer",!0),rt._geolayer=rt._paper.append("g").classed("geolayer",!0),rt._funnelarealayer=rt._paper.append("g").classed("funnelarealayer",!0),rt._pielayer=rt._paper.append("g").classed("pielayer",!0),rt._iciclelayer=rt._paper.append("g").classed("iciclelayer",!0),rt._treemaplayer=rt._paper.append("g").classed("treemaplayer",!0),rt._sunburstlayer=rt._paper.append("g").classed("sunburstlayer",!0),rt._indicatorlayer=rt._toppaper.append("g").classed("indicatorlayer",!0),rt._glimages=rt._paper.append("g").classed("glimages",!0);var St=rt._toppaper.append("g").classed("layer-above",!0);rt._imageUpperLayer=St.append("g").classed("imagelayer",!0),rt._shapeUpperLayer=St.append("g").classed("shapelayer",!0),rt._infolayer=rt._toppaper.append("g").classed("infolayer",!0),rt._menulayer=rt._toppaper.append("g").classed("menulayer",!0),rt._zoomlayer=rt._toppaper.append("g").classed("zoomlayer",!0),rt._hoverlayer=rt._hoverpaper.append("g").classed("hoverlayer",!0),rt._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),Ce.emit("plotly_framework")}N.animate=Bt,N.addFrames=Lt,N.deleteFrames=Mt,N.addTraces=fe,N.deleteTraces=se,N.extendTraces=J,N.moveTraces=H,N.prependTraces=le,N.newPlot=I,N._doPlot=v,N.purge=it,N.react=dt,N.redraw=F,N.relayout=oe,N.restyle=Y,N.setPlotConfig=S,N.update=Oe,N._guiRelayout=He(oe),N._guiRestyle=He(Y),N._guiUpdate=He(Oe),N._storeDirectGUIEdit=$},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(e,z,N){var u={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},s={};function m(x,t){for(var i in x){var a=x[i];a.valType?t[i]=a.dflt:(t[i]||(t[i]={}),m(a,t[i]))}}m(u,s),z.exports={configAttributes:u,dfltConfig:s}},{}],542:[function(e,z,N){var u=e("../registry"),s=e("../lib"),m=e("../plots/attributes"),x=e("../plots/layout_attributes"),t=e("../plots/frame_attributes"),i=e("../plots/animation_attributes"),a=e("./plot_config").configAttributes,r=e("./edit_types"),n=s.extendDeepAll,f=s.isPlainObject,l=s.isArrayOrTypedArray,o=s.nestedProperty,c=s.valObjectMeta,h="_isSubplotObj",d="_isLinkedToArray",p="_arrayAttrRegexps",y="_deprecated",g=[h,d,p,y];N.IS_SUBPLOT_OBJ=h,N.IS_LINKED_TO_ARRAY=d,N.DEPRECATED=y,N.UNDERSCORE_ATTRS=g,N.get=function(){var I={};u.allTypes.forEach(function(U){I[U]=_(U)});var D={};return Object.keys(u.transformsRegistry).forEach(function(U){D[U]=w(U)}),{defs:{valObjects:c,metaKeys:g.concat(["description","role","editType","impliedEdits"]),editType:{traces:r.traces,layout:r.layout},impliedEdits:{}},traces:I,layout:T(),transforms:D,frames:v(),animation:L(i),config:L(a)}},N.crawl=function(I,D,U,B){var j=U||0;B=B||"",Object.keys(I).forEach(function(Z){var ee=I[Z];if(g.indexOf(Z)===-1){var q=(B?B+".":"")+Z;D(ee,Z,I,j,q),!N.isValObject(ee)&&f(ee)&&Z!=="impliedEdits"&&N.crawl(ee,D,j+1,q)}})},N.isValObject=function(I){return I&&I.valType!==void 0},N.findArrayAttributes=function(I){var D=[],U=[],B=[],j,Z;function ee(se,H,Y,ne){U=U.slice(0,ne).concat([H]),B=B.slice(0,ne).concat([se&&se._isLinkedToArray]);var te=se&&(se.valType==="data_array"||se.arrayOk===!0)&&!(U[ne-1]==="colorbar"&&(H==="ticktext"||H==="tickvals"));!te||q(j,0,"")}function q(se,H,Y){var ne=se[U[H]],te=Y+U[H];if(H===U.length-1)l(ne)&&D.push(Z+te);else if(B[H]){if(Array.isArray(ne))for(var K=0;K<ne.length;K++)f(ne[K])&&q(ne[K],H+1,te+"["+K+"].")}else f(ne)&&q(ne,H+1,te+".")}j=I,Z="",N.crawl(m,ee),I._module&&I._module.attributes&&N.crawl(I._module.attributes,ee);var W=I.transforms;if(W)for(var J=0;J<W.length;J++){var le=W[J],fe=le._module;fe&&(Z="transforms["+J+"].",j=le,N.crawl(fe.attributes,ee))}return D},N.getTraceValObject=function(I,D){var U=D[0],B=1,j,Z;if(U==="transforms"){if(D.length===1)return m.transforms;var ee=I.transforms;if(!Array.isArray(ee)||!ee.length)return!1;var q=D[1];if(!M(q)||q>=ee.length)return!1;j=(u.transformsRegistry[ee[q].type]||{}).attributes,Z=j&&j[D[2]],B=3}else{var W=I._module;if(W||(W=(u.modules[I.type||m.type.dflt]||{})._module),!W)return!1;if(j=W.attributes,Z=j&&j[U],!Z){var J=W.basePlotModule;J&&J.attributes&&(Z=J.attributes[U])}Z||(Z=m[U])}return b(Z,D,B)},N.getLayoutValObject=function(I,D){var U=A(I,D[0]);return b(U,D,1)};function A(I,D){var U,B,j,Z,ee=I._basePlotModules;if(ee){var q;for(U=0;U<ee.length;U++){if(j=ee[U],j.attrRegex&&j.attrRegex.test(D)){if(j.layoutAttrOverrides)return j.layoutAttrOverrides;!q&&j.layoutAttributes&&(q=j.layoutAttributes)}var W=j.baseLayoutAttrOverrides;if(W&&D in W)return W[D]}if(q)return q}var J=I._modules;if(J){for(U=0;U<J.length;U++)if(Z=J[U].layoutAttributes,Z&&D in Z)return Z[D]}for(B in u.componentsRegistry){if(j=u.componentsRegistry[B],j.name==="colorscale"&&D.indexOf("coloraxis")===0)return j.layoutAttributes[D];if(!j.schema&&D===j.name)return j.layoutAttributes}return D in x?x[D]:!1}function b(I,D,U){if(!I)return!1;if(I._isLinkedToArray){if(M(D[U]))U++;else if(U<D.length)return!1}for(;U<D.length;U++){var B=I[D[U]];if(f(B))I=B;else break;if(U===D.length-1)break;if(I._isLinkedToArray){if(U++,!M(D[U]))return!1}else if(I.valType==="info_array"){U++;var j=D[U];if(!M(j))return!1;var Z=I.items;if(Array.isArray(Z)){if(j>=Z.length)return!1;if(I.dimensions===2){if(U++,D.length===U)return I;var ee=D[U];if(!M(ee))return!1;I=Z[j][ee]}else I=Z[j]}else I=Z}}return I}function M(I){return I===Math.round(I)&&I>=0}function _(I){var D,U;D=u.modules[I]._module,U=D.basePlotModule;var B={};B.type=null;var j=n({},m),Z=n({},D.attributes);N.crawl(Z,function(W,J,le,fe,se){o(j,se).set(void 0),W===void 0&&o(Z,se).set(void 0)}),n(B,j),u.traceIs(I,"noOpacity")&&delete B.opacity,u.traceIs(I,"showLegend")||(delete B.showlegend,delete B.legendgroup),u.traceIs(I,"noHover")&&(delete B.hoverinfo,delete B.hoverlabel),D.selectPoints||delete B.selectedpoints,n(B,Z),U.attributes&&n(B,U.attributes),B.type=I;var ee={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:I,attributes:L(B)};if(D.layoutAttributes){var q={};n(q,D.layoutAttributes),ee.layoutAttributes=L(q)}return D.animatable||N.crawl(ee,function(W){N.isValObject(W)&&"anim"in W&&delete W.anim}),ee}function T(){var I={},D,U;n(I,x);for(D in u.subplotsRegistry)if(U=u.subplotsRegistry[D],!!U.layoutAttributes)if(Array.isArray(U.attr))for(var B=0;B<U.attr.length;B++)O(I,U,U.attr[B]);else{var j=U.attr==="subplot"?U.name:U.attr;O(I,U,j)}for(D in u.componentsRegistry){U=u.componentsRegistry[D];var Z=U.schema;if(Z&&(Z.subplots||Z.layout)){var ee=Z.subplots;if(ee&&ee.xaxis&&!ee.yaxis)for(var q in ee.xaxis)delete I.yaxis[q]}else U.name==="colorscale"?n(I,U.layoutAttributes):U.layoutAttributes&&F(I,U.layoutAttributes,U.name)}return{layoutAttributes:L(I)}}function w(I){var D=u.transformsRegistry[I],U=n({},D.attributes);return Object.keys(u.componentsRegistry).forEach(function(B){var j=u.componentsRegistry[B];j.schema&&j.schema.transforms&&j.schema.transforms[I]&&Object.keys(j.schema.transforms[I]).forEach(function(Z){F(U,j.schema.transforms[I][Z],Z)})}),{attributes:L(U)}}function v(){var I={frames:n({},t)};return L(I),I.frames}function L(I){return S(I),k(I),P(I),I}function S(I){function D(B){return{valType:"string",editType:"none"}}function U(B,j,Z){N.isValObject(B)?(B.arrayOk===!0||B.valType==="data_array")&&(Z[j+"src"]=D()):f(B)&&(B.role="object")}N.crawl(I,U)}function k(I){function D(U,B,j){if(!!U){var Z=U[d];!Z||(delete U[d],j[B]={items:{}},j[B].items[Z]=U,j[B].role="object")}}N.crawl(I,D)}function P(I){function D(U){for(var B in U)if(f(U[B]))D(U[B]);else if(Array.isArray(U[B]))for(var j=0;j<U[B].length;j++)D(U[B][j]);else U[B]instanceof RegExp&&(U[B]=U[B].toString())}D(I)}function O(I,D,U){var B=o(I,U),j=n({},D.layoutAttributes);j[h]=!0,B.set(j)}function F(I,D,U){var B=o(I,U);B.set(n(B.get()||{},D))}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(e,z,N){var u=e("../lib"),s=e("../plots/attributes"),m="templateitemname",x={name:{valType:"string",editType:"none"}};x[m]={valType:"string",editType:"calc"},N.templatedArray=function(a,r){return r._isLinkedToArray=a,r.name=x.name,r[m]=x[m],r},N.traceTemplater=function(a){var r={},n,f;for(n in a)f=a[n],Array.isArray(f)&&f.length&&(r[n]=0);function l(o){n=u.coerce(o,{},s,"type");var c={type:n,_template:null};if(n in r){f=a[n];var h=r[n]%f.length;r[n]++,c._template=f[h]}return c}return{newTrace:l}},N.newContainer=function(a,r,n){var f=a._template,l=f&&(f[r]||n&&f[n]);u.isPlainObject(l)||(l=null);var o=a[r]={_template:l};return o},N.arrayTemplater=function(a,r,n){var f=a._template,l=f&&f[i(r)],o=f&&f[r];(!Array.isArray(o)||!o.length)&&(o=[]);var c={};function h(p){var y={name:p.name,_input:p},g=y[m]=p[m];if(!t(g))return y._template=l,y;for(var A=0;A<o.length;A++){var b=o[A];if(b.name===g)return c[g]=1,y._template=b,y}return y[n]=p[n]||!1,y._template=!1,y}function d(){for(var p=[],y=0;y<o.length;y++){var g=o[y],A=g.name;if(t(A)&&!c[A]){var b={_template:g,name:A,_input:{_templateitemname:A}};b[m]=g[m],p.push(b),c[A]=1}}return p}return{newItem:h,defaultItems:d}};function t(a){return a&&typeof a=="string"}function i(a){var r=a.length-1;return a.charAt(r)!=="s"&&u.warn("bad argument to arrayDefaultKey: "+a),a.substr(0,a.length-1)+"defaults"}N.arrayDefaultKey=i,N.arrayEditor=function(a,r,n){var f=(u.nestedProperty(a,r).get()||[]).length,l=n._index,o=l>=f&&(n._input||{})._templateitemname;o&&(l=f);var c=r+"["+l+"]",h;function d(){h={},o&&(h[c]={},h[c][m]=o)}d();function p(b,M){h[b]=M}function y(b,M){o?u.nestedProperty(h[c],b).set(M):h[c+"."+b]=M}function g(){var b=h;return d(),b}function A(b,M){b&&y(b,M);var _=g();for(var T in _)u.nestedProperty(a,T).set(_[T])}return{modifyBase:p,modifyItem:y,getUpdateObj:g,applyUpdate:A}}},{"../lib":503,"../plots/attributes":550}],544:[function(e,z,N){var u=e("@plotly/d3"),s=e("../registry"),m=e("../plots/plots"),x=e("../lib"),t=e("../lib/clear_gl_canvases"),i=e("../components/color"),a=e("../components/drawing"),r=e("../components/titles"),n=e("../components/modebar"),f=e("../plots/cartesian/axes"),l=e("../constants/alignment"),o=e("../plots/cartesian/constraints"),c=o.enforce,h=o.clean,d=e("../plots/cartesian/autorange").doAutoRange,p="start",y="middle",g="end";N.layoutStyles=function(k){return x.syncOrAsync([m.doAutoMargin,b],k)};function A(k,P,O){for(var F=0;F<O.length;F++){var I=O[F][0],D=O[F][1];if(!(I[0]>=k[1]||I[1]<=k[0])&&D[0]<P[1]&&D[1]>P[0])return!0}return!1}function b(k){var P=k._fullLayout,O=P._size,F=O.p,I=f.list(k,"",!0),D,U,B,j,Z,ee;if(P._paperdiv.style({width:k._context.responsive&&P.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":P.width+"px",height:k._context.responsive&&P.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":P.height+"px"}).selectAll(".main-svg").call(a.setSize,P.width,P.height),k._context.setBackground(k,P.paper_bgcolor),N.drawMainTitle(k),n.manage(k),!P._has("cartesian"))return m.previousPromises(k);function q(zt,Bt,Lt){var Mt=zt._lw/2;if(zt._id.charAt(0)==="x"){if(Bt){if(Lt==="top")return Bt._offset-F-Mt}else return O.t+O.h*(1-(zt.position||0))+Mt%1;return Bt._offset+Bt._length+F+Mt}if(Bt){if(Lt==="right")return Bt._offset+Bt._length+F+Mt}else return O.l+O.w*(zt.position||0)+Mt%1;return Bt._offset-F-Mt}for(D=0;D<I.length;D++){j=I[D];var W=j._anchorAxis;j._linepositions={},j._lw=a.crispRound(k,j.linewidth,1),j._mainLinePosition=q(j,W,j.side),j._mainMirrorPosition=j.mirror&&W?q(j,W,l.OPPOSITE_SIDE[j.side]):null}var J=[],le=[],fe=[],se=i.opacity(P.paper_bgcolor)===1&&i.opacity(P.plot_bgcolor)===1&&P.paper_bgcolor===P.plot_bgcolor;for(U in P._plots)if(B=P._plots[U],B.mainplot)B.bg&&B.bg.remove(),B.bg=void 0;else{var H=B.xaxis.domain,Y=B.yaxis.domain,ne=B.plotgroup;if(A(H,Y,fe)){var te=ne.node(),K=B.bg=x.ensureSingle(ne,"rect","bg");te.insertBefore(K.node(),te.childNodes[0]),le.push(U)}else ne.select("rect.bg").remove(),fe.push([H,Y]),se||(J.push(U),le.push(U))}var $=P._bgLayer.selectAll(".bg").data(J);for($.enter().append("rect").classed("bg",!0),$.exit().remove(),$.each(function(zt){P._plots[zt].bg=u.select(this)}),D=0;D<le.length;D++)B=P._plots[le[D]],Z=B.xaxis,ee=B.yaxis,B.bg&&Z._offset!==void 0&&ee._offset!==void 0&&B.bg.call(a.setRect,Z._offset-F,ee._offset-F,Z._length+2*F,ee._length+2*F).call(i.fill,P.plot_bgcolor).style("stroke-width",0);if(!P._hasOnlyLargeSploms)for(U in P._plots){B=P._plots[U],Z=B.xaxis,ee=B.yaxis;var ae=B.clipId="clip"+P._uid+U+"plot",ie=x.ensureSingleById(P._clips,"clipPath",ae,function(zt){zt.classed("plotclip",!0).append("rect")});B.clipRect=ie.select("rect").attr({width:Z._length,height:ee._length}),a.setTranslate(B.plot,Z._offset,ee._offset);var oe,ue;B._hasClipOnAxisFalse?(oe=null,ue=ae):(oe=ae,ue=null),a.setClipUrl(B.plot,oe,k),B.layerClipId=ue}var ye,ce,me,xe,ke,Ae,Oe,He,Ge,_e,Re,We,qe;function Ue(zt){return"M"+ye+","+zt+"H"+ce}function Ie(zt){return"M"+Z._offset+","+zt+"h"+Z._length}function Ve(zt){return"M"+zt+","+He+"V"+Oe}function dt(zt){return"M"+zt+","+ee._offset+"v"+ee._length}function Rt(zt,Bt,Lt){if(!zt.showline||U!==zt._mainSubplot)return"";if(!zt._anchorAxis)return Lt(zt._mainLinePosition);var Mt=Bt(zt._mainLinePosition);return zt.mirror&&(Mt+=Bt(zt._mainMirrorPosition)),Mt}for(U in P._plots){B=P._plots[U],Z=B.xaxis,ee=B.yaxis;var Gt="M0,0";M(Z,U)&&(ke=T(Z,"left",ee,I),ye=Z._offset-(ke?F+ke:0),Ae=T(Z,"right",ee,I),ce=Z._offset+Z._length+(Ae?F+Ae:0),me=q(Z,ee,"bottom"),xe=q(Z,ee,"top"),qe=!Z._anchorAxis||U!==Z._mainSubplot,qe&&(Z.mirror==="allticks"||Z.mirror==="all")&&(Z._linepositions[U]=[me,xe]),Gt=Rt(Z,Ue,Ie),qe&&Z.showline&&(Z.mirror==="all"||Z.mirror==="allticks")&&(Gt+=Ue(me)+Ue(xe)),B.xlines.style("stroke-width",Z._lw+"px").call(i.stroke,Z.showline?Z.linecolor:"rgba(0,0,0,0)")),B.xlines.attr("d",Gt);var kt="M0,0";M(ee,U)&&(Re=T(ee,"bottom",Z,I),Oe=ee._offset+ee._length+(Re?F:0),We=T(ee,"top",Z,I),He=ee._offset-(We?F:0),Ge=q(ee,Z,"left"),_e=q(ee,Z,"right"),qe=!ee._anchorAxis||U!==ee._mainSubplot,qe&&(ee.mirror==="allticks"||ee.mirror==="all")&&(ee._linepositions[U]=[Ge,_e]),kt=Rt(ee,Ve,dt),qe&&ee.showline&&(ee.mirror==="all"||ee.mirror==="allticks")&&(kt+=Ve(Ge)+Ve(_e)),B.ylines.style("stroke-width",ee._lw+"px").call(i.stroke,ee.showline?ee.linecolor:"rgba(0,0,0,0)")),B.ylines.attr("d",kt)}return f.makeClipPaths(k),m.previousPromises(k)}function M(k,P){return(k.ticks||k.showline)&&(P===k._mainSubplot||k.mirror==="all"||k.mirror==="allticks")}function _(k,P,O){if(!O.showline||!O._lw)return!1;if(O.mirror==="all"||O.mirror==="allticks")return!0;var F=O._anchorAxis;if(!F)return!1;var I=l.FROM_BL[P];return O.side===P?F.domain[I]===k.domain[I]:O.mirror&&F.domain[1-I]===k.domain[1-I]}function T(k,P,O,F){if(_(k,P,O))return O._lw;for(var I=0;I<F.length;I++){var D=F[I];if(D._mainAxis===O._mainAxis&&_(k,P,D))return D._lw}return 0}N.drawMainTitle=function(k){var P=k._fullLayout,O=L(P),F=S(P);r.draw(k,"gtitle",{propContainer:P,propName:"title.text",placeholder:P._dfltTitle.plot,attributes:{x:w(P,O),y:v(P,F),"text-anchor":O,dy:F}})};function w(k,P){var O=k.title,F=k._size,I=0;switch(P===p?I=O.pad.l:P===g&&(I=-O.pad.r),O.xref){case"paper":return F.l+F.w*O.x+I;case"container":default:return k.width*O.x+I}}function v(k,P){var O=k.title,F=k._size,I=0;if(P==="0em"||!P?I=-O.pad.b:P===l.CAP_SHIFT+"em"&&(I=O.pad.t),O.y==="auto")return F.t/2;switch(O.yref){case"paper":return F.t+F.h-F.h*O.y+I;case"container":default:return k.height-k.height*O.y+I}}function L(k){var P=k.title,O=y;return x.isRightAnchor(P)?O=g:x.isLeftAnchor(P)&&(O=p),O}function S(k){var P=k.title,O="0em";return x.isTopAnchor(P)?O=l.CAP_SHIFT+"em":x.isMiddleAnchor(P)&&(O=l.MID_SHIFT+"em"),O}N.doTraceStyle=function(k){var P=k.calcdata,O=[],F;for(F=0;F<P.length;F++){var I=P[F],D=I[0]||{},U=D.trace||{},B=U._module||{},j=B.arraysToCalcdata;j&&j(I,U);var Z=B.editStyle;Z&&O.push({fn:Z,cd0:D})}if(O.length){for(F=0;F<O.length;F++){var ee=O[F];ee.fn(k,ee.cd0)}t(k),N.redrawReglTraces(k)}return m.style(k),s.getComponentMethod("legend","draw")(k),m.previousPromises(k)},N.doColorBars=function(k){return s.getComponentMethod("colorbar","draw")(k),m.previousPromises(k)},N.layoutReplot=function(k){var P=k.layout;return k.layout=void 0,s.call("_doPlot",k,"",P)},N.doLegend=function(k){return s.getComponentMethod("legend","draw")(k),m.previousPromises(k)},N.doTicksRelayout=function(k){return f.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(s.subplotsRegistry.splom.updateGrid(k),t(k),N.redrawReglTraces(k)),N.drawMainTitle(k),m.previousPromises(k)},N.doModeBar=function(k){var P=k._fullLayout;n.manage(k);for(var O=0;O<P._basePlotModules.length;O++){var F=P._basePlotModules[O].updateFx;F&&F(k)}return m.previousPromises(k)},N.doCamera=function(k){for(var P=k._fullLayout,O=P._subplots.gl3d,F=0;F<O.length;F++){var I=P[O[F]],D=I._scene;D.setViewport(I)}},N.drawData=function(k){var P=k._fullLayout;t(k);for(var O=P._basePlotModules,F=0;F<O.length;F++)O[F].plot(k);return N.redrawReglTraces(k),m.style(k),s.getComponentMethod("shapes","draw")(k),s.getComponentMethod("annotations","draw")(k),s.getComponentMethod("images","draw")(k),P._replotting=!1,m.previousPromises(k)},N.redrawReglTraces=function(k){var P=k._fullLayout;if(P._has("regl")){var O=k._fullData,F=[],I=[],D,U;for(P._hasOnlyLargeSploms&&P._splomGrid.draw(),D=0;D<O.length;D++){var B=O[D];B.visible===!0&&B._length!==0&&(B.type==="splom"?P._splomScenes[B.uid].draw():B.type==="scattergl"?x.pushUnique(F,B.xaxis+B.yaxis):B.type==="scatterpolargl"&&x.pushUnique(I,B.subplot))}for(D=0;D<F.length;D++)U=P._plots[F[D]],U._scene&&U._scene.draw();for(D=0;D<I.length;D++)U=P[I[D]]._subplot,U._scene&&U._scene.draw()}},N.doAutoRangeAndConstraints=function(k){for(var P=f.list(k,"",!0),O,F={},I=0;I<P.length;I++)if(O=P[I],!F[O._id]){F[O._id]=1,h(k,O),d(k,O);var D=O._matchGroup;if(D)for(var U in D){var B=f.getFromId(k,U);d(k,B,O.range),F[U]=1}}c(k)},N.finalDraw=function(k){s.getComponentMethod("rangeslider","draw")(k),s.getComponentMethod("rangeselector","draw")(k)},N.drawMarginPushers=function(k){s.getComponentMethod("legend","draw")(k),s.getComponentMethod("rangeselector","draw")(k),s.getComponentMethod("sliders","draw")(k),s.getComponentMethod("updatemenus","draw")(k),s.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(e,z,N){var u=e("../lib"),s=u.isPlainObject,m=e("./plot_schema"),x=e("../plots/plots"),t=e("../plots/attributes"),i=e("./plot_template"),a=e("./plot_config").dfltConfig;N.makeTemplate=function(p){p=u.isPlainObject(p)?p:u.getGraphDiv(p),p=u.extendDeep({_context:a},{data:p.data,layout:p.layout}),x.supplyDefaults(p);var y=p.data||[],g=p.layout||{};g._basePlotModules=p._fullLayout._basePlotModules,g._modules=p._fullLayout._modules;var A={data:{},layout:{}};y.forEach(function(P){var O={};f(P,O,o.bind(null,P));var F=u.coerce(P,{},t,"type"),I=A.data[F];I||(I=A.data[F]=[]),I.push(O)}),f(g,A.layout,l.bind(null,g)),delete A.layout.template;var b=g.template;if(s(b)){var M=b.layout,_,T,w,v,L,S;s(M)&&r(M,A.layout);var k=b.data;if(s(k)){for(T in A.data)if(w=k[T],Array.isArray(w)){for(L=A.data[T],S=L.length,v=w.length,_=0;_<S;_++)r(w[_%v],L[_]);for(_=S;_<v;_++)L.push(u.extendDeep({},w[_]))}for(T in k)T in A.data||(A.data[T]=u.extendDeep([],k[T]))}}return A};function r(p,y){p=u.extendDeep({},p);var g=Object.keys(p).sort(),A,b;function M(L,S,k){if(s(S)&&s(L))r(L,S);else if(Array.isArray(S)&&Array.isArray(L)){var P=i.arrayTemplater({_template:p},k);for(b=0;b<S.length;b++){var O=S[b],F=P.newItem(O)._template;F&&r(F,O)}var I=P.defaultItems();for(b=0;b<I.length;b++)S.push(I[b]._template);for(b=0;b<S.length;b++)delete S[b].templateitemname}}for(A=0;A<g.length;A++){var _=g[A],T=p[_];if(_ in y?M(T,y[_],_):y[_]=T,n(_)===_)for(var w in y){var v=n(w);w!==v&&v===_&&!(w in p)&&M(T,y[w],_)}}}function n(p){return p.replace(/[0-9]+$/,"")}function f(p,y,g,A,b){var M=b&&g(b);for(var _ in p){var T=p[_],w=c(p,_,A),v=c(p,_,b),L=g(v);if(!L){var S=n(_);S!==_&&(v=c(p,S,b),L=g(v))}if(!(M&&M===L)&&!(!L||L._noTemplating||L.valType==="data_array"||L.arrayOk&&Array.isArray(T)))if(!L.valType&&s(T))f(T,y,g,w,v);else if(L._isLinkedToArray&&Array.isArray(T))for(var k=!1,P=0,O={},F=0;F<T.length;F++){var I=T[F];if(s(I)){var D=I.name;if(D)O[D]||(f(I,y,g,c(T,P,w),c(T,P,v)),P++,O[D]=1);else if(!k){var U=i.arrayDefaultKey(_),B=c(p,U,A),j=c(T,P,w);f(I,y,g,j,c(T,P,v));var Z=u.nestedProperty(y,j),ee=u.nestedProperty(y,B);ee.set(Z.get()),Z.set(null),k=!0}}}else{var q=u.nestedProperty(y,w);q.set(T)}}}function l(p,y){return m.getLayoutValObject(p,u.nestedProperty({},y).parts)}function o(p,y){return m.getTraceValObject(p,u.nestedProperty({},y).parts)}function c(p,y,g){var A;return g?Array.isArray(p)?A=g+"["+y+"]":A=g+"."+y:A=y,A}N.validateTemplate=function(p,y){var g=u.extendDeep({},{_context:a,data:p.data,layout:p.layout}),A=g.layout||{};s(y)||(y=A.template||{});var b=y.layout,M=y.data,_=[];g.layout=A,g.layout.template=y,x.supplyDefaults(g);var T=g._fullLayout,w=g._fullData,v={};function L(B,j){for(var Z in B)if(Z.charAt(0)!=="_"&&s(B[Z])){var ee=n(Z),q=[],W;for(W=0;W<j.length;W++)q.push(c(B,Z,j[W])),ee!==Z&&q.push(c(B,ee,j[W]));for(W=0;W<q.length;W++)v[q[W]]=1;L(B[Z],q)}}function S(B,j){for(var Z in B)if(Z.indexOf("defaults")===-1&&s(B[Z])){var ee=c(B,Z,j);v[ee]?S(B[Z],ee):_.push({code:"unused",path:ee})}}if(s(b)?(L(T,["layout"]),S(b,"layout")):_.push({code:"layout"}),!s(M))_.push({code:"data"});else{for(var k={},P,O=0;O<w.length;O++){var F=w[O];P=F.type,k[P]=(k[P]||0)+1,F._fullInput._template||_.push({code:"missing",index:F._fullInput.index,traceType:P})}for(P in M){var I=M[P].length,D=k[P]||0;I>D?_.push({code:"unused",traceType:P,templateCount:I,dataCount:D}):D>I&&_.push({code:"reused",traceType:P,templateCount:I,dataCount:D})}}function U(B,j){for(var Z in B)if(Z.charAt(0)!=="_"){var ee=B[Z],q=c(B,Z,j);s(ee)?(Array.isArray(B)&&ee._template===!1&&ee.templateitemname&&_.push({code:"missing",path:q,templateitemname:ee.templateitemname}),U(ee,q)):Array.isArray(ee)&&h(ee)&&U(ee,q)}}if(U({data:w,layout:T},""),_.length)return _.map(d)};function h(p){for(var y=0;y<p.length;y++)if(s(p[y]))return!0}function d(p){var y;switch(p.code){case"data":y="The template has no key data.";break;case"layout":y="The template has no key layout.";break;case"missing":p.path?y="There are no templates for item "+p.path+" with name "+p.templateitemname:y="There are no templates for trace "+p.index+", of type "+p.traceType+".";break;case"unused":p.path?y="The template item at "+p.path+" was not used in constructing the plot.":p.dataCount?y="Some of the templates of type "+p.traceType+" were not used. The template has "+p.templateCount+" traces, the data only has "+p.dataCount+" of this type.":y="The template has "+p.templateCount+" traces of type "+p.traceType+" but there are none in the data.";break;case"reused":y="Some of the templates of type "+p.traceType+" were used more than once. The template has "+p.templateCount+" traces, the data has "+p.dataCount+" of this type.";break}return p.msg=y,p}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(e,z,N){var u=e("fast-isnumeric"),s=e("./plot_api"),m=e("../plots/plots"),x=e("../lib"),t=e("../snapshot/helpers"),i=e("../snapshot/tosvg"),a=e("../snapshot/svgtoimg"),r=e("../version").version,n={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};function f(l,o){o=o||{};var c,h,d,p;x.isPlainObject(l)?(c=l.data||[],h=l.layout||{},d=l.config||{},p={}):(l=x.getGraphDiv(l),c=x.extendDeep([],l.data),h=x.extendDeep({},l.layout),d=l._context,p=l._fullLayout||{});function y(D){return!(D in o)||x.validate(o[D],n[D])}if(!y("width")&&o.width!==null||!y("height")&&o.height!==null)throw new Error("Height and width should be pixel values.");if(!y("format"))throw new Error("Export format is not "+x.join2(n.format.values,", "," or ")+".");var g={};function A(D,U){return x.coerce(o,g,n,D,U)}var b=A("format"),M=A("width"),_=A("height"),T=A("scale"),w=A("setBackground"),v=A("imageDataOnly"),L=document.createElement("div");L.style.position="absolute",L.style.left="-5000px",document.body.appendChild(L);var S=x.extendFlat({},h);M?S.width=M:o.width===null&&u(p.width)&&(S.width=p.width),_?S.height=_:o.height===null&&u(p.height)&&(S.height=p.height);var k=x.extendFlat({},d,{_exportedPlot:!0,staticPlot:!0,setBackground:w}),P=t.getRedrawFunc(L);function O(){return new Promise(function(D){setTimeout(D,t.getDelay(L._fullLayout))})}function F(){return new Promise(function(D,U){var B=i(L,b,T),j=L._fullLayout.width,Z=L._fullLayout.height;function ee(){s.purge(L),document.body.removeChild(L)}if(b==="full-json"){var q=m.graphJson(L,!1,"keepdata","object",!0,!0);return q.version=r,q=JSON.stringify(q),ee(),D(v?q:t.encodeJSON(q))}if(ee(),b==="svg")return D(v?B:t.encodeSVG(B));var W=document.createElement("canvas");W.id=x.randstr(),a({format:b,width:j,height:Z,scale:T,canvas:W,svg:B,promise:!0}).then(D).catch(U)})}function I(D){return v?D.replace(t.IMAGE_URL_PREFIX,""):D}return new Promise(function(D,U){s.newPlot(L,c,S,k).then(P).then(O).then(F).then(function(B){D(I(B))}).catch(function(B){U(B)})})}z.exports=f},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(e,z,N){var u=e("../lib"),s=e("../plots/plots"),m=e("./plot_schema"),x=e("./plot_config").dfltConfig,t=u.isPlainObject,i=Array.isArray,a=u.isArrayOrTypedArray;z.exports=function(A,b){A===void 0&&(A=[]),b===void 0&&(b={});var M=m.get(),_=[],T={_context:u.extendFlat({},x)},w,v;i(A)?(T.data=u.extendDeep([],A),w=A):(T.data=[],w=[],_.push(o("array","data"))),t(b)?(T.layout=u.extendDeep({},b),v=b):(T.layout={},v={},arguments.length>1&&_.push(o("object","layout"))),s.supplyDefaults(T);for(var L=T._fullData,S=w.length,k=0;k<S;k++){var P=w[k],O=["data",k];if(!t(P)){_.push(o("object",O));continue}var F=L[k],I=F.type,D=M.traces[I].attributes;D.type={valType:"enumerated",values:[I]},F.visible===!1&&P.visible!==!1&&_.push(o("invisible",O)),r(P,F,D,_,O);var U=P.transforms,B=F.transforms;if(U){i(U)||_.push(o("array",O,["transforms"])),O.push("transforms");for(var j=0;j<U.length;j++){var Z=["transforms",j],ee=U[j].type;if(!t(U[j])){_.push(o("object",O,Z));continue}var q=M.transforms[ee]?M.transforms[ee].attributes:{};q.type={valType:"enumerated",values:Object.keys(M.transforms)},r(U[j],B[j],q,_,O,Z)}}}var W=T._fullLayout,J=n(M,L);return r(v,W,J,_,"layout"),_.length===0?void 0:_};function r(g,A,b,M,_,T){T=T||[];for(var w=Object.keys(g),v=0;v<w.length;v++){var L=w[v];if(L!=="transforms"){var S=T.slice();S.push(L);var k=g[L],P=A[L],O=h(b,L),F=(O||{}).valType,I=F==="info_array",D=F==="colorscale",U=(O||{}).items;if(!c(b,L))M.push(o("schema",_,S));else if(t(k)&&t(P)&&F!=="any")r(k,P,O,M,_,S);else if(I&&i(k)){k.length>P.length&&M.push(o("unused",_,S.concat(P.length)));var B=P.length,j=Array.isArray(U);j&&(B=Math.min(B,U.length));var Z,ee,q,W,J;if(O.dimensions===2)for(ee=0;ee<B;ee++)if(i(k[ee])){k[ee].length>P[ee].length&&M.push(o("unused",_,S.concat(ee,P[ee].length)));var le=P[ee].length;for(Z=0;Z<(j?Math.min(le,U[ee].length):le);Z++)q=j?U[ee][Z]:U,W=k[ee][Z],J=P[ee][Z],u.validate(W,q)?J!==W&&J!==+W&&M.push(o("dynamic",_,S.concat(ee,Z),W,J)):M.push(o("value",_,S.concat(ee,Z),W))}else M.push(o("array",_,S.concat(ee),k[ee]));else for(ee=0;ee<B;ee++)q=j?U[ee]:U,W=k[ee],J=P[ee],u.validate(W,q)?J!==W&&J!==+W&&M.push(o("dynamic",_,S.concat(ee),W,J)):M.push(o("value",_,S.concat(ee),W))}else if(O.items&&!I&&i(k)){var fe=U[Object.keys(U)[0]],se=[],H,Y;for(H=0;H<P.length;H++){var ne=P[H]._index||H;if(Y=S.slice(),Y.push(ne),t(k[ne])&&t(P[H])){se.push(ne);var te=k[ne],K=P[H];t(te)&&te.visible!==!1&&K.visible===!1?M.push(o("invisible",_,Y)):r(te,K,fe,M,_,Y)}}for(H=0;H<k.length;H++)Y=S.slice(),Y.push(H),t(k[H])?se.indexOf(H)===-1&&M.push(o("unused",_,Y)):M.push(o("object",_,Y,k[H]))}else!t(k)&&t(P)?M.push(o("object",_,S,k)):!a(k)&&a(P)&&!I&&!D?M.push(o("array",_,S,k)):L in A?u.validate(k,O)?O.valType==="enumerated"&&(O.coerceNumber&&k!==+P||k!==P)&&M.push(o("dynamic",_,S,k,P)):M.push(o("value",_,S,k)):M.push(o("unused",_,S,k))}}return M}function n(g,A){for(var b=g.layout.layoutAttributes,M=0;M<A.length;M++){var _=A[M],T=g.traces[_.type],w=T.layoutAttributes;w&&(_.subplot?u.extendFlat(b[T.attributes.subplot.dflt],w):u.extendFlat(b,w))}return b}var f={object:function(g,A){var b;return g==="layout"&&A===""?b="The layout argument":g[0]==="data"&&A===""?b="Trace "+g[1]+" in the data argument":b=l(g)+"key "+A,b+" must be linked to an object container"},array:function(g,A){var b;return g==="data"?b="The data argument":b=l(g)+"key "+A,b+" must be linked to an array container"},schema:function(g,A){return l(g)+"key "+A+" is not part of the schema"},unused:function(g,A,b){var M=t(b)?"container":"key";return l(g)+M+" "+A+" did not get coerced"},dynamic:function(g,A,b,M){return[l(g)+"key",A,"(set to '"+b+"')","got reset to","'"+M+"'","during defaults."].join(" ")},invisible:function(g,A){return(A?l(g)+"item "+A:"Trace "+g[1])+" got defaulted to be not visible"},value:function(g,A,b){return[l(g)+"key "+A,"is set to an invalid value ("+b+")"].join(" ")}};function l(g){return i(g)?"In data trace "+g[1]+", ":"In "+g+", "}function o(g,A,b,M,_){b=b||"";var T,w;i(A)?(T=A[0],w=A[1]):(T=A,w=null);var v=y(b),L=f[g](A,v,M,_);return u.log(L),{code:g,container:T,trace:w,path:b,astr:v,msg:L}}function c(g,A){var b=p(A),M=b.keyMinusId,_=b.id;return M in g&&g[M]._isSubplotObj&&_?!0:A in g}function h(g,A){if(A in g)return g[A];var b=p(A);return g[b.keyMinusId]}var d=u.counterRegex("([a-z]+)");function p(g){var A=g.match(d);return{keyMinusId:A&&A[1],id:A&&A[2]}}function y(g){if(!i(g))return String(g);for(var A="",b=0;b<g.length;b++){var M=g[b];typeof M=="number"?A=A.substr(0,A.length-1)+"["+M+"]":A+=M,b<g.length-1&&(A+=".")}return A}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(e,z,N){z.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(e,z,N){var u=e("../lib"),s=e("../plot_api/plot_template");z.exports=function(x,t,i){var a=i.name,r=i.inclusionAttr||"visible",n=t[a],f=u.isArrayOrTypedArray(x[a])?x[a]:[],l=t[a]=[],o=s.arrayTemplater(t,a,r),c,h;for(c=0;c<f.length;c++){var d=f[c];u.isPlainObject(d)?h=o.newItem(d):(h=o.newItem({}),h[r]=!1),h._index=c,h[r]!==!1&&i.handleItemDefaults(d,h,t,i),l.push(h)}var p=o.defaultItems();for(c=0;c<p.length;c++)h=p[c],h._index=l.length,i.handleItemDefaults({},h,t,i,{}),l.push(h);if(u.isArrayOrTypedArray(n)){var y=Math.min(n.length,l.length);for(c=0;c<y;c++)u.relinkPrivateKeys(l[c],n[c])}return l}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(e,z,N){var u=e("./font_attributes"),s=e("../components/fx/attributes");z.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:u({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:s.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=s.dateTime2ms,x=s.incrementMonth,t=e("../../constants/numerical"),i=t.ONEAVGMONTH;z.exports=function(r,n,f,l){if(n.type!=="date")return{vals:l};var o=r[f+"periodalignment"];if(!o)return{vals:l};var c=r[f+"period"],h;if(u(c)){if(c=+c,c<=0)return{vals:l}}else if(typeof c=="string"&&c.charAt(0)==="M"){var d=+c.substring(1);if(d>0&&Math.round(d)===d)h=d;else return{vals:l}}for(var p=n.calendar,y=o==="start",g=o==="end",A=r[f+"period0"],b=m(A,p)||0,M=[],_=[],T=[],w=l.length,v=0;v<w;v++){var L=l[v],S,k,P;if(h){for(S=Math.round((L-b)/(h*i)),P=x(b,h*S,p);P>L;)P=x(P,-h,p);for(;P<=L;)P=x(P,h,p);k=x(P,-h,p)}else{for(S=Math.round((L-b)/c),P=b+S*c;P>L;)P-=c;for(;P<=L;)P+=c;k=P-c}M[v]=y?k:g?P:(k+P)/2,_[v]=k,T[v]=P}return{vals:M,starts:_,ends:T}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(e,z,N){z.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../constants/numerical").FP_SAFE,t=e("../../registry"),i=e("../../components/drawing"),a=e("./axis_ids"),r=a.getFromId,n=a.isLinked;z.exports={getAutoRange:f,makePadFn:o,doAutoRange:p,findExtremes:y,concatExtremes:d};function f(w,v){var L,S,k=[],P=w._fullLayout,O=o(P,v,0),F=o(P,v,1),I=d(w,v),D=I.min,U=I.max;if(D.length===0||U.length===0)return m.simpleMap(v.range,v.r2l);var B=D[0].val,j=U[0].val;for(L=1;L<D.length&&B===j;L++)B=Math.min(B,D[L].val);for(L=1;L<U.length&&B===j;L++)j=Math.max(j,U[L].val);var Z=!1;if(v.range){var ee=m.simpleMap(v.range,v.r2l);Z=ee[1]<ee[0]}v.autorange==="reversed"&&(Z=!0,v.autorange=!0);var q=v.rangemode,W=q==="tozero",J=q==="nonnegative",le=v._length,fe=le/10,se=0,H,Y,ne,te,K,$;for(L=0;L<D.length;L++)for(H=D[L],S=0;S<U.length;S++)Y=U[S],$=Y.val-H.val-l(v,H.val,Y.val),$>0&&(K=le-O(H)-F(Y),K>fe?$/K>se&&(ne=H,te=Y,se=$/K):$/le>se&&(ne={val:H.val,nopad:1},te={val:Y.val,nopad:1},se=$/le));function ae(ce,me){return Math.max(ce,F(me))}if(B===j){var ie=B-1,oe=B+1;if(W)if(B===0)k=[0,1];else{var ue=(B>0?U:D).reduce(ae,0),ye=B/(1-Math.min(.5,ue/le));k=B>0?[0,ye]:[ye,0]}else J?k=[Math.max(0,ie),Math.max(1,oe)]:k=[ie,oe]}else W?(ne.val>=0&&(ne={val:0,nopad:1}),te.val<=0&&(te={val:0,nopad:1})):J&&(ne.val-se*O(ne)<0&&(ne={val:0,nopad:1}),te.val<=0&&(te={val:1,nopad:1})),se=(te.val-ne.val-l(v,H.val,Y.val))/(le-O(ne)-F(te)),k=[ne.val-se*O(ne),te.val+se*F(te)];return Z&&k.reverse(),m.simpleMap(k,v.l2r||Number)}function l(w,v,L){var S=0;if(w.rangebreaks)for(var k=w.locateBreaks(v,L),P=0;P<k.length;P++){var O=k[P];S+=O.max-O.min}return S}function o(w,v,L){var S=.05*v._length,k=v._anchorAxis||{};if((v.ticklabelposition||"").indexOf("inside")!==-1||(k.ticklabelposition||"").indexOf("inside")!==-1){var P=v.autorange==="reversed";if(!P){var O=m.simpleMap(v.range,v.r2l);P=O[1]<O[0]}P&&(L=!L)}var F=0;return n(w,v._id)||(F=h(w,v,L)),S=Math.max(F,S),v.constrain==="domain"&&v._inputDomain&&(S*=(v._inputDomain[1]-v._inputDomain[0])/(v.domain[1]-v.domain[0])),function(D){return D.nopad?0:D.pad+(D.extrapad?S:F)}}var c=3;function h(w,v,L){var S=0,k=v._id.charAt(0)==="x";for(var P in w._plots){var O=w._plots[P];if(!(v._id!==O.xaxis._id&&v._id!==O.yaxis._id)){var F=(k?O.yaxis:O.xaxis)||{};if((F.ticklabelposition||"").indexOf("inside")!==-1&&(!L&&(F.side==="left"||F.side==="bottom")||L&&(F.side==="top"||F.side==="right"))){if(F._vals){var I=m.deg2rad(F._tickAngles[F._id+"tick"]||0),D=Math.abs(Math.cos(I)),U=Math.abs(Math.sin(I));if(!F._vals[0].bb){var B=F._id+"tick",j=F._selections[B];j.each(function(le){var fe=u.select(this),se=fe.select(".text-math-group");se.empty()&&(le.bb=i.bBox(fe.node()))})}for(var Z=0;Z<F._vals.length;Z++){var ee=F._vals[Z],q=ee.bb;if(q){var W=2*c+q.width,J=2*c+q.height;S=Math.max(S,k?Math.max(W*D,J*U):Math.max(J*D,W*U))}}}F.ticks==="inside"&&F.ticklabelposition==="inside"&&(S+=F.ticklen||0)}}}return S}function d(w,v,L){var S=v._id,k=w._fullData,P=w._fullLayout,O=[],F=[],I,D,U;function B(W,J){for(I=0;I<J.length;I++){var le=W[J[I]],fe=(le._extremes||{})[S];if(le.visible===!0&&fe){for(D=0;D<fe.min.length;D++)U=fe.min[D],g(O,U.val,U.pad,{extrapad:U.extrapad});for(D=0;D<fe.max.length;D++)U=fe.max[D],A(F,U.val,U.pad,{extrapad:U.extrapad})}}}if(B(k,v._traceIndices),B(P.annotations||[],v._annIndices||[]),B(P.shapes||[],v._shapeIndices||[]),v._matchGroup&&!L){for(var j in v._matchGroup)if(j!==v._id){var Z=r(w,j),ee=d(w,Z,!0),q=v._length/Z._length;for(D=0;D<ee.min.length;D++)U=ee.min[D],g(O,U.val,U.pad*q,{extrapad:U.extrapad});for(D=0;D<ee.max.length;D++)U=ee.max[D],A(F,U.val,U.pad*q,{extrapad:U.extrapad})}}return{min:O,max:F}}function p(w,v,L){if(v.setScale(),v.autorange){v.range=L?L.slice():f(w,v),v._r=v.range.slice(),v._rl=m.simpleMap(v._r,v.r2l);var S=v._input,k={};k[v._attr+".range"]=v.range,k[v._attr+".autorange"]=v.autorange,t.call("_storeDirectGUIEdit",w.layout,w._fullLayout._preGUI,k),S.range=v.range.slice(),S.autorange=v.autorange}var P=v._anchorAxis;if(P&&P.rangeslider){var O=P.rangeslider[v._name];O&&O.rangemode==="auto"&&(O.range=f(w,v)),P._input.rangeslider[v._name]=m.extendFlat({},O)}}function y(w,v,L){L||(L={}),w._m||w.setScale();var S=[],k=[],P=v.length,O=L.padded||!1,F=L.tozero&&(w.type==="linear"||w.type==="-"),I=w.type==="log",D=!1,U=L.vpadLinearized||!1,B,j,Z,ee,q,W,J,le,fe;function se(ie){if(Array.isArray(ie))return D=!0,function(ue){return Math.max(Number(ie[ue]||0),0)};var oe=Math.max(Number(ie||0),0);return function(){return oe}}var H=se((w._m>0?L.ppadplus:L.ppadminus)||L.ppad||0),Y=se((w._m>0?L.ppadminus:L.ppadplus)||L.ppad||0),ne=se(L.vpadplus||L.vpad),te=se(L.vpadminus||L.vpad);if(!D){if(le=1/0,fe=-1/0,I)for(B=0;B<P;B++)j=v[B],j<le&&j>0&&(le=j),j>fe&&j<x&&(fe=j);else for(B=0;B<P;B++)j=v[B],j<le&&j>-x&&(le=j),j>fe&&j<x&&(fe=j);v=[le,fe],P=2}var K={tozero:F,extrapad:O};function $(ie){Z=v[ie],!!s(Z)&&(W=H(ie),J=Y(ie),U?(ee=w.c2l(Z)-te(ie),q=w.c2l(Z)+ne(ie)):(le=Z-te(ie),fe=Z+ne(ie),I&&le<fe/10&&(le=fe/10),ee=w.c2l(le),q=w.c2l(fe)),F&&(ee=Math.min(0,ee),q=Math.max(0,q)),M(ee)&&g(S,ee,J,K),M(q)&&A(k,q,W,K))}var ae=Math.min(6,P);for(B=0;B<ae;B++)$(B);for(B=P-1;B>=ae;B--)$(B);return{min:S,max:k,opts:L}}function g(w,v,L,S){b(w,v,L,S,_)}function A(w,v,L,S){b(w,v,L,S,T)}function b(w,v,L,S,k){for(var P=S.tozero,O=S.extrapad,F=!0,I=0;I<w.length&&F;I++){var D=w[I];if(k(D.val,v)&&D.pad>=L&&(D.extrapad||!O)){F=!1;break}else k(v,D.val)&&D.pad<=L&&(O||!D.extrapad)&&(w.splice(I,1),I--)}if(F){var U=P&&v===0;w.push({val:v,pad:U?0:L,extrapad:U?!1:O})}}function M(w){return s(w)&&Math.abs(w)<x}function _(w,v){return w<=v}function T(w,v){return w>=v}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../plots/plots"),x=e("../../registry"),t=e("../../lib"),i=t.strTranslate,a=e("../../lib/svg_text_utils"),r=e("../../components/titles"),n=e("../../components/color"),f=e("../../components/drawing"),l=e("./layout_attributes"),o=e("./clean_ticks"),c=e("../../constants/numerical"),h=c.ONEMAXYEAR,d=c.ONEAVGYEAR,p=c.ONEMINYEAR,y=c.ONEMAXQUARTER,g=c.ONEAVGQUARTER,A=c.ONEMINQUARTER,b=c.ONEMAXMONTH,M=c.ONEAVGMONTH,_=c.ONEMINMONTH,T=c.ONEWEEK,w=c.ONEDAY,v=w/2,L=c.ONEHOUR,S=c.ONEMIN,k=c.ONESEC,P=c.MINUS_SIGN,O=c.BADNUM,F={K:"zeroline"},I={K:"gridline",L:"path"},D={K:"tick",L:"path"},U={K:"tick",L:"text"},B=e("../../constants/alignment"),j=B.MID_SHIFT,Z=B.CAP_SHIFT,ee=B.LINE_SPACING,q=B.OPPOSITE_SIDE,W=3,J=z.exports={};J.setConvert=e("./set_convert");var le=e("./axis_autotype"),fe=e("./axis_ids"),se=fe.idSort,H=fe.isLinked;J.id2name=fe.id2name,J.name2id=fe.name2id,J.cleanId=fe.cleanId,J.list=fe.list,J.listIds=fe.listIds,J.getFromId=fe.getFromId,J.getFromTrace=fe.getFromTrace;var Y=e("./autorange");J.getAutoRange=Y.getAutoRange,J.findExtremes=Y.findExtremes;var ne=1e-4;function te(we){var Se=(we[1]-we[0])*ne;return[we[0]-Se,we[1]+Se]}J.coerceRef=function(we,Se,De,je,$e,ot){var st=je.charAt(je.length-1),pt=De._fullLayout._subplots[st+"axis"],wt=je+"ref",Wt={};return $e||($e=pt[0]||(typeof ot=="string"?ot:ot[0])),ot||(ot=$e),pt=pt.concat(pt.map(function(yr){return yr+" domain"})),Wt[wt]={valType:"enumerated",values:pt.concat(ot?typeof ot=="string"?[ot]:ot:[]),dflt:$e},t.coerce(we,Se,Wt,wt)},J.getRefType=function(we){return we===void 0?we:we==="paper"?"paper":we==="pixel"?"pixel":/( domain)$/.test(we)?"domain":"range"},J.coercePosition=function(we,Se,De,je,$e,ot){var st,pt,wt=J.getRefType(je);if(wt!=="range")st=t.ensureNumber,pt=De($e,ot);else{var Wt=J.getFromId(Se,je);ot=Wt.fraction2r(ot),pt=De($e,ot),st=Wt.cleanPos}we[$e]=st(pt)},J.cleanPosition=function(we,Se,De){var je=De==="paper"||De==="pixel"?t.ensureNumber:J.getFromId(Se,De).cleanPos;return je(we)},J.redrawComponents=function(we,Se){Se=Se||J.listIds(we);var De=we._fullLayout;function je($e,ot,st,pt){for(var wt=x.getComponentMethod($e,ot),Wt={},yr=0;yr<Se.length;yr++)for(var xr=De[J.id2name(Se[yr])],Tr=xr[st],mr=0;mr<Tr.length;mr++){var Rr=Tr[mr];if(!Wt[Rr]&&(wt(we,Rr),Wt[Rr]=1,pt))return}}je("annotations","drawOne","_annIndices"),je("shapes","drawOne","_shapeIndices"),je("images","draw","_imgIndices",!0)};var K=J.getDataConversions=function(we,Se,De,je){var $e,ot=De==="x"||De==="y"||De==="z"?De:je;if(Array.isArray(ot)){if($e={type:le(je,void 0,{autotypenumbers:we._fullLayout.autotypenumbers}),_categories:[]},J.setConvert($e),$e.type==="category")for(var st=0;st<je.length;st++)$e.d2c(je[st])}else $e=J.getFromTrace(we,Se,ot);return $e?{d2c:$e.d2c,c2d:$e.c2d}:ot==="ids"?{d2c:ae,c2d:ae}:{d2c:$,c2d:$}};function $(we){return+we}function ae(we){return String(we)}J.getDataToCoordFunc=function(we,Se,De,je){return K(we,Se,De,je).d2c},J.counterLetter=function(we){var Se=we.charAt(0);if(Se==="x")return"y";if(Se==="y")return"x"},J.minDtick=function(we,Se,De,je){["log","category","multicategory"].indexOf(we.type)!==-1||!je?we._minDtick=0:we._minDtick===void 0?(we._minDtick=Se,we._forceTick0=De):we._minDtick&&((we._minDtick/Se+1e-6)%1<2e-6&&((De-we._forceTick0)/Se%1+1.000001)%1<2e-6?(we._minDtick=Se,we._forceTick0=De):((Se/we._minDtick+1e-6)%1>2e-6||((De-we._forceTick0)/we._minDtick%1+1.000001)%1>2e-6)&&(we._minDtick=0))},J.saveRangeInitial=function(we,Se){for(var De=J.list(we,"",!0),je=!1,$e=0;$e<De.length;$e++){var ot=De[$e],st=ot._rangeInitial===void 0,pt=st||!(ot.range[0]===ot._rangeInitial[0]&&ot.range[1]===ot._rangeInitial[1]);(st&&ot.autorange===!1||Se&&pt)&&(ot._rangeInitial=ot.range.slice(),je=!0)}return je},J.saveShowSpikeInitial=function(we,Se){for(var De=J.list(we,"",!0),je=!1,$e="on",ot=0;ot<De.length;ot++){var st=De[ot],pt=st._showSpikeInitial===void 0,wt=pt||st.showspikes!==st._showspikes;(pt||Se&&wt)&&(st._showSpikeInitial=st.showspikes,je=!0),$e==="on"&&!st.showspikes&&($e="off")}return we._fullLayout._cartesianSpikesEnabled=$e,je},J.autoBin=function(we,Se,De,je,$e,ot){var st=t.aggNums(Math.min,null,we),pt=t.aggNums(Math.max,null,we);if(Se.type==="category"||Se.type==="multicategory")return{start:st-.5,end:pt+.5,size:Math.max(1,Math.round(ot)||1),_dataSpan:pt-st};$e||($e=Se.calendar);var wt;if(Se.type==="log"?wt={type:"linear",range:[st,pt]}:wt={type:Se.type,range:t.simpleMap([st,pt],Se.c2r,0,$e),calendar:$e},J.setConvert(wt),ot=ot&&o.dtick(ot,wt.type),ot)wt.dtick=ot,wt.tick0=o.tick0(void 0,wt.type,$e);else{var Wt;if(De)Wt=(pt-st)/De;else{var yr=t.distinctVals(we),xr=Math.pow(10,Math.floor(Math.log(yr.minDiff)/Math.LN10)),Tr=xr*t.roundUp(yr.minDiff/xr,[.9,1.9,4.9,9.9],!0);Wt=Math.max(Tr,2*t.stdev(we)/Math.pow(we.length,je?.25:.4)),s(Wt)||(Wt=1)}J.autoTicks(wt,Wt)}var mr=wt.dtick,Rr=J.tickIncrement(J.tickFirst(wt),mr,"reverse",$e),tn,wr;if(typeof mr=="number")Rr=ie(Rr,we,wt,st,pt),wr=1+Math.floor((pt-Rr)/mr),tn=Rr+wr*mr;else for(wt.dtick.charAt(0)==="M"&&(Rr=oe(Rr,we,mr,st,$e)),tn=Rr,wr=0;tn<=pt;)tn=J.tickIncrement(tn,mr,!1,$e),wr++;return{start:Se.c2r(Rr,0,$e),end:Se.c2r(tn,0,$e),size:mr,_dataSpan:pt-st}};function ie(we,Se,De,je,$e){var ot=0,st=0,pt=0,wt=0;function Wt(mr){return(1+(mr-we)*100/De.dtick)%100<2}for(var yr=0;yr<Se.length;yr++)Se[yr]%1==0?pt++:s(Se[yr])||wt++,Wt(Se[yr])&&ot++,Wt(Se[yr]+De.dtick/2)&&st++;var xr=Se.length-wt;if(pt===xr&&De.type!=="date")De.dtick<1?we=je-.5*De.dtick:(we-=.5,we+De.dtick<je&&(we+=De.dtick));else if(st<xr*.1&&(ot>xr*.3||Wt(je)||Wt($e))){var Tr=De.dtick/2;we+=we+Tr<je?Tr:-Tr}return we}function oe(we,Se,De,je,$e){var ot=t.findExactDates(Se,$e),st=.8;if(ot.exactDays>st){var pt=Number(De.substr(1));ot.exactYears>st&&pt%12==0?we=J.tickIncrement(we,"M6","reverse")+w*1.5:ot.exactMonths>st?we=J.tickIncrement(we,"M1","reverse")+w*15.5:we-=v;var wt=J.tickIncrement(we,De);if(wt<=je)return wt}return we}J.prepTicks=function(we,Se){var De=t.simpleMap(we.range,we.r2l,void 0,void 0,Se);if(we._dtickInit=we.dtick,we._tick0Init=we.tick0,we.tickmode==="auto"||!we.dtick){var je=we.nticks,$e;je||(we.type==="category"||we.type==="multicategory"?($e=we.tickfont?t.bigFont(we.tickfont.size||12):15,je=we._length/$e):($e=we._id.charAt(0)==="y"?40:80,je=t.constrain(we._length/$e,4,9)+1),we._name==="radialaxis"&&(je*=2)),we.tickmode==="array"&&(je*=100),we._roughDTick=Math.abs(De[1]-De[0])/je,J.autoTicks(we,we._roughDTick),we._minDtick>0&&we.dtick<we._minDtick*2&&(we.dtick=we._minDtick,we.tick0=we.l2r(we._forceTick0))}we.ticklabelmode==="period"&&ye(we),we.tick0||(we.tick0=we.type==="date"?"2000-01-01":0),we.type==="date"&&we.dtick<.1&&(we.dtick=.1),We(we)};function ue(we){return+we.substring(1)}function ye(we){var Se;function De(){return!(s(we.dtick)||we.dtick.charAt(0)!=="M")}var je=De(),$e=J.getTickFormat(we);if($e){var ot=we._dtickInit!==we.dtick;/%[fLQsSMX]/.test($e)||(/%[HI]/.test($e)?(Se=L,ot&&!je&&we.dtick<L&&(we.dtick=L)):/%p/.test($e)?(Se=v,ot&&!je&&we.dtick<v&&(we.dtick=v)):/%[Aadejuwx]/.test($e)?(Se=w,ot&&!je&&we.dtick<w&&(we.dtick=w)):/%[UVW]/.test($e)?(Se=T,ot&&!je&&we.dtick<T&&(we.dtick=T)):/%[Bbm]/.test($e)?(Se=M,ot&&(je?ue(we.dtick)<1:we.dtick<_)&&(we.dtick="M1")):/%[q]/.test($e)?(Se=g,ot&&(je?ue(we.dtick)<3:we.dtick<A)&&(we.dtick="M3")):/%[Yy]/.test($e)&&(Se=d,ot&&(je?ue(we.dtick)<12:we.dtick<p)&&(we.dtick="M12")))}je=De(),je&&we.tick0===we._dowTick0&&(we.tick0=we._rawTick0),we._definedDelta=Se}function ce(we,Se,De){for(var je=0;je<we.length;je++){var $e=we[je].value,ot=je,st=je+1;je<we.length-1?(ot=je,st=je+1):je>0?(ot=je-1,st=je):(ot=je,st=je);var pt=we[ot].value,wt=we[st].value,Wt=Math.abs(wt-pt),yr=De||Wt,xr=0;yr>=p?Wt>=p&&Wt<=h?xr=Wt:xr=d:De===g&&yr>=A?Wt>=A&&Wt<=y?xr=Wt:xr=g:yr>=_?Wt>=_&&Wt<=b?xr=Wt:xr=M:De===T&&yr>=T?xr=T:yr>=w?xr=w:De===v&&yr>=v?xr=v:De===L&&yr>=L&&(xr=L);var Tr;xr>=Wt&&(xr=Wt,Tr=!0);var mr=$e+xr;if(Se.rangebreaks&&xr>0){for(var Rr=84,tn=0,wr=0;wr<Rr;wr++){var gr=(wr+.5)/Rr;Se.maskBreaks($e*(1-gr)+gr*mr)!==O&&tn++}xr*=tn/Rr,xr||(we[je].drop=!0),Tr&&Wt>T&&(xr=Wt)}(xr>0||je===0)&&(we[je].periodX=$e+xr/2)}}J.calcTicks=function(Se,De){J.prepTicks(Se,De);var je=t.simpleMap(Se.range,Se.r2l,void 0,void 0,De);if(Se.tickmode==="array")return me(Se);var $e=te(je),ot=$e[0],st=$e[1],pt=je[1]<je[0],wt=Math.min(je[0],je[1]),Wt=Math.max(je[0],je[1]),yr=Se.type==="log"&&!(s(Se.dtick)||Se.dtick.charAt(0)==="L"),xr=Se.ticklabelmode==="period";if(Se._tmin=J.tickFirst(Se,De),Se._tmin<ot!==pt)return[];(Se.type==="category"||Se.type==="multicategory")&&(st=pt?Math.max(-.5,st):Math.min(Se._categories.length-.5,st));var Tr=Se._tmin;Se.rangebreaks&&Se._tick0Init!==Se.tick0&&(Tr=tr(Tr,Se),pt||(Tr=J.tickIncrement(Tr,Se.dtick,!pt,Se.calendar))),xr&&(Tr=J.tickIncrement(Tr,Se.dtick,!pt,Se.calendar));for(var mr=Math.max(1e3,Se._length||0),Rr=[],tn=null;pt?Tr>=st:Tr<=st;Tr=J.tickIncrement(Tr,Se.dtick,pt,Se.calendar)){if(Se.rangebreaks&&!pt){if(Tr<ot)continue;if(Se.maskBreaks(Tr)===O&&tr(Tr,Se)>=Wt)break}if(Rr.length>mr||Tr===tn)break;tn=Tr;var wr=!1;yr&&Tr!==(Tr|0)&&(wr=!0),Rr.push({minor:wr,value:Tr})}xr&&ce(Rr,Se,Se._definedDelta);var gr;if(Se.rangebreaks){var mn=Se._id.charAt(0)==="y",Gr=1;Se.tickmode==="auto"&&(Gr=Se.tickfont?Se.tickfont.size:12);var Ar=NaN;for(gr=Rr.length-1;gr>-1;gr--){if(Rr[gr].drop){Rr.splice(gr,1);continue}Rr[gr].value=tr(Rr[gr].value,Se);var nn=Se.c2p(Rr[gr].value);(mn?Ar>nn-Gr:Ar<nn+Gr)?Rr.splice(pt?gr+1:gr,1):Ar=nn}}kr(Se)&&Math.abs(je[1]-je[0])===360&&Rr.pop(),Se._tmax=(Rr[Rr.length-1]||{}).value,Se._prevDateHead="",Se._inCalcTicks=!0;var fn=[],jr,at;for(gr=0;gr<Rr.length;gr++){var Ft=Rr[gr].minor,er=Rr[gr].value;jr=J.tickText(Se,er,!1,Ft),at=Rr[gr].periodX,at!==void 0&&(jr.periodX=at,(at>Wt||at<wt)&&(at>Wt&&(jr.periodX=Wt),at<wt&&(jr.periodX=wt),jr.text=" ",Se._prevDateHead="")),fn.push(jr)}return Se._inCalcTicks=!1,fn};function me(we){var Se=we.tickvals,De=we.ticktext,je=new Array(Se.length),$e=t.simpleMap(we.range,we.r2l),ot=te($e),st=Math.min(ot[0],ot[1]),pt=Math.max(ot[0],ot[1]),wt=0;Array.isArray(De)||(De=[]);var Wt=we.type==="category"?we.d2l_noadd:we.d2l;we.type==="log"&&String(we.dtick).charAt(0)!=="L"&&(we.dtick="L"+Math.pow(10,Math.floor(Math.min(we.range[0],we.range[1]))-1));for(var yr=0;yr<Se.length;yr++){var xr=Wt(Se[yr]);xr>st&&xr<pt&&(De[yr]===void 0?je[wt]=J.tickText(we,xr):je[wt]=qe(we,xr,String(De[yr])),wt++)}return wt<Se.length&&je.splice(wt,Se.length-wt),we.rangebreaks&&(je=je.filter(function(Tr){return we.maskBreaks(Tr.x)!==O})),je}var xe=[2,5,10],ke=[1,2,3,6,12],Ae=[1,2,5,10,15,30],Oe=[1,2,3,7,14],He=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Ge=[-.301,0,.301,.699,1],_e=[15,30,45,90,180];function Re(we,Se,De){return Se*t.roundUp(we/Se,De)}J.autoTicks=function(we,Se){var De;function je(yr){return Math.pow(yr,Math.floor(Math.log(Se)/Math.LN10))}if(we.type==="date"){we.tick0=t.dateTick0(we.calendar,0);var $e=2*Se;if($e>d)Se/=d,De=je(10),we.dtick="M"+12*Re(Se,De,xe);else if($e>M)Se/=M,we.dtick="M"+Re(Se,1,ke);else if($e>w){we.dtick=Re(Se,w,we._hasDayOfWeekBreaks?[1,2,7,14]:Oe);var ot=J.getTickFormat(we),st=we.ticklabelmode==="period";st&&(we._rawTick0=we.tick0),/%[uVW]/.test(ot)?we.tick0=t.dateTick0(we.calendar,2):we.tick0=t.dateTick0(we.calendar,1),st&&(we._dowTick0=we.tick0)}else $e>L?we.dtick=Re(Se,L,ke):$e>S?we.dtick=Re(Se,S,Ae):$e>k?we.dtick=Re(Se,k,Ae):(De=je(10),we.dtick=Re(Se,De,xe))}else if(we.type==="log"){we.tick0=0;var pt=t.simpleMap(we.range,we.r2l);if(Se>.7)we.dtick=Math.ceil(Se);else if(Math.abs(pt[1]-pt[0])<1){var wt=1.5*Math.abs((pt[1]-pt[0])/Se);Se=Math.abs(Math.pow(10,pt[1])-Math.pow(10,pt[0]))/wt,De=je(10),we.dtick="L"+Re(Se,De,xe)}else we.dtick=Se>.3?"D2":"D1"}else we.type==="category"||we.type==="multicategory"?(we.tick0=0,we.dtick=Math.ceil(Math.max(Se,1))):kr(we)?(we.tick0=0,De=1,we.dtick=Re(Se,De,_e)):(we.tick0=0,De=je(10),we.dtick=Re(Se,De,xe));if(we.dtick===0&&(we.dtick=1),!s(we.dtick)&&typeof we.dtick!="string"){var Wt=we.dtick;throw we.dtick=1,"ax.dtick error: "+String(Wt)}};function We(we){var Se=we.dtick;if(we._tickexponent=0,!s(Se)&&typeof Se!="string"&&(Se=1),(we.type==="category"||we.type==="multicategory")&&(we._tickround=null),we.type==="date"){var De=we.r2l(we.tick0),je=we.l2r(De).replace(/(^-|i)/g,""),$e=je.length;if(String(Se).charAt(0)==="M")$e>10||je.substr(5)!=="01-01"?we._tickround="d":we._tickround=+Se.substr(1)%12==0?"y":"m";else if(Se>=w&&$e<=10||Se>=w*15)we._tickround="d";else if(Se>=S&&$e<=16||Se>=L)we._tickround="M";else if(Se>=k&&$e<=19||Se>=S)we._tickround="S";else{var ot=we.l2r(De+Se).replace(/^-/,"").length;we._tickround=Math.max($e,ot)-20,we._tickround<0&&(we._tickround=4)}}else if(s(Se)||Se.charAt(0)==="L"){var st=we.range.map(we.r2d||Number);s(Se)||(Se=Number(Se.substr(1))),we._tickround=2-Math.floor(Math.log(Se)/Math.LN10+.01);var pt=Math.max(Math.abs(st[0]),Math.abs(st[1])),wt=Math.floor(Math.log(pt)/Math.LN10+.01),Wt=we.minexponent===void 0?3:we.minexponent;Math.abs(wt)>Wt&&(Bt(we.exponentformat)&&!Lt(wt)?we._tickexponent=3*Math.round((wt-1)/3):we._tickexponent=wt)}else we._tickround=null}J.tickIncrement=function(we,Se,De,je){var $e=De?-1:1;if(s(Se))return t.increment(we,$e*Se);var ot=Se.charAt(0),st=$e*Number(Se.substr(1));if(ot==="M")return t.incrementMonth(we,st,je);if(ot==="L")return Math.log(Math.pow(10,we)+st)/Math.LN10;if(ot==="D"){var pt=Se==="D2"?Ge:He,wt=we+$e*.01,Wt=t.roundUp(t.mod(wt,1),pt,De);return Math.floor(wt)+Math.log(u.round(Math.pow(10,Wt),1))/Math.LN10}throw"unrecognized dtick "+String(Se)},J.tickFirst=function(we,Se){var De=we.r2l||Number,je=t.simpleMap(we.range,De,void 0,void 0,Se),$e=je[1]<je[0],ot=$e?Math.floor:Math.ceil,st=te(je)[0],pt=we.dtick,wt=De(we.tick0);if(s(pt)){var Wt=ot((st-wt)/pt)*pt+wt;return(we.type==="category"||we.type==="multicategory")&&(Wt=t.constrain(Wt,0,we._categories.length-1)),Wt}var yr=pt.charAt(0),xr=Number(pt.substr(1));if(yr==="M"){for(var Tr=0,mr=wt,Rr,tn,wr;Tr<10;){if(Rr=J.tickIncrement(mr,pt,$e,we.calendar),(Rr-st)*(mr-st)<=0)return $e?Math.min(mr,Rr):Math.max(mr,Rr);tn=(st-(mr+Rr)/2)/(Rr-mr),wr=yr+(Math.abs(Math.round(tn))||1)*xr,mr=J.tickIncrement(mr,wr,tn<0?!$e:$e,we.calendar),Tr++}return t.error("tickFirst did not converge",we),mr}else{if(yr==="L")return Math.log(ot((Math.pow(10,st)-wt)/xr)*xr+wt)/Math.LN10;if(yr==="D"){var gr=pt==="D2"?Ge:He,mn=t.roundUp(t.mod(st,1),gr,$e);return Math.floor(st)+Math.log(u.round(Math.pow(10,mn),1))/Math.LN10}else throw"unrecognized dtick "+String(pt)}},J.tickText=function(we,Se,De,je){var $e=qe(we,Se),ot=we.tickmode==="array",st=De||ot,pt=we.type,wt=pt==="category"?we.d2l_noadd:we.d2l,Wt;if(ot&&Array.isArray(we.ticktext)){var yr=t.simpleMap(we.range,we.r2l),xr=(Math.abs(yr[1]-yr[0])-(we._lBreaks||0))/1e4;for(Wt=0;Wt<we.ticktext.length&&!(Math.abs(Se-wt(we.tickvals[Wt]))<xr);Wt++);if(Wt<we.ticktext.length)return $e.text=String(we.ticktext[Wt]),$e}function Tr(tn){if(tn===void 0)return!0;if(De)return tn==="none";var wr={first:we._tmin,last:we._tmax}[tn];return tn!=="all"&&Se!==wr}var mr=De?"never":we.exponentformat!=="none"&&Tr(we.showexponent)?"hide":"";if(pt==="date"?Ue(we,$e,De,st):pt==="log"?Ie(we,$e,De,st,mr):pt==="category"?Ve(we,$e):pt==="multicategory"?dt(we,$e,De):kr(we)?Gt(we,$e,De,st,mr):Rt(we,$e,De,st,mr),je||(we.tickprefix&&!Tr(we.showtickprefix)&&($e.text=we.tickprefix+$e.text),we.ticksuffix&&!Tr(we.showticksuffix)&&($e.text+=we.ticksuffix)),we.tickson==="boundaries"||we.showdividers){var Rr=function(tn){var wr=we.l2p(tn);return wr>=0&&wr<=we._length?tn:null};$e.xbnd=[Rr($e.x-.5),Rr($e.x+we.dtick-.5)]}return $e},J.hoverLabelText=function(we,Se,De){De&&(we=t.extendFlat({},we,{hoverformat:De}));var je=Array.isArray(Se)?Se[0]:Se,$e=Array.isArray(Se)?Se[1]:void 0;if($e!==void 0&&$e!==je)return J.hoverLabelText(we,je,De)+" - "+J.hoverLabelText(we,$e,De);var ot=we.type==="log"&&je<=0,st=J.tickText(we,we.c2l(ot?-je:je),"hover").text;return ot?je===0?"0":P+st:st};function qe(we,Se,De){var je=we.tickfont||{};return{x:Se,dx:0,dy:0,text:De||"",fontSize:je.size,font:je.family,fontColor:je.color}}function Ue(we,Se,De,je){var $e=we._tickround,ot=De&&we.hoverformat||J.getTickFormat(we);je&&(s($e)?$e=4:$e={y:"m",m:"d",d:"M",M:"S",S:4}[$e]);var st=t.formatDate(Se.x,ot,$e,we._dateFormat,we.calendar,we._extraFormat),pt,wt=st.indexOf(`
`);if(wt!==-1&&(pt=st.substr(wt+1),st=st.substr(0,wt)),je&&(st==="00:00:00"||st==="00:00"?(st=pt,pt=""):st.length===8&&(st=st.replace(/:00$/,""))),pt)if(De)$e==="d"?st+=", "+pt:st=pt+(st?", "+st:"");else if(!we._inCalcTicks||we._prevDateHead!==pt)we._prevDateHead=pt,st+="<br>"+pt;else{var Wt=Or(we),yr=we._trueSide||we.side;(!Wt&&yr==="top"||Wt&&yr==="bottom")&&(st+="<br> ")}Se.text=st}function Ie(we,Se,De,je,$e){var ot=we.dtick,st=Se.x,pt=we.tickformat,wt=typeof ot=="string"&&ot.charAt(0);if($e==="never"&&($e=""),je&&wt!=="L"&&(ot="L3",wt="L"),pt||wt==="L")Se.text=Mt(Math.pow(10,st),we,$e,je);else if(s(ot)||wt==="D"&&t.mod(st+.01,1)<.1){var Wt=Math.round(st),yr=Math.abs(Wt),xr=we.exponentformat;xr==="power"||Bt(xr)&&Lt(Wt)?(Wt===0?Se.text=1:Wt===1?Se.text="10":Se.text="10<sup>"+(Wt>1?"":P)+yr+"</sup>",Se.fontSize*=1.25):(xr==="e"||xr==="E")&&yr>2?Se.text="1"+xr+(Wt>0?"+":P)+yr:(Se.text=Mt(Math.pow(10,st),we,"","fakehover"),ot==="D1"&&we._id.charAt(0)==="y"&&(Se.dy-=Se.fontSize/6))}else if(wt==="D")Se.text=String(Math.round(Math.pow(10,t.mod(st,1)))),Se.fontSize*=.75;else throw"unrecognized dtick "+String(ot);if(we.dtick==="D1"){var Tr=String(Se.text).charAt(0);(Tr==="0"||Tr==="1")&&(we._id.charAt(0)==="y"?Se.dx-=Se.fontSize/4:(Se.dy+=Se.fontSize/2,Se.dx+=(we.range[1]>we.range[0]?1:-1)*Se.fontSize*(st<0?.5:.25)))}}function Ve(we,Se){var De=we._categories[Math.round(Se.x)];De===void 0&&(De=""),Se.text=String(De)}function dt(we,Se,De){var je=Math.round(Se.x),$e=we._categories[je]||[],ot=$e[1]===void 0?"":String($e[1]),st=$e[0]===void 0?"":String($e[0]);De?Se.text=st+" - "+ot:(Se.text=ot,Se.text2=st)}function Rt(we,Se,De,je,$e){$e==="never"?$e="":we.showexponent==="all"&&Math.abs(Se.x/we.dtick)<1e-6&&($e="hide"),Se.text=Mt(Se.x,we,$e,je)}function Gt(we,Se,De,je,$e){if(we.thetaunit==="radians"&&!De){var ot=Se.x/180;if(ot===0)Se.text="0";else{var st=kt(ot);if(st[1]>=100)Se.text=Mt(t.deg2rad(Se.x),we,$e,je);else{var pt=Se.x<0;st[1]===1?st[0]===1?Se.text="\u03C0":Se.text=st[0]+"\u03C0":Se.text=["<sup>",st[0],"</sup>","\u2044","<sub>",st[1],"</sub>","\u03C0"].join(""),pt&&(Se.text=P+Se.text)}}}else Se.text=Mt(Se.x,we,$e,je)}function kt(we){function Se(pt,wt){return Math.abs(pt-wt)<=1e-6}function De(pt,wt){return Se(wt,0)?pt:De(wt,pt%wt)}function je(pt){for(var wt=1;!Se(Math.round(pt*wt)/wt,pt);)wt*=10;return wt}var $e=je(we),ot=we*$e,st=Math.abs(De(ot,$e));return[Math.round(ot/st),Math.round($e/st)]}var zt=["f","p","n","\u03BC","m","","k","M","G","T"];function Bt(we){return we==="SI"||we==="B"}function Lt(we){return we>14||we<-15}function Mt(we,Se,De,je){var $e=we<0,ot=Se._tickround,st=De||Se.exponentformat||"B",pt=Se._tickexponent,wt=J.getTickFormat(Se),Wt=Se.separatethousands;if(je){var yr={exponentformat:st,minexponent:Se.minexponent,dtick:Se.showexponent==="none"?Se.dtick:s(we)&&Math.abs(we)||1,range:Se.showexponent==="none"?Se.range.map(Se.r2d):[0,we||1]};We(yr),ot=(Number(yr._tickround)||0)+4,pt=yr._tickexponent,Se.hoverformat&&(wt=Se.hoverformat)}if(wt)return Se._numFormat(wt)(we).replace(/-/g,P);var xr=Math.pow(10,-ot)/2;if(st==="none"&&(pt=0),we=Math.abs(we),we<xr)we="0",$e=!1;else{if(we+=xr,pt&&(we*=Math.pow(10,-pt),ot+=pt),ot===0)we=String(Math.floor(we));else if(ot<0){we=String(Math.round(we)),we=we.substr(0,we.length+ot);for(var Tr=ot;Tr<0;Tr++)we+="0"}else{we=String(we);var mr=we.indexOf(".")+1;mr&&(we=we.substr(0,mr+ot).replace(/\.?0+$/,""))}we=t.numSeparate(we,Se._separators,Wt)}if(pt&&st!=="hide"){Bt(st)&&Lt(pt)&&(st="power");var Rr;pt<0?Rr=P+-pt:st!=="power"?Rr="+"+pt:Rr=String(pt),st==="e"||st==="E"?we+=st+Rr:st==="power"?we+="\xD710<sup>"+Rr+"</sup>":st==="B"&&pt===9?we+="B":Bt(st)&&(we+=zt[pt/3+5])}return $e?P+we:we}J.getTickFormat=function(we){var Se;function De(wt){return typeof wt!="string"?wt:Number(wt.replace("M",""))*M}function je(wt,Wt){var yr=["L","D"];if(typeof wt==typeof Wt){if(typeof wt=="number")return wt-Wt;var xr=yr.indexOf(wt.charAt(0)),Tr=yr.indexOf(Wt.charAt(0));return xr===Tr?Number(wt.replace(/(L|D)/g,""))-Number(Wt.replace(/(L|D)/g,"")):xr-Tr}else return typeof wt=="number"?1:-1}function $e(wt,Wt,yr){var xr=yr||function(Rr){return Rr},Tr=Wt[0],mr=Wt[1];return(!Tr&&typeof Tr!="number"||xr(Tr)<=xr(wt))&&(!mr&&typeof mr!="number"||xr(mr)>=xr(wt))}function ot(wt,Wt){var yr=Wt[0]===null,xr=Wt[1]===null,Tr=je(wt,Wt[0])>=0,mr=je(wt,Wt[1])<=0;return(yr||Tr)&&(xr||mr)}var st,pt;if(we.tickformatstops&&we.tickformatstops.length>0)switch(we.type){case"date":case"linear":{for(Se=0;Se<we.tickformatstops.length;Se++)if(pt=we.tickformatstops[Se],pt.enabled&&$e(we.dtick,pt.dtickrange,De)){st=pt;break}break}case"log":{for(Se=0;Se<we.tickformatstops.length;Se++)if(pt=we.tickformatstops[Se],pt.enabled&&ot(we.dtick,pt.dtickrange)){st=pt;break}break}}return st?st.value:we.tickformat},J.getSubplots=function(we,Se){var De=we._fullLayout._subplots,je=De.cartesian.concat(De.gl2d||[]),$e=Se?J.findSubplotsWithAxis(je,Se):je;return $e.sort(function(ot,st){var pt=ot.substr(1).split("y"),wt=st.substr(1).split("y");return pt[0]===wt[0]?+pt[1]-+wt[1]:+pt[0]-+wt[0]}),$e},J.findSubplotsWithAxis=function(we,Se){for(var De=new RegExp(Se._id.charAt(0)==="x"?"^"+Se._id+"y":Se._id+"$"),je=[],$e=0;$e<we.length;$e++){var ot=we[$e];De.test(ot)&&je.push(ot)}return je},J.makeClipPaths=function(we){var Se=we._fullLayout;if(!Se._hasOnlyLargeSploms){var De={_offset:0,_length:Se.width,_id:""},je={_offset:0,_length:Se.height,_id:""},$e=J.list(we,"x",!0),ot=J.list(we,"y",!0),st=[],pt,wt;for(pt=0;pt<$e.length;pt++)for(st.push({x:$e[pt],y:je}),wt=0;wt<ot.length;wt++)pt===0&&st.push({x:De,y:ot[wt]}),st.push({x:$e[pt],y:ot[wt]});var Wt=Se._clips.selectAll(".axesclip").data(st,function(yr){return yr.x._id+yr.y._id});Wt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(yr){return"clip"+Se._uid+yr.x._id+yr.y._id}).append("rect"),Wt.exit().remove(),Wt.each(function(yr){u.select(this).select("rect").attr({x:yr.x._offset||0,y:yr.y._offset||0,width:yr.x._length||1,height:yr.y._length||1})})}},J.draw=function(we,Se,De){var je=we._fullLayout;Se==="redraw"&&je._paper.selectAll("g.subplot").each(function(ot){var st=ot[0],pt=je._plots[st];if(pt){var wt=pt.xaxis,Wt=pt.yaxis;pt.xaxislayer.selectAll("."+wt._id+"tick").remove(),pt.yaxislayer.selectAll("."+Wt._id+"tick").remove(),pt.xaxislayer.selectAll("."+wt._id+"tick2").remove(),pt.yaxislayer.selectAll("."+Wt._id+"tick2").remove(),pt.xaxislayer.selectAll("."+wt._id+"divider").remove(),pt.yaxislayer.selectAll("."+Wt._id+"divider").remove(),pt.gridlayer&&pt.gridlayer.selectAll("path").remove(),pt.zerolinelayer&&pt.zerolinelayer.selectAll("path").remove(),je._infolayer.select(".g-"+wt._id+"title").remove(),je._infolayer.select(".g-"+Wt._id+"title").remove()}});var $e=!Se||Se==="redraw"?J.listIds(we):Se;return t.syncOrAsync($e.map(function(ot){return function(){if(!!ot){var st=J.getFromId(we,ot),pt=J.drawOne(we,st,De);return st._r=st.range.slice(),st._rl=t.simpleMap(st._r,st.r2l),pt}}}))},J.drawOne=function(we,Se,De){De=De||{};var je,$e,ot;Se.setScale();var st=we._fullLayout,pt=Se._id,wt=pt.charAt(0),Wt=J.counterLetter(pt),yr=st._plots[Se._mainSubplot];if(!yr)return;var xr=yr[wt+"axislayer"],Tr=Se._mainLinePosition,mr=Se._mainMirrorPosition,Rr=Se._vals=J.calcTicks(Se),tn=[Se.mirror,Tr,mr].join("_");for(je=0;je<Rr.length;je++)Rr[je].axInfo=tn;Se._selections={},Se._tickAngles&&(Se._prevTickAngles=Se._tickAngles),Se._tickAngles={},Se._depth=null;var wr={};function gr(ha){var na=pt+(ha||"tick");return wr[na]||(wr[na]=Ce(Se,na)),wr[na]}if(!!Se.visible){var mn=J.makeTransTickFn(Se),Gr=J.makeTransTickLabelFn(Se),Ar,nn,fn=Se.ticks==="inside",jr=Se.ticks==="outside";if(Se.tickson==="boundaries"){var at=it(Se,Rr);nn=J.clipEnds(Se,at),Ar=fn?nn:at}else nn=J.clipEnds(Se,Rr),Ar=fn&&Se.ticklabelmode!=="period"?nn:Rr;var Ft=Se._gridVals=nn,er=Qe(Se,Rr);if(!st._hasOnlyLargeSploms){var hr=Se._subplotsWith,Wr={};for(je=0;je<hr.length;je++){$e=hr[je],ot=st._plots[$e];var zr=ot[Wt+"axis"],Pr=zr._mainAxis._id;if(!Wr[Pr]){Wr[Pr]=1;var br=wt==="x"?"M0,"+zr._offset+"v"+zr._length:"M"+zr._offset+",0h"+zr._length;J.drawGrid(we,Se,{vals:Ft,counterAxis:zr,layer:ot.gridlayer.select("."+pt),path:br,transFn:mn}),J.drawZeroLine(we,Se,{counterAxis:zr,layer:ot.zerolinelayer,path:br,transFn:mn})}}}var Xr=J.getTickSigns(Se),Fn=[];if(Se.ticks){var kn=J.makeTickPath(Se,Tr,Xr[2]),ra,oa;Se._anchorAxis&&Se.mirror&&Se.mirror!==!0?(ra=J.makeTickPath(Se,mr,Xr[3]),oa=kn+ra):(ra="",oa=kn);var Sa;if(Se.showdividers&&jr&&Se.tickson==="boundaries"){var ya={};for(je=0;je<er.length;je++)ya[er[je].x]=1;Sa=function(ha){return ya[ha.x]?ra:oa}}else Sa=oa;J.drawTicks(we,Se,{vals:Ar,layer:xr,path:Sa,transFn:mn}),Se.mirror==="allticks"&&(Fn=Object.keys(Se._linepositions||{}))}for(je=0;je<Fn.length;je++){$e=Fn[je],ot=st._plots[$e];var pr=Se._linepositions[$e]||[],vn=J.makeTickPath(Se,pr[0],Xr[0])+J.makeTickPath(Se,pr[1],Xr[1]);J.drawTicks(we,Se,{vals:Ar,layer:ot[wt+"axislayer"],path:vn,transFn:mn})}var $r=[];if($r.push(function(){return J.drawLabels(we,Se,{vals:Rr,layer:xr,plotinfo:ot,transFn:Gr,labelFns:J.makeLabelFns(Se,Tr)})}),Se.type==="multicategory"){var On={x:2,y:10}[wt];$r.push(function(){var ha={x:"height",y:"width"}[wt],na=gr()[ha]+On+(Se._tickAngles[pt+"tick"]?Se.tickfont.size*ee:0);return J.drawLabels(we,Se,{vals:ht(Se,Rr),layer:xr,cls:pt+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:mn,labelFns:J.makeLabelFns(Se,Tr+na*Xr[4])})}),$r.push(function(){return Se._depth=Xr[4]*(gr("tick2")[Se.side]-Tr),Pt(we,Se,{vals:er,layer:xr,path:J.makeTickPath(Se,Tr,Xr[4],Se._depth),transFn:mn})})}else Se.title.hasOwnProperty("standoff")&&$r.push(function(){Se._depth=Xr[4]*(gr()[Se.side]-Tr)});var Bn=x.getComponentMethod("rangeslider","isVisible")(Se);return $r.push(function(){var ha=Se.side.charAt(0),na=q[Se.side].charAt(0),Vn=J.getPxPosition(we,Se),fa=jr?Se.ticklen:0,ga,ur,Dr,on;if((Se.automargin||Bn)&&(Se.type==="multicategory"?ga=gr("tick2"):(ga=gr(),wt==="x"&&ha==="b"&&(Se._depth=Math.max(ga.width>0?ga.bottom-Vn:0,fa)))),Se.automargin){ur={x:0,y:0,r:0,l:0,t:0,b:0};var rn=[0,1];if(wt==="x"){if(ha==="b"?ur[ha]=Se._depth:(ur[ha]=Se._depth=Math.max(ga.width>0?Vn-ga.top:0,fa),rn.reverse()),ga.width>0){var gn=ga.right-(Se._offset+Se._length);gn>0&&(ur.xr=1,ur.r=gn);var wn=Se._offset-ga.left;wn>0&&(ur.xl=0,ur.l=wn)}}else if(ha==="l"?ur[ha]=Se._depth=Math.max(ga.height>0?Vn-ga.left:0,fa):(ur[ha]=Se._depth=Math.max(ga.height>0?ga.right-Vn:0,fa),rn.reverse()),ga.height>0){var pn=ga.bottom-(Se._offset+Se._length);pn>0&&(ur.yb=0,ur.b=pn);var cr=Se._offset-ga.top;cr>0&&(ur.yt=1,ur.t=cr)}ur[Wt]=Se.anchor==="free"?Se.position:Se._anchorAxis.domain[rn[0]],Se.title.text!==st._dfltTitle[wt]&&(ur[ha]+=St(Se)+(Se.title.standoff||0)),Se.mirror&&Se.anchor!=="free"&&(Dr={x:0,y:0,r:0,l:0,t:0,b:0},Dr[na]=Se.linewidth,Se.mirror&&Se.mirror!==!0&&(Dr[na]+=fa),Se.mirror===!0||Se.mirror==="ticks"?Dr[Wt]=Se._anchorAxis.domain[rn[1]]:(Se.mirror==="all"||Se.mirror==="allticks")&&(Dr[Wt]=[Se._counterDomainMin,Se._counterDomainMax][rn[1]]))}Bn&&(on=x.getComponentMethod("rangeslider","autoMarginOpts")(we,Se)),m.autoMargin(we,gt(Se),ur),m.autoMargin(we,Et(Se),Dr),m.autoMargin(we,rr(Se),on)}),!De.skipTitle&&!(Bn&&Se.side==="bottom")&&$r.push(function(){return Nt(we,Se)}),t.syncOrAsync($r)}};function it(we,Se){var De=[],je,$e=function(ot,st){var pt=ot.xbnd[st];pt!==null&&De.push(t.extendFlat({},ot,{x:pt}))};if(Se.length){for(je=0;je<Se.length;je++)$e(Se[je],0);$e(Se[je-1],1)}return De}function ht(we,Se){for(var De=[],je={},$e=0;$e<Se.length;$e++){var ot=Se[$e];je[ot.text2]?je[ot.text2].push(ot.x):je[ot.text2]=[ot.x]}for(var st in je)De.push(qe(we,t.interp(je[st],.5),st));return De}function Qe(we,Se){var De=[],je,$e,ot=Se.length&&Se[Se.length-1].x<Se[0].x,st=function(wt,Wt){var yr=wt.xbnd[Wt];yr!==null&&De.push(t.extendFlat({},wt,{x:yr}))};if(we.showdividers&&Se.length){for(je=0;je<Se.length;je++){var pt=Se[je];pt.text2!==$e&&st(pt,ot?1:0),$e=pt.text2}st(Se[je-1],ot?0:1)}return De}function Ce(we,Se){var De,je,$e,ot;return we._selections[Se].size()?(De=1/0,je=-1/0,$e=1/0,ot=-1/0,we._selections[Se].each(function(){var st=Je(this),pt=f.bBox(st.node().parentNode);De=Math.min(De,pt.top),je=Math.max(je,pt.bottom),$e=Math.min($e,pt.left),ot=Math.max(ot,pt.right)})):(De=0,je=0,$e=0,ot=0),{top:De,bottom:je,left:$e,right:ot,height:je-De,width:ot-$e}}J.getTickSigns=function(we){var Se=we._id.charAt(0),De={x:"top",y:"right"}[Se],je=we.side===De?1:-1,$e=[-1,1,je,-je];return we.ticks!=="inside"==(Se==="x")&&($e=$e.map(function(ot){return-ot})),we.side&&$e.push({l:-1,t:-1,r:1,b:1}[we.side.charAt(0)]),$e},J.makeTransTickFn=function(we){return we._id.charAt(0)==="x"?function(Se){return i(we._offset+we.l2p(Se.x),0)}:function(Se){return i(0,we._offset+we.l2p(Se.x))}},J.makeTransTickLabelFn=function(we){var Se=rt(we),De=Se[0],je=Se[1];return we._id.charAt(0)==="x"?function($e){return i(De+we._offset+we.l2p(Xe($e)),je)}:function($e){return i(je,De+we._offset+we.l2p(Xe($e)))}};function Xe(we){return we.periodX!==void 0?we.periodX:we.x}function rt(we){var Se=we.ticklabelposition||"",De=function(mr){return Se.indexOf(mr)!==-1},je=De("top"),$e=De("left"),ot=De("right"),st=De("bottom"),pt=De("inside"),wt=st||$e||je||ot;if(!wt&&!pt)return[0,0];var Wt=we.side,yr=wt?(we.tickwidth||0)/2:0,xr=W,Tr=we.tickfont?we.tickfont.size:12;return(st||je)&&(yr+=Tr*Z,xr+=(we.linewidth||0)/2),($e||ot)&&(yr+=(we.linewidth||0)/2,xr+=W),pt&&Wt==="top"&&(xr-=Tr*(1-Z)),($e||je)&&(yr=-yr),(Wt==="bottom"||Wt==="right")&&(xr=-xr),[wt?yr:0,pt?xr:0]}J.makeTickPath=function(we,Se,De,je){je=je!==void 0?je:we.ticklen;var $e=we._id.charAt(0),ot=(we.linewidth||1)/2;return $e==="x"?"M0,"+(Se+ot*De)+"v"+je*De:"M"+(Se+ot*De)+",0h"+je*De},J.makeLabelFns=function(we,Se,De){var je=we.ticklabelposition||"",$e=function(Wr){return je.indexOf(Wr)!==-1},ot=$e("top"),st=$e("left"),pt=$e("right"),wt=$e("bottom"),Wt=wt||st||ot||pt,yr=$e("inside"),xr=je==="inside"&&we.ticks==="inside"||!yr&&we.ticks==="outside"&&we.tickson!=="boundaries",Tr=0,mr=0,Rr=xr?we.ticklen:0;if(yr?Rr*=-1:Wt&&(Rr=0),xr&&(Tr+=Rr,De)){var tn=t.deg2rad(De);Tr=Rr*Math.cos(tn)+1,mr=Rr*Math.sin(tn)}we.showticklabels&&(xr||we.showline)&&(Tr+=.2*we.tickfont.size),Tr+=(we.linewidth||1)/2*(yr?-1:1);var wr={labelStandoff:Tr,labelShift:mr},gr,mn,Gr,Ar,nn=0,fn=we.side,jr=we._id.charAt(0),at=we.tickangle,Ft;if(jr==="x")Ft=!yr&&fn==="bottom"||yr&&fn==="top",Ar=Ft?1:-1,yr&&(Ar*=-1),gr=mr*Ar,mn=Se+Tr*Ar,Gr=Ft?1:-.2,Math.abs(at)===90&&(yr?Gr+=j:at===-90&&fn==="bottom"?Gr=Z:at===90&&fn==="top"?Gr=j:Gr=.5,nn=j/2*(at/90)),wr.xFn=function(Wr){return Wr.dx+gr+nn*Wr.fontSize},wr.yFn=function(Wr){return Wr.dy+mn+Wr.fontSize*Gr},wr.anchorFn=function(Wr,zr){if(Wt){if(st)return"end";if(pt)return"start"}return!s(zr)||zr===0||zr===180?"middle":zr*Ar<0!==yr?"end":"start"},wr.heightFn=function(Wr,zr,Pr){return zr<-60||zr>60?-.5*Pr:we.side==="top"!==yr?-Pr:0};else if(jr==="y"){if(Ft=!yr&&fn==="left"||yr&&fn==="right",Ar=Ft?1:-1,yr&&(Ar*=-1),gr=Tr,mn=mr*Ar,Gr=0,!yr&&Math.abs(at)===90&&(at===-90&&fn==="left"||at===90&&fn==="right"?Gr=Z:Gr=.5),yr){var er=s(at)?+at:0;if(er!==0){var hr=t.deg2rad(er);nn=Math.abs(Math.sin(hr))*Z*Ar,Gr=0}}wr.xFn=function(Wr){return Wr.dx+Se-(gr+Wr.fontSize*Gr)*Ar+nn*Wr.fontSize},wr.yFn=function(Wr){return Wr.dy+mn+Wr.fontSize*j},wr.anchorFn=function(Wr,zr){return s(zr)&&Math.abs(zr)===90?"middle":Ft?"end":"start"},wr.heightFn=function(Wr,zr,Pr){return we.side==="right"&&(zr*=-1),zr<-30?-Pr:zr<30?-.5*Pr:0}}return wr};function ut(we){return[we.text,we.x,we.axInfo,we.font,we.fontSize,we.fontColor].join("_")}J.drawTicks=function(we,Se,De){De=De||{};var je=Se._id+"tick",$e=De.vals;Se.ticklabelmode==="period"&&($e=$e.slice(),$e.shift());var ot=De.layer.selectAll("path."+je).data(Se.ticks?$e:[],ut);ot.exit().remove(),ot.enter().append("path").classed(je,1).classed("ticks",1).classed("crisp",De.crisp!==!1).call(n.stroke,Se.tickcolor).style("stroke-width",f.crispRound(we,Se.tickwidth,1)+"px").attr("d",De.path).style("display",null),et(Se,[D]),ot.attr("transform",De.transFn)},J.drawGrid=function(we,Se,De){De=De||{};var je=Se._id+"grid",$e=De.vals,ot=De.counterAxis;if(Se.showgrid===!1)$e=[];else if(ot&&J.shouldShowZeroLine(we,Se,ot))for(var st=Se.tickmode==="array",pt=0;pt<$e.length;pt++){var wt=$e[pt].x;if(st?!wt:Math.abs(wt)<Se.dtick/100)if($e=$e.slice(0,pt).concat($e.slice(pt+1)),st)pt--;else break}var Wt=De.layer.selectAll("path."+je).data($e,ut);Wt.exit().remove(),Wt.enter().append("path").classed(je,1).classed("crisp",De.crisp!==!1),Se._gw=f.crispRound(we,Se.gridwidth,1),Wt.attr("transform",De.transFn).attr("d",De.path).call(n.stroke,Se.gridcolor||"#ddd").style("stroke-width",Se._gw+"px").style("display",null),et(Se,[I]),typeof De.path=="function"&&Wt.attr("d",De.path)},J.drawZeroLine=function(we,Se,De){De=De||De;var je=Se._id+"zl",$e=J.shouldShowZeroLine(we,Se,De.counterAxis),ot=De.layer.selectAll("path."+je).data($e?[{x:0,id:Se._id}]:[]);ot.exit().remove(),ot.enter().append("path").classed(je,1).classed("zl",1).classed("crisp",De.crisp!==!1).each(function(){De.layer.selectAll("path").sort(function(st,pt){return se(st.id,pt.id)})}),ot.attr("transform",De.transFn).attr("d",De.path).call(n.stroke,Se.zerolinecolor||n.defaultLine).style("stroke-width",f.crispRound(we,Se.zerolinewidth,Se._gw||1)+"px").style("display",null),et(Se,[F])},J.drawLabels=function(we,Se,De){De=De||{};var je=we._fullLayout,$e=Se._id,ot=$e.charAt(0),st=De.cls||$e+"tick",pt=De.vals,wt=De.labelFns,Wt=De.secondary?0:Se.tickangle,yr=(Se._prevTickAngles||{})[st],xr=De.layer.selectAll("g."+st).data(Se.showticklabels?pt:[],ut),Tr=[];xr.enter().append("g").classed(st,1).append("text").attr("text-anchor","middle").each(function(Ar){var nn=u.select(this),fn=we._promises.length;nn.call(a.positionText,wt.xFn(Ar),wt.yFn(Ar)).call(f.font,Ar.font,Ar.fontSize,Ar.fontColor).text(Ar.text).call(a.convertToTspans,we),we._promises[fn]?Tr.push(we._promises.pop().then(function(){mr(nn,Wt)})):mr(nn,Wt)}),et(Se,[U]),xr.exit().remove(),De.repositionOnUpdate&&xr.each(function(Ar){u.select(this).select("text").call(a.positionText,wt.xFn(Ar),wt.yFn(Ar))});function mr(Ar,nn){Ar.each(function(fn){var jr=u.select(this),at=jr.select(".text-math-group"),Ft=wt.anchorFn(fn,nn),er=De.transFn.call(jr.node(),fn)+(s(nn)&&+nn!=0?" rotate("+nn+","+wt.xFn(fn)+","+(wt.yFn(fn)-fn.fontSize/2)+")":""),hr=a.lineCount(jr),Wr=ee*fn.fontSize,zr=wt.heightFn(fn,s(nn)?+nn:0,(hr-1)*Wr);if(zr&&(er+=i(0,zr)),at.empty()){var Pr=jr.select("text");Pr.attr({transform:er,"text-anchor":Ft}),Pr.style("opacity",1),Se._adjustTickLabelsOverflow&&Se._adjustTickLabelsOverflow()}else{var br=f.bBox(at.node()).width,Xr=br*{end:-.5,start:.5}[Ft];at.attr("transform",er+i(Xr,0))}})}Se._adjustTickLabelsOverflow=function(){var Ar=Se.ticklabeloverflow;if(!(!Ar||Ar==="allow")){var nn=Ar.indexOf("hide")!==-1,fn=Se._id.charAt(0)==="x",jr=0,at=fn?we._fullLayout.width:we._fullLayout.height;if(Ar.indexOf("domain")!==-1){var Ft=t.simpleMap(Se.range,Se.r2l);jr=Se.l2p(Ft[0])+Se._offset,at=Se.l2p(Ft[1])+Se._offset}var er=Math.min(jr,at),hr=Math.max(jr,at),Wr=Se.side,zr=1/0,Pr=-1/0;xr.each(function(kn){var ra=u.select(this),oa=ra.select(".text-math-group");if(oa.empty()){var Sa=f.bBox(ra.node()),ya=0;fn?(Sa.right>hr||Sa.left<er)&&(ya=1):(Sa.bottom>hr||Sa.top+(Se.tickangle?0:kn.fontSize/4)<er)&&(ya=1);var pr=ra.select("text");ya?nn&&pr.style("opacity",0):(pr.style("opacity",1),Wr==="bottom"||Wr==="right"?zr=Math.min(zr,fn?Sa.top:Sa.left):zr=-1/0,Wr==="top"||Wr==="left"?Pr=Math.max(Pr,fn?Sa.bottom:Sa.right):Pr=1/0)}});for(var br in je._plots){var Xr=je._plots[br];if(!(Se._id!==Xr.xaxis._id&&Se._id!==Xr.yaxis._id)){var Fn=fn?Xr.yaxis:Xr.xaxis;Fn&&(Fn["_visibleLabelMin_"+Se._id]=zr,Fn["_visibleLabelMax_"+Se._id]=Pr)}}}},Se._hideCounterAxisInsideTickLabels=function(Ar){var nn=Se._id.charAt(0)==="x",fn=[];for(var jr in je._plots){var at=je._plots[jr];Se._id!==at.xaxis._id&&Se._id!==at.yaxis._id||fn.push(nn?at.yaxis:at.xaxis)}fn.forEach(function(Ft,er){Ft&&Or(Ft)&&(Ar||[F,I,D,U]).forEach(function(hr){var Wr=hr.K==="tick"&&hr.L==="text"&&Se.ticklabelmode==="period",zr=je._plots[Se._mainSubplot],Pr;hr.K===F.K?Pr=zr.zerolinelayer.selectAll("."+Se._id+"zl"):hr.K===I.K?Pr=zr.gridlayer.selectAll("."+Se._id):Pr=zr[Se._id.charAt(0)+"axislayer"],Pr.each(function(){var br=u.select(this);hr.L&&(br=br.selectAll(hr.L)),br.each(function(Xr){var Fn=Se.l2p(Wr?Xe(Xr):Xr.x)+Se._offset,kn=u.select(this);Fn<Se["_visibleLabelMax_"+Ft._id]&&Fn>Se["_visibleLabelMin_"+Ft._id]?kn.style("display","none"):hr.K==="tick"&&!er&&kn.style("display",null)})})})})},mr(xr,yr+1?yr:Wt);function Rr(){return Tr.length&&Promise.all(Tr)}var tn=null;function wr(){if(mr(xr,Wt),pt.length&&ot==="x"&&!s(Wt)&&(Se.type!=="log"||String(Se.dtick).charAt(0)!=="D")){tn=0;var Ar=0,nn=[],fn;if(xr.each(function(Sa){Ar=Math.max(Ar,Sa.fontSize);var ya=Se.l2p(Sa.x),pr=Je(this),vn=f.bBox(pr.node());nn.push({top:0,bottom:10,height:10,left:ya-vn.width/2,right:ya+vn.width/2+2,width:vn.width+2})}),(Se.tickson==="boundaries"||Se.showdividers)&&!De.secondary){var jr=2;for(Se.ticks&&(jr+=Se.tickwidth/2),fn=0;fn<nn.length;fn++){var at=pt[fn].xbnd,Ft=nn[fn];if(at[0]!==null&&Ft.left-Se.l2p(at[0])<jr||at[1]!==null&&Se.l2p(at[1])-Ft.right<jr){tn=90;break}}}else{var er=pt.length,hr=Math.abs((pt[er-1].x-pt[0].x)*Se._m)/(er-1),Wr=Se.ticklabelposition||"",zr=function(Sa){return Wr.indexOf(Sa)!==-1},Pr=zr("top"),br=zr("left"),Xr=zr("right"),Fn=zr("bottom"),kn=Fn||br||Pr||Xr,ra=kn?(Se.tickwidth||0)+2*W:0,oa=hr<Ar*2.5||Se.type==="multicategory"||Se._name==="realaxis";for(fn=0;fn<nn.length-1;fn++)if(t.bBoxIntersect(nn[fn],nn[fn+1],ra)){tn=oa?90:30;break}}tn&&mr(xr,tn)}}Se._selections&&(Se._selections[st]=xr);var gr=[Rr];Se.automargin&&je._redrawFromAutoMarginCount&&yr===90?(tn=90,gr.push(function(){mr(xr,yr)})):gr.push(wr),Se._tickAngles&&gr.push(function(){Se._tickAngles[st]=tn===null?s(Wt)?Wt:0:tn});var mn=Se._anchorAxis;mn&&mn.autorange&&Or(Se)&&!H(je,Se._id)&&(je._insideTickLabelsAutorange||(je._insideTickLabelsAutorange={}),je._insideTickLabelsAutorange[mn._name+".autorange"]=mn.autorange,gr.push(function(){xr.each(function(nn,fn){var jr=Je(this),at=jr.select(".text-math-group");at.empty()&&(Se._vals[fn].bb=f.bBox(jr.node()))})}));var Gr=t.syncOrAsync(gr);return Gr&&Gr.then&&we._promises.push(Gr),Gr};function Pt(we,Se,De){var je=Se._id+"divider",$e=De.vals,ot=De.layer.selectAll("path."+je).data($e,ut);ot.exit().remove(),ot.enter().insert("path",":first-child").classed(je,1).classed("crisp",1).call(n.stroke,Se.dividercolor).style("stroke-width",f.crispRound(we,Se.dividerwidth,1)+"px"),ot.attr("transform",De.transFn).attr("d",De.path)}J.getPxPosition=function(we,Se){var De=we._fullLayout._size,je=Se._id.charAt(0),$e=Se.side,ot;if(Se.anchor!=="free"?ot=Se._anchorAxis:je==="x"?ot={_offset:De.t+(1-(Se.position||0))*De.h,_length:0}:je==="y"&&(ot={_offset:De.l+(Se.position||0)*De.w,_length:0}),$e==="top"||$e==="left")return ot._offset;if($e==="bottom"||$e==="right")return ot._offset+ot._length};function St(we){var Se=we.title.font.size,De=(we.title.text.match(a.BR_TAG_ALL)||[]).length;return we.title.hasOwnProperty("standoff")?De?Se*(Z+De*ee):Se*Z:De?Se*(De+1)*ee:Se}function Nt(we,Se){var De=we._fullLayout,je=Se._id,$e=je.charAt(0),ot=Se.title.font.size,st;if(Se.title.hasOwnProperty("standoff"))st=Se._depth+Se.title.standoff+St(Se);else{var pt=Or(Se);if(Se.type==="multicategory")st=Se._depth;else{var wt=1.5*ot;pt&&(wt=.5*ot,Se.ticks==="outside"&&(wt+=Se.ticklen)),st=10+wt+(Se.linewidth?Se.linewidth-1:0)}pt||($e==="x"?st+=Se.side==="top"?ot*(Se.showticklabels?1:0):ot*(Se.showticklabels?1.5:.5):st+=Se.side==="right"?ot*(Se.showticklabels?1:.5):ot*(Se.showticklabels?.5:0))}var Wt=J.getPxPosition(we,Se),yr,xr,Tr;$e==="x"?(xr=Se._offset+Se._length/2,Tr=Se.side==="top"?Wt-st:Wt+st):(Tr=Se._offset+Se._length/2,xr=Se.side==="right"?Wt+st:Wt-st,yr={rotate:"-90",offset:0});var mr;if(Se.type!=="multicategory"){var Rr=Se._selections[Se._id+"tick"];if(mr={selection:Rr,side:Se.side},Rr&&Rr.node()&&Rr.node().parentNode){var tn=f.getTranslate(Rr.node().parentNode);mr.offsetLeft=tn.x,mr.offsetTop=tn.y}Se.title.hasOwnProperty("standoff")&&(mr.pad=0)}return r.draw(we,je+"title",{propContainer:Se,propName:Se._name+".title.text",placeholder:De._dfltTitle[$e],avoid:mr,transform:yr,attributes:{x:xr,y:Tr,"text-anchor":"middle"}})}J.shouldShowZeroLine=function(we,Se,De){var je=t.simpleMap(Se.range,Se.r2l);return je[0]*je[1]<=0&&Se.zeroline&&(Se.type==="linear"||Se.type==="-")&&!(Se.rangebreaks&&Se.maskBreaks(0)===O)&&(jt(Se,0)||!Ot(we,Se,De,je)||Kt(we,Se))},J.clipEnds=function(we,Se){return Se.filter(function(De){return jt(we,De.x)})};function jt(we,Se){var De=we.l2p(Se);return De>1&&De<we._length-1}function Ot(we,Se,De,je){var $e=De._mainAxis;if(!$e)return;var ot=we._fullLayout,st=Se._id.charAt(0),pt=J.counterLetter(Se._id),wt=Se._offset+(Math.abs(je[0])<Math.abs(je[1])==(st==="x")?0:Se._length);function Wt(Rr){if(!Rr.showline||!Rr.linewidth)return!1;var tn=Math.max((Rr.linewidth+Se.zerolinewidth)/2,1);function wr(Gr){return typeof Gr=="number"&&Math.abs(Gr-wt)<tn}if(wr(Rr._mainLinePosition)||wr(Rr._mainMirrorPosition))return!0;var gr=Rr._linepositions||{};for(var mn in gr)if(wr(gr[mn][0])||wr(gr[mn][1]))return!0}var yr=ot._plots[De._mainSubplot];if(!(yr.mainplotinfo||yr).overlays.length)return Wt(De);for(var xr=J.list(we,pt),Tr=0;Tr<xr.length;Tr++){var mr=xr[Tr];if(mr._mainAxis===$e&&Wt(mr))return!0}}function Kt(we,Se){for(var De=we._fullData,je=Se._mainSubplot,$e=Se._id.charAt(0),ot=0;ot<De.length;ot++){var st=De[ot];if(st.visible===!0&&st.xaxis+st.yaxis===je&&(x.traceIs(st,"bar-like")&&st.orientation==={x:"h",y:"v"}[$e]||st.fill&&st.fill.charAt(st.fill.length-1)===$e))return!0}return!1}function Je(we){var Se=u.select(we),De=Se.select(".text-math-group");return De.empty()?Se.select("text"):De}J.allowAutoMargin=function(we){for(var Se=J.list(we,"",!0),De=0;De<Se.length;De++){var je=Se[De];je.automargin&&(m.allowAutoMargin(we,gt(je)),je.mirror&&m.allowAutoMargin(we,Et(je))),x.getComponentMethod("rangeslider","isVisible")(je)&&m.allowAutoMargin(we,rr(je))}};function gt(we){return we._id+".automargin"}function Et(we){return gt(we)+".mirror"}function rr(we){return we._id+".rangeslider"}J.swap=function(we,Se){for(var De=vr(we,Se),je=0;je<De.length;je++)dr(we,De[je].x,De[je].y)};function vr(we,Se){var De=[],je,$e;for(je=0;je<Se.length;je++){var ot=[],st=we._fullData[Se[je]].xaxis,pt=we._fullData[Se[je]].yaxis;if(!(!st||!pt)){for($e=0;$e<De.length;$e++)(De[$e].x.indexOf(st)!==-1||De[$e].y.indexOf(pt)!==-1)&&ot.push($e);if(!ot.length){De.push({x:[st],y:[pt]});continue}var wt=De[ot[0]],Wt;if(ot.length>1)for($e=1;$e<ot.length;$e++)Wt=De[ot[$e]],or(wt.x,Wt.x),or(wt.y,Wt.y);or(wt.x,[st]),or(wt.y,[pt])}}return De}function or(we,Se){for(var De=0;De<Se.length;De++)we.indexOf(Se[De])===-1&&we.push(Se[De])}function dr(we,Se,De){var je=[],$e=[],ot=we.layout,st,pt;for(st=0;st<Se.length;st++)je.push(J.getFromId(we,Se[st]));for(st=0;st<De.length;st++)$e.push(J.getFromId(we,De[st]));var wt=Object.keys(l),Wt=["anchor","domain","overlaying","position","side","tickangle","editType"],yr=["linear","log"];for(st=0;st<wt.length;st++){var xr=wt[st],Tr=je[0][xr],mr=$e[0][xr],Rr=!0,tn=!1,wr=!1;if(!(xr.charAt(0)==="_"||typeof Tr=="function"||Wt.indexOf(xr)!==-1)){for(pt=1;pt<je.length&&Rr;pt++){var gr=je[pt][xr];xr==="type"&&yr.indexOf(Tr)!==-1&&yr.indexOf(gr)!==-1&&Tr!==gr?tn=!0:gr!==Tr&&(Rr=!1)}for(pt=1;pt<$e.length&&Rr;pt++){var mn=$e[pt][xr];xr==="type"&&yr.indexOf(mr)!==-1&&yr.indexOf(mn)!==-1&&mr!==mn?wr=!0:$e[pt][xr]!==mr&&(Rr=!1)}Rr&&(tn&&(ot[je[0]._name].type="linear"),wr&&(ot[$e[0]._name].type="linear"),Lr(ot,xr,je,$e,we._fullLayout._dfltTitle))}}for(st=0;st<we._fullLayout.annotations.length;st++){var Gr=we._fullLayout.annotations[st];Se.indexOf(Gr.xref)!==-1&&De.indexOf(Gr.yref)!==-1&&t.swapAttrs(ot.annotations[st],["?"])}}function Lr(we,Se,De,je,$e){var ot=t.nestedProperty,st=ot(we[De[0]._name],Se).get(),pt=ot(we[je[0]._name],Se).get(),wt;for(Se==="title"&&(st&&st.text===$e.x&&(st.text=$e.y),pt&&pt.text===$e.y&&(pt.text=$e.x)),wt=0;wt<De.length;wt++)ot(we,De[wt]._name+"."+Se).set(pt);for(wt=0;wt<je.length;wt++)ot(we,je[wt]._name+"."+Se).set(st)}function kr(we){return we._id==="angularaxis"}function tr(we,Se){for(var De=Se._rangebreaks.length,je=0;je<De;je++){var $e=Se._rangebreaks[je];if(we>=$e.min&&we<$e.max)return $e.max}return we}function Or(we){return(we.ticklabelposition||"").indexOf("inside")!==-1}function et(we,Se){Or(we._anchorAxis||{})&&we._hideCounterAxisInsideTickLabels&&we._hideCounterAxisInsideTickLabels(Se)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical").BADNUM,x=s.isArrayOrTypedArray,t=s.isDateTime,i=s.cleanNumber,a=Math.round;z.exports=function(d,p,y){var g=d,A=y.noMultiCategory;if(x(g)&&!g.length)return"-";if(!A&&c(g))return"multicategory";if(A&&Array.isArray(g[0])){for(var b=[],M=0;M<g.length;M++)if(x(g[M]))for(var _=0;_<g[M].length;_++)b.push(g[M][_]);g=b}if(f(g,p))return"date";var T=y.autotypenumbers!=="strict";return o(g,T)?"category":n(g,T)?"linear":"-"};function r(h,d){return d?u(h):typeof h=="number"}function n(h,d){for(var p=h.length,y=0;y<p;y++)if(r(h[y],d))return!0;return!1}function f(h,d){for(var p=h.length,y=l(p),g=0,A=0,b={},M=0;M<p;M+=y){var _=a(M),T=h[_],w=String(T);b[w]||(b[w]=1,t(T,d)&&g++,u(T)&&A++)}return g>A*2}function l(h){return Math.max(1,(h-1)/1e3)}function o(h,d){for(var p=h.length,y=l(p),g=0,A=0,b={},M=0;M<p;M+=y){var _=a(M),T=h[_],w=String(T);if(!b[w]){b[w]=1;var v=typeof T;v==="boolean"?A++:(d?i(T)!==m:v==="number")?g++:v==="string"&&A++}}return A>g*2}function c(h){return x(h[0])&&x(h[1])}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../registry"),m=e("../../lib"),x=e("../array_container_defaults"),t=e("./layout_attributes"),i=e("./tick_value_defaults"),a=e("./tick_mark_defaults"),r=e("./tick_label_defaults"),n=e("./prefix_suffix_defaults"),f=e("./category_order_defaults"),l=e("./line_grid_defaults"),o=e("./set_convert"),c=e("./constants").WEEKDAY_PATTERN,h=e("./constants").HOUR_PATTERN;z.exports=function(A,b,M,_,T){var w=_.letter,v=_.font||{},L=_.splomStash||{},S=M("visible",!_.visibleDflt),k=b._template||{},P=b.type||k.type||"-",O;if(P==="date"){var F=s.getComponentMethod("calendars","handleDefaults");F(A,b,"calendar",_.calendar),_.noTicklabelmode||(O=M("ticklabelmode"))}var I="";(!_.noTicklabelposition||P==="multicategory")&&(I=m.coerce(A,b,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:O==="period"?["outside","inside"]:w==="x"?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),_.noTicklabeloverflow||M("ticklabeloverflow",I.indexOf("inside")!==-1?"hide past domain":P==="category"||P==="multicategory"?"allow":"hide past div"),o(b,T);var D=!b.isValidRange(A.range);D&&_.reverseDflt&&(D="reversed");var U=M("autorange",D);U&&(P==="linear"||P==="-")&&M("rangemode"),M("range"),b.cleanRange(),f(A,b,M,_),P!=="category"&&!_.noHover&&M("hoverformat");var B=M("color"),j=B!==t.color.dflt?B:v.color,Z=L.label||T._dfltTitle[w];if(n(A,b,M,P,_),!S)return b;M("title.text",Z),m.coerceFont(M,"title.font",{family:v.family,size:m.bigFont(v.size),color:j}),i(A,b,M,P),r(A,b,M,P,_),a(A,b,M,_),l(A,b,M,{dfltColor:B,bgColor:_.bgColor,showGrid:_.showGrid,attributes:t}),(b.showline||b.ticks)&&M("mirror"),_.automargin&&M("automargin");var ee=P==="multicategory";if(!_.noTickson&&(P==="category"||ee)&&(b.ticks||b.showgrid)){var q;ee&&(q="boundaries");var W=M("tickson",q);W==="boundaries"&&delete b.ticklabelposition}if(ee){var J=M("showdividers");J&&(M("dividercolor"),M("dividerwidth"))}if(P==="date")if(x(A,b,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:d}),!b.rangebreaks.length)delete b.rangebreaks;else{for(var le=0;le<b.rangebreaks.length;le++)if(b.rangebreaks[le].pattern===c){b._hasDayOfWeekBreaks=!0;break}if(o(b,T),T._has("scattergl")||T._has("splom"))for(var fe=0;fe<_.data.length;fe++){var se=_.data[fe];(se.type==="scattergl"||se.type==="splom")&&(se.visible=!1,m.warn(se.type+" traces do not work on axes with rangebreaks. Setting trace "+se.index+" to `visible: false`."))}}return b};function d(g,A,b){function M(O,F){return m.coerce(g,A,t.rangebreaks,O,F)}var _=M("enabled");if(_){var T=M("bounds");if(T&&T.length>=2){var w="",v,L;if(T.length===2){for(v=0;v<2;v++)if(L=y(T[v]),L){w=c;break}}var S=M("pattern",w);if(S===c)for(v=0;v<2;v++)L=y(T[v]),L&&(A.bounds[v]=T[v]=L-1);if(S)for(v=0;v<2;v++)switch(L=T[v],S){case c:if(!u(L)){A.enabled=!1;return}if(L=+L,L!==Math.floor(L)||L<0||L>=7){A.enabled=!1;return}A.bounds[v]=T[v]=L;break;case h:if(!u(L)){A.enabled=!1;return}if(L=+L,L<0||L>24){A.enabled=!1;return}A.bounds[v]=T[v]=L;break}if(b.autorange===!1){var k=b.range;if(k[0]<k[1]){if(T[0]<k[0]&&T[1]>k[1]){A.enabled=!1;return}}else if(T[0]>k[0]&&T[1]<k[1]){A.enabled=!1;return}}}else{var P=M("values");if(P&&P.length)M("dvalue");else{A.enabled=!1;return}}}}var p={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function y(g){if(typeof g=="string")return p[g.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(e,z,N){var u=e("../../constants/docs"),s=u.FORMAT_LINK,m=u.DATE_FORMAT_LINK;function x(a,r){return{valType:"string",dflt:"",editType:"none",description:(r?t:i)("hover text",a)+["By default the values are formatted using "+(r?"generic number format":"`"+a+"axis.hoverformat`")+"."].join(" ")}}function t(a,r){return["Sets the "+a+" formatting rule"+(r?"for `"+r+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+s+"."].join(" ")}function i(a,r){return t(a,r)+[" And for dates see: "+m+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}z.exports={axisHoverFormat:x,descriptionOnlyNumbers:t,descriptionWithDates:i}},{"../../constants/docs":474}],558:[function(e,z,N){var u=e("../../registry"),s=e("./constants");N.id2name=function(t){if(!(typeof t!="string"||!t.match(s.AX_ID_PATTERN))){var i=t.split(" ")[0].substr(1);return i==="1"&&(i=""),t.charAt(0)+"axis"+i}},N.name2id=function(t){if(!!t.match(s.AX_NAME_PATTERN)){var i=t.substr(5);return i==="1"&&(i=""),t.charAt(0)+i}},N.cleanId=function(t,i,a){var r=/( domain)$/.test(t);if(!(typeof t!="string"||!t.match(s.AX_ID_PATTERN))&&!(i&&t.charAt(0)!==i)&&!(r&&!a)){var n=t.split(" ")[0].substr(1).replace(/^0+/,"");return n==="1"&&(n=""),t.charAt(0)+n+(r&&a?" domain":"")}},N.list=function(x,t,i){var a=x._fullLayout;if(!a)return[];var r=N.listIds(x,t),n=new Array(r.length),f;for(f=0;f<r.length;f++){var l=r[f];n[f]=a[l.charAt(0)+"axis"+l.substr(1)]}if(!i){var o=a._subplots.gl3d||[];for(f=0;f<o.length;f++){var c=a[o[f]];t?n.push(c[t+"axis"]):n.push(c.xaxis,c.yaxis,c.zaxis)}}return n},N.listIds=function(x,t){var i=x._fullLayout;if(!i)return[];var a=i._subplots;return t?a[t+"axis"]:a.xaxis.concat(a.yaxis)},N.getFromId=function(x,t,i){var a=x._fullLayout;return t=t===void 0||typeof t!="string"?t:t.replace(" domain",""),i==="x"?t=t.replace(/y[0-9]*/,""):i==="y"&&(t=t.replace(/x[0-9]*/,"")),a[N.id2name(t)]},N.getFromTrace=function(x,t,i){var a=x._fullLayout,r=null;if(u.traceIs(t,"gl3d")){var n=t.scene;n.substr(0,5)==="scene"&&(r=a[n][i+"axis"])}else r=N.getFromId(x,t[i+"axis"]||i);return r},N.idSort=function(x,t){var i=x.charAt(0),a=t.charAt(0);return i!==a?i>a?1:-1:+(x.substr(1)||1)-+(t.substr(1)||1)},N.ref2id=function(x){return/^[xyz]/.test(x)?x.split(" ")[0]:!1};function m(x,t){if(t&&t.length){for(var i=0;i<t.length;i++)if(t[i][x])return!0}return!1}N.isLinked=function(x,t){return m(t,x._axisMatchGroups)||m(t,x._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(e,z,N){function u(s,m){var x=m.dataAttr||s._id.charAt(0),t={},i,a,r;if(m.axData)i=m.axData;else for(i=[],a=0;a<m.data.length;a++){var n=m.data[a];n[x+"axis"]===s._id&&i.push(n)}for(a=0;a<i.length;a++){var f=i[a][x];for(r=0;r<f.length;r++){var l=f[r];l!=null&&(t[l]=1)}}return Object.keys(t)}z.exports=function(m,x,t,i){if(x.type==="category"){var a=m.categoryarray,r=Array.isArray(a)&&a.length>0,n;r&&(n="array");var f=t("categoryorder",n),l;f==="array"&&(l=t("categoryarray")),!r&&f==="array"&&(f=x.categoryorder="trace"),f==="trace"?x._initialCategories=[]:f==="array"?x._initialCategories=l.slice():(l=u(x,i).sort(),f==="category ascending"?x._initialCategories=l:f==="category descending"&&(x._initialCategories=l.reverse()))}}},{}],560:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical"),x=m.ONEDAY,t=m.ONEWEEK;N.dtick=function(i,a){var r=a==="log",n=a==="date",f=a==="category",l=n?x:1;if(!i)return l;if(u(i))return i=Number(i),i<=0?l:f?Math.max(1,Math.round(i)):n?Math.max(.1,i):i;if(typeof i!="string"||!(n||r))return l;var o=i.charAt(0),c=i.substr(1);return c=u(c)?Number(c):0,c<=0||!(n&&o==="M"&&c===Math.round(c)||r&&o==="L"||r&&o==="D"&&(c===1||c===2))?l:i},N.tick0=function(i,a,r,n){if(a==="date")return s.cleanDate(i,s.dateTick0(r,n%t==0?1:0));if(!(n==="D1"||n==="D2"))return u(i)?Number(i):0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(e,z,N){var u=e("../../lib/regex").counter;z.exports={idRegex:{x:u("x","( domain)?"),y:u("y","( domain)?")},attrRegex:u("[xy]axis"),xAxisMatch:u("xaxis"),yAxisMatch:u("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(e,z,N){var u=e("../../lib"),s=e("./autorange"),m=e("./axis_ids").id2name,x=e("./layout_attributes"),t=e("./scale_zoom"),i=e("./set_convert"),a=e("../../constants/numerical").ALMOST_EQUAL,r=e("../../constants/alignment").FROM_BL;N.handleDefaults=function(p,y,g){var A=g.axIds,b=g.axHasImage,M=y._axisConstraintGroups=[],_=y._axisMatchGroups=[],T,w,v,L,S,k,P,O;for(T=0;T<A.length;T++)L=m(A[T]),S=p[L],k=y[L],n(S,k,{axIds:A,layoutOut:y,hasImage:b[L]});function F(W,J){for(T=0;T<W.length;T++){w=W[T];for(v in w)y[m(v)][J]=w}}for(F(_,"_matchGroup"),T=0;T<M.length;T++){w=M[T];for(v in w)if(k=y[m(v)],k.fixedrange){for(var I in w){var D=m(I);(p[D]||{}).fixedrange===!1&&u.warn("fixedrange was specified as false for axis "+D+" but was overridden because another axis in its constraint group has fixedrange true"),y[D].fixedrange=!0}break}}for(T=0;T<M.length;){w=M[T];for(v in w){k=y[m(v)],k._matchGroup&&Object.keys(k._matchGroup).length===Object.keys(w).length&&(M.splice(T,1),T--);break}T++}F(M,"_constraintGroup");var U=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],B=!1,j=!1;function Z(){O=k[P],P==="rangebreaks"&&(j=k._hasDayOfWeekBreaks)}for(T=0;T<_.length;T++){w=_[T];for(var ee=0;ee<U.length;ee++){P=U[ee],O=null;var q;for(v in w)if(L=m(v),S=p[L],k=y[L],P in k){if(!k.matches&&(q=k,P in S)){Z();break}O===null&&P in S&&Z()}if(P==="range"&&O&&(B=!0),P==="autorange"&&O===null&&B&&(O=!1),O===null&&P in q&&(O=q[P]),O!==null)for(v in w)k=y[m(v)],k[P]=P==="range"?O.slice():O,P==="rangebreaks"&&(k._hasDayOfWeekBreaks=j,i(k,y))}}};function n(p,y,g){var A=g.axIds,b=g.layoutOut,M=g.hasImage,_=b._axisConstraintGroups,T=b._axisMatchGroups,w=y._id,v=w.charAt(0),L=((b._splomAxes||{})[v]||{})[w]||{},S=y._id,k=S.charAt(0)==="x";y._matchGroup=null,y._constraintGroup=null;function P(se,H){return u.coerce(p,y,x,se,H)}P("constrain",M?"domain":"range"),u.coerce(p,y,{constraintoward:{valType:"enumerated",values:k?["left","center","right"]:["bottom","middle","top"],dflt:k?"center":"middle"}},"constraintoward");var O=y.type,F,I,D=[];for(F=0;F<A.length;F++)if(I=A[F],I!==S){var U=b[m(I)];U.type===O&&D.push(I)}var B=l(_,S);if(B){var j=[];for(F=0;F<D.length;F++)I=D[F],B[I]||j.push(I);D=j}var Z=D.length,ee,q;Z&&(p.matches||L.matches)&&(ee=u.coerce(p,y,{matches:{valType:"enumerated",values:D,dflt:D.indexOf(L.matches)!==-1?L.matches:void 0}},"matches"));var W=M&&!k?y.anchor:void 0;if(Z&&!ee&&(p.scaleanchor||W)&&(q=u.coerce(p,y,{scaleanchor:{valType:"enumerated",values:D}},"scaleanchor",W)),ee){y._matchGroup=o(T,S,ee,1);var J=b[m(ee)],le=f(b,y)/f(b,J);k!==(ee.charAt(0)==="x")&&(le=(k?"x":"y")+le),o(_,S,ee,le)}else p.matches&&A.indexOf(p.matches)!==-1&&u.warn("ignored "+y._name+'.matches: "'+p.matches+'" to avoid an infinite loop');if(q){var fe=P("scaleratio");fe||(fe=y.scaleratio=1),o(_,S,q,fe)}else p.scaleanchor&&A.indexOf(p.scaleanchor)!==-1&&u.warn("ignored "+y._name+'.scaleanchor: "'+p.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function f(p,y){var g=y.domain;return g||(g=p[m(y.overlaying)].domain),g[1]-g[0]}function l(p,y){for(var g=0;g<p.length;g++)if(p[g][y])return p[g];return null}function o(p,y,g,A){var b,M,_,T,w,v=l(p,y);v===null?(v={},v[y]=1,w=p.length,p.push(v)):w=p.indexOf(v);var L=Object.keys(v);for(b=0;b<p.length;b++)if(_=p[b],b!==w&&_[g]){var S=_[g];for(M=0;M<L.length;M++)T=L[M],_[T]=c(S,c(A,v[T]));p.splice(w,1);return}if(A!==1)for(M=0;M<L.length;M++){var k=L[M];v[k]=c(A,v[k])}v[g]=1}function c(p,y){var g="",A="",b,M;typeof p=="string"&&(g=p.match(/^[xy]*/)[0],b=g.length,p=+p.substr(b)),typeof y=="string"&&(A=y.match(/^[xy]*/)[0],M=A.length,y=+y.substr(M));var _=p*y;return!b&&!M?_:!b||!M||g.charAt(0)===A.charAt(0)?g+A+p*y:b===M?_:(b>M?g.substr(M):A.substr(b))+_}function h(p,y){for(var g=y._size,A=g.h/g.w,b={},M=Object.keys(p),_=0;_<M.length;_++){var T=M[_],w=p[T];if(typeof w=="string"){var v=w.match(/^[xy]*/)[0],L=v.length;w=+w.substr(L);for(var S=v.charAt(0)==="y"?A:1/A,k=0;k<L;k++)w*=S}b[T]=w}return b}N.enforce=function(y){var g=y._fullLayout,A=g._axisConstraintGroups||[],b,M,_,T,w,v,L,S;for(b=0;b<A.length;b++){_=h(A[b],g);var k=Object.keys(_),P=1/0,O=0,F=1/0,I={},D={},U=!1;for(M=0;M<k.length;M++)T=k[M],D[T]=w=g[m(T)],w._inputDomain?w.domain=w._inputDomain.slice():w._inputDomain=w.domain.slice(),w._inputRange||(w._inputRange=w.range.slice()),w.setScale(),I[T]=v=Math.abs(w._m)/_[T],P=Math.min(P,v),(w.constrain==="domain"||!w._constraintShrinkable)&&(F=Math.min(F,v)),delete w._constraintShrinkable,O=Math.max(O,v),w.constrain==="domain"&&(U=!0);if(!(P>a*O&&!U)){for(M=0;M<k.length;M++)if(T=k[M],v=I[T],w=D[T],L=w.constrain,v!==F||L==="domain")if(S=v/F,L==="range")t(w,S);else{var B=w._inputDomain,j=(w.domain[1]-w.domain[0])/(B[1]-B[0]),Z=(w.r2l(w.range[1])-w.r2l(w.range[0]))/(w.r2l(w._inputRange[1])-w.r2l(w._inputRange[0]));if(S/=j,S*Z<1){w.domain=w._input.domain=B.slice(),t(w,S);continue}if(Z<1&&(w.range=w._input.range=w._inputRange.slice(),S*=Z),w.autorange){var ee=w.r2l(w.range[0]),q=w.r2l(w.range[1]),W=(ee+q)/2,J=W,le=W,fe=Math.abs(q-W),se=W-fe*S*1.0001,H=W+fe*S*1.0001,Y=s.makePadFn(g,w,0),ne=s.makePadFn(g,w,1);d(w,S);var te=Math.abs(w._m),K=s.concatExtremes(y,w),$=K.min,ae=K.max,ie,oe;for(oe=0;oe<$.length;oe++)ie=$[oe].val-Y($[oe])/te,ie>se&&ie<J&&(J=ie);for(oe=0;oe<ae.length;oe++)ie=ae[oe].val+ne(ae[oe])/te,ie<H&&ie>le&&(le=ie);var ue=(le-J)/(2*fe);S/=ue,J=w.l2r(J),le=w.l2r(le),w.range=w._input.range=ee<q?[J,le]:[le,J]}d(w,S)}}}},N.getAxisGroup=function(y,g){for(var A=y._axisMatchGroups,b=0;b<A.length;b++){var M=A[b];if(M[g])return"g"+b}return g},N.clean=function(y,g){if(g._inputDomain){for(var A=!1,b=g._id,M=y._fullLayout._axisConstraintGroups,_=0;_<M.length;_++)if(M[_][b]){A=!0;break}(!A||g.constrain!=="domain")&&(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}};function d(p,y){var g=p._inputDomain,A=r[p.constraintoward],b=g[0]+(g[1]-g[0])*A;p.domain=p._input.domain=[b+(g[0]-b)/y,b+(g[1]-b)/y],p.setScale()}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("tinycolor2"),t=e("has-passive-events"),i=e("../../registry"),a=s.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../components/color"),f=e("../../components/drawing"),l=e("../../components/fx"),o=e("./axes"),c=e("../../lib/setcursor"),h=e("../../components/dragelement"),d=e("../../components/dragelement/helpers"),p=d.selectingOrDrawing,y=d.freeMode,g=e("../../constants/alignment").FROM_TL,A=e("../../lib/clear_gl_canvases"),b=e("../../plot_api/subroutines").redrawReglTraces,M=e("../plots"),_=e("./axis_ids").getFromId,T=e("./select").prepSelect,w=e("./select").clearSelect,v=e("./select").selectOnClick,L=e("./scale_zoom"),S=e("./constants"),k=S.MINDRAG,P=S.MINZOOM,O=!0;function F(ie,oe,ue,ye,ce,me,xe,ke){var Ae=ie._fullLayout._zoomlayer,Oe=xe+ke==="nsew",He=(xe+ke).length===1,Ge,_e,Re,We,qe,Ue,Ie,Ve,dt,Rt,Gt,kt,zt,Bt,Lt,Mt,it,ht,Qe,Ce,Xe,rt,ut;function Pt(){if(Ge=oe.xaxis,_e=oe.yaxis,dt=Ge._length,Rt=_e._length,Ie=Ge._offset,Ve=_e._offset,Re={},Re[Ge._id]=Ge,We={},We[_e._id]=_e,xe&&ke)for(var wr=oe.overlays,gr=0;gr<wr.length;gr++){var mn=wr[gr].xaxis;Re[mn._id]=mn;var Gr=wr[gr].yaxis;We[Gr._id]=Gr}qe=ae(Re),Ue=ae(We),zt=U(qe,ke),Bt=U(Ue,xe),Lt=!Bt&&!zt,kt=K(ie,ie._fullLayout._axisMatchGroups,Re,We),Gt=K(ie,ie._fullLayout._axisConstraintGroups,Re,We,kt);var Ar=Gt.isSubplotConstrained||kt.isSubplotConstrained;Mt=ke||Ar,it=xe||Ar;var nn=ie._fullLayout;ht=nn._has("scattergl"),Qe=nn._has("splom"),Ce=nn._has("svg")}Pt();var St=q(Bt+zt,ie._fullLayout.dragmode,Oe),Nt=D(oe,xe+ke+"drag",St,ue,ye,ce,me);if(Lt&&!Oe)return Nt.onmousedown=null,Nt.style.pointerEvents="none",Nt;var jt={element:Nt,gd:ie,plotinfo:oe};jt.prepFn=function(wr,gr,mn){var Gr=jt.dragmode,Ar=ie._fullLayout.dragmode;Ar!==Gr&&(jt.dragmode=Ar),Pt(),rt=ie._fullLayout._invScaleX,ut=ie._fullLayout._invScaleY,Lt||(Oe?wr.shiftKey?Ar==="pan"?Ar="zoom":p(Ar)||(Ar="pan"):wr.ctrlKey&&(Ar="pan"):Ar="pan"),y(Ar)?jt.minDrag=1:jt.minDrag=void 0,p(Ar)?(jt.xaxes=qe,jt.yaxes=Ue,T(wr,gr,mn,jt,Ar)):(jt.clickFn=Kt,p(Gr)&&Ot(),Lt||(Ar==="zoom"?(jt.moveFn=et,jt.doneFn=Se,jt.minDrag=1,Or(wr,gr,mn)):Ar==="pan"&&(jt.moveFn=pt,jt.doneFn=xr))),ie._fullLayout._redrag=function(){var nn=ie._dragdata;if(nn&&nn.element===Nt){var fn=ie._fullLayout.dragmode;p(fn)||(Pt(),Tr([0,0,dt,Rt]),jt.moveFn(nn.dx,nn.dy))}}};function Ot(){jt.plotinfo.selection=!1,w(ie)}function Kt(wr,gr){var mn=jt.gd;if(mn._fullLayout._activeShapeIndex>=0){mn._fullLayout._deactivateShape(mn);return}var Gr=mn._fullLayout.clickmode;if(se(mn),wr===2&&!He&&yr(),Oe)Gr.indexOf("select")>-1&&v(gr,mn,qe,Ue,oe.id,jt),Gr.indexOf("event")>-1&&l.click(mn,gr,oe.id);else if(wr===1&&He){var Ar=xe?_e:Ge,nn=xe==="s"||ke==="w"?0:1,fn=Ar._name+".range["+nn+"]",jr=B(Ar,nn),at="left",Ft="middle";if(Ar.fixedrange)return;xe?(Ft=xe==="n"?"top":"bottom",Ar.side==="right"&&(at="right")):ke==="e"&&(at="right"),mn._context.showAxisRangeEntryBoxes&&u.select(Nt).call(r.makeEditable,{gd:mn,immediate:!0,background:mn._fullLayout.paper_bgcolor,text:String(jr),fill:Ar.tickfont?Ar.tickfont.color:"#444",horizontalAlign:at,verticalAlign:Ft}).on("edit",function(er){var hr=Ar.d2r(er);hr!==void 0&&i.call("_guiRelayout",mn,fn,hr)})}}h.init(jt);var Je,gt,Et,rr,vr,or,dr,Lr,kr,tr;function Or(wr,gr,mn){var Gr=Nt.getBoundingClientRect();Je=gr-Gr.left,gt=mn-Gr.top,ie._fullLayout._calcInverseTransform(ie);var Ar=s.apply3DTransform(ie._fullLayout._invTransform)(Je,gt);Je=Ar[0],gt=Ar[1],Et={l:Je,r:Je,w:0,t:gt,b:gt,h:0},rr=ie._hmpixcount?ie._hmlumcount/ie._hmpixcount:x(ie._fullLayout.plot_bgcolor).getLuminance(),vr="M0,0H"+dt+"V"+Rt+"H0V0",or=!1,dr="xy",tr=!1,Lr=W(Ae,rr,Ie,Ve,vr),kr=J(Ae,Ie,Ve)}function et(wr,gr){if(ie._transitioningWithDuration)return!1;var mn=Math.max(0,Math.min(dt,rt*wr+Je)),Gr=Math.max(0,Math.min(Rt,ut*gr+gt)),Ar=Math.abs(mn-Je),nn=Math.abs(Gr-gt);Et.l=Math.min(Je,mn),Et.r=Math.max(Je,mn),Et.t=Math.min(gt,Gr),Et.b=Math.max(gt,Gr);function fn(){dr="",Et.r=Et.l,Et.t=Et.b,kr.attr("d","M0,0Z")}if(Gt.isSubplotConstrained)Ar>P||nn>P?(dr="xy",Ar/dt>nn/Rt?(nn=Ar*Rt/dt,gt>Gr?Et.t=gt-nn:Et.b=gt+nn):(Ar=nn*dt/Rt,Je>mn?Et.l=Je-Ar:Et.r=Je+Ar),kr.attr("d",te(Et))):fn();else if(kt.isSubplotConstrained)if(Ar>P||nn>P){dr="xy";var jr=Math.min(Et.l/dt,(Rt-Et.b)/Rt),at=Math.max(Et.r/dt,(Rt-Et.t)/Rt);Et.l=jr*dt,Et.r=at*dt,Et.b=(1-jr)*Rt,Et.t=(1-at)*Rt,kr.attr("d",te(Et))}else fn();else!Bt||nn<Math.min(Math.max(Ar*.6,k),P)?Ar<k||!zt?fn():(Et.t=0,Et.b=Rt,dr="x",kr.attr("d",Y(Et,gt))):!zt||Ar<Math.min(nn*.6,P)?(Et.l=0,Et.r=dt,dr="y",kr.attr("d",ne(Et,Je))):(dr="xy",kr.attr("d",te(Et)));Et.w=Et.r-Et.l,Et.h=Et.b-Et.t,dr&&(tr=!0),ie._dragged=tr,le(Lr,kr,Et,vr,or,rr),we(),ie.emit("plotly_relayouting",Xe),or=!0}function we(){Xe={},(dr==="xy"||dr==="x")&&(j(qe,Et.l/dt,Et.r/dt,Xe,Gt.xaxes),wt("x",Xe)),(dr==="xy"||dr==="y")&&(j(Ue,(Rt-Et.b)/Rt,(Rt-Et.t)/Rt,Xe,Gt.yaxes),wt("y",Xe))}function Se(){we(),se(ie),xr(),H(ie)}var De=[0,0,dt,Rt],je=null,$e=S.REDRAWDELAY,ot=oe.mainplot?ie._fullLayout._plots[oe.mainplot]:oe;function st(wr){if(!ie._context._scrollZoom.cartesian&&!ie._fullLayout._enablescrollzoom)return;if(Ot(),ie._transitioningWithDuration){wr.preventDefault(),wr.stopPropagation();return}Pt(),clearTimeout(je);var gr=-wr.deltaY;if(isFinite(gr)||(gr=wr.wheelDelta/10),!isFinite(gr)){s.log("Did not find wheel motion attributes: ",wr);return}var mn=Math.exp(-Math.min(Math.max(gr,-20),20)/200),Gr=ot.draglayer.select(".nsewdrag").node().getBoundingClientRect(),Ar=(wr.clientX-Gr.left)/Gr.width,nn=(Gr.bottom-wr.clientY)/Gr.height,fn;function jr(at,Ft,er){if(at.fixedrange)return;var hr=s.simpleMap(at.range,at.r2l),Wr=hr[0]+(hr[1]-hr[0])*Ft;function zr(Pr){return at.l2r(Wr+(Pr-Wr)*er)}at.range=hr.map(zr)}if(Mt){for(ke||(Ar=.5),fn=0;fn<qe.length;fn++)jr(qe[fn],Ar,mn);wt("x"),De[2]*=mn,De[0]+=De[2]*Ar*(1/mn-1)}if(it){for(xe||(nn=.5),fn=0;fn<Ue.length;fn++)jr(Ue[fn],nn,mn);wt("y"),De[3]*=mn,De[1]+=De[3]*(1-nn)*(1/mn-1)}Tr(De),Wt(),ie.emit("plotly_relayouting",Xe),je=setTimeout(function(){!ie._fullLayout||(De=[0,0,dt,Rt],xr())},$e),wr.preventDefault()}xe.length*ke.length!=1&&$(Nt,st);function pt(wr,gr){if(wr=wr*rt,gr=gr*ut,ie._transitioningWithDuration)return;if(ie._fullLayout._replotting=!0,zt==="ew"||Bt==="ns"){var mn=zt?-wr:0,Gr=Bt?-gr:0;if(kt.isSubplotConstrained){if(zt&&Bt){var Ar=(wr/dt-gr/Rt)/2;wr=Ar*dt,gr=-Ar*Rt,mn=-wr,Gr=-gr}Bt?mn=-Gr*dt/Rt:Gr=-mn*Rt/dt}zt&&(Z(qe,wr),wt("x")),Bt&&(Z(Ue,gr),wt("y")),Tr([mn,Gr,dt,Rt]),Wt(),ie.emit("plotly_relayouting",Xe);return}function nn(zr,Pr,br){for(var Xr=1-Pr,Fn,kn,ra=0;ra<zr.length;ra++){var oa=zr[ra];if(!oa.fixedrange){Fn=oa,kn=oa._rl[Xr]+(oa._rl[Pr]-oa._rl[Xr])/ee(br/oa._length);var Sa=oa.l2r(kn);Sa!==!1&&Sa!==void 0&&(oa.range[Pr]=Sa)}}return Fn._length*(Fn._rl[Pr]-kn)/(Fn._rl[Pr]-Fn._rl[Xr])}var fn=zt==="w"==(Bt==="n")?1:-1;if(zt&&Bt&&(Gt.isSubplotConstrained||kt.isSubplotConstrained)){var jr=(wr/dt+fn*gr/Rt)/2;wr=jr*dt,gr=fn*jr*Rt}var at,Ft;if(zt==="w"?wr=nn(qe,0,wr):zt==="e"?wr=nn(qe,1,-wr):zt||(wr=0),Bt==="n"?gr=nn(Ue,1,gr):Bt==="s"?gr=nn(Ue,0,-gr):Bt||(gr=0),at=zt==="w"?wr:0,Ft=Bt==="n"?gr:0,Gt.isSubplotConstrained&&!kt.isSubplotConstrained||kt.isSubplotConstrained&&zt&&Bt&&fn>0){var er;if(kt.isSubplotConstrained||!zt&&Bt.length===1){for(er=0;er<qe.length;er++)qe[er].range=qe[er]._r.slice(),L(qe[er],1-gr/Rt);wr=gr*dt/Rt,at=wr/2}if(kt.isSubplotConstrained||!Bt&&zt.length===1){for(er=0;er<Ue.length;er++)Ue[er].range=Ue[er]._r.slice(),L(Ue[er],1-wr/dt);gr=wr*Rt/dt,Ft=gr/2}}(!kt.isSubplotConstrained||!Bt)&&wt("x"),(!kt.isSubplotConstrained||!zt)&&wt("y");var hr=dt-wr,Wr=Rt-gr;kt.isSubplotConstrained&&!(zt&&Bt)&&(zt?(Ft=at?0:wr*Rt/dt,Wr=hr*Rt/dt):(at=Ft?0:gr*dt/Rt,hr=Wr*dt/Rt)),Tr([at,Ft,hr,Wr]),Wt(),ie.emit("plotly_relayouting",Xe)}function wt(wr,gr){for(var mn=kt.isSubplotConstrained?{x:Ue,y:qe}[wr]:kt[wr+"axes"],Gr=kt.isSubplotConstrained?{x:qe,y:Ue}[wr]:[],Ar=0;Ar<mn.length;Ar++){var nn=mn[Ar],fn=nn._id,jr=kt.xLinks[fn]||kt.yLinks[fn],at=Gr[0]||Re[jr]||We[jr];at&&(gr?(gr[nn._name+".range[0]"]=gr[at._name+".range[0]"],gr[nn._name+".range[1]"]=gr[at._name+".range[1]"]):nn.range=at.range.slice())}}function Wt(){var wr=[],gr;function mn(nn){for(gr=0;gr<nn.length;gr++)nn[gr].fixedrange||wr.push(nn[gr]._id)}for(Mt&&(mn(qe),mn(Gt.xaxes),mn(kt.xaxes)),it&&(mn(Ue),mn(Gt.yaxes),mn(kt.yaxes)),Xe={},gr=0;gr<wr.length;gr++){var Gr=wr[gr],Ar=_(ie,Gr);o.drawOne(ie,Ar,{skipTitle:!0}),Xe[Ar._name+".range[0]"]=Ar.range[0],Xe[Ar._name+".range[1]"]=Ar.range[1]}o.redrawComponents(ie,wr)}function yr(){if(!ie._transitioningWithDuration){var wr=ie._context.doubleClick,gr=[];zt&&(gr=gr.concat(qe)),Bt&&(gr=gr.concat(Ue)),kt.xaxes&&(gr=gr.concat(kt.xaxes)),kt.yaxes&&(gr=gr.concat(kt.yaxes));var mn={},Gr,Ar,nn;if(wr==="reset+autosize"){for(wr="autosize",Ar=0;Ar<gr.length;Ar++)if(Gr=gr[Ar],Gr._rangeInitial&&(Gr.range[0]!==Gr._rangeInitial[0]||Gr.range[1]!==Gr._rangeInitial[1])||!Gr._rangeInitial&&!Gr.autorange){wr="reset";break}}if(wr==="autosize")for(Ar=0;Ar<gr.length;Ar++)Gr=gr[Ar],Gr.fixedrange||(mn[Gr._name+".autorange"]=!0);else if(wr==="reset")for((zt||Gt.isSubplotConstrained)&&(gr=gr.concat(Gt.xaxes)),Bt&&!Gt.isSubplotConstrained&&(gr=gr.concat(Gt.yaxes)),Gt.isSubplotConstrained&&(zt?Bt||(gr=gr.concat(Ue)):gr=gr.concat(qe)),Ar=0;Ar<gr.length;Ar++)Gr=gr[Ar],Gr.fixedrange||(Gr._rangeInitial?(nn=Gr._rangeInitial,mn[Gr._name+".range[0]"]=nn[0],mn[Gr._name+".range[1]"]=nn[1]):mn[Gr._name+".autorange"]=!0);ie.emit("plotly_doubleclick",null),i.call("_guiRelayout",ie,mn)}}function xr(){Tr([0,0,dt,Rt]),s.syncOrAsync([M.previousPromises,function(){ie._fullLayout._replotting=!1,i.call("_guiRelayout",ie,Xe)}],ie)}function Tr(wr){var gr=ie._fullLayout,mn=gr._plots,Gr=gr._subplots.cartesian,Ar,nn,fn,jr;if(Qe&&i.subplotsRegistry.splom.drag(ie),ht){for(Ar=0;Ar<Gr.length;Ar++)if(nn=mn[Gr[Ar]],fn=nn.xaxis,jr=nn.yaxis,nn._scene){var at=s.simpleMap(fn.range,fn.r2l),Ft=s.simpleMap(jr.range,jr.r2l);nn._scene.update({range:[at[0],Ft[0],at[1],Ft[1]]})}}if((Qe||ht)&&(A(ie),b(ie)),Ce){var er=wr[2]/Ge._length,hr=wr[3]/_e._length;for(Ar=0;Ar<Gr.length;Ar++){nn=mn[Gr[Ar]],fn=nn.xaxis,jr=nn.yaxis;var Wr=(Mt||kt.isSubplotConstrained)&&!fn.fixedrange&&Re[fn._id],zr=(it||kt.isSubplotConstrained)&&!jr.fixedrange&&We[jr._id],Pr,br,Xr,Fn;if(Wr?(Pr=er,Xr=ke||kt.isSubplotConstrained?wr[0]:tn(fn,Pr)):kt.xaHash[fn._id]?(Pr=er,Xr=wr[0]*fn._length/Ge._length):kt.yaHash[fn._id]?(Pr=hr,Xr=Bt==="ns"?-wr[1]*fn._length/_e._length:tn(fn,Pr,{n:"top",s:"bottom"}[Bt])):(Pr=mr(fn,er,hr),Xr=Rr(fn,Pr)),zr?(br=hr,Fn=xe||kt.isSubplotConstrained?wr[1]:tn(jr,br)):kt.yaHash[jr._id]?(br=hr,Fn=wr[1]*jr._length/_e._length):kt.xaHash[jr._id]?(br=er,Fn=zt==="ew"?-wr[0]*jr._length/Ge._length:tn(jr,br,{e:"right",w:"left"}[zt])):(br=mr(jr,er,hr),Fn=Rr(jr,br)),!(!Pr&&!br)){Pr||(Pr=1),br||(br=1);var kn=fn._offset-Xr/Pr,ra=jr._offset-Fn/br;nn.clipRect.call(f.setTranslate,Xr,Fn).call(f.setScale,Pr,br),nn.plot.call(f.setTranslate,kn,ra).call(f.setScale,1/Pr,1/br),(Pr!==nn.xScaleFactor||br!==nn.yScaleFactor)&&(f.setPointGroupScale(nn.zoomScalePts,Pr,br),f.setTextPointsScale(nn.zoomScaleTxt,Pr,br)),f.hideOutsideRangePoints(nn.clipOnAxisFalseTraces,nn),nn.xScaleFactor=Pr,nn.yScaleFactor=br}}}}function mr(wr,gr,mn){return wr.fixedrange?0:Mt&&Gt.xaHash[wr._id]?gr:it&&(Gt.isSubplotConstrained?Gt.xaHash:Gt.yaHash)[wr._id]?mn:0}function Rr(wr,gr){return gr?(wr.range=wr._r.slice(),L(wr,gr),tn(wr,gr)):0}function tn(wr,gr,mn){return wr._length*(1-gr)*g[mn||wr.constraintoward||"middle"]}return Nt}function I(ie,oe,ue,ye){var ce=s.ensureSingle(ie.draglayer,oe,ue,function(me){me.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",ie.id)});return ce.call(c,ye),ce.node()}function D(ie,oe,ue,ye,ce,me,xe){var ke=I(ie,"rect",oe,ue);return u.select(ke).call(f.setRect,ye,ce,me,xe),ke}function U(ie,oe){for(var ue=0;ue<ie.length;ue++)if(!ie[ue].fixedrange)return oe;return""}function B(ie,oe){var ue=ie.range[oe],ye=Math.abs(ue-ie.range[1-oe]),ce;return ie.type==="date"?ue:ie.type==="log"?(ce=Math.ceil(Math.max(0,-Math.log(ye)/Math.LN10))+3,m("."+ce+"g")(Math.pow(10,ue))):(ce=Math.floor(Math.log(Math.abs(ue))/Math.LN10)-Math.floor(Math.log(ye)/Math.LN10)+4,m("."+String(ce)+"g")(ue))}function j(ie,oe,ue,ye,ce){for(var me=0;me<ie.length;me++){var xe=ie[me];if(!xe.fixedrange)if(xe.rangebreaks){var ke=xe._id.charAt(0)==="y",Ae=ke?1-oe:oe,Oe=ke?1-ue:ue;ye[xe._name+".range[0]"]=xe.l2r(xe.p2l(Ae*xe._length)),ye[xe._name+".range[1]"]=xe.l2r(xe.p2l(Oe*xe._length))}else{var He=xe._rl[0],Ge=xe._rl[1]-He;ye[xe._name+".range[0]"]=xe.l2r(He+Ge*oe),ye[xe._name+".range[1]"]=xe.l2r(He+Ge*ue)}}if(ce&&ce.length){var _e=(oe+(1-ue))/2;j(ce,_e,1-_e,ye,[])}}function Z(ie,oe){for(var ue=0;ue<ie.length;ue++){var ye=ie[ue];if(!ye.fixedrange)if(ye.rangebreaks){var ce=0,me=ye._length,xe=ye.p2l(ce+oe)-ye.p2l(ce),ke=ye.p2l(me+oe)-ye.p2l(me),Ae=(xe+ke)/2;ye.range=[ye.l2r(ye._rl[0]-Ae),ye.l2r(ye._rl[1]-Ae)]}else ye.range=[ye.l2r(ye._rl[0]-oe/ye._m),ye.l2r(ye._rl[1]-oe/ye._m)]}}function ee(ie){return 1-(ie>=0?Math.min(ie,.9):1/(1/Math.max(ie,-.3)+3.222))}function q(ie,oe,ue){return ie?ie==="nsew"?ue?"":oe==="pan"?"move":"crosshair":ie.toLowerCase()+"-resize":"pointer"}function W(ie,oe,ue,ye,ce){return ie.append("path").attr("class","zoombox").style({fill:oe>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(ue,ye)).attr("d",ce+"Z")}function J(ie,oe,ue){return ie.append("path").attr("class","zoombox-corners").style({fill:n.background,stroke:n.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(oe,ue)).attr("d","M0,0Z")}function le(ie,oe,ue,ye,ce,me){ie.attr("d",ye+"M"+ue.l+","+ue.t+"v"+ue.h+"h"+ue.w+"v-"+ue.h+"h-"+ue.w+"Z"),fe(ie,oe,ce,me)}function fe(ie,oe,ue,ye){ue||(ie.transition().style("fill",ye>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),oe.transition().style("opacity",1).duration(200))}function se(ie){u.select(ie).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function H(ie){O&&ie.data&&ie._context.showTips&&(s.notifier(s._(ie,"Double-click to zoom back out"),"long"),O=!1)}function Y(ie,oe){return"M"+(ie.l-.5)+","+(oe-P-.5)+"h-3v"+(2*P+1)+"h3ZM"+(ie.r+.5)+","+(oe-P-.5)+"h3v"+(2*P+1)+"h-3Z"}function ne(ie,oe){return"M"+(oe-P-.5)+","+(ie.t-.5)+"v-3h"+(2*P+1)+"v3ZM"+(oe-P-.5)+","+(ie.b+.5)+"v3h"+(2*P+1)+"v-3Z"}function te(ie){var oe=Math.floor(Math.min(ie.b-ie.t,ie.r-ie.l,P)/2);return"M"+(ie.l-3.5)+","+(ie.t-.5+oe)+"h3v"+-oe+"h"+oe+"v-3h-"+(oe+3)+"ZM"+(ie.r+3.5)+","+(ie.t-.5+oe)+"h-3v"+-oe+"h"+-oe+"v-3h"+(oe+3)+"ZM"+(ie.r+3.5)+","+(ie.b+.5-oe)+"h-3v"+oe+"h"+-oe+"v3h"+(oe+3)+"ZM"+(ie.l-3.5)+","+(ie.b+.5-oe)+"h3v"+oe+"h"+oe+"v3h-"+(oe+3)+"Z"}function K(ie,oe,ue,ye,ce){for(var me=!1,xe={},ke={},Ae,Oe,He,Ge,_e=(ce||{}).xaHash,Re=(ce||{}).yaHash,We=0;We<oe.length;We++){var qe=oe[We];for(Ae in ue)if(qe[Ae]){for(He in qe)!(ce&&(_e[He]||Re[He]))&&!(He.charAt(0)==="x"?ue:ye)[He]&&(xe[He]=Ae);for(Oe in ye)!(ce&&(_e[Oe]||Re[Oe]))&&qe[Oe]&&(me=!0)}for(Oe in ye)if(qe[Oe])for(Ge in qe)!(ce&&(_e[Ge]||Re[Ge]))&&!(Ge.charAt(0)==="x"?ue:ye)[Ge]&&(ke[Ge]=Oe)}me&&(s.extendFlat(xe,ke),ke={});var Ue={},Ie=[];for(He in xe){var Ve=_(ie,He);Ie.push(Ve),Ue[Ve._id]=Ve}var dt={},Rt=[];for(Ge in ke){var Gt=_(ie,Ge);Rt.push(Gt),dt[Gt._id]=Gt}return{xaHash:Ue,yaHash:dt,xaxes:Ie,yaxes:Rt,xLinks:xe,yLinks:ke,isSubplotConstrained:me}}function $(ie,oe){if(!t)ie.onwheel!==void 0?ie.onwheel=oe:ie.onmousewheel!==void 0?ie.onmousewheel=oe:ie.isAddedWheelEvent||(ie.isAddedWheelEvent=!0,ie.addEventListener("wheel",oe,{passive:!1}));else{var ue=ie.onwheel!==void 0?"wheel":"mousewheel";ie._onwheel&&ie.removeEventListener(ue,ie._onwheel),ie._onwheel=oe,ie.addEventListener(ue,oe,{passive:!1})}}function ae(ie){var oe=[];for(var ue in ie)oe.push(ie[ue]);return oe}z.exports={makeDragBox:F,makeDragger:I,makeRectDragger:D,makeZoombox:W,makeCorners:J,updateZoombox:le,xyCorners:te,transitionZoombox:fe,removeZoombox:se,showDoubleClickNotifier:H,attachWheelEventHandler:$}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/fx"),m=e("../../components/dragelement"),x=e("../../lib/setcursor"),t=e("./dragbox").makeDragBox,i=e("./constants").DRAGGERSIZE;N.initInteractions=function(r){var n=r._fullLayout;if(r._context.staticPlot){u.select(r).selectAll(".drag").remove();return}if(!(!n._has("cartesian")&&!n._has("splom"))){var f=Object.keys(n._plots||{}).sort(function(o,c){if((n._plots[o].mainplot&&!0)===(n._plots[c].mainplot&&!0)){var h=o.split("y"),d=c.split("y");return h[0]===d[0]?Number(h[1]||1)-Number(d[1]||1):Number(h[0]||1)-Number(d[0]||1)}return n._plots[o].mainplot?1:-1});f.forEach(function(o){var c=n._plots[o],h=c.xaxis,d=c.yaxis;if(!c.mainplot){var p=t(r,c,h._offset,d._offset,h._length,d._length,"ns","ew");p.onmousemove=function(A){r._fullLayout._rehover=function(){r._fullLayout._hoversubplot===o&&r._fullLayout._plots[o]&&s.hover(r,A,o)},s.hover(r,A,o),r._fullLayout._lasthover=p,r._fullLayout._hoversubplot=o},p.onmouseout=function(A){r._dragging||(r._fullLayout._hoversubplot=null,m.unhover(r,A))},r._context.showAxisDragHandles&&(t(r,c,h._offset-i,d._offset-i,i,i,"n","w"),t(r,c,h._offset+h._length,d._offset-i,i,i,"n","e"),t(r,c,h._offset-i,d._offset+d._length,i,i,"s","w"),t(r,c,h._offset+h._length,d._offset+d._length,i,i,"s","e"))}if(r._context.showAxisDragHandles){if(o===h._mainSubplot){var y=h._mainLinePosition;h.side==="top"&&(y-=i),t(r,c,h._offset+h._length*.1,y,h._length*.8,i,"","ew"),t(r,c,h._offset,y,h._length*.1,i,"","w"),t(r,c,h._offset+h._length*.9,y,h._length*.1,i,"","e")}if(o===d._mainSubplot){var g=d._mainLinePosition;d.side!=="right"&&(g-=i),t(r,c,g,d._offset+d._length*.1,i,d._length*.8,"ns",""),t(r,c,g,d._offset+d._length*.9,i,d._length*.1,"s",""),t(r,c,g,d._offset,i,d._length*.1,"n","")}}});var l=n._hoverlayer.node();l.onmousemove=function(o){o.target=r._fullLayout._lasthover,s.hover(r,o,n._hoversubplot)},l.onclick=function(o){o.target=r._fullLayout._lasthover,s.click(r,o)},l.onmousedown=function(o){r._fullLayout._lasthover.onmousedown(o)},N.updateFx(r)}},N.updateFx=function(a){var r=a._fullLayout,n=r.dragmode==="pan"?"move":"crosshair";x(r._draggers,n)}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(e,z,N){function u(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()}function s(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),m._fullLayout._drawing=!1}z.exports={clearOutlineControllers:u,clearSelect:s}},{}],566:[function(e,z,N){var u=e("../../lib").strTranslate;function s(i,a){switch(i.type){case"log":return i.p2d(a);case"date":return i.p2r(a,0,i.calendar);default:return i.p2r(a)}}function m(i,a){switch(i.type){case"log":return i.d2p(a);case"date":return i.r2p(a,0,i.calendar);default:return i.r2p(a)}}function x(i){var a=i._id.charAt(0)==="y"?1:0;return function(r){return s(i,r[a])}}function t(i){return u(i.xaxis._offset,i.yaxis._offset)}z.exports={p2r:s,r2p:m,axValue:x,getTransform:t}},{"../../lib":503}],567:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("./axis_ids");z.exports=function(t){return function(a,r){var n=a[t];if(!!Array.isArray(n))for(var f=u.subplotsRegistry.cartesian,l=f.idRegex,o=r._subplots,c=o.xaxis,h=o.yaxis,d=o.cartesian,p=r._has("cartesian")||r._has("gl2d"),y=0;y<n.length;y++){var g=n[y];if(!!s.isPlainObject(g)){var A=m.cleanId(g.xref,"x",!1),b=m.cleanId(g.yref,"y",!1),M=l.x.test(A),_=l.y.test(b);if(M||_){p||s.pushUnique(r._basePlotModules,f);var T=!1;M&&c.indexOf(A)===-1&&(c.push(A),T=!0),_&&h.indexOf(b)===-1&&(h.push(b),T=!0),T&&M&&_&&d.push(A+b)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=e("../plots"),t=e("../../components/drawing"),i=e("../get_data").getModuleCalcData,a=e("./axis_ids"),r=e("./constants"),n=e("../../constants/xmlns_namespaces"),f=m.ensureSingle;function l(y,g,A){return m.ensureSingle(y,g,A,function(b){b.datum(A)})}N.name="cartesian",N.attr=["xaxis","yaxis"],N.idRoot=["x","y"],N.idRegex=r.idRegex,N.attrRegex=r.attrRegex,N.attributes=e("./attributes"),N.layoutAttributes=e("./layout_attributes"),N.supplyLayoutDefaults=e("./layout_defaults"),N.transitionAxes=e("./transition_axes"),N.finalizeSubplots=function(y,g){var A=g._subplots,b=A.xaxis,M=A.yaxis,_=A.cartesian,T=_.concat(A.gl2d||[]),w={},v={},L,S,k;for(L=0;L<T.length;L++){var P=T[L].split("y");w[P[0]]=1,v["y"+P[1]]=1}for(L=0;L<b.length;L++)S=b[L],w[S]||(k=(y[a.id2name(S)]||{}).anchor,r.idRegex.y.test(k)||(k="y"),_.push(S+k),T.push(S+k),v[k]||(v[k]=1,m.pushUnique(M,k)));for(L=0;L<M.length;L++)k=M[L],v[k]||(S=(y[a.id2name(k)]||{}).anchor,r.idRegex.x.test(S)||(S="x"),_.push(S+k),T.push(S+k),w[S]||(w[S]=1,m.pushUnique(b,S)));if(!T.length){S="",k="";for(var O in y)if(r.attrRegex.test(O)){var F=O.charAt(0);F==="x"?(!S||+O.substr(5)<+S.substr(5))&&(S=O):(!k||+O.substr(5)<+k.substr(5))&&(k=O)}S=S?a.name2id(S):"x",k=k?a.name2id(k):"y",b.push(S),M.push(k),_.push(S+k)}},N.plot=function(y,g,A,b){var M=y._fullLayout,_=M._subplots.cartesian,T=y.calcdata,w;if(!Array.isArray(g))for(g=[],w=0;w<T.length;w++)g.push(w);for(w=0;w<_.length;w++){for(var v=_[w],L=M._plots[v],S=[],k,P=0;P<T.length;P++){var O=T[P],F=O[0].trace;F.xaxis+F.yaxis===v&&((g.indexOf(F.index)!==-1||F.carpet)&&(k&&k[0].trace.xaxis+k[0].trace.yaxis===v&&["tonextx","tonexty","tonext"].indexOf(F.fill)!==-1&&S.indexOf(k)===-1&&S.push(k),S.push(O)),k=O)}o(y,L,S,A,b)}};function o(y,g,A,b,M){for(var _=r.traceLayerClasses,T=y._fullLayout,w=T._modules,v,L,S,k=[],P=[],O=0;O<w.length;O++){v=w[O];var F=v.name,I=s.modules[F].categories;if(I.svg){var D=v.layerName||F+"layer",U=v.plot;L=i(A,U),S=L[0],A=L[1],S.length&&k.push({i:_.indexOf(D),className:D,plotMethod:U,cdModule:S}),I.zoomScale&&P.push("."+D)}}k.sort(function(Z,ee){return Z.i-ee.i});var B=g.plot.selectAll("g.mlayer").data(k,function(Z){return Z.className});if(B.enter().append("g").attr("class",function(Z){return Z.className}).classed("mlayer",!0).classed("rangeplot",g.isRangePlot),B.exit().remove(),B.order(),B.each(function(Z){var ee=u.select(this),q=Z.className;Z.plotMethod(y,g,Z.cdModule,ee,b,M),r.clipOnAxisFalseQuery.indexOf("."+q)===-1&&t.setClipUrl(ee,g.layerClipId,y)}),T._has("scattergl")&&(v=s.getModule("scattergl"),S=i(A,v)[0],v.plot(y,g,S)),!y._context.staticPlot&&(g._hasClipOnAxisFalse&&(g.clipOnAxisFalseTraces=g.plot.selectAll(r.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),P.length)){var j=g.plot.selectAll(P.join(",")).selectAll(".trace");g.zoomScalePts=j.selectAll("path.point"),g.zoomScaleTxt=j.selectAll(".textpoint")}}N.clean=function(y,g,A,b){var M=b._plots||{},_=g._plots||{},T=b._subplots||{},w,v,L;if(b._hasOnlyLargeSploms&&!g._hasOnlyLargeSploms)for(L in M)w=M[L],w.plotgroup&&w.plotgroup.remove();var S=b._has&&b._has("gl"),k=g._has&&g._has("gl");if(S&&!k)for(L in M)w=M[L],w._scene&&w._scene.destroy();if(T.xaxis&&T.yaxis){var P=a.listIds({_fullLayout:b});for(v=0;v<P.length;v++){var O=P[v];g[a.id2name(O)]||b._infolayer.selectAll(".g-"+O+"title").remove()}}var F=b._has&&b._has("cartesian"),I=g._has&&g._has("cartesian");if(F&&!I)d(b._cartesianlayer.selectAll(".subplot"),b),b._defs.selectAll(".axesclip").remove(),delete b._axisConstraintGroups,delete b._axisMatchGroups;else if(T.cartesian)for(v=0;v<T.cartesian.length;v++){var D=T.cartesian[v];if(!_[D]){var U="."+D+",."+D+"-x,."+D+"-y";b._cartesianlayer.selectAll(U).remove(),p(D,b)}}},N.drawFramework=function(y){var g=y._fullLayout,A=c(y),b=g._cartesianlayer.selectAll(".subplot").data(A,String);b.enter().append("g").attr("class",function(M){return"subplot "+M[0]}),b.order(),b.exit().call(d,g),b.each(function(M){var _=M[0],T=g._plots[_];T.plotgroup=u.select(this),h(y,T),T.draglayer=f(g._draggers,"g",_)})},N.rangePlot=function(y,g,A){h(y,g),o(y,g,A),x.style(y)};function c(y){var g=y._fullLayout,A=g._subplots.cartesian,b=A.length,M,_,T,w,v,L,S=[],k=[];for(M=0;M<b;M++){T=A[M],w=g._plots[T],v=w.xaxis,L=w.yaxis;var P=v._mainAxis,O=L._mainAxis,F=P._id+O._id,I=g._plots[F];w.overlays=[],F!==T&&I?(w.mainplot=F,w.mainplotinfo=I,k.push(T)):(w.mainplot=void 0,w.mainplotinfo=void 0,S.push(T))}for(M=0;M<k.length;M++)T=k[M],w=g._plots[T],w.mainplotinfo.overlays.push(w);var D=S.concat(k),U=new Array(b);for(M=0;M<b;M++){T=D[M],w=g._plots[T],v=w.xaxis,L=w.yaxis;var B=[T,v.layer,L.layer,v.overlaying||"",L.overlaying||""];for(_=0;_<w.overlays.length;_++)B.push(w.overlays[_].id);U[M]=B}return U}function h(y,g){var A=g.plotgroup,b=g.id,M=r.layerValue2layerClass[g.xaxis.layer],_=r.layerValue2layerClass[g.yaxis.layer],T=y._fullLayout._hasOnlyLargeSploms;if(g.mainplot){var v=g.mainplotinfo,L=v.plotgroup,S=b+"-x",k=b+"-y";g.gridlayer=v.gridlayer,g.zerolinelayer=v.zerolinelayer,f(v.overlinesBelow,"path",S),f(v.overlinesBelow,"path",k),f(v.overaxesBelow,"g",S),f(v.overaxesBelow,"g",k),g.plot=f(v.overplot,"g",b),f(v.overlinesAbove,"path",S),f(v.overlinesAbove,"path",k),f(v.overaxesAbove,"g",S),f(v.overaxesAbove,"g",k),g.xlines=L.select(".overlines-"+M).select("."+S),g.ylines=L.select(".overlines-"+_).select("."+k),g.xaxislayer=L.select(".overaxes-"+M).select("."+S),g.yaxislayer=L.select(".overaxes-"+_).select("."+k)}else if(T)g.xlines=f(A,"path","xlines-above"),g.ylines=f(A,"path","ylines-above"),g.xaxislayer=f(A,"g","xaxislayer-above"),g.yaxislayer=f(A,"g","yaxislayer-above");else{var w=f(A,"g","layer-subplot");g.shapelayer=f(w,"g","shapelayer"),g.imagelayer=f(w,"g","imagelayer"),g.gridlayer=f(A,"g","gridlayer"),g.zerolinelayer=f(A,"g","zerolinelayer"),f(A,"path","xlines-below"),f(A,"path","ylines-below"),g.overlinesBelow=f(A,"g","overlines-below"),f(A,"g","xaxislayer-below"),f(A,"g","yaxislayer-below"),g.overaxesBelow=f(A,"g","overaxes-below"),g.plot=f(A,"g","plot"),g.overplot=f(A,"g","overplot"),g.xlines=f(A,"path","xlines-above"),g.ylines=f(A,"path","ylines-above"),g.overlinesAbove=f(A,"g","overlines-above"),f(A,"g","xaxislayer-above"),f(A,"g","yaxislayer-above"),g.overaxesAbove=f(A,"g","overaxes-above"),g.xlines=A.select(".xlines-"+M),g.ylines=A.select(".ylines-"+_),g.xaxislayer=A.select(".xaxislayer-"+M),g.yaxislayer=A.select(".yaxislayer-"+_)}T||(l(g.gridlayer,"g",g.xaxis._id),l(g.gridlayer,"g",g.yaxis._id),g.gridlayer.selectAll("g").map(function(P){return P[0]}).sort(a.idSort)),g.xlines.style("fill","none").classed("crisp",!0),g.ylines.style("fill","none").classed("crisp",!0)}function d(y,g){if(!!y){var A={};y.each(function(v){var L=v[0],S=u.select(this);S.remove(),p(L,g),A[L]=!0});for(var b in g._plots)for(var M=g._plots[b],_=M.overlays||[],T=0;T<_.length;T++){var w=_[T];A[w.id]&&w.plot.selectAll(".trace").remove()}}}function p(y,g){g._draggers.selectAll("g."+y).remove(),g._defs.select("#clip"+g._uid+y+"plot").remove()}N.toSVG=function(y){var g=y._fullLayout._glimages,A=u.select(y).selectAll(".svg-container"),b=A.filter(function(_,T){return T===A.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function M(){var _=this,T=_.toDataURL("image/png"),w=g.append("svg:image");w.attr({xmlns:n.svg,"xlink:href":T,preserveAspectRatio:"none",x:0,y:0,width:_.style.width,height:_.style.height})}b.each(M)},N.updateFx=e("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(e,z,N){var u=e("../font_attributes"),s=e("../../components/color/attributes"),m=e("../../components/drawing/attributes").dash,x=e("../../lib/extend").extendFlat,t=e("../../plot_api/plot_template").templatedArray,i=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=e("../../constants/numerical").ONEDAY,r=e("./constants"),n=r.HOUR_PATTERN,f=r.WEEKDAY_PATTERN;z.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:s.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:u({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"calc"},rangebreaks:t("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[f,n,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:x({},m,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:u({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:i("tick label")},tickformatstops:t("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:i("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:s.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:s.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:s.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",r.idRegex.x.toString(),r.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:u({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../../components/fx/helpers").isUnifiedHover,x=e("../../components/fx/hovermode_defaults"),t=e("../../plot_api/plot_template"),i=e("../layout_attributes"),a=e("./layout_attributes"),r=e("./type_defaults"),n=e("./axis_defaults"),f=e("./constraints"),l=e("./position_defaults"),o=e("./axis_ids"),c=o.id2name,h=o.name2id,d=e("./constants").AX_ID_PATTERN,p=e("../../registry"),y=p.traceIs,g=p.getComponentMethod;function A(b,M,_){Array.isArray(b[M])?b[M].push(_):b[M]=[_]}z.exports=function(M,_,T){var w=_.autotypenumbers,v={},L={},S={},k={},P={},O={},F={},I={},D={},U={},B,j;for(B=0;B<T.length;B++){var Z=T[B];if(!(!y(Z,"cartesian")&&!y(Z,"gl2d"))){var ee;if(Z.xaxis)ee=c(Z.xaxis),A(v,ee,Z);else if(Z.xaxes)for(j=0;j<Z.xaxes.length;j++)A(v,c(Z.xaxes[j]),Z);var q;if(Z.yaxis)q=c(Z.yaxis),A(v,q,Z);else if(Z.yaxes)for(j=0;j<Z.yaxes.length;j++)A(v,c(Z.yaxes[j]),Z);if(Z.type==="funnel"?Z.orientation==="h"?(ee&&(L[ee]=!0),q&&(F[q]=!0)):q&&(S[q]=!0):Z.type==="image"?(q&&(I[q]=!0),ee&&(I[ee]=!0)):(q&&(P[q]=!0,O[q]=!0),(!y(Z,"carpet")||Z.type==="carpet"&&!Z._cheater)&&ee&&(k[ee]=!0)),Z.type==="carpet"&&Z._cheater&&ee&&(L[ee]=!0),y(Z,"2dMap")&&(D[ee]=!0,D[q]=!0),y(Z,"oriented")){var W=Z.orientation==="h"?q:ee;U[W]=!0}}}var J=_._subplots,le=J.xaxis,fe=J.yaxis,se=u.simpleMap(le,c),H=u.simpleMap(fe,c),Y=se.concat(H),ne=s.background;le.length&&fe.length&&(ne=u.coerce(M,_,i,"plot_bgcolor"));var te=s.combine(ne,_.paper_bgcolor),K,$,ae,ie,oe;function ue(){var Qe=v[K]||[];oe._traceIndices=Qe.map(function(Ce){return Ce._expandedIndex}),oe._annIndices=[],oe._shapeIndices=[],oe._imgIndices=[],oe._subplotsWith=[],oe._counterAxes=[],oe._name=oe._attr=K,oe._id=$}function ye(Qe,Ce){return u.coerce(ie,oe,a,Qe,Ce)}function ce(Qe,Ce){return u.coerce2(ie,oe,a,Qe,Ce)}function me(Qe){return Qe==="x"?fe:le}function xe(Qe,Ce){for(var Xe=Qe==="x"?se:H,rt=[],ut=0;ut<Xe.length;ut++){var Pt=Xe[ut];Pt!==Ce&&!(M[Pt]||{}).overlaying&&rt.push(h(Pt))}return rt}var ke={x:me("x"),y:me("y")},Ae=ke.x.concat(ke.y),Oe={},He=[];function Ge(){var Qe=ie.matches;d.test(Qe)&&Ae.indexOf(Qe)===-1&&(Oe[Qe]=ie.type,He=Object.keys(Oe))}var _e=x(M,_),Re=m(_e);for(B=0;B<Y.length;B++){K=Y[B],$=h(K),ae=K.charAt(0),u.isPlainObject(M[K])||(M[K]={}),ie=M[K],oe=t.newContainer(_,K,ae+"axis"),ue();var We=ae==="x"&&!k[K]&&L[K]||ae==="y"&&!P[K]&&S[K],qe=ae==="y"&&(!O[K]&&F[K]||I[K]),Ue={letter:ae,font:_.font,outerTicks:D[K],showGrid:!U[K],data:v[K]||[],bgColor:te,calendar:_.calendar,automargin:!0,visibleDflt:We,reverseDflt:qe,autotypenumbersDflt:w,splomStash:((_._splomAxes||{})[ae]||{})[$]};ye("uirevision",_.uirevision),r(ie,oe,ye,Ue),n(ie,oe,ye,Ue,_);var Ie=Re&&ae===_e.charAt(0),Ve=ce("spikecolor",Re?oe.color:void 0),dt=ce("spikethickness",Re?1.5:void 0),Rt=ce("spikedash",Re?"dot":void 0),Gt=ce("spikemode",Re?"across":void 0),kt=ce("spikesnap"),zt=ye("showspikes",!!Ie||!!Ve||!!dt||!!Rt||!!Gt||!!kt);zt||(delete oe.spikecolor,delete oe.spikethickness,delete oe.spikedash,delete oe.spikemode,delete oe.spikesnap),l(ie,oe,ye,{letter:ae,counterAxes:ke[ae],overlayableAxes:xe(ae,K),grid:_.grid}),ye("title.standoff"),Ge(),oe._input=ie}for(B=0;B<He.length;){$=He[B++],K=c($),ae=K.charAt(0),u.isPlainObject(M[K])||(M[K]={}),ie=M[K],oe=t.newContainer(_,K,ae+"axis"),ue();var Bt={letter:ae,font:_.font,outerTicks:D[K],showGrid:!U[K],data:[],bgColor:te,calendar:_.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:w,splomStash:((_._splomAxes||{})[ae]||{})[$]};ye("uirevision",_.uirevision),oe.type=Oe[$]||"linear",n(ie,oe,ye,Bt,_),l(ie,oe,ye,{letter:ae,counterAxes:ke[ae],overlayableAxes:xe(ae,K),grid:_.grid}),ye("fixedrange"),Ge(),oe._input=ie}var Lt=g("rangeslider","handleDefaults"),Mt=g("rangeselector","handleDefaults");for(B=0;B<se.length;B++)K=se[B],ie=M[K],oe=_[K],Lt(M,_,K),oe.type==="date"&&Mt(ie,oe,_,H,oe.calendar),ye("fixedrange");for(B=0;B<H.length;B++){K=H[B],ie=M[K],oe=_[K];var it=_[c(oe.anchor)],ht=g("rangeslider","isVisible")(it);ye("fixedrange",ht)}f.handleDefaults(M,_,{axIds:Ae.concat(He).sort(o.idSort),axHasImage:I})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(e,z,N){var u=e("tinycolor2").mix,s=e("../../components/color/attributes").lightFraction,m=e("../../lib");z.exports=function(t,i,a,r){r=r||{};var n=r.dfltColor;function f(M,_){return m.coerce2(t,i,r.attributes,M,_)}var l=f("linecolor",n),o=f("linewidth"),c=a("showline",r.showLine||!!l||!!o);c||(delete i.linecolor,delete i.linewidth);var h=u(n,r.bgColor,r.blend||s).toRgbString(),d=f("gridcolor",h),p=f("gridwidth"),y=a("showgrid",r.showGrid||!!d||!!p);if(y||(delete i.gridcolor,delete i.gridwidth),!r.noZeroLine){var g=f("zerolinecolor",n),A=f("zerolinewidth"),b=a("zeroline",r.showGrid||!!g||!!A);b||(delete i.zerolinecolor,delete i.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib");z.exports=function(x,t,i,a){var r=a.counterAxes||[],n=a.overlayableAxes||[],f=a.letter,l=a.grid,o,c,h,d;l&&(c=l._domains[f][l._axisMap[t._id]],o=l._anchors[t._id],c&&(h=l[f+"side"].split(" ")[0],d=l.domain[f][h==="right"||h==="top"?1:0])),c=c||[0,1],o=o||(u(x.position)?"free":r[0]||"free"),h=h||(f==="x"?"bottom":"left"),d=d||0;var p=s.coerce(x,t,{anchor:{valType:"enumerated",values:["free"].concat(r),dflt:o}},"anchor");p==="free"&&i("position",d),s.coerce(x,t,{side:{valType:"enumerated",values:f==="x"?["bottom","top"]:["left","right"],dflt:h}},"side");var y=!1;if(n.length&&(y=s.coerce(x,t,{overlaying:{valType:"enumerated",values:[!1].concat(n),dflt:!1}},"overlaying")),!y){var g=i("domain",c);g[0]>g[1]-1/4096&&(t.domain=c),s.noneOrAll(x.domain,t.domain,c)}return i("layer"),t}},{"../../lib":503,"fast-isnumeric":190}],573:[function(e,z,N){var u=e("./show_dflt");z.exports=function(m,x,t,i,a){a||(a={});var r=a.tickSuffixDflt,n=u(m),f=t("tickprefix");f&&t("showtickprefix",n);var l=t("ticksuffix",r);l&&t("showticksuffix",n)}},{"./show_dflt":577}],574:[function(e,z,N){var u=e("../../constants/alignment").FROM_BL;z.exports=function(m,x,t){t===void 0&&(t=u[m.constraintoward||"center"]);var i=[m.r2l(m.range[0]),m.r2l(m.range[1])],a=i[0]+(i[1]-i[0])*t;m.range=m._input.range=[m.l2r(a+(i[0]-a)*x),m.l2r(a+(i[1]-a)*x)],m.setScale()}},{"../../constants/alignment":471}],575:[function(e,z,N){var u=e("polybooljs"),s=e("../../registry"),m=e("../../components/drawing").dashStyle,x=e("../../components/color"),t=e("../../components/fx"),i=e("../../components/fx/helpers").makeEventData,a=e("../../components/dragelement/helpers"),r=a.freeMode,n=a.rectMode,f=a.drawMode,l=a.openMode,o=a.selectMode,c=e("../../components/shapes/draw_newshape/display_outlines"),h=e("../../components/shapes/draw_newshape/helpers").handleEllipse,d=e("../../components/shapes/draw_newshape/newshapes"),p=e("../../lib"),y=e("../../lib/polygon"),g=e("../../lib/throttle"),A=e("./axis_ids").getFromId,b=e("../../lib/clear_gl_canvases"),M=e("../../plot_api/subroutines").redrawReglTraces,_=e("./constants"),T=_.MINSELECT,w=y.filter,v=y.tester,L=e("./handle_outline").clearSelect,S=e("./helpers"),k=S.p2r,P=S.axValue,O=S.getTransform;function F(K,$,ae,ie,oe){var ue=r(oe),ye=n(oe),ce=l(oe),me=f(oe),xe=o(oe),ke=oe==="drawline",Ae=oe==="drawcircle",Oe=ke||Ae,He=ie.gd,Ge=He._fullLayout,_e=Ge._zoomlayer,Re=ie.element.getBoundingClientRect(),We=ie.plotinfo,qe=O(We),Ue=$-Re.left,Ie=ae-Re.top;Ge._calcInverseTransform(He);var Ve=p.apply3DTransform(Ge._invTransform)(Ue,Ie);Ue=Ve[0],Ie=Ve[1];var dt=Ge._invScaleX,Rt=Ge._invScaleY,Gt=Ue,kt=Ie,zt="M"+Ue+","+Ie,Bt=ie.xaxes[0]._length,Lt=ie.yaxes[0]._length,Mt=ie.xaxes.concat(ie.yaxes),it=K.altKey&&!(f(oe)&&ce),ht,Qe,Ce,Xe,rt,ut,Pt;Z(K,He,ie),ue&&(ht=w([[Ue,Ie]],_.BENDPX));var St=_e.selectAll("path.select-outline-"+We.id).data(me?[0]:[1,2]),Nt=Ge.newshape;St.enter().append("path").attr("class",function(rr){return"select-outline select-outline-"+rr+" select-outline-"+We.id}).style(me?{opacity:Nt.opacity/2,fill:ce?void 0:Nt.fillcolor,stroke:Nt.line.color,"stroke-dasharray":m(Nt.line.dash,Nt.line.width),"stroke-width":Nt.line.width+"px"}:{}).attr("fill-rule",Nt.fillrule).classed("cursor-move",!!me).attr("transform",qe).attr("d",zt+"Z");var jt=_e.append("path").attr("class","zoombox-corners").style({fill:x.background,stroke:x.defaultLine,"stroke-width":1}).attr("transform",qe).attr("d","M0,0Z"),Ot=Ge._uid+_.SELECTID,Kt=[],Je=q(He,ie.xaxes,ie.yaxes,ie.subplot);function gt(rr,vr){return rr-vr}var Et;We.fillRangeItems?Et=We.fillRangeItems:ye?Et=function(rr,vr){var or=rr.range={};for(rt=0;rt<Mt.length;rt++){var dr=Mt[rt],Lr=dr._id.charAt(0);or[dr._id]=[k(dr,vr[Lr+"min"]),k(dr,vr[Lr+"max"])].sort(gt)}}:Et=function(rr,vr,or){var dr=rr.lassoPoints={};for(rt=0;rt<Mt.length;rt++){var Lr=Mt[rt];dr[Lr._id]=or.filtered.map(P(Lr))}},ie.moveFn=function(rr,vr){Gt=Math.max(0,Math.min(Bt,dt*rr+Ue)),kt=Math.max(0,Math.min(Lt,Rt*vr+Ie));var or=Math.abs(Gt-Ue),dr=Math.abs(kt-Ie);if(ye){var Lr,kr,tr;if(xe){var Or=Ge.selectdirection;switch(Or==="any"?dr<Math.min(or*.6,T)?Lr="h":or<Math.min(dr*.6,T)?Lr="v":Lr="d":Lr=Or,Lr){case"h":kr=Ae?Lt/2:0,tr=Lt;break;case"v":kr=Ae?Bt/2:0,tr=Bt;break}}if(me)switch(Ge.newshape.drawdirection){case"vertical":Lr="h",kr=Ae?Lt/2:0,tr=Lt;break;case"horizontal":Lr="v",kr=Ae?Bt/2:0,tr=Bt;break;case"ortho":or<dr?(Lr="h",kr=Ie,tr=kt):(Lr="v",kr=Ue,tr=Gt);break;default:Lr="d"}Lr==="h"?(Xe=Oe?h(Ae,[Gt,kr],[Gt,tr]):[[Ue,kr],[Ue,tr],[Gt,tr],[Gt,kr]],Xe.xmin=Oe?Gt:Math.min(Ue,Gt),Xe.xmax=Oe?Gt:Math.max(Ue,Gt),Xe.ymin=Math.min(kr,tr),Xe.ymax=Math.max(kr,tr),jt.attr("d","M"+Xe.xmin+","+(Ie-T)+"h-4v"+2*T+"h4ZM"+(Xe.xmax-1)+","+(Ie-T)+"h4v"+2*T+"h-4Z")):Lr==="v"?(Xe=Oe?h(Ae,[kr,kt],[tr,kt]):[[kr,Ie],[kr,kt],[tr,kt],[tr,Ie]],Xe.xmin=Math.min(kr,tr),Xe.xmax=Math.max(kr,tr),Xe.ymin=Oe?kt:Math.min(Ie,kt),Xe.ymax=Oe?kt:Math.max(Ie,kt),jt.attr("d","M"+(Ue-T)+","+Xe.ymin+"v-4h"+2*T+"v4ZM"+(Ue-T)+","+(Xe.ymax-1)+"v4h"+2*T+"v-4Z")):Lr==="d"&&(Xe=Oe?h(Ae,[Ue,Ie],[Gt,kt]):[[Ue,Ie],[Ue,kt],[Gt,kt],[Gt,Ie]],Xe.xmin=Math.min(Ue,Gt),Xe.xmax=Math.max(Ue,Gt),Xe.ymin=Math.min(Ie,kt),Xe.ymax=Math.max(Ie,kt),jt.attr("d","M0,0Z"))}else ue&&(ht.addPt([Gt,kt]),Xe=ht.filtered);ie.selectionDefs&&ie.selectionDefs.length?(Ce=Y(ie.mergedPolygons,Xe,it),Xe.subtract=it,Qe=j(ie.selectionDefs.concat([Xe]))):(Ce=[Xe],Qe=v(Xe)),c(te(Ce,ce),St,ie),xe&&g.throttle(Ot,_.SELECTDELAY,function(){Kt=[];var et,we;for(rt=0;rt<Je.length;rt++)if(ut=Je[rt],we=ut._module.selectPoints(ut,Qe),et=ne(we,ut),Kt.length)for(var Se=0;Se<et.length;Se++)Kt.push(et[Se]);else Kt=et;Pt={points:Kt},H(He,Je,Pt),Et(Pt,Xe,ht),ie.gd.emit("plotly_selecting",Pt)})},ie.clickFn=function(rr,vr){if(jt.remove(),He._fullLayout._activeShapeIndex>=0){He._fullLayout._deactivateShape(He);return}if(!me){var or=Ge.clickmode;g.done(Ot).then(function(){if(g.clear(Ot),rr===2){for(St.remove(),rt=0;rt<Je.length;rt++)ut=Je[rt],ut._module.selectPoints(ut,!1);H(He,Je),ee(ie),He.emit("plotly_deselect",null)}else or.indexOf("select")>-1&&I(vr,He,ie.xaxes,ie.yaxes,ie.subplot,ie,St),or==="event"&&He.emit("plotly_selected",void 0);t.click(He,vr)}).catch(p.error)}},ie.doneFn=function(){jt.remove(),g.done(Ot).then(function(){g.clear(Ot),ie.gd.emit("plotly_selected",Pt),Xe&&ie.selectionDefs&&(Xe.subtract=it,ie.selectionDefs.push(Xe),ie.mergedPolygons.length=0,[].push.apply(ie.mergedPolygons,Ce)),ie.doneFnCompleted&&ie.doneFnCompleted(Kt)}).catch(p.error),me&&ee(ie)}}function I(K,$,ae,ie,oe,ue,ye){var ce=$._hoverdata,me=$._fullLayout,xe=me.clickmode,ke=xe.indexOf("event")>-1,Ae=[],Oe,He,Ge,_e,Re,We,qe,Ue,Ie,Ve;if(W(ce)){Z(K,$,ue),Oe=q($,ae,ie,oe);var dt=J(ce,Oe),Rt=dt.pointNumbers.length>0;if(Rt?fe(Oe,dt):se(Oe)&&(qe=le(dt))){for(ye&&ye.remove(),Ve=0;Ve<Oe.length;Ve++)He=Oe[Ve],He._module.selectPoints(He,!1);H($,Oe),ee(ue),ke&&$.emit("plotly_deselect",null)}else{Ue=K.shiftKey&&(qe!==void 0?qe:le(dt)),Ge=D(dt.pointNumber,dt.searchInfo,Ue);var Gt=ue.selectionDefs.concat([Ge]);for(_e=j(Gt),Ve=0;Ve<Oe.length;Ve++)if(Re=Oe[Ve]._module.selectPoints(Oe[Ve],_e),We=ne(Re,Oe[Ve]),Ae.length)for(var kt=0;kt<We.length;kt++)Ae.push(We[kt]);else Ae=We;if(Ie={points:Ae},H($,Oe,Ie),Ge&&ue&&ue.selectionDefs.push(Ge),ye){var zt=ue.mergedPolygons,Bt=l(ue.dragmode);c(te(zt,Bt),ye,ue)}ke&&$.emit("plotly_selected",Ie)}}}function D(K,$,ae){return{pointNumber:K,searchInfo:$,subtract:ae}}function U(K){return"pointNumber"in K&&"searchInfo"in K}function B(K){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function($,ae,ie,oe){var ue=K.searchInfo.cd[0].trace._expandedIndex,ye=oe.cd[0].trace._expandedIndex;return ye===ue&&ie===K.pointNumber},isRect:!1,degenerate:!1,subtract:K.subtract}}function j(K){for(var $=[],ae=U(K[0])?0:K[0][0][0],ie=ae,oe=U(K[0])?0:K[0][0][1],ue=oe,ye=0;ye<K.length;ye++)if(U(K[ye]))$.push(B(K[ye]));else{var ce=y.tester(K[ye]);ce.subtract=K[ye].subtract,$.push(ce),ae=Math.min(ae,ce.xmin),ie=Math.max(ie,ce.xmax),oe=Math.min(oe,ce.ymin),ue=Math.max(ue,ce.ymax)}function me(xe,ke,Ae,Oe){for(var He=!1,Ge=0;Ge<$.length;Ge++)$[Ge].contains(xe,ke,Ae,Oe)&&(He=$[Ge].subtract===!1);return He}return{xmin:ae,xmax:ie,ymin:oe,ymax:ue,pts:[],contains:me,isRect:!1,degenerate:!1}}function Z(K,$,ae){$._fullLayout._drawing=!1;var ie=$._fullLayout,oe=ae.plotinfo,ue=ae.dragmode,ye=ie._lastSelectedSubplot&&ie._lastSelectedSubplot===oe.id,ce=(K.shiftKey||K.altKey)&&!(f(ue)&&l(ue));ye&&ce&&oe.selection&&oe.selection.selectionDefs&&!ae.selectionDefs?(ae.selectionDefs=oe.selection.selectionDefs,ae.mergedPolygons=oe.selection.mergedPolygons):(!ce||!oe.selection)&&ee(ae),ye||(L($),ie._lastSelectedSubplot=oe.id)}function ee(K){var $=K.dragmode,ae=K.plotinfo,ie=K.gd;if(ie._fullLayout._activeShapeIndex>=0&&ie._fullLayout._deactivateShape(ie),f($)){var oe=ie._fullLayout,ue=oe._zoomlayer,ye=ue.selectAll(".select-outline-"+ae.id);if(ye&&ie._fullLayout._drawing){var ce=d(ye,K);ce&&s.call("_guiRelayout",ie,{shapes:ce}),ie._fullLayout._drawing=!1}}ae.selection={},ae.selection.selectionDefs=K.selectionDefs=[],ae.selection.mergedPolygons=K.mergedPolygons=[]}function q(K,$,ae,ie){var oe=[],ue=$.map(function(He){return He._id}),ye=ae.map(function(He){return He._id}),ce,me,xe;for(xe=0;xe<K.calcdata.length;xe++)if(ce=K.calcdata[xe],me=ce[0].trace,!(me.visible!==!0||!me._module||!me._module.selectPoints))if(ie&&(me.subplot===ie||me.geo===ie))oe.push(Oe(me._module,ce,$[0],ae[0]));else if(me.type==="splom"&&me._xaxes[ue[0]]&&me._yaxes[ye[0]]){var ke=Oe(me._module,ce,$[0],ae[0]);ke.scene=K._fullLayout._splomScenes[me.uid],oe.push(ke)}else if(me.type==="sankey"){var Ae=Oe(me._module,ce,$[0],ae[0]);oe.push(Ae)}else{if(ue.indexOf(me.xaxis)===-1||ye.indexOf(me.yaxis)===-1)continue;oe.push(Oe(me._module,ce,A(K,me.xaxis),A(K,me.yaxis)))}return oe;function Oe(He,Ge,_e,Re){return{_module:He,cd:Ge,xaxis:_e,yaxis:Re}}}function W(K){return K&&Array.isArray(K)&&K[0].hoverOnBox!==!0}function J(K,$){var ae=K[0],ie=-1,oe=[],ue,ye;for(ye=0;ye<$.length;ye++)if(ue=$[ye],ae.fullData._expandedIndex===ue.cd[0].trace._expandedIndex){if(ae.hoverOnBox===!0)break;ae.pointNumber!==void 0?ie=ae.pointNumber:ae.binNumber!==void 0&&(ie=ae.binNumber,oe=ae.pointNumbers);break}return{pointNumber:ie,pointNumbers:oe,searchInfo:ue}}function le(K){var $=K.searchInfo.cd[0].trace,ae=K.pointNumber,ie=K.pointNumbers,oe=ie.length>0,ue=oe?ie[0]:ae;return $.selectedpoints?$.selectedpoints.indexOf(ue)>-1:!1}function fe(K,$){var ae=[],ie,oe,ue,ye;for(ye=0;ye<K.length;ye++)ie=K[ye],ie.cd[0].trace.selectedpoints&&ie.cd[0].trace.selectedpoints.length>0&&ae.push(ie);if(ae.length===1&&(ue=ae[0]===$.searchInfo,ue&&(oe=$.searchInfo.cd[0].trace,oe.selectedpoints.length===$.pointNumbers.length))){for(ye=0;ye<$.pointNumbers.length;ye++)if(oe.selectedpoints.indexOf($.pointNumbers[ye])<0)return!1;return!0}return!1}function se(K){var $=0,ae,ie,oe;for(oe=0;oe<K.length;oe++)if(ae=K[oe],ie=ae.cd[0].trace,ie.selectedpoints&&(ie.selectedpoints.length>1||($+=ie.selectedpoints.length,$>1)))return!1;return $===1}function H(K,$,ae){var ie,oe,ue,ye;for(ie=0;ie<$.length;ie++){var ce=$[ie].cd[0].trace._fullInput,me=K._fullLayout._tracePreGUI[ce.uid]||{};me.selectedpoints===void 0&&(me.selectedpoints=ce._input.selectedpoints||null)}if(ae){var xe=ae.points||[];for(ie=0;ie<$.length;ie++)ye=$[ie].cd[0].trace,ye._input.selectedpoints=ye._fullInput.selectedpoints=[],ye._fullInput!==ye&&(ye.selectedpoints=[]);for(ie=0;ie<xe.length;ie++){var ke=xe[ie],Ae=ke.data,Oe=ke.fullData;ke.pointIndices?([].push.apply(Ae.selectedpoints,ke.pointIndices),ye._fullInput!==ye&&[].push.apply(Oe.selectedpoints,ke.pointIndices)):(Ae.selectedpoints.push(ke.pointIndex),ye._fullInput!==ye&&Oe.selectedpoints.push(ke.pointIndex))}}else for(ie=0;ie<$.length;ie++)ye=$[ie].cd[0].trace,delete ye.selectedpoints,delete ye._input.selectedpoints,ye._fullInput!==ye&&delete ye._fullInput.selectedpoints;var He=!1;for(ie=0;ie<$.length;ie++){oe=$[ie],ue=oe.cd,ye=ue[0].trace,s.traceIs(ye,"regl")&&(He=!0);var Ge=oe._module,_e=Ge.styleOnSelect||Ge.style;_e&&(_e(K,ue,ue[0].node3),ue[0].nodeRangePlot3&&_e(K,ue,ue[0].nodeRangePlot3))}He&&(b(K),M(K))}function Y(K,$,ae){var ie;return ae?(ie=u.difference({regions:K,inverted:!1},{regions:[$],inverted:!1}),ie.regions):(ie=u.union({regions:K,inverted:!1},{regions:[$],inverted:!1}),ie.regions)}function ne(K,$){if(Array.isArray(K))for(var ae=$.cd,ie=$.cd[0].trace,oe=0;oe<K.length;oe++)K[oe]=i(K[oe],ie,ae);return K}function te(K,$){for(var ae=[],ie=0;ie<K.length;ie++){ae[ie]=[];for(var oe=0;oe<K[ie].length;oe++){ae[ie][oe]=[],ae[ie][oe][0]=oe?"L":"M";for(var ue=0;ue<K[ie][oe].length;ue++)ae[ie][oe].push(K[ie][oe][ue])}$||ae[ie].push(["Z",ae[ie][0][1],ae[ie][0][2]])}return ae}z.exports={prepSelect:F,clearSelect:L,clearSelectionsCache:ee,selectOnClick:I}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-time-format").utcFormat,m=e("../../lib"),x=m.numberFormat,t=e("fast-isnumeric"),i=m.cleanNumber,a=m.ms2DateTime,r=m.dateTime2ms,n=m.ensureNumber,f=m.isArrayOrTypedArray,l=e("../../constants/numerical"),o=l.FP_SAFE,c=l.BADNUM,h=l.LOG_CLIP,d=l.ONEWEEK,p=l.ONEDAY,y=l.ONEHOUR,g=l.ONEMIN,A=l.ONESEC,b=e("./axis_ids"),M=e("./constants"),_=M.HOUR_PATTERN,T=M.WEEKDAY_PATTERN;function w(L){return Math.pow(10,L)}function v(L){return L!=null}z.exports=function(S,k){k=k||{};var P=S._id||"x",O=P.charAt(0);function F(Y,ne){if(Y>0)return Math.log(Y)/Math.LN10;if(Y<=0&&ne&&S.range&&S.range.length===2){var te=S.range[0],K=S.range[1];return .5*(te+K-2*h*Math.abs(te-K))}else return c}function I(Y,ne,te,K){if((K||{}).msUTC&&t(Y))return+Y;var $=r(Y,te||S.calendar);if($===c)if(t(Y)){Y=+Y;var ae=Math.floor(m.mod(Y+.05,1)*10),ie=Math.round(Y-ae/10);$=r(new Date(ie))+ae/10}else return c;return $}function D(Y,ne,te){return a(Y,ne,te||S.calendar)}function U(Y){return S._categories[Math.round(Y)]}function B(Y){if(v(Y)){if(S._categoriesMap===void 0&&(S._categoriesMap={}),S._categoriesMap[Y]!==void 0)return S._categoriesMap[Y];S._categories.push(typeof Y=="number"?String(Y):Y);var ne=S._categories.length-1;return S._categoriesMap[Y]=ne,ne}return c}function j(Y,ne){for(var te=new Array(ne),K=0;K<ne;K++){var $=(Y[0]||[])[K],ae=(Y[1]||[])[K];te[K]=Z([$,ae])}return te}function Z(Y){if(S._categoriesMap)return S._categoriesMap[Y]}function ee(Y){var ne=Z(Y);if(ne!==void 0)return ne;if(t(Y))return+Y}function q(Y){return t(Y)?+Y:Z(Y)}function W(Y,ne,te){return u.round(te+ne*Y,2)}function J(Y,ne,te){return(Y-te)/ne}var le=function(ne){return t(ne)?W(ne,S._m,S._b):c},fe=function(Y){return J(Y,S._m,S._b)};if(S.rangebreaks){var se=O==="y";le=function(Y){if(!t(Y))return c;var ne=S._rangebreaks.length;if(!ne)return W(Y,S._m,S._b);var te=se;S.range[0]>S.range[1]&&(te=!te);for(var K=te?-1:1,$=K*Y,ae=0,ie=0;ie<ne;ie++){var oe=K*S._rangebreaks[ie].min,ue=K*S._rangebreaks[ie].max;if($<oe)break;if($>ue)ae=ie+1;else{ae=$<(oe+ue)/2?ie:ie+1;break}}var ye=S._B[ae]||0;return isFinite(ye)?W(Y,S._m2,ye):0},fe=function(Y){var ne=S._rangebreaks.length;if(!ne)return J(Y,S._m,S._b);for(var te=0,K=0;K<ne&&!(Y<S._rangebreaks[K].pmin);K++)Y>S._rangebreaks[K].pmax&&(te=K+1);return J(Y,S._m2,S._B[te])}}S.c2l=S.type==="log"?F:n,S.l2c=S.type==="log"?w:n,S.l2p=le,S.p2l=fe,S.c2p=S.type==="log"?function(Y,ne){return le(F(Y,ne))}:le,S.p2c=S.type==="log"?function(Y){return w(fe(Y))}:fe,["linear","-"].indexOf(S.type)!==-1?(S.d2r=S.r2d=S.d2c=S.r2c=S.d2l=S.r2l=i,S.c2d=S.c2r=S.l2d=S.l2r=n,S.d2p=S.r2p=function(Y){return S.l2p(i(Y))},S.p2d=S.p2r=fe,S.cleanPos=n):S.type==="log"?(S.d2r=S.d2l=function(Y,ne){return F(i(Y),ne)},S.r2d=S.r2c=function(Y){return w(i(Y))},S.d2c=S.r2l=i,S.c2d=S.l2r=n,S.c2r=F,S.l2d=w,S.d2p=function(Y,ne){return S.l2p(S.d2r(Y,ne))},S.p2d=function(Y){return w(fe(Y))},S.r2p=function(Y){return S.l2p(i(Y))},S.p2r=fe,S.cleanPos=n):S.type==="date"?(S.d2r=S.r2d=m.identity,S.d2c=S.r2c=S.d2l=S.r2l=I,S.c2d=S.c2r=S.l2d=S.l2r=D,S.d2p=S.r2p=function(Y,ne,te){return S.l2p(I(Y,0,te))},S.p2d=S.p2r=function(Y,ne,te){return D(fe(Y),ne,te)},S.cleanPos=function(Y){return m.cleanDate(Y,c,S.calendar)}):S.type==="category"?(S.d2c=S.d2l=B,S.r2d=S.c2d=S.l2d=U,S.d2r=S.d2l_noadd=ee,S.r2c=function(Y){var ne=q(Y);return ne!==void 0?ne:S.fraction2r(.5)},S.l2r=S.c2r=n,S.r2l=q,S.d2p=function(Y){return S.l2p(S.r2c(Y))},S.p2d=function(Y){return U(fe(Y))},S.r2p=S.d2p,S.p2r=fe,S.cleanPos=function(Y){return typeof Y=="string"&&Y!==""?Y:n(Y)}):S.type==="multicategory"&&(S.r2d=S.c2d=S.l2d=U,S.d2r=S.d2l_noadd=ee,S.r2c=function(Y){var ne=ee(Y);return ne!==void 0?ne:S.fraction2r(.5)},S.r2c_just_indices=Z,S.l2r=S.c2r=n,S.r2l=ee,S.d2p=function(Y){return S.l2p(S.r2c(Y))},S.p2d=function(Y){return U(fe(Y))},S.r2p=S.d2p,S.p2r=fe,S.cleanPos=function(Y){return Array.isArray(Y)||typeof Y=="string"&&Y!==""?Y:n(Y)},S.setupMultiCategory=function(Y){var ne=S._traceIndices,te,K,$=S._matchGroup;if($&&S._categories.length===0){for(var ae in $)if(ae!==P){var ie=k[b.id2name(ae)];ne=ne.concat(ie._traceIndices)}}var oe=[[0,{}],[0,{}]],ue=[];for(te=0;te<ne.length;te++){var ye=Y[ne[te]];if(O in ye){var ce=ye[O],me=ye._length||m.minRowLength(ce);if(f(ce[0])&&f(ce[1]))for(K=0;K<me;K++){var xe=ce[0][K],ke=ce[1][K];v(xe)&&v(ke)&&(ue.push([xe,ke]),xe in oe[0][1]||(oe[0][1][xe]=oe[0][0]++),ke in oe[1][1]||(oe[1][1][ke]=oe[1][0]++))}}}for(ue.sort(function(Ae,Oe){var He=oe[0][1],Ge=He[Ae[0]]-He[Oe[0]];if(Ge)return Ge;var _e=oe[1][1];return _e[Ae[1]]-_e[Oe[1]]}),te=0;te<ue.length;te++)B(ue[te])}),S.fraction2r=function(Y){var ne=S.r2l(S.range[0]),te=S.r2l(S.range[1]);return S.l2r(ne+Y*(te-ne))},S.r2fraction=function(Y){var ne=S.r2l(S.range[0]),te=S.r2l(S.range[1]);return(S.r2l(Y)-ne)/(te-ne)},S.cleanRange=function(Y,ne){ne||(ne={}),Y||(Y="range");var te=m.nestedProperty(S,Y).get(),K,$;if(S.type==="date"?$=m.dfltRange(S.calendar):O==="y"?$=M.DFLTRANGEY:S._name==="realaxis"?$=[0,1]:$=ne.dfltRange||M.DFLTRANGEX,$=$.slice(),(S.rangemode==="tozero"||S.rangemode==="nonnegative")&&($[0]=0),!te||te.length!==2){m.nestedProperty(S,Y).set($);return}for(S.type==="date"&&!S.autorange&&(te[0]=m.cleanDate(te[0],c,S.calendar),te[1]=m.cleanDate(te[1],c,S.calendar)),K=0;K<2;K++)if(S.type==="date"){if(!m.isDateTime(te[K],S.calendar)){S[Y]=$;break}if(S.r2l(te[0])===S.r2l(te[1])){var ae=m.constrain(S.r2l(te[0]),m.MIN_MS+1e3,m.MAX_MS-1e3);te[0]=S.l2r(ae-1e3),te[1]=S.l2r(ae+1e3);break}}else{if(!t(te[K]))if(t(te[1-K]))te[K]=te[1-K]*(K?10:.1);else{S[Y]=$;break}if(te[K]<-o?te[K]=-o:te[K]>o&&(te[K]=o),te[0]===te[1]){var ie=Math.max(1,Math.abs(te[0]*1e-6));te[0]-=ie,te[1]+=ie}}},S.setScale=function(Y){var ne=k._size;if(S.overlaying){var te=b.getFromId({_fullLayout:k},S.overlaying);S.domain=te.domain}var K=Y&&S._r?"_r":"range",$=S.calendar;S.cleanRange(K);var ae=S.r2l(S[K][0],$),ie=S.r2l(S[K][1],$),oe=O==="y";if(oe?(S._offset=ne.t+(1-S.domain[1])*ne.h,S._length=ne.h*(S.domain[1]-S.domain[0]),S._m=S._length/(ae-ie),S._b=-S._m*ie):(S._offset=ne.l+S.domain[0]*ne.w,S._length=ne.w*(S.domain[1]-S.domain[0]),S._m=S._length/(ie-ae),S._b=-S._m*ae),S._rangebreaks=[],S._lBreaks=0,S._m2=0,S._B=[],S.rangebreaks){var ue,ye;if(S._rangebreaks=S.locateBreaks(Math.min(ae,ie),Math.max(ae,ie)),S._rangebreaks.length){for(ue=0;ue<S._rangebreaks.length;ue++)ye=S._rangebreaks[ue],S._lBreaks+=Math.abs(ye.max-ye.min);var ce=oe;ae>ie&&(ce=!ce),ce&&S._rangebreaks.reverse();var me=ce?-1:1;for(S._m2=me*S._length/(Math.abs(ie-ae)-S._lBreaks),S._B.push(-S._m2*(oe?ie:ae)),ue=0;ue<S._rangebreaks.length;ue++)ye=S._rangebreaks[ue],S._B.push(S._B[S._B.length-1]-me*S._m2*(ye.max-ye.min));for(ue=0;ue<S._rangebreaks.length;ue++)ye=S._rangebreaks[ue],ye.pmin=le(ye.min),ye.pmax=le(ye.max)}}if(!isFinite(S._m)||!isFinite(S._b)||S._length<0)throw k._replotting=!1,new Error("Something went wrong with axis scaling")},S.maskBreaks=function(Y){var ne=S.rangebreaks||[],te,K,$,ae,ie;ne._cachedPatterns||(ne._cachedPatterns=ne.map(function(He){return He.enabled&&He.bounds?m.simpleMap(He.bounds,He.pattern?i:S.d2c):null})),ne._cachedValues||(ne._cachedValues=ne.map(function(He){return He.enabled&&He.values?m.simpleMap(He.values,S.d2c).sort(m.sorterAsc):null}));for(var oe=0;oe<ne.length;oe++){var ue=ne[oe];if(ue.enabled){if(ue.bounds){var ye=ue.pattern;switch(te=ne._cachedPatterns[oe],K=te[0],$=te[1],ye){case T:ie=new Date(Y),ae=ie.getUTCDay(),K>$&&($+=7,ae<K&&(ae+=7));break;case _:ie=new Date(Y);var ce=ie.getUTCHours(),me=ie.getUTCMinutes(),xe=ie.getUTCSeconds(),ke=ie.getUTCMilliseconds();ae=ce+(me/60+xe/3600+ke/36e5),K>$&&($+=24,ae<K&&(ae+=24));break;case"":ae=Y;break}if(ae>=K&&ae<$)return c}else for(var Ae=ne._cachedValues[oe],Oe=0;Oe<Ae.length;Oe++)if(K=Ae[Oe],$=K+ue.dvalue,Y>=K&&Y<$)return c}}return Y},S.locateBreaks=function(Y,ne){var te,K,$,ae,ie=[];if(!S.rangebreaks)return ie;var oe=S.rangebreaks.slice().sort(function(_e,Re){return _e.pattern===T&&Re.pattern===_?-1:Re.pattern===T&&_e.pattern===_?1:0}),ue=function(_e,Re){if(_e=m.constrain(_e,Y,ne),Re=m.constrain(Re,Y,ne),_e!==Re){for(var We=!0,qe=0;qe<ie.length;qe++){var Ue=ie[qe];_e<Ue.max&&Re>=Ue.min&&(_e<Ue.min&&(Ue.min=_e),Re>Ue.max&&(Ue.max=Re),We=!1)}We&&ie.push({min:_e,max:Re})}};for(te=0;te<oe.length;te++){var ye=oe[te];if(ye.enabled)if(ye.bounds){var ce=Y,me=ne;ye.pattern&&(ce=Math.floor(ce)),K=m.simpleMap(ye.bounds,ye.pattern?i:S.r2l),$=K[0],ae=K[1];var xe=new Date(ce),ke,Ae;switch(ye.pattern){case T:Ae=d,ke=((ae<$?7:0)+(ae-$))*p,ce+=$*p-(xe.getUTCDay()*p+xe.getUTCHours()*y+xe.getUTCMinutes()*g+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;case _:Ae=p,ke=((ae<$?24:0)+(ae-$))*y,ce+=$*y-(xe.getUTCHours()*y+xe.getUTCMinutes()*g+xe.getUTCSeconds()*A+xe.getUTCMilliseconds());break;default:ce=Math.min(K[0],K[1]),me=Math.max(K[0],K[1]),Ae=me-ce,ke=Ae}for(var Oe=ce;Oe<me;Oe+=Ae)ue(Oe,Oe+ke)}else for(var He=m.simpleMap(ye.values,S.d2c),Ge=0;Ge<He.length;Ge++)$=He[Ge],ae=$+ye.dvalue,ue($,ae)}return ie.sort(function(_e,Re){return _e.min-Re.min}),ie},S.makeCalcdata=function(Y,ne,te){var K,$,ae,ie,oe=S.type,ue=oe==="date"&&Y[ne+"calendar"];if(ne in Y){if(K=Y[ne],ie=Y._length||m.minRowLength(K),m.isTypedArray(K)&&(oe==="linear"||oe==="log")){if(ie===K.length)return K;if(K.subarray)return K.subarray(0,ie)}if(oe==="multicategory")return j(K,ie);for($=new Array(ie),ae=0;ae<ie;ae++)$[ae]=S.d2c(K[ae],0,ue,te)}else{var ye=ne+"0"in Y?S.d2c(Y[ne+"0"],0,ue):0,ce=Y["d"+ne]?Number(Y["d"+ne]):1;for(K=Y[{x:"y",y:"x"}[ne]],ie=Y._length||K.length,$=new Array(ie),ae=0;ae<ie;ae++)$[ae]=ye+ae*ce}if(S.rangebreaks)for(ae=0;ae<ie;ae++)$[ae]=S.maskBreaks($[ae]);return $},S.isValidRange=function(Y){return Array.isArray(Y)&&Y.length===2&&t(S.r2l(Y[0]))&&t(S.r2l(Y[1]))},S.isPtWithinRange=function(Y,ne){var te=S.c2l(Y[O],null,ne),K=S.r2l(S.range[0]),$=S.r2l(S.range[1]);return K<$?K<=te&&te<=$:$<=te&&te<=K},S._emptyCategories=function(){S._categories=[],S._categoriesMap={}},S.clearCalc=function(){var Y=S._matchGroup;if(Y){var ne=null,te=null;for(var K in Y){var $=k[b.id2name(K)];if($._categories){ne=$._categories,te=$._categoriesMap;break}}ne&&te?(S._categories=ne,S._categoriesMap=te):S._emptyCategories()}else S._emptyCategories();if(S._initialCategories)for(var ae=0;ae<S._initialCategories.length;ae++)B(S._initialCategories[ae])},S.sortByInitialCategories=function(){var Y=[];if(S._emptyCategories(),S._initialCategories)for(var ne=0;ne<S._initialCategories.length;ne++)B(S._initialCategories[ne]);Y=Y.concat(S._traceIndices);var te=S._matchGroup;for(var K in te)if(P!==K){var $=k[b.id2name(K)];$._categories=S._categories,$._categoriesMap=S._categoriesMap,Y=Y.concat($._traceIndices)}return Y};var H=k._d3locale;S.type==="date"&&(S._dateFormat=H?H.timeFormat:s,S._extraFormat=k._extraFormat),S._separators=k.separators,S._numFormat=H?H.numberFormat:x,delete S._minDtick,delete S._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(e,z,N){z.exports=function(s){var m=["showexponent","showtickprefix","showticksuffix"],x=m.filter(function(i){return s[i]!==void 0}),t=function(i){return s[i]===s[x[0]]};if(x.every(t)||x.length===1)return s[x[0]]}},{}],578:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color").contrast,m=e("./layout_attributes"),x=e("./show_dflt"),t=e("../array_container_defaults");z.exports=function(r,n,f,l,o){o||(o={});var c=x(r),h=f("showticklabels");if(h){var d=o.font||{},p=n.color,y=n.ticklabelposition||"",g=y.indexOf("inside")!==-1?s(o.bgColor):p&&p!==m.color.dflt?p:d.color;if(u.coerceFont(f,"tickfont",{family:d.family,size:d.size,color:g}),o.noAng||f("tickangle"),l!=="category"){var A=f("tickformat");t(r,n,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:i}),n.tickformatstops.length||delete n.tickformatstops,!o.noExp&&!A&&l!=="date"&&(f("showexponent",c),f("exponentformat"),f("minexponent"),f("separatethousands"))}}};function i(a,r){function n(l,o){return u.coerce(a,r,m.tickformatstops,l,o)}var f=n("enabled");f&&(n("dtickrange"),n("value"))}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(x,t,i,a){var r=u.coerce2(x,t,s,"ticklen"),n=u.coerce2(x,t,s,"tickwidth"),f=u.coerce2(x,t,s,"tickcolor",t.color),l=i("ticks",a.outerTicks||r||n||f?"outside":"");l||(delete t.ticklen,delete t.tickwidth,delete t.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(e,z,N){var u=e("./clean_ticks"),s=e("../../lib").isArrayOrTypedArray;z.exports=function(x,t,i,a){function r(p){var y=x[p];return y!==void 0?y:(t._template||{})[p]}var n=r("tick0"),f=r("dtick"),l=r("tickvals"),o=s(l)?"array":f?"linear":"auto",c=i("tickmode",o);if(c==="auto")i("nticks");else if(c==="linear"){var h=t.dtick=u.dtick(f,a);t.tick0=u.tick0(n,a,t.calendar,h)}else if(a!=="multicategory"){var d=i("tickvals");d===void 0?t.tickmode="auto":i("ticktext")}}},{"../../lib":503,"./clean_ticks":560}],581:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=e("../../components/drawing"),t=e("./axes");z.exports=function(a,r,n,f){var l=a._fullLayout;if(r.length===0){t.redrawComponents(a);return}function o(_){var T=_.xaxis,w=_.yaxis;l._defs.select("#"+_.clipId+"> rect").call(x.setTranslate,0,0).call(x.setScale,1,1),_.plot.call(x.setTranslate,T._offset,w._offset).call(x.setScale,1,1);var v=_.plot.selectAll(".scatterlayer .trace");v.selectAll(".point").call(x.setPointGroupScale,1,1),v.selectAll(".textpoint").call(x.setTextPointsScale,1,1),v.call(x.hideOutsideRangePoints,_)}function c(_,T){var w=_.plotinfo,v=w.xaxis,L=w.yaxis,S=v._length,k=L._length,P=!!_.xr1,O=!!_.yr1,F=[];if(P){var I=m.simpleMap(_.xr0,v.r2l),D=m.simpleMap(_.xr1,v.r2l),U=I[1]-I[0],B=D[1]-D[0];F[0]=(I[0]*(1-T)+T*D[0]-I[0])/(I[1]-I[0])*S,F[2]=S*(1-T+T*B/U),v.range[0]=v.l2r(I[0]*(1-T)+T*D[0]),v.range[1]=v.l2r(I[1]*(1-T)+T*D[1])}else F[0]=0,F[2]=S;if(O){var j=m.simpleMap(_.yr0,L.r2l),Z=m.simpleMap(_.yr1,L.r2l),ee=j[1]-j[0],q=Z[1]-Z[0];F[1]=(j[1]*(1-T)+T*Z[1]-j[1])/(j[0]-j[1])*k,F[3]=k*(1-T+T*q/ee),L.range[0]=v.l2r(j[0]*(1-T)+T*Z[0]),L.range[1]=L.l2r(j[1]*(1-T)+T*Z[1])}else F[1]=0,F[3]=k;t.drawOne(a,v,{skipTitle:!0}),t.drawOne(a,L,{skipTitle:!0}),t.redrawComponents(a,[v._id,L._id]);var W=P?S/F[2]:1,J=O?k/F[3]:1,le=P?F[0]:0,fe=O?F[1]:0,se=P?F[0]/F[2]*S:0,H=O?F[1]/F[3]*k:0,Y=v._offset-se,ne=L._offset-H;w.clipRect.call(x.setTranslate,le,fe).call(x.setScale,1/W,1/J),w.plot.call(x.setTranslate,Y,ne).call(x.setScale,W,J),x.setPointGroupScale(w.zoomScalePts,1/W,1/J),x.setTextPointsScale(w.zoomScaleTxt,1/W,1/J)}var h;f&&(h=f());function d(){for(var _={},T=0;T<r.length;T++){var w=r[T],v=w.plotinfo.xaxis,L=w.plotinfo.yaxis;w.xr1&&(_[v._name+".range"]=w.xr1.slice()),w.yr1&&(_[L._name+".range"]=w.yr1.slice())}return h&&h(),s.call("relayout",a,_).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}function p(){for(var _={},T=0;T<r.length;T++){var w=r[T],v=w.plotinfo.xaxis,L=w.plotinfo.yaxis;w.xr0&&(_[v._name+".range"]=w.xr0.slice()),w.yr0&&(_[L._name+".range"]=w.yr0.slice())}return s.call("relayout",a,_).then(function(){for(var S=0;S<r.length;S++)o(r[S].plotinfo)})}var y,g,A,b=u.ease(n.easing);a._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(A),A=null,p()});function M(){g=Date.now();for(var _=Math.min(1,(g-y)/n.duration),T=b(_),w=0;w<r.length;w++)c(r[w],T);g-y>n.duration?(d(),A=window.cancelAnimationFrame(M)):A=window.requestAnimationFrame(M)}return y=Date.now(),A=window.requestAnimationFrame(M),Promise.resolve()}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(e,z,N){var u=e("../../registry").traceIs,s=e("./axis_autotype");z.exports=function(r,n,f,l){f("autotypenumbers",l.autotypenumbersDflt);var o=f("type",(l.splomStash||{}).type);o==="-"&&(m(n,l.data),n.type==="-"?n.type="linear":r.type=n.type)};function m(a,r){if(a.type==="-"){var n=a._id,f=n.charAt(0),l;n.indexOf("scene")!==-1&&(n=f);var o=x(r,n,f);if(!!o){if(o.type==="histogram"&&f==={v:"y",h:"x"}[o.orientation||"v"]){a.type="linear";return}var c=f+"calendar",h=o[c],d={noMultiCategory:!u(o,"cartesian")||u(o,"noMultiCategory")};if(o.type==="box"&&o._hasPreCompStats&&f==={h:"x",v:"y"}[o.orientation||"v"]&&(d.noMultiCategory=!0),d.autotypenumbers=a.autotypenumbers,i(o,f)){var p=t(o),y=[];for(l=0;l<r.length;l++){var g=r[l];!u(g,"box-violin")||(g[f+"axis"]||f)!==n||(g[p]!==void 0?y.push(g[p][0]):g.name!==void 0?y.push(g.name):y.push("text"),g[c]!==h&&(h=void 0))}a.type=s(y,h,d)}else if(o.type==="splom"){var A=o.dimensions,b=A[o._axesDim[n]];b.visible&&(a.type=s(b.values,h,d))}else a.type=s(o[f]||[o[f+"0"]],h,d)}}}function x(a,r,n){for(var f=0;f<a.length;f++){var l=a[f];if(l.type==="splom"&&l._length>0&&(l["_"+n+"axes"]||{})[r])return l;if((l[n+"axis"]||n)===r){if(i(l,n))return l;if((l[n]||[]).length||l[n+"0"])return l}}}function t(a){return{v:"x",h:"y"}[a.orientation||"v"]}function i(a,r){var n=t(a),f=u(a,"box-violin"),l=u(a._fullInput||{},"candlestick");return f&&!l&&r===n&&a[n]===void 0&&a[n+"0"]===void 0}},{"../../registry":638,"./axis_autotype":555}],583:[function(e,z,N){var u=e("../registry"),s=e("../lib");N.manageCommandObserver=function(r,n,f,l){var o={},c=!0;n&&n._commandObserver&&(o=n._commandObserver),o.cache||(o.cache={}),o.lookupTable={};var h=N.hasSimpleAPICommandBindings(r,f,o.lookupTable);if(n&&n._commandObserver){if(h)return o;if(n._commandObserver.remove)return n._commandObserver.remove(),n._commandObserver=null,o}if(h){m(r,h,o.cache),o.check=function(){if(!!c){var g=m(r,h,o.cache);return g.changed&&l&&o.lookupTable[g.value]!==void 0&&(o.disable(),Promise.resolve(l({value:g.value,type:h.type,prop:h.prop,traces:h.traces,index:o.lookupTable[g.value]})).then(o.enable,o.enable)),g.changed}};for(var d=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<d.length;p++)r._internalOn(d[p],o.check);o.remove=function(){for(var y=0;y<d.length;y++)r._removeInternalListener(d[y],o.check)}}else s.log("Unable to automatically bind plot updates to API command"),o.lookupTable={},o.remove=function(){};return o.disable=function(){c=!1},o.enable=function(){c=!0},n&&(n._commandObserver=o),o},N.hasSimpleAPICommandBindings=function(r,n,f){var l,o=n.length,c;for(l=0;l<o;l++){var h,d=n[l],p=d.method,y=d.args;if(Array.isArray(y)||(y=[]),!p)return!1;var g=N.computeAPICommandBindings(r,p,y);if(g.length!==1)return!1;if(!c)c=g[0],Array.isArray(c.traces)&&c.traces.sort();else{if(h=g[0],h.type!==c.type||h.prop!==c.prop)return!1;if(Array.isArray(c.traces))if(Array.isArray(h.traces)){h.traces.sort();for(var A=0;A<c.traces.length;A++)if(c.traces[A]!==h.traces[A])return!1}else return!1;else if(h.prop!==c.prop)return!1}h=g[0];var b=h.value;if(Array.isArray(b))if(b.length===1)b=b[0];else return!1;f&&(f[b]=l)}return c};function m(r,n,f){var l,o,c,h=!1;if(n.type==="data")l=r._fullData[n.traces!==null?n.traces[0]:0];else if(n.type==="layout")l=r._fullLayout;else return!1;return o=s.nestedProperty(l,n.prop).get(),c=f[n.type]=f[n.type]||{},c.hasOwnProperty(n.prop)&&c[n.prop]!==o&&(h=!0),c[n.prop]=o,{changed:h,value:o}}N.executeAPICommand=function(r,n,f){if(n==="skip")return Promise.resolve();var l=u.apiMethodRegistry[n],o=[r];Array.isArray(f)||(f=[]);for(var c=0;c<f.length;c++)o.push(f[c]);return l.apply(null,o).catch(function(h){return s.warn("API call to Plotly."+n+" rejected.",h),Promise.reject(h)})},N.computeAPICommandBindings=function(r,n,f){var l;switch(Array.isArray(f)||(f=[]),n){case"restyle":l=i(r,f);break;case"relayout":l=t(r,f);break;case"update":l=i(r,[f[0],f[2]]).concat(t(r,[f[1]]));break;case"animate":l=x(r,f);break;default:l=[]}return l};function x(r,n){return Array.isArray(n[0])&&n[0].length===1&&["string","number"].indexOf(typeof n[0][0])!==-1?[{type:"layout",prop:"_currentFrame",value:n[0][0].toString()}]:[]}function t(r,n){var f=[],l=n[0],o={};if(typeof l=="string")o[l]=n[1];else if(s.isPlainObject(l))o=l;else return f;return a(o,function(c,h,d){f.push({type:"layout",prop:c,value:d})},"",0),f}function i(r,n){var f,l,o,c,h=[];if(l=n[0],o=n[1],f=n[2],c={},typeof l=="string")c[l]=o;else if(s.isPlainObject(l))c=l,f===void 0&&(f=o);else return h;return f===void 0&&(f=null),a(c,function(d,p,y){var g,A;if(Array.isArray(y)){A=y.slice();var b=Math.min(A.length,r.data.length);f&&(b=Math.min(b,f.length)),g=[];for(var M=0;M<b;M++)g[M]=f?f[M]:M}else A=y,g=f?f.slice():null;if(g===null)Array.isArray(A)&&(A=A[0]);else if(Array.isArray(g)){if(!Array.isArray(A)){var _=A;A=[];for(var T=0;T<g.length;T++)A[T]=_}A.length=Math.min(g.length,A.length)}h.push({type:"data",prop:d,traces:g,value:A})},"",0),h}function a(r,n,f,l){Object.keys(r).forEach(function(o){var c=r[o];if(o[0]!=="_"){var h=f+(l>0?".":"")+o;s.isPlainObject(c)?a(c,n,h,l+1):n(h,o,c)}})}},{"../lib":503,"../registry":638}],584:[function(e,z,N){var u=e("../lib/extend").extendFlat;N.attributes=function(s,m){s=s||{},m=m||{};var x={valType:"info_array",editType:s.editType,items:[{valType:"number",min:0,max:1,editType:s.editType},{valType:"number",min:0,max:1,editType:s.editType}],dflt:[0,1]};s.name&&s.name+"",s.trace,m.description&&""+m.description;var t={x:u({},x,{}),y:u({},x,{}),editType:s.editType};return s.noGridCell||(t.row={valType:"integer",min:0,dflt:0,editType:s.editType},t.column={valType:"integer",min:0,dflt:0,editType:s.editType}),t},N.defaults=function(s,m,x,t){var i=t&&t.x||[0,1],a=t&&t.y||[0,1],r=m.grid;if(r){var n=x("domain.column");n!==void 0&&(n<r.columns?i=r._domains.x[n]:delete s.domain.column);var f=x("domain.row");f!==void 0&&(f<r.rows?a=r._domains.y[f]:delete s.domain.row)}var l=x("domain.x",i),o=x("domain.y",a);l[0]<l[1]||(s.domain.x=i.slice()),o[0]<o[1]||(s.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(e,z,N){z.exports=function(u){var s=u.editType,m=u.colorEditType;m===void 0&&(m=s);var x={family:{valType:"string",noBlank:!0,strict:!0,editType:s},size:{valType:"number",min:1,editType:s},color:{valType:"color",editType:m},editType:s};return u.autoSize&&(x.size.dflt="auto"),u.autoColor&&(x.color.dflt="auto"),u.arrayOk&&(x.family.arrayOk=!0,x.size.arrayOk=!0,x.color.arrayOk=!0),x}},{}],586:[function(e,z,N){z.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(e,z,N){N.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},N.axesNames=["lonaxis","lataxis"],N.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},N.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},N.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},N.clipPad=.001,N.precision=.1,N.landColor="#F0DC82",N.waterColor="#3399FF",N.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},N.sphereSVG={type:"Sphere"},N.fillLayers={ocean:1,land:1,lakes:1},N.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},N.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],N.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],N.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-geo"),m=s.geoPath,x=s.geoDistance,t=e("d3-geo-projection"),i=e("../../registry"),a=e("../../lib"),r=a.strTranslate,n=e("../../components/color"),f=e("../../components/drawing"),l=e("../../components/fx"),o=e("../plots"),c=e("../cartesian/axes"),h=e("../cartesian/autorange").getAutoRange,d=e("../../components/dragelement"),p=e("../cartesian/select").prepSelect,y=e("../cartesian/select").clearSelect,g=e("../cartesian/select").selectOnClick,A=e("./zoom"),b=e("./constants"),M=e("../../lib/geo_location_utils"),_=e("../../lib/topojson_utils"),T=e("topojson-client").feature;function w(P){this.id=P.id,this.graphDiv=P.graphDiv,this.container=P.container,this.topojsonURL=P.topojsonURL,this.isStatic=P.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var v=w.prototype;z.exports=function(O){return new w(O)},v.plot=function(P,O,F){var I=this,D=O[this.id],U=[],B=!1;for(var j in b.layerNameToAdjective)if(j!=="frame"&&D["show"+j]){B=!0;break}for(var Z=0;Z<P.length;Z++)if(P[0][0].trace.locationmode){B=!0;break}if(B){var ee=_.getTopojsonName(D);(I.topojson===null||ee!==I.topojsonName)&&(I.topojsonName=ee,PlotlyGeoAssets.topojson[I.topojsonName]===void 0&&U.push(I.fetchTopojson()))}U=U.concat(M.fetchTraceGeoData(P)),F.push(new Promise(function(q,W){Promise.all(U).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(P,O),q()}).catch(W)}))},v.fetchTopojson=function(){var P=this,O=_.getTopojsonPath(P.topojsonURL,P.topojsonName);return new Promise(function(F,I){u.json(O,function(D,U){if(D)return D.status===404?I(new Error(["plotly.js could not find topojson file at",O,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" "))):I(new Error(["unexpected error while fetching topojson file at",O].join(" ")));PlotlyGeoAssets.topojson[P.topojsonName]=U,F()})})},v.update=function(P,O){var F=O[this.id];this.hasChoropleth=!1;for(var I=0;I<P.length;I++){var D=P[I],U=D[0].trace;U.type==="choropleth"&&(this.hasChoropleth=!0),U.visible===!0&&U._length>0&&U._module.calcGeoJSON(D,O)}var B=this.updateProjection(P,O);if(!B){(!this.viewInitial||this.scope!==F.scope)&&this.saveViewInitial(F),this.scope=F.scope,this.updateBaseLayers(O,F),this.updateDims(O,F),this.updateFx(O,F),o.generalUpdatePerTraceModule(this.graphDiv,this,P,F);var j=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=j.selectAll(".point"),this.dataPoints.text=j.selectAll("text"),this.dataPaths.line=j.selectAll(".js-line");var Z=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Z.selectAll("path"),this.render()}},v.updateProjection=function(P,O){var F=this.graphDiv,I=O[this.id],D=O._size,U=I.domain,B=I.projection,j=I.lonaxis,Z=I.lataxis,ee=j._ax,q=Z._ax,W=this.projection=L(I),J=[[D.l+D.w*U.x[0],D.t+D.h*(1-U.y[1])],[D.l+D.w*U.x[1],D.t+D.h*(1-U.y[0])]],le=I.center||{},fe=B.rotation||{},se=j.range||[],H=Z.range||[];if(I.fitbounds){ee._length=J[1][0]-J[0][0],q._length=J[1][1]-J[0][1],ee.range=h(F,ee),q.range=h(F,q);var Y=(ee.range[0]+ee.range[1])/2,ne=(q.range[0]+q.range[1])/2;if(I._isScoped)le={lon:Y,lat:ne};else if(I._isClipped){le={lon:Y,lat:ne},fe={lon:Y,lat:ne,roll:fe.roll};var te=B.type,K=b.lonaxisSpan[te]/2||180,$=b.lataxisSpan[te]/2||90;se=[Y-K,Y+K],H=[ne-$,ne+$]}else le={lon:Y,lat:ne},fe={lon:Y,lat:fe.lat,roll:fe.roll}}W.center([le.lon-fe.lon,le.lat-fe.lat]).rotate([-fe.lon,-fe.lat,fe.roll]).parallels(B.parallels);var ae=k(se,H);W.fitExtent(J,ae);var ie=this.bounds=W.getBounds(ae),oe=this.fitScale=W.scale(),ue=W.translate();if(I.fitbounds){var ye=W.getBounds(k(ee.range,q.range)),ce=Math.min((ie[1][0]-ie[0][0])/(ye[1][0]-ye[0][0]),(ie[1][1]-ie[0][1])/(ye[1][1]-ye[0][1]));isFinite(ce)?W.scale(ce*oe):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else W.scale(B.scale*oe);var me=this.midPt=[(ie[0][0]+ie[1][0])/2,(ie[0][1]+ie[1][1])/2];if(W.translate([ue[0]+(me[0]-ue[0]),ue[1]+(me[1]-ue[1])]).clipExtent(ie),I._isAlbersUsa){var xe=W([le.lon,le.lat]),ke=W.translate();W.translate([ke[0]-(xe[0]-ke[0]),ke[1]-(xe[1]-ke[1])])}},v.updateBaseLayers=function(P,O){var F=this,I=F.topojson,D=F.layers,U=F.basePaths;function B(J){return J==="lonaxis"||J==="lataxis"}function j(J){return Boolean(b.lineLayers[J])}function Z(J){return Boolean(b.fillLayers[J])}var ee=this.hasChoropleth?b.layersForChoropleth:b.layers,q=ee.filter(function(J){return j(J)||Z(J)?O["show"+J]:B(J)?O[J].showgrid:!0}),W=F.framework.selectAll(".layer").data(q,String);W.exit().each(function(J){delete D[J],delete U[J],u.select(this).remove()}),W.enter().append("g").attr("class",function(J){return"layer "+J}).each(function(J){var le=D[J]=u.select(this);J==="bg"?F.bgRect=le.append("rect").style("pointer-events","all"):B(J)?U[J]=le.append("path").style("fill","none"):J==="backplot"?le.append("g").classed("choroplethlayer",!0):J==="frontplot"?le.append("g").classed("scatterlayer",!0):j(J)?U[J]=le.append("path").style("fill","none").style("stroke-miterlimit",2):Z(J)&&(U[J]=le.append("path").style("stroke","none"))}),W.order(),W.each(function(J){var le=U[J],fe=b.layerNameToAdjective[J];J==="frame"?le.datum(b.sphereSVG):j(J)||Z(J)?le.datum(T(I,I.objects[J])):B(J)&&le.datum(S(J,O,P)).call(n.stroke,O[J].gridcolor).call(f.dashLine,"",O[J].gridwidth),j(J)?le.call(n.stroke,O[fe+"color"]).call(f.dashLine,"",O[fe+"width"]):Z(J)&&le.call(n.fill,O[fe+"color"])})},v.updateDims=function(P,O){var F=this.bounds,I=(O.framewidth||0)/2,D=F[0][0]-I,U=F[0][1]-I,B=F[1][0]-D+I,j=F[1][1]-U+I;f.setRect(this.clipRect,D,U,B,j),this.bgRect.call(f.setRect,D,U,B,j).call(n.fill,O.bgcolor),this.xaxis._offset=D,this.xaxis._length=B,this.yaxis._offset=U,this.yaxis._length=j},v.updateFx=function(P,O){var F=this,I=F.graphDiv,D=F.bgRect,U=P.dragmode,B=P.clickmode;if(F.isStatic)return;function j(){var W=F.viewInitial,J={};for(var le in W)J[F.id+"."+le]=W[le];i.call("_guiRelayout",I,J),I.emit("plotly_doubleclick",null)}function Z(W){return F.projection.invert([W[0]+F.xaxis._offset,W[1]+F.yaxis._offset])}var ee;U==="select"?ee=function(W,J){var le=W.range={};le[F.id]=[Z([J.xmin,J.ymin]),Z([J.xmax,J.ymax])]}:U==="lasso"&&(ee=function(W,J,le){var fe=W.lassoPoints={};fe[F.id]=le.filtered.map(Z)});var q={element:F.bgRect.node(),gd:I,plotinfo:{id:F.id,xaxis:F.xaxis,yaxis:F.yaxis,fillRangeItems:ee},xaxes:[F.xaxis],yaxes:[F.yaxis],subplot:F.id,clickFn:function(W){W===2&&y(I)}};U==="pan"?(D.node().onmousedown=null,D.call(A(F,O)),D.on("dblclick.zoom",j),I._context._scrollZoom.geo||D.on("wheel.zoom",null)):(U==="select"||U==="lasso")&&(D.on(".zoom",null),q.prepFn=function(W,J,le){p(W,J,le,q,U)},d.init(q)),D.on("mousemove",function(){var W=F.projection.invert(a.getPositionFromD3Event());if(!W)return d.unhover(I,u.event);F.xaxis.p2c=function(){return W[0]},F.yaxis.p2c=function(){return W[1]},l.hover(I,u.event,F.id)}),D.on("mouseout",function(){I._dragging||d.unhover(I,u.event)}),D.on("click",function(){U!=="select"&&U!=="lasso"&&(B.indexOf("select")>-1&&g(u.event,I,[F.xaxis],[F.yaxis],F.id,q),B.indexOf("event")>-1&&l.click(I,u.event))})},v.makeFramework=function(){var P=this,O=P.graphDiv,F=O._fullLayout,I="clip"+F._uid+P.id;P.clipDef=F._clips.append("clipPath").attr("id",I),P.clipRect=P.clipDef.append("rect"),P.framework=u.select(P.container).append("g").attr("class","geo "+P.id).call(f.setClipUrl,I,O),P.project=function(D){var U=P.projection(D);return U?[U[0]-P.xaxis._offset,U[1]-P.yaxis._offset]:[null,null]},P.xaxis={_id:"x",c2p:function(D){return P.project(D)[0]}},P.yaxis={_id:"y",c2p:function(D){return P.project(D)[1]}},P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(P.mockAxis,F)},v.saveViewInitial=function(P){var O=P.center||{},F=P.projection,I=F.rotation||{};this.viewInitial={fitbounds:P.fitbounds,"projection.scale":F.scale};var D;P._isScoped?D={"center.lon":O.lon,"center.lat":O.lat}:P._isClipped?D={"projection.rotation.lon":I.lon,"projection.rotation.lat":I.lat}:D={"center.lon":O.lon,"center.lat":O.lat,"projection.rotation.lon":I.lon},a.extendFlat(this.viewInitial,D)},v.render=function(){var P=this.projection,O=P.getPath(),F;function I(U){var B=P(U.lonlat);return B?r(B[0],B[1]):null}function D(U){return P.isLonLatOverEdges(U.lonlat)?"none":null}for(F in this.basePaths)this.basePaths[F].attr("d",O);for(F in this.dataPaths)this.dataPaths[F].attr("d",function(U){return O(U.geojson)});for(F in this.dataPoints)this.dataPoints[F].attr("display",D).attr("transform",I)};function L(P){var O=P.projection,F=O.type,I=b.projNames[F];I="geo"+a.titleCase(I);for(var D=s[I]||t[I],U=D(),B=P._isSatellite?Math.acos(1/O.distance)*180/Math.PI:P._isClipped?b.lonaxisSpan[F]/2:null,j=["center","rotate","parallels","clipExtent"],Z=function(W){return W?U:[]},ee=0;ee<j.length;ee++){var q=j[ee];typeof U[q]!="function"&&(U[q]=Z)}return U.isLonLatOverEdges=function(W){if(U(W)===null)return!0;if(B){var J=U.rotate(),le=x(W,[-J[0],-J[1]]),fe=B*Math.PI/180;return le>fe}else return!1},U.getPath=function(){return m().projection(U)},U.getBounds=function(W){return U.getPath().bounds(W)},U.precision(b.precision),P._isSatellite&&U.tilt(O.tilt).distance(O.distance),B&&U.clipAngle(B-b.clipPad),U}function S(P,O,F){var I=1e-6,D=2.5,U=O[P],B=b.scopeDefaults[O.scope],j,Z,ee;P==="lonaxis"?(j=B.lonaxisRange,Z=B.lataxisRange,ee=function(ne,te){return[ne,te]}):P==="lataxis"&&(j=B.lataxisRange,Z=B.lonaxisRange,ee=function(ne,te){return[te,ne]});var q={type:"linear",range:[j[0],j[1]-I],tick0:U.tick0,dtick:U.dtick};c.setConvert(q,F);var W=c.calcTicks(q);!O.isScoped&&P==="lonaxis"&&W.pop();for(var J=W.length,le=new Array(J),fe=0;fe<J;fe++)for(var se=W[fe].x,H=le[fe]=[],Y=Z[0];Y<Z[1]+D;Y+=D)H.push(ee(se,Y));return{type:"MultiLineString",coordinates:le}}function k(P,O){var F=b.clipPad,I=P[0]+F,D=P[1]-F,U=O[0]+F,B=O[1]-F;I>0&&D<0&&(D+=360);var j=(D-I)/4;return{type:"Polygon",coordinates:[[[I,U],[I,B],[I+j,B],[I+2*j,B],[I+3*j,B],[D,B],[D,U],[D-j,U],[D-2*j,U],[D-3*j,U],[I,U]]]}}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(e,z,N){var u=e("../../plots/get_data").getSubplotCalcData,s=e("../../lib").counterRegex,m=e("./geo"),x="geo",t=s(x),i={};i[x]={valType:"subplotid",dflt:x,editType:"calc"};function a(f){for(var l=f._fullLayout,o=f.calcdata,c=l._subplots[x],h=0;h<c.length;h++){var d=c[h],p=u(o,x,d),y=l[d],g=y._subplot;g||(g=m({id:d,graphDiv:f,container:l._geolayer.node(),topojsonURL:f._context.topojsonURL,staticPlot:f._context.staticPlot}),l[d]._subplot=g),g.plot(p,l,f._promises)}}function r(f,l,o,c){for(var h=c._subplots[x]||[],d=0;d<h.length;d++){var p=h[d],y=c[p]._subplot;!l[p]&&!!y&&(y.framework.remove(),y.clipDef.remove())}}function n(f){for(var l=f._fullLayout,o=l._subplots[x],c=0;c<o.length;c++){var h=l[o[c]],d=h._subplot;d.updateFx(l,h)}}z.exports={attr:x,name:x,idRoot:x,idRegex:t,attrRegex:t,attributes:i,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:a,updateFx:n,clean:r}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(e,z,N){var u=e("../../components/color/attributes"),s=e("../domain").attributes,m=e("./constants"),x=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/sort_object_keys"),i={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:u.lightLine},gridwidth:{valType:"number",min:0,dflt:1}},a=z.exports=x({domain:s({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:t(m.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:t(m.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:u.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:m.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:m.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:m.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:m.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:u.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:u.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:u.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:u.background},lonaxis:i,lataxis:i},"plot","from-root");a.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(e,z,N){var u=e("../../lib"),s=e("../subplot_defaults"),m=e("../get_data").getSubplotData,x=e("./constants"),t=e("./layout_attributes"),i=x.axesNames;z.exports=function(n,f,l){s(n,f,l,{type:"geo",attributes:t,handleDefaults:a,fullData:l,partition:"y"})};function a(r,n,f,l){var o=m(l.fullData,"geo",l.id),c=o.map(function(H){return H._expandedIndex}),h=f("resolution"),d=f("scope"),p=x.scopeDefaults[d],y=f("projection.type",p.projType),g=n._isAlbersUsa=y==="albers usa";g&&(d=n.scope="usa");var A=n._isScoped=d!=="world",b=n._isSatellite=y==="satellite",M=n._isConic=y.indexOf("conic")!==-1||y==="albers",_=n._isClipped=!!x.lonaxisSpan[y];if(r.visible===!1){var T=u.extendDeep({},n._template);T.showcoastlines=!1,T.showcountries=!1,T.showframe=!1,T.showlakes=!1,T.showland=!1,T.showocean=!1,T.showrivers=!1,T.showsubunits=!1,T.lonaxis&&(T.lonaxis.showgrid=!1),T.lataxis&&(T.lataxis.showgrid=!1),n._template=T}for(var w=f("visible"),v,L=0;L<i.length;L++){var S=i[L],k=[30,10][L],P;if(A)P=p[S+"Range"];else{var O=x[S+"Span"],F=(O[y]||O["*"])/2,I=f("projection.rotation."+S.substr(0,3),p.projRotate[L]);P=[I-F,I+F]}var D=f(S+".range",P);f(S+".tick0"),f(S+".dtick",k),v=f(S+".showgrid",w?void 0:!1),v&&(f(S+".gridcolor"),f(S+".gridwidth")),n[S]._ax={type:"linear",_id:S.slice(0,3),_traceIndices:c,setScale:u.identity,c2l:u.identity,r2l:u.identity,autorange:!0,range:D.slice(),_m:1,_input:{}}}var U=n.lonaxis.range,B=n.lataxis.range,j=U[0],Z=U[1];j>0&&Z<0&&(Z+=360);var ee=(j+Z)/2,q;if(!g){var W=A?p.projRotate:[ee,0,0];q=f("projection.rotation.lon",W[0]),f("projection.rotation.lat",W[1]),f("projection.rotation.roll",W[2]),v=f("showcoastlines",!A&&w),v&&(f("coastlinecolor"),f("coastlinewidth")),v=f("showocean",w?void 0:!1),v&&f("oceancolor")}var J,le;if(g?(J=-96.6,le=38.7):(J=A?ee:q,le=(B[0]+B[1])/2),f("center.lon",J),f("center.lat",le),b&&(f("projection.tilt"),f("projection.distance")),M){var fe=p.projParallels||[0,60];f("projection.parallels",fe)}f("projection.scale"),v=f("showland",w?void 0:!1),v&&f("landcolor"),v=f("showlakes",w?void 0:!1),v&&f("lakecolor"),v=f("showrivers",w?void 0:!1),v&&(f("rivercolor"),f("riverwidth")),v=f("showcountries",A&&d!=="usa"&&w),v&&(f("countrycolor"),f("countrywidth")),(d==="usa"||d==="north america"&&h===50)&&(f("showsubunits",w),f("subunitcolor"),f("subunitwidth")),A||(v=f("showframe",w),v&&(f("framecolor"),f("framewidth"))),f("bgcolor");var se=f("fitbounds");se&&(delete n.projection.scale,A?(delete n.center.lon,delete n.center.lat):_?(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon,delete n.projection.rotation.lat,delete n.lonaxis.range,delete n.lataxis.range):(delete n.center.lon,delete n.center.lat,delete n.projection.rotation.lon))}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../registry"),x=Math.PI/180,t=180/Math.PI,i={cursor:"pointer"},a={cursor:"auto"};function r(S,k){var P=S.projection,O;return k._isScoped?O=l:k._isClipped?O=c:O=o,O(S,P)}z.exports=r;function n(S,k){return u.behavior.zoom().translate(k.translate()).scale(k.scale())}function f(S,k,P){var O=S.id,F=S.graphDiv,I=F.layout,D=I[O],U=F._fullLayout,B=U[O],j={},Z={};function ee(q,W){j[O+"."+q]=s.nestedProperty(D,q).get(),m.call("_storeDirectGUIEdit",I,U._preGUI,j);var J=s.nestedProperty(B,q);J.get()!==W&&(J.set(W),s.nestedProperty(D,q).set(W),Z[O+"."+q]=W)}P(ee),ee("projection.scale",k.scale()/S.fitScale),ee("fitbounds",!1),F.emit("plotly_relayout",Z)}function l(S,k){var P=n(S,k);function O(){u.select(this).style(i)}function F(){k.scale(u.event.scale).translate(u.event.translate),S.render();var U=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":U[0],"geo.center.lat":U[1]})}function I(U){var B=k.invert(S.midPt);U("center.lon",B[0]),U("center.lat",B[1])}function D(){u.select(this).style(a),f(S,k,I)}return P.on("zoomstart",O).on("zoom",F).on("zoomend",D),P}function o(S,k){var P=n(S,k),O=2,F,I,D,U,B,j,Z,ee,q;function W(Y){return k.invert(Y)}function J(Y){var ne=W(Y);if(!ne)return!0;var te=k(ne);return Math.abs(te[0]-Y[0])>O||Math.abs(te[1]-Y[1])>O}function le(){u.select(this).style(i),F=u.mouse(this),I=k.rotate(),D=k.translate(),U=I,B=W(F)}function fe(){if(j=u.mouse(this),J(F)){P.scale(k.scale()),P.translate(k.translate());return}k.scale(u.event.scale),k.translate([D[0],u.event.translate[1]]),B?W(j)&&(ee=W(j),Z=[U[0]+(ee[0]-B[0]),I[1],I[2]],k.rotate(Z),U=Z):(F=j,B=W(F)),q=!0,S.render();var Y=k.rotate(),ne=k.invert(S.midPt);S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.center.lon":ne[0],"geo.center.lat":ne[1],"geo.projection.rotation.lon":-Y[0]})}function se(){u.select(this).style(a),q&&f(S,k,H)}function H(Y){var ne=k.rotate(),te=k.invert(S.midPt);Y("projection.rotation.lon",-ne[0]),Y("center.lon",te[0]),Y("center.lat",te[1])}return P.on("zoomstart",le).on("zoom",fe).on("zoomend",se),P}function c(S,k){k.rotate(),k.scale();var P=n(S,k),O=L(P,"zoomstart","zoom","zoomend"),F=0,I=P.on,D;P.on("zoomstart",function(){u.select(this).style(i);var ee=u.mouse(this),q=k.rotate(),W=q,J=k.translate(),le=d(q);D=h(k,ee),I.call(P,"zoom",function(){var fe=u.mouse(this);if(k.scale(u.event.scale),!D)ee=fe,D=h(k,ee);else if(h(k,fe)){k.rotate(q).translate(J);var se=h(k,fe),H=y(D,se),Y=_(p(le,H)),ne=g(Y,D,W);(!isFinite(ne[0])||!isFinite(ne[1])||!isFinite(ne[2]))&&(ne=W),k.rotate(ne),W=ne}B(O.of(this,arguments))}),U(O.of(this,arguments))}).on("zoomend",function(){u.select(this).style(a),I.call(P,"zoom",null),j(O.of(this,arguments)),f(S,k,Z)}).on("zoom.redraw",function(){S.render();var ee=k.rotate();S.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":k.scale()/S.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})});function U(ee){F++||ee({type:"zoomstart"})}function B(ee){ee({type:"zoom"})}function j(ee){--F||ee({type:"zoomend"})}function Z(ee){var q=k.rotate();ee("projection.rotation.lon",-q[0]),ee("projection.rotation.lat",-q[1])}return u.rebind(P,O,"on")}function h(S,k){var P=S.invert(k);return P&&isFinite(P[0])&&isFinite(P[1])&&T(P)}function d(S){var k=.5*S[0]*x,P=.5*S[1]*x,O=.5*S[2]*x,F=Math.sin(k),I=Math.cos(k),D=Math.sin(P),U=Math.cos(P),B=Math.sin(O),j=Math.cos(O);return[I*U*j+F*D*B,F*U*j-I*D*B,I*D*j+F*U*B,I*U*B-F*D*j]}function p(S,k){var P=S[0],O=S[1],F=S[2],I=S[3],D=k[0],U=k[1],B=k[2],j=k[3];return[P*D-O*U-F*B-I*j,P*U+O*D+F*j-I*B,P*B-O*j+F*D+I*U,P*j+O*B-F*U+I*D]}function y(S,k){if(!(!S||!k)){var P=v(S,k),O=Math.sqrt(w(P,P)),F=.5*Math.acos(Math.max(-1,Math.min(1,w(S,k)))),I=Math.sin(F)/O;return O&&[Math.cos(F),P[2]*I,-P[1]*I,P[0]*I]}}function g(S,k,P){var O=M(k,2,S[0]);O=M(O,1,S[1]),O=M(O,0,S[2]-P[2]);var F=k[0],I=k[1],D=k[2],U=O[0],B=O[1],j=O[2],Z=Math.atan2(I,F)*t,ee=Math.sqrt(F*F+I*I),q,W;Math.abs(B)>ee?(W=(B>0?90:-90)-Z,q=0):(W=Math.asin(B/ee)*t-Z,q=Math.sqrt(ee*ee-B*B));var J=180-W-2*Z,le=(Math.atan2(j,U)-Math.atan2(D,q))*t,fe=(Math.atan2(j,U)-Math.atan2(D,-q))*t,se=A(P[0],P[1],W,le),H=A(P[0],P[1],J,fe);return se<=H?[W,le,P[2]]:[J,fe,P[2]]}function A(S,k,P,O){var F=b(P-S),I=b(O-k);return Math.sqrt(F*F+I*I)}function b(S){return(S%360+540)%360-180}function M(S,k,P){var O=P*x,F=S.slice(),I=k===0?1:0,D=k===2?1:2,U=Math.cos(O),B=Math.sin(O);return F[I]=S[I]*U-S[D]*B,F[D]=S[D]*U+S[I]*B,F}function _(S){return[Math.atan2(2*(S[0]*S[1]+S[2]*S[3]),1-2*(S[1]*S[1]+S[2]*S[2]))*t,Math.asin(Math.max(-1,Math.min(1,2*(S[0]*S[2]-S[3]*S[1]))))*t,Math.atan2(2*(S[0]*S[3]+S[1]*S[2]),1-2*(S[2]*S[2]+S[3]*S[3]))*t]}function T(S){var k=S[0]*x,P=S[1]*x,O=Math.cos(P);return[O*Math.cos(k),O*Math.sin(k),Math.sin(P)]}function w(S,k){for(var P=0,O=0,F=S.length;O<F;++O)P+=S[O]*k[O];return P}function v(S,k){return[S[1]*k[2]-S[2]*k[1],S[2]*k[0]-S[0]*k[2],S[0]*k[1]-S[1]*k[0]]}function L(S){for(var k=0,P=arguments.length,O=[];++k<P;)O.push(arguments[k]);var F=u.dispatch.apply(null,O);return F.of=function(I,D){return function(U){var B;try{B=U.sourceEvent=u.event,U.target=S,u.event=U,F[U.type].apply(I,D)}finally{u.event=B}}},F}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(e,z,N){var u=e("../registry"),s=e("./cartesian/constants").SUBPLOT_PATTERN;N.getSubplotCalcData=function(m,x,t){var i=u.subplotsRegistry[x];if(!i)return[];for(var a=i.attr,r=[],n=0;n<m.length;n++){var f=m[n],l=f[0].trace;l[a]===t&&r.push(f)}return r},N.getModuleCalcData=function(m,x){var t=[],i=[],a;if(typeof x=="string"?a=u.getModule(x).plot:typeof x=="function"?a=x:a=x.plot,!a)return[t,m];for(var r=0;r<m.length;r++){var n=m[r],f=n[0].trace;f.visible!==!0||f._length===0||(f._module.plot===a?t.push(n):i.push(n))}return[t,i]},N.getSubplotData=function(x,t,i){if(!u.subplotsRegistry[t])return[];var a=u.subplotsRegistry[t].attr,r=[],n,f,l;if(t==="gl2d"){var o=i.match(s);f="x"+o[1],l="y"+o[2]}for(var c=0;c<x.length;c++)n=x[c],t==="gl2d"&&u.traceIs(n,"gl2d")?n[a[0]]===f&&n[a[1]]===l&&r.push(n):n[a]===i&&r.push(n);return r}},{"../registry":638,"./cartesian/constants":561}],594:[function(e,z,N){var u=e("mouse-change"),s=e("mouse-wheel"),m=e("mouse-event-offset"),x=e("../cartesian/constants"),t=e("has-passive-events");z.exports=a;function i(r,n){this.element=r,this.plot=n,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}function a(r){var n=r.mouseContainer,f=r.glplot,l=new i(n,f);function o(){r.xaxis.autorange=!1,r.yaxis.autorange=!1}function c(){for(var d=r.graphDiv._fullLayout._axisConstraintGroups,p=r.xaxis._id,y=r.yaxis._id,g=0;g<d.length;g++)if(d[g][p]!==-1){if(d[g][y]!==-1)return!0;break}return!1}l.mouseListener=u(n,h),n.addEventListener("touchstart",function(d){var p=m(d.changedTouches[0],n);h(0,p[0],p[1]),h(1,p[0],p[1]),d.preventDefault()},t?{passive:!1}:!1),n.addEventListener("touchmove",function(d){d.preventDefault();var p=m(d.changedTouches[0],n);h(1,p[0],p[1]),d.preventDefault()},t?{passive:!1}:!1),n.addEventListener("touchend",function(d){h(0,l.lastPos[0],l.lastPos[1]),d.preventDefault()},t?{passive:!1}:!1);function h(d,p,y){var g=r.calcDataBox(),A=f.viewBox,b=l.lastPos[0],M=l.lastPos[1],_=x.MINDRAG*f.pixelRatio,T=x.MINZOOM*f.pixelRatio,w,v;p*=f.pixelRatio,y*=f.pixelRatio,y=A[3]-A[1]-y;function L(I,D,U){var B=Math.min(D,U),j=Math.max(D,U);B!==j?(g[I]=B,g[I+2]=j,l.dataBox=g,r.setRanges(g)):(r.selectBox.selectBox=[0,0,1,1],r.glplot.setDirty())}switch(r.fullLayout.dragmode){case"zoom":if(d){var S=p/(A[2]-A[0])*(g[2]-g[0])+g[0],k=y/(A[3]-A[1])*(g[3]-g[1])+g[1];l.boxInited||(l.boxStart[0]=S,l.boxStart[1]=k,l.dragStart[0]=p,l.dragStart[1]=y),l.boxEnd[0]=S,l.boxEnd[1]=k,l.boxInited=!0,!l.boxEnabled&&(l.boxStart[0]!==l.boxEnd[0]||l.boxStart[1]!==l.boxEnd[1])&&(l.boxEnabled=!0);var P=Math.abs(l.dragStart[0]-p)<T,O=Math.abs(l.dragStart[1]-y)<T;if(c()&&!(P&&O)){w=l.boxEnd[0]-l.boxStart[0],v=l.boxEnd[1]-l.boxStart[1];var F=(g[3]-g[1])/(g[2]-g[0]);Math.abs(w*F)>Math.abs(v)?(l.boxEnd[1]=l.boxStart[1]+Math.abs(w)*F*(v>=0?1:-1),l.boxEnd[1]<g[1]?(l.boxEnd[1]=g[1],l.boxEnd[0]=l.boxStart[0]+(g[1]-l.boxStart[1])/Math.abs(F)):l.boxEnd[1]>g[3]&&(l.boxEnd[1]=g[3],l.boxEnd[0]=l.boxStart[0]+(g[3]-l.boxStart[1])/Math.abs(F))):(l.boxEnd[0]=l.boxStart[0]+Math.abs(v)/F*(w>=0?1:-1),l.boxEnd[0]<g[0]?(l.boxEnd[0]=g[0],l.boxEnd[1]=l.boxStart[1]+(g[0]-l.boxStart[0])*Math.abs(F)):l.boxEnd[0]>g[2]&&(l.boxEnd[0]=g[2],l.boxEnd[1]=l.boxStart[1]+(g[2]-l.boxStart[0])*Math.abs(F)))}else P&&(l.boxEnd[0]=l.boxStart[0]),O&&(l.boxEnd[1]=l.boxStart[1])}else l.boxEnabled?(w=l.boxStart[0]!==l.boxEnd[0],v=l.boxStart[1]!==l.boxEnd[1],w||v?(w&&(L(0,l.boxStart[0],l.boxEnd[0]),r.xaxis.autorange=!1),v&&(L(1,l.boxStart[1],l.boxEnd[1]),r.yaxis.autorange=!1),r.relayoutCallback()):r.glplot.setDirty(),l.boxEnabled=!1,l.boxInited=!1):l.boxInited&&(l.boxInited=!1);break;case"pan":l.boxEnabled=!1,l.boxInited=!1,d?(l.panning||(l.dragStart[0]=p,l.dragStart[1]=y),Math.abs(l.dragStart[0]-p)<_&&(p=l.dragStart[0]),Math.abs(l.dragStart[1]-y)<_&&(y=l.dragStart[1]),w=(b-p)*(g[2]-g[0])/(f.viewBox[2]-f.viewBox[0]),v=(M-y)*(g[3]-g[1])/(f.viewBox[3]-f.viewBox[1]),g[0]+=w,g[2]+=w,g[1]+=v,g[3]+=v,r.setRanges(g),l.panning=!0,l.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations()):l.panning&&(l.panning=!1,r.relayoutCallback());break}l.lastPos[0]=p,l.lastPos[1]=y}return l.wheelListener=s(n,function(d,p){if(!r.scrollZoom)return!1;var y=r.calcDataBox(),g=f.viewBox,A=l.lastPos[0],b=l.lastPos[1],M=Math.exp(5*p/(g[3]-g[1])),_=A/(g[2]-g[0])*(y[2]-y[0])+y[0],T=b/(g[3]-g[1])*(y[3]-y[1])+y[1];return y[0]=(y[0]-_)*M+_,y[2]=(y[2]-_)*M+_,y[1]=(y[1]-T)*M+T,y[3]=(y[3]-T)*M+T,r.setRanges(y),l.lastInputTime=Date.now(),o(),r.cameraChanged(),r.handleAnnotations(),r.relayoutCallback(),!0},!0),l}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(e,z,N){var u=e("../cartesian/axes"),s=e("../../lib/str2rgbarray");function m(a){this.scene=a,this.gl=a.gl,this.pixelRatio=a.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var x=m.prototype,t=["xaxis","yaxis"];x.merge=function(a){this.titleEnable=!1,this.backgroundColor=s(a.plot_bgcolor);var r,n,f,l,o,c,h,d,p,y,g;for(y=0;y<2;++y){r=t[y];var A=r.charAt(0);for(n=a[this.scene[r]._name],f=n.title.text===this.scene.fullLayout._dfltTitle[A]?"":n.title.text,g=0;g<=2;g+=2)this.labelEnable[y+g]=!1,this.labels[y+g]=f,this.labelColor[y+g]=s(n.title.font.color),this.labelFont[y+g]=n.title.font.family,this.labelSize[y+g]=n.title.font.size,this.labelPad[y+g]=this.getLabelPad(r,n),this.tickEnable[y+g]=!1,this.tickColor[y+g]=s((n.tickfont||{}).color),this.tickAngle[y+g]=n.tickangle==="auto"?0:Math.PI*-n.tickangle/180,this.tickPad[y+g]=this.getTickPad(n),this.tickMarkLength[y+g]=0,this.tickMarkWidth[y+g]=n.tickwidth||0,this.tickMarkColor[y+g]=s(n.tickcolor),this.borderLineEnable[y+g]=!1,this.borderLineColor[y+g]=s(n.linecolor),this.borderLineWidth[y+g]=n.linewidth||0;h=this.hasSharedAxis(n),o=this.hasAxisInDfltPos(r,n)&&!h,c=this.hasAxisInAltrPos(r,n)&&!h,l=n.mirror||!1,d=h?String(l).indexOf("all")!==-1:!!l,p=h?l==="allticks":String(l).indexOf("ticks")!==-1,o?this.labelEnable[y]=!0:c&&(this.labelEnable[y+2]=!0),o?this.tickEnable[y]=n.showticklabels:c&&(this.tickEnable[y+2]=n.showticklabels),(o||d)&&(this.borderLineEnable[y]=n.showline),(c||d)&&(this.borderLineEnable[y+2]=n.showline),(o||p)&&(this.tickMarkLength[y]=this.getTickMarkLength(n)),(c||p)&&(this.tickMarkLength[y+2]=this.getTickMarkLength(n)),this.gridLineEnable[y]=n.showgrid,this.gridLineColor[y]=s(n.gridcolor),this.gridLineWidth[y]=n.gridwidth,this.zeroLineEnable[y]=n.zeroline,this.zeroLineColor[y]=s(n.zerolinecolor),this.zeroLineWidth[y]=n.zerolinewidth}},x.hasSharedAxis=function(a){var r=this.scene,n=r.fullLayout._subplots.gl2d,f=u.findSubplotsWithAxis(n,a);return f.indexOf(r.id)!==0},x.hasAxisInDfltPos=function(a,r){var n=r.side;if(a==="xaxis")return n==="bottom";if(a==="yaxis")return n==="left"},x.hasAxisInAltrPos=function(a,r){var n=r.side;if(a==="xaxis")return n==="top";if(a==="yaxis")return n==="right"},x.getLabelPad=function(a,r){var n=1.5,f=r.title.font.size,l=r.showticklabels;if(a==="xaxis")return r.side==="top"?-10+f*(n+(l?1:0)):-10+f*(n+(l?.5:0));if(a==="yaxis")return r.side==="right"?10+f*(n+(l?1:.5)):10+f*(n+(l?.5:0))},x.getTickPad=function(a){return a.ticks==="outside"?10+a.ticklen:15},x.getTickMarkLength=function(a){if(!a.ticks)return 0;var r=a.ticklen;return a.ticks==="inside"?-r:r};function i(a){return new m(a)}z.exports=i},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(e,z,N){var u=e("../../plot_api/edit_types").overrideAll,s=e("./scene2d"),m=e("../layout_attributes"),x=e("../../constants/xmlns_namespaces"),t=e("../cartesian/constants"),i=e("../cartesian"),a=e("../../components/fx/layout_attributes"),r=e("../get_data").getSubplotData;N.name="gl2d",N.attr=["xaxis","yaxis"],N.idRoot=["x","y"],N.idRegex=t.idRegex,N.attrRegex=t.attrRegex,N.attributes=e("../cartesian/attributes"),N.supplyLayoutDefaults=function(n,f,l){f._has("cartesian")||i.supplyLayoutDefaults(n,f,l)},N.layoutAttrOverrides=u(i.layoutAttributes,"plot","from-root"),N.baseLayoutAttrOverrides=u({plot_bgcolor:m.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),N.plot=function(f){for(var l=f._fullLayout,o=f._fullData,c=l._subplots.gl2d,h=0;h<c.length;h++){var d=c[h],p=l._plots[d],y=r(o,"gl2d",d),g=p._scene2d;g===void 0&&(g=new s({id:d,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio},l),p._scene2d=g),g.plot(y,f.calcdata,l,f.layout)}},N.clean=function(n,f,l,o){for(var c=o._subplots.gl2d||[],h=0;h<c.length;h++){var d=c[h],p=o._plots[d];if(!!p._scene2d){var y=r(n,"gl2d",d);y.length===0&&(p._scene2d.destroy(),delete o._plots[d])}}i.clean.apply(this,arguments)},N.drawFramework=function(n){n._context.staticPlot||i.drawFramework(n)},N.toSVG=function(n){for(var f=n._fullLayout,l=f._subplots.gl2d,o=0;o<l.length;o++){var c=f._plots[l[o]],h=c._scene2d,d=h.toImage("png"),p=f._glimages.append("svg:image");p.attr({xmlns:x.svg,"xlink:href":d,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),h.destroy()}},N.updateFx=function(n){for(var f=n._fullLayout,l=f._subplots.gl2d,o=0;o<l.length;o++){var c=f._plots[l[o]]._scene2d;c.updateFx(f.dragmode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(e,z,N){var u=e("../../registry"),s=e("../../plots/cartesian/axes"),m=e("../../components/fx"),x=e("../../../stackgl_modules").gl_plot2d,t=e("../../../stackgl_modules").gl_spikes2d,i=e("../../../stackgl_modules").gl_select_box,a=e("webgl-context"),r=e("./convert"),n=e("./camera"),f=e("../../lib/show_no_webgl_msg"),l=e("../cartesian/constraints"),o=l.enforce,c=l.clean,h=e("../cartesian/autorange").doAutoRange,d=e("../../components/dragelement/helpers"),p=d.drawMode,y=d.selectMode,g=["xaxis","yaxis"],A,b,M=e("../cartesian/constants").SUBPLOT_PATTERN;function _(v,L){this.container=v.container,this.graphDiv=v.graphDiv,this.pixelRatio=v.plotGlPixelRatio||window.devicePixelRatio,this.id=v.id,this.staticPlot=!!v.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(L),this.makeFramework(),!this.stopped&&(this.glplotOptions=r(this),this.glplotOptions.merge(L),this.glplot=x(this.glplotOptions),this.camera=n(this),this.traces={},this.spikes=t(this.glplot),this.selectBox=i(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}z.exports=_;var T=_.prototype;T.makeFramework=function(){if(this.staticPlot){if(!b&&(A=document.createElement("canvas"),b=a({canvas:A,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}),!b))throw new Error("Error creating static canvas/context for image server");this.canvas=A,this.gl=b}else{var v=this.container.querySelector(".gl-canvas-focus"),L=a({canvas:v,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!L){f(this),this.stopped=!0;return}this.canvas=v,this.gl=L}var S=this.canvas;S.style.width="100%",S.style.height="100%",S.style.position="absolute",S.style.top="0px",S.style.left="0px",S.style["pointer-events"]="none",this.updateSize(S);var k=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");k.style.position="absolute",k.style.top=k.style.left="0px",k.style.width=k.style.height="100%",k.style["z-index"]=20,k.style["pointer-events"]="none";var P=this.mouseContainer=document.createElement("div");P.style.position="absolute",P.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var O=this.container;O.appendChild(k),O.appendChild(P);var F=this;P.addEventListener("mouseout",function(){F.isMouseOver=!1,F.unhover()}),P.addEventListener("mouseover",function(){F.isMouseOver=!0})},T.toImage=function(v){v||(v="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(A),this.updateSize(this.canvas);var L=this.glplot.gl,S=L.drawingBufferWidth,k=L.drawingBufferHeight;L.clearColor(1,1,1,0),L.clear(L.COLOR_BUFFER_BIT|L.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),L.bindFramebuffer(L.FRAMEBUFFER,null);var P=new Uint8Array(S*k*4);L.readPixels(0,0,S,k,L.RGBA,L.UNSIGNED_BYTE,P);for(var O=0,F=k-1;O<F;++O,--F)for(var I=0;I<S;++I)for(var D=0;D<4;++D){var U=P[4*(S*O+I)+D];P[4*(S*O+I)+D]=P[4*(S*F+I)+D],P[4*(S*F+I)+D]=U}var B=document.createElement("canvas");B.width=S,B.height=k;var j=B.getContext("2d"),Z=j.createImageData(S,k);Z.data.set(P),j.putImageData(Z,0,0);var ee;switch(v){case"jpeg":ee=B.toDataURL("image/jpeg");break;case"webp":ee=B.toDataURL("image/webp");break;default:ee=B.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(A),ee},T.updateSize=function(v){v||(v=this.canvas);var L=this.pixelRatio,S=this.fullLayout,k=S.width,P=S.height,O=Math.ceil(L*k)|0,F=Math.ceil(L*P)|0;return(v.width!==O||v.height!==F)&&(v.width=O,v.height=F),v},T.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var v=[s.calcTicks(this.xaxis),s.calcTicks(this.yaxis)],L=0;L<2;++L)for(var S=0;S<v[L].length;++S)v[L][S].text=v[L][S].text+"";return v};function w(v,L){for(var S=0;S<2;++S){var k=v[S],P=L[S];if(k.length!==P.length)return!0;for(var O=0;O<k.length;++O)if(k[O].x!==P[O].x)return!0}return!1}T.updateRefs=function(v){this.fullLayout=v;var L=this.id.match(M),S="xaxis"+L[1],k="yaxis"+L[2];this.xaxis=this.fullLayout[S],this.yaxis=this.fullLayout[k]},T.relayoutCallback=function(){var v=this.graphDiv,L=this.xaxis,S=this.yaxis,k=v.layout,P={},O=P[L._name+".range"]=L.range.slice(),F=P[S._name+".range"]=S.range.slice();P[L._name+".autorange"]=L.autorange,P[S._name+".autorange"]=S.autorange,u.call("_storeDirectGUIEdit",v.layout,v._fullLayout._preGUI,P);var I=k[L._name];I.range=O,I.autorange=L.autorange;var D=k[S._name];D.range=F,D.autorange=S.autorange,P.lastInputTime=this.camera.lastInputTime,v.emit("plotly_relayout",P)},T.cameraChanged=function(){var v=this.camera;this.glplot.setDataBox(this.calcDataBox());var L=this.computeTickMarks(),S=this.glplotOptions.ticks;w(L,S)&&(this.glplotOptions.ticks=L,this.glplotOptions.dataBox=v.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},T.handleAnnotations=function(){for(var v=this.graphDiv,L=this.fullLayout.annotations,S=0;S<L.length;S++){var k=L[S];k.xref===this.xaxis._id&&k.yref===this.yaxis._id&&u.getComponentMethod("annotations","drawOne")(v,S)}},T.destroy=function(){if(!!this.glplot){var v=this.traces;v&&Object.keys(v).map(function(L){v[L].dispose(),delete v[L]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},T.plot=function(v,L,S){var k=this.glplot;this.updateRefs(S),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(v,L),this.updateFx(S.dragmode);var P=S.width,O=S.height;this.updateSize(this.canvas);var F=this.glplotOptions;F.merge(S),F.screenBox=[0,0,P,O];var I={_fullLayout:{_axisConstraintGroups:S._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:S._size}};c(I,this.xaxis),c(I,this.yaxis);var D=S._size,U=this.xaxis.domain,B=this.yaxis.domain;F.viewBox=[D.l+U[0]*D.w,D.b+B[0]*D.h,P-D.r-(1-U[1])*D.w,O-D.t-(1-B[1])*D.h],this.mouseContainer.style.width=D.w*(U[1]-U[0])+"px",this.mouseContainer.style.height=D.h*(B[1]-B[0])+"px",this.mouseContainer.height=D.h*(B[1]-B[0]),this.mouseContainer.style.left=D.l+U[0]*D.w+"px",this.mouseContainer.style.top=D.t+(1-B[1])*D.h+"px";var j,Z;for(Z=0;Z<2;++Z)j=this[g[Z]],j._length=F.viewBox[Z+2]-F.viewBox[Z],h(this.graphDiv,j),j.setScale();o(I),F.ticks=this.computeTickMarks(),F.dataBox=this.calcDataBox(),F.merge(S),k.update(F),this.glplot.draw()},T.calcDataBox=function(){var v=this.xaxis,L=this.yaxis,S=v.range,k=L.range,P=v.r2l,O=L.r2l;return[P(S[0]),O(k[0]),P(S[1]),O(k[1])]},T.setRanges=function(v){var L=this.xaxis,S=this.yaxis,k=L.l2r,P=S.l2r;L.range=[k(v[0]),k(v[2])],S.range=[P(v[1]),P(v[3])]},T.updateTraces=function(v,L){var S=Object.keys(this.traces),k,P,O;this.fullData=v;e:for(k=0;k<S.length;k++){var F=S[k],I=this.traces[F];for(P=0;P<v.length;P++)if(O=v[P],O.uid===F&&O.type===I.type)continue e;I.dispose(),delete this.traces[F]}for(k=0;k<v.length;k++){O=v[k];var D=L[k],U=this.traces[O.uid];U?U.update(O,D):(U=O._module.plot(this,O,D),this.traces[O.uid]=U)}this.glplot.objects.sort(function(B,j){return B._trace.index-j._trace.index})},T.updateFx=function(v){y(v)||p(v)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),v==="pan"?this.mouseContainer.style.cursor="move":v==="zoom"?this.mouseContainer.style.cursor="crosshair":this.mouseContainer.style.cursor=null},T.emitPointAction=function(v,L){for(var S=v.trace.uid,k=v.pointIndex,P,O=0;O<this.fullData.length;O++)this.fullData[O].uid===S&&(P=this.fullData[O]);var F={x:v.traceCoord[0],y:v.traceCoord[1],curveNumber:P.index,pointNumber:k,data:P._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};m.appendArrayPointValue(F,P,k),this.graphDiv.emit(L,{points:[F]})},T.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var v=this.glplot,L=this.camera,S=L.mouseListener,k=this.lastButtonState===1&&S.buttons===0,P=this.fullLayout;this.lastButtonState=S.buttons,this.cameraChanged();var O=S.x*v.pixelRatio,F=this.canvas.height-v.pixelRatio*S.y,I;if(L.boxEnabled&&P.dragmode==="zoom"){this.selectBox.enabled=!0;for(var D=this.selectBox.selectBox=[Math.min(L.boxStart[0],L.boxEnd[0]),Math.min(L.boxStart[1],L.boxEnd[1]),Math.max(L.boxStart[0],L.boxEnd[0]),Math.max(L.boxStart[1],L.boxEnd[1])],U=0;U<2;U++)L.boxStart[U]===L.boxEnd[U]&&(D[U]=v.dataBox[U],D[U+2]=v.dataBox[U+2]);v.setDirty()}else if(!L.panning&&this.isMouseOver){this.selectBox.enabled=!1;var B=P._size,j=this.xaxis.domain,Z=this.yaxis.domain;I=v.pick(O/v.pixelRatio+B.l+j[0]*B.w,F/v.pixelRatio-(B.t+(1-Z[1])*B.h));var ee=I&&I.object._trace.handlePick(I);if(ee&&k&&this.emitPointAction(ee,"plotly_click"),I&&I.object._trace.hoverinfo!=="skip"&&P.hovermode&&ee&&(!this.lastPickResult||this.lastPickResult.traceUid!==ee.trace.uid||this.lastPickResult.dataCoord[0]!==ee.dataCoord[0]||this.lastPickResult.dataCoord[1]!==ee.dataCoord[1])){var q=ee;this.lastPickResult={traceUid:ee.trace?ee.trace.uid:null,dataCoord:ee.dataCoord.slice()},this.spikes.update({center:I.dataCoord}),q.screenCoord=[((v.viewBox[2]-v.viewBox[0])*(I.dataCoord[0]-v.dataBox[0])/(v.dataBox[2]-v.dataBox[0])+v.viewBox[0])/v.pixelRatio,(this.canvas.height-(v.viewBox[3]-v.viewBox[1])*(I.dataCoord[1]-v.dataBox[1])/(v.dataBox[3]-v.dataBox[1])-v.viewBox[1])/v.pixelRatio],this.emitPointAction(ee,"plotly_hover");var W=this.fullData[q.trace.index]||{},J=q.pointIndex,le=m.castHoverinfo(W,P,J);if(le&&le!=="all"){var fe=le.split("+");fe.indexOf("x")===-1&&(q.traceCoord[0]=void 0),fe.indexOf("y")===-1&&(q.traceCoord[1]=void 0),fe.indexOf("z")===-1&&(q.traceCoord[2]=void 0),fe.indexOf("text")===-1&&(q.textLabel=void 0),fe.indexOf("name")===-1&&(q.name=void 0)}m.loneHover({x:q.screenCoord[0],y:q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",q.traceCoord[1]),zLabel:q.traceCoord[2],text:q.textLabel,name:q.name,color:m.castHoverOption(W,J,"bgcolor")||q.color,borderColor:m.castHoverOption(W,J,"bordercolor"),fontFamily:m.castHoverOption(W,J,"font.family"),fontSize:m.castHoverOption(W,J,"font.size"),fontColor:m.castHoverOption(W,J,"font.color"),nameLength:m.castHoverOption(W,J,"namelength"),textAlign:m.castHoverOption(W,J,"align")},{container:this.svgContainer,gd:this.graphDiv})}}I||this.unhover(),v.draw()}},T.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),m.loneUnhover(this.svgContainer))},T.hoverFormatter=function(v,L){if(L!==void 0){var S=this[v];return s.tickText(S,S.c2l(L),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(e,z,N){var u=e("../../plot_api/edit_types").overrideAll,s=e("../../components/fx/layout_attributes"),m=e("./scene"),x=e("../get_data").getSubplotData,t=e("../../lib"),i=e("../../constants/xmlns_namespaces"),a="gl3d",r="scene";N.name=a,N.attr=r,N.idRoot=r,N.idRegex=N.attrRegex=t.counterRegex("scene"),N.attributes=e("./layout/attributes"),N.layoutAttributes=e("./layout/layout_attributes"),N.baseLayoutAttrOverrides=u({hoverlabel:s.hoverlabel},"plot","nested"),N.supplyLayoutDefaults=e("./layout/defaults"),N.plot=function(f){for(var l=f._fullLayout,o=f._fullData,c=l._subplots[a],h=0;h<c.length;h++){var d=c[h],p=x(o,a,d),y=l[d],g=y.camera,A=y._scene;A||(A=new m({id:d,graphDiv:f,container:f.querySelector(".gl-container"),staticPlot:f._context.staticPlot,plotGlPixelRatio:f._context.plotGlPixelRatio,camera:g},l),y._scene=A),A.viewInitial||(A.viewInitial={up:{x:g.up.x,y:g.up.y,z:g.up.z},eye:{x:g.eye.x,y:g.eye.y,z:g.eye.z},center:{x:g.center.x,y:g.center.y,z:g.center.z}}),A.plot(p,l,f.layout)}},N.clean=function(n,f,l,o){for(var c=o._subplots[a]||[],h=0;h<c.length;h++){var d=c[h];!f[d]&&!!o[d]._scene&&(o[d]._scene.destroy(),o._infolayer&&o._infolayer.selectAll(".annotation-"+d).remove())}},N.toSVG=function(n){for(var f=n._fullLayout,l=f._subplots[a],o=f._size,c=0;c<l.length;c++){var h=f[l[c]],d=h.domain,p=h._scene,y=p.toImage("png"),g=f._glimages.append("svg:image");g.attr({xmlns:i.svg,"xlink:href":y,x:o.l+o.w*d.x[0],y:o.t+o.h*(1-d.y[1]),width:o.w*(d.x[1]-d.x[0]),height:o.h*(d.y[1]-d.y[0]),preserveAspectRatio:"none"}),p.destroy()}},N.cleanId=function(f){if(!!f.match(/^scene[0-9]*$/)){var l=f.substr(5);return l==="1"&&(l=""),r+l}},N.updateFx=function(n){for(var f=n._fullLayout,l=f._subplots[a],o=0;o<l.length;o++){var c=f[l[o]]._scene;c.updateFx(f.dragmode,f.hovermode)}}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(e,z,N){z.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(e,z,N){var u=e("../../../components/color"),s=e("../../cartesian/layout_attributes"),m=e("../../../lib/extend").extendFlat,x=e("../../../plot_api/edit_types").overrideAll;z.exports=x({visible:s.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:u.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:s.color,categoryorder:s.categoryorder,categoryarray:s.categoryarray,title:{text:s.title.text,font:s.title.font},type:m({},s.type,{values:["-","linear","log","date","category"]}),autotypenumbers:s.autotypenumbers,autorange:s.autorange,rangemode:s.rangemode,range:m({},s.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:s.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,mirror:s.mirror,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,showticklabels:s.showticklabels,tickfont:s.tickfont,tickangle:s.tickangle,tickprefix:s.tickprefix,showtickprefix:s.showtickprefix,ticksuffix:s.ticksuffix,showticksuffix:s.showticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickformat:s.tickformat,tickformatstops:s.tickformatstops,hoverformat:s.hoverformat,showline:s.showline,linecolor:s.linecolor,linewidth:s.linewidth,showgrid:s.showgrid,gridcolor:m({},s.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:s.gridwidth,zeroline:s.zeroline,zerolinecolor:s.zerolinecolor,zerolinewidth:s.zerolinewidth,_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(e,z,N){var u=e("tinycolor2").mix,s=e("../../../lib"),m=e("../../../plot_api/plot_template"),x=e("./axis_attributes"),t=e("../../cartesian/type_defaults"),i=e("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"],r=100*(204-68)/(255-68);z.exports=function(f,l,o){var c,h;function d(g,A){return s.coerce(c,h,x,g,A)}for(var p=0;p<a.length;p++){var y=a[p];c=f[y]||{},h=m.newContainer(l,y),h._id=y[0]+o.scene,h._name=y,t(c,h,d,o),i(c,h,d,{font:o.font,letter:y[0],data:o.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:o.bgColor,calendar:o.calendar},o.fullLayout),d("gridcolor",u(h.color,o.bgColor,r).toRgbString()),d("title.text",y[0]),h.setScale=s.noop,d("showspikes")&&(d("spikesides"),d("spikethickness"),d("spikecolor",h.color)),d("showaxeslabels"),d("showbackground")&&d("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(e,z,N){var u=e("../../../lib/str2rgbarray"),s=e("../../../lib"),m=["xaxis","yaxis","zaxis"];function x(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}var t=x.prototype;t.merge=function(a,r){for(var n=this,f=0;f<3;++f){var l=r[m[f]];if(!l.visible){n.tickEnable[f]=!1,n.labelEnable[f]=!1,n.lineEnable[f]=!1,n.lineTickEnable[f]=!1,n.gridEnable[f]=!1,n.zeroEnable[f]=!1,n.backgroundEnable[f]=!1;continue}n.labels[f]=a._meta?s.templateString(l.title.text,a._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(n.labelColor[f]=u(l.title.font.color)),l.title.font.family&&(n.labelFont[f]=l.title.font.family),l.title.font.size&&(n.labelSize[f]=l.title.font.size)),"showline"in l&&(n.lineEnable[f]=l.showline),"linecolor"in l&&(n.lineColor[f]=u(l.linecolor)),"linewidth"in l&&(n.lineWidth[f]=l.linewidth),"showgrid"in l&&(n.gridEnable[f]=l.showgrid),"gridcolor"in l&&(n.gridColor[f]=u(l.gridcolor)),"gridwidth"in l&&(n.gridWidth[f]=l.gridwidth),l.type==="log"?n.zeroEnable[f]=!1:"zeroline"in l&&(n.zeroEnable[f]=l.zeroline),"zerolinecolor"in l&&(n.zeroLineColor[f]=u(l.zerolinecolor)),"zerolinewidth"in l&&(n.zeroLineWidth[f]=l.zerolinewidth),"ticks"in l&&!!l.ticks?n.lineTickEnable[f]=!0:n.lineTickEnable[f]=!1,"ticklen"in l&&(n.lineTickLength[f]=n._defaultLineTickLength[f]=l.ticklen),"tickcolor"in l&&(n.lineTickColor[f]=u(l.tickcolor)),"tickwidth"in l&&(n.lineTickWidth[f]=l.tickwidth),"tickangle"in l&&(n.tickAngle[f]=l.tickangle==="auto"?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(n.tickEnable[f]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(n.tickColor[f]=u(l.tickfont.color)),l.tickfont.family&&(n.tickFont[f]=l.tickfont.family),l.tickfont.size&&(n.tickSize[f]=l.tickfont.size)),"mirror"in l?["ticks","all","allticks"].indexOf(l.mirror)!==-1?(n.lineTickMirror[f]=!0,n.lineMirror[f]=!0):l.mirror===!0?(n.lineTickMirror[f]=!1,n.lineMirror[f]=!0):(n.lineTickMirror[f]=!1,n.lineMirror[f]=!1):n.lineMirror[f]=!1,"showbackground"in l&&l.showbackground!==!1?(n.backgroundEnable[f]=!0,n.backgroundColor[f]=u(l.backgroundcolor)):n.backgroundEnable[f]=!1}};function i(a,r){var n=new x;return n.merge(a,r),n}z.exports=i},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(e,z,N){var u=e("../../../lib"),s=e("../../../components/color"),m=e("../../../registry"),x=e("../../subplot_defaults"),t=e("./axis_defaults"),i=e("./layout_attributes"),a=e("../../get_data").getSubplotData,r="gl3d";z.exports=function(l,o,c){var h=o._basePlotModules.length>1;function d(p){if(!h){var y=u.validate(l[p],i[p]);if(y)return l[p]}}x(l,o,c,{type:r,attributes:i,handleDefaults:n,fullLayout:o,font:o.font,fullData:c,getDfltFromLayout:d,autotypenumbersDflt:o.autotypenumbers,paper_bgcolor:o.paper_bgcolor,calendar:o.calendar})};function n(f,l,o,c){for(var h=o("bgcolor"),d=s.combine(h,c.paper_bgcolor),p=["up","center","eye"],y=0;y<p.length;y++)o("camera."+p[y]+".x"),o("camera."+p[y]+".y"),o("camera."+p[y]+".z");o("camera.projection.type");var g=!!o("aspectratio.x")&&!!o("aspectratio.y")&&!!o("aspectratio.z"),A=g?"manual":"auto",b=o("aspectmode",A);g||(f.aspectratio=l.aspectratio={x:1,y:1,z:1},b==="manual"&&(l.aspectmode="auto"),f.aspectmode=l.aspectmode);var M=a(c.fullData,r,c.id);t(f,l,{font:c.font,scene:c.id,data:M,bgColor:d,calendar:c.calendar,autotypenumbersDflt:c.autotypenumbersDflt,fullLayout:c.fullLayout}),m.getComponentMethod("annotations3d","handleDefaults")(f,l,c);var _=c.getDfltFromLayout("dragmode");if(_!==!1&&!_)if(_="orbit",f.camera&&f.camera.up){var T=f.camera.up.x,w=f.camera.up.y,v=f.camera.up.z;v!==0&&(!T||!w||!v||v/Math.sqrt(T*T+w*w+v*v)>.999)&&(_="turntable")}else _="turntable";o("dragmode",_),o("hovermode",c.getDfltFromLayout("hovermode"))}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(e,z,N){var u=e("./axis_attributes"),s=e("../../domain").attributes,m=e("../../../lib/extend").extendFlat,x=e("../../../lib").counterRegex;function t(i,a,r){return{x:{valType:"number",dflt:i,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:r,editType:"camera"},editType:"camera"}}z.exports={_arrayAttrRegexps:[x("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:m(t(0,0,1),{}),center:m(t(0,0,0),{}),eye:m(t(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:s({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:u,yaxis:u,zaxis:u,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(e,z,N){var u=e("../../../lib/str2rgbarray"),s=["xaxis","yaxis","zaxis"];function m(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}var x=m.prototype;x.merge=function(i){for(var a=0;a<3;++a){var r=i[s[a]];if(!r.visible){this.enabled[a]=!1,this.drawSides[a]=!1;continue}this.enabled[a]=r.showspikes,this.colors[a]=u(r.spikecolor),this.drawSides[a]=r.spikesides,this.lineWidth[a]=r.spikethickness}};function t(i){var a=new m;return a.merge(i),a}z.exports=t},{"../../../lib/str2rgbarray":528}],606:[function(e,z,N){z.exports=i;var u=e("../../cartesian/axes"),s=e("../../../lib"),m=["xaxis","yaxis","zaxis"],x=[0,0,0];function t(a){for(var r=new Array(3),n=0;n<3;++n){for(var f=a[n],l=new Array(f.length),o=0;o<f.length;++o)l[o]=f[o].x;r[n]=l}return r}function i(a){for(var r=a.axesOptions,n=a.glplot.axesPixels,f=a.fullSceneLayout,l=[[],[],[]],o=0;o<3;++o){var c=f[m[o]];if(c._length=(n[o].hi-n[o].lo)*n[o].pixelsPerDataUnit/a.dataScale[o],Math.abs(c._length)===1/0||isNaN(c._length))l[o]=[];else{c._input_range=c.range.slice(),c.range[0]=n[o].lo/a.dataScale[o],c.range[1]=n[o].hi/a.dataScale[o],c._m=1/(a.dataScale[o]*n[o].pixelsPerDataUnit),c.range[0]===c.range[1]&&(c.range[0]-=1,c.range[1]+=1);var h=c.tickmode;if(c.tickmode==="auto"){c.tickmode="linear";var d=c.nticks||s.constrain(c._length/40,4,9);u.autoTicks(c,Math.abs(c.range[1]-c.range[0])/d)}for(var p=u.calcTicks(c,{msUTC:!0}),y=0;y<p.length;++y)p[y].x=p[y].x*a.dataScale[o],c.type==="date"&&(p[y].text=p[y].text.replace(/\<br\>/g," "));l[o]=p,c.tickmode=h}}r.ticks=l;for(var o=0;o<3;++o){x[o]=.5*(a.glplot.bounds[0][o]+a.glplot.bounds[1][o]);for(var y=0;y<2;++y)r.bounds[y][o]=a.glplot.bounds[y][o]}a.contourLevels=t(l)}},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(e,z,N){function u(m,x){var t=[0,0,0,0],i,a;for(i=0;i<4;++i)for(a=0;a<4;++a)t[a]+=m[4*i+a]*x[i];return t}function s(m,x){var t=u(m.projection,u(m.view,u(m.model,[x[0],x[1],x[2],1])));return t}z.exports=s},{}],608:[function(e,z,N){var u=e("../../../stackgl_modules").gl_plot3d,s=u.createCamera,m=u.createScene,x=e("webgl-context"),t=e("has-passive-events"),i=e("../../registry"),a=e("../../lib"),r=a.preserveDrawingBuffer(),n=e("../../plots/cartesian/axes"),f=e("../../components/fx"),l=e("../../lib/str2rgbarray"),o=e("../../lib/show_no_webgl_msg"),c=e("./project"),h=e("./layout/convert"),d=e("./layout/spikes"),p=e("./layout/tick_marks"),y,g;function A(P,O){var F=document.createElement("div"),I=P.container;this.graphDiv=P.graphDiv;var D=document.createElementNS("http://www.w3.org/2000/svg","svg");D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",D.style["z-index"]=20,D.style["pointer-events"]="none",F.appendChild(D),this.svgContainer=D,F.id=P.id,F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",I.appendChild(F),this.fullLayout=O,this.id=P.id||"scene",this.fullSceneLayout=O[this.id],this.plotArgs=[[],{},{}],this.axesOptions=h(O,O[this.id]),this.spikeOptions=d(O[this.id]),this.container=F,this.staticMode=!!P.staticPlot,this.pixelRatio=this.pixelRatio||P.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=i.getComponentMethod("annotations3d","convert"),this.drawAnnotations=i.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var b=A.prototype;b.prepareOptions=function(){var P=this,O={canvas:P.canvas,gl:P.gl,glOptions:{preserveDrawingBuffer:r,premultipliedAlpha:!0,antialias:!0},container:P.container,axes:P.axesOptions,spikes:P.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:P.camera,pixelRatio:P.pixelRatio};if(P.staticMode){if(!g&&(y=document.createElement("canvas"),g=x({canvas:y,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}),!g))throw new Error("error creating static canvas/context for image server");O.gl=g,O.canvas=y}return O};var M=!0;b.tryCreatePlot=function(){var P=this,O=P.prepareOptions(),F=!0;try{P.glplot=m(O)}catch{if(P.staticMode||!M||r)F=!1;else{a.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{r=O.glOptions.preserveDrawingBuffer=!0,P.glplot=m(O)}catch{r=O.glOptions.preserveDrawingBuffer=!1,F=!1}}}return M=!1,F},b.initializeGLCamera=function(){var P=this,O=P.fullSceneLayout.camera,F=O.projection.type==="orthographic";P.camera=s(P.container,{center:[O.center.x,O.center.y,O.center.z],eye:[O.eye.x,O.eye.y,O.eye.z],up:[O.up.x,O.up.y,O.up.z],_ortho:F,zoomMin:.01,zoomMax:100,mode:"orbit"})},b.initializeGLPlot=function(){var P=this;P.initializeGLCamera();var O=P.tryCreatePlot();if(!O)return o(P);P.traces={},P.make4thDimension();var F=P.graphDiv,I=F.layout,D=function(){var B={};return P.isCameraChanged(I)&&(B[P.id+".camera"]=P.getCamera()),P.isAspectChanged(I)&&(B[P.id+".aspectratio"]=P.glplot.getAspectratio(),I[P.id].aspectmode!=="manual"&&(P.fullSceneLayout.aspectmode=I[P.id].aspectmode=B[P.id+".aspectmode"]="manual")),B},U=function(B){if(B.fullSceneLayout.dragmode!==!1){var j=D();B.saveLayout(I),B.graphDiv.emit("plotly_relayout",j)}};return P.glplot.canvas&&(P.glplot.canvas.addEventListener("mouseup",function(){U(P)}),P.glplot.canvas.addEventListener("wheel",function(B){if(F._context._scrollZoom.gl3d){if(P.camera._ortho){var j=B.deltaX>B.deltaY?1.1:1/1.1,Z=P.glplot.getAspectratio();P.glplot.setAspectratio({x:j*Z.x,y:j*Z.y,z:j*Z.z})}U(P)}},t?{passive:!1}:!1),P.glplot.canvas.addEventListener("mousemove",function(){if(P.fullSceneLayout.dragmode!==!1&&P.camera.mouseListener.buttons!==0){var B=D();P.graphDiv.emit("plotly_relayouting",B)}}),P.staticMode||P.glplot.canvas.addEventListener("webglcontextlost",function(B){F&&F.emit&&F.emit("plotly_webglcontextlost",{event:B,layer:P.id})},!1)),P.glplot.oncontextloss=function(){P.recoverContext()},P.glplot.onrender=function(){P.render()},!0},b.render=function(){var P=this,O=P.graphDiv,F,I=P.svgContainer,D=P.container.getBoundingClientRect();O._fullLayout._calcInverseTransform(O);var U=O._fullLayout._invScaleX,B=O._fullLayout._invScaleY,j=D.width*U,Z=D.height*B;I.setAttributeNS(null,"viewBox","0 0 "+j+" "+Z),I.setAttributeNS(null,"width",j),I.setAttributeNS(null,"height",Z),p(P),P.glplot.axes.update(P.axesOptions);for(var ee=Object.keys(P.traces),q=null,W=P.glplot.selection,J=0;J<ee.length;++J)F=P.traces[ee[J]],F.data.hoverinfo!=="skip"&&F.handlePick(W)&&(q=F),F.setContourLevels&&F.setContourLevels();function le(ye,ce,me){var xe=P.fullSceneLayout[ye+"axis"];return xe.type!=="log"&&(ce=xe.d2l(ce)),n.hoverLabelText(xe,ce,me)}if(q!==null){var fe=c(P.glplot.cameraParams,W.dataCoordinate);F=q.data;var se=O._fullData[F.index],H=W.index,Y={xLabel:le("x",W.traceCoordinate[0],F.xhoverformat),yLabel:le("y",W.traceCoordinate[1],F.yhoverformat),zLabel:le("z",W.traceCoordinate[2],F.zhoverformat)},ne=f.castHoverinfo(se,P.fullLayout,H),te=(ne||"").split("+"),K=ne&&ne==="all";!se.hovertemplate&&!K&&(te.indexOf("x")===-1&&(Y.xLabel=void 0),te.indexOf("y")===-1&&(Y.yLabel=void 0),te.indexOf("z")===-1&&(Y.zLabel=void 0),te.indexOf("text")===-1&&(W.textLabel=void 0),te.indexOf("name")===-1&&(q.name=void 0));var $,ae=[];F.type==="cone"||F.type==="streamtube"?(Y.uLabel=le("x",W.traceCoordinate[3],F.uhoverformat),(K||te.indexOf("u")!==-1)&&ae.push("u: "+Y.uLabel),Y.vLabel=le("y",W.traceCoordinate[4],F.vhoverformat),(K||te.indexOf("v")!==-1)&&ae.push("v: "+Y.vLabel),Y.wLabel=le("z",W.traceCoordinate[5],F.whoverformat),(K||te.indexOf("w")!==-1)&&ae.push("w: "+Y.wLabel),Y.normLabel=W.traceCoordinate[6].toPrecision(3),(K||te.indexOf("norm")!==-1)&&ae.push("norm: "+Y.normLabel),F.type==="streamtube"&&(Y.divergenceLabel=W.traceCoordinate[7].toPrecision(3),(K||te.indexOf("divergence")!==-1)&&ae.push("divergence: "+Y.divergenceLabel)),W.textLabel&&ae.push(W.textLabel),$=ae.join("<br>")):F.type==="isosurface"||F.type==="volume"?(Y.valueLabel=n.hoverLabelText(P._mockAxis,P._mockAxis.d2l(W.traceCoordinate[3]),F.valuehoverformat),ae.push("value: "+Y.valueLabel),W.textLabel&&ae.push(W.textLabel),$=ae.join("<br>")):$=W.textLabel;var ie={x:W.traceCoordinate[0],y:W.traceCoordinate[1],z:W.traceCoordinate[2],data:se._input,fullData:se,curveNumber:se.index,pointNumber:H};f.appendArrayPointValue(ie,se,H),F._module.eventData&&(ie=se._module.eventData(ie,W,se,{},H));var oe={points:[ie]};if(P.fullSceneLayout.hovermode){var ue=[];f.loneHover({trace:se,x:(.5+.5*fe[0]/fe[3])*j,y:(.5-.5*fe[1]/fe[3])*Z,xLabel:Y.xLabel,yLabel:Y.yLabel,zLabel:Y.zLabel,text:$,name:q.name,color:f.castHoverOption(se,H,"bgcolor")||q.color,borderColor:f.castHoverOption(se,H,"bordercolor"),fontFamily:f.castHoverOption(se,H,"font.family"),fontSize:f.castHoverOption(se,H,"font.size"),fontColor:f.castHoverOption(se,H,"font.color"),nameLength:f.castHoverOption(se,H,"namelength"),textAlign:f.castHoverOption(se,H,"align"),hovertemplate:a.castOption(se,H,"hovertemplate"),hovertemplateLabels:a.extendFlat({},ie,Y),eventData:[ie]},{container:I,gd:O,inOut_bbox:ue}),ie.bbox=ue[0]}W.buttons&&W.distance<5?O.emit("plotly_click",oe):O.emit("plotly_hover",oe),this.oldEventData=oe}else f.loneUnhover(I),this.oldEventData&&O.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},b.recoverContext=function(){var P=this;P.glplot.dispose();var O=function(){if(P.glplot.gl.isContextLost()){requestAnimationFrame(O);return}if(!P.initializeGLPlot()){a.error("Catastrophic and unrecoverable WebGL error. Context lost.");return}P.plot.apply(P,P.plotArgs)};requestAnimationFrame(O)};var _=["xaxis","yaxis","zaxis"];function T(P,O,F){for(var I=P.fullSceneLayout,D=0;D<3;D++){var U=_[D],B=U.charAt(0),j=I[U],Z=O[B],ee=O[B+"calendar"],q=O["_"+B+"length"];if(!a.isArrayOrTypedArray(Z))F[0][D]=Math.min(F[0][D],0),F[1][D]=Math.max(F[1][D],q-1);else for(var W,J=0;J<(q||Z.length);J++)if(a.isArrayOrTypedArray(Z[J]))for(var le=0;le<Z[J].length;++le)W=j.d2l(Z[J][le],0,ee),!isNaN(W)&&isFinite(W)&&(F[0][D]=Math.min(F[0][D],W),F[1][D]=Math.max(F[1][D],W));else W=j.d2l(Z[J],0,ee),!isNaN(W)&&isFinite(W)&&(F[0][D]=Math.min(F[0][D],W),F[1][D]=Math.max(F[1][D],W))}}function w(P,O){for(var F=P.fullSceneLayout,I=F.annotations||[],D=0;D<3;D++)for(var U=_[D],B=U.charAt(0),j=F[U],Z=0;Z<I.length;Z++){var ee=I[Z];if(ee.visible){var q=j.r2l(ee[B]);!isNaN(q)&&isFinite(q)&&(O[0][D]=Math.min(O[0][D],q),O[1][D]=Math.max(O[1][D],q))}}}b.plot=function(P,O,F){var I=this;if(I.plotArgs=[P,O,F],I.glplot.contextLost)return;var D,U,B,j,Z,ee,q=O[I.id],W=F[I.id];I.fullLayout=O,I.fullSceneLayout=q,I.axesOptions.merge(O,q),I.spikeOptions.merge(q),I.setViewport(q),I.updateFx(q.dragmode,q.hovermode),I.camera.enableWheel=I.graphDiv._context._scrollZoom.gl3d,I.glplot.setClearColor(l(q.bgcolor)),I.setConvert(Z),P?Array.isArray(P)||(P=[P]):P=[];var J=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(B=0;B<P.length;++B)D=P[B],!(D.visible!==!0||D._length===0)&&T(this,D,J);w(this,J);var le=[1,1,1];for(j=0;j<3;++j)J[1][j]===J[0][j]?le[j]=1:le[j]=1/(J[1][j]-J[0][j]);for(I.dataScale=le,I.convertAnnotations(this),B=0;B<P.length;++B)D=P[B],!(D.visible!==!0||D._length===0)&&(U=I.traces[D.uid],U?U.data.type===D.type?U.update(D):(U.dispose(),U=D._module.plot(this,D),I.traces[D.uid]=U):(U=D._module.plot(this,D),I.traces[D.uid]=U),U.name=D.name);var fe=Object.keys(I.traces);e:for(B=0;B<fe.length;++B){for(j=0;j<P.length;++j)if(P[j].uid===fe[B]&&P[j].visible===!0&&P[j]._length!==0)continue e;U=I.traces[fe[B]],U.dispose(),delete I.traces[fe[B]]}I.glplot.objects.sort(function(We,qe){return We._trace.data.index-qe._trace.data.index});var se=[[0,0,0],[0,0,0]],H=[],Y={};for(B=0;B<3;++B){if(Z=q[_[B]],ee=Z.type,ee in Y?(Y[ee].acc*=le[B],Y[ee].count+=1):Y[ee]={acc:le[B],count:1},Z.autorange){se[0][B]=1/0,se[1][B]=-1/0;var ne=I.glplot.objects,te=I.fullSceneLayout.annotations||[],K=Z._name.charAt(0);for(j=0;j<ne.length;j++){var $=ne[j],ae=$.bounds,ie=$._trace.data._pad||0;$.constructor.name==="ErrorBars"&&Z._lowerLogErrorBound?se[0][B]=Math.min(se[0][B],Z._lowerLogErrorBound):se[0][B]=Math.min(se[0][B],ae[0][B]/le[B]-ie),se[1][B]=Math.max(se[1][B],ae[1][B]/le[B]+ie)}for(j=0;j<te.length;j++){var oe=te[j];if(oe.visible){var ue=Z.r2l(oe[K]);se[0][B]=Math.min(se[0][B],ue),se[1][B]=Math.max(se[1][B],ue)}}if("rangemode"in Z&&Z.rangemode==="tozero"&&(se[0][B]=Math.min(se[0][B],0),se[1][B]=Math.max(se[1][B],0)),se[0][B]>se[1][B])se[0][B]=-1,se[1][B]=1;else{var ye=se[1][B]-se[0][B];se[0][B]-=ye/32,se[1][B]+=ye/32}if(Z.autorange==="reversed"){var ce=se[0][B];se[0][B]=se[1][B],se[1][B]=ce}}else{var me=Z.range;se[0][B]=Z.r2l(me[0]),se[1][B]=Z.r2l(me[1])}se[0][B]===se[1][B]&&(se[0][B]-=1,se[1][B]+=1),H[B]=se[1][B]-se[0][B],I.glplot.setBounds(B,{min:se[0][B]*le[B],max:se[1][B]*le[B]})}var xe,ke=q.aspectmode;if(ke==="cube")xe=[1,1,1];else if(ke==="manual"){var Ae=q.aspectratio;xe=[Ae.x,Ae.y,Ae.z]}else if(ke==="auto"||ke==="data"){var Oe=[1,1,1];for(B=0;B<3;++B){Z=q[_[B]],ee=Z.type;var He=Y[ee];Oe[B]=Math.pow(He.acc,1/He.count)/le[B]}ke==="data"||Math.max.apply(null,Oe)/Math.min.apply(null,Oe)<=4?xe=Oe:xe=[1,1,1]}else throw new Error("scene.js aspectRatio was not one of the enumerated types");q.aspectratio.x=W.aspectratio.x=xe[0],q.aspectratio.y=W.aspectratio.y=xe[1],q.aspectratio.z=W.aspectratio.z=xe[2],I.glplot.setAspectratio(q.aspectratio),I.viewInitial.aspectratio||(I.viewInitial.aspectratio={x:q.aspectratio.x,y:q.aspectratio.y,z:q.aspectratio.z}),I.viewInitial.aspectmode||(I.viewInitial.aspectmode=q.aspectmode);var Ge=q.domain||null,_e=O._size||null;if(Ge&&_e){var Re=I.container.style;Re.position="absolute",Re.left=_e.l+Ge.x[0]*_e.w+"px",Re.top=_e.t+(1-Ge.y[1])*_e.h+"px",Re.width=_e.w*(Ge.x[1]-Ge.x[0])+"px",Re.height=_e.h*(Ge.y[1]-Ge.y[0])+"px"}I.glplot.redraw()},b.destroy=function(){var P=this;!P.glplot||(P.camera.mouseListener.enabled=!1,P.container.removeEventListener("wheel",P.camera.wheelListener),P.camera=null,P.glplot.dispose(),P.container.parentNode.removeChild(P.container),P.glplot=null)};function v(P){return[[P.eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]}function L(P){return{up:{x:P.up[0],y:P.up[1],z:P.up[2]},center:{x:P.center[0],y:P.center[1],z:P.center[2]},eye:{x:P.eye[0],y:P.eye[1],z:P.eye[2]},projection:{type:P._ortho===!0?"orthographic":"perspective"}}}b.getCamera=function(){var P=this;return P.camera.view.recalcMatrix(P.camera.view.lastT()),L(P.camera)},b.setViewport=function(P){var O=this,F=P.camera;O.camera.lookAt.apply(this,v(F)),O.glplot.setAspectratio(P.aspectratio);var I=F.projection.type==="orthographic",D=O.camera._ortho;I!==D&&(O.glplot.redraw(),O.glplot.clearRGBA(),O.glplot.dispose(),O.initializeGLPlot())},b.isCameraChanged=function(P){var O=this,F=O.getCamera(),I=a.nestedProperty(P,O.id+".camera"),D=I.get();function U(ee,q,W,J){var le=["up","center","eye"],fe=["x","y","z"];return q[le[W]]&&ee[le[W]][fe[J]]===q[le[W]][fe[J]]}var B=!1;if(D===void 0)B=!0;else{for(var j=0;j<3;j++)for(var Z=0;Z<3;Z++)if(!U(F,D,j,Z)){B=!0;break}(!D.projection||F.projection&&F.projection.type!==D.projection.type)&&(B=!0)}return B},b.isAspectChanged=function(P){var O=this,F=O.glplot.getAspectratio(),I=a.nestedProperty(P,O.id+".aspectratio"),D=I.get();return D===void 0||D.x!==F.x||D.y!==F.y||D.z!==F.z},b.saveLayout=function(P){var O=this,F=O.fullLayout,I,D,U,B,j,Z,ee=O.isCameraChanged(P),q=O.isAspectChanged(P),W=ee||q;if(W){var J={};if(ee&&(I=O.getCamera(),D=a.nestedProperty(P,O.id+".camera"),U=D.get(),J[O.id+".camera"]=U),q&&(B=O.glplot.getAspectratio(),j=a.nestedProperty(P,O.id+".aspectratio"),Z=j.get(),J[O.id+".aspectratio"]=Z),i.call("_storeDirectGUIEdit",P,F._preGUI,J),ee){D.set(I);var le=a.nestedProperty(F,O.id+".camera");le.set(I)}if(q){j.set(B);var fe=a.nestedProperty(F,O.id+".aspectratio");fe.set(B),O.glplot.redraw()}}return W},b.updateFx=function(P,O){var F=this,I=F.camera;if(I)if(P==="orbit")I.mode="orbit",I.keyBindingMode="rotate";else if(P==="turntable"){I.up=[0,0,1],I.mode="turntable",I.keyBindingMode="rotate";var D=F.graphDiv,U=D._fullLayout,B=F.fullSceneLayout.camera,j=B.up.x,Z=B.up.y,ee=B.up.z;if(ee/Math.sqrt(j*j+Z*Z+ee*ee)<.999){var q=F.id+".camera.up",W={x:0,y:0,z:1},J={};J[q]=W;var le=D.layout;i.call("_storeDirectGUIEdit",le,U._preGUI,J),B.up=W,a.nestedProperty(le,q).set(W)}}else I.keyBindingMode=P;F.fullSceneLayout.hovermode=O};function S(P,O,F){for(var I=0,D=F-1;I<D;++I,--D)for(var U=0;U<O;++U)for(var B=0;B<4;++B){var j=4*(O*I+U)+B,Z=4*(O*D+U)+B,ee=P[j];P[j]=P[Z],P[Z]=ee}}function k(P,O,F){for(var I=0;I<F;++I)for(var D=0;D<O;++D){var U=4*(O*I+D),B=P[U+3];if(B>0)for(var j=255/B,Z=0;Z<3;++Z)P[U+Z]=Math.min(j*P[U+Z],255)}}b.toImage=function(P){var O=this;P||(P="png"),O.staticMode&&O.container.appendChild(y),O.glplot.redraw();var F=O.glplot.gl,I=F.drawingBufferWidth,D=F.drawingBufferHeight;F.bindFramebuffer(F.FRAMEBUFFER,null);var U=new Uint8Array(I*D*4);F.readPixels(0,0,I,D,F.RGBA,F.UNSIGNED_BYTE,U),S(U,I,D),k(U,I,D);var B=document.createElement("canvas");B.width=I,B.height=D;var j=B.getContext("2d"),Z=j.createImageData(I,D);Z.data.set(U),j.putImageData(Z,0,0);var ee;switch(P){case"jpeg":ee=B.toDataURL("image/jpeg");break;case"webp":ee=B.toDataURL("image/webp");break;default:ee=B.toDataURL("image/png")}return O.staticMode&&O.container.removeChild(y),ee},b.setConvert=function(){for(var P=this,O=0;O<3;O++){var F=P.fullSceneLayout[_[O]];n.setConvert(F,P.fullLayout),F.setScale=a.noop}},b.make4thDimension=function(){var P=this,O=P.graphDiv,F=O._fullLayout;P._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},n.setConvert(P._mockAxis,F)},z.exports=A},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(e,z,N){z.exports=function(s,m,x,t){t=t||s.length;for(var i=new Array(t),a=0;a<t;a++)i[a]=[s[a],m[a],x[a]];return i}},{}],610:[function(e,z,N){var u=e("./font_attributes"),s=e("./animation_attributes"),m=e("../components/color/attributes"),x=e("../components/shapes/draw_newshape/attributes"),t=e("./pad_attributes"),i=e("../lib/extend").extendFlat,a=u({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=m.defaultLine,z.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:u({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:i(t({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:m.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:m.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:m.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:x.newshape,activeshape:x.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:i({},s.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:u({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(e,z,N){var u=e("../../lib/sort_object_keys"),s="1.10.1",m='\xA9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',x=['\xA9 <a target="_blank" href="https://carto.com/">Carto</a>',m].join(" "),t=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),i=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),a={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:m,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:x,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:t,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:i,tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},r=u(a);z.exports={requiredVersion:s,styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:a,styleValuesNonMapbox:r,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@"+s+"."].join(`
`),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join(`
`),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",r.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join(`
`),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join(`
`),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":`content: ""; cursor: pointer; position: absolute; background-image: url('data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;`,"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":`display:block; width: 21px; height: 21px; background-image: url('data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E')`}}},{"../../lib/sort_object_keys":526}],612:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){var t=m.split(" "),i=t[0],a=t[1],r=u.isArrayOrTypedArray(x)?u.mean(x):x,n=.5+r/100,f=1.5+r/100,l=["",""],o=[0,0];switch(i){case"top":l[0]="top",o[1]=-f;break;case"bottom":l[0]="bottom",o[1]=f;break}switch(a){case"left":l[1]="right",o[0]=-n;break;case"right":l[1]="left",o[0]=n;break}var c;return l[0]&&l[1]?c=l.join("-"):l[0]?c=l[0]:l[1]?c=l[1]:c="center",{anchor:c,offset:o}}},{"../../lib":503}],613:[function(e,z,N){var u=e("mapbox-gl/dist/mapbox-gl-unminified"),s=e("../../lib"),m=s.strTranslate,x=s.strScale,t=e("../../plots/get_data").getSubplotCalcData,i=e("../../constants/xmlns_namespaces"),a=e("@plotly/d3"),r=e("../../components/drawing"),n=e("../../lib/svg_text_utils"),f=e("./mapbox"),l="mapbox",o=N.constants=e("./constants");N.name=l,N.attr="subplot",N.idRoot=l,N.idRegex=N.attrRegex=s.counterRegex(l),N.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},N.layoutAttributes=e("./layout_attributes"),N.supplyLayoutDefaults=e("./layout_defaults"),N.plot=function(p){var y=p._fullLayout,g=p.calcdata,A=y._subplots[l];if(u.version!==o.requiredVersion)throw new Error(o.wrongVersionErrorMsg);var b=c(p,A);u.accessToken=b;for(var M=0;M<A.length;M++){var _=A[M],T=t(g,l,_),w=y[_],v=w._subplot;v||(v=new f(p,_),y[_]._subplot=v),v.viewInitial||(v.viewInitial={center:s.extendFlat({},w.center),zoom:w.zoom,bearing:w.bearing,pitch:w.pitch}),v.plot(T,y,p._promises)}},N.clean=function(d,p,y,g){for(var A=g._subplots[l]||[],b=0;b<A.length;b++){var M=A[b];!p[M]&&!!g[M]._subplot&&g[M]._subplot.destroy()}},N.toSVG=function(d){for(var p=d._fullLayout,y=p._subplots[l],g=p._size,A=0;A<y.length;A++){var b=p[y[A]],M=b.domain,_=b._subplot,T=_.toImage("png"),w=p._glimages.append("svg:image");w.attr({xmlns:i.svg,"xlink:href":T,x:g.l+g.w*M.x[0],y:g.t+g.h*(1-M.y[1]),width:g.w*(M.x[1]-M.x[0]),height:g.h*(M.y[1]-M.y[0]),preserveAspectRatio:"none"});var v=a.select(b._subplot.div),L=v.select(".mapboxgl-ctrl-logo").node().offsetParent===null;if(!L){var S=p._glimages.append("g");S.attr("transform",m(g.l+g.w*M.x[0]+10,g.t+g.h*(1-M.y[0])-31)),S.append("path").attr("d",o.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),S.append("path").attr("d",o.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),S.append("path").attr("d",o.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),S.append("polygon").attr("points",o.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=v.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),P=p._glimages.append("g"),O=P.append("text");O.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var F=r.bBox(O.node()),I=g.w*(M.x[1]-M.x[0]);if(F.width>I/2){var D=k.split("|").join("<br>");O.text(D).attr("data-unformatted",D).call(n.convertToTspans,d),F=r.bBox(O.node())}O.attr("transform",m(-3,-F.height+8)),P.insert("rect",".static-attribution").attr({x:-F.width-6,y:-F.height-3,width:F.width+6,height:F.height+3,fill:"rgba(255, 255, 255, 0.75)"});var U=1;F.width+6>I&&(U=I/(F.width+6));var B=[g.l+g.w*M.x[1],g.t+g.h*(1-M.y[0])];P.attr("transform",m(B[0],B[1])+x(U))}};function c(d,p){var y=d._fullLayout,g=d._context;if(g.mapboxAccessToken==="")return"";for(var A=[],b=[],M=!1,_=!1,T=0;T<p.length;T++){var w=y[p[T]],v=w.accesstoken;h(w.style)&&(v?s.pushUnique(A,v):(h(w._input.style)&&(s.error("Uses Mapbox map style, but did not set an access token."),M=!0),_=!0)),v&&s.pushUnique(b,v)}if(_){var L=M?o.noAccessTokenErrorMsg:o.missingStyleErrorMsg;throw s.error(L),new Error(L)}return A.length?(A.length>1&&s.warn(o.multipleTokensErrorMsg),A[0]):(b.length&&s.log(["Listed mapbox access token(s)",b.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}function h(d){return typeof d=="string"&&(o.styleValuesMapbox.indexOf(d)!==-1||d.indexOf("mapbox://")===0)}N.updateFx=function(d){for(var p=d._fullLayout,y=p._subplots[l],g=0;g<y.length;g++){var A=p[y[g]]._subplot;A.updateFx(p)}}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(e,z,N){var u=e("../../lib"),s=e("../../lib/svg_text_utils").sanitizeHTML,m=e("./convert_text_opts"),x=e("./constants");function t(f,l){this.subplot=f,this.uid=f.uid+"-"+l,this.index=l,this.idSource="source-"+this.uid,this.idLayer=x.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var i=t.prototype;i.update=function(l){this.visible?this.needsNewImage(l)?this.updateImage(l):this.needsNewSource(l)?(this.removeLayer(),this.updateSource(l),this.updateLayer(l)):this.needsNewLayer(l)?this.updateLayer(l):this.updateStyle(l):(this.updateSource(l),this.updateLayer(l)),this.visible=a(l)},i.needsNewImage=function(f){var l=this.subplot.map;return l.getSource(this.idSource)&&this.sourceType==="image"&&f.sourcetype==="image"&&(this.source!==f.source||JSON.stringify(this.coordinates)!==JSON.stringify(f.coordinates))},i.needsNewSource=function(f){return this.sourceType!==f.sourcetype||JSON.stringify(this.source)!==JSON.stringify(f.source)||this.layerType!==f.type},i.needsNewLayer=function(f){return this.layerType!==f.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},i.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},i.updateImage=function(f){var l=this.subplot.map;l.getSource(this.idSource).updateImage({url:f.source,coordinates:f.coordinates});var o=this.findFollowingMapboxLayerId(this.lookupBelow());o!==null&&this.subplot.map.moveLayer(this.idLayer,o)},i.updateSource=function(f){var l=this.subplot.map;if(l.getSource(this.idSource)&&l.removeSource(this.idSource),this.sourceType=f.sourcetype,this.source=f.source,!!a(f)){var o=n(f);l.addSource(this.idSource,o)}},i.findFollowingMapboxLayerId=function(f){if(f==="traces")for(var l=this.subplot.getMapLayers(),o=0;o<l.length;o++){var c=l[o].id;if(typeof c=="string"&&c.indexOf(x.traceLayerPrefix)===0){f=c;break}}return f},i.updateLayer=function(f){var l=this.subplot,o=r(f),c=this.lookupBelow(),h=this.findFollowingMapboxLayerId(c);this.removeLayer(),a(f)&&l.addLayer({id:this.idLayer,source:this.idSource,"source-layer":f.sourcelayer||"",type:f.type,minzoom:f.minzoom,maxzoom:f.maxzoom,layout:o.layout,paint:o.paint},h),this.layerType=f.type,this.below=c},i.updateStyle=function(f){if(a(f)){var l=r(f);this.subplot.setOptions(this.idLayer,"setLayoutProperty",l.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",l.paint)}},i.removeLayer=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer)},i.dispose=function(){var f=this.subplot.map;f.getLayer(this.idLayer)&&f.removeLayer(this.idLayer),f.getSource(this.idSource)&&f.removeSource(this.idSource)};function a(f){if(!f.visible)return!1;var l=f.source;if(Array.isArray(l)&&l.length>0){for(var o=0;o<l.length;o++)if(typeof l[o]!="string"||l[o].length===0)return!1;return!0}return u.isPlainObject(l)||typeof l=="string"&&l.length>0}function r(f){var l={},o={};switch(f.type){case"circle":u.extendFlat(o,{"circle-radius":f.circle.radius,"circle-color":f.color,"circle-opacity":f.opacity});break;case"line":u.extendFlat(o,{"line-width":f.line.width,"line-color":f.color,"line-opacity":f.opacity,"line-dasharray":f.line.dash});break;case"fill":u.extendFlat(o,{"fill-color":f.color,"fill-outline-color":f.fill.outlinecolor,"fill-opacity":f.opacity});break;case"symbol":var c=f.symbol,h=m(c.textposition,c.iconsize);u.extendFlat(l,{"icon-image":c.icon+"-15","icon-size":c.iconsize/10,"text-field":c.text,"text-size":c.textfont.size,"text-anchor":h.anchor,"text-offset":h.offset,"symbol-placement":c.placement}),u.extendFlat(o,{"icon-color":f.color,"text-color":c.textfont.color,"text-opacity":f.opacity});break;case"raster":u.extendFlat(o,{"raster-fade-duration":0,"raster-opacity":f.opacity});break}return{layout:l,paint:o}}function n(f){var l=f.sourcetype,o=f.source,c={type:l},h;return l==="geojson"?h="data":l==="vector"?h=typeof o=="string"?"url":"tiles":l==="raster"?(h="tiles",c.tileSize=256):l==="image"&&(h="url",c.coordinates=f.coordinates),c[h]=o,f.sourceattribution&&(c.attribution=s(f.sourceattribution)),c}z.exports=function(l,o,c){var h=new t(l,o);return h.update(c),h}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color").defaultLine,m=e("../domain").attributes,x=e("../font_attributes"),t=e("../../traces/scatter/attributes").textposition,i=e("../../plot_api/edit_types").overrideAll,a=e("../../plot_api/plot_template").templatedArray,r=e("./constants"),n=x({});n.family.dflt="Open Sans Regular, Arial Unicode MS Regular";var f=z.exports=i({_arrayAttrRegexps:[u.counterRegex("mapbox",".layers",!0)],domain:m({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:r.styleValuesMapbox.concat(r.styleValuesNonMapbox),dflt:r.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:s},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:s}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:n,textposition:u.extendFlat({},t,{arrayOk:!1})}})},"plot","from-root");f.uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(e,z,N){var u=e("../../lib"),s=e("../subplot_defaults"),m=e("../array_container_defaults"),x=e("./layout_attributes");z.exports=function(r,n,f){s(r,n,f,{type:"mapbox",attributes:x,handleDefaults:t,partition:"y",accessToken:n._mapboxAccessToken})};function t(a,r,n,f){n("accesstoken",f.accessToken),n("style"),n("center.lon"),n("center.lat"),n("zoom"),n("bearing"),n("pitch"),m(a,r,{name:"layers",handleItemDefaults:i}),r._input=a}function i(a,r){function n(d,p){return u.coerce(a,r,x.layers,d,p)}var f=n("visible");if(f){var l=n("sourcetype"),o=l==="raster"||l==="image";n("source"),n("sourceattribution"),l==="vector"&&n("sourcelayer"),l==="image"&&n("coordinates");var c;o&&(c="raster");var h=n("type",c);o&&h!=="raster"&&(h=r.type="raster",u.log("Source types *raster* and *image* must drawn *raster* layer type.")),n("below"),n("color"),n("opacity"),n("minzoom"),n("maxzoom"),h==="circle"&&n("circle.radius"),h==="line"&&(n("line.width"),n("line.dash")),h==="fill"&&n("fill.outlinecolor"),h==="symbol"&&(n("symbol.icon"),n("symbol.iconsize"),n("symbol.text"),u.coerceFont(n,"symbol.textfont"),n("symbol.textposition"),n("symbol.placement"))}}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(e,z,N){var u=e("mapbox-gl/dist/mapbox-gl-unminified"),s=e("../../lib"),m=e("../../lib/geo_location_utils"),x=e("../../registry"),t=e("../cartesian/axes"),i=e("../../components/dragelement"),a=e("../../components/fx"),r=e("../../components/dragelement/helpers"),n=r.rectMode,f=r.drawMode,l=r.selectMode,o=e("../cartesian/select").prepSelect,c=e("../cartesian/select").clearSelect,h=e("../cartesian/select").clearSelectionsCache,d=e("../cartesian/select").selectOnClick,p=e("./constants"),y=e("./layers");function g(w,v){this.id=v,this.gd=w;var L=w._fullLayout,S=w._context;this.container=L._glcontainer.node(),this.isStatic=S.staticPlot,this.uid=L._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(L),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var A=g.prototype;A.plot=function(w,v,L){var S=this,k=v[S.id];S.map&&k.accesstoken!==S.accessToken&&(S.map.remove(),S.map=null,S.styleObj=null,S.traceHash={},S.layerList=[]);var P;S.map?P=new Promise(function(O,F){S.updateMap(w,v,O,F)}):P=new Promise(function(O,F){S.createMap(w,v,O,F)}),L.push(P)},A.createMap=function(w,v,L,S){var k=this,P=v[k.id],O=k.styleObj=M(P.style);k.accessToken=P.accesstoken;var F=k.map=new u.Map({container:k.div,style:O.style,center:T(P.center),zoom:P.zoom,bearing:P.bearing,pitch:P.pitch,interactive:!k.isStatic,preserveDrawingBuffer:k.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new u.AttributionControl({compact:!0}));F._canvas.style.left="0px",F._canvas.style.top="0px",k.rejectOnError(S),k.isStatic||k.initFx(w,v);var I=[];I.push(new Promise(function(D){F.once("load",D)})),I=I.concat(m.fetchTraceGeoData(w)),Promise.all(I).then(function(){k.fillBelowLookup(w,v),k.updateData(w),k.updateLayout(v),k.resolveOnRender(L)}).catch(S)},A.updateMap=function(w,v,L,S){var k=this,P=k.map,O=v[this.id];k.rejectOnError(S);var F=[],I=M(O.style);JSON.stringify(k.styleObj)!==JSON.stringify(I)&&(k.styleObj=I,P.setStyle(I.style),k.traceHash={},F.push(new Promise(function(D){P.once("styledata",D)}))),F=F.concat(m.fetchTraceGeoData(w)),Promise.all(F).then(function(){k.fillBelowLookup(w,v),k.updateData(w),k.updateLayout(v),k.resolveOnRender(L)}).catch(S)},A.fillBelowLookup=function(w,v){var L=v[this.id],S=L.layers,k,P,O=this.belowLookup={},F=!1;for(k=0;k<w.length;k++){var I=w[k][0].trace,D=I._module;typeof I.below=="string"?P=I.below:D.getBelow&&(P=D.getBelow(I,this)),P===""&&(F=!0),O["trace-"+I.uid]=P||""}for(k=0;k<S.length;k++){var U=S[k];typeof U.below=="string"?P=U.below:F?P="traces":P="",O["layout-"+k]=P}var B={},j,Z;for(j in O)P=O[j],B[P]?B[P].push(j):B[P]=[j];for(P in B){var ee=B[P];if(ee.length>1)for(k=0;k<ee.length;k++)j=ee[k],j.indexOf("trace-")===0?(Z=j.split("trace-")[1],this.traceHash[Z]&&(this.traceHash[Z].below=null)):j.indexOf("layout-")===0&&(Z=j.split("layout-")[1],this.layerList[Z]&&(this.layerList[Z].below=null))}};var b={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};A.updateData=function(w){var v=this.traceHash,L,S,k,P,O=w.slice().sort(function(B,j){return b[B[0].trace.type]-b[j[0].trace.type]});for(k=0;k<O.length;k++){var F=O[k];S=F[0].trace,L=v[S.uid];var I=!1;L&&(L.type===S.type?(L.update(F),I=!0):L.dispose()),!I&&S._module&&(v[S.uid]=S._module.plot(this,F))}var D=Object.keys(v);e:for(k=0;k<D.length;k++){var U=D[k];for(P=0;P<w.length;P++)if(S=w[P][0].trace,U===S.uid)continue e;L=v[U],L.dispose(),delete v[U]}},A.updateLayout=function(w){var v=this.map,L=w[this.id];!this.dragging&&!this.wheeling&&(v.setCenter(T(L.center)),v.setZoom(L.zoom),v.setBearing(L.bearing),v.setPitch(L.pitch)),this.updateLayers(w),this.updateFramework(w),this.updateFx(w),this.map.resize(),this.gd._context._scrollZoom.mapbox?v.scrollZoom.enable():v.scrollZoom.disable()},A.resolveOnRender=function(w){var v=this.map;v.on("render",function L(){v.loaded()&&(v.off("render",L),setTimeout(w,10))})},A.rejectOnError=function(w){var v=this.map;function L(){w(new Error(p.mapOnErrorMsg))}v.once("error",L),v.once("style.error",L),v.once("source.error",L),v.once("tile.error",L),v.once("layer.error",L)},A.createFramework=function(w){var v=this,L=v.div=document.createElement("div");L.id=v.uid,L.style.position="absolute",v.container.appendChild(L),v.xaxis={_id:"x",c2p:function(S){return v.project(S).x}},v.yaxis={_id:"y",c2p:function(S){return v.project(S).y}},v.updateFramework(w),v.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},t.setConvert(v.mockAxis,w)},A.initFx=function(w,v){var L=this,S=L.gd,k=L.map;k.on("moveend",function(F){if(!!L.map){var I=S._fullLayout;if(F.originalEvent||L.wheeling){var D=I[L.id];x.call("_storeDirectGUIEdit",S.layout,I._preGUI,L.getViewEdits(D));var U=L.getView();D._input.center=D.center=U.center,D._input.zoom=D.zoom=U.zoom,D._input.bearing=D.bearing=U.bearing,D._input.pitch=D.pitch=U.pitch,S.emit("plotly_relayout",L.getViewEditsWithDerived(U))}F.originalEvent&&F.originalEvent.type==="mouseup"?L.dragging=!1:L.wheeling&&(L.wheeling=!1),I._rehover&&I._rehover()}}),k.on("wheel",function(){L.wheeling=!0}),k.on("mousemove",function(F){var I=L.div.getBoundingClientRect(),D=[F.originalEvent.offsetX,F.originalEvent.offsetY];F.target.getBoundingClientRect=function(){return I},L.xaxis.p2c=function(){return k.unproject(D).lng},L.yaxis.p2c=function(){return k.unproject(D).lat},S._fullLayout._rehover=function(){S._fullLayout._hoversubplot===L.id&&S._fullLayout[L.id]&&a.hover(S,F,L.id)},a.hover(S,F,L.id),S._fullLayout._hoversubplot=L.id});function P(){a.loneUnhover(v._hoverlayer)}k.on("dragstart",function(){L.dragging=!0,P()}),k.on("zoomstart",P),k.on("mouseout",function(){S._fullLayout._hoversubplot=null});function O(){var F=L.getView();S.emit("plotly_relayouting",L.getViewEditsWithDerived(F))}k.on("drag",O),k.on("zoom",O),k.on("dblclick",function(){var F=S._fullLayout[L.id];x.call("_storeDirectGUIEdit",S.layout,S._fullLayout._preGUI,L.getViewEdits(F));var I=L.viewInitial;k.setCenter(T(I.center)),k.setZoom(I.zoom),k.setBearing(I.bearing),k.setPitch(I.pitch);var D=L.getView();F._input.center=F.center=D.center,F._input.zoom=F.zoom=D.zoom,F._input.bearing=F.bearing=D.bearing,F._input.pitch=F.pitch=D.pitch,S.emit("plotly_doubleclick",null),S.emit("plotly_relayout",L.getViewEditsWithDerived(D))}),L.clearSelect=function(){h(L.dragOptions),c(L.dragOptions.gd)},L.onClickInPanFn=function(F){return function(I){var D=S._fullLayout.clickmode;D.indexOf("select")>-1&&d(I.originalEvent,S,[L.xaxis],[L.yaxis],L.id,F),D.indexOf("event")>-1&&a.click(S,I.originalEvent)}}},A.updateFx=function(w){var v=this,L=v.map,S=v.gd;if(v.isStatic)return;function k(I){var D=v.map.unproject(I);return[D.lng,D.lat]}var P=w.dragmode,O;n(P)?O=function(I,D){var U=I.range={};U[v.id]=[k([D.xmin,D.ymin]),k([D.xmax,D.ymax])]}:O=function(I,D,U){var B=I.lassoPoints={};B[v.id]=U.filtered.map(k)};var F=v.dragOptions;v.dragOptions=s.extendDeep(F||{},{dragmode:w.dragmode,element:v.div,gd:S,plotinfo:{id:v.id,domain:w[v.id].domain,xaxis:v.xaxis,yaxis:v.yaxis,fillRangeItems:O},xaxes:[v.xaxis],yaxes:[v.yaxis],subplot:v.id}),L.off("click",v.onClickInPanHandler),l(P)||f(P)?(L.dragPan.disable(),L.on("zoomstart",v.clearSelect),v.dragOptions.prepFn=function(I,D,U){o(I,D,U,v.dragOptions,P)},i.init(v.dragOptions)):(L.dragPan.enable(),L.off("zoomstart",v.clearSelect),v.div.onmousedown=null,v.onClickInPanHandler=v.onClickInPanFn(v.dragOptions),L.on("click",v.onClickInPanHandler))},A.updateFramework=function(w){var v=w[this.id].domain,L=w._size,S=this.div.style;S.width=L.w*(v.x[1]-v.x[0])+"px",S.height=L.h*(v.y[1]-v.y[0])+"px",S.left=L.l+v.x[0]*L.w+"px",S.top=L.t+(1-v.y[1])*L.h+"px",this.xaxis._offset=L.l+v.x[0]*L.w,this.xaxis._length=L.w*(v.x[1]-v.x[0]),this.yaxis._offset=L.t+(1-v.y[1])*L.h,this.yaxis._length=L.h*(v.y[1]-v.y[0])},A.updateLayers=function(w){var v=w[this.id],L=v.layers,S=this.layerList,k;if(L.length!==S.length){for(k=0;k<S.length;k++)S[k].dispose();for(S=this.layerList=[],k=0;k<L.length;k++)S.push(y(this,k,L[k]))}else for(k=0;k<L.length;k++)S[k].update(L[k])},A.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},A.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},A.setOptions=function(w,v,L){for(var S in L)this.map[v](w,S,L[S])},A.getMapLayers=function(){return this.map.getStyle().layers},A.addLayer=function(w,v){var L=this.map;if(typeof v=="string"){if(v===""){L.addLayer(w,v);return}for(var S=this.getMapLayers(),k=0;k<S.length;k++)if(v===S[k].id){L.addLayer(w,v);return}s.warn(["Trying to add layer with *below* value",v,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}L.addLayer(w)},A.project=function(w){return this.map.project(new u.LngLat(w[0],w[1]))},A.getView=function(){var w=this.map,v=w.getCenter(),L=v.lng,S=v.lat,k={lon:L,lat:S},P=w.getCanvas(),O=parseInt(P.style.width),F=parseInt(P.style.height);return{center:k,zoom:w.getZoom(),bearing:w.getBearing(),pitch:w.getPitch(),_derived:{coordinates:[w.unproject([0,0]).toArray(),w.unproject([O,0]).toArray(),w.unproject([O,F]).toArray(),w.unproject([0,F]).toArray()]}}},A.getViewEdits=function(w){for(var v=this.id,L=["center","zoom","bearing","pitch"],S={},k=0;k<L.length;k++){var P=L[k];S[v+"."+P]=w[P]}return S},A.getViewEditsWithDerived=function(w){var v=this.id,L=this.getViewEdits(w);return L[v+"._derived"]=w._derived,L};function M(w){var v={};return s.isPlainObject(w)?(v.id=w.id,v.style=w):typeof w=="string"?(v.id=w,p.styleValuesMapbox.indexOf(w)!==-1?v.style=_(w):p.stylesNonMapbox[w]?v.style=p.stylesNonMapbox[w]:v.style=w):(v.id=p.styleValueDflt,v.style=_(p.styleValueDflt)),v.transition={duration:0,delay:0},v}function _(w){return p.styleUrlPrefix+w+"-"+p.styleUrlSuffix}function T(w){return[w.lon,w.lat]}z.exports=g},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(e,z,N){z.exports=function(u){var s=u.editType;return{t:{valType:"number",dflt:0,editType:s},r:{valType:"number",dflt:0,editType:s},b:{valType:"number",dflt:0,editType:s},l:{valType:"number",dflt:0,editType:s},editType:s}}},{}],619:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-time-format").timeFormatLocale,m=e("d3-format").formatLocale,x=e("fast-isnumeric"),t=e("../registry"),i=e("../plot_api/plot_schema"),a=e("../plot_api/plot_template"),r=e("../lib"),n=e("../components/color"),f=e("../constants/numerical").BADNUM,l=e("./cartesian/axis_ids"),o=e("./cartesian/handle_outline").clearSelect,c=e("./animation_attributes"),h=e("./frame_attributes"),d=e("../plots/get_data").getModuleCalcData,p=r.relinkPrivateKeys,y=r._,g=z.exports={};r.extendFlat(g,t),g.attributes=e("./attributes"),g.attributes.type.values=g.allTypes,g.fontAttrs=e("./font_attributes"),g.layoutAttributes=e("./layout_attributes"),g.fontWeight="normal";var A=g.transformsRegistry,b=e("./command");g.executeAPICommand=b.executeAPICommand,g.computeAPICommandBindings=b.computeAPICommandBindings,g.manageCommandObserver=b.manageCommandObserver,g.hasSimpleAPICommandBindings=b.hasSimpleAPICommandBindings,g.redrawText=function(H){return H=r.getGraphDiv(H),new Promise(function(Y){setTimeout(function(){!H._fullLayout||(t.getComponentMethod("annotations","draw")(H),t.getComponentMethod("legend","draw")(H),t.getComponentMethod("colorbar","draw")(H),Y(g.previousPromises(H)))},300)})},g.resize=function(H){H=r.getGraphDiv(H);var Y,ne=new Promise(function(te,K){(!H||r.isHidden(H))&&K(new Error("Resize must be passed a displayed plot div element.")),H._redrawTimer&&clearTimeout(H._redrawTimer),H._resolveResize&&(Y=H._resolveResize),H._resolveResize=te,H._redrawTimer=setTimeout(function(){if(!H.layout||H.layout.width&&H.layout.height||r.isHidden(H)){te(H);return}delete H.layout.width,delete H.layout.height;var $=H.changed;H.autoplay=!0,t.call("relayout",H,{autosize:!0}).then(function(){H.changed=$,H._resolveResize===te&&(delete H._resolveResize,te(H))})},100)});return Y&&Y(ne),ne},g.previousPromises=function(H){if((H._promises||[]).length)return Promise.all(H._promises).then(function(){H._promises=[]})},g.addLinks=function(H){if(!(!H._context.showLink&&!H._context.showSources)){var Y=H._fullLayout,ne=r.ensureSingle(Y._paper,"text","js-plot-link-container",function(oe){oe.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:n.defaultLine,"pointer-events":"all"}).each(function(){var ue=u.select(this);ue.append("tspan").classed("js-link-to-tool",!0),ue.append("tspan").classed("js-link-spacer",!0),ue.append("tspan").classed("js-sourcelinks",!0)})}),te=ne.node(),K={y:Y._paper.attr("height")-9};document.body.contains(te)&&te.getComputedTextLength()>=Y.width-20?(K["text-anchor"]="start",K.x=5):(K["text-anchor"]="end",K.x=Y._paper.attr("width")-7),ne.attr(K);var $=ne.select(".js-link-to-tool"),ae=ne.select(".js-link-spacer"),ie=ne.select(".js-sourcelinks");H._context.showSources&&H._context.showSources(H),H._context.showLink&&M(H,$),ae.text($.text()&&ie.text()?" - ":"")}};function M(H,Y){Y.text("");var ne=Y.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(H._context.linkText+" "+String.fromCharCode(187));if(H._context.sendData)ne.on("click",function(){g.sendDataToCloud(H)});else{var te=window.location.pathname.split("/"),K=window.location.search;ne.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+te[2].split(".")[0]+"/"+te[1]+K})}}g.sendDataToCloud=function(H){var Y=(window.PLOTLYENV||{}).BASE_URL||H._context.plotlyServerURL;if(!!Y){H.emit("plotly_beforeexport");var ne=u.select(H).append("div").attr("id","hiddenform").style("display","none"),te=ne.append("form").attr({action:Y+"/external",method:"post",target:"_blank"}),K=te.append("input").attr({type:"text",name:"data"});return K.node().value=g.graphJson(H,!1,"keepdata"),te.node().submit(),ne.remove(),H.emit("plotly_afterexport"),!1}};var _=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],T=["year","month","dayMonth","dayMonthYear"];g.supplyDefaults=function(H,Y){var ne=Y&&Y.skipUpdateCalc,te=H._fullLayout||{};if(te._skipDefaults){delete te._skipDefaults;return}var K=H._fullLayout={},$=H.layout||{},ae=H._fullData||[],ie=H._fullData=[],oe=H.data||[],ue=H.calcdata||[],ye=H._context||{},ce;H._transitionData||g.createTransitionData(H),K._dfltTitle={plot:y(H,"Click to enter Plot title"),x:y(H,"Click to enter X axis title"),y:y(H,"Click to enter Y axis title"),colorbar:y(H,"Click to enter Colorscale title"),annotation:y(H,"new text")},K._traceWord=y(H,"trace");var me=L(H,_);if(K._mapboxAccessToken=ye.mapboxAccessToken,te._initialAutoSizeIsDone){var xe=te.width,ke=te.height;g.supplyLayoutGlobalDefaults($,K,me),$.width||(K.width=xe),$.height||(K.height=ke),g.sanitizeMargins(K)}else{g.supplyLayoutGlobalDefaults($,K,me);var Ae=!$.width||!$.height,Oe=K.autosize,He=ye.autosizable,Ge=Ae&&(Oe||He);Ge?g.plotAutoSize(H,$,K):Ae&&g.sanitizeMargins(K),!Oe&&Ae&&($.width=K.width,$.height=K.height)}K._d3locale=S(me,K.separators),K._extraFormat=L(H,T),K._initialAutoSizeIsDone=!0,K._dataLength=oe.length,K._modules=[],K._visibleModules=[],K._basePlotModules=[];var _e=K._subplots=v(),Re=K._splomAxes={x:{},y:{}},We=K._splomSubplots={};K._splomGridDflt={},K._scatterStackOpts={},K._firstScatter={},K._alignmentOpts={},K._colorAxes={},K._requestRangeslider={},K._traceUids=w(ae,oe),K._globalTransforms=(H._context||{}).globalTransforms,g.supplyDataDefaults(oe,ie,$,K);var qe=Object.keys(Re.x),Ue=Object.keys(Re.y);if(qe.length>1&&Ue.length>1){for(t.getComponentMethod("grid","sizeDefaults")($,K),ce=0;ce<qe.length;ce++)r.pushUnique(_e.xaxis,qe[ce]);for(ce=0;ce<Ue.length;ce++)r.pushUnique(_e.yaxis,Ue[ce]);for(var Ie in We)r.pushUnique(_e.cartesian,Ie)}if(K._has=g._hasPlotType.bind(K),ae.length===ie.length)for(ce=0;ce<ie.length;ce++)p(ie[ce],ae[ce]);g.supplyLayoutModuleDefaults($,K,ie,H._transitionData);var Ve=K._visibleModules,dt=[];for(ce=0;ce<Ve.length;ce++){var Rt=Ve[ce].crossTraceDefaults;Rt&&r.pushUnique(dt,Rt)}for(ce=0;ce<dt.length;ce++)dt[ce](ie,K);K._hasOnlyLargeSploms=K._basePlotModules.length===1&&K._basePlotModules[0].name==="splom"&&qe.length>15&&Ue.length>15&&K.shapes.length===0&&K.images.length===0,g.linkSubplots(ie,K,ae,te),g.cleanPlot(ie,K,ae,te);var Gt=!!(te._has&&te._has("gl2d")),kt=!!(K._has&&K._has("gl2d")),zt=!!(te._has&&te._has("cartesian")),Bt=!!(K._has&&K._has("cartesian")),Lt=zt||Gt,Mt=Bt||kt;Lt&&!Mt?te._bgLayer.remove():Mt&&!Lt&&(K._shouldCreateBgLayer=!0),te._zoomlayer&&!H._dragging&&o({_fullLayout:te}),k(ie,K),p(K,te),t.getComponentMethod("colorscale","crossTraceDefaults")(ie,K),K._preGUI||(K._preGUI={}),K._tracePreGUI||(K._tracePreGUI={});var it=K._tracePreGUI,ht={},Qe;for(Qe in it)ht[Qe]="old";for(ce=0;ce<ie.length;ce++)Qe=ie[ce]._fullInput.uid,ht[Qe]||(it[Qe]={}),ht[Qe]="new";for(Qe in ht)ht[Qe]==="old"&&delete it[Qe];D(K),t.getComponentMethod("rangeslider","makeData")(K),!ne&&ue.length===ie.length&&g.supplyDefaultsUpdateCalc(ue,ie)},g.supplyDefaultsUpdateCalc=function(H,Y){for(var ne=0;ne<Y.length;ne++){var te=Y[ne],K=(H[ne]||[])[0];if(K&&K.trace){var $=K.trace;if($._hasCalcTransform){var ae=$._arrayAttrs,ie,oe,ue;for(ie=0;ie<ae.length;ie++)oe=ae[ie],ue=r.nestedProperty($,oe).get().slice(),r.nestedProperty(te,oe).set(ue)}K.trace=te}}};function w(H,Y){var ne=Y.length,te=[],K,$;for(K=0;K<H.length;K++){var ae=H[K]._fullInput;ae!==$&&te.push(ae),$=ae}var ie=te.length,oe=new Array(ne),ue={};function ye(xe,ke){oe[ke]=xe,ue[xe]=1}function ce(xe,ke){if(xe&&typeof xe=="string"&&!ue[xe])return ye(xe,ke),!0}for(K=0;K<ne;K++){var me=Y[K].uid;typeof me=="number"&&(me=String(me)),!ce(me,K)&&(K<ie&&ce(te[K].uid,K)||ye(r.randstr(ue),K))}return oe}function v(){var H=t.collectableSubplotTypes,Y={},ne,te;if(!H){H=[];var K=t.subplotsRegistry;for(var $ in K){var ae=K[$],ie=ae.attr;if(ie&&(H.push($),Array.isArray(ie)))for(te=0;te<ie.length;te++)r.pushUnique(H,ie[te])}}for(ne=0;ne<H.length;ne++)Y[H[ne]]=[];return Y}function L(H,Y){var ne=H._context.locale;ne||(ne="en-US");var te=!1,K={};function $(ce){for(var me=!0,xe=0;xe<Y.length;xe++){var ke=Y[xe];K[ke]||(ce[ke]?K[ke]=ce[ke]:me=!1)}me&&(te=!0)}for(var ae=0;ae<2;ae++){for(var ie=H._context.locales,oe=0;oe<2;oe++){var ue=(ie[ne]||{}).format;if(ue&&($(ue),te))break;ie=t.localeRegistry}var ye=ne.split("-")[0];if(te||ye===ne)break;ne=ye}return te||$(t.localeRegistry.en.format),K}function S(H,Y){return H.decimal=Y.charAt(0),H.thousands=Y.charAt(1),{numberFormat:function(ne){try{ne=m(H).format(r.adjustFormat(ne))}catch{return r.warnBadFormat(ne),r.noFormat}return ne},timeFormat:s(H).utcFormat}}function k(H,Y){var ne,te=[];Y.meta&&(ne=Y._meta={meta:Y.meta,layout:{meta:Y.meta}});for(var K=0;K<H.length;K++){var $=H[K];$.meta?te[$.index]=$._meta={meta:$.meta}:Y.meta&&($._meta={meta:Y.meta}),Y.meta&&($._meta.layout={meta:Y.meta})}te.length&&(ne||(ne=Y._meta={}),ne.data=te)}g.createTransitionData=function(H){H._transitionData||(H._transitionData={}),H._transitionData._frames||(H._transitionData._frames=[]),H._transitionData._frameHash||(H._transitionData._frameHash={}),H._transitionData._counter||(H._transitionData._counter=0),H._transitionData._interruptCallbacks||(H._transitionData._interruptCallbacks=[])},g._hasPlotType=function(H){var Y,ne=this._basePlotModules||[];for(Y=0;Y<ne.length;Y++)if(ne[Y].name===H)return!0;var te=this._modules||[];for(Y=0;Y<te.length;Y++){var K=te[Y].name;if(K===H)return!0;var $=t.modules[K];if($&&$.categories[H])return!0}return!1},g.cleanPlot=function(H,Y,ne,te){var K,$,ae=te._basePlotModules||[];for(K=0;K<ae.length;K++){var ie=ae[K];ie.clean&&ie.clean(H,Y,ne,te)}var oe=te._has&&te._has("gl"),ue=Y._has&&Y._has("gl");oe&&!ue&&te._glcontainer!==void 0&&(te._glcontainer.selectAll(".gl-canvas").remove(),te._glcontainer.selectAll(".no-webgl").remove(),te._glcanvas=null);var ye=!!te._infolayer;e:for(K=0;K<ne.length;K++){var ce=ne[K],me=ce.uid;for($=0;$<H.length;$++){var xe=H[$];if(me===xe.uid)continue e}ye&&te._infolayer.select(".cb"+me).remove()}},g.linkSubplots=function(H,Y,ne,te){var K,$,ae=te._plots||{},ie=Y._plots={},oe=Y._subplots,ue={_fullData:H,_fullLayout:Y},ye=oe.cartesian.concat(oe.gl2d||[]);for(K=0;K<ye.length;K++){var ce=ye[K],me=ae[ce],xe=l.getFromId(ue,ce,"x"),ke=l.getFromId(ue,ce,"y"),Ae;for(me?Ae=ie[ce]=me:(Ae=ie[ce]={},Ae.id=ce),xe._counterAxes.push(ke._id),ke._counterAxes.push(xe._id),xe._subplotsWith.push(ce),ke._subplotsWith.push(ce),Ae.xaxis=xe,Ae.yaxis=ke,Ae._hasClipOnAxisFalse=!1,$=0;$<H.length;$++){var Oe=H[$];if(Oe.xaxis===Ae.xaxis._id&&Oe.yaxis===Ae.yaxis._id&&Oe.cliponaxis===!1){Ae._hasClipOnAxisFalse=!0;break}}}var He=l.list(ue,null,!0),Ge;for(K=0;K<He.length;K++){Ge=He[K];var _e=null;Ge.overlaying&&(_e=l.getFromId(ue,Ge.overlaying),_e&&_e.overlaying&&(Ge.overlaying=!1,_e=null)),Ge._mainAxis=_e||Ge,_e&&(Ge.domain=_e.domain.slice()),Ge._anchorAxis=Ge.anchor==="free"?null:l.getFromId(ue,Ge.anchor)}for(K=0;K<He.length;K++)if(Ge=He[K],Ge._counterAxes.sort(l.idSort),Ge._subplotsWith.sort(r.subplotSort),Ge._mainSubplot=P(Ge,Y),Ge._counterAxes.length&&(Ge.spikemode&&Ge.spikemode.indexOf("across")!==-1||Ge.automargin&&Ge.mirror&&Ge.anchor!=="free"||t.getComponentMethod("rangeslider","isVisible")(Ge))){var Re=1,We=0;for($=0;$<Ge._counterAxes.length;$++){var qe=l.getFromId(ue,Ge._counterAxes[$]);Re=Math.min(Re,qe.domain[0]),We=Math.max(We,qe.domain[1])}Re<We&&(Ge._counterDomainMin=Re,Ge._counterDomainMax=We)}};function P(H,Y){var ne={_fullLayout:Y},te=H._id.charAt(0)==="x",K=H._mainAxis._anchorAxis,$="",ae="",ie="";if(K&&(ie=K._mainAxis._id,$=te?H._id+ie:ie+H._id),!$||!Y._plots[$]){$="";for(var oe=H._counterAxes,ue=0;ue<oe.length;ue++){var ye=oe[ue],ce=te?H._id+ye:ye+H._id;ae||(ae=ce);var me=l.getFromId(ne,ye);if(ie&&me.overlaying===ie){$=ce;break}}}return $||ae}g.clearExpandedTraceDefaultColors=function(H){var Y,ne,te;function K(ae,ie,oe,ue){ne[ue]=ie,ne.length=ue+1,ae.valType==="color"&&ae.dflt===void 0&&Y.push(ne.join("."))}for(ne=[],Y=H._module._colorAttrs,Y||(H._module._colorAttrs=Y=[],i.crawl(H._module.attributes,K)),te=0;te<Y.length;te++){var $=r.nestedProperty(H,"_input."+Y[te]);$.get()||r.nestedProperty(H,Y[te]).set(null)}},g.supplyDataDefaults=function(H,Y,ne,te){var K=te._modules,$=te._visibleModules,ae=te._basePlotModules,ie=0,oe=0,ue,ye,ce;te._transformModules=[];function me(Ue){Y.push(Ue);var Ie=Ue._module;!Ie||(r.pushUnique(K,Ie),Ue.visible===!0&&r.pushUnique($,Ie),r.pushUnique(ae,Ue._module.basePlotModule),ie++,Ue._input.visible!==!1&&oe++)}var xe={},ke=[],Ae=(ne.template||{}).data||{},Oe=a.traceTemplater(Ae);for(ue=0;ue<H.length;ue++){if(ce=H[ue],ye=Oe.newTrace(ce),ye.uid=te._traceUids[ue],g.supplyTraceDefaults(ce,ye,oe,te,ue),ye.index=ue,ye._input=ce,ye._expandedIndex=ie,ye.transforms&&ye.transforms.length)for(var He=ce.visible!==!1&&ye.visible===!1,Ge=F(ye,Y,ne,te),_e=0;_e<Ge.length;_e++){var Re=Ge[_e],We={_template:ye._template,type:ye.type,uid:ye.uid+_e};He&&Re.visible===!1&&delete Re.visible,g.supplyTraceDefaults(Re,We,ie,te,ue),p(We,Re),We.index=ue,We._input=ce,We._fullInput=ye,We._expandedIndex=ie,We._expandedInput=Re,me(We)}else ye._fullInput=ye,ye._expandedInput=ye,me(ye);t.traceIs(ye,"carpetAxis")&&(xe[ye.carpet]=ye),t.traceIs(ye,"carpetDependent")&&ke.push(ue)}for(ue=0;ue<ke.length;ue++)if(ye=Y[ke[ue]],!!ye.visible){var qe=xe[ye.carpet];if(ye._carpet=qe,!qe||!qe.visible){ye.visible=!1;continue}ye.xaxis=qe.xaxis,ye.yaxis=qe.yaxis}},g.supplyAnimationDefaults=function(H){H=H||{};var Y,ne={};function te(K,$){return r.coerce(H||{},ne,c,K,$)}if(te("mode"),te("direction"),te("fromcurrent"),Array.isArray(H.frame))for(ne.frame=[],Y=0;Y<H.frame.length;Y++)ne.frame[Y]=g.supplyAnimationFrameDefaults(H.frame[Y]||{});else ne.frame=g.supplyAnimationFrameDefaults(H.frame||{});if(Array.isArray(H.transition))for(ne.transition=[],Y=0;Y<H.transition.length;Y++)ne.transition[Y]=g.supplyAnimationTransitionDefaults(H.transition[Y]||{});else ne.transition=g.supplyAnimationTransitionDefaults(H.transition||{});return ne},g.supplyAnimationFrameDefaults=function(H){var Y={};function ne(te,K){return r.coerce(H||{},Y,c.frame,te,K)}return ne("duration"),ne("redraw"),Y},g.supplyAnimationTransitionDefaults=function(H){var Y={};function ne(te,K){return r.coerce(H||{},Y,c.transition,te,K)}return ne("duration"),ne("easing"),Y},g.supplyFrameDefaults=function(H){var Y={};function ne(te,K){return r.coerce(H,Y,h,te,K)}return ne("group"),ne("name"),ne("traces"),ne("baseframe"),ne("data"),ne("layout"),Y},g.supplyTraceDefaults=function(H,Y,ne,te,K){var $=te.colorway||n.defaults,ae=$[ne%$.length],ie;function oe(Ge,_e){return r.coerce(H,Y,g.attributes,Ge,_e)}var ue=oe("visible");oe("type"),oe("name",te._traceWord+" "+K),oe("uirevision",te.uirevision);var ye=g.getModule(Y);if(Y._module=ye,ye){var ce=ye.basePlotModule,me=ce.attr,xe=ce.attributes;if(me&&xe){var ke=te._subplots,Ae="";if(ue||ce.name!=="gl2d"){if(Array.isArray(me))for(ie=0;ie<me.length;ie++){var Oe=me[ie],He=r.coerce(H,Y,xe,Oe);ke[Oe]&&r.pushUnique(ke[Oe],He),Ae+=He}else Ae=r.coerce(H,Y,xe,me);ke[ce.name]&&r.pushUnique(ke[ce.name],Ae)}}}return ue&&(oe("customdata"),oe("ids"),oe("meta"),t.traceIs(Y,"showLegend")?(r.coerce(H,Y,ye.attributes.showlegend?ye.attributes:g.attributes,"showlegend"),oe("legendgroup"),oe("legendgrouptitle.text"),oe("legendrank"),Y._dfltShowLegend=!0):Y._dfltShowLegend=!1,ye&&ye.supplyDefaults(H,Y,ae,te),t.traceIs(Y,"noOpacity")||oe("opacity"),t.traceIs(Y,"notLegendIsolatable")&&(Y.visible=!!Y.visible),t.traceIs(Y,"noHover")||(Y.hovertemplate||r.coerceHoverinfo(H,Y,te),Y.type!=="parcats"&&t.getComponentMethod("fx","supplyDefaults")(H,Y,ae,te)),ye&&ye.selectPoints&&oe("selectedpoints"),g.supplyTransformDefaults(H,Y,te)),Y};function O(H){var Y=H.transforms;if(Array.isArray(Y)&&Y.length)for(var ne=0;ne<Y.length;ne++){var te=Y[ne],K=te._module||A[te.type];if(K&&K.makesData)return!0}return!1}g.hasMakesDataTransform=O,g.supplyTransformDefaults=function(H,Y,ne){if(!!(Y._length||O(H))){var te=ne._globalTransforms||[],K=ne._transformModules||[];if(!(!Array.isArray(H.transforms)&&te.length===0))for(var $=H.transforms||[],ae=te.concat($),ie=Y.transforms=[],oe=0;oe<ae.length;oe++){var ue=ae[oe],ye=ue.type,ce=A[ye],me,xe=!(ue._module&&ue._module===ce),ke=ce&&typeof ce.transform=="function";ce||r.warn("Unrecognized transform type "+ye+"."),ce&&ce.supplyDefaults&&(xe||ke)?(me=ce.supplyDefaults(ue,Y,ne,H),me.type=ye,me._module=ce,r.pushUnique(K,ce)):me=r.extendFlat({},ue),ie.push(me)}}};function F(H,Y,ne,te){for(var K=H.transforms,$=[H],ae=0;ae<K.length;ae++){var ie=K[ae],oe=A[ie.type];oe&&oe.transform&&($=oe.transform($,{transform:ie,fullTrace:H,fullData:Y,layout:ne,fullLayout:te,transformIndex:ae}))}return $}g.supplyLayoutGlobalDefaults=function(H,Y,ne){function te(ue,ye){return r.coerce(H,Y,g.layoutAttributes,ue,ye)}var K=H.template;r.isPlainObject(K)&&(Y.template=K,Y._template=K.layout,Y._dataTemplate=K.data),te("autotypenumbers");var $=r.coerceFont(te,"font"),ae=$.size;r.coerceFont(te,"title.font",r.extendFlat({},$,{size:Math.round(ae*1.4)})),te("title.text",Y._dfltTitle.plot),te("title.xref"),te("title.yref"),te("title.x"),te("title.y"),te("title.xanchor"),te("title.yanchor"),te("title.pad.t"),te("title.pad.r"),te("title.pad.b"),te("title.pad.l");var ie=te("uniformtext.mode");ie&&te("uniformtext.minsize"),te("autosize",!(H.width&&H.height)),te("width"),te("height"),te("margin.l"),te("margin.r"),te("margin.t"),te("margin.b"),te("margin.pad"),te("margin.autoexpand"),H.width&&H.height&&g.sanitizeMargins(Y),t.getComponentMethod("grid","sizeDefaults")(H,Y),te("paper_bgcolor"),te("separators",ne.decimal+ne.thousands),te("hidesources"),te("colorway"),te("datarevision");var oe=te("uirevision");te("editrevision",oe),te("selectionrevision",oe),t.getComponentMethod("modebar","supplyLayoutDefaults")(H,Y),t.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(H,Y,te),te("meta"),r.isPlainObject(H.transition)&&(te("transition.duration"),te("transition.easing"),te("transition.ordering")),t.getComponentMethod("calendars","handleDefaults")(H,Y,"calendar"),t.getComponentMethod("fx","supplyLayoutGlobalDefaults")(H,Y,te)};function I(H){return typeof H=="string"&&H.substr(H.length-2)==="px"&&parseFloat(H)}g.plotAutoSize=function(Y,ne,te){var K=Y._context||{},$=K.frameMargins,ae,ie,oe=r.isPlotDiv(Y);if(oe&&Y.emit("plotly_autosize"),K.fillFrame)ae=window.innerWidth,ie=window.innerHeight,document.body.style.overflow="hidden";else{var ue=oe?window.getComputedStyle(Y):{};if(ae=I(ue.width)||I(ue.maxWidth)||te.width,ie=I(ue.height)||I(ue.maxHeight)||te.height,x($)&&$>0){var ye=1-2*$;ae=Math.round(ye*ae),ie=Math.round(ye*ie)}}var ce=g.layoutAttributes.width.min,me=g.layoutAttributes.height.min;ae<ce&&(ae=ce),ie<me&&(ie=me);var xe=!ne.width&&Math.abs(te.width-ae)>1,ke=!ne.height&&Math.abs(te.height-ie)>1;(ke||xe)&&(xe&&(te.width=ae),ke&&(te.height=ie)),Y._initialAutoSize||(Y._initialAutoSize={width:ae,height:ie}),g.sanitizeMargins(te)},g.supplyLayoutModuleDefaults=function(H,Y,ne,te){var K=t.componentsRegistry,$=Y._basePlotModules,ae,ie,oe,ue=t.subplotsRegistry.cartesian;for(ae in K)oe=K[ae],oe.includeBasePlot&&oe.includeBasePlot(H,Y);$.length||$.push(ue),Y._has("cartesian")&&(t.getComponentMethod("grid","contentDefaults")(H,Y),ue.finalizeSubplots(H,Y));for(var ye in Y._subplots)Y._subplots[ye].sort(r.subplotSort);for(ie=0;ie<$.length;ie++)oe=$[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(H,Y,ne);var ce=Y._modules;for(ie=0;ie<ce.length;ie++)oe=ce[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(H,Y,ne);var me=Y._transformModules;for(ie=0;ie<me.length;ie++)oe=me[ie],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(H,Y,ne,te);for(ae in K)oe=K[ae],oe.supplyLayoutDefaults&&oe.supplyLayoutDefaults(H,Y,ne)},g.purge=function(H){var Y=H._fullLayout||{};Y._glcontainer!==void 0&&(Y._glcontainer.selectAll(".gl-canvas").remove(),Y._glcontainer.remove(),Y._glcanvas=null),Y._modeBar&&Y._modeBar.destroy(),H._transitionData&&(H._transitionData._interruptCallbacks&&(H._transitionData._interruptCallbacks.length=0),H._transitionData._animationRaf&&window.cancelAnimationFrame(H._transitionData._animationRaf)),r.clearThrottle(),r.clearResponsive(H),delete H.data,delete H.layout,delete H._fullData,delete H._fullLayout,delete H.calcdata,delete H.empty,delete H.fid,delete H.undoqueue,delete H.undonum,delete H.autoplay,delete H.changed,delete H._promises,delete H._redrawTimer,delete H._hmlumcount,delete H._hmpixcount,delete H._transitionData,delete H._transitioning,delete H._initialAutoSize,delete H._transitioningWithDuration,delete H._dragging,delete H._dragged,delete H._dragdata,delete H._hoverdata,delete H._snapshotInProgress,delete H._editing,delete H._mouseDownTime,delete H._legendMouseDownTime,H.removeAllListeners&&H.removeAllListeners()},g.style=function(H){var Y=H._fullLayout._visibleModules,ne=[],te;for(te=0;te<Y.length;te++){var K=Y[te];K.style&&r.pushUnique(ne,K.style)}for(te=0;te<ne.length;te++)ne[te](H)},g.sanitizeMargins=function(H){if(!(!H||!H.margin)){var Y=H.width,ne=H.height,te=H.margin,K=Y-(te.l+te.r),$=ne-(te.t+te.b),ae;K<0&&(ae=(Y-1)/(te.l+te.r),te.l=Math.floor(ae*te.l),te.r=Math.floor(ae*te.r)),$<0&&(ae=(ne-1)/(te.t+te.b),te.t=Math.floor(ae*te.t),te.b=Math.floor(ae*te.b))}},g.clearAutoMarginIds=function(H){H._fullLayout._pushmarginIds={}},g.allowAutoMargin=function(H,Y){H._fullLayout._pushmarginIds[Y]=1};function D(H){var Y=H.margin;if(!H._size){var ne=H._size={l:Math.round(Y.l),r:Math.round(Y.r),t:Math.round(Y.t),b:Math.round(Y.b),p:Math.round(Y.pad)};ne.w=Math.round(H.width)-ne.l-ne.r,ne.h=Math.round(H.height)-ne.t-ne.b}H._pushmargin||(H._pushmargin={}),H._pushmarginIds||(H._pushmarginIds={})}var U=2,B=2,j=64,Z=64;g.autoMargin=function(H,Y,ne){var te=H._fullLayout,K=te.width,$=te.height,ae=te.margin,ie=r.constrain(K-ae.l-ae.r,U,j),oe=r.constrain($-ae.t-ae.b,B,Z),ue=Math.max(0,K-ie),ye=Math.max(0,$-oe),ce=te._pushmargin,me=te._pushmarginIds;if(ae.autoexpand!==!1){if(!ne)delete ce[Y],delete me[Y];else{var xe=ne.pad;if(xe===void 0&&(xe=Math.min(12,ae.l,ae.r,ae.t,ae.b)),ue){var ke=(ne.l+ne.r)/ue;ke>1&&(ne.l/=ke,ne.r/=ke)}if(ye){var Ae=(ne.t+ne.b)/ye;Ae>1&&(ne.t/=Ae,ne.b/=Ae)}var Oe=ne.xl!==void 0?ne.xl:ne.x,He=ne.xr!==void 0?ne.xr:ne.x,Ge=ne.yt!==void 0?ne.yt:ne.y,_e=ne.yb!==void 0?ne.yb:ne.y;ce[Y]={l:{val:Oe,size:ne.l+xe},r:{val:He,size:ne.r+xe},b:{val:_e,size:ne.b+xe},t:{val:Ge,size:ne.t+xe}},me[Y]=1}if(!te._replotting)return g.doAutoMargin(H)}},g.doAutoMargin=function(H){var Y=H._fullLayout,ne=Y.width,te=Y.height;Y._size||(Y._size={}),D(Y);var K=Y._size,$=Y.margin,ae=r.extendFlat({},K),ie=$.l,oe=$.r,ue=$.t,ye=$.b,ce=Y._pushmargin,me=Y._pushmarginIds;if(Y.margin.autoexpand!==!1){for(var xe in ce)me[xe]||delete ce[xe];ce.base={l:{val:0,size:ie},r:{val:1,size:oe},t:{val:1,size:ue},b:{val:0,size:ye}};for(var ke in ce){var Ae=ce[ke].l||{},Oe=ce[ke].b||{},He=Ae.val,Ge=Ae.size,_e=Oe.val,Re=Oe.size;for(var We in ce){if(x(Ge)&&ce[We].r){var qe=ce[We].r.val,Ue=ce[We].r.size;if(qe>He){var Ie=(Ge*qe+(Ue-ne)*He)/(qe-He),Ve=(Ue*(1-He)+(Ge-ne)*(1-qe))/(qe-He);Ie+Ve>ie+oe&&(ie=Ie,oe=Ve)}}if(x(Re)&&ce[We].t){var dt=ce[We].t.val,Rt=ce[We].t.size;if(dt>_e){var Gt=(Re*dt+(Rt-te)*_e)/(dt-_e),kt=(Rt*(1-_e)+(Re-te)*(1-dt))/(dt-_e);Gt+kt>ye+ue&&(ye=Gt,ue=kt)}}}}}var zt=r.constrain(ne-$.l-$.r,U,j),Bt=r.constrain(te-$.t-$.b,B,Z),Lt=Math.max(0,ne-zt),Mt=Math.max(0,te-Bt);if(Lt){var it=(ie+oe)/Lt;it>1&&(ie/=it,oe/=it)}if(Mt){var ht=(ye+ue)/Mt;ht>1&&(ye/=ht,ue/=ht)}if(K.l=Math.round(ie),K.r=Math.round(oe),K.t=Math.round(ue),K.b=Math.round(ye),K.p=Math.round($.pad),K.w=Math.round(ne)-K.l-K.r,K.h=Math.round(te)-K.t-K.b,!Y._replotting&&g.didMarginChange(ae,K)){"_redrawFromAutoMarginCount"in Y?Y._redrawFromAutoMarginCount++:Y._redrawFromAutoMarginCount=1;var Qe=3*(1+Object.keys(me).length);if(Y._redrawFromAutoMarginCount<Qe)return t.call("_doPlot",H);Y._size=ae,r.warn("Too many auto-margin redraws.")}ee(H)};function ee(H){var Y=l.list(H,"",!0);["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(ne){for(var te=0;te<Y.length;te++){var K=Y[te][ne];K&&K()}})}var q=["l","r","t","b","p","w","h"];g.didMarginChange=function(H,Y){for(var ne=0;ne<q.length;ne++){var te=q[ne],K=H[te],$=Y[te];if(!x(K)||Math.abs($-K)>1)return!0}return!1},g.graphJson=function(H,Y,ne,te,K,$){(K&&Y&&!H._fullData||K&&!Y&&!H._fullLayout)&&g.supplyDefaults(H);var ae=K?H._fullData:H.data,ie=K?H._fullLayout:H.layout,oe=(H._transitionData||{})._frames;function ue(me,xe){if(typeof me=="function")return xe?"_function_":null;if(r.isPlainObject(me)){var ke={},Ae;return Object.keys(me).sort().forEach(function(Oe){if(["_","["].indexOf(Oe.charAt(0))===-1){if(typeof me[Oe]=="function"){xe&&(ke[Oe]="_function");return}if(ne==="keepdata"){if(Oe.substr(Oe.length-3)==="src")return}else if(ne==="keepstream"){if(Ae=me[Oe+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0&&!r.isPlainObject(me.stream))return}else if(ne!=="keepall"&&(Ae=me[Oe+"src"],typeof Ae=="string"&&Ae.indexOf(":")>0))return;ke[Oe]=ue(me[Oe],xe)}}),ke}return Array.isArray(me)?me.map(function(Oe){return ue(Oe,xe)}):r.isTypedArray(me)?r.simpleMap(me,r.identity):r.isJSDate(me)?r.ms2DateTimeLocal(+me):me}var ye={data:(ae||[]).map(function(me){var xe=ue(me);return Y&&delete xe.fit,xe})};if(!Y&&(ye.layout=ue(ie),K)){var ce=ie._size;ye.layout.computed={margin:{b:ce.b,l:ce.l,r:ce.r,t:ce.t}}}return oe&&(ye.frames=ue(oe)),$&&(ye.config=ue(H._context,!0)),te==="object"?ye:JSON.stringify(ye)},g.modifyFrames=function(H,Y){var ne,te,K,$=H._transitionData._frames,ae=H._transitionData._frameHash;for(ne=0;ne<Y.length;ne++)switch(te=Y[ne],te.type){case"replace":K=te.value;var ie=($[te.index]||{}).name,oe=K.name;$[te.index]=ae[oe]=K,oe!==ie&&(delete ae[ie],ae[oe]=K);break;case"insert":K=te.value,ae[K.name]=K,$.splice(te.index,0,K);break;case"delete":K=$[te.index],delete ae[K.name],$.splice(te.index,1);break}return Promise.resolve()},g.computeFrame=function(H,Y){var ne=H._transitionData._frameHash,te,K,$,ae;if(!Y)throw new Error("computeFrame must be given a string frame name");var ie=ne[Y.toString()];if(!ie)return!1;for(var oe=[ie],ue=[ie.name];ie.baseframe&&(ie=ne[ie.baseframe.toString()])&&ue.indexOf(ie.name)===-1;)oe.push(ie),ue.push(ie.name);for(var ye={};ie=oe.pop();)if(ie.layout&&(ye.layout=g.extendLayout(ye.layout,ie.layout)),ie.data){if(ye.data||(ye.data=[]),K=ie.traces,!K)for(K=[],te=0;te<ie.data.length;te++)K[te]=te;for(ye.traces||(ye.traces=[]),te=0;te<ie.data.length;te++)$=K[te],$!=null&&(ae=ye.traces.indexOf($),ae===-1&&(ae=ye.data.length,ye.traces[ae]=$),ye.data[ae]=g.extendTrace(ye.data[ae],ie.data[te]))}return ye},g.recomputeFrameHash=function(H){for(var Y=H._transitionData._frameHash={},ne=H._transitionData._frames,te=0;te<ne.length;te++){var K=ne[te];K&&K.name&&(Y[K.name]=K)}},g.extendObjectWithContainers=function(H,Y,ne){var te,K,$,ae,ie,oe,ue,ye,ce=r.extendDeepNoArrays({},Y||{}),me=r.expandObjectPaths(ce),xe={};if(ne&&ne.length)for($=0;$<ne.length;$++)te=r.nestedProperty(me,ne[$]),K=te.get(),K===void 0?r.nestedProperty(xe,ne[$]).set(null):(te.set(null),r.nestedProperty(xe,ne[$]).set(K));if(H=r.extendDeepNoArrays(H||{},me),ne&&ne.length){for($=0;$<ne.length;$++)if(ie=r.nestedProperty(xe,ne[$]),ue=ie.get(),!!ue){for(oe=r.nestedProperty(H,ne[$]),ye=oe.get(),Array.isArray(ye)||(ye=[],oe.set(ye)),ae=0;ae<ue.length;ae++){var ke=ue[ae];ke===null?ye[ae]=null:ye[ae]=g.extendObjectWithContainers(ye[ae],ke)}oe.set(ye)}}return H},g.dataArrayContainers=["transforms","dimensions"],g.layoutArrayContainers=t.layoutArrayContainers,g.extendTrace=function(H,Y){return g.extendObjectWithContainers(H,Y,g.dataArrayContainers)},g.extendLayout=function(H,Y){return g.extendObjectWithContainers(H,Y,g.layoutArrayContainers)},g.transition=function(H,Y,ne,te,K,$){var ae={redraw:K.redraw},ie={},oe=[];return ae.prepareFn=function(){for(var ue=Array.isArray(Y)?Y.length:0,ye=te.slice(0,ue),ce=0;ce<ye.length;ce++){var me=ye[ce],xe=H._fullData[me],ke=xe._module;if(!!ke){if(ke.animatable){var Ae=ke.basePlotModule.name;ie[Ae]||(ie[Ae]=[]),ie[Ae].push(me)}H.data[ye[ce]]=g.extendTrace(H.data[ye[ce]],Y[ce])}}var Oe=r.expandObjectPaths(r.extendDeepNoArrays({},ne)),He=/^[xy]axis[0-9]*$/;for(var Ge in Oe)!He.test(Ge)||delete Oe[Ge].range;g.extendLayout(H.layout,Oe),delete H.calcdata,g.supplyDefaults(H),g.doCalcdata(H);var _e=r.expandObjectPaths(ne);if(_e){var Re=H._fullLayout._plots;for(var We in Re){var qe=Re[We],Ue=qe.xaxis,Ie=qe.yaxis,Ve=Ue.range.slice(),dt=Ie.range.slice(),Rt=null,Gt=null,kt=null,zt=null;Array.isArray(_e[Ue._name+".range"])?Rt=_e[Ue._name+".range"].slice():Array.isArray((_e[Ue._name]||{}).range)&&(Rt=_e[Ue._name].range.slice()),Array.isArray(_e[Ie._name+".range"])?Gt=_e[Ie._name+".range"].slice():Array.isArray((_e[Ie._name]||{}).range)&&(Gt=_e[Ie._name].range.slice()),Ve&&Rt&&(Ue.r2l(Ve[0])!==Ue.r2l(Rt[0])||Ue.r2l(Ve[1])!==Ue.r2l(Rt[1]))&&(kt={xr0:Ve,xr1:Rt}),dt&&Gt&&(Ie.r2l(dt[0])!==Ie.r2l(Gt[0])||Ie.r2l(dt[1])!==Ie.r2l(Gt[1]))&&(zt={yr0:dt,yr1:Gt}),(kt||zt)&&oe.push(r.extendFlat({plotinfo:qe},kt,zt))}}return Promise.resolve()},ae.runFn=function(ue){var ye,ce=H._fullLayout._basePlotModules,me=oe.length,xe;if(ne)for(xe=0;xe<ce.length;xe++)ce[xe].transitionAxes&&ce[xe].transitionAxes(H,oe,$,ue);me?(ye=r.extendFlat({},$),ye.duration=0,delete ie.cartesian):ye=$;for(var ke in ie){var Ae=ie[ke],Oe=H._fullData[Ae[0]]._module;Oe.basePlotModule.plot(H,Ae,ye,ue)}},W(H,$,ae)},g.transitionFromReact=function(H,Y,ne,te){var K=H._fullLayout,$=K.transition,ae={},ie=[];return ae.prepareFn=function(){var oe=K._plots;ae.redraw=!1,Y.anim==="some"&&(ae.redraw=!0),ne.anim==="some"&&(ae.redraw=!0);for(var ue in oe){var ye=oe[ue],ce=ye.xaxis,me=ye.yaxis,xe=te[ce._name].range.slice(),ke=te[me._name].range.slice(),Ae=ce.range.slice(),Oe=me.range.slice();ce.setScale(),me.setScale();var He=null,Ge=null;(ce.r2l(xe[0])!==ce.r2l(Ae[0])||ce.r2l(xe[1])!==ce.r2l(Ae[1]))&&(He={xr0:xe,xr1:Ae}),(me.r2l(ke[0])!==me.r2l(Oe[0])||me.r2l(ke[1])!==me.r2l(Oe[1]))&&(Ge={yr0:ke,yr1:Oe}),(He||Ge)&&ie.push(r.extendFlat({plotinfo:ye},He,Ge))}return Promise.resolve()},ae.runFn=function(oe){for(var ue=H._fullData,ye=H._fullLayout,ce=ye._basePlotModules,me,xe,ke,Ae=[],Oe=0;Oe<ue.length;Oe++)Ae.push(Oe);function He(){if(!!H._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].transitionAxes&&ce[_e].transitionAxes(H,ie,me,oe)}function Ge(){if(!!H._fullLayout)for(var _e=0;_e<ce.length;_e++)ce[_e].plot(H,ke,xe,oe)}ie.length&&Y.anim?$.ordering==="traces first"?(me=r.extendFlat({},$,{duration:0}),ke=Ae,xe=$,setTimeout(He,$.duration),Ge()):(me=$,ke=null,xe=r.extendFlat({},$,{duration:0}),setTimeout(Ge,me.duration),He()):ie.length?(me=$,He()):Y.anim&&(ke=Ae,xe=$,Ge())},W(H,$,ae)};function W(H,Y,ne){var te=!1;function K(ce){var me=Promise.resolve();if(!ce)return me;for(;ce.length;)me=me.then(ce.shift());return me}function $(ce){if(!!ce)for(;ce.length;)ce.shift()}function ae(){return H.emit("plotly_transitioning",[]),new Promise(function(ce){H._transitioning=!0,Y.duration>0&&(H._transitioningWithDuration=!0),H._transitionData._interruptCallbacks.push(function(){te=!0}),ne.redraw&&H._transitionData._interruptCallbacks.push(function(){return t.call("redraw",H)}),H._transitionData._interruptCallbacks.push(function(){H.emit("plotly_transitioninterrupted",[])});var me=0,xe=0;function ke(){return me++,function(){xe++,!te&&xe===me&&ie(ce)}}ne.runFn(ke),setTimeout(ke())})}function ie(ce){if(!!H._transitionData)return $(H._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(ne.redraw)return t.call("redraw",H)}).then(function(){H._transitioning=!1,H._transitioningWithDuration=!1,H.emit("plotly_transitioned",[])}).then(ce)}function oe(){if(!!H._transitionData)return H._transitioning=!1,K(H._transitionData._interruptCallbacks)}var ue=[g.previousPromises,oe,ne.prepareFn,g.rehover,ae],ye=r.syncOrAsync(ue,H);return(!ye||!ye.then)&&(ye=Promise.resolve()),ye.then(function(){return H})}g.doCalcdata=function(H,Y){var ne=l.list(H),te=H._fullData,K=H._fullLayout,$,ae,ie,oe,ue=new Array(te.length),ye=(H.calcdata||[]).slice();for(H.calcdata=ue,K._numBoxes=0,K._numViolins=0,K._violinScaleGroupStats={},H._hmpixcount=0,H._hmlumcount=0,K._piecolormap={},K._sunburstcolormap={},K._treemapcolormap={},K._iciclecolormap={},K._funnelareacolormap={},ie=0;ie<te.length;ie++)if(Array.isArray(Y)&&Y.indexOf(ie)===-1){ue[ie]=ye[ie];continue}for(ie=0;ie<te.length;ie++)$=te[ie],$._arrayAttrs=i.findArrayAttributes($),$._extremes={};var ce=K._subplots.polar||[];for(ie=0;ie<ce.length;ie++)ne.push(K[ce[ie]].radialaxis,K[ce[ie]].angularaxis);for(var me in K._colorAxes){var xe=K[me];xe.cauto!==!1&&(delete xe.cmin,delete xe.cmax)}var ke=!1;function Ae(Ge){if($=te[Ge],ae=$._module,$.visible===!0&&$.transforms){if(ae&&ae.calc){var _e=ae.calc(H,$);_e[0]&&_e[0].t&&_e[0].t._scene&&delete _e[0].t._scene.dirty}for(oe=0;oe<$.transforms.length;oe++){var Re=$.transforms[oe];ae=A[Re.type],ae&&ae.calcTransform&&($._hasCalcTransform=!0,ke=!0,ae.calcTransform(H,$,Re))}}}function Oe(Ge,_e){if($=te[Ge],ae=$._module,!!ae.isContainer===_e){var Re=[];if($.visible===!0&&$._length!==0){delete $._indexToPoints;var We=$.transforms||[];for(oe=We.length-1;oe>=0;oe--)if(We[oe].enabled){$._indexToPoints=We[oe]._indexToPoints;break}ae&&ae.calc&&(Re=ae.calc(H,$))}(!Array.isArray(Re)||!Re[0])&&(Re=[{x:f,y:f}]),Re[0].t||(Re[0].t={}),Re[0].trace=$,ue[Ge]=Re}}for(fe(ne,te,K),ie=0;ie<te.length;ie++)Oe(ie,!0);for(ie=0;ie<te.length;ie++)Ae(ie);for(ke&&fe(ne,te,K),ie=0;ie<te.length;ie++)Oe(ie,!0);for(ie=0;ie<te.length;ie++)Oe(ie,!1);se(H);var He=le(ne,H);if(He.length){for(K._numBoxes=0,K._numViolins=0,ie=0;ie<He.length;ie++)Oe(He[ie],!0);for(ie=0;ie<He.length;ie++)Oe(He[ie],!1);se(H)}t.getComponentMethod("fx","calc")(H),t.getComponentMethod("errorbars","calc")(H)};var J=/(total|sum|min|max|mean|median) (ascending|descending)/;function le(H,Y){var ne=[],te,K,$,ae,ie;function oe(Lt,Mt,it){var ht=Mt._id.charAt(0);if(Lt==="histogram2dcontour"){var Qe=Mt._counterAxes[0],Ce=l.getFromId(Y,Qe),Xe=ht==="x"||Qe==="x"&&Ce.type==="category",rt=ht==="y"||Qe==="y"&&Ce.type==="category";return function(ut,Pt){return ut===0||Pt===0||Xe&&ut===it[Pt].length-1||rt&&Pt===it.length-1?-1:(ht==="y"?Pt:ut)-1}}else return function(ut,Pt){return ht==="y"?Pt:ut}}var ue={min:function(Lt){return r.aggNums(Math.min,null,Lt)},max:function(Lt){return r.aggNums(Math.max,null,Lt)},sum:function(Lt){return r.aggNums(function(Mt,it){return Mt+it},null,Lt)},total:function(Lt){return r.aggNums(function(Mt,it){return Mt+it},null,Lt)},mean:function(Lt){return r.mean(Lt)},median:function(Lt){return r.median(Lt)}};for(te=0;te<H.length;te++){var ye=H[te];if(ye.type==="category"){var ce=ye.categoryorder.match(J);if(ce){var me=ce[1],xe=ce[2],ke=ye._id.charAt(0),Ae=ke==="x",Oe=[];for(K=0;K<ye._categories.length;K++)Oe.push([ye._categories[K],[]]);for(K=0;K<ye._traceIndices.length;K++){var He=ye._traceIndices[K],Ge=Y._fullData[He];if(Ge.visible===!0){var _e=Ge.type;t.traceIs(Ge,"histogram")&&(delete Ge._xautoBinFinished,delete Ge._yautoBinFinished);var Re=_e==="splom",We=_e==="scattergl",qe=Y.calcdata[He];for($=0;$<qe.length;$++){var Ue=qe[$],Ie,Ve;if(Re){var dt=Ge._axesDim[ye._id];if(!Ae){var Rt=Ge._diag[dt][0];Rt&&(ye=Y._fullLayout[l.id2name(Rt)])}var Gt=Ue.trace.dimensions[dt].values;for(ae=0;ae<Gt.length;ae++)for(Ie=ye._categoriesMap[Gt[ae]],ie=0;ie<Ue.trace.dimensions.length;ie++)if(ie!==dt){var kt=Ue.trace.dimensions[ie];Oe[Ie][1].push(kt.values[ae])}}else if(We){for(ae=0;ae<Ue.t.x.length;ae++)Ae?(Ie=Ue.t.x[ae],Ve=Ue.t.y[ae]):(Ie=Ue.t.y[ae],Ve=Ue.t.x[ae]),Oe[Ie][1].push(Ve);Ue.t&&Ue.t._scene&&delete Ue.t._scene.dirty}else if(Ue.hasOwnProperty("z")){Ve=Ue.z;var zt=oe(Ge.type,ye,Ve);for(ae=0;ae<Ve.length;ae++)for(ie=0;ie<Ve[ae].length;ie++)Ie=zt(ie,ae),Ie+1&&Oe[Ie][1].push(Ve[ae][ie])}else for(Ie=Ue.p,Ie===void 0&&(Ie=Ue[ke]),Ve=Ue.s,Ve===void 0&&(Ve=Ue.v),Ve===void 0&&(Ve=Ae?Ue.y:Ue.x),Array.isArray(Ve)||(Ve===void 0?Ve=[]:Ve=[Ve]),ae=0;ae<Ve.length;ae++)Oe[Ie][1].push(Ve[ae])}}}ye._categoriesValue=Oe;var Bt=[];for(K=0;K<Oe.length;K++)Bt.push([Oe[K][0],ue[me](Oe[K][1])]);Bt.sort(function(Lt,Mt){return Lt[1]-Mt[1]}),ye._categoriesAggregatedValue=Bt,ye._initialCategories=Bt.map(function(Lt){return Lt[0]}),xe==="descending"&&ye._initialCategories.reverse(),ne=ne.concat(ye.sortByInitialCategories())}}}return ne}function fe(H,Y,ne){var te={};function K(oe){oe.clearCalc(),oe.type==="multicategory"&&oe.setupMultiCategory(Y),te[oe._id]=1}r.simpleMap(H,K);for(var $=ne._axisMatchGroups||[],ae=0;ae<$.length;ae++)for(var ie in $[ae])te[ie]||K(ne[l.id2name(ie)])}function se(H){var Y=H._fullLayout,ne=Y._visibleModules,te={},K,$,ae;for($=0;$<ne.length;$++){var ie=ne[$],oe=ie.crossTraceCalc;if(oe){var ue=ie.basePlotModule.name;te[ue]?r.pushUnique(te[ue],oe):te[ue]=[oe]}}for(ae in te){var ye=te[ae],ce=Y._subplots[ae];if(Array.isArray(ce))for(K=0;K<ce.length;K++){var me=ce[K],xe=ae==="cartesian"?Y._plots[me]:Y[me];for($=0;$<ye.length;$++)ye[$](H,xe,me)}else for($=0;$<ye.length;$++)ye[$](H)}}g.rehover=function(H){H._fullLayout._rehover&&H._fullLayout._rehover()},g.redrag=function(H){H._fullLayout._redrag&&H._fullLayout._redrag()},g.generalUpdatePerTraceModule=function(H,Y,ne,te){var K=Y.traceHash,$={},ae;for(ae=0;ae<ne.length;ae++){var ie=ne[ae],oe=ie[0].trace;oe.visible&&($[oe.type]=$[oe.type]||[],$[oe.type].push(ie))}for(var ue in K)if(!$[ue]){var ye=K[ue][0],ce=ye[0].trace;ce.visible=!1,$[ue]=[ye]}for(var me in $){var xe=$[me],ke=xe[0][0].trace._module;ke.plot(H,Y,r.filterVisible(xe),te)}Y.traceHash=$},g.plotBasePlot=function(H,Y,ne,te,K){var $=t.getModule(H),ae=d(Y.calcdata,$)[0];$.plot(Y,ae,te,K)},g.cleanBasePlot=function(H,Y,ne,te,K){var $=K._has&&K._has(H),ae=ne._has&&ne._has(H);$&&!ae&&K["_"+H+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(e,z,N){z.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(e,z,N){var u=e("../../lib"),s=e("../../lib/polygon").tester,m=u.findIndexOfMin,x=u.isAngleInsideSector,t=u.angleDelta,i=u.angleDist;function a(A,b,M,_,T){if(!x(b,_))return!1;var w,v;M[0]<M[1]?(w=M[0],v=M[1]):(w=M[1],v=M[0]);var L=s(o(w,_[0],_[1],T)),S=s(o(v,_[0],_[1],T)),k=[A*Math.cos(b),A*Math.sin(b)];return S.contains(k)&&!L.contains(k)}function r(A,b,M,_){var T,w,v=_[0],L=_[1],S=d(Math.sin(b)-Math.sin(A)),k=d(Math.cos(b)-Math.cos(A)),P=Math.tan(M),O=d(1/P),F=S/k,I=L-F*v;return O?S&&k?(T=I/(P-F),w=P*T):k?(T=L*O,w=L):(T=v,w=v*P):S&&k?(T=0,w=I):k?(T=0,w=L):T=w=NaN,[T,w]}function n(A,b,M,_){var T=-b*M,w=b*b+1,v=2*(b*T-M),L=T*T+M*M-A*A,S=Math.sqrt(v*v-4*w*L),k=(-v+S)/(2*w),P=(-v-S)/(2*w);return[[k,b*k+T+_],[P,b*P+T+_]]}function f(A,b){var M=b.length,_=new Array(M+1),T;for(T=0;T<M;T++){var w=b[T];_[T]=[A*Math.cos(w),A*Math.sin(w)]}return _[T]=_[0].slice(),_}function l(A,b,M,_){var T=_.length,w=[],v,L;function S(j){return[A*Math.cos(j),A*Math.sin(j)]}function k(j,Z,ee){return r(j,Z,ee,S(j))}function P(j){return u.mod(j,T)}function O(j){return x(j,[b,M])}var F=m(_,function(j){return O(j)?i(j,b):1/0}),I=k(_[F],_[P(F-1)],b);for(w.push(I),v=F,L=0;L<T;v++,L++){var D=_[P(v)];if(!O(D))break;w.push(S(D))}var U=m(_,function(j){return O(j)?i(j,M):1/0}),B=k(_[U],_[P(U+1)],M);return w.push(B),w.push([0,0]),w.push(w[0].slice()),w}function o(A,b,M,_){return u.isFullCircle([b,M])?f(A,_):l(A,b,M,_)}function c(A,b,M,_){for(var T=1/0,w=1/0,v=o(A,b,M,_),L=0;L<v.length;L++){var S=v[L];T=Math.min(T,S[0]),w=Math.min(w,-S[1])}return[T,w]}function h(A,b){var M=function(w){var v=t(w,A);return v>0?v:1/0},_=m(b,M),T=u.mod(_+1,b.length);return[b[_],b[T]]}function d(A){return Math.abs(A)>1e-10?A:0}function p(A,b,M){b=b||0,M=M||0;for(var _=A.length,T=new Array(_),w=0;w<_;w++){var v=A[w];T[w]=[b+v[0],M-v[1]]}return T}function y(A,b,M,_,T,w){var v=o(A,b,M,_);return"M"+p(v,T,w).join("L")}function g(A,b,M,_,T,w,v){var L,S;A<b?(L=A,S=b):(L=b,S=A);var k=p(o(L,M,_,T),w,v),P=p(o(S,M,_,T),w,v);return"M"+P.reverse().join("L")+"M"+k.join("L")}z.exports={isPtInsidePolygon:a,findPolygonOffset:c,findEnclosingVertexAngles:h,findIntersectionXY:r,findXYatLength:n,clampTiny:d,pathPolygon:y,pathPolygonAnnulus:g}},{"../../lib":503,"../../lib/polygon":515}],622:[function(e,z,N){var u=e("../get_data").getSubplotCalcData,s=e("../../lib").counterRegex,m=e("./polar"),x=e("./constants"),t=x.attr,i=x.name,a=s(i),r={};r[t]={valType:"subplotid",dflt:i,editType:"calc"};function n(l){for(var o=l._fullLayout,c=l.calcdata,h=o._subplots[i],d=0;d<h.length;d++){var p=h[d],y=u(c,i,p),g=o[p]._subplot;g||(g=m(l,p),o[p]._subplot=g),g.plot(y,o,l._promises)}}function f(l,o,c,h){for(var d=h._subplots[i]||[],p=h._has&&h._has("gl"),y=o._has&&o._has("gl"),g=p&&!y,A=0;A<d.length;A++){var b=d[A],M=h[b]._subplot;if(!o[b]&&!!M){M.framework.remove(),M.layers["radial-axis-title"].remove();for(var _ in M.clipPaths)M.clipPaths[_].remove()}g&&M._scene&&(M._scene.destroy(),M._scene=null)}}z.exports={attr:t,name:i,idRoot:i,idRegex:a,attrRegex:a,attributes:r,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(e,z,N){var u=e("../../components/color/attributes"),s=e("../cartesian/layout_attributes"),m=e("../domain").attributes,x=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,i=t({color:s.color,showline:x({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:x({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth},"plot","from-root"),a=t({tickmode:s.tickmode,nticks:s.nticks,tick0:s.tick0,dtick:s.dtick,tickvals:s.tickvals,ticktext:s.ticktext,ticks:s.ticks,ticklen:s.ticklen,tickwidth:s.tickwidth,tickcolor:s.tickcolor,showticklabels:s.showticklabels,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,showexponent:s.showexponent,exponentformat:s.exponentformat,minexponent:s.minexponent,separatethousands:s.separatethousands,tickfont:s.tickfont,tickangle:s.tickangle,tickformat:s.tickformat,tickformatstops:s.tickformatstops,layer:s.layer},"plot","from-root"),r={visible:x({},s.visible,{dflt:!0}),type:x({},s.type,{values:["-","linear","log","date","category"]}),autotypenumbers:s.autotypenumbers,autorange:x({},s.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:x({},s.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:s.categoryorder,categoryarray:s.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:x({},s.title.text,{editType:"plot",dflt:""}),font:x({},s.title.font,{editType:"plot"}),editType:"plot"},hoverformat:s.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:s._deprecated.title,titlefont:s._deprecated.titlefont}};x(r,i,a);var n={visible:x({},s.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:s.autotypenumbers,categoryorder:s.categoryorder,categoryarray:s.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:s.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};x(n,i,a),z.exports={domain:m({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:u.background},radialaxis:r,angularaxis:n,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../../plot_api/plot_template"),x=e("../subplot_defaults"),t=e("../get_data").getSubplotData,i=e("../cartesian/tick_value_defaults"),a=e("../cartesian/tick_mark_defaults"),r=e("../cartesian/tick_label_defaults"),n=e("../cartesian/prefix_suffix_defaults"),f=e("../cartesian/category_order_defaults"),l=e("../cartesian/line_grid_defaults"),o=e("../cartesian/axis_autotype"),c=e("./layout_attributes"),h=e("./set_convert"),d=e("./constants"),p=d.axisNames;function y(A,b,M,_){var T=M("bgcolor");_.bgColor=s.combine(T,_.paper_bgcolor);var w=M("sector");M("hole");var v=t(_.fullData,d.name,_.id),L=_.layoutOut,S;function k(fe,se){return M(S+"."+fe,se)}for(var P=0;P<p.length;P++){S=p[P],u.isPlainObject(A[S])||(A[S]={});var O=A[S],F=m.newContainer(b,S);F._id=F._name=S,F._attr=_.id+"."+S,F._traceIndices=v.map(function(fe){return fe._expandedIndex});var I=d.axisName2dataArray[S],D=g(O,F,k,v,I,_);f(O,F,k,{axData:v,dataAttr:I});var U=k("visible");switch(h(F,b,L),k("uirevision",b.uirevision),F._m=1,S){case"radialaxis":var B=k("autorange",!F.isValidRange(O.range));O.autorange=B,B&&(D==="linear"||D==="-")&&k("rangemode"),B==="reversed"&&(F._m=-1),k("range"),F.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if(D==="date"){u.log("Polar plots do not support date angular axes yet.");for(var j=0;j<v.length;j++)v[j].visible=!1;D=O.type=F.type="linear"}k(D==="linear"?"thetaunit":"period");var Z=k("direction");k("rotation",{counterclockwise:0,clockwise:90}[Z]);break}if(n(O,F,k,F.type,{tickSuffixDflt:F.thetaunit==="degrees"?"\xB0":void 0}),U){var ee,q,W,J,le=_.font||{};ee=k("color"),q=ee===O.color?ee:le.color,W=le.size,J=le.family,i(O,F,k,F.type),r(O,F,k,F.type,{font:{color:q,size:W,family:J}}),a(O,F,k,{outerTicks:!0}),l(O,F,k,{dfltColor:ee,bgColor:_.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[S]}),k("layer"),S==="radialaxis"&&(k("side"),k("angle",w[0]),k("title.text"),u.coerceFont(k,"title.font",{color:q,size:u.bigFont(W),family:J}))}D!=="category"&&k("hoverformat"),F._input=O}b.angularaxis.type==="category"&&M("gridshape")}function g(A,b,M,_,T,w){var v=M("autotypenumbers",w.autotypenumbersDflt),L=M("type");if(L==="-"){for(var S,k=0;k<_.length;k++)if(_[k].visible){S=_[k];break}S&&S[T]&&(b.type=o(S[T],"gregorian",{noMultiCategory:!0,autotypenumbers:v})),b.type==="-"?b.type="linear":A.type=b.type}return b.type}z.exports=function(b,M,_){x(b,M,_,{type:d.name,attributes:c,handleDefaults:y,font:M.font,autotypenumbersDflt:M.autotypenumbers,paper_bgcolor:M.paper_bgcolor,fullData:_,layoutOut:M})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(e,z,N){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../registry"),x=e("../../lib"),t=x.strRotate,i=x.strTranslate,a=e("../../components/color"),r=e("../../components/drawing"),n=e("../plots"),f=e("../../plots/cartesian/axes"),l=e("../cartesian/set_convert"),o=e("./set_convert"),c=e("../cartesian/autorange").doAutoRange,h=e("../cartesian/dragbox"),d=e("../../components/dragelement"),p=e("../../components/fx"),y=e("../../components/titles"),g=e("../cartesian/select").prepSelect,A=e("../cartesian/select").selectOnClick,b=e("../cartesian/select").clearSelect,M=e("../../lib/setcursor"),_=e("../../lib/clear_gl_canvases"),T=e("../../plot_api/subroutines").redrawReglTraces,w=e("../../constants/alignment").MID_SHIFT,v=e("./constants"),L=e("./helpers"),S=e("../smith/helpers"),k=S.smith,P=S.reactanceArc,O=S.resistanceArc,F=S.smithTransform,I=x._,D=x.mod,U=x.deg2rad,B=x.rad2deg;function j(le,fe,se){this.isSmith=se||!1,this.id=fe,this.gd=le,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var H=le._fullLayout,Y="clip"+H._uid+fe;this.clipIds.forTraces=Y+"-for-traces",this.clipPaths.forTraces=H._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=H["_"+(se?"smith":"polar")+"layer"].append("g").attr("class",fe),this.getHole=function(ne){return this.isSmith?0:ne.hole},this.getSector=function(ne){return this.isSmith?[0,360]:ne.sector},this.getRadial=function(ne){return this.isSmith?ne.realaxis:ne.radialaxis},this.getAngular=function(ne){return this.isSmith?ne.imaginaryaxis:ne.angularaxis},se||(this.radialTickLayout=null,this.angularTickLayout=null)}var Z=j.prototype;z.exports=function(fe,se,H){return new j(fe,se,H)},Z.plot=function(le,fe){for(var se=this,H=fe[se.id],Y=!1,ne=0;ne<le.length;ne++){var te=le[ne][0].trace;if(te.cliponaxis===!1){Y=!0;break}}se._hasClipOnAxisFalse=Y,se.updateLayers(fe,H),se.updateLayout(fe,H),n.generalUpdatePerTraceModule(se.gd,se,le,H),se.updateFx(fe,H),se.isSmith&&(delete H.realaxis.range,delete H.imaginaryaxis.range)},Z.updateLayers=function(le,fe){var se=this,H=se.isSmith,Y=se.layers,ne=se.getRadial(fe),te=se.getAngular(fe),K=v.layerNames,$=K.indexOf("frontplot"),ae=K.slice(0,$),ie=te.layer==="below traces",oe=ne.layer==="below traces";ie&&ae.push("angular-line"),oe&&ae.push("radial-line"),ie&&ae.push("angular-axis"),oe&&ae.push("radial-axis"),ae.push("frontplot"),ie||ae.push("angular-line"),oe||ae.push("radial-line"),ie||ae.push("angular-axis"),oe||ae.push("radial-axis");var ue=(H?"smith":"polar")+"sublayer",ye=se.framework.selectAll("."+ue).data(ae,String);ye.enter().append("g").attr("class",function(ce){return ue+" "+ce}).each(function(ce){var me=Y[ce]=u.select(this);switch(ce){case"frontplot":H||me.append("g").classed("barlayer",!0),me.append("g").classed("scatterlayer",!0);break;case"backplot":me.append("g").classed("maplayer",!0);break;case"plotbg":Y.bg=me.append("path");break;case"radial-grid":me.style("fill","none");break;case"angular-grid":me.style("fill","none");break;case"radial-line":me.append("line").style("fill","none");break;case"angular-line":me.append("path").style("fill","none");break}}),ye.order()},Z.updateLayout=function(le,fe){var se=this,H=se.layers,Y=le._size,ne=se.getRadial(fe),te=se.getAngular(fe),K=fe.domain.x,$=fe.domain.y;se.xOffset=Y.l+Y.w*K[0],se.yOffset=Y.t+Y.h*(1-$[1]);var ae=se.xLength=Y.w*(K[1]-K[0]),ie=se.yLength=Y.h*($[1]-$[0]),oe=se.getSector(fe);se.sectorInRad=oe.map(U);var ue=se.sectorBBox=q(oe),ye=ue[2]-ue[0],ce=ue[3]-ue[1],me=ie/ae,xe=Math.abs(ce/ye),ke,Ae,Oe,He,Ge;me>xe?(ke=ae,Ae=ae*xe,Ge=(ie-Ae)/Y.h/2,Oe=[K[0],K[1]],He=[$[0]+Ge,$[1]-Ge]):(ke=ie/xe,Ae=ie,Ge=(ae-ke)/Y.w/2,Oe=[K[0]+Ge,K[1]-Ge],He=[$[0],$[1]]),se.xLength2=ke,se.yLength2=Ae,se.xDomain2=Oe,se.yDomain2=He;var _e=se.xOffset2=Y.l+Y.w*Oe[0],Re=se.yOffset2=Y.t+Y.h*(1-He[1]),We=se.radius=ke/ye,qe=se.innerRadius=se.getHole(fe)*We,Ue=se.cx=_e-We*ue[0],Ie=se.cy=Re+We*ue[3],Ve=se.cxx=Ue-_e,dt=se.cyy=Ie-Re,Rt=ne.side,Gt;Rt==="counterclockwise"?(Gt=Rt,Rt="top"):Rt==="clockwise"&&(Gt=Rt,Rt="bottom"),se.radialAxis=se.mockAxis(le,fe,ne,{_id:"x",side:Rt,_trueSide:Gt,domain:[qe/Y.w,We/Y.w]}),se.angularAxis=se.mockAxis(le,fe,te,{side:"right",domain:[0,Math.PI],autorange:!1}),se.doAutoRange(le,fe),se.updateAngularAxis(le,fe),se.updateRadialAxis(le,fe),se.updateRadialAxisTitle(le,fe),se.xaxis=se.mockCartesianAxis(le,fe,{_id:"x",domain:Oe}),se.yaxis=se.mockCartesianAxis(le,fe,{_id:"y",domain:He});var kt=se.pathSubplot();se.clipPaths.forTraces.select("path").attr("d",kt).attr("transform",i(Ve,dt)),H.frontplot.attr("transform",i(_e,Re)).call(r.setClipUrl,se._hasClipOnAxisFalse?null:se.clipIds.forTraces,se.gd),H.bg.attr("d",kt).attr("transform",i(Ue,Ie)).call(a.fill,fe.bgcolor)},Z.mockAxis=function(le,fe,se,H){var Y=x.extendFlat({},se,H);return o(Y,fe,le),Y},Z.mockCartesianAxis=function(le,fe,se){var H=this,Y=H.isSmith,ne=se._id,te=x.extendFlat({type:"linear"},se);l(te,le);var K={x:[0,2],y:[1,3]};return te.setRange=function(){var $=H.sectorBBox,ae=K[ne],ie=H.radialAxis._rl,oe=(ie[1]-ie[0])/(1-H.getHole(fe));te.range=[$[ae[0]]*oe,$[ae[1]]*oe]},te.isPtWithinRange=ne==="x"&&!Y?function($){return H.isPtInside($)}:function(){return!0},te.setRange(),te.setScale(),te},Z.doAutoRange=function(le,fe){var se=this,H=se.gd,Y=se.radialAxis,ne=se.getRadial(fe);c(H,Y);var te=Y.range;ne.range=te.slice(),ne._input.range=te.slice(),Y._rl=[Y.r2l(te[0],null,"gregorian"),Y.r2l(te[1],null,"gregorian")]},Z.updateRadialAxis=function(le,fe){var se=this,H=se.gd,Y=se.layers,ne=se.radius,te=se.innerRadius,K=se.cx,$=se.cy,ae=se.getRadial(fe),ie=D(se.getSector(fe)[0],360),oe=se.radialAxis,ue=te<ne,ye=se.isSmith;ye||(se.fillViewInitialKey("radialaxis.angle",ae.angle),se.fillViewInitialKey("radialaxis.range",oe.range.slice()),oe.setGeometry()),oe.tickangle==="auto"&&ie>90&&ie<=270&&(oe.tickangle=180);var ce=ye?function(We){var qe=F(se,k([We.x,0]));return i(qe[0]-K,qe[1]-$)}:function(We){return i(oe.l2p(We.x)+te,0)},me=ye?function(We){return O(se,We.x,-1/0,1/0)}:function(We){return se.pathArc(oe.r2p(We.x)+te)},xe=ee(ae);if(se.radialTickLayout!==xe&&(Y["radial-axis"].selectAll(".xtick").remove(),se.radialTickLayout=xe),ue){oe.setScale();var ke=0,Ae=ye?(oe.tickvals||[]).filter(function(We){return We>=0}).map(function(We){return f.tickText(oe,We,!0,!1)}):f.calcTicks(oe),Oe=ye?Ae:f.clipEnds(oe,Ae),He=f.getTickSigns(oe)[2];ye&&((oe.ticks==="top"&&oe.side==="bottom"||oe.ticks==="bottom"&&oe.side==="top")&&(He=-He),oe.ticks==="top"&&oe.side==="top"&&(ke=-oe.ticklen),oe.ticks==="bottom"&&oe.side==="bottom"&&(ke=oe.ticklen)),f.drawTicks(H,oe,{vals:Ae,layer:Y["radial-axis"],path:f.makeTickPath(oe,0,He),transFn:ce,crisp:!1}),f.drawGrid(H,oe,{vals:Oe,layer:Y["radial-grid"],path:me,transFn:x.noop,crisp:!1}),f.drawLabels(H,oe,{vals:Ae,layer:Y["radial-axis"],transFn:ce,labelFns:f.makeLabelFns(oe,ke)})}var Ge=se.radialAxisAngle=se.vangles?B(W(U(ae.angle),se.vangles)):ae.angle,_e=i(K,$),Re=_e+t(-Ge);J(Y["radial-axis"],ue&&(ae.showticklabels||ae.ticks),{transform:Re}),J(Y["radial-grid"],ue&&ae.showgrid,{transform:ye?"":_e}),J(Y["radial-line"].select("line"),ue&&ae.showline,{x1:ye?-ne:te,y1:0,x2:ne,y2:0,transform:Re}).attr("stroke-width",ae.linewidth).call(a.stroke,ae.linecolor)},Z.updateRadialAxisTitle=function(le,fe,se){if(!this.isSmith){var H=this,Y=H.gd,ne=H.radius,te=H.cx,K=H.cy,$=H.getRadial(fe),ae=H.id+"title",ie=0;if($.title){var oe=r.bBox(H.layers["radial-axis"].node()).height,ue=$.title.font.size,ye=$.side;ie=ye==="top"?ue:ye==="counterclockwise"?-(oe+ue*.4):oe+ue*.8}var ce=se!==void 0?se:H.radialAxisAngle,me=U(ce),xe=Math.cos(me),ke=Math.sin(me),Ae=te+ne/2*xe+ie*ke,Oe=K-ne/2*ke+ie*xe;H.layers["radial-axis-title"]=y.draw(Y,ae,{propContainer:$,propName:H.id+".radialaxis.title",placeholder:I(Y,"Click to enter radial axis title"),attributes:{x:Ae,y:Oe,"text-anchor":"middle"},transform:{rotate:-ce}})}},Z.updateAngularAxis=function(le,fe){var se=this,H=se.gd,Y=se.layers,ne=se.radius,te=se.innerRadius,K=se.cx,$=se.cy,ae=se.getAngular(fe),ie=se.angularAxis,oe=se.isSmith;oe||(se.fillViewInitialKey("angularaxis.rotation",ae.rotation),ie.setGeometry(),ie.setScale());var ue=oe?function(qe){var Ue=F(se,k([0,qe.x]));return Math.atan2(Ue[0]-K,Ue[1]-$)-Math.PI/2}:function(qe){return ie.t2g(qe.x)};ie.type==="linear"&&ie.thetaunit==="radians"&&(ie.tick0=B(ie.tick0),ie.dtick=B(ie.dtick));var ye=function(qe){return i(K+ne*Math.cos(qe),$-ne*Math.sin(qe))},ce=oe?function(qe){var Ue=F(se,k([0,qe.x]));return i(Ue[0],Ue[1])}:function(qe){return ye(ue(qe))},me=oe?function(qe){var Ue=F(se,k([0,qe.x])),Ie=Math.atan2(Ue[0]-K,Ue[1]-$)-Math.PI/2;return i(Ue[0],Ue[1])+t(-B(Ie))}:function(qe){var Ue=ue(qe);return ye(Ue)+t(-B(Ue))},xe=oe?function(qe){return P(se,qe.x,0,1/0)}:function(qe){var Ue=ue(qe),Ie=Math.cos(Ue),Ve=Math.sin(Ue);return"M"+[K+te*Ie,$-te*Ve]+"L"+[K+ne*Ie,$-ne*Ve]},ke=f.makeLabelFns(ie,0),Ae=ke.labelStandoff,Oe={};Oe.xFn=function(qe){var Ue=ue(qe);return Math.cos(Ue)*Ae},Oe.yFn=function(qe){var Ue=ue(qe),Ie=Math.sin(Ue)>0?.2:1;return-Math.sin(Ue)*(Ae+qe.fontSize*Ie)+Math.abs(Math.cos(Ue))*(qe.fontSize*w)},Oe.anchorFn=function(qe){var Ue=ue(qe),Ie=Math.cos(Ue);return Math.abs(Ie)<.1?"middle":Ie>0?"start":"end"},Oe.heightFn=function(qe,Ue,Ie){var Ve=ue(qe);return-.5*(1+Math.sin(Ve))*Ie};var He=ee(ae);se.angularTickLayout!==He&&(Y["angular-axis"].selectAll("."+ie._id+"tick").remove(),se.angularTickLayout=He);var Ge=oe?[1/0].concat(ie.tickvals||[]).map(function(qe){return f.tickText(ie,qe,!0,!1)}):f.calcTicks(ie);oe&&(Ge[0].text="\u221E",Ge[0].fontSize*=1.75);var _e;if(fe.gridshape==="linear"?(_e=Ge.map(ue),x.angleDelta(_e[0],_e[1])<0&&(_e=_e.slice().reverse())):_e=null,se.vangles=_e,ie.type==="category"&&(Ge=Ge.filter(function(qe){return x.isAngleInsideSector(ue(qe),se.sectorInRad)})),ie.visible){var Re=ie.ticks==="inside"?-1:1,We=(ie.linewidth||1)/2;f.drawTicks(H,ie,{vals:Ge,layer:Y["angular-axis"],path:"M"+Re*We+",0h"+Re*ie.ticklen,transFn:me,crisp:!1}),f.drawGrid(H,ie,{vals:Ge,layer:Y["angular-grid"],path:xe,transFn:x.noop,crisp:!1}),f.drawLabels(H,ie,{vals:Ge,layer:Y["angular-axis"],repositionOnUpdate:!0,transFn:ce,labelFns:Oe})}J(Y["angular-line"].select("path"),ae.showline,{d:se.pathSubplot(),transform:i(K,$)}).attr("stroke-width",ae.linewidth).call(a.stroke,ae.linecolor)},Z.updateFx=function(le,fe){if(!this.gd._context.staticPlot){var se=!this.isSmith;se&&(this.updateAngularDrag(le),this.updateRadialDrag(le,fe,0),this.updateRadialDrag(le,fe,1)),this.updateHoverAndMainDrag(le)}},Z.updateHoverAndMainDrag=function(le){var fe=this,se=fe.isSmith,H=fe.gd,Y=fe.layers,ne=le._zoomlayer,te=v.MINZOOM,K=v.OFFEDGE,$=fe.radius,ae=fe.innerRadius,ie=fe.cx,oe=fe.cy,ue=fe.cxx,ye=fe.cyy,ce=fe.sectorInRad,me=fe.vangles,xe=fe.radialAxis,ke=L.clampTiny,Ae=L.findXYatLength,Oe=L.findEnclosingVertexAngles,He=v.cornerHalfWidth,Ge=v.cornerLen/2,_e,Re,We=h.makeDragger(Y,"path","maindrag","crosshair");u.select(We).attr("d",fe.pathSubplot()).attr("transform",i(ie,oe)),We.onmousemove=function(Je){p.hover(H,Je,fe.id),H._fullLayout._lasthover=We,H._fullLayout._hoversubplot=fe.id},We.onmouseout=function(Je){H._dragging||d.unhover(H,Je)};var qe={element:We,gd:H,subplot:fe.id,plotinfo:{id:fe.id,xaxis:fe.xaxis,yaxis:fe.yaxis},xaxes:[fe.xaxis],yaxes:[fe.yaxis]},Ue,Ie,Ve,dt,Rt,Gt,kt,zt,Bt;function Lt(Je,gt){return Math.sqrt(Je*Je+gt*gt)}function Mt(Je,gt){return Lt(Je-ue,gt-ye)}function it(Je,gt){return Math.atan2(ye-gt,Je-ue)}function ht(Je,gt){return[Je*Math.cos(gt),Je*Math.sin(-gt)]}function Qe(Je,gt){if(Je===0)return fe.pathSector(2*He);var Et=Ge/Je,rr=gt-Et,vr=gt+Et,or=Math.max(0,Math.min(Je,$)),dr=or-He,Lr=or+He;return"M"+ht(dr,rr)+"A"+[dr,dr]+" 0,0,0 "+ht(dr,vr)+"L"+ht(Lr,vr)+"A"+[Lr,Lr]+" 0,0,1 "+ht(Lr,rr)+"Z"}function Ce(Je,gt,Et){if(Je===0)return fe.pathSector(2*He);var rr=ht(Je,gt),vr=ht(Je,Et),or=ke((rr[0]+vr[0])/2),dr=ke((rr[1]+vr[1])/2),Lr,kr;if(or&&dr){var tr=dr/or,Or=-1/tr,et=Ae(He,tr,or,dr);Lr=Ae(Ge,Or,et[0][0],et[0][1]),kr=Ae(Ge,Or,et[1][0],et[1][1])}else{var we,Se;dr?(we=Ge,Se=He):(we=He,Se=Ge),Lr=[[or-we,dr-Se],[or+we,dr-Se]],kr=[[or-we,dr+Se],[or+we,dr+Se]]}return"M"+Lr.join("L")+"L"+kr.reverse().join("L")+"Z"}function Xe(){Ve=null,dt=null,Rt=fe.pathSubplot(),Gt=!1;var Je=H._fullLayout[fe.id];kt=s(Je.bgcolor).getLuminance(),zt=h.makeZoombox(ne,kt,ie,oe,Rt),zt.attr("fill-rule","evenodd"),Bt=h.makeCorners(ne,ie,oe),b(H)}function rt(Je,gt){return gt=Math.max(Math.min(gt,$),ae),Je<K?Je=0:$-Je<K?Je=$:gt<K?gt=0:$-gt<K&&(gt=$),Math.abs(gt-Je)>te?(Je<gt?(Ve=Je,dt=gt):(Ve=gt,dt=Je),!0):(Ve=null,dt=null,!1)}function ut(Je,gt){Je=Je||Rt,gt=gt||"M0,0Z",zt.attr("d",Je),Bt.attr("d",gt),h.transitionZoombox(zt,Bt,Gt,kt),Gt=!0;var Et={};Ot(Et),H.emit("plotly_relayouting",Et)}function Pt(Je,gt){Je=Je*_e,gt=gt*Re;var Et=Ue+Je,rr=Ie+gt,vr=Mt(Ue,Ie),or=Math.min(Mt(Et,rr),$),dr=it(Ue,Ie),Lr,kr;rt(vr,or)&&(Lr=Rt+fe.pathSector(dt),Ve&&(Lr+=fe.pathSector(Ve)),kr=Qe(Ve,dr)+Qe(dt,dr)),ut(Lr,kr)}function St(Je,gt,Et,rr){var vr=L.findIntersectionXY(Et,rr,Et,[Je-ue,ye-gt]);return Lt(vr[0],vr[1])}function Nt(Je,gt){var Et=Ue+Je,rr=Ie+gt,vr=it(Ue,Ie),or=it(Et,rr),dr=Oe(vr,me),Lr=Oe(or,me),kr=St(Ue,Ie,dr[0],dr[1]),tr=Math.min(St(Et,rr,Lr[0],Lr[1]),$),Or,et;rt(kr,tr)&&(Or=Rt+fe.pathSector(dt),Ve&&(Or+=fe.pathSector(Ve)),et=[Ce(Ve,dr[0],dr[1]),Ce(dt,dr[0],dr[1])].join(" ")),ut(Or,et)}function jt(){if(h.removeZoombox(H),!(Ve===null||dt===null)){var Je={};Ot(Je),h.showDoubleClickNotifier(H),m.call("_guiRelayout",H,Je)}}function Ot(Je){var gt=xe._rl,Et=(gt[1]-gt[0])/(1-ae/$)/$,rr=[gt[0]+(Ve-ae)*Et,gt[0]+(dt-ae)*Et];Je[fe.id+".radialaxis.range"]=rr}function Kt(Je,gt){var Et=H._fullLayout.clickmode;if(h.removeZoombox(H),Je===2){var rr={};for(var vr in fe.viewInitial)rr[fe.id+"."+vr]=fe.viewInitial[vr];H.emit("plotly_doubleclick",null),m.call("_guiRelayout",H,rr)}Et.indexOf("select")>-1&&Je===1&&A(gt,H,[fe.xaxis],[fe.yaxis],fe.id,qe),Et.indexOf("event")>-1&&p.click(H,gt,fe.id)}qe.prepFn=function(Je,gt,Et){var rr=H._fullLayout.dragmode,vr=We.getBoundingClientRect();H._fullLayout._calcInverseTransform(H);var or=H._fullLayout._invTransform;_e=H._fullLayout._invScaleX,Re=H._fullLayout._invScaleY;var dr=x.apply3DTransform(or)(gt-vr.left,Et-vr.top);if(Ue=dr[0],Ie=dr[1],me){var Lr=L.findPolygonOffset($,ce[0],ce[1],me);Ue+=ue+Lr[0],Ie+=ye+Lr[1]}switch(rr){case"zoom":qe.clickFn=Kt,se||(me?qe.moveFn=Nt:qe.moveFn=Pt,qe.doneFn=jt,Xe());break;case"select":case"lasso":g(Je,gt,Et,qe,rr);break}},d.init(qe)},Z.updateRadialDrag=function(le,fe,se){var H=this,Y=H.gd,ne=H.layers,te=H.radius,K=H.innerRadius,$=H.cx,ae=H.cy,ie=H.radialAxis,oe=v.radialDragBoxSize,ue=oe/2;if(!ie.visible)return;var ye=U(H.radialAxisAngle),ce=ie._rl,me=ce[0],xe=ce[1],ke=ce[se],Ae=.75*(ce[1]-ce[0])/(1-H.getHole(fe))/te,Oe,He,Ge;se?(Oe=$+(te+ue)*Math.cos(ye),He=ae-(te+ue)*Math.sin(ye),Ge="radialdrag"):(Oe=$+(K-ue)*Math.cos(ye),He=ae-(K-ue)*Math.sin(ye),Ge="radialdrag-inner");var _e=h.makeRectDragger(ne,Ge,"crosshair",-ue,-ue,oe,oe),Re={element:_e,gd:Y};J(u.select(_e),ie.visible&&K<te,{transform:i(Oe,He)});var We,qe,Ue;function Ie(kt,zt){if(We)We(kt,zt);else{var Bt=[kt,-zt],Lt=[Math.cos(ye),Math.sin(ye)],Mt=Math.abs(x.dot(Bt,Lt)/Math.sqrt(x.dot(Bt,Bt)));isNaN(Mt)||(We=Mt<.5?Rt:Gt)}var it={};Ve(it),Y.emit("plotly_relayouting",it)}function Ve(kt){qe!==null?kt[H.id+".radialaxis.angle"]=qe:Ue!==null&&(kt[H.id+".radialaxis.range["+se+"]"]=Ue)}function dt(){qe!==null?m.call("_guiRelayout",Y,H.id+".radialaxis.angle",qe):Ue!==null&&m.call("_guiRelayout",Y,H.id+".radialaxis.range["+se+"]",Ue)}function Rt(kt,zt){if(se!==0){var Bt=Oe+kt,Lt=He+zt;qe=Math.atan2(ae-Lt,Bt-$),H.vangles&&(qe=W(qe,H.vangles)),qe=B(qe);var Mt=i($,ae)+t(-qe);ne["radial-axis"].attr("transform",Mt),ne["radial-line"].select("line").attr("transform",Mt);var it=H.gd._fullLayout,ht=it[H.id];H.updateRadialAxisTitle(it,ht,qe)}}function Gt(kt,zt){var Bt=x.dot([kt,-zt],[Math.cos(ye),Math.sin(ye)]);if(Ue=ke-Ae*Bt,Ae>0!=(se?Ue>me:Ue<xe)){Ue=null;return}var Lt=Y._fullLayout,Mt=Lt[H.id];ie.range[se]=Ue,ie._rl[se]=Ue,H.updateRadialAxis(Lt,Mt),H.xaxis.setRange(),H.xaxis.setScale(),H.yaxis.setRange(),H.yaxis.setScale();var it=!1;for(var ht in H.traceHash){var Qe=H.traceHash[ht],Ce=x.filterVisible(Qe),Xe=Qe[0][0].trace._module;Xe.plot(Y,H,Ce,Mt),m.traceIs(ht,"gl")&&Ce.length&&(it=!0)}it&&(_(Y),T(Y))}Re.prepFn=function(){We=null,qe=null,Ue=null,Re.moveFn=Ie,Re.doneFn=dt,b(Y)},Re.clampFn=function(kt,zt){return Math.sqrt(kt*kt+zt*zt)<v.MINDRAG&&(kt=0,zt=0),[kt,zt]},d.init(Re)},Z.updateAngularDrag=function(le){var fe=this,se=fe.gd,H=fe.layers,Y=fe.radius,ne=fe.angularAxis,te=fe.cx,K=fe.cy,$=fe.cxx,ae=fe.cyy,ie=v.angularDragBoxSize,oe=h.makeDragger(H,"path","angulardrag","move"),ue={element:oe,gd:se};u.select(oe).attr("d",fe.pathAnnulus(Y,Y+ie)).attr("transform",i(te,K)).call(M,"move");function ye(Ue,Ie){return Math.atan2(ae+ie-Ie,Ue-$-ie)}var ce=H.frontplot.select(".scatterlayer").selectAll(".trace"),me=ce.selectAll(".point"),xe=ce.selectAll(".textpoint"),ke,Ae,Oe,He,Ge,_e;function Re(Ue,Ie){var Ve=fe.gd._fullLayout,dt=Ve[fe.id],Rt=ke+Ue*le._invScaleX,Gt=Ae+Ie*le._invScaleY,kt=ye(Rt,Gt),zt=B(kt-_e);if(He=Oe+zt,H.frontplot.attr("transform",i(fe.xOffset2,fe.yOffset2)+t([-zt,$,ae])),fe.vangles){Ge=fe.radialAxisAngle+zt;var Bt=i(te,K)+t(-zt),Lt=i(te,K)+t(-Ge);H.bg.attr("transform",Bt),H["radial-grid"].attr("transform",Bt),H["radial-axis"].attr("transform",Lt),H["radial-line"].select("line").attr("transform",Lt),fe.updateRadialAxisTitle(Ve,dt,Ge)}else fe.clipPaths.forTraces.select("path").attr("transform",i($,ae)+t(zt));me.each(function(){var rt=u.select(this),ut=r.getTranslate(rt);rt.attr("transform",i(ut.x,ut.y)+t([zt]))}),xe.each(function(){var rt=u.select(this),ut=rt.select("text"),Pt=r.getTranslate(rt);rt.attr("transform",t([zt,ut.attr("x"),ut.attr("y")])+i(Pt.x,Pt.y))}),ne.rotation=x.modHalf(He,360),fe.updateAngularAxis(Ve,dt),fe._hasClipOnAxisFalse&&!x.isFullCircle(fe.sectorInRad)&&ce.call(r.hideOutsideRangePoints,fe);var Mt=!1;for(var it in fe.traceHash)if(m.traceIs(it,"gl")){var ht=fe.traceHash[it],Qe=x.filterVisible(ht),Ce=ht[0][0].trace._module;Ce.plot(se,fe,Qe,dt),Qe.length&&(Mt=!0)}Mt&&(_(se),T(se));var Xe={};We(Xe),se.emit("plotly_relayouting",Xe)}function We(Ue){Ue[fe.id+".angularaxis.rotation"]=He,fe.vangles&&(Ue[fe.id+".radialaxis.angle"]=Ge)}function qe(){xe.select("text").attr("transform",null);var Ue={};We(Ue),m.call("_guiRelayout",se,Ue)}ue.prepFn=function(Ue,Ie,Ve){var dt=le[fe.id];Oe=dt.angularaxis.rotation;var Rt=oe.getBoundingClientRect();ke=Ie-Rt.left,Ae=Ve-Rt.top,se._fullLayout._calcInverseTransform(se);var Gt=x.apply3DTransform(le._invTransform)(ke,Ae);ke=Gt[0],Ae=Gt[1],_e=ye(ke,Ae),ue.moveFn=Re,ue.doneFn=qe,b(se)},fe.vangles&&!x.isFullCircle(fe.sectorInRad)&&(ue.prepFn=x.noop,M(u.select(oe),null)),d.init(ue)},Z.isPtInside=function(le){if(this.isSmith)return!0;var fe=this.sectorInRad,se=this.vangles,H=this.angularAxis.c2g(le.theta),Y=this.radialAxis,ne=Y.c2l(le.r),te=Y._rl,K=se?L.isPtInsidePolygon:x.isPtInsideSector;return K(ne,H,te,fe,se)},Z.pathArc=function(le){var fe=this.sectorInRad,se=this.vangles,H=se?L.pathPolygon:x.pathArc;return H(le,fe[0],fe[1],se)},Z.pathSector=function(le){var fe=this.sectorInRad,se=this.vangles,H=se?L.pathPolygon:x.pathSector;return H(le,fe[0],fe[1],se)},Z.pathAnnulus=function(le,fe){var se=this.sectorInRad,H=this.vangles,Y=H?L.pathPolygonAnnulus:x.pathAnnulus;return Y(le,fe,se[0],se[1],H)},Z.pathSubplot=function(){var le=this.innerRadius,fe=this.radius;return le?this.pathAnnulus(le,fe):this.pathSector(fe)},Z.fillViewInitialKey=function(le,fe){le in this.viewInitial||(this.viewInitial[le]=fe)};function ee(le){var fe=le.ticks+String(le.ticklen)+String(le.showticklabels);return"side"in le&&(fe+=le.side),fe}function q(le){var fe=le[0],se=le[1],H=se-fe,Y=D(fe,360),ne=Y+H,te=Math.cos(U(Y)),K=Math.sin(U(Y)),$=Math.cos(U(ne)),ae=Math.sin(U(ne)),ie,oe,ue,ye;return Y<=90&&ne>=90||Y>90&&ne>=450?ye=1:K<=0&&ae<=0?ye=0:ye=Math.max(K,ae),Y<=180&&ne>=180||Y>180&&ne>=540?ie=-1:te>=0&&$>=0?ie=0:ie=Math.min(te,$),Y<=270&&ne>=270||Y>270&&ne>=630?oe=-1:K>=0&&ae>=0?oe=0:oe=Math.min(K,ae),ne>=360?ue=1:te<=0&&$<=0?ue=0:ue=Math.max(te,$),[ie,oe,ue,ye]}function W(le,fe){var se=function(Y){return x.angleDist(le,Y)},H=x.findIndexOfMin(fe,se);return fe[H]}function J(le,fe,se){return fe?(le.attr("display",null),le.attr(se)):le&&le.attr("display","none"),le}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(e,z,N){var u=e("../../lib"),s=e("../cartesian/set_convert"),m=u.deg2rad,x=u.rad2deg;z.exports=function(f,l,o){switch(s(f,o),f._id){case"x":case"radialaxis":t(f,l);break;case"angularaxis":r(f,l);break}};function t(n,f){var l=f._subplot;n.setGeometry=function(){var o=n._rl[0],c=n._rl[1],h=l.innerRadius,d=(l.radius-h)/(c-o),p=h/d,y=o>c?function(g){return g<=0}:function(g){return g>=0};n.c2g=function(g){var A=n.c2l(g)-o;return(y(A)?A:0)+p},n.g2c=function(g){return n.l2c(g+o-p)},n.g2p=function(g){return g*d},n.c2p=function(g){return n.g2p(n.c2g(g))}}}function i(n,f){return f==="degrees"?m(n):n}function a(n,f){return f==="degrees"?x(n):n}function r(n,f){var l=n.type;if(l==="linear"){var o=n.d2c,c=n.c2d;n.d2c=function(h,d){return i(o(h),d)},n.c2d=function(h,d){return c(a(h,d))}}n.makeCalcdata=function(h,d){var p=h[d],y=h._length,g,A,b=function(v){return n.d2c(v,h.thetaunit)};if(p){if(u.isTypedArray(p)&&l==="linear"){if(y===p.length)return p;if(p.subarray)return p.subarray(0,y)}for(g=new Array(y),A=0;A<y;A++)g[A]=b(p[A])}else{var M=d+"0",_="d"+d,T=M in h?b(h[M]):0,w=h[_]?b(h[_]):(n.period||2*Math.PI)/y;for(g=new Array(y),A=0;A<y;A++)g[A]=T+A*w}return g},n.setGeometry=function(){var h=f.sector,d=h.map(m),p={clockwise:-1,counterclockwise:1}[n.direction],y=m(n.rotation),g=function(L){return p*L+y},A=function(L){return(L-y)/p},b,M,_,T;switch(l){case"linear":M=b=u.identity,T=m,_=x,n.range=u.isFullCircle(d)?[h[0],h[0]+360]:d.map(A).map(x);break;case"category":var w=n._categories.length,v=n.period?Math.max(n.period,w):w;v===0&&(v=1),M=T=function(L){return L*2*Math.PI/v},b=_=function(L){return L*v/Math.PI/2},n.range=[0,v];break}n.c2g=function(L){return g(M(L))},n.g2c=function(L){return b(A(L))},n.t2g=function(L){return g(T(L))},n.g2t=function(L){return _(A(L))}}}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(e,z,N){z.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(e,z,N){function u(a){return a<0?-1:a>0?1:0}function s(a){var r=a[0],n=a[1];if(!isFinite(r)||!isFinite(n))return[1,0];var f=(r+1)*(r+1)+n*n;return[(r*r+n*n-1)/f,2*n/f]}function m(a,r){var n=r[0],f=r[1];return[n*a.radius+a.cx,-f*a.radius+a.cy]}function x(a,r){return r*a.radius}function t(a,r,n,f){var l=m(a,s([n,r])),o=l[0],c=l[1],h=m(a,s([f,r])),d=h[0],p=h[1];if(r===0)return["M"+o+","+c,"L"+d+","+p].join(" ");var y=x(a,1/Math.abs(r));return["M"+o+","+c,"A"+y+","+y+" 0 0,"+(r<0?1:0)+" "+d+","+p].join(" ")}function i(a,r,n,f){var l=x(a,1/(r+1)),o=m(a,s([r,n])),c=o[0],h=o[1],d=m(a,s([r,f])),p=d[0],y=d[1];if(u(n)!==u(f)){var g=m(a,s([r,0])),A=g[0],b=g[1];return["M"+c+","+h,"A"+l+","+l+" 0 0,"+(0<n?0:1)+" "+A+","+b,"A"+l+","+l+" 0 0,"+(f<0?0:1)+p+","+y].join(" ")}return["M"+c+","+h,"A"+l+","+l+" 0 0,"+(f<n?0:1)+" "+p+","+y].join(" ")}z.exports={smith:s,reactanceArc:t,resistanceArc:i,smithTransform:m}},{}],629:[function(e,z,N){var u=e("../get_data").getSubplotCalcData,s=e("../../lib").counterRegex,m=e("../polar/polar"),x=e("./constants"),t=x.attr,i=x.name,a=s(i),r={};r[t]={valType:"subplotid",dflt:i,editType:"calc"};function n(l){for(var o=l._fullLayout,c=l.calcdata,h=o._subplots[i],d=0;d<h.length;d++){var p=h[d],y=u(c,i,p),g=o[p]._subplot;g||(g=m(l,p,!0),o[p]._subplot=g),g.plot(y,o,l._promises)}}function f(l,o,c,h){for(var d=h._subplots[i]||[],p=0;p<d.length;p++){var y=d[p],g=h[y]._subplot;if(!o[y]&&!!g){g.framework.remove();for(var A in g.clipPaths)g.clipPaths[A].remove()}}}z.exports={attr:t,name:i,idRoot:i,idRegex:a,attrRegex:a,attributes:r,layoutAttributes:e("./layout_attributes"),supplyLayoutDefaults:e("./layout_defaults"),plot:n,clean:f,toSVG:e("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(e,z,N){var u=e("../../components/color/attributes"),s=e("../cartesian/layout_attributes"),m=e("../domain").attributes,x=e("../../lib").extendFlat,t=e("../../plot_api/edit_types").overrideAll,i=t({color:s.color,showline:x({},s.showline,{dflt:!0}),linecolor:s.linecolor,linewidth:s.linewidth,showgrid:x({},s.showgrid,{dflt:!0}),gridcolor:s.gridcolor,gridwidth:s.gridwidth},"plot","from-root"),a=t({ticklen:s.ticklen,tickwidth:x({},s.tickwidth,{dflt:2}),tickcolor:s.tickcolor,showticklabels:s.showticklabels,showtickprefix:s.showtickprefix,tickprefix:s.tickprefix,showticksuffix:s.showticksuffix,ticksuffix:s.ticksuffix,tickfont:s.tickfont,tickformat:s.tickformat,hoverformat:s.hoverformat,layer:s.layer},"plot","from-root"),r=x({visible:x({},s.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:x({},s.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},i,a),n=x({visible:x({},s.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:s.ticks,editType:"calc"},i,a);z.exports={domain:m({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:u.background},realaxis:r,imaginaryaxis:n,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../../plot_api/plot_template"),x=e("../subplot_defaults"),t=e("../get_data").getSubplotData,i=e("../cartesian/prefix_suffix_defaults"),a=e("../cartesian/tick_label_defaults"),r=e("../cartesian/line_grid_defaults"),n=e("../cartesian/set_convert"),f=e("./layout_attributes"),l=e("./constants"),o=l.axisNames,c=d(function(p){return p.slice().reverse().map(function(y){return-y}).concat([0]).concat(p)},String);function h(p,y,g,A){var b=g("bgcolor");A.bgColor=s.combine(b,A.paper_bgcolor);var M=t(A.fullData,l.name,A.id),_=A.layoutOut,T;function w(Z,ee){return g(T+"."+Z,ee)}for(var v=0;v<o.length;v++){T=o[v],u.isPlainObject(p[T])||(p[T]={});var L=p[T],S=m.newContainer(y,T);S._id=S._name=T,S._attr=A.id+"."+T,S._traceIndices=M.map(function(Z){return Z._expandedIndex});var k=w("visible");if(S.type="linear",n(S,_),i(L,S,w,S.type),k){var P=T==="realaxis";if(P&&w("side"),P)w("tickvals");else{var O=c(y.realaxis.tickvals||f.realaxis.tickvals.dflt);w("tickvals",O)}var F,I,D,U,B=A.font||{};k&&(F=w("color"),I=F===L.color?F:B.color,D=B.size,U=B.family),a(L,S,w,S.type,{noAng:!P,noExp:!0,font:{color:I,size:D,family:U}}),u.coerce2(p,y,f,T+".ticklen"),u.coerce2(p,y,f,T+".tickwidth"),u.coerce2(p,y,f,T+".tickcolor",y.color);var j=w("ticks");j||(delete y[T].ticklen,delete y[T].tickwidth,delete y[T].tickcolor),r(L,S,w,{dfltColor:F,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f[T]}),w("layer")}w("hoverformat"),delete S.type,S._input=L}}z.exports=function(y,g,A){x(y,g,A,{noUirevision:!0,type:l.name,attributes:f,handleDefaults:h,font:g.font,paper_bgcolor:g.paper_bgcolor,fullData:A,layoutOut:g})};function d(p,y){var g={};return function(A){var b=y?y(A):A;if(b in g)return g[b];var M=p(A);return g[b]=M,M}}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(e,z,N){var u=e("../lib"),s=e("../plot_api/plot_template"),m=e("./domain").defaults;z.exports=function(t,i,a,r){var n=r.type,f=r.attributes,l=r.handleDefaults,o=r.partition||"x",c=i._subplots[n],h=c.length,d=h&&c[0].replace(/\d+$/,""),p,y;function g(_,T){return u.coerce(p,y,f,_,T)}for(var A=0;A<h;A++){var b=c[A];t[b]?p=t[b]:p=t[b]={},y=s.newContainer(i,b,d),r.noUirevision||g("uirevision",i.uirevision);var M={};M[o]=[A/h,(A+1)/h],m(y,i,g,M),r.id=b,l(p,y,g,r)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(e,z,N){var u=e("../constants/docs");u.FORMAT_LINK,u.DATE_FORMAT_LINK;function s(m){var x=m.description?" "+m.description:"",t=m.keys||[];if(t.length>0){for(var i=[],a=0;a<t.length;a++)i[a]="`"+t[a]+"`";x=x+"Finally, the template string has access to ",t.length===1?x="variable "+i[0]:x="variables "+i.slice(0,-1).join(", ")+" and "+i.slice(-1)+"."}return x}N.hovertemplateAttrs=function(m,x){m=m||{},x=x||{},s(x);var t={valType:"string",dflt:"",editType:m.editType||"none"};return m.arrayOk!==!1&&(t.arrayOk=!0),t},N.texttemplateAttrs=function(m,x){m=m||{},x=x||{},s(x);var t={valType:"string",dflt:"",editType:m.editType||"calc"};return m.arrayOk!==!1&&(t.arrayOk=!0),t}},{"../constants/docs":474}],634:[function(e,z,N){var u=e("./ternary"),s=e("../../plots/get_data").getSubplotCalcData,m=e("../../lib").counterRegex,x="ternary";N.name=x;var t=N.attr="subplot";N.idRoot=x,N.idRegex=N.attrRegex=m(x);var i=N.attributes={};i[t]={valType:"subplotid",dflt:"ternary",editType:"calc"},N.layoutAttributes=e("./layout_attributes"),N.supplyLayoutDefaults=e("./layout_defaults"),N.plot=function(r){for(var n=r._fullLayout,f=r.calcdata,l=n._subplots[x],o=0;o<l.length;o++){var c=l[o],h=s(f,x,c),d=n[c]._subplot;d||(d=new u({id:c,graphDiv:r,container:n._ternarylayer.node()},n),n[c]._subplot=d),d.plot(h,n,r._promises)}},N.clean=function(a,r,n,f){for(var l=f._subplots[x]||[],o=0;o<l.length;o++){var c=l[o],h=f[c]._subplot;!r[c]&&!!h&&(h.plotContainer.remove(),h.clipDef.remove(),h.clipDefRelative.remove(),h.layers["a-title"].remove(),h.layers["b-title"].remove(),h.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(e,z,N){var u=e("../../components/color/attributes"),s=e("../domain").attributes,m=e("../cartesian/layout_attributes"),x=e("../../plot_api/edit_types").overrideAll,t=e("../../lib/extend").extendFlat,i={title:{text:m.title.text,font:m.title.font},color:m.color,tickmode:m.tickmode,nticks:t({},m.nticks,{dflt:6,min:1}),tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:m.ticks,ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,showticklabels:m.showticklabels,showtickprefix:m.showtickprefix,tickprefix:m.tickprefix,showticksuffix:m.showticksuffix,ticksuffix:m.ticksuffix,showexponent:m.showexponent,exponentformat:m.exponentformat,minexponent:m.minexponent,separatethousands:m.separatethousands,tickfont:m.tickfont,tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,hoverformat:m.hoverformat,showline:t({},m.showline,{dflt:!0}),linecolor:m.linecolor,linewidth:m.linewidth,showgrid:t({},m.showgrid,{dflt:!0}),gridcolor:m.gridcolor,gridwidth:m.gridwidth,layer:m.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:m._deprecated.title,titlefont:m._deprecated.titlefont}},a=z.exports=x({domain:s({name:"ternary"}),bgcolor:{valType:"color",dflt:u.background},sum:{valType:"number",dflt:1,min:0},aaxis:i,baxis:i,caxis:i},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(e,z,N){var u=e("../../components/color"),s=e("../../plot_api/plot_template"),m=e("../../lib"),x=e("../subplot_defaults"),t=e("../cartesian/tick_label_defaults"),i=e("../cartesian/prefix_suffix_defaults"),a=e("../cartesian/tick_mark_defaults"),r=e("../cartesian/tick_value_defaults"),n=e("../cartesian/line_grid_defaults"),f=e("./layout_attributes"),l=["aaxis","baxis","caxis"];z.exports=function(d,p,y){x(d,p,y,{type:"ternary",attributes:f,handleDefaults:o,font:p.font,paper_bgcolor:p.paper_bgcolor})};function o(h,d,p,y){var g=p("bgcolor"),A=p("sum");y.bgColor=u.combine(g,y.paper_bgcolor);for(var b,M,_,T=0;T<l.length;T++)b=l[T],M=h[b]||{},_=s.newContainer(d,b),_._name=b,c(M,_,y,d);var w=d.aaxis,v=d.baxis,L=d.caxis;w.min+v.min+L.min>=A&&(w.min=0,v.min=0,L.min=0,h.aaxis&&delete h.aaxis.min,h.baxis&&delete h.baxis.min,h.caxis&&delete h.caxis.min)}function c(h,d,p,y){var g=f[d._name];function A(S,k){return m.coerce(h,d,g,S,k)}A("uirevision",y.uirevision),d.type="linear";var b=A("color"),M=b!==g.color.dflt?b:p.font.color,_=d._name,T=_.charAt(0).toUpperCase(),w="Component "+T,v=A("title.text",w);d._hovertitle=v===w?v:T,m.coerceFont(A,"title.font",{family:p.font.family,size:m.bigFont(p.font.size),color:M}),A("min"),r(h,d,A,"linear"),i(h,d,A,"linear"),t(h,d,A,"linear"),a(h,d,A,{outerTicks:!0});var L=A("showticklabels");L&&(m.coerceFont(A,"tickfont",{family:p.font.family,size:p.font.size,color:M}),A("tickangle"),A("tickformat")),n(h,d,A,{dfltColor:b,bgColor:p.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:g}),A("hoverformat"),A("layer")}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(e,z,N){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../registry"),x=e("../../lib"),t=x.strTranslate,i=x._,a=e("../../components/color"),r=e("../../components/drawing"),n=e("../cartesian/set_convert"),f=e("../../lib/extend").extendFlat,l=e("../plots"),o=e("../cartesian/axes"),c=e("../../components/dragelement"),h=e("../../components/fx"),d=e("../../components/dragelement/helpers"),p=d.freeMode,y=d.rectMode,g=e("../../components/titles"),A=e("../cartesian/select").prepSelect,b=e("../cartesian/select").selectOnClick,M=e("../cartesian/select").clearSelect,_=e("../cartesian/select").clearSelectionsCache,T=e("../cartesian/constants");function w(B,j){this.id=B.id,this.graphDiv=B.graphDiv,this.init(j),this.makeFramework(j),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}z.exports=w;var v=w.prototype;v.init=function(B){this.container=B._ternarylayer,this.defs=B._defs,this.layoutId=B._uid,this.traceHash={},this.layers={}},v.plot=function(B,j){var Z=this,ee=j[Z.id],q=j._size;Z._hasClipOnAxisFalse=!1;for(var W=0;W<B.length;W++){var J=B[W][0].trace;if(J.cliponaxis===!1){Z._hasClipOnAxisFalse=!0;break}}Z.updateLayers(ee),Z.adjustLayout(ee,q),l.generalUpdatePerTraceModule(Z.graphDiv,Z,B,ee),Z.layers.plotbg.select("path").call(a.fill,ee.bgcolor)},v.makeFramework=function(B){var j=this,Z=j.graphDiv,ee=B[j.id],q=j.clipId="clip"+j.layoutId+j.id,W=j.clipIdRelative="clip-relative"+j.layoutId+j.id;j.clipDef=x.ensureSingleById(B._clips,"clipPath",q,function(J){J.append("path").attr("d","M0,0Z")}),j.clipDefRelative=x.ensureSingleById(B._clips,"clipPath",W,function(J){J.append("path").attr("d","M0,0Z")}),j.plotContainer=x.ensureSingle(j.container,"g",j.id),j.updateLayers(ee),r.setClipUrl(j.layers.backplot,q,Z),r.setClipUrl(j.layers.grids,q,Z)},v.updateLayers=function(B){var j=this,Z=j.layers,ee=["draglayer","plotbg","backplot","grids"];B.aaxis.layer==="below traces"&&ee.push("aaxis","aline"),B.baxis.layer==="below traces"&&ee.push("baxis","bline"),B.caxis.layer==="below traces"&&ee.push("caxis","cline"),ee.push("frontplot"),B.aaxis.layer==="above traces"&&ee.push("aaxis","aline"),B.baxis.layer==="above traces"&&ee.push("baxis","bline"),B.caxis.layer==="above traces"&&ee.push("caxis","cline");var q=j.plotContainer.selectAll("g.toplevel").data(ee,String),W=["agrid","bgrid","cgrid"];q.enter().append("g").attr("class",function(J){return"toplevel "+J}).each(function(J){var le=u.select(this);Z[J]=le,J==="frontplot"?le.append("g").classed("scatterlayer",!0):J==="backplot"?le.append("g").classed("maplayer",!0):J==="plotbg"?le.append("path").attr("d","M0,0Z"):J==="aline"||J==="bline"||J==="cline"?le.append("path"):J==="grids"&&W.forEach(function(fe){Z[fe]=le.append("g").classed("grid "+fe,!0)})}),q.order()};var L=Math.sqrt(4/3);v.adjustLayout=function(B,j){var Z=this,ee=B.domain,q=(ee.x[0]+ee.x[1])/2,W=(ee.y[0]+ee.y[1])/2,J=ee.x[1]-ee.x[0],le=ee.y[1]-ee.y[0],fe=J*j.w,se=le*j.h,H=B.sum,Y=B.aaxis.min,ne=B.baxis.min,te=B.caxis.min,K,$,ae,ie,oe,ue;fe>L*se?(ie=se,ae=ie*L):(ae=fe,ie=ae/L),oe=J*ae/fe,ue=le*ie/se,K=j.l+j.w*q-ae/2,$=j.t+j.h*(1-W)-ie/2,Z.x0=K,Z.y0=$,Z.w=ae,Z.h=ie,Z.sum=H,Z.xaxis={type:"linear",range:[Y+2*te-H,H-Y-2*ne],domain:[q-oe/2,q+oe/2],_id:"x"},n(Z.xaxis,Z.graphDiv._fullLayout),Z.xaxis.setScale(),Z.xaxis.isPtWithinRange=function(Re){return Re.a>=Z.aaxis.range[0]&&Re.a<=Z.aaxis.range[1]&&Re.b>=Z.baxis.range[1]&&Re.b<=Z.baxis.range[0]&&Re.c>=Z.caxis.range[1]&&Re.c<=Z.caxis.range[0]},Z.yaxis={type:"linear",range:[Y,H-ne-te],domain:[W-ue/2,W+ue/2],_id:"y"},n(Z.yaxis,Z.graphDiv._fullLayout),Z.yaxis.setScale(),Z.yaxis.isPtWithinRange=function(){return!0};var ye=Z.yaxis.domain[0],ce=Z.aaxis=f({},B.aaxis,{range:[Y,H-ne-te],side:"left",tickangle:(+B.aaxis.tickangle||0)-30,domain:[ye,ye+ue*L],anchor:"free",position:0,_id:"y",_length:ae});n(ce,Z.graphDiv._fullLayout),ce.setScale();var me=Z.baxis=f({},B.baxis,{range:[H-Y-te,ne],side:"bottom",domain:Z.xaxis.domain,anchor:"free",position:0,_id:"x",_length:ae});n(me,Z.graphDiv._fullLayout),me.setScale();var xe=Z.caxis=f({},B.caxis,{range:[H-Y-ne,te],side:"right",tickangle:(+B.caxis.tickangle||0)+30,domain:[ye,ye+ue*L],anchor:"free",position:0,_id:"y",_length:ae});n(xe,Z.graphDiv._fullLayout),xe.setScale();var ke="M"+K+","+($+ie)+"h"+ae+"l-"+ae/2+",-"+ie+"Z";Z.clipDef.select("path").attr("d",ke),Z.layers.plotbg.select("path").attr("d",ke);var Ae="M0,"+ie+"h"+ae+"l-"+ae/2+",-"+ie+"Z";Z.clipDefRelative.select("path").attr("d",Ae);var Oe=t(K,$);Z.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Oe),Z.clipDefRelative.select("path").attr("transform",null);var He=t(K-me._offset,$+ie);Z.layers.baxis.attr("transform",He),Z.layers.bgrid.attr("transform",He);var Ge=t(K+ae/2,$)+"rotate(30)"+t(0,-ce._offset);Z.layers.aaxis.attr("transform",Ge),Z.layers.agrid.attr("transform",Ge);var _e=t(K+ae/2,$)+"rotate(-30)"+t(0,-xe._offset);Z.layers.caxis.attr("transform",_e),Z.layers.cgrid.attr("transform",_e),Z.drawAxes(!0),Z.layers.aline.select("path").attr("d",ce.showline?"M"+K+","+($+ie)+"l"+ae/2+",-"+ie:"M0,0").call(a.stroke,ce.linecolor||"#000").style("stroke-width",(ce.linewidth||0)+"px"),Z.layers.bline.select("path").attr("d",me.showline?"M"+K+","+($+ie)+"h"+ae:"M0,0").call(a.stroke,me.linecolor||"#000").style("stroke-width",(me.linewidth||0)+"px"),Z.layers.cline.select("path").attr("d",xe.showline?"M"+(K+ae/2)+","+$+"l"+ae/2+","+ie:"M0,0").call(a.stroke,xe.linecolor||"#000").style("stroke-width",(xe.linewidth||0)+"px"),Z.graphDiv._context.staticPlot||Z.initInteractions(),r.setClipUrl(Z.layers.frontplot,Z._hasClipOnAxisFalse?null:Z.clipId,Z.graphDiv)},v.drawAxes=function(B){var j=this,Z=j.graphDiv,ee=j.id.substr(7)+"title",q=j.layers,W=j.aaxis,J=j.baxis,le=j.caxis;if(j.drawAx(W),j.drawAx(J),j.drawAx(le),B){var fe=Math.max(W.showticklabels?W.tickfont.size/2:0,(le.showticklabels?le.tickfont.size*.75:0)+(le.ticks==="outside"?le.ticklen*.87:0)),se=(J.showticklabels?J.tickfont.size:0)+(J.ticks==="outside"?J.ticklen:0)+3;q["a-title"]=g.draw(Z,"a"+ee,{propContainer:W,propName:j.id+".aaxis.title",placeholder:i(Z,"Click to enter Component A title"),attributes:{x:j.x0+j.w/2,y:j.y0-W.title.font.size/3-fe,"text-anchor":"middle"}}),q["b-title"]=g.draw(Z,"b"+ee,{propContainer:J,propName:j.id+".baxis.title",placeholder:i(Z,"Click to enter Component B title"),attributes:{x:j.x0-se,y:j.y0+j.h+J.title.font.size*.83+se,"text-anchor":"middle"}}),q["c-title"]=g.draw(Z,"c"+ee,{propContainer:le,propName:j.id+".caxis.title",placeholder:i(Z,"Click to enter Component C title"),attributes:{x:j.x0+j.w+se,y:j.y0+j.h+le.title.font.size*.83+se,"text-anchor":"middle"}})}},v.drawAx=function(B){var j=this,Z=j.graphDiv,ee=B._name,q=ee.charAt(0),W=B._id,J=j.layers[ee],le=30,fe=q+"tickLayout",se=S(B);j[fe]!==se&&(J.selectAll("."+W+"tick").remove(),j[fe]=se),B.setScale();var H=o.calcTicks(B),Y=o.clipEnds(B,H),ne=o.makeTransTickFn(B),te=o.getTickSigns(B)[2],K=x.deg2rad(le),$=te*(B.linewidth||1)/2,ae=te*B.ticklen,ie=j.w,oe=j.h,ue=q==="b"?"M0,"+$+"l"+Math.sin(K)*ae+","+Math.cos(K)*ae:"M"+$+",0l"+Math.cos(K)*ae+","+-Math.sin(K)*ae,ye={a:"M0,0l"+oe+",-"+ie/2,b:"M0,0l-"+ie/2+",-"+oe,c:"M0,0l-"+oe+","+ie/2}[q];o.drawTicks(Z,B,{vals:B.ticks==="inside"?Y:H,layer:J,path:ue,transFn:ne,crisp:!1}),o.drawGrid(Z,B,{vals:Y,layer:j.layers[q+"grid"],path:ye,transFn:ne,crisp:!1}),o.drawLabels(Z,B,{vals:H,layer:J,transFn:ne,labelFns:o.makeLabelFns(B,0,le)})};function S(B){return B.ticks+String(B.ticklen)+String(B.showticklabels)}var k=T.MINZOOM/2+.87,P="m-0.87,.5h"+k+"v3h-"+(k+5.2)+"l"+(k/2+2.6)+",-"+(k*.87+4.5)+"l2.6,1.5l-"+k/2+","+k*.87+"Z",O="m0.87,.5h-"+k+"v3h"+(k+5.2)+"l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-2.6,1.5l"+k/2+","+k*.87+"Z",F="m0,1l"+k/2+","+k*.87+"l2.6,-1.5l-"+(k/2+2.6)+",-"+(k*.87+4.5)+"l-"+(k/2+2.6)+","+(k*.87+4.5)+"l2.6,1.5l"+k/2+",-"+k*.87+"Z",I="m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2Z",D=!0;v.clearSelect=function(){_(this.dragOptions),M(this.dragOptions.gd)},v.initInteractions=function(){var B=this,j=B.layers.plotbg.select("path").node(),Z=B.graphDiv,ee=Z._fullLayout._zoomlayer,q,W;this.dragOptions={element:j,gd:Z,plotinfo:{id:B.id,domain:Z._fullLayout[B.id].domain,xaxis:B.xaxis,yaxis:B.yaxis},subplot:B.id,prepFn:function(He,Ge,_e){B.dragOptions.xaxes=[B.xaxis],B.dragOptions.yaxes=[B.yaxis],q=Z._fullLayout._invScaleX,W=Z._fullLayout._invScaleY;var Re=B.dragOptions.dragmode=Z._fullLayout.dragmode;p(Re)?B.dragOptions.minDrag=1:B.dragOptions.minDrag=void 0,Re==="zoom"?(B.dragOptions.moveFn=me,B.dragOptions.clickFn=ie,B.dragOptions.doneFn=xe,oe(He,Ge,_e)):Re==="pan"?(B.dragOptions.moveFn=Ae,B.dragOptions.clickFn=ie,B.dragOptions.doneFn=Oe,ke(),B.clearSelect(Z)):(y(Re)||p(Re))&&A(He,Ge,_e,B.dragOptions,Re)}};var J,le,fe,se,H,Y,ne,te,K,$;function ae(He){var Ge={};return Ge[B.id+".aaxis.min"]=He.a,Ge[B.id+".baxis.min"]=He.b,Ge[B.id+".caxis.min"]=He.c,Ge}function ie(He,Ge){var _e=Z._fullLayout.clickmode;U(Z),He===2&&(Z.emit("plotly_doubleclick",null),m.call("_guiRelayout",Z,ae({a:0,b:0,c:0}))),_e.indexOf("select")>-1&&He===1&&b(Ge,Z,[B.xaxis],[B.yaxis],B.id,B.dragOptions),_e.indexOf("event")>-1&&h.click(Z,Ge,B.id)}function oe(He,Ge,_e){var Re=j.getBoundingClientRect();J=Ge-Re.left,le=_e-Re.top,Z._fullLayout._calcInverseTransform(Z);var We=Z._fullLayout._invTransform,qe=x.apply3DTransform(We)(J,le);J=qe[0],le=qe[1],fe={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]},H=fe,se=B.aaxis.range[1]-fe.a,Y=s(B.graphDiv._fullLayout[B.id].bgcolor).getLuminance(),ne="M0,"+B.h+"L"+B.w/2+", 0L"+B.w+","+B.h+"Z",te=!1,K=ee.append("path").attr("class","zoombox").attr("transform",t(B.x0,B.y0)).style({fill:Y>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",ne),$=ee.append("path").attr("class","zoombox-corners").attr("transform",t(B.x0,B.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),B.clearSelect(Z)}function ue(He,Ge){return 1-Ge/B.h}function ye(He,Ge){return 1-(He+(B.h-Ge)/Math.sqrt(3))/B.w}function ce(He,Ge){return(He-(B.h-Ge)/Math.sqrt(3))/B.w}function me(He,Ge){var _e=J+He*q,Re=le+Ge*W,We=Math.max(0,Math.min(1,ue(J,le),ue(_e,Re))),qe=Math.max(0,Math.min(1,ye(J,le),ye(_e,Re))),Ue=Math.max(0,Math.min(1,ce(J,le),ce(_e,Re))),Ie=(We/2+Ue)*B.w,Ve=(1-We/2-qe)*B.w,dt=(Ie+Ve)/2,Rt=Ve-Ie,Gt=(1-We)*B.h,kt=Gt-Rt/L;Rt<T.MINZOOM?(H=fe,K.attr("d",ne),$.attr("d","M0,0Z")):(H={a:fe.a+We*se,b:fe.b+qe*se,c:fe.c+Ue*se},K.attr("d",ne+"M"+Ie+","+Gt+"H"+Ve+"L"+dt+","+kt+"L"+Ie+","+Gt+"Z"),$.attr("d","M"+J+","+le+I+"M"+Ie+","+Gt+P+"M"+Ve+","+Gt+O+"M"+dt+","+kt+F)),te||(K.transition().style("fill",Y>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),$.transition().style("opacity",1).duration(200),te=!0),Z.emit("plotly_relayouting",ae(H))}function xe(){U(Z),H!==fe&&(m.call("_guiRelayout",Z,ae(H)),D&&Z.data&&Z._context.showTips&&(x.notifier(i(Z,"Double-click to zoom back out"),"long"),D=!1))}function ke(){fe={a:B.aaxis.range[0],b:B.baxis.range[1],c:B.caxis.range[1]},H=fe}function Ae(He,Ge){var _e=He/B.xaxis._m,Re=Ge/B.yaxis._m;H={a:fe.a-Re,b:fe.b+(_e+Re)/2,c:fe.c-(_e-Re)/2};var We=[H.a,H.b,H.c].sort(x.sorterAsc),qe={a:We.indexOf(H.a),b:We.indexOf(H.b),c:We.indexOf(H.c)};We[0]<0&&(We[1]+We[0]/2<0?(We[2]+=We[0]+We[1],We[0]=We[1]=0):(We[2]+=We[0]/2,We[1]+=We[0]/2,We[0]=0),H={a:We[qe.a],b:We[qe.b],c:We[qe.c]},Ge=(fe.a-H.a)*B.yaxis._m,He=(fe.c-H.c-fe.b+H.b)*B.xaxis._m);var Ue=t(B.x0+He,B.y0+Ge);B.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Ue);var Ie=t(-He,-Ge);B.clipDefRelative.select("path").attr("transform",Ie),B.aaxis.range=[H.a,B.sum-H.b-H.c],B.baxis.range=[B.sum-H.a-H.c,H.b],B.caxis.range=[B.sum-H.a-H.b,H.c],B.drawAxes(!1),B._hasClipOnAxisFalse&&B.plotContainer.select(".scatterlayer").selectAll(".trace").call(r.hideOutsideRangePoints,B),Z.emit("plotly_relayouting",ae(H))}function Oe(){m.call("_guiRelayout",Z,ae(H))}j.onmousemove=function(He){h.hover(Z,He,B.id),Z._fullLayout._lasthover=j,Z._fullLayout._hoversubplot=B.id},j.onmouseout=function(He){Z._dragging||c.unhover(Z,He)},c.init(this.dragOptions)};function U(B){u.select(B).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(e,z,N){var u=e("./lib/loggers"),s=e("./lib/noop"),m=e("./lib/push_unique"),x=e("./lib/is_plain_object"),t=e("./lib/dom").addStyleRule,i=e("./lib/extend"),a=e("./plots/attributes"),r=e("./plots/layout_attributes"),n=i.extendFlat,f=i.extendDeepAll;N.modules={},N.allCategories={},N.allTypes=[],N.subplotsRegistry={},N.transformsRegistry={},N.componentsRegistry={},N.layoutArrayContainers=[],N.layoutArrayRegexes=[],N.traceLayoutAttributes={},N.localeRegistry={},N.apiMethodRegistry={},N.collectableSubplotTypes=null,N.register=function(_){if(N.collectableSubplotTypes=null,_)_&&!Array.isArray(_)&&(_=[_]);else throw new Error("No argument passed to Plotly.register.");for(var T=0;T<_.length;T++){var w=_[T];if(!w)throw new Error("Invalid module was attempted to be registered!");switch(w.moduleType){case"trace":l(w);break;case"transform":h(w);break;case"component":c(w);break;case"locale":d(w);break;case"apiMethod":var v=w.name;N.apiMethodRegistry[v]=w.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},N.getModule=function(M){var _=N.modules[b(M)];return _?_._module:!1},N.traceIs=function(M,_){if(M=b(M),M==="various")return!1;var T=N.modules[M];return T||(M&&u.log("Unrecognized trace type "+M+"."),T=N.modules[a.type.dflt]),!!T.categories[_]},N.getTransformIndices=function(M,_){for(var T=[],w=M.transforms||[],v=0;v<w.length;v++)w[v].type===_&&T.push(v);return T},N.hasTransform=function(M,_){for(var T=M.transforms||[],w=0;w<T.length;w++)if(T[w].type===_)return!0;return!1},N.getComponentMethod=function(M,_){var T=N.componentsRegistry[M];return T&&T[_]||s},N.call=function(){var M=arguments[0],_=[].slice.call(arguments,1);return N.apiMethodRegistry[M].apply(null,_)};function l(M){var _=M.name,T=M.categories,w=M.meta;if(N.modules[_]){u.log("Type "+_+" already registered");return}N.subplotsRegistry[M.basePlotModule.name]||o(M.basePlotModule);for(var v={},L=0;L<T.length;L++)v[T[L]]=!0,N.allCategories[T[L]]=!0;N.modules[_]={_module:M,categories:v},w&&Object.keys(w).length&&(N.modules[_].meta=w),N.allTypes.push(_);for(var S in N.componentsRegistry)y(S,_);M.layoutAttributes&&n(N.traceLayoutAttributes,M.layoutAttributes);var k=M.basePlotModule,P=k.name;if(P==="mapbox"){var O=k.constants.styleRules;for(var F in O)t(".js-plotly-plot .plotly .mapboxgl-"+F,O[F])}(P==="geo"||P==="mapbox")&&typeof window!==void 0&&window.PlotlyGeoAssets===void 0&&(window.PlotlyGeoAssets={topojson:{}})}function o(M){var _=M.name;if(N.subplotsRegistry[_]){u.log("Plot type "+_+" already registered.");return}p(M),N.subplotsRegistry[_]=M;for(var T in N.componentsRegistry)A(T,M.name)}function c(M){if(typeof M.name!="string")throw new Error("Component module *name* must be a string.");var _=M.name;N.componentsRegistry[_]=M,M.layoutAttributes&&(M.layoutAttributes._isLinkedToArray&&m(N.layoutArrayContainers,_),p(M));for(var T in N.modules)y(_,T);for(var w in N.subplotsRegistry)A(_,w);for(var v in N.transformsRegistry)g(_,v);M.schema&&M.schema.layout&&f(r,M.schema.layout)}function h(M){if(typeof M.name!="string")throw new Error("Transform module *name* must be a string.");var _="Transform module "+M.name,T=typeof M.transform=="function",w=typeof M.calcTransform=="function";if(!T&&!w)throw new Error(_+" is missing a *transform* or *calcTransform* method.");T&&w&&u.log([_+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),x(M.attributes)||u.log(_+" registered without an *attributes* object."),typeof M.supplyDefaults!="function"&&u.log(_+" registered without a *supplyDefaults* method."),N.transformsRegistry[M.name]=M;for(var v in N.componentsRegistry)g(v,M.name)}function d(M){var _=M.name,T=_.split("-")[0],w=M.dictionary,v=M.format,L=w&&Object.keys(w).length,S=v&&Object.keys(v).length,k=N.localeRegistry,P=k[_];if(P||(k[_]=P={}),T!==_){var O=k[T];O||(k[T]=O={}),L&&O.dictionary===P.dictionary&&(O.dictionary=w),S&&O.format===P.format&&(O.format=v)}L&&(P.dictionary=w),S&&(P.format=v)}function p(M){if(M.layoutAttributes){var _=M.layoutAttributes._arrayAttrRegexps;if(_)for(var T=0;T<_.length;T++)m(N.layoutArrayRegexes,_[T])}}function y(M,_){var T=N.componentsRegistry[M].schema;if(!(!T||!T.traces)){var w=T.traces[_];w&&f(N.modules[_]._module.attributes,w)}}function g(M,_){var T=N.componentsRegistry[M].schema;if(!(!T||!T.transforms)){var w=T.transforms[_];w&&f(N.transformsRegistry[_].attributes,w)}}function A(M,_){var T=N.componentsRegistry[M].schema;if(!(!T||!T.subplots)){var w=N.subplotsRegistry[_],v=w.layoutAttributes,L=w.attr==="subplot"?w.name:w.attr;Array.isArray(L)&&(L=L[0]);var S=T.subplots[L];v&&S&&f(v,S)}}function b(M){return typeof M=="object"&&(M=M.type),M}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(e,z,N){var u=e("../registry"),s=e("../lib"),m=s.extendFlat,x=s.extendDeep;function t(a){var r;switch(a){case"themes__thumb":r={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":r={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:r={}}return r}function i(a){var r=["xaxis","yaxis","zaxis"];return r.indexOf(a.slice(0,5))>-1}z.exports=function(r,n){var f,l=r.data,o=r.layout,c=x([],l),h=x({},o,t(n.tileClass)),d=r._context||{};if(n.width&&(h.width=n.width),n.height&&(h.height=n.height),n.tileClass==="thumbnail"||n.tileClass==="themes__thumb"){h.annotations=[];var p=Object.keys(h);for(f=0;f<p.length;f++)i(p[f])&&(h[p[f]].title={text:""});for(f=0;f<c.length;f++){var y=c[f];y.showscale=!1,y.marker&&(y.marker.showscale=!1),u.traceIs(y,"pie-like")&&(y.textposition="none")}}if(Array.isArray(n.annotations))for(f=0;f<n.annotations.length;f++)h.annotations.push(n.annotations[f]);var g=Object.keys(h).filter(function(T){return T.match(/^scene\d*$/)});if(g.length){var A={};for(n.tileClass==="thumbnail"&&(A={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),f=0;f<g.length;f++){var b=h[g[f]];b.xaxis||(b.xaxis={}),b.yaxis||(b.yaxis={}),b.zaxis||(b.zaxis={}),m(b.xaxis,A),m(b.yaxis,A),m(b.zaxis,A),b._scene=null}}var M=document.createElement("div");n.tileClass&&(M.className=n.tileClass);var _={gd:M,td:M,layout:h,data:c,config:{staticPlot:n.staticPlot===void 0?!0:n.staticPlot,plotGlPixelRatio:n.plotGlPixelRatio===void 0?2:n.plotGlPixelRatio,displaylogo:n.displaylogo||!1,showLink:n.showLink||!1,showTips:n.showTips||!1,mapboxAccessToken:d.mapboxAccessToken}};return n.setBackground!=="transparent"&&(_.config.setBackground=n.setBackground||"opaque"),_.gd.defaultLayout=t(n.tileClass),_}},{"../lib":503,"../registry":638}],640:[function(e,z,N){var u=e("../lib"),s=e("../plot_api/to_image"),m=e("./filesaver"),x=e("./helpers");function t(i,a){var r;return u.isPlainObject(i)||(r=u.getGraphDiv(i)),a=a||{},a.format=a.format||"png",a.width=a.width||null,a.height=a.height||null,a.imageDataOnly=!0,new Promise(function(n,f){r&&r._snapshotInProgress&&f(new Error("Snapshotting already in progress.")),u.isIE()&&a.format!=="svg"&&f(new Error(x.MSG_IE_BAD_FORMAT)),r&&(r._snapshotInProgress=!0);var l=s(i,a),o=a.filename||i.fn||"newplot";o+="."+a.format.replace("-","."),l.then(function(c){return r&&(r._snapshotInProgress=!1),m(c,o,a.format)}).then(function(c){n(c)}).catch(function(c){r&&(r._snapshotInProgress=!1),f(c)})})}z.exports=t},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(e,z,N){var u=e("../lib"),s=e("./helpers");function m(x,t,i){var a=document.createElement("a"),r="download"in a,n=new Promise(function(f,l){var o,c;if(u.isIE())return o=s.createBlob(x,"svg"),window.navigator.msSaveBlob(o,t),o=null,f(t);if(r)return o=s.createBlob(x,i),c=s.createObjectURL(o),a.href=c,a.download=t,document.body.appendChild(a),a.click(),document.body.removeChild(a),s.revokeObjectURL(c),o=null,f(t);if(u.isSafari()){var h=i==="svg"?",":";base64,";return s.octetStream(h+encodeURIComponent(x)),f(t)}l(new Error("download error"))});return n}z.exports=m},{"../lib":503,"./helpers":642}],642:[function(e,z,N){var u=e("../registry");N.getDelay=function(x){return x._has&&(x._has("gl3d")||x._has("gl2d")||x._has("mapbox"))?500:0},N.getRedrawFunc=function(x){return function(){u.getComponentMethod("colorbar","draw")(x)}},N.encodeSVG=function(x){return"data:image/svg+xml,"+encodeURIComponent(x)},N.encodeJSON=function(x){return"data:application/json,"+encodeURIComponent(x)};var s=window.URL||window.webkitURL;N.createObjectURL=function(x){return s.createObjectURL(x)},N.revokeObjectURL=function(x){return s.revokeObjectURL(x)},N.createBlob=function(x,t){if(t==="svg")return new window.Blob([x],{type:"image/svg+xml;charset=utf-8"});if(t==="full-json")return new window.Blob([x],{type:"application/json;charset=utf-8"});var i=m(window.atob(x));return new window.Blob([i],{type:"image/"+t})},N.octetStream=function(x){document.location.href="data:application/octet-stream"+x};function m(x){for(var t=x.length,i=new ArrayBuffer(t),a=new Uint8Array(i),r=0;r<t;r++)a[r]=x.charCodeAt(r);return i}N.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,N.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(e,z,N){var u=e("./helpers"),s={getDelay:u.getDelay,getRedrawFunc:u.getRedrawFunc,clone:e("./cloneplot"),toSVG:e("./tosvg"),svgToImg:e("./svgtoimg"),toImage:e("./toimage"),downloadImage:e("./download")};z.exports=s},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(e,z,N){var u=e("../lib"),s=e("events").EventEmitter,m=e("./helpers");function x(t){var i=t.emitter||new s,a=new Promise(function(r,n){var f=window.Image,l=t.svg,o=t.format||"png";if(u.isIE()&&o!=="svg"){var c=new Error(m.MSG_IE_BAD_FORMAT);return n(c),t.promise?a:i.emit("error",c)}var h=t.canvas,d=t.scale||1,p=t.width||300,y=t.height||150,g=d*p,A=d*y,b=h.getContext("2d"),M=new f,_,T;o==="svg"||u.isSafari()?T=m.encodeSVG(l):(_=m.createBlob(l,"svg"),T=m.createObjectURL(_)),h.width=g,h.height=A,M.onload=function(){var w;switch(_=null,m.revokeObjectURL(T),o!=="svg"&&b.drawImage(M,0,0,g,A),o){case"jpeg":w=h.toDataURL("image/jpeg");break;case"png":w=h.toDataURL("image/png");break;case"webp":w=h.toDataURL("image/webp");break;case"svg":w=T;break;default:var v="Image format is not jpeg, png, svg or webp.";if(n(new Error(v)),!t.promise)return i.emit("error",v)}r(w),t.promise||i.emit("success",w)},M.onerror=function(w){if(_=null,m.revokeObjectURL(T),n(w),!t.promise)return i.emit("error",w)},M.src=T});return t.promise?a:i}z.exports=x},{"../lib":503,"./helpers":642,events:84}],645:[function(e,z,N){var u=e("events").EventEmitter,s=e("../registry"),m=e("../lib"),x=e("./helpers"),t=e("./cloneplot"),i=e("./tosvg"),a=e("./svgtoimg");function r(n,f){var l=new u,o=t(n,{format:"png"}),c=o.gd;c.style.position="absolute",c.style.left="-5000px",document.body.appendChild(c);function h(){var p=x.getDelay(c._fullLayout);setTimeout(function(){var y=i(c),g=document.createElement("canvas");g.id=m.randstr(),l=a({format:f.format,width:c._fullLayout.width,height:c._fullLayout.height,canvas:g,emitter:l,svg:y}),l.clean=function(){c&&document.body.removeChild(c)}},p)}var d=x.getRedrawFunc(c);return s.call("_doPlot",c,o.data,o.layout,o.config).then(d).then(h).catch(function(p){l.emit("error",p)}),l}z.exports=r},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(e,z,N){var u=e("@plotly/d3"),s=e("../lib"),m=e("../components/drawing"),x=e("../components/color"),t=e("../constants/xmlns_namespaces"),i=/"/g,a="TOBESTRIPPED",r=new RegExp('("'+a+")|("+a+'")',"g");function n(l){var o=u.select("body").append("div").style({display:"none"}).html(""),c=l.replace(/(&[^;]*;)/gi,function(h){return h==="&lt;"?"&#60;":h==="&rt;"?"&#62;":h.indexOf("<")!==-1||h.indexOf(">")!==-1?"":o.html(h).text()});return o.remove(),c}function f(l){return l.replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")}z.exports=function(o,c,h){var d=o._fullLayout,p=d._paper,y=d._toppaper,g=d.width,A=d.height,b,M;p.insert("rect",":first-child").call(m.setRect,0,0,g,A).call(x.fill,d.paper_bgcolor);var _=d._basePlotModules||[];for(b=0;b<_.length;b++){var T=_[b];T.toSVG&&T.toSVG(o)}if(y){var w=y.node().childNodes,v=Array.prototype.slice.call(w);for(b=0;b<v.length;b++){var L=v[b];L.childNodes.length&&p.node().appendChild(L)}}d._draggers&&d._draggers.remove(),p.node().style.background="",p.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var P=u.select(this);if(this.style.visibility==="hidden"||this.style.display==="none"){P.remove();return}else P.style({visibility:null,display:null});var O=this.style.fontFamily;O&&O.indexOf('"')!==-1&&P.style("font-family",O.replace(i,a))});var S=[];if(d._gradientUrlQueryParts)for(M in d._gradientUrlQueryParts)S.push(M);if(d._patternUrlQueryParts)for(M in d._patternUrlQueryParts)S.push(M);S.length&&p.selectAll(S.join(",")).each(function(){var P=u.select(this),O=this.style.fill;O&&O.indexOf("url(")!==-1&&P.style("fill",O.replace(i,a));var F=this.style.stroke;F&&F.indexOf("url(")!==-1&&P.style("stroke",F.replace(i,a))}),(c==="pdf"||c==="eps")&&p.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),p.node().setAttributeNS(t.xmlns,"xmlns",t.svg),p.node().setAttributeNS(t.xmlns,"xmlns:xlink",t.xlink),c==="svg"&&h&&(p.attr("width",h*g),p.attr("height",h*A),p.attr("viewBox","0 0 "+g+" "+A));var k=new window.XMLSerializer().serializeToString(p.node());return k=n(k),k=f(k),k=k.replace(r,"'"),s.isIE()&&(k=k.replace(/"/gi,"'"),k=k.replace(/(\('#)([^']*)('\))/gi,'("#$2")'),k=k.replace(/(\\')/gi,'"')),k}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;u.mergeArray(x.text,m,"tx"),u.mergeArray(x.hovertext,m,"htx");var i=x.marker;if(i){u.mergeArray(i.opacity,m,"mo",!0),u.mergeArray(i.color,m,"mc");var a=i.line;a&&(u.mergeArray(a.color,m,"mlc"),u.mergeArrayCastPositive(a.width,m,"mlw"))}}},{"../../lib":503}],648:[function(e,z,N){var u=e("../scatter/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),i=e("../../plots/font_attributes"),a=e("./constants"),r=e("../../components/drawing/attributes").pattern,n=e("../../lib/extend").extendFlat,f=i({editType:"calc",arrayOk:!0,colorEditType:"style"}),l=u.marker,o=l.line,c=n({},o.width,{dflt:0}),h=n({width:c,editType:"calc"},t("marker.line")),d=n({line:h,editType:"calc"},t("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:r});z.exports={x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),text:u.text,texttemplate:x({editType:"plot"},{keys:a.eventDataKeys}),hovertext:u.hovertext,hovertemplate:m({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:n({},f,{}),insidetextfont:n({},f,{}),outsidetextfont:n({},f,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:n({},u.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:d,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:u.selected.marker.opacity,color:u.selected.marker.color,editType:"style"},textfont:u.selected.textfont,editType:"style"},unselected:{marker:{opacity:u.unselected.marker.opacity,color:u.unselected.marker.color,editType:"style"},textfont:u.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/align_period"),m=e("../../components/colorscale/helpers").hasColorscale,x=e("../../components/colorscale/calc"),t=e("./arrays_to_calcdata"),i=e("../scatter/calc_selection");z.exports=function(r,n){var f=u.getFromId(r,n.xaxis||"x"),l=u.getFromId(r,n.yaxis||"y"),o,c,h,d,p,y,g={msUTC:!!(n.base||n.base===0)};n.orientation==="h"?(o=f.makeCalcdata(n,"x",g),h=l.makeCalcdata(n,"y"),d=s(n,l,"y",h),p=!!n.yperiodalignment,y="y"):(o=l.makeCalcdata(n,"y",g),h=f.makeCalcdata(n,"x"),d=s(n,f,"x",h),p=!!n.xperiodalignment,y="x"),c=d.vals;for(var A=Math.min(c.length,o.length),b=new Array(A),M=0;M<A;M++)b[M]={p:c[M],s:o[M]},p&&(b[M].orig_p=h[M],b[M][y+"End"]=d.ends[M],b[M][y+"Start"]=d.starts[M]),n.ids&&(b[M].id=String(n.ids[M]));return m(n,"marker")&&x(r,n,{vals:n.marker.color,containerStr:"marker",cLetter:"c"}),m(n,"marker.line")&&x(r,n,{vals:n.marker.line.color,containerStr:"marker.line",cLetter:"c"}),t(b,n),i(b,n),b}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(e,z,N){z.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib").isArrayOrTypedArray,m=e("../../constants/numerical").BADNUM,x=e("../../registry"),t=e("../../plots/cartesian/axes"),i=e("../../plots/cartesian/constraints").getAxisGroup,a=e("./sieve.js");function r(L,S){for(var k=S.xaxis,P=S.yaxis,O=L._fullLayout,F=L._fullData,I=L.calcdata,D=[],U=[],B=0;B<F.length;B++){var j=F[B];if(j.visible===!0&&x.traceIs(j,"bar")&&j.xaxis===k._id&&j.yaxis===P._id&&(j.orientation==="h"?D.push(I[B]):U.push(I[B]),j._computePh))for(var Z=L.calcdata[B],ee=0;ee<Z.length;ee++)typeof Z[ee].ph0=="function"&&(Z[ee].ph0=Z[ee].ph0()),typeof Z[ee].ph1=="function"&&(Z[ee].ph1=Z[ee].ph1())}var q={xCat:k.type==="category"||k.type==="multicategory",yCat:P.type==="category"||P.type==="multicategory",mode:O.barmode,norm:O.barnorm,gap:O.bargap,groupgap:O.bargroupgap};n(L,k,P,U,q),n(L,P,k,D,q)}function n(L,S,k,P,O){if(!!P.length){var F,I,D,U,B;switch(f(k,P),O.mode){case"overlay":l(S,k,P,O);break;case"group":for(F=[],I=[],D=0;D<P.length;D++)U=P[D],B=U[0].trace,B.offset===void 0?I.push(U):F.push(U);I.length&&o(L,S,k,I,O),F.length&&l(S,k,F,O);break;case"stack":case"relative":for(F=[],I=[],D=0;D<P.length;D++)U=P[D],B=U[0].trace,B.base===void 0?I.push(U):F.push(U);I.length&&c(L,S,k,I,O),F.length&&l(S,k,F,O);break}w(P,S)}}function f(L,S){var k,P;for(k=0;k<S.length;k++){var O=S[k],F=O[0].trace,I=F.type==="funnel"?F._base:F.base,D,U=F.orientation==="h"?F.xcalendar:F.ycalendar,B=L.type==="category"||L.type==="multicategory"?function(){return null}:L.d2c;if(s(I)){for(P=0;P<Math.min(I.length,O.length);P++)D=B(I[P],0,U),u(D)?(O[P].b=+D,O[P].hasB=1):O[P].b=0;for(;P<O.length;P++)O[P].b=0}else{D=B(I,0,U);var j=u(D);for(D=j?D:0,P=0;P<O.length;P++)O[P].b=D,j&&(O[P].hasB=1)}}}function l(L,S,k,P){for(var O=0;O<k.length;O++){var F=k[O],I=new a([F],{posAxis:L,sepNegVal:!1,overlapNoMerge:!P.norm});h(L,I,P),P.norm?(M(I),T(S,I,P)):A(S,I)}}function o(L,S,k,P,O){var F=new a(P,{posAxis:S,sepNegVal:!1,overlapNoMerge:!O.norm});d(L,S,F,O),_(F,S),O.norm?(M(F),T(k,F,O)):A(k,F)}function c(L,S,k,P,O){var F=new a(P,{posAxis:S,sepNegVal:O.mode==="relative",overlapNoMerge:!(O.norm||O.mode==="stack"||O.mode==="relative")});h(S,F,O),b(k,F,O);for(var I=0;I<P.length;I++)for(var D=P[I],U=0;U<D.length;U++){var B=D[U];if(B.s!==m){var j=B.b+B.s===F.get(B.p,B.s);j&&(B._outmost=!0)}}O.norm&&T(k,F,O)}function h(L,S,k){for(var P=S.minDiff,O=S.traces,F=P*(1-k.gap),I=F,D=I*(1-(k.groupgap||0)),U=-D/2,B=0;B<O.length;B++){var j=O[B],Z=j[0].t;Z.barwidth=D,Z.poffset=U,Z.bargroupwidth=F,Z.bardelta=P}S.binWidth=O[0][0].t.barwidth/100,p(S),y(L,S),g(L,S)}function d(L,S,k,P){for(var O=L._fullLayout,F=k.positions,I=k.distinctPositions,D=k.minDiff,U=k.traces,B=U.length,j=F.length!==I.length,Z=D*(1-P.gap),ee=i(O,S._id)+U[0][0].trace.orientation,q=O._alignmentOpts[ee]||{},W=0;W<B;W++){var J=U[W],le=J[0].trace,fe=q[le.alignmentgroup]||{},se=Object.keys(fe.offsetGroups||{}).length,H;se?H=Z/se:H=j?Z/B:Z;var Y=H*(1-(P.groupgap||0)),ne;se?ne=((2*le._offsetIndex+1-se)*H-Y)/2:ne=j?((2*W+1-B)*H-Y)/2:-Y/2;var te=J[0].t;te.barwidth=Y,te.poffset=ne,te.bargroupwidth=Z,te.bardelta=D}k.binWidth=U[0][0].t.barwidth/100,p(k),y(S,k),g(S,k,j)}function p(L){var S=L.traces,k,P;for(k=0;k<S.length;k++){var O=S[k],F=O[0],I=F.trace,D=F.t,U=I._offset||I.offset,B=D.poffset,j;if(s(U)){for(j=Array.prototype.slice.call(U,0,O.length),P=0;P<j.length;P++)u(j[P])||(j[P]=B);for(P=j.length;P<O.length;P++)j.push(B);D.poffset=j}else U!==void 0&&(D.poffset=U);var Z=I._width||I.width,ee=D.barwidth;if(s(Z)){var q=Array.prototype.slice.call(Z,0,O.length);for(P=0;P<q.length;P++)u(q[P])||(q[P]=ee);for(P=q.length;P<O.length;P++)q.push(ee);if(D.barwidth=q,U===void 0){for(j=[],P=0;P<O.length;P++)j.push(B+(ee-q[P])/2);D.poffset=j}}else Z!==void 0&&(D.barwidth=Z,U===void 0&&(D.poffset=B+(ee-Z)/2))}}function y(L,S){for(var k=S.traces,P=v(L),O=0;O<k.length;O++)for(var F=k[O],I=F[0].t,D=I.poffset,U=Array.isArray(D),B=I.barwidth,j=Array.isArray(B),Z=0;Z<F.length;Z++){var ee=F[Z],q=ee.w=j?B[Z]:B;ee[P]=ee.p+(U?D[Z]:D)+q/2}}function g(L,S,k){var P=S.traces,O=S.minDiff,F=O/2;t.minDtick(L,S.minDiff,S.distinctPositions[0],k);for(var I=0;I<P.length;I++){var D=P[I],U=D[0],B=U.trace,j=[],Z,ee,q,W;for(W=0;W<D.length;W++)Z=D[W],ee=Z.p-F,q=Z.p+F,j.push(ee,q);if(B.width||B.offset){var J=U.t,le=J.poffset,fe=J.barwidth,se=Array.isArray(le),H=Array.isArray(fe);for(W=0;W<D.length;W++){Z=D[W];var Y=se?le[W]:le,ne=H?fe[W]:fe;ee=Z.p+Y,q=ee+ne,j.push(ee,q)}}B._extremes[L._id]=t.findExtremes(L,j,{padded:!1})}}function A(L,S){for(var k=S.traces,P=v(L),O=0;O<k.length;O++){for(var F=k[O],I=F[0].trace,D=[],U=!1,B=0;B<F.length;B++){var j=F[B],Z=j.b,ee=Z+j.s;j[P]=ee,D.push(ee),j.hasB&&D.push(Z),(!j.hasB||!j.b)&&(U=!0)}I._extremes[L._id]=t.findExtremes(L,D,{tozero:U,padded:!0})}}function b(L,S,k){var P=v(L),O=S.traces,F,I,D,U,B,j;for(U=0;U<O.length;U++)if(F=O[U],I=F[0].trace,I.type==="funnel")for(B=0;B<F.length;B++)j=F[B],j.s!==m&&S.put(j.p,-.5*j.s);for(U=0;U<O.length;U++){F=O[U],I=F[0].trace,D=I.type==="funnel";var Z=[];for(B=0;B<F.length;B++)if(j=F[B],j.s!==m){var ee;D?ee=j.s:ee=j.s+j.b;var q=S.put(j.p,ee),W=q+ee;j.b=q,j[P]=W,k.norm||(Z.push(W),j.hasB&&Z.push(q))}k.norm||(I._extremes[L._id]=t.findExtremes(L,Z,{tozero:!0,padded:!0}))}}function M(L){for(var S=L.traces,k=0;k<S.length;k++)for(var P=S[k],O=0;O<P.length;O++){var F=P[O];F.s!==m&&L.put(F.p,F.b+F.s)}}function _(L,S){for(var k=L.traces,P=0;P<k.length;P++){var O=k[P],F=O[0].trace;if(F.base===void 0)for(var I=new a([O],{posAxis:S,sepNegVal:!0,overlapNoMerge:!0}),D=0;D<O.length;D++){var U=O[D];if(U.p!==m){var B=I.put(U.p,U.b+U.s);B&&(U.b=B)}}}}function T(L,S,k){var P=S.traces,O=v(L),F=k.norm==="fraction"?1:100,I=F/1e9,D=L.l2c(L.c2l(0)),U=k.mode==="stack"?F:D;function B(ne){return u(L.c2l(ne))&&(ne<D-I||ne>U+I||!u(D))}for(var j=0;j<P.length;j++){for(var Z=P[j],ee=Z[0].trace,q=[],W=!1,J=!1,le=0;le<Z.length;le++){var fe=Z[le];if(fe.s!==m){var se=Math.abs(F/S.get(fe.p,fe.s));fe.b*=se,fe.s*=se;var H=fe.b,Y=H+fe.s;fe[O]=Y,q.push(Y),J=J||B(Y),fe.hasB&&(q.push(H),J=J||B(H)),(!fe.hasB||!fe.b)&&(W=!0)}}ee._extremes[L._id]=t.findExtremes(L,q,{tozero:W,padded:J})}}function w(L,S){var k=v(S),P={},O,F,I,D=1/0,U=-1/0;for(O=0;O<L.length;O++)for(I=L[O],F=0;F<I.length;F++){var B=I[F].p;u(B)&&(D=Math.min(D,B),U=Math.max(U,B))}var j=1e4/(U-D),Z=P.round=function(se){return String(Math.round(j*(se-D)))};for(O=0;O<L.length;O++){I=L[O],I[0].t.extents=P;var ee=I[0].t.poffset,q=Array.isArray(ee);for(F=0;F<I.length;F++){var W=I[F],J=W[k]-W.w/2;if(u(J)){var le=W[k]+W.w/2,fe=Z(W.p);P[fe]?P[fe]=[Math.min(J,P[fe][0]),Math.max(le,P[fe][1])]:P[fe]=[J,le]}W.p0=W.p+(q?ee[F]:ee),W.p1=W.p0+W.w,W.s0=W.b,W.s1=W.s0+W.s}}}function v(L){return L._id.charAt(0)}z.exports={crossTraceCalc:r,setGroupPositions:n}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../../registry"),x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),i=e("./style_defaults"),a=e("../../plots/cartesian/constraints").getAxisGroup,r=e("./attributes"),n=u.coerceFont;function f(h,d,p,y){function g(T,w){return u.coerce(h,d,r,T,w)}var A=x(h,d,y,g);if(!A){d.visible=!1;return}t(h,d,y,g),g("xhoverformat"),g("yhoverformat"),g("orientation",d.x&&!d.y?"h":"v"),g("base"),g("offset"),g("width"),g("text"),g("hovertext"),g("hovertemplate");var b=g("textposition");c(h,d,y,g,b,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),i(h,d,g,p,y);var M=(d.marker.line||{}).color,_=m.getComponentMethod("errorbars","supplyDefaults");_(h,d,M||s.defaultLine,{axis:"y"}),_(h,d,M||s.defaultLine,{axis:"x",inherit:"y"}),u.coerceSelectionMarkerOpacity(d,g)}function l(h,d,p,y){var g=d.orientation,A=d[{v:"x",h:"y"}[g]+"axis"],b=a(p,A)+g,M=p._alignmentOpts||{},_=y("alignmentgroup"),T=M[b];T||(T=M[b]={});var w=T[_];w?w.traces.push(d):w=T[_]={traces:[d],alignmentIndex:Object.keys(T).length,offsetGroups:{}};var v=y("offsetgroup"),L=w.offsetGroups,S=L[v];v&&(S||(S=L[v]={offsetIndex:Object.keys(L).length}),d._offsetIndex=S.offsetIndex)}function o(h,d){var p,y;function g(b){return u.coerce(y._input,y,r,b)}if(d.barmode==="group")for(var A=0;A<h.length;A++)y=h[A],y.type==="bar"&&(p=y._input,l(p,y,d,g))}function c(h,d,p,y,g,A){A=A||{};var b=A.moduleHasSelected!==!1,M=A.moduleHasUnselected!==!1,_=A.moduleHasConstrain!==!1,T=A.moduleHasCliponaxis!==!1,w=A.moduleHasTextangle!==!1,v=A.moduleHasInsideanchor!==!1,L=!!A.hasPathbar,S=Array.isArray(g)||g==="auto",k=S||g==="inside",P=S||g==="outside";if(k||P){var O=n(y,"textfont",p.font),F=u.extendFlat({},O),I=h.textfont&&h.textfont.color,D=!I;if(D&&delete F.color,n(y,"insidetextfont",F),L){var U=u.extendFlat({},O);D&&delete U.color,n(y,"pathbar.textfont",U)}P&&n(y,"outsidetextfont",O),b&&y("selected.textfont.color"),M&&y("unselected.textfont.color"),_&&y("constraintext"),T&&y("cliponaxis"),w&&y("textangle"),y("texttemplate")}k&&v&&y("insidetextanchor")}z.exports={supplyDefaults:f,crossTraceDefaults:o,handleGroupingDefaults:l,handleText:c}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(e,z,N){z.exports=function(s,m,x){return s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),x.orientation==="h"?(s.label=s.y,s.value=s.x):(s.label=s.x,s.value=s.y),s}},{}],654:[function(e,z,N){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("../../lib").isArrayOrTypedArray;N.coerceString=function(x,t,i){if(typeof t=="string"){if(t||!x.noBlank)return t}else if((typeof t=="number"||t===!0)&&!x.strict)return String(t);return i!==void 0?i:x.dflt},N.coerceNumber=function(x,t,i){if(u(t)){t=+t;var a=x.min,r=x.max,n=a!==void 0&&t<a||r!==void 0&&t>r;if(!n)return t}return i!==void 0?i:x.dflt},N.coerceColor=function(x,t,i){return s(t).isValid()?t:i!==void 0?i:x.dflt},N.coerceEnumerated=function(x,t,i){return x.coerceNumber&&(t=+t),x.values.indexOf(t)!==-1?t:i!==void 0?i:x.dflt},N.getValue=function(x,t){var i;return Array.isArray(x)?t<x.length&&(i=x[t]):i=x,i},N.getLineWidth=function(x,t){var i=0<t.mlw?t.mlw:m(x.marker.line.width)?0:x.marker.line.width;return i}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(e,z,N){var u=e("../../components/fx"),s=e("../../registry"),m=e("../../components/color"),x=e("../../lib").fillText,t=e("./helpers").getLineWidth,i=e("../../plots/cartesian/axes").hoverLabelText,a=e("../../constants/numerical").BADNUM;function r(l,o,c,h,d){var p=n(l,o,c,h,d);if(p){var y=p.cd,g=y[0].trace,A=y[p.index];return p.color=f(g,A),s.getComponentMethod("errorbars","hoverInfo")(A,g,p),[p]}}function n(l,o,c,h,d){var p=l.cd,y=p[0].trace,g=p[0].t,A=h==="closest",b=y.type==="waterfall",M=l.maxHoverDistance,_=l.maxSpikeDistance,T,w,v,L,S,k,P;y.orientation==="h"?(T=c,w=o,v="y",L="x",S=le,k=q):(T=o,w=c,v="x",L="y",k=le,S=q);var O=y[v+"period"],F=A||O;function I(oe){return U(oe,-1)}function D(oe){return U(oe,1)}function U(oe,ue){var ye=oe.w;return oe[v]+ue*ye/2}function B(oe){return oe[v+"End"]-oe[v+"Start"]}var j=A?I:O?function(oe){return oe.p-B(oe)/2}:function(oe){return Math.min(I(oe),oe.p-g.bardelta/2)},Z=A?D:O?function(oe){return oe.p+B(oe)/2}:function(oe){return Math.max(D(oe),oe.p+g.bardelta/2)};function ee(oe,ue,ye){return d.finiteRange&&(ye=0),u.inbox(oe-T,ue-T,ye+Math.min(1,Math.abs(ue-oe)/P)-1)}function q(oe){return ee(j(oe),Z(oe),M)}function W(oe){return ee(I(oe),D(oe),_)}function J(oe){var ue=oe[L];if(b){var ye=Math.abs(oe.rawS)||0;w>0?ue+=ye:w<0&&(ue-=ye)}return ue}function le(oe){var ue=w,ye=oe.b,ce=J(oe);return u.inbox(ye-ue,ce-ue,M+(ce-ue)/(ce-ye)-1)}function fe(oe){var ue=w,ye=oe.b,ce=J(oe);return u.inbox(ye-ue,ce-ue,_+(ce-ue)/(ce-ye)-1)}var se=l[v+"a"],H=l[L+"a"];P=Math.abs(se.r2c(se.range[1])-se.r2c(se.range[0]));function Y(oe){return(S(oe)+k(oe))/2}var ne=u.getDistanceFunction(h,S,k,Y);if(u.getClosest(p,ne,l),l.index!==!1&&p[l.index].p!==a){F||(j=function(oe){return Math.min(I(oe),oe.p-g.bargroupwidth/2)},Z=function(oe){return Math.max(D(oe),oe.p+g.bargroupwidth/2)});var te=l.index,K=p[te],$=y.base?K.b+K.s:K.s;l[L+"0"]=l[L+"1"]=H.c2p(K[L],!0),l[L+"LabelVal"]=$;var ae=g.extents[g.extents.round(K.p)];l[v+"0"]=se.c2p(A?j(K):ae[0],!0),l[v+"1"]=se.c2p(A?Z(K):ae[1],!0);var ie=K.orig_p!==void 0;return l[v+"LabelVal"]=ie?K.orig_p:K.p,l.labelLabel=i(se,l[v+"LabelVal"],y[v+"hoverformat"]),l.valueLabel=i(H,l[L+"LabelVal"],y[L+"hoverformat"]),l.baseLabel=i(H,K.b,y[L+"hoverformat"]),l.spikeDistance=(fe(K)+W(K))/2,l[v+"Spike"]=se.c2p(K.p,!0),x(K,y,l),l.hovertemplate=y.hovertemplate,l}}function f(l,o){var c=o.mcc||l.marker.color,h=o.mlcc||l.marker.line.color,d=t(l,o);if(m.opacity(c))return c;if(m.opacity(h)&&d)return h}z.exports={hoverPoints:r,hoverOnBars:n,getTraceColor:f}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(e,z,N){z.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,colorbar:e("../scatter/marker_colorbar"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"bar",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(e,z,N){z.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(e,z,N){var u=e("../../registry"),s=e("../../plots/cartesian/axes"),m=e("../../lib"),x=e("./layout_attributes");z.exports=function(t,i,a){function r(g,A){return m.coerce(t,i,x,g,A)}for(var n=!1,f=!1,l=!1,o={},c=r("barmode"),h=0;h<a.length;h++){var d=a[h];if(u.traceIs(d,"bar")&&d.visible)n=!0;else continue;if(c==="group"){var p=d.xaxis+d.yaxis;o[p]&&(l=!0),o[p]=!0}if(d.visible&&d.type==="histogram"){var y=s.getFromId({_fullLayout:i},d[d.orientation==="v"?"xaxis":"yaxis"]);y.type!=="category"&&(f=!0)}}if(!n){delete i.barmode;return}c!=="overlay"&&r("barnorm"),r("bargap",f&&!l?0:.2),r("bargroupgap")}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../lib/svg_text_utils"),t=e("../../components/color"),i=e("../../components/drawing"),a=e("../../registry"),r=e("../../plots/cartesian/axes").tickText,n=e("./uniform_text"),f=n.recordMinTextSize,l=n.clearMinTextSize,o=e("./style"),c=e("./helpers"),h=e("./constants"),d=e("./attributes"),p=d.text,y=d.textposition,g=e("../../components/fx/helpers").appendArrayPointValue,A=h.TEXTPAD;function b(j){return j.id}function M(j){if(j.ids)return b}function _(j,Z){return j<Z?1:-1}function T(j,Z,ee,q){var W=[],J=[],le=q?Z:ee,fe=q?ee:Z;return W[0]=le.c2p(j.s0,!0),J[0]=fe.c2p(j.p0,!0),W[1]=le.c2p(j.s1,!0),J[1]=fe.c2p(j.p1,!0),q?[W,J]:[J,W]}function w(j,Z,ee,q){if(!Z.uniformtext.mode&&v(ee)){var W;return q&&(W=q()),j.transition().duration(ee.duration).ease(ee.easing).each("end",function(){W&&W()}).each("interrupt",function(){W&&W()})}else return j}function v(j){return j&&j.duration>0}function L(j,Z,ee,q,W,J){var le=Z.xaxis,fe=Z.yaxis,se=j._fullLayout;W||(W={mode:se.barmode,norm:se.barmode,gap:se.bargap,groupgap:se.bargroupgap},l("bar",se));var H=m.makeTraceGroups(q,ee,"trace bars").each(function(Y){var ne=u.select(this),te=Y[0].trace,K=te.type==="waterfall",$=te.type==="funnel",ae=te.type==="bar",ie=ae||$,oe=0;K&&te.connector.visible&&te.connector.mode==="between"&&(oe=te.connector.line.width/2);var ue=te.orientation==="h",ye=v(W),ce=m.ensureSingle(ne,"g","points"),me=M(te),xe=ce.selectAll("g.point").data(m.identity,me);xe.enter().append("g").classed("point",!0),xe.exit().remove(),xe.each(function(Ae,Oe){var He=u.select(this),Ge=T(Ae,le,fe,ue),_e=Ge[0][0],Re=Ge[0][1],We=Ge[1][0],qe=Ge[1][1],Ue=(ue?Re-_e:qe-We)==0;Ue&&ie&&c.getLineWidth(te,Ae)&&(Ue=!1),Ue||(Ue=!s(_e)||!s(Re)||!s(We)||!s(qe)),Ae.isBlank=Ue,Ue&&(ue?Re=_e:qe=We),oe&&!Ue&&(ue?(_e-=_(_e,Re)*oe,Re+=_(_e,Re)*oe):(We-=_(We,qe)*oe,qe+=_(We,qe)*oe));var Ie,Ve;if(te.type==="waterfall"){if(!Ue){var dt=te[Ae.dir].marker;Ie=dt.line.width,Ve=dt.color}}else Ie=c.getLineWidth(te,Ae),Ve=Ae.mc||te.marker.color;function Rt(Mt){var it=u.round(Ie/2%1,2);return W.gap===0&&W.groupgap===0?u.round(Math.round(Mt)-it,2):Mt}function Gt(Mt,it,ht){return ht&&Mt===it?Mt:Math.abs(Mt-it)>=2?Rt(Mt):Mt>it?Math.ceil(Mt):Math.floor(Mt)}if(!j._context.staticPlot){var kt=t.opacity(Ve),zt=kt<1||Ie>.01?Rt:Gt;_e=zt(_e,Re,ue),Re=zt(Re,_e,ue),We=zt(We,qe,!ue),qe=zt(qe,We,!ue)}var Bt=w(m.ensureSingle(He,"path"),se,W,J);if(Bt.style("vector-effect","non-scaling-stroke").attr("d",isNaN((Re-_e)*(qe-We))||Ue&&j._context.staticPlot?"M0,0Z":"M"+_e+","+We+"V"+qe+"H"+Re+"V"+We+"Z").call(i.setClipUrl,Z.layerClipId,j),!se.uniformtext.mode&&ye){var Lt=i.makePointStyleFns(te);i.singlePointStyle(Ae,Bt,te,Lt,j)}S(j,Z,He,Y,Oe,_e,Re,We,qe,W,J),Z.layerClipId&&i.hideOutsideRangePoint(Ae,He.select("text"),le,fe,te.xcalendar,te.ycalendar)});var ke=te.cliponaxis===!1;i.setClipUrl(ne,ke?null:Z.layerClipId,j)});a.getComponentMethod("errorbars","plot")(j,H,Z,W)}function S(j,Z,ee,q,W,J,le,fe,se,H,Y){var ne=Z.xaxis,te=Z.yaxis,K=j._fullLayout,$;function ae(Mt,it,ht){var Qe=m.ensureSingle(Mt,"text").text(it).attr({class:"bartext bartext-"+$,"text-anchor":"middle","data-notex":1}).call(i.font,ht).call(x.convertToTspans,j);return Qe}var ie=q[0].trace,oe=ie.orientation==="h",ue=I(K,q,W,ne,te);$=D(ie,W);var ye=H.mode==="stack"||H.mode==="relative",ce=q[W],me=!ye||ce._outmost;if(!ue||$==="none"||(ce.isBlank||J===le||fe===se)&&($==="auto"||$==="inside")){ee.select("text").remove();return}var xe=K.font,ke=o.getBarColor(q[W],ie),Ae=o.getInsideTextFont(ie,W,xe,ke),Oe=o.getOutsideTextFont(ie,W,xe),He=ee.datum();oe?ne.type==="log"&&He.s0<=0&&(ne.range[0]<ne.range[1]?J=0:J=ne._length):te.type==="log"&&He.s0<=0&&(te.range[0]<te.range[1]?fe=te._length:fe=0);var Ge=Math.abs(le-J)-2*A,_e=Math.abs(se-fe)-2*A,Re,We,qe,Ue,Ie;if($==="outside"&&!me&&!ce.hasB&&($="inside"),$==="auto")if(me){$="inside",Ie=m.ensureUniformFontSize(j,Ae),Re=ae(ee,ue,Ie),We=i.bBox(Re.node()),qe=We.width,Ue=We.height;var Ve=qe>0&&Ue>0,dt=qe<=Ge&&Ue<=_e,Rt=qe<=_e&&Ue<=Ge,Gt=oe?Ge>=qe*(_e/Ue):_e>=Ue*(Ge/qe);Ve&&(dt||Rt||Gt)?$="inside":($="outside",Re.remove(),Re=null)}else $="inside";if(!Re){Ie=m.ensureUniformFontSize(j,$==="outside"?Oe:Ae),Re=ae(ee,ue,Ie);var kt=Re.attr("transform");if(Re.attr("transform",""),We=i.bBox(Re.node()),qe=We.width,Ue=We.height,Re.attr("transform",kt),qe<=0||Ue<=0){Re.remove();return}}var zt=ie.textangle,Bt,Lt;$==="outside"?(Lt=ie.constraintext==="both"||ie.constraintext==="outside",Bt=F(J,le,fe,se,We,{isHorizontal:oe,constrained:Lt,angle:zt})):(Lt=ie.constraintext==="both"||ie.constraintext==="inside",Bt=O(J,le,fe,se,We,{isHorizontal:oe,constrained:Lt,angle:zt,anchor:ie.insidetextanchor})),Bt.fontSize=Ie.size,f(ie.type==="histogram"?"bar":ie.type,Bt,K),ce.transform=Bt,w(Re,K,H,Y).attr("transform",m.getTextTransform(Bt))}function k(j){return j==="auto"?0:j}function P(j,Z){var ee=Math.PI/180*Z,q=Math.abs(Math.sin(ee)),W=Math.abs(Math.cos(ee));return{x:j.width*W+j.height*q,y:j.width*q+j.height*W}}function O(j,Z,ee,q,W,J){var le=!!J.isHorizontal,fe=!!J.constrained,se=J.angle||0,H=J.anchor||"end",Y=H==="end",ne=H==="start",te=J.leftToRight||0,K=(te+1)/2,$=1-K,ae=W.width,ie=W.height,oe=Math.abs(Z-j),ue=Math.abs(q-ee),ye=oe>2*A&&ue>2*A?A:0;oe-=2*ye,ue-=2*ye;var ce=k(se);se==="auto"&&!(ae<=oe&&ie<=ue)&&(ae>oe||ie>ue)&&(!(ae>ue||ie>oe)||ae<ie!=oe<ue)&&(ce+=90);var me=P(W,ce),xe=1;fe&&(xe=Math.min(1,oe/me.x,ue/me.y));var ke=W.left*$+W.right*K,Ae=(W.top+W.bottom)/2,Oe=(j+A)*$+(Z-A)*K,He=(ee+q)/2,Ge=0,_e=0;if(ne||Y){var Re=(le?me.x:me.y)/2,We=le?_(j,Z):_(ee,q);le?ne?(Oe=j+We*ye,Ge=-We*Re):(Oe=Z-We*ye,Ge=We*Re):ne?(He=ee+We*ye,_e=-We*Re):(He=q-We*ye,_e=We*Re)}return{textX:ke,textY:Ae,targetX:Oe,targetY:He,anchorX:Ge,anchorY:_e,scale:xe,rotate:ce}}function F(j,Z,ee,q,W,J){var le=!!J.isHorizontal,fe=!!J.constrained,se=J.angle||0,H=W.width,Y=W.height,ne=Math.abs(Z-j),te=Math.abs(q-ee),K;le?K=te>2*A?A:0:K=ne>2*A?A:0;var $=1;fe&&($=le?Math.min(1,te/Y):Math.min(1,ne/H));var ae=k(se),ie=P(W,ae),oe=(le?ie.x:ie.y)/2,ue=(W.left+W.right)/2,ye=(W.top+W.bottom)/2,ce=(j+Z)/2,me=(ee+q)/2,xe=0,ke=0,Ae=le?_(Z,j):_(ee,q);return le?(ce=Z-Ae*K,xe=Ae*oe):(me=q+Ae*K,ke=-Ae*oe),{textX:ue,textY:ye,targetX:ce,targetY:me,anchorX:xe,anchorY:ke,scale:$,rotate:ae}}function I(j,Z,ee,q,W){var J=Z[0].trace,le=J.texttemplate,fe;return le?fe=U(j,Z,ee,q,W):J.textinfo?fe=B(Z,ee,q,W):fe=c.getValue(J.text,ee),c.coerceString(p,fe)}function D(j,Z){var ee=c.getValue(j.textposition,Z);return c.coerceEnumerated(y,ee)}function U(j,Z,ee,q,W){var J=Z[0].trace,le=m.castOption(J,ee,"texttemplate");if(!le)return"";var fe=J.type==="histogram",se=J.type==="waterfall",H=J.type==="funnel",Y=J.orientation==="h",ne,te,K,$;Y?(ne="y",te=W,K="x",$=q):(ne="x",te=q,K="y",$=W);function ae(xe){return r(te,te.c2l(xe),!0).text}function ie(xe){return r($,$.c2l(xe),!0).text}var oe=Z[ee],ue={};ue.label=oe.p,ue.labelLabel=ue[ne+"Label"]=ae(oe.p);var ye=m.castOption(J,oe.i,"text");(ye===0||ye)&&(ue.text=ye),ue.value=oe.s,ue.valueLabel=ue[K+"Label"]=ie(oe.s);var ce={};g(ce,J,oe.i),(fe||ce.x===void 0)&&(ce.x=Y?ue.value:ue.label),(fe||ce.y===void 0)&&(ce.y=Y?ue.label:ue.value),(fe||ce.xLabel===void 0)&&(ce.xLabel=Y?ue.valueLabel:ue.labelLabel),(fe||ce.yLabel===void 0)&&(ce.yLabel=Y?ue.labelLabel:ue.valueLabel),se&&(ue.delta=+oe.rawS||oe.s,ue.deltaLabel=ie(ue.delta),ue.final=oe.v,ue.finalLabel=ie(ue.final),ue.initial=ue.final-ue.delta,ue.initialLabel=ie(ue.initial)),H&&(ue.value=oe.s,ue.valueLabel=ie(ue.value),ue.percentInitial=oe.begR,ue.percentInitialLabel=m.formatPercent(oe.begR),ue.percentPrevious=oe.difR,ue.percentPreviousLabel=m.formatPercent(oe.difR),ue.percentTotal=oe.sumR,ue.percenTotalLabel=m.formatPercent(oe.sumR));var me=m.castOption(J,oe.i,"customdata");return me&&(ue.customdata=me),m.texttemplateString(le,ue,j._d3locale,ce,ue,J._meta||{})}function B(j,Z,ee,q){var W=j[0].trace,J=W.orientation==="h",le=W.type==="waterfall",fe=W.type==="funnel";function se(me){var xe=J?q:ee;return r(xe,me,!0).text}function H(me){var xe=J?ee:q;return r(xe,+me,!0).text}var Y=W.textinfo,ne=j[Z],te=Y.split("+"),K=[],$,ae=function(me){return te.indexOf(me)!==-1};if(ae("label")&&K.push(se(j[Z].p)),ae("text")&&($=m.castOption(W,ne.i,"text"),($===0||$)&&K.push($)),le){var ie=+ne.rawS||ne.s,oe=ne.v,ue=oe-ie;ae("initial")&&K.push(H(ue)),ae("delta")&&K.push(H(ie)),ae("final")&&K.push(H(oe))}if(fe){ae("value")&&K.push(H(ne.s));var ye=0;ae("percent initial")&&ye++,ae("percent previous")&&ye++,ae("percent total")&&ye++;var ce=ye>1;ae("percent initial")&&($=m.formatPercent(ne.begR),ce&&($+=" of initial"),K.push($)),ae("percent previous")&&($=m.formatPercent(ne.difR),ce&&($+=" of previous"),K.push($)),ae("percent total")&&($=m.formatPercent(ne.sumR),ce&&($+=" of total"),K.push($))}return K.join("<br>")}z.exports={plot:L,toMoveInsideBar:O}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(e,z,N){z.exports=function(m,x){var t=m.cd,i=m.xaxis,a=m.yaxis,r=t[0].trace,n=r.type==="funnel",f=r.orientation==="h",l=[],o;if(x===!1)for(o=0;o<t.length;o++)t[o].selected=0;else for(o=0;o<t.length;o++){var c=t[o],h="ct"in c?c.ct:u(c,i,a,f,n);x.contains(h,!1,o,m)?(l.push({pointNumber:o,x:i.c2d(c.x),y:a.c2d(c.y)}),c.selected=1):c.selected=0}return l};function u(s,m,x,t,i){var a=m.c2p(t?s.s0:s.p0,!0),r=m.c2p(t?s.s1:s.p1,!0),n=x.c2p(t?s.p0:s.s0,!0),f=x.c2p(t?s.p1:s.s1,!0);return i?[(a+r)/2,(n+f)/2]:t?[r,(n+f)/2]:[(a+r)/2,f]}},{}],661:[function(e,z,N){z.exports=m;var u=e("../../lib").distinctVals,s=e("../../constants/numerical").BADNUM;function m(x,t){this.traces=x,this.sepNegVal=t.sepNegVal,this.overlapNoMerge=t.overlapNoMerge;for(var i=1/0,a=[],r=0;r<x.length;r++){for(var n=x[r],f=0;f<n.length;f++){var l=n[f];l.p!==s&&a.push(l.p)}n[0]&&n[0].width1&&(i=Math.min(n[0].width1,i))}this.positions=a;var o=u(a);this.distinctPositions=o.vals,o.vals.length===1&&i!==1/0?this.minDiff=i:this.minDiff=Math.min(o.minDiff,i);var c=(t.posAxis||{}).type;(c==="category"||c==="multicategory")&&(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}m.prototype.put=function(t,i){var a=this.getLabel(t,i),r=this.bins[a]||0;return this.bins[a]=r+i,r},m.prototype.get=function(t,i){var a=this.getLabel(t,i);return this.bins[a]||0},m.prototype.getLabel=function(t,i){var a=i<0&&this.sepNegVal?"v":"^",r=this.overlapNoMerge?t:Math.round(t/this.binWidth);return a+r}},{"../../constants/numerical":479,"../../lib":503}],662:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../components/drawing"),x=e("../../lib"),t=e("../../registry"),i=e("./uniform_text").resizeText,a=e("./attributes"),r=a.textfont,n=a.insidetextfont,f=a.outsidetextfont,l=e("./helpers");function o(w){var v=u.select(w).selectAll("g.barlayer").selectAll("g.trace");i(w,v,"bar");var L=v.size(),S=w._fullLayout;v.style("opacity",function(k){return k[0].trace.opacity}).each(function(k){(S.barmode==="stack"&&L>1||S.bargap===0&&S.bargroupgap===0&&!k[0].trace.marker.line.width)&&u.select(this).attr("shape-rendering","crispEdges")}),v.selectAll("g.points").each(function(k){var P=u.select(this),O=k[0].trace;c(P,O,w)}),t.getComponentMethod("errorbars","style")(v)}function c(w,v,L){m.pointStyle(w.selectAll("path"),v,L),h(w,v,L)}function h(w,v,L){w.selectAll("text").each(function(S){var k=u.select(this),P=x.ensureUniformFontSize(L,g(k,S,v,L));m.font(k,P)})}function d(w,v,L){var S=v[0].trace;S.selectedpoints?p(L,S,w):(c(L,S,w),t.getComponentMethod("errorbars","style")(L))}function p(w,v,L){m.selectedPointStyle(w.selectAll("path"),v),y(w.selectAll("text"),v,L)}function y(w,v,L){w.each(function(S){var k=u.select(this),P;if(S.selected){P=x.ensureUniformFontSize(L,g(k,S,v,L));var O=v.selected.textfont&&v.selected.textfont.color;O&&(P.color=O),m.font(k,P)}else m.selectedTextStyle(k,v)})}function g(w,v,L,S){var k=S._fullLayout.font,P=L.textfont;if(w.classed("bartext-inside")){var O=T(v,L);P=b(L,v.i,k,O)}else w.classed("bartext-outside")&&(P=M(L,v.i,k));return P}function A(w,v,L){return _(r,w.textfont,v,L)}function b(w,v,L,S){var k=A(w,v,L),P=w._input.textfont===void 0||w._input.textfont.color===void 0||Array.isArray(w.textfont.color)&&w.textfont.color[v]===void 0;return P&&(k={color:s.contrast(S),family:k.family,size:k.size}),_(n,w.insidetextfont,v,k)}function M(w,v,L){var S=A(w,v,L);return _(f,w.outsidetextfont,v,S)}function _(w,v,L,S){v=v||{};var k=l.getValue(v.family,L),P=l.getValue(v.size,L),O=l.getValue(v.color,L);return{family:l.coerceString(w.family,k,S.family),size:l.coerceNumber(w.size,P,S.size),color:l.coerceColor(w.color,O,S.color)}}function T(w,v){return v.type==="waterfall"?v[w.dir].marker.color:w.mcc||w.mc||v.marker.color}z.exports={style:o,styleTextPoints:h,styleOnSelect:d,getInsideTextFont:b,getOutsideTextFont:M,getBarColor:T,resizeText:i}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(e,z,N){var u=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../lib").coercePattern;z.exports=function(i,a,r,n,f){var l=r("marker.color",n),o=s(i,"marker");o&&m(i,a,f,r,{prefix:"marker.",cLetter:"c"}),r("marker.line.color",u.defaultLine),s(i,"marker.line")&&m(i,a,f,r,{prefix:"marker.line.",cLetter:"c"}),r("marker.line.width"),r("marker.opacity"),x(r,"marker.pattern",l,o),r("selected.marker.color"),r("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib");function m(a,r,n){var f=a._fullLayout,l=f["_"+n+"Text_minsize"];if(l){var o=f.uniformtext.mode==="hide",c;switch(n){case"funnelarea":case"pie":case"sunburst":c="g.slice";break;case"treemap":case"icicle":c="g.slice, g.pathbar";break;default:c="g.points > g.point"}r.selectAll(c).each(function(h){var d=h.transform;if(d){d.scale=o&&d.hide?0:l/d.fontSize;var p=u.select(this).select("text");p.attr("transform",s.getTextTransform(d))}})}}function x(a,r,n){if(n.uniformtext.mode){var f=i(a),l=n.uniformtext.minsize,o=r.scale*r.fontSize;r.hide=o<l,n[f]=n[f]||1/0,r.hide||(n[f]=Math.min(n[f],Math.max(o,l)))}}function t(a,r){var n=i(a);r[n]=void 0}function i(a){return"_"+a+"Text_minsize"}z.exports={recordMinTextSize:x,clearMinTextSize:t,resizeText:m}},{"../../lib":503,"@plotly/d3":58}],665:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../lib/extend").extendFlat,m=e("../scatterpolar/attributes"),x=e("../bar/attributes");z.exports={r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,base:s({},x.base,{}),offset:s({},x.offset,{}),width:s({},x.width,{}),text:s({},x.text,{}),hovertext:s({},x.hovertext,{}),marker:x.marker,hoverinfo:m.hoverinfo,hovertemplate:u(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(e,z,N){var u=e("../../components/colorscale/helpers").hasColorscale,s=e("../../components/colorscale/calc"),m=e("../bar/arrays_to_calcdata"),x=e("../bar/cross_trace_calc").setGroupPositions,t=e("../scatter/calc_selection"),i=e("../../registry").traceIs,a=e("../../lib").extendFlat;function r(f,l){for(var o=f._fullLayout,c=l.subplot,h=o[c].radialaxis,d=o[c].angularaxis,p=h.makeCalcdata(l,"r"),y=d.makeCalcdata(l,"theta"),g=l._length,A=new Array(g),b=p,M=y,_=0;_<g;_++)A[_]={p:M[_],s:b[_]};function T(w){var v=l[w];v!==void 0&&(l["_"+w]=Array.isArray(v)?d.makeCalcdata(l,w):d.d2c(v,l.thetaunit))}return d.type==="linear"&&(T("width"),T("offset")),u(l,"marker")&&s(f,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),u(l,"marker.line")&&s(f,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),m(A,l),t(A,l),A}function n(f,l,o){for(var c=f.calcdata,h=[],d=0;d<c.length;d++){var p=c[d],y=p[0].trace;y.visible===!0&&i(y,"bar")&&y.subplot===o&&h.push(p)}var g=a({},l.radialaxis,{_id:"x"}),A=l.angularaxis;x(f,A,g,h,{mode:l.barmode,norm:l.barnorm,gap:l.bargap,groupgap:l.bargroupgap})}z.exports={calc:r,crossTraceCalc:n}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(e,z,N){var u=e("../../lib"),s=e("../scatterpolar/defaults").handleRThetaDefaults,m=e("../bar/style_defaults"),x=e("./attributes");z.exports=function(i,a,r,n){function f(o,c){return u.coerce(i,a,x,o,c)}var l=s(i,a,n,f);if(!l){a.visible=!1;return}f("thetaunit"),f("base"),f("offset"),f("width"),f("text"),f("hovertext"),f("hovertemplate"),m(i,a,f,r,n),u.coerceSelectionMarkerOpacity(a,f)}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(e,z,N){var u=e("../../components/fx"),s=e("../../lib"),m=e("../bar/hover").getTraceColor,x=s.fillText,t=e("../scatterpolar/hover").makeHoverPointText,i=e("../../plots/polar/helpers").isPtInsidePolygon;z.exports=function(r,n,f){var l=r.cd,o=l[0].trace,c=r.subplot,h=c.radialAxis,d=c.angularAxis,p=c.vangles,y=p?i:s.isPtInsideSector,g=r.maxHoverDistance,A=d._period||2*Math.PI,b=Math.abs(h.g2p(Math.sqrt(n*n+f*f))),M=Math.atan2(f,n);h.range[0]>h.range[1]&&(M+=Math.PI);var _=function(L){return y(b,M,[L.rp0,L.rp1],[L.thetag0,L.thetag1],p)?g+Math.min(1,Math.abs(L.thetag1-L.thetag0)/A)-1+(L.rp1-b)/(L.rp1-L.rp0)-1:1/0};if(u.getClosest(l,_,r),r.index!==!1){var T=r.index,w=l[T];r.x0=r.x1=w.ct[0],r.y0=r.y1=w.ct[1];var v=s.extendFlat({},w,{r:w.s,theta:w.p});return x(w,o,r),t(v,o,c,r),r.hovertemplate=o.hovertemplate,r.color=m(o,w),r.xLabelVal=r.yLabelVal=void 0,w.s<0&&(r.idealAlign="left"),[r]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(e,z,N){z.exports={moduleType:"trace",name:"barpolar",basePlotModule:e("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("../scatterpolar/format_labels"),style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(e,z,N){z.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(m,x,t){var i={},a;function r(l,o){return u.coerce(m[a]||{},x[a],s,l,o)}for(var n=0;n<t.length;n++){var f=t[n];f.type==="barpolar"&&f.visible===!0&&(a=f.subplot,i[a]||(r("barmode"),r("bargap"),i[a]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(e,z,N){var u=e("@plotly/d3"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../components/drawing"),t=e("../../plots/polar/helpers");z.exports=function(r,n,f){var l=n.xaxis,o=n.yaxis,c=n.radialAxis,h=n.angularAxis,d=i(n),p=n.layers.frontplot.select("g.barlayer");m.makeTraceGroups(p,f,"trace bars").each(function(){var y=u.select(this),g=m.ensureSingle(y,"g","points"),A=g.selectAll("g.point").data(m.identity);A.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),A.exit().remove(),A.each(function(b){var M=u.select(this),_=b.rp0=c.c2p(b.s0),T=b.rp1=c.c2p(b.s1),w=b.thetag0=h.c2g(b.p0),v=b.thetag1=h.c2g(b.p1),L;if(!s(_)||!s(T)||!s(w)||!s(v)||_===T||w===v)L="M0,0Z";else{var S=c.c2g(b.s1),k=(w+v)/2;b.ct=[l.c2p(S*Math.cos(k)),o.c2p(S*Math.sin(k))],L=d(_,T,w,v)}m.ensureSingle(M,"path").attr("d",L)}),x.setClipUrl(y,n._hasClipOnAxisFalse?n.clipIds.forTraces:null,r)})};function i(a){var r=a.cxx,n=a.cyy;return a.vangles?function(f,l,o,c){var h,d;m.angleDelta(o,c)>0?(h=o,d=c):(h=c,d=o);var p=t.findEnclosingVertexAngles(h,a.vangles)[0],y=t.findEnclosingVertexAngles(d,a.vangles)[1],g=[p,(h+d)/2,y];return t.pathPolygonAnnulus(f,l,h,d,g,r,n)}:function(f,l,o,c){return m.pathAnnulus(f,l,o,c,r,n)}}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(e,z,N){var u=e("../scatter/attributes"),s=e("../bar/attributes"),m=e("../../components/color/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../lib/extend").extendFlat,a=u.marker,r=a.line;z.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:i({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:i({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:i({},a.size,{arrayOk:!1,editType:"calc"}),color:i({},a.color,{arrayOk:!1,editType:"style"}),line:{color:i({},r.color,{arrayOk:!1,dflt:m.defaultLine,editType:"style"}),width:i({},r.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:u.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:s.offsetgroup,alignmentgroup:s.alignmentgroup,selected:{marker:u.selected.marker,editType:"style"},unselected:{marker:u.unselected.marker,editType:"style"},text:i({},u.text,{}),hovertext:i({},u.hovertext,{}),hovertemplate:t({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/align_period"),x=e("../../lib"),t=e("../../constants/numerical").BADNUM,i=x._;z.exports=function(M,_){var T=M._fullLayout,w=s.getFromId(M,_.xaxis||"x"),v=s.getFromId(M,_.yaxis||"y"),L=[],S=_.type==="violin"?"_numViolins":"_numBoxes",k,P,O,F,I,D,U;_.orientation==="h"?(O=w,F="x",I=v,D="y",U=!!_.yperiodalignment):(O=v,F="y",I=w,D="x",U=!!_.xperiodalignment);var B=a(_,D,I,T[S]),j=B[0],Z=B[1],ee=x.distinctVals(j,I),q=ee.vals,W=ee.minDiff/2,J,le,fe,se,H,Y,ne=(_.boxpoints||_.points)==="all"?x.identity:function(kt){return kt.v<J.lf||kt.v>J.uf};if(_._hasPreCompStats){var te=_[F],K=function(kt){return O.d2c((_[kt]||[])[k])},$=1/0,ae=-1/0;for(k=0;k<_._length;k++){var ie=j[k];if(!!u(ie)){if(J={},J.pos=J[D]=ie,U&&Z&&(J.orig_p=Z[k]),J.q1=K("q1"),J.med=K("median"),J.q3=K("q3"),le=[],te&&x.isArrayOrTypedArray(te[k]))for(P=0;P<te[k].length;P++)Y=O.d2c(te[k][P]),Y!==t&&(H={v:Y,i:[k,P]},l(H,_,[k,P]),le.push(H));if(J.pts=le.sort(c),fe=J[F]=le.map(h),se=fe.length,J.med!==t&&J.q1!==t&&J.q3!==t&&J.med>=J.q1&&J.q3>=J.med){var oe=K("lowerfence");J.lf=oe!==t&&oe<=J.q1?oe:d(J,fe,se);var ue=K("upperfence");J.uf=ue!==t&&ue>=J.q3?ue:p(J,fe,se);var ye=K("mean");J.mean=ye!==t?ye:se?x.mean(fe,se):(J.q1+J.q3)/2;var ce=K("sd");J.sd=ye!==t&&ce>=0?ce:se?x.stdev(fe,se,J.mean):J.q3-J.q1,J.lo=y(J),J.uo=g(J);var me=K("notchspan");me=me!==t&&me>0?me:A(J,se),J.ln=J.med-me,J.un=J.med+me;var xe=J.lf,ke=J.uf;_.boxpoints&&fe.length&&(xe=Math.min(xe,fe[0]),ke=Math.max(ke,fe[se-1])),_.notched&&(xe=Math.min(xe,J.ln),ke=Math.max(ke,J.un)),J.min=xe,J.max=ke}else{x.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+J.q1,"median = "+J.med,"q3 = "+J.q3].join(`
`));var Ae;J.med!==t?Ae=J.med:J.q1!==t?J.q3!==t?Ae=(J.q1+J.q3)/2:Ae=J.q1:J.q3!==t?Ae=J.q3:Ae=0,J.med=Ae,J.q1=J.q3=Ae,J.lf=J.uf=Ae,J.mean=J.sd=Ae,J.ln=J.un=Ae,J.min=J.max=Ae}$=Math.min($,J.min),ae=Math.max(ae,J.max),J.pts2=le.filter(ne),L.push(J)}}_._extremes[O._id]=s.findExtremes(O,[$,ae],{padded:!0})}else{var Oe=O.makeCalcdata(_,F),He=r(q,W),Ge=q.length,_e=n(Ge);for(k=0;k<_._length;k++)if(Y=Oe[k],!!u(Y)){var Re=x.findBin(j[k],He);Re>=0&&Re<Ge&&(H={v:Y,i:k},l(H,_,k),_e[Re].push(H))}var We=1/0,qe=-1/0,Ue=_.quartilemethod,Ie=Ue==="exclusive",Ve=Ue==="inclusive";for(k=0;k<Ge;k++)if(_e[k].length>0){if(J={},J.pos=J[D]=q[k],le=J.pts=_e[k].sort(c),fe=J[F]=le.map(h),se=fe.length,J.min=fe[0],J.max=fe[se-1],J.mean=x.mean(fe,se),J.sd=x.stdev(fe,se,J.mean),J.med=x.interp(fe,.5),se%2&&(Ie||Ve)){var dt,Rt;Ie?(dt=fe.slice(0,se/2),Rt=fe.slice(se/2+1)):Ve&&(dt=fe.slice(0,se/2+1),Rt=fe.slice(se/2)),J.q1=x.interp(dt,.5),J.q3=x.interp(Rt,.5)}else J.q1=x.interp(fe,.25),J.q3=x.interp(fe,.75);J.lf=d(J,fe,se),J.uf=p(J,fe,se),J.lo=y(J),J.uo=g(J);var Gt=A(J,se);J.ln=J.med-Gt,J.un=J.med+Gt,We=Math.min(We,J.ln),qe=Math.max(qe,J.un),J.pts2=le.filter(ne),L.push(J)}_._extremes[O._id]=s.findExtremes(O,_.notched?Oe.concat([We,qe]):Oe,{padded:!0})}return o(L,_),L.length>0?(L[0].t={num:T[S],dPos:W,posLetter:D,valLetter:F,labels:{med:i(M,"median:"),min:i(M,"min:"),q1:i(M,"q1:"),q3:i(M,"q3:"),max:i(M,"max:"),mean:_.boxmean==="sd"?i(M,"mean \xB1 \u03C3:"):i(M,"mean:"),lf:i(M,"lower fence:"),uf:i(M,"upper fence:")}},T[S]++,L):[{t:{empty:!0}}]};function a(b,M,_,T){var w=M in b,v=M+"0"in b,L="d"+M in b;if(w||v&&L){var S=_.makeCalcdata(b,M),k=m(b,_,M,S).vals;return[k,S]}var P;v?P=b[M+"0"]:"name"in b&&(_.type==="category"||u(b.name)&&["linear","log"].indexOf(_.type)!==-1||x.isDateTime(b.name)&&_.type==="date")?P=b.name:P=T;for(var O=_.type==="multicategory"?_.r2c_just_indices(P):_.d2c(P,0,b[M+"calendar"]),F=b._length,I=new Array(F),D=0;D<F;D++)I[D]=O;return[I]}function r(b,M){for(var _=b.length,T=new Array(_+1),w=0;w<_;w++)T[w]=b[w]-M;return T[_]=b[_-1]+M,T}function n(b){for(var M=new Array(b),_=0;_<b;_++)M[_]=[];return M}var f={text:"tx",hovertext:"htx"};function l(b,M,_){for(var T in f)x.isArrayOrTypedArray(M[T])&&(Array.isArray(_)?x.isArrayOrTypedArray(M[T][_[0]])&&(b[f[T]]=M[T][_[0]][_[1]]):b[f[T]]=M[T][_])}function o(b,M){if(x.isArrayOrTypedArray(M.selectedpoints))for(var _=0;_<b.length;_++){for(var T=b[_].pts||[],w={},v=0;v<T.length;v++)w[T[v].i]=v;x.tagSelected(T,M,w)}}function c(b,M){return b.v-M.v}function h(b){return b.v}function d(b,M,_){return _===0?b.q1:Math.min(b.q1,M[Math.min(x.findBin(2.5*b.q1-1.5*b.q3,M,!0)+1,_-1)])}function p(b,M,_){return _===0?b.q3:Math.max(b.q3,M[Math.max(x.findBin(2.5*b.q3-1.5*b.q1,M),0)])}function y(b){return 4*b.q1-3*b.q3}function g(b){return 4*b.q3-3*b.q1}function A(b,M){return M===0?0:1.57*(b.q3-b.q1)/Math.sqrt(M)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../lib"),m=e("../../plots/cartesian/constraints").getAxisGroup,x=["v","h"];function t(a,r){for(var n=a.calcdata,f=r.xaxis,l=r.yaxis,o=0;o<x.length;o++){for(var c=x[o],h=c==="h"?l:f,d=[],p=0;p<n.length;p++){var y=n[p],g=y[0].t,A=y[0].trace;A.visible===!0&&(A.type==="box"||A.type==="candlestick")&&!g.empty&&(A.orientation||"v")===c&&A.xaxis===f._id&&A.yaxis===l._id&&d.push(p)}i("box",a,d,h)}}function i(a,r,n,f){var l=r.calcdata,o=r._fullLayout,c=f._id,h=c.charAt(0),d,p,y,g=[],A=0;for(d=0;d<n.length;d++)for(y=l[n[d]],p=0;p<y.length;p++)g.push(f.c2l(y[p].pos,!0)),A+=(y[p].pts2||[]).length;if(!!g.length){var b=s.distinctVals(g);(f.type==="category"||f.type==="multicategory")&&(b.minDiff=1);var M=b.minDiff/2;u.minDtick(f,b.minDiff,b.vals[0],!0);var _=a==="violin"?"_numViolins":"_numBoxes",T=o[_],w=o[a+"mode"]==="group"&&T>1,v=1-o[a+"gap"],L=1-o[a+"groupgap"];for(d=0;d<n.length;d++){y=l[n[d]];var S=y[0].trace,k=y[0].t,P=S.width,O=S.side,F,I,D,U;if(P)F=I=U=P/2,D=0;else if(F=M,w){var B=m(o,f._id)+S.orientation,j=o._alignmentOpts[B]||{},Z=j[S.alignmentgroup]||{},ee=Object.keys(Z.offsetGroups||{}).length,q=ee||T,W=ee?S._offsetIndex:k.num;I=F*v*L/q,D=2*F*(-.5+(W+.5)/q)*v,U=F*v/q}else I=F*v*L,D=0,U=F;k.dPos=F,k.bPos=D,k.bdPos=I,k.wHover=U;var J,le,fe=D+I,se,H,Y,ne,te,K,$=Boolean(P),ae=(S.boxpoints||S.points)&&A>0;if(O==="positive"?(J=F*(P?1:.5),se=fe,le=se=D):O==="negative"?(J=se=D,le=F*(P?1:.5),H=fe):(J=le=F,se=H=fe),ae){var ie=S.pointpos,oe=S.jitter,ue=S.marker.size/2,ye=0;ie+oe>=0&&(ye=fe*(ie+oe),ye>J?($=!0,te=ue,Y=ye):ye>se&&(te=ue,Y=J)),ye<=J&&(Y=J);var ce=0;ie-oe<=0&&(ce=-fe*(ie-oe),ce>le?($=!0,K=ue,ne=ce):ce>H&&(K=ue,ne=le)),ce<=le&&(ne=le)}else Y=J,ne=le;var me=new Array(y.length);for(p=0;p<y.length;p++)me[p]=y[p].pos;S._extremes[c]=u.findExtremes(f,me,{padded:$,vpadminus:ne,vpadplus:Y,vpadLinearized:!0,ppadminus:{x:K,y:te}[h],ppadplus:{x:te,y:K}[h]})}}}z.exports={crossTraceCalc:t,setPositionOffset:i}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(e,z,N){var u=e("../../lib"),s=e("../../registry"),m=e("../../components/color"),x=e("../scatter/period_defaults"),t=e("../bar/defaults").handleGroupingDefaults,i=e("../../plots/cartesian/axis_autotype"),a=e("./attributes");function r(o,c,h,d){function p(w,v){return u.coerce(o,c,a,w,v)}if(n(o,c,p,d),c.visible!==!1){x(o,c,d,p),p("xhoverformat"),p("yhoverformat");var y=c._hasPreCompStats;y&&(p("lowerfence"),p("upperfence")),p("line.color",(o.marker||{}).color||h),p("line.width"),p("fillcolor",m.addOpacity(c.line.color,.5));var g=!1;if(y){var A=p("mean"),b=p("sd");A&&A.length&&(g=!0,b&&b.length&&(g="sd"))}p("boxmean",g),p("whiskerwidth"),p("width"),p("quartilemethod");var M=!1;if(y){var _=p("notchspan");_&&_.length&&(M=!0)}else u.validate(o.notchwidth,a.notchwidth)&&(M=!0);var T=p("notched",M);T&&p("notchwidth"),f(o,c,p,{prefix:"box"})}}function n(o,c,h,d){function p(ee){var q=0;return ee&&ee.length&&(q+=1,u.isArrayOrTypedArray(ee[0])&&ee[0].length&&(q+=1)),q}function y(ee){return u.validate(o[ee],a[ee])}var g=h("y"),A=h("x"),b;if(c.type==="box"){var M=h("q1"),_=h("median"),T=h("q3");c._hasPreCompStats=M&&M.length&&_&&_.length&&T&&T.length,b=Math.min(u.minRowLength(M),u.minRowLength(_),u.minRowLength(T))}var w=p(g),v=p(A),L=w&&u.minRowLength(g),S=v&&u.minRowLength(A),k=d.calendar,P={autotypenumbers:d.autotypenumbers},O,F;if(c._hasPreCompStats)switch(String(v)+String(w)){case"00":var I=y("x0")||y("dx"),D=y("y0")||y("dy");D&&!I?O="h":O="v",F=b;break;case"10":O="v",F=Math.min(b,S);break;case"20":O="h",F=Math.min(b,A.length);break;case"01":O="h",F=Math.min(b,L);break;case"02":O="v",F=Math.min(b,g.length);break;case"12":O="v",F=Math.min(b,S,g.length);break;case"21":O="h",F=Math.min(b,A.length,L);break;case"11":F=0;break;case"22":var U=!1,B;for(B=0;B<A.length;B++)if(i(A[B],k,P)==="category"){U=!0;break}if(U)O="v",F=Math.min(b,S,g.length);else{for(B=0;B<g.length;B++)if(i(g[B],k,P)==="category"){U=!0;break}U?(O="h",F=Math.min(b,A.length,L)):(O="v",F=Math.min(b,S,g.length))}break}else w>0?(O="v",v>0?F=Math.min(S,L):F=Math.min(L)):v>0?(O="h",F=Math.min(S)):F=0;if(!F){c.visible=!1;return}c._length=F;var j=h("orientation",O);c._hasPreCompStats?j==="v"&&v===0?(h("x0",0),h("dx",1)):j==="h"&&w===0&&(h("y0",0),h("dy",1)):j==="v"&&v===0?h("x0"):j==="h"&&w===0&&h("y0");var Z=s.getComponentMethod("calendars","handleTraceDefaults");Z(o,c,["x","y"],d)}function f(o,c,h,d){var p=d.prefix,y=u.coerce2(o,c,a,"marker.outliercolor"),g=h("marker.line.outliercolor"),A="outliers";c._hasPreCompStats?A="all":(y||g)&&(A="suspectedoutliers");var b=h(p+"points",A);b?(h("jitter",b==="all"?.3:0),h("pointpos",b==="all"?-1.5:0),h("marker.symbol"),h("marker.opacity"),h("marker.size"),h("marker.color",c.line.color),h("marker.line.color"),h("marker.line.width"),b==="suspectedoutliers"&&(h("marker.line.outliercolor",c.marker.color),h("marker.line.outlierwidth")),h("selected.marker.color"),h("unselected.marker.color"),h("selected.marker.size"),h("unselected.marker.size"),h("text"),h("hovertext")):delete c.marker;var M=h("hoveron");(M==="all"||M.indexOf("points")!==-1)&&h("hovertemplate"),u.coerceSelectionMarkerOpacity(c,h)}function l(o,c){var h,d;function p(A){return u.coerce(d._input,d,a,A)}for(var y=0;y<o.length;y++){d=o[y];var g=d.type;(g==="box"||g==="violin")&&(h=d._input,c[g+"mode"]==="group"&&t(h,d,c,p))}}z.exports={supplyDefaults:r,crossTraceDefaults:l,handleSampleDefaults:n,handlePointsDefaults:f}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(e,z,N){z.exports=function(s,m){return m.hoverOnBox&&(s.hoverOnBox=m.hoverOnBox),"xVal"in m&&(s.x=m.xVal),"yVal"in m&&(s.y=m.yVal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s}},{}],678:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../lib"),m=e("../../components/fx"),x=e("../../components/color"),t=s.fillText;function i(n,f,l,o){var c=n.cd,h=c[0].trace,d=h.hoveron,p=[],y;return d.indexOf("boxes")!==-1&&(p=p.concat(a(n,f,l,o))),d.indexOf("points")!==-1&&(y=r(n,f,l)),o==="closest"?y?[y]:p:(y&&p.push(y),p)}function a(n,f,l,o){var c=n.cd,h=n.xa,d=n.ya,p=c[0].trace,y=c[0].t,g=p.type==="violin",A=[],b,M,_,T,w,v,L,S,k,P,O,F=y.bdPos,I,D,U=y.wHover,B=function(ae){return _.c2l(ae.pos)+y.bPos-_.c2l(v)};g&&p.side!=="both"?(p.side==="positive"&&(k=function(ae){var ie=B(ae);return m.inbox(ie,ie+U,P)},I=F,D=0),p.side==="negative"&&(k=function(ae){var ie=B(ae);return m.inbox(ie-U,ie,P)},I=0,D=F)):(k=function(ae){var ie=B(ae);return m.inbox(ie-U,ie+U,P)},I=D=F);var j;g?j=function(ae){return m.inbox(ae.span[0]-w,ae.span[1]-w,P)}:j=function(ae){return m.inbox(ae.min-w,ae.max-w,P)},p.orientation==="h"?(w=f,v=l,L=j,S=k,b="y",_=d,M="x",T=h):(w=l,v=f,L=k,S=j,b="x",_=h,M="y",T=d);var Z=Math.min(1,F/Math.abs(_.r2c(_.range[1])-_.r2c(_.range[0])));P=n.maxHoverDistance-Z,O=n.maxSpikeDistance-Z;function ee(ae){return(L(ae)+S(ae))/2}var q=m.getDistanceFunction(o,L,S,ee);if(m.getClosest(c,q,n),n.index===!1)return[];var W=c[n.index],J=p.line.color,le=(p.marker||{}).color;x.opacity(J)&&p.line.width?n.color=J:x.opacity(le)&&p.boxpoints?n.color=le:n.color=p.fillcolor,n[b+"0"]=_.c2p(W.pos+y.bPos-D,!0),n[b+"1"]=_.c2p(W.pos+y.bPos+I,!0),n[b+"LabelVal"]=W.orig_p!==void 0?W.orig_p:W.pos;var fe=b+"Spike";n.spikeDistance=ee(W)*O/P,n[fe]=_.c2p(W.pos,!0);var se={},H=["med","q1","q3","min","max"];(p.boxmean||(p.meanline||{}).visible)&&H.push("mean"),(p.boxpoints||p.points)&&H.push("lf","uf");for(var Y=0;Y<H.length;Y++){var ne=H[Y];if(!(!(ne in W)||W[ne]in se)){se[W[ne]]=!0;var te=W[ne],K=T.c2p(te,!0),$=s.extendFlat({},n);$.attr=ne,$[M+"0"]=$[M+"1"]=K,$[M+"LabelVal"]=te,$[M+"Label"]=(y.labels?y.labels[ne]+" ":"")+u.hoverLabelText(T,te,p[M+"hoverformat"]),$.hoverOnBox=!0,ne==="mean"&&"sd"in W&&p.boxmean==="sd"&&($[M+"err"]=W.sd),n.name="",n.spikeDistance=void 0,n[fe]=void 0,$.hovertemplate=!1,A.push($)}}return A}function r(n,f,l){for(var o=n.cd,c=n.xa,h=n.ya,d=o[0].trace,p=c.c2p(f),y=h.c2p(l),g,A=function(B){var j=Math.max(3,B.mrc||0);return Math.max(Math.abs(c.c2p(B.x)-p)-j,1-3/j)},b=function(B){var j=Math.max(3,B.mrc||0);return Math.max(Math.abs(h.c2p(B.y)-y)-j,1-3/j)},M=m.quadrature(A,b),_=!1,T,w,v=0;v<o.length;v++){T=o[v];for(var L=0;L<(T.pts||[]).length;L++){w=T.pts[L];var S=M(w);S<=n.distance&&(n.distance=S,_=[v,L])}}if(!_)return!1;T=o[_[0]],w=T.pts[_[1]];var k=c.c2p(w.x,!0),P=h.c2p(w.y,!0),O=w.mrc||1;g=s.extendFlat({},n,{index:w.i,color:(d.marker||{}).color,name:d.name,x0:k-O,x1:k+O,y0:P-O,y1:P+O,spikeDistance:n.distance,hovertemplate:d.hovertemplate});var F=T.orig_p,I=F!==void 0?F:T.pos,D;d.orientation==="h"?(D=h,g.xLabelVal=w.x,g.yLabelVal=I):(D=c,g.xLabelVal=I,g.yLabelVal=w.y);var U=D._id.charAt(0);return g[U+"Spike"]=D.c2p(T.pos,!0),t(w,d,g),g}z.exports={hoverPoints:i,hoverOnBoxes:a,hoverOnPoints:r}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(e,z,N){z.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults").supplyLayoutDefaults,calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"box",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(e,z,N){z.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("./layout_attributes");function x(i,a,r,n,f){for(var l=f+"Layout",o=!1,c=0;c<r.length;c++){var h=r[c];if(u.traceIs(h,l)){o=!0;break}}!o||(n(f+"mode"),n(f+"gap"),n(f+"groupgap"))}function t(i,a,r){function n(f,l){return s.coerce(i,a,m,f,l)}x(i,a,r,n,"box")}z.exports={supplyLayoutDefaults:t,_supply:x}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=5,t=.01;function i(f,l,o,c){var h=l.xaxis,d=l.yaxis;s.makeTraceGroups(c,o,"trace boxes").each(function(p){var y=u.select(this),g=p[0],A=g.t,b=g.trace;if(A.wdPos=A.bdPos*b.whiskerwidth,b.visible!==!0||A.empty){y.remove();return}var M,_;b.orientation==="h"?(M=d,_=h):(M=h,_=d),a(y,{pos:M,val:_},b,A),r(y,{x:h,y:d},b,A),n(y,{pos:M,val:_},b,A)})}function a(f,l,o,c){var h=o.orientation==="h",d=l.val,p=l.pos,y=!!p.rangebreaks,g=c.bPos,A=c.wdPos||0,b=c.bPosPxOffset||0,M=o.whiskerwidth||0,_=o.notched||!1,T=_?1-2*o.notchwidth:1,w,v;Array.isArray(c.bdPos)?(w=c.bdPos[0],v=c.bdPos[1]):(w=c.bdPos,v=c.bdPos);var L=f.selectAll("path.box").data(o.type!=="violin"||o.box.visible?s.identity:[]);L.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),L.exit().remove(),L.each(function(S){if(S.empty)return"M0,0Z";var k=p.c2l(S.pos+g,!0),P=p.l2p(k-w)+b,O=p.l2p(k+v)+b,F=y?(P+O)/2:p.l2p(k)+b,I=o.whiskerwidth,D=y?P*I+(1-I)*F:p.l2p(k-A)+b,U=y?O*I+(1-I)*F:p.l2p(k+A)+b,B=p.l2p(k-w*T)+b,j=p.l2p(k+v*T)+b,Z=d.c2p(S.q1,!0),ee=d.c2p(S.q3,!0),q=s.constrain(d.c2p(S.med,!0),Math.min(Z,ee)+1,Math.max(Z,ee)-1),W=S.lf===void 0||o.boxpoints===!1,J=d.c2p(W?S.min:S.lf,!0),le=d.c2p(W?S.max:S.uf,!0),fe=d.c2p(S.ln,!0),se=d.c2p(S.un,!0);h?u.select(this).attr("d","M"+q+","+B+"V"+j+"M"+Z+","+P+"V"+O+(_?"H"+fe+"L"+q+","+j+"L"+se+","+O:"")+"H"+ee+"V"+P+(_?"H"+se+"L"+q+","+B+"L"+fe+","+P:"")+"ZM"+Z+","+F+"H"+J+"M"+ee+","+F+"H"+le+(M===0?"":"M"+J+","+D+"V"+U+"M"+le+","+D+"V"+U)):u.select(this).attr("d","M"+B+","+q+"H"+j+"M"+P+","+Z+"H"+O+(_?"V"+fe+"L"+j+","+q+"L"+O+","+se:"")+"V"+ee+"H"+P+(_?"V"+se+"L"+B+","+q+"L"+P+","+fe:"")+"ZM"+F+","+Z+"V"+J+"M"+F+","+ee+"V"+le+(M===0?"":"M"+D+","+J+"H"+U+"M"+D+","+le+"H"+U))})}function r(f,l,o,c){var h=l.x,d=l.y,p=c.bdPos,y=c.bPos,g=o.boxpoints||o.points;s.seedPseudoRandom();var A=function(_){return _.forEach(function(T){T.t=c,T.trace=o}),_},b=f.selectAll("g.points").data(g?A:[]);b.enter().append("g").attr("class","points"),b.exit().remove();var M=b.selectAll("path").data(function(_){var T,w=_.pts2,v=Math.max((_.max-_.min)/10,_.q3-_.q1),L=v*1e-9,S=v*t,k=[],P=0,O;if(o.jitter){if(v===0)for(P=1,k=new Array(w.length),T=0;T<w.length;T++)k[T]=1;else for(T=0;T<w.length;T++){var F=Math.max(0,T-x),I=w[F].v,D=Math.min(w.length-1,T+x),U=w[D].v;g!=="all"&&(w[T].v<_.lf?U=Math.min(U,_.lf):I=Math.max(I,_.uf));var B=Math.sqrt(S*(D-F)/(U-I+L))||0;B=s.constrain(Math.abs(B),0,1),k.push(B),P=Math.max(B,P)}O=o.jitter*2/(P||1)}for(T=0;T<w.length;T++){var j=w[T],Z=j.v,ee=o.jitter?O*k[T]*(s.pseudoRandom()-.5):0,q=_.pos+y+p*(o.pointpos+ee);o.orientation==="h"?(j.y=q,j.x=Z):(j.x=q,j.y=Z),g==="suspectedoutliers"&&Z<_.uo&&Z>_.lo&&(j.so=!0)}return w});M.enter().append("path").classed("point",!0),M.exit().remove(),M.call(m.translatePoints,h,d)}function n(f,l,o,c){var h=l.val,d=l.pos,p=!!d.rangebreaks,y=c.bPos,g=c.bPosPxOffset||0,A=o.boxmean||(o.meanline||{}).visible,b,M;Array.isArray(c.bdPos)?(b=c.bdPos[0],M=c.bdPos[1]):(b=c.bdPos,M=c.bdPos);var _=f.selectAll("path.mean").data(o.type==="box"&&o.boxmean||o.type==="violin"&&o.box.visible&&o.meanline.visible?s.identity:[]);_.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),_.exit().remove(),_.each(function(T){var w=d.c2l(T.pos+y,!0),v=d.l2p(w-b)+g,L=d.l2p(w+M)+g,S=p?(v+L)/2:d.l2p(w)+g,k=h.c2p(T.mean,!0),P=h.c2p(T.mean-T.sd,!0),O=h.c2p(T.mean+T.sd,!0);o.orientation==="h"?u.select(this).attr("d","M"+k+","+v+"V"+L+(A==="sd"?"m0,0L"+P+","+S+"L"+k+","+v+"L"+O+","+S+"Z":"")):u.select(this).attr("d","M"+v+","+k+"H"+L+(A==="sd"?"m0,0L"+S+","+P+"L"+v+","+k+"L"+S+","+O+"Z":""))})}z.exports={plot:i,plotBoxAndWhiskers:a,plotPoints:r,plotBoxMean:n}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(e,z,N){z.exports=function(s,m){var x=s.cd,t=s.xaxis,i=s.yaxis,a=[],r,n;if(m===!1)for(r=0;r<x.length;r++)for(n=0;n<(x[r].pts||[]).length;n++)x[r].pts[n].selected=0;else for(r=0;r<x.length;r++)for(n=0;n<(x[r].pts||[]).length;n++){var f=x[r].pts[n],l=t.c2p(f.x),o=i.c2p(f.y);m.contains([l,o],null,f.i,s)?(a.push({pointNumber:f.i,x:t.c2d(f.x),y:i.c2d(f.y)}),f.selected=1):f.selected=0}return a}},{}],684:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../components/drawing");function x(i,a,r){var n=r||u.select(i).selectAll("g.trace.boxes");n.style("opacity",function(f){return f[0].trace.opacity}),n.each(function(f){var l=u.select(this),o=f[0].trace,c=o.line.width;function h(y,g,A,b){y.style("stroke-width",g+"px").call(s.stroke,A).call(s.fill,b)}var d=l.selectAll("path.box");if(o.type==="candlestick")d.each(function(y){if(!y.empty){var g=u.select(this),A=o[y.dir];h(g,A.line.width,A.line.color,A.fillcolor),g.style("opacity",o.selectedpoints&&!y.selected?.3:1)}});else{h(d,c,o.line.color,o.fillcolor),l.selectAll("path.mean").style({"stroke-width":c,"stroke-dasharray":2*c+"px,"+c+"px"}).call(s.stroke,o.line.color);var p=l.selectAll("path.point");m.pointStyle(p,o,i)}})}function t(i,a,r){var n=a[0].trace,f=r.selectAll("path.point");n.selectedpoints?m.selectedPointStyle(f,n):m.pointStyle(f,n,i)}z.exports={style:x,styleOnSelect:t}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(e,z,N){var u=e("../../lib").extendFlat,s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../ohlc/attributes"),x=e("../box/attributes");function t(i){return{line:{color:u({},x.line.color,{dflt:i}),width:x.line.width,editType:"style"},fillcolor:x.fillcolor,editType:"style"}}z.exports={xperiod:m.xperiod,xperiod0:m.xperiod0,xperiodalignment:m.xperiodalignment,xhoverformat:s("x"),yhoverformat:s("y"),x:m.x,open:m.open,high:m.high,low:m.low,close:m.close,line:{width:u({},x.line.width,{}),editType:"style"},increasing:t(m.increasing.line.color.dflt),decreasing:t(m.decreasing.line.color.dflt),text:m.text,hovertext:m.hovertext,whiskerwidth:u({},x.whiskerwidth,{dflt:0}),hoverlabel:m.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../../plots/cartesian/align_period"),x=e("../ohlc/calc").calcCommon;z.exports=function(i,a){var r=i._fullLayout,n=s.getFromId(i,a.xaxis),f=s.getFromId(i,a.yaxis),l=n.makeCalcdata(a,"x"),o=m(a,n,"x",l).vals,c=x(i,a,l,o,f,t);return c.length?(u.extendFlat(c[0].t,{num:r._numBoxes,dPos:u.distinctVals(o).minDiff/2,posLetter:"x",valLetter:"y"}),r._numBoxes++,c):[{t:{empty:!0}}]};function t(i,a,r,n){return{min:r,q1:Math.min(i,n),med:n,q3:Math.max(i,n),max:a}}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../ohlc/ohlc_defaults"),x=e("../scatter/period_defaults"),t=e("./attributes");z.exports=function(r,n,f,l){function o(h,d){return u.coerce(r,n,t,h,d)}var c=m(r,n,o,l);if(!c){n.visible=!1;return}x(r,n,l,o,{x:!0}),o("xhoverformat"),o("yhoverformat"),o("line.width"),i(r,n,o,"increasing"),i(r,n,o,"decreasing"),o("text"),o("hovertext"),o("whiskerwidth"),l._requestRangeslider[n.xaxis]=!0};function i(a,r,n,f){var l=n(f+".line.color");n(f+".line.width",r.line.width),n(f+".fillcolor",s.addOpacity(l,.5))}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(e,z,N){z.exports={moduleType:"trace",name:"candlestick",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:e("./attributes"),layoutAttributes:e("../box/layout_attributes"),supplyLayoutDefaults:e("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:e("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("../box/plot").plot,layerName:"boxlayer",style:e("../box/style").style,hoverPoints:e("../ohlc/hover").hoverPoints,selectPoints:e("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(e,z,N){var u=e("./axis_defaults"),s=e("../../plot_api/plot_template");z.exports=function(t,i,a,r,n){var f=r("a");f||(r("da"),r("a0"));var l=r("b");l||(r("db"),r("b0")),m(t,i,a,n)};function m(x,t,i,a){var r=["aaxis","baxis"];r.forEach(function(n){var f=n.charAt(0),l=x[n]||{},o=s.newContainer(t,n),c={tickfont:"x",id:f+"axis",letter:f,font:t.font,name:n,data:x[f],calendar:t.calendar,dfltColor:a,bgColor:i.paper_bgcolor,autotypenumbersDflt:i.autotypenumbers,fullLayout:i};u(l,o,c),o._categories=o._categories||[],!x[n]&&l.type!=="-"&&(x[n]={type:l.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(e,z,N){var u=e("../../lib").isArrayOrTypedArray;z.exports=function(m){return s(m,0)};function s(m,x){if(!u(m)||x>=10)return null;for(var t=1/0,i=-1/0,a=m.length,r=0;r<a;r++){var n=m[r];if(u(n)){var f=s(n,x+1);f&&(t=Math.min(f[0],t),i=Math.max(f[1],i))}else t=Math.min(n,t),i=Math.max(n,i)}return[t,i]}},{"../../lib":503}],691:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("./axis_attributes"),m=e("../../components/color/attributes"),x=u({editType:"calc"});x.family.dflt='"Open Sans", verdana, arial, sans-serif',x.size.dflt=12,x.color.dflt=m.defaultLine,z.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:s,baxis:s,font:x,color:{valType:"color",dflt:m.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(e,z,N){var u=e("../../lib").isArrayOrTypedArray;z.exports=function(s,m,x,t){var i,a,r,n,f,l,o,c,h,d,p,y,g,A=u(x)?"a":"b",b=A==="a"?s.aaxis:s.baxis,M=b.smoothing,_=A==="a"?s.a2i:s.b2j,T=A==="a"?x:t,w=A==="a"?t:x,v=A==="a"?m.a.length:m.b.length,L=A==="a"?m.b.length:m.a.length,S=Math.floor(A==="a"?s.b2j(w):s.a2i(w)),k=A==="a"?function(W){return s.evalxy([],W,S)}:function(W){return s.evalxy([],S,W)};M&&(r=Math.max(0,Math.min(L-2,S)),n=S-r,a=A==="a"?function(W,J){return s.dxydi([],W,r,J,n)}:function(W,J){return s.dxydj([],r,W,n,J)});var P=_(T[0]),O=_(T[1]),F=P<O?1:-1,I=(O-P)*1e-8,D=F>0?Math.floor:Math.ceil,U=F>0?Math.ceil:Math.floor,B=F>0?Math.min:Math.max,j=F>0?Math.max:Math.min,Z=D(P+I),ee=U(O-I);o=k(P);var q=[[o]];for(i=Z;i*F<ee*F;i+=F)f=[],p=j(P,i),y=B(O,i+F),g=y-p,l=Math.max(0,Math.min(v-2,Math.floor(.5*(p+y)))),c=k(y),M&&(h=a(l,p-l),d=a(l,y-l),f.push([o[0]+h[0]/3*g,o[1]+h[1]/3*g]),f.push([c[0]-d[0]/3*g,c[1]-d[1]/3*g])),f.push(c),q.push(f),o=c;return q}},{"../../lib":503}],693:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("../../components/color/attributes"),m=e("../../plots/cartesian/layout_attributes"),x=e("../../plots/cartesian/axis_format_attributes").descriptionWithDates,t=e("../../plot_api/edit_types").overrideAll;z.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:u({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:m.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:u({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:x("tick label")},tickformatstops:t(m.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:s.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:s.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:u({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(e,z,N){var u=e("./attributes"),s=e("../../components/color").addOpacity,m=e("../../registry"),x=e("../../lib"),t=e("../../plots/cartesian/tick_value_defaults"),i=e("../../plots/cartesian/tick_label_defaults"),a=e("../../plots/cartesian/prefix_suffix_defaults"),r=e("../../plots/cartesian/category_order_defaults"),n=e("../../plots/cartesian/set_convert"),f=e("../../plots/cartesian/axis_autotype");z.exports=function(c,h,d){var p=d.letter,y=d.font||{},g=u[p+"axis"];function A(j,Z){return x.coerce(c,h,g,j,Z)}function b(j,Z){return x.coerce2(c,h,g,j,Z)}d.name&&(h._name=d.name,h._id=d.name),A("autotypenumbers",d.autotypenumbersDflt);var M=A("type");if(M==="-"&&(d.data&&l(h,d.data),h.type==="-"?h.type="linear":M=c.type=h.type),A("smoothing"),A("cheatertype"),A("showticklabels"),A("labelprefix",p+" = "),A("labelsuffix"),A("showtickprefix"),A("showticksuffix"),A("separatethousands"),A("tickformat"),A("exponentformat"),A("minexponent"),A("showexponent"),A("categoryorder"),A("tickmode"),A("tickvals"),A("ticktext"),A("tick0"),A("dtick"),h.tickmode==="array"&&(A("arraytick0"),A("arraydtick")),A("labelpadding"),h._hovertitle=p,M==="date"){var _=m.getComponentMethod("calendars","handleDefaults");_(c,h,"calendar",d.calendar)}n(h,d.fullLayout),h.c2p=x.identity;var T=A("color",d.dfltColor),w=T===c.color?T:y.color,v=A("title.text");v&&(x.coerceFont(A,"title.font",{family:y.family,size:x.bigFont(y.size),color:w}),A("title.offset")),A("tickangle");var L=A("autorange",!h.isValidRange(c.range));L&&A("rangemode"),A("range"),h.cleanRange(),A("fixedrange"),t(c,h,A,M),a(c,h,A,M,d),i(c,h,A,M,d),r(c,h,A,{data:d.data,dataAttr:p});var S=b("gridcolor",s(T,.3)),k=b("gridwidth"),P=A("showgrid");P||(delete h.gridcolor,delete h.gridwidth);var O=b("startlinecolor",T),F=b("startlinewidth",k),I=A("startline",h.showgrid||!!O||!!F);I||(delete h.startlinecolor,delete h.startlinewidth);var D=b("endlinecolor",T),U=b("endlinewidth",k),B=A("endline",h.showgrid||!!D||!!U);return B||(delete h.endlinecolor,delete h.endlinewidth),P?(A("minorgridcount"),A("minorgridwidth",k),A("minorgridcolor",s(S,.06)),h.minorgridcount||(delete h.minorgridwidth,delete h.minorgridcolor)):(delete h.gridcolor,delete h.gridWidth),h.showticklabels==="none"&&(delete h.tickfont,delete h.tickangle,delete h.showexponent,delete h.exponentformat,delete h.minexponent,delete h.tickformat,delete h.showticksuffix,delete h.showtickprefix),h.showticksuffix||delete h.ticksuffix,h.showtickprefix||delete h.tickprefix,A("tickmode"),h};function l(o,c){if(o.type==="-"){var h=o._id,d=h.charAt(0),p=d+"calendar",y=o[p];o.type=f(c,y,{autotypenumbers:o.autotypenumbers})}}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../lib").isArray1D,m=e("./cheater_basis"),x=e("./array_minmax"),t=e("./calc_gridlines"),i=e("./calc_labels"),a=e("./calc_clippath"),r=e("../heatmap/clean_2d_array"),n=e("./smooth_fill_2d_array"),f=e("../heatmap/convert_column_xyz"),l=e("./set_convert");z.exports=function(c,h){var d=u.getFromId(c,h.xaxis),p=u.getFromId(c,h.yaxis),y=h.aaxis,g=h.baxis,A=h.x,b=h.y,M=[];A&&s(A)&&M.push("x"),b&&s(b)&&M.push("y"),M.length&&f(h,y,g,"a","b",M);var _=h._a=h._a||h.a,T=h._b=h._b||h.b;A=h._x||h.x,b=h._y||h.y;var w={};if(h._cheater){var v=y.cheatertype==="index"?_.length:_,L=g.cheatertype==="index"?T.length:T;A=m(v,L,h.cheaterslope)}h._x=A=r(A),h._y=b=r(b),n(A,_,T),n(b,_,T),l(h),h.setScale();var S=x(A),k=x(b),P=.5*(S[1]-S[0]),O=.5*(S[1]+S[0]),F=.5*(k[1]-k[0]),I=.5*(k[1]+k[0]),D=1.3;return S=[O-P*D,O+P*D],k=[I-F*D,I+F*D],h._extremes[d._id]=u.findExtremes(d,S,{padded:!0}),h._extremes[p._id]=u.findExtremes(p,k,{padded:!0}),t(h,"a","b"),t(h,"b","a"),i(h,y),i(h,g),w.clipsegments=a(h._xctrl,h._yctrl,y,g),w.x=A,w.y=b,w.a=_,w.b=T,[w]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(e,z,N){z.exports=function(s,m,x,t){var i,a,r,n=[],f=!!x.smoothing,l=!!t.smoothing,o=s[0].length-1,c=s.length-1;for(i=0,a=[],r=[];i<=o;i++)a[i]=s[0][i],r[i]=m[0][i];for(n.push({x:a,y:r,bicubic:f}),i=0,a=[],r=[];i<=c;i++)a[i]=s[i][o],r[i]=m[i][o];for(n.push({x:a,y:r,bicubic:l}),i=o,a=[],r=[];i>=0;i--)a[o-i]=s[c][i],r[o-i]=m[c][i];for(n.push({x:a,y:r,bicubic:f}),i=c,a=[],r=[];i>=0;i--)a[c-i]=s[i][0],r[c-i]=m[i][0];return n.push({x:a,y:r,bicubic:l}),n}},{}],697:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../lib/extend").extendFlat;z.exports=function(x,t,i){var a,r,n,f,l,o,c,h,d,p,y,g,A,b,M=x["_"+t],_=x[t+"axis"],T=_._gridlines=[],w=_._minorgridlines=[],v=_._boundarylines=[],L=x["_"+i],S=x[i+"axis"];_.tickmode==="array"&&(_.tickvals=M.slice());var k=x._xctrl,P=x._yctrl,O=k[0].length,F=k.length,I=x._a.length,D=x._b.length;u.prepTicks(_),_.tickmode==="array"&&delete _.tickvals;var U=_.smoothing?3:1;function B(Z){var ee,q,W,J,le,fe,se,H,Y,ne,te,K,$=[],ae=[],ie={};if(t==="b")for(q=x.b2j(Z),W=Math.floor(Math.max(0,Math.min(D-2,q))),J=q-W,ie.length=D,ie.crossLength=I,ie.xy=function(oe){return x.evalxy([],oe,q)},ie.dxy=function(oe,ue){return x.dxydi([],oe,W,ue,J)},ee=0;ee<I;ee++)fe=Math.min(I-2,ee),se=ee-fe,H=x.evalxy([],ee,q),S.smoothing&&ee>0&&(Y=x.dxydi([],ee-1,W,0,J),$.push(le[0]+Y[0]/3),ae.push(le[1]+Y[1]/3),ne=x.dxydi([],ee-1,W,1,J),$.push(H[0]-ne[0]/3),ae.push(H[1]-ne[1]/3)),$.push(H[0]),ae.push(H[1]),le=H;else for(ee=x.a2i(Z),fe=Math.floor(Math.max(0,Math.min(I-2,ee))),se=ee-fe,ie.length=I,ie.crossLength=D,ie.xy=function(oe){return x.evalxy([],ee,oe)},ie.dxy=function(oe,ue){return x.dxydj([],fe,oe,se,ue)},q=0;q<D;q++)W=Math.min(D-2,q),J=q-W,H=x.evalxy([],ee,q),S.smoothing&&q>0&&(te=x.dxydj([],fe,q-1,se,0),$.push(le[0]+te[0]/3),ae.push(le[1]+te[1]/3),K=x.dxydj([],fe,q-1,se,1),$.push(H[0]-K[0]/3),ae.push(H[1]-K[1]/3)),$.push(H[0]),ae.push(H[1]),le=H;return ie.axisLetter=t,ie.axis=_,ie.crossAxis=S,ie.value=Z,ie.constvar=i,ie.index=h,ie.x=$,ie.y=ae,ie.smoothing=S.smoothing,ie}function j(Z){var ee,q,W,J,le,fe=[],se=[],H={};if(H.length=M.length,H.crossLength=L.length,t==="b")for(W=Math.max(0,Math.min(D-2,Z)),le=Math.min(1,Math.max(0,Z-W)),H.xy=function(Y){return x.evalxy([],Y,Z)},H.dxy=function(Y,ne){return x.dxydi([],Y,W,ne,le)},ee=0;ee<O;ee++)fe[ee]=k[Z*U][ee],se[ee]=P[Z*U][ee];else for(q=Math.max(0,Math.min(I-2,Z)),J=Math.min(1,Math.max(0,Z-q)),H.xy=function(Y){return x.evalxy([],Z,Y)},H.dxy=function(Y,ne){return x.dxydj([],q,Y,J,ne)},ee=0;ee<F;ee++)fe[ee]=k[ee][Z*U],se[ee]=P[ee][Z*U];return H.axisLetter=t,H.axis=_,H.crossAxis=S,H.value=M[Z],H.constvar=i,H.index=Z,H.x=fe,H.y=se,H.smoothing=S.smoothing,H}if(_.tickmode==="array"){for(f=5e-15,l=[Math.floor((M.length-1-_.arraytick0)/_.arraydtick*(1+f)),Math.ceil(-_.arraytick0/_.arraydtick/(1+f))].sort(function(Z,ee){return Z-ee}),o=l[0]-1,c=l[1]+1,h=o;h<c;h++)r=_.arraytick0+_.arraydtick*h,!(r<0||r>M.length-1)&&T.push(s(j(r),{color:_.gridcolor,width:_.gridwidth}));for(h=o;h<c;h++)if(n=_.arraytick0+_.arraydtick*h,y=Math.min(n+_.arraydtick,M.length-1),!(n<0||n>M.length-1)&&!(y<0||y>M.length-1))for(g=M[n],A=M[y],a=0;a<_.minorgridcount;a++)b=y-n,!(b<=0)&&(p=g+(A-g)*(a+1)/(_.minorgridcount+1)*(_.arraydtick/b),!(p<M[0]||p>M[M.length-1])&&w.push(s(B(p),{color:_.minorgridcolor,width:_.minorgridwidth})));_.startline&&v.push(s(j(0),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&v.push(s(j(M.length-1),{color:_.endlinecolor,width:_.endlinewidth}))}else{for(f=5e-15,l=[Math.floor((M[M.length-1]-_.tick0)/_.dtick*(1+f)),Math.ceil((M[0]-_.tick0)/_.dtick/(1+f))].sort(function(Z,ee){return Z-ee}),o=l[0],c=l[1],h=o;h<=c;h++)d=_.tick0+_.dtick*h,T.push(s(B(d),{color:_.gridcolor,width:_.gridwidth}));for(h=o-1;h<c+1;h++)for(d=_.tick0+_.dtick*h,a=0;a<_.minorgridcount;a++)p=d+_.dtick*(a+1)/(_.minorgridcount+1),!(p<M[0]||p>M[M.length-1])&&w.push(s(B(p),{color:_.minorgridcolor,width:_.minorgridwidth}));_.startline&&v.push(s(B(M[0]),{color:_.startlinecolor,width:_.startlinewidth})),_.endline&&v.push(s(B(M[M.length-1]),{color:_.endlinecolor,width:_.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../lib/extend").extendFlat;z.exports=function(x,t){var i,a,r,n,f,l=t._labels=[],o=t._gridlines;for(i=0;i<o.length;i++)f=o[i],["start","both"].indexOf(t.showticklabels)!==-1&&(a=u.tickText(t,f.value),s(a,{prefix:r,suffix:n,endAnchor:!0,xy:f.xy(0),dxy:f.dxy(0,0),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:i===0,isLast:i===o.length-1}),l.push(a)),["end","both"].indexOf(t.showticklabels)!==-1&&(a=u.tickText(t,f.value),s(a,{endAnchor:!1,xy:f.xy(f.crossLength-1),dxy:f.dxy(f.crossLength-2,1),axis:f.axis,length:f.crossAxis.length,font:f.axis.tickfont,isFirst:i===0,isLast:i===o.length-1}),l.push(a))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(e,z,N){var u=.5;z.exports=function(m,x,t,i){var a=m[0]-x[0],r=m[1]-x[1],n=t[0]-x[0],f=t[1]-x[1],l=Math.pow(a*a+r*r,u/2),o=Math.pow(n*n+f*f,u/2),c=(o*o*a-l*l*n)*i,h=(o*o*r-l*l*f)*i,d=o*(l+o)*3,p=l*(l+o)*3;return[[x[0]+(d&&c/d),x[1]+(d&&h/d)],[x[0]-(p&&c/p),x[1]-(p&&h/p)]]}},{}],700:[function(e,z,N){var u=e("../../lib").isArrayOrTypedArray;z.exports=function(s,m,x){var t,i,a,r,n,f,l=[],o=u(s)?s.length:s,c=u(m)?m.length:m,h=u(s)?s:null,d=u(m)?m:null;h&&(a=(h.length-1)/(h[h.length-1]-h[0])/(o-1)),d&&(r=(d.length-1)/(d[d.length-1]-d[0])/(c-1));var p,y=1/0,g=-1/0;for(i=0;i<c;i++)for(l[i]=[],f=d?(d[i]-d[0])*r:i/(c-1),t=0;t<o;t++)n=h?(h[t]-h[0])*a:t/(o-1),p=n-f*x,y=Math.min(p,y),g=Math.max(p,g),l[i][t]=p;var A=1/(g-y),b=-y*A;for(i=0;i<c;i++)for(t=0;t<o;t++)l[i][t]=A*l[i][t]+b;return l}},{"../../lib":503}],701:[function(e,z,N){var u=e("./catmull_rom"),s=e("../../lib").ensureArray;function m(x,t,i){var a=-.5*i[0]+1.5*t[0],r=-.5*i[1]+1.5*t[1];return[(2*a+x[0])/3,(2*r+x[1])/3]}z.exports=function(t,i,a,r,n,f){var l,o,c,h,d,p,y,g,A,b,M=a[0].length,_=a.length,T=n?3*M-2:M,w=f?3*_-2:_;for(t=s(t,w),i=s(i,w),c=0;c<w;c++)t[c]=s(t[c],T),i[c]=s(i[c],T);for(o=0,h=0;o<_;o++,h+=f?3:1)for(d=t[h],p=i[h],y=a[o],g=r[o],l=0,c=0;l<M;l++,c+=n?3:1)d[c]=y[l],p[c]=g[l];if(n)for(o=0,h=0;o<_;o++,h+=f?3:1){for(l=1,c=3;l<M-1;l++,c+=3)A=u([a[o][l-1],r[o][l-1]],[a[o][l],r[o][l]],[a[o][l+1],r[o][l+1]],n),t[h][c-1]=A[0][0],i[h][c-1]=A[0][1],t[h][c+1]=A[1][0],i[h][c+1]=A[1][1];b=m([t[h][0],i[h][0]],[t[h][2],i[h][2]],[t[h][3],i[h][3]]),t[h][1]=b[0],i[h][1]=b[1],b=m([t[h][T-1],i[h][T-1]],[t[h][T-3],i[h][T-3]],[t[h][T-4],i[h][T-4]]),t[h][T-2]=b[0],i[h][T-2]=b[1]}if(f)for(c=0;c<T;c++){for(h=3;h<w-3;h+=3)A=u([t[h-3][c],i[h-3][c]],[t[h][c],i[h][c]],[t[h+3][c],i[h+3][c]],f),t[h-1][c]=A[0][0],i[h-1][c]=A[0][1],t[h+1][c]=A[1][0],i[h+1][c]=A[1][1];b=m([t[0][c],i[0][c]],[t[2][c],i[2][c]],[t[3][c],i[3][c]]),t[1][c]=b[0],i[1][c]=b[1],b=m([t[w-1][c],i[w-1][c]],[t[w-3][c],i[w-3][c]],[t[w-4][c],i[w-4][c]]),t[w-2][c]=b[0],i[w-2][c]=b[1]}if(n&&f)for(h=1;h<w;h+=(h+1)%3==0?2:1){for(c=3;c<T-3;c+=3)A=u([t[h][c-3],i[h][c-3]],[t[h][c],i[h][c]],[t[h][c+3],i[h][c+3]],n),t[h][c-1]=.5*(t[h][c-1]+A[0][0]),i[h][c-1]=.5*(i[h][c-1]+A[0][1]),t[h][c+1]=.5*(t[h][c+1]+A[1][0]),i[h][c+1]=.5*(i[h][c+1]+A[1][1]);b=m([t[h][0],i[h][0]],[t[h][2],i[h][2]],[t[h][3],i[h][3]]),t[h][1]=.5*(t[h][1]+b[0]),i[h][1]=.5*(i[h][1]+b[1]),b=m([t[h][T-1],i[h][T-1]],[t[h][T-3],i[h][T-3]],[t[h][T-4],i[h][T-4]]),t[h][T-2]=.5*(t[h][T-2]+b[0]),i[h][T-2]=.5*(i[h][T-2]+b[1])}return[t,i]}},{"../../lib":503,"./catmull_rom":699}],702:[function(e,z,N){z.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(e,z,N){z.exports=function(u,s,m){return s&&m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,h;t*=3,i*=3;var d=a*a,p=1-a,y=p*p,g=p*a*2,A=-3*y,b=3*(y-g),M=3*(g-d),_=3*d,T=r*r,w=T*r,v=1-r,L=v*v,S=L*v;for(h=0;h<u.length;h++)c=u[h],n=A*c[i][t]+b*c[i][t+1]+M*c[i][t+2]+_*c[i][t+3],f=A*c[i+1][t]+b*c[i+1][t+1]+M*c[i+1][t+2]+_*c[i+1][t+3],l=A*c[i+2][t]+b*c[i+2][t+1]+M*c[i+2][t+2]+_*c[i+2][t+3],o=A*c[i+3][t]+b*c[i+3][t+1]+M*c[i+3][t+2]+_*c[i+3][t+3],x[h]=S*n+3*(L*r*f+v*T*l)+w*o;return x}:s?function(x,t,i,a,r){x||(x=[]);var n,f,l,o;t*=3;var c=a*a,h=1-a,d=h*h,p=h*a*2,y=-3*d,g=3*(d-p),A=3*(p-c),b=3*c,M=1-r;for(l=0;l<u.length;l++)o=u[l],n=y*o[i][t]+g*o[i][t+1]+A*o[i][t+2]+b*o[i][t+3],f=y*o[i+1][t]+g*o[i+1][t+1]+A*o[i+1][t+2]+b*o[i+1][t+3],x[l]=M*n+r*f;return x}:m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,h;i*=3;var d=r*r,p=d*r,y=1-r,g=y*y,A=g*y;for(c=0;c<u.length;c++)h=u[c],n=h[i][t+1]-h[i][t],f=h[i+1][t+1]-h[i+1][t],l=h[i+2][t+1]-h[i+2][t],o=h[i+3][t+1]-h[i+3][t],x[c]=A*n+3*(g*r*f+y*d*l)+p*o;return x}:function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c=1-r;for(l=0;l<u.length;l++)o=u[l],n=o[i][t+1]-o[i][t],f=o[i+1][t+1]-o[i+1][t],x[l]=c*n+r*f;return x}}},{}],704:[function(e,z,N){z.exports=function(u,s,m){return s&&m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,h;t*=3,i*=3;var d=a*a,p=d*a,y=1-a,g=y*y,A=g*y,b=r*r,M=1-r,_=M*M,T=M*r*2,w=-3*_,v=3*(_-T),L=3*(T-b),S=3*b;for(h=0;h<u.length;h++)c=u[h],n=w*c[i][t]+v*c[i+1][t]+L*c[i+2][t]+S*c[i+3][t],f=w*c[i][t+1]+v*c[i+1][t+1]+L*c[i+2][t+1]+S*c[i+3][t+1],l=w*c[i][t+2]+v*c[i+1][t+2]+L*c[i+2][t+2]+S*c[i+3][t+2],o=w*c[i][t+3]+v*c[i+1][t+3]+L*c[i+2][t+3]+S*c[i+3][t+3],x[h]=A*n+3*(g*a*f+y*d*l)+p*o;return x}:s?function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c,h;t*=3;var d=r*r,p=d*r,y=1-r,g=y*y,A=g*y;for(c=0;c<u.length;c++)h=u[c],n=h[i+1][t]-h[i][t],f=h[i+1][t+1]-h[i][t+1],l=h[i+1][t+2]-h[i][t+2],o=h[i+1][t+3]-h[i][t+3],x[c]=A*n+3*(g*r*f+y*d*l)+p*o;return x}:m?function(x,t,i,a,r){x||(x=[]);var n,f,l,o;i*=3;var c=1-a,h=r*r,d=1-r,p=d*d,y=d*r*2,g=-3*p,A=3*(p-y),b=3*(y-h),M=3*h;for(l=0;l<u.length;l++)o=u[l],n=g*o[i][t]+A*o[i+1][t]+b*o[i+2][t]+M*o[i+3][t],f=g*o[i][t+1]+A*o[i+1][t+1]+b*o[i+2][t+1]+M*o[i+3][t+1],x[l]=c*n+a*f;return x}:function(x,t,i,a,r){x||(x=[]);var n,f,l,o,c=1-a;for(l=0;l<u.length;l++)o=u[l],n=o[i+1][t]-o[i][t],f=o[i+1][t+1]-o[i][t+1],x[l]=c*n+a*f;return x}}},{}],705:[function(e,z,N){z.exports=function(u,s,m,x,t){var i=s-2,a=m-2;return x&&t?function(r,n,f){r||(r=[]);var l,o,c,h,d,p,y=Math.max(0,Math.min(Math.floor(n),i)),g=Math.max(0,Math.min(Math.floor(f),a)),A=Math.max(0,Math.min(1,n-y)),b=Math.max(0,Math.min(1,f-g));y*=3,g*=3;var M=A*A,_=M*A,T=1-A,w=T*T,v=w*T,L=b*b,S=L*b,k=1-b,P=k*k,O=P*k;for(p=0;p<u.length;p++)d=u[p],l=v*d[g][y]+3*(w*A*d[g][y+1]+T*M*d[g][y+2])+_*d[g][y+3],o=v*d[g+1][y]+3*(w*A*d[g+1][y+1]+T*M*d[g+1][y+2])+_*d[g+1][y+3],c=v*d[g+2][y]+3*(w*A*d[g+2][y+1]+T*M*d[g+2][y+2])+_*d[g+2][y+3],h=v*d[g+3][y]+3*(w*A*d[g+3][y+1]+T*M*d[g+3][y+2])+_*d[g+3][y+3],r[p]=O*l+3*(P*b*o+k*L*c)+S*h;return r}:x?function(r,n,f){r||(r=[]);var l=Math.max(0,Math.min(Math.floor(n),i)),o=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,n-l)),h=Math.max(0,Math.min(1,f-o)),d,p,y,g,A,b;l*=3;var M=c*c,_=M*c,T=1-c,w=T*T,v=w*T,L=1-h;for(A=0;A<u.length;A++)b=u[A],d=L*b[o][l]+h*b[o+1][l],p=L*b[o][l+1]+h*b[o+1][l+1],y=L*b[o][l+2]+h*b[o+1][l+1],g=L*b[o][l+3]+h*b[o+1][l+1],r[A]=v*d+3*(w*c*p+T*M*y)+_*g;return r}:t?function(r,n,f){r||(r=[]);var l=Math.max(0,Math.min(Math.floor(n),i)),o=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,n-l)),h=Math.max(0,Math.min(1,f-o)),d,p,y,g,A,b;o*=3;var M=h*h,_=M*h,T=1-h,w=T*T,v=w*T,L=1-c;for(A=0;A<u.length;A++)b=u[A],d=L*b[o][l]+c*b[o][l+1],p=L*b[o+1][l]+c*b[o+1][l+1],y=L*b[o+2][l]+c*b[o+2][l+1],g=L*b[o+3][l]+c*b[o+3][l+1],r[A]=v*d+3*(w*h*p+T*M*y)+_*g;return r}:function(r,n,f){r||(r=[]);var l=Math.max(0,Math.min(Math.floor(n),i)),o=Math.max(0,Math.min(Math.floor(f),a)),c=Math.max(0,Math.min(1,n-l)),h=Math.max(0,Math.min(1,f-o)),d,p,y,g,A=1-h,b=1-c;for(y=0;y<u.length;y++)g=u[y],d=b*g[o][l]+c*g[o][l+1],p=b*g[o+1][l]+c*g[o+1][l+1],r[y]=A*d+h*p;return r}}},{}],706:[function(e,z,N){var u=e("../../lib"),s=e("./xy_defaults"),m=e("./ab_defaults"),x=e("./attributes"),t=e("../../components/color/attributes");z.exports=function(a,r,n,f){function l(h,d){return u.coerce(a,r,x,h,d)}r._clipPathId="clip"+r.uid+"carpet";var o=l("color",t.defaultLine);if(u.coerceFont(l,"font"),l("carpet"),m(a,r,f,l,o),!r.a||!r.b){r.visible=!1;return}r.a.length<3&&(r.aaxis.smoothing=0),r.b.length<3&&(r.baxis.smoothing=0);var c=s(a,r,l);c||(r.visible=!1),r._cheater&&l("cheaterslope")}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),plot:e("./plot"),calc:e("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(e,z,N){z.exports=function(u,s){for(var m=u._fullData.length,x,t=0;t<m;t++){var i=u._fullData[t];if(i.index!==s.index&&i.type==="carpet"&&(x||(x=i),i.carpet===s.carpet))return i}return x}},{}],709:[function(e,z,N){z.exports=function(s,m,x){if(s.length===0)return"";var t,i=[],a=x?3:1;for(t=0;t<s.length;t+=a)i.push(s[t]+","+m[t]),x&&t<s.length-a&&(i.push("C"),i.push([s[t+1]+","+m[t+1],s[t+2]+","+m[t+2]+" "].join(" ")));return i.join(x?"":"L")}},{}],710:[function(e,z,N){var u=e("../../lib").isArrayOrTypedArray;z.exports=function(m,x,t){var i;for(u(m)?m.length>x.length&&(m=m.slice(0,x.length)):m=[],i=0;i<x.length;i++)m[i]=t(x[i]);return m}},{"../../lib":503}],711:[function(e,z,N){z.exports=function(s,m,x,t,i,a){var r=i[0]*s.dpdx(m),n=i[1]*s.dpdy(x),f=1,l=1;if(a){var o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),c=Math.sqrt(a[0]*a[0]+a[1]*a[1]),h=(i[0]*a[0]+i[1]*a[1])/o/c;l=Math.max(0,h)}var d=Math.atan2(n,r)*180/Math.PI;return d<-90?(d+=180,f=-f):d>90&&(d-=180,f=-f),{angle:d,flip:f,p:s.c2p(t,m,x),offsetMultplier:l}}},{}],712:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("./map_1d_array"),x=e("./makepath"),t=e("./orient_text"),i=e("../../lib/svg_text_utils"),a=e("../../lib"),r=a.strRotate,n=a.strTranslate,f=e("../../constants/alignment");z.exports=function(A,b,M,_){var T=b.xaxis,w=b.yaxis,v=A._fullLayout,L=v._clips;a.makeTraceGroups(_,M,"trace").each(function(S){var k=u.select(this),P=S[0],O=P.trace,F=O.aaxis,I=O.baxis,D=a.ensureSingle(k,"g","minorlayer"),U=a.ensureSingle(k,"g","majorlayer"),B=a.ensureSingle(k,"g","boundarylayer"),j=a.ensureSingle(k,"g","labellayer");k.style("opacity",O.opacity),o(T,w,U,F,"a",F._gridlines),o(T,w,U,I,"b",I._gridlines),o(T,w,D,F,"a",F._minorgridlines),o(T,w,D,I,"b",I._minorgridlines),o(T,w,B,F,"a-boundary",F._boundarylines),o(T,w,B,I,"b-boundary",I._boundarylines);var Z=c(A,T,w,O,P,j,F._labels,"a-label"),ee=c(A,T,w,O,P,j,I._labels,"b-label");h(A,j,O,P,T,w,Z,ee),l(O,P,L,T,w)})};function l(g,A,b,M,_){var T,w,v,L,S=b.select("#"+g._clipPathId);S.size()||(S=b.append("clipPath").classed("carpetclip",!0));var k=a.ensureSingle(S,"path","carpetboundary"),P=A.clipsegments,O=[];for(L=0;L<P.length;L++)T=P[L],w=m([],T.x,M.c2p),v=m([],T.y,_.c2p),O.push(x(w,v,T.bicubic));var F="M"+O.join("L")+"Z";S.attr("id",g._clipPathId),k.attr("d",F)}function o(g,A,b,M,_,T){var w="const-"+_+"-lines",v=b.selectAll("."+w).data(T);v.enter().append("path").classed(w,!0).style("vector-effect","non-scaling-stroke"),v.each(function(L){var S=L,k=S.x,P=S.y,O=m([],k,g.c2p),F=m([],P,A.c2p),I="M"+x(O,F,S.smoothing),D=u.select(this);D.attr("d",I).style("stroke-width",S.width).style("stroke",S.color).style("fill","none")}),v.exit().remove()}function c(g,A,b,M,_,T,w,v){var L=T.selectAll("text."+v).data(w);L.enter().append("text").classed(v,!0);var S=0,k={};return L.each(function(P,O){var F;if(P.axis.tickangle==="auto")F=t(M,A,b,P.xy,P.dxy);else{var I=(P.axis.tickangle+180)*Math.PI/180;F=t(M,A,b,P.xy,[Math.cos(I),Math.sin(I)])}O||(k={angle:F.angle,flip:F.flip});var D=(P.endAnchor?-1:1)*F.flip,U=u.select(this).attr({"text-anchor":D>0?"start":"end","data-notex":1}).call(s.font,P.font).text(P.text).call(i.convertToTspans,g),B=s.bBox(this);U.attr("transform",n(F.p[0],F.p[1])+r(F.angle)+n(P.axis.labelpadding*D,B.height*.3)),S=Math.max(S,B.width+P.axis.labelpadding)}),L.exit().remove(),k.maxExtent=S,k}function h(g,A,b,M,_,T,w,v){var L,S,k,P,O=a.aggNums(Math.min,null,b.a),F=a.aggNums(Math.max,null,b.a),I=a.aggNums(Math.min,null,b.b),D=a.aggNums(Math.max,null,b.b);L=.5*(O+F),S=I,k=b.ab2xy(L,S,!0),P=b.dxyda_rough(L,S),w.angle===void 0&&a.extendFlat(w,t(b,_,T,k,b.dxydb_rough(L,S))),y(g,A,b,M,k,P,b.aaxis,_,T,w,"a-title"),L=O,S=.5*(I+D),k=b.ab2xy(L,S,!0),P=b.dxydb_rough(L,S),v.angle===void 0&&a.extendFlat(v,t(b,_,T,k,b.dxyda_rough(L,S))),y(g,A,b,M,k,P,b.baxis,_,T,v,"b-title")}var d=f.LINE_SPACING,p=(1-f.MID_SHIFT)/d+1;function y(g,A,b,M,_,T,w,v,L,S,k){var P=[];w.title.text&&P.push(w.title.text);var O=A.selectAll("text."+k).data(P),F=S.maxExtent;O.enter().append("text").classed(k,!0),O.each(function(){var I=t(b,v,L,_,T);["start","both"].indexOf(w.showticklabels)===-1&&(F=0);var D=w.title.font.size;F+=D+w.title.offset;var U=S.angle+(S.flip<0?180:0),B=(U-I.angle+450)%360,j=B>90&&B<270,Z=u.select(this);Z.text(w.title.text).call(i.convertToTspans,g),j&&(F=(-i.lineCount(Z)+p)*d*D-F),Z.attr("transform",n(I.p[0],I.p[1])+r(I.angle)+n(0,F)).attr("text-anchor","middle").call(s.font,w.title.font)}),O.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(e,z,N){var u=e("./constants"),s=e("../../lib/search").findBin,m=e("./compute_control_points"),x=e("./create_spline_evaluator"),t=e("./create_i_derivative_evaluator"),i=e("./create_j_derivative_evaluator");z.exports=function(r){var n=r._a,f=r._b,l=n.length,o=f.length,c=r.aaxis,h=r.baxis,d=n[0],p=n[l-1],y=f[0],g=f[o-1],A=n[n.length-1]-n[0],b=f[f.length-1]-f[0],M=A*u.RELATIVE_CULL_TOLERANCE,_=b*u.RELATIVE_CULL_TOLERANCE;d-=M,p+=M,y-=_,g+=_,r.isVisible=function(T,w){return T>d&&T<p&&w>y&&w<g},r.isOccluded=function(T,w){return T<d||T>p||w<y||w>g},r.setScale=function(){var T=r._x,w=r._y,v=m(r._xctrl,r._yctrl,T,w,c.smoothing,h.smoothing);r._xctrl=v[0],r._yctrl=v[1],r.evalxy=x([r._xctrl,r._yctrl],l,o,c.smoothing,h.smoothing),r.dxydi=t([r._xctrl,r._yctrl],c.smoothing,h.smoothing),r.dxydj=i([r._xctrl,r._yctrl],c.smoothing,h.smoothing)},r.i2a=function(T){var w=Math.max(0,Math.floor(T[0]),l-2),v=T[0]-w;return(1-v)*n[w]+v*n[w+1]},r.j2b=function(T){var w=Math.max(0,Math.floor(T[1]),l-2),v=T[1]-w;return(1-v)*f[w]+v*f[w+1]},r.ij2ab=function(T){return[r.i2a(T[0]),r.j2b(T[1])]},r.a2i=function(T){var w=Math.max(0,Math.min(s(T,n),l-2)),v=n[w],L=n[w+1];return Math.max(0,Math.min(l-1,w+(T-v)/(L-v)))},r.b2j=function(T){var w=Math.max(0,Math.min(s(T,f),o-2)),v=f[w],L=f[w+1];return Math.max(0,Math.min(o-1,w+(T-v)/(L-v)))},r.ab2ij=function(T){return[r.a2i(T[0]),r.b2j(T[1])]},r.i2c=function(T,w){return r.evalxy([],T,w)},r.ab2xy=function(T,w,v){if(!v&&(T<n[0]||T>n[l-1]|w<f[0]||w>f[o-1]))return[!1,!1];var L=r.a2i(T),S=r.b2j(w),k=r.evalxy([],L,S);if(v){var P=0,O=0,F=[],I,D,U,B;T<n[0]?(I=0,D=0,P=(T-n[0])/(n[1]-n[0])):T>n[l-1]?(I=l-2,D=1,P=(T-n[l-1])/(n[l-1]-n[l-2])):(I=Math.max(0,Math.min(l-2,Math.floor(L))),D=L-I),w<f[0]?(U=0,B=0,O=(w-f[0])/(f[1]-f[0])):w>f[o-1]?(U=o-2,B=1,O=(w-f[o-1])/(f[o-1]-f[o-2])):(U=Math.max(0,Math.min(o-2,Math.floor(S))),B=S-U),P&&(r.dxydi(F,I,U,D,B),k[0]+=F[0]*P,k[1]+=F[1]*P),O&&(r.dxydj(F,I,U,D,B),k[0]+=F[0]*O,k[1]+=F[1]*O)}return k},r.c2p=function(T,w,v){return[w.c2p(T[0]),v.c2p(T[1])]},r.p2x=function(T,w,v){return[w.p2c(T[0]),v.p2c(T[1])]},r.dadi=function(T){var w=Math.max(0,Math.min(n.length-2,T));return n[w+1]-n[w]},r.dbdj=function(T){var w=Math.max(0,Math.min(f.length-2,T));return f[w+1]-f[w]},r.dxyda=function(T,w,v,L){var S=r.dxydi(null,T,w,v,L),k=r.dadi(T,v);return[S[0]/k,S[1]/k]},r.dxydb=function(T,w,v,L){var S=r.dxydj(null,T,w,v,L),k=r.dbdj(w,L);return[S[0]/k,S[1]/k]},r.dxyda_rough=function(T,w,v){var L=A*(v||.1),S=r.ab2xy(T+L,w,!0),k=r.ab2xy(T-L,w,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dxydb_rough=function(T,w,v){var L=b*(v||.1),S=r.ab2xy(T,w+L,!0),k=r.ab2xy(T,w-L,!0);return[(S[0]-k[0])*.5/L,(S[1]-k[1])*.5/L]},r.dpdx=function(T){return T._m},r.dpdy=function(T){return T._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x,t){var i,a,r,n=[],f=[],l=m[0].length,o=m.length;function c(q,W){var J=0,le,fe=0;return q>0&&(le=m[W][q-1])!==void 0&&(fe++,J+=le),q<l-1&&(le=m[W][q+1])!==void 0&&(fe++,J+=le),W>0&&(le=m[W-1][q])!==void 0&&(fe++,J+=le),W<o-1&&(le=m[W+1][q])!==void 0&&(fe++,J+=le),J/Math.max(1,fe)}var h=0;for(i=0;i<l;i++)for(a=0;a<o;a++)m[a][i]===void 0&&(n.push(i),f.push(a),m[a][i]=c(i,a)),h=Math.max(h,Math.abs(m[a][i]));if(!n.length)return m;var d,p,y,g,A,b,M,_,T,w,v,L=1e-5,S=0,k=100,P=0,O=n.length;do{for(S=0,r=0;r<O;r++){i=n[r],a=f[r];var F=0,I=0,D,U,B,j,Z,ee;i===0?(Z=Math.min(l-1,2),B=x[Z],j=x[1],D=m[a][Z],U=m[a][1],I+=U+(U-D)*(x[0]-j)/(j-B),F++):i===l-1&&(Z=Math.max(0,l-3),B=x[Z],j=x[l-2],D=m[a][Z],U=m[a][l-2],I+=U+(U-D)*(x[l-1]-j)/(j-B),F++),(i===0||i===l-1)&&a>0&&a<o-1&&(d=t[a+1]-t[a],p=t[a]-t[a-1],I+=(p*m[a+1][i]+d*m[a-1][i])/(p+d),F++),a===0?(ee=Math.min(o-1,2),B=t[ee],j=t[1],D=m[ee][i],U=m[1][i],I+=U+(U-D)*(t[0]-j)/(j-B),F++):a===o-1&&(ee=Math.max(0,o-3),B=t[ee],j=t[o-2],D=m[ee][i],U=m[o-2][i],I+=U+(U-D)*(t[o-1]-j)/(j-B),F++),(a===0||a===o-1)&&i>0&&i<l-1&&(d=x[i+1]-x[i],p=x[i]-x[i-1],I+=(p*m[a][i+1]+d*m[a][i-1])/(p+d),F++),F?I/=F:(y=x[i+1]-x[i],g=x[i]-x[i-1],A=t[a+1]-t[a],b=t[a]-t[a-1],M=y*g*(y+g),_=A*b*(A+b),I=(M*(b*m[a+1][i]+A*m[a-1][i])+_*(g*m[a][i+1]+y*m[a][i-1]))/(_*(g+y)+M*(b+A))),T=I-m[a][i],w=T/h,S+=w*w,v=F?0:.85,m[a][i]+=T*(1+v)}S=Math.sqrt(S)}while(P++<k&&S>L);return u.log("Smoother converged to",S,"after",P,"iterations"),m}},{"../../lib":503}],715:[function(e,z,N){var u=e("../../lib").isArray1D;z.exports=function(m,x,t){var i=t("x"),a=i&&i.length,r=t("y"),n=r&&r.length;if(!a&&!n)return!1;if(x._cheater=!i,(!a||u(i))&&(!n||u(r))){var f=a?i.length:1/0;n&&(f=Math.min(f,r.length)),x.a&&x.a.length&&(f=Math.min(f,x.a.length)),x.b&&x.b.length&&(f=Math.min(f,x.b.length)),x._length=f}else x._length=null;return!0}},{"../../lib":503}],716:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../scattergeo/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../plots/attributes"),t=e("../../components/color/attributes").defaultLine,i=e("../../lib/extend").extendFlat,a=s.marker.line;z.exports=i({locations:{valType:"data_array",editType:"calc"},locationmode:s.locationmode,z:{valType:"data_array",editType:"calc"},geojson:i({},s.geojson,{}),featureidkey:s.featureidkey,text:i({},s.text,{}),hovertext:i({},s.hovertext,{}),marker:{line:{color:i({},a.color,{dflt:t}),width:i({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:s.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:s.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:i({},x.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:u(),showlegend:i({},x.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../../components/colorscale/calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection");function i(a){return a&&typeof a=="string"}z.exports=function(r,n){var f=n._length,l=new Array(f),o;n.geojson?o=function(y){return i(y)||u(y)}:o=i;for(var c=0;c<f;c++){var h=l[c]={},d=n.locations[c],p=n.z[c];o(d)&&u(p)?(h.loc=d,h.z=p):(h.loc=null,h.z=s),h.index=c}return x(l,n),m(r,n,{vals:n.z,containerStr:"",cLetter:"z"}),t(l,n),l}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");z.exports=function(t,i,a,r){function n(p,y){return u.coerce(t,i,m,p,y)}var f=n("locations"),l=n("z");if(!(f&&f.length&&u.isArrayOrTypedArray(l)&&l.length)){i.visible=!1;return}i._length=Math.min(f.length,l.length);var o=n("geojson"),c;(typeof o=="string"&&o!==""||u.isPlainObject(o))&&(c="geojson-id");var h=n("locationmode",c);h==="geojson-id"&&n("featureidkey"),n("text"),n("hovertext"),n("hovertemplate");var d=n("marker.line.width");d&&n("marker.line.color"),n("marker.opacity"),s(t,i,r,n,{prefix:"",cLetter:"z"}),u.coerceSelectionMarkerOpacity(i,n)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(e,z,N){z.exports=function(s,m,x,t,i){s.location=m.location,s.z=m.z;var a=t[i];return a.fIn&&a.fIn.properties&&(s.properties=a.fIn.properties),s.ct=a.ct,s}},{}],720:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("./attributes"),m=e("../../lib").fillText;z.exports=function(i,a,r){var n=i.cd,f=n[0].trace,l=i.subplot,o,c,h,d,p=[a,r],y=[a+360,r];for(c=0;c<n.length;c++)if(o=n[c],d=!1,o._polygons){for(h=0;h<o._polygons.length;h++)o._polygons[h].contains(p)&&(d=!d),o._polygons[h].contains(y)&&(d=!d);if(d)break}if(!(!d||!o))return i.x0=i.x1=i.xa.c2p(o.ct),i.y0=i.y1=i.ya.c2p(o.ct),i.index=o.index,i.location=o.loc,i.z=o.z,i.zLabel=u.tickText(l.mockAxis,l.mockAxis.c2l(o.z),"hover").text,i.hovertemplate=o.hovertemplate,x(i,f,o),[i]};function x(t,i,a){if(!i.hovertemplate){var r=a.hi||i.hoverinfo,n=String(a.loc),f=r==="all"?s.hoverinfo.flags:r.split("+"),l=f.indexOf("name")!==-1,o=f.indexOf("location")!==-1,c=f.indexOf("z")!==-1,h=f.indexOf("text")!==-1,d=!l&&o,p=[];d?t.nameOverride=n:(l&&(t.nameOverride=i.name),o&&p.push(n)),c&&p.push(t.zLabel),h&&m(a,i,p),t.extraText=p.join("<br>")}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"choropleth",basePlotModule:e("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../lib/geo_location_utils"),x=e("../../lib/topojson_utils").getTopojsonFeatures,t=e("../../plots/cartesian/autorange").findExtremes,i=e("./style").style;function a(n,f,l){var o=f.layers.backplot.select(".choroplethlayer");s.makeTraceGroups(o,l,"trace choropleth").each(function(c){var h=u.select(this),d=h.selectAll("path.choroplethlocation").data(s.identity);d.enter().append("path").classed("choroplethlocation",!0),d.exit().remove(),i(n,c)})}function r(n,f){for(var l=n[0].trace,o=f[l.geo],c=o._subplot,h=l.locationmode,d=l._length,p=h==="geojson-id"?m.extractTraceFeature(n):x(l,c.topojson),y=[],g=[],A=0;A<d;A++){var b=n[A],M=h==="geojson-id"?b.fOut:m.locationToFeature(h,b.loc,p);if(M){b.geojson=M,b.ct=M.properties.ct,b._polygons=m.feature2polygons(M);var _=m.computeBbox(M);y.push(_[0],_[2]),g.push(_[1],_[3])}else b.geojson=null}if(o.fitbounds==="geojson"&&h==="geojson-id"){var T=m.computeBbox(m.getTraceGeojson(l));y=[T[0],T[2]],g=[T[1],T[3]]}var w={padded:!0};l._extremes.lon=t(o.lonaxis._ax,y,w),l._extremes.lat=t(o.lataxis._ax,g,w)}z.exports={calcGeoJSON:r,plot:a}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(e,z,N){z.exports=function(s,m){var x=s.cd,t=s.xaxis,i=s.yaxis,a=[],r,n,f,l,o;if(m===!1)for(r=0;r<x.length;r++)x[r].selected=0;else for(r=0;r<x.length;r++)n=x[r],f=n.ct,!!f&&(l=t.c2p(f),o=i.c2p(f),m.contains([l,o],null,r,s)?(a.push({pointNumber:r,lon:f[0],lat:f[1]}),n.selected=1):n.selected=0);return a}},{}],724:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../components/drawing"),x=e("../../components/colorscale");function t(r,n){n&&i(r,n)}function i(r,n){var f=n[0].trace,l=n[0].node3,o=l.selectAll(".choroplethlocation"),c=f.marker||{},h=c.line||{},d=x.makeColorScaleFuncFromTrace(f);o.each(function(p){u.select(this).attr("fill",d(p.z)).call(s.stroke,p.mlc||h.color).call(m.dashLine,"",p.mlw||h.width||0).style("opacity",c.opacity)}),m.selectedPointStyle(o,f,r)}function a(r,n){var f=n[0].node3,l=n[0].trace;l.selectedpoints?m.selectedPointStyle(f.selectAll(".choroplethlocation"),l,r):i(r,n)}z.exports={style:t,styleOnSelect:a}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(e,z,N){var u=e("../choropleth/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat;z.exports=t({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:t({},u.featureidkey,{}),below:{valType:"string",editType:"plot"},text:u.text,hovertext:u.hovertext,marker:{line:{color:t({},u.marker.line.color,{editType:"plot"}),width:t({},u.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:t({},u.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:t({},u.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:t({},u.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:u.hoverinfo,hovertemplate:m({},{keys:["properties"]}),showlegend:t({},x.showlegend,{dflt:!1})},s("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../components/colorscale"),x=e("../../components/drawing"),t=e("../../lib/geojson_utils").makeBlank,i=e("../../lib/geo_location_utils");function a(n){var f=n[0].trace,l=f.visible===!0&&f._length!==0,o={layout:{visibility:"none"},paint:{}},c={layout:{visibility:"none"},paint:{}},h=f._opts={fill:o,line:c,geojson:t()};if(!l)return h;var d=i.extractTraceFeature(n);if(!d)return h;var p=m.makeColorScaleFuncFromTrace(f),y=f.marker,g=y.line||{},A;s.isArrayOrTypedArray(y.opacity)&&(A=function(S){var k=S.mo;return u(k)?+s.constrain(k,0,1):0});var b;s.isArrayOrTypedArray(g.color)&&(b=function(S){return S.mlc});var M;s.isArrayOrTypedArray(g.width)&&(M=function(S){return S.mlw});for(var _=0;_<n.length;_++){var T=n[_],w=T.fOut;if(w){var v=w.properties;v.fc=p(T.z),A&&(v.mo=A(T)),b&&(v.mlc=b(T)),M&&(v.mlw=M(T)),T.ct=v.ct,T._polygons=i.feature2polygons(w)}}var L=A?{type:"identity",property:"mo"}:y.opacity;return s.extendFlat(o.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":L}),s.extendFlat(c.paint,{"line-color":b?{type:"identity",property:"mlc"}:g.color,"line-width":M?{type:"identity",property:"mlw"}:g.width,"line-opacity":L}),o.layout.visibility="visible",c.layout.visibility="visible",h.geojson={type:"FeatureCollection",features:d},r(n),h}function r(n){var f=n[0].trace,l=f._opts,o;if(f.selectedpoints){for(var c=x.makeSelectedPointStyleFns(f),h=0;h<n.length;h++){var d=n[h];d.fOut&&(d.fOut.properties.mo2=c.selectedOpacityFn(d))}o={type:"identity",property:"mo2"}}else o=s.isArrayOrTypedArray(f.marker.opacity)?{type:"identity",property:"mo"}:f.marker.opacity;return s.extendFlat(l.fill.paint,{"fill-opacity":o}),s.extendFlat(l.line.paint,{"line-opacity":o}),l}z.exports={convert:a,convertOnSelect:r}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");z.exports=function(t,i,a,r){function n(h,d){return u.coerce(t,i,m,h,d)}var f=n("locations"),l=n("z"),o=n("geojson");if(!u.isArrayOrTypedArray(f)||!f.length||!u.isArrayOrTypedArray(l)||!l.length||!(typeof o=="string"&&o!==""||u.isPlainObject(o))){i.visible=!1;return}n("featureidkey"),i._length=Math.min(f.length,l.length),n("below"),n("text"),n("hovertext"),n("hovertemplate");var c=n("marker.line.width");c&&n("marker.line.color"),n("marker.opacity"),s(t,i,r,n,{prefix:"",cLetter:"z"}),u.coerceSelectionMarkerOpacity(i,n)}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../choropleth/calc"),plot:e("./plot"),hoverPoints:e("../choropleth/hover"),eventData:e("../choropleth/event_data"),selectPoints:e("../choropleth/select"),styleOnSelect:function(u,s){if(s){var m=s[0].trace;m._glTrace.updateOnSelect(s)}},getBelow:function(u,s){for(var m=s.getMapLayers(),x=m.length-2;x>=0;x--){var t=m[x].id;if(typeof t=="string"&&t.indexOf("water")===0){for(var i=x+1;i<m.length;i++)if(t=m[i].id,typeof t=="string"&&t.indexOf("plotly-")===-1)return t}}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(e,z,N){var u=e("./convert").convert,s=e("./convert").convertOnSelect,m=e("../../plots/mapbox/constants").traceLayerPrefix;function x(i,a){this.type="choroplethmapbox",this.subplot=i,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",m+a+"-fill"],["line",m+a+"-line"]],this.below=null}var t=x.prototype;t.update=function(i){this._update(u(i))},t.updateOnSelect=function(i){this._update(s(i))},t._update=function(i){var a=this.subplot,r=this.layerList,n=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(i.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(i,n),this.below=n);for(var f=0;f<r.length;f++){var l=r[f],o=l[0],c=l[1],h=i[o];a.setOptions(c,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&a.setOptions(c,"setPaintProperty",h.paint)}},t._addLayers=function(i,a){for(var r=this.subplot,n=this.layerList,f=this.sourceId,l=0;l<n.length;l++){var o=n[l],c=o[0],h=i[c];r.addLayer({type:c,id:o[1],source:f,layout:h.layout,paint:h.paint},a)}},t._removeLayers=function(){for(var i=this.subplot.map,a=this.layerList,r=a.length-1;r>=0;r--)i.removeLayer(a[r][1])},t.dispose=function(){var i=this.subplot.map;this._removeLayers(),i.removeSource(this.sourceId)},z.exports=function(a,r){var n=r[0].trace,f=new x(a,n.uid),l=f.sourceId,o=u(r),c=f.below=a.belowLookup["trace-"+n.uid];return a.map.addSource(l,{type:"geojson",data:o.geojson}),f._addLayers(o,c),r[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(e,z,N){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["norm"]}),uhoverformat:s("u",1),vhoverformat:s("v",1),whoverformat:s("w",1),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),showlegend:i({},t.showlegend,{dflt:!1})};i(a,u("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){a[n]=x[n]}),a.hoverinfo=i({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,z.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(e,z,N){var u=e("../../components/colorscale/calc");z.exports=function(m,x){for(var t=x.u,i=x.v,a=x.w,r=Math.min(x.x.length,x.y.length,x.z.length,t.length,i.length,a.length),n=-1/0,f=1/0,l=0;l<r;l++){var o=t[l],c=i[l],h=a[l],d=Math.sqrt(o*o+c*c+h*h);n=Math.max(n,d),f=Math.min(f,d)}x._len=r,x._normMax=n,u(m,x,{vals:[f,n],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(e,z,N){var u=e("../../../stackgl_modules").gl_cone3d,s=e("../../../stackgl_modules").gl_cone3d.createConeMesh,m=e("../../lib").simpleMap,x=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,i=e("../../plots/gl3d/zip3");function a(h,d){this.scene=h,this.uid=d,this.mesh=null,this.data=null}var r=a.prototype;r.handlePick=function(h){if(h.object===this.mesh){var d=h.index=h.data.index,p=this.data.x[d],y=this.data.y[d],g=this.data.z[d],A=this.data.u[d],b=this.data.v[d],M=this.data.w[d];h.traceCoordinate=[p,y,g,A,b,M,Math.sqrt(A*A+b*b+M*M)];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[d]!==void 0?h.textLabel=_[d]:_&&(h.textLabel=_),!0}};var n={xaxis:0,yaxis:1,zaxis:2},f={tip:1,tail:0,cm:.25,center:.5},l={tip:1,tail:1,cm:.75,center:.5};function o(h,d){var p=h.fullSceneLayout,y=h.dataScale,g={};function A(T,w){var v=p[w],L=y[n[w]];return m(T,function(S){return v.d2l(S)*L})}g.vectors=i(A(d.u,"xaxis"),A(d.v,"yaxis"),A(d.w,"zaxis"),d._len),g.positions=i(A(d.x,"xaxis"),A(d.y,"yaxis"),A(d.z,"zaxis"),d._len);var b=t(d);g.colormap=x(d),g.vertexIntensityBounds=[b.min/d._normMax,b.max/d._normMax],g.coneOffset=f[d.anchor],d.sizemode==="scaled"?g.coneSize=d.sizeref||.5:g.coneSize=d.sizeref&&d._normMax?d.sizeref/d._normMax:.5;var M=u(g),_=d.lightposition;return M.lightPosition=[_.x,_.y,_.z],M.ambient=d.lighting.ambient,M.diffuse=d.lighting.diffuse,M.specular=d.lighting.specular,M.roughness=d.lighting.roughness,M.fresnel=d.lighting.fresnel,M.opacity=d.opacity,d._pad=l[d.anchor]*M.vectorScale*M.coneScale*d._normMax,M}r.update=function(h){this.data=h;var d=o(this.scene,h);this.mesh.update(d)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(h,d){var p=h.glplot.gl,y=o(h,d),g=s(p,y),A=new a(h,d.uid);return A.mesh=g,A.data=d,g._trace=A,h.glplot.add(g),A}z.exports=c},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");z.exports=function(t,i,a,r){function n(p,y){return u.coerce(t,i,m,p,y)}var f=n("u"),l=n("v"),o=n("w"),c=n("x"),h=n("y"),d=n("z");if(!f||!f.length||!l||!l.length||!o||!o.length||!c||!c.length||!h||!h.length||!d||!d.length){i.visible=!1;return}n("sizeref"),n("sizemode"),n("anchor"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),s(t,i,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(e,z,N){z.exports={moduleType:"trace",name:"cone",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),eventData:function(u,s){return u.norm=s.traceCoordinate[6],u},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(e,z,N){var u=e("../heatmap/attributes"),s=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes"),x=m.axisHoverFormat,t=m.descriptionOnlyNumbers,i=e("../../components/colorscale/attributes"),a=e("../../components/drawing/attributes").dash,r=e("../../plots/font_attributes"),n=e("../../lib/extend").extendFlat,f=e("../../constants/filter_ops"),l=f.COMPARISON_OPS2,o=f.INTERVAL_OPS,c=s.line;z.exports=n({z:u.z,x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,text:u.text,hovertext:u.hovertext,transpose:u.transpose,xtype:u.xtype,ytype:u.ytype,xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:u.hovertemplate,texttemplate:n({},u.texttemplate,{}),textfont:n({},u.textfont,{}),hoverongaps:u.hoverongaps,connectgaps:n({},u.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:r({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:t("contour label")},operation:{valType:"enumerated",values:[].concat(l).concat(o),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:n({},c.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:n({},c.smoothing,{}),editType:"plot"}},i("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(e,z,N){var u=e("../../components/colorscale"),s=e("../heatmap/calc"),m=e("./set_contours"),x=e("./end_plus");z.exports=function(i,a){var r=s(i,a),n=r[0].z;m(a,n);var f=a.contours,l=u.extractOpts(a),o;if(f.coloring==="heatmap"&&l.auto&&a.autocontour===!1){var c=f.start,h=x(f),d=f.size||1,p=Math.floor((h-c)/d)+1;isFinite(d)||(d=1,p=1);var y=c-d/2,g=y+p*d;o=[y,g]}else o=n;return u.calc(i,a,{vals:o,cLetter:"z"}),r}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(e,z,N){z.exports=function(u,s){var m=u[0],x=m.z,t;switch(s.type){case"levels":var i=Math.min(x[0][0],x[0][1]);for(t=0;t<u.length;t++){var a=u[t];a.prefixBoundary=!a.edgepaths.length&&(i>a.level||a.starts.length&&i===a.level)}break;case"constraint":if(m.prefixBoundary=!1,m.edgepaths.length)return;var r=m.x.length,n=m.y.length,f=-1/0,l=1/0;for(t=0;t<n;t++)l=Math.min(l,x[t][0]),l=Math.min(l,x[t][r-1]),f=Math.max(f,x[t][0]),f=Math.max(f,x[t][r-1]);for(t=1;t<r-1;t++)l=Math.min(l,x[0][t]),l=Math.min(l,x[n-1][t]),f=Math.max(f,x[0][t]),f=Math.max(f,x[n-1][t]);var o=s.value,c,h;switch(s._operation){case">":o>f&&(m.prefixBoundary=!0);break;case"<":(o<l||m.starts.length&&o===l)&&(m.prefixBoundary=!0);break;case"[]":c=Math.min(o[0],o[1]),h=Math.max(o[0],o[1]),(h<l||c>f||m.starts.length&&h===l)&&(m.prefixBoundary=!0);break;case"][":c=Math.min(o[0],o[1]),h=Math.max(o[0],o[1]),c<l&&h>f&&(m.prefixBoundary=!0);break}break}}},{}],738:[function(e,z,N){var u=e("../../components/colorscale"),s=e("./make_color_map"),m=e("./end_plus");function x(t,i,a){var r=i.contours,n=i.line,f=r.size||1,l=r.coloring,o=s(i,{isColorbar:!0});if(l==="heatmap"){var c=u.extractOpts(i);a._fillgradient=c.reversescale?u.flipScale(c.colorscale):c.colorscale,a._zrange=[c.min,c.max]}else l==="fill"&&(a._fillcolor=o);a._line={color:l==="lines"?o:n.color,width:r.showlines!==!1?n.width:0,dash:n.dash},a._levels={start:r.start,end:m(r),size:f}}z.exports={min:"zmin",max:"zmax",calc:x}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(e,z,N){z.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(e,z,N){var u=e("fast-isnumeric"),s=e("./label_defaults"),m=e("../../components/color"),x=m.addOpacity,t=m.opacity,i=e("../../constants/filter_ops"),a=i.CONSTRAINT_REDUCTION,r=i.COMPARISON_OPS2;z.exports=function(l,o,c,h,d,p){var y=o.contours,g,A,b,M=c("contours.operation");if(y._operation=a[M],n(c,y),M==="="?g=y.showlines=!0:(g=c("contours.showlines"),b=c("fillcolor",x((l.line||{}).color||d,.5))),g){var _=b&&t(b)?x(o.fillcolor,1):d;A=c("line.color",_),c("line.width",2),c("line.dash")}c("line.smoothing"),s(c,h,A,p)};function n(f,l){var o;r.indexOf(l.operation)===-1?(f("contours.value",[0,1]),Array.isArray(l.value)?l.value.length>2?l.value=l.value.slice(2):l.length===0?l.value=[0,1]:l.length<2?(o=parseFloat(l.value[0]),l.value=[o,o+1]):l.value=[parseFloat(l.value[0]),parseFloat(l.value[1])]:u(l.value)&&(o=parseFloat(l.value),l.value=[o,o+1])):(f("contours.value",0),u(l.value)||(Array.isArray(l.value)?l.value=parseFloat(l.value[0]):l.value=0))}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(e,z,N){var u=e("../../constants/filter_ops"),s=e("fast-isnumeric");z.exports={"[]":x("[]"),"][":x("]["),">":t(">"),"<":t("<"),"=":t("=")};function m(i,a){var r=Array.isArray(a),n;function f(l){return s(l)?+l:null}return u.COMPARISON_OPS2.indexOf(i)!==-1?n=f(r?a[0]:a):u.INTERVAL_OPS.indexOf(i)!==-1?n=r?[f(a[0]),f(a[1])]:[f(a),f(a)]:u.SET_OPS.indexOf(i)!==-1&&(n=r?a.map(f):[f(a)]),n}function x(i){return function(a){a=m(i,a);var r=Math.min(a[0],a[1]),n=Math.max(a[0],a[1]);return{start:r,end:n,size:n-r}}}function t(i){return function(a){return a=m(i,a),{start:a,end:1/0,size:1/0}}}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(e,z,N){z.exports=function(s,m,x,t){var i=t("contours.start"),a=t("contours.end"),r=i===!1||a===!1,n=x("contours.size"),f;r?f=m.autocontour=!0:f=x("autocontour",!1),(f||!n)&&x("ncontours")}},{}],743:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){var t,i,a,r=function(l){return l.reverse()},n=function(l){return l};switch(x){case"=":case"<":return m;case">":for(m.length!==1&&u.warn("Contour data invalid for the specified inequality operation."),i=m[0],t=0;t<i.edgepaths.length;t++)i.edgepaths[t]=r(i.edgepaths[t]);for(t=0;t<i.paths.length;t++)i.paths[t]=r(i.paths[t]);for(t=0;t<i.starts.length;t++)i.starts[t]=r(i.starts[t]);return m;case"][":var f=r;r=n,n=f;case"[]":for(m.length!==2&&u.warn("Contour data invalid for the specified inequality range operation."),i=s(m[0]),a=s(m[1]),t=0;t<i.edgepaths.length;t++)i.edgepaths[t]=r(i.edgepaths[t]);for(t=0;t<i.paths.length;t++)i.paths[t]=r(i.paths[t]);for(t=0;t<i.starts.length;t++)i.starts[t]=r(i.starts[t]);for(;a.edgepaths.length;)i.edgepaths.push(n(a.edgepaths.shift()));for(;a.paths.length;)i.paths.push(n(a.paths.shift()));for(;a.starts.length;)i.starts.push(n(a.starts.shift()));return[i]}};function s(m){return u.extendFlat({},m,{edgepaths:u.extendDeep([],m.edgepaths),paths:u.extendDeep([],m.paths),starts:u.extendDeep([],m.starts)})}},{"../../lib":503}],744:[function(e,z,N){var u=e("../../lib"),s=e("../heatmap/xyz_defaults"),m=e("../scatter/period_defaults"),x=e("./constraint_defaults"),t=e("./contours_defaults"),i=e("./style_defaults"),a=e("../heatmap/label_defaults"),r=e("./attributes");z.exports=function(f,l,o,c){function h(g,A){return u.coerce(f,l,r,g,A)}function d(g){return u.coerce2(f,l,r,g)}var p=s(f,l,h,c);if(!p){l.visible=!1;return}m(f,l,c,h),h("xhoverformat"),h("yhoverformat"),h("text"),h("hovertext"),h("hoverongaps"),h("hovertemplate");var y=h("contours.type")==="constraint";h("connectgaps",u.isArray1D(l.z)),y?x(f,l,h,c,o):(t(f,l,h,d),i(f,l,h,c)),l.contours&&l.contours.coloring==="heatmap"&&a(h,c)}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(e,z,N){var u=e("../../lib"),s=e("./constraint_mapping"),m=e("./end_plus");z.exports=function(t,i,a){for(var r=t.type==="constraint"?s[t._operation](t.value):t,n=r.size,f=[],l=m(r),o=a.trace._carpetTrace,c=o?{xaxis:o.aaxis,yaxis:o.baxis,x:a.a,y:a.b}:{xaxis:i.xaxis,yaxis:i.yaxis,x:a.x,y:a.y},h=r.start;h<l;h+=n)if(f.push(u.extendFlat({level:h,crossings:{},starts:[],edgepaths:[],paths:[],z:a.z,smoothing:a.trace.line.smoothing},c)),f.length>1e3){u.warn("Too many contours, clipping at 1000",t);break}return f}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(e,z,N){z.exports=function(s){return s.end+s.size/1e6}},{}],747:[function(e,z,N){var u=e("../../lib"),s=e("./constants");z.exports=function(n,f,l){var o,c,h,d,p;for(f=f||.01,l=l||.01,h=0;h<n.length;h++){for(d=n[h],p=0;p<d.starts.length;p++)c=d.starts[p],t(d,c,"edge",f,l);for(o=0;Object.keys(d.crossings).length&&o<1e4;)o++,c=Object.keys(d.crossings)[0].split(",").map(Number),t(d,c,void 0,f,l);o===1e4&&u.log("Infinite loop in contour?")}};function m(r,n,f,l){return Math.abs(r[0]-n[0])<f&&Math.abs(r[1]-n[1])<l}function x(r,n){var f=r[2]-n[2],l=r[3]-n[3];return Math.sqrt(f*f+l*l)}function t(r,n,f,l,o){var c=n.join(","),h=r.crossings[c],d=i(h,f,n),p=[a(r,n,[-d[0],-d[1]])],y=r.z.length,g=r.z[0].length,A=n.slice(),b=d.slice(),M;for(M=0;M<1e4;M++){if(h>20?(h=s.CHOOSESADDLE[h][(d[0]||d[1])<0?0:1],r.crossings[c]=s.SADDLEREMAINDER[h]):delete r.crossings[c],d=s.NEWDELTA[h],!d){u.log("Found bad marching index:",h,n,r.level);break}p.push(a(r,n,d)),n[0]+=d[0],n[1]+=d[1],c=n.join(","),m(p[p.length-1],p[p.length-2],l,o)&&p.pop();var _=d[0]&&(n[0]<0||n[0]>g-2)||d[1]&&(n[1]<0||n[1]>y-2),T=n[0]===A[0]&&n[1]===A[1]&&d[0]===b[0]&&d[1]===b[1];if(T||f&&_)break;h=r.crossings[c]}M===1e4&&u.log("Infinite loop in contour?");var w=m(p[0],p[p.length-1],l,o),v=0,L=.2*r.smoothing,S=[],k=0,P,O,F,I,D,U,B,j,Z,ee,q;for(M=1;M<p.length;M++)B=x(p[M],p[M-1]),v+=B,S.push(B);var W=v/S.length*L;function J(se){return p[se%p.length]}for(M=p.length-2;M>=k;M--)if(P=S[M],P<W){for(F=0,O=M-1;O>=k&&P+S[O]<W;O--)P+=S[O];if(w&&M===p.length-2)for(F=0;F<O&&P+S[F]<W;F++)P+=S[F];D=M-O+F+1,U=Math.floor((M+O+F+2)/2),!w&&M===p.length-2?I=p[p.length-1]:!w&&O===-1?I=p[0]:D%2?I=J(U):I=[(J(U)[0]+J(U+1)[0])/2,(J(U)[1]+J(U+1)[1])/2],p.splice(O+1,M-O+1,I),M=O+1,F&&(k=F),w&&(M===p.length-2?p[F]=p[p.length-1]:M===0&&(p[p.length-1]=p[0]))}for(p.splice(0,k),M=0;M<p.length;M++)p[M].length=2;if(!(p.length<2))if(w)p.pop(),r.paths.push(p);else{f||u.log("Unclosed interior contour?",r.level,A.join(","),p.join("L"));var le=!1;for(j=0;j<r.edgepaths.length;j++)if(ee=r.edgepaths[j],!le&&m(ee[0],p[p.length-1],l,o)){p.pop(),le=!0;var fe=!1;for(Z=0;Z<r.edgepaths.length;Z++)if(q=r.edgepaths[Z],m(q[q.length-1],p[0],l,o)){fe=!0,p.shift(),r.edgepaths.splice(j,1),Z===j?r.paths.push(p.concat(q)):(Z>j&&Z--,r.edgepaths[Z]=q.concat(p,ee));break}fe||(r.edgepaths[j]=p.concat(ee))}for(j=0;j<r.edgepaths.length&&!le;j++)ee=r.edgepaths[j],m(ee[ee.length-1],p[0],l,o)&&(p.shift(),r.edgepaths[j]=ee.concat(p),le=!0);le||r.edgepaths.push(p)}}function i(r,n,f){var l=0,o=0;return r>20&&n?r===208||r===1114?l=f[0]===0?1:-1:o=f[1]===0?1:-1:s.BOTTOMSTART.indexOf(r)!==-1?o=1:s.LEFTSTART.indexOf(r)!==-1?l=1:s.TOPSTART.indexOf(r)!==-1?o=-1:l=-1,[l,o]}function a(r,n,f){var l=n[0]+Math.max(f[0],0),o=n[1]+Math.max(f[1],0),c=r.z[o][l],h=r.xaxis,d=r.yaxis;if(f[1]){var p=(r.level-c)/(r.z[o][l+1]-c),y=(p!==1?(1-p)*h.c2l(r.x[l]):0)+(p!==0?p*h.c2l(r.x[l+1]):0);return[h.c2p(h.l2c(y),!0),d.c2p(r.y[o],!0),l+p,o]}else{var g=(r.level-c)/(r.z[o+1][l]-c),A=(g!==1?(1-g)*d.c2l(r.y[o]):0)+(g!==0?g*d.c2l(r.y[o+1]):0);return[h.c2p(r.x[l],!0),d.c2p(d.l2c(A),!0),l,o+g]}}},{"../../lib":503,"./constants":739}],748:[function(e,z,N){var u=e("../../components/color"),s=e("../heatmap/hover");z.exports=function(x,t,i,a,r){r||(r={}),r.isContour=!0;var n=s(x,t,i,a,r);return n&&n.forEach(function(f){var l=f.trace;l.contours.type==="constraint"&&(l.fillcolor&&u.opacity(l.fillcolor)?f.color=u.addOpacity(l.fillcolor,1):l.contours.showlines&&u.opacity(l.line.color)&&(f.color=u.addOpacity(l.line.color,1)))}),n}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot").plot,style:e("./style"),colorbar:e("./colorbar"),hoverPoints:e("./hover"),moduleType:"trace",name:"contour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x,t,i){i||(i={});var a=m("contours.showlabels");if(a){var r=x.font;u.coerceFont(m,"contours.labelfont",{family:r.family,size:r.size,color:t}),m("contours.labelformat")}i.hasHover!==!1&&m("zhoverformat")}},{"../../lib":503}],751:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/colorscale"),m=e("./end_plus");z.exports=function(t){var i=t.contours,a=i.start,r=m(i),n=i.size||1,f=Math.floor((r-a)/n)+1,l=i.coloring==="lines"?0:1,o=s.extractOpts(t);isFinite(n)||(n=1,f=1);var c=o.reversescale?s.flipScale(o.colorscale):o.colorscale,h=c.length,d=new Array(h),p=new Array(h),y,g;if(i.coloring==="heatmap"){var A=o.min,b=o.max;for(g=0;g<h;g++)y=c[g],d[g]=y[0]*(b-A)+A,p[g]=y[1];var M=u.extent([A,b,i.start,i.start+n*(f-1)]),_=M[A<b?0:1],T=M[A<b?1:0];_!==A&&(d.splice(0,0,_),p.splice(0,0,p[0])),T!==b&&(d.push(T),p.push(p[p.length-1]))}else for(g=0;g<h;g++)y=c[g],d[g]=(y[0]*(f+l-1)-l/2)*n+a,p[g]=y[1];return s.makeColorScaleFunc({domain:d,range:p},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(e,z,N){var u=e("./constants");z.exports=function(x){var t=x[0].z,i=t.length,a=t[0].length,r=i===2||a===2,n,f,l,o,c,h,d,p,y;for(f=0;f<i-1;f++)for(o=[],f===0&&(o=o.concat(u.BOTTOMSTART)),f===i-2&&(o=o.concat(u.TOPSTART)),n=0;n<a-1;n++)for(l=o.slice(),n===0&&(l=l.concat(u.LEFTSTART)),n===a-2&&(l=l.concat(u.RIGHTSTART)),c=n+","+f,h=[[t[f][n],t[f][n+1]],[t[f+1][n],t[f+1][n+1]]],y=0;y<x.length;y++)p=x[y],d=s(p.level,h),!!d&&(p.crossings[c]=d,l.indexOf(d)!==-1&&(p.starts.push([n,f]),r&&l.indexOf(d,l.indexOf(d)+1)!==-1&&p.starts.push([n,f])))};function s(m,x){var t=(x[0][0]>m?0:1)+(x[0][1]>m?0:2)+(x[1][1]>m?0:4)+(x[1][0]>m?0:8);if(t===5||t===10){var i=(x[0][0]+x[0][1]+x[1][0]+x[1][1])/4;return m>i?t===5?713:1114:t===5?104:208}return t===15?0:t}},{"./constants":739}],753:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../components/colorscale"),t=e("../../lib/svg_text_utils"),i=e("../../plots/cartesian/axes"),a=e("../../plots/cartesian/set_convert"),r=e("../heatmap/plot"),n=e("./make_crossings"),f=e("./find_all_paths"),l=e("./empty_pathinfo"),o=e("./convert_to_constraints"),c=e("./close_boundaries"),h=e("./constants"),d=h.LABELOPTIMIZER;N.plot=function(w,v,L,S){var k=v.xaxis,P=v.yaxis;s.makeTraceGroups(S,L,"contour").each(function(O){var F=u.select(this),I=O[0],D=I.trace,U=I.x,B=I.y,j=D.contours,Z=l(j,v,I),ee=s.ensureSingle(F,"g","heatmapcoloring"),q=[];j.coloring==="heatmap"&&(q=[O]),r(w,v,q,ee),n(Z),f(Z);var W=k.c2p(U[0],!0),J=k.c2p(U[U.length-1],!0),le=P.c2p(B[0],!0),fe=P.c2p(B[B.length-1],!0),se=[[W,fe],[J,fe],[J,le],[W,le]],H=Z;j.type==="constraint"&&(H=o(Z,j._operation)),p(F,se,j),y(F,H,se,j),A(F,Z,w,I,j),M(F,v,w,I,se)})};function p(T,w,v){var L=s.ensureSingle(T,"g","contourbg"),S=L.selectAll("path").data(v.coloring==="fill"?[0]:[]);S.enter().append("path"),S.exit().remove(),S.attr("d","M"+w.join("L")+"Z").style("stroke","none")}function y(T,w,v,L){var S=L.coloring==="fill"||L.type==="constraint"&&L._operation!=="=",k="M"+v.join("L")+"Z";S&&c(w,L);var P=s.ensureSingle(T,"g","contourfill"),O=P.selectAll("path").data(S?w:[]);O.enter().append("path"),O.exit().remove(),O.each(function(F){var I=(F.prefixBoundary?k:"")+g(F,v);I?u.select(this).attr("d",I).style("stroke","none"):u.select(this).remove()})}function g(T,w){var v="",L=0,S=T.edgepaths.map(function(W,J){return J}),k=!0,P,O,F,I,D,U;function B(W){return Math.abs(W[1]-w[0][1])<.01}function j(W){return Math.abs(W[1]-w[2][1])<.01}function Z(W){return Math.abs(W[0]-w[0][0])<.01}function ee(W){return Math.abs(W[0]-w[2][0])<.01}for(;S.length;){for(U=m.smoothopen(T.edgepaths[L],T.smoothing),v+=k?U:U.replace(/^M/,"L"),S.splice(S.indexOf(L),1),P=T.edgepaths[L][T.edgepaths[L].length-1],I=-1,F=0;F<4;F++){if(!P){s.log("Missing end?",L,T);break}for(B(P)&&!ee(P)?O=w[1]:Z(P)?O=w[0]:j(P)?O=w[3]:ee(P)&&(O=w[2]),D=0;D<T.edgepaths.length;D++){var q=T.edgepaths[D][0];Math.abs(P[0]-O[0])<.01?Math.abs(P[0]-q[0])<.01&&(q[1]-P[1])*(O[1]-q[1])>=0&&(O=q,I=D):Math.abs(P[1]-O[1])<.01?Math.abs(P[1]-q[1])<.01&&(q[0]-P[0])*(O[0]-q[0])>=0&&(O=q,I=D):s.log("endpt to newendpt is not vert. or horz.",P,O,q)}if(P=O,I>=0)break;v+="L"+O}if(I===T.edgepaths.length){s.log("unclosed perimeter path");break}L=I,k=S.indexOf(L)===-1,k&&(L=S[0],v+="Z")}for(L=0;L<T.paths.length;L++)v+=m.smoothclosed(T.paths[L],T.smoothing);return v}function A(T,w,v,L,S){var k=s.ensureSingle(T,"g","contourlines"),P=S.showlines!==!1,O=S.showlabels,F=P&&O,I=N.createLines(k,P||O,w),D=N.createLineClip(k,F,v,L.trace.uid),U=T.selectAll("g.contourlabels").data(O?[0]:[]);if(U.exit().remove(),U.enter().append("g").classed("contourlabels",!0),O){var B=[],j=[];s.clearLocationCache();var Z=N.labelFormatter(v,L),ee=m.tester.append("text").attr("data-notex",1).call(m.font,S.labelfont),q=w[0].xaxis,W=w[0].yaxis,J=q._length,le=W._length,fe=q.range,se=W.range,H=s.aggNums(Math.min,null,L.x),Y=s.aggNums(Math.max,null,L.x),ne=s.aggNums(Math.min,null,L.y),te=s.aggNums(Math.max,null,L.y),K=Math.max(q.c2p(H,!0),0),$=Math.min(q.c2p(Y,!0),J),ae=Math.max(W.c2p(te,!0),0),ie=Math.min(W.c2p(ne,!0),le),oe={};fe[0]<fe[1]?(oe.left=K,oe.right=$):(oe.left=$,oe.right=K),se[0]<se[1]?(oe.top=ae,oe.bottom=ie):(oe.top=ie,oe.bottom=ae),oe.middle=(oe.top+oe.bottom)/2,oe.center=(oe.left+oe.right)/2,B.push([[oe.left,oe.top],[oe.right,oe.top],[oe.right,oe.bottom],[oe.left,oe.bottom]]);var ue=Math.sqrt(J*J+le*le),ye=h.LABELDISTANCE*ue/Math.max(1,w.length/h.LABELINCREASE);I.each(function(ce){var me=N.calcTextOpts(ce.level,Z,ee,v);u.select(this).selectAll("path").each(function(){var xe=this,ke=s.getVisibleSegment(xe,oe,me.height/2);if(!!ke&&!(ke.len<(me.width+me.height)*h.LABELMIN))for(var Ae=Math.min(Math.ceil(ke.len/ye),h.LABELMAX),Oe=0;Oe<Ae;Oe++){var He=N.findBestTextLocation(xe,ke,me,j,oe);if(!He)break;N.addLabelData(He,me,j,B)}})}),ee.remove(),N.drawLabels(U,j,v,D,F?B:null)}O&&!P&&I.remove()}N.createLines=function(T,w,v){var L=v[0].smoothing,S=T.selectAll("g.contourlevel").data(w?v:[]);if(S.exit().remove(),S.enter().append("g").classed("contourlevel",!0),w){var k=S.selectAll("path.openline").data(function(O){return O.pedgepaths||O.edgepaths});k.exit().remove(),k.enter().append("path").classed("openline",!0),k.attr("d",function(O){return m.smoothopen(O,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=S.selectAll("path.closedline").data(function(O){return O.ppaths||O.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(O){return m.smoothclosed(O,L)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return S},N.createLineClip=function(T,w,v,L){var S=v._fullLayout._clips,k=w?"clipline"+L:null,P=S.selectAll("#"+k).data(w?[0]:[]);return P.exit().remove(),P.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),m.setClipUrl(T,k,v),P},N.labelFormatter=function(T,w){var v=T._fullLayout,L=w.trace,S=L.contours,k={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(S.labelformat)k.tickformat=S.labelformat,a(k,v);else{var P=x.extractOpts(L);if(P&&P.colorbar&&P.colorbar._axis)k=P.colorbar._axis;else{if(S.type==="constraint"){var O=S.value;Array.isArray(O)?k.range=[O[0],O[O.length-1]]:k.range=[O,O]}else k.range=[S.start,S.end],k.nticks=(S.end-S.start)/S.size;k.range[0]===k.range[1]&&(k.range[1]+=k.range[0]||1),k.nticks||(k.nticks=1e3),a(k,v),i.prepTicks(k),k._tmin=null,k._tmax=null}}return function(F){return i.tickText(k,F).text}},N.calcTextOpts=function(T,w,v,L){var S=w(T);v.text(S).call(t.convertToTspans,L);var k=v.node(),P=m.bBox(k,!0);return{text:S,width:P.width,height:P.height,fontSize:+k.style["font-size"].replace("px",""),level:T,dy:(P.top+P.bottom)/2}},N.findBestTextLocation=function(T,w,v,L,S){var k=v.width,P,O,F,I,D;w.isClosed?(O=w.len/d.INITIALSEARCHPOINTS,P=w.min+O/2,F=w.max):(O=(w.len-k)/(d.INITIALSEARCHPOINTS+1),P=w.min+O+k/2,F=w.max-(O+k)/2);for(var U=1/0,B=0;B<d.ITERATIONS;B++){for(var j=P;j<F;j+=O){var Z=s.getTextLocation(T,w.total,j,k),ee=b(Z,v,L,S);ee<U&&(U=ee,D=Z,I=j)}if(U>d.MAXCOST*2)break;B&&(O/=2),P=I-O/2,F=P+O*1.5}if(U<=d.MAXCOST)return D};function b(T,w,v,L){var S=w.width/2,k=w.height/2,P=T.x,O=T.y,F=T.theta,I=Math.cos(F)*S,D=Math.sin(F)*S,U=(P>L.center?L.right-P:P-L.left)/(I+Math.abs(Math.sin(F)*k)),B=(O>L.middle?L.bottom-O:O-L.top)/(Math.abs(D)+Math.cos(F)*k);if(U<1||B<1)return 1/0;var j=d.EDGECOST*(1/(U-1)+1/(B-1));j+=d.ANGLECOST*F*F;for(var Z=P-I,ee=O-D,q=P+I,W=O+D,J=0;J<v.length;J++){var le=v[J],fe=Math.cos(le.theta)*le.width/2,se=Math.sin(le.theta)*le.width/2,H=s.segmentDistance(Z,ee,q,W,le.x-fe,le.y-se,le.x+fe,le.y+se)*2/(w.height+le.height),Y=le.level===w.level,ne=Y?d.SAMELEVELDISTANCE:1;if(H<=ne)return 1/0;var te=d.NEIGHBORCOST*(Y?d.SAMELEVELFACTOR:1);j+=te/(H-ne)}return j}N.addLabelData=function(T,w,v,L){var S=w.fontSize,k=w.width+S/3,P=Math.max(0,w.height-S/3),O=T.x,F=T.y,I=T.theta,D=Math.sin(I),U=Math.cos(I),B=function(Z,ee){return[O+Z*U-ee*D,F+Z*D+ee*U]},j=[B(-k/2,-P/2),B(-k/2,P/2),B(k/2,P/2),B(k/2,-P/2)];v.push({text:w.text,x:O,y:F,dy:w.dy,theta:I,level:w.level,width:k,height:P}),L.push(j)},N.drawLabels=function(T,w,v,L,S){var k=T.selectAll("text").data(w,function(I){return I.text+","+I.x+","+I.y+","+I.theta});if(k.exit().remove(),k.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(I){var D=I.x+Math.sin(I.theta)*I.dy,U=I.y-Math.cos(I.theta)*I.dy;u.select(this).text(I.text).attr({x:D,y:U,transform:"rotate("+180*I.theta/Math.PI+" "+D+" "+U+")"}).call(t.convertToTspans,v)}),S){for(var P="",O=0;O<S.length;O++)P+="M"+S[O].join("L")+"Z";var F=s.ensureSingle(L,"path","");F.attr("d",P)}};function M(T,w,v,L,S){var k=L.trace,P=v._fullLayout._clips,O="clip"+k.uid,F=P.selectAll("#"+O).data(k.connectgaps?[]:[0]);if(F.enter().append("clipPath").classed("contourclip",!0).attr("id",O),F.exit().remove(),k.connectgaps===!1){var I={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:w.xaxis,yaxis:w.yaxis,x:L.x,y:L.y,z:_(L),smoothing:0};n([I]),f([I]),c([I],{type:"levels"});var D=s.ensureSingle(F,"path","");D.attr("d",(I.prefixBoundary?"M"+S.join("L")+"Z":"")+g(I,S))}else O=null;m.setClipUrl(T,O,v)}function _(T){var w=T.trace._emptypoints,v=[],L=T.z.length,S=T.z[0].length,k,P=[],O;for(k=0;k<S;k++)P.push(1);for(k=0;k<L;k++)v.push(P.slice());for(k=0;k<w.length;k++)O=w[k],v[O[0]][O[1]]=0;return T.zmask=v,v}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../lib");z.exports=function(t,i){var a=t.contours;if(t.autocontour){var r=t.zmin,n=t.zmax;(t.zauto||r===void 0)&&(r=s.aggNums(Math.min,null,i)),(t.zauto||n===void 0)&&(n=s.aggNums(Math.max,null,i));var f=m(r,n,t.ncontours);a.size=f.dtick,a.start=u.tickFirst(f),f.range.reverse(),a.end=u.tickFirst(f),a.start===r&&(a.start+=a.size),a.end===n&&(a.end-=a.size),a.start>a.end&&(a.start=a.end=(a.start+a.end)/2),t._input.contours||(t._input.contours={}),s.extendFlat(t._input.contours,{start:a.start,end:a.end,size:a.size}),t._input.autocontour=!0}else if(a.type!=="constraint"){var l=a.start,o=a.end,c=t._input.contours;if(l>o&&(a.start=c.start=o,o=a.end=c.end=l,l=a.start),!(a.size>0)){var h;l===o?h=1:h=m(l,o,t.ncontours).dtick,c.size=a.size=h}}};function m(x,t,i){var a={type:"linear",range:[x,t]};return u.autoTicks(a,(t-x)/(i||15)),a}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../heatmap/style"),x=e("./make_color_map");z.exports=function(i){var a=u.select(i).selectAll("g.contour");a.style("opacity",function(r){return r[0].trace.opacity}),a.each(function(r){var n=u.select(this),f=r[0].trace,l=f.contours,o=f.line,c=l.size||1,h=l.start,d=l.type==="constraint",p=!d&&l.coloring==="lines",y=!d&&l.coloring==="fill",g=p||y?x(f):null;n.selectAll("g.contourlevel").each(function(M){u.select(this).selectAll("path").call(s.lineGroupStyle,o.width,p?g(M.level):o.color,o.dash)});var A=l.labelfont;if(n.selectAll("g.contourlabels text").each(function(M){s.font(u.select(this),{family:A.family,size:A.size,color:A.color||(p?g(M.level):o.color)})}),d)n.selectAll("g.contourfill path").style("fill",f.fillcolor);else if(y){var b;n.selectAll("g.contourfill path").style("fill",function(M){return b===void 0&&(b=M.level),g(M.level+.5*c)}),b===void 0&&(b=h),n.selectAll("g.contourbg path").style("fill",g(b-.5*c))}}),m(i)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(e,z,N){var u=e("../../components/colorscale/defaults"),s=e("./label_defaults");z.exports=function(x,t,i,a,r){var n=i("contours.coloring"),f,l="";n==="fill"&&(f=i("contours.showlines")),f!==!1&&(n!=="lines"&&(l=i("line.color","#000")),i("line.width",.5),i("line.dash")),n!=="none"&&(x.showlegend!==!0&&(t.showlegend=!1),t._dfltShowLegend=!1,u(x,t,a,i,{prefix:"",cLetter:"z"})),i("line.smoothing"),s(i,a,l,r)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(e,z,N){var u=e("../heatmap/attributes"),s=e("../contour/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../lib/extend").extendFlat,t=s.contours;z.exports=x({carpet:{valType:"string",editType:"calc"},z:u.z,a:u.x,a0:u.x0,da:u.dx,b:u.y,b0:u.y0,db:u.dy,text:u.text,hovertext:u.hovertext,transpose:u.transpose,atype:u.xtype,btype:u.ytype,fillcolor:s.fillcolor,autocontour:s.autocontour,ncontours:s.ncontours,contours:{type:t.type,start:t.start,end:t.end,size:t.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:t.showlines,showlabels:t.showlabels,labelfont:t.labelfont,labelformat:t.labelformat,operation:t.operation,value:t.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:s.line.color,width:s.line.width,dash:s.line.dash,smoothing:s.line.smoothing,editType:"plot"},transforms:void 0},m("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(e,z,N){var u=e("../../components/colorscale/calc"),s=e("../../lib"),m=e("../heatmap/convert_column_xyz"),x=e("../heatmap/clean_2d_array"),t=e("../heatmap/interp2d"),i=e("../heatmap/find_empties"),a=e("../heatmap/make_bound_array"),r=e("./defaults"),n=e("../carpet/lookup_carpetid"),f=e("../contour/set_contours");z.exports=function(c,h){var d=h._carpetTrace=n(c,h);if(!(!d||!d.visible||d.visible==="legendonly")){if(!h.a||!h.b){var p=c.data[d.index],y=c.data[h.index];y.a||(y.a=p.a),y.b||(y.b=p.b),r(y,h,h._defaultColor,c._fullLayout)}var g=l(c,h);return f(h,h._z),g}};function l(o,c){var h=c._carpetTrace,d=h.aaxis,p=h.baxis,y,g,A,b,M,_,T;d._minDtick=0,p._minDtick=0,s.isArray1D(c.z)&&m(c,d,p,"a","b",["z"]),y=c._a=c._a||c.a,b=c._b=c._b||c.b,y=y?d.makeCalcdata(c,"_a"):[],b=b?p.makeCalcdata(c,"_b"):[],g=c.a0||0,A=c.da||1,M=c.b0||0,_=c.db||1,T=c._z=x(c._z||c.z,c.transpose),c._emptypoints=i(T),t(T,c._emptypoints);var w=s.maxRowLength(T),v=c.xtype==="scaled"?"":y,L=a(c,v,g,A,w,d),S=c.ytype==="scaled"?"":b,k=a(c,S,M,_,T.length,p),P={a:L,b:k,z:T};return c.contours.type==="levels"&&c.contours.coloring!=="none"&&u(o,c,{vals:T,containerStr:"",cLetter:"z"}),[P]}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(e,z,N){var u=e("../../lib"),s=e("../heatmap/xyz_defaults"),m=e("./attributes"),x=e("../contour/constraint_defaults"),t=e("../contour/contours_defaults"),i=e("../contour/style_defaults");z.exports=function(r,n,f,l){function o(p,y){return u.coerce(r,n,m,p,y)}function c(p){return u.coerce2(r,n,m,p)}if(o("carpet"),r.a&&r.b){var h=s(r,n,o,l,"a","b");if(!h){n.visible=!1;return}o("text");var d=o("contours.type")==="constraint";d?x(r,n,o,l,f,{hasHover:!1}):(t(r,n,o,c),i(r,n,o,l,{hasHover:!1}))}else n._defaultColor=f,n._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../contour/colorbar"),calc:e("./calc"),plot:e("./plot"),style:e("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(e,z,N){var u=e("@plotly/d3"),s=e("../carpet/map_1d_array"),m=e("../carpet/makepath"),x=e("../../components/drawing"),t=e("../../lib"),i=e("../contour/make_crossings"),a=e("../contour/find_all_paths"),r=e("../contour/plot"),n=e("../contour/constants"),f=e("../contour/convert_to_constraints"),l=e("../contour/empty_pathinfo"),o=e("../contour/close_boundaries"),c=e("../carpet/lookup_carpetid"),h=e("../carpet/axis_aligned_line");z.exports=function(v,L,S,k){var P=L.xaxis,O=L.yaxis;t.makeTraceGroups(k,S,"contour").each(function(F){var I=u.select(this),D=F[0],U=D.trace,B=U._carpetTrace=c(v,U),j=v.calcdata[B.index][0];if(!B.visible||B.visible==="legendonly")return;var Z=D.a,ee=D.b,q=U.contours,W=l(q,L,D),J=q.type==="constraint",le=q._operation,fe=J?le==="="?"lines":"fill":q.coloring;function se(ye){var ce=B.ab2xy(ye[0],ye[1],!0);return[P.c2p(ce[0]),O.c2p(ce[1])]}var H=[[Z[0],ee[ee.length-1]],[Z[Z.length-1],ee[ee.length-1]],[Z[Z.length-1],ee[0]],[Z[0],ee[0]]];i(W);var Y=(Z[Z.length-1]-Z[0])*1e-8,ne=(ee[ee.length-1]-ee[0])*1e-8;a(W,Y,ne);var te=W;q.type==="constraint"&&(te=f(W,le)),d(W,se);var K,$,ae,ie,oe=[];for(ie=j.clipsegments.length-1;ie>=0;ie--)K=j.clipsegments[ie],$=s([],K.x,P.c2p),ae=s([],K.y,O.c2p),$.reverse(),ae.reverse(),oe.push(m($,ae,K.bicubic));var ue="M"+oe.join("L")+"Z";M(I,j.clipsegments,P,O,J,fe),_(U,I,P,O,te,H,se,B,j,fe,ue),p(I,W,v,D,q,L,B),x.setClipUrl(I,B._clipPathId,v)})};function d(w,v){var L,S,k,P,O,F,I,D,U;for(L=0;L<w.length;L++){for(P=w[L],O=P.pedgepaths=[],F=P.ppaths=[],S=0;S<P.edgepaths.length;S++){for(U=P.edgepaths[S],I=[],k=0;k<U.length;k++)I[k]=v(U[k]);O.push(I)}for(S=0;S<P.paths.length;S++){for(U=P.paths[S],D=[],k=0;k<U.length;k++)D[k]=v(U[k]);F.push(D)}}}function p(w,v,L,S,k,P,O){var F=t.ensureSingle(w,"g","contourlines"),I=k.showlines!==!1,D=k.showlabels,U=I&&D,B=r.createLines(F,I||D,v),j=r.createLineClip(F,U,L,S.trace.uid),Z=w.selectAll("g.contourlabels").data(D?[0]:[]);if(Z.exit().remove(),Z.enter().append("g").classed("contourlabels",!0),D){var ee=P.xaxis,q=P.yaxis,W=ee._length,J=q._length,le=[[[0,0],[W,0],[W,J],[0,J]]],fe=[];t.clearLocationCache();var se=r.labelFormatter(L,S),H=x.tester.append("text").attr("data-notex",1).call(x.font,k.labelfont),Y={left:0,right:W,center:W/2,top:0,bottom:J,middle:J/2},ne=Math.sqrt(W*W+J*J),te=n.LABELDISTANCE*ne/Math.max(1,v.length/n.LABELINCREASE);B.each(function(K){var $=r.calcTextOpts(K.level,se,H,L);u.select(this).selectAll("path").each(function(ae){var ie=this,oe=t.getVisibleSegment(ie,Y,$.height/2);if(!!oe&&(y(ie,ae,K,oe,O,$.height),!(oe.len<($.width+$.height)*n.LABELMIN)))for(var ue=Math.min(Math.ceil(oe.len/te),n.LABELMAX),ye=0;ye<ue;ye++){var ce=r.findBestTextLocation(ie,oe,$,fe,Y);if(!ce)break;r.addLabelData(ce,$,fe,le)}})}),H.remove(),r.drawLabels(Z,fe,L,j,U?le:null)}D&&!I&&B.remove()}function y(w,v,L,S,k,P){for(var O,F=0;F<L.pedgepaths.length;F++)v===L.pedgepaths[F]&&(O=L.edgepaths[F]);if(!O)return;var I=k.a[0],D=k.a[k.a.length-1],U=k.b[0],B=k.b[k.b.length-1];function j(J,le){var fe=0,se,H=.1;return(Math.abs(J[0]-I)<H||Math.abs(J[0]-D)<H)&&(se=A(k.dxydb_rough(J[0],J[1],H)),fe=Math.max(fe,P*b(le,se)/2)),(Math.abs(J[1]-U)<H||Math.abs(J[1]-B)<H)&&(se=A(k.dxyda_rough(J[0],J[1],H)),fe=Math.max(fe,P*b(le,se)/2)),fe}var Z=g(w,0,1),ee=g(w,S.total,S.total-1),q=j(O[0],Z),W=S.total-j(O[O.length-1],ee);S.min<q&&(S.min=q),S.max>W&&(S.max=W),S.len=S.max-S.min}function g(w,v,L){var S=w.getPointAtLength(v),k=w.getPointAtLength(L),P=k.x-S.x,O=k.y-S.y,F=Math.sqrt(P*P+O*O);return[P/F,O/F]}function A(w){var v=Math.sqrt(w[0]*w[0]+w[1]*w[1]);return[w[0]/v,w[1]/v]}function b(w,v){var L=Math.abs(w[0]*v[0]+w[1]*v[1]),S=Math.sqrt(1-L*L);return S/L}function M(w,v,L,S,k,P){var O,F,I,D,U=t.ensureSingle(w,"g","contourbg"),B=U.selectAll("path").data(P==="fill"&&!k?[0]:[]);B.enter().append("path"),B.exit().remove();var j=[];for(D=0;D<v.length;D++)O=v[D],F=s([],O.x,L.c2p),I=s([],O.y,S.c2p),j.push(m(F,I,O.bicubic));B.attr("d","M"+j.join("L")+"Z").style("stroke","none")}function _(w,v,L,S,k,P,O,F,I,D,U){var B=D==="fill";B&&o(k,w.contours);var j=t.ensureSingle(v,"g","contourfill"),Z=j.selectAll("path").data(B?k:[]);Z.enter().append("path"),Z.exit().remove(),Z.each(function(ee){var q=(ee.prefixBoundary?U:"")+T(w,ee,P,O,F,I,L,S);q?u.select(this).attr("d",q).style("stroke","none"):u.select(this).remove()})}function T(w,v,L,S,k,P,O,F){var I,D="",U=v.edgepaths.map(function(ae,ie){return ie}),B=!0,j,Z,ee,q,W,J,le=Math.abs(L[0][0]-L[2][0])*1e-4,fe=Math.abs(L[0][1]-L[2][1])*1e-4;function se(ae){return Math.abs(ae[1]-L[0][1])<fe}function H(ae){return Math.abs(ae[1]-L[2][1])<fe}function Y(ae){return Math.abs(ae[0]-L[0][0])<le}function ne(ae){return Math.abs(ae[0]-L[2][0])<le}function te(ae,ie){var oe,ue,ye,ce,me="";for(se(ae)&&!ne(ae)||H(ae)&&!Y(ae)?(ce=k.aaxis,ye=h(k,P,[ae[0],ie[0]],.5*(ae[1]+ie[1]))):(ce=k.baxis,ye=h(k,P,.5*(ae[0]+ie[0]),[ae[1],ie[1]])),oe=1;oe<ye.length;oe++)for(me+=ce.smoothing?"C":"L",ue=0;ue<ye[oe].length;ue++){var xe=ye[oe][ue];me+=[O.c2p(xe[0]),F.c2p(xe[1])]+" "}return me}for(I=0,j=null;U.length;){var K=v.edgepaths[I][0];for(j&&(D+=te(j,K)),J=x.smoothopen(v.edgepaths[I].map(S),v.smoothing),D+=B?J:J.replace(/^M/,"L"),U.splice(U.indexOf(I),1),j=v.edgepaths[I][v.edgepaths[I].length-1],q=-1,ee=0;ee<4;ee++){if(!j){t.log("Missing end?",I,v);break}for(se(j)&&!ne(j)?Z=L[1]:Y(j)?Z=L[0]:H(j)?Z=L[3]:ne(j)&&(Z=L[2]),W=0;W<v.edgepaths.length;W++){var $=v.edgepaths[W][0];Math.abs(j[0]-Z[0])<le?Math.abs(j[0]-$[0])<le&&($[1]-j[1])*(Z[1]-$[1])>=0&&(Z=$,q=W):Math.abs(j[1]-Z[1])<fe?Math.abs(j[1]-$[1])<fe&&($[0]-j[0])*(Z[0]-$[0])>=0&&(Z=$,q=W):t.log("endpt to newendpt is not vert. or horz.",j,Z,$)}if(q>=0)break;D+=te(j,Z),j=Z}if(q===v.edgepaths.length){t.log("unclosed perimeter path");break}I=q,B=U.indexOf(I)===-1,B&&(I=U[0],D+=te(j,Z)+"Z",j=null)}for(I=0;I<v.paths.length;I++)D+=x.smoothclosed(v.paths[I].map(S),v.smoothing);return D}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(e,z,N){var u=e("../../components/colorscale/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../plots/attributes"),x=e("../scattermapbox/attributes"),t=e("../../lib/extend").extendFlat;z.exports=t({lon:x.lon,lat:x.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:x.text,hovertext:x.hovertext,hoverinfo:t({},m.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:s(),showlegend:t({},m.showlegend,{dflt:!1})},u("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib").isArrayOrTypedArray,m=e("../../constants/numerical").BADNUM,x=e("../../components/colorscale/calc"),t=e("../../lib")._;z.exports=function(a,r){for(var n=r._length,f=new Array(n),l=r.z,o=s(l)&&l.length,c=0;c<n;c++){var h=f[c]={},d=r.lon[c],p=r.lat[c];if(h.lonlat=u(d)&&u(p)?[+d,+p]:[m,m],o){var y=l[c];h.z=u(y)?y:m}}return x(a,r,{vals:o?l:[0,1],containerStr:"",cLetter:"z"}),n&&(f[0].t={labels:{lat:t(a,"lat:")+" ",lon:t(a,"lon:")+" "}}),f}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../components/color"),x=e("../../components/colorscale"),t=e("../../constants/numerical").BADNUM,i=e("../../lib/geojson_utils").makeBlank;z.exports=function(r){var n=r[0].trace,f=n.visible===!0&&n._length!==0,l={layout:{visibility:"none"},paint:{}},o=n._opts={heatmap:l,geojson:i()};if(!f)return o;var c=[],h,d=n.z,p=n.radius,y=s.isArrayOrTypedArray(d)&&d.length,g=s.isArrayOrTypedArray(p);for(h=0;h<r.length;h++){var A=r[h],b=A.lonlat;if(b[0]!==t){var M={};if(y){var _=A.z;M.z=_!==t?_:0}g&&(M.r=u(p[h])&&p[h]>0?+p[h]:0),c.push({type:"Feature",geometry:{type:"Point",coordinates:b},properties:M})}}var T=x.extractOpts(n),w=T.reversescale?x.flipScale(T.colorscale):T.colorscale,v=w[0][1],L=m.opacity(v)<1?v:m.addOpacity(v,0),S=["interpolate",["linear"],["heatmap-density"],0,L];for(h=1;h<w.length;h++)S.push(w[h][0],w[h][1]);var k=["interpolate",["linear"],["get","z"],T.min,0,T.max,1];return s.extendFlat(o.heatmap.paint,{"heatmap-weight":y?k:1/(T.max-T.min),"heatmap-color":S,"heatmap-radius":g?{type:"identity",property:"r"}:n.radius,"heatmap-opacity":n.opacity}),o.geojson={type:"FeatureCollection",features:c},o.heatmap.layout.visibility="visible",o}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");z.exports=function(t,i,a,r){function n(c,h){return u.coerce(t,i,m,c,h)}var f=n("lon")||[],l=n("lat")||[],o=Math.min(f.length,l.length);if(!o){i.visible=!1;return}i._length=o,n("z"),n("radius"),n("below"),n("text"),n("hovertext"),n("hovertemplate"),s(t,i,r,n,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(e,z,N){z.exports=function(s,m){return s.lon=m.lon,s.lat=m.lat,s.z=m.z,s}},{}],767:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../scattermapbox/hover").hoverPoints,m=e("../scattermapbox/hover").getExtraText;z.exports=function(t,i,a){var r=s(t,i,a);if(!!r){var n=r[0],f=n.cd,l=f[0].trace,o=f[n.index];if(delete n.color,"z"in o){var c=n.subplot.mockAxis;n.z=o.z,n.zLabel=u.tickText(c,c.c2l(o.z),"hover").text}return n.extraText=m(l,o,f[0].t.labels),[n]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),formatLabels:e("../scattermapbox/format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover"),eventData:e("./event_data"),getBelow:function(u,s){for(var m=s.getMapLayers(),x=0;x<m.length;x++){var t=m[x],i=t.id;if(t.type==="symbol"&&typeof i=="string"&&i.indexOf("plotly-")===-1)return i}},moduleType:"trace",name:"densitymapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(e,z,N){var u=e("./convert"),s=e("../../plots/mapbox/constants").traceLayerPrefix;function m(t,i){this.type="densitymapbox",this.subplot=t,this.uid=i,this.sourceId="source-"+i,this.layerList=[["heatmap",s+i+"-heatmap"]],this.below=null}var x=m.prototype;x.update=function(t){var i=this.subplot,a=this.layerList,r=u(t),n=i.belowLookup["trace-"+this.uid];i.map.getSource(this.sourceId).setData(r.geojson),n!==this.below&&(this._removeLayers(),this._addLayers(r,n),this.below=n);for(var f=0;f<a.length;f++){var l=a[f],o=l[0],c=l[1],h=r[o];i.setOptions(c,"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&i.setOptions(c,"setPaintProperty",h.paint)}},x._addLayers=function(t,i){for(var a=this.subplot,r=this.layerList,n=this.sourceId,f=0;f<r.length;f++){var l=r[f],o=l[0],c=t[o];a.addLayer({type:o,id:l[1],source:n,layout:c.layout,paint:c.paint},i)}},x._removeLayers=function(){for(var t=this.subplot.map,i=this.layerList,a=i.length-1;a>=0;a--)t.removeLayer(i[a][1])},x.dispose=function(){var t=this.subplot.map;this._removeLayers(),t.removeSource(this.sourceId)},z.exports=function(i,a){var r=a[0].trace,n=new m(i,r.uid),f=n.sourceId,l=u(a),o=n.below=i.belowLookup["trace-"+r.uid];return i.map.addSource(f,{type:"geojson",data:l.geojson}),n._addLayers(l,o),n}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;u.mergeArray(x.text,m,"tx"),u.mergeArray(x.hovertext,m,"htx");var i=x.marker;if(i){u.mergeArray(i.opacity,m,"mo"),u.mergeArray(i.color,m,"mc");var a=i.line;a&&(u.mergeArray(a.color,m,"mlc"),u.mergeArrayCastPositive(a.width,m,"mlw"))}}},{"../../lib":503}],771:[function(e,z,N){var u=e("../bar/attributes"),s=e("../scatter/attributes").line,m=e("../../plots/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("./constants"),r=e("../../lib/extend").extendFlat,n=e("../../components/color");z.exports={x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:u.hovertext,hovertemplate:t({},{keys:a.eventDataKeys}),hoverinfo:r({},m.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:i({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),text:u.text,textposition:u.textposition,insidetextanchor:r({},u.insidetextanchor,{dflt:"middle"}),textangle:r({},u.textangle,{dflt:0}),textfont:u.textfont,insidetextfont:u.insidetextfont,outsidetextfont:u.outsidetextfont,constraintext:u.constraintext,cliponaxis:u.cliponaxis,orientation:r({},u.orientation,{}),offset:r({},u.offset,{arrayOk:!1}),width:r({},u.width,{arrayOk:!1}),marker:f(),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:r({},s.color,{dflt:n.defaultLine}),width:r({},s.width,{dflt:0,editType:"plot"}),dash:s.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup};function f(){var l=r({},u.marker);return delete l.pattern,l}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/align_period"),m=e("./arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;z.exports=function(r,n){var f=u.getFromId(r,n.xaxis||"x"),l=u.getFromId(r,n.yaxis||"y"),o,c,h,d,p,y,g,A;n.orientation==="h"?(o=f.makeCalcdata(n,"x"),h=l.makeCalcdata(n,"y"),d=s(n,l,"y",h),p=!!n.yperiodalignment,y="y"):(o=l.makeCalcdata(n,"y"),h=f.makeCalcdata(n,"x"),d=s(n,f,"x",h),p=!!n.xperiodalignment,y="x"),c=d.vals;var b=Math.min(c.length,o.length),M=new Array(b);for(n._base=[],g=0;g<b;g++){o[g]<0&&(o[g]=t);var _=!1;o[g]!==t&&g+1<b&&o[g+1]!==t&&(_=!0),A=M[g]={p:c[g],s:o[g],cNext:_},n._base[g]=-.5*A.s,p&&(M[g].orig_p=h[g],M[g][y+"End"]=d.ends[g],M[g][y+"Start"]=d.starts[g]),n.ids&&(A.id=String(n.ids[g])),g===0&&(M[0].vTotal=0),M[0].vTotal+=i(A.s),A.begR=i(A.s)/i(M[0].s)}var T;for(g=0;g<b;g++)A=M[g],A.s!==t&&(A.sumR=A.s/M[0].vTotal,A.difR=T!==void 0?A.s/T:1,T=A.s);return m(M,n),x(M,n),M};function i(a){return a===t?0:a}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(e,z,N){z.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(e,z,N){var u=e("../bar/cross_trace_calc").setGroupPositions;z.exports=function(m,x){var t=m._fullLayout,i=m._fullData,a=m.calcdata,r=x.xaxis,n=x.yaxis,f=[],l=[],o=[],c,h;for(h=0;h<i.length;h++){var d=i[h],p=d.orientation==="h";d.visible===!0&&d.xaxis===r._id&&d.yaxis===n._id&&d.type==="funnel"&&(c=a[h],p?o.push(c):l.push(c),f.push(c))}var y={mode:t.funnelmode,norm:t.funnelnorm,gap:t.funnelgap,groupgap:t.funnelgroupgap};for(u(m,r,n,l,y),u(m,n,r,o,y),h=0;h<f.length;h++){c=f[h];for(var g=0;g<c.length;g++)g+1<c.length&&(c[g].nextP0=c[g+1].p0,c[g].nextS0=c[g+1].s0,c[g].nextP1=c[g+1].p1,c[g].nextS1=c[g+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(e,z,N){var u=e("../../lib"),s=e("../bar/defaults").handleGroupingDefaults,m=e("../bar/defaults").handleText,x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),i=e("./attributes"),a=e("../../components/color");function r(l,o,c,h){function d(_,T){return u.coerce(l,o,i,_,T)}var p=x(l,o,h,d);if(!p){o.visible=!1;return}t(l,o,h,d),d("xhoverformat"),d("yhoverformat"),d("orientation",o.y&&!o.x?"v":"h"),d("offset"),d("width");var y=d("text");d("hovertext"),d("hovertemplate");var g=d("textposition");m(l,o,h,d,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o.textposition!=="none"&&!o.texttemplate&&d("textinfo",Array.isArray(y)?"text+value":"value");var A=d("marker.color",c);d("marker.line.color",a.defaultLine),d("marker.line.width");var b=d("connector.visible");if(b){d("connector.fillcolor",n(A));var M=d("connector.line.width");M&&(d("connector.line.color"),d("connector.line.dash"))}}function n(l){var o=u.isArrayOrTypedArray(l)?"#000":l;return a.addOpacity(o,.5*a.opacity(o))}function f(l,o){var c,h;function d(y){return u.coerce(h._input,h,i,y)}if(o.funnelmode==="group")for(var p=0;p<l.length;p++)h=l[p],c=h._input,s(c,h,o,d)}z.exports={supplyDefaults:r,crossTraceDefaults:f}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(e,z,N){z.exports=function(s,m){return s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,"percentInitial"in m&&(s.percentInitial=m.percentInitial),"percentPrevious"in m&&(s.percentPrevious=m.percentPrevious),"percentTotal"in m&&(s.percentTotal=m.percentTotal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s}},{}],777:[function(e,z,N){var u=e("../../components/color").opacity,s=e("../bar/hover").hoverOnBars,m=e("../../lib").formatPercent;z.exports=function(i,a,r,n,f){var l=s(i,a,r,n,f);if(!!l){var o=l.cd,c=o[0].trace,h=c.orientation==="h",d=l.index,p=o[d],y=h?"x":"y";l[y+"LabelVal"]=p.s,l.percentInitial=p.begR,l.percentInitialLabel=m(p.begR,1),l.percentPrevious=p.difR,l.percentPreviousLabel=m(p.difR,1),l.percentTotal=p.sumR,l.percentTotalLabel=m(p.sumR,1);var g=p.hi||c.hoverinfo,A=[];if(g&&g!=="none"&&g!=="skip"){var b=g==="all",M=g.split("+"),_=function(T){return b||M.indexOf(T)!==-1};_("percent initial")&&A.push(l.percentInitialLabel+" of initial"),_("percent previous")&&A.push(l.percentPreviousLabel+" of previous"),_("percent total")&&A.push(l.percentTotalLabel+" of total")}return l.extraText=A.join("<br>"),l.color=x(c,p),[l]}};function x(t,i){var a=t.marker,r=i.mc||a.color,n=i.mlc||a.line.color,f=i.mlw||a.line.width;if(u(r))return r;if(u(n)&&f)return n}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(e,z,N){z.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(e,z,N){z.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(m,x,t){var i=!1;function a(f,l){return u.coerce(m,x,s,f,l)}for(var r=0;r<t.length;r++){var n=t[r];if(n.visible&&n.type==="funnel"){i=!0;break}}i&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),i=e("../bar/uniform_text").clearMinTextSize;z.exports=function(l,o,c,h){var d=l._fullLayout;i("funnel",d),a(l,o,c,h),r(l,o,c,h),t.plot(l,o,c,h,{mode:d.funnelmode,norm:d.funnelmode,gap:d.funnelgap,groupgap:d.funnelgroupgap})};function a(f,l,o,c){var h=l.xaxis,d=l.yaxis;s.makeTraceGroups(c,o,"trace bars").each(function(p){var y=u.select(this),g=p[0].trace,A=s.ensureSingle(y,"g","regions");if(!g.connector||!g.connector.visible){A.remove();return}var b=g.orientation==="h",M=A.selectAll("g.region").data(s.identity);M.enter().append("g").classed("region",!0),M.exit().remove();var _=M.size();M.each(function(T,w){if(!(w!==_-1&&!T.cNext)){var v=n(T,h,d,b),L=v[0],S=v[1],k="";L[0]!==x&&S[0]!==x&&L[1]!==x&&S[1]!==x&&L[2]!==x&&S[2]!==x&&L[3]!==x&&S[3]!==x&&(b?k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2]+"H"+L[3]+"L"+L[1]+","+S[1]+"Z":k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3]+"V"+S[2]+"L"+L[1]+","+S[0]+"Z"),k===""&&(k="M0,0Z"),s.ensureSingle(u.select(this),"path").attr("d",k).call(m.setClipUrl,l.layerClipId,f)}})})}function r(f,l,o,c){var h=l.xaxis,d=l.yaxis;s.makeTraceGroups(c,o,"trace bars").each(function(p){var y=u.select(this),g=p[0].trace,A=s.ensureSingle(y,"g","lines");if(!g.connector||!g.connector.visible||!g.connector.line.width){A.remove();return}var b=g.orientation==="h",M=A.selectAll("g.line").data(s.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var _=M.size();M.each(function(T,w){if(!(w!==_-1&&!T.cNext)){var v=n(T,h,d,b),L=v[0],S=v[1],k="";L[3]!==void 0&&S[3]!==void 0&&(b?(k+="M"+L[0]+","+S[1]+"L"+L[2]+","+S[2],k+="M"+L[1]+","+S[1]+"L"+L[3]+","+S[2]):(k+="M"+L[1]+","+S[1]+"L"+L[2]+","+S[3],k+="M"+L[1]+","+S[0]+"L"+L[2]+","+S[2])),k===""&&(k="M0,0Z"),s.ensureSingle(u.select(this),"path").attr("d",k).call(m.setClipUrl,l.layerClipId,f)}})})}function n(f,l,o,c){var h=[],d=[],p=c?l:o,y=c?o:l;return h[0]=p.c2p(f.s0,!0),d[0]=y.c2p(f.p0,!0),h[1]=p.c2p(f.s1,!0),d[1]=y.c2p(f.p1,!0),h[2]=p.c2p(f.nextS0,!0),d[2]=y.c2p(f.nextP0,!0),h[3]=p.c2p(f.nextS1,!0),d[3]=y.c2p(f.nextP1,!0),c?[h,d]:[d,h]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color"),x=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),i=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function r(n,f,l){var o=l||u.select(n).selectAll("g.funnellayer").selectAll("g.trace");i(n,o,"funnel"),o.style("opacity",function(c){return c[0].trace.opacity}),o.each(function(c){var h=u.select(this),d=c[0].trace;h.selectAll(".point > path").each(function(p){if(!p.isBlank){var y=d.marker;u.select(this).call(m.fill,p.mc||y.color).call(m.stroke,p.mlc||y.line.color).call(s.dashLine,y.line.dash,p.mlw||y.line.width).style("opacity",d.selectedpoints&&!p.selected?x:1)}}),a(h,d,n),h.selectAll(".regions").each(function(){u.select(this).selectAll("path").style("stroke-width",0).call(m.fill,d.connector.fillcolor)}),h.selectAll(".lines").each(function(){var p=d.connector.line;s.lineGroupStyle(u.select(this).selectAll("path"),p.width,p.color,p.dash)})})}z.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(e,z,N){var u=e("../pie/attributes"),s=e("../../plots/attributes"),m=e("../../plots/domain").attributes,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../lib/extend").extendFlat;z.exports={labels:u.labels,label0:u.label0,dlabel:u.dlabel,values:u.values,marker:{colors:u.marker.colors,line:{color:i({},u.marker.line.color,{dflt:null}),width:i({},u.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:u.text,hovertext:u.hovertext,scalegroup:i({},u.scalegroup,{}),textinfo:i({},u.textinfo,{flags:["label","text","value","percent"]}),texttemplate:t({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:i({},s.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:x({},{keys:["label","color","value","text","percent"]}),textposition:i({},u.textposition,{values:["inside","none"],dflt:"inside"}),textfont:u.textfont,insidetextfont:u.insidetextfont,title:{text:u.title.text,font:u.title.font,position:i({},u.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:m({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(e,z,N){var u=e("../../plots/plots");N.name="funnelarea",N.plot=function(s,m,x,t){u.plotBasePlot(N.name,s,m,x,t)},N.clean=function(s,m,x,t){u.cleanBasePlot(N.name,s,m,x,t)}},{"../../plots/plots":619}],785:[function(e,z,N){var u=e("../pie/calc");function s(x,t){return u.calc(x,t)}function m(x){u.crossTraceCalc(x,{type:"funnelarea"})}z.exports={calc:s,crossTraceCalc:m}},{"../pie/calc":902}],786:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../bar/defaults").handleText,t=e("../pie/defaults").handleLabelsAndValues;z.exports=function(a,r,n,f){function l(_,T){return u.coerce(a,r,s,_,T)}var o=l("labels"),c=l("values"),h=t(o,c),d=h.len;if(r._hasLabels=h.hasLabels,r._hasValues=h.hasValues,!r._hasLabels&&r._hasValues&&(l("label0"),l("dlabel")),!d){r.visible=!1;return}r._length=d;var p=l("marker.line.width");p&&l("marker.line.color",f.paper_bgcolor),l("marker.colors"),l("scalegroup");var y=l("text"),g=l("texttemplate"),A;if(g||(A=l("textinfo",Array.isArray(y)?"text+percent":"percent")),l("hovertext"),l("hovertemplate"),g||A&&A!=="none"){var b=l("textposition");x(a,r,f,l,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}m(r,f,l);var M=l("title.text");M&&(l("title.position"),u.coerceFont(l,"title.font",f.font)),l("aspectratio"),l("baseratio")}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(e,z,N){z.exports={moduleType:"trace",name:"funnelarea",basePlotModule:e("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style"),styleOne:e("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(e,z,N){var u=e("../pie/layout_attributes").hiddenlabels;z.exports={hiddenlabels:u,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("hiddenlabels"),i("funnelareacolorway",t.colorway),i("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../lib"),x=m.strScale,t=m.strTranslate,i=e("../../lib/svg_text_utils"),a=e("../bar/plot"),r=a.toMoveInsideBar,n=e("../bar/uniform_text"),f=n.recordMinTextSize,l=n.clearMinTextSize,o=e("../pie/helpers"),c=e("../pie/plot"),h=c.attachFxHandlers,d=c.determineInsideTextFont,p=c.layoutAreas,y=c.prerenderTitles,g=c.positionTitleOutside,A=c.formatSliceLabel;z.exports=function(w,v){var L=w._fullLayout;l("funnelarea",L),y(v,w),p(v,L._size),m.makeTraceGroups(L._funnelarealayer,v,"trace").each(function(S){var k=u.select(this),P=S[0],O=P.trace;_(S),k.each(function(){var F=u.select(this).selectAll("g.slice").data(S);F.enter().append("g").classed("slice",!0),F.exit().remove(),F.each(function(D,U){if(D.hidden){u.select(this).selectAll("path,g").remove();return}D.pointNumber=D.i,D.curveNumber=O.index;var B=P.cx,j=P.cy,Z=u.select(this),ee=Z.selectAll("path.surface").data([D]);ee.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Z.call(h,w,S);var q="M"+(B+D.TR[0])+","+(j+D.TR[1])+b(D.TR,D.BR)+b(D.BR,D.BL)+b(D.BL,D.TL)+"Z";ee.attr("d",q),A(w,D,P);var W=o.castOption(O.textposition,D.pts),J=Z.selectAll("g.slicetext").data(D.text&&W!=="none"?[0]:[]);J.enter().append("g").classed("slicetext",!0),J.exit().remove(),J.each(function(){var le=m.ensureSingle(u.select(this),"text","",function($){$.attr("data-notex",1)}),fe=m.ensureUniformFontSize(w,d(O,D,L.font));le.text(D.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(s.font,fe).call(i.convertToTspans,w);var se=s.bBox(le.node()),H,Y,ne,te=Math.min(D.BL[1],D.BR[1])+j,K=Math.max(D.TL[1],D.TR[1])+j;Y=Math.max(D.TL[0],D.BL[0])+B,ne=Math.min(D.TR[0],D.BR[0])+B,H=r(Y,ne,te,K,se,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"}),H.fontSize=fe.size,f(O.type,H,L),S[U].transform=H,le.attr("transform",m.getTextTransform(H))})});var I=u.select(this).selectAll("g.titletext").data(O.title.text?[0]:[]);I.enter().append("g").classed("titletext",!0),I.exit().remove(),I.each(function(){var D=m.ensureSingle(u.select(this),"text","",function(j){j.attr("data-notex",1)}),U=O.title.text;O._meta&&(U=m.templateString(U,O._meta)),D.text(U).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(s.font,O.title.font).call(i.convertToTspans,w);var B=g(P,L._size);D.attr("transform",t(B.x,B.y)+x(Math.min(1,B.scale))+t(B.tx,B.ty))})})})};function b(T,w){var v=w[0]-T[0],L=w[1]-T[1];return"l"+v+","+L}function M(T,w){return[.5*(T[0]+w[0]),.5*(T[1]+w[1])]}function _(T){if(!T.length)return;var w=T[0],v=w.trace,L=v.aspectratio,S=v.baseratio;S>.999&&(S=.999);var k=Math.pow(S,2),P=w.vTotal,O=P*k/(1-k),F=P,I=O/P;function D(){var ie=Math.sqrt(I);return{x:ie,y:-ie}}function U(){var ie=D();return[ie.x,ie.y]}var B,j=[];j.push(U());var Z,ee;for(Z=T.length-1;Z>-1;Z--)if(ee=T[Z],!ee.hidden){var q=ee.v/F;I+=q,j.push(U())}var W=1/0,J=-1/0;for(Z=0;Z<j.length;Z++)B=j[Z],W=Math.min(W,B[1]),J=Math.max(J,B[1]);for(Z=0;Z<j.length;Z++)j[Z][1]-=(J+W)/2;var le=j[j.length-1][0],fe=w.r,se=(J-W)/2,H=fe/le,Y=fe/se*L;for(w.r=Y*se,Z=0;Z<j.length;Z++)j[Z][0]*=H,j[Z][1]*=Y;B=j[0];var ne=[-B[0],B[1]],te=[B[0],B[1]],K=0;for(Z=T.length-1;Z>-1;Z--)if(ee=T[Z],!ee.hidden){K+=1;var $=j[K][0],ae=j[K][1];ee.TL=[-$,ae],ee.TR=[$,ae],ee.BL=ne,ee.BR=te,ee.pxmid=M(ee.TR,ee.BR),ne=ee.TL,te=ee.TR}}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(e,z,N){var u=e("@plotly/d3"),s=e("../pie/style_one"),m=e("../bar/uniform_text").resizeText;z.exports=function(t){var i=t._fullLayout._funnelarealayer.selectAll(".trace");m(t,i,"funnelarea"),i.each(function(a){var r=a[0],n=r.trace,f=u.select(this);f.style({opacity:n.opacity}),f.selectAll("path.surface").each(function(l){u.select(this).call(s,l,n)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(e,z,N){var u=e("../scatter/attributes"),s=e("../../plots/attributes"),m=e("../../plots/font_attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat;z.exports=r({z:{valType:"data_array",editType:"calc"},x:r({},u.x,{impliedEdits:{xtype:"array"}}),x0:r({},u.x0,{impliedEdits:{xtype:"scaled"}}),dx:r({},u.dx,{impliedEdits:{xtype:"scaled"}}),y:r({},u.y,{impliedEdits:{ytype:"array"}}),y0:r({},u.y0,{impliedEdits:{ytype:"scaled"}}),dy:r({},u.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:r({},u.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:r({},u.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:r({},u.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:r({},u.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:r({},u.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:r({},u.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:t(),texttemplate:i({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:m({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:r({},s.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../histogram2d/calc"),i=e("../../components/colorscale/calc"),a=e("./convert_column_xyz"),r=e("./clean_2d_array"),n=e("./interp2d"),f=e("./find_empties"),l=e("./make_bound_array"),o=e("../../constants/numerical").BADNUM;z.exports=function(p,y){var g=m.getFromId(p,y.xaxis||"x"),A=m.getFromId(p,y.yaxis||"y"),b=u.traceIs(y,"contour"),M=u.traceIs(y,"histogram"),_=u.traceIs(y,"gl2d"),T=b?"best":y.zsmooth,w,v,L,S,k,P,O,F,I,D,U;if(g._minDtick=0,A._minDtick=0,M)U=t(p,y),S=U.orig_x,w=U.x,v=U.x0,L=U.dx,F=U.orig_y,k=U.y,P=U.y0,O=U.dy,I=U.z;else{var B=y.z;s.isArray1D(B)?(a(y,g,A,"x","y",["z"]),w=y._x,k=y._y,B=y._z):(S=y.x?g.makeCalcdata(y,"x"):[],F=y.y?A.makeCalcdata(y,"y"):[],w=x(y,g,"x",S).vals,k=x(y,A,"y",F).vals,y._x=w,y._y=k),v=y.x0,L=y.dx,P=y.y0,O=y.dy,I=r(B,y,g,A)}(g.rangebreaks||A.rangebreaks)&&(I=h(w,k,I),M||(w=c(w),k=c(k),y._x=w,y._y=k)),!M&&(b||y.connectgaps)&&(y._emptypoints=f(I),n(I,y._emptypoints));function j(te){T=y._input.zsmooth=y.zsmooth=!1,s.warn('cannot use zsmooth: "fast": '+te)}if(T==="fast"){if(g.type==="log"||A.type==="log")j("log axis found");else if(!M){if(w.length){var Z=(w[w.length-1]-w[0])/(w.length-1),ee=Math.abs(Z/100);for(D=0;D<w.length-1;D++)if(Math.abs(w[D+1]-w[D]-Z)>ee){j("x scale is not linear");break}}if(k.length&&T==="fast"){var q=(k[k.length-1]-k[0])/(k.length-1),W=Math.abs(q/100);for(D=0;D<k.length-1;D++)if(Math.abs(k[D+1]-k[D]-q)>W){j("y scale is not linear");break}}}}var J=s.maxRowLength(I),le=y.xtype==="scaled"?"":w,fe=l(y,le,v,L,J,g),se=y.ytype==="scaled"?"":k,H=l(y,se,P,O,I.length,A);_||(y._extremes[g._id]=m.findExtremes(g,fe),y._extremes[A._id]=m.findExtremes(A,H));var Y={x:fe,y:H,z:I,text:y._text||y.text,hovertext:y._hovertext||y.hovertext};if(y.xperiodalignment&&S&&(Y.orig_x=S),y.yperiodalignment&&F&&(Y.orig_y=F),le&&le.length===fe.length-1&&(Y.xCenter=le),se&&se.length===H.length-1&&(Y.yCenter=se),M&&(Y.xRanges=U.xRanges,Y.yRanges=U.yRanges,Y.pts=U.pts),b||i(p,y,{vals:I,cLetter:"z"}),b&&y.contours&&y.contours.coloring==="heatmap"){var ne={type:y.type==="contour"?"heatmap":"histogram2d",xcalendar:y.xcalendar,ycalendar:y.ycalendar};Y.xfill=l(ne,le,v,L,J,g),Y.yfill=l(ne,se,P,O,I.length,A)}return[Y]};function c(d){for(var p=[],y=d.length,g=0;g<y;g++){var A=d[g];A!==o&&p.push(A)}return p}function h(d,p,y){for(var g=[],A=-1,b=0;b<y.length;b++)if(p[b]!==o){A++,g[A]=[];for(var M=0;M<y[b].length;M++)d[M]!==o&&g[A].push(y[b][M])}return g}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical").BADNUM;z.exports=function(t,i,a,r){var n,f,l,o,c,h;function d(M){if(!!u(M))return+M}if(i&&i.transpose){for(n=0,c=0;c<t.length;c++)n=Math.max(n,t[c].length);if(n===0)return!1;l=function(M){return M.length},o=function(M,_,T){return(M[T]||[])[_]}}else n=t.length,l=function(M,_){return M[_].length},o=function(M,_,T){return(M[_]||[])[T]};var p=function(M,_,T){return _===m||T===m?m:o(M,_,T)};function y(M){if(i&&i.type!=="carpet"&&i.type!=="contourcarpet"&&M&&M.type==="category"&&i["_"+M._id.charAt(0)].length){var _=M._id.charAt(0),T={},w=i["_"+_+"CategoryMap"]||i[_];for(c=0;c<w.length;c++)T[w[c]]=c;return function(v){var L=T[M._categories[v]];return L+1?L:m}}else return s.identity}var g=y(a),A=y(r);r&&r.type==="category"&&(n=r._categories.length);var b=new Array(n);for(c=0;c<n;c++)for(a&&a.type==="category"?f=a._categories.length:f=l(t,c),b[c]=new Array(f),h=0;h<f;h++)b[c][h]=d(p(t,A(c),g(h)));return b}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(e,z,N){z.exports={min:"zmin",max:"zmax"}},{}],796:[function(e,z,N){var u=e("../../lib"),s=e("../../constants/numerical").BADNUM,m=e("../../plots/cartesian/align_period");z.exports=function(t,i,a,r,n,f){var l=t._length,o=i.makeCalcdata(t,r),c=a.makeCalcdata(t,n);o=m(t,i,r,o).vals,c=m(t,a,n,c).vals;var h=t.text,d=h!==void 0&&u.isArray1D(h),p=t.hovertext,y=p!==void 0&&u.isArray1D(p),g,A,b=u.distinctVals(o),M=b.vals,_=u.distinctVals(c),T=_.vals,w=[],v,L,S=T.length,k=M.length;for(g=0;g<f.length;g++)w[g]=u.init2dArray(S,k);d&&(v=u.init2dArray(S,k)),y&&(L=u.init2dArray(S,k));var P=u.init2dArray(S,k);for(g=0;g<l;g++)if(o[g]!==s&&c[g]!==s){var O=u.findBin(o[g]+b.minDiff/2,M),F=u.findBin(c[g]+_.minDiff/2,T);for(A=0;A<f.length;A++){var I=f[A],D=t[I],U=w[A];U[F][O]=D[g],P[F][O]=g}d&&(v[F][O]=h[g]),y&&(L[F][O]=p[g])}for(t["_"+r]=M,t["_"+n]=T,A=0;A<f.length;A++)t["_"+f[A]]=w[A];d&&(t._text=v),y&&(t._hovertext=L),i&&i.type==="category"&&(t["_"+r+"CategoryMap"]=M.map(function(B){return i._categories[B]})),a&&a.type==="category"&&(t["_"+n+"CategoryMap"]=T.map(function(B){return a._categories[B]})),t._after2before=P}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(e,z,N){var u=e("../../lib"),s=e("./xyz_defaults"),m=e("./label_defaults"),x=e("../scatter/period_defaults"),t=e("./style_defaults"),i=e("../../components/colorscale/defaults"),a=e("./attributes");z.exports=function(n,f,l,o){function c(d,p){return u.coerce(n,f,a,d,p)}var h=s(n,f,c,o);if(!h){f.visible=!1;return}x(n,f,o,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hovertemplate"),m(c,o),t(n,f,c,o),c("hoverongaps"),c("connectgaps",u.isArray1D(f.z)&&f.zsmooth!==!1),i(n,f,o,c,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(e,z,N){var u=e("../../lib").maxRowLength;z.exports=function(m){var x=[],t={},i=[],a=m[0],r=[],n=[0,0,0],f=u(m),l,o,c,h,d,p,y,g;for(o=0;o<m.length;o++)for(l=r,r=a,a=m[o+1]||[],c=0;c<f;c++)r[c]===void 0&&(p=(r[c-1]!==void 0?1:0)+(r[c+1]!==void 0?1:0)+(l[c]!==void 0?1:0)+(a[c]!==void 0?1:0),p?(o===0&&p++,c===0&&p++,o===m.length-1&&p++,c===r.length-1&&p++,p<4&&(t[[o,c]]=[o,c,p]),x.push([o,c,p])):i.push([o,c]));for(;i.length;){for(y={},g=!1,d=i.length-1;d>=0;d--)h=i[d],o=h[0],c=h[1],p=((t[[o-1,c]]||n)[2]+(t[[o+1,c]]||n)[2]+(t[[o,c-1]]||n)[2]+(t[[o,c+1]]||n)[2])/20,p&&(y[h]=[o,c,p],i.splice(d,1),g=!0);if(!g)throw"findEmpties iterated with no new neighbors";for(h in y)t[h]=y[h],x.push(y[h])}return x.sort(function(A,b){return b[2]-A[2]})}},{"../../lib":503}],799:[function(e,z,N){var u=e("../../components/fx"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../components/colorscale").extractOpts;z.exports=function(i,a,r,n,f){f||(f={});var l=f.isContour,o=i.cd[0],c=o.trace,h=i.xa,d=i.ya,p=o.x,y=o.y,g=o.z,A=o.xCenter,b=o.yCenter,M=o.zmask,_=c.zhoverformat,T=p,w=y,v,L,S,k;if(i.index!==!1){try{S=Math.round(i.index[1]),k=Math.round(i.index[0])}catch{s.error("Error hovering on heatmap, pointNumber must be [row,col], found:",i.index);return}if(S<0||S>=g[0].length||k<0||k>g.length)return}else{if(u.inbox(a-p[0],a-p[p.length-1],0)>0||u.inbox(r-y[0],r-y[y.length-1],0)>0)return;if(l){var P;for(T=[2*p[0]-p[1]],P=1;P<p.length;P++)T.push((p[P]+p[P-1])/2);for(T.push([2*p[p.length-1]-p[p.length-2]]),w=[2*y[0]-y[1]],P=1;P<y.length;P++)w.push((y[P]+y[P-1])/2);w.push([2*y[y.length-1]-y[y.length-2]])}S=Math.max(0,Math.min(T.length-2,s.findBin(a,T))),k=Math.max(0,Math.min(w.length-2,s.findBin(r,w)))}var O=h.c2p(p[S]),F=h.c2p(p[S+1]),I=d.c2p(y[k]),D=d.c2p(y[k+1]),U,B;l?(U=o.orig_x||p,B=o.orig_y||y,F=O,v=U[S],D=I,L=B[k]):(U=o.orig_x||A||p,B=o.orig_y||b||y,v=A?U[S]:(U[S]+U[S+1])/2,L=b?B[k]:(B[k]+B[k+1])/2,h&&h.type==="category"&&(v=p[S]),d&&d.type==="category"&&(L=y[k]),c.zsmooth&&(O=F=h.c2p(v),I=D=d.c2p(L)));var j=g[k][S];if(M&&!M[k][S]&&(j=void 0),!(j===void 0&&!c.hoverongaps)){var Z;Array.isArray(o.hovertext)&&Array.isArray(o.hovertext[k])?Z=o.hovertext[k][S]:Array.isArray(o.text)&&Array.isArray(o.text[k])&&(Z=o.text[k][S]);var ee=x(c),q={type:"linear",range:[ee.min,ee.max],hoverformat:_,_separators:h._separators,_numFormat:h._numFormat},W=m.tickText(q,j,"hover").text;return[s.extendFlat(i,{index:c._after2before?c._after2before[k][S]:[k,S],distance:i.maxHoverDistance,spikeDistance:i.maxSpikeDistance,x0:O,x1:F,y0:I,y1:D,xLabelVal:v,yLabelVal:L,zLabelVal:j,zLabel:W,text:Z})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:e("./colorbar"),style:e("./style"),hoverPoints:e("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(e,z,N){var u=e("../../lib"),s=.01,m=[[-1,0],[1,0],[0,-1],[0,1]];function x(i){return .5-.25*Math.min(1,i*.5)}z.exports=function(a,r){var n=1,f;for(t(a,r),f=0;f<r.length&&!(r[f][2]<4);f++);for(r=r.slice(f),f=0;f<100&&n>s;f++)n=t(a,r,x(n));return n>s&&u.log("interp2d didn't converge quickly",n),a};function t(i,a,r){var n=0,f,l,o,c,h,d,p,y,g,A,b,M,_;for(c=0;c<a.length;c++){for(f=a[c],l=f[0],o=f[1],b=i[l][o],A=0,g=0,h=0;h<4;h++)d=m[h],p=i[l+d[0]],!!p&&(y=p[o+d[1]],y!==void 0&&(A===0?M=_=y:(M=Math.min(M,y),_=Math.max(_,y)),g++,A+=y));if(g===0)throw"iterateInterp2d order is wrong: no defined neighbors";i[l][o]=A/g,b===void 0?g<4&&(n=1):(i[l][o]=(1+r)*i[l][o]-r*b,_>M&&(n=Math.max(n,Math.abs(i[l][o]-b)/(_-M))))}return n}},{"../../lib":503}],802:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){m("texttemplate");var t=u.extendFlat({},x.font,{color:"auto",size:"auto"});u.coerceFont(m,"textfont",t)}},{"../../lib":503}],803:[function(e,z,N){var u=e("../../registry"),s=e("../../lib").isArrayOrTypedArray;z.exports=function(x,t,i,a,r,n){var f=[],l=u.traceIs(x,"contour"),o=u.traceIs(x,"histogram"),c=u.traceIs(x,"gl2d"),h,d,p,y=s(t)&&t.length>1;if(y&&!o&&n.type!=="category"){var g=t.length;if(g<=r){if(l||c)f=t.slice(0,r);else if(r===1)f=[t[0]-.5,t[0]+.5];else{for(f=[1.5*t[0]-.5*t[1]],p=1;p<g;p++)f.push((t[p-1]+t[p])*.5);f.push(1.5*t[g-1]-.5*t[g-2])}if(g<r){var A=f[f.length-1],b=A-f[f.length-2];for(p=g;p<r;p++)A+=b,f.push(A)}}else return l?t.slice(0,r):t.slice(0,r+1)}else{var M=x[n._id.charAt(0)+"calendar"];if(o)h=n.r2c(i,0,M);else if(s(t)&&t.length===1)h=t[0];else if(i===void 0)h=0;else{var _=n.type==="log"?n.d2c:n.r2c;h=_(i,0,M)}for(d=a||1,p=l||c?0:-.5;p<r;p++)f.push(h+d*p)}return f}},{"../../lib":503,"../../registry":638}],804:[function(e,z,N){var u=e("@plotly/d3"),s=e("tinycolor2"),m=e("../../registry"),x=e("../../components/drawing"),t=e("../../plots/cartesian/axes"),i=e("../../lib"),a=e("../../lib/svg_text_utils"),r=e("../scatter/format_labels"),n=e("../../components/color"),f=e("../../components/colorscale").extractOpts,l=e("../../components/colorscale").makeColorScaleFuncFromTrace,o=e("../../constants/xmlns_namespaces"),c=e("../../constants/alignment"),h=c.LINE_SPACING,d="heatmap-label";function p(M){return M.selectAll("g."+d)}function y(M){p(M).remove()}z.exports=function(M,_,T,w){var v=_.xaxis,L=_.yaxis;i.makeTraceGroups(w,T,"hm").each(function(S){var k=u.select(this),P=S[0],O=P.trace,F=O.xgap||0,I=O.ygap||0,D=P.z,U=P.x,B=P.y,j=P.xCenter,Z=P.yCenter,ee=m.traceIs(O,"contour"),q=ee?"best":O.zsmooth,W=D.length,J=i.maxRowLength(D),le=!1,fe=!1,se,H,Y,ne,te,K,$,ae;for(K=0;se===void 0&&K<U.length-1;)se=v.c2p(U[K]),K++;for(K=U.length-1;H===void 0&&K>0;)H=v.c2p(U[K]),K--;for(H<se&&(Y=H,H=se,se=Y,le=!0),K=0;ne===void 0&&K<B.length-1;)ne=L.c2p(B[K]),K++;for(K=B.length-1;te===void 0&&K>0;)te=L.c2p(B[K]),K--;if(te<ne&&(Y=ne,ne=te,te=Y,fe=!0),ee&&(j=U,Z=B,U=P.xfill,B=P.yfill),q!=="fast"){var ie=q==="best"?0:.5;se=Math.max(-ie*v._length,se),H=Math.min((1+ie)*v._length,H),ne=Math.max(-ie*L._length,ne),te=Math.min((1+ie)*L._length,te)}var oe=Math.round(H-se),ue=Math.round(te-ne),ye=oe<=0||ue<=0;if(ye){var ce=k.selectAll("image").data([]);ce.exit().remove(),y(k);return}var me,xe;q==="fast"?(me=J,xe=W):(me=oe,xe=ue);var ke=document.createElement("canvas");ke.width=me,ke.height=xe;var Ae=ke.getContext("2d"),Oe=l(O,{noNumericCheck:!0,returnArray:!0}),He,Ge;q==="fast"?(He=le?function(Pr){return J-1-Pr}:i.identity,Ge=fe?function(Pr){return W-1-Pr}:i.identity):(He=function(Pr){return i.constrain(Math.round(v.c2p(U[Pr])-se),0,oe)},Ge=function(Pr){return i.constrain(Math.round(L.c2p(B[Pr])-ne),0,ue)});var _e=Ge(0),Re=[_e,_e],We=le?0:1,qe=fe?0:1,Ue=0,Ie=0,Ve=0,dt=0,Rt,Gt,kt,zt,Bt;function Lt(Pr,br){if(Pr!==void 0){var Xr=Oe(Pr);return Xr[0]=Math.round(Xr[0]),Xr[1]=Math.round(Xr[1]),Xr[2]=Math.round(Xr[2]),Ue+=br,Ie+=Xr[0]*br,Ve+=Xr[1]*br,dt+=Xr[2]*br,Xr}return[0,0,0,0]}function Mt(Pr,br,Xr,Fn){var kn=Pr[Xr.bin0];if(kn===void 0)return Lt(void 0,1);var ra=Pr[Xr.bin1],oa=br[Xr.bin0],Sa=br[Xr.bin1],ya=ra-kn||0,pr=oa-kn||0,vn;return ra===void 0?Sa===void 0?vn=0:oa===void 0?vn=2*(Sa-kn):vn=(2*Sa-oa-kn)*2/3:Sa===void 0?oa===void 0?vn=0:vn=(2*kn-ra-oa)*2/3:oa===void 0?vn=(2*Sa-ra-kn)*2/3:vn=Sa+kn-ra-oa,Lt(kn+Xr.frac*ya+Fn.frac*(pr+Xr.frac*vn))}if(q){var it=0,ht;try{ht=new Uint8Array(oe*ue*4)}catch{ht=new Array(oe*ue*4)}if(q==="best"){var Qe=j||U,Ce=Z||B,Xe=new Array(Qe.length),rt=new Array(Ce.length),ut=new Array(oe),Pt=j?A:g,St=Z?A:g,Nt,jt,Ot;for(K=0;K<Qe.length;K++)Xe[K]=Math.round(v.c2p(Qe[K])-se);for(K=0;K<Ce.length;K++)rt[K]=Math.round(L.c2p(Ce[K])-ne);for(K=0;K<oe;K++)ut[K]=Pt(K,Xe);for($=0;$<ue;$++)for(Nt=St($,rt),jt=D[Nt.bin0],Ot=D[Nt.bin1],K=0;K<oe;K++,it+=4)Bt=Mt(jt,Ot,ut[K],Nt),b(ht,it,Bt)}else for($=0;$<W;$++)for(zt=D[$],Re=Ge($),K=0;K<oe;K++)Bt=Lt(zt[K],1),it=(Re*oe+He(K))*4,b(ht,it,Bt);var Kt=Ae.createImageData(oe,ue);try{Kt.data.set(ht)}catch{var Je=Kt.data,gt=Je.length;for($=0;$<gt;$++)Je[$]=ht[$]}Ae.putImageData(Kt,0,0)}else{var Et=Math.floor(F/2),rr=Math.floor(I/2);for($=0;$<W;$++)if(zt=D[$],Re.reverse(),Re[qe]=Ge($+1),!(Re[0]===Re[1]||Re[0]===void 0||Re[1]===void 0))for(Gt=He(0),Rt=[Gt,Gt],K=0;K<J;K++)Rt.reverse(),Rt[We]=He(K+1),!(Rt[0]===Rt[1]||Rt[0]===void 0||Rt[1]===void 0)&&(kt=zt[K],Bt=Lt(kt,(Rt[1]-Rt[0])*(Re[1]-Re[0])),Ae.fillStyle="rgba("+Bt.join(",")+")",Ae.fillRect(Rt[0]+Et,Re[0]+rr,Rt[1]-Rt[0]-F,Re[1]-Re[0]-I))}Ie=Math.round(Ie/Ue),Ve=Math.round(Ve/Ue),dt=Math.round(dt/Ue);var vr=s("rgb("+Ie+","+Ve+","+dt+")");M._hmpixcount=(M._hmpixcount||0)+Ue,M._hmlumcount=(M._hmlumcount||0)+Ue*vr.getLuminance();var or=k.selectAll("image").data(S);or.enter().append("svg:image").attr({xmlns:o.svg,preserveAspectRatio:"none"}),or.attr({height:ue,width:oe,x:se,y:ne,"xlink:href":ke.toDataURL("image/png")}),y(k);var dr=O.texttemplate;if(dr){var Lr=f(O),kr={type:"linear",range:[Lr.min,Lr.max],_separators:v._separators,_numFormat:v._numFormat},tr=O.type==="histogram2dcontour",Or=O.type==="contour",et=Or?1:0,we=Or?W-1:W,Se=Or?1:0,De=Or?J-1:J,je=[];for(K=et;K<we;K++){var $e;if(Or)$e=P.y[K];else if(tr){if(K===0||K===W-1)continue;$e=P.y[K]}else if(P.yCenter)$e=P.yCenter[K];else{if(K+1===W&&P.y[K+1]===void 0)continue;$e=(P.y[K]+P.y[K+1])/2}var ot=Math.round(L.c2p($e));if(!(0>ot||ot>L._length))for($=Se;$<De;$++){var st;if(Or)st=P.x[$];else if(tr){if($===0||$===J-1)continue;st=P.x[$]}else if(P.xCenter)st=P.xCenter[$];else{if($+1===J&&P.x[$+1]===void 0)continue;st=(P.x[$]+P.x[$+1])/2}var pt=Math.round(v.c2p(st));if(!(0>pt||pt>v._length)){var wt=r({x:st,y:$e},O,M._fullLayout);wt.x=st,wt.y=$e;var Wt=P.z[K][$];Wt===void 0?(wt.z="",wt.zLabel=""):(wt.z=Wt,wt.zLabel=t.tickText(kr,Wt,"hover").text);var yr=P.text&&P.text[K]&&P.text[K][$];(yr===void 0||yr===!1)&&(yr=""),wt.text=yr;var xr=i.texttemplateString(dr,wt,M._fullLayout._d3locale,wt,O._meta||{});if(!!xr){var Tr=xr.split("<br>"),mr=Tr.length,Rr=0;for(ae=0;ae<mr;ae++)Rr=Math.max(Rr,Tr[ae].length);je.push({l:mr,c:Rr,t:xr,x:pt,y:ot,z:Wt})}}}}var tn=O.textfont,wr=tn.family,gr=tn.size,mn=M._fullLayout.font.size;if(!gr||gr==="auto"){var Gr=1/0,Ar=1/0,nn=0,fn=0;for(ae=0;ae<je.length;ae++){var jr=je[ae];if(nn=Math.max(nn,jr.l),fn=Math.max(fn,jr.c),ae<je.length-1){var at=je[ae+1],Ft=Math.abs(at.x-jr.x),er=Math.abs(at.y-jr.y);Ft&&(Gr=Math.min(Gr,Ft)),er&&(Ar=Math.min(Ar,er))}}!isFinite(Gr)||!isFinite(Ar)?gr=mn:(Gr-=F,Ar-=I,Gr/=fn,Ar/=nn,Gr/=h/2,Ar/=h,gr=Math.min(Math.floor(Gr),Math.floor(Ar),mn))}if(gr<=0||!isFinite(gr))return;var hr=function(Pr){return Pr.x},Wr=function(Pr){return Pr.y-gr*(Pr.l*h/2-1)},zr=p(k).data(je);zr.enter().append("g").classed(d,1).append("text").attr("text-anchor","middle").each(function(Pr){var br=u.select(this),Xr=tn.color;(!Xr||Xr==="auto")&&(Xr=n.contrast("rgba("+Oe(Pr.z).join()+")")),br.attr("data-notex",1).call(a.positionText,hr(Pr),Wr(Pr)).call(x.font,wr,gr,Xr).text(Pr.t).call(a.convertToTspans,M)})}})};function g(M,_){var T=_.length-2,w=i.constrain(i.findBin(M,_),0,T),v=_[w],L=_[w+1],S=i.constrain(w+(M-v)/(L-v)-.5,0,T),k=Math.round(S),P=Math.abs(S-k);return!S||S===T||!P?{bin0:k,bin1:k,frac:0}:{bin0:k,frac:P,bin1:Math.round(k+P/(S-k))}}function A(M,_){var T=_.length-1,w=i.constrain(i.findBin(M,_),0,T),v=_[w],L=_[w+1],S=(M-v)/(L-v)||0;return S<=0?{bin0:w,bin1:w,frac:0}:S<.5?{bin0:w,bin1:w+1,frac:S}:{bin0:w+1,bin1:w,frac:1-S}}function b(M,_,T){M[_]=T[0],M[_+1]=T[1],M[_+2]=T[2],M[_+3]=Math.round(T[3]*255)}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(e,z,N){var u=e("@plotly/d3");z.exports=function(m){u.select(m).selectAll(".hm image").style("opacity",function(x){return x.trace.opacity})}},{"@plotly/d3":58}],806:[function(e,z,N){z.exports=function(s,m,x){var t=x("zsmooth");t===!1&&(x("xgap"),x("ygap")),x("zhoverformat")}},{}],807:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../registry");z.exports=function(a,r,n,f,l,o){var c=n("z");l=l||"x",o=o||"y";var h,d;if(c===void 0||!c.length)return 0;if(s.isArray1D(a.z)){h=n(l),d=n(o);var p=s.minRowLength(h),y=s.minRowLength(d);if(p===0||y===0)return 0;r._length=Math.min(p,y,c.length)}else{if(h=x(l,n),d=x(o,n),!t(c))return 0;n("transpose"),r._length=null}if(a.type==="heatmapgl")return!0;var g=m.getComponentMethod("calendars","handleTraceDefaults");return g(a,r,[l,o],f),!0};function x(i,a){var r=a(i),n=r?a(i+"type","array"):"scaled";return n==="scaled"&&(a(i+"0"),a("d"+i)),r}function t(i){for(var a=!0,r=!1,n=!1,f,l=0;l<i.length;l++){if(f=i[l],!s.isArrayOrTypedArray(f)){a=!1;break}f.length>0&&(r=!0);for(var o=0;o<f.length;o++)if(u(f[o])){n=!0;break}}return a&&r&&n}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(e,z,N){for(var u=e("../heatmap/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../lib/extend").extendFlat,x=e("../../plot_api/edit_types").overrideAll,t=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],i={},a=0;a<t.length;a++){var r=t[a];i[r]=u[r]}i.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},m(i,s("",{cLetter:"z",autoColorDflt:!1})),z.exports=x(i,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(e,z,N){var u=e("../../../stackgl_modules").gl_heatmap2d,s=e("../../plots/cartesian/axes"),m=e("../../lib/str2rgbarray");function x(r,n){this.scene=r,this.uid=n,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=u(r.glplot,this.options),this.heatmap._trace=this}var t=x.prototype;t.handlePick=function(r){var n=this.options,f=n.shape,l=r.pointId,o=l%f[0],c=Math.floor(l/f[0]),h=l;return{trace:this,dataCoord:r.dataCoord,traceCoord:[n.x[o],n.y[c],n.z[h]],textLabel:this.textLabels[l],name:this.name,pointIndex:[c,o],hoverinfo:this.hoverinfo}},t.update=function(r,n){var f=n[0];this.index=r.index,this.name=r.name,this.hoverinfo=r.hoverinfo;var l=f.z;this.options.z=[].concat.apply([],l);var o=l[0].length,c=l.length;this.options.shape=[o,c],this.options.x=f.x,this.options.y=f.y,this.options.zsmooth=r.zsmooth;var h=i(r);this.options.colorLevels=h.colorLevels,this.options.colorValues=h.colorValues,this.textLabels=[].concat.apply([],r.text),this.heatmap.update(this.options);var d=this.scene.xaxis,p=this.scene.yaxis,y,g;r.zsmooth===!1&&(y={ppad:f.x[1]-f.x[0]},g={ppad:f.y[1]-f.y[0]}),r._extremes[d._id]=s.findExtremes(d,f.x,y),r._extremes[p._id]=s.findExtremes(p,f.y,g)},t.dispose=function(){this.heatmap.dispose()};function i(r){for(var n=r.colorscale,f=r.zmin,l=r.zmax,o=n.length,c=new Array(o),h=new Array(4*o),d=0;d<o;d++){var p=n[d],y=m(p[1]);c[d]=f+p[0]*(l-f);for(var g=0;g<4;g++)h[4*d+g]=y[g]}return{colorLevels:c,colorValues:h}}function a(r,n,f){var l=new x(r,n.uid);return l.update(n,f),l}z.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(e,z,N){var u=e("../../lib"),s=e("../heatmap/xyz_defaults"),m=e("../../components/colorscale/defaults"),x=e("./attributes");z.exports=function(i,a,r,n){function f(o,c){return u.coerce(i,a,x,o,c)}var l=s(i,a,f,n);if(!l){a.visible=!1;return}f("text"),f("zsmooth"),m(i,a,n,f,{prefix:"",cLetter:"z"})}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../heatmap/colorbar"),calc:e("../heatmap/calc"),plot:e("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(e,z,N){var u=e("../bar/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../plots/font_attributes"),i=e("./bin_attributes"),a=e("./constants"),r=e("../../lib/extend").extendFlat;z.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:s("x"),yhoverformat:s("y"),text:r({},u.text,{}),hovertext:r({},u.hovertext,{}),orientation:u.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:i("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:i("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({},{keys:a.eventDataKeys}),texttemplate:x({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:r({},u.textposition,{arrayOk:!1}),textfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:t({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:u.insidetextanchor,textangle:u.textangle,cliponaxis:u.cliponaxis,constraintext:u.constraintext,marker:u.marker,offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup,selected:u.selected,unselected:u.unselected,_deprecated:{bardir:u._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(e,z,N){z.exports=function(s,m){for(var x=s.length,t=0,i=0;i<x;i++)m[i]?(s[i]/=m[i],t+=s[i]):s[i]=null;return t}},{}],814:[function(e,z,N){z.exports=function(s,m){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(e,z,N){var u=e("fast-isnumeric");z.exports={count:function(s,m,x){return x[s]++,1},sum:function(s,m,x,t){var i=t[m];return u(i)?(i=Number(i),x[s]+=i,i):0},avg:function(s,m,x,t,i){var a=t[m];return u(a)&&(a=Number(a),x[s]+=a,i[s]++),0},min:function(s,m,x,t){var i=t[m];if(u(i))if(i=Number(i),u(x[s])){if(x[s]>i){var a=i-x[s];return x[s]=i,a}}else return x[s]=i,i;return 0},max:function(s,m,x,t){var i=t[m];if(u(i))if(i=Number(i),u(x[s])){if(x[s]<i){var a=i-x[s];return x[s]=i,a}}else return x[s]=i,i;return 0}}},{"fast-isnumeric":190}],816:[function(e,z,N){var u=e("../../constants/numerical"),s=u.ONEAVGYEAR,m=u.ONEAVGMONTH,x=u.ONEDAY,t=u.ONEHOUR,i=u.ONEMIN,a=u.ONESEC,r=e("../../plots/cartesian/axes").tickIncrement;z.exports=function(h,d,p,y,g){var A=-1.1*d,b=-.1*d,M=h-b,_=p[0],T=p[1],w=Math.min(n(_+b,_+M,y,g),n(T+b,T+M,y,g)),v=Math.min(n(_+A,_+b,y,g),n(T+A,T+b,y,g)),L,S;if(w>v&&v<Math.abs(T-_)/4e3?(L=w,S=!1):(L=Math.min(w,v),S=!0),y.type==="date"&&L>x){var k=L===s?1:6,P=L===s?"M12":"M1";return function(O,F){var I=y.c2d(O,s,g),D=I.indexOf("-",k);D>0&&(I=I.substr(0,D));var U=y.d2c(I,0,g);if(U<O){var B=r(U,P,!1,g);(U+B)/2<O+h&&(U=B)}return F&&S?r(U,P,!0,g):U}}return function(O,F){var I=L*Math.round(O/L);return I+L/10<O&&I+L*.9<O+h&&(I+=L),F&&S&&(I-=L),I}};function n(c,h,d,p){if(c*h<=0)return 1/0;for(var y=Math.abs(h-c),g=d.type==="date",A=f(y,g),b=0;b<10;b++){var M=f(A*80,g);if(A===M)break;if(l(M,c,h,g,d,p))A=M;else break}return A}function f(c,h){return h&&c>a?c>x?c>s*1.1?s:c>m*1.1?m:x:c>t?t:c>i?i:a:Math.pow(10,Math.floor(Math.log(c)/Math.LN10))}function l(c,h,d,p,y,g){if(p&&c>x){var A=o(h,y,g),b=o(d,y,g),M=c===s?0:1;return A[M]!==b[M]}return Math.floor(d/c)-Math.floor(h/c)>.1}function o(c,h,d){var p=h.c2d(c,s,d).split("-");return p[0]===""&&(p.unshift(),p[0]="-"+p[0]),p}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../registry"),x=e("../../plots/cartesian/axes"),t=e("../bar/arrays_to_calcdata"),i=e("./bin_functions"),a=e("./norm_functions"),r=e("./average"),n=e("./bin_label_vals");function f(d,p){var y=[],g=[],A=p.orientation==="h",b=x.getFromId(d,A?p.yaxis:p.xaxis),M=A?"y":"x",_={x:"y",y:"x"}[M],T=p[M+"calendar"],w=p.cumulative,v,L=l(d,p,b,M),S=L[0],k=L[1],P=typeof S.size=="string",O=[],F=P?O:S,I=[],D=[],U=[],B=0,j=p.histnorm,Z=p.histfunc,ee=j.indexOf("density")!==-1,q,W,J;w.enabled&&ee&&(j=j.replace(/ ?density$/,""),ee=!1);var le=Z==="max"||Z==="min",fe=le?null:0,se=i.count,H=a[j],Y=!1,ne=function(Ge){return b.r2c(Ge,0,T)},te;for(s.isArrayOrTypedArray(p[_])&&Z!=="count"&&(te=p[_],Y=Z==="avg",se=i[Z]),v=ne(S.start),W=ne(S.end)+(v-x.tickIncrement(v,S.size,!1,T))/1e6;v<W&&y.length<1e6&&(q=x.tickIncrement(v,S.size,!1,T),y.push((v+q)/2),g.push(fe),U.push([]),O.push(v),ee&&I.push(1/(q-v)),Y&&D.push(0),!(q<=v));)v=q;O.push(v),!P&&b.type==="date"&&(F={start:ne(F.start),end:ne(F.end),size:F.size}),d._fullLayout._roundFnOpts||(d._fullLayout._roundFnOpts={});var K=p["_"+M+"bingroup"],$={leftGap:1/0,rightGap:1/0};K&&(d._fullLayout._roundFnOpts[K]||(d._fullLayout._roundFnOpts[K]=$),$=d._fullLayout._roundFnOpts[K]);var ae=g.length,ie=!0,oe=$.leftGap,ue=$.rightGap,ye={};for(v=0;v<k.length;v++){var ce=k[v];J=s.findBin(ce,F),J>=0&&J<ae&&(B+=se(J,v,g,te,D),ie&&U[J].length&&ce!==k[U[J][0]]&&(ie=!1),U[J].push(v),ye[v]=J,oe=Math.min(oe,ce-O[J]),ue=Math.min(ue,O[J+1]-ce))}$.leftGap=oe,$.rightGap=ue;var me;ie||(me=function(Ge,_e){return function(){var Re=d._fullLayout._roundFnOpts[K];return n(Re.leftGap,Re.rightGap,O,b,T)(Ge,_e)}}),Y&&(B=r(g,D)),H&&H(g,B,I),w.enabled&&h(g,w.direction,w.currentbin);var xe=Math.min(y.length,g.length),ke=[],Ae=0,Oe=xe-1;for(v=0;v<xe;v++)if(g[v]){Ae=v;break}for(v=xe-1;v>=Ae;v--)if(g[v]){Oe=v;break}for(v=Ae;v<=Oe;v++)if(u(y[v])&&u(g[v])){var He={p:y[v],s:g[v],b:0};w.enabled||(He.pts=U[v],ie?He.ph0=He.ph1=U[v].length?k[U[v][0]]:y[v]:(p._computePh=!0,He.ph0=me(O[v]),He.ph1=me(O[v+1],!0))),ke.push(He)}return ke.length===1&&(ke[0].width1=x.tickIncrement(ke[0].p,S.size,!1,T)-ke[0].p),t(ke,p),s.isArrayOrTypedArray(p.selectedpoints)&&s.tagSelected(ke,p,ye),ke}function l(d,p,y,g,A){var b=g+"bins",M=d._fullLayout,_=p["_"+g+"bingroup"],T=M._histogramBinOpts[_],w=M.barmode==="overlay",v,L,S,k,P,O,F,I=function(ce){return y.r2c(ce,0,k)},D=function(ce){return y.c2r(ce,0,k)},U=y.type==="date"?function(ce){return ce||ce===0?s.cleanDate(ce,null,k):null}:function(ce){return u(ce)?Number(ce):null};function B(ce,me,xe){me[ce+"Found"]?(me[ce]=U(me[ce]),me[ce]===null&&(me[ce]=xe[ce])):(O[ce]=me[ce]=xe[ce],s.nestedProperty(L[0],b+"."+ce).set(xe[ce]))}if(p["_"+g+"autoBinFinished"])delete p["_"+g+"autoBinFinished"];else{L=T.traces;var j=[],Z=!0,ee=!1,q=!1;for(v=0;v<L.length;v++)if(S=L[v],S.visible){var W=T.dirs[v];P=S["_"+W+"pos0"]=y.makeCalcdata(S,W),j=s.concat(j,P),delete S["_"+g+"autoBinFinished"],p.visible===!0&&(Z?Z=!1:(delete S._autoBin,S["_"+g+"autoBinFinished"]=1),m.traceIs(S,"2dMap")&&(ee=!0),S.type==="histogram2dcontour"&&(q=!0))}k=L[0][g+"calendar"];var J=x.autoBin(j,y,T.nbins,ee,k,T.sizeFound&&T.size),le=L[0]._autoBin={};if(O=le[T.dirs[0]]={},q&&(T.size||(J.start=D(x.tickIncrement(I(J.start),J.size,!0,k))),T.end===void 0&&(J.end=D(x.tickIncrement(I(J.end),J.size,!1,k)))),w&&!m.traceIs(p,"2dMap")&&J._dataSpan===0&&y.type!=="category"&&y.type!=="multicategory"){if(A)return[J,P,!0];J=o(d,p,y,g,b)}F=S.cumulative||{},F.enabled&&F.currentbin!=="include"&&(F.direction==="decreasing"?J.start=D(x.tickIncrement(I(J.start),J.size,!0,k)):J.end=D(x.tickIncrement(I(J.end),J.size,!1,k))),T.size=J.size,T.sizeFound||(O.size=J.size,s.nestedProperty(L[0],b+".size").set(J.size)),B("start",T,J),B("end",T,J)}P=p["_"+g+"pos0"],delete p["_"+g+"pos0"];var fe=p._input[b]||{},se=s.extendFlat({},T),H=T.start,Y=y.r2l(fe.start),ne=Y!==void 0;if((T.startFound||ne)&&Y!==y.r2l(H)){var te=ne?Y:s.aggNums(Math.min,null,P),K={type:y.type==="category"||y.type==="multicategory"?"linear":y.type,r2l:y.r2l,dtick:T.size,tick0:H,calendar:k,range:[te,x.tickIncrement(te,T.size,!1,k)].map(y.l2r)},$=x.tickFirst(K);$>y.r2l(te)&&($=x.tickIncrement($,T.size,!0,k)),se.start=y.l2r($),ne||s.nestedProperty(p,b+".start").set(se.start)}var ae=T.end,ie=y.r2l(fe.end),oe=ie!==void 0;if((T.endFound||oe)&&ie!==y.r2l(ae)){var ue=oe?ie:s.aggNums(Math.max,null,P);se.end=y.l2r(ue),oe||s.nestedProperty(p,b+".start").set(se.end)}var ye="autobin"+g;return p._input[ye]===!1&&(p._input[b]=s.extendFlat({},p[b]||{}),delete p._input[ye],delete p[ye]),[se,P]}function o(d,p,y,g,A){var b=d._fullLayout,M=c(d,p),_=!1,T=1/0,w=[p],v,L,S;for(v=0;v<M.length;v++)if(L=M[v],L===p)_=!0;else if(!_)S=b._histogramBinOpts[L["_"+g+"bingroup"]],T=Math.min(T,S.size||L[A].size);else{var k=l(d,L,y,g,!0),P=k[0],O=k[2];L["_"+g+"autoBinFinished"]=1,L["_"+g+"pos0"]=k[1],O?w.push(L):T=Math.min(T,P.size)}var F=new Array(w.length);for(v=0;v<w.length;v++)for(var I=w[v]["_"+g+"pos0"],D=0;D<I.length;D++)if(I[D]!==void 0){F[v]=I[D];break}for(isFinite(T)||(T=s.distinctVals(F).minDiff),v=0;v<w.length;v++){L=w[v];var U=L[g+"calendar"],B={start:y.c2r(F[v]-T/2,0,U),end:y.c2r(F[v]+T/2,0,U),size:T};L._input[A]=L[A]=B,S=b._histogramBinOpts[L["_"+g+"bingroup"]],S&&s.extendFlat(S,B)}return p[A]}function c(d,p){for(var y=p.xaxis,g=p.yaxis,A=p.orientation,b=[],M=d._fullData,_=0;_<M.length;_++){var T=M[_];T.type==="histogram"&&T.visible===!0&&T.orientation===A&&T.xaxis===y&&T.yaxis===g&&b.push(T)}return b}function h(d,p,y){var g,A,b;function M(T){b=d[T],d[T]/=2}function _(T){A=d[T],d[T]=b+A/2,b+=A}if(y==="half")if(p==="increasing")for(M(0),g=1;g<d.length;g++)_(g);else for(M(d.length-1),g=d.length-2;g>=0;g--)_(g);else if(p==="increasing"){for(g=1;g<d.length;g++)d[g]+=d[g-1];y==="exclude"&&(d.unshift(0),d.pop())}else{for(g=d.length-2;g>=0;g--)d[g]+=d[g+1];y==="exclude"&&(d.push(0),d.shift())}}z.exports={calc:f,calcAllAutoBins:l}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(e,z,N){z.exports={eventDataKeys:["binNumber"]}},{}],819:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axis_ids"),m=e("../../registry").traceIs,x=e("../bar/defaults").handleGroupingDefaults,t=u.nestedProperty,i=e("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],r=["x","y"];z.exports=function(f,l){var o=l._histogramBinOpts={},c=[],h={},d=[],p,y,g,A,b,M,_;function T(q,W){return u.coerce(p._input,p,p._module.attributes,q,W)}function w(q){return q.orientation==="v"?"x":"y"}function v(q,W){var J=s.getFromTrace({_fullLayout:l},q,W);return J.type}function L(q,W,J){var le=q.uid+"__"+J;W||(W=le);var fe=v(q,J),se=q[J+"calendar"]||"",H=o[W],Y=!0;H&&(fe===H.axType&&se===H.calendar?(Y=!1,H.traces.push(q),H.dirs.push(J)):(W=le,fe!==H.axType&&u.warn(["Attempted to group the bins of trace",q.index,"set on a","type:"+fe,"axis","with bins on","type:"+H.axType,"axis."].join(" ")),se!==H.calendar&&u.warn(["Attempted to group the bins of trace",q.index,"set with a",se,"calendar","with bins",H.calendar?"on a "+H.calendar+" calendar":"w/o a set calendar"].join(" ")))),Y&&(o[W]={traces:[q],dirs:[J],axType:fe,calendar:q[J+"calendar"]||""}),q["_"+J+"bingroup"]=W}for(b=0;b<f.length;b++)p=f[b],m(p,"histogram")&&(c.push(p),delete p._xautoBinFinished,delete p._yautoBinFinished,m(p,"2dMap")||x(p._input,p,l,T));var S=l._alignmentOpts||{};for(b=0;b<c.length;b++){if(p=c[b],g="",!m(p,"2dMap")){if(A=w(p),l.barmode==="group"&&p.alignmentgroup){var k=p[A+"axis"],P=i(l,k)+p.orientation;(S[P]||{})[p.alignmentgroup]&&(g=P)}!g&&l.barmode!=="overlay"&&(g=i(l,p.xaxis)+i(l,p.yaxis)+w(p))}g?(h[g]||(h[g]=[]),h[g].push(p)):d.push(p)}for(g in h){if(y=h[g],y.length===1){d.push(y[0]);continue}var O=!1;for(y.length&&(p=y[0],O=T("bingroup")),g=O||g,b=0;b<y.length;b++){p=y[b];var F=p._input.bingroup;F&&F!==g&&u.warn(["Trace",p.index,"must match","within bingroup",g+".","Ignoring its bingroup:",F,"setting."].join(" ")),p.bingroup=g,L(p,g,w(p))}}for(b=0;b<d.length;b++){p=d[b];var I=T("bingroup");if(m(p,"2dMap"))for(_=0;_<2;_++){A=r[_];var D=T(A+"bingroup",I?I+"__"+A:null);L(p,D,A)}else L(p,I,w(p))}for(g in o){var U=o[g];for(y=U.traces,M=0;M<a.length;M++){var B=a[M],j=B.name,Z,ee;if(!(j==="nbins"&&U.sizeFound)){for(b=0;b<y.length;b++){if(p=y[b],A=U.dirs[b],Z=B.aStr[A],t(p._input,Z).get()!==void 0){U[j]=T(Z),U[j+"Found"]=!0;break}ee=(p._autoBin||{})[A]||{},ee[j]&&t(p,Z).set(ee[j])}if(j==="start"||j==="end")for(;b<y.length;b++)p=y[b],p["_"+A+"bingroup"]&&(ee=(p._autoBin||{})[A]||{},T(Z,ee[j]));j==="nbins"&&!U.sizeFound&&!U.nbinsFound&&(p=y[0],U[j]=T(Z))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../../components/color"),x=e("../bar/defaults").handleText,t=e("../bar/style_defaults"),i=e("./attributes");z.exports=function(r,n,f,l){function o(v,L){return s.coerce(r,n,i,v,L)}var c=o("x"),h=o("y"),d=o("cumulative.enabled");d&&(o("cumulative.direction"),o("cumulative.currentbin")),o("text");var p=o("textposition");x(r,n,l,o,p,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o("hovertext"),o("hovertemplate"),o("xhoverformat"),o("yhoverformat");var y=o("orientation",h&&!c?"h":"v"),g=y==="v"?"x":"y",A=y==="v"?"y":"x",b=c&&h?Math.min(s.minRowLength(c)&&s.minRowLength(h)):s.minRowLength(n[g]||[]);if(!b){n.visible=!1;return}n._length=b;var M=u.getComponentMethod("calendars","handleTraceDefaults");M(r,n,["x","y"],l);var _=n[A];_&&o("histfunc"),o("histnorm"),o("autobin"+g),t(r,n,o,f,l),s.coerceSelectionMarkerOpacity(n,o);var T=(n.marker.line||{}).color,w=u.getComponentMethod("errorbars","supplyDefaults");w(r,n,T||m.defaultLine,{axis:"y"}),w(r,n,T||m.defaultLine,{axis:"x",inherit:"y"})}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(e,z,N){z.exports=function(s,m,x,t,i){if(s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,"zLabelVal"in m&&(s.z=m.zLabelVal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),!(x.cumulative||{}).enabled){var a=Array.isArray(i)?t[0].pts[i[0]][i[1]]:t[i].pts;s.pointNumbers=a,s.binNumber=s.pointNumber,delete s.pointNumber,delete s.pointIndex;var r;if(x._indexToPoints){r=[];for(var n=0;n<a.length;n++)r=r.concat(x._indexToPoints[a[n]])}else r=a;s.pointIndices=r}return s}},{}],822:[function(e,z,N){var u=e("../bar/hover").hoverPoints,s=e("../../plots/cartesian/axes").hoverLabelText;z.exports=function(x,t,i,a,r){var n=u(x,t,i,a,r);if(!!n){x=n[0];var f=x.cd[x.index],l=x.cd[0].trace;if(!l.cumulative.enabled){var o=l.orientation==="h"?"y":"x";x[o+"Label"]=s(x[o+"a"],[f.ph0,f.ph1],l[o+"hoverformat"])}return n}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(e,z,N){z.exports={attributes:e("./attributes"),layoutAttributes:e("../bar/layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),supplyLayoutDefaults:e("../bar/layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("../bar/cross_trace_calc").crossTraceCalc,plot:e("../bar/plot").plot,layerName:"barlayer",style:e("../bar/style").style,styleOnSelect:e("../bar/style").styleOnSelect,colorbar:e("../scatter/marker_colorbar"),hoverPoints:e("./hover"),selectPoints:e("../bar/select"),eventData:e("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(e,z,N){z.exports={percent:function(u,s){for(var m=u.length,x=100/s,t=0;t<m;t++)u[t]*=x},probability:function(u,s){for(var m=u.length,x=0;x<m;x++)u[x]/=s},density:function(u,s,m,x){var t=u.length;x=x||1;for(var i=0;i<t;i++)u[i]*=m[i]*x},"probability density":function(u,s,m,x){var t=u.length;x&&(s/=x);for(var i=0;i<t;i++)u[i]*=m[i]/s}}},{}],825:[function(e,z,N){var u=e("../histogram/attributes"),s=e("../histogram/bin_attributes"),m=e("../heatmap/attributes"),x=e("../../plots/attributes"),t=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,i=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../plots/template_attributes").texttemplateAttrs,r=e("../../components/colorscale/attributes"),n=e("../../lib/extend").extendFlat;z.exports=n({x:u.x,y:u.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:u.histnorm,histfunc:u.histfunc,nbinsx:u.nbinsx,xbins:s("x"),nbinsy:u.nbinsy,ybins:s("y"),autobinx:u.autobinx,autobiny:u.autobiny,bingroup:n({},u.bingroup,{}),xbingroup:n({},u.bingroup,{}),ybingroup:n({},u.bingroup,{}),xgap:m.xgap,ygap:m.ygap,zsmooth:m.zsmooth,xhoverformat:t("x"),yhoverformat:t("y"),zhoverformat:t("z",1),hovertemplate:i({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:m.textfont,showlegend:n({},x.showlegend,{dflt:!1})},r("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../histogram/bin_functions"),x=e("../histogram/norm_functions"),t=e("../histogram/average"),i=e("../histogram/bin_label_vals"),a=e("../histogram/calc").calcAllAutoBins;z.exports=function(o,c){var h=s.getFromId(o,c.xaxis),d=s.getFromId(o,c.yaxis),p=c.xcalendar,y=c.ycalendar,g=function(it){return h.r2c(it,0,p)},A=function(it){return d.r2c(it,0,y)},b=function(it){return h.c2r(it,0,p)},M=function(it){return d.c2r(it,0,y)},_,T,w,v,L=a(o,c,h,"x"),S=L[0],k=L[1],P=a(o,c,d,"y"),O=P[0],F=P[1],I=c._length;k.length>I&&k.splice(I,k.length-I),F.length>I&&F.splice(I,F.length-I);var D=[],U=[],B=[],j=typeof S.size=="string",Z=typeof O.size=="string",ee=[],q=[],W=j?ee:S,J=Z?q:O,le=0,fe=[],se=[],H=c.histnorm,Y=c.histfunc,ne=H.indexOf("density")!==-1,te=Y==="max"||Y==="min",K=te?null:0,$=m.count,ae=x[H],ie=!1,oe=[],ue=[],ye="z"in c?c.z:"marker"in c&&Array.isArray(c.marker.color)?c.marker.color:"";ye&&Y!=="count"&&(ie=Y==="avg",$=m[Y]);var ce=S.size,me=g(S.start),xe=g(S.end)+(me-s.tickIncrement(me,ce,!1,p))/1e6;for(_=me;_<xe;_=s.tickIncrement(_,ce,!1,p))U.push(K),ee.push(_),ie&&B.push(0);ee.push(_);var ke=U.length,Ae=(_-me)/ke,Oe=b(me+Ae/2),He=O.size,Ge=A(O.start),_e=A(O.end)+(Ge-s.tickIncrement(Ge,He,!1,y))/1e6;for(_=Ge;_<_e;_=s.tickIncrement(_,He,!1,y)){D.push(U.slice()),q.push(_);var Re=new Array(ke);for(T=0;T<ke;T++)Re[T]=[];se.push(Re),ie&&fe.push(B.slice())}q.push(_);var We=D.length,qe=(_-Ge)/We,Ue=M(Ge+qe/2);ne&&(oe=r(U.length,W,Ae,j),ue=r(D.length,J,qe,Z)),!j&&h.type==="date"&&(W=n(g,W)),!Z&&d.type==="date"&&(J=n(A,J));var Ie=!0,Ve=!0,dt=new Array(ke),Rt=new Array(We),Gt=1/0,kt=1/0,zt=1/0,Bt=1/0;for(_=0;_<I;_++){var Lt=k[_],Mt=F[_];w=u.findBin(Lt,W),v=u.findBin(Mt,J),w>=0&&w<ke&&v>=0&&v<We&&(le+=$(w,_,D[v],ye,fe[v]),se[v][w].push(_),Ie&&(dt[w]===void 0?dt[w]=Lt:dt[w]!==Lt&&(Ie=!1)),Ve&&(Rt[v]===void 0?Rt[v]=Mt:Rt[v]!==Mt&&(Ve=!1)),Gt=Math.min(Gt,Lt-ee[w]),kt=Math.min(kt,ee[w+1]-Lt),zt=Math.min(zt,Mt-q[v]),Bt=Math.min(Bt,q[v+1]-Mt))}if(ie)for(v=0;v<We;v++)le+=t(D[v],fe[v]);if(ae)for(v=0;v<We;v++)ae(D[v],le,oe,ue[v]);return{x:k,xRanges:f(ee,Ie&&dt,Gt,kt,h,p),x0:Oe,dx:Ae,y:F,yRanges:f(q,Ve&&Rt,zt,Bt,d,y),y0:Ue,dy:qe,z:D,pts:se}};function r(l,o,c,h){var d=new Array(l),p;if(h)for(p=0;p<l;p++)d[p]=1/(o[p+1]-o[p]);else{var y=1/c;for(p=0;p<l;p++)d[p]=y}return d}function n(l,o){return{start:l(o.start),end:l(o.end),size:o.size}}function f(l,o,c,h,d,p){var y,g=l.length-1,A=new Array(g),b=i(c,h,l,d,p);for(y=0;y<g;y++){var M=(o||[])[y];A[y]=M===void 0?[b(l[y]),b(l[y+1],!0)]:[M,M]}return A}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(e,z,N){var u=e("../../lib"),s=e("./sample_defaults"),m=e("../heatmap/style_defaults"),x=e("../../components/colorscale/defaults"),t=e("../heatmap/label_defaults"),i=e("./attributes");z.exports=function(r,n,f,l){function o(c,h){return u.coerce(r,n,i,c,h)}s(r,n,o,l),n.visible!==!1&&(m(r,n,o,l),x(r,n,l,o,{prefix:"",cLetter:"z"}),o("hovertemplate"),t(o,l),o("xhoverformat"),o("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(e,z,N){var u=e("../heatmap/hover"),s=e("../../plots/cartesian/axes").hoverLabelText;z.exports=function(x,t,i,a,r){var n=u(x,t,i,a,r);if(!!n){x=n[0];var f=x.index,l=f[0],o=f[1],c=x.cd[0],h=c.trace,d=c.xRanges[o],p=c.yRanges[l];return x.xLabel=s(x.xa,[d[0],d[1]],h.xhoverformat),x.yLabel=s(x.ya,[p[0],p[1]],h.yhoverformat),n}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../heatmap/calc"),plot:e("../heatmap/plot"),layerName:"heatmaplayer",colorbar:e("../heatmap/colorbar"),style:e("../heatmap/style"),hoverPoints:e("./hover"),eventData:e("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(e,z,N){var u=e("../../registry"),s=e("../../lib");z.exports=function(x,t,i,a){var r=i("x"),n=i("y"),f=s.minRowLength(r),l=s.minRowLength(n);if(!f||!l){t.visible=!1;return}t._length=Math.min(f,l);var o=u.getComponentMethod("calendars","handleTraceDefaults");o(x,t,["x","y"],a);var c=i("z")||i("marker.color");c&&i("histfunc"),i("histnorm"),i("autobinx"),i("autobiny")}},{"../../lib":503,"../../registry":638}],831:[function(e,z,N){var u=e("../histogram2d/attributes"),s=e("../contour/attributes"),m=e("../../components/colorscale/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../lib/extend").extendFlat;z.exports=t({x:u.x,y:u.y,z:u.z,marker:u.marker,histnorm:u.histnorm,histfunc:u.histfunc,nbinsx:u.nbinsx,xbins:u.xbins,nbinsy:u.nbinsy,ybins:u.ybins,autobinx:u.autobinx,autobiny:u.autobiny,bingroup:u.bingroup,xbingroup:u.xbingroup,ybingroup:u.ybingroup,autocontour:s.autocontour,ncontours:s.ncontours,contours:s.contours,line:{color:s.line.color,width:t({},s.line.width,{dflt:.5}),dash:s.line.dash,smoothing:s.line.smoothing,editType:"plot"},xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z",1),hovertemplate:u.hovertemplate,texttemplate:s.texttemplate,textfont:s.textfont},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(e,z,N){var u=e("../../lib"),s=e("../histogram2d/sample_defaults"),m=e("../contour/contours_defaults"),x=e("../contour/style_defaults"),t=e("../heatmap/label_defaults"),i=e("./attributes");z.exports=function(r,n,f,l){function o(h,d){return u.coerce(r,n,i,h,d)}function c(h){return u.coerce2(r,n,i,h)}s(r,n,o,l),n.visible!==!1&&(m(r,n,o,c),x(r,n,o,l),o("xhoverformat"),o("yhoverformat"),o("hovertemplate"),n.contours&&n.contours.coloring==="heatmap"&&t(o,l))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../histogram/cross_trace_defaults"),calc:e("../contour/calc"),plot:e("../contour/plot").plot,layerName:"contourlayer",style:e("../contour/style"),colorbar:e("../contour/colorbar"),hoverPoints:e("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../components/colorscale/attributes"),x=e("../../plots/domain").attributes,t=e("../pie/attributes"),i=e("../sunburst/attributes"),a=e("../treemap/attributes"),r=e("../treemap/constants"),n=e("../../lib/extend").extendFlat;z.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:n({colors:i.marker.colors,line:i.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),leaf:i.leaf,pathbar:a.pathbar,text:t.text,textinfo:i.textinfo,texttemplate:s({editType:"plot"},{keys:r.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:i.hoverinfo,hovertemplate:u({},{keys:r.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:t.sort,root:i.root,domain:x({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(e,z,N){var u=e("../../plots/plots");N.name="icicle",N.plot=function(s,m,x,t){u.plotBasePlot(N.name,s,m,x,t)},N.clean=function(s,m,x,t){u.cleanBasePlot(N.name,s,m,x,t)}},{"../../plots/plots":619}],836:[function(e,z,N){var u=e("../sunburst/calc");N.calc=function(s,m){return u.calc(s,m)},N.crossTraceCalc=function(s){return u._runCrossTraceCalc("icicle",s)}},{"../sunburst/calc":1047}],837:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../../components/color"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,i=e("../bar/constants").TEXTPAD,a=e("../../components/colorscale"),r=a.hasColorscale,n=a.handleDefaults;z.exports=function(l,o,c,h){function d(w,v){return u.coerce(l,o,s,w,v)}var p=d("labels"),y=d("parents");if(!p||!p.length||!y||!y.length){o.visible=!1;return}var g=d("values");g&&g.length?d("branchvalues"):d("count"),d("level"),d("maxdepth"),d("tiling.orientation"),d("tiling.flip"),d("tiling.pad");var A=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(A)?"text+label":"label"),d("hovertext"),d("hovertemplate");var b=d("pathbar.visible"),M="auto";t(l,o,h,d,M,{hasPathbar:b,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var _=d("marker.line.width");_&&d("marker.line.color",h.paper_bgcolor),d("marker.colors");var T=o._hasColorscale=r(l,"marker","colors")||(l.marker||{}).coloraxis;T&&n(l,o,h,d,{prefix:"marker.",cLetter:"c"}),d("leaf.opacity",T?1:.7),o._hovered={marker:{line:{width:2,color:m.contrast(h.paper_bgcolor)}}},b&&(d("pathbar.thickness",o.pathbar.textfont.size+2*i),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),x(o,h,d),o._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),i=e("./style").styleOne,a=e("../treemap/constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,l=!1;z.exports=function(c,h,d,p,y){var g=y.width,A=y.height,b=y.viewX,M=y.viewY,_=y.pathSlice,T=y.toMoveInsideSlice,w=y.strTransform,v=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,O={},F=c._fullLayout,I=h[0],D=I.trace,U=D.textposition.indexOf("left")!==-1,B=D.textposition.indexOf("right")!==-1,j=D.textposition.indexOf("bottom")!==-1,Z=t(d,[g,A],{flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,orientation:D.tiling.orientation,pad:{inner:D.tiling.pad},maxDepth:D._maxDepth}),ee=Z.descendants(),q=1/0,W=-1/0;ee.forEach(function(H){var Y=H.depth;Y>=D._maxDepth?(H.x0=H.x1=(H.x0+H.x1)/2,H.y0=H.y1=(H.y0+H.y1)/2):(q=Math.min(q,Y),W=Math.max(W,Y))}),p=p.data(ee,r.getPtId),D._maxVisibleLayers=isFinite(W)?W-q+1:0,p.enter().append("g").classed("slice",!0),L(p,l,O,[g,A],_),p.order();var J=null;if(v&&P){var le=r.getPtId(P);p.each(function(H){J===null&&r.getPtId(H)===le&&(J={x0:H.x0,x1:H.x1,y0:H.y0,y1:H.y1})})}var fe=function(){return J||{x0:0,x1:g,y0:0,y1:A}},se=p;return v&&(se=se.transition().each("end",function(){var H=u.select(this);r.setSliceCursor(H,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),se.each(function(H){H._x0=b(H.x0),H._x1=b(H.x1),H._y0=M(H.y0),H._y1=M(H.y1),H._hoverX=b(H.x1-D.tiling.pad),H._hoverY=M(j?H.y1-D.tiling.pad/2:H.y0+D.tiling.pad/2);var Y=u.select(this),ne=s.ensureSingle(Y,"path","surface",function(ae){ae.style("pointer-events","all")});v?ne.transition().attrTween("d",function(ae){var ie=S(ae,l,fe(),[g,A],{orientation:D.tiling.orientation,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1});return function(oe){return _(ie(oe))}}):ne.attr("d",_),Y.call(n,d,c,h,{styleOne:i,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,c,{isTransitioning:c._transitioning}),ne.call(i,H,D,{hovered:!1}),H.x0===H.x1||H.y0===H.y1?H._text="":H._text=f(H,d,D,h,F)||"";var te=s.ensureSingle(Y,"g","slicetext"),K=s.ensureSingle(te,"text","",function(ae){ae.attr("data-notex",1)}),$=s.ensureUniformFontSize(c,r.determineTextFont(D,H,F.font));K.text(H._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":U?"start":"middle").call(m.font,$).call(x.convertToTspans,c),H.textBB=m.bBox(K.node()),H.transform=T(H,{fontSize:$.size}),H.transform.fontSize=$.size,v?K.transition().attrTween("transform",function(ae){var ie=k(ae,l,fe(),[g,A]);return function(oe){return w(ie(oe))}}):K.attr("transform",w(H))}),J}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(e,z,N){z.exports={moduleType:"trace",name:"icicle",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(e,z,N){z.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("iciclecolorway",t.colorway),i("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(e,z,N){var u=e("d3-hierarchy"),s=e("../treemap/flip_tree");z.exports=function(x,t,i){var a=i.flipX,r=i.flipY,n=i.orientation==="h",f=i.maxDepth,l=t[0],o=t[1];f&&(l=(x.height+1)*t[0]/Math.min(x.height+1,f),o=(x.height+1)*t[1]/Math.min(x.height+1,f));var c=u.partition().padding(i.pad.inner).size(n?[t[1],l]:[t[0],o])(x);return(n||a||r)&&s(c,t,{swapXY:n,flipX:a,flipY:r}),c}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(e,z,N){var u=e("../treemap/draw"),s=e("./draw_descendants");z.exports=function(x,t,i,a){return u(x,t,i,a,{type:"icicle",drawDescendants:s})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../lib"),x=e("../bar/uniform_text").resizeText;function t(a){var r=a._fullLayout._iciclelayer.selectAll(".trace");x(a,r,"icicle"),r.each(function(n){var f=u.select(this),l=n[0],o=l.trace;f.style("opacity",o.opacity),f.selectAll("path.surface").each(function(c){u.select(this).call(i,c,o)})})}function i(a,r,n){var f=r.data.data,l=!r.children,o=f.i,c=m.castOption(n,o,"marker.line.color")||s.defaultLine,h=m.castOption(n,o,"marker.line.width")||0;a.style("stroke-width",h).call(s.fill,f.color).call(s.stroke,c).style("opacity",l?n.leaf.opacity:null)}z.exports={style:t,styleOne:i}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(e,z,N){for(var u=e("../../plots/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("./constants").colormodel,t=["rgb","rgba","rgba256","hsl","hsla"],i=[],a=[],r=0;r<t.length;r++){var n=x[t[r]];i.push("For the `"+t[r]+"` colormodel, it is ["+(n.zminDflt||n.min).join(", ")+"]."),a.push("For the `"+t[r]+"` colormodel, it is ["+(n.zmaxDflt||n.max).join(", ")+"].")}z.exports=m({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:t,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:m({},u.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:s({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(e,z,N){var u=e("../../lib"),s=e("./constants"),m=e("fast-isnumeric"),x=e("../../plots/cartesian/axes"),t=e("../../lib").maxRowLength,i=e("./helpers").getImageSize;z.exports=function(l,o){var c,h;if(o._hasZ)c=o.z.length,h=t(o.z);else if(o._hasSource){var d=i(o.source);c=d.height,h=d.width}var p=x.getFromId(l,o.xaxis||"x"),y=x.getFromId(l,o.yaxis||"y"),g=p.d2c(o.x0)-o.dx/2,A=y.d2c(o.y0)-o.dy/2,b,M=[g,g+h*o.dx],_=[A,A+c*o.dy];if(p&&p.type==="log")for(b=0;b<h;b++)M.push(g+b*o.dx);if(y&&y.type==="log")for(b=0;b<c;b++)_.push(A+b*o.dy);o._extremes[p._id]=x.findExtremes(p,M),o._extremes[y._id]=x.findExtremes(y,_),o._scaler=n(o);var T={x0:g,y0:A,z:o.z,w:h,h:c};return[T]};function a(f,l,o,c){return function(h){return u.constrain((h-f)*l,o,c)}}function r(f,l){return function(o){return u.constrain(o,f,l)}}function n(f){var l=s.colormodel[f.colormodel],o=l.colormodel||f.colormodel,c=o.length;f._sArray=[];for(var h=0;h<c;h++)l.min[h]!==f.zmin[h]||l.max[h]!==f.zmax[h]?f._sArray.push(a(f.zmin[h],(l.max[h]-l.min[h])/(f.zmax[h]-f.zmin[h]),l.min[h],l.max[h])):f._sArray.push(r(l.min[h],l.max[h]));return function(d){for(var p=d.slice(0,c),y=0;y<c;y++){var g=p[y];if(!m(g))return!1;p[y]=f._sArray[y](g)}return p}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(e,z,N){z.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(u){return u.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(u){return u.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(u){return u.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(u){var s=u.slice(0,3);return s[1]=s[1]+"%",s[2]=s[2]+"%",s},suffix:["\xB0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(u){var s=u.slice(0,4);return s[1]=s[1]+"%",s[2]=s[2]+"%",s},suffix:["\xB0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("./constants"),x=e("../../snapshot/helpers").IMAGE_URL_PREFIX;z.exports=function(i,a){function r(l,o){return u.coerce(i,a,s,l,o)}r("source"),a.source&&!a.source.match(x)&&delete a.source,a._hasSource=!!a.source;var n=r("z");if(a._hasZ=!(n===void 0||!n.length||!n[0]||!n[0].length),!a._hasZ&&!a._hasSource){a.visible=!1;return}r("x0"),r("y0"),r("dx"),r("dy");var f;a._hasZ?(r("colormodel","rgb"),f=m.colormodel[a.colormodel],r("zmin",f.zminDflt||f.min),r("zmax",f.zmaxDflt||f.max)):a._hasSource&&(a.colormodel="rgba256",f=m.colormodel[a.colormodel],a.zmin=f.zminDflt,a.zmax=f.zmaxDflt),r("zsmooth"),r("text"),r("hovertext"),r("hovertemplate"),a._length=null}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(e,z,N){z.exports=function(s,m){return"xVal"in m&&(s.x=m.xVal),"yVal"in m&&(s.y=m.yVal),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s.color=m.color,s.colormodel=m.trace.colormodel,s.z||(s.z=m.color),s}},{}],850:[function(e,z,N){var u=e("probe-image-size/sync"),s=e("../../snapshot/helpers").IMAGE_URL_PREFIX,m=e("buffer/").Buffer;N.getImageSize=function(x){var t=x.replace(s,""),i=new m(t,"base64");return u(i)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(e,z,N){var u=e("../../components/fx"),s=e("../../lib"),m=e("./constants");z.exports=function(t,i,a){var r=t.cd[0],n=r.trace,f=t.xa,l=t.ya;if(!(u.inbox(i-r.x0,i-(r.x0+r.w*n.dx),0)>0||u.inbox(a-r.y0,a-(r.y0+r.h*n.dy),0)>0)){var o=Math.floor((i-r.x0)/n.dx),c=Math.floor(Math.abs(a-r.y0)/n.dy),h;if(n._hasZ?h=r.z[c][o]:n._hasSource&&(h=n._canvas.el.getContext("2d").getImageData(o,c,1,1).data),!!h){var d=r.hi||n.hoverinfo,p;if(d){var y=d.split("+");y.indexOf("all")!==-1&&(y=["color"]),y.indexOf("color")!==-1&&(p=!0)}var g=m.colormodel[n.colormodel],A=g.colormodel||n.colormodel,b=A.length,M=n._scaler(h),_=g.suffix,T=[];(n.hovertemplate||p)&&(T.push("["+[M[0]+_[0],M[1]+_[1],M[2]+_[2]].join(", ")),b===4&&T.push(", "+M[3]+_[3]),T.push("]"),T=T.join(""),t.extraText=A.toUpperCase()+": "+T);var w;Array.isArray(n.hovertext)&&Array.isArray(n.hovertext[c])?w=n.hovertext[c][o]:Array.isArray(n.text)&&Array.isArray(n.text[c])&&(w=n.text[c][o]);var v=l.c2p(r.y0+(c+.5)*n.dy),L=r.x0+(o+.5)*n.dx,S=r.y0+(c+.5)*n.dy,k="["+h.slice(0,n.colormodel.length).join(", ")+"]";return[s.extendFlat(t,{index:[c,o],x0:f.c2p(r.x0+o*n.dx),x1:f.c2p(r.x0+(o+1)*n.dx),y0:v,y1:v,color:M,xVal:L,xLabelVal:L,yVal:S,yLabelVal:S,zLabelVal:k,text:w,hovertemplateLabels:{zLabel:k,colorLabel:T,"color[0]Label":M[0]+_[0],"color[1]Label":M[1]+_[1],"color[2]Label":M[2]+_[2],"color[3]Label":M[3]+_[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover"),eventData:e("./event_data"),moduleType:"trace",name:"image",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=s.strTranslate,x=e("../../constants/xmlns_namespaces"),t=e("./constants"),i=s.isIOS()||s.isSafari()||s.isIE();z.exports=function(r,n,f,l){var o=n.xaxis,c=n.yaxis,h=!(i||r._context._exportedPlot);s.makeTraceGroups(l,f,"im").each(function(d){var p=u.select(this),y=d[0],g=y.trace,A=(g.zsmooth==="fast"||g.zsmooth===!1&&h)&&!g._hasZ&&g._hasSource&&o.type==="linear"&&c.type==="linear";g._realImage=A;var b=y.z,M=y.x0,_=y.y0,T=y.w,w=y.h,v=g.dx,L=g.dy,S,k,P,O,F,I;for(I=0;S===void 0&&I<T;)S=o.c2p(M+I*v),I++;for(I=T;k===void 0&&I>0;)k=o.c2p(M+I*v),I--;for(I=0;O===void 0&&I<w;)O=c.c2p(_+I*L),I++;for(I=w;F===void 0&&I>0;)F=c.c2p(_+I*L),I--;if(k<S&&(P=k,k=S,S=P),F<O&&(P=O,O=F,F=P),!A){var D=.5;S=Math.max(-D*o._length,S),k=Math.min((1+D)*o._length,k),O=Math.max(-D*c._length,O),F=Math.min((1+D)*c._length,F)}var U=Math.round(k-S),B=Math.round(F-O),j=U<=0||B<=0;if(j){var Z=p.selectAll("image").data([]);Z.exit().remove();return}function ee(te){var K=document.createElement("canvas");K.width=U,K.height=B;var $=K.getContext("2d"),ae=function(He){return s.constrain(Math.round(o.c2p(M+He*v)-S),0,U)},ie=function(He){return s.constrain(Math.round(c.c2p(_+He*L)-O),0,B)},oe=t.colormodel[g.colormodel],ue=oe.colormodel||g.colormodel,ye=oe.fmt,ce;for(I=0;I<y.w;I++){var me=ae(I),xe=ae(I+1);if(!(xe===me||isNaN(xe)||isNaN(me)))for(var ke=0;ke<y.h;ke++){var Ae=ie(ke),Oe=ie(ke+1);Oe===Ae||isNaN(Oe)||isNaN(Ae)||!te(I,ke)||(ce=g._scaler(te(I,ke)),ce?$.fillStyle=ue+"("+ye(ce).join(",")+")":$.fillStyle="rgba(0,0,0,0)",$.fillRect(me,Ae,xe-me,Oe-Ae))}}return K}var q=p.selectAll("image").data([d]);q.enter().append("svg:image").attr({xmlns:x.svg,preserveAspectRatio:"none"}),q.exit().remove();var W=g.zsmooth===!1?t.pixelatedStyle:"";if(A){var J=s.simpleMap(o.range,o.r2l),le=s.simpleMap(c.range,c.r2l),fe=J[1]<J[0],se=le[1]>le[0];if(fe||se){var H=S+U/2,Y=O+B/2;W+="transform:"+m(H+"px",Y+"px")+"scale("+(fe?-1:1)+","+(se?-1:1)+")"+m(-H+"px",-Y+"px")+";"}}q.attr("style",W);var ne=new Promise(function(te){if(g._hasZ)te();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===T&&g._canvas.el.height===w&&g._canvas.source===g.source)te();else{var K=document.createElement("canvas");K.width=T,K.height=w;var $=K.getContext("2d");g._image=g._image||new Image;var ae=g._image;ae.onload=function(){$.drawImage(ae,0,0),g._canvas={el:K,source:g.source},te()},ae.setAttribute("src",g.source)}}).then(function(){var te,K;if(g._hasZ)K=ee(function(ie,oe){return b[oe][ie]}),te=K.toDataURL("image/png");else if(g._hasSource)if(A)te=g.source;else{var $=g._canvas.el.getContext("2d"),ae=$.getImageData(0,0,T,w).data;K=ee(function(ie,oe){var ue=4*(oe*T+ie);return[ae[ue],ae[ue+1],ae[ue+2],ae[ue+3]]}),te=K.toDataURL("image/png")}q.attr({"xlink:href":te,height:B,width:U,x:S,y:O})});r._promises.push(ne)})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(e,z,N){var u=e("@plotly/d3");z.exports=function(m){u.select(m).selectAll(".im image").style("opacity",function(x){return x[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(e,z,N){var u=e("../../lib/extend").extendFlat,s=e("../../lib/extend").extendDeep,m=e("../../plot_api/edit_types").overrideAll,x=e("../../plots/font_attributes"),t=e("../../components/color/attributes"),i=e("../../plots/domain").attributes,a=e("../../plots/cartesian/layout_attributes"),r=e("../../plot_api/plot_template").templatedArray,n=e("../../constants/delta.js"),f=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,l=x({editType:"plot",colorEditType:"plot"}),o={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:t.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},h=r("step",s({},o,{range:c}));z.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:i({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:u({},l,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:f("value")},font:u({},l,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:f("value")},increasing:{symbol:{valType:"string",dflt:n.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:n.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:n.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:u({},l,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:s({},o,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:t.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:m({range:c,visible:u({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:u({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,showticklabels:a.showticklabels,tickfont:x({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:h,threshold:{line:{color:u({},o.line.color,{}),width:u({},o.line.width,{dflt:1}),editType:"plot"},thickness:u({},o.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(e,z,N){var u=e("../../plots/plots");N.name="indicator",N.plot=function(s,m,x,t){u.plotBasePlot(N.name,s,m,x,t)},N.clean=function(s,m,x,t){u.cleanBasePlot(N.name,s,m,x,t)}},{"../../plots/plots":619}],857:[function(e,z,N){function u(s,m){var x=[],t=m.value;typeof m._lastValue!="number"&&(m._lastValue=m.value);var i=m._lastValue,a=i;return m._hasDelta&&typeof m.delta.reference=="number"&&(a=m.delta.reference),x[0]={y:t,lastY:i,delta:t-a,relativeDelta:(t-a)/a},x}z.exports={calc:u}},{}],858:[function(e,z,N){z.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../../plot_api/plot_template"),t=e("../../plots/array_container_defaults"),i=e("./constants.js"),a=e("../../plots/cartesian/tick_value_defaults"),r=e("../../plots/cartesian/tick_mark_defaults"),n=e("../../plots/cartesian/tick_label_defaults"),f=e("../../plots/cartesian/prefix_suffix_defaults");function l(c,h,d,p){function y(I,D){return u.coerce(c,h,s,I,D)}m(h,p,y),y("mode"),h._hasNumber=h.mode.indexOf("number")!==-1,h._hasDelta=h.mode.indexOf("delta")!==-1,h._hasGauge=h.mode.indexOf("gauge")!==-1;var g=y("value");h._range=[0,typeof g=="number"?1.5*g:1];var A=new Array(2),b;h._hasNumber&&(y("number.valueformat"),y("number.font.color",p.font.color),y("number.font.family",p.font.family),y("number.font.size"),h.number.font.size===void 0&&(h.number.font.size=i.defaultNumberFontSize,A[0]=!0),y("number.prefix"),y("number.suffix"),b=h.number.font.size);var M;h._hasDelta&&(y("delta.font.color",p.font.color),y("delta.font.family",p.font.family),y("delta.font.size"),h.delta.font.size===void 0&&(h.delta.font.size=(h._hasNumber?.5:1)*(b||i.defaultNumberFontSize),A[1]=!0),y("delta.reference",h.value),y("delta.relative"),y("delta.valueformat",h.delta.relative?"2%":""),y("delta.increasing.symbol"),y("delta.increasing.color"),y("delta.decreasing.symbol"),y("delta.decreasing.color"),y("delta.position"),M=h.delta.font.size),h._scaleNumbers=(!h._hasNumber||A[0])&&(!h._hasDelta||A[1])||!1,y("title.font.color",p.font.color),y("title.font.family",p.font.family),y("title.font.size",.25*(b||M||i.defaultNumberFontSize)),y("title.text");var _,T,w,v;function L(I,D){return u.coerce(_,T,s.gauge,I,D)}function S(I,D){return u.coerce(w,v,s.gauge.axis,I,D)}if(h._hasGauge){_=c.gauge,_||(_={}),T=x.newContainer(h,"gauge"),L("shape");var k=h._isBullet=h.gauge.shape==="bullet";k||y("title.align","center");var P=h._isAngular=h.gauge.shape==="angular";P||y("align","center"),L("bgcolor",p.paper_bgcolor),L("borderwidth"),L("bordercolor"),L("bar.color"),L("bar.line.color"),L("bar.line.width");var O=i.valueThickness*(h.gauge.shape==="bullet"?.5:1);L("bar.thickness",O),t(_,T,{name:"steps",handleItemDefaults:o}),L("threshold.value"),L("threshold.thickness"),L("threshold.line.width"),L("threshold.line.color"),w={},_&&(w=_.axis||{}),v=x.newContainer(T,"axis"),S("visible"),h._range=S("range",h._range);var F={outerTicks:!0};a(w,v,S,"linear"),f(w,v,S,"linear",F),n(w,v,S,"linear",F),r(w,v,S,F)}else y("title.align","center"),y("align","center"),h._isAngular=h._isBullet=!1;h._length=null}function o(c,h){function d(p,y){return u.coerce(c,h,s.gauge.steps,p,y)}d("color"),d("line.color"),d("line.width"),d("range"),d("thickness")}z.exports={supplyDefaults:l}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(e,z,N){z.exports={moduleType:"trace",name:"indicator",basePlotModule:e("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc").calc,plot:e("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-interpolate").interpolate,m=e("d3-interpolate").interpolateNumber,x=e("../../lib"),t=x.strScale,i=x.strTranslate,a=x.rad2deg,r=e("../../constants/alignment").MID_SHIFT,n=e("../../components/drawing"),f=e("./constants"),l=e("../../lib/svg_text_utils"),o=e("../../plots/cartesian/axes"),c=e("../../plots/cartesian/axis_defaults"),h=e("../../plots/cartesian/position_defaults"),d=e("../../plots/cartesian/layout_attributes"),p=e("../../components/color"),y={left:"start",center:"middle",right:"end"},g={left:0,center:.5,right:1},A=/[yzafpnµmkMGTPEZY]/;function b(F){return F&&F.duration>0}z.exports=function(I,D,U,B){var j=I._fullLayout,Z;b(U)&&B&&(Z=B()),x.makeTraceGroups(j._indicatorlayer,D,"trace").each(function(ee){var q=ee[0],W=q.trace,J=u.select(this),le=W._hasGauge,fe=W._isAngular,se=W._isBullet,H=W.domain,Y={w:j._size.w*(H.x[1]-H.x[0]),h:j._size.h*(H.y[1]-H.y[0]),l:j._size.l+j._size.w*H.x[0],r:j._size.r+j._size.w*(1-H.x[1]),t:j._size.t+j._size.h*(1-H.y[1]),b:j._size.b+j._size.h*H.y[0]},ne=Y.l+Y.w/2,te=Y.t+Y.h/2,K=Math.min(Y.w/2,Y.h),$=f.innerRadius*K,ae,ie,oe,ue=W.align||"center";if(ie=te,!le)ae=Y.l+g[ue]*Y.w,oe=function(_e){return S(_e,Y.w,Y.h)};else if(fe&&(ae=ne,ie=te+K/2,oe=function(_e){return k(_e,.9*$)}),se){var ye=f.bulletPadding,ce=1-f.bulletNumberDomainSize+ye;ae=Y.l+(ce+(1-ce)*g[ue])*Y.w,oe=function(_e){return S(_e,(f.bulletNumberDomainSize-ye)*Y.w,Y.h)}}T(I,J,ee,{numbersX:ae,numbersY:ie,numbersScaler:oe,transitionOpts:U,onComplete:Z});var me,xe;le&&(me={range:W.gauge.axis.range,color:W.gauge.bgcolor,line:{color:W.gauge.bordercolor,width:0},thickness:1},xe={range:W.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:W.gauge.bordercolor,width:W.gauge.borderwidth},thickness:1});var ke=J.selectAll("g.angular").data(fe?ee:[]);ke.exit().remove();var Ae=J.selectAll("g.angularaxis").data(fe?ee:[]);Ae.exit().remove(),fe&&_(I,J,ee,{radius:K,innerRadius:$,gauge:ke,layer:Ae,size:Y,gaugeBg:me,gaugeOutline:xe,transitionOpts:U,onComplete:Z});var Oe=J.selectAll("g.bullet").data(se?ee:[]);Oe.exit().remove();var He=J.selectAll("g.bulletaxis").data(se?ee:[]);He.exit().remove(),se&&M(I,J,ee,{gauge:Oe,layer:He,size:Y,gaugeBg:me,gaugeOutline:xe,transitionOpts:U,onComplete:Z});var Ge=J.selectAll("text.title").data(ee);Ge.exit().remove(),Ge.enter().append("text").classed("title",!0),Ge.attr("text-anchor",function(){return se?y.right:y[W.title.align]}).text(W.title.text).call(n.font,W.title.font).call(l.convertToTspans,I),Ge.attr("transform",function(){var _e=Y.l+Y.w*g[W.title.align],Re,We=f.titlePadding,qe=n.bBox(Ge.node());if(le){if(fe)if(W.gauge.axis.visible){var Ue=n.bBox(Ae.node());Re=Ue.top-We-qe.bottom}else Re=Y.t+Y.h/2-K/2-qe.bottom-We;se&&(Re=ie-(qe.top+qe.bottom)/2,_e=Y.l-f.bulletPadding*Y.w)}else Re=W._numbersTop-We-qe.bottom;return i(_e,Re)})})};function M(F,I,D,U){var B=D[0].trace,j=U.gauge,Z=U.layer,ee=U.gaugeBg,q=U.gaugeOutline,W=U.size,J=B.domain,le=U.transitionOpts,fe=U.onComplete,se,H,Y,ne,te;j.enter().append("g").classed("bullet",!0),j.attr("transform",i(W.l,W.t)),Z.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),Z.selectAll("g.xbulletaxistick,path,text").remove();var K=W.h,$=B.gauge.bar.thickness*K,ae=J.x[0],ie=J.x[0]+(J.x[1]-J.x[0])*(B._hasNumber||B._hasDelta?1-f.bulletNumberDomainSize:1);se=L(F,B.gauge.axis),se._id="xbulletaxis",se.domain=[ae,ie],se.setScale(),H=o.calcTicks(se),Y=o.makeTransTickFn(se),ne=o.getTickSigns(se)[2],te=W.t+W.h,se.visible&&(o.drawTicks(F,se,{vals:se.ticks==="inside"?o.clipEnds(se,H):H,layer:Z,path:o.makeTickPath(se,te,ne),transFn:Y}),o.drawLabels(F,se,{vals:H,layer:Z,transFn:Y,labelFns:o.makeLabelFns(se,te)}));function oe(Ae){Ae.attr("width",function(Oe){return Math.max(0,se.c2p(Oe.range[1])-se.c2p(Oe.range[0]))}).attr("x",function(Oe){return se.c2p(Oe.range[0])}).attr("y",function(Oe){return .5*(1-Oe.thickness)*K}).attr("height",function(Oe){return Oe.thickness*K})}var ue=[ee].concat(B.gauge.steps),ye=j.selectAll("g.bg-bullet").data(ue);ye.enter().append("g").classed("bg-bullet",!0).append("rect"),ye.select("rect").call(oe).call(w),ye.exit().remove();var ce=j.selectAll("g.value-bullet").data([B.gauge.bar]);ce.enter().append("g").classed("value-bullet",!0).append("rect"),ce.select("rect").attr("height",$).attr("y",(K-$)/2).call(w),b(le)?ce.select("rect").transition().duration(le.duration).ease(le.easing).each("end",function(){fe&&fe()}).each("interrupt",function(){fe&&fe()}).attr("width",Math.max(0,se.c2p(Math.min(B.gauge.axis.range[1],D[0].y)))):ce.select("rect").attr("width",typeof D[0].y=="number"?Math.max(0,se.c2p(Math.min(B.gauge.axis.range[1],D[0].y))):0),ce.exit().remove();var me=D.filter(function(){return B.gauge.threshold.value||B.gauge.threshold.value===0}),xe=j.selectAll("g.threshold-bullet").data(me);xe.enter().append("g").classed("threshold-bullet",!0).append("line"),xe.select("line").attr("x1",se.c2p(B.gauge.threshold.value)).attr("x2",se.c2p(B.gauge.threshold.value)).attr("y1",(1-B.gauge.threshold.thickness)/2*K).attr("y2",(1-(1-B.gauge.threshold.thickness)/2)*K).call(p.stroke,B.gauge.threshold.line.color).style("stroke-width",B.gauge.threshold.line.width),xe.exit().remove();var ke=j.selectAll("g.gauge-outline").data([q]);ke.enter().append("g").classed("gauge-outline",!0).append("rect"),ke.select("rect").call(oe).call(w),ke.exit().remove()}function _(F,I,D,U){var B=D[0].trace,j=U.size,Z=U.radius,ee=U.innerRadius,q=U.gaugeBg,W=U.gaugeOutline,J=[j.l+j.w/2,j.t+j.h/2+Z/2],le=U.gauge,fe=U.layer,se=U.transitionOpts,H=U.onComplete,Y=Math.PI/2;function ne(Ie){var Ve=B.gauge.axis.range[0],dt=B.gauge.axis.range[1],Rt=(Ie-Ve)/(dt-Ve)*Math.PI-Y;return Rt<-Y?-Y:Rt>Y?Y:Rt}function te(Ie){return u.svg.arc().innerRadius((ee+Z)/2-Ie/2*(Z-ee)).outerRadius((ee+Z)/2+Ie/2*(Z-ee)).startAngle(-Y)}function K(Ie){Ie.attr("d",function(Ve){return te(Ve.thickness).startAngle(ne(Ve.range[0])).endAngle(ne(Ve.range[1]))()})}var $,ae,ie,oe;le.enter().append("g").classed("angular",!0),le.attr("transform",i(J[0],J[1])),fe.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),fe.selectAll("g.xangularaxistick,path,text").remove(),$=L(F,B.gauge.axis),$.type="linear",$.range=B.gauge.axis.range,$._id="xangularaxis",$.ticklabeloverflow="allow",$.setScale();var ue=function(Ie){return($.range[0]-Ie.x)/($.range[1]-$.range[0])*Math.PI+Math.PI},ye={},ce=o.makeLabelFns($,0),me=ce.labelStandoff;ye.xFn=function(Ie){var Ve=ue(Ie);return Math.cos(Ve)*me},ye.yFn=function(Ie){var Ve=ue(Ie),dt=Math.sin(Ve)>0?.2:1;return-Math.sin(Ve)*(me+Ie.fontSize*dt)+Math.abs(Math.cos(Ve))*(Ie.fontSize*r)},ye.anchorFn=function(Ie){var Ve=ue(Ie),dt=Math.cos(Ve);return Math.abs(dt)<.1?"middle":dt>0?"start":"end"},ye.heightFn=function(Ie,Ve,dt){var Rt=ue(Ie);return-.5*(1+Math.sin(Rt))*dt};var xe=function(Ie){return i(J[0]+Z*Math.cos(Ie),J[1]-Z*Math.sin(Ie))};ie=function(Ie){return xe(ue(Ie))};var ke=function(Ie){var Ve=ue(Ie);return xe(Ve)+"rotate("+-a(Ve)+")"};if(ae=o.calcTicks($),oe=o.getTickSigns($)[2],$.visible){oe=$.ticks==="inside"?-1:1;var Ae=($.linewidth||1)/2;o.drawTicks(F,$,{vals:ae,layer:fe,path:"M"+oe*Ae+",0h"+oe*$.ticklen,transFn:ke}),o.drawLabels(F,$,{vals:ae,layer:fe,transFn:ie,labelFns:ye})}var Oe=[q].concat(B.gauge.steps),He=le.selectAll("g.bg-arc").data(Oe);He.enter().append("g").classed("bg-arc",!0).append("path"),He.select("path").call(K).call(w),He.exit().remove();var Ge=te(B.gauge.bar.thickness),_e=le.selectAll("g.value-arc").data([B.gauge.bar]);_e.enter().append("g").classed("value-arc",!0).append("path");var Re=_e.select("path");b(se)?(Re.transition().duration(se.duration).ease(se.easing).each("end",function(){H&&H()}).each("interrupt",function(){H&&H()}).attrTween("d",v(Ge,ne(D[0].lastY),ne(D[0].y))),B._lastValue=D[0].y):Re.attr("d",typeof D[0].y=="number"?Ge.endAngle(ne(D[0].y)):"M0,0Z"),Re.call(w),_e.exit().remove(),Oe=[];var We=B.gauge.threshold.value;(We||We===0)&&Oe.push({range:[We,We],color:B.gauge.threshold.color,line:{color:B.gauge.threshold.line.color,width:B.gauge.threshold.line.width},thickness:B.gauge.threshold.thickness});var qe=le.selectAll("g.threshold-arc").data(Oe);qe.enter().append("g").classed("threshold-arc",!0).append("path"),qe.select("path").call(K).call(w),qe.exit().remove();var Ue=le.selectAll("g.gauge-outline").data([W]);Ue.enter().append("g").classed("gauge-outline",!0).append("path"),Ue.select("path").call(K).call(w),Ue.exit().remove()}function T(F,I,D,U){var B=D[0].trace,j=U.numbersX,Z=U.numbersY,ee=B.align||"center",q=y[ee],W=U.transitionOpts,J=U.onComplete,le=x.ensureSingle(I,"g","numbers"),fe,se,H,Y=[];B._hasNumber&&Y.push("number"),B._hasDelta&&(Y.push("delta"),B.delta.position==="left"&&Y.reverse());var ne=le.selectAll("text").data(Y);ne.enter().append("text"),ne.attr("text-anchor",function(){return q}).attr("class",function(xe){return xe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),ne.exit().remove();function te(xe,ke,Ae,Oe){if(xe.match("s")&&Ae>=0!=Oe>=0&&!ke(Ae).slice(-1).match(A)&&!ke(Oe).slice(-1).match(A)){var He=xe.slice().replace("s","f").replace(/\d+/,function(_e){return parseInt(_e)-1}),Ge=L(F,{tickformat:He});return function(_e){return Math.abs(_e)<1?o.tickText(Ge,_e).text:ke(_e)}}else return ke}function K(){var xe=L(F,{tickformat:B.number.valueformat},B._range);xe.setScale(),o.prepTicks(xe);var ke=function(_e){return o.tickText(xe,_e).text},Ae=B.number.suffix,Oe=B.number.prefix,He=le.select("text.number");function Ge(){var _e=typeof D[0].y=="number"?Oe+ke(D[0].y)+Ae:"-";He.text(_e).call(n.font,B.number.font).call(l.convertToTspans,F)}return b(W)?He.transition().duration(W.duration).ease(W.easing).each("end",function(){Ge(),J&&J()}).each("interrupt",function(){Ge(),J&&J()}).attrTween("text",function(){var _e=u.select(this),Re=m(D[0].lastY,D[0].y);B._lastValue=D[0].y;var We=te(B.number.valueformat,ke,D[0].lastY,D[0].y);return function(qe){_e.text(Oe+We(Re(qe))+Ae)}}):Ge(),fe=P(Oe+ke(D[0].y)+Ae,B.number.font,q,F),He}function $(){var xe=L(F,{tickformat:B.delta.valueformat},B._range);xe.setScale(),o.prepTicks(xe);var ke=function(Re){return o.tickText(xe,Re).text},Ae=function(Re){var We=B.delta.relative?Re.relativeDelta:Re.delta;return We},Oe=function(Re,We){return Re===0||typeof Re!="number"||isNaN(Re)?"-":(Re>0?B.delta.increasing.symbol:B.delta.decreasing.symbol)+We(Re)},He=function(Re){return Re.delta>=0?B.delta.increasing.color:B.delta.decreasing.color};B._deltaLastValue===void 0&&(B._deltaLastValue=Ae(D[0]));var Ge=le.select("text.delta");Ge.call(n.font,B.delta.font).call(p.fill,He({delta:B._deltaLastValue}));function _e(){Ge.text(Oe(Ae(D[0]),ke)).call(p.fill,He(D[0])).call(l.convertToTspans,F)}return b(W)?Ge.transition().duration(W.duration).ease(W.easing).tween("text",function(){var Re=u.select(this),We=Ae(D[0]),qe=B._deltaLastValue,Ue=te(B.delta.valueformat,ke,qe,We),Ie=m(qe,We);return B._deltaLastValue=We,function(Ve){Re.text(Oe(Ie(Ve),Ue)),Re.call(p.fill,He({delta:Ie(Ve)}))}}).each("end",function(){_e(),J&&J()}).each("interrupt",function(){_e(),J&&J()}):_e(),se=P(Oe(Ae(D[0]),ke),B.delta.font,q,F),Ge}var ae=B.mode+B.align,ie;if(B._hasDelta&&(ie=$(),ae+=B.delta.position+B.delta.font.size+B.delta.font.family+B.delta.valueformat,ae+=B.delta.increasing.symbol+B.delta.decreasing.symbol,H=se),B._hasNumber&&(K(),ae+=B.number.font.size+B.number.font.family+B.number.valueformat+B.number.suffix+B.number.prefix,H=fe),B._hasDelta&&B._hasNumber){var oe=[(fe.left+fe.right)/2,(fe.top+fe.bottom)/2],ue=[(se.left+se.right)/2,(se.top+se.bottom)/2],ye,ce,me=.75*B.delta.font.size;B.delta.position==="left"&&(ye=O(B,"deltaPos",0,-1*(fe.width*g[B.align]+se.width*(1-g[B.align])+me),ae,Math.min),ce=oe[1]-ue[1],H={width:fe.width+se.width+me,height:Math.max(fe.height,se.height),left:se.left+ye,right:fe.right,top:Math.min(fe.top,se.top+ce),bottom:Math.max(fe.bottom,se.bottom+ce)}),B.delta.position==="right"&&(ye=O(B,"deltaPos",0,fe.width*(1-g[B.align])+se.width*g[B.align]+me,ae,Math.max),ce=oe[1]-ue[1],H={width:fe.width+se.width+me,height:Math.max(fe.height,se.height),left:fe.left,right:se.right+ye,top:Math.min(fe.top,se.top+ce),bottom:Math.max(fe.bottom,se.bottom+ce)}),B.delta.position==="bottom"&&(ye=null,ce=se.height,H={width:Math.max(fe.width,se.width),height:fe.height+se.height,left:Math.min(fe.left,se.left),right:Math.max(fe.right,se.right),top:fe.bottom-fe.height,bottom:fe.bottom+se.height}),B.delta.position==="top"&&(ye=null,ce=fe.top,H={width:Math.max(fe.width,se.width),height:fe.height+se.height,left:Math.min(fe.left,se.left),right:Math.max(fe.right,se.right),top:fe.bottom-fe.height-se.height,bottom:fe.bottom}),ie.attr({dx:ye,dy:ce})}(B._hasNumber||B._hasDelta)&&le.attr("transform",function(){var xe=U.numbersScaler(H);ae+=xe[2];var ke=O(B,"numbersScale",1,xe[0],ae,Math.min),Ae;B._scaleNumbers||(ke=1),B._isAngular?Ae=Z-ke*H.bottom:Ae=Z-ke*(H.top+H.bottom)/2,B._numbersTop=ke*H.top+Ae;var Oe=H[ee];ee==="center"&&(Oe=(H.left+H.right)/2);var He=j-ke*Oe;return He=O(B,"numbersTranslate",0,He,ae,Math.max),i(He,Ae)+t(ke)})}function w(F){F.each(function(I){p.stroke(u.select(this),I.line.color)}).each(function(I){p.fill(u.select(this),I.color)}).style("stroke-width",function(I){return I.line.width})}function v(F,I,D){return function(){var U=s(I,D);return function(B){return F.endAngle(U(B))()}}}function L(F,I,D){var U=F._fullLayout,B=x.extendFlat({type:"linear",ticks:"outside",range:D,showline:!0},I),j={type:"linear",_id:"x"+I._id},Z={letter:"x",font:U.font,noHover:!0,noTickson:!0};function ee(q,W){return x.coerce(B,j,d,q,W)}return c(B,j,ee,Z,U),h(B,j,ee,Z),j}function S(F,I,D){var U=Math.min(I/F.width,D/F.height);return[U,F,I+"x"+D]}function k(F,I){var D=Math.sqrt(F.width/2*(F.width/2)+F.height*F.height),U=I/D;return[U,F,I]}function P(F,I,D,U){var B=document.createElementNS("http://www.w3.org/2000/svg","text"),j=u.select(B);return j.text(F).attr("x",0).attr("y",0).attr("text-anchor",D).attr("data-unformatted",F).call(l.convertToTspans,U).call(n.font,I),n.bBox(j.node())}function O(F,I,D,U,B,j){var Z="_cache"+I;F[Z]&&F[Z].key===B||(F[Z]={key:B,value:D});var ee=x.aggNums(j,null,[F[Z].value,U],2);return F[Z].value=ee,ee}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(e,z,N){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll;function r(l){return{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}}function n(l){return{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}}var f=z.exports=a(i({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:r(),y:r(),z:r()},caps:{x:n(),y:n(),z:n()},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:m(),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),valuehoverformat:s("value",1),showlegend:i({},t.showlegend,{dflt:!1})},u("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:i({},t.hoverinfo)}),"calc","nested");f.flatshading.dflt=!0,f.lighting.facenormalsepsilon.dflt=0,f.x.editType=f.y.editType=f.z.editType=f.value.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(e,z,N){var u=e("../../components/colorscale/calc"),s=e("../streamtube/calc").processGrid,m=e("../streamtube/calc").filter;z.exports=function(t,i){i._len=Math.min(i.x.length,i.y.length,i.z.length,i.value.length),i._x=m(i.x,i._len),i._y=m(i.y,i._len),i._z=m(i.z,i._len),i._value=m(i.value,i._len);var a=s(i);i._gridFill=a.fill,i._Xs=a.Xs,i._Ys=a.Ys,i._Zs=a.Zs,i._len=a.len;for(var r=1/0,n=-1/0,f=0;f<i._len;f++){var l=i._value[f];r=Math.min(r,l),n=Math.max(n,l)}i._minValues=r,i._maxValues=n,i._vMin=i.isomin===void 0||i.isomin===null?r:i.isomin,i._vMax=i.isomax===void 0||i.isomin===null?n:i.isomax,u(t,i,{vals:[i._vMin,i._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(e,z,N){var u=e("../../../stackgl_modules").gl_mesh3d,s=e("../../lib/gl_format_color").parseColorScale,m=e("../../lib/str2rgbarray"),x=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),i=function(o,c){for(var h=c.length-1;h>0;h--){var d=Math.min(c[h],c[h-1]),p=Math.max(c[h],c[h-1]);if(p>d&&d<o&&o<=p)return{id:h,distRatio:(p-o)/(p-d)}}return{id:0,distRatio:0}};function a(o,c,h){this.scene=o,this.uid=h,this.mesh=c,this.name="",this.data=null,this.showContour=!1}var r=a.prototype;r.handlePick=function(o){if(o.object===this.mesh){var c=o.data.index,h=this.data._meshX[c],d=this.data._meshY[c],p=this.data._meshZ[c],y=this.data._Ys.length,g=this.data._Zs.length,A=i(h,this.data._Xs).id,b=i(d,this.data._Ys).id,M=i(p,this.data._Zs).id,_=o.index=M+g*b+g*y*A;o.traceCoordinate=[this.data._meshX[_],this.data._meshY[_],this.data._meshZ[_],this.data._value[_]];var T=this.data.hovertext||this.data.text;return Array.isArray(T)&&T[_]!==void 0?o.textLabel=T[_]:T&&(o.textLabel=T),!0}},r.update=function(o){var c=this.scene,h=c.fullSceneLayout;this.data=f(o);function d(b,M,_,T){return M.map(function(w){return b.d2l(w,0,T)*_})}var p=t(d(h.xaxis,o._meshX,c.dataScale[0],o.xcalendar),d(h.yaxis,o._meshY,c.dataScale[1],o.ycalendar),d(h.zaxis,o._meshZ,c.dataScale[2],o.zcalendar)),y=t(o._meshI,o._meshJ,o._meshK),g={positions:p,cells:y,lightPosition:[o.lightposition.x,o.lightposition.y,o.lightposition.z],ambient:o.lighting.ambient,diffuse:o.lighting.diffuse,specular:o.lighting.specular,roughness:o.lighting.roughness,fresnel:o.lighting.fresnel,vertexNormalsEpsilon:o.lighting.vertexnormalsepsilon,faceNormalsEpsilon:o.lighting.facenormalsepsilon,opacity:o.opacity,contourEnable:o.contour.show,contourColor:m(o.contour.color).slice(0,3),contourWidth:o.contour.width,useFacetNormals:o.flatshading},A=x(o);g.vertexIntensity=o._meshIntensity,g.vertexIntensityBounds=[A.min,A.max],g.colormap=s(o),this.mesh.update(g)},r.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var n=["xyz","xzy","yxz","yzx","zxy","zyx"];function f(o){o._meshI=[],o._meshJ=[],o._meshK=[];var c=o.surface.show,h=o.spaceframe.show,d=o.surface.fill,p=o.spaceframe.fill,y=!1,g=!1,A=0,b,M,_=o._Xs,T=o._Ys,w=o._Zs,v=_.length,L=T.length,S=w.length,k=n.indexOf(o._gridFill.replace(/-/g,"").replace(/\+/g,"")),P=function(Lt,Mt,it){switch(k){case 5:return it+S*Mt+S*L*Lt;case 4:return it+S*Lt+S*v*Mt;case 3:return Mt+L*it+L*S*Lt;case 2:return Mt+L*Lt+L*v*it;case 1:return Lt+v*it+v*S*Mt;default:return Lt+v*Mt+v*L*it}},O=o._minValues,F=o._maxValues,I=o._vMin,D=o._vMax,U,B,j,Z;function ee(Lt,Mt,it){for(var ht=Z.length,Qe=M;Qe<ht;Qe++)if(Lt===U[Qe]&&Mt===B[Qe]&&it===j[Qe])return Qe;return-1}function q(){M=b}function W(){U=[],B=[],j=[],Z=[],b=0,q()}function J(Lt,Mt,it,ht){return U.push(Lt),B.push(Mt),j.push(it),Z.push(ht),b++,b-1}function le(Lt,Mt,it){return o._meshI.push(Lt),o._meshJ.push(Mt),o._meshK.push(it),A++,A-1}function fe(Lt,Mt,it){for(var ht=[],Qe=0;Qe<Lt.length;Qe++)ht[Qe]=(Lt[Qe]+Mt[Qe]+it[Qe])/3;return ht}function se(Lt,Mt,it){for(var ht=[],Qe=0;Qe<Lt.length;Qe++)ht[Qe]=Lt[Qe]*(1-it)+it*Mt[Qe];return ht}var H;function Y(Lt){H=Lt}function ne(Lt,Mt){var it=Lt[0],ht=Lt[1],Qe=Lt[2],Ce=fe(it,ht,Qe),Xe=Math.sqrt(1-H),rt=se(Ce,it,Xe),ut=se(Ce,ht,Xe),Pt=se(Ce,Qe,Xe),St=Mt[0],Nt=Mt[1],jt=Mt[2];return{xyzv:[[it,ht,ut],[ut,rt,it],[ht,Qe,Pt],[Pt,ut,ht],[Qe,it,rt],[rt,Pt,Qe]],abc:[[St,Nt,-1],[-1,-1,St],[Nt,jt,-1],[-1,-1,Nt],[jt,St,-1],[-1,-1,jt]]}}function te(Lt,Mt){return Lt==="all"||Lt===null?!0:Lt.indexOf(Mt)>-1}function K(Lt,Mt){return Lt===null?Mt:Lt}function $(Lt,Mt,it){q();var ht=[Mt],Qe=[it];if(H>=1)ht=[Mt],Qe=[it];else if(H>0){var Ce=ne(Mt,it);ht=Ce.xyzv,Qe=Ce.abc}for(var Xe=0;Xe<ht.length;Xe++){Mt=ht[Xe],it=Qe[Xe];for(var rt=[],ut=0;ut<3;ut++){var Pt=Mt[ut][0],St=Mt[ut][1],Nt=Mt[ut][2],jt=Mt[ut][3],Ot=it[ut]>-1?it[ut]:ee(Pt,St,Nt);Ot>-1?rt[ut]=Ot:rt[ut]=J(Pt,St,Nt,K(Lt,jt))}le(rt[0],rt[1],rt[2])}}function ae(Lt,Mt,it){var ht=function(Qe,Ce,Xe){$(Lt,[Mt[Qe],Mt[Ce],Mt[Xe]],[it[Qe],it[Ce],it[Xe]])};ht(0,1,2),ht(2,3,0)}function ie(Lt,Mt,it){var ht=function(Qe,Ce,Xe){$(Lt,[Mt[Qe],Mt[Ce],Mt[Xe]],[it[Qe],it[Ce],it[Xe]])};ht(0,1,2),ht(3,0,1),ht(2,3,0),ht(1,2,3)}function oe(Lt,Mt,it,ht){var Qe=Lt[3];Qe<it&&(Qe=it),Qe>ht&&(Qe=ht);for(var Ce=(Lt[3]-Qe)/(Lt[3]-Mt[3]+1e-9),Xe=[],rt=0;rt<4;rt++)Xe[rt]=(1-Ce)*Lt[rt]+Ce*Mt[rt];return Xe}function ue(Lt,Mt,it){return Lt>=Mt&&Lt<=it}function ye(Lt){var Mt=.001*(D-I);return Lt>=I-Mt&&Lt<=D+Mt}function ce(Lt){for(var Mt=[],it=0;it<4;it++){var ht=Lt[it];Mt.push([o._x[ht],o._y[ht],o._z[ht],o._value[ht]])}return Mt}var me=3;function xe(Lt,Mt,it,ht,Qe,Ce){Ce||(Ce=1),it=[-1,-1,-1];var Xe=!1,rt=[ue(Mt[0][3],ht,Qe),ue(Mt[1][3],ht,Qe),ue(Mt[2][3],ht,Qe)];if(!rt[0]&&!rt[1]&&!rt[2])return!1;var ut=function(St,Nt,jt){return ye(Nt[0][3])&&ye(Nt[1][3])&&ye(Nt[2][3])?($(St,Nt,jt),!0):Ce<me?xe(St,Nt,jt,I,D,++Ce):!1};if(rt[0]&&rt[1]&&rt[2])return ut(Lt,Mt,it)||Xe;var Pt=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(St){if(rt[St[0]]&&rt[St[1]]&&!rt[St[2]]){var Nt=Mt[St[0]],jt=Mt[St[1]],Ot=Mt[St[2]],Kt=oe(Ot,Nt,ht,Qe),Je=oe(Ot,jt,ht,Qe);Xe=ut(Lt,[Je,Kt,Nt],[-1,-1,it[St[0]]])||Xe,Xe=ut(Lt,[Nt,jt,Je],[it[St[0]],it[St[1]],-1])||Xe,Pt=!0}}),Pt||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(St){if(rt[St[0]]&&!rt[St[1]]&&!rt[St[2]]){var Nt=Mt[St[0]],jt=Mt[St[1]],Ot=Mt[St[2]],Kt=oe(jt,Nt,ht,Qe),Je=oe(Ot,Nt,ht,Qe);Xe=ut(Lt,[Je,Kt,Nt],[-1,-1,it[St[0]]])||Xe,Pt=!0}}),Xe}function ke(Lt,Mt,it,ht){var Qe=!1,Ce=ce(Mt),Xe=[ue(Ce[0][3],it,ht),ue(Ce[1][3],it,ht),ue(Ce[2][3],it,ht),ue(Ce[3][3],it,ht)];if(!Xe[0]&&!Xe[1]&&!Xe[2]&&!Xe[3])return Qe;if(Xe[0]&&Xe[1]&&Xe[2]&&Xe[3])return g&&(Qe=ie(Lt,Ce,Mt)||Qe),Qe;var rt=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(ut){if(Xe[ut[0]]&&Xe[ut[1]]&&Xe[ut[2]]&&!Xe[ut[3]]){var Pt=Ce[ut[0]],St=Ce[ut[1]],Nt=Ce[ut[2]],jt=Ce[ut[3]];if(g)Qe=$(Lt,[Pt,St,Nt],[Mt[ut[0]],Mt[ut[1]],Mt[ut[2]]])||Qe;else{var Ot=oe(jt,Pt,it,ht),Kt=oe(jt,St,it,ht),Je=oe(jt,Nt,it,ht);Qe=$(null,[Ot,Kt,Je],[-1,-1,-1])||Qe}rt=!0}}),rt||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(ut){if(Xe[ut[0]]&&Xe[ut[1]]&&!Xe[ut[2]]&&!Xe[ut[3]]){var Pt=Ce[ut[0]],St=Ce[ut[1]],Nt=Ce[ut[2]],jt=Ce[ut[3]],Ot=oe(Nt,Pt,it,ht),Kt=oe(Nt,St,it,ht),Je=oe(jt,St,it,ht),gt=oe(jt,Pt,it,ht);g?(Qe=$(Lt,[Pt,gt,Ot],[Mt[ut[0]],-1,-1])||Qe,Qe=$(Lt,[St,Kt,Je],[Mt[ut[1]],-1,-1])||Qe):Qe=ae(null,[Ot,Kt,Je,gt],[-1,-1,-1,-1])||Qe,rt=!0}}),rt)||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(ut){if(Xe[ut[0]]&&!Xe[ut[1]]&&!Xe[ut[2]]&&!Xe[ut[3]]){var Pt=Ce[ut[0]],St=Ce[ut[1]],Nt=Ce[ut[2]],jt=Ce[ut[3]],Ot=oe(St,Pt,it,ht),Kt=oe(Nt,Pt,it,ht),Je=oe(jt,Pt,it,ht);g?(Qe=$(Lt,[Pt,Ot,Kt],[Mt[ut[0]],-1,-1])||Qe,Qe=$(Lt,[Pt,Kt,Je],[Mt[ut[0]],-1,-1])||Qe,Qe=$(Lt,[Pt,Je,Ot],[Mt[ut[0]],-1,-1])||Qe):Qe=$(null,[Ot,Kt,Je],[-1,-1,-1])||Qe,rt=!0}}),Qe}function Ae(Lt,Mt,it,ht,Qe,Ce,Xe,rt,ut,Pt,St){var Nt=!1;return y&&(te(Lt,"A")&&(Nt=ke(null,[Mt,it,ht,Ce],Pt,St)||Nt),te(Lt,"B")&&(Nt=ke(null,[it,ht,Qe,ut],Pt,St)||Nt),te(Lt,"C")&&(Nt=ke(null,[it,Ce,Xe,ut],Pt,St)||Nt),te(Lt,"D")&&(Nt=ke(null,[ht,Ce,rt,ut],Pt,St)||Nt),te(Lt,"E")&&(Nt=ke(null,[it,ht,Ce,ut],Pt,St)||Nt)),g&&(Nt=ke(Lt,[it,ht,Ce,ut],Pt,St)||Nt),Nt}function Oe(Lt,Mt,it,ht,Qe,Ce,Xe,rt){return[rt[0]===!0?!0:xe(Lt,ce([Mt,it,ht]),[Mt,it,ht],Ce,Xe),rt[1]===!0?!0:xe(Lt,ce([ht,Qe,Mt]),[ht,Qe,Mt],Ce,Xe)]}function He(Lt,Mt,it,ht,Qe,Ce,Xe,rt,ut){return rt?Oe(Lt,Mt,it,Qe,ht,Ce,Xe,ut):Oe(Lt,it,Qe,ht,Mt,Ce,Xe,ut)}function Ge(Lt,Mt,it,ht,Qe,Ce,Xe){var rt=!1,ut,Pt,St,Nt,jt=function(){rt=xe(Lt,[ut,Pt,St],[-1,-1,-1],Qe,Ce)||rt,rt=xe(Lt,[St,Nt,ut],[-1,-1,-1],Qe,Ce)||rt},Ot=Xe[0],Kt=Xe[1],Je=Xe[2];return Ot&&(ut=se(ce([P(Mt,it-0,ht-0)])[0],ce([P(Mt-1,it-0,ht-0)])[0],Ot),Pt=se(ce([P(Mt,it-0,ht-1)])[0],ce([P(Mt-1,it-0,ht-1)])[0],Ot),St=se(ce([P(Mt,it-1,ht-1)])[0],ce([P(Mt-1,it-1,ht-1)])[0],Ot),Nt=se(ce([P(Mt,it-1,ht-0)])[0],ce([P(Mt-1,it-1,ht-0)])[0],Ot),jt()),Kt&&(ut=se(ce([P(Mt-0,it,ht-0)])[0],ce([P(Mt-0,it-1,ht-0)])[0],Kt),Pt=se(ce([P(Mt-0,it,ht-1)])[0],ce([P(Mt-0,it-1,ht-1)])[0],Kt),St=se(ce([P(Mt-1,it,ht-1)])[0],ce([P(Mt-1,it-1,ht-1)])[0],Kt),Nt=se(ce([P(Mt-1,it,ht-0)])[0],ce([P(Mt-1,it-1,ht-0)])[0],Kt),jt()),Je&&(ut=se(ce([P(Mt-0,it-0,ht)])[0],ce([P(Mt-0,it-0,ht-1)])[0],Je),Pt=se(ce([P(Mt-0,it-1,ht)])[0],ce([P(Mt-0,it-1,ht-1)])[0],Je),St=se(ce([P(Mt-1,it-1,ht)])[0],ce([P(Mt-1,it-1,ht-1)])[0],Je),Nt=se(ce([P(Mt-1,it-0,ht)])[0],ce([P(Mt-1,it-0,ht-1)])[0],Je),jt()),rt}function _e(Lt,Mt,it,ht,Qe,Ce,Xe,rt,ut,Pt,St,Nt){var jt=Lt;return Nt?(y&&Lt==="even"&&(jt=null),Ae(jt,Mt,it,ht,Qe,Ce,Xe,rt,ut,Pt,St)):(y&&Lt==="odd"&&(jt=null),Ae(jt,ut,rt,Xe,Ce,Qe,ht,it,Mt,Pt,St))}function Re(Lt,Mt,it,ht,Qe){for(var Ce=[],Xe=0,rt=0;rt<Mt.length;rt++)for(var ut=Mt[rt],Pt=1;Pt<S;Pt++)for(var St=1;St<L;St++)Ce.push(He(Lt,P(ut,St-1,Pt-1),P(ut,St-1,Pt),P(ut,St,Pt-1),P(ut,St,Pt),it,ht,(ut+St+Pt)%2,Qe&&Qe[Xe]?Qe[Xe]:[])),Xe++;return Ce}function We(Lt,Mt,it,ht,Qe){for(var Ce=[],Xe=0,rt=0;rt<Mt.length;rt++)for(var ut=Mt[rt],Pt=1;Pt<v;Pt++)for(var St=1;St<S;St++)Ce.push(He(Lt,P(Pt-1,ut,St-1),P(Pt,ut,St-1),P(Pt-1,ut,St),P(Pt,ut,St),it,ht,(Pt+ut+St)%2,Qe&&Qe[Xe]?Qe[Xe]:[])),Xe++;return Ce}function qe(Lt,Mt,it,ht,Qe){for(var Ce=[],Xe=0,rt=0;rt<Mt.length;rt++)for(var ut=Mt[rt],Pt=1;Pt<L;Pt++)for(var St=1;St<v;St++)Ce.push(He(Lt,P(St-1,Pt-1,ut),P(St-1,Pt,ut),P(St,Pt-1,ut),P(St,Pt,ut),it,ht,(St+Pt+ut)%2,Qe&&Qe[Xe]?Qe[Xe]:[])),Xe++;return Ce}function Ue(Lt,Mt,it){for(var ht=1;ht<S;ht++)for(var Qe=1;Qe<L;Qe++)for(var Ce=1;Ce<v;Ce++)_e(Lt,P(Ce-1,Qe-1,ht-1),P(Ce-1,Qe-1,ht),P(Ce-1,Qe,ht-1),P(Ce-1,Qe,ht),P(Ce,Qe-1,ht-1),P(Ce,Qe-1,ht),P(Ce,Qe,ht-1),P(Ce,Qe,ht),Mt,it,(Ce+Qe+ht)%2)}function Ie(Lt,Mt,it){g=!0,Ue(Lt,Mt,it),g=!1}function Ve(Lt,Mt,it){y=!0,Ue(Lt,Mt,it),y=!1}function dt(Lt,Mt,it,ht,Qe,Ce){for(var Xe=[],rt=0,ut=0;ut<Mt.length;ut++)for(var Pt=Mt[ut],St=1;St<S;St++)for(var Nt=1;Nt<L;Nt++)Xe.push(Ge(Lt,Pt,Nt,St,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return Xe}function Rt(Lt,Mt,it,ht,Qe,Ce){for(var Xe=[],rt=0,ut=0;ut<Mt.length;ut++)for(var Pt=Mt[ut],St=1;St<v;St++)for(var Nt=1;Nt<S;Nt++)Xe.push(Ge(Lt,St,Pt,Nt,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return Xe}function Gt(Lt,Mt,it,ht,Qe,Ce){for(var Xe=[],rt=0,ut=0;ut<Mt.length;ut++)for(var Pt=Mt[ut],St=1;St<L;St++)for(var Nt=1;Nt<v;Nt++)Xe.push(Ge(Lt,Nt,St,Pt,it,ht,Qe[ut],Ce&&Ce[rt]?Ce[rt]:[])),rt++;return Xe}function kt(Lt,Mt){for(var it=[],ht=Lt;ht<Mt;ht++)it.push(ht);return it}function zt(){for(var Lt=0;Lt<v;Lt++)for(var Mt=0;Mt<L;Mt++)for(var it=0;it<S;it++){var ht=P(Lt,Mt,it);J(o._x[ht],o._y[ht],o._z[ht],o._value[ht])}}function Bt(){W(),zt();var Lt=null;if(h&&p&&(Y(p),Ie(Lt,I,D)),c&&d){Y(d);for(var Mt=o.surface.pattern,it=o.surface.count,ht=0;ht<it;ht++){var Qe=it===1?.5:ht/(it-1),Ce=(1-Qe)*I+Qe*D,Xe=Math.abs(Ce-O),rt=Math.abs(Ce-F),ut=Xe>rt?[O,Ce]:[Ce,F];Ve(Mt,ut[0],ut[1])}}var Pt=[[Math.min(I,F),Math.max(I,F)],[Math.min(O,D),Math.max(O,D)]];["x","y","z"].forEach(function(St){for(var Nt=[],jt=0;jt<Pt.length;jt++){var Ot=0,Kt=Pt[jt][0],Je=Pt[jt][1],gt=o.slices[St];if(gt.show&&gt.fill){Y(gt.fill);var Et=[],rr=[],vr=[];if(gt.locations.length)for(var or=0;or<gt.locations.length;or++){var dr=i(gt.locations[or],St==="x"?_:St==="y"?T:w);dr.distRatio===0?Et.push(dr.id):dr.id>0&&(rr.push(dr.id),St==="x"?vr.push([dr.distRatio,0,0]):St==="y"?vr.push([0,dr.distRatio,0]):vr.push([0,0,dr.distRatio]))}else St==="x"?Et=kt(1,v-1):St==="y"?Et=kt(1,L-1):Et=kt(1,S-1);rr.length>0&&(St==="x"?Nt[Ot]=dt(Lt,rr,Kt,Je,vr,Nt[Ot]):St==="y"?Nt[Ot]=Rt(Lt,rr,Kt,Je,vr,Nt[Ot]):Nt[Ot]=Gt(Lt,rr,Kt,Je,vr,Nt[Ot]),Ot++),Et.length>0&&(St==="x"?Nt[Ot]=Re(Lt,Et,Kt,Je,Nt[Ot]):St==="y"?Nt[Ot]=We(Lt,Et,Kt,Je,Nt[Ot]):Nt[Ot]=qe(Lt,Et,Kt,Je,Nt[Ot]),Ot++)}var Lr=o.caps[St];Lr.show&&Lr.fill&&(Y(Lr.fill),St==="x"?Nt[Ot]=Re(Lt,[0,v-1],Kt,Je,Nt[Ot]):St==="y"?Nt[Ot]=We(Lt,[0,L-1],Kt,Je,Nt[Ot]):Nt[Ot]=qe(Lt,[0,S-1],Kt,Je,Nt[Ot]),Ot++)}}),A===0&&W(),o._meshX=U,o._meshY=B,o._meshZ=j,o._meshIntensity=Z,o._Xs=_,o._Ys=T,o._Zs=w}return Bt(),o}function l(o,c){var h=o.glplot.gl,d=u({gl:h}),p=new a(o,d,c.uid);return d._trace=p,p.update(c),o.glplot.add(d),p}z.exports={findNearestOnAxis:i,generateIsoMeshes:f,createIsosurfaceTrace:l}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(e,z,N){var u=e("../../lib"),s=e("../../registry"),m=e("./attributes"),x=e("../../components/colorscale/defaults");function t(a,r,n,f){function l(o,c){return u.coerce(a,r,m,o,c)}i(a,r,n,f,l)}function i(a,r,n,f,l){var o=l("isomin"),c=l("isomax");c!=null&&o!==void 0&&o!==null&&o>c&&(r.isomin=null,r.isomax=null);var h=l("x"),d=l("y"),p=l("z"),y=l("value");if(!h||!h.length||!d||!d.length||!p||!p.length||!y||!y.length){r.visible=!1;return}var g=s.getComponentMethod("calendars","handleTraceDefaults");g(a,r,["x","y","z"],f),l("valuehoverformat"),["x","y","z"].forEach(function(_){l(_+"hoverformat");var T="caps."+_,w=l(T+".show");w&&l(T+".fill");var v="slices."+_,L=l(v+".show");L&&(l(v+".fill"),l(v+".locations"))});var A=l("spaceframe.show");A&&l("spaceframe.fill");var b=l("surface.show");b&&(l("surface.count"),l("surface.fill"),l("surface.pattern"));var M=l("contour.show");M&&(l("contour.color"),l("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(_){l(_)}),x(a,r,f,l,{prefix:"",cLetter:"c"}),r._length=null}z.exports={supplyDefaults:t,supplyIsoDefaults:i}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(e,z,N){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../surface/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat;z.exports=i({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:m({editType:"calc"}),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},u("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:x.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:i({},x.contours.x.show,{}),color:x.contours.x.color,width:x.contours.x.width,editType:"calc"},lightposition:{x:i({},x.lightposition.x,{dflt:1e5}),y:i({},x.lightposition.y,{dflt:1e5}),z:i({},x.lightposition.z,{dflt:0}),editType:"calc"},lighting:i({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},x.lighting),hoverinfo:i({},t.hoverinfo,{editType:"calc"}),showlegend:i({},t.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(e,z,N){var u=e("../../components/colorscale/calc");z.exports=function(m,x){x.intensity&&u(m,x,{vals:x.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(e,z,N){var u=e("../../../stackgl_modules").gl_mesh3d,s=e("../../../stackgl_modules").delaunay_triangulate,m=e("../../../stackgl_modules").alpha_shape,x=e("../../../stackgl_modules").convex_hull,t=e("../../lib/gl_format_color").parseColorScale,i=e("../../lib/str2rgbarray"),a=e("../../components/colorscale").extractOpts,r=e("../../plots/gl3d/zip3");function n(y,g,A){this.scene=y,this.uid=A,this.mesh=g,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var f=n.prototype;f.handlePick=function(y){if(y.object===this.mesh){var g=y.index=y.data.index;y.data._cellCenter?y.traceCoordinate=y.data.dataCoordinate:y.traceCoordinate=[this.data.x[g],this.data.y[g],this.data.z[g]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&A[g]!==void 0?y.textLabel=A[g]:A&&(y.textLabel=A),!0}};function l(y){for(var g=[],A=y.length,b=0;b<A;b++)g[b]=i(y[b]);return g}function o(y,g,A,b){for(var M=[],_=g.length,T=0;T<_;T++)M[T]=y.d2l(g[T],0,b)*A;return M}function c(y){for(var g=[],A=y.length,b=0;b<A;b++)g[b]=Math.round(y[b]);return g}function h(y,g){for(var A=["x","y","z"].indexOf(y),b=[],M=g.length,_=0;_<M;_++)b[_]=[g[_][(A+1)%3],g[_][(A+2)%3]];return s(b)}function d(y,g){for(var A=y.length,b=0;b<A;b++)if(y[b]<=-.5||y[b]>=g-.5)return!1;return!0}f.update=function(y){var g=this.scene,A=g.fullSceneLayout;this.data=y;var b=y.x.length,M=r(o(A.xaxis,y.x,g.dataScale[0],y.xcalendar),o(A.yaxis,y.y,g.dataScale[1],y.ycalendar),o(A.zaxis,y.z,g.dataScale[2],y.zcalendar)),_;if(y.i&&y.j&&y.k){if(y.i.length!==y.j.length||y.j.length!==y.k.length||!d(y.i,b)||!d(y.j,b)||!d(y.k,b))return;_=r(c(y.i),c(y.j),c(y.k))}else y.alphahull===0?_=x(M):y.alphahull>0?_=m(y.alphahull,M):_=h(y.delaunayaxis,M);var T={positions:M,cells:_,lightPosition:[y.lightposition.x,y.lightposition.y,y.lightposition.z],ambient:y.lighting.ambient,diffuse:y.lighting.diffuse,specular:y.lighting.specular,roughness:y.lighting.roughness,fresnel:y.lighting.fresnel,vertexNormalsEpsilon:y.lighting.vertexnormalsepsilon,faceNormalsEpsilon:y.lighting.facenormalsepsilon,opacity:y.opacity,contourEnable:y.contour.show,contourColor:i(y.contour.color).slice(0,3),contourWidth:y.contour.width,useFacetNormals:y.flatshading};if(y.intensity){var w=a(y);this.color="#fff";var v=y.intensitymode;T[v+"Intensity"]=y.intensity,T[v+"IntensityBounds"]=[w.min,w.max],T.colormap=t(y)}else y.vertexcolor?(this.color=y.vertexcolor[0],T.vertexColors=l(y.vertexcolor)):y.facecolor?(this.color=y.facecolor[0],T.cellColors=l(y.facecolor)):(this.color=y.color,T.meshColor=i(y.color));this.mesh.update(T)},f.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function p(y,g){var A=y.glplot.gl,b=u({gl:A}),M=new n(y,b,g.uid);return b._trace=M,M.update(g),y.glplot.add(b),M}z.exports=p},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../../components/colorscale/defaults"),x=e("./attributes");z.exports=function(i,a,r,n){function f(d,p){return s.coerce(i,a,x,d,p)}function l(d){var p=d.map(function(y){var g=f(y);return g&&s.isArrayOrTypedArray(g)?g:null});return p.every(function(y){return y&&y.length===p[0].length})&&p}var o=l(["x","y","z"]);if(!o){a.visible=!1;return}if(l(["i","j","k"]),a.i&&(!a.j||!a.k)||a.j&&(!a.k||!a.i)||a.k&&(!a.i||!a.j)){a.visible=!1;return}var c=u.getComponentMethod("calendars","handleTraceDefaults");c(i,a,["x","y","z"],n),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(d){f(d)});var h=f("contour.show");h&&(f("contour.color"),f("contour.width")),"intensity"in i?(f("intensity"),f("intensitymode"),m(i,a,n,f,{prefix:"",cLetter:"c"})):(a.showscale=!1,"facecolor"in i?f("facecolor"):"vertexcolor"in i?f("vertexcolor"):f("color",r)),f("text"),f("hovertext"),f("hovertemplate"),f("xhoverformat"),f("yhoverformat"),f("zhoverformat"),a._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(e,z,N){var u=e("../../lib").extendFlat,s=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../components/drawing/attributes").dash,t=e("../../components/fx/attributes"),i=e("../../constants/delta.js"),a=i.INCREASING.COLOR,r=i.DECREASING.COLOR,n=s.line;function f(l){return{line:{color:u({},n.color,{dflt:l}),width:n.width,dash:x,editType:"style"},editType:"style"}}z.exports={xperiod:s.xperiod,xperiod0:s.xperiod0,xperiodalignment:s.xperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:u({},n.width,{}),dash:u({},x,{}),editType:"style"},increasing:f(a),decreasing:f(r),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:u({},t.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(e,z,N){var u=e("../../lib"),s=u._,m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM;function i(f,l){var o=m.getFromId(f,l.xaxis),c=m.getFromId(f,l.yaxis),h=n(f,o,l),d=l._minDiff;l._minDiff=null;var p=l._origX;l._origX=null;var y=l._xcalc;l._xcalc=null;var g=r(f,l,p,y,c,a);return l._extremes[o._id]=m.findExtremes(o,y,{vpad:d/2}),g.length?(u.extendFlat(g[0].t,{wHover:d/2,tickLen:h}),g):[{t:{empty:!0}}]}function a(f,l,o,c){return{o:f,h:l,l:o,c}}function r(f,l,o,c,h,d){for(var p=h.makeCalcdata(l,"open"),y=h.makeCalcdata(l,"high"),g=h.makeCalcdata(l,"low"),A=h.makeCalcdata(l,"close"),b=Array.isArray(l.text),M=Array.isArray(l.hovertext),_=!0,T=null,w=!!l.xperiodalignment,v=[],L=0;L<c.length;L++){var S=c[L],k=p[L],P=y[L],O=g[L],F=A[L];if(S!==t&&k!==t&&P!==t&&O!==t&&F!==t){F===k?T!==null&&F!==T&&(_=F>T):_=F>k,T=F;var I=d(k,P,O,F);I.pos=S,I.yc=(k+F)/2,I.i=L,I.dir=_?"increasing":"decreasing",I.x=I.pos,I.y=[O,P],w&&(I.orig_p=o[L]),b&&(I.tx=l.text[L]),M&&(I.htx=l.hovertext[L]),v.push(I)}else v.push({pos:S,empty:!0})}return l._extremes[h._id]=m.findExtremes(h,u.concat(g,y),{padded:!0}),v.length&&(v[0].t={labels:{open:s(f,"open:")+" ",high:s(f,"high:")+" ",low:s(f,"low:")+" ",close:s(f,"close:")+" "}}),v}function n(f,l,o){var c=o._minDiff;if(!c){var h=f._fullData,d=[];c=1/0;var p;for(p=0;p<h.length;p++){var y=h[p];if(y.type==="ohlc"&&y.visible===!0&&y.xaxis===l._id){d.push(y);var g=l.makeCalcdata(y,"x");y._origX=g;var A=x(o,l,"x",g).vals;y._xcalc=A;var b=u.distinctVals(A).minDiff;b&&isFinite(b)&&(c=Math.min(c,b))}}for(c===1/0&&(c=1),p=0;p<d.length;p++)d[p]._minDiff=c}return c*o.tickwidth}z.exports={calc:i,calcCommon:r}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(e,z,N){var u=e("../../lib"),s=e("./ohlc_defaults"),m=e("../scatter/period_defaults"),x=e("./attributes");z.exports=function(a,r,n,f){function l(c,h){return u.coerce(a,r,x,c,h)}var o=s(a,r,l,f);if(!o){r.visible=!1;return}m(a,r,f,l,{x:!0}),l("xhoverformat"),l("yhoverformat"),l("line.width"),l("line.dash"),t(a,r,l,"increasing"),t(a,r,l,"decreasing"),l("text"),l("hovertext"),l("tickwidth"),f._requestRangeslider[r.xaxis]=!0};function t(i,a,r,n){r(n+".line.color"),r(n+".line.width",a.line.width),r(n+".line.dash",a.line.dash)}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../lib"),m=e("../../components/fx"),x=e("../../components/color"),t=e("../../lib").fillText,i=e("../../constants/delta.js"),a={increasing:i.INCREASING.SYMBOL,decreasing:i.DECREASING.SYMBOL};function r(o,c,h,d){var p=o.cd,y=p[0].trace;return y.hoverlabel.split?f(o,c,h,d):l(o,c,h,d)}function n(o,c,h,d){var p=o.cd,y=o.xa,g=p[0].trace,A=p[0].t,b=g.type,M=b==="ohlc"?"l":"min",_=b==="ohlc"?"h":"max",T,w,v=A.bPos||0,L=function(ee){return ee.pos+v-c},S=A.bdPos||A.tickLen,k=A.wHover,P=Math.min(1,S/Math.abs(y.r2c(y.range[1])-y.r2c(y.range[0])));T=o.maxHoverDistance-P,w=o.maxSpikeDistance-P;function O(ee){var q=L(ee);return m.inbox(q-k,q+k,T)}function F(ee){var q=ee[M],W=ee[_];return q===W||m.inbox(q-h,W-h,T)}function I(ee){return(O(ee)+F(ee))/2}var D=m.getDistanceFunction(d,O,F,I);if(m.getClosest(p,D,o),o.index===!1)return null;var U=p[o.index];if(U.empty)return null;var B=U.dir,j=g[B],Z=j.line.color;return x.opacity(Z)&&j.line.width?o.color=Z:o.color=j.fillcolor,o.x0=y.c2p(U.pos+v-S,!0),o.x1=y.c2p(U.pos+v+S,!0),o.xLabelVal=U.orig_p!==void 0?U.orig_p:U.pos,o.spikeDistance=I(U)*w/T,o.xSpike=y.c2p(U.pos,!0),o}function f(o,c,h,d){var p=o.cd,y=o.ya,g=p[0].trace,A=p[0].t,b=[],M=n(o,c,h,d);if(!M)return[];var _=M.index,T=p[_],w=T.hi||g.hoverinfo,v=w.split("+"),L=w==="all",S=L||v.indexOf("y")!==-1;if(!S)return[];for(var k=["high","open","close","low"],P={},O=0;O<k.length;O++){var F=k[O],I=g[F][M.index],D=y.c2p(I,!0),U;I in P?(U=P[I],U.yLabel+="<br>"+A.labels[F]+u.hoverLabelText(y,I,g.yhoverformat)):(U=s.extendFlat({},M),U.y0=U.y1=D,U.yLabelVal=I,U.yLabel=A.labels[F]+u.hoverLabelText(y,I,g.yhoverformat),U.name="",b.push(U),P[I]=U)}return b}function l(o,c,h,d){var p=o.cd,y=o.ya,g=p[0].trace,A=p[0].t,b=n(o,c,h,d);if(!b)return[];var M=b.index,_=p[M],T=b.index=_.i,w=_.dir;function v(I){return A.labels[I]+u.hoverLabelText(y,g[I][T],g.yhoverformat)}var L=_.hi||g.hoverinfo,S=L.split("+"),k=L==="all",P=k||S.indexOf("y")!==-1,O=k||S.indexOf("text")!==-1,F=P?[v("open"),v("high"),v("low"),v("close")+"  "+a[w]]:[];return O&&t(_,g,F),b.extraText=F.join("<br>"),b.y0=b.y1=y.c2p(_.yc,!0),[b]}z.exports={hoverPoints:r,hoverSplit:f,hoverOnPoints:l}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(e,z,N){z.exports={moduleType:"trace",name:"ohlc",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc").calc,plot:e("./plot"),style:e("./style"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(e,z,N){var u=e("../../registry"),s=e("../../lib");z.exports=function(x,t,i,a){var r=i("x"),n=i("open"),f=i("high"),l=i("low"),o=i("close");i("hoverlabel.split");var c=u.getComponentMethod("calendars","handleTraceDefaults");if(c(x,t,["x"],a),!!(n&&f&&l&&o)){var h=Math.min(n.length,f.length,l.length,o.length);return r&&(h=Math.min(h,s.minRowLength(r))),t._length=h,h}}},{"../../lib":503,"../../registry":638}],878:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib");z.exports=function(x,t,i,a){var r=t.yaxis,n=t.xaxis,f=!!n.rangebreaks;s.makeTraceGroups(a,i,"trace ohlc").each(function(l){var o=u.select(this),c=l[0],h=c.t,d=c.trace;if(d.visible!==!0||h.empty){o.remove();return}var p=h.tickLen,y=o.selectAll("path").data(s.identity);y.enter().append("path"),y.exit().remove(),y.attr("d",function(g){if(g.empty)return"M0,0Z";var A=n.c2p(g.pos-p,!0),b=n.c2p(g.pos+p,!0),M=f?(A+b)/2:n.c2p(g.pos,!0),_=r.c2p(g.o,!0),T=r.c2p(g.h,!0),w=r.c2p(g.l,!0),v=r.c2p(g.c,!0);return"M"+A+","+_+"H"+M+"M"+M+","+T+"V"+w+"M"+b+","+v+"H"+M})})}},{"../../lib":503,"@plotly/d3":58}],879:[function(e,z,N){z.exports=function(s,m){var x=s.cd,t=s.xaxis,i=s.yaxis,a=[],r,n=x[0].t.bPos||0;if(m===!1)for(r=0;r<x.length;r++)x[r].selected=0;else for(r=0;r<x.length;r++){var f=x[r];m.contains([t.c2p(f.pos+n),i.c2p(f.yc)],null,f.i,s)?(a.push({pointNumber:f.i,x:t.c2d(f.pos),y:i.c2d(f.yc)}),f.selected=1):f.selected=0}return a}},{}],880:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color");z.exports=function(t,i,a){var r=a||u.select(t).selectAll("g.ohlclayer").selectAll("g.trace");r.style("opacity",function(n){return n[0].trace.opacity}),r.each(function(n){var f=n[0].trace;u.select(this).selectAll("path").each(function(l){if(!l.empty){var o=f[l.dir].line;u.select(this).style("fill","none").call(m.stroke,o.color).call(s.dashLine,o.dash,o.width).style("opacity",f.selectedpoints&&!l.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(e,z,N){var u=e("../../lib/extend").extendFlat,s=e("../../plots/attributes"),m=e("../../plots/font_attributes"),x=e("../../components/colorscale/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/domain").attributes,a=u({editType:"calc"},x("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});z.exports={domain:i({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:u({},s.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:t({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:m({editType:"calc"}),tickfont:m({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(e,z,N){var u=e("../../plots/get_data").getModuleCalcData,s=e("./plot"),m="parcats";N.name=m,N.plot=function(x,t,i,a){var r=u(x.calcdata,m);if(r.length){var n=r[0];s(x,n,i,a)}},N.clean=function(x,t,i,a){var r=a._has&&a._has("parcats"),n=t._has&&t._has("parcats");r&&!n&&a._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(e,z,N){var u=e("../../lib/gup").wrap,s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/calc"),x=e("../../lib/filter_unique.js"),t=e("../../components/drawing"),i=e("../../lib"),a=e("fast-isnumeric");z.exports=function(A,b){var M=i.filterVisible(b.dimensions);if(M.length===0)return[];var _=M.map(function(fe){var se;if(fe.categoryorder==="trace")se=null;else if(fe.categoryorder==="array")se=fe.categoryarray;else{se=x(fe.values);for(var H=!0,Y=0;Y<se.length;Y++)if(!a(se[Y])){H=!1;break}se.sort(H?i.sorterAsc:void 0),fe.categoryorder==="category descending"&&(se=se.reverse())}return h(fe.values,se)}),T,w,v;i.isArrayOrTypedArray(b.counts)?T=b.counts:T=[b.counts],d(M),M.forEach(function(fe,se){p(fe,_[se])});var L=b.line,S;L?(s(b,"line")&&m(A,b,{vals:b.line.color,containerStr:"line",cLetter:"c"}),S=t.tryColorscale(L)):S=i.identity;function k(fe){var se,H;return i.isArrayOrTypedArray(L.color)?(se=L.color[fe%L.color.length],H=se):se=L.color,{color:S(se),rawColor:H}}var P=M[0].values.length,O={},F=_.map(function(fe){return fe.inds});v=0;var I,D;for(I=0;I<P;I++){var U=[];for(D=0;D<F.length;D++)U.push(F[D][I]);w=T[I%T.length],v+=w;var B=k(I),j=U+"-"+B.rawColor;O[j]===void 0&&(O[j]=o(U,B.color,B.rawColor)),c(O[j],I,w)}var Z=M.map(function(fe,se){return n(se,fe._index,fe._displayindex,fe.label,v)});for(I=0;I<P;I++)for(w=T[I%T.length],D=0;D<Z.length;D++){var ee=Z[D].containerInd,q=_[D].inds[I],W=Z[D].categories;if(W[q]===void 0){var J=b.dimensions[ee]._categoryarray[q],le=b.dimensions[ee]._ticktext[q];W[q]=f(D,q,J,le)}l(W[q],I,w)}return u(r(Z,O,v))};function r(g,A,b){var M=g.map(function(_){return _.categories.length}).reduce(function(_,T){return Math.max(_,T)});return{dimensions:g,paths:A,trace:void 0,maxCats:M,count:b}}function n(g,A,b,M,_){return{dimensionInd:g,containerInd:A,displayInd:b,dimensionLabel:M,count:_,categories:[],dragX:null}}function f(g,A,b,M){return{dimensionInd:g,categoryInd:A,categoryValue:b,displayInd:A,categoryLabel:M,valueInds:[],count:0,dragY:null}}function l(g,A,b){g.valueInds.push(A),g.count+=b}function o(g,A,b){return{categoryInds:g,color:A,rawColor:b,valueInds:[],count:0}}function c(g,A,b){g.valueInds.push(A),g.count+=b}function h(g,A){A==null?A=[]:A=A.map(function(S){return S});var b={},M={},_=[];A.forEach(function(S,k){b[S]=0,M[S]=k});for(var T=0;T<g.length;T++){var w=g[T],v;b[w]===void 0?(b[w]=1,v=A.push(w)-1,M[w]=v):(b[w]++,v=M[w]),_.push(v)}var L=A.map(function(S){return b[S]});return{uniqueValues:A,uniqueCounts:L,inds:_}}function d(g){var A=g.map(function(M){return M.displayindex}),b;if(y(A))for(b=0;b<g.length;b++)g[b]._displayindex=g[b].displayindex;else for(b=0;b<g.length;b++)g[b]._displayindex=b}function p(g,A){g._categoryarray=A.uniqueValues,g.ticktext===null||g.ticktext===void 0?g._ticktext=[]:g._ticktext=g.ticktext.slice();for(var b=g._ticktext.length;b<A.uniqueValues.length;b++)g._ticktext.push(A.uniqueValues[b])}function y(g){for(var A=new Array(g.length),b=0;b<g.length;b++){if(g[b]<0||g[b]>=g.length||A[g[b]]!==void 0)return!1;A[g[b]]=!0}return!0}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),i=e("./attributes"),a=e("../parcoords/merge_length");function r(f,l,o,c,h){h("line.shape"),h("line.hovertemplate");var d=h("line.color",c.colorway[0]);if(s(f,"line")&&u.isArrayOrTypedArray(d)){if(d.length)return h("line.colorscale"),m(f,l,c,h,{prefix:"line.",cLetter:"c"}),d.length;l.line.color=o}return 1/0}function n(f,l){function o(A,b){return u.coerce(f,l,i.dimensions,A,b)}var c=o("values"),h=o("visible");if(c&&c.length||(h=l.visible=!1),h){o("label"),o("displayindex",l._index);var d=f.categoryarray,p=Array.isArray(d)&&d.length>0,y;p&&(y="array");var g=o("categoryorder",y);g==="array"?(o("categoryarray"),o("ticktext")):(delete f.categoryarray,delete f.ticktext),!p&&g==="array"&&(l.categoryorder="trace")}}z.exports=function(l,o,c,h){function d(b,M){return u.coerce(l,o,i,b,M)}var p=t(l,o,{name:"dimensions",handleItemDefaults:n}),y=r(l,o,c,h,d);x(o,h,d),(!Array.isArray(p)||!p.length)&&(o.visible=!1),a(o,p,"values",y),d("hoveron"),d("hovertemplate"),d("arrangement"),d("bundlecolors"),d("sortpaths"),d("counts");var g={family:h.font.family,size:Math.round(h.font.size),color:h.font.color};u.coerceFont(d,"labelfont",g);var A={family:h.font.family,size:Math.round(h.font.size/1.2),color:h.font.color};u.coerceFont(d,"tickfont",A)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-interpolate").interpolateNumber,m=e("../../plot_api/plot_api"),x=e("../../components/fx"),t=e("../../lib"),i=t.strTranslate,a=e("../../components/drawing"),r=e("tinycolor2"),n=e("../../lib/svg_text_utils");function f(Y,ne,te,K){var $=Y.map(J.bind(0,ne,te)),ae=K.selectAll("g.parcatslayer").data([null]);ae.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ie=ae.selectAll("g.trace.parcats").data($,l),oe=ie.enter().append("g").attr("class","trace parcats");ie.attr("transform",function(_e){return i(_e.x,_e.y)}),oe.append("g").attr("class","paths");var ue=ie.select("g.paths"),ye=ue.selectAll("path.path").data(function(_e){return _e.paths},l);ye.attr("fill",function(_e){return _e.model.color});var ce=ye.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(_e){return _e.model.color}).attr("fill-opacity",0);A(ce),ye.attr("d",function(_e){return _e.svgD}),ce.empty()||ye.sort(c),ye.exit().remove(),ye.on("mouseover",h).on("mouseout",d).on("click",g),oe.append("g").attr("class","dimensions");var me=ie.select("g.dimensions"),xe=me.selectAll("g.dimension").data(function(_e){return _e.dimensions},l);xe.enter().append("g").attr("class","dimension"),xe.attr("transform",function(_e){return i(_e.x,0)}),xe.exit().remove();var ke=xe.selectAll("g.category").data(function(_e){return _e.categories},l),Ae=ke.enter().append("g").attr("class","category");ke.attr("transform",function(_e){return i(0,_e.y)}),Ae.append("rect").attr("class","catrect").attr("pointer-events","none"),ke.select("rect.catrect").attr("fill","none").attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}),_(Ae);var Oe=ke.selectAll("rect.bandrect").data(function(_e){return _e.bands},l);Oe.each(function(){t.raiseToTop(this)}),Oe.attr("fill",function(_e){return _e.color});var He=Oe.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(_e){return _e.color}).attr("fill-opacity",0);Oe.attr("fill",function(_e){return _e.color}).attr("width",function(_e){return _e.width}).attr("height",function(_e){return _e.height}).attr("y",function(_e){return _e.y}).attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":_e.parcatsViewModel.arrangement==="perpendicular"?"ns-resize":"move"}),w(He),Oe.exit().remove(),Ae.append("text").attr("class","catlabel").attr("pointer-events","none");var Ge=ne._fullLayout.paper_bgcolor;ke.select("text.catlabel").attr("text-anchor",function(_e){return o(_e)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",n.makeTextShadow(Ge)).style("fill","rgb(0, 0, 0)").attr("x",function(_e){return o(_e)?_e.width+5:-5}).attr("y",function(_e){return _e.height/2}).text(function(_e){return _e.model.categoryLabel}).each(function(_e){a.font(u.select(this),_e.parcatsViewModel.categorylabelfont),n.convertToTspans(u.select(this),ne)}),Ae.append("text").attr("class","dimlabel"),ke.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(_e){return _e.parcatsViewModel.arrangement==="fixed"?"default":"ew-resize"}).attr("x",function(_e){return _e.width/2}).attr("y",-5).text(function(_e,Re){return Re===0?_e.parcatsViewModel.model.dimensions[_e.model.dimensionInd].dimensionLabel:null}).each(function(_e){a.font(u.select(this),_e.parcatsViewModel.labelfont)}),ke.selectAll("rect.bandrect").on("mouseover",D).on("mouseout",U),ke.exit().remove(),xe.call(u.behavior.drag().origin(function(_e){return{x:_e.x,y:0}}).on("dragstart",B).on("drag",j).on("dragend",Z)),ie.each(function(_e){_e.traceSelection=u.select(this),_e.pathSelection=u.select(this).selectAll("g.paths").selectAll("path.path"),_e.dimensionSelection=u.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ie.exit().remove()}z.exports=function(Y,ne,te,K){f(te,Y,K,ne)};function l(Y){return Y.key}function o(Y){var ne=Y.parcatsViewModel.dimensions.length,te=Y.parcatsViewModel.dimensions[ne-1].model.dimensionInd;return Y.model.dimensionInd===te}function c(Y,ne){return Y.model.rawColor>ne.model.rawColor?1:Y.model.rawColor<ne.model.rawColor?-1:0}function h(Y){if(!Y.parcatsViewModel.dragDimension&&Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){t.raiseToTop(this),b(u.select(this));var ne=p(Y),te=y(Y);if(Y.parcatsViewModel.graphDiv.emit("plotly_hover",{points:ne,event:u.event,constraints:te}),Y.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var K=u.mouse(this)[0],$=Y.parcatsViewModel.graphDiv,ae=Y.parcatsViewModel.trace,ie=$._fullLayout,oe=ie._paperdiv.node().getBoundingClientRect(),ue=Y.parcatsViewModel.graphDiv.getBoundingClientRect(),ye,ce,me;for(me=0;me<Y.leftXs.length-1;me++)if(Y.leftXs[me]+Y.dimWidths[me]-2<=K&&K<=Y.leftXs[me+1]+2){var xe=Y.parcatsViewModel.dimensions[me],ke=Y.parcatsViewModel.dimensions[me+1];ye=(xe.x+xe.width+ke.x)/2,ce=(Y.topYs[me]+Y.topYs[me+1]+Y.height)/2;break}var Ae=Y.parcatsViewModel.x+ye,Oe=Y.parcatsViewModel.y+ce,He=r.mostReadable(Y.model.color,["black","white"]),Ge=Y.model.count,_e=Ge/Y.parcatsViewModel.model.count,Re={countLabel:Ge,probabilityLabel:_e.toFixed(3)},We=[];Y.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&We.push(["Count:",Re.countLabel].join(" ")),Y.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&We.push(["P:",Re.probabilityLabel].join(" "));var qe=We.join("<br>"),Ue=u.mouse($)[0];x.loneHover({trace:ae,x:Ae-oe.left+ue.left,y:Oe-oe.top+ue.top,text:qe,color:Y.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:He,idealAlign:Ue<Ae?"right":"left",hovertemplate:(ae.line||{}).hovertemplate,hovertemplateLabels:Re,eventData:[{data:ae._input,fullData:ae,count:Ge,probability:_e}]},{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:$})}}}function d(Y){if(!Y.parcatsViewModel.dragDimension&&(A(u.select(this)),x.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),Y.parcatsViewModel.pathSelection.sort(c),Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1)){var ne=p(Y),te=y(Y);Y.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:ne,event:u.event,constraints:te})}}function p(Y){for(var ne=[],te=ee(Y.parcatsViewModel),K=0;K<Y.model.valueInds.length;K++){var $=Y.model.valueInds[K];ne.push({curveNumber:te,pointNumber:$})}return ne}function y(Y){for(var ne={},te=Y.parcatsViewModel.model.dimensions,K=0;K<te.length;K++){var $=te[K],ae=$.categories[Y.model.categoryInds[K]];ne[$.containerInd]=ae.categoryValue}return Y.model.rawColor!==void 0&&(ne.color=Y.model.rawColor),ne}function g(Y){if(Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ne=p(Y),te=y(Y);Y.parcatsViewModel.graphDiv.emit("plotly_click",{points:ne,event:u.event,constraints:te})}}function A(Y){Y.attr("fill",function(ne){return ne.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function b(Y){Y.attr("fill-opacity",.8).attr("stroke",function(ne){return r.mostReadable(ne.model.color,["black","white"])}).attr("stroke-width",.3)}function M(Y){Y.select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}function _(Y){Y.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function T(Y){Y.attr("stroke","black").attr("stroke-width",1.5)}function w(Y){Y.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function v(Y){var ne=Y.parcatsViewModel.pathSelection,te=Y.categoryViewModel.model.dimensionInd,K=Y.categoryViewModel.model.categoryInd;return ne.filter(function($){return $.model.categoryInds[te]===K&&$.model.color===Y.color})}function L(Y){var ne=u.select(Y.parentNode).selectAll("rect.bandrect");ne.each(function(te){var K=v(te);b(K),K.each(function(){t.raiseToTop(this)})}),M(u.select(Y.parentNode))}function S(Y){var ne=u.select(Y).datum(),te=v(ne);b(te),te.each(function(){t.raiseToTop(this)}),u.select(Y.parentNode).selectAll("rect.bandrect").filter(function(K){return K.color===ne.color}).each(function(){t.raiseToTop(this),T(u.select(this))})}function k(Y,ne,te){var K=u.select(Y).datum(),$=K.categoryViewModel.model,ae=K.parcatsViewModel.graphDiv,ie=u.select(Y.parentNode).selectAll("rect.bandrect"),oe=[];ie.each(function(ye){var ce=v(ye);ce.each(function(me){Array.prototype.push.apply(oe,p(me))})});var ue={};ue[$.dimensionInd]=$.categoryValue,ae.emit(ne,{points:oe,event:te,constraints:ue})}function P(Y,ne,te){var K=u.select(Y).datum(),$=K.categoryViewModel.model,ae=K.parcatsViewModel.graphDiv,ie=v(K),oe=[];ie.each(function(ye){Array.prototype.push.apply(oe,p(ye))});var ue={};ue[$.dimensionInd]=$.categoryValue,K.rawColor!==void 0&&(ue.color=K.rawColor),ae.emit(ne,{points:oe,event:te,constraints:ue})}function O(Y,ne,te){Y._fullLayout._calcInverseTransform(Y);var K=Y._fullLayout._invScaleX,$=Y._fullLayout._invScaleY,ae=u.select(te.parentNode).select("rect.catrect"),ie=ae.node().getBoundingClientRect(),oe=ae.datum(),ue=oe.parcatsViewModel,ye=ue.model.dimensions[oe.model.dimensionInd],ce=ue.trace,me=ie.top+ie.height/2,xe,ke;ue.dimensions.length>1&&ye.displayInd===ue.dimensions.length-1?(xe=ie.left,ke="left"):(xe=ie.left+ie.width,ke="right");var Ae=oe.model.count,Oe=oe.model.categoryLabel,He=Ae/oe.parcatsViewModel.model.count,Ge={countLabel:Ae,categoryLabel:Oe,probabilityLabel:He.toFixed(3)},_e=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&_e.push(["Count:",Ge.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&_e.push(["P("+Ge.categoryLabel+"):",Ge.probabilityLabel].join(" "));var Re=_e.join("<br>");return{trace:ce,x:K*(xe-ne.left),y:$*(me-ne.top),text:Re,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:ke,hovertemplate:ce.hovertemplate,hovertemplateLabels:Ge,eventData:[{data:ce._input,fullData:ce,count:Ae,category:Oe,probability:He}]}}function F(Y,ne,te){var K=[];return u.select(te.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){var $=this;K.push(O(Y,ne,$))}),K}function I(Y,ne,te){Y._fullLayout._calcInverseTransform(Y);var K=Y._fullLayout._invScaleX,$=Y._fullLayout._invScaleY,ae=te.getBoundingClientRect(),ie=u.select(te).datum(),oe=ie.categoryViewModel,ue=oe.parcatsViewModel,ye=ue.model.dimensions[oe.model.dimensionInd],ce=ue.trace,me=ae.y+ae.height/2,xe,ke;ue.dimensions.length>1&&ye.displayInd===ue.dimensions.length-1?(xe=ae.left,ke="left"):(xe=ae.left+ae.width,ke="right");var Ae=oe.model.categoryLabel,Oe=ie.parcatsViewModel.model.count,He=0;ie.categoryViewModel.bands.forEach(function(Rt){Rt.color===ie.color&&(He+=Rt.count)});var Ge=oe.model.count,_e=0;ue.pathSelection.each(function(Rt){Rt.model.color===ie.color&&(_e+=Rt.model.count)});var Re=He/Oe,We=He/_e,qe=He/Ge,Ue={countLabel:Oe,categoryLabel:Ae,probabilityLabel:Re.toFixed(3)},Ie=[];oe.parcatsViewModel.hoverinfoItems.indexOf("count")!==-1&&Ie.push(["Count:",Ue.countLabel].join(" ")),oe.parcatsViewModel.hoverinfoItems.indexOf("probability")!==-1&&(Ie.push("P(color \u2229 "+Ae+"): "+Ue.probabilityLabel),Ie.push("P("+Ae+" | color): "+We.toFixed(3)),Ie.push("P(color | "+Ae+"): "+qe.toFixed(3)));var Ve=Ie.join("<br>"),dt=r.mostReadable(ie.color,["black","white"]);return{trace:ce,x:K*(xe-ne.left),y:$*(me-ne.top),text:Ve,color:ie.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:dt,fontSize:10,idealAlign:ke,hovertemplate:ce.hovertemplate,hovertemplateLabels:Ue,eventData:[{data:ce._input,fullData:ce,category:Ae,count:Oe,probability:Re,categorycount:Ge,colorcount:_e,bandcolorcount:He}]}}function D(Y){if(!Y.parcatsViewModel.dragDimension&&Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1){var ne=u.mouse(this)[1];if(ne<-1)return;var te=Y.parcatsViewModel.graphDiv,K=te._fullLayout,$=K._paperdiv.node().getBoundingClientRect(),ae=Y.parcatsViewModel.hoveron,ie=this;if(ae==="color"?(S(ie),P(ie,"plotly_hover",u.event)):(L(ie),k(ie,"plotly_hover",u.event)),Y.parcatsViewModel.hoverinfoItems.indexOf("none")===-1){var oe;ae==="category"?oe=O(te,$,ie):ae==="color"?oe=I(te,$,ie):ae==="dimension"&&(oe=F(te,$,ie)),oe&&x.loneHover(oe,{container:K._hoverlayer.node(),outerContainer:K._paper.node(),gd:te})}}}function U(Y){var ne=Y.parcatsViewModel;if(!ne.dragDimension&&(A(ne.pathSelection),_(ne.dimensionSelection.selectAll("g.category")),w(ne.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),x.loneUnhover(ne.graphDiv._fullLayout._hoverlayer.node()),ne.pathSelection.sort(c),ne.hoverinfoItems.indexOf("skip")===-1)){var te=Y.parcatsViewModel.hoveron,K=this;te==="color"?P(K,"plotly_unhover",u.event):k(K,"plotly_unhover",u.event)}}function B(Y){Y.parcatsViewModel.arrangement!=="fixed"&&(Y.dragDimensionDisplayInd=Y.model.displayInd,Y.initialDragDimensionDisplayInds=Y.parcatsViewModel.model.dimensions.map(function(ne){return ne.displayInd}),Y.dragHasMoved=!1,Y.dragCategoryDisplayInd=null,u.select(this).selectAll("g.category").select("rect.catrect").each(function(ne){var te=u.mouse(this)[0],K=u.mouse(this)[1];-2<=te&&te<=ne.width+2&&-2<=K&&K<=ne.height+2&&(Y.dragCategoryDisplayInd=ne.model.displayInd,Y.initialDragCategoryDisplayInds=Y.model.categories.map(function($){return $.displayInd}),ne.model.dragY=ne.y,t.raiseToTop(this.parentNode),u.select(this.parentNode).selectAll("rect.bandrect").each(function($){$.y<K&&K<=$.y+$.height&&(Y.potentialClickBand=this)}))}),Y.parcatsViewModel.dragDimension=Y,x.loneUnhover(Y.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function j(Y){if(Y.parcatsViewModel.arrangement!=="fixed"&&(Y.dragHasMoved=!0,Y.dragDimensionDisplayInd!==null)){var ne=Y.dragDimensionDisplayInd,te=ne-1,K=ne+1,$=Y.parcatsViewModel.dimensions[ne];if(Y.dragCategoryDisplayInd!==null){var ae=$.categories[Y.dragCategoryDisplayInd];ae.model.dragY+=u.event.dy;var ie=ae.model.dragY,oe=ae.model.displayInd,ue=$.categories,ye=ue[oe-1],ce=ue[oe+1];ye!==void 0&&ie<ye.y+ye.height/2&&(ae.model.displayInd=ye.model.displayInd,ye.model.displayInd=oe),ce!==void 0&&ie+ae.height>ce.y+ce.height/2&&(ae.model.displayInd=ce.model.displayInd,ce.model.displayInd=oe),Y.dragCategoryDisplayInd=ae.model.displayInd}if(Y.dragCategoryDisplayInd===null||Y.parcatsViewModel.arrangement==="freeform"){$.model.dragX=u.event.x;var me=Y.parcatsViewModel.dimensions[te],xe=Y.parcatsViewModel.dimensions[K];me!==void 0&&$.model.dragX<me.x+me.width&&($.model.displayInd=me.model.displayInd,me.model.displayInd=ne),xe!==void 0&&$.model.dragX+$.width>xe.x&&($.model.displayInd=xe.model.displayInd,xe.model.displayInd=Y.dragDimensionDisplayInd),Y.dragDimensionDisplayInd=$.model.displayInd}se(Y.parcatsViewModel),fe(Y.parcatsViewModel),W(Y.parcatsViewModel),q(Y.parcatsViewModel)}}function Z(Y){if(Y.parcatsViewModel.arrangement!=="fixed"&&Y.dragDimensionDisplayInd!==null){u.select(this).selectAll("text").attr("font-weight","normal");var ne={},te=ee(Y.parcatsViewModel),K=Y.parcatsViewModel.model.dimensions.map(function(xe){return xe.displayInd}),$=Y.initialDragDimensionDisplayInds.some(function(xe,ke){return xe!==K[ke]});$&&K.forEach(function(xe,ke){var Ae=Y.parcatsViewModel.model.dimensions[ke].containerInd;ne["dimensions["+Ae+"].displayindex"]=xe});var ae=!1;if(Y.dragCategoryDisplayInd!==null){var ie=Y.model.categories.map(function(xe){return xe.displayInd});if(ae=Y.initialDragCategoryDisplayInds.some(function(xe,ke){return xe!==ie[ke]}),ae){var oe=Y.model.categories.slice().sort(function(xe,ke){return xe.displayInd-ke.displayInd}),ue=oe.map(function(xe){return xe.categoryValue}),ye=oe.map(function(xe){return xe.categoryLabel});ne["dimensions["+Y.model.containerInd+"].categoryarray"]=[ue],ne["dimensions["+Y.model.containerInd+"].ticktext"]=[ye],ne["dimensions["+Y.model.containerInd+"].categoryorder"]="array"}}if(Y.parcatsViewModel.hoverinfoItems.indexOf("skip")===-1&&!Y.dragHasMoved&&Y.potentialClickBand&&(Y.parcatsViewModel.hoveron==="color"?P(Y.potentialClickBand,"plotly_click",u.event.sourceEvent):k(Y.potentialClickBand,"plotly_click",u.event.sourceEvent)),Y.model.dragX=null,Y.dragCategoryDisplayInd!==null){var ce=Y.parcatsViewModel.dimensions[Y.dragDimensionDisplayInd].categories[Y.dragCategoryDisplayInd];ce.model.dragY=null,Y.dragCategoryDisplayInd=null}Y.dragDimensionDisplayInd=null,Y.parcatsViewModel.dragDimension=null,Y.dragHasMoved=null,Y.potentialClickBand=null,se(Y.parcatsViewModel),fe(Y.parcatsViewModel);var me=u.transition().duration(300).ease("cubic-in-out");me.each(function(){W(Y.parcatsViewModel,!0),q(Y.parcatsViewModel,!0)}).each("end",function(){($||ae)&&m.restyle(Y.parcatsViewModel.graphDiv,ne,[te])})}}function ee(Y){for(var ne,te=Y.graphDiv._fullData,K=0;K<te.length;K++)if(Y.key===te[K].uid){ne=K;break}return ne}function q(Y,ne){ne===void 0&&(ne=!1);function te(K){return ne?K.transition():K}Y.pathSelection.data(function(K){return K.paths},l),te(Y.pathSelection).attr("d",function(K){return K.svgD})}function W(Y,ne){ne===void 0&&(ne=!1);function te(ue){return ne?ue.transition():ue}Y.dimensionSelection.data(function(ue){return ue.dimensions},l);var K=Y.dimensionSelection.selectAll("g.category").data(function(ue){return ue.categories},l);te(Y.dimensionSelection).attr("transform",function(ue){return i(ue.x,0)}),te(K).attr("transform",function(ue){return i(0,ue.y)});var $=K.select(".dimlabel");$.text(function(ue,ye){return ye===0?ue.parcatsViewModel.model.dimensions[ue.model.dimensionInd].dimensionLabel:null});var ae=K.select(".catlabel");ae.attr("text-anchor",function(ue){return o(ue)?"start":"end"}).attr("x",function(ue){return o(ue)?ue.width+5:-5}).each(function(ue){var ye,ce;o(ue)?(ye=ue.width+5,ce="start"):(ye=-5,ce="end"),u.select(this).selectAll("tspan").attr("x",ye).attr("text-anchor",ce)});var ie=K.selectAll("rect.bandrect").data(function(ue){return ue.bands},l),oe=ie.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ue){return ue.color}).attr("fill-opacity",0);ie.attr("fill",function(ue){return ue.color}).attr("width",function(ue){return ue.width}).attr("height",function(ue){return ue.height}).attr("y",function(ue){return ue.y}),w(oe),ie.each(function(){t.raiseToTop(this)}),ie.exit().remove()}function J(Y,ne,te){var K=te[0],$=ne.margin||{l:80,r:80,t:100,b:80},ae=K.trace,ie=ae.domain,oe=ne.width,ue=ne.height,ye=Math.floor(oe*(ie.x[1]-ie.x[0])),ce=Math.floor(ue*(ie.y[1]-ie.y[0])),me=ie.x[0]*oe+$.l,xe=ne.height-ie.y[1]*ne.height+$.t,ke=ae.line.shape,Ae;ae.hoverinfo==="all"?Ae=["count","probability"]:Ae=(ae.hoverinfo||"").split("+");var Oe={trace:ae,key:ae.uid,model:K,x:me,y:xe,width:ye,height:ce,hoveron:ae.hoveron,hoverinfoItems:Ae,arrangement:ae.arrangement,bundlecolors:ae.bundlecolors,sortpaths:ae.sortpaths,labelfont:ae.labelfont,categorylabelfont:ae.tickfont,pathShape:ke,dragDimension:null,margin:$,paths:[],dimensions:[],graphDiv:Y,traceSelection:null,pathSelection:null,dimensionSelection:null};return K.dimensions&&(se(Oe),fe(Oe)),Oe}function le(Y,ne,te,K,$){var ae=[],ie=[],oe,ue;for(ue=0;ue<te.length-1;ue++)oe=s(te[ue]+Y[ue],Y[ue+1]),ae.push(oe($)),ie.push(oe(1-$));var ye="M "+Y[0]+","+ne[0];for(ye+="l"+te[0]+",0 ",ue=1;ue<te.length;ue++)ye+="C"+ae[ue-1]+","+ne[ue-1]+" "+ie[ue-1]+","+ne[ue]+" "+Y[ue]+","+ne[ue],ye+="l"+te[ue]+",0 ";for(ye+="l0,"+K+" ",ye+="l -"+te[te.length-1]+",0 ",ue=te.length-2;ue>=0;ue--)ye+="C"+ie[ue]+","+(ne[ue+1]+K)+" "+ae[ue]+","+(ne[ue]+K)+" "+(Y[ue]+te[ue])+","+(ne[ue]+K),ye+="l-"+te[ue]+",0 ";return ye+="Z",ye}function fe(Y){var ne=Y.dimensions,te=Y.model,K=ne.map(function(zt){return zt.categories.map(function(Bt){return Bt.y})}),$=Y.model.dimensions.map(function(zt){return zt.categories.map(function(Bt){return Bt.displayInd})}),ae=Y.model.dimensions.map(function(zt){return zt.displayInd}),ie=Y.dimensions.map(function(zt){return zt.model.dimensionInd}),oe=ne.map(function(zt){return zt.x}),ue=ne.map(function(zt){return zt.width}),ye=[];for(var ce in te.paths)te.paths.hasOwnProperty(ce)&&ye.push(te.paths[ce]);function me(zt){var Bt=zt.categoryInds.map(function(Mt,it){return $[it][Mt]}),Lt=ie.map(function(Mt){return Bt[Mt]});return Lt}ye.sort(function(zt,Bt){var Lt=me(zt),Mt=me(Bt);return Y.sortpaths==="backward"&&(Lt.reverse(),Mt.reverse()),Lt.push(zt.valueInds[0]),Mt.push(Bt.valueInds[0]),Y.bundlecolors&&(Lt.unshift(zt.rawColor),Mt.unshift(Bt.rawColor)),Lt<Mt?-1:Lt>Mt?1:0});for(var xe=new Array(ye.length),ke=ne[0].model.count,Ae=ne[0].categories.map(function(zt){return zt.height}).reduce(function(zt,Bt){return zt+Bt}),Oe=0;Oe<ye.length;Oe++){var He=ye[Oe],Ge;ke>0?Ge=Ae*(He.count/ke):Ge=0;for(var _e=new Array(K.length),Re=0;Re<He.categoryInds.length;Re++){var We=He.categoryInds[Re],qe=$[Re][We],Ue=ae[Re];_e[Ue]=K[Ue][qe],K[Ue][qe]+=Ge;var Ie=Y.dimensions[Ue].categories[qe],Ve=Ie.bands.length,dt=Ie.bands[Ve-1];if(dt===void 0||He.rawColor!==dt.rawColor){var Rt=dt===void 0?0:dt.y+dt.height;Ie.bands.push({key:Rt,color:He.color,rawColor:He.rawColor,height:Ge,width:Ie.width,count:He.count,y:Rt,categoryViewModel:Ie,parcatsViewModel:Y})}else{var Gt=Ie.bands[Ve-1];Gt.height+=Ge,Gt.count+=He.count}}var kt;Y.pathShape==="hspline"?kt=le(oe,_e,ue,Ge,.5):kt=le(oe,_e,ue,Ge,0),xe[Oe]={key:He.valueInds[0],model:He,height:Ge,leftXs:oe,topYs:_e,dimWidths:ue,svgD:kt,parcatsViewModel:Y}}Y.paths=xe}function se(Y){var ne=Y.model.dimensions.map(function(ie){return{displayInd:ie.displayInd,dimensionInd:ie.dimensionInd}});ne.sort(function(ie,oe){return ie.displayInd-oe.displayInd});var te=[];for(var K in ne){var $=ne[K].dimensionInd,ae=Y.model.dimensions[$];te.push(H(Y,ae))}Y.dimensions=te}function H(Y,ne){var te=40,K=16,$=Y.model.dimensions.length,ae=ne.displayInd,ie,oe,ue;$>1?ie=(Y.width-2*te-K)/($-1):ie=0,oe=te,ue=oe+ie*ae;var ye=[],ce=Y.model.maxCats,me=ne.categories.length,xe=8,ke=ne.count,Ae=Y.height-xe*(ce-1),Oe,He,Ge,_e,Re,We=(ce-me)*xe/2,qe=ne.categories.map(function(Ue){return{displayInd:Ue.displayInd,categoryInd:Ue.categoryInd}});for(qe.sort(function(Ue,Ie){return Ue.displayInd-Ie.displayInd}),Re=0;Re<me;Re++)_e=qe[Re].categoryInd,He=ne.categories[_e],ke>0?Oe=He.count/ke*Ae:Oe=0,Ge={key:He.valueInds[0],model:He,width:K,height:Oe,y:He.dragY!==null?He.dragY:We,bands:[],parcatsViewModel:Y},We=We+Oe+xe,ye.push(Ge);return{key:ne.dimensionInd,x:ne.dragX!==null?ne.dragX:ue,y:0,width:K,model:ne,categories:ye,parcatsViewModel:Y,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(e,z,N){var u=e("./parcats");z.exports=function(m,x,t,i){var a=m._fullLayout,r=a._paper,n=a._size;u(m,r,x,{width:n.w,height:n.h,margin:{t:n.t,r:n.r,b:n.b,l:n.l}},t,i)}},{"./parcats":886}],888:[function(e,z,N){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/layout_attributes"),m=e("../../plots/font_attributes"),x=e("../../plots/domain").attributes,t=e("../../lib/extend").extendFlat,i=e("../../plot_api/plot_template").templatedArray;z.exports={domain:x({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:m({editType:"plot"}),tickfont:m({editType:"plot"}),rangefont:m({editType:"plot"}),dimensions:i("dimension",{label:{valType:"string",editType:"plot"},tickvals:t({},s.tickvals,{editType:"plot"}),ticktext:t({},s.ticktext,{editType:"plot"}),tickformat:t({},s.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:t({editType:"calc"},u("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(e,z,N){var u=e("./constants"),s=e("@plotly/d3"),m=e("../../lib/gup").keyFun,x=e("../../lib/gup").repeat,t=e("../../lib").sorterAsc,i=e("../../lib").strTranslate,a=u.bar.snapRatio;function r(Z,ee){return Z*(1-a)+ee*a}var n=u.bar.snapClose;function f(Z,ee){return Z*(1-n)+ee*n}function l(Z,ee,q,W){if(o(q,W))return q;var J=Z?-1:1,le=0,fe=ee.length-1;if(J<0){var se=le;le=fe,fe=se}for(var H=ee[le],Y=H,ne=le;J*ne<J*fe;ne+=J){var te=ne+J,K=ee[te];if(J*q<J*f(H,K))return r(H,Y);if(J*q<J*K||te===fe)return r(K,H);Y=H,H=K}}function o(Z,ee){for(var q=0;q<ee.length;q++)if(Z>=ee[q][0]&&Z<=ee[q][1])return!0;return!1}function c(Z){Z.attr("x",-u.bar.captureWidth/2).attr("width",u.bar.captureWidth)}function h(Z){Z.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function d(Z){if(!Z.brush.filterSpecified)return"0,"+Z.height;for(var ee=p(Z.brush.filter.getConsolidated(),Z.height),q=[0],W,J,le,fe=ee.length?ee[0][0]:null,se=0;se<ee.length;se++)W=ee[se],J=W[1]-W[0],q.push(fe),q.push(J),le=se+1,le<ee.length&&(fe=ee[le][0]-W[1]);return q.push(Z.height),q}function p(Z,ee){return Z.map(function(q){return q.map(function(W){return Math.max(0,W*ee)}).sort(t)})}function y(Z,ee){var q=u.bar.handleHeight;if(!(ee>Z[1]+q||ee<Z[0]-q))return ee>=.9*Z[1]+.1*Z[0]?"n":ee<=.9*Z[0]+.1*Z[1]?"s":"ns"}function g(){s.select(document.body).style("cursor",null)}function A(Z){Z.attr("stroke-dasharray",d)}function b(Z,ee){var q=s.select(Z).selectAll(".highlight, .highlight-shadow"),W=ee?q.transition().duration(u.bar.snapDuration).each("end",ee):q;A(W)}function M(Z,ee){var q=Z.brush,W=q.filterSpecified,J=NaN,le={},fe;if(W){var se=Z.height,H=q.filter.getConsolidated(),Y=p(H,se),ne=NaN,te=NaN,K=NaN;for(fe=0;fe<=Y.length;fe++){var $=Y[fe];if($&&$[0]<=ee&&ee<=$[1]){ne=fe;break}else if(te=fe?fe-1:NaN,$&&$[0]>ee){K=fe;break}}if(J=ne,isNaN(J)&&(isNaN(te)||isNaN(K)?J=isNaN(te)?K:te:J=ee-Y[te][1]<Y[K][0]-ee?te:K),!isNaN(J)){var ae=Y[J],ie=y(ae,ee);ie&&(le.interval=H[J],le.intervalPix=ae,le.region=ie)}}if(Z.ordinal&&!le.region){var oe=Z.unitTickvals,ue=Z.unitToPaddedPx.invert(ee);for(fe=0;fe<oe.length;fe++){var ye=[oe[Math.max(fe-1,0)]*.25+oe[fe]*.75,oe[Math.min(fe+1,oe.length-1)]*.25+oe[fe]*.75];if(ue>=ye[0]&&ue<=ye[1]){le.clickableOrdinalRange=ye;break}}}return le}function _(Z,ee){s.event.sourceEvent.stopPropagation();var q=ee.height-s.mouse(Z)[1]-2*u.verticalPadding,W=ee.unitToPaddedPx.invert(q),J=ee.brush,le=M(ee,q),fe=le.interval,se=J.svgBrush;if(se.wasDragged=!1,se.grabbingBar=le.region==="ns",se.grabbingBar){var H=fe.map(ee.unitToPaddedPx);se.grabPoint=q-H[0]-u.verticalPadding,se.barLength=H[1]-H[0]}se.clickableOrdinalRange=le.clickableOrdinalRange,se.stayingIntervals=ee.multiselect&&J.filterSpecified?J.filter.getConsolidated():[],fe&&(se.stayingIntervals=se.stayingIntervals.filter(function(Y){return Y[0]!==fe[0]&&Y[1]!==fe[1]})),se.startExtent=le.region?fe[le.region==="s"?1:0]:W,ee.parent.inBrushDrag=!0,se.brushStartCallback()}function T(Z,ee){s.event.sourceEvent.stopPropagation();var q=ee.height-s.mouse(Z)[1]-2*u.verticalPadding,W=ee.brush.svgBrush;W.wasDragged=!0,W._dragging=!0,W.grabbingBar?W.newExtent=[q-W.grabPoint,q+W.barLength-W.grabPoint].map(ee.unitToPaddedPx.invert):W.newExtent=[W.startExtent,ee.unitToPaddedPx.invert(q)].sort(t),ee.brush.filterSpecified=!0,W.extent=W.stayingIntervals.concat([W.newExtent]),W.brushCallback(ee),b(Z.parentNode)}function w(Z,ee){var q=ee.brush,W=q.filter,J=q.svgBrush;J._dragging||(v(Z,ee),T(Z,ee),ee.brush.svgBrush.wasDragged=!1),J._dragging=!1;var le=s.event;le.sourceEvent.stopPropagation();var fe=J.grabbingBar;if(J.grabbingBar=!1,J.grabLocation=void 0,ee.parent.inBrushDrag=!1,g(),!J.wasDragged){J.wasDragged=void 0,J.clickableOrdinalRange?q.filterSpecified&&ee.multiselect?J.extent.push(J.clickableOrdinalRange):(J.extent=[J.clickableOrdinalRange],q.filterSpecified=!0):fe?(J.extent=J.stayingIntervals,J.extent.length===0&&F(q)):F(q),J.brushCallback(ee),b(Z.parentNode),J.brushEndCallback(q.filterSpecified?W.getConsolidated():[]);return}var se=function(){W.set(W.getConsolidated())};if(ee.ordinal){var H=ee.unitTickvals;H[H.length-1]<H[0]&&H.reverse(),J.newExtent=[l(0,H,J.newExtent[0],J.stayingIntervals),l(1,H,J.newExtent[1],J.stayingIntervals)];var Y=J.newExtent[1]>J.newExtent[0];J.extent=J.stayingIntervals.concat(Y?[J.newExtent]:[]),J.extent.length||F(q),J.brushCallback(ee),Y?b(Z.parentNode,se):(se(),b(Z.parentNode))}else se();J.brushEndCallback(q.filterSpecified?W.getConsolidated():[])}function v(Z,ee){var q=ee.height-s.mouse(Z)[1]-2*u.verticalPadding,W=M(ee,q),J="crosshair";W.clickableOrdinalRange?J="pointer":W.region&&(J=W.region+"-resize"),s.select(document.body).style("cursor",J)}function L(Z){Z.on("mousemove",function(ee){s.event.preventDefault(),ee.parent.inBrushDrag||v(this,ee)}).on("mouseleave",function(ee){ee.parent.inBrushDrag||g()}).call(s.behavior.drag().on("dragstart",function(ee){_(this,ee)}).on("drag",function(ee){T(this,ee)}).on("dragend",function(ee){w(this,ee)}))}function S(Z,ee){return Z[0]-ee[0]}function k(Z,ee){var q=Z.selectAll(".background").data(x);q.enter().append("rect").classed("background",!0).call(c).call(h).style("pointer-events","auto").attr("transform",i(0,u.verticalPadding)),q.call(L).attr("height",function(le){return le.height-u.verticalPadding});var W=Z.selectAll(".highlight-shadow").data(x);W.enter().append("line").classed("highlight-shadow",!0).attr("x",-u.bar.width/2).attr("stroke-width",u.bar.width+u.bar.strokeWidth).attr("stroke",ee).attr("opacity",u.bar.strokeOpacity).attr("stroke-linecap","butt"),W.attr("y1",function(le){return le.height}).call(A);var J=Z.selectAll(".highlight").data(x);J.enter().append("line").classed("highlight",!0).attr("x",-u.bar.width/2).attr("stroke-width",u.bar.width-u.bar.strokeWidth).attr("stroke",u.bar.fillColor).attr("opacity",u.bar.fillOpacity).attr("stroke-linecap","butt"),J.attr("y1",function(le){return le.height}).call(A)}function P(Z,ee){var q=Z.selectAll("."+u.cn.axisBrush).data(x,m);q.enter().append("g").classed(u.cn.axisBrush,!0),k(q,ee)}function O(Z){return Z.svgBrush.extent.map(function(ee){return ee.slice()})}function F(Z){Z.filterSpecified=!1,Z.svgBrush.extent=[[-1/0,1/0]]}function I(Z){return function(q){var W=q.brush,J=O(W),le=J.slice();W.filter.set(le),Z()}}function D(Z){for(var ee=Z.slice(),q=[],W,J=ee.shift();J;){for(W=J.slice();(J=ee.shift())&&J[0]<=W[1];)W[1]=Math.max(W[1],J[1]);q.push(W)}return q.length===1&&q[0][0]>q[0][1]&&(q=[]),q}function U(){var Z=[],ee,q;return{set:function(W){Z=W.map(function(J){return J.slice().sort(t)}).sort(S),Z.length===1&&Z[0][0]===-1/0&&Z[0][1]===1/0&&(Z=[[0,-1]]),ee=D(Z),q=Z.reduce(function(J,le){return[Math.min(J[0],le[0]),Math.max(J[1],le[1])]},[1/0,-1/0])},get:function(){return Z.slice()},getConsolidated:function(){return ee},getBounds:function(){return q}}}function B(Z,ee,q,W,J,le){var fe=U();return fe.set(q),{filter:fe,filterSpecified:ee,svgBrush:{extent:[],brushStartCallback:W,brushCallback:I(J),brushEndCallback:le}}}function j(Z,ee){if(Array.isArray(Z[0])?(Z=Z.map(function(W){return W.sort(t)}),ee.multiselect?Z=D(Z.sort(S)):Z=[Z[0]]):Z=[Z.sort(t)],ee.tickvals){var q=ee.tickvals.slice().sort(t);if(Z=Z.map(function(W){var J=[l(0,q,W[0],[]),l(1,q,W[1],[])];if(J[1]>J[0])return J}).filter(function(W){return W}),!Z.length)return}return Z.length>1?Z:Z[0]}z.exports={makeBrush:B,ensureAxisBrush:P,cleanRanges:j}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../plots/get_data").getModuleCalcData,m=e("./plot"),x=e("../../constants/xmlns_namespaces");N.name="parcoords",N.plot=function(t){var i=s(t.calcdata,"parcoords")[0];i.length&&m(t,i)},N.clean=function(t,i,a,r){var n=r._has&&r._has("parcoords"),f=i._has&&i._has("parcoords");n&&!f&&(r._paperdiv.selectAll(".parcoords").remove(),r._glimages.selectAll("*").remove())},N.toSVG=function(t){var i=t._fullLayout._glimages,a=u.select(t).selectAll(".svg-container"),r=a.filter(function(f,l){return l===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus");function n(){var f=this,l=f.toDataURL("image/png"),o=i.append("svg:image");o.attr({xmlns:x.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:f.style.width,height:f.style.height})}r.each(n),window.setTimeout(function(){u.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(e,z,N){var u=e("../../lib").isArrayOrTypedArray,s=e("../../components/colorscale"),m=e("../../lib/gup").wrap;z.exports=function(i,a){var r,n;return s.hasColorscale(a,"line")&&u(a.line.color)?(r=a.line.color,n=s.extractOpts(a.line).colorscale,s.calc(i,a,{vals:r,containerStr:"line",cLetter:"c"})):(r=x(a._length),n=[[0,a.line.color],[1,a.line.color]]),m({lineColor:r,cscale:n})};function x(t){for(var i=new Array(t),a=0;a<t;a++)i[a]=.5;return i}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(e,z,N){z.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("../../plots/domain").defaults,t=e("../../plots/array_container_defaults"),i=e("../../plots/cartesian/axes"),a=e("./attributes"),r=e("./axisbrush"),n=e("./constants").maxDimensionCount,f=e("./merge_length");function l(c,h,d,p,y){var g=y("line.color",d);if(s(c,"line")&&u.isArrayOrTypedArray(g)){if(g.length)return y("line.colorscale"),m(c,h,p,y,{prefix:"line.",cLetter:"c"}),g.length;h.line.color=d}return 1/0}function o(c,h,d,p){function y(_,T){return u.coerce(c,h,a.dimensions,_,T)}var g=y("values"),A=y("visible");if(g&&g.length||(A=h.visible=!1),A){y("label"),y("tickvals"),y("ticktext"),y("tickformat");var b=y("range");h._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:b},i.setConvert(h._ax,p.layout),y("multiselect");var M=y("constraintrange");M&&(h.constraintrange=r.cleanRanges(M,h))}}z.exports=function(h,d,p,y){function g(T,w){return u.coerce(h,d,a,T,w)}var A=h.dimensions;Array.isArray(A)&&A.length>n&&(u.log("parcoords traces support up to "+n+" dimensions at the moment"),A.splice(n));var b=t(h,d,{name:"dimensions",layout:y,handleItemDefaults:o}),M=l(h,d,p,y,g);x(d,y,g),(!Array.isArray(b)||!b.length)&&(d.visible=!1),f(d,b,"values",M);var _={family:y.font.family,size:Math.round(y.font.size/1.2),color:y.font.color};u.coerceFont(g,"labelfont",_),u.coerceFont(g,"tickfont",_),u.coerceFont(g,"rangefont",_),g("labelangle"),g("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(e,z,N){var u=e("../../lib").isTypedArray;N.convertTypedArray=function(s){return u(s)?Array.prototype.slice.call(s):s},N.isOrdinal=function(s){return!!s.tickvals},N.isVisible=function(s){return s.visible||!("visible"in s)}},{"../../lib":503}],895:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:e("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(e,z,N){var u=e("glslify"),s=u([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

attribute vec4 p01_04, p05_08, p09_12, p13_16,
               p17_20, p21_24, p25_28, p29_32,
               p33_36, p37_40, p41_44, p45_48,
               p49_52, p53_56, p57_60, colors;

uniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,
             loA, hiA, loB, hiB, loC, hiC, loD, hiD;

uniform vec2 resolution, viewBoxPos, viewBoxSize;
uniform float maskHeight;
uniform float drwLayer; // 0: context, 1: focus, 2: pick
uniform vec4 contextColor;
uniform sampler2D maskTexture, palette;

bool isPick    = (drwLayer > 1.5);
bool isContext = (drwLayer < 0.5);

const vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);
const vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);

float val(mat4 p, mat4 v) {
    return dot(matrixCompMult(p, v) * UNITS, UNITS);
}

float axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {
    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);
    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);
    return y1 * (1.0 - ratio) + y2 * ratio;
}

int iMod(int a, int b) {
    return a - b * (a / b);
}

bool fOutside(float p, float lo, float hi) {
    return (lo < hi) && (lo > p || p > hi);
}

bool vOutside(vec4 p, vec4 lo, vec4 hi) {
    return (
        fOutside(p[0], lo[0], hi[0]) ||
        fOutside(p[1], lo[1], hi[1]) ||
        fOutside(p[2], lo[2], hi[2]) ||
        fOutside(p[3], lo[3], hi[3])
    );
}

bool mOutside(mat4 p, mat4 lo, mat4 hi) {
    return (
        vOutside(p[0], lo[0], hi[0]) ||
        vOutside(p[1], lo[1], hi[1]) ||
        vOutside(p[2], lo[2], hi[2]) ||
        vOutside(p[3], lo[3], hi[3])
    );
}

bool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {
    return mOutside(A, loA, hiA) ||
           mOutside(B, loB, hiB) ||
           mOutside(C, loC, hiC) ||
           mOutside(D, loD, hiD);
}

bool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {
    mat4 pnts[4];
    pnts[0] = A;
    pnts[1] = B;
    pnts[2] = C;
    pnts[3] = D;

    for(int i = 0; i < 4; ++i) {
        for(int j = 0; j < 4; ++j) {
            for(int k = 0; k < 4; ++k) {
                if(0 == iMod(
                    int(255.0 * texture2D(maskTexture,
                        vec2(
                            (float(i * 2 + j / 2) + 0.5) / 8.0,
                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight
                        ))[3]
                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),
                    2
                )) return true;
            }
        }
    }
    return false;
}

vec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {
    float x = 0.5 * sign(v) + 0.5;
    float y = axisY(x, A, B, C, D);
    float z = 1.0 - abs(v);

    z += isContext ? 0.0 : 2.0 * float(
        outsideBoundingBox(A, B, C, D) ||
        outsideRasterMask(A, B, C, D)
    );

    return vec4(
        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,
        z,
        1.0
    );
}

void main() {
    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);
    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);
    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);
    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);

    float v = colors[3];

    gl_Position = position(isContext, v, A, B, C, D);

    fragColor =
        isContext ? vec4(contextColor) :
        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));
}
`]),m=u([`precision highp float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
    gl_FragColor = fragColor;
}
`]),x=e("./constants").maxDimensionCount,t=e("../../lib"),i=1e-6,a=2048,r=new Uint8Array(4),n=new Uint8Array(4),f={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function l(v){v.read({x:0,y:0,width:1,height:1,data:r})}function o(v,L,S,k,P){var O=v._gl;O.enable(O.SCISSOR_TEST),O.scissor(L,S,k,P),v.clear({color:[0,0,0,0],depth:1})}function c(v,L,S,k,P,O){var F=O.key;function I(D){var U=Math.min(k,P-D*k);D===0&&(window.cancelAnimationFrame(S.currentRafs[F]),delete S.currentRafs[F],o(v,O.scissorX,O.scissorY,O.scissorWidth,O.viewBoxSize[1])),!S.clearOnly&&(O.count=2*U,O.offset=2*D*k,L(O),D*k+U<P&&(S.currentRafs[F]=window.requestAnimationFrame(function(){I(D+1)})),S.drawCompleted=!1)}S.drawCompleted||(l(v),S.drawCompleted=!0),I(0)}function h(v){return Math.max(i,Math.min(1-i,v))}function d(v,L){for(var S=new Array(256),k=0;k<256;k++)S[k]=v(k/255).concat(L);return S}function p(v,L){return(v>>>8*L)%256/255}function y(v,L,S){for(var k=new Array(v*(x+4)),P=0,O=0;O<v;O++){for(var F=0;F<x;F++)k[P++]=F<L.length?L[F].paddedUnitValues[O]:.5;k[P++]=p(O,2),k[P++]=p(O,1),k[P++]=p(O,0),k[P++]=h(S[O])}return k}function g(v,L,S){for(var k=new Array(L*8),P=0,O=0;O<L;O++)for(var F=0;F<2;F++)for(var I=0;I<4;I++){var D=v*4+I,U=S[O*64+D];D===63&&F===0&&(U*=-1),k[P++]=U}return k}function A(v){var L="0"+v;return L.substr(L.length-2)}function b(v){return v<x?"p"+A(v+1)+"_"+A(v+4):"colors"}function M(v,L,S){for(var k=0;k<=x;k+=4)v[b(k)](g(k/4,L,S))}function _(v){for(var L={},S=0;S<=x;S+=4)L[b(S)]=v.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return L}function T(v,L,S,k,P,O,F,I,D,U,B,j,Z,ee){for(var q=[[],[]],W=0;W<64;W++)q[0][W]=W===P?1:0,q[1][W]=W===O?1:0;F*=ee,I*=ee,D*=ee,U*=ee;var J=v.lines.canvasOverdrag*ee,le=v.domain,fe=v.canvasWidth*ee,se=v.canvasHeight*ee,H=v.pad.l*ee,Y=v.pad.b*ee,ne=v.layoutHeight*ee,te=v.layoutWidth*ee,K=v.deselectedLines.color,$=t.extendFlat({key:B,resolution:[fe,se],viewBoxPos:[F+J,I],viewBoxSize:[D,U],i0:P,i1:O,dim0A:q[0].slice(0,16),dim0B:q[0].slice(16,32),dim0C:q[0].slice(32,48),dim0D:q[0].slice(48,64),dim1A:q[1].slice(0,16),dim1B:q[1].slice(16,32),dim1C:q[1].slice(32,48),dim1D:q[1].slice(48,64),drwLayer:j,contextColor:[K[0]/255,K[1]/255,K[2]/255,K[3]<1?K[3]:Math.max(1/255,Math.pow(1/v.lines.color.length,1/3))],scissorX:(k===L?0:F+J)+(H-J)+te*le.x[0],scissorWidth:(k===S?fe-F+J:D+.5)+(k===L?F+J:0),scissorY:I+Y+ne*le.y[0],scissorHeight:U,viewportX:H-J+te*le.x[0],viewportY:Y+ne*le.y[0],viewportWidth:fe,viewportHeight:se},Z);return $}function w(v){var L=a-1,S=Math.max(0,Math.floor(v[0]*L),0),k=Math.min(L,Math.ceil(v[1]*L),L);return[Math.min(S,k),Math.max(S,k)]}z.exports=function(v,L){var S=L.context,k=L.pick,P=L.regl,O=P._gl,F=O.getParameter(O.ALIASED_LINE_WIDTH_RANGE),I=Math.max(F[0],Math.min(F[1],L.viewModel.plotGlPixelRatio)),D={currentRafs:{},drawCompleted:!0,clearOnly:!1},U,B,j,Z,ee=_(P),q,W=P.texture(f),J=[];fe(L);var le=P({profile:!1,blend:{enable:S,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!S,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:P.prop("scissorX"),y:P.prop("scissorY"),width:P.prop("scissorWidth"),height:P.prop("scissorHeight")}},viewport:{x:P.prop("viewportX"),y:P.prop("viewportY"),width:P.prop("viewportWidth"),height:P.prop("viewportHeight")},dither:!1,vert:s,frag:m,primitive:"lines",lineWidth:I,attributes:ee,uniforms:{resolution:P.prop("resolution"),viewBoxPos:P.prop("viewBoxPos"),viewBoxSize:P.prop("viewBoxSize"),dim0A:P.prop("dim0A"),dim1A:P.prop("dim1A"),dim0B:P.prop("dim0B"),dim1B:P.prop("dim1B"),dim0C:P.prop("dim0C"),dim1C:P.prop("dim1C"),dim0D:P.prop("dim0D"),dim1D:P.prop("dim1D"),loA:P.prop("loA"),hiA:P.prop("hiA"),loB:P.prop("loB"),hiB:P.prop("hiB"),loC:P.prop("loC"),hiC:P.prop("hiC"),loD:P.prop("loD"),hiD:P.prop("hiD"),palette:W,contextColor:P.prop("contextColor"),maskTexture:P.prop("maskTexture"),drwLayer:P.prop("drwLayer"),maskHeight:P.prop("maskHeight")},offset:P.prop("offset"),count:P.prop("count")});function fe(K){U=K.model,B=K.viewModel,j=B.dimensions.slice(),Z=j[0]?j[0].values.length:0;var $=U.lines,ae=k?$.color.map(function(oe,ue){return ue/$.color.length}):$.color,ie=y(Z,j,ae);M(ee,Z,ie),!S&&!k&&(W=P.texture(t.extendFlat({data:d(U.unitToColor,255)},f)))}function se(K){var $,ae,ie,oe=[[],[]];for(ie=0;ie<64;ie++){var ue=!K&&ie<j.length?j[ie].brush.filter.getBounds():[-1/0,1/0];oe[0][ie]=ue[0],oe[1][ie]=ue[1]}var ye=a*8,ce=new Array(ye);for($=0;$<ye;$++)ce[$]=255;if(!K)for($=0;$<j.length;$++){var me=$%8,xe=($-me)/8,ke=Math.pow(2,me),Ae=j[$],Oe=Ae.brush.filter.get();if(!(Oe.length<2)){var He=w(Oe[0])[1];for(ae=1;ae<Oe.length;ae++){var Ge=w(Oe[ae]);for(ie=He+1;ie<Ge[0];ie++)ce[ie*8+xe]&=~ke;He=Math.max(He,Ge[1])}}}var _e={shape:[8,a],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:ce};return q?q(_e):q=P.texture(_e),{maskTexture:q,maskHeight:a,loA:oe[0].slice(0,16),loB:oe[0].slice(16,32),loC:oe[0].slice(32,48),loD:oe[0].slice(48,64),hiA:oe[1].slice(0,16),hiB:oe[1].slice(16,32),hiC:oe[1].slice(32,48),hiD:oe[1].slice(48,64)}}function H(K,$,ae){var ie=K.length,oe,ue,ye,ce=1/0,me=-1/0;for(oe=0;oe<ie;oe++)K[oe].dim0.canvasX<ce&&(ce=K[oe].dim0.canvasX,ue=oe),K[oe].dim1.canvasX>me&&(me=K[oe].dim1.canvasX,ye=oe);ie===0&&o(P,0,0,U.canvasWidth,U.canvasHeight);var xe=se(S);for(oe=0;oe<ie;oe++){var ke=K[oe],Ae=ke.dim0.crossfilterDimensionIndex,Oe=ke.dim1.crossfilterDimensionIndex,He=ke.canvasX,Ge=ke.canvasY,_e=He+ke.panelSizeX,Re=ke.plotGlPixelRatio;if($||!J[Ae]||J[Ae][0]!==He||J[Ae][1]!==_e){J[Ae]=[He,_e];var We=T(U,ue,ye,oe,Ae,Oe,He,Ge,ke.panelSizeX,ke.panelSizeY,ke.dim0.crossfilterDimensionIndex,S?0:k?2:1,xe,Re);D.clearOnly=ae;var qe=$?U.lines.blockLineCount:Z;c(P,le,D,qe,Z,We)}}}function Y(K,$){return P.read({x:K,y:$,width:1,height:1,data:n}),n}function ne(K,$,ae,ie){var oe=new Uint8Array(4*ae*ie);return P.read({x:K,y:$,width:ae,height:ie,data:oe}),oe}function te(){v.style["pointer-events"]="none",W.destroy(),q&&q.destroy();for(var K in ee)ee[K].destroy()}return{render:H,readPixel:Y,readPixels:ne,destroy:te,update:fe}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(e,z,N){z.exports=function(u,s,m,x){x||(x=1/0);var t,i;for(t=0;t<s.length;t++)i=s[t],i.visible&&(x=Math.min(x,i[m].length));for(x===1/0&&(x=0),u._length=x,t=0;t<s.length;t++)i=s[t],i.visible&&(i._length=x);return x}},{}],898:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("color-rgba"),t=e("../../plots/cartesian/axes"),i=s.strRotate,a=s.strTranslate,r=e("../../lib/svg_text_utils"),n=e("../../components/drawing"),f=e("../../components/colorscale"),l=e("../../lib/gup"),o=l.keyFun,c=l.repeat,h=l.unwrap,d=e("./helpers"),p=e("./constants"),y=e("./axisbrush"),g=e("./lines");function A(q,W,J){return s.aggNums(q,null,W,J)}function b(q,W){return _(A(Math.min,q,W),A(Math.max,q,W))}function M(q){var W=q.range;return W?_(W[0],W[1]):b(q.values,q._length)}function _(q,W){return(isNaN(q)||!isFinite(q))&&(q=0),(isNaN(W)||!isFinite(W))&&(W=0),q===W&&(q===0?(q-=1,W+=1):(q*=.9,W*=1.1)),[q,W]}function T(q,W){return W?function(J,le){var fe=W[le];return fe==null?q(J):fe}:q}function w(q,W,J,le,fe){var se=M(J);return le?u.scale.ordinal().domain(le.map(T(m(J.tickformat),fe))).range(le.map(function(H){var Y=(H-se[0])/(se[1]-se[0]);return q-W+Y*(2*W-q)})):u.scale.linear().domain(se).range([q-W,W])}function v(q,W){return u.scale.linear().range([W,q-W])}function L(q,W){return u.scale.linear().domain(M(q)).range([W,1-W])}function S(q){if(!!q.tickvals){var W=M(q);return u.scale.ordinal().domain(q.tickvals).range(q.tickvals.map(function(J){return(J-W[0])/(W[1]-W[0])}))}}function k(q){var W=q.map(function(se){return se[0]}),J=q.map(function(se){var H=x(se[1]);return u.rgb("rgb("+H[0]+","+H[1]+","+H[2]+")")}),le=function(se){return function(H){return H[se]}},fe="rgb".split("").map(function(se){return u.scale.linear().clamp(!0).domain(W).range(J.map(le(se)))});return function(se){return fe.map(function(H){return H(se)})}}function P(q){return q.dimensions.some(function(W){return W.brush.filterSpecified})}function O(q,W,J){var le=h(W),fe=le.trace,se=d.convertTypedArray(le.lineColor),H=fe.line,Y={color:x(p.deselectedLineColor)},ne=f.extractOpts(H),te=ne.reversescale?f.flipScale(le.cscale):le.cscale,K=fe.domain,$=fe.dimensions,ae=q.width,ie=fe.labelangle,oe=fe.labelside,ue=fe.labelfont,ye=fe.tickfont,ce=fe.rangefont,me=s.extendDeepNoArrays({},H,{color:se.map(u.scale.linear().domain(M({values:se,range:[ne.min,ne.max],_length:fe._length}))),blockLineCount:p.blockLineCount,canvasOverdrag:p.overdrag*p.canvasPixelRatio}),xe=Math.floor(ae*(K.x[1]-K.x[0])),ke=Math.floor(q.height*(K.y[1]-K.y[0])),Ae=q.margin||{l:80,r:80,t:100,b:80},Oe=xe,He=ke;return{key:J,colCount:$.filter(d.isVisible).length,dimensions:$,tickDistance:p.tickDistance,unitToColor:k(te),lines:me,deselectedLines:Y,labelAngle:ie,labelSide:oe,labelFont:ue,tickFont:ye,rangeFont:ce,layoutWidth:ae,layoutHeight:q.height,domain:K,translateX:K.x[0]*ae,translateY:q.height-K.y[1]*q.height,pad:Ae,canvasWidth:Oe*p.canvasPixelRatio+2*me.canvasOverdrag,canvasHeight:He*p.canvasPixelRatio,width:Oe,height:He,canvasPixelRatio:p.canvasPixelRatio}}function F(q,W,J){var le=J.width,fe=J.height,se=J.dimensions,H=J.canvasPixelRatio,Y=function(ae){return le*ae/Math.max(1,J.colCount-1)},ne=p.verticalPadding/fe,te=v(fe,p.verticalPadding),K={key:J.key,xScale:Y,model:J,inBrushDrag:!1},$={};return K.dimensions=se.filter(d.isVisible).map(function(ae,ie){var oe=L(ae,ne),ue=$[ae.label];$[ae.label]=(ue||0)+1;var ye=ae.label+(ue?"__"+ue:""),ce=ae.constraintrange,me=ce&&ce.length;me&&!Array.isArray(ce[0])&&(ce=[ce]);var xe=me?ce.map(function(Ue){return Ue.map(oe)}):[[-1/0,1/0]],ke=function(){var Ue=K;Ue.focusLayer&&Ue.focusLayer.render(Ue.panels,!0);var Ie=P(Ue);!q.contextShown()&&Ie?(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0),q.contextShown(!0)):q.contextShown()&&!Ie&&(Ue.contextLayer&&Ue.contextLayer.render(Ue.panels,!0,!0),q.contextShown(!1))},Ae=ae.values;Ae.length>ae._length&&(Ae=Ae.slice(0,ae._length));var Oe=ae.tickvals,He;function Ge(Ue,Ie){return{val:Ue,text:He[Ie]}}function _e(Ue,Ie){return Ue.val-Ie.val}if(Array.isArray(Oe)&&Oe.length){He=ae.ticktext,!Array.isArray(He)||!He.length?He=Oe.map(m(ae.tickformat)):He.length>Oe.length?He=He.slice(0,Oe.length):Oe.length>He.length&&(Oe=Oe.slice(0,He.length));for(var Re=1;Re<Oe.length;Re++)if(Oe[Re]<Oe[Re-1]){for(var We=Oe.map(Ge).sort(_e),qe=0;qe<Oe.length;qe++)Oe[qe]=We[qe].val,He[qe]=We[qe].text;break}}else Oe=void 0;return Ae=d.convertTypedArray(Ae),{key:ye,label:ae.label,tickFormat:ae.tickformat,tickvals:Oe,ticktext:He,ordinal:d.isOrdinal(ae),multiselect:ae.multiselect,xIndex:ie,crossfilterDimensionIndex:ie,visibleIndex:ae._index,height:fe,values:Ae,paddedUnitValues:Ae.map(oe),unitTickvals:Oe&&Oe.map(oe),xScale:Y,x:Y(ie),canvasX:Y(ie)*H,unitToPaddedPx:te,domainScale:w(fe,p.verticalPadding,ae,Oe,He),ordinalScale:S(ae),parent:K,model:J,brush:y.makeBrush(q,me,xe,function(){q.linePickActive(!1)},ke,function(Ue){if(K.focusLayer.render(K.panels,!0),K.pickLayer&&K.pickLayer.render(K.panels,!0),q.linePickActive(!0),W&&W.filterChanged){var Ie=oe.invert,Ve=Ue.map(function(dt){return dt.map(Ie).sort(s.sorterAsc)}).sort(function(dt,Rt){return dt[0]-Rt[0]});W.filterChanged(K.key,ae._index,Ve)}})}}),K}function I(q){q.classed(p.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function D(){var q=!0,W=!1;return{linePickActive:function(J){return arguments.length?q=!!J:q},contextShown:function(J){return arguments.length?W=!!J:W}}}function U(q,W){var J=W==="top"?1:-1,le=q*Math.PI/180,fe=Math.sin(le),se=Math.cos(le);return{dir:J,dx:fe,dy:se,degrees:q}}function B(q,W,J){for(var le=W.panels||(W.panels=[]),fe=q.data(),se=0;se<fe.length-1;se++){var H=le[se]||(le[se]={}),Y=fe[se],ne=fe[se+1];H.dim0=Y,H.dim1=ne,H.canvasX=Y.canvasX,H.panelSizeX=ne.canvasX-Y.canvasX,H.panelSizeY=W.model.canvasHeight,H.y=0,H.canvasY=0,H.plotGlPixelRatio=J}}function j(q){for(var W=0;W<q.length;W++)for(var J=0;J<q[W].length;J++)for(var le=q[W][J].trace,fe=le.dimensions,se=0;se<fe.length;se++){var H=fe[se].values,Y=fe[se]._ax;Y&&(Y.range?Y.range=_(Y.range[0],Y.range[1]):Y.range=b(H,le._length),Y.dtick||(Y.dtick=.01*(Math.abs(Y.range[1]-Y.range[0])||1)),Y.tickformat=fe[se].tickformat,t.calcTicks(Y),Y.cleanRange())}}function Z(q,W){return t.tickText(q._ax,W,!1).text}function ee(q,W){if(q.ordinal)return"";var J=q.domainScale.domain(),le=J[W?J.length-1:0];return Z(q.model.dimensions[q.visibleIndex],le)}z.exports=function(W,J,le,fe){var se=W._fullLayout,H=se._toppaper,Y=se._glcontainer,ne=W._context.plotGlPixelRatio,te=W._fullLayout.paper_bgcolor;j(J);var K=D(),$=J.filter(function(We){return h(We).trace.visible}).map(O.bind(0,le)).map(F.bind(0,K,fe));Y.each(function(We,qe){return s.extendFlat(We,$[qe])});var ae=Y.selectAll(".gl-canvas").each(function(We){We.viewModel=$[0],We.viewModel.plotGlPixelRatio=ne,We.viewModel.paperColor=te,We.model=We.viewModel?We.viewModel.model:null}),ie=null,oe=ae.filter(function(We){return We.pick});oe.style("pointer-events","auto").on("mousemove",function(We){if(K.linePickActive()&&We.lineLayer&&fe&&fe.hover){var qe=u.event,Ue=this.width,Ie=this.height,Ve=u.mouse(this),dt=Ve[0],Rt=Ve[1];if(dt<0||Rt<0||dt>=Ue||Rt>=Ie)return;var Gt=We.lineLayer.readPixel(dt,Ie-1-Rt),kt=Gt[3]!==0,zt=kt?Gt[2]+256*(Gt[1]+256*Gt[0]):null,Bt={x:dt,y:Rt,clientX:qe.clientX,clientY:qe.clientY,dataIndex:We.model.key,curveNumber:zt};zt!==ie&&(kt?fe.hover(Bt):fe.unhover&&fe.unhover(Bt),ie=zt)}}),ae.style("opacity",function(We){return We.pick?0:1}),H.style("background","rgba(255, 255, 255, 0)");var ue=H.selectAll("."+p.cn.parcoords).data($,o);ue.exit().remove(),ue.enter().append("g").classed(p.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),ue.attr("transform",function(We){return a(We.model.translateX,We.model.translateY)});var ye=ue.selectAll("."+p.cn.parcoordsControlView).data(c,o);ye.enter().append("g").classed(p.cn.parcoordsControlView,!0),ye.attr("transform",function(We){return a(We.model.pad.l,We.model.pad.t)});var ce=ye.selectAll("."+p.cn.yAxis).data(function(We){return We.dimensions},o);ce.enter().append("g").classed(p.cn.yAxis,!0),ye.each(function(We){B(ce,We,ne)}),ae.each(function(We){if(We.viewModel){!We.lineLayer||fe?We.lineLayer=g(this,We):We.lineLayer.update(We),(We.key||We.key===0)&&(We.viewModel[We.key]=We.lineLayer);var qe=!We.context||fe;We.lineLayer.render(We.viewModel.panels,qe)}}),ce.attr("transform",function(We){return a(We.xScale(We.xIndex),0)}),ce.call(u.behavior.drag().origin(function(We){return We}).on("drag",function(We){var qe=We.parent;K.linePickActive(!1),We.x=Math.max(-p.overdrag,Math.min(We.model.width+p.overdrag,u.event.x)),We.canvasX=We.x*We.model.canvasPixelRatio,ce.sort(function(Ue,Ie){return Ue.x-Ie.x}).each(function(Ue,Ie){Ue.xIndex=Ie,Ue.x=We===Ue?Ue.x:Ue.xScale(Ue.xIndex),Ue.canvasX=Ue.x*Ue.model.canvasPixelRatio}),B(ce,qe,ne),ce.filter(function(Ue){return Math.abs(We.xIndex-Ue.xIndex)!==0}).attr("transform",function(Ue){return a(Ue.xScale(Ue.xIndex),0)}),u.select(this).attr("transform",a(We.x,0)),ce.each(function(Ue,Ie,Ve){Ve===We.parent.key&&(qe.dimensions[Ie]=Ue)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!P(qe)),qe.focusLayer.render&&qe.focusLayer.render(qe.panels)}).on("dragend",function(We){var qe=We.parent;We.x=We.xScale(We.xIndex),We.canvasX=We.x*We.model.canvasPixelRatio,B(ce,qe,ne),u.select(this).attr("transform",function(Ue){return a(Ue.x,0)}),qe.contextLayer&&qe.contextLayer.render(qe.panels,!1,!P(qe)),qe.focusLayer&&qe.focusLayer.render(qe.panels),qe.pickLayer&&qe.pickLayer.render(qe.panels,!0),K.linePickActive(!0),fe&&fe.axesMoved&&fe.axesMoved(qe.key,qe.dimensions.map(function(Ue){return Ue.crossfilterDimensionIndex}))})),ce.exit().remove();var me=ce.selectAll("."+p.cn.axisOverlays).data(c,o);me.enter().append("g").classed(p.cn.axisOverlays,!0),me.selectAll("."+p.cn.axis).remove();var xe=me.selectAll("."+p.cn.axis).data(c,o);xe.enter().append("g").classed(p.cn.axis,!0),xe.each(function(We){var qe=We.model.height/We.model.tickDistance,Ue=We.domainScale,Ie=Ue.domain();u.select(this).call(u.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(qe,We.tickFormat).tickValues(We.ordinal?Ie:null).tickFormat(function(Ve){return d.isOrdinal(We)?Ve:Z(We.model.dimensions[We.visibleIndex],Ve)}).scale(Ue)),n.font(xe.selectAll("text"),We.model.tickFont)}),xe.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),xe.selectAll("text").style("text-shadow",r.makeTextShadow(te)).style("cursor","default");var ke=me.selectAll("."+p.cn.axisHeading).data(c,o);ke.enter().append("g").classed(p.cn.axisHeading,!0);var Ae=ke.selectAll("."+p.cn.axisTitle).data(c,o);Ae.enter().append("text").classed(p.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),Ae.text(function(We){return We.label}).each(function(We){var qe=u.select(this);n.font(qe,We.model.labelFont),r.convertToTspans(qe,W)}).attr("transform",function(We){var qe=U(We.model.labelAngle,We.model.labelSide),Ue=p.axisTitleOffset;return(qe.dir>0?"":a(0,2*Ue+We.model.height))+i(qe.degrees)+a(-Ue*qe.dx,-Ue*qe.dy)}).attr("text-anchor",function(We){var qe=U(We.model.labelAngle,We.model.labelSide),Ue=Math.abs(qe.dx),Ie=Math.abs(qe.dy);return 2*Ue>Ie?qe.dir*qe.dx<0?"start":"end":"middle"});var Oe=me.selectAll("."+p.cn.axisExtent).data(c,o);Oe.enter().append("g").classed(p.cn.axisExtent,!0);var He=Oe.selectAll("."+p.cn.axisExtentTop).data(c,o);He.enter().append("g").classed(p.cn.axisExtentTop,!0),He.attr("transform",a(0,-p.axisExtentOffset));var Ge=He.selectAll("."+p.cn.axisExtentTopText).data(c,o);Ge.enter().append("text").classed(p.cn.axisExtentTopText,!0).call(I),Ge.text(function(We){return ee(We,!0)}).each(function(We){n.font(u.select(this),We.model.rangeFont)});var _e=Oe.selectAll("."+p.cn.axisExtentBottom).data(c,o);_e.enter().append("g").classed(p.cn.axisExtentBottom,!0),_e.attr("transform",function(We){return a(0,We.model.height+p.axisExtentOffset)});var Re=_e.selectAll("."+p.cn.axisExtentBottomText).data(c,o);Re.enter().append("text").classed(p.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(I),Re.text(function(We){return ee(We,!1)}).each(function(We){n.font(u.select(this),We.model.rangeFont)}),y.ensureAxisBrush(me,te)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(e,z,N){var u=e("./parcoords"),s=e("../../lib/prepare_regl"),m=e("./helpers").isVisible;function x(i,a,r){var n=a.indexOf(r),f=i.indexOf(n);return f===-1&&(f+=a.length),f}function t(i,a){return function(n,f){return x(i,a,n)-x(i,a,f)}}z.exports=function(a,r){var n=a._fullLayout,f=s(a);if(!!f){var l={},o={},c={},h={},d=n._size;r.forEach(function(b,M){var _=b[0].trace;c[M]=_.index;var T=h[M]=_._fullInput.index;l[M]=a.data[T].dimensions,o[M]=a.data[T].dimensions.slice()});var p=function(b,M,_){var T=o[b][M],w=_.map(function(O){return O.slice()}),v="dimensions["+M+"].constraintrange",L=n._tracePreGUI[a._fullData[c[b]]._fullInput.uid];if(L[v]===void 0){var S=T.constraintrange;L[v]=S||null}var k=a._fullData[c[b]].dimensions[M];w.length?(w.length===1&&(w=w[0]),T.constraintrange=w,k.constraintrange=w.slice(),w=[w]):(delete T.constraintrange,delete k.constraintrange,w=null);var P={};P[v]=w,a.emit("plotly_restyle",[P,[h[b]]])},y=function(b){a.emit("plotly_hover",b)},g=function(b){a.emit("plotly_unhover",b)},A=function(b,M){var _=t(M,o[b].filter(m));l[b].sort(_),o[b].filter(function(T){return!m(T)}).sort(function(T){return o[b].indexOf(T)}).forEach(function(T){l[b].splice(l[b].indexOf(T),1),l[b].splice(o[b].indexOf(T),0,T)}),a.emit("plotly_restyle",[{dimensions:[l[b]]},[h[b]]])};u(a,r,{width:d.w,height:d.h,margin:{t:d.t,r:d.r,b:d.b,l:d.l}},{filterChanged:p,hover:y,unhover:g,axesMoved:A})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(e,z,N){var u=e("../../plots/attributes"),s=e("../../plots/domain").attributes,m=e("../../plots/font_attributes"),x=e("../../components/color/attributes"),t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("../../lib/extend").extendFlat,r=m({editType:"plot",arrayOk:!0,colorEditType:"plot"});z.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:x.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},u.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:t({},{keys:["label","color","value","percent","text"]}),texttemplate:i({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},r,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},r,{}),outsidetextfont:a({},r,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},r,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:s({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},r,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(e,z,N){var u=e("../../plots/plots");N.name="pie",N.plot=function(s,m,x,t){u.plotBasePlot(N.name,s,m,x,t)},N.clean=function(s,m,x,t){u.cleanBasePlot(N.name,s,m,x,t)}},{"../../plots/plots":619}],902:[function(e,z,N){var u=e("fast-isnumeric"),s=e("tinycolor2"),m=e("../../components/color"),x={};function t(n,f){var l=[],o=n._fullLayout,c=o.hiddenlabels||[],h=f.labels,d=f.marker.colors||[],p=f.values,y=f._length,g=f._hasValues&&y,A,b;if(f.dlabel)for(h=new Array(y),A=0;A<y;A++)h[A]=String(f.label0+A*f.dlabel);var M={},_=i(o["_"+f.type+"colormap"]),T=0,w=!1;for(A=0;A<y;A++){var v,L,S;if(g){if(v=p[A],!u(v))continue;v=+v}else v=1;L=h[A],(L===void 0||L==="")&&(L=A),L=String(L);var k=M[L];k===void 0?(M[L]=l.length,S=c.indexOf(L)!==-1,S||(T+=v),l.push({v,label:L,color:_(d[A],L),i:A,pts:[A],hidden:S})):(w=!0,b=l[k],b.v+=v,b.pts.push(A),b.hidden||(T+=v),b.color===!1&&d[A]&&(b.color=_(d[A],L)))}l=l.filter(function(O){return O.v>=0});var P=f.type==="funnelarea"?w:f.sort;return P&&l.sort(function(O,F){return F.v-O.v}),l[0]&&(l[0].vTotal=T),l}function i(n){return function(l,o){return!l||(l=s(l),!l.isValid())?!1:(l=m.addOpacity(l,l.getAlpha()),n[o]||(n[o]=l),l)}}function a(n,f){var l=(f||{}).type;l||(l="pie");var o=n._fullLayout,c=n.calcdata,h=o[l+"colorway"],d=o["_"+l+"colormap"];o["extend"+l+"colors"]&&(h=r(h,x));for(var p=0,y=0;y<c.length;y++){var g=c[y],A=g[0].trace.type;if(A===l)for(var b=0;b<g.length;b++){var M=g[b];M.color===!1&&(d[M.label]?M.color=d[M.label]:(d[M.label]=M.color=h[p%h.length],p++))}}}function r(n,f){var l,o=JSON.stringify(n),c=f[o];if(!c){for(c=n.slice(),l=0;l<n.length;l++)c.push(s(n[l]).lighten(20).toHexString());for(l=0;l<n.length;l++)c.push(s(n[l]).darken(20).toHexString());f[o]=c}return c}z.exports={calc:t,crossTraceCalc:a,makePullColorFn:i,generateExtendedColors:r}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("./attributes"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText;function i(r,n){var f=Array.isArray(r),l=s.isArrayOrTypedArray(n),o=Math.min(f?r.length:1/0,l?n.length:1/0);if(isFinite(o)||(o=0),o&&l){for(var c,h=0;h<o;h++){var d=n[h];if(u(d)&&d>0){c=!0;break}}c||(o=0)}return{hasLabels:f,hasValues:l,len:o}}function a(r,n,f,l){function o(S,k){return s.coerce(r,n,m,S,k)}var c=o("labels"),h=o("values"),d=i(c,h),p=d.len;if(n._hasLabels=d.hasLabels,n._hasValues=d.hasValues,!n._hasLabels&&n._hasValues&&(o("label0"),o("dlabel")),!p){n.visible=!1;return}n._length=p;var y=o("marker.line.width");y&&o("marker.line.color"),o("marker.colors"),o("scalegroup");var g=o("text"),A=o("texttemplate"),b;if(A||(b=o("textinfo",Array.isArray(g)?"text+percent":"percent")),o("hovertext"),o("hovertemplate"),A||b&&b!=="none"){var M=o("textposition");t(r,n,l,o,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1});var _=Array.isArray(M)||M==="auto",T=_||M==="outside";T&&o("automargin"),(M==="inside"||M==="auto"||Array.isArray(M))&&o("insidetextorientation")}x(n,l,o);var w=o("hole"),v=o("title.text");if(v){var L=o("title.position",w?"middle center":"top center");!w&&L==="middle center"&&(n.title.position="top center"),s.coerceFont(o,"title.font",l.font)}o("sort"),o("direction"),o("rotation"),o("pull")}z.exports={handleLabelsAndValues:i,supplyDefaults:a}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(e,z,N){var u=e("../../components/fx/helpers").appendArrayMultiPointValues;z.exports=function(m,x){var t={curveNumber:x.index,pointNumbers:m.pts,data:x._input,fullData:x,label:m.label,color:m.color,value:m.v,percent:m.percent,text:m.text,bbox:m.bbox,v:m.v};return m.pts.length===1&&(t.pointNumber=t.i=m.pts[0]),u(t,x,m.pts),x.type==="funnelarea"&&(delete t.v,delete t.i),t}},{"../../components/fx/helpers":402}],905:[function(e,z,N){var u=e("../../lib");function s(m){return m.indexOf("e")!==-1?m.replace(/[.]?0+e/,"e"):m.indexOf(".")!==-1?m.replace(/[.]?0+$/,""):m}N.formatPiePercent=function(x,t){var i=s((x*100).toPrecision(3));return u.numSeparate(i,t)+"%"},N.formatPieValue=function(x,t){var i=s(x.toPrecision(10));return u.numSeparate(i,t)},N.getFirstFilled=function(x,t){if(!!Array.isArray(x))for(var i=0;i<t.length;i++){var a=x[t[i]];if(a||a===0||a==="")return a}},N.castOption=function(x,t){if(Array.isArray(x))return N.getFirstFilled(x,t);if(x)return x},N.getRotationAngle=function(m){return(m==="auto"?0:m)*Math.PI/180}},{"../../lib":503}],906:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,supplyLayoutDefaults:e("./layout_defaults"),layoutAttributes:e("./layout_attributes"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style"),styleOne:e("./style_one"),moduleType:"trace",name:"pie",basePlotModule:e("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(e,z,N){z.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("hiddenlabels"),i("piecolorway",t.colorway),i("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../plots/plots"),m=e("../../components/fx"),x=e("../../components/color"),t=e("../../components/drawing"),i=e("../../lib"),a=i.strScale,r=i.strTranslate,n=e("../../lib/svg_text_utils"),f=e("../bar/uniform_text"),l=f.recordMinTextSize,o=f.clearMinTextSize,c=e("../bar/constants").TEXTPAD,h=e("./helpers"),d=e("./event_data"),p=e("../../lib").isValidTextValue;function y(se,H){var Y=se._fullLayout,ne=Y._size;o("pie",Y),_(H,se),ee(H,ne);var te=i.makeTraceGroups(Y._pielayer,H,"trace").each(function(K){var $=u.select(this),ae=K[0],ie=ae.trace;W(K),$.attr("stroke-linejoin","round"),$.each(function(){var oe=u.select(this).selectAll("g.slice").data(K);oe.enter().append("g").classed("slice",!0),oe.exit().remove();var ue=[[[],[]],[[],[]]],ye=!1;oe.each(function(Ge,_e){if(Ge.hidden){u.select(this).selectAll("path,g").remove();return}Ge.pointNumber=Ge.i,Ge.curveNumber=ie.index,ue[Ge.pxmid[1]<0?0:1][Ge.pxmid[0]<0?0:1].push(Ge);var Re=ae.cx,We=ae.cy,qe=u.select(this),Ue=qe.selectAll("path.surface").data([Ge]);if(Ue.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),qe.call(A,se,K),ie.pull){var Ie=+h.castOption(ie.pull,Ge.pts)||0;Ie>0&&(Re+=Ie*Ge.pxmid[0],We+=Ie*Ge.pxmid[1])}Ge.cxFinal=Re,Ge.cyFinal=We;function Ve(Lt,Mt,it,ht){var Qe=ht*(Mt[0]-Lt[0]),Ce=ht*(Mt[1]-Lt[1]);return"a"+ht*ae.r+","+ht*ae.r+" 0 "+Ge.largeArc+(it?" 1 ":" 0 ")+Qe+","+Ce}var dt=ie.hole;if(Ge.v===ae.vTotal){var Rt="M"+(Re+Ge.px0[0])+","+(We+Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!0,1)+Ve(Ge.pxmid,Ge.px0,!0,1)+"Z";dt?Ue.attr("d","M"+(Re+dt*Ge.px0[0])+","+(We+dt*Ge.px0[1])+Ve(Ge.px0,Ge.pxmid,!1,dt)+Ve(Ge.pxmid,Ge.px0,!1,dt)+"Z"+Rt):Ue.attr("d",Rt)}else{var Gt=Ve(Ge.px0,Ge.px1,!0,1);if(dt){var kt=1-dt;Ue.attr("d","M"+(Re+dt*Ge.px1[0])+","+(We+dt*Ge.px1[1])+Ve(Ge.px1,Ge.px0,!1,dt)+"l"+kt*Ge.px0[0]+","+kt*Ge.px0[1]+Gt+"Z")}else Ue.attr("d","M"+Re+","+We+"l"+Ge.px0[0]+","+Ge.px0[1]+Gt+"Z")}le(se,Ge,ae);var zt=h.castOption(ie.textposition,Ge.pts),Bt=qe.selectAll("g.slicetext").data(Ge.text&&zt!=="none"?[0]:[]);Bt.enter().append("g").classed("slicetext",!0),Bt.exit().remove(),Bt.each(function(){var Lt=i.ensureSingle(u.select(this),"text","",function(ut){ut.attr("data-notex",1)}),Mt=i.ensureUniformFontSize(se,zt==="outside"?b(ie,Ge,Y.font):M(ie,Ge,Y.font));Lt.text(Ge.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(t.font,Mt).call(n.convertToTspans,se);var it=t.bBox(Lt.node()),ht;if(zt==="outside")ht=F(it,Ge);else if(ht=T(it,Ge,ae),zt==="auto"&&ht.scale<1){var Qe=i.ensureUniformFontSize(se,ie.outsidetextfont);Lt.call(t.font,Qe),it=t.bBox(Lt.node()),ht=F(it,Ge)}var Ce=ht.textPosAngle,Xe=Ce===void 0?Ge.pxmid:J(ae.r,Ce);if(ht.targetX=Re+Xe[0]*ht.rCenter+(ht.x||0),ht.targetY=We+Xe[1]*ht.rCenter+(ht.y||0),fe(ht,it),ht.outside){var rt=ht.targetY;Ge.yLabelMin=rt-it.height/2,Ge.yLabelMid=rt,Ge.yLabelMax=rt+it.height/2,Ge.labelExtraX=0,Ge.labelExtraY=0,ye=!0}ht.fontSize=Mt.size,l(ie.type,ht,Y),K[_e].transform=ht,Lt.attr("transform",i.getTextTransform(ht))})});var ce=u.select(this).selectAll("g.titletext").data(ie.title.text?[0]:[]);if(ce.enter().append("g").classed("titletext",!0),ce.exit().remove(),ce.each(function(){var Ge=i.ensureSingle(u.select(this),"text","",function(We){We.attr("data-notex",1)}),_e=ie.title.text;ie._meta&&(_e=i.templateString(_e,ie._meta)),Ge.text(_e).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(t.font,ie.title.font).call(n.convertToTspans,se);var Re;ie.title.position==="middle center"?Re=I(ae):Re=D(ae,ne),Ge.attr("transform",r(Re.x,Re.y)+a(Math.min(1,Re.scale))+r(Re.tx,Re.ty))}),ye&&Z(ue,ie),g(oe,ie),ye&&ie.automargin){var me=t.bBox($.node()),xe=ie.domain,ke=ne.w*(xe.x[1]-xe.x[0]),Ae=ne.h*(xe.y[1]-xe.y[0]),Oe=(.5*ke-ae.r)/ne.w,He=(.5*Ae-ae.r)/ne.h;s.autoMargin(se,"pie."+ie.uid+".automargin",{xl:xe.x[0]-Oe,xr:xe.x[1]+Oe,yb:xe.y[0]-He,yt:xe.y[1]+He,l:Math.max(ae.cx-ae.r-me.left,0),r:Math.max(me.right-(ae.cx+ae.r),0),b:Math.max(me.bottom-(ae.cy+ae.r),0),t:Math.max(ae.cy-ae.r-me.top,0),pad:5})}})});setTimeout(function(){te.selectAll("tspan").each(function(){var K=u.select(this);K.attr("dy")&&K.attr("dy",K.attr("dy"))})},0)}function g(se,H){se.each(function(Y){var ne=u.select(this);if(!Y.labelExtraX&&!Y.labelExtraY){ne.select("path.textline").remove();return}var te=ne.select("g.slicetext text");Y.transform.targetX+=Y.labelExtraX,Y.transform.targetY+=Y.labelExtraY,te.attr("transform",i.getTextTransform(Y.transform));var K=Y.cxFinal+Y.pxmid[0],$=Y.cyFinal+Y.pxmid[1],ae="M"+K+","+$,ie=(Y.yLabelMax-Y.yLabelMin)*(Y.pxmid[0]<0?-1:1)/4;if(Y.labelExtraX){var oe=Y.labelExtraX*Y.pxmid[1]/Y.pxmid[0],ue=Y.yLabelMid+Y.labelExtraY-(Y.cyFinal+Y.pxmid[1]);Math.abs(oe)>Math.abs(ue)?ae+="l"+ue*Y.pxmid[0]/Y.pxmid[1]+","+ue+"H"+(K+Y.labelExtraX+ie):ae+="l"+Y.labelExtraX+","+oe+"v"+(ue-oe)+"h"+ie}else ae+="V"+(Y.yLabelMid+Y.labelExtraY)+"h"+ie;i.ensureSingle(ne,"path","textline").call(x.stroke,H.outsidetextfont.color).attr({"stroke-width":Math.min(2,H.outsidetextfont.size/8),d:ae,fill:"none"})})}function A(se,H,Y){var ne=Y[0],te=ne.cx,K=ne.cy,$=ne.trace,ae=$.type==="funnelarea";"_hasHoverLabel"in $||($._hasHoverLabel=!1),"_hasHoverEvent"in $||($._hasHoverEvent=!1),se.on("mouseover",function(ie){var oe=H._fullLayout,ue=H._fullData[$.index];if(!(H._dragging||oe.hovermode===!1)){var ye=ue.hoverinfo;if(Array.isArray(ye)&&(ye=m.castHoverinfo({hoverinfo:[h.castOption(ye,ie.pts)],_module:$._module},oe,0)),ye==="all"&&(ye="label+text+value+percent+name"),ue.hovertemplate||ye!=="none"&&ye!=="skip"&&ye){var ce=ie.rInscribed||0,me=te+ie.pxmid[0]*(1-ce),xe=K+ie.pxmid[1]*(1-ce),ke=oe.separators,Ae=[];if(ye&&ye.indexOf("label")!==-1&&Ae.push(ie.label),ie.text=h.castOption(ue.hovertext||ue.text,ie.pts),ye&&ye.indexOf("text")!==-1){var Oe=ie.text;i.isValidTextValue(Oe)&&Ae.push(Oe)}ie.value=ie.v,ie.valueLabel=h.formatPieValue(ie.v,ke),ye&&ye.indexOf("value")!==-1&&Ae.push(ie.valueLabel),ie.percent=ie.v/ne.vTotal,ie.percentLabel=h.formatPiePercent(ie.percent,ke),ye&&ye.indexOf("percent")!==-1&&Ae.push(ie.percentLabel);var He=ue.hoverlabel,Ge=He.font,_e=[];m.loneHover({trace:$,x0:me-ce*ne.r,x1:me+ce*ne.r,y:xe,_x0:ae?te+ie.TL[0]:me-ce*ne.r,_x1:ae?te+ie.TR[0]:me+ce*ne.r,_y0:ae?K+ie.TL[1]:xe-ce*ne.r,_y1:ae?K+ie.BL[1]:xe+ce*ne.r,text:Ae.join("<br>"),name:ue.hovertemplate||ye.indexOf("name")!==-1?ue.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:h.castOption(He.bgcolor,ie.pts)||ie.color,borderColor:h.castOption(He.bordercolor,ie.pts),fontFamily:h.castOption(Ge.family,ie.pts),fontSize:h.castOption(Ge.size,ie.pts),fontColor:h.castOption(Ge.color,ie.pts),nameLength:h.castOption(He.namelength,ie.pts),textAlign:h.castOption(He.align,ie.pts),hovertemplate:h.castOption(ue.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[d(ie,ue)]},{container:oe._hoverlayer.node(),outerContainer:oe._paper.node(),gd:H,inOut_bbox:_e}),ie.bbox=_e[0],$._hasHoverLabel=!0}$._hasHoverEvent=!0,H.emit("plotly_hover",{points:[d(ie,ue)],event:u.event})}}),se.on("mouseout",function(ie){var oe=H._fullLayout,ue=H._fullData[$.index],ye=u.select(this).datum();$._hasHoverEvent&&(ie.originalEvent=u.event,H.emit("plotly_unhover",{points:[d(ye,ue)],event:u.event}),$._hasHoverEvent=!1),$._hasHoverLabel&&(m.loneUnhover(oe._hoverlayer.node()),$._hasHoverLabel=!1)}),se.on("click",function(ie){var oe=H._fullLayout,ue=H._fullData[$.index];H._dragging||oe.hovermode===!1||(H._hoverdata=[d(ie,ue)],m.click(H,u.event))})}function b(se,H,Y){var ne=h.castOption(se.outsidetextfont.color,H.pts)||h.castOption(se.textfont.color,H.pts)||Y.color,te=h.castOption(se.outsidetextfont.family,H.pts)||h.castOption(se.textfont.family,H.pts)||Y.family,K=h.castOption(se.outsidetextfont.size,H.pts)||h.castOption(se.textfont.size,H.pts)||Y.size;return{color:ne,family:te,size:K}}function M(se,H,Y){var ne=h.castOption(se.insidetextfont.color,H.pts);!ne&&se._input.textfont&&(ne=h.castOption(se._input.textfont.color,H.pts));var te=h.castOption(se.insidetextfont.family,H.pts)||h.castOption(se.textfont.family,H.pts)||Y.family,K=h.castOption(se.insidetextfont.size,H.pts)||h.castOption(se.textfont.size,H.pts)||Y.size;return{color:ne||x.contrast(H.color),family:te,size:K}}function _(se,H){for(var Y,ne,te=0;te<se.length;te++)if(Y=se[te][0],ne=Y.trace,ne.title.text){var K=ne.title.text;ne._meta&&(K=i.templateString(K,ne._meta));var $=t.tester.append("text").attr("data-notex",1).text(K).call(t.font,ne.title.font).call(n.convertToTspans,H),ae=t.bBox($.node(),!0);Y.titleBox={width:ae.width,height:ae.height},$.remove()}}function T(se,H,Y){var ne=Y.r||H.rpx1,te=H.rInscribed,K=H.startangle===H.stopangle;if(K)return{rCenter:1-te,scale:0,rotate:0,textPosAngle:0};var $=H.ring,ae=$===1&&Math.abs(H.startangle-H.stopangle)===Math.PI*2,ie=H.halfangle,oe=H.midangle,ue=Y.trace.insidetextorientation,ye=ue==="horizontal",ce=ue==="tangential",me=ue==="radial",xe=ue==="auto",ke=[],Ae;if(!xe){var Oe=function(Ue,Ie){if(w(H,Ue)){var Ve=Math.abs(Ue-H.startangle),dt=Math.abs(Ue-H.stopangle),Rt=Ve<dt?Ve:dt;Ie==="tan"?Ae=L(se,ne,$,Rt,0):Ae=v(se,ne,$,Rt,Math.PI/2),Ae.textPosAngle=Ue,ke.push(Ae)}},He;if(ye||ce){for(He=4;He>=-4;He-=2)Oe(Math.PI*He,"tan");for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+1),"tan")}if(ye||me){for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+1.5),"rad");for(He=4;He>=-4;He-=2)Oe(Math.PI*(He+.5),"rad")}}if(ae||xe||ye){var Ge=Math.sqrt(se.width*se.width+se.height*se.height);if(Ae={scale:te*ne*2/Ge,rCenter:1-te,rotate:0},Ae.textPosAngle=(H.startangle+H.stopangle)/2,Ae.scale>=1)return Ae;ke.push(Ae)}(xe||me)&&(Ae=v(se,ne,$,ie,oe),Ae.textPosAngle=(H.startangle+H.stopangle)/2,ke.push(Ae)),(xe||ce)&&(Ae=L(se,ne,$,ie,oe),Ae.textPosAngle=(H.startangle+H.stopangle)/2,ke.push(Ae));for(var _e=0,Re=0,We=0;We<ke.length;We++){var qe=ke[We].scale;if(Re<qe&&(Re=qe,_e=We),!xe&&Re>=1)break}return ke[_e]}function w(se,H){var Y=se.startangle,ne=se.stopangle;return Y>H&&H>ne||Y<H&&H<ne}function v(se,H,Y,ne,te){H=Math.max(0,H-2*c);var K=se.width/se.height,$=P(K,ne,H,Y);return{scale:$*2/se.height,rCenter:S(K,$/H),rotate:k(te)}}function L(se,H,Y,ne,te){H=Math.max(0,H-2*c);var K=se.height/se.width,$=P(K,ne,H,Y);return{scale:$*2/se.width,rCenter:S(K,$/H),rotate:k(te+Math.PI/2)}}function S(se,H){return Math.cos(H)-se*H}function k(se){return(180/Math.PI*se+720)%180-90}function P(se,H,Y,ne){var te=se+1/(2*Math.tan(H));return Y*Math.min(1/(Math.sqrt(te*te+.5)+te),ne/(Math.sqrt(se*se+ne/2)+se))}function O(se,H){return se.v===H.vTotal&&!H.trace.hole?1:Math.min(1/(1+1/Math.sin(se.halfangle)),se.ring/2)}function F(se,H){var Y=H.pxmid[0],ne=H.pxmid[1],te=se.width/2,K=se.height/2;return Y<0&&(te*=-1),ne<0&&(K*=-1),{scale:1,rCenter:1,rotate:0,x:te+Math.abs(K)*(te>0?1:-1)/2,y:K/(1+Y*Y/(ne*ne)),outside:!0}}function I(se){var H=Math.sqrt(se.titleBox.width*se.titleBox.width+se.titleBox.height*se.titleBox.height);return{x:se.cx,y:se.cy,scale:se.trace.hole*se.r*2/H,tx:0,ty:-se.titleBox.height/2+se.trace.title.font.size}}function D(se,H){var Y=1,ne=1,te,K=se.trace,$={x:se.cx,y:se.cy},ae={tx:0,ty:0};ae.ty+=K.title.font.size,te=j(K),K.title.position.indexOf("top")!==-1?($.y-=(1+te)*se.r,ae.ty-=se.titleBox.height):K.title.position.indexOf("bottom")!==-1&&($.y+=(1+te)*se.r);var ie=U(se.r,se.trace.aspectratio),oe=H.w*(K.domain.x[1]-K.domain.x[0])/2;return K.title.position.indexOf("left")!==-1?(oe=oe+ie,$.x-=(1+te)*ie,ae.tx+=se.titleBox.width/2):K.title.position.indexOf("center")!==-1?oe*=2:K.title.position.indexOf("right")!==-1&&(oe=oe+ie,$.x+=(1+te)*ie,ae.tx-=se.titleBox.width/2),Y=oe/se.titleBox.width,ne=B(se,H)/se.titleBox.height,{x:$.x,y:$.y,scale:Math.min(Y,ne),tx:ae.tx,ty:ae.ty}}function U(se,H){return se/(H===void 0?1:H)}function B(se,H){var Y=se.trace,ne=H.h*(Y.domain.y[1]-Y.domain.y[0]);return Math.min(se.titleBox.height,ne/2)}function j(se){var H=se.pull;if(!H)return 0;var Y;if(Array.isArray(H))for(H=0,Y=0;Y<se.pull.length;Y++)se.pull[Y]>H&&(H=se.pull[Y]);return H}function Z(se,H){var Y,ne,te,K,$,ae,ie,oe,ue,ye,ce,me,xe;function ke(Ge,_e){return Ge.pxmid[1]-_e.pxmid[1]}function Ae(Ge,_e){return _e.pxmid[1]-Ge.pxmid[1]}function Oe(Ge,_e){_e||(_e={});var Re=_e.labelExtraY+(ne?_e.yLabelMax:_e.yLabelMin),We=ne?Ge.yLabelMin:Ge.yLabelMax,qe=ne?Ge.yLabelMax:Ge.yLabelMin,Ue=Ge.cyFinal+$(Ge.px0[1],Ge.px1[1]),Ie=Re-We,Ve,dt,Rt,Gt,kt,zt;if(Ie*ie>0&&(Ge.labelExtraY=Ie),!!Array.isArray(H.pull))for(dt=0;dt<ye.length;dt++)Rt=ye[dt],!(Rt===Ge||(h.castOption(H.pull,Ge.pts)||0)>=(h.castOption(H.pull,Rt.pts)||0))&&((Ge.pxmid[1]-Rt.pxmid[1])*ie>0?(Gt=Rt.cyFinal+$(Rt.px0[1],Rt.px1[1]),Ie=Gt-We-Ge.labelExtraY,Ie*ie>0&&(Ge.labelExtraY+=Ie)):(qe+Ge.labelExtraY-Ue)*ie>0&&(Ve=3*ae*Math.abs(dt-ye.indexOf(Ge)),kt=Rt.cxFinal+K(Rt.px0[0],Rt.px1[0]),zt=kt+Ve-(Ge.cxFinal+Ge.pxmid[0])-Ge.labelExtraX,zt*ae>0&&(Ge.labelExtraX+=zt)))}for(ne=0;ne<2;ne++)for(te=ne?ke:Ae,$=ne?Math.max:Math.min,ie=ne?1:-1,Y=0;Y<2;Y++){for(K=Y?Math.max:Math.min,ae=Y?1:-1,oe=se[ne][Y],oe.sort(te),ue=se[1-ne][Y],ye=ue.concat(oe),me=[],ce=0;ce<oe.length;ce++)oe[ce].yLabelMid!==void 0&&me.push(oe[ce]);for(xe=!1,ce=0;ne&&ce<ue.length;ce++)if(ue[ce].yLabelMid!==void 0){xe=ue[ce];break}for(ce=0;ce<me.length;ce++){var He=ce&&me[ce-1];xe&&!ce&&(He=xe),Oe(me[ce],He)}}}function ee(se,H){for(var Y=[],ne=0;ne<se.length;ne++){var te=se[ne][0],K=te.trace,$=K.domain,ae=H.w*($.x[1]-$.x[0]),ie=H.h*($.y[1]-$.y[0]);K.title.text&&K.title.position!=="middle center"&&(ie-=B(te,H));var oe=ae/2,ue=ie/2;K.type==="funnelarea"&&!K.scalegroup&&(ue/=K.aspectratio),te.r=Math.min(oe,ue)/(1+j(K)),te.cx=H.l+H.w*(K.domain.x[1]+K.domain.x[0])/2,te.cy=H.t+H.h*(1-K.domain.y[0])-ie/2,K.title.text&&K.title.position.indexOf("bottom")!==-1&&(te.cy-=B(te,H)),K.scalegroup&&Y.indexOf(K.scalegroup)===-1&&Y.push(K.scalegroup)}q(se,Y)}function q(se,H){for(var Y,ne,te,K=0;K<H.length;K++){var $=1/0,ae=H[K];for(ne=0;ne<se.length;ne++)if(Y=se[ne][0],te=Y.trace,te.scalegroup===ae){var ie;if(te.type==="pie")ie=Y.r*Y.r;else if(te.type==="funnelarea"){var oe,ue;te.aspectratio>1?(oe=Y.r,ue=oe/te.aspectratio):(ue=Y.r,oe=ue*te.aspectratio),oe*=(1+te.baseratio)/2,ie=oe*ue}$=Math.min($,ie/Y.vTotal)}for(ne=0;ne<se.length;ne++)if(Y=se[ne][0],te=Y.trace,te.scalegroup===ae){var ye=$*Y.vTotal;te.type==="funnelarea"&&(ye/=(1+te.baseratio)/2,ye/=te.aspectratio),Y.r=Math.sqrt(ye)}}}function W(se){var H=se[0],Y=H.r,ne=H.trace,te=h.getRotationAngle(ne.rotation),K=2*Math.PI/H.vTotal,$="px0",ae="px1",ie,oe,ue;if(ne.direction==="counterclockwise"){for(ie=0;ie<se.length&&se[ie].hidden;ie++);if(ie===se.length)return;te+=K*se[ie].v,K*=-1,$="px1",ae="px0"}for(ue=J(Y,te),ie=0;ie<se.length;ie++)oe=se[ie],!oe.hidden&&(oe[$]=ue,oe.startangle=te,te+=K*oe.v/2,oe.pxmid=J(Y,te),oe.midangle=te,te+=K*oe.v/2,ue=J(Y,te),oe.stopangle=te,oe[ae]=ue,oe.largeArc=oe.v>H.vTotal/2?1:0,oe.halfangle=Math.PI*Math.min(oe.v/H.vTotal,.5),oe.ring=1-ne.hole,oe.rInscribed=O(oe,H))}function J(se,H){return[se*Math.sin(H),-se*Math.cos(H)]}function le(se,H,Y){var ne=se._fullLayout,te=Y.trace,K=te.texttemplate,$=te.textinfo;if(!K&&$&&$!=="none"){var ae=$.split("+"),ie=function(_e){return ae.indexOf(_e)!==-1},oe=ie("label"),ue=ie("text"),ye=ie("value"),ce=ie("percent"),me=ne.separators,xe;if(xe=oe?[H.label]:[],ue){var ke=h.getFirstFilled(te.text,H.pts);p(ke)&&xe.push(ke)}ye&&xe.push(h.formatPieValue(H.v,me)),ce&&xe.push(h.formatPiePercent(H.v/Y.vTotal,me)),H.text=xe.join("<br>")}function Ae(_e){return{label:_e.label,value:_e.v,valueLabel:h.formatPieValue(_e.v,ne.separators),percent:_e.v/Y.vTotal,percentLabel:h.formatPiePercent(_e.v/Y.vTotal,ne.separators),color:_e.color,text:_e.text,customdata:i.castOption(te,_e.i,"customdata")}}if(K){var Oe=i.castOption(te,H.i,"texttemplate");if(!Oe)H.text="";else{var He=Ae(H),Ge=h.getFirstFilled(te.text,H.pts);(p(Ge)||Ge==="")&&(He.text=Ge),H.text=i.texttemplateString(Oe,He,se._fullLayout._d3locale,He,te._meta||{})}}}function fe(se,H){var Y=se.rotate*Math.PI/180,ne=Math.cos(Y),te=Math.sin(Y),K=(H.left+H.right)/2,$=(H.top+H.bottom)/2;se.textX=K*ne-$*te,se.textY=K*te+$*ne,se.noCenter=!0}z.exports={plot:y,formatSliceLabel:le,transformInsideText:T,determineInsideTextFont:M,positionTitleOutside:D,prerenderTitles:_,layoutAreas:ee,attachFxHandlers:A,computeTransform:fe}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(e,z,N){var u=e("@plotly/d3"),s=e("./style_one"),m=e("../bar/uniform_text").resizeText;z.exports=function(t){var i=t._fullLayout._pielayer.selectAll(".trace");m(t,i,"pie"),i.each(function(a){var r=a[0],n=r.trace,f=u.select(this);f.style({opacity:n.opacity}),f.selectAll("path.surface").each(function(l){u.select(this).call(s,l,n)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(e,z,N){var u=e("../../components/color"),s=e("./helpers").castOption;z.exports=function(x,t,i){var a=i.marker.line,r=s(a.color,t.pts)||u.defaultLine,n=s(a.width,t.pts)||0;x.style("stroke-width",n).call(u.fill,t.color).call(u.stroke,r)}},{"../../components/color":366,"./helpers":905}],912:[function(e,z,N){var u=e("../scatter/attributes");z.exports={x:u.x,y:u.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:u.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(e,z,N){var u=e("../../../stackgl_modules").gl_pointcloud2d,s=e("../../lib/str2rgbarray"),m=e("../../plots/cartesian/autorange").findExtremes,x=e("../scatter/get_trace_color");function t(r,n){this.scene=r,this.uid=n,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=u(r.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var i=t.prototype;i.handlePick=function(r){var n=this.idToIndex[r.pointId];return{trace:this,dataCoord:r.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[n*2],this.pickXYData[n*2+1]]:[this.pickXData[n],this.pickYData[n]],textLabel:Array.isArray(this.textLabels)?this.textLabels[n]:this.textLabels,color:this.color,name:this.name,pointIndex:n,hoverinfo:this.hoverinfo}},i.update=function(r){this.index=r.index,this.textLabels=r.text,this.name=r.name,this.hoverinfo=r.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(r),this.color=x(r,{})},i.updateFast=function(r){var n=this.xData=this.pickXData=r.x,f=this.yData=this.pickYData=r.y,l=this.pickXYData=r.xy,o=r.xbounds&&r.ybounds,c=r.indices,h,d,p,y=this.bounds,g,A,b;if(l){if(p=l,h=l.length>>>1,o)y[0]=r.xbounds[0],y[2]=r.xbounds[1],y[1]=r.ybounds[0],y[3]=r.ybounds[1];else for(b=0;b<h;b++)g=p[b*2],A=p[b*2+1],g<y[0]&&(y[0]=g),g>y[2]&&(y[2]=g),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);if(c)d=c;else for(d=new Int32Array(h),b=0;b<h;b++)d[b]=b}else for(h=n.length,p=new Float32Array(2*h),d=new Int32Array(h),b=0;b<h;b++)g=n[b],A=f[b],d[b]=b,p[b*2]=g,p[b*2+1]=A,g<y[0]&&(y[0]=g),g>y[2]&&(y[2]=g),A<y[1]&&(y[1]=A),A>y[3]&&(y[3]=A);this.idToIndex=d,this.pointcloudOptions.idToIndex=d,this.pointcloudOptions.positions=p;var M=s(r.marker.color),_=s(r.marker.border.color),T=r.opacity*r.marker.opacity;M[3]*=T,this.pointcloudOptions.color=M;var w=r.marker.blend;if(w===null){var v=100;w=n.length<v||f.length<v}this.pointcloudOptions.blend=w,_[3]*=T,this.pointcloudOptions.borderColor=_;var L=r.marker.sizemin,S=Math.max(r.marker.sizemax,r.marker.sizemin);this.pointcloudOptions.sizeMin=L,this.pointcloudOptions.sizeMax=S,this.pointcloudOptions.areaRatio=r.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var k=this.scene.xaxis,P=this.scene.yaxis,O=S/2||.5;r._extremes[k._id]=m(k,[y[0],y[2]],{ppad:O}),r._extremes[P._id]=m(P,[y[1],y[3]],{ppad:O})},i.dispose=function(){this.pointcloud.dispose()};function a(r,n){var f=new t(r,n.uid);return f.update(n),f}z.exports=a},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(e,z,N){var u=e("../../lib"),s=e("./attributes");z.exports=function(x,t,i){function a(r,n){return u.coerce(x,t,s,r,n)}a("x"),a("y"),a("xbounds"),a("ybounds"),x.xy&&x.xy instanceof Float32Array&&(t.xy=x.xy),x.indices&&x.indices instanceof Int32Array&&(t.indices=x.indices),a("text"),a("marker.color",i),a("marker.opacity"),a("marker.blend"),a("marker.sizemin"),a("marker.sizemax"),a("marker.border.color",i),a("marker.border.arearatio"),t._length=null}},{"../../lib":503,"./attributes":912}],915:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../scatter3d/calc"),plot:e("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:e("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(e,z,N){var u=e("../../plots/font_attributes"),s=e("../../plots/attributes"),m=e("../../components/color/attributes"),x=e("../../components/fx/attributes"),t=e("../../plots/domain").attributes,i=e("../../plots/template_attributes").hovertemplateAttrs,a=e("../../components/colorscale/attributes"),r=e("../../plot_api/plot_template").templatedArray,n=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,f=e("../../lib/extend").extendFlat,l=e("../../plot_api/edit_types").overrideAll,o=z.exports=l({hoverinfo:f({},s.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:x.hoverlabel,domain:t({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:n("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:u({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:i({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:m.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:x.hoverlabel,hovertemplate:i({},{keys:["value","label"]}),colorscales:r("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:f(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested");o.transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(e,z,N){var u=e("../../plot_api/edit_types").overrideAll,s=e("../../plots/get_data").getModuleCalcData,m=e("./plot"),x=e("../../components/fx/layout_attributes"),t=e("../../lib/setcursor"),i=e("../../components/dragelement"),a=e("../../plots/cartesian/select").prepSelect,r=e("../../lib"),n=e("../../registry"),f="sankey";N.name=f,N.baseLayoutAttrOverrides=u({hoverlabel:x.hoverlabel},"plot","nested"),N.plot=function(o){var c=s(o.calcdata,f)[0];m(o,c),N.updateFx(o)},N.clean=function(o,c,h,d){var p=d._has&&d._has(f),y=c._has&&c._has(f);p&&!y&&(d._paperdiv.selectAll(".sankey").remove(),d._paperdiv.selectAll(".bgsankey").remove())},N.updateFx=function(o){for(var c=0;c<o._fullData.length;c++)l(o,c)};function l(o,c){var h=o._fullData[c],d=o._fullLayout,p=d.dragmode,y=d.dragmode==="pan"?"move":"crosshair",g=h._bgRect;if(!(p==="pan"||p==="zoom")){t(g,y);var A={_id:"x",c2p:r.identity,_offset:h._sankey.translateX,_length:h._sankey.width},b={_id:"y",c2p:r.identity,_offset:h._sankey.translateY,_length:h._sankey.height},M={gd:o,element:g.node(),plotinfo:{id:c,xaxis:A,yaxis:b,fillRangeItems:r.noop},subplot:c,xaxes:[A],yaxes:[b],doneFnCompleted:function(_){var T=o._fullData[c],w,v=T.node.groups.slice(),L=[];function S(F){for(var I=T._sankey.graph.nodes,D=0;D<I.length;D++)if(I[D].pointNumber===F)return I[D]}for(var k=0;k<_.length;k++){var P=S(_[k].pointNumber);if(!!P)if(P.group){for(var O=0;O<P.childrenNodes.length;O++)L.push(P.childrenNodes[O].pointNumber);v[P.pointNumber-T.node._count]=!1}else L.push(P.pointNumber)}w=v.filter(Boolean).concat([L]),n.call("_guiRestyle",o,{"node.groups":[w]},c)}};M.prepFn=function(_,T,w){a(_,T,w,M,p)},i.init(M)}}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(e,z,N){var u=e("strongly-connected-components"),s=e("../../lib"),m=e("../../lib/gup").wrap,x=s.isArrayOrTypedArray,t=s.isIndex,i=e("../../components/colorscale");function a(n){var f=n.node,l=n.link,o=[],c=x(l.color),h=x(l.customdata),d={},p={},y=l.colorscales.length,g;for(g=0;g<y;g++){var A=l.colorscales[g],b=i.extractScale(A,{cLetter:"c"}),M=i.makeColorScaleFunc(b);p[A.label]=M}var _=0;for(g=0;g<l.value.length;g++)l.source[g]>_&&(_=l.source[g]),l.target[g]>_&&(_=l.target[g]);var T=_+1;n.node._count=T;var w,v=n.node.groups,L={};for(g=0;g<v.length;g++){var S=v[g];for(w=0;w<S.length;w++){var k=S[w],P=T+g;L.hasOwnProperty(k)?s.warn("Node "+k+" is already part of a group."):L[k]=P}}var O={source:[],target:[]};for(g=0;g<l.value.length;g++){var F=l.value[g],I=l.source[g],D=l.target[g];if(!!(F>0&&t(I,T)&&t(D,T))&&!(L.hasOwnProperty(I)&&L.hasOwnProperty(D)&&L[I]===L[D])){L.hasOwnProperty(D)&&(D=L[D]),L.hasOwnProperty(I)&&(I=L[I]),I=+I,D=+D,d[I]=d[D]=!0;var U="";l.label&&l.label[g]&&(U=l.label[g]);var B=null;U&&p.hasOwnProperty(U)&&(B=p[U]),o.push({pointNumber:g,label:U,color:c?l.color[g]:l.color,customdata:h?l.customdata[g]:l.customdata,concentrationscale:B,source:I,target:D,value:+F}),O.source.push(I),O.target.push(D)}}var j=T+v.length,Z=x(f.color),ee=x(f.customdata),q=[];for(g=0;g<j;g++)if(!!d[g]){var W=f.label[g];q.push({group:g>T-1,childrenNodes:[],pointNumber:g,label:W,color:Z?f.color[g]:f.color,customdata:ee?f.customdata[g]:f.customdata})}var J=!1;return r(j,O.source,O.target)&&(J=!0),{circular:J,links:o,nodes:q,groups:v,groupLookup:L}}function r(n,f,l){for(var o=s.init2dArray(n,0),c=0;c<Math.min(f.length,l.length);c++)if(s.isIndex(f[c],n)&&s.isIndex(l[c],n)){if(f[c]===l[c])return!0;o[f[c]].push(l[c])}var h=u(o);return h.components.some(function(d){return d.length>1})}z.exports=function(f,l){var o=a(l);return m({circular:o.circular,_nodes:o.nodes,_links:o.links,_groups:o.groups,_groupLookup:o.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(e,z,N){z.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../../components/color"),x=e("tinycolor2"),t=e("../../plots/domain").defaults,i=e("../../components/fx/hoverlabel_defaults"),a=e("../../plot_api/plot_template"),r=e("../../plots/array_container_defaults");z.exports=function(l,o,c,h){function d(S,k){return u.coerce(l,o,s,S,k)}var p=u.extendDeep(h.hoverlabel,l.hoverlabel),y=l.node,g=a.newContainer(o,"node");function A(S,k){return u.coerce(y,g,s.node,S,k)}A("label"),A("groups"),A("x"),A("y"),A("pad"),A("thickness"),A("line.color"),A("line.width"),A("hoverinfo",l.hoverinfo),i(y,g,A,p),A("hovertemplate");var b=h.colorway,M=function(S){return b[S%b.length]};A("color",g.label.map(function(S,k){return m.addOpacity(M(k),.8)})),A("customdata");var _=l.link||{},T=a.newContainer(o,"link");function w(S,k){return u.coerce(_,T,s.link,S,k)}w("label"),w("source"),w("target"),w("value"),w("line.color"),w("line.width"),w("hoverinfo",l.hoverinfo),i(_,T,w,p),w("hovertemplate");var v=x(h.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";w("color",u.repeat(v,T.value.length)),w("customdata"),r(_,T,{name:"colorscales",handleItemDefaults:n}),t(o,h,d),d("orientation"),d("valueformat"),d("valuesuffix");var L;g.x.length&&g.y.length&&(L="freeform"),d("arrangement",L),u.coerceFont(d,"textfont",u.extendFlat({},h.font)),o._length=null};function n(f,l){function o(c,h){return u.coerce(f,l,s.link.colorscales,c,h)}o("label"),o("cmin"),o("cmax"),o("colorscale")}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"sankey",basePlotModule:e("./base_plot"),selectPoints:e("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=s.numberFormat,x=e("./render"),t=e("../../components/fx"),i=e("../../components/color"),a=e("./constants").cn,r=s._;function n(b){return b!==""}function f(b,M){return b.filter(function(_){return _.key===M.traceId})}function l(b,M){u.select(b).select("path").style("fill-opacity",M),u.select(b).select("rect").style("fill-opacity",M)}function o(b){u.select(b).select("text.name").style("fill","black")}function c(b){return function(M){return b.node.sourceLinks.indexOf(M.link)!==-1||b.node.targetLinks.indexOf(M.link)!==-1}}function h(b){return function(M){return M.node.sourceLinks.indexOf(b.link)!==-1||M.node.targetLinks.indexOf(b.link)!==-1}}function d(b,M,_){M&&_&&f(_,M).selectAll("."+a.sankeyLink).filter(c(M)).call(y.bind(0,M,_,!1))}function p(b,M,_){M&&_&&f(_,M).selectAll("."+a.sankeyLink).filter(c(M)).call(g.bind(0,M,_,!1))}function y(b,M,_,T){var w=T.datum().link.label;T.style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),w&&f(M,b).selectAll("."+a.sankeyLink).filter(function(v){return v.link.label===w}).style("fill-opacity",function(v){if(!v.link.concentrationscale)return .4}),_&&f(M,b).selectAll("."+a.sankeyNode).filter(h(b)).call(d)}function g(b,M,_,T){var w=T.datum().link.label;T.style("fill-opacity",function(v){return v.tinyColorAlpha}),w&&f(M,b).selectAll("."+a.sankeyLink).filter(function(v){return v.link.label===w}).style("fill-opacity",function(v){return v.tinyColorAlpha}),_&&f(M,b).selectAll(a.sankeyNode).filter(h(b)).call(p)}function A(b,M){var _=b.hoverlabel||{},T=s.nestedProperty(_,M).get();return Array.isArray(T)?!1:T}z.exports=function(M,_){for(var T=M._fullLayout,w=T._paper,v=T._size,L=0;L<M._fullData.length;L++)if(!!M._fullData[L].visible&&M._fullData[L].type===a.sankey&&!M._fullData[L]._viewInitial){var S=M._fullData[L].node;M._fullData[L]._viewInitial={node:{groups:S.groups.slice(),x:S.x.slice(),y:S.y.slice()}}}var k=function(J,le){var fe=le.link;fe.originalEvent=u.event,M._hoverdata=[fe],t.click(M,{target:!0})},P=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(y.bind(0,le,fe,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,M.emit("plotly_hover",{event:u.event,points:[le.link]})))},O=r(M,"source:")+" ",F=r(M,"target:")+" ",I=r(M,"concentration:")+" ",D=r(M,"incoming flow count:")+" ",U=r(M,"outgoing flow count:")+" ",B=function(J,le){if(M._fullLayout.hovermode===!1)return;var fe=le.link.trace.link;if(fe.hoverinfo==="none"||fe.hoverinfo==="skip")return;var se=[];function H(ie){var oe,ue;ie.circular?(oe=(ie.circularPathData.leftInnerExtent+ie.circularPathData.rightInnerExtent)/2,ue=ie.circularPathData.verticalFullExtent):(oe=(ie.source.x1+ie.target.x0)/2,ue=(ie.y0+ie.y1)/2);var ye=[oe,ue];return ie.trace.orientation==="v"&&ye.reverse(),ye[0]+=le.parent.translateX,ye[1]+=le.parent.translateY,ye}for(var Y=0,ne=0;ne<le.flow.links.length;ne++){var te=le.flow.links[ne];if(!(M._fullLayout.hovermode==="closest"&&le.link.pointNumber!==te.pointNumber)){le.link.pointNumber===te.pointNumber&&(Y=ne),te.fullData=te.trace,fe=le.link.trace.link;var K=H(te),$={valueLabel:m(le.valueFormat)(te.value)+le.valueSuffix};se.push({x:K[0],y:K[1],name:$.valueLabel,text:[te.label||"",O+te.source.label,F+te.target.label,te.concentrationscale?I+m("%0.2f")(te.flow.labelConcentration):""].filter(n).join("<br>"),color:A(fe,"bgcolor")||i.addOpacity(te.color,1),borderColor:A(fe,"bordercolor"),fontFamily:A(fe,"font.family"),fontSize:A(fe,"font.size"),fontColor:A(fe,"font.color"),nameLength:A(fe,"namelength"),textAlign:A(fe,"align"),idealAlign:u.event.x<K[0]?"right":"left",hovertemplate:fe.hovertemplate,hovertemplateLabels:$,eventData:[te]})}}var ae=t.loneHover(se,{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M,anchorIndex:Y});ae.each(function(){var ie=this;le.link.concentrationscale||l(ie,.65),o(ie)})},j=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(g.bind(0,le,fe,!0)),le.link.trace.link.hoverinfo!=="skip"&&(le.link.fullData=le.link.trace,M.emit("plotly_unhover",{event:u.event,points:[le.link]})),t.loneUnhover(T._hoverlayer.node()))},Z=function(J,le,fe){var se=le.node;se.originalEvent=u.event,M._hoverdata=[se],u.select(J).call(p,le,fe),t.click(M,{target:!0})},ee=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(d,le,fe),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,M.emit("plotly_hover",{event:u.event,points:[le.node]})))},q=function(J,le){if(M._fullLayout.hovermode!==!1){var fe=le.node.trace.node;if(!(fe.hoverinfo==="none"||fe.hoverinfo==="skip")){var se=u.select(J).select("."+a.nodeRect),H=M._fullLayout._paperdiv.node().getBoundingClientRect(),Y=se.node().getBoundingClientRect(),ne=Y.left-2-H.left,te=Y.right+2-H.left,K=Y.top+Y.height/4-H.top,$={valueLabel:m(le.valueFormat)(le.node.value)+le.valueSuffix};le.node.fullData=le.node.trace,M._fullLayout._calcInverseTransform(M);var ae=M._fullLayout._invScaleX,ie=M._fullLayout._invScaleY,oe=t.loneHover({x0:ae*ne,x1:ae*te,y:ie*K,name:m(le.valueFormat)(le.node.value)+le.valueSuffix,text:[le.node.label,D+le.node.targetLinks.length,U+le.node.sourceLinks.length].filter(n).join("<br>"),color:A(fe,"bgcolor")||le.tinyColorHue,borderColor:A(fe,"bordercolor"),fontFamily:A(fe,"font.family"),fontSize:A(fe,"font.size"),fontColor:A(fe,"font.color"),nameLength:A(fe,"namelength"),textAlign:A(fe,"align"),idealAlign:"left",hovertemplate:fe.hovertemplate,hovertemplateLabels:$,eventData:[le.node]},{container:T._hoverlayer.node(),outerContainer:T._paper.node(),gd:M});l(oe,.85),o(oe)}}},W=function(J,le,fe){M._fullLayout.hovermode!==!1&&(u.select(J).call(p,le,fe),le.node.trace.node.hoverinfo!=="skip"&&(le.node.fullData=le.node.trace,M.emit("plotly_unhover",{event:u.event,points:[le.node]})),t.loneUnhover(T._hoverlayer.node()))};x(M,w,_,{width:v.w,height:v.h,margin:{t:v.t,r:v.r,b:v.b,l:v.l}},{linkEvents:{hover:P,follow:B,unhover:j,select:k},nodeEvents:{hover:ee,follow:q,unhover:W,select:Z}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(e,z,N){var u=e("d3-force"),s=e("d3-interpolate").interpolateNumber,m=e("@plotly/d3"),x=e("@plotly/d3-sankey"),t=e("@plotly/d3-sankey-circular"),i=e("./constants"),a=e("tinycolor2"),r=e("../../components/color"),n=e("../../components/drawing"),f=e("../../lib"),l=f.strTranslate,o=f.strRotate,c=e("../../lib/gup"),h=c.keyFun,d=c.repeat,p=c.unwrap,y=e("../../lib/svg_text_utils"),g=e("../../registry"),A=e("../../constants/alignment"),b=A.CAP_SHIFT,M=A.LINE_SPACING,_=3;function T(H,Y,ne){var te=p(Y),K=te.trace,$=K.domain,ae=K.orientation==="h",ie=K.node.pad,oe=K.node.thickness,ue=H.width*($.x[1]-$.x[0]),ye=H.height*($.y[1]-$.y[0]),ce=te._nodes,me=te._links,xe=te.circular,ke;xe?ke=t.sankeyCircular().circularLinkGap(0):ke=x.sankey(),ke.iterations(i.sankeyIterations).size(ae?[ue,ye]:[ye,ue]).nodeWidth(oe).nodePadding(ie).nodeId(function(kt){return kt.pointNumber}).nodes(ce).links(me);var Ae=ke();ke.nodePadding()<ie&&f.warn("node.pad was reduced to ",ke.nodePadding()," to fit within the figure.");var Oe,He,Ge;for(var _e in te._groupLookup){var Re=parseInt(te._groupLookup[_e]),We;for(Oe=0;Oe<Ae.nodes.length;Oe++)if(Ae.nodes[Oe].pointNumber===Re){We=Ae.nodes[Oe];break}if(!!We){var qe={pointNumber:parseInt(_e),x0:We.x0,x1:We.x1,y0:We.y0,y1:We.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};Ae.nodes.unshift(qe),We.childrenNodes.unshift(qe)}}function Ue(){for(Oe=0;Oe<Ae.nodes.length;Oe++){var kt=Ae.nodes[Oe],zt={},Bt,Lt;for(He=0;He<kt.targetLinks.length;He++)Lt=kt.targetLinks[He],Bt=Lt.source.pointNumber+":"+Lt.target.pointNumber,zt.hasOwnProperty(Bt)||(zt[Bt]=[]),zt[Bt].push(Lt);var Mt=Object.keys(zt);for(He=0;He<Mt.length;He++){Bt=Mt[He];var it=zt[Bt],ht=0,Qe={};for(Ge=0;Ge<it.length;Ge++)Lt=it[Ge],Qe[Lt.label]||(Qe[Lt.label]=0),Qe[Lt.label]+=Lt.value,ht+=Lt.value;for(Ge=0;Ge<it.length;Ge++)Lt=it[Ge],Lt.flow={value:ht,labelConcentration:Qe[Lt.label]/ht,concentration:Lt.value/ht,links:it},Lt.concentrationscale&&(Lt.color=a(Lt.concentrationscale(Lt.flow.labelConcentration)))}var Ce=0;for(He=0;He<kt.sourceLinks.length;He++)Ce+=kt.sourceLinks[He].value;for(He=0;He<kt.sourceLinks.length;He++)Lt=kt.sourceLinks[He],Lt.concentrationOut=Lt.value/Ce;var Xe=0;for(He=0;He<kt.targetLinks.length;He++)Xe+=kt.targetLinks[He].value;for(He=0;He<kt.targetLinks.length;He++)Lt=kt.targetLinks[He],Lt.concenrationIn=Lt.value/Xe}}Ue();function Ie(kt){kt.forEach(function(zt){var Bt,Lt,Mt=0,it=zt.length,ht;for(zt.sort(function(Qe,Ce){return Qe.y0-Ce.y0}),ht=0;ht<it;++ht)Bt=zt[ht],Bt.y0>=Mt||(Lt=Mt-Bt.y0,Lt>1e-6&&(Bt.y0+=Lt,Bt.y1+=Lt)),Mt=Bt.y1+ie})}function Ve(kt){var zt=kt.map(function(Ce,Xe){return{x0:Ce.x0,index:Xe}}).sort(function(Ce,Xe){return Ce.x0-Xe.x0}),Bt=[],Lt=-1,Mt,it=-1/0,ht;for(Oe=0;Oe<zt.length;Oe++){var Qe=kt[zt[Oe].index];Qe.x0>it+oe&&(Lt+=1,Mt=Qe.x0),it=Qe.x0,Bt[Lt]||(Bt[Lt]=[]),Bt[Lt].push(Qe),ht=Mt-Qe.x0,Qe.x0+=ht,Qe.x1+=ht}return Bt}if(K.node.x.length&&K.node.y.length){for(Oe=0;Oe<Math.min(K.node.x.length,K.node.y.length,Ae.nodes.length);Oe++)if(K.node.x[Oe]&&K.node.y[Oe]){var dt=[K.node.x[Oe]*ue,K.node.y[Oe]*ye];Ae.nodes[Oe].x0=dt[0]-oe/2,Ae.nodes[Oe].x1=dt[0]+oe/2;var Rt=Ae.nodes[Oe].y1-Ae.nodes[Oe].y0;Ae.nodes[Oe].y0=dt[1]-Rt/2,Ae.nodes[Oe].y1=dt[1]+Rt/2}if(K.arrangement==="snap"){ce=Ae.nodes;var Gt=Ve(ce);Ie(Gt)}ke.update(Ae)}return{circular:xe,key:ne,trace:K,guid:f.randstr(),horizontal:ae,width:ue,height:ye,nodePad:K.node.pad,nodeLineColor:K.node.line.color,nodeLineWidth:K.node.line.width,linkLineColor:K.link.line.color,linkLineWidth:K.link.line.width,valueFormat:K.valueformat,valueSuffix:K.valuesuffix,textFont:K.textfont,translateX:$.x[0]*H.width+H.margin.l,translateY:H.height-$.y[1]*H.height+H.margin.t,dragParallel:ae?ye:ue,dragPerpendicular:ae?ue:ye,arrangement:K.arrangement,sankey:ke,graph:Ae,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function w(H,Y,ne){var te=a(Y.color),K=Y.source.label+"|"+Y.target.label,$=K+"__"+ne;return Y.trace=H.trace,Y.curveNumber=H.trace.index,{circular:H.circular,key:$,traceId:H.key,pointNumber:Y.pointNumber,link:Y,tinyColorHue:r.tinyRGB(te),tinyColorAlpha:te.getAlpha(),linkPath:L,linkLineColor:H.linkLineColor,linkLineWidth:H.linkLineWidth,valueFormat:H.valueFormat,valueSuffix:H.valueSuffix,sankey:H.sankey,parent:H,interactionState:H.interactionState,flow:Y.flow}}function v(H){var Y="",ne=H.width/2,te=H.circularPathData;return H.circularLinkType==="top"?Y="M "+te.targetX+" "+(te.targetY+ne)+" L"+te.rightInnerExtent+" "+(te.targetY+ne)+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightSmallArcRadius+ne)+" 0 0 1 "+(te.rightFullExtent-ne)+" "+(te.targetY-te.rightSmallArcRadius)+"L"+(te.rightFullExtent-ne)+" "+te.verticalRightInnerExtent+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightLargeArcRadius+ne)+" 0 0 1 "+te.rightInnerExtent+" "+(te.verticalFullExtent-ne)+"L"+te.leftInnerExtent+" "+(te.verticalFullExtent-ne)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftLargeArcRadius+ne)+" 0 0 1 "+(te.leftFullExtent+ne)+" "+te.verticalLeftInnerExtent+"L"+(te.leftFullExtent+ne)+" "+(te.sourceY-te.leftSmallArcRadius)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftSmallArcRadius+ne)+" 0 0 1 "+te.leftInnerExtent+" "+(te.sourceY+ne)+"L"+te.sourceX+" "+(te.sourceY+ne)+"L"+te.sourceX+" "+(te.sourceY-ne)+"L"+te.leftInnerExtent+" "+(te.sourceY-ne)+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftSmallArcRadius-ne)+" 0 0 0 "+(te.leftFullExtent-ne)+" "+(te.sourceY-te.leftSmallArcRadius)+"L"+(te.leftFullExtent-ne)+" "+te.verticalLeftInnerExtent+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftLargeArcRadius-ne)+" 0 0 0 "+te.leftInnerExtent+" "+(te.verticalFullExtent+ne)+"L"+te.rightInnerExtent+" "+(te.verticalFullExtent+ne)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightLargeArcRadius-ne)+" 0 0 0 "+(te.rightFullExtent+ne)+" "+te.verticalRightInnerExtent+"L"+(te.rightFullExtent+ne)+" "+(te.targetY-te.rightSmallArcRadius)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightSmallArcRadius-ne)+" 0 0 0 "+te.rightInnerExtent+" "+(te.targetY-ne)+"L"+te.targetX+" "+(te.targetY-ne)+"Z":Y="M "+te.targetX+" "+(te.targetY-ne)+" L"+te.rightInnerExtent+" "+(te.targetY-ne)+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightSmallArcRadius+ne)+" 0 0 0 "+(te.rightFullExtent-ne)+" "+(te.targetY+te.rightSmallArcRadius)+"L"+(te.rightFullExtent-ne)+" "+te.verticalRightInnerExtent+"A"+(te.rightLargeArcRadius+ne)+" "+(te.rightLargeArcRadius+ne)+" 0 0 0 "+te.rightInnerExtent+" "+(te.verticalFullExtent+ne)+"L"+te.leftInnerExtent+" "+(te.verticalFullExtent+ne)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftLargeArcRadius+ne)+" 0 0 0 "+(te.leftFullExtent+ne)+" "+te.verticalLeftInnerExtent+"L"+(te.leftFullExtent+ne)+" "+(te.sourceY+te.leftSmallArcRadius)+"A"+(te.leftLargeArcRadius+ne)+" "+(te.leftSmallArcRadius+ne)+" 0 0 0 "+te.leftInnerExtent+" "+(te.sourceY-ne)+"L"+te.sourceX+" "+(te.sourceY-ne)+"L"+te.sourceX+" "+(te.sourceY+ne)+"L"+te.leftInnerExtent+" "+(te.sourceY+ne)+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftSmallArcRadius-ne)+" 0 0 1 "+(te.leftFullExtent-ne)+" "+(te.sourceY+te.leftSmallArcRadius)+"L"+(te.leftFullExtent-ne)+" "+te.verticalLeftInnerExtent+"A"+(te.leftLargeArcRadius-ne)+" "+(te.leftLargeArcRadius-ne)+" 0 0 1 "+te.leftInnerExtent+" "+(te.verticalFullExtent-ne)+"L"+te.rightInnerExtent+" "+(te.verticalFullExtent-ne)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightLargeArcRadius-ne)+" 0 0 1 "+(te.rightFullExtent+ne)+" "+te.verticalRightInnerExtent+"L"+(te.rightFullExtent+ne)+" "+(te.targetY+te.rightSmallArcRadius)+"A"+(te.rightLargeArcRadius-ne)+" "+(te.rightSmallArcRadius-ne)+" 0 0 1 "+te.rightInnerExtent+" "+(te.targetY+ne)+"L"+te.targetX+" "+(te.targetY+ne)+"Z",Y}function L(){var H=.5;function Y(ne){if(ne.link.circular)return v(ne.link);var te=ne.link.source.x1,K=ne.link.target.x0,$=s(te,K),ae=$(H),ie=$(1-H),oe=ne.link.y0-ne.link.width/2,ue=ne.link.y0+ne.link.width/2,ye=ne.link.y1-ne.link.width/2,ce=ne.link.y1+ne.link.width/2;return"M"+te+","+oe+"C"+ae+","+oe+" "+ie+","+ye+" "+K+","+ye+"L"+K+","+ce+"C"+ie+","+ce+" "+ae+","+ue+" "+te+","+ue+"Z"}return Y}function S(H,Y){var ne=a(Y.color),te=i.nodePadAcross,K=H.nodePad/2;Y.dx=Y.x1-Y.x0,Y.dy=Y.y1-Y.y0;var $=Y.dx,ae=Math.max(.5,Y.dy),ie="node_"+Y.pointNumber;return Y.group&&(ie=f.randstr()),Y.trace=H.trace,Y.curveNumber=H.trace.index,{index:Y.pointNumber,key:ie,partOfGroup:Y.partOfGroup||!1,group:Y.group,traceId:H.key,trace:H.trace,node:Y,nodePad:H.nodePad,nodeLineColor:H.nodeLineColor,nodeLineWidth:H.nodeLineWidth,textFont:H.textFont,size:H.horizontal?H.height:H.width,visibleWidth:Math.ceil($),visibleHeight:ae,zoneX:-te,zoneY:-K,zoneWidth:$+2*te,zoneHeight:ae+2*K,labelY:H.horizontal?Y.dy/2+1:Y.dx/2+1,left:Y.originalLayer===1,sizeAcross:H.width,forceLayouts:H.forceLayouts,horizontal:H.horizontal,darkBackground:ne.getBrightness()<=128,tinyColorHue:r.tinyRGB(ne),tinyColorAlpha:ne.getAlpha(),valueFormat:H.valueFormat,valueSuffix:H.valueSuffix,sankey:H.sankey,graph:H.graph,arrangement:H.arrangement,uniqueNodeLabelPathId:[H.guid,H.key,ie].join("_"),interactionState:H.interactionState,figure:H}}function k(H){H.attr("transform",function(Y){return l(Y.node.x0.toFixed(3),Y.node.y0.toFixed(3))})}function P(H){H.call(k)}function O(H,Y){H.call(P),Y.attr("d",L())}function F(H){H.attr("width",function(Y){return Y.node.x1-Y.node.x0}).attr("height",function(Y){return Y.visibleHeight})}function I(H){return H.link.width>1||H.linkLineWidth>0}function D(H){var Y=l(H.translateX,H.translateY);return Y+(H.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function U(H,Y,ne){H.on(".basic",null).on("mouseover.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ne.hover(this,te,Y),te.interactionState.hovered=[this,te])}).on("mousemove.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ne.follow(this,te),te.interactionState.hovered=[this,te])}).on("mouseout.basic",function(te){!te.interactionState.dragInProgress&&!te.partOfGroup&&(ne.unhover(this,te,Y),te.interactionState.hovered=!1)}).on("click.basic",function(te){te.interactionState.hovered&&(ne.unhover(this,te,Y),te.interactionState.hovered=!1),!te.interactionState.dragInProgress&&!te.partOfGroup&&ne.select(this,te,Y)})}function B(H,Y,ne,te){var K=m.behavior.drag().origin(function($){return{x:$.node.x0+$.visibleWidth/2,y:$.node.y0+$.visibleHeight/2}}).on("dragstart",function($){if($.arrangement!=="fixed"&&(f.ensureSingle(te._fullLayout._infolayer,"g","dragcover",function(ie){te._fullLayout._dragCover=ie}),f.raiseToTop(this),$.interactionState.dragInProgress=$.node,J($.node),$.interactionState.hovered&&(ne.nodeEvents.unhover.apply(0,$.interactionState.hovered),$.interactionState.hovered=!1),$.arrangement==="snap")){var ae=$.traceId+"|"+$.key;$.forceLayouts[ae]?$.forceLayouts[ae].alpha(1):j(H,ae,$),Z(H,Y,$,ae,te)}}).on("drag",function($){if($.arrangement!=="fixed"){var ae=m.event.x,ie=m.event.y;$.arrangement==="snap"?($.node.x0=ae-$.visibleWidth/2,$.node.x1=ae+$.visibleWidth/2,$.node.y0=ie-$.visibleHeight/2,$.node.y1=ie+$.visibleHeight/2):($.arrangement==="freeform"&&($.node.x0=ae-$.visibleWidth/2,$.node.x1=ae+$.visibleWidth/2),ie=Math.max(0,Math.min($.size-$.visibleHeight/2,ie)),$.node.y0=ie-$.visibleHeight/2,$.node.y1=ie+$.visibleHeight/2),J($.node),$.arrangement!=="snap"&&($.sankey.update($.graph),O(H.filter(le($)),Y))}}).on("dragend",function($){if($.arrangement!=="fixed"){$.interactionState.dragInProgress=!1;for(var ae=0;ae<$.node.childrenNodes.length;ae++)$.node.childrenNodes[ae].x=$.node.x,$.node.childrenNodes[ae].y=$.node.y;$.arrangement!=="snap"&&q($,te)}});H.on(".drag",null).call(K)}function j(H,Y,ne,te){fe(ne.graph.nodes);var K=ne.graph.nodes.filter(function($){return $.originalX===ne.node.originalX}).filter(function($){return!$.partOfGroup});ne.forceLayouts[Y]=u.forceSimulation(K).alphaDecay(0).force("collide",u.forceCollide().radius(function($){return $.dy/2+ne.nodePad/2}).strength(1).iterations(i.forceIterations)).force("constrain",ee(H,Y,K,ne)).stop()}function Z(H,Y,ne,te,K){window.requestAnimationFrame(function $(){var ae;for(ae=0;ae<i.forceTicksPerFrame;ae++)ne.forceLayouts[te].tick();var ie=ne.graph.nodes;if(se(ie),ne.sankey.update(ne.graph),O(H.filter(le(ne)),Y),ne.forceLayouts[te].alpha()>0)window.requestAnimationFrame($);else{var oe=ne.node.originalX;ne.node.x0=oe-ne.visibleWidth/2,ne.node.x1=oe+ne.visibleWidth/2,q(ne,K)}})}function ee(H,Y,ne,te){return function(){for(var $=0,ae=0;ae<ne.length;ae++){var ie=ne[ae];ie===te.interactionState.dragInProgress?(ie.x=ie.lastDraggedX,ie.y=ie.lastDraggedY):(ie.vx=(ie.originalX-ie.x)/i.forceTicksPerFrame,ie.y=Math.min(te.size-ie.dy/2,Math.max(ie.dy/2,ie.y))),$=Math.max($,Math.abs(ie.vx),Math.abs(ie.vy))}!te.interactionState.dragInProgress&&$<.1&&te.forceLayouts[Y].alpha()>0&&te.forceLayouts[Y].alpha(0)}}function q(H,Y){for(var ne=[],te=[],K=0;K<H.graph.nodes.length;K++){var $=(H.graph.nodes[K].x0+H.graph.nodes[K].x1)/2,ae=(H.graph.nodes[K].y0+H.graph.nodes[K].y1)/2;ne.push($/H.figure.width),te.push(ae/H.figure.height)}g.call("_guiRestyle",Y,{"node.x":[ne],"node.y":[te]},H.trace.index).then(function(){Y._fullLayout._dragCover&&Y._fullLayout._dragCover.remove()})}function W(H){var Y=[],ne;for(ne=0;ne<H.length;ne++)H[ne].originalX=(H[ne].x0+H[ne].x1)/2,H[ne].originalY=(H[ne].y0+H[ne].y1)/2,Y.indexOf(H[ne].originalX)===-1&&Y.push(H[ne].originalX);for(Y.sort(function(te,K){return te-K}),ne=0;ne<H.length;ne++)H[ne].originalLayerIndex=Y.indexOf(H[ne].originalX),H[ne].originalLayer=H[ne].originalLayerIndex/(Y.length-1)}function J(H){H.lastDraggedX=H.x0+H.dx/2,H.lastDraggedY=H.y0+H.dy/2}function le(H){return function(Y){return Y.node.originalX===H.node.originalX}}function fe(H){for(var Y=0;Y<H.length;Y++)H[Y].y=(H[Y].y0+H[Y].y1)/2,H[Y].x=(H[Y].x0+H[Y].x1)/2}function se(H){for(var Y=0;Y<H.length;Y++)H[Y].y0=H[Y].y-H[Y].dy/2,H[Y].y1=H[Y].y0+H[Y].dy,H[Y].x0=H[Y].x-H[Y].dx/2,H[Y].x1=H[Y].x0+H[Y].dx}z.exports=function(H,Y,ne,te,K){var $=!1;f.ensureSingle(H._fullLayout._infolayer,"g","first-render",function(){$=!0});var ae=H._fullLayout._dragCover,ie=ne.filter(function(Ae){return p(Ae).trace.visible}).map(T.bind(null,te)),oe=Y.selectAll("."+i.cn.sankey).data(ie,h);oe.exit().remove(),oe.enter().append("g").classed(i.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",D),oe.each(function(Ae,Oe){H._fullData[Oe]._sankey=Ae;var He="bgsankey-"+Ae.trace.uid+"-"+Oe;f.ensureSingle(H._fullLayout._draggers,"rect",He),H._fullData[Oe]._bgRect=m.select("."+He),H._fullData[Oe]._bgRect.style("pointer-events","all").attr("width",Ae.width).attr("height",Ae.height).attr("x",Ae.translateX).attr("y",Ae.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),oe.transition().ease(i.ease).duration(i.duration).attr("transform",D);var ue=oe.selectAll("."+i.cn.sankeyLinks).data(d,h);ue.enter().append("g").classed(i.cn.sankeyLinks,!0).style("fill","none");var ye=ue.selectAll("."+i.cn.sankeyLink).data(function(Ae){var Oe=Ae.graph.links;return Oe.filter(function(He){return He.value}).map(w.bind(null,Ae))},h);ye.enter().append("path").classed(i.cn.sankeyLink,!0).call(U,oe,K.linkEvents),ye.style("stroke",function(Ae){return I(Ae)?r.tinyRGB(a(Ae.linkLineColor)):Ae.tinyColorHue}).style("stroke-opacity",function(Ae){return I(Ae)?r.opacity(Ae.linkLineColor):Ae.tinyColorAlpha}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}).style("stroke-width",function(Ae){return I(Ae)?Ae.linkLineWidth:1}).attr("d",L()),ye.style("opacity",function(){return H._context.staticPlot||$||ae?1:0}).transition().ease(i.ease).duration(i.duration).style("opacity",1),ye.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var ce=oe.selectAll("."+i.cn.sankeyNodeSet).data(d,h);ce.enter().append("g").classed(i.cn.sankeyNodeSet,!0),ce.style("cursor",function(Ae){switch(Ae.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var me=ce.selectAll("."+i.cn.sankeyNode).data(function(Ae){var Oe=Ae.graph.nodes;return W(Oe),Oe.map(S.bind(null,Ae))},h);me.enter().append("g").classed(i.cn.sankeyNode,!0).call(k).style("opacity",function(Ae){return(H._context.staticPlot||$)&&!Ae.partOfGroup?1:0}),me.call(U,oe,K.nodeEvents).call(B,ye,K,H),me.transition().ease(i.ease).duration(i.duration).call(k).style("opacity",function(Ae){return Ae.partOfGroup?0:1}),me.exit().transition().ease(i.ease).duration(i.duration).style("opacity",0).remove();var xe=me.selectAll("."+i.cn.nodeRect).data(d);xe.enter().append("rect").classed(i.cn.nodeRect,!0).call(F),xe.style("stroke-width",function(Ae){return Ae.nodeLineWidth}).style("stroke",function(Ae){return r.tinyRGB(a(Ae.nodeLineColor))}).style("stroke-opacity",function(Ae){return r.opacity(Ae.nodeLineColor)}).style("fill",function(Ae){return Ae.tinyColorHue}).style("fill-opacity",function(Ae){return Ae.tinyColorAlpha}),xe.transition().ease(i.ease).duration(i.duration).call(F);var ke=me.selectAll("."+i.cn.nodeLabel).data(d);ke.enter().append("text").classed(i.cn.nodeLabel,!0).style("cursor","default"),ke.attr("data-notex",1).text(function(Ae){return Ae.node.label}).each(function(Ae){var Oe=m.select(this);n.font(Oe,Ae.textFont),y.convertToTspans(Oe,H)}).style("text-shadow",y.makeTextShadow(H._fullLayout.paper_bgcolor)).attr("text-anchor",function(Ae){return Ae.horizontal&&Ae.left?"end":"start"}).attr("transform",function(Ae){var Oe=m.select(this),He=y.lineCount(Oe),Ge=Ae.textFont.size*((He-1)*M-b),_e=Ae.nodeLineWidth/2+_,Re=((Ae.horizontal?Ae.visibleHeight:Ae.visibleWidth)-Ge)/2;Ae.horizontal&&(Ae.left?_e=-_e:_e+=Ae.visibleWidth);var We=Ae.horizontal?"":"scale(-1,1)"+o(90);return l(Ae.horizontal?_e:Re,Ae.horizontal?Re:_e)+We}),ke.transition().ease(i.ease).duration(i.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(e,z,N){z.exports=function(s,m){for(var x=s.cd,t=[],i=x[0].trace,a=i._sankey.graph.nodes,r=0;r<a.length;r++){var n=a[r];if(!n.partOfGroup){var f=[(n.x0+n.x1)/2,(n.y0+n.y1)/2];i.orientation==="v"&&f.reverse(),m&&m.contains(f,!1,r,s)&&t.push({pointNumber:n.pointNumber})}}return t}},{}],925:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){for(var t=0;t<m.length;t++)m[t].i=t;u.mergeArray(x.text,m,"tx"),u.mergeArray(x.texttemplate,m,"txt"),u.mergeArray(x.hovertext,m,"htx"),u.mergeArray(x.customdata,m,"data"),u.mergeArray(x.textposition,m,"tp"),x.textfont&&(u.mergeArrayCastPositive(x.textfont.size,m,"ts"),u.mergeArray(x.textfont.color,m,"tc"),u.mergeArray(x.textfont.family,m,"tf"));var i=x.marker;if(i){u.mergeArrayCastPositive(i.size,m,"ms"),u.mergeArrayCastPositive(i.opacity,m,"mo"),u.mergeArray(i.symbol,m,"mx"),u.mergeArray(i.color,m,"mc");var a=i.line;i.line&&(u.mergeArray(a.color,m,"mlc"),u.mergeArrayCastPositive(a.width,m,"mlw"));var r=i.gradient;r&&r.type!=="none"&&(u.mergeArray(r.type,m,"mgt"),u.mergeArray(r.color,m,"mgc"))}}},{"../../lib":503}],926:[function(e,z,N){var u=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../components/colorscale/attributes"),t=e("../../plots/font_attributes"),i=e("../../components/drawing/attributes").dash,a=e("../../components/drawing"),r=e("./constants"),n=e("../../lib/extend").extendFlat;function f(c){return{valType:"any",dflt:0,editType:"calc"}}function l(c){return{valType:"any",editType:"calc"}}function o(c){return{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"}}z.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:f(),yperiod:f(),xperiod0:l(),yperiod0:l(),xperiodalignment:o(),yperiodalignment:o(),xhoverformat:u("x"),yhoverformat:u("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:s({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:m({},{keys:r.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:n({},i,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:n({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:n({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},x("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},x("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:t({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../plots/cartesian/axes"),x=e("../../plots/cartesian/align_period"),t=e("../../constants/numerical").BADNUM,i=e("./subtypes"),a=e("./colorscale_calc"),r=e("./arrays_to_calcdata"),n=e("./calc_selection");function f(p,y){var g=p._fullLayout,A=m.getFromId(p,y.xaxis||"x"),b=m.getFromId(p,y.yaxis||"y"),M=A.makeCalcdata(y,"x"),_=b.makeCalcdata(y,"y"),T=x(y,A,"x",M),w=x(y,b,"y",_),v=T.vals,L=w.vals,S=y._length,k=new Array(S),P=y.ids,O=d(y,g,A,b),F=!1,I,D,U,B,j,Z;c(g,y);var ee="x",q="y",W;if(O)s.pushUnique(O.traceIndices,y._expandedIndex),I=O.orientation==="v",I?(q="s",W="x"):(ee="s",W="y"),j=O.stackgaps==="interpolate";else{var J=o(y,S);l(p,y,A,b,v,L,J)}var le=!!y.xperiodalignment,fe=!!y.yperiodalignment;for(D=0;D<S;D++){var se=k[D]={},H=u(v[D]),Y=u(L[D]);H&&Y?(se[ee]=v[D],se[q]=L[D],le&&(se.orig_x=M[D],se.xEnd=T.ends[D],se.xStart=T.starts[D]),fe&&(se.orig_y=_[D],se.yEnd=w.ends[D],se.yStart=w.starts[D])):O&&(I?H:Y)?(se[W]=I?v[D]:L[D],se.gap=!0,j?(se.s=t,F=!0):se.s=0):se[ee]=se[q]=t,P&&(se.id=String(P[D]))}if(r(k,y),a(p,y),n(k,y),O){for(D=0;D<k.length;)k[D][W]===t?k.splice(D,1):D++;if(s.sort(k,function($,ae){return $[W]-ae[W]||$.i-ae.i}),F){for(D=0;D<k.length-1&&k[D].gap;)D++;for(Z=k[D].s,Z||(Z=k[D].s=0),U=0;U<D;U++)k[U].s=Z;for(B=k.length-1;B>D&&k[B].gap;)B--;for(Z=k[B].s,U=k.length-1;U>B;U--)k[U].s=Z;for(;D<B;)if(D++,k[D].gap){for(U=D+1;k[U].gap;)U++;for(var ne=k[D-1][W],te=k[D-1].s,K=(k[U].s-te)/(k[U][W]-ne);D<U;)k[D].s=te+(k[D][W]-ne)*K,D++}}}return k}function l(p,y,g,A,b,M,_){var T=y._length,w=p._fullLayout,v=g._id,L=A._id,S=w._firstScatter[h(y)]===y.uid,k=(d(y,w,g,A)||{}).orientation,P=y.fill;g._minDtick=0,A._minDtick=0;var O={padded:!0},F={padded:!0};_&&(O.ppad=F.ppad=_);var I=T<2||b[0]!==b[T-1]||M[0]!==M[T-1];I&&(P==="tozerox"||P==="tonextx"&&(S||k==="h"))?O.tozero=!0:!(y.error_y||{}).visible&&(P==="tonexty"||P==="tozeroy"||!i.hasMarkers(y)&&!i.hasText(y))&&(O.padded=!1,O.ppad=0),I&&(P==="tozeroy"||P==="tonexty"&&(S||k==="v"))?F.tozero=!0:(P==="tonextx"||P==="tozerox")&&(F.padded=!1),v&&(y._extremes[v]=m.findExtremes(g,b,O)),L&&(y._extremes[L]=m.findExtremes(A,M,F))}function o(p,y){if(!!i.hasMarkers(p)){var g=p.marker,A=1.6*(p.marker.sizeref||1),b;if(p.marker.sizemode==="area"?b=function(v){return Math.max(Math.sqrt((v||0)/A),3)}:b=function(v){return Math.max((v||0)/A,3)},s.isArrayOrTypedArray(g.size)){var M={type:"linear"};m.setConvert(M);for(var _=M.makeCalcdata(p.marker,"size"),T=new Array(y),w=0;w<y;w++)T[w]=b(_[w]);return T}else return b(g.size)}}function c(p,y){var g=h(y),A=p._firstScatter;A[g]||(A[g]=y.uid)}function h(p){var y=p.stackgroup;return p.xaxis+p.yaxis+p.type+(y?"-"+y:"")}function d(p,y,g,A){var b=p.stackgroup;if(!!b){var M=y._scatterStackOpts[g._id+A._id][b],_=M.orientation==="v"?A:g;if(_.type==="linear"||_.type==="log")return M}}z.exports={calc:f,calcMarkerSize:o,calcAxisExpansion:l,setFirstScatter:c,getStackOpts:d}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){u.isArrayOrTypedArray(x.selectedpoints)&&u.tagSelected(m,x)}},{"../../lib":503}],929:[function(e,z,N){var u=e("../../components/colorscale/helpers").hasColorscale,s=e("../../components/colorscale/calc"),m=e("./subtypes");z.exports=function(t,i){m.hasLines(i)&&u(i,"line")&&s(t,i,{vals:i.line.color,containerStr:"line",cLetter:"c"}),m.hasMarkers(i)&&(u(i,"marker")&&s(t,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),u(i,"marker.line")&&s(t,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(e,z,N){z.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(e,z,N){var u=e("./calc");z.exports=function(t,i){var a=i.xaxis,r=i.yaxis,n=a._id+r._id,f=t._fullLayout._scatterStackOpts[n];if(!!f){var l=t.calcdata,o,c,h,d,p,y,g,A,b,M,_,T,w,v,L;for(var S in f){M=f[S];var k=M.traceIndices;if(!!k.length){for(_=M.stackgaps==="interpolate",T=M.groupnorm,M.orientation==="v"?(w="x",v="y"):(w="y",v="x"),L=new Array(k.length),o=0;o<L.length;o++)L[o]=!1;y=l[k[0]];var P=new Array(y.length);for(o=0;o<y.length;o++)P[o]=y[o][w];for(o=1;o<k.length;o++){for(p=l[k[o]],c=h=0;c<p.length;c++){for(g=p[c][w];g>P[h]&&h<P.length;h++)s(p,c,P[h],o,L,_,w),c++;if(g!==P[h]){for(d=0;d<o;d++)s(l[k[d]],h,g,d,L,_,w);P.splice(h,0,g)}h++}for(;h<P.length;h++)s(p,c,P[h],o,L,_,w),c++}var O=P.length;for(c=0;c<y.length;c++){for(A=y[c][v]=y[c].s,o=1;o<k.length;o++)p=l[k[o]],p[0].trace._rawLength=p[0].trace._length,p[0].trace._length=O,A+=p[c].s,p[c][v]=A;if(T)for(b=(T==="fraction"?A:A/100)||1,o=0;o<k.length;o++){var F=l[k[o]][c];F[v]/=b,F.sNorm=F.s/b}}for(o=0;o<k.length;o++){p=l[k[o]];var I=p[0].trace,D=u.calcMarkerSize(I,I._rawLength),U=Array.isArray(D);if(D&&L[o]||U){var B=D;for(D=new Array(O),c=0;c<O;c++)D[c]=p[c].gap?0:U?B[p[c].i]:B}var j=new Array(O),Z=new Array(O);for(c=0;c<O;c++)j[c]=p[c].x,Z[c]=p[c].y;u.calcAxisExpansion(t,I,a,r,j,Z,D),p[0].t.orientation=M.orientation}}}}};function s(x,t,i,a,r,n,f){r[a]=!0;var l={i:null,gap:!0,s:0};if(l[f]=i,x.splice(t,0,l),t&&i===x[t-1][f]){var o=x[t-1];l.s=o.s,l.i=o.i,l.gap=o.gap}else n&&(l.s=m(x,t,i,f));t||(x[0].t=x[1].t,x[0].trace=x[1].trace,delete x[1].t,delete x[1].trace)}function m(x,t,i,a){var r=x[t-1],n=x[t+1];return n?r?r.s+(n.s-r.s)*(i-r[a])/(n[a]-r[a]):n.s:r.s}},{"./calc":927}],932:[function(e,z,N){z.exports=function(s){for(var m=0;m<s.length;m++){var x=s[m];if(x.type==="scatter"){var t=x.fill;if(!(t==="none"||t==="toself")&&(x.opacity=void 0,t==="tonexty"||t==="tonextx"))for(var i=m-1;i>=0;i--){var a=s[i];if(a.type==="scatter"&&a.xaxis===x.xaxis&&a.yaxis===x.yaxis){a.opacity=void 0;break}}}}}},{}],933:[function(e,z,N){var u=e("../../lib"),s=e("../../registry"),m=e("./attributes"),x=e("./constants"),t=e("./subtypes"),i=e("./xy_defaults"),a=e("./period_defaults"),r=e("./stack_defaults"),n=e("./marker_defaults"),f=e("./line_defaults"),l=e("./line_shape_defaults"),o=e("./text_defaults"),c=e("./fillcolor_defaults");z.exports=function(d,p,y,g){function A(S,k){return u.coerce(d,p,m,S,k)}var b=i(d,p,g,A);if(b||(p.visible=!1),!!p.visible){a(d,p,g,A),A("xhoverformat"),A("yhoverformat");var M=r(d,p,g,A),_=!M&&b<x.PTS_LINESONLY?"lines+markers":"lines";A("text"),A("hovertext"),A("mode",_),t.hasLines(p)&&(f(d,p,y,g,A),l(d,p,A),A("connectgaps"),A("line.simplify")),t.hasMarkers(p)&&n(d,p,y,g,A,{gradient:!0}),t.hasText(p)&&(A("texttemplate"),o(d,p,g,A));var T=[];(t.hasMarkers(p)||t.hasText(p))&&(A("cliponaxis"),A("marker.maxdisplayed"),T.push("points")),A("fill",M?M.fillDflt:"none"),p.fill!=="none"&&(c(d,p,y,A),t.hasLines(p)||l(d,p,A));var w=(p.line||{}).color,v=(p.marker||{}).color;(p.fill==="tonext"||p.fill==="toself")&&T.push("fills"),A("hoveron",T.join("+")||"points"),p.hoveron!=="fills"&&A("hovertemplate");var L=s.getComponentMethod("errorbars","supplyDefaults");L(d,p,w||v||y,{axis:"y"}),L(d,p,w||v||y,{axis:"x",inherit:"y"}),u.coerceSelectionMarkerOpacity(p,A)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(e,z,N){var u=e("../../components/color"),s=e("../../lib").isArrayOrTypedArray;z.exports=function(x,t,i,a){var r=!1;if(t.marker){var n=t.marker.color,f=(t.marker.line||{}).color;n&&!s(n)?r=n:f&&!s(f)&&(r=f)}a("fillcolor",u.addOpacity((t.line||{}).color||r||i,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(e,z,N){var u=e("../../plots/cartesian/axes");z.exports=function(m,x,t){var i={},a={_fullLayout:t},r=u.getFromTrace(a,x,"x"),n=u.getFromTrace(a,x,"y");return i.xLabel=u.tickText(r,r.c2l(m.x),!0).text,i.yLabel=u.tickText(n,n.c2l(m.y),!0).text,i}},{"../../plots/cartesian/axes":554}],936:[function(e,z,N){var u=e("../../components/color"),s=e("./subtypes");z.exports=function(x,t){var i,a;if(x.mode==="lines")return i=x.line.color,i&&u.opacity(i)?i:x.fillcolor;if(x.mode==="none")return x.fill?x.fillcolor:"";var r=t.mcc||(x.marker||{}).color,n=t.mlcc||((x.marker||{}).line||{}).color;return a=r&&u.opacity(r)?r:n&&u.opacity(n)&&(t.mlw||((x.marker||{}).line||{}).width)?n:"",a?u.opacity(a)<.3?u.addOpacity(a,.3):a:(i=(x.line||{}).color,i&&u.opacity(i)&&s.hasLines(x)&&x.line.width?i:x.fillcolor)}},{"../../components/color":366,"./subtypes":951}],937:[function(e,z,N){var u=e("../../lib"),s=e("../../components/fx"),m=e("../../registry"),x=e("./get_trace_color"),t=e("../../components/color"),i=u.fillText;z.exports=function(r,n,f,l){var o=r.cd,c=o[0].trace,h=r.xa,d=r.ya,p=h.c2p(n),y=d.c2p(f),g=[p,y],A=c.hoveron||"",b=c.mode.indexOf("markers")!==-1?3:.5,M=!!c.xperiodalignment,_=!!c.yperiodalignment;if(A.indexOf("points")!==-1){var T=function(oe){if(M){var ue=h.c2p(oe.xStart),ye=h.c2p(oe.xEnd);return p>=Math.min(ue,ye)&&p<=Math.max(ue,ye)?0:1/0}var ce=Math.max(3,oe.mrc||0),me=1-1/ce,xe=Math.abs(h.c2p(oe.x)-p);return xe<ce?me*xe/ce:xe-ce+me},w=function(oe){if(_){var ue=d.c2p(oe.yStart),ye=d.c2p(oe.yEnd);return y>=Math.min(ue,ye)&&y<=Math.max(ue,ye)?0:1/0}var ce=Math.max(3,oe.mrc||0),me=1-1/ce,xe=Math.abs(d.c2p(oe.y)-y);return xe<ce?me*xe/ce:xe-ce+me},v=function(oe){var ue=Math.max(b,oe.mrc||0),ye=h.c2p(oe.x)-p,ce=d.c2p(oe.y)-y;return Math.max(Math.sqrt(ye*ye+ce*ce)-ue,1-b/ue)},L=s.getDistanceFunction(l,T,w,v);if(s.getClosest(o,L,r),r.index!==!1){var S=o[r.index],k=h.c2p(S.x,!0),P=d.c2p(S.y,!0),O=S.mrc||1;r.index=S.i;var F=o[0].t.orientation,I=F&&(S.sNorm||S.s),D=F==="h"?I:S.orig_x!==void 0?S.orig_x:S.x,U=F==="v"?I:S.orig_y!==void 0?S.orig_y:S.y;return u.extendFlat(r,{color:x(c,S),x0:k-O,x1:k+O,xLabelVal:D,y0:P-O,y1:P+O,yLabelVal:U,spikeDistance:v(S),hovertemplate:c.hovertemplate}),i(S,c,r),m.getComponentMethod("errorbars","hoverInfo")(S,c,r),[r]}}if(A.indexOf("fills")!==-1&&c._polygons){var B=c._polygons,j=[],Z=!1,ee=1/0,q=-1/0,W=1/0,J=-1/0,le,fe,se,H,Y,ne,te,K,$;for(le=0;le<B.length;le++)se=B[le],se.contains(g)&&(Z=!Z,j.push(se),W=Math.min(W,se.ymin),J=Math.max(J,se.ymax));if(Z){W=Math.max(W,0),J=Math.min(J,d._length);var ae=(W+J)/2;for(le=0;le<j.length;le++)for(H=j[le].pts,fe=1;fe<H.length;fe++)K=H[fe-1][1],$=H[fe][1],K>ae!=$>=ae&&(ne=H[fe-1][0],te=H[fe][0],$-K&&(Y=ne+(te-ne)*(ae-K)/($-K),ee=Math.min(ee,Y),q=Math.max(q,Y)));ee=Math.max(ee,0),q=Math.min(q,h._length);var ie=t.defaultLine;return t.opacity(c.fillcolor)?ie=c.fillcolor:t.opacity((c.line||{}).color)&&(ie=c.line.color),u.extendFlat(r,{distance:r.maxHoverDistance,x0:ee,x1:q,y0:ae,y1:ae,color:ie,hovertemplate:!1}),delete r.index,c.text&&!Array.isArray(c.text)?r.text=String(c.text):r.text=c.name,[r]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(e,z,N){var u=e("./subtypes");z.exports={hasLines:u.hasLines,hasMarkers:u.hasMarkers,hasText:u.hasText,isBubble:u.isBubble,attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("./cross_trace_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./cross_trace_calc"),arraysToCalcdata:e("./arrays_to_calcdata"),plot:e("./plot"),colorbar:e("./marker_colorbar"),formatLabels:e("./format_labels"),style:e("./style").style,styleOnSelect:e("./style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(e,z,N){var u=e("../../lib").isArrayOrTypedArray,s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults");z.exports=function(t,i,a,r,n,f){var l=(t.marker||{}).color;if(n("line.color",a),s(t,"line"))m(t,i,r,n,{prefix:"line.",cLetter:"c"});else{var o=(u(l)?!1:l)||a;n("line.color",o)}n("line.width"),(f||{}).noDash||n("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(e,z,N){var u=e("../../constants/numerical"),s=u.BADNUM,m=u.LOG_CLIP,x=m+.5,t=m-.5,i=e("../../lib"),a=i.segmentsIntersect,r=i.constrain,n=e("./constants");z.exports=function(l,o){var c=o.xaxis,h=o.yaxis,d=c.type==="log",p=h.type==="log",y=c._length,g=h._length,A=o.connectGaps,b=o.baseTolerance,M=o.shape,_=M==="linear",T=o.fill&&o.fill!=="none",w=[],v=n.minTolerance,L=l.length,S=new Array(L),k=0,P,O,F,I,D,U,B,j,Z,ee,q,W,J,le,fe,se;function H(kt){var zt=l[kt];if(!zt)return!1;var Bt=o.linearized?c.l2p(zt.x):c.c2p(zt.x),Lt=o.linearized?h.l2p(zt.y):h.c2p(zt.y);if(Bt===s){if(d&&(Bt=c.c2p(zt.x,!0)),Bt===s)return!1;p&&Lt===s&&(Bt*=Math.abs(c._m*g*(c._m>0?x:t)/(h._m*y*(h._m>0?x:t)))),Bt*=1e3}if(Lt===s){if(p&&(Lt=h.c2p(zt.y,!0)),Lt===s)return!1;Lt*=1e3}return[Bt,Lt]}function Y(kt,zt,Bt,Lt){var Mt=Bt-kt,it=Lt-zt,ht=.5-kt,Qe=.5-zt,Ce=Mt*Mt+it*it,Xe=Mt*ht+it*Qe;if(Xe>0&&Xe<Ce){var rt=ht*it-Qe*Mt;if(rt*rt<Ce)return!0}}var ne,te;function K(kt,zt){var Bt=kt[0]/y,Lt=kt[1]/g,Mt=Math.max(0,-Bt,Bt-1,-Lt,Lt-1);return Mt&&ne!==void 0&&Y(Bt,Lt,ne,te)&&(Mt=0),Mt&&zt&&Y(Bt,Lt,zt[0]/y,zt[1]/g)&&(Mt=0),(1+n.toleranceGrowth*Mt)*b}function $(kt,zt){var Bt=kt[0]-zt[0],Lt=kt[1]-zt[1];return Math.sqrt(Bt*Bt+Lt*Lt)}var ae=n.maxScreensAway,ie=-y*ae,oe=y*(1+ae),ue=-g*ae,ye=g*(1+ae),ce=[[ie,ue,oe,ue],[oe,ue,oe,ye],[oe,ye,ie,ye],[ie,ye,ie,ue]],me,xe,ke,Ae,Oe,He;function Ge(kt,zt){for(var Bt=[],Lt=0,Mt=0;Mt<4;Mt++){var it=ce[Mt],ht=a(kt[0],kt[1],zt[0],zt[1],it[0],it[1],it[2],it[3]);ht&&(!Lt||Math.abs(ht.x-Bt[0][0])>1||Math.abs(ht.y-Bt[0][1])>1)&&(ht=[ht.x,ht.y],Lt&&$(ht,kt)<$(Bt[0],kt)?Bt.unshift(ht):Bt.push(ht),Lt++)}return Bt}function _e(kt){if(kt[0]<ie||kt[0]>oe||kt[1]<ue||kt[1]>ye)return[r(kt[0],ie,oe),r(kt[1],ue,ye)]}function Re(kt,zt){if(kt[0]===zt[0]&&(kt[0]===ie||kt[0]===oe)||kt[1]===zt[1]&&(kt[1]===ue||kt[1]===ye))return!0}function We(kt,zt){var Bt=[],Lt=_e(kt),Mt=_e(zt);return Lt&&Mt&&Re(Lt,Mt)||(Lt&&Bt.push(Lt),Mt&&Bt.push(Mt)),Bt}function qe(kt,zt,Bt){return function(Lt,Mt){var it=_e(Lt),ht=_e(Mt),Qe=[];if(it&&ht&&Re(it,ht))return Qe;it&&Qe.push(it),ht&&Qe.push(ht);var Ce=2*i.constrain((Lt[kt]+Mt[kt])/2,zt,Bt)-((it||Lt)[kt]+(ht||Mt)[kt]);if(Ce){var Xe;it&&ht?Xe=Ce>0==it[kt]>ht[kt]?it:ht:Xe=it||ht,Xe[kt]+=Ce}return Qe}}var Ue;M==="linear"||M==="spline"?Ue=Ge:M==="hv"||M==="vh"?Ue=We:M==="hvh"?Ue=qe(0,ie,oe):M==="vhv"&&(Ue=qe(1,ue,ye));function Ie(kt,zt){var Bt=zt[0]-kt[0],Lt=(zt[1]-kt[1])/Bt,Mt=(kt[1]*zt[0]-zt[1]*kt[0])/Bt;return Mt>0?[Lt>0?ie:oe,ye]:[Lt>0?oe:ie,ue]}function Ve(kt){var zt=kt[0],Bt=kt[1],Lt=zt===S[k-1][0],Mt=Bt===S[k-1][1];if(!(Lt&&Mt))if(k>1){var it=zt===S[k-2][0],ht=Bt===S[k-2][1];Lt&&(zt===ie||zt===oe)&&it?ht?k--:S[k-1]=kt:Mt&&(Bt===ue||Bt===ye)&&ht?it?k--:S[k-1]=kt:S[k++]=kt}else S[k++]=kt}function dt(kt){S[k-1][0]!==kt[0]&&S[k-1][1]!==kt[1]&&Ve([ke,Ae]),Ve(kt),Oe=null,ke=Ae=0}function Rt(kt){if(ne=kt[0]/y,te=kt[1]/g,me=kt[0]<ie?ie:kt[0]>oe?oe:0,xe=kt[1]<ue?ue:kt[1]>ye?ye:0,me||xe){if(!k)S[k++]=[me||kt[0],xe||kt[1]];else if(Oe){var zt=Ue(Oe,kt);zt.length>1&&(dt(zt[0]),S[k++]=zt[1])}else He=Ue(S[k-1],kt)[0],S[k++]=He;var Bt=S[k-1];me&&xe&&(Bt[0]!==me||Bt[1]!==xe)?(Oe&&(ke!==me&&Ae!==xe?Ve(ke&&Ae?Ie(Oe,kt):[ke||me,Ae||xe]):ke&&Ae&&Ve([ke,Ae])),Ve([me,xe])):ke-me&&Ae-xe&&Ve([me||ke,xe||Ae]),Oe=kt,ke=me,Ae=xe}else Oe&&dt(Ue(Oe,kt)[0]),S[k++]=kt}for(P=0;P<L;P++)if(O=H(P),!!O){for(k=0,Oe=null,Rt(O),P++;P<L;P++){if(I=H(P),!I){if(A)continue;break}if(!_||!o.simplify){Rt(I);continue}var Gt=H(P+1);if(ee=$(I,O),!(!(T&&(k===0||k===L-1))&&ee<K(I,Gt)*v)){for(j=[(I[0]-O[0])/ee,(I[1]-O[1])/ee],D=O,q=ee,W=le=fe=0,B=!1,F=I,P++;P<l.length;P++){if(U=Gt,Gt=H(P+1),!U){if(A)continue;break}if(Z=[U[0]-O[0],U[1]-O[1]],se=Z[0]*j[1]-Z[1]*j[0],le=Math.min(le,se),fe=Math.max(fe,se),fe-le>K(U,Gt))break;F=U,J=Z[0]*j[0]+Z[1]*j[1],J>q?(q=J,I=U,B=!1):J<W&&(W=J,D=U,B=!0)}if(B?(Rt(I),F!==D&&Rt(D)):(D!==O&&Rt(D),F!==I&&Rt(I)),Rt(F),P>=l.length||!U)break;Rt(U),O=U}}Oe&&Ve([ke||Oe[0],Ae||Oe[1]]),w.push(S.slice(0,k))}return w}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(e,z,N){z.exports=function(s,m,x){var t=x("line.shape");t==="spline"&&x("line.smoothing")}},{}],942:[function(e,z,N){var u={tonextx:1,tonexty:1,tonext:1};z.exports=function(m,x,t){var i,a,r,n,f,l={},o=!1,c=-1,h=0,d=-1;for(a=0;a<t.length;a++)i=t[a][0].trace,r=i.stackgroup||"",r?r in l?f=l[r]:(f=l[r]=h,h++):i.fill in u&&d>=0?f=d:(f=d=h,h++),f<c&&(o=!0),i._groupIndex=c=f;var p=t.slice();o&&p.sort(function(g,A){var b=g[0].trace,M=A[0].trace;return b._groupIndex-M._groupIndex||b.index-M.index});var y={};for(a=0;a<p.length;a++)i=p[a][0].trace,r=i.stackgroup||"",i.visible===!0?(i._nexttrace=null,i.fill in u&&(n=y[r],i._prevtrace=n||null,n&&(n._nexttrace=i)),i._ownfill=i.fill&&(i.fill.substr(0,6)==="tozero"||i.fill==="toself"||i.fill.substr(0,2)==="to"&&!i._prevtrace),y[r]=i):i._prevtrace=i._nexttrace=i._ownfill=null;return p}},{}],943:[function(e,z,N){var u=e("fast-isnumeric");z.exports=function(m,x){x||(x=2);var t=m.marker,i=t.sizeref||1,a=t.sizemin||0,r=t.sizemode==="area"?function(n){return Math.sqrt(n/i)}:function(n){return n/i};return function(n){var f=r(n/x);return u(f)&&f>0?Math.max(f,a):0}}},{"fast-isnumeric":190}],944:[function(e,z,N){z.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(e,z,N){var u=e("../../components/color"),s=e("../../components/colorscale/helpers").hasColorscale,m=e("../../components/colorscale/defaults"),x=e("./subtypes");z.exports=function(i,a,r,n,f,l){var o=x.isBubble(i),c=(i.line||{}).color,h;if(l=l||{},c&&(r=c),f("marker.symbol"),f("marker.opacity",o?.7:1),f("marker.size"),f("marker.color",r),s(i,"marker")&&m(i,a,n,f,{prefix:"marker.",cLetter:"c"}),l.noSelect||(f("selected.marker.color"),f("unselected.marker.color"),f("selected.marker.size"),f("unselected.marker.size")),l.noLine||(c&&!Array.isArray(c)&&a.marker.color!==c?h=c:o?h=u.background:h=u.defaultLine,f("marker.line.color",h),s(i,"marker.line")&&m(i,a,n,f,{prefix:"marker.line.",cLetter:"c"}),f("marker.line.width",o?1:0)),o&&(f("marker.sizeref"),f("marker.sizemin"),f("marker.sizemode")),l.gradient){var d=f("marker.gradient.type");d!=="none"&&f("marker.gradient.color")}}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(e,z,N){var u=e("../../lib").dateTick0,s=e("../../constants/numerical"),m=s.ONEWEEK;function x(t,i){return t%m==0?u(i,1):u(i,0)}z.exports=function(i,a,r,n,f){if(f||(f={x:!0,y:!0}),f.x){var l=n("xperiod");l&&(n("xperiod0",x(l,a.xcalendar)),n("xperiodalignment"))}if(f.y){var o=n("yperiod");o&&(n("yperiod0",x(o,a.ycalendar)),n("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../lib"),x=m.ensureSingle,t=m.identity,i=e("../../components/drawing"),a=e("./subtypes"),r=e("./line_points"),n=e("./link_traces"),f=e("../../lib/polygon").tester;z.exports=function(d,p,y,g,A,b){var M,_,T=!A,w=!!A&&A.duration>0,v=n(d,p,y);if(M=g.selectAll("g.trace").data(v,function(S){return S[0].trace.uid}),M.enter().append("g").attr("class",function(S){return"trace scatter trace"+S[0].trace.uid}).style("stroke-miterlimit",2),M.order(),l(d,M,p),w){b&&(_=b());var L=u.transition().duration(A.duration).ease(A.easing).each("end",function(){_&&_()}).each("interrupt",function(){_&&_()});L.each(function(){g.selectAll("g.trace").each(function(S,k){o(d,k,p,S,v,this,A)})})}else M.each(function(S,k){o(d,k,p,S,v,this,A)});T&&M.exit().remove(),g.selectAll("path:not([d])").remove()};function l(h,d,p){d.each(function(y){var g=x(u.select(this),"g","fills");i.setClipUrl(g,p.layerClipId,h);var A=y[0].trace,b=[];A._ownfill&&b.push("_ownFill"),A._nexttrace&&b.push("_nextFill");var M=g.selectAll("g").data(b,t);M.enter().append("g"),M.exit().each(function(_){A[_]=null}).remove(),M.order().each(function(_){A[_]=x(u.select(this),"path","js-fill")})})}function o(h,d,p,y,g,A,b){var M;c(h,d,p,y,g);var _=!!b&&b.duration>0;function T(Ge){return _?Ge.transition():Ge}var w=p.xaxis,v=p.yaxis,L=y[0].trace,S=L.line,k=u.select(A),P=x(k,"g","errorbars"),O=x(k,"g","lines"),F=x(k,"g","points"),I=x(k,"g","text");if(s.getComponentMethod("errorbars","plot")(h,P,p,b),L.visible!==!0)return;T(k).style("opacity",L.opacity);var D,U,B=L.fill.charAt(L.fill.length-1);B!=="x"&&B!=="y"&&(B=""),y[0][p.isRangePlot?"nodeRangePlot3":"node3"]=k;var j="",Z=[],ee=L._prevtrace;ee&&(j=ee._prevRevpath||"",U=ee._nextFill,Z=ee._polygons);var q,W,J="",le="",fe,se,H,Y,ne,te,K,$=[],ae=m.noop;if(D=L._ownFill,a.hasLines(L)||L.fill!=="none"){for(U&&U.datum(y),["hv","vh","hvh","vhv"].indexOf(S.shape)!==-1?(fe=i.steps(S.shape),se=i.steps(S.shape.split("").reverse().join(""))):S.shape==="spline"?fe=se=function(Ge){var _e=Ge[Ge.length-1];return Ge.length>1&&Ge[0][0]===_e[0]&&Ge[0][1]===_e[1]?i.smoothclosed(Ge.slice(1),S.smoothing):i.smoothopen(Ge,S.smoothing)}:fe=se=function(Ge){return"M"+Ge.join("L")},H=function(Ge){return se(Ge.reverse())},$=r(y,{xaxis:w,yaxis:v,connectGaps:L.connectgaps,baseTolerance:Math.max(S.width||1,3)/4,shape:S.shape,simplify:S.simplify,fill:L.fill}),K=L._polygons=new Array($.length),M=0;M<$.length;M++)L._polygons[M]=f($[M]);$.length&&(Y=$[0][0],ne=$[$.length-1],te=ne[ne.length-1]),ae=function(Ge){return function(_e){if(q=fe(_e),W=H(_e),J?B?(J+="L"+q.substr(1),le=W+("L"+le.substr(1))):(J+="Z"+q,le=W+"Z"+le):(J=q,le=W),a.hasLines(L)&&_e.length>1){var Re=u.select(this);if(Re.datum(y),Ge)T(Re.style("opacity",0).attr("d",q).call(i.lineGroupStyle)).style("opacity",1);else{var We=T(Re);We.attr("d",q),i.singleLineStyle(y,We)}}}}}var ie=O.selectAll(".js-line").data($);T(ie.exit()).style("opacity",0).remove(),ie.each(ae(!1)),ie.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(i.lineGroupStyle).each(ae(!0)),i.setClipUrl(ie,p.layerClipId,h);function oe(Ge){T(Ge).attr("d","M0,0Z")}$.length?(D?(D.datum(y),Y&&te&&(B?(B==="y"?Y[1]=te[1]=v.c2p(0,!0):B==="x"&&(Y[0]=te[0]=w.c2p(0,!0)),T(D).attr("d","M"+te+"L"+Y+"L"+J.substr(1)).call(i.singleFillStyle)):T(D).attr("d",J+"Z").call(i.singleFillStyle))):U&&(L.fill.substr(0,6)==="tonext"&&J&&j?(L.fill==="tonext"?T(U).attr("d",J+"Z"+j+"Z").call(i.singleFillStyle):T(U).attr("d",J+"L"+j.substr(1)+"Z").call(i.singleFillStyle),L._polygons=L._polygons.concat(Z)):(oe(U),L._polygons=null)),L._prevRevpath=le,L._prevPolygons=K):(D?oe(D):U&&oe(U),L._polygons=L._prevRevpath=L._prevPolygons=null);function ue(Ge){return Ge.filter(function(_e){return!_e.gap&&_e.vis})}function ye(Ge){return Ge.filter(function(_e){return _e.vis})}function ce(Ge){return Ge.filter(function(_e){return!_e.gap})}function me(Ge){return Ge.id}function xe(Ge){if(Ge.ids)return me}function ke(){return!1}function Ae(Ge,_e,Re){var We,qe,Ue,Ie=Re[0].trace,Ve=a.hasMarkers(Ie),dt=a.hasText(Ie),Rt=xe(Ie),Gt=ke,kt=ke;if(Ve||dt){var zt=t,Bt=Ie.stackgroup,Lt=Bt&&h._fullLayout._scatterStackOpts[w._id+v._id][Bt].stackgaps==="infer zero";Ie.marker.maxdisplayed||Ie._needsCull?zt=Lt?ye:ue:Bt&&!Lt&&(zt=ce),Ve&&(Gt=zt),dt&&(kt=zt)}qe=Ge.selectAll("path.point"),We=qe.data(Gt,Rt);var Mt=We.enter().append("path").classed("point",!0);_&&Mt.call(i.pointStyle,Ie,h).call(i.translatePoints,w,v).style("opacity",0).transition().style("opacity",1),We.order();var it;Ve&&(it=i.makePointStyleFns(Ie)),We.each(function(ht){var Qe=u.select(this),Ce=T(Qe);Ue=i.translatePoint(ht,Ce,w,v),Ue?(i.singlePointStyle(ht,Ce,Ie,it,h),p.layerClipId&&i.hideOutsideRangePoint(ht,Ce,w,v,Ie.xcalendar,Ie.ycalendar),Ie.customdata&&Qe.classed("plotly-customdata",ht.data!==null&&ht.data!==void 0)):Ce.remove()}),_?We.exit().transition().style("opacity",0).remove():We.exit().remove(),qe=_e.selectAll("g"),We=qe.data(kt,Rt),We.enter().append("g").classed("textpoint",!0).append("text"),We.order(),We.each(function(ht){var Qe=u.select(this),Ce=T(Qe.select("text"));Ue=i.translatePoint(ht,Ce,w,v),Ue?p.layerClipId&&i.hideOutsideRangePoint(ht,Qe,w,v,Ie.xcalendar,Ie.ycalendar):Qe.remove()}),We.selectAll("text").call(i.textPointStyle,Ie,h).each(function(ht){var Qe=w.c2p(ht.x),Ce=v.c2p(ht.y);u.select(this).selectAll("tspan.line").each(function(){T(u.select(this)).attr({x:Qe,y:Ce})})}),We.exit().remove()}F.datum(y),I.datum(y),Ae(F,I,y);var Oe=L.cliponaxis===!1,He=Oe?null:p.layerClipId;i.setClipUrl(F,He,h),i.setClipUrl(I,He,h)}function c(h,d,p,y,g){var A=p.xaxis,b=p.yaxis,M=u.extent(m.simpleMap(A.range,A.r2c)),_=u.extent(m.simpleMap(b.range,b.r2c)),T=y[0].trace;if(!!a.hasMarkers(T)){var w=T.marker.maxdisplayed;if(w!==0){var v=y.filter(function(P){return P.x>=M[0]&&P.x<=M[1]&&P.y>=_[0]&&P.y<=_[1]}),L=Math.ceil(v.length/w),S=0;g.forEach(function(P,O){var F=P[0].trace;a.hasMarkers(F)&&F.marker.maxdisplayed>0&&O<d&&S++});var k=Math.round(S*L/3+Math.floor(S/3)*L/7.1);y.forEach(function(P){delete P.vis}),v.forEach(function(P,O){Math.round((O+k)%L)===0&&(P.vis=!0)})}}}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(e,z,N){var u=e("./subtypes");z.exports=function(m,x){var t=m.cd,i=m.xaxis,a=m.yaxis,r=[],n=t[0].trace,f,l,o,c,h=!u.hasMarkers(n)&&!u.hasText(n);if(h)return[];if(x===!1)for(f=0;f<t.length;f++)t[f].selected=0;else for(f=0;f<t.length;f++)l=t[f],o=i.c2p(l.x),c=a.c2p(l.y),l.i!==null&&x.contains([o,c],!1,f,m)?(r.push({pointNumber:l.i,x:i.c2d(l.x),y:a.c2d(l.y)}),l.selected=1):l.selected=0;return r}},{"./subtypes":951}],949:[function(e,z,N){var u=["orientation","groupnorm","stackgaps"];z.exports=function(m,x,t,i){var a=t._scatterStackOpts,r=i("stackgroup");if(r){var n=x.xaxis+x.yaxis,f=a[n];f||(f=a[n]={});var l=f[r],o=!1;l?l.traces.push(x):(l=f[r]={traceIndices:[],traces:[x]},o=!0);for(var c={orientation:x.x&&!x.y?"h":"v"},h=0;h<u.length;h++){var d=u[h],p=d+"Found";if(!l[p]){var y=m[d]!==void 0,g=d==="orientation";if((y||o)&&(l[d]=i(d,c[d]),g&&(l.fillDflt=l[d]==="h"?"tonextx":"tonexty"),y&&(l[p]=!0,!o&&(delete l.traces[0][d],g))))for(var A=0;A<l.traces.length-1;A++){var b=l.traces[A];b._input.fill!==b.fill&&(b.fill=l.fillDflt)}}}return l}}},{}],950:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../registry");function x(r){var n=u.select(r).selectAll("g.trace.scatter");n.style("opacity",function(f){return f[0].trace.opacity}),n.selectAll("g.points").each(function(f){var l=u.select(this),o=f.trace||f[0].trace;t(l,o,r)}),n.selectAll("g.text").each(function(f){var l=u.select(this),o=f.trace||f[0].trace;i(l,o,r)}),n.selectAll("g.trace path.js-line").call(s.lineGroupStyle),n.selectAll("g.trace path.js-fill").call(s.fillGroupStyle),m.getComponentMethod("errorbars","style")(n)}function t(r,n,f){s.pointStyle(r.selectAll("path.point"),n,f)}function i(r,n,f){s.textPointStyle(r.selectAll("text"),n,f)}function a(r,n,f){var l=n[0].trace;l.selectedpoints?(s.selectedPointStyle(f.selectAll("path.point"),l),s.selectedTextStyle(f.selectAll("text"),l)):(t(f,l,r),i(f,l,r))}z.exports={style:x,stylePoints:t,styleText:i,styleOnSelect:a}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(e,z,N){var u=e("../../lib");z.exports={hasLines:function(s){return s.visible&&s.mode&&s.mode.indexOf("lines")!==-1},hasMarkers:function(s){return s.visible&&(s.mode&&s.mode.indexOf("markers")!==-1||s.type==="splom")},hasText:function(s){return s.visible&&s.mode&&s.mode.indexOf("text")!==-1},isBubble:function(s){return u.isPlainObject(s.marker)&&u.isArrayOrTypedArray(s.marker.size)}}},{"../../lib":503}],952:[function(e,z,N){var u=e("../../lib");z.exports=function(s,m,x,t,i){i=i||{},t("textposition"),u.coerceFont(t,"textfont",x.font),i.noSelect||(t("selected.textfont.color"),t("unselected.textfont.color"))}},{"../../lib":503}],953:[function(e,z,N){var u=e("../../lib"),s=e("../../registry");z.exports=function(x,t,i,a){var r=a("x"),n=a("y"),f,l=s.getComponentMethod("calendars","handleTraceDefaults");if(l(x,t,["x","y"],i),r){var o=u.minRowLength(r);n?f=Math.min(o,u.minRowLength(n)):(f=o,a("y0"),a("dy"))}else{if(!n)return 0;f=u.minRowLength(n),a("x0"),a("dx")}return t._length=f,f}},{"../../lib":503,"../../registry":638}],954:[function(e,z,N){var u=e("../scatter/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/template_attributes").texttemplateAttrs,i=e("../../plots/attributes"),a=e("../../constants/gl3d_dashes"),r=e("../../constants/gl3d_markers"),n=e("../../lib/extend").extendFlat,f=e("../../plot_api/edit_types").overrideAll,l=e("../../lib/sort_object_keys"),o=u.line,c=u.marker,h=c.line,d=n({width:o.width,dash:{valType:"enumerated",values:l(a),dflt:"solid"}},s("line"));function p(g){return{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}}var y=z.exports=f({x:u.x,y:u.y,z:{valType:"data_array"},text:n({},u.text,{}),texttemplate:t({},{}),hovertext:n({},u.hovertext,{}),hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),mode:n({},u.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:p(),y:p(),z:p()},connectgaps:u.connectgaps,line:d,marker:n({symbol:{valType:"enumerated",values:l(r),dflt:"circle",arrayOk:!0},size:n({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:n({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:n({width:n({},h.width,{arrayOk:!1})},s("marker.line"))},s("marker")),textposition:n({},u.textposition,{dflt:"top center"}),textfont:{color:u.textfont.color,size:u.textfont.size,family:n({},u.textfont.family,{arrayOk:!1})},opacity:i.opacity,hoverinfo:n({},i.hoverinfo)},"calc","nested");y.x.editType=y.y.editType=y.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(e,z,N){var u=e("../scatter/arrays_to_calcdata"),s=e("../scatter/colorscale_calc");z.exports=function(x,t){var i=[{x:!1,y:!1,trace:t,t:{}}];return u(i,t),s(x,t),i}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(e,z,N){var u=e("../../registry");function s(t,i,a,r){if(!i||!i.visible)return null;for(var n=u.getComponentMethod("errorbars","makeComputeError")(i),f=new Array(t.length),l=0;l<t.length;l++){var o=n(+t[l],l);if(r.type==="log"){var c=r.c2l(t[l]),h=t[l]-o[0],d=t[l]+o[1];if(f[l]=[(r.c2l(h,!0)-c)*a,(r.c2l(d,!0)-c)*a],h>0){var p=r.c2l(h);r._lowerLogErrorBound||(r._lowerLogErrorBound=p),r._lowerErrorBound=Math.min(r._lowerLogErrorBound,p)}}else f[l]=[-o[0]*a,o[1]*a]}return f}function m(t){for(var i=0;i<t.length;i++)if(t[i])return t[i].length;return 0}function x(t,i,a){var r=[s(t.x,t.error_x,i[0],a.xaxis),s(t.y,t.error_y,i[1],a.yaxis),s(t.z,t.error_z,i[2],a.zaxis)],n=m(r);if(n===0)return null;for(var f=new Array(n),l=0;l<n;l++){for(var o=[[0,0,0],[0,0,0]],c=0;c<3;c++)if(r[c])for(var h=0;h<2;h++)o[h][c]=r[c][l][h];f[l]=o}return f}z.exports=x},{"../../registry":638}],957:[function(e,z,N){var u=e("../../../stackgl_modules").gl_line3d,s=e("../../../stackgl_modules").gl_scatter3d,m=e("../../../stackgl_modules").gl_error3d,x=e("../../../stackgl_modules").gl_mesh3d,t=e("../../../stackgl_modules").delaunay_triangulate,i=e("../../lib"),a=e("../../lib/str2rgbarray"),r=e("../../lib/gl_format_color").formatColor,n=e("../scatter/make_bubble_size_func"),f=e("../../constants/gl3d_dashes"),l=e("../../constants/gl3d_markers"),o=e("../../plots/cartesian/axes"),c=e("../../components/fx/helpers").appendArrayPointValue,h=e("./calc_errors");function d(P,O){this.scene=P,this.uid=O,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var p=d.prototype;p.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var O=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[O]||this.textLabels[O]===0)&&(P.textLabel=this.textLabels[O]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[O],this.data.y[O],this.data.z[O]],!0}};function y(P,O,F){var I=(F+1)%3,D=(F+2)%3,U=[],B=[],j;for(j=0;j<P.length;++j){var Z=P[j];isNaN(Z[I])||!isFinite(Z[I])||isNaN(Z[D])||!isFinite(Z[D])||(U.push([Z[I],Z[D]]),B.push(j))}var ee=t(U);for(j=0;j<ee.length;++j)for(var q=ee[j],W=0;W<q.length;++W)q[W]=B[q[W]];return{positions:P,cells:ee,meshColor:O}}function g(P){for(var O=[0,0,0],F=[[0,0,0],[0,0,0],[0,0,0]],I=[1,1,1],D=0;D<3;D++){var U=P[D];U&&U.copy_zstyle!==!1&&P[2].visible!==!1&&(U=P[2]),!(!U||!U.visible)&&(O[D]=U.width/2,F[D]=a(U.color),I[D]=U.thickness)}return{capSize:O,color:F,lineWidth:I}}function A(P){return P==null?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function b(P){return P==null?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function M(P){var O=0,F=0,I=[O,F];if(Array.isArray(P))for(var D=0;D<P.length;D++)I[D]=[O,F],P[D]&&(I[D][0]=A(P[D]),I[D][1]=b(P[D]));else I[0]=A(P),I[1]=b(P);return I}function _(P,O){return O(P*4)}function T(P){return l[P]}function w(P,O,F,I,D){var U=null;if(i.isArrayOrTypedArray(P)){U=[];for(var B=0;B<O;B++)P[B]===void 0?U[B]=I:U[B]=F(P[B],D)}else U=F(P,i.identity);return U}function v(P,O){var F=[],I=P.fullSceneLayout,D=P.dataScale,U=I.xaxis,B=I.yaxis,j=I.zaxis,Z=O.marker,ee=O.line,q=O.x||[],W=O.y||[],J=O.z||[],le=q.length,fe=O.xcalendar,se=O.ycalendar,H=O.zcalendar,Y,ne,te,K,$,ae;for($=0;$<le;$++)Y=U.d2l(q[$],0,fe)*D[0],ne=B.d2l(W[$],0,se)*D[1],te=j.d2l(J[$],0,H)*D[2],F[$]=[Y,ne,te];if(Array.isArray(O.text))ae=O.text;else if(O.text!==void 0)for(ae=new Array(le),$=0;$<le;$++)ae[$]=O.text;function ie(qe,Ue){var Ie=I[qe];return o.tickText(Ie,Ie.d2l(Ue),!0).text}var oe=O.texttemplate;if(oe){var ue=P.fullLayout,ye=ue._d3locale,ce=Array.isArray(oe),me=ce?Math.min(oe.length,le):le,xe=ce?function(qe){return oe[qe]}:function(){return oe};for(ae=new Array(me),$=0;$<me;$++){var ke={x:q[$],y:W[$],z:J[$]},Ae={xLabel:ie("xaxis",q[$]),yLabel:ie("yaxis",W[$]),zLabel:ie("zaxis",J[$])},Oe={};c(Oe,O,$);var He=O._meta||{};ae[$]=i.texttemplateString(xe($),Ae,ye,Oe,ke,He)}}if(K={position:F,mode:O.mode,text:ae},"line"in O&&(K.lineColor=r(ee,1,le),K.lineWidth=ee.width,K.lineDashes=ee.dash),"marker"in O){var Ge=n(O);K.scatterColor=r(Z,1,le),K.scatterSize=w(Z.size,le,_,20,Ge),K.scatterMarker=w(Z.symbol,le,T,"\u25CF"),K.scatterLineWidth=Z.line.width,K.scatterLineColor=r(Z.line,1,le),K.scatterAngle=0}"textposition"in O&&(K.textOffset=M(O.textposition),K.textColor=r(O.textfont,1,le),K.textSize=w(O.textfont.size,le,i.identity,12),K.textFont=O.textfont.family,K.textAngle=0);var _e=["x","y","z"];for(K.project=[!1,!1,!1],K.projectScale=[1,1,1],K.projectOpacity=[1,1,1],$=0;$<3;++$){var Re=O.projection[_e[$]];(K.project[$]=Re.show)&&(K.projectOpacity[$]=Re.opacity,K.projectScale[$]=Re.scale)}K.errorBounds=h(O,D,I);var We=g([O.error_x,O.error_y,O.error_z]);return K.errorColor=We.color,K.errorLineWidth=We.lineWidth,K.errorCapSize=We.capSize,K.delaunayAxis=O.surfaceaxis,K.delaunayColor=a(O.surfacecolor),K}function L(P){if(i.isArrayOrTypedArray(P)){var O=P[0];return i.isArrayOrTypedArray(O)&&(P=O),"rgb("+P.slice(0,3).map(function(F){return Math.round(F*255)})+")"}return null}function S(P){return i.isArrayOrTypedArray(P)?P.length===4&&typeof P[0]=="number"?L(P):P.map(L):null}p.update=function(P){var O=this.scene.glplot.gl,F,I,D,U,B=f.solid;this.data=P;var j=v(this.scene,P);"mode"in j&&(this.mode=j.mode),"lineDashes"in j&&j.lineDashes in f&&(B=f[j.lineDashes]),this.color=S(j.scatterColor)||S(j.lineColor),this.dataPoints=j.position,F={gl:this.scene.glplot.gl,position:j.position,color:j.lineColor,lineWidth:j.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:P.opacity,connectGaps:P.connectgaps},this.mode.indexOf("lines")!==-1?this.linePlot?this.linePlot.update(F):(this.linePlot=u(F),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Z=P.opacity;if(P.marker&&P.marker.opacity&&(Z*=P.marker.opacity),I={gl:this.scene.glplot.gl,position:j.position,color:j.scatterColor,size:j.scatterSize,glyph:j.scatterMarker,opacity:Z,orthographic:!0,lineWidth:j.scatterLineWidth,lineColor:j.scatterLineColor,project:j.project,projectScale:j.projectScale,projectOpacity:j.projectOpacity},this.mode.indexOf("markers")!==-1?this.scatterPlot?this.scatterPlot.update(I):(this.scatterPlot=s(I),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),U={gl:this.scene.glplot.gl,position:j.position,glyph:j.text,color:j.textColor,size:j.textSize,angle:j.textAngle,alignment:j.textOffset,font:j.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,this.mode.indexOf("text")!==-1?this.textMarkers?this.textMarkers.update(U):(this.textMarkers=s(U),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),D={gl:this.scene.glplot.gl,position:j.position,color:j.errorColor,error:j.errorBounds,lineWidth:j.errorLineWidth,capSize:j.errorCapSize,opacity:P.opacity},this.errorBars?j.errorBounds?this.errorBars.update(D):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):j.errorBounds&&(this.errorBars=m(D),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),j.delaunayAxis>=0){var ee=y(j.position,j.delaunayColor,j.delaunayAxis);ee.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(ee):(ee.gl=O,this.delaunayMesh=x(ee),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},p.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())};function k(P,O){var F=new d(P,O.uid);return F.update(O),F}z.exports=k},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/text_defaults"),a=e("./attributes");z.exports=function(f,l,o,c){function h(_,T){return s.coerce(f,l,a,_,T)}var d=r(f,l,h,c);if(!d){l.visible=!1;return}h("text"),h("hovertext"),h("hovertemplate"),h("xhoverformat"),h("yhoverformat"),h("zhoverformat"),h("mode"),m.hasLines(l)&&(h("connectgaps"),t(f,l,o,c,h)),m.hasMarkers(l)&&x(f,l,o,c,h,{noSelect:!0}),m.hasText(l)&&(h("texttemplate"),i(f,l,c,h,{noSelect:!0}));var p=(l.line||{}).color,y=(l.marker||{}).color;h("surfaceaxis")>=0&&h("surfacecolor",p||y);for(var g=["x","y","z"],A=0;A<3;++A){var b="projection."+g[A];h(b+".show")&&(h(b+".opacity"),h(b+".scale"))}var M=u.getComponentMethod("errorbars","supplyDefaults");M(f,l,p||y||o,{axis:"z"}),M(f,l,p||y||o,{axis:"y",inherit:"z"}),M(f,l,p||y||o,{axis:"x",inherit:"z"})};function r(n,f,l,o){var c=0,h=l("x"),d=l("y"),p=l("z"),y=u.getComponentMethod("calendars","handleTraceDefaults");return y(n,f,["x","y","z"],o),h&&d&&p&&(c=Math.min(h.length,d.length,p.length),f._length=f._xlength=f._ylength=f._zlength=c),c}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(e,z,N){z.exports={plot:e("./convert"),attributes:e("./attributes"),markerSymbols:e("../../constants/gl3d_markers"),supplyDefaults:e("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:e("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(e,z,N){var u=e("../scatter/attributes"),s=e("../../plots/attributes"),m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../../plots/template_attributes").texttemplateAttrs,t=e("../../components/colorscale/attributes"),i=e("../../lib/extend").extendFlat,a=u.marker,r=u.line,n=a.line;z.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:i({},u.mode,{dflt:"markers"}),text:i({},u.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","text"]}),hovertext:i({},u.hovertext,{}),line:{color:r.color,width:r.width,dash:r.dash,shape:i({},r.shape,{values:["linear","spline"]}),smoothing:r.smoothing,editType:"calc"},connectgaps:u.connectgaps,fill:i({},u.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:u.fillcolor,marker:i({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:i({width:n.width,editType:"calc"},t("marker.line")),gradient:a.gradient,editType:"calc"},t("marker")),textfont:u.textfont,textposition:u.textposition,selected:u.selected,unselected:u.unselected,hoverinfo:i({},s.hoverinfo,{flags:["a","b","text","name"]}),hoveron:u.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../scatter/colorscale_calc"),m=e("../scatter/arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,i=e("../carpet/lookup_carpetid");z.exports=function(r,n){var f=n._carpetTrace=i(r,n);if(!(!f||!f.visible||f.visible==="legendonly")){var l;n.xaxis=f.xaxis,n.yaxis=f.yaxis;var o=n._length,c=new Array(o),h,d,p=!1;for(l=0;l<o;l++)if(h=n.a[l],d=n.b[l],u(h)&&u(d)){var y=f.ab2xy(+h,+d,!0),g=f.isVisible(+h,+d);g||(p=!0),c[l]={x:y[0],y:y[1],a:h,b:d,vis:g}}else c[l]={x:!1,y:!1};return n._needsCull=p,c[0].carpet=f,c[0].trace=n,t(n,o),s(r,n),m(c,n),x(c,n),c}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/constants"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),r=e("../scatter/fillcolor_defaults"),n=e("./attributes");z.exports=function(l,o,c,h){function d(_,T){return u.coerce(l,o,n,_,T)}d("carpet"),o.xaxis="x",o.yaxis="y";var p=d("a"),y=d("b"),g=Math.min(p.length,y.length);if(!g){o.visible=!1;return}o._length=g,d("text"),d("texttemplate"),d("hovertext");var A=g<s.PTS_LINESONLY?"lines+markers":"lines";d("mode",A),m.hasLines(o)&&(t(l,o,c,h,d),i(l,o,d),d("connectgaps")),m.hasMarkers(o)&&x(l,o,c,h,d,{gradient:!0}),m.hasText(o)&&a(l,o,h,d);var b=[];(m.hasMarkers(o)||m.hasText(o))&&(d("marker.maxdisplayed"),b.push("points")),d("fill"),o.fill!=="none"&&(r(l,o,c,d),m.hasLines(o)||i(l,o,d)),(o.fill==="tonext"||o.fill==="toself")&&b.push("fills");var M=d("hoveron",b.join("+")||"points");M!=="fills"&&d("hovertemplate"),u.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(e,z,N){z.exports=function(s,m,x,t,i){var a=t[i];return s.a=a.a,s.b=a.b,s.y=a.y,s}},{}],964:[function(e,z,N){z.exports=function(s,m){var x={},t=m._carpet,i=t.ab2ij([s.a,s.b]),a=Math.floor(i[0]),r=i[0]-a,n=Math.floor(i[1]),f=i[1]-n,l=t.evalxy([],a,n,r,f);return x.yLabel=l[1].toFixed(3),x}},{}],965:[function(e,z,N){var u=e("../scatter/hover"),s=e("../../lib").fillText;z.exports=function(x,t,i,a){var r=u(x,t,i,a);if(!r||r[0].index===!1)return;var n=r[0];if(n.index===void 0){var f=1-n.y0/x.ya._length,l=x.xa._length,o=l*f/2,c=l-o;return n.x0=Math.max(Math.min(n.x0,c),o),n.x1=Math.max(Math.min(n.x1,c),o),r}var h=n.cd[n.index];n.a=h.a,n.b=h.b,n.xLabelVal=void 0,n.yLabelVal=void 0;var d=n.trace,p=d._carpet,y=d._module.formatLabels(h,d);n.yLabel=y.yLabel,delete n.text;var g=[];function A(_,T){var w;_.labelprefix&&_.labelprefix.length>0?w=_.labelprefix.replace(/ = $/,""):w=_._hovertitle,g.push(w+": "+T.toFixed(3)+_.labelsuffix)}if(!d.hovertemplate){var b=h.hi||d.hoverinfo,M=b.split("+");M.indexOf("all")!==-1&&(M=["a","b","text"]),M.indexOf("a")!==-1&&A(p.aaxis,h.a),M.indexOf("b")!==-1&&A(p.baxis,h.b),g.push("y: "+n.yLabel),M.indexOf("text")!==-1&&s(h,d,g),n.extraText=g.join("<br>")}return r}},{"../../lib":503,"../scatter/hover":937}],966:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:e("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(e,z,N){var u=e("../scatter/plot"),s=e("../../plots/cartesian/axes"),m=e("../../components/drawing");z.exports=function(t,i,a,r){var n,f,l,o=a[0][0].carpet,c={xaxis:s.getFromId(t,o.xaxis||"x"),yaxis:s.getFromId(t,o.yaxis||"y"),plot:i.plot};for(u(t,c,a,r),n=0;n<a.length;n++)f=a[n][0].trace,l=r.selectAll("g.trace"+f.uid+" .js-line"),m.setClipUrl(l,a[n][0].carpet._clipPathId,t)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scatter/attributes"),x=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),i=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,r=e("../../plot_api/edit_types").overrideAll,n=m.marker,f=m.line,l=n.line;z.exports=r({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},m.mode,{dflt:"markers"}),text:a({},m.text,{}),texttemplate:s({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},m.hovertext,{}),textfont:m.textfont,textposition:m.textposition,line:{color:f.color,width:f.width,dash:i},connectgaps:m.connectgaps,marker:a({symbol:n.symbol,opacity:n.opacity,size:n.size,sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,colorbar:n.colorbar,line:a({width:l.width},t("marker.line")),gradient:n.gradient},t("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:m.fillcolor,selected:m.selected,unselected:m.unselected,hoverinfo:a({},x.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:u()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../scatter/colorscale_calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),i=e("../../lib")._;function a(r){return r&&typeof r=="string"}z.exports=function(n,f){var l=Array.isArray(f.locations),o=l?f.locations.length:f._length,c=new Array(o),h;f.geojson?h=function(b){return a(b)||u(b)}:h=a;for(var d=0;d<o;d++){var p=c[d]={};if(l){var y=f.locations[d];p.loc=h(y)?y:null}else{var g=f.lon[d],A=f.lat[d];u(g)&&u(A)?p.lonlat=[+g,+A]:p.lonlat=[s,s]}}return x(c,f),m(n,f),t(c,f),o&&(c[0].t={labels:{lat:i(n,"lat:")+" ",lon:i(n,"lon:")+" "}}),c}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),a=e("./attributes");z.exports=function(n,f,l,o){function c(M,_){return u.coerce(n,f,a,M,_)}var h=c("locations"),d;if(h&&h.length){var p=c("geojson"),y;(typeof p=="string"&&p!==""||u.isPlainObject(p))&&(y="geojson-id");var g=c("locationmode",y);g==="geojson-id"&&c("featureidkey"),d=h.length}else{var A=c("lon")||[],b=c("lat")||[];d=Math.min(A.length,b.length)}if(!d){f.visible=!1;return}f._length=d,c("text"),c("hovertext"),c("hovertemplate"),c("mode"),s.hasLines(f)&&(x(n,f,l,o,c),c("connectgaps")),s.hasMarkers(f)&&m(n,f,l,o,c,{gradient:!0}),s.hasText(f)&&(c("texttemplate"),t(n,f,o,c)),c("fill"),f.fill!=="none"&&i(n,f,l,c),u.coerceSelectionMarkerOpacity(f,c)}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(e,z,N){z.exports=function(s,m,x,t,i){s.lon=m.lon,s.lat=m.lat,s.location=m.loc?m.loc:null;var a=t[i];return a.fIn&&a.fIn.properties&&(s.properties=a.fIn.properties),s}},{}],972:[function(e,z,N){var u=e("../../plots/cartesian/axes");z.exports=function(m,x,t){var i={},a=t[x.geo]._subplot,r=a.mockAxis,n=m.lonlat;return i.lonLabel=u.tickText(r,r.c2l(n[0]),!0).text,i.latLabel=u.tickText(r,r.c2l(n[1]),!0).text,i}},{"../../plots/cartesian/axes":554}],973:[function(e,z,N){var u=e("../../components/fx"),s=e("../../constants/numerical").BADNUM,m=e("../scatter/get_trace_color"),x=e("../../lib").fillText,t=e("./attributes");z.exports=function(r,n,f){var l=r.cd,o=l[0].trace,c=r.xa,h=r.ya,d=r.subplot,p=d.projection.isLonLatOverEdges,y=d.project;function g(v){var L=v.lonlat;if(L[0]===s||p(L))return 1/0;var S=y(L),k=y([n,f]),P=Math.abs(S[0]-k[0]),O=Math.abs(S[1]-k[1]),F=Math.max(3,v.mrc||0);return Math.max(Math.sqrt(P*P+O*O)-F,1-3/F)}if(u.getClosest(l,g,r),r.index!==!1){var A=l[r.index],b=A.lonlat,M=[c.c2p(b),h.c2p(b)],_=A.mrc||1;r.x0=M[0]-_,r.x1=M[0]+_,r.y0=M[1]-_,r.y1=M[1]+_,r.loc=A.loc,r.lon=b[0],r.lat=b[1];var T={};T[o.geo]={_subplot:d};var w=o._module.formatLabels(A,o,T);return r.lonLabel=w.lonLabel,r.latLabel=w.latLabel,r.color=m(o,A),r.extraText=i(o,A,r,l[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}};function i(a,r,n,f){if(a.hovertemplate)return;var l=r.hi||a.hoverinfo,o=l==="all"?t.hoverinfo.flags:l.split("+"),c=o.indexOf("location")!==-1&&Array.isArray(a.locations),h=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,p=o.indexOf("text")!==-1,y=[];function g(A){return A+"\xB0"}return c?y.push(r.loc):h&&d?y.push("("+g(n.latLabel)+", "+g(n.lonLabel)+")"):h?y.push(f.lon+g(n.lonLabel)):d&&y.push(f.lat+g(n.latLabel)),p&&x(r,a,y),y.join("<br>")}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),calcGeoJSON:e("./plot").calcGeoJSON,plot:e("./plot").plot,style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:e("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../lib/topojson_utils").getTopojsonFeatures,x=e("../../lib/geojson_utils"),t=e("../../lib/geo_location_utils"),i=e("../../plots/cartesian/autorange").findExtremes,a=e("../../constants/numerical").BADNUM,r=e("../scatter/calc").calcMarkerSize,n=e("../scatter/subtypes"),f=e("./style");function l(c,h,d){var p=h.layers.frontplot.select(".scatterlayer"),y=s.makeTraceGroups(p,d,"trace scattergeo");function g(A,b){A.lonlat[0]===a&&u.select(b).remove()}y.selectAll("*").remove(),y.each(function(A){var b=u.select(this),M=A[0].trace;if(n.hasLines(M)||M.fill!=="none"){var _=x.calcTraceToLineCoords(A),T=M.fill!=="none"?x.makePolygon(_):x.makeLine(_);b.selectAll("path.js-line").data([{geojson:T,trace:M}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}n.hasMarkers(M)&&b.selectAll("path.point").data(s.identity).enter().append("path").classed("point",!0).each(function(w){g(w,this)}),n.hasText(M)&&b.selectAll("g").data(s.identity).enter().append("g").append("text").each(function(w){g(w,this)}),f(c,A)})}function o(c,h){var d=c[0].trace,p=h[d.geo],y=p._subplot,g=d._length,A,b;if(Array.isArray(d.locations)){var M=d.locationmode,_=M==="geojson-id"?t.extractTraceFeature(c):m(d,y.topojson);for(A=0;A<g;A++){b=c[A];var T=M==="geojson-id"?b.fOut:t.locationToFeature(M,b.loc,_);b.lonlat=T?T.properties.ct:[a,a]}}var w={padded:!0},v,L;if(p.fitbounds==="geojson"&&d.locationmode==="geojson-id"){var S=t.computeBbox(t.getTraceGeojson(d));v=[S[0],S[2]],L=[S[1],S[3]]}else{for(v=new Array(g),L=new Array(g),A=0;A<g;A++)b=c[A],v[A]=b.lonlat[0],L[A]=b.lonlat[1];w.ppad=r(d,g)}d._extremes.lon=i(p.lonaxis._ax,v,w),d._extremes.lat=i(p.lataxis._ax,L,w)}z.exports={calcGeoJSON:o,plot:l}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(e,z,N){var u=e("../scatter/subtypes"),s=e("../../constants/numerical").BADNUM;z.exports=function(x,t){var i=x.cd,a=x.xaxis,r=x.yaxis,n=[],f=i[0].trace,l,o,c,h,d,p=!u.hasMarkers(f)&&!u.hasText(f);if(p)return[];if(t===!1)for(d=0;d<i.length;d++)i[d].selected=0;else for(d=0;d<i.length;d++)l=i[d],o=l.lonlat,o[0]!==s&&(c=a.c2p(o),h=r.c2p(o),t.contains([c,h],null,d,x)?(n.push({pointNumber:d,lon:o[0],lat:o[1]}),l.selected=1):l.selected=0);return n}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color"),x=e("../scatter/style"),t=x.stylePoints,i=x.styleText;z.exports=function(n,f){f&&a(n,f)};function a(r,n){var f=n[0].trace,l=n[0].node3;l.style("opacity",n[0].trace.opacity),t(l,f,r),i(l,f,r),l.selectAll("path.js-line").style("fill","none").each(function(o){var c=u.select(this),h=o.trace,d=h.line||{};c.call(m.stroke,d.color).call(s.dashLine,d.dash||"",d.width||0),h.fill!=="none"&&c.call(m.fill,h.fillcolor)})}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(e,z,N){var u=e("../../plots/attributes"),s=e("../scatter/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../components/colorscale/attributes"),t=e("../../lib/sort_object_keys"),i=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll,r=e("./constants").DASHES,n=s.line,f=s.marker,l=f.line,o=z.exports=a({x:s.x,x0:s.x0,dx:s.dx,y:s.y,y0:s.y0,dy:s.dy,xperiod:s.xperiod,yperiod:s.yperiod,xperiod0:s.xperiod0,yperiod0:s.yperiod0,xperiodalignment:s.xperiodalignment,yperiodalignment:s.yperiodalignment,xhoverformat:m("x"),yhoverformat:m("y"),text:s.text,hovertext:s.hovertext,textposition:s.textposition,textfont:s.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:n.color,width:n.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:t(r),dflt:"solid"}},marker:i({},x("marker"),{symbol:f.symbol,size:f.size,sizeref:f.sizeref,sizemin:f.sizemin,sizemode:f.sizemode,opacity:f.opacity,colorbar:f.colorbar,line:i({},x("marker.line"),{width:l.width})}),connectgaps:s.connectgaps,fill:i({},s.fill,{dflt:"none"}),fillcolor:s.fillcolor,selected:{marker:s.selected.marker,textfont:s.selected.textfont},unselected:{marker:s.unselected.marker,textfont:s.unselected.textfont},opacity:u.opacity},"calc","nested");o.x.editType=o.y.editType=o.x0.editType=o.y0.editType="calc+clearAxisTypes",o.hovertemplate=s.hovertemplate,o.texttemplate=s.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(e,z,N){var u=e("@plotly/point-cluster"),s=e("../../lib"),m=e("../../plots/cartesian/axis_ids"),x=e("../../plots/cartesian/autorange").findExtremes,t=e("../../plots/cartesian/align_period"),i=e("../scatter/calc"),a=i.calcMarkerSize,r=i.calcAxisExpansion,n=i.setFirstScatter,f=e("../scatter/colorscale_calc"),l=e("./convert"),o=e("./scene_update"),c=e("../../constants/numerical").BADNUM,h=e("./constants").TOO_MANY_POINTS;z.exports=function(g,A){var b=g._fullLayout,M=m.getFromId(g,A.xaxis),_=m.getFromId(g,A.yaxis),T=b._plots[A.xaxis+A.yaxis],w=A._length,v=w>=h,L=w*2,S={},k,P=M.makeCalcdata(A,"x"),O=_.makeCalcdata(A,"y"),F=t(A,M,"x",P),I=t(A,_,"y",O),D=F.vals,U=I.vals;A._x=D,A._y=U,A.xperiodalignment&&(A._origX=P,A._xStarts=F.starts,A._xEnds=F.ends),A.yperiodalignment&&(A._origY=O,A._yStarts=I.starts,A._yEnds=I.ends);var B=new Array(L),j=new Array(w);for(k=0;k<w;k++)B[k*2]=D[k]===c?NaN:D[k],B[k*2+1]=U[k]===c?NaN:U[k],j[k]=k;if(M.type==="log")for(k=0;k<L;k+=2)B[k]=M.c2l(B[k]);if(_.type==="log")for(k=1;k<L;k+=2)B[k]=_.c2l(B[k]);v&&M.type!=="log"&&_.type!=="log"?S.tree=u(B):S.ids=j,f(g,A);var Z=p(g,T,A,B,D,U),ee=o(g,T);n(b,A);var q;return v?Z.marker&&(q=Z.marker.sizeAvg||Math.max(Z.marker.size,3)):q=a(A,w),r(g,A,M,_,D,U,q),Z.errorX&&d(A,M,Z.errorX),Z.errorY&&d(A,_,Z.errorY),Z.fill&&!ee.fill2d&&(ee.fill2d=!0),Z.marker&&!ee.scatter2d&&(ee.scatter2d=!0),Z.line&&!ee.line2d&&(ee.line2d=!0),(Z.errorX||Z.errorY)&&!ee.error2d&&(ee.error2d=!0),Z.text&&!ee.glText&&(ee.glText=!0),Z.marker&&(Z.marker.snap=w),ee.lineOptions.push(Z.line),ee.errorXOptions.push(Z.errorX),ee.errorYOptions.push(Z.errorY),ee.fillOptions.push(Z.fill),ee.markerOptions.push(Z.marker),ee.markerSelectedOptions.push(Z.markerSel),ee.markerUnselectedOptions.push(Z.markerUnsel),ee.textOptions.push(Z.text),ee.textSelectedOptions.push(Z.textSel),ee.textUnselectedOptions.push(Z.textUnsel),ee.selectBatch.push([]),ee.unselectBatch.push([]),S._scene=ee,S.index=ee.count,S.x=D,S.y=U,S.positions=B,ee.count++,[{x:!1,y:!1,t:S,trace:A}]};function d(y,g,A){var b=y._extremes[g._id],M=x(g,A._bnds,{padded:!0});b.min=b.min.concat(M.min),b.max=b.max.concat(M.max)}function p(y,g,A,b,M,_){var T=l.style(y,A);if(T.marker&&(T.marker.positions=b),T.line&&b.length>1&&s.extendFlat(T.line,l.linePositions(y,A,b)),T.errorX||T.errorY){var w=l.errorBarPositions(y,A,b,M,_);T.errorX&&s.extendFlat(T.errorX,w.x),T.errorY&&s.extendFlat(T.errorY,w.y)}return T.text&&(s.extendFlat(T.text,{positions:b},l.textPosition(y,A,T.text,T.marker)),s.extendFlat(T.textSel,{positions:b},l.textPosition(y,A,T.text,T.markerSel)),s.extendFlat(T.textUnsel,{positions:b},l.textPosition(y,A,T.text,T.markerUnsel))),T}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(e,z,N){var u=20;z.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:u,SYMBOL_STROKE:u/20,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(e,z,N){var u=e("fast-isnumeric"),s=e("svg-path-sdf"),m=e("color-normalize"),x=e("../../registry"),t=e("../../lib"),i=e("../../components/drawing"),a=e("../../plots/cartesian/axis_ids"),r=e("../../lib/gl_format_color").formatColor,n=e("../scatter/subtypes"),f=e("../scatter/make_bubble_size_func"),l=e("./helpers"),o=e("./constants"),c=e("../../constants/interactions").DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},d=e("../../components/fx/helpers").appendArrayPointValue;function p(F,I){var D,U={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=F._context.plotGlPixelRatio;if(I.visible!==!0)return U;if(n.hasText(I)&&(U.text=y(F,I),U.textSel=b(F,I,I.selected),U.textUnsel=b(F,I,I.unselected)),n.hasMarkers(I)&&(U.marker=g(I),U.markerSel=A(I,I.selected),U.markerUnsel=A(I,I.unselected),!I.unselected&&t.isArrayOrTypedArray(I.marker.opacity))){var j=I.marker.opacity;for(U.markerUnsel.opacity=new Array(j.length),D=0;D<j.length;D++)U.markerUnsel.opacity[D]=c*j[D]}if(n.hasLines(I)){U.line={overlay:!0,thickness:I.line.width*B,color:I.line.color,opacity:I.opacity};var Z=(o.DASHES[I.line.dash]||[1]).slice();for(D=0;D<Z.length;++D)Z[D]*=I.line.width*B;U.line.dashes=Z}return I.error_x&&I.error_x.visible&&(U.errorX=M(I,I.error_x,B)),I.error_y&&I.error_y.visible&&(U.errorY=M(I,I.error_y,B)),!!I.fill&&I.fill!=="none"&&(U.fill={closed:!0,fill:I.fillcolor,thickness:0}),U}function y(F,I){var D=F._fullLayout,U=I._length,B=I.textfont,j=I.textposition,Z=Array.isArray(j)?j:[j],ee=B.color,q=B.size,W=B.family,J={},le,fe=F._context.plotGlPixelRatio,se=I.texttemplate;if(se){J.text=[];var H=D._d3locale,Y=Array.isArray(se),ne=Y?Math.min(se.length,U):U,te=Y?function(ye){return se[ye]}:function(){return se};for(le=0;le<ne;le++){var K={i:le},$=I._module.formatLabels(K,I,D),ae={};d(ae,I,le);var ie=I._meta||{};J.text.push(t.texttemplateString(te(le),$,H,ae,K,ie))}}else Array.isArray(I.text)&&I.text.length<U?J.text=I.text.slice():J.text=I.text;if(Array.isArray(J.text))for(le=J.text.length;le<U;le++)J.text[le]="";for(J.opacity=I.opacity,J.font={},J.align=[],J.baseline=[],le=0;le<Z.length;le++){var oe=Z[le].split(/\s+/);switch(oe[1]){case"left":J.align.push("right");break;case"right":J.align.push("left");break;default:J.align.push(oe[1])}switch(oe[0]){case"top":J.baseline.push("bottom");break;case"bottom":J.baseline.push("top");break;default:J.baseline.push(oe[0])}}if(Array.isArray(ee))for(J.color=new Array(U),le=0;le<U;le++)J.color[le]=ee[le];else J.color=ee;if(t.isArrayOrTypedArray(q)||Array.isArray(W))for(J.font=new Array(U),le=0;le<U;le++){var ue=J.font[le]={};ue.size=(t.isTypedArray(q)?q[le]:Array.isArray(q)?u(q[le])?q[le]:0:q)*fe,ue.family=Array.isArray(W)?W[le]:W}else J.font={size:q*fe,family:W};return J}function g(F){var I=F._length,D=F.marker,U={},B,j=t.isArrayOrTypedArray(D.symbol),Z=t.isArrayOrTypedArray(D.color),ee=t.isArrayOrTypedArray(D.line.color),q=t.isArrayOrTypedArray(D.opacity),W=t.isArrayOrTypedArray(D.size),J=t.isArrayOrTypedArray(D.line.width),le;if(j||(le=l.isOpenSymbol(D.symbol)),j||Z||ee||q){U.colors=new Array(I),U.borderColors=new Array(I);var fe=r(D,D.opacity,I),se=r(D.line,D.opacity,I);if(!Array.isArray(se[0])){var H=se;for(se=Array(I),B=0;B<I;B++)se[B]=H}if(!Array.isArray(fe[0])){var Y=fe;for(fe=Array(I),B=0;B<I;B++)fe[B]=Y}for(U.colors=fe,U.borderColors=se,B=0;B<I;B++){if(j){var ne=D.symbol[B];le=l.isOpenSymbol(ne)}le&&(se[B]=fe[B].slice(),fe[B]=fe[B].slice(),fe[B][3]=0)}U.opacity=F.opacity}else le?(U.color=m(D.color,"uint8"),U.color[3]=0,U.borderColor=m(D.color,"uint8")):(U.color=m(D.color,"uint8"),U.borderColor=m(D.line.color,"uint8")),U.opacity=F.opacity*D.opacity;if(j)for(U.markers=new Array(I),B=0;B<I;B++)U.markers[B]=S(D.symbol[B]);else U.marker=S(D.symbol);var te=1,K=f(F,te),$;if(W||J){var ae=U.sizes=new Array(I),ie=U.borderSizes=new Array(I),oe=0,ue;if(W){for(B=0;B<I;B++)ae[B]=K(D.size[B]),oe+=ae[B];ue=oe/I}else for($=K(D.size),B=0;B<I;B++)ae[B]=$;if(J)for(B=0;B<I;B++)ie[B]=D.line.width[B];else for($=D.line.width,B=0;B<I;B++)ie[B]=$;U.sizeAvg=ue}else U.size=K(D&&D.size||10),U.borderSizes=K(D.line.width);return U}function A(F,I){var D=F.marker,U={};return I&&(I.marker&&I.marker.symbol?U=g(t.extendFlat({},D,I.marker)):I.marker&&(I.marker.size&&(U.size=I.marker.size),I.marker.color&&(U.colors=I.marker.color),I.marker.opacity!==void 0&&(U.opacity=I.marker.opacity))),U}function b(F,I,D){var U={};if(!D)return U;if(D.textfont){var B={opacity:1,text:I.text,texttemplate:I.texttemplate,textposition:I.textposition,textfont:t.extendFlat({},I.textfont)};D.textfont&&t.extendFlat(B.textfont,D.textfont),U=y(F,B)}return U}function M(F,I,D){var U={capSize:I.width*2*D,lineWidth:I.thickness*D,color:I.color};return I.copy_ystyle&&(U=F.error_y),U}var _=o.SYMBOL_SDF_SIZE,T=o.SYMBOL_SIZE,w=o.SYMBOL_STROKE,v={},L=i.symbolFuncs[0](T*.05);function S(F){if(F==="circle")return null;var I,D,U=i.symbolNumber(F),B=i.symbolFuncs[U%100],j=!!i.symbolNoDot[U%100],Z=!!i.symbolNoFill[U%100],ee=l.isDotSymbol(F);return v[F]?v[F]:(ee&&!j?I=B(T*1.1)+L:I=B(T),D=s(I,{w:_,h:_,viewBox:[-T,-T,T,T],stroke:Z?w:-w}),v[F]=D,D||null)}function k(F,I,D){var U=D.length,B=U/2,j,Z;if(n.hasLines(I)&&B)if(I.line.shape==="hv"){for(j=[],Z=0;Z<B-1;Z++)isNaN(D[Z*2])||isNaN(D[Z*2+1])?j.push(NaN,NaN,NaN,NaN):(j.push(D[Z*2],D[Z*2+1]),!isNaN(D[Z*2+2])&&!isNaN(D[Z*2+3])?j.push(D[Z*2+2],D[Z*2+1]):j.push(NaN,NaN));j.push(D[U-2],D[U-1])}else if(I.line.shape==="hvh"){for(j=[],Z=0;Z<B-1;Z++)if(isNaN(D[Z*2])||isNaN(D[Z*2+1])||isNaN(D[Z*2+2])||isNaN(D[Z*2+3]))!isNaN(D[Z*2])&&!isNaN(D[Z*2+1])?j.push(D[Z*2],D[Z*2+1]):j.push(NaN,NaN),j.push(NaN,NaN);else{var ee=(D[Z*2]+D[Z*2+2])/2;j.push(D[Z*2],D[Z*2+1],ee,D[Z*2+1],ee,D[Z*2+3])}j.push(D[U-2],D[U-1])}else if(I.line.shape==="vhv"){for(j=[],Z=0;Z<B-1;Z++)if(isNaN(D[Z*2])||isNaN(D[Z*2+1])||isNaN(D[Z*2+2])||isNaN(D[Z*2+3]))!isNaN(D[Z*2])&&!isNaN(D[Z*2+1])?j.push(D[Z*2],D[Z*2+1]):j.push(NaN,NaN),j.push(NaN,NaN);else{var q=(D[Z*2+1]+D[Z*2+3])/2;j.push(D[Z*2],D[Z*2+1],D[Z*2],q,D[Z*2+2],q)}j.push(D[U-2],D[U-1])}else if(I.line.shape==="vh"){for(j=[],Z=0;Z<B-1;Z++)isNaN(D[Z*2])||isNaN(D[Z*2+1])?j.push(NaN,NaN,NaN,NaN):(j.push(D[Z*2],D[Z*2+1]),!isNaN(D[Z*2+2])&&!isNaN(D[Z*2+3])?j.push(D[Z*2],D[Z*2+3]):j.push(NaN,NaN));j.push(D[U-2],D[U-1])}else j=D;var W=!1;for(Z=0;Z<j.length;Z++)if(isNaN(j[Z])){W=!0;break}var J=W||j.length>o.TOO_MANY_POINTS||n.hasMarkers(I)?"rect":"round";if(W&&I.connectgaps){var le=j[0],fe=j[1];for(Z=0;Z<j.length;Z+=2)isNaN(j[Z])||isNaN(j[Z+1])?(j[Z]=le,j[Z+1]=fe):(le=j[Z],fe=j[Z+1])}return{join:J,positions:j}}function P(F,I,D,U,B){var j=x.getComponentMethod("errorbars","makeComputeError"),Z=a.getFromId(F,I.xaxis),ee=a.getFromId(F,I.yaxis),q=D.length/2,W={};function J(le,fe){var se=fe._id.charAt(0),H=I["error_"+se];if(H&&H.visible&&(fe.type==="linear"||fe.type==="log")){for(var Y=j(H),ne={x:0,y:1}[se],te={x:[0,1,2,3],y:[2,3,0,1]}[se],K=new Float64Array(4*q),$=1/0,ae=-1/0,ie=0,oe=0;ie<q;ie++,oe+=4){var ue=le[ie];if(u(ue)){var ye=D[ie*2+ne],ce=Y(ue,ie),me=ce[0],xe=ce[1];if(u(me)&&u(xe)){var ke=ue-me,Ae=ue+xe;K[oe+te[0]]=ye-fe.c2l(ke),K[oe+te[1]]=fe.c2l(Ae)-ye,K[oe+te[2]]=0,K[oe+te[3]]=0,$=Math.min($,ue-me),ae=Math.max(ae,ue+xe)}}}W[se]={positions:D,errors:K,_bnds:[$,ae]}}}return J(U,Z),J(B,ee),W}function O(F,I,D,U){var B=I._length,j={},Z;if(n.hasMarkers(I)){var ee=D.font,q=D.align,W=D.baseline;for(j.offset=new Array(B),Z=0;Z<B;Z++){var J=U.sizes?U.sizes[Z]:U.size,le=Array.isArray(ee)?ee[Z].size:ee.size,fe=Array.isArray(q)?q.length>1?q[Z]:q[0]:q,se=Array.isArray(W)?W.length>1?W[Z]:W[0]:W,H=h[fe],Y=h[se],ne=J?J/.8+1:0,te=-Y*ne-Y*.5;j.offset[Z]=[H*ne/le,te/le]}}return j}z.exports={style:p,markerStyle:g,markerSelection:A,linePositions:k,errorBarPositions:P,textPosition:O}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(e,z,N){var u=e("../../lib"),s=e("../../registry"),m=e("./helpers"),x=e("./attributes"),t=e("../scatter/constants"),i=e("../scatter/subtypes"),a=e("../scatter/xy_defaults"),r=e("../scatter/period_defaults"),n=e("../scatter/marker_defaults"),f=e("../scatter/line_defaults"),l=e("../scatter/fillcolor_defaults"),o=e("../scatter/text_defaults");z.exports=function(h,d,p,y){function g(L,S){return u.coerce(h,d,x,L,S)}var A=h.marker?m.isOpenSymbol(h.marker.symbol):!1,b=i.isBubble(h),M=a(h,d,y,g);if(!M){d.visible=!1;return}r(h,d,y,g),g("xhoverformat"),g("yhoverformat");var _=M<t.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("hovertemplate"),g("mode",_),i.hasLines(d)&&(g("connectgaps"),f(h,d,p,y,g),g("line.shape")),i.hasMarkers(d)&&(n(h,d,p,y,g),g("marker.line.width",A||b?1:0)),i.hasText(d)&&(g("texttemplate"),o(h,d,y,g));var T=(d.line||{}).color,w=(d.marker||{}).color;g("fill"),d.fill!=="none"&&l(h,d,p,g);var v=s.getComponentMethod("errorbars","supplyDefaults");v(h,d,T||w||p,{axis:"y"}),v(h,d,T||w||p,{axis:"x",inherit:"y"}),u.coerceSelectionMarkerOpacity(d,g)}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../../constants/interactions").DESELECTDIM;function x(t){var i=t[0],a=i.trace,r=i.t,n=r._scene,f=r.index,l=n.selectBatch[f],o=n.unselectBatch[f],c=n.textOptions[f],h=n.textSelectedOptions[f]||{},d=n.textUnselectedOptions[f]||{},p=u.extendFlat({},c),y,g;if(l.length||o.length){var A=h.color,b=d.color,M=c.color,_=Array.isArray(M);for(p.color=new Array(a._length),y=0;y<l.length;y++)g=l[y],p.color[g]=A||(_?M[g]:M);for(y=0;y<o.length;y++){g=o[y];var T=_?M[g]:M;p.color[g]=b||(A?T:s.addOpacity(T,m))}}n.glText[f].update(p)}z.exports={styleTextSelection:x}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(e,z,N){var u=e("../scatter/format_labels");z.exports=function(m,x,t){var i=m.i;return"x"in m||(m.x=x._x[i]),"y"in m||(m.y=x._y[i]),u(m,x,t)}},{"../scatter/format_labels":935}],985:[function(e,z,N){var u=e("./constants");N.isOpenSymbol=function(s){return typeof s=="string"?u.OPEN_RE.test(s):s%200>100},N.isDotSymbol=function(s){return typeof s=="string"?u.DOT_RE.test(s):s>200}},{"./constants":980}],986:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../scatter/get_trace_color");function x(i,a,r,n){var f=i.cd,l=f[0].t,o=f[0].trace,c=i.xa,h=i.ya,d=l.x,p=l.y,y=c.c2p(a),g=h.c2p(r),A=i.distance,b;if(l.tree){var M=c.p2c(y-A),_=c.p2c(y+A),T=h.p2c(g-A),w=h.p2c(g+A);n==="x"?b=l.tree.range(Math.min(M,_),Math.min(h._rl[0],h._rl[1]),Math.max(M,_),Math.max(h._rl[0],h._rl[1])):b=l.tree.range(Math.min(M,_),Math.min(T,w),Math.max(M,_),Math.max(T,w))}else b=l.ids;var v,L,S,k,P,O,F,I,D,U=A;if(n==="x"){var B=!!o.xperiodalignment,j=!!o.yperiodalignment;for(P=0;P<b.length;P++){if(v=b[P],S=d[v],O=Math.abs(c.c2p(S)-y),B){var Z=c.c2p(o._xStarts[v]),ee=c.c2p(o._xEnds[v]);O=y>=Math.min(Z,ee)&&y<=Math.max(Z,ee)?0:1/0}if(O<U){if(U=O,k=p[v],F=h.c2p(k)-g,j){var q=h.c2p(o._yStarts[v]),W=h.c2p(o._yEnds[v]);F=g>=Math.min(q,W)&&g<=Math.max(q,W)?0:1/0}D=Math.sqrt(O*O+F*F),L=b[P]}}}else for(P=b.length-1;P>-1;P--)v=b[P],S=d[v],k=p[v],O=c.c2p(S)-y,F=h.c2p(k)-g,I=Math.sqrt(O*O+F*F),I<U&&(U=D=I,L=v);return i.index=L,i.distance=U,i.dxy=D,L===void 0?[i]:[t(i,d,p,o)]}function t(i,a,r,n){var f=i.xa,l=i.ya,o=i.distance,c=i.dxy,h=i.index,d={pointNumber:h,x:a[h],y:r[h]};d.tx=Array.isArray(n.text)?n.text[h]:n.text,d.htx=Array.isArray(n.hovertext)?n.hovertext[h]:n.hovertext,d.data=Array.isArray(n.customdata)?n.customdata[h]:n.customdata,d.tp=Array.isArray(n.textposition)?n.textposition[h]:n.textposition;var p=n.textfont;p&&(d.ts=s.isArrayOrTypedArray(p.size)?p.size[h]:p.size,d.tc=Array.isArray(p.color)?p.color[h]:p.color,d.tf=Array.isArray(p.family)?p.family[h]:p.family);var y=n.marker;y&&(d.ms=s.isArrayOrTypedArray(y.size)?y.size[h]:y.size,d.mo=s.isArrayOrTypedArray(y.opacity)?y.opacity[h]:y.opacity,d.mx=s.isArrayOrTypedArray(y.symbol)?y.symbol[h]:y.symbol,d.mc=s.isArrayOrTypedArray(y.color)?y.color[h]:y.color);var g=y&&y.line;g&&(d.mlc=Array.isArray(g.color)?g.color[h]:g.color,d.mlw=s.isArrayOrTypedArray(g.width)?g.width[h]:g.width);var A=y&&y.gradient;A&&A.type!=="none"&&(d.mgt=Array.isArray(A.type)?A.type[h]:A.type,d.mgc=Array.isArray(A.color)?A.color[h]:A.color);var b=f.c2p(d.x,!0),M=l.c2p(d.y,!0),_=d.mrc||1,T=n.hoverlabel;T&&(d.hbg=Array.isArray(T.bgcolor)?T.bgcolor[h]:T.bgcolor,d.hbc=Array.isArray(T.bordercolor)?T.bordercolor[h]:T.bordercolor,d.hts=s.isArrayOrTypedArray(T.font.size)?T.font.size[h]:T.font.size,d.htc=Array.isArray(T.font.color)?T.font.color[h]:T.font.color,d.htf=Array.isArray(T.font.family)?T.font.family[h]:T.font.family,d.hnl=s.isArrayOrTypedArray(T.namelength)?T.namelength[h]:T.namelength);var w=n.hoverinfo;w&&(d.hi=Array.isArray(w)?w[h]:w);var v=n.hovertemplate;v&&(d.ht=Array.isArray(v)?v[h]:v);var L={};L[i.index]=d;var S=n._origX,k=n._origY,P=s.extendFlat({},i,{color:m(n,d),x0:b-_,x1:b+_,xLabelVal:S?S[h]:d.x,y0:M-_,y1:M+_,yLabelVal:k?k[h]:d.y,cd:L,distance:o,spikeDistance:c,hovertemplate:d.ht});return d.htx?P.text=d.htx:d.tx?P.text=d.tx:n.text&&(P.text=n.text),s.fillText(d,n,P),u.getComponentMethod("errorbars","hoverInfo")(d,n,P),P}z.exports={hoverPoints:x,calcHover:t}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(e,z,N){var u=e("./hover");z.exports={moduleType:"trace",name:"scattergl",basePlotModule:e("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../scatter/cross_trace_defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:u.hoverPoints,selectPoints:e("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(e,z,N){var u=e("regl-scatter2d"),s=e("regl-line2d"),m=e("regl-error2d"),x=e("gl-text"),t=e("../../lib"),i=e("../../components/dragelement/helpers").selectMode,a=e("../../lib/prepare_regl"),r=e("../scatter/subtypes"),n=e("../scatter/link_traces"),f=e("./edit_style").styleTextSelection;function l(o,c,h,d){var p=o._size,y=o.width*d,g=o.height*d,A=p.l*d,b=p.b*d,M=p.r*d,_=p.t*d,T=p.w*d,w=p.h*d;return[A+c.domain[0]*T,b+h.domain[0]*w,y-M-(1-c.domain[1])*T,g-_-(1-h.domain[1])*w]}z.exports=function(c,h,d){if(!!d.length){var p=c._fullLayout,y=h._scene,g=h.xaxis,A=h.yaxis,b,M;if(!!y){var _=a(c,["ANGLE_instanced_arrays","OES_element_index_uint"]);if(!_){y.init();return}var T=y.count,w=p._glcanvas.data()[0].regl;if(n(c,h,d),y.dirty){if(y.error2d===!0&&(y.error2d=m(w)),y.line2d===!0&&(y.line2d=s(w)),y.scatter2d===!0&&(y.scatter2d=u(w)),y.fill2d===!0&&(y.fill2d=s(w)),y.glText===!0)for(y.glText=new Array(T),b=0;b<T;b++)y.glText[b]=new x(w);if(y.glText){if(T>y.glText.length){var v=T-y.glText.length;for(b=0;b<v;b++)y.glText.push(new x(w))}else if(T<y.glText.length){var L=y.glText.length-T,S=y.glText.splice(T,L);S.forEach(function(ne){ne.destroy()})}for(b=0;b<T;b++)y.glText[b].update(y.textOptions[b])}if(y.line2d&&(y.line2d.update(y.lineOptions),y.lineOptions=y.lineOptions.map(function(ne){if(ne&&ne.positions){for(var te=ne.positions,K=0;K<te.length&&(isNaN(te[K])||isNaN(te[K+1]));)K+=2;for(var $=te.length-2;$>K&&(isNaN(te[$])||isNaN(te[$+1]));)$-=2;ne.positions=te.slice(K,$+2)}return ne}),y.line2d.update(y.lineOptions)),y.error2d){var k=(y.errorXOptions||[]).concat(y.errorYOptions||[]);y.error2d.update(k)}y.scatter2d&&y.scatter2d.update(y.markerOptions),y.fillOrder=t.repeat(null,T),y.fill2d&&(y.fillOptions=y.fillOptions.map(function(ne,te){var K=d[te];if(!(!ne||!K||!K[0]||!K[0].trace)){var $=K[0],ae=$.trace,ie=$.t,oe=y.lineOptions[te],ue,ye,ce=[];ae._ownfill&&ce.push(te),ae._nexttrace&&ce.push(te+1),ce.length&&(y.fillOrder[te]=ce);var me=[],xe=oe&&oe.positions||ie.positions,ke,Ae;if(ae.fill==="tozeroy"){for(ke=0;ke<xe.length&&isNaN(xe[ke+1]);)ke+=2;for(Ae=xe.length-2;Ae>ke&&isNaN(xe[Ae+1]);)Ae-=2;xe[ke+1]!==0&&(me=[xe[ke],0]),me=me.concat(xe.slice(ke,Ae+2)),xe[Ae+1]!==0&&(me=me.concat([xe[Ae],0]))}else if(ae.fill==="tozerox"){for(ke=0;ke<xe.length&&isNaN(xe[ke]);)ke+=2;for(Ae=xe.length-2;Ae>ke&&isNaN(xe[Ae]);)Ae-=2;xe[ke]!==0&&(me=[0,xe[ke+1]]),me=me.concat(xe.slice(ke,Ae+2)),xe[Ae]!==0&&(me=me.concat([0,xe[Ae+1]]))}else if(ae.fill==="toself"||ae.fill==="tonext"){for(me=[],ue=0,ne.splitNull=!0,ye=0;ye<xe.length;ye+=2)(isNaN(xe[ye])||isNaN(xe[ye+1]))&&(me=me.concat(xe.slice(ue,ye)),me.push(xe[ue],xe[ue+1]),me.push(null,null),ue=ye+2);me=me.concat(xe.slice(ue)),ue&&me.push(xe[ue],xe[ue+1])}else{var Oe=ae._nexttrace;if(Oe){var He=y.lineOptions[te+1];if(He){var Ge=He.positions;if(ae.fill==="tonexty"){for(me=xe.slice(),te=Math.floor(Ge.length/2);te--;){var _e=Ge[te*2],Re=Ge[te*2+1];isNaN(_e)||isNaN(Re)||me.push(_e,Re)}ne.fill=Oe.fillcolor}}}}if(ae._prevtrace&&ae._prevtrace.fill==="tonext"){var We=y.lineOptions[te-1].positions,qe=me.length/2;ue=qe;var Ue=[ue];for(ye=0;ye<We.length;ye+=2)(isNaN(We[ye])||isNaN(We[ye+1]))&&(Ue.push(ye/2+qe+1),ue=ye+2);me=me.concat(We),ne.hole=Ue}return ne.fillmode=ae.fill,ne.opacity=ae.opacity,ne.positions=me,ne}}),y.fill2d.update(y.fillOptions))}var P=p.dragmode,O=i(P),F=p.clickmode.indexOf("select")>-1;for(b=0;b<T;b++){var I=d[b][0],D=I.trace,U=I.t,B=U.index,j=D._length,Z=U.x,ee=U.y;if(D.selectedpoints||O||F){if(O||(O=!0),D.selectedpoints){var q=y.selectBatch[B]=t.selIndices2selPoints(D),W={};for(M=0;M<q.length;M++)W[q[M]]=1;var J=[];for(M=0;M<j;M++)W[M]||J.push(M);y.unselectBatch[B]=J}var le=U.xpx=new Array(j),fe=U.ypx=new Array(j);for(M=0;M<j;M++)le[M]=g.c2p(Z[M]),fe[M]=A.c2p(ee[M])}else U.xpx=U.ypx=null}if(O){if(y.select2d||(y.select2d=u(p._glcanvas.data()[1].regl)),y.scatter2d){var se=new Array(T);for(b=0;b<T;b++)se[b]=y.selectBatch[b].length||y.unselectBatch[b].length?y.markerUnselectedOptions[b]:{};y.scatter2d.update(se)}y.select2d&&(y.select2d.update(y.markerOptions),y.select2d.update(y.markerSelectedOptions)),y.glText&&d.forEach(function(ne){var te=((ne||[])[0]||{}).trace||{};r.hasText(te)&&f(ne)})}else y.scatter2d&&y.scatter2d.update(y.markerOptions);var H={viewport:l(p,g,A,c._context.plotGlPixelRatio),range:[(g._rl||g.range)[0],(A._rl||A.range)[0],(g._rl||g.range)[1],(A._rl||A.range)[1]]},Y=t.repeat(H,y.count);y.fill2d&&y.fill2d.update(Y),y.line2d&&y.line2d.update(Y),y.error2d&&y.error2d.update(Y.concat(Y)),y.scatter2d&&y.scatter2d.update(Y),y.select2d&&y.select2d.update(Y),y.glText&&y.glText.forEach(function(ne){ne.update(H)})}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){var t=x._scene,i={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},a={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return x._scene||(t=x._scene={},t.init=function(){u.extendFlat(t,a,i)},t.init(),t.update=function(n){var f=u.repeat(n,t.count);if(t.fill2d&&t.fill2d.update(f),t.scatter2d&&t.scatter2d.update(f),t.line2d&&t.line2d.update(f),t.error2d&&t.error2d.update(f.concat(f)),t.select2d&&t.select2d.update(f),t.glText)for(var l=0;l<t.count;l++)t.glText[l].update(n)},t.draw=function(){for(var n=t.count,f=t.fill2d,l=t.error2d,o=t.line2d,c=t.scatter2d,h=t.glText,d=t.select2d,p=t.selectBatch,y=t.unselectBatch,g=0;g<n;g++){if(f&&t.fillOrder[g]&&f.draw(t.fillOrder[g]),o&&t.lineOptions[g]&&o.draw(g),l&&(t.errorXOptions[g]&&l.draw(g),t.errorYOptions[g]&&l.draw(g+n)),c&&t.markerOptions[g])if(y[g].length){var A=u.repeat([],t.count);A[g]=y[g],c.draw(A)}else p[g].length||c.draw(g);h[g]&&t.textOptions[g]&&h[g].render()}d&&d.draw(p),t.dirty=!1},t.destroy=function(){t.fill2d&&t.fill2d.destroy&&t.fill2d.destroy(),t.scatter2d&&t.scatter2d.destroy&&t.scatter2d.destroy(),t.error2d&&t.error2d.destroy&&t.error2d.destroy(),t.line2d&&t.line2d.destroy&&t.line2d.destroy(),t.select2d&&t.select2d.destroy&&t.select2d.destroy(),t.glText&&t.glText.forEach(function(n){n.destroy&&n.destroy()}),t.lineOptions=null,t.fillOptions=null,t.markerOptions=null,t.markerSelectedOptions=null,t.markerUnselectedOptions=null,t.errorXOptions=null,t.errorYOptions=null,t.textOptions=null,t.textSelectedOptions=null,t.textUnselectedOptions=null,t.selectBatch=null,t.unselectBatch=null,x._scene=null}),t.dirty||u.extendFlat(t,i),t}},{"../../lib":503}],990:[function(e,z,N){var u=e("../scatter/subtypes"),s=e("./edit_style").styleTextSelection;z.exports=function(x,t){var i=x.cd,a=x.xaxis,r=x.yaxis,n=[],f=i[0].trace,l=i[0].t,o=f._length,c=l.x,h=l.y,d=l._scene,p=l.index;if(!d)return n;var y=u.hasText(f),g=u.hasMarkers(f),A=!g&&!y;if(f.visible!==!0||A)return n;var b=[],M=[];if(t!==!1&&!t.degenerate)for(var _=0;_<o;_++)t.contains([l.xpx[_],l.ypx[_]],!1,_,x)?(b.push(_),n.push({pointNumber:_,x:a.c2d(c[_]),y:r.c2d(h[_])})):M.push(_);if(g){var T=d.scatter2d;if(!b.length&&!M.length){var w=new Array(d.count);w[p]=d.markerOptions[p],T.update.apply(T,w)}else if(!d.selectBatch[p].length&&!d.unselectBatch[p].length){var v=new Array(d.count);v[p]=d.markerUnselectedOptions[p],T.update.apply(T,v)}}return d.selectBatch[p]=b,d.unselectBatch[p]=M,y&&s(i),n}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scattergeo/attributes"),x=e("../scatter/attributes"),t=e("../../plots/mapbox/layout_attributes"),i=e("../../plots/attributes"),a=e("../../components/colorscale/attributes"),r=e("../../lib/extend").extendFlat,n=e("../../plot_api/edit_types").overrideAll,f=m.line,l=m.marker;z.exports=n({lon:m.lon,lat:m.lat,mode:r({},x.mode,{dflt:"markers"}),text:r({},x.text,{}),texttemplate:s({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:r({},x.hovertext,{}),line:{color:f.color,width:f.width},connectgaps:x.connectgaps,marker:r({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:l.opacity,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode},a("marker")),fill:m.fill,fillcolor:x.fillcolor,textfont:t.layers.symbol.textfont,textposition:t.layers.symbol.textposition,below:{valType:"string"},selected:{marker:x.selected.marker},unselected:{marker:x.unselected.marker},hoverinfo:r({},i.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:u()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../lib"),m=e("../../constants/numerical").BADNUM,x=e("../../lib/geojson_utils"),t=e("../../components/colorscale"),i=e("../../components/drawing"),a=e("../scatter/make_bubble_size_func"),r=e("../scatter/subtypes"),n=e("../../plots/mapbox/convert_text_opts"),f=e("../../components/fx/helpers").appendArrayPointValue,l=e("../../lib/svg_text_utils").NEWLINES,o=e("../../lib/svg_text_utils").BR_TAG_ALL;z.exports=function(b,M){var _=M[0].trace,T=_.visible===!0&&_._length!==0,w=_.fill!=="none",v=r.hasLines(_),L=r.hasMarkers(_),S=r.hasText(_),k=L&&_.marker.symbol==="circle",P=L&&_.marker.symbol!=="circle",O=c(),F=c(),I=c(),D=c(),U={fill:O,line:F,circle:I,symbol:D};if(!T)return U;var B;if((w||v)&&(B=x.calcTraceToLineCoords(M)),w&&(O.geojson=x.makePolygon(B),O.layout.visibility="visible",s.extendFlat(O.paint,{"fill-color":_.fillcolor})),v&&(F.geojson=x.makeLine(B),F.layout.visibility="visible",s.extendFlat(F.paint,{"line-width":_.line.width,"line-color":_.line.color,"line-opacity":_.opacity})),k){var j=h(M);I.geojson=j.geojson,I.layout.visibility="visible",s.extendFlat(I.paint,{"circle-color":j.mcc,"circle-radius":j.mrc,"circle-opacity":j.mo})}if((P||S)&&(D.geojson=d(M,b),s.extendFlat(D.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),P&&(s.extendFlat(D.layout,{"icon-size":_.marker.size/10}),"angle"in _.marker&&_.marker.angle!=="auto"&&s.extendFlat(D.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),D.layout["icon-allow-overlap"]=_.marker.allowoverlap,s.extendFlat(D.paint,{"icon-opacity":_.opacity*_.marker.opacity,"icon-color":_.marker.color})),S)){var Z=(_.marker||{}).size,ee=n(_.textposition,Z);s.extendFlat(D.layout,{"text-size":_.textfont.size,"text-anchor":ee.anchor,"text-offset":ee.offset}),s.extendFlat(D.paint,{"text-color":_.textfont.color,"text-opacity":_.opacity})}return U};function c(){return{geojson:x.makeBlank(),layout:{visibility:"none"},paint:{}}}function h(A){var b=A[0].trace,M=b.marker,_=b.selectedpoints,T=s.isArrayOrTypedArray(M.color),w=s.isArrayOrTypedArray(M.size),v=s.isArrayOrTypedArray(M.opacity),L;function S(ee){return b.opacity*ee}function k(ee){return ee/2}var P;T&&(t.hasColorscale(b,"marker")?P=t.makeColorScaleFuncFromTrace(M):P=s.identity);var O;w&&(O=a(b));var F;v&&(F=function(ee){var q=u(ee)?+s.constrain(ee,0,1):0;return S(q)});var I=[];for(L=0;L<A.length;L++){var D=A[L],U=D.lonlat;if(!g(U)){var B={};P&&(B.mcc=D.mcc=P(D.mc)),O&&(B.mrc=D.mrc=O(D.ms)),F&&(B.mo=F(D.mo)),_&&(B.selected=D.selected||0),I.push({type:"Feature",geometry:{type:"Point",coordinates:U},properties:B})}}var j;if(_)for(j=i.makeSelectedPointStyleFns(b),L=0;L<I.length;L++){var Z=I[L].properties;j.selectedOpacityFn&&(Z.mo=S(j.selectedOpacityFn(Z))),j.selectedColorFn&&(Z.mcc=j.selectedColorFn(Z)),j.selectedSizeFn&&(Z.mrc=j.selectedSizeFn(Z))}return{geojson:{type:"FeatureCollection",features:I},mcc:T||j&&j.selectedColorFn?{type:"identity",property:"mcc"}:M.color,mrc:w||j&&j.selectedSizeFn?{type:"identity",property:"mrc"}:k(M.size),mo:v||j&&j.selectedOpacityFn?{type:"identity",property:"mo"}:S(M.opacity)}}function d(A,b){for(var M=b._fullLayout,_=A[0].trace,T=_.marker||{},w=T.symbol,v=T.angle,L=w!=="circle"?p(w):y,S=v!=="auto"?p(v,!0):y,k=r.hasText(_)?p(_.text):y,P=[],O=0;O<A.length;O++){var F=A[O];if(!g(F.lonlat)){var I=_.texttemplate,D;if(I){var U=Array.isArray(I)?I[O]||"":I,B=_._module.formatLabels(F,_,M),j={};f(j,_,F.i);var Z=_._meta||{};D=s.texttemplateString(U,B,M._d3locale,j,F,Z)}else D=k(O);D&&(D=D.replace(l,"").replace(o,`
`)),P.push({type:"Feature",geometry:{type:"Point",coordinates:F.lonlat},properties:{symbol:L(O),angle:S(O),text:D}})}}return{type:"FeatureCollection",features:P}}function p(A,b){return s.isArrayOrTypedArray(A)?b?function(M){return u(A[M])?+A[M]:0}:function(M){return A[M]}:A?function(){return A}:y}function y(){return""}function g(A){return A[0]===m}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/text_defaults"),i=e("../scatter/fillcolor_defaults"),a=e("./attributes");z.exports=function(f,l,o,c){function h(y,g){return u.coerce(f,l,a,y,g)}var d=r(f,l,h);if(!d){l.visible=!1;return}if(h("text"),h("texttemplate"),h("hovertext"),h("hovertemplate"),h("mode"),h("below"),s.hasLines(l)&&(x(f,l,o,c,h,{noDash:!0}),h("connectgaps")),s.hasMarkers(l)){m(f,l,o,c,h,{noLine:!0}),h("marker.allowoverlap"),h("marker.angle");var p=l.marker;p.symbol!=="circle"&&(u.isArrayOrTypedArray(p.size)&&(p.size=p.size[0]),u.isArrayOrTypedArray(p.color)&&(p.color=p.color[0]))}s.hasText(l)&&t(f,l,c,h,{noSelect:!0}),h("fill"),l.fill!=="none"&&i(f,l,o,h),u.coerceSelectionMarkerOpacity(l,h)};function r(n,f,l){var o=l("lon")||[],c=l("lat")||[],h=Math.min(o.length,c.length);return f._length=h,h}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(e,z,N){z.exports=function(s,m){return s.lon=m.lon,s.lat=m.lat,s}},{}],995:[function(e,z,N){var u=e("../../plots/cartesian/axes");z.exports=function(m,x,t){var i={},a=t[x.subplot]._subplot,r=a.mockAxis,n=m.lonlat;return i.lonLabel=u.tickText(r,r.c2l(n[0]),!0).text,i.latLabel=u.tickText(r,r.c2l(n[1]),!0).text,i}},{"../../plots/cartesian/axes":554}],996:[function(e,z,N){var u=e("../../components/fx"),s=e("../../lib"),m=e("../scatter/get_trace_color"),x=s.fillText,t=e("../../constants/numerical").BADNUM;function i(r,n,f){var l=r.cd,o=l[0].trace,c=r.xa,h=r.ya,d=r.subplot,p=n>=0?Math.floor((n+180)/360):Math.ceil((n-180)/360),y=p*360,g=n-y;function A(k){var P=k.lonlat;if(P[0]===t)return 1/0;var O=s.modHalf(P[0],360),F=P[1],I=d.project([O,F]),D=I.x-c.c2p([g,F]),U=I.y-h.c2p([O,f]),B=Math.max(3,k.mrc||0);return Math.max(Math.sqrt(D*D+U*U)-B,1-3/B)}if(u.getClosest(l,A,r),r.index!==!1){var b=l[r.index],M=b.lonlat,_=[s.modHalf(M[0],360)+y,M[1]],T=c.c2p(_),w=h.c2p(_),v=b.mrc||1;r.x0=T-v,r.x1=T+v,r.y0=w-v,r.y1=w+v;var L={};L[o.subplot]={_subplot:d};var S=o._module.formatLabels(b,o,L);return r.lonLabel=S.lonLabel,r.latLabel=S.latLabel,r.color=m(o,b),r.extraText=a(o,b,l[0].t.labels),r.hovertemplate=o.hovertemplate,[r]}}function a(r,n,f){if(r.hovertemplate)return;var l=n.hi||r.hoverinfo,o=l.split("+"),c=o.indexOf("all")!==-1,h=o.indexOf("lon")!==-1,d=o.indexOf("lat")!==-1,p=n.lonlat,y=[];function g(A){return A+"\xB0"}return c||h&&d?y.push("("+g(p[1])+", "+g(p[0])+")"):h?y.push(f.lon+g(p[0])):d&&y.push(f.lat+g(p[1])),(c||o.indexOf("text")!==-1)&&x(n,r,y),y.join("<br>")}z.exports={hoverPoints:i,getExtraText:a}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("../scattergeo/calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,eventData:e("./event_data"),selectPoints:e("./select"),styleOnSelect:function(u,s){if(s){var m=s[0].trace;m._glTrace.update(s)}},moduleType:"trace",name:"scattermapbox",basePlotModule:e("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(e,z,N){var u=e("./convert"),s=e("../../plots/mapbox/constants").traceLayerPrefix,m=["fill","line","circle","symbol"];function x(i,a){this.type="scattermapbox",this.subplot=i,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:s+a+"-fill",line:s+a+"-line",circle:s+a+"-circle",symbol:s+a+"-symbol"},this.below=null}var t=x.prototype;t.addSource=function(i,a){this.subplot.map.addSource(this.sourceIds[i],{type:"geojson",data:a.geojson})},t.setSourceData=function(i,a){this.subplot.map.getSource(this.sourceIds[i]).setData(a.geojson)},t.addLayer=function(i,a,r){this.subplot.addLayer({type:i,id:this.layerIds[i],source:this.sourceIds[i],layout:a.layout,paint:a.paint},r)},t.update=function(a){var r=this.subplot,n=r.map,f=u(r.gd,a),l=r.belowLookup["trace-"+this.uid],o,c,h;if(l!==this.below){for(o=m.length-1;o>=0;o--)c=m[o],n.removeLayer(this.layerIds[c]);for(o=0;o<m.length;o++)c=m[o],h=f[c],this.addLayer(c,h,l);this.below=l}for(o=0;o<m.length;o++)c=m[o],h=f[c],r.setOptions(this.layerIds[c],"setLayoutProperty",h.layout),h.layout.visibility==="visible"&&(this.setSourceData(c,h),r.setOptions(this.layerIds[c],"setPaintProperty",h.paint));a[0].trace._glTrace=this},t.dispose=function(){for(var a=this.subplot.map,r=m.length-1;r>=0;r--){var n=m[r];a.removeLayer(this.layerIds[n]),a.removeSource(this.sourceIds[n])}},z.exports=function(a,r){for(var n=r[0].trace,f=new x(a,n.uid),l=u(a.gd,r),o=f.below=a.belowLookup["trace-"+n.uid],c=0;c<m.length;c++){var h=m[c],d=l[h];f.addSource(h,d),f.addLayer(h,d,o)}return r[0].trace._glTrace=f,f}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../../constants/numerical").BADNUM;z.exports=function(t,i){var a=t.cd,r=t.xaxis,n=t.yaxis,f=[],l=a[0].trace,o;if(!s.hasMarkers(l))return[];if(i===!1)for(o=0;o<a.length;o++)a[o].selected=0;else for(o=0;o<a.length;o++){var c=a[o],h=c.lonlat;if(h[0]!==m){var d=[u.modHalf(h[0],360),h[1]],p=[r.c2p(d),n.c2p(d)];i.contains(p,null,o,t)?(f.push({pointNumber:o,lon:h[0],lat:h[1]}),c.selected=1):c.selected=0}}return f}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("../scatter/attributes"),t=e("../../plots/attributes"),i=x.line;z.exports={mode:x.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:s({editType:"plot"},{keys:["r","theta","text"]}),hovertext:x.hovertext,line:{color:i.color,width:i.width,dash:i.dash,shape:m({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:m({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:m({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:m({},t.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:x.hoveron,hovertemplate:u(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../../plots/cartesian/axes"),x=e("../scatter/colorscale_calc"),t=e("../scatter/arrays_to_calcdata"),i=e("../scatter/calc_selection"),a=e("../scatter/calc").calcMarkerSize;z.exports=function(n,f){for(var l=n._fullLayout,o=f.subplot,c=l[o].radialaxis,h=l[o].angularaxis,d=c.makeCalcdata(f,"r"),p=h.makeCalcdata(f,"theta"),y=f._length,g=new Array(y),A=0;A<y;A++){var b=d[A],M=p[A],_=g[A]={};u(b)&&u(M)?(_.r=b,_.theta=M):_.r=s}var T=a(f,y);return f._extremes.x=m.findExtremes(c,d,{ppad:T}),x(n,f),t(g,f),i(g,f),g}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");function f(o,c,h,d){function p(A,b){return u.coerce(o,c,n,A,b)}var y=l(o,c,d,p);if(!y){c.visible=!1;return}p("thetaunit"),p("mode",y<r?"lines+markers":"lines"),p("text"),p("hovertext"),c.hoveron!=="fills"&&p("hovertemplate"),s.hasLines(c)&&(x(o,c,h,d,p),t(o,c,p),p("connectgaps")),s.hasMarkers(c)&&m(o,c,h,d,p,{gradient:!0}),s.hasText(c)&&(p("texttemplate"),i(o,c,d,p));var g=[];(s.hasMarkers(c)||s.hasText(c))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),c.fill!=="none"&&(a(o,c,h,p),s.hasLines(c)||t(o,c,p)),(c.fill==="tonext"||c.fill==="toself")&&g.push("fills"),p("hoveron",g.join("+")||"points"),u.coerceSelectionMarkerOpacity(c,p)}function l(o,c,h,d){var p=d("r"),y=d("theta"),g;if(p)y?g=Math.min(p.length,y.length):(g=p.length,d("theta0"),d("dtheta"));else{if(!y)return 0;g=c.theta.length,d("r0"),d("dr")}return c._length=g,g}z.exports={handleRThetaDefaults:l,supplyDefaults:f}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes");z.exports=function(x,t,i){var a={},r=i[t.subplot]._subplot,n,f;r?(n=r.radialAxis,f=r.angularAxis):(r=i[t.subplot],n=r.radialaxis,f=r.angularaxis);var l=n.c2l(x.r);a.rLabel=s.tickText(n,l,!0).text;var o=f.thetaunit==="degrees"?u.rad2deg(x.theta):x.theta;return a.thetaLabel=s.tickText(f,o,!0).text,a}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(e,z,N){var u=e("../scatter/hover");function s(x,t,i,a){var r=u(x,t,i,a);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var f=x.subplot,l=n.cd[n.index],o=n.trace;if(!!f.isPtInside(l))return n.xLabelVal=void 0,n.yLabelVal=void 0,m(l,o,f,n),n.hovertemplate=o.hovertemplate,r}}function m(x,t,i,a){var r=i.radialAxis,n=i.angularAxis;r._hovertitle="r",n._hovertitle="\u03B8";var f={};f[t.subplot]={_subplot:i};var l=t._module.formatLabels(x,t,f);a.rLabel=l.rLabel,a.thetaLabel=l.thetaLabel;var o=x.hi||t.hoverinfo,c=[];function h(p,y){c.push(p._hovertitle+": "+y)}if(!t.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["r","theta","text"]),d.indexOf("r")!==-1&&h(r,a.rLabel),d.indexOf("theta")!==-1&&h(n,a.thetaLabel),d.indexOf("text")!==-1&&a.text&&(c.push(a.text),delete a.text),a.extraText=c.join("<br>")}}z.exports={hoverPoints:s,makeHoverPointText:m}},{"../scatter/hover":937}],1005:[function(e,z,N){z.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:e("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(e,z,N){var u=e("../scatter/plot"),s=e("../../constants/numerical").BADNUM;z.exports=function(x,t,i){for(var a=t.layers.frontplot.select("g.scatterlayer"),r={xaxis:t.xaxis,yaxis:t.yaxis,plot:t.framework,layerClipId:t._hasClipOnAxisFalse?t.clipIds.forTraces:null},n=t.radialAxis,f=t.angularAxis,l=0;l<i.length;l++)for(var o=i[l],c=0;c<o.length;c++){var h=o[c],d=h.r;if(d===s)h.x=h.y=s;else{var p=n.c2g(d),y=f.c2g(h.theta);h.x=p*Math.cos(y),h.y=p*Math.sin(y)}}u(x,r,i,a)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(e,z,N){var u=e("../scatterpolar/attributes"),s=e("../scattergl/attributes"),m=e("../../plots/template_attributes").texttemplateAttrs;z.exports={mode:u.mode,r:u.r,theta:u.theta,r0:u.r0,dr:u.dr,theta0:u.theta0,dtheta:u.dtheta,thetaunit:u.thetaunit,text:u.text,texttemplate:m({editType:"plot"},{keys:["r","theta","text"]}),hovertext:u.hovertext,hovertemplate:u.hovertemplate,line:s.line,connectgaps:s.connectgaps,marker:s.marker,fill:s.fill,fillcolor:s.fillcolor,textposition:s.textposition,textfont:s.textfont,hoverinfo:u.hoverinfo,selected:u.selected,unselected:u.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(e,z,N){var u=e("../scatter/colorscale_calc"),s=e("../scatter/calc").calcMarkerSize,m=e("../scattergl/convert"),x=e("../../plots/cartesian/axes"),t=e("../scattergl/constants").TOO_MANY_POINTS;z.exports=function(a,r){var n=a._fullLayout,f=r.subplot,l=n[f].radialaxis,o=n[f].angularaxis,c=r._r=l.makeCalcdata(r,"r"),h=r._theta=o.makeCalcdata(r,"theta"),d=r._length,p={};d<c.length&&(c=c.slice(0,d)),d<h.length&&(h=h.slice(0,d)),p.r=c,p.theta=h,u(a,r);var y=p.opts=m.style(a,r),g;return d<t?g=s(r,d):y.marker&&(g=2*(y.marker.sizeAvg||Math.max(y.marker.size,3))),r._extremes.x=x.findExtremes(l,c,{ppad:g}),[{x:!1,y:!1,t:p,trace:r}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatterpolar/defaults").handleRThetaDefaults,x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");z.exports=function(l,o,c,h){function d(y,g){return u.coerce(l,o,n,y,g)}var p=m(l,o,h,d);if(!p){o.visible=!1;return}d("thetaunit"),d("mode",p<r?"lines+markers":"lines"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate"),s.hasLines(o)&&(t(l,o,c,h,d),d("connectgaps")),s.hasMarkers(o)&&x(l,o,c,h,d),s.hasText(o)&&(d("texttemplate"),i(l,o,h,d)),d("fill"),o.fill!=="none"&&a(l,o,c,d),u.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(e,z,N){var u=e("../scatterpolar/format_labels");z.exports=function(m,x,t){var i=m.i;return"r"in m||(m.r=x._r[i]),"theta"in m||(m.theta=x._theta[i]),u(m,x,t)}},{"../scatterpolar/format_labels":1003}],1011:[function(e,z,N){var u=e("../scattergl/hover"),s=e("../scatterpolar/hover").makeHoverPointText;function m(x,t,i,a){var r=x.cd,n=r[0].t,f=n.r,l=n.theta,o=u.hoverPoints(x,t,i,a);if(!(!o||o[0].index===!1)){var c=o[0];if(c.index===void 0)return o;var h=x.subplot,d=c.cd[c.index],p=c.trace;if(d.r=f[c.index],d.theta=l[c.index],!!h.isPtInside(d))return c.xLabelVal=void 0,c.yLabelVal=void 0,s(d,p,h,c),o}}z.exports={hoverPoints:m}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(e,z,N){z.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:e("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(e,z,N){var u=e("@plotly/point-cluster"),s=e("fast-isnumeric"),m=e("../scattergl/plot"),x=e("../scattergl/scene_update"),t=e("../scattergl/convert"),i=e("../../lib"),a=e("../scattergl/constants").TOO_MANY_POINTS;z.exports=function(n,f,l){if(!!l.length){var o=f.radialAxis,c=f.angularAxis,h=x(n,f);return l.forEach(function(d){if(!(!d||!d[0]||!d[0].trace)){var p=d[0],y=p.trace,g=p.t,A=y._length,b=g.r,M=g.theta,_=g.opts,T,w=b.slice(),v=M.slice();for(T=0;T<b.length;T++)f.isPtInside({r:b[T],theta:M[T]})||(w[T]=NaN,v[T]=NaN);var L=new Array(A*2),S=Array(A),k=Array(A);for(T=0;T<A;T++){var P=w[T],O,F;if(s(P)){var I=o.c2g(P),D=c.c2g(v[T],y.thetaunit);O=I*Math.cos(D),F=I*Math.sin(D)}else O=F=NaN;S[T]=L[T*2]=O,k[T]=L[T*2+1]=F}g.tree=u(L),_.marker&&A>=a&&(_.marker.cluster=g.tree),_.marker&&(_.markerSel.positions=_.markerUnsel.positions=_.marker.positions=L),_.line&&L.length>1&&i.extendFlat(_.line,t.linePositions(n,y,L)),_.text&&(i.extendFlat(_.text,{positions:L},t.textPosition(n,y,_.text,_.marker)),i.extendFlat(_.textSel,{positions:L},t.textPosition(n,y,_.text,_.markerSel)),i.extendFlat(_.textUnsel,{positions:L},t.textPosition(n,y,_.text,_.markerUnsel))),_.fill&&!h.fill2d&&(h.fill2d=!0),_.marker&&!h.scatter2d&&(h.scatter2d=!0),_.line&&!h.line2d&&(h.line2d=!0),_.text&&!h.glText&&(h.glText=!0),h.lineOptions.push(_.line),h.fillOptions.push(_.fill),h.markerOptions.push(_.marker),h.markerSelectedOptions.push(_.markerSel),h.markerUnselectedOptions.push(_.markerUnsel),h.textOptions.push(_.text),h.textSelectedOptions.push(_.textSel),h.textUnselectedOptions.push(_.textUnsel),h.selectBatch.push([]),h.unselectBatch.push([]),g.x=S,g.y=k,g.rawx=S,g.rawy=k,g.r=b,g.theta=M,g.positions=L,g._scene=h,g.index=h.count,h.count++}}),m(n,f,l)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../lib/extend").extendFlat,x=e("../scatter/attributes"),t=e("../../plots/attributes"),i=x.line;z.exports={mode:x.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:x.text,texttemplate:s({editType:"plot"},{keys:["real","imag","text"]}),hovertext:x.hovertext,line:{color:i.color,width:i.width,dash:i.dash,shape:m({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:x.connectgaps,marker:x.marker,cliponaxis:m({},x.cliponaxis,{dflt:!1}),textposition:x.textposition,textfont:x.textfont,fill:m({},x.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:x.fillcolor,hoverinfo:m({},t.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:x.hoveron,hovertemplate:u(),selected:x.selected,unselected:x.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../../constants/numerical").BADNUM,m=e("../scatter/colorscale_calc"),x=e("../scatter/arrays_to_calcdata"),t=e("../scatter/calc_selection"),i=e("../scatter/calc").calcMarkerSize;z.exports=function(r,n){for(var f=r._fullLayout,l=n.subplot,o=f[l].realaxis,c=f[l].imaginaryaxis,h=o.makeCalcdata(n,"real"),d=c.makeCalcdata(n,"imag"),p=n._length,y=new Array(p),g=0;g<p;g++){var A=h[g],b=d[g],M=y[g]={};u(A)&&u(b)?(M.real=A,M.imag=b):M.real=s}return i(n,p),m(r,n),x(y,n),t(y,n),y}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("../scatter/marker_defaults"),x=e("../scatter/line_defaults"),t=e("../scatter/line_shape_defaults"),i=e("../scatter/text_defaults"),a=e("../scatter/fillcolor_defaults"),r=e("../scatter/constants").PTS_LINESONLY,n=e("./attributes");z.exports=function(o,c,h,d){function p(A,b){return u.coerce(o,c,n,A,b)}var y=f(o,c,d,p);if(!y){c.visible=!1;return}p("mode",y<r?"lines+markers":"lines"),p("text"),p("hovertext"),c.hoveron!=="fills"&&p("hovertemplate"),s.hasLines(c)&&(x(o,c,h,d,p),t(o,c,p),p("connectgaps")),s.hasMarkers(c)&&m(o,c,h,d,p,{gradient:!0}),s.hasText(c)&&(p("texttemplate"),i(o,c,d,p));var g=[];(s.hasMarkers(c)||s.hasText(c))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),c.fill!=="none"&&(a(o,c,h,p),s.hasLines(c)||t(o,c,p)),(c.fill==="tonext"||c.fill==="toself")&&g.push("fills"),p("hoveron",g.join("+")||"points"),u.coerceSelectionMarkerOpacity(c,p)};function f(l,o,c,h){var d=h("real"),p=h("imag"),y;return d&&p&&(y=Math.min(d.length,p.length)),o._length=y,y}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(e,z,N){var u=e("../../plots/cartesian/axes");z.exports=function(m,x,t){var i={},a=t[x.subplot]._subplot;return i.realLabel=u.tickText(a.radialAxis,m.real,!0).text,i.imagLabel=u.tickText(a.angularAxis,m.imag,!0).text,i}},{"../../plots/cartesian/axes":554}],1018:[function(e,z,N){var u=e("../scatter/hover");function s(x,t,i,a){var r=u(x,t,i,a);if(!(!r||r[0].index===!1)){var n=r[0];if(n.index===void 0)return r;var f=x.subplot,l=n.cd[n.index],o=n.trace;if(!!f.isPtInside(l))return n.xLabelVal=void 0,n.yLabelVal=void 0,m(l,o,f,n),n.hovertemplate=o.hovertemplate,r}}function m(x,t,i,a){var r=i.radialAxis,n=i.angularAxis;r._hovertitle="real",n._hovertitle="imag";var f={};f[t.subplot]={_subplot:i};var l=t._module.formatLabels(x,t,f);a.realLabel=l.realLabel,a.imagLabel=l.imagLabel;var o=x.hi||t.hoverinfo,c=[];function h(p,y){c.push(p._hovertitle+": "+y)}if(!t.hovertemplate){var d=o.split("+");d.indexOf("all")!==-1&&(d=["real","imag","text"]),d.indexOf("real")!==-1&&h(r,a.realLabel),d.indexOf("imag")!==-1&&h(n,a.imagLabel),d.indexOf("text")!==-1&&a.text&&(c.push(a.text),delete a.text),a.extraText=c.join("<br>")}}z.exports={hoverPoints:s,makeHoverPointText:m}},{"../scatter/hover":937}],1019:[function(e,z,N){z.exports={moduleType:"trace",name:"scattersmith",basePlotModule:e("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover").hoverPoints,selectPoints:e("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(e,z,N){var u=e("../scatter/plot"),s=e("../../constants/numerical").BADNUM,m=e("../../plots/smith/helpers"),x=m.smith;z.exports=function(i,a,r){for(var n=a.layers.frontplot.select("g.scatterlayer"),f={xaxis:a.xaxis,yaxis:a.yaxis,plot:a.framework,layerClipId:a._hasClipOnAxisFalse?a.clipIds.forTraces:null},l=0;l<r.length;l++)for(var o=r[l],c=0;c<o.length;c++){var h=o[c],d=h.real;if(d===s)h.x=h.y=s;else{var p=x([d,h.imag]);h.x=p[0],h.y=p[1]}}u(i,f,r,n)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../scatter/attributes"),x=e("../../plots/attributes"),t=e("../../components/colorscale/attributes"),i=e("../../components/drawing/attributes").dash,a=e("../../lib/extend").extendFlat,r=m.marker,n=m.line,f=r.line;z.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},m.mode,{dflt:"markers"}),text:a({},m.text,{}),texttemplate:s({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},m.hovertext,{}),line:{color:n.color,width:n.width,dash:i,shape:a({},n.shape,{values:["linear","spline"]}),smoothing:n.smoothing,editType:"calc"},connectgaps:m.connectgaps,cliponaxis:m.cliponaxis,fill:a({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:a({symbol:r.symbol,opacity:r.opacity,maxdisplayed:r.maxdisplayed,size:r.size,sizeref:r.sizeref,sizemin:r.sizemin,sizemode:r.sizemode,line:a({width:f.width,editType:"calc"},t("marker.line")),gradient:r.gradient,editType:"calc"},t("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:a({},x.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:m.hoveron,hovertemplate:u()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(e,z,N){var u=e("fast-isnumeric"),s=e("../scatter/colorscale_calc"),m=e("../scatter/arrays_to_calcdata"),x=e("../scatter/calc_selection"),t=e("../scatter/calc").calcMarkerSize,i=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};z.exports=function(n,f){var l=n._fullLayout[f.subplot],o=l.sum,c=f.sum||o,h={a:f.a,b:f.b,c:f.c},d,p,y,g,A,b;for(d=0;d<i.length;d++)if(y=i[d],!h[y]){for(A=h[a[y][0]],b=h[a[y][1]],g=new Array(A.length),p=0;p<A.length;p++)g[p]=c-A[p]-b[p];h[y]=g}var M=f._length,_=new Array(M),T,w,v,L,S,k;for(d=0;d<M;d++)T=h.a[d],w=h.b[d],v=h.c[d],u(T)&&u(w)&&u(v)?(T=+T,w=+w,v=+v,L=o/(T+w+v),L!==1&&(T*=L,w*=L,v*=L),k=T,S=v-w,_[d]={x:S,y:k,a:T,b:w,c:v}):_[d]={x:!1,y:!1};return t(f,M),s(n,f),m(_,f),x(_,f),_}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/constants"),m=e("../scatter/subtypes"),x=e("../scatter/marker_defaults"),t=e("../scatter/line_defaults"),i=e("../scatter/line_shape_defaults"),a=e("../scatter/text_defaults"),r=e("../scatter/fillcolor_defaults"),n=e("./attributes");z.exports=function(l,o,c,h){function d(_,T){return u.coerce(l,o,n,_,T)}var p=d("a"),y=d("b"),g=d("c"),A;if(p?(A=p.length,y?(A=Math.min(A,y.length),g&&(A=Math.min(A,g.length))):g?A=Math.min(A,g.length):A=0):y&&g&&(A=Math.min(y.length,g.length)),!A){o.visible=!1;return}o._length=A,d("sum"),d("text"),d("hovertext"),o.hoveron!=="fills"&&d("hovertemplate");var b=A<s.PTS_LINESONLY?"lines+markers":"lines";d("mode",b),m.hasLines(o)&&(t(l,o,c,h,d),i(l,o,d),d("connectgaps")),m.hasMarkers(o)&&x(l,o,c,h,d,{gradient:!0}),m.hasText(o)&&(d("texttemplate"),a(l,o,h,d));var M=[];(m.hasMarkers(o)||m.hasText(o))&&(d("cliponaxis"),d("marker.maxdisplayed"),M.push("points")),d("fill"),o.fill!=="none"&&(r(l,o,c,d),m.hasLines(o)||i(l,o,d)),(o.fill==="tonext"||o.fill==="toself")&&M.push("fills"),d("hoveron",M.join("+")||"points"),u.coerceSelectionMarkerOpacity(o,d)}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(e,z,N){z.exports=function(s,m,x,t,i){if(m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),t[i]){var a=t[i];s.a=a.a,s.b=a.b,s.c=a.c}else s.a=m.a,s.b=m.b,s.c=m.c;return s}},{}],1025:[function(e,z,N){var u=e("../../plots/cartesian/axes");z.exports=function(m,x,t){var i={},a=t[x.subplot]._subplot;return i.aLabel=u.tickText(a.aaxis,m.a,!0).text,i.bLabel=u.tickText(a.baxis,m.b,!0).text,i.cLabel=u.tickText(a.caxis,m.c,!0).text,i}},{"../../plots/cartesian/axes":554}],1026:[function(e,z,N){var u=e("../scatter/hover");z.exports=function(m,x,t,i){var a=u(m,x,t,i);if(!a||a[0].index===!1)return;var r=a[0];if(r.index===void 0){var n=1-r.y0/m.ya._length,f=m.xa._length,l=f*n/2,o=f-l;return r.x0=Math.max(Math.min(r.x0,o),l),r.x1=Math.max(Math.min(r.x1,o),l),a}var c=r.cd[r.index],h=r.trace,d=r.subplot;r.a=c.a,r.b=c.b,r.c=c.c,r.xLabelVal=void 0,r.yLabelVal=void 0;var p={};p[h.subplot]={_subplot:d};var y=h._module.formatLabels(c,h,p);r.aLabel=y.aLabel,r.bLabel=y.bLabel,r.cLabel=y.cLabel;var g=c.hi||h.hoverinfo,A=[];function b(_,T){A.push(_._hovertitle+": "+T)}if(!h.hovertemplate){var M=g.split("+");M.indexOf("all")!==-1&&(M=["a","b","c"]),M.indexOf("a")!==-1&&b(d.aaxis,r.aLabel),M.indexOf("b")!==-1&&b(d.baxis,r.bLabel),M.indexOf("c")!==-1&&b(d.caxis,r.cLabel)}return r.extraText=A.join("<br>"),r.hovertemplate=h.hovertemplate,a}},{"../scatter/hover":937}],1027:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),formatLabels:e("./format_labels"),calc:e("./calc"),plot:e("./plot"),style:e("../scatter/style").style,styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../scatter/select"),eventData:e("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:e("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(e,z,N){var u=e("../scatter/plot");z.exports=function(m,x,t){var i=x.plotContainer;i.select(".scatterlayer").selectAll("*").remove();var a={xaxis:x.xaxis,yaxis:x.yaxis,plot:i,layerClipId:x._hasClipOnAxisFalse?x.clipIdRelative:null},r=x.layers.frontplot.select("g.scatterlayer");u(m,a,t,r)}},{"../scatter/plot":947}],1029:[function(e,z,N){var u=e("../scatter/attributes"),s=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../scattergl/attributes"),i=e("../../plots/cartesian/constants").idRegex,a=e("../../plot_api/plot_template").templatedArray,r=e("../../lib/extend").extendFlat,n=u.marker,f=n.line,l=r(s("marker.line",{editTypeOverride:"calc"}),{width:r({},f.width,{editType:"calc"}),editType:"calc"}),o=r(s("marker"),{symbol:n.symbol,size:r({},n.size,{editType:"markerSize"}),sizeref:n.sizeref,sizemin:n.sizemin,sizemode:n.sizemode,opacity:n.opacity,colorbar:n.colorbar,line:l,editType:"calc"});o.color.editType=o.cmin.editType=o.cmax.editType="style";function c(h){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:i[h],editType:"plot"}}}z.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:r({},t.text,{}),hovertext:r({},t.hovertext,{}),hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),marker:o,xaxes:c("x"),yaxes:c("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:t.selected.marker,editType:"calc"},unselected:{marker:t.unselected.marker,editType:"calc"},opacity:t.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(e,z,N){var u=e("regl-line2d"),s=e("../../registry"),m=e("../../lib/prepare_regl"),x=e("../../plots/get_data").getModuleCalcData,t=e("../../plots/cartesian"),i=e("../../plots/cartesian/axis_ids").getFromId,a=e("../../plots/cartesian/axes").shouldShowZeroLine,r="splom";function n(d){var p=d._fullLayout,y=s.getModule(r),g=x(d.calcdata,y)[0],A=m(d,["ANGLE_instanced_arrays","OES_element_index_uint"]);!A||(p._hasOnlyLargeSploms&&o(d),y.plot(d,{},g))}function f(d){var p=d.calcdata,y=d._fullLayout;y._hasOnlyLargeSploms&&o(d);for(var g=0;g<p.length;g++){var A=p[g][0],b=A.trace,M=y._splomScenes[b.uid];b.type==="splom"&&M&&M.matrix&&l(d,b,M)}}function l(d,p,y){for(var g=y.matrixOptions.data.length,A=p._visibleDims,b=y.viewOpts.ranges=new Array(g),M=0;M<A.length;M++){var _=A[M],T=b[M]=new Array(4),w=i(d,p._diag[_][0]);w&&(T[0]=w.r2l(w.range[0]),T[2]=w.r2l(w.range[1]));var v=i(d,p._diag[_][1]);v&&(T[1]=v.r2l(v.range[0]),T[3]=v.r2l(v.range[1]))}y.selectBatch.length||y.unselectBatch.length?y.matrix.update({ranges:b},{ranges:b}):y.matrix.update({ranges:b})}function o(d){var p=d._fullLayout,y=p._glcanvas.data()[0].regl,g=p._splomGrid;g||(g=p._splomGrid=u(y)),g.update(c(d))}function c(d){var p=d._context.plotGlPixelRatio,y=d._fullLayout,g=y._size,A=[0,0,y.width*p,y.height*p],b={},M;function _(Z,ee,q,W,J,le){q*=p,W*=p,J*=p,le*=p;var fe=ee[Z+"color"],se=ee[Z+"width"],H=String(fe+se);H in b?b[H].data.push(NaN,NaN,q,W,J,le):b[H]={data:[q,W,J,le],join:"rect",thickness:se*p,color:fe,viewport:A,range:A,overlay:!1}}for(M in y._splomSubplots){var T=y._plots[M],w=T.xaxis,v=T.yaxis,L=w._gridVals,S=v._gridVals,k=w._offset,P=w._length,O=v._length,F=g.b+v.domain[0]*g.h,I=-v._m,D=-I*v.r2l(v.range[0],v.calendar),U,B;if(w.showgrid)for(M=0;M<L.length;M++)U=k+w.l2p(L[M].x),_("grid",w,U,F,U,F+O);if(v.showgrid)for(M=0;M<S.length;M++)B=F+D+I*S[M].x,_("grid",v,k,B,k+P,B);a(d,w,v)&&(U=k+w.l2p(0),_("zeroline",w,U,F,U,F+O)),a(d,v,w)&&(B=F+D+0,_("zeroline",v,k,B,k+P,B))}var j=[];for(M in b)j.push(b[M]);return j}function h(d,p,y,g){var A={},b;if(g._splomScenes){for(b=0;b<d.length;b++){var M=d[b];M.type==="splom"&&(A[M.uid]=1)}for(b=0;b<y.length;b++){var _=y[b];if(!A[_.uid]){var T=g._splomScenes[_.uid];T&&T.destroy&&T.destroy(),g._splomScenes[_.uid]=null,delete g._splomScenes[_.uid]}}}Object.keys(g._splomScenes||{}).length===0&&delete g._splomScenes,g._splomGrid&&!p._hasOnlyLargeSploms&&g._hasOnlyLargeSploms&&(g._splomGrid.destroy(),g._splomGrid=null,delete g._splomGrid),t.clean(d,p,y,g)}z.exports={name:r,attr:t.attr,attrRegex:t.attrRegex,layoutAttributes:t.layoutAttributes,supplyLayoutDefaults:t.supplyLayoutDefaults,drawFramework:t.drawFramework,plot:n,drag:f,updateGrid:o,clean:h,updateFx:t.updateFx,toSVG:t.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axis_ids"),m=e("../scatter/calc").calcMarkerSize,x=e("../scatter/calc").calcAxisExpansion,t=e("../scatter/colorscale_calc"),i=e("../scattergl/convert").markerSelection,a=e("../scattergl/convert").markerStyle,r=e("./scene_update"),n=e("../../constants/numerical").BADNUM,f=e("../scattergl/constants").TOO_MANY_POINTS;z.exports=function(o,c){var h=c.dimensions,d=c._length,p={},y=p.cdata=[],g=p.data=[],A=c._visibleDims=[],b,M,_,T,w;function v(O,F){for(var I=O.makeCalcdata({v:F.values,vcalendar:c.calendar},"v"),D=0;D<I.length;D++)I[D]=I[D]===n?NaN:I[D];y.push(I),g.push(O.type==="log"?u.simpleMap(I,O.c2l):I)}for(b=0;b<h.length;b++)if(_=h[b],_.visible){if(T=s.getFromId(o,c._diag[b][0]),w=s.getFromId(o,c._diag[b][1]),T&&w&&T.type!==w.type){u.log("Skipping splom dimension "+b+" with conflicting axis types");continue}T?(v(T,_),w&&w.type==="category"&&(w._categories=T._categories.slice())):v(w,_),A.push(b)}t(o,c),u.extendFlat(p,a(c));var L=y.length,S=L*d>f,k;for(S?k=p.sizeAvg||Math.max(p.size,3):k=m(c,d),M=0;M<A.length;M++)b=A[M],_=h[b],T=s.getFromId(o,c._diag[b][0])||{},w=s.getFromId(o,c._diag[b][1])||{},x(o,c,T,w,y[M],y[M],k);var P=r(o,c);return P.matrix||(P.matrix=!0),P.matrixOptions=p,P.selectedOptions=i(c,c.selected),P.unselectedOptions=i(c,c.unselected),[{x:!1,y:!1,t:{},trace:c}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/array_container_defaults"),m=e("./attributes"),x=e("../scatter/subtypes"),t=e("../scatter/marker_defaults"),i=e("../parcoords/merge_length"),a=e("../scattergl/helpers").isOpenSymbol;z.exports=function(l,o,c,h){function d(T,w){return u.coerce(l,o,m,T,w)}var p=s(l,o,{name:"dimensions",handleItemDefaults:r}),y=d("diagonal.visible"),g=d("showupperhalf"),A=d("showlowerhalf"),b=i(o,p,"values");if(!b||!y&&!g&&!A){o.visible=!1;return}d("text"),d("hovertext"),d("hovertemplate"),d("xhoverformat"),d("yhoverformat"),t(l,o,c,h,d);var M=a(o.marker.symbol),_=x.isBubble(o);d("marker.line.width",M||_?1:0),n(l,o,h,d),u.coerceSelectionMarkerOpacity(o,d)};function r(f,l){function o(h,d){return u.coerce(f,l,m.dimensions,h,d)}o("label");var c=o("values");c&&c.length?o("visible"):l.visible=!1,o("axis.type"),o("axis.matches")}function n(f,l,o,c){var h=l.dimensions,d=h.length,p=l.showupperhalf,y=l.showlowerhalf,g=l.diagonal.visible,A,b,M=new Array(d),_=new Array(d);for(A=0;A<d;A++){var T=A?A+1:"";M[A]="x"+T,_[A]="y"+T}var w=c("xaxes",M),v=c("yaxes",_),L=l._diag=new Array(d);l._xaxes={},l._yaxes={};var S=[],k=[];function P(ee,q,W,J){if(!!ee){var le=ee.charAt(0),fe=o._splomAxes[le];if(l["_"+le+"axes"][ee]=1,J.push(ee),!(ee in fe)){var se=fe[ee]={};W&&(se.label=W.label||"",W.visible&&W.axis&&(W.axis.type&&(se.type=W.axis.type),W.axis.matches&&(se.matches=q)))}}}var O=!g&&!y,F=!g&&!p;for(l._axesDim={},A=0;A<d;A++){var I=h[A],D=A===0,U=A===d-1,B=D&&O||U&&F?void 0:w[A],j=D&&F||U&&O?void 0:v[A];P(B,j,I,S),P(j,B,I,k),L[A]=[B,j],l._axesDim[B]=A,l._axesDim[j]=A}for(A=0;A<S.length;A++)for(b=0;b<k.length;b++){var Z=S[A]+k[b];(A>b&&p||A<b&&y||A===b&&(g||!y||!p))&&(o._splomSubplots[Z]=1)}(!y||!g&&p&&y)&&(o._splomGridDflt.xside="bottom",o._splomGridDflt.yside="left")}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/colorscale_calc"),m=e("../scattergl/convert").markerStyle;z.exports=function(t,i){var a=i.trace,r=t._fullLayout._splomScenes[a.uid];if(r){s(t,a),u.extendFlat(r.matrixOptions,m(a));var n=u.extendFlat({},r.matrixOptions,r.viewOpts);r.matrix.update(n,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(e,z,N){N.getDimIndex=function(s,m){for(var x=m._id,t=x.charAt(0),i={x:0,y:1}[t],a=s._visibleDims,r=0;r<a.length;r++){var n=a[r];if(s._diag[n][i]===x)return r}return!1}},{}],1035:[function(e,z,N){var u=e("./helpers"),s=e("../scattergl/hover").calcHover;function m(x,t,i){var a=x.cd,r=a[0].trace,n=x.scene,f=n.matrixOptions.cdata,l=x.xa,o=x.ya,c=l.c2p(t),h=o.c2p(i),d=x.distance,p=u.getDimIndex(r,l),y=u.getDimIndex(r,o);if(p===!1||y===!1)return[x];for(var g=f[p],A=f[y],b,M,_=d,T=0;T<g.length;T++){var w=g[T],v=A[T],L=l.c2p(w)-c,S=o.c2p(v)-h,k=Math.sqrt(L*L+S*S);k<_&&(_=M=k,b=T)}return x.index=b,x.distance=_,x.dxy=M,b===void 0?[x]:[s(x,g,A,r)]}z.exports={hoverPoints:m}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(e,z,N){var u=e("../../registry"),s=e("../../components/grid");z.exports={moduleType:"trace",name:"splom",basePlotModule:e("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:e("../scatter/marker_colorbar"),calc:e("./calc"),plot:e("./plot"),hoverPoints:e("./hover").hoverPoints,selectPoints:e("./select"),editStyle:e("./edit_style"),meta:{}},u.register(s)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(e,z,N){var u=e("regl-splom"),s=e("../../lib"),m=e("../../plots/cartesian/axis_ids"),x=e("../../components/dragelement/helpers").selectMode;z.exports=function(a,r,n){if(!!n.length)for(var f=0;f<n.length;f++)t(a,n[f][0])};function t(i,a){var r=i._fullLayout,n=r._size,f=a.trace,l=a.t,o=r._splomScenes[f.uid],c=o.matrixOptions,h=c.cdata,d=r._glcanvas.data()[0].regl,p=r.dragmode,y,g,A,b,M;if(h.length!==0){c.lower=f.showupperhalf,c.upper=f.showlowerhalf,c.diagonal=f.diagonal.visible;var _=f._visibleDims,T=h.length,w=o.viewOpts={};for(w.ranges=new Array(T),w.domains=new Array(T),M=0;M<_.length;M++){A=_[M];var v=w.ranges[M]=new Array(4),L=w.domains[M]=new Array(4);y=m.getFromId(i,f._diag[A][0]),y&&(v[0]=y._rl[0],v[2]=y._rl[1],L[0]=y.domain[0],L[2]=y.domain[1]),g=m.getFromId(i,f._diag[A][1]),g&&(v[1]=g._rl[0],v[3]=g._rl[1],L[1]=g.domain[0],L[3]=g.domain[1])}var S=i._context.plotGlPixelRatio,k=n.l*S,P=n.b*S,O=n.w*S,F=n.h*S;w.viewport=[k,P,O+k,F+P],o.matrix===!0&&(o.matrix=u(d));var I=r.clickmode.indexOf("select")>-1,D=x(p)||!!f.selectedpoints||I,U=!0;if(D){var B=f._length;if(f.selectedpoints){o.selectBatch=f.selectedpoints;var j=f.selectedpoints,Z={};for(A=0;A<j.length;A++)Z[j[A]]=!0;var ee=[];for(A=0;A<B;A++)Z[A]||ee.push(A);o.unselectBatch=ee}var q=l.xpx=new Array(T),W=l.ypx=new Array(T);for(M=0;M<_.length;M++){if(A=_[M],y=m.getFromId(i,f._diag[A][0]),y)for(q[M]=new Array(B),b=0;b<B;b++)q[M][b]=y.c2p(h[M][b]);if(g=m.getFromId(i,f._diag[A][1]),g)for(W[M]=new Array(B),b=0;b<B;b++)W[M][b]=g.c2p(h[M][b])}if(o.selectBatch.length||o.unselectBatch.length){var J=s.extendFlat({},c,o.unselectedOptions,w),le=s.extendFlat({},c,o.selectedOptions,w);o.matrix.update(J,le),U=!1}}else l.xpx=l.ypx=null;if(U){var fe=s.extendFlat({},c,w);o.matrix.update(fe,null)}}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(e,z,N){var u=e("../../lib");z.exports=function(m,x){var t=m._fullLayout,i=x.uid,a=t._splomScenes;a||(a=t._splomScenes={});var r={dirty:!0,selectBatch:[],unselectBatch:[]},n={matrix:!1,selectBatch:[],unselectBatch:[]},f=a[x.uid];return f||(f=a[i]=u.extendFlat({},r,n),f.draw=function(){f.matrix&&f.matrix.draw&&(f.selectBatch.length||f.unselectBatch.length?f.matrix.draw(f.unselectBatch,f.selectBatch):f.matrix.draw()),f.dirty=!1},f.destroy=function(){f.matrix&&f.matrix.destroy&&f.matrix.destroy(),f.matrixOptions=null,f.selectBatch=null,f.unselectBatch=null,f=null}),f.dirty||u.extendFlat(f,r),f}},{"../../lib":503}],1039:[function(e,z,N){var u=e("../../lib"),s=e("../scatter/subtypes"),m=e("./helpers");z.exports=function(t,i){var a=t.cd,r=a[0].trace,n=a[0].t,f=t.scene,l=f.matrixOptions.cdata,o=t.xaxis,c=t.yaxis,h=[];if(!f)return h;var d=!s.hasMarkers(r)&&!s.hasText(r);if(r.visible!==!0||d)return h;var p=m.getDimIndex(r,o),y=m.getDimIndex(r,c);if(p===!1||y===!1)return h;var g=n.xpx[p],A=n.ypx[y],b=l[p],M=l[y],_=[],T=[];if(i!==!1&&!i.degenerate)for(var w=0;w<b.length;w++)i.contains([g[w],A[w]],null,w,t)?(_.push(w),h.push({pointNumber:w,x:b[w],y:M[w]})):T.push(w);var v=f.matrixOptions;return!_.length&&!T.length?f.matrix.update(v,null):!f.selectBatch.length&&!f.unselectBatch.length&&f.matrix.update(f.unselectedOptions,u.extendFlat({},v,f.selectedOptions,f.viewOpts)),f.selectBatch=_,f.unselectBatch=T,h}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(e,z,N){var u=e("../../components/colorscale/attributes"),s=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,m=e("../../plots/template_attributes").hovertemplateAttrs,x=e("../mesh3d/attributes"),t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:m({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:s("u",1),vhoverformat:s("v",1),whoverformat:s("w",1),xhoverformat:s("x"),yhoverformat:s("y"),zhoverformat:s("z"),showlegend:i({},t.showlegend,{dflt:!1})};i(a,u("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"}));var r=["opacity","lightposition","lighting"];r.forEach(function(n){a[n]=x[n]}),a.hoverinfo=i({},t.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,z.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/calc");function m(a,r){r._len=Math.min(r.u.length,r.v.length,r.w.length,r.x.length,r.y.length,r.z.length),r._u=i(r.u,r._len),r._v=i(r.v,r._len),r._w=i(r.w,r._len),r._x=i(r.x,r._len),r._y=i(r.y,r._len),r._z=i(r.z,r._len);var n=x(r);r._gridFill=n.fill,r._Xs=n.Xs,r._Ys=n.Ys,r._Zs=n.Zs,r._len=n.len;var f=0,l,o,c;r.starts&&(l=i(r.starts.x||[]),o=i(r.starts.y||[]),c=i(r.starts.z||[]),f=Math.min(l.length,o.length,c.length)),r._startsX=l||[],r._startsY=o||[],r._startsZ=c||[];var h=0,d=1/0,p;for(p=0;p<r._len;p++){var y=r._u[p],g=r._v[p],A=r._w[p],b=Math.sqrt(y*y+g*g+A*A);h=Math.max(h,b),d=Math.min(d,b)}for(s(a,r,{vals:[d,h],containerStr:"",cLetter:"c"}),p=0;p<f;p++){var M=l[p];n.xMax=Math.max(n.xMax,M),n.xMin=Math.min(n.xMin,M);var _=o[p];n.yMax=Math.max(n.yMax,_),n.yMin=Math.min(n.yMin,_);var T=c[p];n.zMax=Math.max(n.zMax,T),n.zMin=Math.min(n.zMin,T)}r._slen=f,r._normMax=h,r._xbnds=[n.xMin,n.xMax],r._ybnds=[n.yMin,n.yMax],r._zbnds=[n.zMin,n.zMax]}function x(a){var r=a._x,n=a._y,f=a._z,l=a._len,o,c,h,d=-1/0,p=1/0,y=-1/0,g=1/0,A=-1/0,b=1/0,M="",_,T,w,v,L,S,k,P,O;for(l&&(v=r[0],S=n[0],P=f[0]),l>1&&(L=r[l-1],k=n[l-1],O=f[l-1]),o=0;o<l;o++)d=Math.max(d,r[o]),p=Math.min(p,r[o]),y=Math.max(y,n[o]),g=Math.min(g,n[o]),A=Math.max(A,f[o]),b=Math.min(b,f[o]),!_&&r[o]!==v&&(_=!0,M+="x"),!T&&n[o]!==S&&(T=!0,M+="y"),!w&&f[o]!==P&&(w=!0,M+="z");_||(M+="x"),T||(M+="y"),w||(M+="z");var F=t(a._x),I=t(a._y),D=t(a._z);M=M.replace("x",(v>L?"-":"+")+"x"),M=M.replace("y",(S>k?"-":"+")+"y"),M=M.replace("z",(P>O?"-":"+")+"z");var U=function(){l=0,F=[],I=[],D=[]};(!l||l<F.length*I.length*D.length)&&U();var B=function(oe){return oe==="x"?r:oe==="y"?n:f},j=function(oe){return oe==="x"?F:oe==="y"?I:D},Z=function(oe){return oe[l-1]<oe[0]?-1:1},ee=B(M[1]),q=B(M[3]),W=B(M[5]),J=j(M[1]).length,le=j(M[3]).length,fe=j(M[5]).length,se=!1,H=function(oe,ue,ye){return J*(le*oe+ue)+ye},Y=Z(B(M[1])),ne=Z(B(M[3])),te=Z(B(M[5]));for(o=0;o<fe-1;o++){for(c=0;c<le-1;c++){for(h=0;h<J-1;h++){var K=H(o,c,h),$=H(o,c,h+1),ae=H(o,c+1,h),ie=H(o+1,c,h);if((!(ee[K]*Y<ee[$]*Y)||!(q[K]*ne<q[ae]*ne)||!(W[K]*te<W[ie]*te))&&(se=!0),se)break}if(se)break}if(se)break}return se&&(u.warn("Encountered arbitrary coordinates! Unable to input data grid."),U()),{xMin:p,yMin:g,zMin:b,xMax:d,yMax:y,zMax:A,Xs:F,Ys:I,Zs:D,len:l,fill:M}}function t(a){return u.distinctVals(a).vals}function i(a,r){if(r===void 0&&(r=a.length),u.isTypedArray(a))return a.subarray(0,r);for(var n=[],f=0;f<r;f++)n[f]=+a[f];return n}z.exports={calc:m,filter:i,processGrid:x}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(e,z,N){var u=e("../../../stackgl_modules").gl_streamtube3d,s=u.createTubeMesh,m=e("../../lib"),x=e("../../lib/gl_format_color").parseColorScale,t=e("../../components/colorscale").extractOpts,i=e("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function r(h,d){this.scene=h,this.uid=d,this.mesh=null,this.data=null}var n=r.prototype;n.handlePick=function(h){var d=this.scene.fullSceneLayout,p=this.scene.dataScale;function y(b,M){var _=d[M],T=p[a[M]];return _.l2c(b)/T}if(h.object===this.mesh){var g=h.data.position,A=h.data.velocity;return h.traceCoordinate=[y(g[0],"xaxis"),y(g[1],"yaxis"),y(g[2],"zaxis"),y(A[0],"xaxis"),y(A[1],"yaxis"),y(A[2],"zaxis"),h.data.intensity*this.data._normMax,h.data.divergence],h.textLabel=this.data.hovertext||this.data.text,!0}};function f(h){var d=h.length,p;return d>2?p=h.slice(1,d-1):d===2?p=[(h[0]+h[1])/2]:p=h,p}function l(h){var d=h.length;return d===1?[.5,.5]:[h[1]-h[0],h[d-1]-h[d-2]]}function o(h,d){var p=h.fullSceneLayout,y=h.dataScale,g=d._len,A={};function b(le,fe){var se=p[fe],H=y[a[fe]];return m.simpleMap(le,function(Y){return se.d2l(Y)*H})}if(A.vectors=i(b(d._u,"xaxis"),b(d._v,"yaxis"),b(d._w,"zaxis"),g),!g)return{positions:[],cells:[]};var M=b(d._Xs,"xaxis"),_=b(d._Ys,"yaxis"),T=b(d._Zs,"zaxis");A.meshgrid=[M,_,T],A.gridFill=d._gridFill;var w=d._slen;if(w)A.startingPositions=i(b(d._startsX,"xaxis"),b(d._startsY,"yaxis"),b(d._startsZ,"zaxis"));else{for(var v=_[0],L=f(M),S=f(T),k=new Array(L.length*S.length),P=0,O=0;O<L.length;O++)for(var F=0;F<S.length;F++)k[P++]=[L[O],v,S[F]];A.startingPositions=k}A.colormap=x(d),A.tubeSize=d.sizeref,A.maxLength=d.maxdisplayed;var I=b(d._xbnds,"xaxis"),D=b(d._ybnds,"yaxis"),U=b(d._zbnds,"zaxis"),B=l(M),j=l(_),Z=l(T),ee=[[I[0]-B[0],D[0]-j[0],U[0]-Z[0]],[I[1]+B[1],D[1]+j[1],U[1]+Z[1]]],q=u(A,ee),W=t(d);q.vertexIntensityBounds=[W.min/d._normMax,W.max/d._normMax];var J=d.lightposition;return q.lightPosition=[J.x,J.y,J.z],q.ambient=d.lighting.ambient,q.diffuse=d.lighting.diffuse,q.specular=d.lighting.specular,q.roughness=d.lighting.roughness,q.fresnel=d.lighting.fresnel,q.opacity=d.opacity,d._pad=q.tubeScale*d.sizeref*2,q}n.update=function(h){this.data=h;var d=o(this.scene,h);this.mesh.update(d)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function c(h,d){var p=h.glplot.gl,y=o(h,d),g=s(p,y),A=new r(h,d.uid);return A.mesh=g,A.data=d,g._trace=A,h.glplot.add(g),A}z.exports=c},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(e,z,N){var u=e("../../lib"),s=e("../../components/colorscale/defaults"),m=e("./attributes");z.exports=function(t,i,a,r){function n(p,y){return u.coerce(t,i,m,p,y)}var f=n("u"),l=n("v"),o=n("w"),c=n("x"),h=n("y"),d=n("z");if(!f||!f.length||!l||!l.length||!o||!o.length||!c||!c.length||!h||!h.length||!d||!d.length){i.visible=!1;return}n("starts.x"),n("starts.y"),n("starts.z"),n("maxdisplayed"),n("sizeref"),n("lighting.ambient"),n("lighting.diffuse"),n("lighting.specular"),n("lighting.roughness"),n("lighting.fresnel"),n("lightposition.x"),n("lightposition.y"),n("lightposition.z"),s(t,i,r,n,{prefix:"",cLetter:"c"}),n("text"),n("hovertext"),n("hovertemplate"),n("uhoverformat"),n("vhoverformat"),n("whoverformat"),n("xhoverformat"),n("yhoverformat"),n("zhoverformat"),i._length=null}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(e,z,N){z.exports={moduleType:"trace",name:"streamtube",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:e("./attributes"),supplyDefaults:e("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:e("./calc").calc,plot:e("./convert"),eventData:function(u,s){return u.tubex=u.x,u.tubey=u.y,u.tubez=u.z,u.tubeu=s.traceCoordinate[3],u.tubev=s.traceCoordinate[4],u.tubew=s.traceCoordinate[5],u.norm=s.traceCoordinate[6],u.divergence=s.traceCoordinate[7],delete u.x,delete u.y,delete u.z,u},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(e,z,N){var u=e("../../plots/attributes"),s=e("../../plots/template_attributes").hovertemplateAttrs,m=e("../../plots/template_attributes").texttemplateAttrs,x=e("../../components/colorscale/attributes"),t=e("../../plots/domain").attributes,i=e("../pie/attributes"),a=e("./constants"),r=e("../../lib/extend").extendFlat;z.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:r({colors:{valType:"data_array",editType:"calc"},line:{color:r({},i.marker.line.color,{dflt:null}),width:r({},i.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},x("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:i.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:m({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:i.hovertext,hoverinfo:r({},u.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:s({},{keys:a.eventDataKeys}),textfont:i.textfont,insidetextorientation:i.insidetextorientation,insidetextfont:i.insidetextfont,outsidetextfont:r({},i.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:i.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:t({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(e,z,N){var u=e("../../plots/plots");N.name="sunburst",N.plot=function(s,m,x,t){u.plotBasePlot(N.name,s,m,x,t)},N.clean=function(s,m,x,t){u.cleanBasePlot(N.name,s,m,x,t)}},{"../../plots/plots":619}],1047:[function(e,z,N){var u=e("d3-hierarchy"),s=e("fast-isnumeric"),m=e("../../lib"),x=e("../../components/colorscale").makeColorScaleFuncFromTrace,t=e("../pie/calc").makePullColorFn,i=e("../pie/calc").generateExtendedColors,a=e("../../components/colorscale").calc,r=e("../../constants/numerical").ALMOST_EQUAL,n={},f={},l={};N.calc=function(c,h){var d=c._fullLayout,p=h.ids,y=m.isArrayOrTypedArray(p),g=h.labels,A=h.parents,b=h.values,M=m.isArrayOrTypedArray(b),_=[],T={},w={},v=function(Y,ne){T[Y]?T[Y].push(ne):T[Y]=[ne],w[ne]=1},L=function(Y){return Y||typeof Y=="number"},S=function(Y){return!M||s(b[Y])&&b[Y]>=0},k,P,O;y?(k=Math.min(p.length,A.length),P=function(Y){return L(p[Y])&&S(Y)},O=function(Y){return String(p[Y])}):(k=Math.min(g.length,A.length),P=function(Y){return L(g[Y])&&S(Y)},O=function(Y){return String(g[Y])}),M&&(k=Math.min(k,b.length));for(var F=0;F<k;F++)if(P(F)){var I=O(F),D=L(A[F])?String(A[F]):"",U={i:F,id:I,pid:D,label:L(g[F])?String(g[F]):""};M&&(U.v=+b[F]),_.push(U),v(D,I)}if(T[""]){if(T[""].length>1){for(var Z=m.randstr(),ee=0;ee<_.length;ee++)_[ee].pid===""&&(_[ee].pid=Z);_.unshift({hasMultipleRoots:!0,id:Z,pid:"",label:""})}}else{var B=[],j;for(j in T)w[j]||B.push(j);if(B.length===1)j=B[0],_.unshift({hasImpliedRoot:!0,id:j,pid:"",label:j});else return m.warn(["Multiple implied roots, cannot build",h.type,"hierarchy of",h.name+".","These roots include:",B.join(", ")].join(" "))}var q;try{q=u.stratify().id(function(Y){return Y.id}).parentId(function(Y){return Y.pid})(_)}catch(Y){return m.warn(["Failed to build",h.type,"hierarchy of",h.name+".","Error:",Y.message].join(" "))}var W=u.hierarchy(q),J=!1;if(M)switch(h.branchvalues){case"remainder":W.sum(function(Y){return Y.data.v});break;case"total":W.each(function(Y){var ne=Y.data.data,te=ne.v;if(Y.children){var K=Y.children.reduce(function($,ae){return $+ae.data.data.v},0);if((ne.hasImpliedRoot||ne.hasMultipleRoots)&&(te=K),te<K*r)return J=!0,m.warn(["Total value for node",Y.data.data.id,"of",h.name,"is smaller than the sum of its children.",`
parent value =`,te,`
children sum =`,K].join(" "))}Y.value=te});break}else o(W,h,{branches:h.count.indexOf("branches")!==-1,leaves:h.count.indexOf("leaves")!==-1});if(!J){h.sort&&W.sort(function(Y,ne){return ne.value-Y.value});var le,fe,se=h.marker.colors||[],H=!!se.length;return h._hasColorscale?(H||(se=M?h.values:h._values),a(c,h,{vals:se,containerStr:"marker",cLetter:"c"}),fe=x(h.marker)):le=t(d["_"+h.type+"colormap"]),W.each(function(Y){var ne=Y.data.data;ne.color=h._hasColorscale?fe(se[ne.i]):le(se[ne.i],ne.id)}),_[0].hierarchy=W,_}},N._runCrossTraceCalc=function(c,h){var d=h._fullLayout,p=h.calcdata,y=d[c+"colorway"],g=d["_"+c+"colormap"];d["extend"+c+"colors"]&&(y=i(y,c==="icicle"?l:c==="treemap"?f:n));var A=0,b;function M(v){var L=v.data.data,S=L.id;L.color===!1&&(g[S]?L.color=g[S]:v.parent?v.parent.parent?L.color=v.parent.data.data.color:(g[S]=L.color=y[A%y.length],A++):L.color=b)}for(var _=0;_<p.length;_++){var T=p[_],w=T[0];w.trace.type===c&&w.hierarchy&&(b=w.trace.root.color,w.hierarchy.each(M))}},N.crossTraceCalc=function(c){return N._runCrossTraceCalc("sunburst",c)};function o(c,h,d){var p=0,y=c.children;if(y){for(var g=y.length,A=0;A<g;A++)p+=o(y[A],h,d);d.branches&&p++}else d.leaves&&p++;return c.value=c.data.data.value=p,h._values||(h._values=[]),h._values[c.data.data.i]=p,p}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(e,z,N){z.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults,x=e("../bar/defaults").handleText,t=e("../../components/colorscale"),i=t.hasColorscale,a=t.handleDefaults;z.exports=function(n,f,l,o){function c(M,_){return u.coerce(n,f,s,M,_)}var h=c("labels"),d=c("parents");if(!h||!h.length||!d||!d.length){f.visible=!1;return}var p=c("values");p&&p.length?c("branchvalues"):c("count"),c("level"),c("maxdepth");var y=c("marker.line.width");y&&c("marker.line.color",o.paper_bgcolor),c("marker.colors");var g=f._hasColorscale=i(n,"marker","colors")||(n.marker||{}).coloraxis;g&&a(n,f,o,c,{prefix:"marker.",cLetter:"c"}),c("leaf.opacity",g?1:.7);var A=c("text");c("texttemplate"),f.texttemplate||c("textinfo",Array.isArray(A)?"text+label":"label"),c("hovertext"),c("hovertemplate");var b="auto";x(n,f,o,c,b,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),c("insidetextorientation"),c("sort"),c("rotation"),c("root.color"),m(f,o,c),f._length=null}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../registry"),m=e("../../components/fx/helpers").appendArrayPointValue,x=e("../../components/fx"),t=e("../../lib"),i=e("../../lib/events"),a=e("./helpers"),r=e("../pie/helpers"),n=r.formatPieValue;z.exports=function(o,c,h,d,p){var y=d[0],g=y.trace,A=y.hierarchy,b=g.type==="sunburst",M=g.type==="treemap"||g.type==="icicle";"_hasHoverLabel"in g||(g._hasHoverLabel=!1),"_hasHoverEvent"in g||(g._hasHoverEvent=!1);var _=function(v){var L=h._fullLayout;if(!(h._dragging||L.hovermode===!1)){var S=h._fullData[g.index],k=v.data.data,P=k.i,O=a.isHierarchyRoot(v),F=a.getParent(A,v),I=a.getValue(v),D=function($){return t.castOption(S,P,$)},U=D("hovertemplate"),B=x.castHoverinfo(S,L,P),j=L.separators,Z;if(U||B&&B!=="none"&&B!=="skip"){var ee,q;b&&(ee=y.cx+v.pxmid[0]*(1-v.rInscribed),q=y.cy+v.pxmid[1]*(1-v.rInscribed)),M&&(ee=v._hoverX,q=v._hoverY);var W={},J=[],le=[],fe=function($){return J.indexOf($)!==-1};B&&(J=B==="all"?S._module.attributes.hoverinfo.flags:B.split("+")),W.label=k.label,fe("label")&&W.label&&le.push(W.label),k.hasOwnProperty("v")&&(W.value=k.v,W.valueLabel=n(W.value,j),fe("value")&&le.push(W.valueLabel)),W.currentPath=v.currentPath=a.getPath(v.data),fe("current path")&&!O&&le.push(W.currentPath);var se,H=[],Y=function(){H.indexOf(se)===-1&&(le.push(se),H.push(se))};W.percentParent=v.percentParent=I/a.getValue(F),W.parent=v.parentString=a.getPtLabel(F),fe("percent parent")&&(se=a.formatPercent(W.percentParent,j)+" of "+W.parent,Y()),W.percentEntry=v.percentEntry=I/a.getValue(c),W.entry=v.entry=a.getPtLabel(c),fe("percent entry")&&!O&&!v.onPathbar&&(se=a.formatPercent(W.percentEntry,j)+" of "+W.entry,Y()),W.percentRoot=v.percentRoot=I/a.getValue(A),W.root=v.root=a.getPtLabel(A),fe("percent root")&&!O&&(se=a.formatPercent(W.percentRoot,j)+" of "+W.root,Y()),W.text=D("hovertext")||D("text"),fe("text")&&(se=W.text,t.isValidTextValue(se)&&le.push(se)),Z=[f(v,S,p.eventDataKeys)];var ne={trace:S,y:q,_x0:v._x0,_x1:v._x1,_y0:v._y0,_y1:v._y1,text:le.join("<br>"),name:U||fe("name")?S.name:void 0,color:D("hoverlabel.bgcolor")||k.color,borderColor:D("hoverlabel.bordercolor"),fontFamily:D("hoverlabel.font.family"),fontSize:D("hoverlabel.font.size"),fontColor:D("hoverlabel.font.color"),nameLength:D("hoverlabel.namelength"),textAlign:D("hoverlabel.align"),hovertemplate:U,hovertemplateLabels:W,eventData:Z};b&&(ne.x0=ee-v.rInscribed*v.rpx1,ne.x1=ee+v.rInscribed*v.rpx1,ne.idealAlign=v.pxmid[0]<0?"left":"right"),M&&(ne.x=ee,ne.idealAlign=ee<0?"left":"right");var te=[];x.loneHover(ne,{container:L._hoverlayer.node(),outerContainer:L._paper.node(),gd:h,inOut_bbox:te}),Z[0].bbox=te[0],g._hasHoverLabel=!0}if(M){var K=o.select("path.surface");p.styleOne(K,v,S,{hovered:!0})}g._hasHoverEvent=!0,h.emit("plotly_hover",{points:Z||[f(v,S,p.eventDataKeys)],event:u.event})}},T=function(v){var L=h._fullLayout,S=h._fullData[g.index],k=u.select(this).datum();if(g._hasHoverEvent&&(v.originalEvent=u.event,h.emit("plotly_unhover",{points:[f(k,S,p.eventDataKeys)],event:u.event}),g._hasHoverEvent=!1),g._hasHoverLabel&&(x.loneUnhover(L._hoverlayer.node()),g._hasHoverLabel=!1),M){var P=o.select("path.surface");p.styleOne(P,k,S,{hovered:!1})}},w=function(v){var L=h._fullLayout,S=h._fullData[g.index],k=b&&(a.isHierarchyRoot(v)||a.isLeaf(v)),P=a.getPtId(v),O=a.isEntry(v)?a.findEntryWithChild(A,P):a.findEntryWithLevel(A,P),F=a.getPtId(O),I={points:[f(v,S,p.eventDataKeys)],event:u.event};k||(I.nextLevel=F);var D=i.triggerHandler(h,"plotly_"+g.type+"click",I);if(D!==!1&&L.hovermode&&(h._hoverdata=[f(v,S,p.eventDataKeys)],x.click(h,u.event)),!k&&D!==!1&&!h._dragging&&!h._transitioning){s.call("_storeDirectGUIEdit",S,L._tracePreGUI[S.uid],{level:S.level});var U={data:[{level:F}],traces:[g.index]},B={frame:{redraw:!1,duration:p.transitionTime},transition:{duration:p.transitionTime,easing:p.transitionEasing},mode:"immediate",fromcurrent:!0};x.loneUnhover(L._hoverlayer.node()),s.call("animate",h,U,B)}};o.on("mouseover",_),o.on("mouseout",T),o.on("click",w)};function f(l,o,c){for(var h=l.data.data,d={curveNumber:o.index,pointNumber:h.i,data:o._input,fullData:o},p=0;p<c.length;p++){var y=c[p];y in l&&(d[y]=l[y])}return"parentString"in l&&!a.isHierarchyRoot(l)&&(d.parent=l.parentString),m(d,o,h.i),d}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../../lib/setcursor"),x=e("../pie/helpers");N.findEntryWithLevel=function(r,n){var f;return n&&r.eachAfter(function(l){if(N.getPtId(l)===n)return f=l.copy()}),f||r},N.findEntryWithChild=function(r,n){var f;return r.eachAfter(function(l){for(var o=l.children||[],c=0;c<o.length;c++){var h=o[c];if(N.getPtId(h)===n)return f=l.copy()}}),f||r},N.isEntry=function(r){return!r.parent},N.isLeaf=function(r){return!r.children},N.getPtId=function(r){return r.data.data.id},N.getPtLabel=function(r){return r.data.data.label},N.getValue=function(r){return r.value},N.isHierarchyRoot=function(r){return a(r)===""},N.setSliceCursor=function(r,n,f){var l=f.isTransitioning;if(!l){var o=r.datum();l=f.hideOnRoot&&N.isHierarchyRoot(o)||f.hideOnLeaves&&N.isLeaf(o)}m(r,l?null:"pointer")};function t(r,n,f){return{color:N.getOutsideTextFontKey("color",r,n,f),family:N.getOutsideTextFontKey("family",r,n,f),size:N.getOutsideTextFontKey("size",r,n,f)}}function i(r,n,f,l){var o=(l||{}).onPathbar,c=n.data.data,h=c.i,d=u.castOption(r,h,(o?"pathbar.textfont":"insidetextfont")+".color");return!d&&r._input.textfont&&(d=u.castOption(r._input,h,"textfont.color")),{color:d||s.contrast(c.color),family:N.getInsideTextFontKey("family",r,n,f,l),size:N.getInsideTextFontKey("size",r,n,f,l)}}N.getInsideTextFontKey=function(r,n,f,l,o){var c=(o||{}).onPathbar,h=c?"pathbar.textfont":"insidetextfont",d=f.data.data.i;return u.castOption(n,d,h+"."+r)||u.castOption(n,d,"textfont."+r)||l.size},N.getOutsideTextFontKey=function(r,n,f,l){var o=f.data.data.i;return u.castOption(n,o,"outsidetextfont."+r)||u.castOption(n,o,"textfont."+r)||l.size},N.isOutsideText=function(r,n){return!r._hasColorscale&&N.isHierarchyRoot(n)},N.determineTextFont=function(r,n,f,l){return N.isOutsideText(r,n)?t(r,n,f):i(r,n,f,l)},N.hasTransition=function(r){return!!(r&&r.duration>0)},N.getMaxDepth=function(r){return r.maxdepth>=0?r.maxdepth:1/0},N.isHeader=function(r,n){return!(N.isLeaf(r)||r.depth===n._maxDepth-1)};function a(r){return r.data.data.pid}N.getParent=function(r,n){return N.findEntryWithLevel(r,a(n))},N.listPath=function(r,n){var f=r.parent;if(!f)return[];var l=n?[f.data[n]]:[f];return N.listPath(f,n).concat(l)},N.getPath=function(r){return N.listPath(r,"label").join("/")+"/"},N.formatValue=x.formatPieValue,N.formatPercent=function(r,n){var f=u.formatPercent(r,0);return f==="0%"&&(f=x.formatPiePercent(r,n)),f}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(e,z,N){z.exports={moduleType:"trace",name:"sunburst",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot").plot,style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(e,z,N){z.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("sunburstcolorway",t.colorway),i("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-hierarchy"),m=e("d3-interpolate").interpolate,x=e("../../components/drawing"),t=e("../../lib"),i=e("../../lib/svg_text_utils"),a=e("../bar/uniform_text"),r=a.recordMinTextSize,n=a.clearMinTextSize,f=e("../pie/plot"),l=e("../pie/helpers").getRotationAngle,o=f.computeTransform,c=f.transformInsideText,h=e("./style").styleOne,d=e("../bar/style").resizeText,p=e("./fx"),y=e("./constants"),g=e("./helpers");N.plot=function(w,v,L,S){var k=w._fullLayout,P=k._sunburstlayer,O,F,I=!L,D=!k.uniformtext.mode&&g.hasTransition(L);if(n("sunburst",k),O=P.selectAll("g.trace.sunburst").data(v,function(B){return B[0].trace.uid}),O.enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),O.order(),D){S&&(F=S());var U=u.transition().duration(L.duration).ease(L.easing).each("end",function(){F&&F()}).each("interrupt",function(){F&&F()});U.each(function(){P.selectAll("g.trace").each(function(B){A(w,B,this,L)})})}else O.each(function(B){A(w,B,this,L)}),k.uniformtext.mode&&d(w,k._sunburstlayer.selectAll(".trace"),"sunburst");I&&O.exit().remove()};function A(w,v,L,S){var k=w._fullLayout,P=!k.uniformtext.mode&&g.hasTransition(S),O=u.select(L),F=O.selectAll("g.slice"),I=v[0],D=I.trace,U=I.hierarchy,B=g.findEntryWithLevel(U,D.level),j=g.getMaxDepth(D),Z=k._size,ee=D.domain,q=Z.w*(ee.x[1]-ee.x[0]),W=Z.h*(ee.y[1]-ee.y[0]),J=.5*Math.min(q,W),le=I.cx=Z.l+Z.w*(ee.x[1]+ee.x[0])/2,fe=I.cy=Z.t+Z.h*(1-ee.y[0])-W/2;if(!B)return F.remove();var se=null,H={};P&&F.each(function(_e){H[g.getPtId(_e)]={rpx0:_e.rpx0,rpx1:_e.rpx1,x0:_e.x0,x1:_e.x1,transform:_e.transform},!se&&g.isEntry(_e)&&(se=_e)});var Y=b(B).descendants(),ne=B.height+1,te=0,K=j;I.hasMultipleRoots&&g.isHierarchyRoot(B)&&(Y=Y.slice(1),ne-=1,te=1,K+=1),Y=Y.filter(function(_e){return _e.y1<=K});var $=l(D.rotation);$&&Y.forEach(function(_e){_e.x0+=$,_e.x1+=$});var ae=Math.min(ne,j),ie=function(_e){return(_e-te)/ae*J},oe=function(_e,Re){return[_e*Math.cos(Re),-_e*Math.sin(Re)]},ue=function(_e){return t.pathAnnulus(_e.rpx0,_e.rpx1,_e.x0,_e.x1,le,fe)},ye=function(_e){return le+_(_e)[0]*(_e.transform.rCenter||0)+(_e.transform.x||0)},ce=function(_e){return fe+_(_e)[1]*(_e.transform.rCenter||0)+(_e.transform.y||0)};F=F.data(Y,g.getPtId),F.enter().append("g").classed("slice",!0),P?F.exit().transition().each(function(){var _e=u.select(this),Re=_e.select("path.surface");Re.transition().attrTween("d",function(qe){var Ue=Ae(qe);return function(Ie){return ue(Ue(Ie))}});var We=_e.select("g.slicetext");We.attr("opacity",0)}).remove():F.exit().remove(),F.order();var me=null;if(P&&se){var xe=g.getPtId(se);F.each(function(_e){me===null&&g.getPtId(_e)===xe&&(me=_e.x1)})}var ke=F;P&&(ke=ke.transition().each("end",function(){var _e=u.select(this);g.setSliceCursor(_e,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),ke.each(function(_e){var Re=u.select(this),We=t.ensureSingle(Re,"path","surface",function(Rt){Rt.style("pointer-events","all")});_e.rpx0=ie(_e.y0),_e.rpx1=ie(_e.y1),_e.xmid=(_e.x0+_e.x1)/2,_e.pxmid=oe(_e.rpx1,_e.xmid),_e.midangle=-(_e.xmid-Math.PI/2),_e.startangle=-(_e.x0-Math.PI/2),_e.stopangle=-(_e.x1-Math.PI/2),_e.halfangle=.5*Math.min(t.angleDelta(_e.x0,_e.x1)||Math.PI,Math.PI),_e.ring=1-_e.rpx0/_e.rpx1,_e.rInscribed=M(_e),P?We.transition().attrTween("d",function(Rt){var Gt=Oe(Rt);return function(kt){return ue(Gt(kt))}}):We.attr("d",ue),Re.call(p,B,w,v,{eventDataKeys:y.eventDataKeys,transitionTime:y.CLICK_TRANSITION_TIME,transitionEasing:y.CLICK_TRANSITION_EASING}).call(g.setSliceCursor,w,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:w._transitioning}),We.call(h,_e,D);var qe=t.ensureSingle(Re,"g","slicetext"),Ue=t.ensureSingle(qe,"text","",function(Rt){Rt.attr("data-notex",1)}),Ie=t.ensureUniformFontSize(w,g.determineTextFont(D,_e,k.font));Ue.text(N.formatSliceLabel(_e,B,D,v,k)).classed("slicetext",!0).attr("text-anchor","middle").call(x.font,Ie).call(i.convertToTspans,w);var Ve=x.bBox(Ue.node());_e.transform=c(Ve,_e,I),_e.transform.targetX=ye(_e),_e.transform.targetY=ce(_e);var dt=function(Rt,Gt){var kt=Rt.transform;return o(kt,Gt),kt.fontSize=Ie.size,r(D.type,kt,k),t.getTextTransform(kt)};P?Ue.transition().attrTween("transform",function(Rt){var Gt=He(Rt);return function(kt){return dt(Gt(kt),Ve)}}):Ue.attr("transform",dt(_e,Ve))});function Ae(_e){var Re=g.getPtId(_e),We=H[Re],qe=H[g.getPtId(B)],Ue;if(qe){var Ie=(_e.x1>qe.x1?2*Math.PI:0)+$;Ue=_e.rpx1<qe.rpx1?{x0:_e.x0,x1:_e.x1,rpx0:0,rpx1:0}:{x0:Ie,x1:Ie,rpx0:_e.rpx0,rpx1:_e.rpx1}}else{var Ve,dt=g.getPtId(_e.parent);F.each(function(Bt){if(g.getPtId(Bt)===dt)return Ve=Bt});var Rt=Ve.children,Gt;Rt.forEach(function(Bt,Lt){if(g.getPtId(Bt)===Re)return Gt=Lt});var kt=Rt.length,zt=m(Ve.x0,Ve.x1);Ue={rpx0:J,rpx1:J,x0:zt(Gt/kt),x1:zt((Gt+1)/kt)}}return m(We,Ue)}function Oe(_e){var Re=H[g.getPtId(_e)],We,qe={x0:_e.x0,x1:_e.x1,rpx0:_e.rpx0,rpx1:_e.rpx1};if(Re)We=Re;else if(se)if(_e.parent)if(me){var Ue=(_e.x1>me?2*Math.PI:0)+$;We={x0:Ue,x1:Ue}}else We={rpx0:J,rpx1:J},t.extendFlat(We,Ge(_e));else We={rpx0:0,rpx1:0};else We={x0:$,x1:$};return m(We,qe)}function He(_e){var Re=H[g.getPtId(_e)],We,qe=_e.transform;if(Re)We=Re;else if(We={rpx1:_e.rpx1,transform:{textPosAngle:qe.textPosAngle,scale:0,rotate:qe.rotate,rCenter:qe.rCenter,x:qe.x,y:qe.y}},se)if(_e.parent)if(me){var Ue=_e.x1>me?2*Math.PI:0;We.x0=We.x1=Ue}else t.extendFlat(We,Ge(_e));else We.x0=We.x1=$;else We.x0=We.x1=$;var Ie=m(We.transform.textPosAngle,_e.transform.textPosAngle),Ve=m(We.rpx1,_e.rpx1),dt=m(We.x0,_e.x0),Rt=m(We.x1,_e.x1),Gt=m(We.transform.scale,qe.scale),kt=m(We.transform.rotate,qe.rotate),zt=qe.rCenter===0?3:We.transform.rCenter===0?1/3:1,Bt=m(We.transform.rCenter,qe.rCenter),Lt=function(Mt){return Bt(Math.pow(Mt,zt))};return function(Mt){var it=Ve(Mt),ht=dt(Mt),Qe=Rt(Mt),Ce=Lt(Mt),Xe=oe(it,(ht+Qe)/2),rt=Ie(Mt),ut={pxmid:Xe,rpx1:it,transform:{textPosAngle:rt,rCenter:Ce,x:qe.x,y:qe.y}};return r(D.type,qe,k),{transform:{targetX:ye(ut),targetY:ce(ut),scale:Gt(Mt),rotate:kt(Mt),rCenter:Ce}}}}function Ge(_e){var Re=_e.parent,We=H[g.getPtId(Re)],qe={};if(We){var Ue=Re.children,Ie=Ue.indexOf(_e),Ve=Ue.length,dt=m(We.x0,We.x1);qe.x0=dt(Ie/Ve),qe.x1=dt(Ie/Ve)}else qe.x0=qe.x1=0;return qe}}function b(w){return s.partition().size([2*Math.PI,w.height+1])(w)}N.formatSliceLabel=function(w,v,L,S,k){var P=L.texttemplate,O=L.textinfo;if(!P&&(!O||O==="none"))return"";var F=k.separators,I=S[0],D=w.data.data,U=I.hierarchy,B=g.isHierarchyRoot(w),j=g.getParent(U,w),Z=g.getValue(w);if(!P){var ee=O.split("+"),q=function(K){return ee.indexOf(K)!==-1},W=[],J;if(q("label")&&D.label&&W.push(D.label),D.hasOwnProperty("v")&&q("value")&&W.push(g.formatValue(D.v,F)),!B){q("current path")&&W.push(g.getPath(w.data));var le=0;q("percent parent")&&le++,q("percent entry")&&le++,q("percent root")&&le++;var fe=le>1;if(le){var se,H=function(K){J=g.formatPercent(se,F),fe&&(J+=" of "+K),W.push(J)};q("percent parent")&&!B&&(se=Z/g.getValue(j),H("parent")),q("percent entry")&&(se=Z/g.getValue(v),H("entry")),q("percent root")&&(se=Z/g.getValue(U),H("root"))}}return q("text")&&(J=t.castOption(L,D.i,"text"),t.isValidTextValue(J)&&W.push(J)),W.join("<br>")}var Y=t.castOption(L,D.i,"texttemplate");if(!Y)return"";var ne={};D.label&&(ne.label=D.label),D.hasOwnProperty("v")&&(ne.value=D.v,ne.valueLabel=g.formatValue(D.v,F)),ne.currentPath=g.getPath(w.data),B||(ne.percentParent=Z/g.getValue(j),ne.percentParentLabel=g.formatPercent(ne.percentParent,F),ne.parent=g.getPtLabel(j)),ne.percentEntry=Z/g.getValue(v),ne.percentEntryLabel=g.formatPercent(ne.percentEntry,F),ne.entry=g.getPtLabel(v),ne.percentRoot=Z/g.getValue(U),ne.percentRootLabel=g.formatPercent(ne.percentRoot,F),ne.root=g.getPtLabel(U),D.hasOwnProperty("color")&&(ne.color=D.color);var te=t.castOption(L,D.i,"text");return(t.isValidTextValue(te)||te==="")&&(ne.text=te),ne.customdata=t.castOption(L,D.i,"customdata"),t.texttemplateString(Y,ne,k._d3locale,ne,L._meta||{})};function M(w){return w.rpx0===0&&t.isFullCircle([w.x0,w.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(w.halfangle)),w.ring/2))}function _(w){return T(w.rpx1,w.transform.textPosAngle)}function T(w,v){return[w*Math.sin(v),-w*Math.cos(v)]}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../lib"),x=e("../bar/uniform_text").resizeText;function t(a){var r=a._fullLayout._sunburstlayer.selectAll(".trace");x(a,r,"sunburst"),r.each(function(n){var f=u.select(this),l=n[0],o=l.trace;f.style("opacity",o.opacity),f.selectAll("path.surface").each(function(c){u.select(this).call(i,c,o)})})}function i(a,r,n){var f=r.data.data,l=!r.children,o=f.i,c=m.castOption(n,o,"marker.line.color")||s.defaultLine,h=m.castOption(n,o,"marker.line.width")||0;a.style("stroke-width",h).call(s.fill,f.color).call(s.stroke,c).style("opacity",l?n.leaf.opacity:null)}z.exports={style:t,styleOne:i}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(e,z,N){var u=e("../../components/color"),s=e("../../components/colorscale/attributes"),m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=e("../../plots/template_attributes").hovertemplateAttrs,t=e("../../plots/attributes"),i=e("../../lib/extend").extendFlat,a=e("../../plot_api/edit_types").overrideAll;function r(l){return{valType:"boolean",dflt:!1}}function n(l){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:r(),y:r(),z:r()},color:{valType:"color",dflt:u.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:u.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var f=z.exports=a(i({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:x(),xhoverformat:m("x"),yhoverformat:m("y"),zhoverformat:m("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},s("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:n(),y:n(),z:n()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:i({},s.zauto,{}),zmin:i({},s.zmin,{}),zmax:i({},s.zmax,{})},hoverinfo:i({},t.hoverinfo),showlegend:i({},t.showlegend,{dflt:!1})}),"calc","nested");f.x.editType=f.y.editType=f.z.editType="calc+clearAxisTypes",f.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(e,z,N){var u=e("../../components/colorscale/calc");z.exports=function(m,x){x.surfacecolor?u(m,x,{vals:x.surfacecolor,containerStr:"",cLetter:"c"}):u(m,x,{vals:x.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(e,z,N){var u=e("../../../stackgl_modules").gl_surface3d,s=e("../../../stackgl_modules").ndarray,m=e("../../../stackgl_modules").ndarray_linear_interpolate.d2,x=e("../heatmap/interp2d"),t=e("../heatmap/find_empties"),i=e("../../lib").isArrayOrTypedArray,a=e("../../lib/gl_format_color").parseColorScale,r=e("../../lib/str2rgbarray"),n=e("../../components/colorscale").extractOpts;function f(S,k,P){this.scene=S,this.uid=P,this.surface=k,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var l=f.prototype;l.getXat=function(S,k,P,O){var F=i(this.data.x)?i(this.data.x[0])?this.data.x[k][S]:this.data.x[S]:S;return P===void 0?F:O.d2l(F,0,P)},l.getYat=function(S,k,P,O){var F=i(this.data.y)?i(this.data.y[0])?this.data.y[k][S]:this.data.y[k]:k;return P===void 0?F:O.d2l(F,0,P)},l.getZat=function(S,k,P,O){var F=this.data.z[k][S];return F===null&&this.data.connectgaps&&this.data._interpolatedZ&&(F=this.data._interpolatedZ[k][S]),P===void 0?F:O.d2l(F,0,P)},l.handlePick=function(S){if(S.object===this.surface){var k=(S.data.index[0]-1)/this.dataScaleX-1,P=(S.data.index[1]-1)/this.dataScaleY-1,O=Math.max(Math.min(Math.round(k),this.data.z[0].length-1),0),F=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);S.index=[O,F],S.traceCoordinate=[this.getXat(O,F),this.getYat(O,F),this.getZat(O,F)],S.dataCoordinate=[this.getXat(O,F,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(O,F,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(O,F,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var I=0;I<3;I++){var D=S.dataCoordinate[I];D!=null&&(S.dataCoordinate[I]*=this.scene.dataScale[I])}var U=this.data.hovertext||this.data.text;return Array.isArray(U)&&U[F]&&U[F][O]!==void 0?S.textLabel=U[F][O]:U?S.textLabel=U:S.textLabel="",S.data.dataCoordinate=S.dataCoordinate.slice(),this.surface.highlight(S.data),this.scene.glplot.spikes.position=S.dataCoordinate,!0}};function o(S){var k=S[0].rgb,P=S[S.length-1].rgb;return k[0]===P[0]&&k[1]===P[1]&&k[2]===P[2]&&k[3]===P[3]}var c=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function h(S,k){if(S<k)return 0;for(var P=0;Math.floor(S%k)===0;)S/=k,P++;return P}function d(S){for(var k=[],P=0;P<c.length;P++){var O=c[P];k.push(h(S,O))}return k}function p(S){for(var k=d(S),P=S,O=0;O<c.length;O++)if(k[O]>0){P=c[O];break}return P}function y(S,k){if(!(S<1||k<1)){for(var P=d(S),O=d(k),F=1,I=0;I<c.length;I++)F*=Math.pow(c[I],Math.max(P[I],O[I]));return F}}function g(S){if(S.length!==0){for(var k=1,P=0;P<S.length;P++)k=y(k,S[P]);return k}}l.calcXnums=function(S){var k,P=[];for(k=1;k<S;k++){var O=this.getXat(k-1,0),F=this.getXat(k,0);F!==O&&O!==void 0&&O!==null&&F!==void 0&&F!==null?P[k-1]=Math.abs(F-O):P[k-1]=0}var I=0;for(k=1;k<S;k++)I+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(I/P[k-1]);return P},l.calcYnums=function(S){var k,P=[];for(k=1;k<S;k++){var O=this.getYat(0,k-1),F=this.getYat(0,k);F!==O&&O!==void 0&&O!==null&&F!==void 0&&F!==null?P[k-1]=Math.abs(F-O):P[k-1]=0}var I=0;for(k=1;k<S;k++)I+=P[k-1];for(k=1;k<S;k++)P[k-1]===0?P[k-1]=1:P[k-1]=Math.round(I/P[k-1]);return P};var A=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],b=A[9],M=A[13];l.estimateScale=function(S,k){for(var P=k===0?this.calcXnums(S):this.calcYnums(S),O=1+g(P);O<b;)O*=2;for(;O>M;)O--,O/=p(O),O++,O<b&&(O=M);var F=Math.round(O/S);return F>1?F:1};function _(S,k,P){var O=P[8]+P[2]*k[0]+P[5]*k[1];return S[0]=(P[6]+P[0]*k[0]+P[3]*k[1])/O,S[1]=(P[7]+P[1]*k[0]+P[4]*k[1])/O,S}function T(S,k,P){return w(S,k,_,P),S}function w(S,k,P,O){for(var F=[0,0],I=S.shape[0],D=S.shape[1],U=0;U<I;U++)for(var B=0;B<D;B++)P(F,[U,B],O),S.set(U,B,m(k,F[0],F[1]));return S}l.refineCoords=function(S){for(var k=this.dataScaleX,P=this.dataScaleY,O=S[0].shape[0],F=S[0].shape[1],I=Math.floor(S[0].shape[0]*k+1)|0,D=Math.floor(S[0].shape[1]*P+1)|0,U=1+O+1,B=1+F+1,j=s(new Float32Array(U*B),[U,B]),Z=[1/k,0,0,0,1/P,0,0,0,1],ee=0;ee<S.length;++ee){this.surface.padField(j,S[ee]);var q=s(new Float32Array(I*D),[I,D]);T(q,j,Z),S[ee]=q}};function v(S,k){for(var P=!1,O=0;O<S.length;O++)if(k===S[O]){P=!0;break}P===!1&&S.push(k)}l.setContourLevels=function(){var S=[[],[],[]],k=[!1,!1,!1],P=!1,O,F,I;for(O=0;O<3;++O)if(this.showContour[O]&&(P=!0,this.contourSize[O]>0&&this.contourStart[O]!==null&&this.contourEnd[O]!==null&&this.contourEnd[O]>this.contourStart[O]))for(k[O]=!0,F=this.contourStart[O];F<this.contourEnd[O];F+=this.contourSize[O])I=F*this.scene.dataScale[O],v(S[O],I);if(P){var D=[[],[],[]];for(O=0;O<3;++O)this.showContour[O]&&(D[O]=k[O]?S[O]:this.scene.contourLevels[O]);this.surface.update({levels:D})}},l.update=function(S){var k=this.scene,P=k.fullSceneLayout,O=this.surface,F=a(S),I=k.dataScale,D=S.z[0].length,U=S._ylength,B=k.contourLevels;this.data=S;var j,Z,ee,q,W=[];for(j=0;j<3;j++)for(W[j]=[],Z=0;Z<D;Z++)W[j][Z]=[];for(Z=0;Z<D;Z++)for(ee=0;ee<U;ee++)W[0][Z][ee]=this.getXat(Z,ee,S.xcalendar,P.xaxis),W[1][Z][ee]=this.getYat(Z,ee,S.ycalendar,P.yaxis),W[2][Z][ee]=this.getZat(Z,ee,S.zcalendar,P.zaxis);if(S.connectgaps)for(S._emptypoints=t(W[2]),x(W[2],S._emptypoints),S._interpolatedZ=[],Z=0;Z<D;Z++)for(S._interpolatedZ[Z]=[],ee=0;ee<U;ee++)S._interpolatedZ[Z][ee]=W[2][Z][ee];for(j=0;j<3;j++)for(Z=0;Z<D;Z++)for(ee=0;ee<U;ee++)q=W[j][Z][ee],q==null?W[j][Z][ee]=NaN:q=W[j][Z][ee]*=I[j];for(j=0;j<3;j++)for(Z=0;Z<D;Z++)for(ee=0;ee<U;ee++)q=W[j][Z][ee],q!=null&&(this.minValues[j]>q&&(this.minValues[j]=q),this.maxValues[j]<q&&(this.maxValues[j]=q));for(j=0;j<3;j++)this.objectOffset[j]=.5*(this.minValues[j]+this.maxValues[j]);for(j=0;j<3;j++)for(Z=0;Z<D;Z++)for(ee=0;ee<U;ee++)q=W[j][Z][ee],q!=null&&(W[j][Z][ee]-=this.objectOffset[j]);var J=[s(new Float32Array(D*U),[D,U]),s(new Float32Array(D*U),[D,U]),s(new Float32Array(D*U),[D,U])];for(j=0;j<3;j++)for(Z=0;Z<D;Z++)for(ee=0;ee<U;ee++)J[j].set(Z,ee,W[j][Z][ee]);W=[];var le={colormap:F,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!S.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:S.opacityscale,opacity:S.opacity},fe=n(S);if(le.intensityBounds=[fe.min,fe.max],S.surfacecolor){var se=s(new Float32Array(D*U),[D,U]);for(Z=0;Z<D;Z++)for(ee=0;ee<U;ee++)se.set(Z,ee,S.surfacecolor[ee][Z]);J.push(se)}else le.intensityBounds[0]*=I[2],le.intensityBounds[1]*=I[2];(M<J[0].shape[0]||M<J[0].shape[1])&&(this.refineData=!1),this.refineData===!0&&(this.dataScaleX=this.estimateScale(J[0].shape[0],0),this.dataScaleY=this.estimateScale(J[0].shape[1],1),(this.dataScaleX!==1||this.dataScaleY!==1)&&this.refineCoords(J)),S.surfacecolor&&(le.intensity=J.pop());var H=[!0,!0,!0],Y=["x","y","z"];for(j=0;j<3;++j){var ne=S.contours[Y[j]];H[j]=ne.highlight,le.showContour[j]=ne.show||ne.highlight,!!le.showContour[j]&&(le.contourProject[j]=[ne.project.x,ne.project.y,ne.project.z],ne.show?(this.showContour[j]=!0,le.levels[j]=B[j],O.highlightColor[j]=le.contourColor[j]=r(ne.color),ne.usecolormap?O.highlightTint[j]=le.contourTint[j]=0:O.highlightTint[j]=le.contourTint[j]=1,le.contourWidth[j]=ne.width,this.contourStart[j]=ne.start,this.contourEnd[j]=ne.end,this.contourSize[j]=ne.size):(this.showContour[j]=!1,this.contourStart[j]=null,this.contourEnd[j]=null,this.contourSize[j]=0),ne.highlight&&(le.dynamicColor[j]=r(ne.highlightcolor),le.dynamicWidth[j]=ne.highlightwidth))}o(F)&&(le.vertexColor=!0),le.objectOffset=this.objectOffset,le.coords=J,O.update(le),O.visible=S.visible,O.enableDynamic=H,O.enableHighlight=H,O.snapToData=!0,"lighting"in S&&(O.ambientLight=S.lighting.ambient,O.diffuseLight=S.lighting.diffuse,O.specularLight=S.lighting.specular,O.roughness=S.lighting.roughness,O.fresnel=S.lighting.fresnel),"lightposition"in S&&(O.lightPosition=[S.lightposition.x,S.lightposition.y,S.lightposition.z])},l.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()};function L(S,k){var P=S.glplot.gl,O=u({gl:P}),F=new f(S,O,k.uid);return O._trace=F,F.update(k),S.glplot.add(O),F}z.exports=L},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(e,z,N){var u=e("../../registry"),s=e("../../lib"),m=e("../../components/colorscale/defaults"),x=e("./attributes"),t=.1;function i(l,o){for(var c=[],h=32,d=0;d<h;d++){var p=d/(h-1),y=o+(1-o)*(1-Math.pow(Math.sin(l*p*Math.PI),2));c.push([p,Math.max(0,Math.min(1,y))])}return c}function a(l){var o=0;if(!Array.isArray(l)||l.length<2||!l[0]||!l[l.length-1]||+l[0][0]!=0||+l[l.length-1][0]!=1)return!1;for(var c=0;c<l.length;c++){var h=l[c];if(h.length!==2||+h[0]<o)return!1;o=+h[0]}return!0}function r(l,o,c,h){var d,p;function y(S,k){return s.coerce(l,o,x,S,k)}var g=y("x"),A=y("y"),b=y("z");if(!b||!b.length||(g?g.length<1:!1)||(A?A.length<1:!1)){o.visible=!1;return}o._xlength=Array.isArray(g)&&s.isArrayOrTypedArray(g[0])?b.length:b[0].length,o._ylength=b.length;var M=u.getComponentMethod("calendars","handleTraceDefaults");M(l,o,["x","y","z"],h),y("text"),y("hovertext"),y("hovertemplate"),y("xhoverformat"),y("yhoverformat"),y("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(S){y(S)});var _=y("surfacecolor"),T=["x","y","z"];for(d=0;d<3;++d){var w="contours."+T[d],v=y(w+".show"),L=y(w+".highlight");if(v||L)for(p=0;p<3;++p)y(w+".project."+T[p]);v&&(y(w+".color"),y(w+".width"),y(w+".usecolormap")),L&&(y(w+".highlightcolor"),y(w+".highlightwidth")),y(w+".start"),y(w+".end"),y(w+".size")}_||(f(l,"zmin","cmin"),f(l,"zmax","cmax"),f(l,"zauto","cauto")),m(l,o,h,y,{prefix:"",cLetter:"c"}),n(l,o,h,y),o._length=null}function n(l,o,c,h){var d=h("opacityscale");d==="max"?o.opacityscale=[[0,t],[1,1]]:d==="min"?o.opacityscale=[[0,1],[1,t]]:d==="extremes"?o.opacityscale=i(1,t):a(d)||(o.opacityscale=void 0)}function f(l,o,c){o in l&&!(c in l)&&(l[c]=l[o])}z.exports={supplyDefaults:r,opacityscaleDefaults:n}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:e("./calc"),plot:e("./convert"),moduleType:"trace",name:"surface",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(e,z,N){var u=e("../../components/annotations/attributes"),s=e("../../lib/extend").extendFlat,m=e("../../plot_api/edit_types").overrideAll,x=e("../../plots/font_attributes"),t=e("../../plots/domain").attributes,i=e("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,a=z.exports=m({domain:t({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:s({},u.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:s({},x({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:i("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:s({},u.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:s({},x({arrayOk:!0}))}},"calc","from-root");a.transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(e,z,N){var u=e("../../plots/get_data").getModuleCalcData,s=e("./plot"),m="table";N.name=m,N.plot=function(x){var t=u(x.calcdata,m)[0];t.length&&s(x,t)},N.clean=function(x,t,i,a){var r=a._has&&a._has(m),n=t._has&&t._has(m);r&&!n&&a._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(e,z,N){var u=e("../../lib/gup").wrap;z.exports=function(){return u({})}},{"../../lib/gup":500}],1065:[function(e,z,N){z.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(e,z,N){var u=e("./constants"),s=e("../../lib/extend").extendFlat,m=e("fast-isnumeric");z.exports=function(c,h){var d=i(h.cells.values),p=function(Z){return Z.slice(h.header.values.length,Z.length)},y=i(h.header.values);y.length&&!y[0].length&&(y[0]=[""],y=i(y));var g=y.concat(p(d).map(function(){return a((y[0]||[""]).length)})),A=h.domain,b=Math.floor(c._fullLayout._size.w*(A.x[1]-A.x[0])),M=Math.floor(c._fullLayout._size.h*(A.y[1]-A.y[0])),_=h.header.values.length?g[0].map(function(){return h.header.height}):[u.emptyHeaderHeight],T=d.length?d[0].map(function(){return h.cells.height}):[],w=_.reduce(t,0),v=M-w,L=v+u.uplift,S=f(T,L),k=f(_,w),P=n(k,[]),O=n(S,P),F={},I=h._fullInput.columnorder.concat(p(d.map(function(Z,ee){return ee}))),D=g.map(function(Z,ee){var q=Array.isArray(h.columnwidth)?h.columnwidth[Math.min(ee,h.columnwidth.length-1)]:h.columnwidth;return m(q)?Number(q):1}),U=D.reduce(t,0);D=D.map(function(Z){return Z/U*b});var B=Math.max(x(h.header.line.width),x(h.cells.line.width)),j={key:h.uid+c._context.staticPlot,translateX:A.x[0]*c._fullLayout._size.w,translateY:c._fullLayout._size.h*(1-A.y[1]),size:c._fullLayout._size,width:b,maxLineWidth:B,height:M,columnOrder:I,groupHeight:M,rowBlocks:O,headerRowBlocks:P,scrollY:0,cells:s({},h.cells,{values:d}),headerCells:s({},h.header,{values:g}),gdColumns:g.map(function(Z){return Z[0]}),gdColumnsOriginalOrder:g.map(function(Z){return Z[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:g.map(function(Z,ee){var q=F[Z];F[Z]=(q||0)+1;var W=Z+"__"+F[Z];return{key:W,label:Z,specIndex:ee,xIndex:I[ee],xScale:r,x:void 0,calcdata:void 0,columnWidth:D[ee]}})};return j.columns.forEach(function(Z){Z.calcdata=j,Z.x=r(Z)}),j};function x(o){if(Array.isArray(o)){for(var c=0,h=0;h<o.length;h++)c=Math.max(c,x(o[h]));return c}return o}function t(o,c){return o+c}function i(o){var c=o.slice(),h=1/0,d=0,p;for(p=0;p<c.length;p++)Array.isArray(c[p])||(c[p]=[c[p]]),h=Math.min(h,c[p].length),d=Math.max(d,c[p].length);if(h!==d)for(p=0;p<c.length;p++){var y=d-c[p].length;y&&(c[p]=c[p].concat(a(y)))}return c}function a(o){for(var c=new Array(o),h=0;h<o;h++)c[h]="";return c}function r(o){return o.calcdata.columns.reduce(function(c,h){return h.xIndex<o.xIndex?c+h.columnWidth:c},0)}function n(o,c){var h=Object.keys(o);return h.map(function(d){return s({},o[d],{auxiliaryBlocks:c})})}function f(o,c){for(var h={},d,p=0,y=0,g=l(),A=0,b=0,M=0;M<o.length;M++)d=o[M],g.rows.push({rowIndex:M,rowHeight:d}),y+=d,(y>=c||M===o.length-1)&&(h[p]=g,g.key=b++,g.firstRowIndex=A,g.lastRowIndex=M,g=l(),p+=y,A=M+1,y=0);return h}function l(){return{firstRowIndex:null,lastRowIndex:null,rows:[]}}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(e,z,N){var u=e("../../lib/extend").extendFlat;N.splitToPanels=function(m){var x=[0,0],t=u({},m,{key:"header",type:"header",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!0,values:m.calcdata.headerCells.values[m.specIndex],rowBlocks:m.calcdata.headerRowBlocks,calcdata:u({},m.calcdata,{cells:m.calcdata.headerCells})}),i=u({},m,{key:"cells1",type:"cells",page:0,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks}),a=u({},m,{key:"cells2",type:"cells",page:1,prevPages:x,currentRepaint:[null,null],dragHandle:!1,values:m.calcdata.cells.values[m.specIndex],rowBlocks:m.calcdata.rowBlocks});return[i,a,t]},N.splitToCells=function(m){var x=s(m);return(m.values||[]).slice(x[0],x[1]).map(function(t,i){var a=typeof t=="string"&&t.match(/[<$&> ]/)?"_keybuster_"+Math.random():"";return{keyWithinBlock:i+a,key:x[0]+i,column:m,calcdata:m.calcdata,page:m.page,rowBlocks:m.rowBlocks,value:t}})};function s(m){var x=m.rowBlocks[m.page],t=x?x.rows[0].rowIndex:0,i=x?t+x.rows.length:0;return[t,i]}},{"../../lib/extend":493}],1068:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../../plots/domain").defaults;function x(t,i){for(var a=t.columnorder||[],r=t.header.values.length,n=a.slice(0,r),f=n.slice().sort(function(c,h){return c-h}),l=n.map(function(c){return f.indexOf(c)}),o=l.length;o<r;o++)l.push(o);i("columnorder",l)}z.exports=function(i,a,r,n){function f(l,o){return u.coerce(i,a,s,l,o)}m(a,n,f),f("columnwidth"),f("header.values"),f("header.format"),f("header.align"),f("header.prefix"),f("header.suffix"),f("header.height"),f("header.line.width"),f("header.line.color"),f("header.fill.color"),u.coerceFont(f,"header.font",u.extendFlat({},n.font)),x(a,f),f("cells.values"),f("cells.format"),f("cells.align"),f("cells.prefix"),f("cells.suffix"),f("cells.height"),f("cells.line.width"),f("cells.line.color"),f("cells.fill.color"),u.coerceFont(f,"cells.font",u.extendFlat({},n.font)),a._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("./calc"),plot:e("./plot"),moduleType:"trace",name:"table",basePlotModule:e("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(e,z,N){var u=e("./constants"),s=e("@plotly/d3"),m=e("../../lib"),x=m.numberFormat,t=e("../../lib/gup"),i=e("../../components/drawing"),a=e("../../lib/svg_text_utils"),r=e("../../lib").raiseToTop,n=e("../../lib").strTranslate,f=e("../../lib").cancelTransition,l=e("./data_preparation_helper"),o=e("./data_split_helpers"),c=e("../../components/color");z.exports=function(ae,ie){var oe=!ae._context.staticPlot,ue=ae._fullLayout._paper.selectAll("."+u.cn.table).data(ie.map(function(Ue){var Ie=t.unwrap(Ue),Ve=Ie.trace;return l(ae,Ve)}),t.keyFun);ue.exit().remove(),ue.enter().append("g").classed(u.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),ue.attr("width",function(Ue){return Ue.width+Ue.size.l+Ue.size.r}).attr("height",function(Ue){return Ue.height+Ue.size.t+Ue.size.b}).attr("transform",function(Ue){return n(Ue.translateX,Ue.translateY)});var ye=ue.selectAll("."+u.cn.tableControlView).data(t.repeat,t.keyFun),ce=ye.enter().append("g").classed(u.cn.tableControlView,!0).style("box-sizing","content-box");if(oe){var me="onwheel"in document?"wheel":"mousewheel";ce.on("mousemove",function(Ue){ye.filter(function(Ie){return Ue===Ie}).call(g,ae)}).on(me,function(Ue){if(!Ue.scrollbarState.wheeling){Ue.scrollbarState.wheeling=!0;var Ie=Ue.scrollY+s.event.deltaY,Ve=q(ae,ye,null,Ie)(Ue);Ve||(s.event.stopPropagation(),s.event.preventDefault()),Ue.scrollbarState.wheeling=!1}}).call(g,ae,!0)}ye.attr("transform",function(Ue){return n(Ue.size.l,Ue.size.t)});var xe=ye.selectAll("."+u.cn.scrollBackground).data(t.repeat,t.keyFun);xe.enter().append("rect").classed(u.cn.scrollBackground,!0).attr("fill","none"),xe.attr("width",function(Ue){return Ue.width}).attr("height",function(Ue){return Ue.height}),ye.each(function(Ue){i.setClipUrl(s.select(this),d(ae,Ue),ae)});var ke=ye.selectAll("."+u.cn.yColumn).data(function(Ue){return Ue.columns},t.keyFun);ke.enter().append("g").classed(u.cn.yColumn,!0),ke.exit().remove(),ke.attr("transform",function(Ue){return n(Ue.x,0)}),oe&&ke.call(s.behavior.drag().origin(function(Ue){var Ie=s.select(this);return D(Ie,Ue,-u.uplift),r(this),Ue.calcdata.columnDragInProgress=!0,g(ye.filter(function(Ve){return Ue.calcdata.key===Ve.key}),ae),Ue}).on("drag",function(Ue){var Ie=s.select(this),Ve=function(Gt){return(Ue===Gt?s.event.x:Gt.x)+Gt.columnWidth/2};Ue.x=Math.max(-u.overdrag,Math.min(Ue.calcdata.width+u.overdrag-Ue.columnWidth,s.event.x));var dt=y(ke).filter(function(Gt){return Gt.calcdata.key===Ue.calcdata.key}),Rt=dt.sort(function(Gt,kt){return Ve(Gt)-Ve(kt)});Rt.forEach(function(Gt,kt){Gt.xIndex=kt,Gt.x=Ue===Gt?Gt.x:Gt.xScale(Gt)}),ke.filter(function(Gt){return Ue!==Gt}).transition().ease(u.transitionEase).duration(u.transitionDuration).attr("transform",function(Gt){return n(Gt.x,0)}),Ie.call(f).attr("transform",n(Ue.x,-u.uplift))}).on("dragend",function(Ue){var Ie=s.select(this),Ve=Ue.calcdata;Ue.x=Ue.xScale(Ue),Ue.calcdata.columnDragInProgress=!1,D(Ie,Ue,0),F(ae,Ve,Ve.columns.map(function(dt){return dt.xIndex}))})),ke.each(function(Ue){i.setClipUrl(s.select(this),p(ae,Ue),ae)});var Ae=ke.selectAll("."+u.cn.columnBlock).data(o.splitToPanels,t.keyFun);Ae.enter().append("g").classed(u.cn.columnBlock,!0).attr("id",function(Ue){return Ue.key}),Ae.style("cursor",function(Ue){return Ue.dragHandle?"ew-resize":Ue.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var Oe=Ae.filter(B),He=Ae.filter(U);oe&&He.call(s.behavior.drag().origin(function(Ue){return s.event.stopPropagation(),Ue}).on("drag",q(ae,ye,-1)).on("dragend",function(){})),A(ae,ye,Oe,Ae),A(ae,ye,He,Ae);var Ge=ye.selectAll("."+u.cn.scrollAreaClip).data(t.repeat,t.keyFun);Ge.enter().append("clipPath").classed(u.cn.scrollAreaClip,!0).attr("id",function(Ue){return d(ae,Ue)});var _e=Ge.selectAll("."+u.cn.scrollAreaClipRect).data(t.repeat,t.keyFun);_e.enter().append("rect").classed(u.cn.scrollAreaClipRect,!0).attr("x",-u.overdrag).attr("y",-u.uplift).attr("fill","none"),_e.attr("width",function(Ue){return Ue.width+2*u.overdrag}).attr("height",function(Ue){return Ue.height+u.uplift});var Re=ke.selectAll("."+u.cn.columnBoundary).data(t.repeat,t.keyFun);Re.enter().append("g").classed(u.cn.columnBoundary,!0);var We=ke.selectAll("."+u.cn.columnBoundaryClippath).data(t.repeat,t.keyFun);We.enter().append("clipPath").classed(u.cn.columnBoundaryClippath,!0),We.attr("id",function(Ue){return p(ae,Ue)});var qe=We.selectAll("."+u.cn.columnBoundaryRect).data(t.repeat,t.keyFun);qe.enter().append("rect").classed(u.cn.columnBoundaryRect,!0).attr("fill","none"),qe.attr("width",function(Ue){return Ue.columnWidth+2*h(Ue)}).attr("height",function(Ue){return Ue.calcdata.height+2*h(Ue)+u.uplift}).attr("x",function(Ue){return-h(Ue)}).attr("y",function(Ue){return-h(Ue)}),ee(null,He,ye)};function h($){return Math.ceil($.calcdata.maxLineWidth/2)}function d($,ae){return"clip"+$._fullLayout._uid+"_scrollAreaBottomClip_"+ae.key}function p($,ae){return"clip"+$._fullLayout._uid+"_columnBoundaryClippath_"+ae.calcdata.key+"_"+ae.specIndex}function y($){return[].concat.apply([],$.map(function(ae){return ae})).map(function(ae){return ae.__data__})}function g($,ae,ie){function oe(ke){var Ae=ke.rowBlocks;return H(Ae,Ae.length-1)+(Ae.length?Y(Ae[Ae.length-1],1/0):1)}var ue=$.selectAll("."+u.cn.scrollbarKit).data(t.repeat,t.keyFun);ue.enter().append("g").classed(u.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),ue.each(function(ke){var Ae=ke.scrollbarState;Ae.totalHeight=oe(ke),Ae.scrollableAreaHeight=ke.groupHeight-j(ke),Ae.currentlyVisibleHeight=Math.min(Ae.totalHeight,Ae.scrollableAreaHeight),Ae.ratio=Ae.currentlyVisibleHeight/Ae.totalHeight,Ae.barLength=Math.max(Ae.ratio*Ae.currentlyVisibleHeight,u.goldenRatio*u.scrollbarWidth),Ae.barWiggleRoom=Ae.currentlyVisibleHeight-Ae.barLength,Ae.wiggleRoom=Math.max(0,Ae.totalHeight-Ae.scrollableAreaHeight),Ae.topY=Ae.barWiggleRoom===0?0:ke.scrollY/Ae.wiggleRoom*Ae.barWiggleRoom,Ae.bottomY=Ae.topY+Ae.barLength,Ae.dragMultiplier=Ae.wiggleRoom/Ae.barWiggleRoom}).attr("transform",function(ke){var Ae=ke.width+u.scrollbarWidth/2+u.scrollbarOffset;return n(Ae,j(ke))});var ye=ue.selectAll("."+u.cn.scrollbar).data(t.repeat,t.keyFun);ye.enter().append("g").classed(u.cn.scrollbar,!0);var ce=ye.selectAll("."+u.cn.scrollbarSlider).data(t.repeat,t.keyFun);ce.enter().append("g").classed(u.cn.scrollbarSlider,!0),ce.attr("transform",function(ke){return n(0,ke.scrollbarState.topY||0)});var me=ce.selectAll("."+u.cn.scrollbarGlyph).data(t.repeat,t.keyFun);me.enter().append("line").classed(u.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",u.scrollbarWidth).attr("stroke-linecap","round").attr("y1",u.scrollbarWidth/2),me.attr("y2",function(ke){return ke.scrollbarState.barLength-u.scrollbarWidth/2}).attr("stroke-opacity",function(ke){return ke.columnDragInProgress||!ke.scrollbarState.barWiggleRoom||ie?0:.4}),me.transition().delay(0).duration(0),me.transition().delay(u.scrollbarHideDelay).duration(u.scrollbarHideDuration).attr("stroke-opacity",0);var xe=ye.selectAll("."+u.cn.scrollbarCaptureZone).data(t.repeat,t.keyFun);xe.enter().append("line").classed(u.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",u.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(ke){var Ae=s.event.y,Oe=this.getBoundingClientRect(),He=ke.scrollbarState,Ge=Ae-Oe.top,_e=s.scale.linear().domain([0,He.scrollableAreaHeight]).range([0,He.totalHeight]).clamp(!0);He.topY<=Ge&&Ge<=He.bottomY||q(ae,$,null,_e(Ge-He.barLength/2))(ke)}).call(s.behavior.drag().origin(function(ke){return s.event.stopPropagation(),ke.scrollbarState.scrollbarScrollInProgress=!0,ke}).on("drag",q(ae,$)).on("dragend",function(){})),xe.attr("y2",function(ke){return ke.scrollbarState.scrollableAreaHeight}),ae._context.staticPlot&&(me.remove(),xe.remove())}function A($,ae,ie,oe){var ue=b(ie),ye=M(ue);v(ye);var ce=_(ye);S(ce);var me=w(ye),xe=T(me);L(xe),k(xe,ae,oe,$),se(ye)}function b($){var ae=$.selectAll("."+u.cn.columnCells).data(t.repeat,t.keyFun);return ae.enter().append("g").classed(u.cn.columnCells,!0),ae.exit().remove(),ae}function M($){var ae=$.selectAll("."+u.cn.columnCell).data(o.splitToCells,function(ie){return ie.keyWithinBlock});return ae.enter().append("g").classed(u.cn.columnCell,!0),ae.exit().remove(),ae}function _($){var ae=$.selectAll("."+u.cn.cellRect).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("rect").classed(u.cn.cellRect,!0),ae}function T($){var ae=$.selectAll("."+u.cn.cellText).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("text").classed(u.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){s.event.stopPropagation()}),ae}function w($){var ae=$.selectAll("."+u.cn.cellTextHolder).data(t.repeat,function(ie){return ie.keyWithinBlock});return ae.enter().append("g").classed(u.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),ae}function v($){$.each(function(ae,ie){var oe=ae.calcdata.cells.font,ue=ae.column.specIndex,ye={size:I(oe.size,ue,ie),color:I(oe.color,ue,ie),family:I(oe.family,ue,ie)};ae.rowNumber=ae.key,ae.align=I(ae.calcdata.cells.align,ue,ie),ae.cellBorderWidth=I(ae.calcdata.cells.line.width,ue,ie),ae.font=ye})}function L($){$.each(function(ae){i.font(s.select(this),ae.font)})}function S($){$.attr("width",function(ae){return ae.column.columnWidth}).attr("stroke-width",function(ae){return ae.cellBorderWidth}).each(function(ae){var ie=s.select(this);c.stroke(ie,I(ae.calcdata.cells.line.color,ae.column.specIndex,ae.rowNumber)),c.fill(ie,I(ae.calcdata.cells.fill.color,ae.column.specIndex,ae.rowNumber))})}function k($,ae,ie,oe){$.text(function(ue){var ye=ue.column.specIndex,ce=ue.rowNumber,me=ue.value,xe=typeof me=="string",ke=xe&&me.match(/<br>/i),Ae=!xe||ke;ue.mayHaveMarkup=xe&&me.match(/[<&>]/);var Oe=P(me);ue.latex=Oe;var He=Oe?"":I(ue.calcdata.cells.prefix,ye,ce)||"",Ge=Oe?"":I(ue.calcdata.cells.suffix,ye,ce)||"",_e=Oe?null:I(ue.calcdata.cells.format,ye,ce)||null,Re=He+(_e?x(_e)(ue.value):ue.value)+Ge,We;ue.wrappingNeeded=!ue.wrapped&&!Ae&&!Oe&&(We=O(Re)),ue.cellHeightMayIncrease=ke||Oe||ue.mayHaveMarkup||(We===void 0?O(Re):We),ue.needsConvertToTspans=ue.mayHaveMarkup||ue.wrappingNeeded||ue.latex;var qe;if(ue.wrappingNeeded){var Ue=u.wrapSplitCharacter===" "?Re.replace(/<a href=/ig,"<a_href="):Re,Ie=Ue.split(u.wrapSplitCharacter),Ve=u.wrapSplitCharacter===" "?Ie.map(function(dt){return dt.replace(/<a_href=/ig,"<a href=")}):Ie;ue.fragments=Ve.map(function(dt){return{text:dt,width:null}}),ue.fragments.push({fragment:u.wrapSpacer,width:null}),qe=Ve.join(u.lineBreaker)+u.lineBreaker+u.wrapSpacer}else delete ue.fragments,qe=Re;return qe}).attr("dy",function(ue){return ue.needsConvertToTspans?0:"0.75em"}).each(function(ue){var ye=this,ce=s.select(ye),me=ue.wrappingNeeded?J:le;ue.needsConvertToTspans?a.convertToTspans(ce,oe,me(ie,ye,ae,oe,ue)):s.select(ye.parentNode).attr("transform",function(xe){return n(fe(xe),u.cellPad)}).attr("text-anchor",function(xe){return{left:"start",center:"middle",right:"end"}[xe.align]})})}function P($){return typeof $=="string"&&$.match(u.latexCheck)}function O($){return $.indexOf(u.wrapSplitCharacter)!==-1}function F($,ae,ie){var oe=ae.gdColumnsOriginalOrder;ae.gdColumns.sort(function(ue,ye){return ie[oe.indexOf(ue)]-ie[oe.indexOf(ye)]}),ae.columnorder=ie,$.emit("plotly_restyle")}function I($,ae,ie){if(Array.isArray($)){var oe=$[Math.min(ae,$.length-1)];return Array.isArray(oe)?oe[Math.min(ie,oe.length-1)]:oe}else return $}function D($,ae,ie){$.transition().ease(u.releaseTransitionEase).duration(u.releaseTransitionDuration).attr("transform",n(ae.x,ie))}function U($){return $.type==="cells"}function B($){return $.type==="header"}function j($){var ae=$.rowBlocks.length?$.rowBlocks[0].auxiliaryBlocks:[];return ae.reduce(function(ie,oe){return ie+Y(oe,1/0)},0)}function Z($,ae,ie){for(var oe=[],ue=0,ye=0;ye<$.length;ye++){for(var ce=$[ye],me=ce.rows,xe=0,ke=0;ke<me.length;ke++)xe+=me[ke].rowHeight;ce.allRowsHeight=xe;var Ae=ue+xe,Oe=ae,He=Oe+ie;Oe<Ae&&He>ue&&oe.push(ye),ue+=xe}return oe}function ee($,ae,ie){var oe=y(ae)[0];if(oe!==void 0){var ue=oe.rowBlocks,ye=oe.calcdata,ce=H(ue,ue.length),me=oe.calcdata.groupHeight-j(oe),xe=ye.scrollY=Math.max(0,Math.min(ce-me,ye.scrollY)),ke=Z(ue,xe,me);ke.length===1&&(ke[0]===ue.length-1?ke.unshift(ke[0]-1):ke.push(ke[0]+1)),ke[0]%2&&ke.reverse(),ae.each(function(Ae,Oe){Ae.page=ke[Oe],Ae.scrollY=xe}),ae.attr("transform",function(Ae){var Oe=H(Ae.rowBlocks,Ae.page)-Ae.scrollY;return n(0,Oe)}),$&&(W($,ie,ae,ke,oe.prevPages,oe,0),W($,ie,ae,ke,oe.prevPages,oe,1),g(ie,$))}}function q($,ae,ie,oe){return function(ye){var ce=ye.calcdata?ye.calcdata:ye,me=ae.filter(function(Oe){return ce.key===Oe.key}),xe=ie||ce.scrollbarState.dragMultiplier,ke=ce.scrollY;ce.scrollY=oe===void 0?ce.scrollY+xe*s.event.dy:oe;var Ae=me.selectAll("."+u.cn.yColumn).selectAll("."+u.cn.columnBlock).filter(U);return ee($,Ae,me),ce.scrollY===ke}}function W($,ae,ie,oe,ue,ye,ce){var me=oe[ce]!==ue[ce];me&&(clearTimeout(ye.currentRepaint[ce]),ye.currentRepaint[ce]=setTimeout(function(){var xe=ie.filter(function(ke,Ae){return Ae===ce&&oe[Ae]!==ue[Ae]});A($,ae,xe,ie),ue[ce]=oe[ce]}))}function J($,ae,ie,oe){return function(){var ye=s.select(ae.parentNode);ye.each(function(ce){var me=ce.fragments;ye.selectAll("tspan.line").each(function(Re,We){me[We].width=this.getComputedTextLength()});var xe=me[me.length-1].width,ke=me.slice(0,-1),Ae=[],Oe,He,Ge=0,_e=ce.column.columnWidth-2*u.cellPad;for(ce.value="";ke.length;)Oe=ke.shift(),He=Oe.width+xe,Ge+He>_e&&(ce.value+=Ae.join(u.wrapSpacer)+u.lineBreaker,Ae=[],Ge=0),Ae.push(Oe.text),Ge+=He;Ge&&(ce.value+=Ae.join(u.wrapSpacer)),ce.wrapped=!0}),ye.selectAll("tspan.line").remove(),k(ye.select("."+u.cn.cellText),ie,$,oe),s.select(ae.parentNode.parentNode).call(se)}}function le($,ae,ie,oe,ue){return function(){if(!ue.settledY){var ce=s.select(ae.parentNode),me=te(ue),xe=ue.key-me.firstRowIndex,ke=me.rows[xe].rowHeight,Ae=ue.cellHeightMayIncrease?ae.parentNode.getBoundingClientRect().height+2*u.cellPad:ke,Oe=Math.max(Ae,ke),He=Oe-me.rows[xe].rowHeight;He&&(me.rows[xe].rowHeight=Oe,$.selectAll("."+u.cn.columnCell).call(se),ee(null,$.filter(U),0),g(ie,oe,!0)),ce.attr("transform",function(){var Ge=this,_e=Ge.parentNode,Re=_e.getBoundingClientRect(),We=s.select(Ge.parentNode).select("."+u.cn.cellRect).node().getBoundingClientRect(),qe=Ge.transform.baseVal.consolidate(),Ue=We.top-Re.top+(qe?qe.matrix.f:u.cellPad);return n(fe(ue,s.select(Ge.parentNode).select("."+u.cn.cellTextHolder).node().getBoundingClientRect().width),Ue)}),ue.settledY=!0}}}function fe($,ae){switch($.align){case"left":return u.cellPad;case"right":return $.column.columnWidth-(ae||0)-u.cellPad;case"center":return($.column.columnWidth-(ae||0))/2;default:return u.cellPad}}function se($){$.attr("transform",function(ae){var ie=ae.rowBlocks[0].auxiliaryBlocks.reduce(function(ce,me){return ce+Y(me,1/0)},0),oe=te(ae),ue=Y(oe,ae.key),ye=ue+ie;return n(0,ye)}).selectAll("."+u.cn.cellRect).attr("height",function(ae){return K(te(ae),ae.key).rowHeight})}function H($,ae){for(var ie=0,oe=ae-1;oe>=0;oe--)ie+=ne($[oe]);return ie}function Y($,ae){for(var ie=0,oe=0;oe<$.rows.length&&$.rows[oe].rowIndex<ae;oe++)ie+=$.rows[oe].rowHeight;return ie}function ne($){var ae=$.allRowsHeight;if(ae!==void 0)return ae;for(var ie=0,oe=0;oe<$.rows.length;oe++)ie+=$.rows[oe].rowHeight;return $.allRowsHeight=ie,ie}function te($){return $.rowBlocks[$.page]}function K($,ae){return $.rows[ae-$.firstRowIndex]}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(e,z,N){var u=e("../../plots/template_attributes").hovertemplateAttrs,s=e("../../plots/template_attributes").texttemplateAttrs,m=e("../../components/colorscale/attributes"),x=e("../../plots/domain").attributes,t=e("../pie/attributes"),i=e("../sunburst/attributes"),a=e("./constants"),r=e("../../lib/extend").extendFlat;z.exports={labels:i.labels,parents:i.parents,values:i.values,branchvalues:i.branchvalues,count:i.count,level:i.level,maxdepth:i.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:r({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:i.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:i.marker.line,editType:"calc"},m("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:r({},t.textfont,{}),editType:"calc"},text:t.text,textinfo:i.textinfo,texttemplate:s({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:t.hovertext,hoverinfo:i.hoverinfo,hovertemplate:u({},{keys:a.eventDataKeys}),textfont:t.textfont,insidetextfont:t.insidetextfont,outsidetextfont:r({},t.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:t.sort,root:i.root,domain:x({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(e,z,N){var u=e("../../plots/plots");N.name="treemap",N.plot=function(s,m,x,t){u.plotBasePlot(N.name,s,m,x,t)},N.clean=function(s,m,x,t){u.cleanBasePlot(N.name,s,m,x,t)}},{"../../plots/plots":619}],1073:[function(e,z,N){var u=e("../sunburst/calc");N.calc=function(s,m){return u.calc(s,m)},N.crossTraceCalc=function(s){return u._runCrossTraceCalc("treemap",s)}},{"../sunburst/calc":1047}],1074:[function(e,z,N){z.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../../components/color"),x=e("../../plots/domain").defaults,t=e("../bar/defaults").handleText,i=e("../bar/constants").TEXTPAD,a=e("../../components/colorscale"),r=a.hasColorscale,n=a.handleDefaults;z.exports=function(l,o,c,h){function d(k,P){return u.coerce(l,o,s,k,P)}var p=d("labels"),y=d("parents");if(!p||!p.length||!y||!y.length){o.visible=!1;return}var g=d("values");g&&g.length?d("branchvalues"):d("count"),d("level"),d("maxdepth");var A=d("tiling.packing");A==="squarify"&&d("tiling.squarifyratio"),d("tiling.flip"),d("tiling.pad");var b=d("text");d("texttemplate"),o.texttemplate||d("textinfo",Array.isArray(b)?"text+label":"label"),d("hovertext"),d("hovertemplate");var M=d("pathbar.visible"),_="auto";t(l,o,h,d,_,{hasPathbar:M,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),d("textposition");var T=o.textposition.indexOf("bottom")!==-1,w=d("marker.line.width");w&&d("marker.line.color",h.paper_bgcolor);var v=d("marker.colors"),L=o._hasColorscale=r(l,"marker","colors")||(l.marker||{}).coloraxis;L?n(l,o,h,d,{prefix:"marker.",cLetter:"c"}):d("marker.depthfade",!(v||[]).length);var S=o.textfont.size*2;d("marker.pad.t",T?S/4:S),d("marker.pad.l",S/4),d("marker.pad.r",S/4),d("marker.pad.b",T?S:S/4),o._hovered={marker:{line:{width:2,color:m.contrast(h.paper_bgcolor)}}},M&&(d("pathbar.thickness",o.pathbar.textfont.size+2*i),d("pathbar.side"),d("pathbar.edgeshape")),d("sort"),d("root.color"),x(o,h,d),o._length=null}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(e,z,N){var u=e("@plotly/d3"),s=e("../sunburst/helpers"),m=e("../bar/uniform_text"),x=m.clearMinTextSize,t=e("../bar/style").resizeText,i=e("./plot_one");z.exports=function(r,n,f,l,o){var c=o.type,h=o.drawDescendants,d=r._fullLayout,p=d["_"+c+"layer"],y,g,A=!f;if(x(c,d),y=p.selectAll("g.trace."+c).data(n,function(M){return M[0].trace.uid}),y.enter().append("g").classed("trace",!0).classed(c,!0),y.order(),!d.uniformtext.mode&&s.hasTransition(f)){l&&(g=l());var b=u.transition().duration(f.duration).ease(f.easing).each("end",function(){g&&g()}).each("interrupt",function(){g&&g()});b.each(function(){p.selectAll("g.trace").each(function(M){i(r,M,this,f,h)})})}else y.each(function(M){i(r,M,this,f,h)}),d.uniformtext.mode&&t(r,p.selectAll(".trace"),c);A&&y.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),i=e("./style").styleOne,a=e("./constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),f=!0;z.exports=function(o,c,h,d,p){var y=p.barDifY,g=p.width,A=p.height,b=p.viewX,M=p.viewY,_=p.pathSlice,T=p.toMoveInsideSlice,w=p.strTransform,v=p.hasTransition,L=p.handleSlicesExit,S=p.makeUpdateSliceInterpolator,k=p.makeUpdateTextInterpolator,P={},O=o._fullLayout,F=c[0],I=F.trace,D=F.hierarchy,U=g/I._entryDepth,B=r.listPath(h.data,"id"),j=t(D.copy(),[g,A],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();j=j.filter(function(ee){var q=B.indexOf(ee.data.id);return q===-1?!1:(ee.x0=U*q,ee.x1=U*(q+1),ee.y0=y,ee.y1=y+A,ee.onPathbar=!0,!0)}),j.reverse(),d=d.data(j,r.getPtId),d.enter().append("g").classed("pathbar",!0),L(d,f,P,[g,A],_),d.order();var Z=d;v&&(Z=Z.transition().each("end",function(){var ee=u.select(this);r.setSliceCursor(ee,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),Z.each(function(ee){ee._x0=b(ee.x0),ee._x1=b(ee.x1),ee._y0=M(ee.y0),ee._y1=M(ee.y1),ee._hoverX=b(ee.x1-Math.min(g,A)/2),ee._hoverY=M(ee.y1-A/2);var q=u.select(this),W=s.ensureSingle(q,"path","surface",function(se){se.style("pointer-events","all")});v?W.transition().attrTween("d",function(se){var H=S(se,f,P,[g,A]);return function(Y){return _(H(Y))}}):W.attr("d",_),q.call(n,h,o,c,{styleOne:i,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,o,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:o._transitioning}),W.call(i,ee,I,{hovered:!1}),ee._text=(r.getPtLabel(ee)||"").split("<br>").join(" ")||"";var J=s.ensureSingle(q,"g","slicetext"),le=s.ensureSingle(J,"text","",function(se){se.attr("data-notex",1)}),fe=s.ensureUniformFontSize(o,r.determineTextFont(I,ee,O.font,{onPathbar:!0}));le.text(ee._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(m.font,fe).call(x.convertToTspans,o),ee.textBB=m.bBox(le.node()),ee.transform=T(ee,{fontSize:fe.size,onPathbar:!0}),ee.transform.fontSize=fe.size,v?le.transition().attrTween("transform",function(se){var H=k(se,f,P,[g,A]);return function(Y){return w(H(Y))}}):le.attr("transform",w(ee))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../lib/svg_text_utils"),t=e("./partition"),i=e("./style").styleOne,a=e("./constants"),r=e("../sunburst/helpers"),n=e("../sunburst/fx"),f=e("../sunburst/plot").formatSliceLabel,l=!1;z.exports=function(c,h,d,p,y){var g=y.width,A=y.height,b=y.viewX,M=y.viewY,_=y.pathSlice,T=y.toMoveInsideSlice,w=y.strTransform,v=y.hasTransition,L=y.handleSlicesExit,S=y.makeUpdateSliceInterpolator,k=y.makeUpdateTextInterpolator,P=y.prevEntry,O={},F=c._fullLayout,I=h[0],D=I.trace,U=D.textposition.indexOf("left")!==-1,B=D.textposition.indexOf("right")!==-1,j=D.textposition.indexOf("bottom")!==-1,Z=!j&&!D.marker.pad.t||j&&!D.marker.pad.b,ee=t(d,[g,A],{packing:D.tiling.packing,squarifyratio:D.tiling.squarifyratio,flipX:D.tiling.flip.indexOf("x")>-1,flipY:D.tiling.flip.indexOf("y")>-1,pad:{inner:D.tiling.pad,top:D.marker.pad.t,left:D.marker.pad.l,right:D.marker.pad.r,bottom:D.marker.pad.b}}),q=ee.descendants(),W=1/0,J=-1/0;q.forEach(function(Y){var ne=Y.depth;ne>=D._maxDepth?(Y.x0=Y.x1=(Y.x0+Y.x1)/2,Y.y0=Y.y1=(Y.y0+Y.y1)/2):(W=Math.min(W,ne),J=Math.max(J,ne))}),p=p.data(q,r.getPtId),D._maxVisibleLayers=isFinite(J)?J-W+1:0,p.enter().append("g").classed("slice",!0),L(p,l,O,[g,A],_),p.order();var le=null;if(v&&P){var fe=r.getPtId(P);p.each(function(Y){le===null&&r.getPtId(Y)===fe&&(le={x0:Y.x0,x1:Y.x1,y0:Y.y0,y1:Y.y1})})}var se=function(){return le||{x0:0,x1:g,y0:0,y1:A}},H=p;return v&&(H=H.transition().each("end",function(){var Y=u.select(this);r.setSliceCursor(Y,c,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),H.each(function(Y){var ne=r.isHeader(Y,D);Y._x0=b(Y.x0),Y._x1=b(Y.x1),Y._y0=M(Y.y0),Y._y1=M(Y.y1),Y._hoverX=b(Y.x1-D.marker.pad.r),Y._hoverY=M(j?Y.y1-D.marker.pad.b/2:Y.y0+D.marker.pad.t/2);var te=u.select(this),K=s.ensureSingle(te,"path","surface",function(oe){oe.style("pointer-events","all")});v?K.transition().attrTween("d",function(oe){var ue=S(oe,l,se(),[g,A]);return function(ye){return _(ue(ye))}}):K.attr("d",_),te.call(n,d,c,h,{styleOne:i,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(r.setSliceCursor,c,{isTransitioning:c._transitioning}),K.call(i,Y,D,{hovered:!1}),Y.x0===Y.x1||Y.y0===Y.y1?Y._text="":ne?Y._text=Z?"":r.getPtLabel(Y)||"":Y._text=f(Y,d,D,h,F)||"";var $=s.ensureSingle(te,"g","slicetext"),ae=s.ensureSingle($,"text","",function(oe){oe.attr("data-notex",1)}),ie=s.ensureUniformFontSize(c,r.determineTextFont(D,Y,F.font));ae.text(Y._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":U||ne?"start":"middle").call(m.font,ie).call(x.convertToTspans,c),Y.textBB=m.bBox(ae.node()),Y.transform=T(Y,{fontSize:ie.size,isHeader:ne}),Y.transform.fontSize=ie.size,v?ae.transition().attrTween("transform",function(oe){var ue=k(oe,l,se(),[g,A]);return function(ye){return w(ue(ye))}}):ae.attr("transform",w(Y))}),le}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(e,z,N){z.exports=function u(s,m,x){var t;x.swapXY&&(t=s.x0,s.x0=s.y0,s.y0=t,t=s.x1,s.x1=s.y1,s.y1=t),x.flipX&&(t=s.x0,s.x0=m[0]-s.x1,s.x1=m[0]-t),x.flipY&&(t=s.y0,s.y0=m[1]-s.y1,s.y1=m[1]-t);var i=s.children;if(i)for(var a=0;a<i.length;a++)u(i[a],m,x)}},{}],1080:[function(e,z,N){z.exports={moduleType:"trace",name:"treemap",basePlotModule:e("./base_plot"),categories:[],animatable:!0,attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc").calc,crossTraceCalc:e("./calc").crossTraceCalc,plot:e("./plot"),style:e("./style").style,colorbar:e("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(e,z,N){z.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(x,t){function i(a,r){return u.coerce(x,t,s,a,r)}i("treemapcolorway",t.colorway),i("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(e,z,N){var u=e("d3-hierarchy"),s=e("./flip_tree");z.exports=function(t,i,a){var r=a.flipX,n=a.flipY,f=a.packing==="dice-slice",l=a.pad[n?"bottom":"top"],o=a.pad[r?"right":"left"],c=a.pad[r?"left":"right"],h=a.pad[n?"top":"bottom"],d;f&&(d=o,o=l,l=d,d=c,c=h,h=d);var p=u.treemap().tile(m(a.packing,a.squarifyratio)).paddingInner(a.pad.inner).paddingLeft(o).paddingRight(c).paddingTop(l).paddingBottom(h).size(f?[i[1],i[0]]:i)(t);return(f||r||n)&&s(p,i,{swapXY:f,flipX:r,flipY:n}),p};function m(x,t){switch(x){case"squarify":return u.treemapSquarify.ratio(t);case"binary":return u.treemapBinary;case"dice":return u.treemapDice;case"slice":return u.treemapSlice;default:return u.treemapSliceDice}}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(e,z,N){var u=e("./draw"),s=e("./draw_descendants");z.exports=function(x,t,i,a){return u(x,t,i,a,{type:"treemap",drawDescendants:s})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(e,z,N){var u=e("@plotly/d3"),s=e("d3-interpolate").interpolate,m=e("../sunburst/helpers"),x=e("../../lib"),t=e("../bar/constants").TEXTPAD,i=e("../bar/plot"),a=i.toMoveInsideBar,r=e("../bar/uniform_text"),n=r.recordMinTextSize,f=e("./constants"),l=e("./draw_ancestors");function o(c){return m.isHierarchyRoot(c)?"":m.getPtId(c)}z.exports=function(h,d,p,y,g){var A=h._fullLayout,b=d[0],M=b.trace,_=M.type,T=_==="icicle",w=b.hierarchy,v=m.findEntryWithLevel(w,M.level),L=u.select(p),S=L.selectAll("g.pathbar"),k=L.selectAll("g.slice");if(!v){S.remove(),k.remove();return}var P=m.isHierarchyRoot(v),O=!A.uniformtext.mode&&m.hasTransition(y),F=m.getMaxDepth(M),I=function(Ve){return Ve.data.depth-v.data.depth<F},D=A._size,U=M.domain,B=D.w*(U.x[1]-U.x[0]),j=D.h*(U.y[1]-U.y[0]),Z=B,ee=M.pathbar.thickness,q=M.marker.line.width+f.gapWithPathbar,W=M.pathbar.visible?M.pathbar.side.indexOf("bottom")>-1?j+q:-(ee+q):0,J={x0:Z,x1:Z,y0:W,y1:W+ee},le=function(Ve,dt,Rt){var Gt=M.tiling.pad,kt=function(Mt){return Mt-Gt<=dt.x0},zt=function(Mt){return Mt+Gt>=dt.x1},Bt=function(Mt){return Mt-Gt<=dt.y0},Lt=function(Mt){return Mt+Gt>=dt.y1};return Ve.x0===dt.x0&&Ve.x1===dt.x1&&Ve.y0===dt.y0&&Ve.y1===dt.y1?{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1}:{x0:kt(Ve.x0-Gt)?0:zt(Ve.x0-Gt)?Rt[0]:Ve.x0,x1:kt(Ve.x1+Gt)?0:zt(Ve.x1+Gt)?Rt[0]:Ve.x1,y0:Bt(Ve.y0-Gt)?0:Lt(Ve.y0-Gt)?Rt[1]:Ve.y0,y1:Bt(Ve.y1+Gt)?0:Lt(Ve.y1+Gt)?Rt[1]:Ve.y1}},fe=null,se={},H={},Y=null,ne=function(Ve,dt){return dt?se[o(Ve)]:H[o(Ve)]},te=function(Ve,dt,Rt,Gt){if(dt)return se[o(w)]||J;var kt=H[M.level]||Rt;return I(Ve)?le(Ve,kt,Gt):{}};b.hasMultipleRoots&&P&&F++,M._maxDepth=F,M._backgroundColor=A.paper_bgcolor,M._entryDepth=v.data.depth,M._atRootLevel=P;var K=-B/2+D.l+D.w*(U.x[1]+U.x[0])/2,$=-j/2+D.t+D.h*(1-(U.y[1]+U.y[0])/2),ae=function(Ve){return K+Ve},ie=function(Ve){return $+Ve},oe=ie(0),ue=ae(0),ye=function(Ve){return ue+Ve},ce=function(Ve){return oe+Ve};function me(Ve,dt){return Ve+","+dt}var xe=ye(0),ke=function(Ve){Ve.x=Math.max(xe,Ve.x)},Ae=M.pathbar.edgeshape,Oe=function(Ve){var dt=ye(Math.max(Math.min(Ve.x0,Ve.x0),0)),Rt=ye(Math.min(Math.max(Ve.x1,Ve.x1),Z)),Gt=ce(Ve.y0),kt=ce(Ve.y1),zt=ee/2,Bt={},Lt={};Bt.x=dt,Lt.x=Rt,Bt.y=Lt.y=(Gt+kt)/2;var Mt={x:dt,y:Gt},it={x:Rt,y:Gt},ht={x:Rt,y:kt},Qe={x:dt,y:kt};return Ae===">"?(Mt.x-=zt,it.x-=zt,ht.x-=zt,Qe.x-=zt):Ae==="/"?(ht.x-=zt,Qe.x-=zt,Bt.x-=zt/2,Lt.x-=zt/2):Ae==="\\"?(Mt.x-=zt,it.x-=zt,Bt.x-=zt/2,Lt.x-=zt/2):Ae==="<"&&(Bt.x-=zt,Lt.x-=zt),ke(Mt),ke(Qe),ke(Bt),ke(it),ke(ht),ke(Lt),"M"+me(Mt.x,Mt.y)+"L"+me(it.x,it.y)+"L"+me(Lt.x,Lt.y)+"L"+me(ht.x,ht.y)+"L"+me(Qe.x,Qe.y)+"L"+me(Bt.x,Bt.y)+"Z"},He=function(Ve){var dt=ae(Ve.x0),Rt=ae(Ve.x1),Gt=ie(Ve.y0),kt=ie(Ve.y1),zt=Rt-dt,Bt=kt-Gt;if(!zt||!Bt)return"";var Lt=0,Mt=zt>2*Lt&&Bt>2*Lt?Lt:0,it=function(ht,Qe){return Mt?"a"+me(Mt,Mt)+" 0 0 1 "+me(ht,Qe):""};return"M"+me(dt,Gt+Mt)+it(Mt,-Mt)+"L"+me(Rt-Mt,Gt)+it(Mt,Mt)+"L"+me(Rt,kt-Mt)+it(-Mt,Mt)+"L"+me(dt+Mt,kt)+it(-Mt,-Mt)+"Z"},Ge=function(Ve,dt){var Rt=Ve.x0,Gt=Ve.x1,kt=Ve.y0,zt=Ve.y1,Bt=Ve.textBB,Lt=function(Nt){return M.textposition.indexOf(Nt)!==-1},Mt=Lt("bottom"),it=Lt("top")||dt.isHeader&&!Mt,ht=it?"start":Mt?"end":"middle",Qe=Lt("right"),Ce=Lt("left")||dt.onPathbar,Xe=Ce?-1:Qe?1:0,rt=M[T?"tiling":"marker"].pad;if(dt.isHeader){if(Rt+=(T?rt:rt.l)-t,Gt-=(T?rt:rt.r)-t,Rt>=Gt){var ut=(Rt+Gt)/2;Rt=ut,Gt=ut}var Pt;Mt?(Pt=zt-(T?rt:rt.b),kt<Pt&&Pt<zt&&(kt=Pt)):(Pt=kt+(T?rt:rt.t),kt<Pt&&Pt<zt&&(zt=Pt))}var St=a(Rt,Gt,kt,zt,Bt,{isHorizontal:!1,constrained:!0,angle:0,anchor:ht,leftToRight:Xe});return St.fontSize=dt.fontSize,St.targetX=ae(St.targetX),St.targetY=ie(St.targetY),isNaN(St.targetX)||isNaN(St.targetY)?{}:(Rt!==Gt&&kt!==zt&&n(M.type,St,A),{scale:St.scale,rotate:St.rotate,textX:St.textX,textY:St.textY,anchorX:St.anchorX,anchorY:St.anchorY,targetX:St.targetX,targetY:St.targetY})},_e=function(Ve,dt){for(var Rt,Gt=0,kt=Ve;!Rt&&Gt<F;)Gt++,kt=kt.parent,kt?Rt=ne(kt,dt):Gt=F;return Rt||{}},Re=function(Ve,dt,Rt,Gt){var kt=ne(Ve,dt),zt;if(dt)zt=J;else{var Bt=ne(v,dt);Bt?zt=le(Ve,Bt,Gt):zt={}}return s(kt,zt)},We=function(Ve,dt,Rt,Gt,kt){var zt=ne(Ve,dt),Bt;if(zt)Bt=zt;else if(dt)Bt=J;else if(fe)if(Ve.parent){var Lt=Y||Rt;Lt&&!dt?Bt=le(Ve,Lt,Gt):(Bt={},x.extendFlat(Bt,_e(Ve,dt)))}else Bt=x.extendFlat({},Ve),T&&(kt.orientation==="h"?kt.flipX?Bt.x0=Ve.x1:Bt.x1=0:kt.flipY?Bt.y0=Ve.y1:Bt.y1=0);else Bt={};return s(Bt,{x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1})},qe=function(Ve,dt,Rt,Gt){var kt=ne(Ve,dt),zt={},Bt=te(Ve,dt,Rt,Gt);x.extendFlat(zt,{transform:Ge({x0:Bt.x0,x1:Bt.x1,y0:Bt.y0,y1:Bt.y1,textBB:Ve.textBB,_text:Ve._text},{isHeader:m.isHeader(Ve,M)})}),kt?zt=kt:Ve.parent&&x.extendFlat(zt,_e(Ve,dt));var Lt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&n(M.type,Lt,A),s(zt,{transform:{scale:Lt.scale,rotate:Lt.rotate,textX:Lt.textX,textY:Lt.textY,anchorX:Lt.anchorX,anchorY:Lt.anchorY,targetX:Lt.targetX,targetY:Lt.targetY}})},Ue=function(Ve,dt,Rt,Gt,kt){var zt=Gt[0],Bt=Gt[1];O?Ve.exit().transition().each(function(){var Lt=u.select(this),Mt=Lt.select("path.surface");Mt.transition().attrTween("d",function(ht){var Qe=Re(ht,dt,Rt,[zt,Bt]);return function(Ce){return kt(Qe(Ce))}});var it=Lt.select("g.slicetext");it.attr("opacity",0)}).remove():Ve.exit().remove()},Ie=function(Ve){var dt=Ve.transform;return Ve.x0!==Ve.x1&&Ve.y0!==Ve.y1&&n(M.type,dt,A),x.getTextTransform({textX:dt.textX,textY:dt.textY,anchorX:dt.anchorX,anchorY:dt.anchorY,targetX:dt.targetX,targetY:dt.targetY,scale:dt.scale,rotate:dt.rotate})};O&&(S.each(function(Ve){se[o(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(se[o(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate})}),k.each(function(Ve){H[o(Ve)]={x0:Ve.x0,x1:Ve.x1,y0:Ve.y0,y1:Ve.y1},Ve.transform&&(H[o(Ve)].transform={textX:Ve.transform.textX,textY:Ve.transform.textY,anchorX:Ve.transform.anchorX,anchorY:Ve.transform.anchorY,targetX:Ve.transform.targetX,targetY:Ve.transform.targetY,scale:Ve.transform.scale,rotate:Ve.transform.rotate}),!fe&&m.isEntry(Ve)&&(fe=Ve)})),Y=g(h,d,v,k,{width:B,height:j,viewX:ae,viewY:ie,pathSlice:He,toMoveInsideSlice:Ge,prevEntry:fe,makeUpdateSliceInterpolator:We,makeUpdateTextInterpolator:qe,handleSlicesExit:Ue,hasTransition:O,strTransform:Ie}),M.pathbar.visible?l(h,d,v,S,{barDifY:W,width:Z,height:ee,viewX:ye,viewY:ce,pathSlice:Oe,toMoveInsideSlice:Ge,makeUpdateSliceInterpolator:We,makeUpdateTextInterpolator:qe,handleSlicesExit:Ue,hasTransition:O,strTransform:Ie}):S.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../../lib"),x=e("../sunburst/helpers"),t=e("../bar/uniform_text").resizeText;function i(r){var n=r._fullLayout._treemaplayer.selectAll(".trace");t(r,n,"treemap"),n.each(function(f){var l=u.select(this),o=f[0],c=o.trace;l.style("opacity",c.opacity),l.selectAll("path.surface").each(function(h){u.select(this).call(a,h,c,{hovered:!1})})})}function a(r,n,f,l){var o=(l||{}).hovered,c=n.data.data,h=c.i,d,p,y=c.color,g=x.isHierarchyRoot(n),A=1;if(o)d=f._hovered.marker.line.color,p=f._hovered.marker.line.width;else if(g&&y===f.root.color)A=100,d="rgba(0,0,0,0)",p=0;else if(d=m.castOption(f,h,"marker.line.color")||s.defaultLine,p=m.castOption(f,h,"marker.line.width")||0,!f._hasColorscale&&!n.onPathbar){var b=f.marker.depthfade;if(b){var M=s.combine(s.addOpacity(f._backgroundColor,.75),y),_;if(b===!0){var T=x.getMaxDepth(f);isFinite(T)?x.isLeaf(n)?_=0:_=f._maxVisibleLayers-(n.data.depth-f._entryDepth):_=n.data.height+1}else _=n.data.depth-f._entryDepth,f._atRootLevel||_++;if(_>0)for(var w=0;w<_;w++){var v=.5*w/_;y=s.combine(s.addOpacity(M,v),y)}}}r.style("stroke-width",p).call(s.fill,y).call(s.stroke,d).style("opacity",A)}z.exports={style:i,styleOne:a}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(e,z,N){var u=e("../box/attributes"),s=e("../../lib/extend").extendFlat,m=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat;z.exports={y:u.y,x:u.x,x0:u.x0,y0:u.y0,xhoverformat:m("x"),yhoverformat:m("y"),name:s({},u.name,{}),orientation:s({},u.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:u.fillcolor,points:s({},u.boxpoints,{}),jitter:s({},u.jitter,{}),pointpos:s({},u.pointpos,{}),width:s({},u.width,{}),marker:u.marker,text:u.text,hovertext:u.hovertext,hovertemplate:u.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup,selected:u.selected,unselected:u.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../box/calc"),x=e("./helpers"),t=e("../../constants/numerical").BADNUM;z.exports=function(f,l){var o=m(f,l);if(o[0].t.empty)return o;for(var c=f._fullLayout,h=s.getFromId(f,l[l.orientation==="h"?"xaxis":"yaxis"]),d=1/0,p=-1/0,y=0,g=0,A=0;A<o.length;A++){var b=o[A],M=b.pts.map(x.extractVal),_=b.bandwidth=a(l,b,M),T=b.span=r(l,b,h,_);if(b.min===b.max&&_===0)T=b.span=[b.min,b.max],b.density=[{v:1,t:T[0]}],b.bandwidth=_,y=Math.max(y,1);else{var w=T[1]-T[0],v=Math.ceil(w/(_/3)),L=w/v;if(!isFinite(L)||!isFinite(v))return u.error("Something went wrong with computing the violin span"),o[0].t.empty=!0,o;var S=x.makeKDE(b,l,M);b.density=new Array(v);for(var k=0,P=T[0];P<T[1]+L/2;k++,P+=L){var O=S(P);b.density[k]={v:O,t:P},y=Math.max(y,O)}}g=Math.max(g,M.length),d=Math.min(d,T[0]),p=Math.max(p,T[1])}var F=s.findExtremes(h,[d,p],{padded:!0});if(l._extremes[h._id]=F,l.width)o[0].t.maxKDE=y;else{var I=c._violinScaleGroupStats,D=l.scalegroup,U=I[D];U?(U.maxKDE=Math.max(U.maxKDE,y),U.maxCount=Math.max(U.maxCount,g)):I[D]={maxKDE:y,maxCount:g}}return o[0].t.labels.kde=u._(f,"kde:"),o};function i(n,f,l){var o=Math.min(f,l/1.349);return 1.059*o*Math.pow(n,-.2)}function a(n,f,l){var o=f.max-f.min;if(!o)return n.bandwidth?n.bandwidth:0;if(n.bandwidth)return Math.max(n.bandwidth,o/1e4);var c=l.length,h=u.stdev(l,c-1,f.mean);return Math.max(i(c,h,f.q3-f.q1),o/100)}function r(n,f,l,o){var c=n.spanmode,h=n.span||[],d=[f.min,f.max],p=[f.min-2*o,f.max+2*o],y;function g(b){var M=h[b],_=l.type==="multicategory"?l.r2c(M):l.d2c(M,0,n[f.valLetter+"calendar"]);return _===t?p[b]:_}c==="soft"?y=p:c==="hard"?y=d:y=[g(0),g(1)];var A={type:"linear",range:y};return s.setConvert(A),A.cleanRange(),y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(e,z,N){var u=e("../box/cross_trace_calc").setPositionOffset,s=["v","h"];z.exports=function(x,t){for(var i=x.calcdata,a=t.xaxis,r=t.yaxis,n=0;n<s.length;n++){for(var f=s[n],l=f==="h"?r:a,o=[],c=0;c<i.length;c++){var h=i[c],d=h[0].t,p=h[0].trace;p.visible===!0&&p.type==="violin"&&!d.empty&&p.orientation===f&&p.xaxis===a._id&&p.yaxis===r._id&&o.push(c)}u("violin",x,o,l)}}},{"../box/cross_trace_calc":675}],1090:[function(e,z,N){var u=e("../../lib"),s=e("../../components/color"),m=e("../box/defaults"),x=e("./attributes");z.exports=function(i,a,r,n){function f(L,S){return u.coerce(i,a,x,L,S)}function l(L,S){return u.coerce2(i,a,x,L,S)}if(m.handleSampleDefaults(i,a,f,n),a.visible!==!1){f("bandwidth"),f("side");var o=f("width");o||(f("scalegroup",a.name),f("scalemode"));var c=f("span"),h;Array.isArray(c)&&(h="manual"),f("spanmode",h);var d=f("line.color",(i.marker||{}).color||r),p=f("line.width"),y=f("fillcolor",s.addOpacity(a.line.color,.5));m.handlePointsDefaults(i,a,f,{prefix:""});var g=l("box.width"),A=l("box.fillcolor",y),b=l("box.line.color",d),M=l("box.line.width",p),_=f("box.visible",Boolean(g||A||b||M));_||(a.box={visible:!1});var T=l("meanline.color",d),w=l("meanline.width",p),v=f("meanline.visible",Boolean(T||w));v||(a.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(e,z,N){var u=e("../../lib"),s={gaussian:function(m){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*m*m)}};N.makeKDE=function(m,x,t){var i=t.length,a=s.gaussian,r=m.bandwidth,n=1/(i*r);return function(f){for(var l=0,o=0;o<i;o++)l+=a((f-t[o])/r);return n*l}},N.getPositionOnKdePath=function(m,x,t){var i,a;x.orientation==="h"?(i="y",a="x"):(i="x",a="y");var r=u.findPointOnPath(m.path,t,a,{pathLength:m.pathLength}),n=m.posCenterPx,f=r[i],l=x.side==="both"?2*n-f:n;return[f,l]},N.getKdeValue=function(m,x,t){var i=m.pts.map(N.extractVal),a=N.makeKDE(m,x,i);return a(t)/m.posDensityScale},N.extractVal=function(m){return m.v}},{"../../lib":503}],1092:[function(e,z,N){var u=e("../../lib"),s=e("../../plots/cartesian/axes"),m=e("../box/hover"),x=e("./helpers");z.exports=function(i,a,r,n,f){f||(f={});var l=f.hoverLayer,o=i.cd,c=o[0].trace,h=c.hoveron,d=h.indexOf("violins")!==-1,p=h.indexOf("kde")!==-1,y=[],g,A;if(d||p){var b=m.hoverOnBoxes(i,a,r,n);if(p&&b.length>0){var M=i.xa,_=i.ya,T,w,v,L,S;c.orientation==="h"?(S=a,T="y",v=_,w="x",L=M):(S=r,T="x",v=M,w="y",L=_);var k=o[i.index];if(S>=k.span[0]&&S<=k.span[1]){var P=u.extendFlat({},i),O=L.c2p(S,!0),F=x.getKdeValue(k,c,S),I=x.getPositionOnKdePath(k,c,O),D=v._offset,U=v._length;P[T+"0"]=I[0],P[T+"1"]=I[1],P[w+"0"]=P[w+"1"]=O,P[w+"Label"]=w+": "+s.hoverLabelText(L,S,c[w+"hoverformat"])+", "+o[0].t.labels.kde+" "+F.toFixed(3),P.spikeDistance=b[0].spikeDistance;var B=T+"Spike";P[B]=b[0][B],b[0].spikeDistance=void 0,b[0][B]=void 0,P.hovertemplate=!1,y.push(P),A={stroke:i.color},A[T+"1"]=u.constrain(D+I[0],D,D+U),A[T+"2"]=u.constrain(D+I[1],D,D+U),A[w+"1"]=A[w+"2"]=L._offset+O}}d&&(y=y.concat(b))}h.indexOf("points")!==-1&&(g=m.hoverOnPoints(i,a,r));var j=l.selectAll(".violinline-"+c.uid).data(A?[0]:[]);return j.enter().append("line").classed("violinline-"+c.uid,!0).attr("stroke-width",1.5),j.exit().remove(),j.attr(A),n==="closest"?g?[g]:y:(g&&y.push(g),y)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(e,z,N){z.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults"),crossTraceDefaults:e("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style"),styleOnSelect:e("../scatter/style").styleOnSelect,hoverPoints:e("./hover"),selectPoints:e("../box/select"),moduleType:"trace",name:"violin",basePlotModule:e("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(e,z,N){var u=e("../box/layout_attributes"),s=e("../../lib").extendFlat;z.exports={violinmode:s({},u.boxmode,{}),violingap:s({},u.boxgap,{}),violingroupgap:s({},u.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes"),m=e("../box/layout_defaults");z.exports=function(t,i,a){function r(n,f){return u.coerce(t,i,s,n,f)}m._supply(t,i,a,r,"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../box/plot"),t=e("../scatter/line_points"),i=e("./helpers");z.exports=function(r,n,f,l){var o=r._fullLayout,c=n.xaxis,h=n.yaxis;function d(p){var y=t(p,{xaxis:c,yaxis:h,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return m.smoothopen(y[0],1)}s.makeTraceGroups(l,f,"trace violins").each(function(p){var y=u.select(this),g=p[0],A=g.t,b=g.trace;if(b.visible!==!0||A.empty){y.remove();return}var M=A.bPos,_=A.bdPos,T=n[A.valLetter+"axis"],w=n[A.posLetter+"axis"],v=b.side==="both",L=v||b.side==="positive",S=v||b.side==="negative",k=y.selectAll("path.violin").data(s.identity);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),k.exit().remove(),k.each(function(j){var Z=u.select(this),ee=j.density,q=ee.length,W=w.c2l(j.pos+M,!0),J=w.l2p(W),le;if(b.width)le=A.maxKDE/_;else{var fe=o._violinScaleGroupStats[b.scalegroup];le=b.scalemode==="count"?fe.maxKDE/_*(fe.maxCount/j.pts.length):fe.maxKDE/_}var se,H,Y,ne,te,K,$;if(L){for(K=new Array(q),ne=0;ne<q;ne++)$=K[ne]={},$[A.posLetter]=W+ee[ne].v/le,$[A.valLetter]=T.c2l(ee[ne].t,!0);se=d(K)}if(S){for(K=new Array(q),te=0,ne=q-1;te<q;te++,ne--)$=K[te]={},$[A.posLetter]=W-ee[ne].v/le,$[A.valLetter]=T.c2l(ee[ne].t,!0);H=d(K)}if(v)Y=se+"L"+H.substr(1)+"Z";else{var ae=[J,T.c2p(ee[0].t)],ie=[J,T.c2p(ee[q-1].t)];b.orientation==="h"&&(ae.reverse(),ie.reverse()),L?Y="M"+ae+"L"+se.substr(1)+"L"+ie:Y="M"+ie+"L"+H.substr(1)+"L"+ae}Z.attr("d",Y),j.posCenterPx=J,j.posDensityScale=le*_,j.path=Z.node(),j.pathLength=j.path.getTotalLength()/(v?2:1)});var P=b.box,O=P.width,F=(P.line||{}).width,I,D;v?(I=_*O,D=0):L?(I=[0,_*O/2],D=F*{x:1,y:-1}[A.posLetter]):(I=[_*O/2,0],D=F*{x:-1,y:1}[A.posLetter]),x.plotBoxAndWhiskers(y,{pos:w,val:T},b,{bPos:M,bdPos:I,bPosPxOffset:D}),x.plotBoxMean(y,{pos:w,val:T},b,{bPos:M,bdPos:I,bPosPxOffset:D});var U;!b.box.visible&&b.meanline.visible&&(U=s.identity);var B=y.selectAll("path.meanline").data(U||[]);B.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),B.exit().remove(),B.each(function(j){var Z=T.c2p(j.mean,!0),ee=i.getPositionOnKdePath(j,b,Z);u.select(this).attr("d",b.orientation==="h"?"M"+Z+","+ee[0]+"V"+ee[1]:"M"+ee[0]+","+Z+"H"+ee[1])}),x.plotPoints(y,{x:c,y:h},b,A)})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/color"),m=e("../scatter/style").stylePoints;z.exports=function(t){var i=u.select(t).selectAll("g.trace.violins");i.style("opacity",function(a){return a[0].trace.opacity}),i.each(function(a){var r=a[0].trace,n=u.select(this),f=r.box||{},l=f.line||{},o=r.meanline||{},c=o.width;n.selectAll("path.violin").style("stroke-width",r.line.width+"px").call(s.stroke,r.line.color).call(s.fill,r.fillcolor),n.selectAll("path.box").style("stroke-width",l.width+"px").call(s.stroke,l.color).call(s.fill,f.fillcolor);var h={"stroke-width":c+"px","stroke-dasharray":2*c+"px,"+c+"px"};n.selectAll("path.mean").style(h).call(s.stroke,o.color),n.selectAll("path.meanline").style(h).call(s.stroke,o.color),m(n,r,t)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(e,z,N){var u=e("../../components/colorscale/attributes"),s=e("../isosurface/attributes"),m=e("../surface/attributes"),x=e("../../plots/attributes"),t=e("../../lib/extend").extendFlat,i=e("../../plot_api/edit_types").overrideAll,a=z.exports=i(t({x:s.x,y:s.y,z:s.z,value:s.value,isomin:s.isomin,isomax:s.isomax,surface:s.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:s.slices,caps:s.caps,text:s.text,hovertext:s.hovertext,xhoverformat:s.xhoverformat,yhoverformat:s.yhoverformat,zhoverformat:s.zhoverformat,valuehoverformat:s.valuehoverformat,hovertemplate:s.hovertemplate},u("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:s.colorbar,opacity:s.opacity,opacityscale:m.opacityscale,lightposition:s.lightposition,lighting:s.lighting,flatshading:s.flatshading,contour:s.contour,hoverinfo:t({},x.hoverinfo),showlegend:t({},x.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(e,z,N){var u=e("../../../stackgl_modules").gl_mesh3d,s=e("../../lib/gl_format_color").parseColorScale,m=e("../../lib/str2rgbarray"),x=e("../../components/colorscale").extractOpts,t=e("../../plots/gl3d/zip3"),i=e("../isosurface/convert").findNearestOnAxis,a=e("../isosurface/convert").generateIsoMeshes;function r(l,o,c){this.scene=l,this.uid=c,this.mesh=o,this.name="",this.data=null,this.showContour=!1}var n=r.prototype;n.handlePick=function(l){if(l.object===this.mesh){var o=l.data.index,c=this.data._meshX[o],h=this.data._meshY[o],d=this.data._meshZ[o],p=this.data._Ys.length,y=this.data._Zs.length,g=i(c,this.data._Xs).id,A=i(h,this.data._Ys).id,b=i(d,this.data._Zs).id,M=l.index=b+y*A+y*p*g;l.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var _=this.data.hovertext||this.data.text;return Array.isArray(_)&&_[M]!==void 0?l.textLabel=_[M]:_&&(l.textLabel=_),!0}},n.update=function(l){var o=this.scene,c=o.fullSceneLayout;this.data=a(l);function h(A,b,M,_){return b.map(function(T){return A.d2l(T,0,_)*M})}var d=t(h(c.xaxis,l._meshX,o.dataScale[0],l.xcalendar),h(c.yaxis,l._meshY,o.dataScale[1],l.ycalendar),h(c.zaxis,l._meshZ,o.dataScale[2],l.zcalendar)),p=t(l._meshI,l._meshJ,l._meshK),y={positions:d,cells:p,lightPosition:[l.lightposition.x,l.lightposition.y,l.lightposition.z],ambient:l.lighting.ambient,diffuse:l.lighting.diffuse,specular:l.lighting.specular,roughness:l.lighting.roughness,fresnel:l.lighting.fresnel,vertexNormalsEpsilon:l.lighting.vertexnormalsepsilon,faceNormalsEpsilon:l.lighting.facenormalsepsilon,opacity:l.opacity,opacityscale:l.opacityscale,contourEnable:l.contour.show,contourColor:m(l.contour.color).slice(0,3),contourWidth:l.contour.width,useFacetNormals:l.flatshading},g=x(l);y.vertexIntensity=l._meshIntensity,y.vertexIntensityBounds=[g.min,g.max],y.colormap=s(l),this.mesh.update(y)},n.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};function f(l,o){var c=l.glplot.gl,h=u({gl:c}),d=new r(l,h,o.uid);return h._trace=d,d.update(o),l.glplot.add(h),d}z.exports=f},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(e,z,N){var u=e("../../lib"),s=e("./attributes"),m=e("../isosurface/defaults").supplyIsoDefaults,x=e("../surface/defaults").opacityscaleDefaults;z.exports=function(i,a,r,n){function f(l,o){return u.coerce(i,a,s,l,o)}m(i,a,r,n,f),x(i,a,n,f)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(e,z,N){z.exports={attributes:e("./attributes"),supplyDefaults:e("./defaults"),calc:e("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:e("./convert"),moduleType:"trace",name:"volume",basePlotModule:e("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(e,z,N){var u=e("../bar/attributes"),s=e("../scatter/attributes").line,m=e("../../plots/attributes"),x=e("../../plots/cartesian/axis_format_attributes").axisHoverFormat,t=e("../../plots/template_attributes").hovertemplateAttrs,i=e("../../plots/template_attributes").texttemplateAttrs,a=e("./constants"),r=e("../../lib/extend").extendFlat,n=e("../../components/color");function f(l){return{marker:{color:r({},u.marker.color,{arrayOk:!1,editType:"style"}),line:{color:r({},u.marker.line.color,{arrayOk:!1,editType:"style"}),width:r({},u.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}z.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:u.x,x0:u.x0,dx:u.dx,y:u.y,y0:u.y0,dy:u.dy,xperiod:u.xperiod,yperiod:u.yperiod,xperiod0:u.xperiod0,yperiod0:u.yperiod0,xperiodalignment:u.xperiodalignment,yperiodalignment:u.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),hovertext:u.hovertext,hovertemplate:t({},{keys:a.eventDataKeys}),hoverinfo:r({},m.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:i({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:u.text,textposition:u.textposition,insidetextanchor:u.insidetextanchor,textangle:u.textangle,textfont:u.textfont,insidetextfont:u.insidetextfont,outsidetextfont:u.outsidetextfont,constraintext:u.constraintext,cliponaxis:u.cliponaxis,orientation:u.orientation,offset:u.offset,width:u.width,increasing:f(),decreasing:f(),totals:f(),connector:{line:{color:r({},s.color,{dflt:n.defaultLine}),width:r({},s.width,{editType:"plot"}),dash:s.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:u.offsetgroup,alignmentgroup:u.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(e,z,N){var u=e("../../plots/cartesian/axes"),s=e("../../plots/cartesian/align_period"),m=e("../../lib").mergeArray,x=e("../scatter/calc_selection"),t=e("../../constants/numerical").BADNUM;function i(r){return r==="a"||r==="absolute"}function a(r){return r==="t"||r==="total"}z.exports=function(n,f){var l=u.getFromId(n,f.xaxis||"x"),o=u.getFromId(n,f.yaxis||"y"),c,h,d,p,y,g;f.orientation==="h"?(c=l.makeCalcdata(f,"x"),d=o.makeCalcdata(f,"y"),p=s(f,o,"y",d),y=!!f.yperiodalignment,g="y"):(c=o.makeCalcdata(f,"y"),d=l.makeCalcdata(f,"x"),p=s(f,l,"x",d),y=!!f.xperiodalignment,g="x"),h=p.vals;for(var A=Math.min(h.length,c.length),b=new Array(A),M=0,_,T=!1,w=0;w<A;w++){var v=c[w]||0,L=!1;(c[w]!==t||a(f.measure[w])||i(f.measure[w]))&&w+1<A&&(c[w+1]!==t||a(f.measure[w+1])||i(f.measure[w+1]))&&(L=!0);var S=b[w]={i:w,p:h[w],s:v,rawS:v,cNext:L};i(f.measure[w])?(M=S.s,S.isSum=!0,S.dir="totals",S.s=M):a(f.measure[w])?(S.isSum=!0,S.dir="totals",S.s=M):(S.isSum=!1,S.dir=S.rawS<0?"decreasing":"increasing",_=S.s,S.s=M+_,M+=_),S.dir==="totals"&&(T=!0),y&&(b[w].orig_p=d[w],b[w][g+"End"]=p.ends[w],b[w][g+"Start"]=p.starts[w]),f.ids&&(S.id=String(f.ids[w])),S.v=(f.base||0)+M}return b.length&&(b[0].hasTotals=T),m(f.text,b,"tx"),m(f.hovertext,b,"htx"),x(b,f),b}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(e,z,N){z.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(e,z,N){var u=e("../bar/cross_trace_calc").setGroupPositions;z.exports=function(m,x){var t=m._fullLayout,i=m._fullData,a=m.calcdata,r=x.xaxis,n=x.yaxis,f=[],l=[],o=[],c,h;for(h=0;h<i.length;h++){var d=i[h];d.visible===!0&&d.xaxis===r._id&&d.yaxis===n._id&&d.type==="waterfall"&&(c=a[h],d.orientation==="h"?o.push(c):l.push(c),f.push(c))}var p={mode:t.waterfallmode,norm:t.waterfallnorm,gap:t.waterfallgap,groupgap:t.waterfallgroupgap};for(u(m,r,n,l,p),u(m,n,r,o,p),h=0;h<f.length;h++){c=f[h];for(var y=0;y<c.length;y++){var g=c[y];g.isSum===!1&&(g.s0+=y===0?0:c[y-1].s),y+1<c.length&&(c[y].nextP0=c[y+1].p0,c[y].nextS0=c[y+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(e,z,N){var u=e("../../lib"),s=e("../bar/defaults").handleGroupingDefaults,m=e("../bar/defaults").handleText,x=e("../scatter/xy_defaults"),t=e("../scatter/period_defaults"),i=e("./attributes"),a=e("../../components/color"),r=e("../../constants/delta.js"),n=r.INCREASING.COLOR,f=r.DECREASING.COLOR,l="#4499FF";function o(d,p,y){d(p+".marker.color",y),d(p+".marker.line.color",a.defaultLine),d(p+".marker.line.width")}function c(d,p,y,g){function A(w,v){return u.coerce(d,p,i,w,v)}var b=x(d,p,g,A);if(!b){p.visible=!1;return}t(d,p,g,A),A("xhoverformat"),A("yhoverformat"),A("measure"),A("orientation",p.x&&!p.y?"h":"v"),A("base"),A("offset"),A("width"),A("text"),A("hovertext"),A("hovertemplate");var M=A("textposition");m(d,p,g,A,M,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),p.textposition!=="none"&&(A("texttemplate"),p.texttemplate||A("textinfo")),o(A,"increasing",n),o(A,"decreasing",f),o(A,"totals",l);var _=A("connector.visible");if(_){A("connector.mode");var T=A("connector.line.width");T&&(A("connector.line.color"),A("connector.line.dash"))}}function h(d,p){var y,g;function A(M){return u.coerce(g._input,g,i,M)}if(p.waterfallmode==="group")for(var b=0;b<d.length;b++)g=d[b],y=g._input,s(y,g,p,A)}z.exports={supplyDefaults:c,crossTraceDefaults:h}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(e,z,N){z.exports=function(s,m){return s.x="xVal"in m?m.xVal:m.x,s.y="yVal"in m?m.yVal:m.y,"initial"in m&&(s.initial=m.initial),"delta"in m&&(s.delta=m.delta),"final"in m&&(s.final=m.final),m.xa&&(s.xaxis=m.xa),m.ya&&(s.yaxis=m.ya),s}},{}],1108:[function(e,z,N){var u=e("../../plots/cartesian/axes").hoverLabelText,s=e("../../components/color").opacity,m=e("../bar/hover").hoverOnBars,x=e("../../constants/delta.js"),t={increasing:x.INCREASING.SYMBOL,decreasing:x.DECREASING.SYMBOL};z.exports=function(r,n,f,l,o){var c=m(r,n,f,l,o);if(!c)return;var h=c.cd,d=h[0].trace,p=d.orientation==="h",y=p?"x":"y",g=p?r.xa:r.ya;function A(P){return u(g,P,d[y+"hoverformat"])}var b=c.index,M=h[b],_=M.isSum?M.b+M.s:M.rawS;if(!M.isSum){c.initial=M.b+M.s-_,c.delta=_,c.final=c.initial+c.delta;var T=A(Math.abs(c.delta));c.deltaLabel=_<0?"("+T+")":T,c.finalLabel=A(c.final),c.initialLabel=A(c.initial)}var w=M.hi||d.hoverinfo,v=[];if(w&&w!=="none"&&w!=="skip"){var L=w==="all",S=w.split("+"),k=function(P){return L||S.indexOf(P)!==-1};M.isSum||(k("final")&&(p?!k("x"):!k("y"))&&v.push(c.finalLabel),k("delta")&&(_<0?v.push(c.deltaLabel+" "+t.decreasing):v.push(c.deltaLabel+" "+t.increasing)),k("initial")&&v.push("Initial: "+c.initialLabel))}return v.length&&(c.extraText=v.join("<br>")),c.color=i(d,M),[c]};function i(a,r){var n=a[r.dir].marker,f=n.color,l=n.line.color,o=n.line.width;if(s(f))return f;if(s(l)&&o)return l}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(e,z,N){z.exports={attributes:e("./attributes"),layoutAttributes:e("./layout_attributes"),supplyDefaults:e("./defaults").supplyDefaults,crossTraceDefaults:e("./defaults").crossTraceDefaults,supplyLayoutDefaults:e("./layout_defaults"),calc:e("./calc"),crossTraceCalc:e("./cross_trace_calc"),plot:e("./plot"),style:e("./style").style,hoverPoints:e("./hover"),eventData:e("./event_data"),selectPoints:e("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:e("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(e,z,N){z.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(e,z,N){var u=e("../../lib"),s=e("./layout_attributes");z.exports=function(m,x,t){var i=!1;function a(f,l){return u.coerce(m,x,s,f,l)}for(var r=0;r<t.length;r++){var n=t[r];if(n.visible&&n.type==="waterfall"){i=!0;break}}i&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../lib"),m=e("../../components/drawing"),x=e("../../constants/numerical").BADNUM,t=e("../bar/plot"),i=e("../bar/uniform_text").clearMinTextSize;z.exports=function(f,l,o,c){var h=f._fullLayout;i("waterfall",h),t.plot(f,l,o,c,{mode:h.waterfallmode,norm:h.waterfallmode,gap:h.waterfallgap,groupgap:h.waterfallgroupgap}),a(f,l,o,c)};function a(n,f,l,o){var c=f.xaxis,h=f.yaxis;s.makeTraceGroups(o,l,"trace bars").each(function(d){var p=u.select(this),y=d[0].trace,g=s.ensureSingle(p,"g","lines");if(!y.connector||!y.connector.visible){g.remove();return}var A=y.orientation==="h",b=y.connector.mode,M=g.selectAll("g.line").data(s.identity);M.enter().append("g").classed("line",!0),M.exit().remove();var _=M.size();M.each(function(T,w){if(!(w!==_-1&&!T.cNext)){var v=r(T,c,h,A),L=v[0],S=v[1],k="";L[0]!==x&&S[0]!==x&&L[1]!==x&&S[1]!==x&&(b==="spanning"&&!T.isSum&&w>0&&(A?k+="M"+L[0]+","+S[1]+"V"+S[0]:k+="M"+L[1]+","+S[0]+"H"+L[0]),b!=="between"&&(T.isSum||w<_-1)&&(A?k+="M"+L[1]+","+S[0]+"V"+S[1]:k+="M"+L[0]+","+S[1]+"H"+L[1]),L[2]!==x&&S[2]!==x&&(A?k+="M"+L[1]+","+S[1]+"V"+S[2]:k+="M"+L[1]+","+S[1]+"H"+L[2])),k===""&&(k="M0,0Z"),s.ensureSingle(u.select(this),"path").attr("d",k).call(m.setClipUrl,f.layerClipId,n)}})})}function r(n,f,l,o){var c=[],h=[],d=o?f:l,p=o?l:f;return c[0]=d.c2p(n.s0,!0),h[0]=p.c2p(n.p0,!0),c[1]=d.c2p(n.s1,!0),h[1]=p.c2p(n.p1,!0),c[2]=d.c2p(n.nextS0,!0),h[2]=p.c2p(n.nextP0,!0),o?[c,h]:[h,c]}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(e,z,N){var u=e("@plotly/d3"),s=e("../../components/drawing"),m=e("../../components/color"),x=e("../../constants/interactions").DESELECTDIM,t=e("../bar/style"),i=e("../bar/uniform_text").resizeText,a=t.styleTextPoints;function r(n,f,l){var o=l||u.select(n).selectAll("g.waterfalllayer").selectAll("g.trace");i(n,o,"waterfall"),o.style("opacity",function(c){return c[0].trace.opacity}),o.each(function(c){var h=u.select(this),d=c[0].trace;h.selectAll(".point > path").each(function(p){if(!p.isBlank){var y=d[p.dir].marker;u.select(this).call(m.fill,y.color).call(m.stroke,y.line.color).call(s.dashLine,y.line.dash,y.line.width).style("opacity",d.selectedpoints&&!p.selected?x:1)}}),a(h,d,n),h.selectAll(".lines").each(function(){var p=d.connector.line;s.lineGroupStyle(u.select(this).selectAll("path"),p.width,p.color,p.dash)})})}z.exports={style:r}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(e,z,N){var u=e("../plots/cartesian/axes"),s=e("../lib"),m=e("../plot_api/plot_schema"),x=e("./helpers").pointsAccessorFunction,t=e("../constants/numerical").BADNUM;N.moduleType="transform",N.name="aggregate";var i=N.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=i.aggregations;N.supplyDefaults=function(c,h){var d={},p;function y(P,O){return s.coerce(c,d,i,P,O)}var g=y("enabled");if(!g)return d;var A=m.findArrayAttributes(h),b={};for(p=0;p<A.length;p++)b[A[p]]=1;var M=y("groups");if(!Array.isArray(M)){if(!b[M])return d.enabled=!1,d;b[M]=0}var _=c.aggregations||[],T=d.aggregations=new Array(_.length),w;function v(P,O){return s.coerce(_[p],w,a,P,O)}for(p=0;p<_.length;p++){w={_index:p};var L=v("target"),S=v("func"),k=v("enabled");k&&L&&(b[L]||S==="count"&&b[L]===void 0)?(S==="stddev"&&v("funcmode"),b[L]=0,T[p]=w):T[p]={enabled:!1,_index:p}}for(p=0;p<A.length;p++)b[A[p]]&&T.push({target:A[p],func:a.func.dflt,enabled:!0,_index:-1});return d},N.calcTransform=function(c,h,d){if(!!d.enabled){var p=d.groups,y=s.getTargetArray(h,{target:p});if(!!y){var g,A,b,M,_={},T={},w=[],v=x(h.transforms,d),L=y.length;for(h._length&&(L=Math.min(L,h._length)),g=0;g<L;g++)A=y[g],b=_[A],b===void 0?(_[A]=w.length,M=[g],w.push(M),T[_[A]]=v(g)):(w[b].push(g),T[_[A]]=(T[_[A]]||[]).concat(v(g)));d._indexToPoints=T;var S=d.aggregations;for(g=0;g<S.length;g++)r(c,h,w,S[g]);typeof p=="string"&&r(c,h,w,{target:p,func:"first",enabled:!0}),h._length=w.length}}};function r(c,h,d,p){if(!!p.enabled){for(var y=p.target,g=s.nestedProperty(h,y),A=g.get(),b=u.getDataConversions(c,h,y,A),M=n(p,b),_=new Array(d.length),T=0;T<d.length;T++)_[T]=M(A,d[T]);g.set(_),p.func==="count"&&s.pushUnique(h._arrayAttrs,y)}}function n(c,h){var d=c.func,p=h.d2c,y=h.c2d;switch(d){case"count":return f;case"first":return l;case"last":return o;case"sum":return function(g,A){for(var b=0,M=0;M<A.length;M++){var _=p(g[A[M]]);_!==t&&(b+=_)}return y(b)};case"avg":return function(g,A){for(var b=0,M=0,_=0;_<A.length;_++){var T=p(g[A[_]]);T!==t&&(b+=T,M++)}return M?y(b/M):t};case"min":return function(g,A){for(var b=1/0,M=0;M<A.length;M++){var _=p(g[A[M]]);_!==t&&(b=Math.min(b,_))}return b===1/0?t:y(b)};case"max":return function(g,A){for(var b=-1/0,M=0;M<A.length;M++){var _=p(g[A[M]]);_!==t&&(b=Math.max(b,_))}return b===-1/0?t:y(b)};case"range":return function(g,A){for(var b=1/0,M=-1/0,_=0;_<A.length;_++){var T=p(g[A[_]]);T!==t&&(b=Math.min(b,T),M=Math.max(M,T))}return M===-1/0||b===1/0?t:y(M-b)};case"change":return function(g,A){var b=p(g[A[0]]),M=p(g[A[A.length-1]]);return b===t||M===t?t:y(M-b)};case"median":return function(g,A){for(var b=[],M=0;M<A.length;M++){var _=p(g[A[M]]);_!==t&&b.push(_)}if(!b.length)return t;b.sort(s.sorterAsc);var T=(b.length-1)/2;return y((b[Math.floor(T)]+b[Math.ceil(T)])/2)};case"mode":return function(g,A){for(var b={},M=0,_=t,T=0;T<A.length;T++){var w=p(g[A[T]]);if(w!==t){var v=b[w]=(b[w]||0)+1;v>M&&(M=v,_=w)}}return M?y(_):t};case"rms":return function(g,A){for(var b=0,M=0,_=0;_<A.length;_++){var T=p(g[A[_]]);T!==t&&(b+=T*T,M++)}return M?y(Math.sqrt(b/M)):t};case"stddev":return function(g,A){var b=0,M=0,_=1,T=t,w;for(w=0;w<A.length&&T===t;w++)T=p(g[A[w]]);if(T===t)return t;for(;w<A.length;w++){var v=p(g[A[w]]);if(v!==t){var L=v-T;b+=L,M+=L*L,_++}}var S=c.funcmode==="sample"?_-1:_;return S?Math.sqrt((M-b*b/_)/S):0}}}function f(c,h){return h.length}function l(c,h){return c[h[0]]}function o(c,h){return c[h[h.length-1]]}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(e,z,N){var u=e("../lib"),s=e("../registry"),m=e("../plots/cartesian/axes"),x=e("./helpers").pointsAccessorFunction,t=e("../constants/filter_ops"),i=t.COMPARISON_OPS,a=t.INTERVAL_OPS,r=t.SET_OPS;N.moduleType="transform",N.name="filter",N.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(i).concat(a).concat(r),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},N.supplyDefaults=function(f){var l={};function o(p,y){return u.coerce(f,l,N.attributes,p,y)}var c=o("enabled");if(c){var h=o("target");if(u.isArrayOrTypedArray(h)&&h.length===0)return l.enabled=!1,l;o("preservegaps"),o("operation"),o("value");var d=s.getComponentMethod("calendars","handleDefaults");d(f,l,"valuecalendar",null),d(f,l,"targetcalendar",null)}return l},N.calcTransform=function(f,l,o){if(!o.enabled)return;var c=u.getTargetArray(l,o);if(!c)return;var h=o.target,d=c.length;l._length&&(d=Math.min(d,l._length));var p=o.targetcalendar,y=l._arrayAttrs,g=o.preservegaps;if(typeof h=="string"){var A=u.nestedProperty(l,h+"calendar").get();A&&(p=A)}var b=m.getDataToCoordFunc(f,l,h,c),M=n(o,b,p),_={},T={},w=0;function v(F,I){for(var D=0;D<y.length;D++){var U=u.nestedProperty(l,y[D]);F(U,I)}}var L,S;g?(L=function(F){_[F.astr]=u.extendDeep([],F.get()),F.set(new Array(d))},S=function(F,I){var D=_[F.astr][I];F.get()[I]=D}):(L=function(F){_[F.astr]=u.extendDeep([],F.get()),F.set([])},S=function(F,I){var D=_[F.astr][I];F.get().push(D)}),v(L);for(var k=x(l.transforms,o),P=0;P<d;P++){var O=M(c[P]);O?(v(S,P),T[w++]=k(P)):g&&w++}o._indexToPoints=T,l._length=w};function n(f,l,o){var c=f.operation,h=f.value,d=Array.isArray(h);function p(b){return b.indexOf(c)!==-1}var y=function(b){return l(b,0,f.valuecalendar)},g=function(b){return l(b,0,o)},A;switch(p(i)?A=y(d?h[0]:h):p(a)?A=d?[y(h[0]),y(h[1])]:[y(h),y(h)]:p(r)&&(A=d?h.map(y):[y(h)]),c){case"=":return function(b){return g(b)===A};case"!=":return function(b){return g(b)!==A};case"<":return function(b){return g(b)<A};case"<=":return function(b){return g(b)<=A};case">":return function(b){return g(b)>A};case">=":return function(b){return g(b)>=A};case"[]":return function(b){var M=g(b);return M>=A[0]&&M<=A[1]};case"()":return function(b){var M=g(b);return M>A[0]&&M<A[1]};case"[)":return function(b){var M=g(b);return M>=A[0]&&M<A[1]};case"(]":return function(b){var M=g(b);return M>A[0]&&M<=A[1]};case"][":return function(b){var M=g(b);return M<=A[0]||M>=A[1]};case")(":return function(b){var M=g(b);return M<A[0]||M>A[1]};case"](":return function(b){var M=g(b);return M<=A[0]||M>A[1]};case")[":return function(b){var M=g(b);return M<A[0]||M>=A[1]};case"{}":return function(b){return A.indexOf(g(b))!==-1};case"}{":return function(b){return A.indexOf(g(b))===-1}}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(e,z,N){var u=e("../lib"),s=e("../plot_api/plot_schema"),m=e("../plots/plots"),x=e("./helpers").pointsAccessorFunction;N.moduleType="transform",N.name="groupby",N.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},N.supplyDefaults=function(i,a,r){var n,f={};function l(y,g){return u.coerce(i,f,N.attributes,y,g)}var o=l("enabled");if(!o)return f;l("groups"),l("nameformat",r._dataLength>1?"%{group} (%{trace})":"%{group}");var c=i.styles,h=f.styles=[];if(c)for(n=0;n<c.length;n++){var d=h[n]={};u.coerce(c[n],h[n],N.attributes.styles,"target");var p=u.coerce(c[n],h[n],N.attributes.styles,"value");u.isPlainObject(p)?d.value=u.extendDeep({},p):p&&delete d.value}return f},N.transform=function(i,a){var r,n,f,l=[];for(n=0;n<i.length;n++)for(r=t(i[n],a),f=0;f<r.length;f++)l.push(r[f]);return l};function t(i,a){var r,n,f,l,o,c,h,d,p,y,g=a.transform,A=a.transformIndex,b=i.transforms[A].groups,M=x(i.transforms,g);if(!u.isArrayOrTypedArray(b)||b.length===0)return[i];var _=u.filterUnique(b),T=new Array(_.length),w=b.length,v=s.findArrayAttributes(i),L=g.styles||[],S={};for(r=0;r<L.length;r++)S[L[r].target]=L[r].value;g.styles&&(y=u.keyedContainer(g,"styles","target","value.name"));var k={},P={};for(r=0;r<_.length;r++){c=_[r],k[c]=r,P[c]=0,h=T[r]=u.extendDeepNoArrays({},i),h._group=c,h.transforms[A]._indexToPoints={};var O=null;for(y&&(O=y.get(c)),O||O===""?h.name=O:h.name=u.templateString(g.nameformat,{trace:i.name,group:c}),d=h.transforms,h.transforms=[],n=0;n<d.length;n++)h.transforms[n]=u.extendDeepNoArrays({},d[n]);for(n=0;n<v.length;n++)u.nestedProperty(h,v[n]).set([])}for(f=0;f<v.length;f++){for(l=v[f],n=0,p=[];n<_.length;n++)p[n]=u.nestedProperty(T[n],l).get();for(o=u.nestedProperty(i,l).get(),n=0;n<w;n++)p[k[b[n]]].push(o[n])}for(n=0;n<w;n++){h=T[k[b[n]]];var F=h.transforms[A]._indexToPoints;F[P[b[n]]]=M(n),P[b[n]]++}for(r=0;r<_.length;r++)c=_[r],h=T[r],m.clearExpandedTraceDefaultColors(h),h=u.extendDeepNoArrays(h,S[c]||{});return T}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(e,z,N){N.pointsAccessorFunction=function(u,s){for(var m,x,t=0;t<u.length&&(m=u[t],m!==s);t++)!m._indexToPoints||m.enabled===!1||(x=m._indexToPoints);var i=x?function(a){return x[a]}:function(a){return[a]};return i}},{}],1118:[function(e,z,N){var u=e("../lib"),s=e("../plots/cartesian/axes"),m=e("./helpers").pointsAccessorFunction,x=e("../constants/numerical").BADNUM;N.moduleType="transform",N.name="sort",N.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},N.supplyDefaults=function(a){var r={};function n(l,o){return u.coerce(a,r,N.attributes,l,o)}var f=n("enabled");return f&&(n("target"),n("order")),r},N.calcTransform=function(a,r,n){if(!!n.enabled){var f=u.getTargetArray(r,n);if(!!f){var l=n.target,o=f.length;r._length&&(o=Math.min(o,r._length));var c=r._arrayAttrs,h=s.getDataToCoordFunc(a,r,l,f),d=t(n,f,h,o),p=m(r.transforms,n),y={},g,A;for(g=0;g<c.length;g++){var b=u.nestedProperty(r,c[g]),M=b.get(),_=new Array(o);for(A=0;A<o;A++)_[A]=M[d[A]];b.set(_)}for(A=0;A<o;A++)y[A]=p(d[A]);n._indexToPoints=y,r._length=o}}};function t(a,r,n,f){var l=new Array(f),o=new Array(f),c;for(c=0;c<f;c++)l[c]={v:r[c],i:c};for(l.sort(i(a,n)),c=0;c<f;c++)o[c]=l[c].i;return o}function i(a,r){switch(a.order){case"ascending":return function(n,f){var l=r(n.v),o=r(f.v);return l===x?1:o===x?-1:l-o};case"descending":return function(n,f){var l=r(n.v),o=r(f.v);return l===x?1:o===x?-1:o-l}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(e,z,N){N.version="2.8.3"},{}],1120:[function(e,z,N){(function(u){(function(){(function(s){if(typeof N=="object"&&typeof z!="undefined")z.exports=s();else{var m;typeof window!="undefined"?m=window:typeof u!="undefined"?m=u:typeof self!="undefined"?m=self:m=this,m.stackgl=s()}})(function(){return function(){function s(m,x,t){function i(n,f){if(!x[n]){if(!m[n]){var l=typeof e=="function"&&e;if(!f&&l)return l(n,!0);if(a)return a(n,!0);var o=new Error("Cannot find module '"+n+"'");throw o.code="MODULE_NOT_FOUND",o}var c=x[n]={exports:{}};m[n][0].call(c.exports,function(h){var d=m[n][1][h];return i(d||h)},c,c.exports,s,m,x,t)}return x[n].exports}for(var a=typeof e=="function"&&e,r=0;r<t.length;r++)i(t[r]);return i}return s}()({1:[function(s,m,x){x.byteLength=o,x.toByteArray=h,x.fromByteArray=y;for(var t=[],i=[],a=typeof Uint8Array!="undefined"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,f=r.length;n<f;++n)t[n]=r[n],i[r.charCodeAt(n)]=n;i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63;function l(g){var A=g.length;if(A%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var b=g.indexOf("=");b===-1&&(b=A);var M=b===A?0:4-b%4;return[b,M]}function o(g){var A=l(g),b=A[0],M=A[1];return(b+M)*3/4-M}function c(g,A,b){return(A+b)*3/4-b}function h(g){var A,b=l(g),M=b[0],_=b[1],T=new a(c(g,M,_)),w=0,v=_>0?M-4:M,L;for(L=0;L<v;L+=4)A=i[g.charCodeAt(L)]<<18|i[g.charCodeAt(L+1)]<<12|i[g.charCodeAt(L+2)]<<6|i[g.charCodeAt(L+3)],T[w++]=A>>16&255,T[w++]=A>>8&255,T[w++]=A&255;return _===2&&(A=i[g.charCodeAt(L)]<<2|i[g.charCodeAt(L+1)]>>4,T[w++]=A&255),_===1&&(A=i[g.charCodeAt(L)]<<10|i[g.charCodeAt(L+1)]<<4|i[g.charCodeAt(L+2)]>>2,T[w++]=A>>8&255,T[w++]=A&255),T}function d(g){return t[g>>18&63]+t[g>>12&63]+t[g>>6&63]+t[g&63]}function p(g,A,b){for(var M,_=[],T=A;T<b;T+=3)M=(g[T]<<16&16711680)+(g[T+1]<<8&65280)+(g[T+2]&255),_.push(d(M));return _.join("")}function y(g){for(var A,b=g.length,M=b%3,_=[],T=16383,w=0,v=b-M;w<v;w+=T)_.push(p(g,w,w+T>v?v:w+T));return M===1?(A=g[b-1],_.push(t[A>>2]+t[A<<4&63]+"==")):M===2&&(A=(g[b-2]<<8)+g[b-1],_.push(t[A>>10]+t[A>>4&63]+t[A<<2&63]+"=")),_.join("")}},{}],2:[function(s,m,x){},{}],3:[function(s,m,x){(function(t){(function(){var i=s("base64-js"),a=s("ieee754");x.Buffer=l,x.SlowBuffer=M,x.INSPECT_MAX_BYTES=50;var r=2147483647;x.kMaxLength=r,l.TYPED_ARRAY_SUPPORT=n(),!l.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function n(){try{var ce=new Uint8Array(1);return ce.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},ce.foo()===42}catch{return!1}}Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(!!l.isBuffer(this))return this.byteOffset}});function f(ce){if(ce>r)throw new RangeError('The value "'+ce+'" is invalid for option "size"');var me=new Uint8Array(ce);return me.__proto__=l.prototype,me}function l(ce,me,xe){if(typeof ce=="number"){if(typeof me=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(ce)}return o(ce,me,xe)}typeof Symbol!="undefined"&&Symbol.species!=null&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),l.poolSize=8192;function o(ce,me,xe){if(typeof ce=="string")return p(ce,me);if(ArrayBuffer.isView(ce))return y(ce);if(ce==null)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce);if(ue(ce,ArrayBuffer)||ce&&ue(ce.buffer,ArrayBuffer))return g(ce,me,xe);if(typeof ce=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var ke=ce.valueOf&&ce.valueOf();if(ke!=null&&ke!==ce)return l.from(ke,me,xe);var Ae=A(ce);if(Ae)return Ae;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof ce[Symbol.toPrimitive]=="function")return l.from(ce[Symbol.toPrimitive]("string"),me,xe);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof ce)}l.from=function(ce,me,xe){return o(ce,me,xe)},l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array;function c(ce){if(typeof ce!="number")throw new TypeError('"size" argument must be of type number');if(ce<0)throw new RangeError('The value "'+ce+'" is invalid for option "size"')}function h(ce,me,xe){return c(ce),ce<=0?f(ce):me!==void 0?typeof xe=="string"?f(ce).fill(me,xe):f(ce).fill(me):f(ce)}l.alloc=function(ce,me,xe){return h(ce,me,xe)};function d(ce){return c(ce),f(ce<0?0:b(ce)|0)}l.allocUnsafe=function(ce){return d(ce)},l.allocUnsafeSlow=function(ce){return d(ce)};function p(ce,me){if((typeof me!="string"||me==="")&&(me="utf8"),!l.isEncoding(me))throw new TypeError("Unknown encoding: "+me);var xe=_(ce,me)|0,ke=f(xe),Ae=ke.write(ce,me);return Ae!==xe&&(ke=ke.slice(0,Ae)),ke}function y(ce){for(var me=ce.length<0?0:b(ce.length)|0,xe=f(me),ke=0;ke<me;ke+=1)xe[ke]=ce[ke]&255;return xe}function g(ce,me,xe){if(me<0||ce.byteLength<me)throw new RangeError('"offset" is outside of buffer bounds');if(ce.byteLength<me+(xe||0))throw new RangeError('"length" is outside of buffer bounds');var ke;return me===void 0&&xe===void 0?ke=new Uint8Array(ce):xe===void 0?ke=new Uint8Array(ce,me):ke=new Uint8Array(ce,me,xe),ke.__proto__=l.prototype,ke}function A(ce){if(l.isBuffer(ce)){var me=b(ce.length)|0,xe=f(me);return xe.length===0||ce.copy(xe,0,0,me),xe}if(ce.length!==void 0)return typeof ce.length!="number"||ye(ce.length)?f(0):y(ce);if(ce.type==="Buffer"&&Array.isArray(ce.data))return y(ce.data)}function b(ce){if(ce>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return ce|0}function M(ce){return+ce!=ce&&(ce=0),l.alloc(+ce)}l.isBuffer=function(me){return me!=null&&me._isBuffer===!0&&me!==l.prototype},l.compare=function(me,xe){if(ue(me,Uint8Array)&&(me=l.from(me,me.offset,me.byteLength)),ue(xe,Uint8Array)&&(xe=l.from(xe,xe.offset,xe.byteLength)),!l.isBuffer(me)||!l.isBuffer(xe))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(me===xe)return 0;for(var ke=me.length,Ae=xe.length,Oe=0,He=Math.min(ke,Ae);Oe<He;++Oe)if(me[Oe]!==xe[Oe]){ke=me[Oe],Ae=xe[Oe];break}return ke<Ae?-1:Ae<ke?1:0},l.isEncoding=function(me){switch(String(me).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(me,xe){if(!Array.isArray(me))throw new TypeError('"list" argument must be an Array of Buffers');if(me.length===0)return l.alloc(0);var ke;if(xe===void 0)for(xe=0,ke=0;ke<me.length;++ke)xe+=me[ke].length;var Ae=l.allocUnsafe(xe),Oe=0;for(ke=0;ke<me.length;++ke){var He=me[ke];if(ue(He,Uint8Array)&&(He=l.from(He)),!l.isBuffer(He))throw new TypeError('"list" argument must be an Array of Buffers');He.copy(Ae,Oe),Oe+=He.length}return Ae};function _(ce,me){if(l.isBuffer(ce))return ce.length;if(ArrayBuffer.isView(ce)||ue(ce,ArrayBuffer))return ce.byteLength;if(typeof ce!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof ce);var xe=ce.length,ke=arguments.length>2&&arguments[2]===!0;if(!ke&&xe===0)return 0;for(var Ae=!1;;)switch(me){case"ascii":case"latin1":case"binary":return xe;case"utf8":case"utf-8":return K(ce).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe*2;case"hex":return xe>>>1;case"base64":return ie(ce).length;default:if(Ae)return ke?-1:K(ce).length;me=(""+me).toLowerCase(),Ae=!0}}l.byteLength=_;function T(ce,me,xe){var ke=!1;if((me===void 0||me<0)&&(me=0),me>this.length||((xe===void 0||xe>this.length)&&(xe=this.length),xe<=0)||(xe>>>=0,me>>>=0,xe<=me))return"";for(ce||(ce="utf8");;)switch(ce){case"hex":return q(this,me,xe);case"utf8":case"utf-8":return U(this,me,xe);case"ascii":return Z(this,me,xe);case"latin1":case"binary":return ee(this,me,xe);case"base64":return D(this,me,xe);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,me,xe);default:if(ke)throw new TypeError("Unknown encoding: "+ce);ce=(ce+"").toLowerCase(),ke=!0}}l.prototype._isBuffer=!0;function w(ce,me,xe){var ke=ce[me];ce[me]=ce[xe],ce[xe]=ke}l.prototype.swap16=function(){var me=this.length;if(me%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var xe=0;xe<me;xe+=2)w(this,xe,xe+1);return this},l.prototype.swap32=function(){var me=this.length;if(me%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var xe=0;xe<me;xe+=4)w(this,xe,xe+3),w(this,xe+1,xe+2);return this},l.prototype.swap64=function(){var me=this.length;if(me%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var xe=0;xe<me;xe+=8)w(this,xe,xe+7),w(this,xe+1,xe+6),w(this,xe+2,xe+5),w(this,xe+3,xe+4);return this},l.prototype.toString=function(){var me=this.length;return me===0?"":arguments.length===0?U(this,0,me):T.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(me){if(!l.isBuffer(me))throw new TypeError("Argument must be a Buffer");return this===me?!0:l.compare(this,me)===0},l.prototype.inspect=function(){var me="",xe=x.INSPECT_MAX_BYTES;return me=this.toString("hex",0,xe).replace(/(.{2})/g,"$1 ").trim(),this.length>xe&&(me+=" ... "),"<Buffer "+me+">"},l.prototype.compare=function(me,xe,ke,Ae,Oe){if(ue(me,Uint8Array)&&(me=l.from(me,me.offset,me.byteLength)),!l.isBuffer(me))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof me);if(xe===void 0&&(xe=0),ke===void 0&&(ke=me?me.length:0),Ae===void 0&&(Ae=0),Oe===void 0&&(Oe=this.length),xe<0||ke>me.length||Ae<0||Oe>this.length)throw new RangeError("out of range index");if(Ae>=Oe&&xe>=ke)return 0;if(Ae>=Oe)return-1;if(xe>=ke)return 1;if(xe>>>=0,ke>>>=0,Ae>>>=0,Oe>>>=0,this===me)return 0;for(var He=Oe-Ae,Ge=ke-xe,_e=Math.min(He,Ge),Re=this.slice(Ae,Oe),We=me.slice(xe,ke),qe=0;qe<_e;++qe)if(Re[qe]!==We[qe]){He=Re[qe],Ge=We[qe];break}return He<Ge?-1:Ge<He?1:0};function v(ce,me,xe,ke,Ae){if(ce.length===0)return-1;if(typeof xe=="string"?(ke=xe,xe=0):xe>2147483647?xe=2147483647:xe<-2147483648&&(xe=-2147483648),xe=+xe,ye(xe)&&(xe=Ae?0:ce.length-1),xe<0&&(xe=ce.length+xe),xe>=ce.length){if(Ae)return-1;xe=ce.length-1}else if(xe<0)if(Ae)xe=0;else return-1;if(typeof me=="string"&&(me=l.from(me,ke)),l.isBuffer(me))return me.length===0?-1:L(ce,me,xe,ke,Ae);if(typeof me=="number")return me=me&255,typeof Uint8Array.prototype.indexOf=="function"?Ae?Uint8Array.prototype.indexOf.call(ce,me,xe):Uint8Array.prototype.lastIndexOf.call(ce,me,xe):L(ce,[me],xe,ke,Ae);throw new TypeError("val must be string, number or Buffer")}function L(ce,me,xe,ke,Ae){var Oe=1,He=ce.length,Ge=me.length;if(ke!==void 0&&(ke=String(ke).toLowerCase(),ke==="ucs2"||ke==="ucs-2"||ke==="utf16le"||ke==="utf-16le")){if(ce.length<2||me.length<2)return-1;Oe=2,He/=2,Ge/=2,xe/=2}function _e(Ie,Ve){return Oe===1?Ie[Ve]:Ie.readUInt16BE(Ve*Oe)}var Re;if(Ae){var We=-1;for(Re=xe;Re<He;Re++)if(_e(ce,Re)===_e(me,We===-1?0:Re-We)){if(We===-1&&(We=Re),Re-We+1===Ge)return We*Oe}else We!==-1&&(Re-=Re-We),We=-1}else for(xe+Ge>He&&(xe=He-Ge),Re=xe;Re>=0;Re--){for(var qe=!0,Ue=0;Ue<Ge;Ue++)if(_e(ce,Re+Ue)!==_e(me,Ue)){qe=!1;break}if(qe)return Re}return-1}l.prototype.includes=function(me,xe,ke){return this.indexOf(me,xe,ke)!==-1},l.prototype.indexOf=function(me,xe,ke){return v(this,me,xe,ke,!0)},l.prototype.lastIndexOf=function(me,xe,ke){return v(this,me,xe,ke,!1)};function S(ce,me,xe,ke){xe=Number(xe)||0;var Ae=ce.length-xe;ke?(ke=Number(ke),ke>Ae&&(ke=Ae)):ke=Ae;var Oe=me.length;ke>Oe/2&&(ke=Oe/2);for(var He=0;He<ke;++He){var Ge=parseInt(me.substr(He*2,2),16);if(ye(Ge))return He;ce[xe+He]=Ge}return He}function k(ce,me,xe,ke){return oe(K(me,ce.length-xe),ce,xe,ke)}function P(ce,me,xe,ke){return oe($(me),ce,xe,ke)}function O(ce,me,xe,ke){return P(ce,me,xe,ke)}function F(ce,me,xe,ke){return oe(ie(me),ce,xe,ke)}function I(ce,me,xe,ke){return oe(ae(me,ce.length-xe),ce,xe,ke)}l.prototype.write=function(me,xe,ke,Ae){if(xe===void 0)Ae="utf8",ke=this.length,xe=0;else if(ke===void 0&&typeof xe=="string")Ae=xe,ke=this.length,xe=0;else if(isFinite(xe))xe=xe>>>0,isFinite(ke)?(ke=ke>>>0,Ae===void 0&&(Ae="utf8")):(Ae=ke,ke=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var Oe=this.length-xe;if((ke===void 0||ke>Oe)&&(ke=Oe),me.length>0&&(ke<0||xe<0)||xe>this.length)throw new RangeError("Attempt to write outside buffer bounds");Ae||(Ae="utf8");for(var He=!1;;)switch(Ae){case"hex":return S(this,me,xe,ke);case"utf8":case"utf-8":return k(this,me,xe,ke);case"ascii":return P(this,me,xe,ke);case"latin1":case"binary":return O(this,me,xe,ke);case"base64":return F(this,me,xe,ke);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,me,xe,ke);default:if(He)throw new TypeError("Unknown encoding: "+Ae);Ae=(""+Ae).toLowerCase(),He=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function D(ce,me,xe){return me===0&&xe===ce.length?i.fromByteArray(ce):i.fromByteArray(ce.slice(me,xe))}function U(ce,me,xe){xe=Math.min(ce.length,xe);for(var ke=[],Ae=me;Ae<xe;){var Oe=ce[Ae],He=null,Ge=Oe>239?4:Oe>223?3:Oe>191?2:1;if(Ae+Ge<=xe){var _e,Re,We,qe;switch(Ge){case 1:Oe<128&&(He=Oe);break;case 2:_e=ce[Ae+1],(_e&192)==128&&(qe=(Oe&31)<<6|_e&63,qe>127&&(He=qe));break;case 3:_e=ce[Ae+1],Re=ce[Ae+2],(_e&192)==128&&(Re&192)==128&&(qe=(Oe&15)<<12|(_e&63)<<6|Re&63,qe>2047&&(qe<55296||qe>57343)&&(He=qe));break;case 4:_e=ce[Ae+1],Re=ce[Ae+2],We=ce[Ae+3],(_e&192)==128&&(Re&192)==128&&(We&192)==128&&(qe=(Oe&15)<<18|(_e&63)<<12|(Re&63)<<6|We&63,qe>65535&&qe<1114112&&(He=qe))}}He===null?(He=65533,Ge=1):He>65535&&(He-=65536,ke.push(He>>>10&1023|55296),He=56320|He&1023),ke.push(He),Ae+=Ge}return j(ke)}var B=4096;function j(ce){var me=ce.length;if(me<=B)return String.fromCharCode.apply(String,ce);for(var xe="",ke=0;ke<me;)xe+=String.fromCharCode.apply(String,ce.slice(ke,ke+=B));return xe}function Z(ce,me,xe){var ke="";xe=Math.min(ce.length,xe);for(var Ae=me;Ae<xe;++Ae)ke+=String.fromCharCode(ce[Ae]&127);return ke}function ee(ce,me,xe){var ke="";xe=Math.min(ce.length,xe);for(var Ae=me;Ae<xe;++Ae)ke+=String.fromCharCode(ce[Ae]);return ke}function q(ce,me,xe){var ke=ce.length;(!me||me<0)&&(me=0),(!xe||xe<0||xe>ke)&&(xe=ke);for(var Ae="",Oe=me;Oe<xe;++Oe)Ae+=te(ce[Oe]);return Ae}function W(ce,me,xe){for(var ke=ce.slice(me,xe),Ae="",Oe=0;Oe<ke.length;Oe+=2)Ae+=String.fromCharCode(ke[Oe]+ke[Oe+1]*256);return Ae}l.prototype.slice=function(me,xe){var ke=this.length;me=~~me,xe=xe===void 0?ke:~~xe,me<0?(me+=ke,me<0&&(me=0)):me>ke&&(me=ke),xe<0?(xe+=ke,xe<0&&(xe=0)):xe>ke&&(xe=ke),xe<me&&(xe=me);var Ae=this.subarray(me,xe);return Ae.__proto__=l.prototype,Ae};function J(ce,me,xe){if(ce%1!=0||ce<0)throw new RangeError("offset is not uint");if(ce+me>xe)throw new RangeError("Trying to access beyond buffer length")}l.prototype.readUIntLE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=this[me],Oe=1,He=0;++He<xe&&(Oe*=256);)Ae+=this[me+He]*Oe;return Ae},l.prototype.readUIntBE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=this[me+--xe],Oe=1;xe>0&&(Oe*=256);)Ae+=this[me+--xe]*Oe;return Ae},l.prototype.readUInt8=function(me,xe){return me=me>>>0,xe||J(me,1,this.length),this[me]},l.prototype.readUInt16LE=function(me,xe){return me=me>>>0,xe||J(me,2,this.length),this[me]|this[me+1]<<8},l.prototype.readUInt16BE=function(me,xe){return me=me>>>0,xe||J(me,2,this.length),this[me]<<8|this[me+1]},l.prototype.readUInt32LE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),(this[me]|this[me+1]<<8|this[me+2]<<16)+this[me+3]*16777216},l.prototype.readUInt32BE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),this[me]*16777216+(this[me+1]<<16|this[me+2]<<8|this[me+3])},l.prototype.readIntLE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=this[me],Oe=1,He=0;++He<xe&&(Oe*=256);)Ae+=this[me+He]*Oe;return Oe*=128,Ae>=Oe&&(Ae-=Math.pow(2,8*xe)),Ae},l.prototype.readIntBE=function(me,xe,ke){me=me>>>0,xe=xe>>>0,ke||J(me,xe,this.length);for(var Ae=xe,Oe=1,He=this[me+--Ae];Ae>0&&(Oe*=256);)He+=this[me+--Ae]*Oe;return Oe*=128,He>=Oe&&(He-=Math.pow(2,8*xe)),He},l.prototype.readInt8=function(me,xe){return me=me>>>0,xe||J(me,1,this.length),this[me]&128?(255-this[me]+1)*-1:this[me]},l.prototype.readInt16LE=function(me,xe){me=me>>>0,xe||J(me,2,this.length);var ke=this[me]|this[me+1]<<8;return ke&32768?ke|4294901760:ke},l.prototype.readInt16BE=function(me,xe){me=me>>>0,xe||J(me,2,this.length);var ke=this[me+1]|this[me]<<8;return ke&32768?ke|4294901760:ke},l.prototype.readInt32LE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),this[me]|this[me+1]<<8|this[me+2]<<16|this[me+3]<<24},l.prototype.readInt32BE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),this[me]<<24|this[me+1]<<16|this[me+2]<<8|this[me+3]},l.prototype.readFloatLE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),a.read(this,me,!0,23,4)},l.prototype.readFloatBE=function(me,xe){return me=me>>>0,xe||J(me,4,this.length),a.read(this,me,!1,23,4)},l.prototype.readDoubleLE=function(me,xe){return me=me>>>0,xe||J(me,8,this.length),a.read(this,me,!0,52,8)},l.prototype.readDoubleBE=function(me,xe){return me=me>>>0,xe||J(me,8,this.length),a.read(this,me,!1,52,8)};function le(ce,me,xe,ke,Ae,Oe){if(!l.isBuffer(ce))throw new TypeError('"buffer" argument must be a Buffer instance');if(me>Ae||me<Oe)throw new RangeError('"value" argument is out of bounds');if(xe+ke>ce.length)throw new RangeError("Index out of range")}l.prototype.writeUIntLE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,ke=ke>>>0,!Ae){var Oe=Math.pow(2,8*ke)-1;le(this,me,xe,ke,Oe,0)}var He=1,Ge=0;for(this[xe]=me&255;++Ge<ke&&(He*=256);)this[xe+Ge]=me/He&255;return xe+ke},l.prototype.writeUIntBE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,ke=ke>>>0,!Ae){var Oe=Math.pow(2,8*ke)-1;le(this,me,xe,ke,Oe,0)}var He=ke-1,Ge=1;for(this[xe+He]=me&255;--He>=0&&(Ge*=256);)this[xe+He]=me/Ge&255;return xe+ke},l.prototype.writeUInt8=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,1,255,0),this[xe]=me&255,xe+1},l.prototype.writeUInt16LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,65535,0),this[xe]=me&255,this[xe+1]=me>>>8,xe+2},l.prototype.writeUInt16BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,65535,0),this[xe]=me>>>8,this[xe+1]=me&255,xe+2},l.prototype.writeUInt32LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,4294967295,0),this[xe+3]=me>>>24,this[xe+2]=me>>>16,this[xe+1]=me>>>8,this[xe]=me&255,xe+4},l.prototype.writeUInt32BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,4294967295,0),this[xe]=me>>>24,this[xe+1]=me>>>16,this[xe+2]=me>>>8,this[xe+3]=me&255,xe+4},l.prototype.writeIntLE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,!Ae){var Oe=Math.pow(2,8*ke-1);le(this,me,xe,ke,Oe-1,-Oe)}var He=0,Ge=1,_e=0;for(this[xe]=me&255;++He<ke&&(Ge*=256);)me<0&&_e===0&&this[xe+He-1]!==0&&(_e=1),this[xe+He]=(me/Ge>>0)-_e&255;return xe+ke},l.prototype.writeIntBE=function(me,xe,ke,Ae){if(me=+me,xe=xe>>>0,!Ae){var Oe=Math.pow(2,8*ke-1);le(this,me,xe,ke,Oe-1,-Oe)}var He=ke-1,Ge=1,_e=0;for(this[xe+He]=me&255;--He>=0&&(Ge*=256);)me<0&&_e===0&&this[xe+He+1]!==0&&(_e=1),this[xe+He]=(me/Ge>>0)-_e&255;return xe+ke},l.prototype.writeInt8=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,1,127,-128),me<0&&(me=255+me+1),this[xe]=me&255,xe+1},l.prototype.writeInt16LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,32767,-32768),this[xe]=me&255,this[xe+1]=me>>>8,xe+2},l.prototype.writeInt16BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,2,32767,-32768),this[xe]=me>>>8,this[xe+1]=me&255,xe+2},l.prototype.writeInt32LE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,2147483647,-2147483648),this[xe]=me&255,this[xe+1]=me>>>8,this[xe+2]=me>>>16,this[xe+3]=me>>>24,xe+4},l.prototype.writeInt32BE=function(me,xe,ke){return me=+me,xe=xe>>>0,ke||le(this,me,xe,4,2147483647,-2147483648),me<0&&(me=4294967295+me+1),this[xe]=me>>>24,this[xe+1]=me>>>16,this[xe+2]=me>>>8,this[xe+3]=me&255,xe+4};function fe(ce,me,xe,ke,Ae,Oe){if(xe+ke>ce.length)throw new RangeError("Index out of range");if(xe<0)throw new RangeError("Index out of range")}function se(ce,me,xe,ke,Ae){return me=+me,xe=xe>>>0,Ae||fe(ce,me,xe,4),a.write(ce,me,xe,ke,23,4),xe+4}l.prototype.writeFloatLE=function(me,xe,ke){return se(this,me,xe,!0,ke)},l.prototype.writeFloatBE=function(me,xe,ke){return se(this,me,xe,!1,ke)};function H(ce,me,xe,ke,Ae){return me=+me,xe=xe>>>0,Ae||fe(ce,me,xe,8),a.write(ce,me,xe,ke,52,8),xe+8}l.prototype.writeDoubleLE=function(me,xe,ke){return H(this,me,xe,!0,ke)},l.prototype.writeDoubleBE=function(me,xe,ke){return H(this,me,xe,!1,ke)},l.prototype.copy=function(me,xe,ke,Ae){if(!l.isBuffer(me))throw new TypeError("argument should be a Buffer");if(ke||(ke=0),!Ae&&Ae!==0&&(Ae=this.length),xe>=me.length&&(xe=me.length),xe||(xe=0),Ae>0&&Ae<ke&&(Ae=ke),Ae===ke||me.length===0||this.length===0)return 0;if(xe<0)throw new RangeError("targetStart out of bounds");if(ke<0||ke>=this.length)throw new RangeError("Index out of range");if(Ae<0)throw new RangeError("sourceEnd out of bounds");Ae>this.length&&(Ae=this.length),me.length-xe<Ae-ke&&(Ae=me.length-xe+ke);var Oe=Ae-ke;if(this===me&&typeof Uint8Array.prototype.copyWithin=="function")this.copyWithin(xe,ke,Ae);else if(this===me&&ke<xe&&xe<Ae)for(var He=Oe-1;He>=0;--He)me[He+xe]=this[He+ke];else Uint8Array.prototype.set.call(me,this.subarray(ke,Ae),xe);return Oe},l.prototype.fill=function(me,xe,ke,Ae){if(typeof me=="string"){if(typeof xe=="string"?(Ae=xe,xe=0,ke=this.length):typeof ke=="string"&&(Ae=ke,ke=this.length),Ae!==void 0&&typeof Ae!="string")throw new TypeError("encoding must be a string");if(typeof Ae=="string"&&!l.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);if(me.length===1){var Oe=me.charCodeAt(0);(Ae==="utf8"&&Oe<128||Ae==="latin1")&&(me=Oe)}}else typeof me=="number"&&(me=me&255);if(xe<0||this.length<xe||this.length<ke)throw new RangeError("Out of range index");if(ke<=xe)return this;xe=xe>>>0,ke=ke===void 0?this.length:ke>>>0,me||(me=0);var He;if(typeof me=="number")for(He=xe;He<ke;++He)this[He]=me;else{var Ge=l.isBuffer(me)?me:l.from(me,Ae),_e=Ge.length;if(_e===0)throw new TypeError('The value "'+me+'" is invalid for argument "value"');for(He=0;He<ke-xe;++He)this[He+xe]=Ge[He%_e]}return this};var Y=/[^+/0-9A-Za-z-_]/g;function ne(ce){if(ce=ce.split("=")[0],ce=ce.trim().replace(Y,""),ce.length<2)return"";for(;ce.length%4!=0;)ce=ce+"=";return ce}function te(ce){return ce<16?"0"+ce.toString(16):ce.toString(16)}function K(ce,me){me=me||1/0;for(var xe,ke=ce.length,Ae=null,Oe=[],He=0;He<ke;++He){if(xe=ce.charCodeAt(He),xe>55295&&xe<57344){if(!Ae){if(xe>56319){(me-=3)>-1&&Oe.push(239,191,189);continue}else if(He+1===ke){(me-=3)>-1&&Oe.push(239,191,189);continue}Ae=xe;continue}if(xe<56320){(me-=3)>-1&&Oe.push(239,191,189),Ae=xe;continue}xe=(Ae-55296<<10|xe-56320)+65536}else Ae&&(me-=3)>-1&&Oe.push(239,191,189);if(Ae=null,xe<128){if((me-=1)<0)break;Oe.push(xe)}else if(xe<2048){if((me-=2)<0)break;Oe.push(xe>>6|192,xe&63|128)}else if(xe<65536){if((me-=3)<0)break;Oe.push(xe>>12|224,xe>>6&63|128,xe&63|128)}else if(xe<1114112){if((me-=4)<0)break;Oe.push(xe>>18|240,xe>>12&63|128,xe>>6&63|128,xe&63|128)}else throw new Error("Invalid code point")}return Oe}function $(ce){for(var me=[],xe=0;xe<ce.length;++xe)me.push(ce.charCodeAt(xe)&255);return me}function ae(ce,me){for(var xe,ke,Ae,Oe=[],He=0;He<ce.length&&!((me-=2)<0);++He)xe=ce.charCodeAt(He),ke=xe>>8,Ae=xe%256,Oe.push(Ae),Oe.push(ke);return Oe}function ie(ce){return i.toByteArray(ne(ce))}function oe(ce,me,xe,ke){for(var Ae=0;Ae<ke&&!(Ae+xe>=me.length||Ae>=ce.length);++Ae)me[Ae+xe]=ce[Ae];return Ae}function ue(ce,me){return ce instanceof me||ce!=null&&ce.constructor!=null&&ce.constructor.name!=null&&ce.constructor.name===me.name}function ye(ce){return ce!==ce}}).call(this)}).call(this,s("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(s,m,x){x.read=function(t,i,a,r,n){var f,l,o=n*8-r-1,c=(1<<o)-1,h=c>>1,d=-7,p=a?n-1:0,y=a?-1:1,g=t[i+p];for(p+=y,f=g&(1<<-d)-1,g>>=-d,d+=o;d>0;f=f*256+t[i+p],p+=y,d-=8);for(l=f&(1<<-d)-1,f>>=-d,d+=r;d>0;l=l*256+t[i+p],p+=y,d-=8);if(f===0)f=1-h;else{if(f===c)return l?NaN:(g?-1:1)*(1/0);l=l+Math.pow(2,r),f=f-h}return(g?-1:1)*l*Math.pow(2,f-r)},x.write=function(t,i,a,r,n,f){var l,o,c,h=f*8-n-1,d=(1<<h)-1,p=d>>1,y=n===23?Math.pow(2,-24)-Math.pow(2,-77):0,g=r?0:f-1,A=r?1:-1,b=i<0||i===0&&1/i<0?1:0;for(i=Math.abs(i),isNaN(i)||i===1/0?(o=isNaN(i)?1:0,l=d):(l=Math.floor(Math.log(i)/Math.LN2),i*(c=Math.pow(2,-l))<1&&(l--,c*=2),l+p>=1?i+=y/c:i+=y*Math.pow(2,1-p),i*c>=2&&(l++,c/=2),l+p>=d?(o=0,l=d):l+p>=1?(o=(i*c-1)*Math.pow(2,n),l=l+p):(o=i*Math.pow(2,p-1)*Math.pow(2,n),l=0));n>=8;t[a+g]=o&255,g+=A,o/=256,n-=8);for(l=l<<n|o,h+=n;h>0;t[a+g]=l&255,g+=A,l/=256,h-=8);t[a+g-A]|=b*128}},{}],5:[function(s,m,x){var t=m.exports={},i,a;function r(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?i=setTimeout:i=r}catch{i=r}try{typeof clearTimeout=="function"?a=clearTimeout:a=n}catch{a=n}})();function f(b){if(i===setTimeout)return setTimeout(b,0);if((i===r||!i)&&setTimeout)return i=setTimeout,setTimeout(b,0);try{return i(b,0)}catch{try{return i.call(null,b,0)}catch{return i.call(this,b,0)}}}function l(b){if(a===clearTimeout)return clearTimeout(b);if((a===n||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(b);try{return a(b)}catch{try{return a.call(null,b)}catch{return a.call(this,b)}}}var o=[],c=!1,h,d=-1;function p(){!c||!h||(c=!1,h.length?o=h.concat(o):d=-1,o.length&&y())}function y(){if(!c){var b=f(p);c=!0;for(var M=o.length;M;){for(h=o,o=[];++d<M;)h&&h[d].run();d=-1,M=o.length}h=null,c=!1,l(b)}}t.nextTick=function(b){var M=new Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)M[_-1]=arguments[_];o.push(new g(b,M)),o.length===1&&!c&&f(y)};function g(b,M){this.fun=b,this.array=M}g.prototype.run=function(){this.fun.apply(null,this.array)},t.title="browser",t.browser=!0,t.env={},t.argv=[],t.version="",t.versions={};function A(){}t.on=A,t.addListener=A,t.once=A,t.off=A,t.removeListener=A,t.removeAllListeners=A,t.emit=A,t.prependListener=A,t.prependOnceListener=A,t.listeners=function(b){return[]},t.binding=function(b){throw new Error("process.binding is not supported")},t.cwd=function(){return"/"},t.chdir=function(b){throw new Error("process.chdir is not supported")},t.umask=function(){return 0}},{}],6:[function(s,m,x){m.exports={alpha_shape:s("alpha-shape"),convex_hull:s("convex-hull"),delaunay_triangulate:s("delaunay-triangulate"),gl_cone3d:s("gl-cone3d"),gl_error3d:s("gl-error3d"),gl_heatmap2d:s("gl-heatmap2d"),gl_line3d:s("gl-line3d"),gl_mesh3d:s("gl-mesh3d"),gl_plot2d:s("gl-plot2d"),gl_plot3d:s("gl-plot3d"),gl_pointcloud2d:s("gl-pointcloud2d"),gl_scatter3d:s("gl-scatter3d"),gl_select_box:s("gl-select-box"),gl_spikes2d:s("gl-spikes2d"),gl_streamtube3d:s("gl-streamtube3d"),gl_surface3d:s("gl-surface3d"),ndarray:s("ndarray"),ndarray_linear_interpolate:s("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(s,m,x){m.exports=f;var t=s("turntable-camera-controller"),i=s("orbit-camera-controller"),a=s("matrix-camera-controller");function r(l,o){this._controllerNames=Object.keys(l),this._controllerList=this._controllerNames.map(function(c){return l[c]}),this._mode=o,this._active=l[o],this._active||(this._mode="turntable",this._active=l.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var n=r.prototype;n.flush=function(l){for(var o=this._controllerList,c=0;c<o.length;++c)o[c].flush(l)},n.idle=function(l){for(var o=this._controllerList,c=0;c<o.length;++c)o[c].idle(l)},n.lookAt=function(l,o,c,h){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].lookAt(l,o,c,h)},n.rotate=function(l,o,c,h){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].rotate(l,o,c,h)},n.pan=function(l,o,c,h){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].pan(l,o,c,h)},n.translate=function(l,o,c,h){for(var d=this._controllerList,p=0;p<d.length;++p)d[p].translate(l,o,c,h)},n.setMatrix=function(l,o){for(var c=this._controllerList,h=0;h<c.length;++h)c[h].setMatrix(l,o)},n.setDistanceLimits=function(l,o){for(var c=this._controllerList,h=0;h<c.length;++h)c[h].setDistanceLimits(l,o)},n.setDistance=function(l,o){for(var c=this._controllerList,h=0;h<c.length;++h)c[h].setDistance(l,o)},n.recalcMatrix=function(l){this._active.recalcMatrix(l)},n.getDistance=function(l){return this._active.getDistance(l)},n.getDistanceLimits=function(l){return this._active.getDistanceLimits(l)},n.lastT=function(){return this._active.lastT()},n.setMode=function(l){if(l!==this._mode){var o=this._controllerNames.indexOf(l);if(!(o<0)){var c=this._active,h=this._controllerList[o],d=Math.max(c.lastT(),h.lastT());c.recalcMatrix(d),h.setMatrix(d,c.computedMatrix),this._active=h,this._mode=l,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},n.getMode=function(){return this._mode};function f(l){l=l||{};var o=l.eye||[0,0,1],c=l.center||[0,0,0],h=l.up||[0,1,0],d=l.distanceLimits||[0,1/0],p=l.mode||"turntable",y=t(),g=i(),A=a();return y.setDistanceLimits(d[0],d[1]),y.lookAt(0,o,c,h),g.setDistanceLimits(d[0],d[1]),g.lookAt(0,o,c,h),A.setDistanceLimits(d[0],d[1]),A.lookAt(0,o,c,h),new r({turntable:y,orbit:g,matrix:A},p)}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(s,m,x){var t=typeof WeakMap=="undefined"?s("weak-map"):WeakMap,i=s("gl-buffer"),a=s("gl-vao"),r=new t;function n(f){var l=r.get(f),o=l&&(l._triangleBuffer.handle||l._triangleBuffer.buffer);if(!o||!f.isBuffer(o)){var c=i(f,new Float32Array([-1,-1,-1,4,4,-1]));l=a(f,[{buffer:c,type:f.FLOAT,size:2}]),l._triangleBuffer=c,r.set(f,l)}l.bind(),f.drawArrays(f.TRIANGLES,0,3),l.unbind()}m.exports=n},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(s,m,x){var t=s("pad-left");m.exports=i;function i(a,r,n){r=typeof r=="number"?r:1,n=n||": ";var f=a.split(/\r?\n/),l=String(f.length+r-1).length;return f.map(function(o,c){var h=c+r,d=String(h).length,p=t(h,l-d);return p+n+o}).join(`
`)}},{"pad-left":264}],10:[function(s,m,x){m.exports=a;var t=s("robust-orientation");function i(r,n){for(var f=new Array(n+1),l=0;l<r.length;++l)f[l]=r[l];for(var l=0;l<=r.length;++l){for(var o=r.length;o<=n;++o){for(var c=new Array(n),h=0;h<n;++h)c[h]=Math.pow(o+1-l,h);f[o]=c}var d=t.apply(void 0,f);if(d)return!0}return!1}function a(r){var n=r.length;if(n===0)return[];if(n===1)return[0];for(var f=r[0].length,l=[r[0]],o=[0],c=1;c<n;++c){if(l.push(r[c]),!i(l,f)){l.pop();continue}if(o.push(c),o.length===f+1)return o}return o}},{"robust-orientation":284}],11:[function(s,m,x){m.exports=a;var t=s("delaunay-triangulate"),i=s("circumradius");function a(r,n){return t(n).filter(function(f){for(var l=new Array(f.length),o=0;o<f.length;++o)l[o]=n[f[o]];return i(l)*r<1})}},{circumradius:49,"delaunay-triangulate":63}],12:[function(s,m,x){m.exports=a;var t=s("alpha-complex"),i=s("simplicial-complex-boundary");function a(r,n){return i(t(r,n))}},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(s,m,x){m.exports=function(i){return atob(i)}},{}],14:[function(s,m,x){m.exports=a;var t=s("robust-linear-solve");function i(r){for(var n=0,f=0;f<r.length;++f)n+=r[f];return n}function a(r,n){for(var f=n.length,l=new Array(f+1),o=0;o<f;++o){for(var c=new Array(f+1),h=0;h<=f;++h)c[h]=r[h][o];l[o]=c}l[f]=new Array(f+1);for(var o=0;o<=f;++o)l[f][o]=1;for(var d=new Array(f+1),o=0;o<f;++o)d[o]=n[o];d[f]=1;var p=t(l,d),y=i(p[f+1]);y===0&&(y=1);for(var g=new Array(f+1),o=0;o<=f;++o)g[o]=i(p[o])/y;return g}},{"robust-linear-solve":283}],15:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[1]).add(r[0].mul(a[1])),a[1].mul(r[1]))}},{"./lib/rationalize":25}],16:[function(s,m,x){m.exports=t;function t(i,a){return i[0].mul(a[1]).cmp(a[0].mul(i[1]))}},{}],17:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[1]),a[1].mul(r[0]))}},{"./lib/rationalize":25}],18:[function(s,m,x){var t=s("./is-rat"),i=s("./lib/is-bn"),a=s("./lib/num-to-bn"),r=s("./lib/str-to-bn"),n=s("./lib/rationalize"),f=s("./div");m.exports=l;function l(o,c){if(t(o))return c?f(o,l(c)):[o[0].clone(),o[1].clone()];var h=0,d,p;if(i(o))d=o.clone();else if(typeof o=="string")d=r(o);else{if(o===0)return[a(0),a(1)];if(o===Math.floor(o))d=a(o);else{for(;o!==Math.floor(o);)o=o*Math.pow(2,256),h-=256;d=a(o)}}if(t(c))d.mul(c[1]),p=c[0].clone();else if(i(c))p=c.clone();else if(typeof c=="string")p=r(c);else if(!c)p=a(1);else if(c===Math.floor(c))p=a(c);else{for(;c!==Math.floor(c);)c=c*Math.pow(2,256),h+=256;p=a(c)}return h>0?d=d.ushln(h):h<0&&(p=p.ushln(-h)),n(d,p)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(s,m,x){var t=s("./lib/is-bn");m.exports=i;function i(a){return Array.isArray(a)&&a.length===2&&t(a[0])&&t(a[1])}},{"./lib/is-bn":23}],20:[function(s,m,x){var t=s("bn.js");m.exports=i;function i(a){return a.cmp(new t(0))}},{"bn.js":33}],21:[function(s,m,x){var t=s("./bn-sign");m.exports=i;function i(a){var r=a.length,n=a.words,f=0;if(r===1)f=n[0];else if(r===2)f=n[0]+n[1]*67108864;else for(var l=0;l<r;l++){var o=n[l];f+=o*Math.pow(67108864,l)}return t(a)*f}},{"./bn-sign":20}],22:[function(s,m,x){var t=s("double-bits"),i=s("bit-twiddle").countTrailingZeros;m.exports=a;function a(r){var n=i(t.lo(r));if(n<32)return n;var f=i(t.hi(r));return f>20?52:f+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(s,m,x){s("bn.js"),m.exports=t;function t(i){return i&&typeof i=="object"&&Boolean(i.words)}},{"bn.js":33}],24:[function(s,m,x){var t=s("bn.js"),i=s("double-bits");m.exports=a;function a(r){var n=i.exponent(r);return n<52?new t(r):new t(r*Math.pow(2,52-n)).ushln(n-52)}},{"bn.js":33,"double-bits":64}],25:[function(s,m,x){var t=s("./num-to-bn"),i=s("./bn-sign");m.exports=a;function a(r,n){var f=i(r),l=i(n);if(f===0)return[t(0),t(1)];if(l===0)return[t(0),t(0)];l<0&&(r=r.neg(),n=n.neg());var o=r.gcd(n);return o.cmpn(1)?[r.div(o),n.div(o)]:[r,n]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(s,m,x){var t=s("bn.js");m.exports=i;function i(a){return new t(a)}},{"bn.js":33}],27:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[0]),a[1].mul(r[1]))}},{"./lib/rationalize":25}],28:[function(s,m,x){var t=s("./lib/bn-sign");m.exports=i;function i(a){return t(a[0])*t(a[1])}},{"./lib/bn-sign":20}],29:[function(s,m,x){var t=s("./lib/rationalize");m.exports=i;function i(a,r){return t(a[0].mul(r[1]).sub(a[1].mul(r[0])),a[1].mul(r[1]))}},{"./lib/rationalize":25}],30:[function(s,m,x){var t=s("./lib/bn-to-num"),i=s("./lib/ctz");m.exports=a;function a(r){var n=r[0],f=r[1];if(n.cmpn(0)===0)return 0;var l=n.abs().divmod(f.abs()),o=l.div,c=t(o),h=l.mod,d=n.negative!==f.negative?-1:1;if(h.cmpn(0)===0)return d*c;if(c){var p=i(c)+4,y=t(h.ushln(p).divRound(f));return d*(c+y*Math.pow(2,-p))}else{var g=f.bitLength()-h.bitLength()+53,y=t(h.ushln(g).divRound(f));return g<1023?d*y*Math.pow(2,-g):(y*=Math.pow(2,-1023),d*y*Math.pow(2,1023-g))}}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(s,m,x){function t(l,o,c,h,d){for(var p=d+1;h<=d;){var y=h+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A>=0?(p=y,d=y-1):h=y+1}return p}function i(l,o,c,h,d){for(var p=d+1;h<=d;){var y=h+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A>0?(p=y,d=y-1):h=y+1}return p}function a(l,o,c,h,d){for(var p=h-1;h<=d;){var y=h+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A<0?(p=y,h=y+1):d=y-1}return p}function r(l,o,c,h,d){for(var p=h-1;h<=d;){var y=h+d>>>1,g=l[y],A=c!==void 0?c(g,o):g-o;A<=0?(p=y,h=y+1):d=y-1}return p}function n(l,o,c,h,d){for(;h<=d;){var p=h+d>>>1,y=l[p],g=c!==void 0?c(y,o):y-o;if(g===0)return p;g<=0?h=p+1:d=p-1}return-1}function f(l,o,c,h,d,p){return typeof c=="function"?p(l,o,c,h===void 0?0:h|0,d===void 0?l.length-1:d|0):p(l,o,void 0,c===void 0?0:c|0,h===void 0?l.length-1:h|0)}m.exports={ge:function(l,o,c,h,d){return f(l,o,c,h,d,t)},gt:function(l,o,c,h,d){return f(l,o,c,h,d,i)},lt:function(l,o,c,h,d){return f(l,o,c,h,d,a)},le:function(l,o,c,h,d){return f(l,o,c,h,d,r)},eq:function(l,o,c,h,d){return f(l,o,c,h,d,n)}}},{}],32:[function(s,m,x){var t=32;x.INT_BITS=t,x.INT_MAX=2147483647,x.INT_MIN=-1<<t-1,x.sign=function(r){return(r>0)-(r<0)},x.abs=function(r){var n=r>>t-1;return(r^n)-n},x.min=function(r,n){return n^(r^n)&-(r<n)},x.max=function(r,n){return r^(r^n)&-(r<n)},x.isPow2=function(r){return!(r&r-1)&&!!r},x.log2=function(r){var n,f;return n=(r>65535)<<4,r>>>=n,f=(r>255)<<3,r>>>=f,n|=f,f=(r>15)<<2,r>>>=f,n|=f,f=(r>3)<<1,r>>>=f,n|=f,n|r>>1},x.log10=function(r){return r>=1e9?9:r>=1e8?8:r>=1e7?7:r>=1e6?6:r>=1e5?5:r>=1e4?4:r>=1e3?3:r>=100?2:r>=10?1:0},x.popCount=function(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),(r+(r>>>4)&252645135)*16843009>>>24};function i(r){var n=32;return r&=-r,r&&n--,r&65535&&(n-=16),r&16711935&&(n-=8),r&252645135&&(n-=4),r&858993459&&(n-=2),r&1431655765&&(n-=1),n}x.countTrailingZeros=i,x.nextPow2=function(r){return r+=r===0,--r,r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r+1},x.prevPow2=function(r){return r|=r>>>1,r|=r>>>2,r|=r>>>4,r|=r>>>8,r|=r>>>16,r-(r>>>1)},x.parity=function(r){return r^=r>>>16,r^=r>>>8,r^=r>>>4,r&=15,27030>>>r&1};var a=new Array(256);(function(r){for(var n=0;n<256;++n){var f=n,l=n,o=7;for(f>>>=1;f;f>>>=1)l<<=1,l|=f&1,--o;r[n]=l<<o&255}})(a),x.reverse=function(r){return a[r&255]<<24|a[r>>>8&255]<<16|a[r>>>16&255]<<8|a[r>>>24&255]},x.interleave2=function(r,n){return r&=65535,r=(r|r<<8)&16711935,r=(r|r<<4)&252645135,r=(r|r<<2)&858993459,r=(r|r<<1)&1431655765,n&=65535,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,r|n<<1},x.deinterleave2=function(r,n){return r=r>>>n&1431655765,r=(r|r>>>1)&858993459,r=(r|r>>>2)&252645135,r=(r|r>>>4)&16711935,r=(r|r>>>16)&65535,r<<16>>16},x.interleave3=function(r,n,f){return r&=1023,r=(r|r<<16)&4278190335,r=(r|r<<8)&251719695,r=(r|r<<4)&3272356035,r=(r|r<<2)&1227133513,n&=1023,n=(n|n<<16)&4278190335,n=(n|n<<8)&251719695,n=(n|n<<4)&3272356035,n=(n|n<<2)&1227133513,r|=n<<1,f&=1023,f=(f|f<<16)&4278190335,f=(f|f<<8)&251719695,f=(f|f<<4)&3272356035,f=(f|f<<2)&1227133513,r|f<<2},x.deinterleave3=function(r,n){return r=r>>>n&1227133513,r=(r|r>>>2)&3272356035,r=(r|r>>>4)&251719695,r=(r|r>>>8)&4278190335,r=(r|r>>>16)&1023,r<<22>>22},x.nextCombination=function(r){var n=r|r-1;return n+1|(~n&-~n)-1>>>i(r)+1}},{}],33:[function(s,m,x){(function(t,i){function a(F,I){if(!F)throw new Error(I||"Assertion failed")}function r(F,I){F.super_=I;var D=function(){};D.prototype=I.prototype,F.prototype=new D,F.prototype.constructor=F}function n(F,I,D){if(n.isBN(F))return F;this.negative=0,this.words=null,this.length=0,this.red=null,F!==null&&((I==="le"||I==="be")&&(D=I,I=10),this._init(F||0,I||10,D||"be"))}typeof t=="object"?t.exports=n:i.BN=n,n.BN=n,n.wordSize=26;var f;try{typeof window!="undefined"&&typeof window.Buffer!="undefined"?f=window.Buffer:f=s("buffer").Buffer}catch{}n.isBN=function(I){return I instanceof n?!0:I!==null&&typeof I=="object"&&I.constructor.wordSize===n.wordSize&&Array.isArray(I.words)},n.max=function(I,D){return I.cmp(D)>0?I:D},n.min=function(I,D){return I.cmp(D)<0?I:D},n.prototype._init=function(I,D,U){if(typeof I=="number")return this._initNumber(I,D,U);if(typeof I=="object")return this._initArray(I,D,U);D==="hex"&&(D=16),a(D===(D|0)&&D>=2&&D<=36),I=I.toString().replace(/\s+/g,"");var B=0;I[0]==="-"&&(B++,this.negative=1),B<I.length&&(D===16?this._parseHex(I,B,U):(this._parseBase(I,D,B),U==="le"&&this._initArray(this.toArray(),D,U)))},n.prototype._initNumber=function(I,D,U){I<0&&(this.negative=1,I=-I),I<67108864?(this.words=[I&67108863],this.length=1):I<4503599627370496?(this.words=[I&67108863,I/67108864&67108863],this.length=2):(a(I<9007199254740992),this.words=[I&67108863,I/67108864&67108863,1],this.length=3),U==="le"&&this._initArray(this.toArray(),D,U)},n.prototype._initArray=function(I,D,U){if(a(typeof I.length=="number"),I.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(I.length/3),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var j,Z,ee=0;if(U==="be")for(B=I.length-1,j=0;B>=0;B-=3)Z=I[B]|I[B-1]<<8|I[B-2]<<16,this.words[j]|=Z<<ee&67108863,this.words[j+1]=Z>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,j++);else if(U==="le")for(B=0,j=0;B<I.length;B+=3)Z=I[B]|I[B+1]<<8|I[B+2]<<16,this.words[j]|=Z<<ee&67108863,this.words[j+1]=Z>>>26-ee&67108863,ee+=24,ee>=26&&(ee-=26,j++);return this.strip()};function l(F,I){var D=F.charCodeAt(I);return D>=65&&D<=70?D-55:D>=97&&D<=102?D-87:D-48&15}function o(F,I,D){var U=l(F,D);return D-1>=I&&(U|=l(F,D-1)<<4),U}n.prototype._parseHex=function(I,D,U){this.length=Math.ceil((I.length-D)/6),this.words=new Array(this.length);for(var B=0;B<this.length;B++)this.words[B]=0;var j=0,Z=0,ee;if(U==="be")for(B=I.length-1;B>=D;B-=2)ee=o(I,D,B)<<j,this.words[Z]|=ee&67108863,j>=18?(j-=18,Z+=1,this.words[Z]|=ee>>>26):j+=8;else{var q=I.length-D;for(B=q%2==0?D+1:D;B<I.length;B+=2)ee=o(I,D,B)<<j,this.words[Z]|=ee&67108863,j>=18?(j-=18,Z+=1,this.words[Z]|=ee>>>26):j+=8}this.strip()};function c(F,I,D,U){for(var B=0,j=Math.min(F.length,D),Z=I;Z<j;Z++){var ee=F.charCodeAt(Z)-48;B*=U,ee>=49?B+=ee-49+10:ee>=17?B+=ee-17+10:B+=ee}return B}n.prototype._parseBase=function(I,D,U){this.words=[0],this.length=1;for(var B=0,j=1;j<=67108863;j*=D)B++;B--,j=j/D|0;for(var Z=I.length-U,ee=Z%B,q=Math.min(Z,Z-ee)+U,W=0,J=U;J<q;J+=B)W=c(I,J,J+B,D),this.imuln(j),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W);if(ee!==0){var le=1;for(W=c(I,J,I.length,D),J=0;J<ee;J++)le*=D;this.imuln(le),this.words[0]+W<67108864?this.words[0]+=W:this._iaddn(W)}this.strip()},n.prototype.copy=function(I){I.words=new Array(this.length);for(var D=0;D<this.length;D++)I.words[D]=this.words[D];I.length=this.length,I.negative=this.negative,I.red=this.red},n.prototype.clone=function(){var I=new n(null);return this.copy(I),I},n.prototype._expand=function(I){for(;this.length<I;)this.words[this.length++]=0;return this},n.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},n.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},n.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];n.prototype.toString=function(I,D){I=I||10,D=D|0||1;var U;if(I===16||I==="hex"){U="";for(var B=0,j=0,Z=0;Z<this.length;Z++){var ee=this.words[Z],q=((ee<<B|j)&16777215).toString(16);j=ee>>>24-B&16777215,j!==0||Z!==this.length-1?U=h[6-q.length]+q+U:U=q+U,B+=2,B>=26&&(B-=26,Z--)}for(j!==0&&(U=j.toString(16)+U);U.length%D!=0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}if(I===(I|0)&&I>=2&&I<=36){var W=d[I],J=p[I];U="";var le=this.clone();for(le.negative=0;!le.isZero();){var fe=le.modn(J).toString(I);le=le.idivn(J),le.isZero()?U=fe+U:U=h[W-fe.length]+fe+U}for(this.isZero()&&(U="0"+U);U.length%D!=0;)U="0"+U;return this.negative!==0&&(U="-"+U),U}a(!1,"Base should be between 2 and 36")},n.prototype.toNumber=function(){var I=this.words[0];return this.length===2?I+=this.words[1]*67108864:this.length===3&&this.words[2]===1?I+=4503599627370496+this.words[1]*67108864:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-I:I},n.prototype.toJSON=function(){return this.toString(16)},n.prototype.toBuffer=function(I,D){return a(typeof f!="undefined"),this.toArrayLike(f,I,D)},n.prototype.toArray=function(I,D){return this.toArrayLike(Array,I,D)},n.prototype.toArrayLike=function(I,D,U){var B=this.byteLength(),j=U||Math.max(1,B);a(B<=j,"byte array longer than desired length"),a(j>0,"Requested array length <= 0"),this.strip();var Z=D==="le",ee=new I(j),q,W,J=this.clone();if(Z){for(W=0;!J.isZero();W++)q=J.andln(255),J.iushrn(8),ee[W]=q;for(;W<j;W++)ee[W]=0}else{for(W=0;W<j-B;W++)ee[W]=0;for(W=0;!J.isZero();W++)q=J.andln(255),J.iushrn(8),ee[j-W-1]=q}return ee},Math.clz32?n.prototype._countBits=function(I){return 32-Math.clz32(I)}:n.prototype._countBits=function(I){var D=I,U=0;return D>=4096&&(U+=13,D>>>=13),D>=64&&(U+=7,D>>>=7),D>=8&&(U+=4,D>>>=4),D>=2&&(U+=2,D>>>=2),U+D},n.prototype._zeroBits=function(I){if(I===0)return 26;var D=I,U=0;return(D&8191)==0&&(U+=13,D>>>=13),(D&127)==0&&(U+=7,D>>>=7),(D&15)==0&&(U+=4,D>>>=4),(D&3)==0&&(U+=2,D>>>=2),(D&1)==0&&U++,U},n.prototype.bitLength=function(){var I=this.words[this.length-1],D=this._countBits(I);return(this.length-1)*26+D};function y(F){for(var I=new Array(F.bitLength()),D=0;D<I.length;D++){var U=D/26|0,B=D%26;I[D]=(F.words[U]&1<<B)>>>B}return I}n.prototype.zeroBits=function(){if(this.isZero())return 0;for(var I=0,D=0;D<this.length;D++){var U=this._zeroBits(this.words[D]);if(I+=U,U!==26)break}return I},n.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},n.prototype.toTwos=function(I){return this.negative!==0?this.abs().inotn(I).iaddn(1):this.clone()},n.prototype.fromTwos=function(I){return this.testn(I-1)?this.notn(I).iaddn(1).ineg():this.clone()},n.prototype.isNeg=function(){return this.negative!==0},n.prototype.neg=function(){return this.clone().ineg()},n.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},n.prototype.iuor=function(I){for(;this.length<I.length;)this.words[this.length++]=0;for(var D=0;D<I.length;D++)this.words[D]=this.words[D]|I.words[D];return this.strip()},n.prototype.ior=function(I){return a((this.negative|I.negative)==0),this.iuor(I)},n.prototype.or=function(I){return this.length>I.length?this.clone().ior(I):I.clone().ior(this)},n.prototype.uor=function(I){return this.length>I.length?this.clone().iuor(I):I.clone().iuor(this)},n.prototype.iuand=function(I){var D;this.length>I.length?D=I:D=this;for(var U=0;U<D.length;U++)this.words[U]=this.words[U]&I.words[U];return this.length=D.length,this.strip()},n.prototype.iand=function(I){return a((this.negative|I.negative)==0),this.iuand(I)},n.prototype.and=function(I){return this.length>I.length?this.clone().iand(I):I.clone().iand(this)},n.prototype.uand=function(I){return this.length>I.length?this.clone().iuand(I):I.clone().iuand(this)},n.prototype.iuxor=function(I){var D,U;this.length>I.length?(D=this,U=I):(D=I,U=this);for(var B=0;B<U.length;B++)this.words[B]=D.words[B]^U.words[B];if(this!==D)for(;B<D.length;B++)this.words[B]=D.words[B];return this.length=D.length,this.strip()},n.prototype.ixor=function(I){return a((this.negative|I.negative)==0),this.iuxor(I)},n.prototype.xor=function(I){return this.length>I.length?this.clone().ixor(I):I.clone().ixor(this)},n.prototype.uxor=function(I){return this.length>I.length?this.clone().iuxor(I):I.clone().iuxor(this)},n.prototype.inotn=function(I){a(typeof I=="number"&&I>=0);var D=Math.ceil(I/26)|0,U=I%26;this._expand(D),U>0&&D--;for(var B=0;B<D;B++)this.words[B]=~this.words[B]&67108863;return U>0&&(this.words[B]=~this.words[B]&67108863>>26-U),this.strip()},n.prototype.notn=function(I){return this.clone().inotn(I)},n.prototype.setn=function(I,D){a(typeof I=="number"&&I>=0);var U=I/26|0,B=I%26;return this._expand(U+1),D?this.words[U]=this.words[U]|1<<B:this.words[U]=this.words[U]&~(1<<B),this.strip()},n.prototype.iadd=function(I){var D;if(this.negative!==0&&I.negative===0)return this.negative=0,D=this.isub(I),this.negative^=1,this._normSign();if(this.negative===0&&I.negative!==0)return I.negative=0,D=this.isub(I),I.negative=1,D._normSign();var U,B;this.length>I.length?(U=this,B=I):(U=I,B=this);for(var j=0,Z=0;Z<B.length;Z++)D=(U.words[Z]|0)+(B.words[Z]|0)+j,this.words[Z]=D&67108863,j=D>>>26;for(;j!==0&&Z<U.length;Z++)D=(U.words[Z]|0)+j,this.words[Z]=D&67108863,j=D>>>26;if(this.length=U.length,j!==0)this.words[this.length]=j,this.length++;else if(U!==this)for(;Z<U.length;Z++)this.words[Z]=U.words[Z];return this},n.prototype.add=function(I){var D;return I.negative!==0&&this.negative===0?(I.negative=0,D=this.sub(I),I.negative^=1,D):I.negative===0&&this.negative!==0?(this.negative=0,D=I.sub(this),this.negative=1,D):this.length>I.length?this.clone().iadd(I):I.clone().iadd(this)},n.prototype.isub=function(I){if(I.negative!==0){I.negative=0;var D=this.iadd(I);return I.negative=1,D._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(I),this.negative=1,this._normSign();var U=this.cmp(I);if(U===0)return this.negative=0,this.length=1,this.words[0]=0,this;var B,j;U>0?(B=this,j=I):(B=I,j=this);for(var Z=0,ee=0;ee<j.length;ee++)D=(B.words[ee]|0)-(j.words[ee]|0)+Z,Z=D>>26,this.words[ee]=D&67108863;for(;Z!==0&&ee<B.length;ee++)D=(B.words[ee]|0)+Z,Z=D>>26,this.words[ee]=D&67108863;if(Z===0&&ee<B.length&&B!==this)for(;ee<B.length;ee++)this.words[ee]=B.words[ee];return this.length=Math.max(this.length,ee),B!==this&&(this.negative=1),this.strip()},n.prototype.sub=function(I){return this.clone().isub(I)};function g(F,I,D){D.negative=I.negative^F.negative;var U=F.length+I.length|0;D.length=U,U=U-1|0;var B=F.words[0]|0,j=I.words[0]|0,Z=B*j,ee=Z&67108863,q=Z/67108864|0;D.words[0]=ee;for(var W=1;W<U;W++){for(var J=q>>>26,le=q&67108863,fe=Math.min(W,I.length-1),se=Math.max(0,W-F.length+1);se<=fe;se++){var H=W-se|0;B=F.words[H]|0,j=I.words[se]|0,Z=B*j+le,J+=Z/67108864|0,le=Z&67108863}D.words[W]=le|0,q=J|0}return q!==0?D.words[W]=q|0:D.length--,D.strip()}var A=function(I,D,U){var B=I.words,j=D.words,Z=U.words,ee=0,q,W,J,le=B[0]|0,fe=le&8191,se=le>>>13,H=B[1]|0,Y=H&8191,ne=H>>>13,te=B[2]|0,K=te&8191,$=te>>>13,ae=B[3]|0,ie=ae&8191,oe=ae>>>13,ue=B[4]|0,ye=ue&8191,ce=ue>>>13,me=B[5]|0,xe=me&8191,ke=me>>>13,Ae=B[6]|0,Oe=Ae&8191,He=Ae>>>13,Ge=B[7]|0,_e=Ge&8191,Re=Ge>>>13,We=B[8]|0,qe=We&8191,Ue=We>>>13,Ie=B[9]|0,Ve=Ie&8191,dt=Ie>>>13,Rt=j[0]|0,Gt=Rt&8191,kt=Rt>>>13,zt=j[1]|0,Bt=zt&8191,Lt=zt>>>13,Mt=j[2]|0,it=Mt&8191,ht=Mt>>>13,Qe=j[3]|0,Ce=Qe&8191,Xe=Qe>>>13,rt=j[4]|0,ut=rt&8191,Pt=rt>>>13,St=j[5]|0,Nt=St&8191,jt=St>>>13,Ot=j[6]|0,Kt=Ot&8191,Je=Ot>>>13,gt=j[7]|0,Et=gt&8191,rr=gt>>>13,vr=j[8]|0,or=vr&8191,dr=vr>>>13,Lr=j[9]|0,kr=Lr&8191,tr=Lr>>>13;U.negative=I.negative^D.negative,U.length=19,q=Math.imul(fe,Gt),W=Math.imul(fe,kt),W=W+Math.imul(se,Gt)|0,J=Math.imul(se,kt);var Or=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(Or>>>26)|0,Or&=67108863,q=Math.imul(Y,Gt),W=Math.imul(Y,kt),W=W+Math.imul(ne,Gt)|0,J=Math.imul(ne,kt),q=q+Math.imul(fe,Bt)|0,W=W+Math.imul(fe,Lt)|0,W=W+Math.imul(se,Bt)|0,J=J+Math.imul(se,Lt)|0;var et=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(et>>>26)|0,et&=67108863,q=Math.imul(K,Gt),W=Math.imul(K,kt),W=W+Math.imul($,Gt)|0,J=Math.imul($,kt),q=q+Math.imul(Y,Bt)|0,W=W+Math.imul(Y,Lt)|0,W=W+Math.imul(ne,Bt)|0,J=J+Math.imul(ne,Lt)|0,q=q+Math.imul(fe,it)|0,W=W+Math.imul(fe,ht)|0,W=W+Math.imul(se,it)|0,J=J+Math.imul(se,ht)|0;var we=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(we>>>26)|0,we&=67108863,q=Math.imul(ie,Gt),W=Math.imul(ie,kt),W=W+Math.imul(oe,Gt)|0,J=Math.imul(oe,kt),q=q+Math.imul(K,Bt)|0,W=W+Math.imul(K,Lt)|0,W=W+Math.imul($,Bt)|0,J=J+Math.imul($,Lt)|0,q=q+Math.imul(Y,it)|0,W=W+Math.imul(Y,ht)|0,W=W+Math.imul(ne,it)|0,J=J+Math.imul(ne,ht)|0,q=q+Math.imul(fe,Ce)|0,W=W+Math.imul(fe,Xe)|0,W=W+Math.imul(se,Ce)|0,J=J+Math.imul(se,Xe)|0;var Se=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(Se>>>26)|0,Se&=67108863,q=Math.imul(ye,Gt),W=Math.imul(ye,kt),W=W+Math.imul(ce,Gt)|0,J=Math.imul(ce,kt),q=q+Math.imul(ie,Bt)|0,W=W+Math.imul(ie,Lt)|0,W=W+Math.imul(oe,Bt)|0,J=J+Math.imul(oe,Lt)|0,q=q+Math.imul(K,it)|0,W=W+Math.imul(K,ht)|0,W=W+Math.imul($,it)|0,J=J+Math.imul($,ht)|0,q=q+Math.imul(Y,Ce)|0,W=W+Math.imul(Y,Xe)|0,W=W+Math.imul(ne,Ce)|0,J=J+Math.imul(ne,Xe)|0,q=q+Math.imul(fe,ut)|0,W=W+Math.imul(fe,Pt)|0,W=W+Math.imul(se,ut)|0,J=J+Math.imul(se,Pt)|0;var De=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(De>>>26)|0,De&=67108863,q=Math.imul(xe,Gt),W=Math.imul(xe,kt),W=W+Math.imul(ke,Gt)|0,J=Math.imul(ke,kt),q=q+Math.imul(ye,Bt)|0,W=W+Math.imul(ye,Lt)|0,W=W+Math.imul(ce,Bt)|0,J=J+Math.imul(ce,Lt)|0,q=q+Math.imul(ie,it)|0,W=W+Math.imul(ie,ht)|0,W=W+Math.imul(oe,it)|0,J=J+Math.imul(oe,ht)|0,q=q+Math.imul(K,Ce)|0,W=W+Math.imul(K,Xe)|0,W=W+Math.imul($,Ce)|0,J=J+Math.imul($,Xe)|0,q=q+Math.imul(Y,ut)|0,W=W+Math.imul(Y,Pt)|0,W=W+Math.imul(ne,ut)|0,J=J+Math.imul(ne,Pt)|0,q=q+Math.imul(fe,Nt)|0,W=W+Math.imul(fe,jt)|0,W=W+Math.imul(se,Nt)|0,J=J+Math.imul(se,jt)|0;var je=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(je>>>26)|0,je&=67108863,q=Math.imul(Oe,Gt),W=Math.imul(Oe,kt),W=W+Math.imul(He,Gt)|0,J=Math.imul(He,kt),q=q+Math.imul(xe,Bt)|0,W=W+Math.imul(xe,Lt)|0,W=W+Math.imul(ke,Bt)|0,J=J+Math.imul(ke,Lt)|0,q=q+Math.imul(ye,it)|0,W=W+Math.imul(ye,ht)|0,W=W+Math.imul(ce,it)|0,J=J+Math.imul(ce,ht)|0,q=q+Math.imul(ie,Ce)|0,W=W+Math.imul(ie,Xe)|0,W=W+Math.imul(oe,Ce)|0,J=J+Math.imul(oe,Xe)|0,q=q+Math.imul(K,ut)|0,W=W+Math.imul(K,Pt)|0,W=W+Math.imul($,ut)|0,J=J+Math.imul($,Pt)|0,q=q+Math.imul(Y,Nt)|0,W=W+Math.imul(Y,jt)|0,W=W+Math.imul(ne,Nt)|0,J=J+Math.imul(ne,jt)|0,q=q+Math.imul(fe,Kt)|0,W=W+Math.imul(fe,Je)|0,W=W+Math.imul(se,Kt)|0,J=J+Math.imul(se,Je)|0;var $e=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+($e>>>26)|0,$e&=67108863,q=Math.imul(_e,Gt),W=Math.imul(_e,kt),W=W+Math.imul(Re,Gt)|0,J=Math.imul(Re,kt),q=q+Math.imul(Oe,Bt)|0,W=W+Math.imul(Oe,Lt)|0,W=W+Math.imul(He,Bt)|0,J=J+Math.imul(He,Lt)|0,q=q+Math.imul(xe,it)|0,W=W+Math.imul(xe,ht)|0,W=W+Math.imul(ke,it)|0,J=J+Math.imul(ke,ht)|0,q=q+Math.imul(ye,Ce)|0,W=W+Math.imul(ye,Xe)|0,W=W+Math.imul(ce,Ce)|0,J=J+Math.imul(ce,Xe)|0,q=q+Math.imul(ie,ut)|0,W=W+Math.imul(ie,Pt)|0,W=W+Math.imul(oe,ut)|0,J=J+Math.imul(oe,Pt)|0,q=q+Math.imul(K,Nt)|0,W=W+Math.imul(K,jt)|0,W=W+Math.imul($,Nt)|0,J=J+Math.imul($,jt)|0,q=q+Math.imul(Y,Kt)|0,W=W+Math.imul(Y,Je)|0,W=W+Math.imul(ne,Kt)|0,J=J+Math.imul(ne,Je)|0,q=q+Math.imul(fe,Et)|0,W=W+Math.imul(fe,rr)|0,W=W+Math.imul(se,Et)|0,J=J+Math.imul(se,rr)|0;var ot=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(ot>>>26)|0,ot&=67108863,q=Math.imul(qe,Gt),W=Math.imul(qe,kt),W=W+Math.imul(Ue,Gt)|0,J=Math.imul(Ue,kt),q=q+Math.imul(_e,Bt)|0,W=W+Math.imul(_e,Lt)|0,W=W+Math.imul(Re,Bt)|0,J=J+Math.imul(Re,Lt)|0,q=q+Math.imul(Oe,it)|0,W=W+Math.imul(Oe,ht)|0,W=W+Math.imul(He,it)|0,J=J+Math.imul(He,ht)|0,q=q+Math.imul(xe,Ce)|0,W=W+Math.imul(xe,Xe)|0,W=W+Math.imul(ke,Ce)|0,J=J+Math.imul(ke,Xe)|0,q=q+Math.imul(ye,ut)|0,W=W+Math.imul(ye,Pt)|0,W=W+Math.imul(ce,ut)|0,J=J+Math.imul(ce,Pt)|0,q=q+Math.imul(ie,Nt)|0,W=W+Math.imul(ie,jt)|0,W=W+Math.imul(oe,Nt)|0,J=J+Math.imul(oe,jt)|0,q=q+Math.imul(K,Kt)|0,W=W+Math.imul(K,Je)|0,W=W+Math.imul($,Kt)|0,J=J+Math.imul($,Je)|0,q=q+Math.imul(Y,Et)|0,W=W+Math.imul(Y,rr)|0,W=W+Math.imul(ne,Et)|0,J=J+Math.imul(ne,rr)|0,q=q+Math.imul(fe,or)|0,W=W+Math.imul(fe,dr)|0,W=W+Math.imul(se,or)|0,J=J+Math.imul(se,dr)|0;var st=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(st>>>26)|0,st&=67108863,q=Math.imul(Ve,Gt),W=Math.imul(Ve,kt),W=W+Math.imul(dt,Gt)|0,J=Math.imul(dt,kt),q=q+Math.imul(qe,Bt)|0,W=W+Math.imul(qe,Lt)|0,W=W+Math.imul(Ue,Bt)|0,J=J+Math.imul(Ue,Lt)|0,q=q+Math.imul(_e,it)|0,W=W+Math.imul(_e,ht)|0,W=W+Math.imul(Re,it)|0,J=J+Math.imul(Re,ht)|0,q=q+Math.imul(Oe,Ce)|0,W=W+Math.imul(Oe,Xe)|0,W=W+Math.imul(He,Ce)|0,J=J+Math.imul(He,Xe)|0,q=q+Math.imul(xe,ut)|0,W=W+Math.imul(xe,Pt)|0,W=W+Math.imul(ke,ut)|0,J=J+Math.imul(ke,Pt)|0,q=q+Math.imul(ye,Nt)|0,W=W+Math.imul(ye,jt)|0,W=W+Math.imul(ce,Nt)|0,J=J+Math.imul(ce,jt)|0,q=q+Math.imul(ie,Kt)|0,W=W+Math.imul(ie,Je)|0,W=W+Math.imul(oe,Kt)|0,J=J+Math.imul(oe,Je)|0,q=q+Math.imul(K,Et)|0,W=W+Math.imul(K,rr)|0,W=W+Math.imul($,Et)|0,J=J+Math.imul($,rr)|0,q=q+Math.imul(Y,or)|0,W=W+Math.imul(Y,dr)|0,W=W+Math.imul(ne,or)|0,J=J+Math.imul(ne,dr)|0,q=q+Math.imul(fe,kr)|0,W=W+Math.imul(fe,tr)|0,W=W+Math.imul(se,kr)|0,J=J+Math.imul(se,tr)|0;var pt=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(pt>>>26)|0,pt&=67108863,q=Math.imul(Ve,Bt),W=Math.imul(Ve,Lt),W=W+Math.imul(dt,Bt)|0,J=Math.imul(dt,Lt),q=q+Math.imul(qe,it)|0,W=W+Math.imul(qe,ht)|0,W=W+Math.imul(Ue,it)|0,J=J+Math.imul(Ue,ht)|0,q=q+Math.imul(_e,Ce)|0,W=W+Math.imul(_e,Xe)|0,W=W+Math.imul(Re,Ce)|0,J=J+Math.imul(Re,Xe)|0,q=q+Math.imul(Oe,ut)|0,W=W+Math.imul(Oe,Pt)|0,W=W+Math.imul(He,ut)|0,J=J+Math.imul(He,Pt)|0,q=q+Math.imul(xe,Nt)|0,W=W+Math.imul(xe,jt)|0,W=W+Math.imul(ke,Nt)|0,J=J+Math.imul(ke,jt)|0,q=q+Math.imul(ye,Kt)|0,W=W+Math.imul(ye,Je)|0,W=W+Math.imul(ce,Kt)|0,J=J+Math.imul(ce,Je)|0,q=q+Math.imul(ie,Et)|0,W=W+Math.imul(ie,rr)|0,W=W+Math.imul(oe,Et)|0,J=J+Math.imul(oe,rr)|0,q=q+Math.imul(K,or)|0,W=W+Math.imul(K,dr)|0,W=W+Math.imul($,or)|0,J=J+Math.imul($,dr)|0,q=q+Math.imul(Y,kr)|0,W=W+Math.imul(Y,tr)|0,W=W+Math.imul(ne,kr)|0,J=J+Math.imul(ne,tr)|0;var wt=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(wt>>>26)|0,wt&=67108863,q=Math.imul(Ve,it),W=Math.imul(Ve,ht),W=W+Math.imul(dt,it)|0,J=Math.imul(dt,ht),q=q+Math.imul(qe,Ce)|0,W=W+Math.imul(qe,Xe)|0,W=W+Math.imul(Ue,Ce)|0,J=J+Math.imul(Ue,Xe)|0,q=q+Math.imul(_e,ut)|0,W=W+Math.imul(_e,Pt)|0,W=W+Math.imul(Re,ut)|0,J=J+Math.imul(Re,Pt)|0,q=q+Math.imul(Oe,Nt)|0,W=W+Math.imul(Oe,jt)|0,W=W+Math.imul(He,Nt)|0,J=J+Math.imul(He,jt)|0,q=q+Math.imul(xe,Kt)|0,W=W+Math.imul(xe,Je)|0,W=W+Math.imul(ke,Kt)|0,J=J+Math.imul(ke,Je)|0,q=q+Math.imul(ye,Et)|0,W=W+Math.imul(ye,rr)|0,W=W+Math.imul(ce,Et)|0,J=J+Math.imul(ce,rr)|0,q=q+Math.imul(ie,or)|0,W=W+Math.imul(ie,dr)|0,W=W+Math.imul(oe,or)|0,J=J+Math.imul(oe,dr)|0,q=q+Math.imul(K,kr)|0,W=W+Math.imul(K,tr)|0,W=W+Math.imul($,kr)|0,J=J+Math.imul($,tr)|0;var Wt=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,q=Math.imul(Ve,Ce),W=Math.imul(Ve,Xe),W=W+Math.imul(dt,Ce)|0,J=Math.imul(dt,Xe),q=q+Math.imul(qe,ut)|0,W=W+Math.imul(qe,Pt)|0,W=W+Math.imul(Ue,ut)|0,J=J+Math.imul(Ue,Pt)|0,q=q+Math.imul(_e,Nt)|0,W=W+Math.imul(_e,jt)|0,W=W+Math.imul(Re,Nt)|0,J=J+Math.imul(Re,jt)|0,q=q+Math.imul(Oe,Kt)|0,W=W+Math.imul(Oe,Je)|0,W=W+Math.imul(He,Kt)|0,J=J+Math.imul(He,Je)|0,q=q+Math.imul(xe,Et)|0,W=W+Math.imul(xe,rr)|0,W=W+Math.imul(ke,Et)|0,J=J+Math.imul(ke,rr)|0,q=q+Math.imul(ye,or)|0,W=W+Math.imul(ye,dr)|0,W=W+Math.imul(ce,or)|0,J=J+Math.imul(ce,dr)|0,q=q+Math.imul(ie,kr)|0,W=W+Math.imul(ie,tr)|0,W=W+Math.imul(oe,kr)|0,J=J+Math.imul(oe,tr)|0;var yr=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(yr>>>26)|0,yr&=67108863,q=Math.imul(Ve,ut),W=Math.imul(Ve,Pt),W=W+Math.imul(dt,ut)|0,J=Math.imul(dt,Pt),q=q+Math.imul(qe,Nt)|0,W=W+Math.imul(qe,jt)|0,W=W+Math.imul(Ue,Nt)|0,J=J+Math.imul(Ue,jt)|0,q=q+Math.imul(_e,Kt)|0,W=W+Math.imul(_e,Je)|0,W=W+Math.imul(Re,Kt)|0,J=J+Math.imul(Re,Je)|0,q=q+Math.imul(Oe,Et)|0,W=W+Math.imul(Oe,rr)|0,W=W+Math.imul(He,Et)|0,J=J+Math.imul(He,rr)|0,q=q+Math.imul(xe,or)|0,W=W+Math.imul(xe,dr)|0,W=W+Math.imul(ke,or)|0,J=J+Math.imul(ke,dr)|0,q=q+Math.imul(ye,kr)|0,W=W+Math.imul(ye,tr)|0,W=W+Math.imul(ce,kr)|0,J=J+Math.imul(ce,tr)|0;var xr=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(xr>>>26)|0,xr&=67108863,q=Math.imul(Ve,Nt),W=Math.imul(Ve,jt),W=W+Math.imul(dt,Nt)|0,J=Math.imul(dt,jt),q=q+Math.imul(qe,Kt)|0,W=W+Math.imul(qe,Je)|0,W=W+Math.imul(Ue,Kt)|0,J=J+Math.imul(Ue,Je)|0,q=q+Math.imul(_e,Et)|0,W=W+Math.imul(_e,rr)|0,W=W+Math.imul(Re,Et)|0,J=J+Math.imul(Re,rr)|0,q=q+Math.imul(Oe,or)|0,W=W+Math.imul(Oe,dr)|0,W=W+Math.imul(He,or)|0,J=J+Math.imul(He,dr)|0,q=q+Math.imul(xe,kr)|0,W=W+Math.imul(xe,tr)|0,W=W+Math.imul(ke,kr)|0,J=J+Math.imul(ke,tr)|0;var Tr=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(Tr>>>26)|0,Tr&=67108863,q=Math.imul(Ve,Kt),W=Math.imul(Ve,Je),W=W+Math.imul(dt,Kt)|0,J=Math.imul(dt,Je),q=q+Math.imul(qe,Et)|0,W=W+Math.imul(qe,rr)|0,W=W+Math.imul(Ue,Et)|0,J=J+Math.imul(Ue,rr)|0,q=q+Math.imul(_e,or)|0,W=W+Math.imul(_e,dr)|0,W=W+Math.imul(Re,or)|0,J=J+Math.imul(Re,dr)|0,q=q+Math.imul(Oe,kr)|0,W=W+Math.imul(Oe,tr)|0,W=W+Math.imul(He,kr)|0,J=J+Math.imul(He,tr)|0;var mr=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(mr>>>26)|0,mr&=67108863,q=Math.imul(Ve,Et),W=Math.imul(Ve,rr),W=W+Math.imul(dt,Et)|0,J=Math.imul(dt,rr),q=q+Math.imul(qe,or)|0,W=W+Math.imul(qe,dr)|0,W=W+Math.imul(Ue,or)|0,J=J+Math.imul(Ue,dr)|0,q=q+Math.imul(_e,kr)|0,W=W+Math.imul(_e,tr)|0,W=W+Math.imul(Re,kr)|0,J=J+Math.imul(Re,tr)|0;var Rr=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(Rr>>>26)|0,Rr&=67108863,q=Math.imul(Ve,or),W=Math.imul(Ve,dr),W=W+Math.imul(dt,or)|0,J=Math.imul(dt,dr),q=q+Math.imul(qe,kr)|0,W=W+Math.imul(qe,tr)|0,W=W+Math.imul(Ue,kr)|0,J=J+Math.imul(Ue,tr)|0;var tn=(ee+q|0)+((W&8191)<<13)|0;ee=(J+(W>>>13)|0)+(tn>>>26)|0,tn&=67108863,q=Math.imul(Ve,kr),W=Math.imul(Ve,tr),W=W+Math.imul(dt,kr)|0,J=Math.imul(dt,tr);var wr=(ee+q|0)+((W&8191)<<13)|0;return ee=(J+(W>>>13)|0)+(wr>>>26)|0,wr&=67108863,Z[0]=Or,Z[1]=et,Z[2]=we,Z[3]=Se,Z[4]=De,Z[5]=je,Z[6]=$e,Z[7]=ot,Z[8]=st,Z[9]=pt,Z[10]=wt,Z[11]=Wt,Z[12]=yr,Z[13]=xr,Z[14]=Tr,Z[15]=mr,Z[16]=Rr,Z[17]=tn,Z[18]=wr,ee!==0&&(Z[19]=ee,U.length++),U};Math.imul||(A=g);function b(F,I,D){D.negative=I.negative^F.negative,D.length=F.length+I.length;for(var U=0,B=0,j=0;j<D.length-1;j++){var Z=B;B=0;for(var ee=U&67108863,q=Math.min(j,I.length-1),W=Math.max(0,j-F.length+1);W<=q;W++){var J=j-W,le=F.words[J]|0,fe=I.words[W]|0,se=le*fe,H=se&67108863;Z=Z+(se/67108864|0)|0,H=H+ee|0,ee=H&67108863,Z=Z+(H>>>26)|0,B+=Z>>>26,Z&=67108863}D.words[j]=ee,U=Z,Z=B}return U!==0?D.words[j]=U:D.length--,D.strip()}function M(F,I,D){var U=new _;return U.mulp(F,I,D)}n.prototype.mulTo=function(I,D){var U,B=this.length+I.length;return this.length===10&&I.length===10?U=A(this,I,D):B<63?U=g(this,I,D):B<1024?U=b(this,I,D):U=M(this,I,D),U};function _(F,I){this.x=F,this.y=I}_.prototype.makeRBT=function(I){for(var D=new Array(I),U=n.prototype._countBits(I)-1,B=0;B<I;B++)D[B]=this.revBin(B,U,I);return D},_.prototype.revBin=function(I,D,U){if(I===0||I===U-1)return I;for(var B=0,j=0;j<D;j++)B|=(I&1)<<D-j-1,I>>=1;return B},_.prototype.permute=function(I,D,U,B,j,Z){for(var ee=0;ee<Z;ee++)B[ee]=D[I[ee]],j[ee]=U[I[ee]]},_.prototype.transform=function(I,D,U,B,j,Z){this.permute(Z,I,D,U,B,j);for(var ee=1;ee<j;ee<<=1)for(var q=ee<<1,W=Math.cos(2*Math.PI/q),J=Math.sin(2*Math.PI/q),le=0;le<j;le+=q)for(var fe=W,se=J,H=0;H<ee;H++){var Y=U[le+H],ne=B[le+H],te=U[le+H+ee],K=B[le+H+ee],$=fe*te-se*K;K=fe*K+se*te,te=$,U[le+H]=Y+te,B[le+H]=ne+K,U[le+H+ee]=Y-te,B[le+H+ee]=ne-K,H!==q&&($=W*fe-J*se,se=W*se+J*fe,fe=$)}},_.prototype.guessLen13b=function(I,D){var U=Math.max(D,I)|1,B=U&1,j=0;for(U=U/2|0;U;U=U>>>1)j++;return 1<<j+1+B},_.prototype.conjugate=function(I,D,U){if(!(U<=1))for(var B=0;B<U/2;B++){var j=I[B];I[B]=I[U-B-1],I[U-B-1]=j,j=D[B],D[B]=-D[U-B-1],D[U-B-1]=-j}},_.prototype.normalize13b=function(I,D){for(var U=0,B=0;B<D/2;B++){var j=Math.round(I[2*B+1]/D)*8192+Math.round(I[2*B]/D)+U;I[B]=j&67108863,j<67108864?U=0:U=j/67108864|0}return I},_.prototype.convert13b=function(I,D,U,B){for(var j=0,Z=0;Z<D;Z++)j=j+(I[Z]|0),U[2*Z]=j&8191,j=j>>>13,U[2*Z+1]=j&8191,j=j>>>13;for(Z=2*D;Z<B;++Z)U[Z]=0;a(j===0),a((j&~8191)==0)},_.prototype.stub=function(I){for(var D=new Array(I),U=0;U<I;U++)D[U]=0;return D},_.prototype.mulp=function(I,D,U){var B=2*this.guessLen13b(I.length,D.length),j=this.makeRBT(B),Z=this.stub(B),ee=new Array(B),q=new Array(B),W=new Array(B),J=new Array(B),le=new Array(B),fe=new Array(B),se=U.words;se.length=B,this.convert13b(I.words,I.length,ee,B),this.convert13b(D.words,D.length,J,B),this.transform(ee,Z,q,W,B,j),this.transform(J,Z,le,fe,B,j);for(var H=0;H<B;H++){var Y=q[H]*le[H]-W[H]*fe[H];W[H]=q[H]*fe[H]+W[H]*le[H],q[H]=Y}return this.conjugate(q,W,B),this.transform(q,W,se,Z,B,j),this.conjugate(se,Z,B),this.normalize13b(se,B),U.negative=I.negative^D.negative,U.length=I.length+D.length,U.strip()},n.prototype.mul=function(I){var D=new n(null);return D.words=new Array(this.length+I.length),this.mulTo(I,D)},n.prototype.mulf=function(I){var D=new n(null);return D.words=new Array(this.length+I.length),M(this,I,D)},n.prototype.imul=function(I){return this.clone().mulTo(I,this)},n.prototype.imuln=function(I){a(typeof I=="number"),a(I<67108864);for(var D=0,U=0;U<this.length;U++){var B=(this.words[U]|0)*I,j=(B&67108863)+(D&67108863);D>>=26,D+=B/67108864|0,D+=j>>>26,this.words[U]=j&67108863}return D!==0&&(this.words[U]=D,this.length++),this},n.prototype.muln=function(I){return this.clone().imuln(I)},n.prototype.sqr=function(){return this.mul(this)},n.prototype.isqr=function(){return this.imul(this.clone())},n.prototype.pow=function(I){var D=y(I);if(D.length===0)return new n(1);for(var U=this,B=0;B<D.length&&D[B]===0;B++,U=U.sqr());if(++B<D.length)for(var j=U.sqr();B<D.length;B++,j=j.sqr())D[B]!==0&&(U=U.mul(j));return U},n.prototype.iushln=function(I){a(typeof I=="number"&&I>=0);var D=I%26,U=(I-D)/26,B=67108863>>>26-D<<26-D,j;if(D!==0){var Z=0;for(j=0;j<this.length;j++){var ee=this.words[j]&B,q=(this.words[j]|0)-ee<<D;this.words[j]=q|Z,Z=ee>>>26-D}Z&&(this.words[j]=Z,this.length++)}if(U!==0){for(j=this.length-1;j>=0;j--)this.words[j+U]=this.words[j];for(j=0;j<U;j++)this.words[j]=0;this.length+=U}return this.strip()},n.prototype.ishln=function(I){return a(this.negative===0),this.iushln(I)},n.prototype.iushrn=function(I,D,U){a(typeof I=="number"&&I>=0);var B;D?B=(D-D%26)/26:B=0;var j=I%26,Z=Math.min((I-j)/26,this.length),ee=67108863^67108863>>>j<<j,q=U;if(B-=Z,B=Math.max(0,B),q){for(var W=0;W<Z;W++)q.words[W]=this.words[W];q.length=Z}if(Z!==0)if(this.length>Z)for(this.length-=Z,W=0;W<this.length;W++)this.words[W]=this.words[W+Z];else this.words[0]=0,this.length=1;var J=0;for(W=this.length-1;W>=0&&(J!==0||W>=B);W--){var le=this.words[W]|0;this.words[W]=J<<26-j|le>>>j,J=le&ee}return q&&J!==0&&(q.words[q.length++]=J),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},n.prototype.ishrn=function(I,D,U){return a(this.negative===0),this.iushrn(I,D,U)},n.prototype.shln=function(I){return this.clone().ishln(I)},n.prototype.ushln=function(I){return this.clone().iushln(I)},n.prototype.shrn=function(I){return this.clone().ishrn(I)},n.prototype.ushrn=function(I){return this.clone().iushrn(I)},n.prototype.testn=function(I){a(typeof I=="number"&&I>=0);var D=I%26,U=(I-D)/26,B=1<<D;if(this.length<=U)return!1;var j=this.words[U];return!!(j&B)},n.prototype.imaskn=function(I){a(typeof I=="number"&&I>=0);var D=I%26,U=(I-D)/26;if(a(this.negative===0,"imaskn works only with positive numbers"),this.length<=U)return this;if(D!==0&&U++,this.length=Math.min(U,this.length),D!==0){var B=67108863^67108863>>>D<<D;this.words[this.length-1]&=B}return this.strip()},n.prototype.maskn=function(I){return this.clone().imaskn(I)},n.prototype.iaddn=function(I){return a(typeof I=="number"),a(I<67108864),I<0?this.isubn(-I):this.negative!==0?this.length===1&&(this.words[0]|0)<I?(this.words[0]=I-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(I),this.negative=1,this):this._iaddn(I)},n.prototype._iaddn=function(I){this.words[0]+=I;for(var D=0;D<this.length&&this.words[D]>=67108864;D++)this.words[D]-=67108864,D===this.length-1?this.words[D+1]=1:this.words[D+1]++;return this.length=Math.max(this.length,D+1),this},n.prototype.isubn=function(I){if(a(typeof I=="number"),a(I<67108864),I<0)return this.iaddn(-I);if(this.negative!==0)return this.negative=0,this.iaddn(I),this.negative=1,this;if(this.words[0]-=I,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var D=0;D<this.length&&this.words[D]<0;D++)this.words[D]+=67108864,this.words[D+1]-=1;return this.strip()},n.prototype.addn=function(I){return this.clone().iaddn(I)},n.prototype.subn=function(I){return this.clone().isubn(I)},n.prototype.iabs=function(){return this.negative=0,this},n.prototype.abs=function(){return this.clone().iabs()},n.prototype._ishlnsubmul=function(I,D,U){var B=I.length+U,j;this._expand(B);var Z,ee=0;for(j=0;j<I.length;j++){Z=(this.words[j+U]|0)+ee;var q=(I.words[j]|0)*D;Z-=q&67108863,ee=(Z>>26)-(q/67108864|0),this.words[j+U]=Z&67108863}for(;j<this.length-U;j++)Z=(this.words[j+U]|0)+ee,ee=Z>>26,this.words[j+U]=Z&67108863;if(ee===0)return this.strip();for(a(ee===-1),ee=0,j=0;j<this.length;j++)Z=-(this.words[j]|0)+ee,ee=Z>>26,this.words[j]=Z&67108863;return this.negative=1,this.strip()},n.prototype._wordDiv=function(I,D){var U=this.length-I.length,B=this.clone(),j=I,Z=j.words[j.length-1]|0,ee=this._countBits(Z);U=26-ee,U!==0&&(j=j.ushln(U),B.iushln(U),Z=j.words[j.length-1]|0);var q=B.length-j.length,W;if(D!=="mod"){W=new n(null),W.length=q+1,W.words=new Array(W.length);for(var J=0;J<W.length;J++)W.words[J]=0}var le=B.clone()._ishlnsubmul(j,1,q);le.negative===0&&(B=le,W&&(W.words[q]=1));for(var fe=q-1;fe>=0;fe--){var se=(B.words[j.length+fe]|0)*67108864+(B.words[j.length+fe-1]|0);for(se=Math.min(se/Z|0,67108863),B._ishlnsubmul(j,se,fe);B.negative!==0;)se--,B.negative=0,B._ishlnsubmul(j,1,fe),B.isZero()||(B.negative^=1);W&&(W.words[fe]=se)}return W&&W.strip(),B.strip(),D!=="div"&&U!==0&&B.iushrn(U),{div:W||null,mod:B}},n.prototype.divmod=function(I,D,U){if(a(!I.isZero()),this.isZero())return{div:new n(0),mod:new n(0)};var B,j,Z;return this.negative!==0&&I.negative===0?(Z=this.neg().divmod(I,D),D!=="mod"&&(B=Z.div.neg()),D!=="div"&&(j=Z.mod.neg(),U&&j.negative!==0&&j.iadd(I)),{div:B,mod:j}):this.negative===0&&I.negative!==0?(Z=this.divmod(I.neg(),D),D!=="mod"&&(B=Z.div.neg()),{div:B,mod:Z.mod}):(this.negative&I.negative)!=0?(Z=this.neg().divmod(I.neg(),D),D!=="div"&&(j=Z.mod.neg(),U&&j.negative!==0&&j.isub(I)),{div:Z.div,mod:j}):I.length>this.length||this.cmp(I)<0?{div:new n(0),mod:this}:I.length===1?D==="div"?{div:this.divn(I.words[0]),mod:null}:D==="mod"?{div:null,mod:new n(this.modn(I.words[0]))}:{div:this.divn(I.words[0]),mod:new n(this.modn(I.words[0]))}:this._wordDiv(I,D)},n.prototype.div=function(I){return this.divmod(I,"div",!1).div},n.prototype.mod=function(I){return this.divmod(I,"mod",!1).mod},n.prototype.umod=function(I){return this.divmod(I,"mod",!0).mod},n.prototype.divRound=function(I){var D=this.divmod(I);if(D.mod.isZero())return D.div;var U=D.div.negative!==0?D.mod.isub(I):D.mod,B=I.ushrn(1),j=I.andln(1),Z=U.cmp(B);return Z<0||j===1&&Z===0?D.div:D.div.negative!==0?D.div.isubn(1):D.div.iaddn(1)},n.prototype.modn=function(I){a(I<=67108863);for(var D=(1<<26)%I,U=0,B=this.length-1;B>=0;B--)U=(D*U+(this.words[B]|0))%I;return U},n.prototype.idivn=function(I){a(I<=67108863);for(var D=0,U=this.length-1;U>=0;U--){var B=(this.words[U]|0)+D*67108864;this.words[U]=B/I|0,D=B%I}return this.strip()},n.prototype.divn=function(I){return this.clone().idivn(I)},n.prototype.egcd=function(I){a(I.negative===0),a(!I.isZero());var D=this,U=I.clone();D.negative!==0?D=D.umod(I):D=D.clone();for(var B=new n(1),j=new n(0),Z=new n(0),ee=new n(1),q=0;D.isEven()&&U.isEven();)D.iushrn(1),U.iushrn(1),++q;for(var W=U.clone(),J=D.clone();!D.isZero();){for(var le=0,fe=1;(D.words[0]&fe)==0&&le<26;++le,fe<<=1);if(le>0)for(D.iushrn(le);le-- >0;)(B.isOdd()||j.isOdd())&&(B.iadd(W),j.isub(J)),B.iushrn(1),j.iushrn(1);for(var se=0,H=1;(U.words[0]&H)==0&&se<26;++se,H<<=1);if(se>0)for(U.iushrn(se);se-- >0;)(Z.isOdd()||ee.isOdd())&&(Z.iadd(W),ee.isub(J)),Z.iushrn(1),ee.iushrn(1);D.cmp(U)>=0?(D.isub(U),B.isub(Z),j.isub(ee)):(U.isub(D),Z.isub(B),ee.isub(j))}return{a:Z,b:ee,gcd:U.iushln(q)}},n.prototype._invmp=function(I){a(I.negative===0),a(!I.isZero());var D=this,U=I.clone();D.negative!==0?D=D.umod(I):D=D.clone();for(var B=new n(1),j=new n(0),Z=U.clone();D.cmpn(1)>0&&U.cmpn(1)>0;){for(var ee=0,q=1;(D.words[0]&q)==0&&ee<26;++ee,q<<=1);if(ee>0)for(D.iushrn(ee);ee-- >0;)B.isOdd()&&B.iadd(Z),B.iushrn(1);for(var W=0,J=1;(U.words[0]&J)==0&&W<26;++W,J<<=1);if(W>0)for(U.iushrn(W);W-- >0;)j.isOdd()&&j.iadd(Z),j.iushrn(1);D.cmp(U)>=0?(D.isub(U),B.isub(j)):(U.isub(D),j.isub(B))}var le;return D.cmpn(1)===0?le=B:le=j,le.cmpn(0)<0&&le.iadd(I),le},n.prototype.gcd=function(I){if(this.isZero())return I.abs();if(I.isZero())return this.abs();var D=this.clone(),U=I.clone();D.negative=0,U.negative=0;for(var B=0;D.isEven()&&U.isEven();B++)D.iushrn(1),U.iushrn(1);do{for(;D.isEven();)D.iushrn(1);for(;U.isEven();)U.iushrn(1);var j=D.cmp(U);if(j<0){var Z=D;D=U,U=Z}else if(j===0||U.cmpn(1)===0)break;D.isub(U)}while(!0);return U.iushln(B)},n.prototype.invm=function(I){return this.egcd(I).a.umod(I)},n.prototype.isEven=function(){return(this.words[0]&1)==0},n.prototype.isOdd=function(){return(this.words[0]&1)==1},n.prototype.andln=function(I){return this.words[0]&I},n.prototype.bincn=function(I){a(typeof I=="number");var D=I%26,U=(I-D)/26,B=1<<D;if(this.length<=U)return this._expand(U+1),this.words[U]|=B,this;for(var j=B,Z=U;j!==0&&Z<this.length;Z++){var ee=this.words[Z]|0;ee+=j,j=ee>>>26,ee&=67108863,this.words[Z]=ee}return j!==0&&(this.words[Z]=j,this.length++),this},n.prototype.isZero=function(){return this.length===1&&this.words[0]===0},n.prototype.cmpn=function(I){var D=I<0;if(this.negative!==0&&!D)return-1;if(this.negative===0&&D)return 1;this.strip();var U;if(this.length>1)U=1;else{D&&(I=-I),a(I<=67108863,"Number is too big");var B=this.words[0]|0;U=B===I?0:B<I?-1:1}return this.negative!==0?-U|0:U},n.prototype.cmp=function(I){if(this.negative!==0&&I.negative===0)return-1;if(this.negative===0&&I.negative!==0)return 1;var D=this.ucmp(I);return this.negative!==0?-D|0:D},n.prototype.ucmp=function(I){if(this.length>I.length)return 1;if(this.length<I.length)return-1;for(var D=0,U=this.length-1;U>=0;U--){var B=this.words[U]|0,j=I.words[U]|0;if(B!==j){B<j?D=-1:B>j&&(D=1);break}}return D},n.prototype.gtn=function(I){return this.cmpn(I)===1},n.prototype.gt=function(I){return this.cmp(I)===1},n.prototype.gten=function(I){return this.cmpn(I)>=0},n.prototype.gte=function(I){return this.cmp(I)>=0},n.prototype.ltn=function(I){return this.cmpn(I)===-1},n.prototype.lt=function(I){return this.cmp(I)===-1},n.prototype.lten=function(I){return this.cmpn(I)<=0},n.prototype.lte=function(I){return this.cmp(I)<=0},n.prototype.eqn=function(I){return this.cmpn(I)===0},n.prototype.eq=function(I){return this.cmp(I)===0},n.red=function(I){return new P(I)},n.prototype.toRed=function(I){return a(!this.red,"Already a number in reduction context"),a(this.negative===0,"red works only with positives"),I.convertTo(this)._forceRed(I)},n.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},n.prototype._forceRed=function(I){return this.red=I,this},n.prototype.forceRed=function(I){return a(!this.red,"Already a number in reduction context"),this._forceRed(I)},n.prototype.redAdd=function(I){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,I)},n.prototype.redIAdd=function(I){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,I)},n.prototype.redSub=function(I){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,I)},n.prototype.redISub=function(I){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,I)},n.prototype.redShl=function(I){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,I)},n.prototype.redMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.mul(this,I)},n.prototype.redIMul=function(I){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,I),this.red.imul(this,I)},n.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},n.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},n.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},n.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},n.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},n.prototype.redPow=function(I){return a(this.red&&!I.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,I)};var T={k256:null,p224:null,p192:null,p25519:null};function w(F,I){this.name=F,this.p=new n(I,16),this.n=this.p.bitLength(),this.k=new n(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}w.prototype._tmp=function(){var I=new n(null);return I.words=new Array(Math.ceil(this.n/13)),I},w.prototype.ireduce=function(I){var D=I,U;do this.split(D,this.tmp),D=this.imulK(D),D=D.iadd(this.tmp),U=D.bitLength();while(U>this.n);var B=U<this.n?-1:D.ucmp(this.p);return B===0?(D.words[0]=0,D.length=1):B>0?D.isub(this.p):D.strip!==void 0?D.strip():D._strip(),D},w.prototype.split=function(I,D){I.iushrn(this.n,0,D)},w.prototype.imulK=function(I){return I.imul(this.k)};function v(){w.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(v,w),v.prototype.split=function(I,D){for(var U=4194303,B=Math.min(I.length,9),j=0;j<B;j++)D.words[j]=I.words[j];if(D.length=B,I.length<=9){I.words[0]=0,I.length=1;return}var Z=I.words[9];for(D.words[D.length++]=Z&U,j=10;j<I.length;j++){var ee=I.words[j]|0;I.words[j-10]=(ee&U)<<4|Z>>>22,Z=ee}Z>>>=22,I.words[j-10]=Z,Z===0&&I.length>10?I.length-=10:I.length-=9},v.prototype.imulK=function(I){I.words[I.length]=0,I.words[I.length+1]=0,I.length+=2;for(var D=0,U=0;U<I.length;U++){var B=I.words[U]|0;D+=B*977,I.words[U]=D&67108863,D=B*64+(D/67108864|0)}return I.words[I.length-1]===0&&(I.length--,I.words[I.length-1]===0&&I.length--),I};function L(){w.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(L,w);function S(){w.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(S,w);function k(){w.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(k,w),k.prototype.imulK=function(I){for(var D=0,U=0;U<I.length;U++){var B=(I.words[U]|0)*19+D,j=B&67108863;B>>>=26,I.words[U]=j,D=B}return D!==0&&(I.words[I.length++]=D),I},n._prime=function(I){if(T[I])return T[I];var D;if(I==="k256")D=new v;else if(I==="p224")D=new L;else if(I==="p192")D=new S;else if(I==="p25519")D=new k;else throw new Error("Unknown prime "+I);return T[I]=D,D};function P(F){if(typeof F=="string"){var I=n._prime(F);this.m=I.p,this.prime=I}else a(F.gtn(1),"modulus must be greater than 1"),this.m=F,this.prime=null}P.prototype._verify1=function(I){a(I.negative===0,"red works only with positives"),a(I.red,"red works only with red numbers")},P.prototype._verify2=function(I,D){a((I.negative|D.negative)==0,"red works only with positives"),a(I.red&&I.red===D.red,"red works only with red numbers")},P.prototype.imod=function(I){return this.prime?this.prime.ireduce(I)._forceRed(this):I.umod(this.m)._forceRed(this)},P.prototype.neg=function(I){return I.isZero()?I.clone():this.m.sub(I)._forceRed(this)},P.prototype.add=function(I,D){this._verify2(I,D);var U=I.add(D);return U.cmp(this.m)>=0&&U.isub(this.m),U._forceRed(this)},P.prototype.iadd=function(I,D){this._verify2(I,D);var U=I.iadd(D);return U.cmp(this.m)>=0&&U.isub(this.m),U},P.prototype.sub=function(I,D){this._verify2(I,D);var U=I.sub(D);return U.cmpn(0)<0&&U.iadd(this.m),U._forceRed(this)},P.prototype.isub=function(I,D){this._verify2(I,D);var U=I.isub(D);return U.cmpn(0)<0&&U.iadd(this.m),U},P.prototype.shl=function(I,D){return this._verify1(I),this.imod(I.ushln(D))},P.prototype.imul=function(I,D){return this._verify2(I,D),this.imod(I.imul(D))},P.prototype.mul=function(I,D){return this._verify2(I,D),this.imod(I.mul(D))},P.prototype.isqr=function(I){return this.imul(I,I.clone())},P.prototype.sqr=function(I){return this.mul(I,I)},P.prototype.sqrt=function(I){if(I.isZero())return I.clone();var D=this.m.andln(3);if(a(D%2==1),D===3){var U=this.m.add(new n(1)).iushrn(2);return this.pow(I,U)}for(var B=this.m.subn(1),j=0;!B.isZero()&&B.andln(1)===0;)j++,B.iushrn(1);a(!B.isZero());var Z=new n(1).toRed(this),ee=Z.redNeg(),q=this.m.subn(1).iushrn(1),W=this.m.bitLength();for(W=new n(2*W*W).toRed(this);this.pow(W,q).cmp(ee)!==0;)W.redIAdd(ee);for(var J=this.pow(W,B),le=this.pow(I,B.addn(1).iushrn(1)),fe=this.pow(I,B),se=j;fe.cmp(Z)!==0;){for(var H=fe,Y=0;H.cmp(Z)!==0;Y++)H=H.redSqr();a(Y<se);var ne=this.pow(J,new n(1).iushln(se-Y-1));le=le.redMul(ne),J=ne.redSqr(),fe=fe.redMul(J),se=Y}return le},P.prototype.invm=function(I){var D=I._invmp(this.m);return D.negative!==0?(D.negative=0,this.imod(D).redNeg()):this.imod(D)},P.prototype.pow=function(I,D){if(D.isZero())return new n(1).toRed(this);if(D.cmpn(1)===0)return I.clone();var U=4,B=new Array(1<<U);B[0]=new n(1).toRed(this),B[1]=I;for(var j=2;j<B.length;j++)B[j]=this.mul(B[j-1],I);var Z=B[0],ee=0,q=0,W=D.bitLength()%26;for(W===0&&(W=26),j=D.length-1;j>=0;j--){for(var J=D.words[j],le=W-1;le>=0;le--){var fe=J>>le&1;if(Z!==B[0]&&(Z=this.sqr(Z)),fe===0&&ee===0){q=0;continue}ee<<=1,ee|=fe,q++,!(q!==U&&(j!==0||le!==0))&&(Z=this.mul(Z,B[ee]),q=0,ee=0)}W=26}return Z},P.prototype.convertTo=function(I){var D=I.umod(this.m);return D===I?D.clone():D},P.prototype.convertFrom=function(I){var D=I.clone();return D.red=null,D},n.mont=function(I){return new O(I)};function O(F){P.call(this,F),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new n(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(O,P),O.prototype.convertTo=function(I){return this.imod(I.ushln(this.shift))},O.prototype.convertFrom=function(I){var D=this.imod(I.mul(this.rinv));return D.red=null,D},O.prototype.imul=function(I,D){if(I.isZero()||D.isZero())return I.words[0]=0,I.length=1,I;var U=I.imul(D),B=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=U.isub(B).iushrn(this.shift),Z=j;return j.cmp(this.m)>=0?Z=j.isub(this.m):j.cmpn(0)<0&&(Z=j.iadd(this.m)),Z._forceRed(this)},O.prototype.mul=function(I,D){if(I.isZero()||D.isZero())return new n(0)._forceRed(this);var U=I.mul(D),B=U.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),j=U.isub(B).iushrn(this.shift),Z=j;return j.cmp(this.m)>=0?Z=j.isub(this.m):j.cmpn(0)<0&&(Z=j.iadd(this.m)),Z._forceRed(this)},O.prototype.invm=function(I){var D=this.imod(I._invmp(this.m).mul(this.r2));return D._forceRed(this)}})(typeof m=="undefined"||m,this)},{buffer:2}],34:[function(s,m,x){m.exports=t;function t(i){var a,r,n,f=i.length,l=0;for(a=0;a<f;++a)l+=i[a].length;var o=new Array(l),c=0;for(a=0;a<f;++a){var h=i[a],d=h.length;for(r=0;r<d;++r){var p=o[c++]=new Array(d-1),y=0;for(n=0;n<d;++n)n!==r&&(p[y++]=h[n]);if(r&1){var g=p[1];p[1]=p[0],p[0]=g}}}return o}},{}],35:[function(s,m,x){m.exports=d;var t=s("typedarray-pool"),i=s("./lib/sweep"),a=s("./lib/intersect");function r(p,y){for(var g=0;g<p;++g)if(!(y[g]<=y[g+p]))return!0;return!1}function n(p,y,g,A){for(var b=0,M=0,_=0,T=p.length;_<T;++_){var w=p[_];if(!r(y,w)){for(var v=0;v<2*y;++v)g[b++]=w[v];A[M++]=_}}return M}function f(p,y,g,A){var b=p.length,M=y.length;if(!(b<=0||M<=0)){var _=p[0].length>>>1;if(!(_<=0)){var T,w=t.mallocDouble(2*_*b),v=t.mallocInt32(b);if(b=n(p,_,w,v),b>0){if(_===1&&A)i.init(b),T=i.sweepComplete(_,g,0,b,w,v,0,b,w,v);else{var L=t.mallocDouble(2*_*M),S=t.mallocInt32(M);M=n(y,_,L,S),M>0&&(i.init(b+M),_===1?T=i.sweepBipartite(_,g,0,b,w,v,0,M,L,S):T=a(_,g,A,b,w,v,M,L,S),t.free(L),t.free(S))}t.free(w),t.free(v)}return T}}}var l;function o(p,y){l.push([p,y])}function c(p){return l=[],f(p,p,o,!0),l}function h(p,y){return l=[],f(p,y,o,!1),l}function d(p,y,g){switch(arguments.length){case 1:return c(p);case 2:return typeof y=="function"?f(p,p,y,!0):h(p,y);case 3:return f(p,y,g,!1);default:throw new Error("box-intersect: Invalid arguments")}}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(s,m,x){function t(){function r(l,o,c,h,d,p,y,g,A,b,M){for(var _=2*l,T=h,w=_*h;T<d;++T,w+=_){var v=p[o+w],L=p[o+w+l],S=y[T];e:for(var k=g,P=_*g;k<A;++k,P+=_){var O=b[o+P],F=b[o+P+l],I=M[k];if(!(F<v||L<O)){for(var D=o+1;D<l;++D){var U=p[D+w],B=p[D+l+w],j=b[D+P],Z=b[D+l+P];if(B<j||Z<U)continue e}var ee=c(S,I);if(ee!==void 0)return ee}}}}function n(l,o,c,h,d,p,y,g,A,b,M){for(var _=2*l,T=g,w=_*g;T<A;++T,w+=_){var v=b[o+w],L=b[o+w+l],S=M[T];e:for(var k=h,P=_*h;k<d;++k,P+=_){var O=p[o+P],F=p[o+P+l],I=y[k];if(!(L<O||F<v)){for(var D=o+1;D<l;++D){var U=p[D+P],B=p[D+l+P],j=b[D+w],Z=b[D+l+w];if(B<j||Z<U)continue e}var ee=c(I,S);if(ee!==void 0)return ee}}}}function f(l,o,c,h,d,p,y,g,A,b,M){return d-h>A-g?r(l,o,c,h,d,p,y,g,A,b,M):n(l,o,c,h,d,p,y,g,A,b,M)}return f}function i(){function r(c,h,d,p,y,g,A,b,M,_,T){for(var w=2*c,v=p,L=w*p;v<y;++v,L+=w){var S=g[h+L],k=g[h+L+c],P=A[v];e:for(var O=b,F=w*b;O<M;++O,F+=w){var I=_[h+F],D=T[O];if(!(I<=S||k<I)){for(var U=h+1;U<c;++U){var B=g[U+L],j=g[U+c+L],Z=_[U+F],ee=_[U+c+F];if(j<Z||ee<B)continue e}var q=d(D,P);if(q!==void 0)return q}}}}function n(c,h,d,p,y,g,A,b,M,_,T){for(var w=2*c,v=p,L=w*p;v<y;++v,L+=w){var S=g[h+L],k=g[h+L+c],P=A[v];e:for(var O=b,F=w*b;O<M;++O,F+=w){var I=_[h+F],D=T[O];if(!(I<S||k<I)){for(var U=h+1;U<c;++U){var B=g[U+L],j=g[U+c+L],Z=_[U+F],ee=_[U+c+F];if(j<Z||ee<B)continue e}var q=d(P,D);if(q!==void 0)return q}}}}function f(c,h,d,p,y,g,A,b,M,_,T){for(var w=2*c,v=b,L=w*b;v<M;++v,L+=w){var S=_[h+L],k=T[v];e:for(var P=p,O=w*p;P<y;++P,O+=w){var F=g[h+O],I=g[h+O+c],D=A[P];if(!(S<=F||I<S)){for(var U=h+1;U<c;++U){var B=g[U+O],j=g[U+c+O],Z=_[U+L],ee=_[U+c+L];if(j<Z||ee<B)continue e}var q=d(k,D);if(q!==void 0)return q}}}}function l(c,h,d,p,y,g,A,b,M,_,T){for(var w=2*c,v=b,L=w*b;v<M;++v,L+=w){var S=_[h+L],k=T[v];e:for(var P=p,O=w*p;P<y;++P,O+=w){var F=g[h+O],I=g[h+O+c],D=A[P];if(!(S<F||I<S)){for(var U=h+1;U<c;++U){var B=g[U+O],j=g[U+c+O],Z=_[U+L],ee=_[U+c+L];if(j<Z||ee<B)continue e}var q=d(D,k);if(q!==void 0)return q}}}}function o(c,h,d,p,y,g,A,b,M,_,T,w){return g-y>_-M?p?r(c,h,d,y,g,A,b,M,_,T,w):n(c,h,d,y,g,A,b,M,_,T,w):p?f(c,h,d,y,g,A,b,M,_,T,w):l(c,h,d,y,g,A,b,M,_,T,w)}return o}function a(r){return r?t():i()}x.partial=a(!1),x.full=a(!0)},{}],37:[function(s,m,x){m.exports=F;var t=s("typedarray-pool"),i=s("bit-twiddle"),a=s("./brute"),r=a.partial,n=a.full,f=s("./sweep"),l=s("./median"),o=s("./partition"),c=128,h=1<<22,d=1<<22,p=o("!(lo>=p0)&&!(p1>=hi)"),y=o("lo===p0"),g=o("lo<p0"),A=o("hi<=p0"),b=o("lo<=p0&&p0<=hi"),M=o("lo<p0&&p0<=hi"),_=6,T=2,w=1024,v=t.mallocInt32(w),L=t.mallocDouble(w);function S(I,D){var U=8*i.log2(D+1)*(I+1)|0,B=i.nextPow2(_*U);v.length<B&&(t.free(v),v=t.mallocInt32(B));var j=i.nextPow2(T*U);L.length<j&&(t.free(L),L=t.mallocDouble(j))}function k(I,D,U,B,j,Z,ee,q,W){var J=_*I;v[J]=D,v[J+1]=U,v[J+2]=B,v[J+3]=j,v[J+4]=Z,v[J+5]=ee;var le=T*I;L[le]=q,L[le+1]=W}function P(I,D,U,B,j,Z,ee,q,W,J,le){var fe=2*I,se=W*fe,H=J[se+D];e:for(var Y=j,ne=j*fe;Y<Z;++Y,ne+=fe){var te=ee[ne+D],K=ee[ne+D+I];if(!(H<te||K<H)&&!(B&&H===te)){for(var $=q[Y],ae=D+1;ae<I;++ae){var te=ee[ne+ae],K=ee[ne+ae+I],ie=J[se+ae],oe=J[se+ae+I];if(K<ie||oe<te)continue e}var ue;if(B?ue=U(le,$):ue=U($,le),ue!==void 0)return ue}}}function O(I,D,U,B,j,Z,ee,q,W,J){var le=2*I,fe=q*le,se=W[fe+D];e:for(var H=B,Y=B*le;H<j;++H,Y+=le){var ne=ee[H];if(ne!==J){var te=Z[Y+D],K=Z[Y+D+I];if(!(se<te||K<se)){for(var $=D+1;$<I;++$){var te=Z[Y+$],K=Z[Y+$+I],ae=W[fe+$],ie=W[fe+$+I];if(K<ae||ie<te)continue e}var oe=U(ne,J);if(oe!==void 0)return oe}}}}function F(I,D,U,B,j,Z,ee,q,W){S(I,B+ee);var J=0,le=2*I,fe;for(k(J++,0,0,B,0,ee,U?16:0,-1/0,1/0),U||k(J++,0,0,ee,0,B,1,-1/0,1/0);J>0;){J-=1;var se=J*_,H=v[se],Y=v[se+1],ne=v[se+2],te=v[se+3],K=v[se+4],$=v[se+5],ae=J*T,ie=L[ae],oe=L[ae+1],ue=$&1,ye=!!($&16),ce=j,me=Z,xe=q,ke=W;if(ue&&(ce=q,me=W,xe=j,ke=Z),!($&2&&(ne=g(I,H,Y,ne,ce,me,oe),Y>=ne))&&!($&4&&(Y=A(I,H,Y,ne,ce,me,ie),Y>=ne))){var Ae=ne-Y,Oe=K-te;if(ye){if(I*Ae*(Ae+Oe)<d){if(fe=f.scanComplete(I,H,D,Y,ne,ce,me,te,K,xe,ke),fe!==void 0)return fe;continue}}else if(I*Math.min(Ae,Oe)<c){if(fe=r(I,H,D,ue,Y,ne,ce,me,te,K,xe,ke),fe!==void 0)return fe;continue}else if(I*Ae*Oe<h){if(fe=f.scanBipartite(I,H,D,ue,Y,ne,ce,me,te,K,xe,ke),fe!==void 0)return fe;continue}var He=p(I,H,Y,ne,ce,me,ie,oe);if(Y<He)if(I*(He-Y)<c){if(fe=n(I,H+1,D,Y,He,ce,me,te,K,xe,ke),fe!==void 0)return fe}else if(H===I-2){if(ue?fe=f.sweepBipartite(I,D,te,K,xe,ke,Y,He,ce,me):fe=f.sweepBipartite(I,D,Y,He,ce,me,te,K,xe,ke),fe!==void 0)return fe}else k(J++,H+1,Y,He,te,K,ue,-1/0,1/0),k(J++,H+1,te,K,Y,He,ue^1,-1/0,1/0);if(He<ne){var Ge=l(I,H,te,K,xe,ke),_e=xe[le*Ge+H],Re=y(I,H,Ge,K,xe,ke,_e);if(Re<K&&k(J++,H,He,ne,Re,K,(ue|4)+(ye?16:0),_e,oe),te<Ge&&k(J++,H,He,ne,te,Ge,(ue|2)+(ye?16:0),ie,_e),Ge+1===Re){if(ye?fe=O(I,H,D,He,ne,ce,me,Ge,xe,ke[Ge]):fe=P(I,H,D,ue,He,ne,ce,me,Ge,xe,ke[Ge]),fe!==void 0)return fe}else if(Ge<Re){var We;if(ye){if(We=b(I,H,He,ne,ce,me,_e),He<We){var qe=y(I,H,He,We,ce,me,_e);if(H===I-2){if(He<qe&&(fe=f.sweepComplete(I,D,He,qe,ce,me,Ge,Re,xe,ke),fe!==void 0)||qe<We&&(fe=f.sweepBipartite(I,D,qe,We,ce,me,Ge,Re,xe,ke),fe!==void 0))return fe}else He<qe&&k(J++,H+1,He,qe,Ge,Re,16,-1/0,1/0),qe<We&&(k(J++,H+1,qe,We,Ge,Re,0,-1/0,1/0),k(J++,H+1,Ge,Re,qe,We,1,-1/0,1/0))}}else ue?We=M(I,H,He,ne,ce,me,_e):We=b(I,H,He,ne,ce,me,_e),He<We&&(H===I-2?ue?fe=f.sweepBipartite(I,D,Ge,Re,xe,ke,He,We,ce,me):fe=f.sweepBipartite(I,D,He,We,ce,me,Ge,Re,xe,ke):(k(J++,H+1,He,We,Ge,Re,ue,-1/0,1/0),k(J++,H+1,Ge,Re,He,We,ue^1,-1/0,1/0)))}}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(s,m,x){m.exports=n;var t=s("./partition"),i=t("lo<p0"),a=8;function r(f,l,o,c,h,d){for(var p=2*f,y=p*(o+1)+l,g=o+1;g<c;++g,y+=p)for(var A=h[y],b=g,M=p*(g-1);b>o&&h[M+l]>A;--b,M-=p){for(var _=M,T=M+p,w=0;w<p;++w,++_,++T){var v=h[_];h[_]=h[T],h[T]=v}var L=d[b];d[b]=d[b-1],d[b-1]=L}}function n(f,l,o,c,h,d){if(c<=o+1)return o;for(var p=o,y=c,g=c+o>>>1,A=2*f,b=g,M=h[A*g+l];p<y;){if(y-p<a){r(f,l,p,y,h,d),M=h[A*g+l];break}var _=y-p,T=Math.random()*_+p|0,w=h[A*T+l],v=Math.random()*_+p|0,L=h[A*v+l],S=Math.random()*_+p|0,k=h[A*S+l];w<=L?k>=L?(b=v,M=L):w>=k?(b=T,M=w):(b=S,M=k):L>=k?(b=v,M=L):k>=w?(b=T,M=w):(b=S,M=k);for(var P=A*(y-1),O=A*b,F=0;F<A;++F,++P,++O){var I=h[P];h[P]=h[O],h[O]=I}var D=d[y-1];d[y-1]=d[b],d[b]=D,b=i(f,l,p,y-1,h,d,M);for(var P=A*(y-1),O=A*b,F=0;F<A;++F,++P,++O){var I=h[P];h[P]=h[O],h[O]=I}var D=d[y-1];if(d[y-1]=d[b],d[b]=D,g<b){for(y=b-1;p<y&&h[A*(y-1)+l]===M;)y-=1;y+=1}else if(b<g)for(p=b+1;p<y&&h[A*p+l]===M;)p+=1;else break}return i(f,l,o,g,h,d,h[A*g+l])}},{"./partition":39}],39:[function(s,m,x){m.exports=i;var t={"lo===p0":a,"lo<p0":r,"lo<=p0":n,"hi<=p0":f,"lo<p0&&p0<=hi":o,"lo<=p0&&p0<=hi":l,"!(lo>=p0)&&!(p1>=hi)":c};function i(h){return t[h]}function a(h,d,p,y,g,A,b){for(var M=2*h,_=M*p,T=_,w=p,v=d,L=p;y>L;++L,_+=M){var S=g[_+v];if(S===b)if(w===L)w+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[w],A[w++]=O}}return w}function r(h,d,p,y,g,A,b){for(var M=2*h,_=M*p,T=_,w=p,v=d,L=p;y>L;++L,_+=M){var S=g[_+v];if(S<b)if(w===L)w+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[w],A[w++]=O}}return w}function n(h,d,p,y,g,A,b){for(var M=2*h,_=M*p,T=_,w=p,v=h+d,L=p;y>L;++L,_+=M){var S=g[_+v];if(S<=b)if(w===L)w+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[w],A[w++]=O}}return w}function f(h,d,p,y,g,A,b){for(var M=2*h,_=M*p,T=_,w=p,v=h+d,L=p;y>L;++L,_+=M){var S=g[_+v];if(S<=b)if(w===L)w+=1,T+=M;else{for(var k=0;M>k;++k){var P=g[_+k];g[_+k]=g[T],g[T++]=P}var O=A[L];A[L]=A[w],A[w++]=O}}return w}function l(h,d,p,y,g,A,b){for(var M=2*h,_=M*p,T=_,w=p,v=d,L=h+d,S=p;y>S;++S,_+=M){var k=g[_+v],P=g[_+L];if(k<=b&&b<=P)if(w===S)w+=1,T+=M;else{for(var O=0;M>O;++O){var F=g[_+O];g[_+O]=g[T],g[T++]=F}var I=A[S];A[S]=A[w],A[w++]=I}}return w}function o(h,d,p,y,g,A,b){for(var M=2*h,_=M*p,T=_,w=p,v=d,L=h+d,S=p;y>S;++S,_+=M){var k=g[_+v],P=g[_+L];if(k<b&&b<=P)if(w===S)w+=1,T+=M;else{for(var O=0;M>O;++O){var F=g[_+O];g[_+O]=g[T],g[T++]=F}var I=A[S];A[S]=A[w],A[w++]=I}}return w}function c(h,d,p,y,g,A,b,M){for(var _=2*h,T=_*p,w=T,v=p,L=d,S=h+d,k=p;y>k;++k,T+=_){var P=g[T+L],O=g[T+S];if(!(P>=b)&&!(M>=O))if(v===k)v+=1,w+=_;else{for(var F=0;_>F;++F){var I=g[T+F];g[T+F]=g[w],g[w++]=I}var D=A[k];A[k]=A[v],A[v++]=D}}return v}},{}],40:[function(s,m,x){m.exports=i;var t=32;function i(d,p){p<=4*t?a(0,p-1,d):h(0,p-1,d)}function a(d,p,y){for(var g=2*(d+1),A=d+1;A<=p;++A){for(var b=y[g++],M=y[g++],_=A,T=g-2;_-- >d;){var w=y[T-2],v=y[T-1];if(w<b)break;if(w===b&&v<M)break;y[T]=w,y[T+1]=v,T-=2}y[T]=b,y[T+1]=M}}function r(d,p,y){d*=2,p*=2;var g=y[d],A=y[d+1];y[d]=y[p],y[d+1]=y[p+1],y[p]=g,y[p+1]=A}function n(d,p,y){d*=2,p*=2,y[d]=y[p],y[d+1]=y[p+1]}function f(d,p,y,g){d*=2,p*=2,y*=2;var A=g[d],b=g[d+1];g[d]=g[p],g[d+1]=g[p+1],g[p]=g[y],g[p+1]=g[y+1],g[y]=A,g[y+1]=b}function l(d,p,y,g,A){d*=2,p*=2,A[d]=A[p],A[p]=y,A[d+1]=A[p+1],A[p+1]=g}function o(d,p,y){d*=2,p*=2;var g=y[d],A=y[p];return g<A?!1:g===A?y[d+1]>y[p+1]:!0}function c(d,p,y,g){d*=2;var A=g[d];return A<p?!0:A===p?g[d+1]<y:!1}function h(d,p,y){var g=(p-d+1)/6|0,A=d+g,b=p-g,M=d+p>>1,_=M-g,T=M+g,w=A,v=_,L=M,S=T,k=b,P=d+1,O=p-1,F=0;o(w,v,y)&&(F=w,w=v,v=F),o(S,k,y)&&(F=S,S=k,k=F),o(w,L,y)&&(F=w,w=L,L=F),o(v,L,y)&&(F=v,v=L,L=F),o(w,S,y)&&(F=w,w=S,S=F),o(L,S,y)&&(F=L,L=S,S=F),o(v,k,y)&&(F=v,v=k,k=F),o(v,L,y)&&(F=v,v=L,L=F),o(S,k,y)&&(F=S,S=k,k=F);for(var I=y[2*v],D=y[2*v+1],U=y[2*S],B=y[2*S+1],j=2*w,Z=2*L,ee=2*k,q=2*A,W=2*M,J=2*b,le=0;le<2;++le){var fe=y[j+le],se=y[Z+le],H=y[ee+le];y[q+le]=fe,y[W+le]=se,y[J+le]=H}n(_,d,y),n(T,p,y);for(var Y=P;Y<=O;++Y)if(c(Y,I,D,y))Y!==P&&r(Y,P,y),++P;else if(!c(Y,U,B,y))for(;;)if(c(O,U,B,y)){c(O,I,D,y)?(f(Y,P,O,y),++P,--O):(r(Y,O,y),--O);break}else{if(--O<Y)break;continue}l(d,P-1,I,D,y),l(p,O+1,U,B,y),P-2-d<=t?a(d,P-2,y):h(d,P-2,y),p-(O+2)<=t?a(O+2,p,y):h(O+2,p,y),O-P<=t?a(P,O,y):h(P,O,y)}},{}],41:[function(s,m,x){m.exports={init:y,sweepBipartite:b,sweepComplete:M,scanBipartite:_,scanComplete:T};var t=s("typedarray-pool"),i=s("bit-twiddle"),a=s("./sort"),r=1<<28,n=1024,f=t.mallocInt32(n),l=t.mallocInt32(n),o=t.mallocInt32(n),c=t.mallocInt32(n),h=t.mallocInt32(n),d=t.mallocInt32(n),p=t.mallocDouble(n*8);function y(w){var v=i.nextPow2(w);f.length<v&&(t.free(f),f=t.mallocInt32(v)),l.length<v&&(t.free(l),l=t.mallocInt32(v)),o.length<v&&(t.free(o),o=t.mallocInt32(v)),c.length<v&&(t.free(c),c=t.mallocInt32(v)),h.length<v&&(t.free(h),h=t.mallocInt32(v)),d.length<v&&(t.free(d),d=t.mallocInt32(v));var L=8*v;p.length<L&&(t.free(p),p=t.mallocDouble(L))}function g(w,v,L,S){var k=v[S],P=w[L-1];w[k]=P,v[P]=k}function A(w,v,L,S){w[L]=S,v[S]=L}function b(w,v,L,S,k,P,O,F,I,D){for(var U=0,B=2*w,j=w-1,Z=B-1,ee=L;ee<S;++ee){var q=P[ee],W=B*ee;p[U++]=k[W+j],p[U++]=-(q+1),p[U++]=k[W+Z],p[U++]=q}for(var ee=O;ee<F;++ee){var q=D[ee]+r,J=B*ee;p[U++]=I[J+j],p[U++]=-q,p[U++]=I[J+Z],p[U++]=q}var le=U>>>1;a(p,le);for(var fe=0,se=0,ee=0;ee<le;++ee){var H=p[2*ee+1]|0;if(H>=r)H=H-r|0,g(o,c,se--,H);else if(H>=0)g(f,l,fe--,H);else if(H<=-r){H=-H-r|0;for(var Y=0;Y<fe;++Y){var ne=v(f[Y],H);if(ne!==void 0)return ne}A(o,c,se++,H)}else{H=-H-1|0;for(var Y=0;Y<se;++Y){var ne=v(H,o[Y]);if(ne!==void 0)return ne}A(f,l,fe++,H)}}}function M(w,v,L,S,k,P,O,F,I,D){for(var U=0,B=2*w,j=w-1,Z=B-1,ee=L;ee<S;++ee){var q=P[ee]+1<<1,W=B*ee;p[U++]=k[W+j],p[U++]=-q,p[U++]=k[W+Z],p[U++]=q}for(var ee=O;ee<F;++ee){var q=D[ee]+1<<1,J=B*ee;p[U++]=I[J+j],p[U++]=-q|1,p[U++]=I[J+Z],p[U++]=q|1}var le=U>>>1;a(p,le);for(var fe=0,se=0,H=0,ee=0;ee<le;++ee){var Y=p[2*ee+1]|0,ne=Y&1;if(ee<le-1&&Y>>1==p[2*ee+3]>>1&&(ne=2,ee+=1),Y<0){for(var te=-(Y>>1)-1,K=0;K<H;++K){var $=v(h[K],te);if($!==void 0)return $}if(ne!==0)for(var K=0;K<fe;++K){var $=v(f[K],te);if($!==void 0)return $}if(ne!==1)for(var K=0;K<se;++K){var $=v(o[K],te);if($!==void 0)return $}ne===0?A(f,l,fe++,te):ne===1?A(o,c,se++,te):ne===2&&A(h,d,H++,te)}else{var te=(Y>>1)-1;ne===0?g(f,l,fe--,te):ne===1?g(o,c,se--,te):ne===2&&g(h,d,H--,te)}}}function _(w,v,L,S,k,P,O,F,I,D,U,B){var j=0,Z=2*w,ee=v,q=v+w,W=1,J=1;S?J=r:W=r;for(var le=k;le<P;++le){var fe=le+W,se=Z*le;p[j++]=O[se+ee],p[j++]=-fe,p[j++]=O[se+q],p[j++]=fe}for(var le=I;le<D;++le){var fe=le+J,H=Z*le;p[j++]=U[H+ee],p[j++]=-fe}var Y=j>>>1;a(p,Y);for(var ne=0,le=0;le<Y;++le){var te=p[2*le+1]|0;if(te<0){var fe=-te,K=!1;if(fe>=r?(K=!S,fe-=r):(K=!!S,fe-=1),K)A(f,l,ne++,fe);else{var $=B[fe],ae=Z*fe,ie=U[ae+v+1],oe=U[ae+v+1+w];e:for(var ue=0;ue<ne;++ue){var ye=f[ue],ce=Z*ye;if(!(oe<O[ce+v+1]||O[ce+v+1+w]<ie)){for(var me=v+2;me<w;++me)if(U[ae+me+w]<O[ce+me]||O[ce+me+w]<U[ae+me])continue e;var xe=F[ye],ke;if(S?ke=L($,xe):ke=L(xe,$),ke!==void 0)return ke}}}}else g(f,l,ne--,te-W)}}function T(w,v,L,S,k,P,O,F,I,D,U){for(var B=0,j=2*w,Z=v,ee=v+w,q=S;q<k;++q){var W=q+r,J=j*q;p[B++]=P[J+Z],p[B++]=-W,p[B++]=P[J+ee],p[B++]=W}for(var q=F;q<I;++q){var W=q+1,le=j*q;p[B++]=D[le+Z],p[B++]=-W}var fe=B>>>1;a(p,fe);for(var se=0,q=0;q<fe;++q){var H=p[2*q+1]|0;if(H<0){var W=-H;if(W>=r)f[se++]=W-r;else{W-=1;var Y=U[W],ne=j*W,te=D[ne+v+1],K=D[ne+v+1+w];e:for(var $=0;$<se;++$){var ae=f[$],ie=O[ae];if(ie===Y)break;var oe=j*ae;if(!(K<P[oe+v+1]||P[oe+v+1+w]<te)){for(var ue=v+2;ue<w;++ue)if(D[ne+ue+w]<P[oe+ue]||P[oe+ue+w]<D[ne+ue])continue e;var ye=L(ie,Y);if(ye!==void 0)return ye}}}}else{for(var W=H-r,$=se-1;$>=0;--$)if(f[$]===W){for(var ue=$+1;ue<se;++ue)f[ue-1]=f[ue];break}--se}}}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(s,m,x){var t=s("./lib/monotone"),i=s("./lib/triangulation"),a=s("./lib/delaunay"),r=s("./lib/filter");m.exports=c;function n(h){return[Math.min(h[0],h[1]),Math.max(h[0],h[1])]}function f(h,d){return h[0]-d[0]||h[1]-d[1]}function l(h){return h.map(n).sort(f)}function o(h,d,p){return d in h?h[d]:p}function c(h,d,p){Array.isArray(d)?(p=p||{},d=d||[]):(p=d||{},d=[]);var y=!!o(p,"delaunay",!0),g=!!o(p,"interior",!0),A=!!o(p,"exterior",!0),b=!!o(p,"infinity",!1);if(!g&&!A||h.length===0)return[];var M=t(h,d);if(y||g!==A||b){for(var _=i(h.length,l(d)),T=0;T<M.length;++T){var w=M[T];_.addTriangle(w[0],w[1],w[2])}return y&&a(h,_),A?g?b?r(_,0,b):_.cells():r(_,1,b):r(_,-1)}else return M}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(s,m,x){var t=s("robust-in-sphere")[4];s("binary-search-bounds"),m.exports=a;function i(r,n,f,l,o,c){var h=n.opposite(l,o);if(!(h<0)){if(o<l){var d=l;l=o,o=d,d=c,c=h,h=d}n.isConstraint(l,o)||t(r[l],r[o],r[c],r[h])<0&&f.push(l,o)}}function a(r,n){for(var f=[],l=r.length,o=n.stars,c=0;c<l;++c)for(var h=o[c],d=1;d<h.length;d+=2){var p=h[d];if(!(p<c)&&!n.isConstraint(c,p)){for(var y=h[d-1],g=-1,A=1;A<h.length;A+=2)if(h[A-1]===p){g=h[A];break}g<0||t(r[c],r[p],r[y],r[g])<0&&f.push(c,p)}}for(;f.length>0;){for(var p=f.pop(),c=f.pop(),y=-1,g=-1,h=o[c],b=1;b<h.length;b+=2){var M=h[b-1],_=h[b];M===p?g=_:_===p&&(y=M)}y<0||g<0||t(r[c],r[p],r[y],r[g])>=0||(n.flip(c,p),i(r,n,f,y,c,g),i(r,n,f,c,g,y),i(r,n,f,g,p,y),i(r,n,f,p,y,g))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(s,m,x){var t=s("binary-search-bounds");m.exports=l;function i(o,c,h,d,p,y,g){this.cells=o,this.neighbor=c,this.flags=d,this.constraint=h,this.active=p,this.next=y,this.boundary=g}var a=i.prototype;function r(o,c){return o[0]-c[0]||o[1]-c[1]||o[2]-c[2]}a.locate=function(){var o=[0,0,0];return function(c,h,d){var p=c,y=h,g=d;return h<d?h<c&&(p=h,y=d,g=c):d<c&&(p=d,y=c,g=h),p<0?-1:(o[0]=p,o[1]=y,o[2]=g,t.eq(this.cells,o,r))}}();function n(o,c){for(var h=o.cells(),d=h.length,p=0;p<d;++p){var y=h[p],g=y[0],A=y[1],b=y[2];A<b?A<g&&(y[0]=A,y[1]=b,y[2]=g):b<g&&(y[0]=b,y[1]=g,y[2]=A)}h.sort(r);for(var M=new Array(d),p=0;p<M.length;++p)M[p]=0;var _=[],T=[],w=new Array(3*d),v=new Array(3*d),L=null;c&&(L=[]);for(var S=new i(h,w,v,M,_,T,L),p=0;p<d;++p)for(var y=h[p],k=0;k<3;++k){var g=y[k],A=y[(k+1)%3],P=w[3*p+k]=S.locate(A,g,o.opposite(A,g)),O=v[3*p+k]=o.isConstraint(g,A);P<0&&(O?T.push(p):(_.push(p),M[p]=1),c&&L.push([A,g,-1]))}return S}function f(o,c,h){for(var d=0,p=0;p<o.length;++p)c[p]===h&&(o[d++]=o[p]);return o.length=d,o}function l(o,c,h){var d=n(o,h);if(c===0)return h?d.cells.concat(d.boundary):d.cells;for(var p=1,y=d.active,g=d.next,A=d.flags,b=d.cells,M=d.constraint,_=d.neighbor;y.length>0||g.length>0;){for(;y.length>0;){var T=y.pop();if(A[T]!==-p){A[T]=p,b[T];for(var w=0;w<3;++w){var v=_[3*T+w];v>=0&&A[v]===0&&(M[3*T+w]?g.push(v):(y.push(v),A[v]=p))}}}var L=g;g=y,y=L,g.length=0,p=-p}var S=f(b,A,c);return h?S.concat(d.boundary):S}},{"binary-search-bounds":31}],45:[function(s,m,x){var t=s("binary-search-bounds"),i=s("robust-orientation")[3],a=0,r=1,n=2;m.exports=g;function f(A,b,M,_,T){this.a=A,this.b=b,this.idx=M,this.lowerIds=_,this.upperIds=T}function l(A,b,M,_){this.a=A,this.b=b,this.type=M,this.idx=_}function o(A,b){var M=A.a[0]-b.a[0]||A.a[1]-b.a[1]||A.type-b.type;return M||A.type!==a&&(M=i(A.a,A.b,b.b),M)?M:A.idx-b.idx}function c(A,b){return i(A.a,A.b,b)}function h(A,b,M,_,T){for(var w=t.lt(b,_,c),v=t.gt(b,_,c),L=w;L<v;++L){for(var S=b[L],k=S.lowerIds,P=k.length;P>1&&i(M[k[P-2]],M[k[P-1]],_)>0;)A.push([k[P-1],k[P-2],T]),P-=1;k.length=P,k.push(T);for(var O=S.upperIds,P=O.length;P>1&&i(M[O[P-2]],M[O[P-1]],_)<0;)A.push([O[P-2],O[P-1],T]),P-=1;O.length=P,O.push(T)}}function d(A,b){var M;return A.a[0]<b.a[0]?M=i(A.a,A.b,b.a):M=i(b.b,b.a,A.a),M||(b.b[0]<A.b[0]?M=i(A.a,A.b,b.b):M=i(b.b,b.a,A.b),M||A.idx-b.idx)}function p(A,b,M){var _=t.le(A,M,d),T=A[_],w=T.upperIds,v=w[w.length-1];T.upperIds=[v],A.splice(_+1,0,new f(M.a,M.b,M.idx,[v],w))}function y(A,b,M){var _=M.a;M.a=M.b,M.b=_;var T=t.eq(A,M,d),w=A[T],v=A[T-1];v.upperIds=w.upperIds,A.splice(T,1)}function g(A,b){for(var M=A.length,_=b.length,T=[],w=0;w<M;++w)T.push(new l(A[w],null,a,w));for(var w=0;w<_;++w){var v=b[w],L=A[v[0]],S=A[v[1]];L[0]<S[0]?T.push(new l(L,S,n,w),new l(S,L,r,w)):L[0]>S[0]&&T.push(new l(S,L,n,w),new l(L,S,r,w))}T.sort(o);for(var k=T[0].a[0]-(1+Math.abs(T[0].a[0]))*Math.pow(2,-52),P=[new f([k,1],[k,0],-1,[],[],[],[])],O=[],w=0,F=T.length;w<F;++w){var I=T[w],D=I.type;D===a?h(O,P,A,I.a,I.idx):D===n?p(P,A,I):y(P,A,I)}return O}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(s,m,x){var t=s("binary-search-bounds");m.exports=n;function i(f,l){this.stars=f,this.edges=l}var a=i.prototype;function r(f,l,o){for(var c=1,h=f.length;c<h;c+=2)if(f[c-1]===l&&f[c]===o){f[c-1]=f[h-2],f[c]=f[h-1],f.length=h-2;return}}a.isConstraint=function(){var f=[0,0];function l(o,c){return o[0]-c[0]||o[1]-c[1]}return function(o,c){return f[0]=Math.min(o,c),f[1]=Math.max(o,c),t.eq(this.edges,f,l)>=0}}(),a.removeTriangle=function(f,l,o){var c=this.stars;r(c[f],l,o),r(c[l],o,f),r(c[o],f,l)},a.addTriangle=function(f,l,o){var c=this.stars;c[f].push(l,o),c[l].push(o,f),c[o].push(f,l)},a.opposite=function(f,l){for(var o=this.stars[l],c=1,h=o.length;c<h;c+=2)if(o[c]===f)return o[c-1];return-1},a.flip=function(f,l){var o=this.opposite(f,l),c=this.opposite(l,f);this.removeTriangle(f,l,o),this.removeTriangle(l,f,c),this.addTriangle(f,c,o),this.addTriangle(l,o,c)},a.edges=function(){for(var f=this.stars,l=[],o=0,c=f.length;o<c;++o)for(var h=f[o],d=0,p=h.length;d<p;d+=2)l.push([h[d],h[d+1]]);return l},a.cells=function(){for(var f=this.stars,l=[],o=0,c=f.length;o<c;++o)for(var h=f[o],d=0,p=h.length;d<p;d+=2){var y=h[d],g=h[d+1];o<Math.min(y,g)&&l.push([o,y,g])}return l};function n(f,l){for(var o=new Array(f),c=0;c<f;++c)o[c]=[];return new i(o,l)}},{"binary-search-bounds":31}],47:[function(s,m,x){m.exports=t;function t(i){for(var a=1,r=1;r<i.length;++r)for(var n=0;n<r;++n)if(i[r]<i[n])a=-a;else if(i[n]===i[r])return 0;return a}},{}],48:[function(s,m,x){var t=s("dup"),i=s("robust-linear-solve");function a(f,l){for(var o=0,c=f.length,h=0;h<c;++h)o+=f[h]*l[h];return o}function r(f){var l=f.length;if(l===0)return[];f[0].length;var o=t([f.length+1,f.length+1],1),c=t([f.length+1],1);o[l][l]=0;for(var h=0;h<l;++h){for(var d=0;d<=h;++d)o[d][h]=o[h][d]=2*a(f[h],f[d]);c[h]=a(f[h],f[h])}for(var p=i(o,c),y=0,g=p[l+1],h=0;h<g.length;++h)y+=g[h];for(var A=new Array(l),h=0;h<l;++h){for(var g=p[h],b=0,d=0;d<g.length;++d)b+=g[d];A[h]=b/y}return A}function n(f){if(f.length===0)return[];for(var l=f[0].length,o=t([l]),c=r(f),h=0;h<f.length;++h)for(var d=0;d<l;++d)o[d]+=f[h][d]*c[h];return o}n.barycenetric=r,m.exports=n},{dup:65,"robust-linear-solve":283}],49:[function(s,m,x){m.exports=i;var t=s("circumcenter");function i(a){for(var r=t(a),n=0,f=0;f<a.length;++f)for(var l=a[f],o=0;o<r.length;++o)n+=Math.pow(l[o]-r[o],2);return Math.sqrt(n/a.length)}},{circumcenter:48}],50:[function(s,m,x){m.exports=L;var t=s("union-find"),i=s("box-intersect"),a=s("robust-segment-intersect"),r=s("big-rat"),n=s("big-rat/cmp"),f=s("big-rat/to-float"),l=s("rat-vec"),o=s("nextafter"),c=s("./lib/rat-seg-intersect");function h(S){var k=f(S);return[o(k,-1/0),o(k,1/0)]}function d(S,k){for(var P=new Array(k.length),O=0;O<k.length;++O){var F=k[O],I=S[F[0]],D=S[F[1]];P[O]=[o(Math.min(I[0],D[0]),-1/0),o(Math.min(I[1],D[1]),-1/0),o(Math.max(I[0],D[0]),1/0),o(Math.max(I[1],D[1]),1/0)]}return P}function p(S){for(var k=new Array(S.length),P=0;P<S.length;++P){var O=S[P];k[P]=[o(O[0],-1/0),o(O[1],-1/0),o(O[0],1/0),o(O[1],1/0)]}return k}function y(S,k,P){var O=[];return i(P,function(F,I){var D=k[F],U=k[I];if(!(D[0]===U[0]||D[0]===U[1]||D[1]===U[0]||D[1]===U[1])){var B=S[D[0]],j=S[D[1]],Z=S[U[0]],ee=S[U[1]];a(B,j,Z,ee)&&O.push([F,I])}}),O}function g(S,k,P,O){var F=[];return i(P,O,function(I,D){var U=k[I];if(!(U[0]===D||U[1]===D)){var B=S[D],j=S[U[0]],Z=S[U[1]];a(j,Z,B,B)&&F.push([I,D])}}),F}function A(S,k,P,O,F){var I,D,U=S.map(function(ae){return[r(ae[0]),r(ae[1])]});for(I=0;I<P.length;++I){var B=P[I];D=B[0];var j=B[1],Z=k[D],ee=k[j],q=c(l(S[Z[0]]),l(S[Z[1]]),l(S[ee[0]]),l(S[ee[1]]));if(!!q){var W=S.length;S.push([f(q[0]),f(q[1])]),U.push(q),O.push([D,W],[j,W])}}for(O.sort(function(ae,ie){if(ae[0]!==ie[0])return ae[0]-ie[0];var oe=U[ae[1]],ue=U[ie[1]];return n(oe[0],ue[0])||n(oe[1],ue[1])}),I=O.length-1;I>=0;--I){var J=O[I];D=J[0];var le=k[D],fe=le[0],se=le[1],H=S[fe],Y=S[se];if((H[0]-Y[0]||H[1]-Y[1])<0){var ne=fe;fe=se,se=ne}le[0]=fe;var te=le[1]=J[1],K;for(F&&(K=le[2]);I>0&&O[I-1][0]===D;){var J=O[--I],$=J[1];F?k.push([te,$,K]):k.push([te,$]),te=$}F?k.push([te,se,K]):k.push([te,se])}return U}function b(S,k,P){for(var O=k.length,F=new t(O),I=[],D=0;D<k.length;++D){var U=k[D],B=h(U[0]),j=h(U[1]);I.push([o(B[0],-1/0),o(j[0],-1/0),o(B[1],1/0),o(j[1],1/0)])}i(I,function(J,le){F.link(J,le)});for(var Z=!0,ee=new Array(O),D=0;D<O;++D){var q=F.find(D);q!==D&&(Z=!1,S[q]=[Math.min(S[D][0],S[q][0]),Math.min(S[D][1],S[q][1])])}if(Z)return null;for(var W=0,D=0;D<O;++D){var q=F.find(D);q===D?(ee[D]=W,S[W++]=S[D]):ee[D]=-1}S.length=W;for(var D=0;D<O;++D)ee[D]<0&&(ee[D]=ee[F.find(D)]);return ee}function M(S,k){return S[0]-k[0]||S[1]-k[1]}function _(S,k){var P=S[0]-k[0]||S[1]-k[1];return P||(S[2]<k[2]?-1:S[2]>k[2]?1:0)}function T(S,k,P){if(S.length!==0){if(k)for(var O=0;O<S.length;++O){var F=S[O],I=k[F[0]],D=k[F[1]];F[0]=Math.min(I,D),F[1]=Math.max(I,D)}else for(var O=0;O<S.length;++O){var F=S[O],I=F[0],D=F[1];F[0]=Math.min(I,D),F[1]=Math.max(I,D)}P?S.sort(_):S.sort(M);for(var U=1,O=1;O<S.length;++O){var B=S[O-1],j=S[O];j[0]===B[0]&&j[1]===B[1]&&(!P||j[2]===B[2])||(S[U++]=j)}S.length=U}}function w(S,k,P){var O=b(S,[],p(S));return T(k,O,P),!!O}function v(S,k,P){var O=d(S,k),F=y(S,k,O),I=p(S),D=g(S,k,O,I),U=A(S,k,F,D,P),B=b(S,U);return T(k,B,P),B?!0:F.length>0||D.length>0}function L(S,k,P){var O;if(P){O=k;for(var F=new Array(k.length),I=0;I<k.length;++I){var D=k[I];F[I]=[D[0],D[1],P[I]]}k=F}for(var U=w(S,k,!!P);v(S,k,!!P);)U=!0;if(!!P&&U){O.length=0,P.length=0;for(var I=0;I<k.length;++I){var D=k[I];O.push([D[0],D[1]]),P.push(D[2])}}return U}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(s,m,x){m.exports=c;var t=s("big-rat/mul"),i=s("big-rat/div"),a=s("big-rat/sub"),r=s("big-rat/sign"),n=s("rat-vec/sub"),f=s("rat-vec/add"),l=s("rat-vec/muls");function o(h,d){return a(t(h[0],d[1]),t(h[1],d[0]))}function c(h,d,p,y){var g=n(d,h),A=n(y,p),b=o(g,A);if(r(b)===0)return null;var M=n(h,p),_=o(A,M),T=i(_,b),w=l(g,T),v=f(h,w);return v}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(s,m,x){m.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(s,m,x){var t=s("./colorScale"),i=s("lerp");m.exports=a;function a(l){var o,c,h,d,p,y,g,A,b,M,_;if(l||(l={}),A=(l.nshades||72)-1,g=l.format||"hex",y=l.colormap,y||(y="jet"),typeof y=="string"){if(y=y.toLowerCase(),!t[y])throw Error(y+" not a supported colorscale");p=t[y]}else if(Array.isArray(y))p=y.slice();else throw Error("unsupported colormap option",y);if(p.length>A+1)throw new Error(y+" map requires nshades to be at least size "+p.length);Array.isArray(l.alpha)?l.alpha.length!==2?M=[1,1]:M=l.alpha.slice():typeof l.alpha=="number"?M=[l.alpha,l.alpha]:M=[1,1],o=p.map(function(L){return Math.round(L.index*A)}),M[0]=Math.min(Math.max(M[0],0),1),M[1]=Math.min(Math.max(M[1],0),1);var T=p.map(function(L,S){var k=p[S].index,P=p[S].rgb.slice();return P.length===4&&P[3]>=0&&P[3]<=1||(P[3]=M[0]+(M[1]-M[0])*k),P}),b=[];for(_=0;_<o.length-1;++_){d=o[_+1]-o[_],c=T[_],h=T[_+1];for(var w=0;w<d;w++){var v=w/d;b.push([Math.round(i(c[0],h[0],v)),Math.round(i(c[1],h[1],v)),Math.round(i(c[2],h[2],v)),i(c[3],h[3],v)])}}return b.push(p[p.length-1].rgb.concat(M[1])),g==="hex"?b=b.map(n):g==="rgbaString"?b=b.map(f):g==="float"&&(b=b.map(r)),b}function r(l){return[l[0]/255,l[1]/255,l[2]/255,l[3]]}function n(l){for(var o,c="#",h=0;h<3;++h)o=l[h],o=o.toString(16),c+=("00"+o).substr(o.length);return c}function f(l){return"rgba("+l.join(",")+")"}},{"./colorScale":52,lerp:240}],54:[function(s,m,x){m.exports=l;var t=s("robust-orientation"),i=s("signum"),a=s("two-sum"),r=s("robust-product"),n=s("robust-sum");function f(o,c,h){var d=a(o[0],-c[0]),p=a(o[1],-c[1]),y=a(h[0],-c[0]),g=a(h[1],-c[1]),A=n(r(d,y),r(p,g));return A[A.length-1]>=0}function l(o,c,h,d){var p=t(c,h,d);if(p===0){var y=i(t(o,c,h)),g=i(t(o,c,d));if(y===g){if(y===0){var A=f(o,c,h),b=f(o,c,d);return A===b?0:A?1:-1}return 0}else{if(g===0)return y>0||f(o,c,d)?-1:1;if(y===0)return g>0||f(o,c,h)?1:-1}return i(g-y)}var M=t(o,c,h);if(M>0)return p>0&&t(o,c,d)>0?1:-1;if(M<0)return p>0||t(o,c,d)>0?1:-1;var _=t(o,c,d);return _>0||f(o,c,h)?1:-1}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(s,m,x){m.exports=function(i){return i<0?-1:i>0?1:0}},{}],56:[function(s,m,x){m.exports=a;var t=Math.min;function i(r,n){return r-n}function a(r,n){var f=r.length,l=r.length-n.length;if(l)return l;switch(f){case 0:return 0;case 1:return r[0]-n[0];case 2:return r[0]+r[1]-n[0]-n[1]||t(r[0],r[1])-t(n[0],n[1]);case 3:var o=r[0]+r[1],c=n[0]+n[1];if(l=o+r[2]-(c+n[2]),l)return l;var h=t(r[0],r[1]),d=t(n[0],n[1]);return t(h,r[2])-t(d,n[2])||t(h+r[2],o)-t(d+n[2],c);case 4:var p=r[0],y=r[1],g=r[2],A=r[3],b=n[0],M=n[1],_=n[2],T=n[3];return p+y+g+A-(b+M+_+T)||t(p,y,g,A)-t(b,M,_,T,b)||t(p+y,p+g,p+A,y+g,y+A,g+A)-t(b+M,b+_,b+T,M+_,M+T,_+T)||t(p+y+g,p+y+A,p+g+A,y+g+A)-t(b+M+_,b+M+T,b+_+T,M+_+T);default:for(var w=r.slice().sort(i),v=n.slice().sort(i),L=0;L<f;++L)if(l=w[L]-v[L],l)return l;return 0}}},{}],57:[function(s,m,x){var t=s("compare-cell"),i=s("cell-orientation");m.exports=a;function a(r,n){return t(r,n)||i(r)-i(n)}},{"cell-orientation":47,"compare-cell":56}],58:[function(s,m,x){var t=s("./lib/ch1d"),i=s("./lib/ch2d"),a=s("./lib/chnd");m.exports=r;function r(n){var f=n.length;if(f===0)return[];if(f===1)return[[0]];var l=n[0].length;return l===0?[]:l===1?t(n):l===2?i(n):a(n,l)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(s,m,x){m.exports=t;function t(i){for(var a=0,r=0,n=1;n<i.length;++n)i[n][0]<i[a][0]&&(a=n),i[n][0]>i[r][0]&&(r=n);return a<r?[[a],[r]]:a>r?[[r],[a]]:[[a]]}},{}],60:[function(s,m,x){m.exports=i;var t=s("monotone-convex-hull-2d");function i(a){var r=t(a),n=r.length;if(n<=2)return[];for(var f=new Array(n),l=r[n-1],o=0;o<n;++o){var c=r[o];f[o]=[l,c],l=c}return f}},{"monotone-convex-hull-2d":246}],61:[function(s,m,x){m.exports=n;var t=s("incremental-convex-hull"),i=s("affine-hull");function a(f,l){for(var o=f.length,c=new Array(o),h=0;h<l.length;++h)c[h]=f[l[h]];for(var d=l.length,h=0;h<o;++h)l.indexOf(h)<0&&(c[d++]=f[h]);return c}function r(f,l){for(var o=f.length,c=l.length,h=0;h<o;++h)for(var d=f[h],p=0;p<d.length;++p){var y=d[p];if(y<c)d[p]=l[y];else{y=y-c;for(var g=0;g<c;++g)y>=l[g]&&(y+=1);d[p]=y}}return f}function n(f,l){try{return t(f,!0)}catch{var o=i(f);if(o.length<=l)return[];var c=a(f,o),h=t(c,!0);return r(h,o)}}},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(s,m,x){function t(a,r,n,f,l,o){var c=6*l*l-6*l,h=3*l*l-4*l+1,d=-6*l*l+6*l,p=3*l*l-2*l;if(a.length){o||(o=new Array(a.length));for(var y=a.length-1;y>=0;--y)o[y]=c*a[y]+h*r[y]+d*n[y]+p*f[y];return o}return c*a+h*r+d*n[y]+p*f}function i(a,r,n,f,l,o){var c=l-1,h=l*l,d=c*c,p=(1+2*l)*d,y=l*d,g=h*(3-2*l),A=h*c;if(a.length){o||(o=new Array(a.length));for(var b=a.length-1;b>=0;--b)o[b]=p*a[b]+y*r[b]+g*n[b]+A*f[b];return o}return p*a+y*r+g*n+A*f}m.exports=i,m.exports.derivative=t},{}],63:[function(s,m,x){var t=s("incremental-convex-hull"),i=s("uniq");m.exports=f;function a(l,o){this.point=l,this.index=o}function r(l,o){for(var c=l.point,h=o.point,d=c.length,p=0;p<d;++p){var y=h[p]-c[p];if(y)return y}return 0}function n(l,o,c){if(l===1)return c?[[-1,0]]:[];var h=o.map(function(A,b){return[A[0],b]});h.sort(function(A,b){return A[0]-b[0]});for(var d=new Array(l-1),p=1;p<l;++p){var y=h[p-1],g=h[p];d[p-1]=[y[1],g[1]]}return c&&d.push([-1,d[0][1]],[d[l-1][1],-1]),d}function f(l,o){var c=l.length;if(c===0)return[];var h=l[0].length;if(h<1)return[];if(h===1)return n(c,l,o);for(var d=new Array(c),p=1,y=0;y<c;++y){for(var g=l[y],A=new Array(h+1),b=0,M=0;M<h;++M){var _=g[M];A[M]=_,b+=_*_}A[h]=b,d[y]=new a(A,y),p=Math.max(b,p)}i(d,r),c=d.length;for(var T=new Array(c+h+1),w=new Array(c+h+1),v=(h+1)*(h+1)*p,L=new Array(h+1),y=0;y<=h;++y)L[y]=0;L[h]=v,T[0]=L.slice(),w[0]=-1;for(var y=0;y<=h;++y){var A=L.slice();A[y]=1,T[y+1]=A,w[y+1]=-1}for(var y=0;y<c;++y){var S=d[y];T[y+h+1]=S.point,w[y+h+1]=S.index}var k=t(T,!1);if(o?k=k.filter(function(P){for(var O=0,F=0;F<=h;++F){var I=w[P[F]];if(I<0&&++O>=2)return!1;P[F]=I}return!0}):k=k.filter(function(P){for(var O=0;O<=h;++O){var F=w[P[O]];if(F<0)return!1;P[O]=F}return!0}),h&1)for(var y=0;y<k.length;++y){var S=k[y],A=S[0];S[0]=S[1],S[1]=A}return k}},{"incremental-convex-hull":233,uniq:310}],64:[function(s,m,x){(function(t){(function(){var i=!1;if(typeof Float64Array!="undefined"){var a=new Float64Array(1),r=new Uint32Array(a.buffer);if(a[0]=1,i=!0,r[1]===1072693248){let f=function(c,h){return r[0]=c,r[1]=h,a[0]},l=function(c){return a[0]=c,r[0]},o=function(c){return a[0]=c,r[1]};m.exports=function(h){return a[0]=h,[r[0],r[1]]},m.exports.pack=f,m.exports.lo=l,m.exports.hi=o}else if(r[0]===1072693248){let f=function(c,h){return r[1]=c,r[0]=h,a[0]},l=function(c){return a[0]=c,r[1]},o=function(c){return a[0]=c,r[0]};m.exports=function(h){return a[0]=h,[r[1],r[0]]},m.exports.pack=f,m.exports.lo=l,m.exports.hi=o}else i=!1}if(!i){let f=function(c,h){return n.writeUInt32LE(c,0,!0),n.writeUInt32LE(h,4,!0),n.readDoubleLE(0,!0)},l=function(c){return n.writeDoubleLE(c,0,!0),n.readUInt32LE(0,!0)},o=function(c){return n.writeDoubleLE(c,0,!0),n.readUInt32LE(4,!0)};var n=new t(8);m.exports=function(h){return n.writeDoubleLE(h,0,!0),[n.readUInt32LE(0,!0),n.readUInt32LE(4,!0)]},m.exports.pack=f,m.exports.lo=l,m.exports.hi=o}m.exports.sign=function(f){return m.exports.hi(f)>>>31},m.exports.exponent=function(f){var l=m.exports.hi(f);return(l<<1>>>21)-1023},m.exports.fraction=function(f){var l=m.exports.lo(f),o=m.exports.hi(f),c=o&(1<<20)-1;return o&2146435072&&(c+=1<<20),[l,c]},m.exports.denormalized=function(f){var l=m.exports.hi(f);return!(l&2146435072)}}).call(this)}).call(this,s("buffer").Buffer)},{buffer:3}],65:[function(s,m,x){function t(r,n,f){var l=r[f]|0;if(l<=0)return[];var o=new Array(l),c;if(f===r.length-1)for(c=0;c<l;++c)o[c]=n;else for(c=0;c<l;++c)o[c]=t(r,n,f+1);return o}function i(r,n){var f,l;for(f=new Array(r),l=0;l<r;++l)f[l]=n;return f}function a(r,n){switch(typeof n=="undefined"&&(n=0),typeof r){case"number":if(r>0)return i(r|0,n);break;case"object":if(typeof r.length=="number")return t(r,n,0);break}return[]}m.exports=a},{}],66:[function(s,m,x){m.exports=i;var t=s("uniq");function i(a,r){var n=a.length;if(typeof r!="number"){r=0;for(var f=0;f<n;++f){var l=a[f];r=Math.max(r,l[0],l[1])}r=(r|0)+1}r=r|0;for(var o=new Array(r),f=0;f<r;++f)o[f]=[];for(var f=0;f<n;++f){var l=a[f];o[l[0]].push(l[1]),o[l[1]].push(l[0])}for(var c=0;c<r;++c)t(o[c],function(h,d){return h-d});return o}},{uniq:310}],67:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a||0,f=r||1;return[[i[12]+i[0],i[13]+i[1],i[14]+i[2],i[15]+i[3]],[i[12]-i[0],i[13]-i[1],i[14]-i[2],i[15]-i[3]],[i[12]+i[4],i[13]+i[5],i[14]+i[6],i[15]+i[7]],[i[12]-i[4],i[13]-i[5],i[14]-i[6],i[15]-i[7]],[n*i[12]+i[8],n*i[13]+i[9],n*i[14]+i[10],n*i[15]+i[11]],[f*i[12]-i[8],f*i[13]-i[9],f*i[14]-i[10],f*i[15]-i[11]]]}},{}],68:[function(s,m,x){m.exports=l;var t=s("cubic-hermite"),i=s("binary-search-bounds");function a(o,c,h){return Math.min(c,Math.max(o,h))}function r(o,c,h){this.dimension=o.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var d=0;d<this.dimension;++d)this.bounds[0][d]=-1/0,this.bounds[1][d]=1/0;this._state=o.slice().reverse(),this._velocity=c.slice().reverse(),this._time=[h],this._scratch=[o.slice(),o.slice(),o.slice(),o.slice(),o.slice()]}var n=r.prototype;n.flush=function(o){var c=i.gt(this._time,o)-1;c<=0||(this._time.splice(0,c),this._state.splice(0,c*this.dimension),this._velocity.splice(0,c*this.dimension))},n.curve=function(o){var c=this._time,h=c.length,d=i.le(c,o),p=this._scratch[0],y=this._state,g=this._velocity,A=this.dimension,b=this.bounds;if(d<0)for(var M=A-1,_=0;_<A;++_,--M)p[_]=y[M];else if(d>=h-1)for(var M=y.length-1,T=o-c[h-1],_=0;_<A;++_,--M)p[_]=y[M]+T*g[M];else{for(var M=A*(d+1)-1,w=c[d],v=c[d+1],L=v-w||1,S=this._scratch[1],k=this._scratch[2],P=this._scratch[3],O=this._scratch[4],F=!0,_=0;_<A;++_,--M)S[_]=y[M],P[_]=g[M]*L,k[_]=y[M+A],O[_]=g[M+A]*L,F=F&&S[_]===k[_]&&P[_]===O[_]&&P[_]===0;if(F)for(var _=0;_<A;++_)p[_]=S[_];else t(S,P,k,O,(o-w)/L,p)}for(var I=b[0],D=b[1],_=0;_<A;++_)p[_]=a(I[_],D[_],p[_]);return p},n.dcurve=function(o){var c=this._time,h=c.length,d=i.le(c,o),p=this._scratch[0],y=this._state,g=this._velocity,A=this.dimension;if(d>=h-1){var b=y.length-1;o-c[h-1];for(var M=0;M<A;++M,--b)p[M]=g[b]}else{for(var b=A*(d+1)-1,_=c[d],T=c[d+1],w=T-_||1,v=this._scratch[1],L=this._scratch[2],S=this._scratch[3],k=this._scratch[4],P=!0,M=0;M<A;++M,--b)v[M]=y[b],S[M]=g[b]*w,L[M]=y[b+A],k[M]=g[b+A]*w,P=P&&v[M]===L[M]&&S[M]===k[M]&&S[M]===0;if(P)for(var M=0;M<A;++M)p[M]=0;else{t.derivative(v,S,L,k,(o-_)/w,p);for(var M=0;M<A;++M)p[M]/=w}}return p},n.lastT=function(){var o=this._time;return o[o.length-1]},n.stable=function(){for(var o=this._velocity,c=o.length,h=this.dimension-1;h>=0;--h)if(o[--c])return!1;return!0},n.jump=function(o){var c=this.lastT(),h=this.dimension;if(!(o<c||arguments.length!==h+1)){var d=this._state,p=this._velocity,y=d.length-this.dimension,g=this.bounds,A=g[0],b=g[1];this._time.push(c,o);for(var M=0;M<2;++M)for(var _=0;_<h;++_)d.push(d[y++]),p.push(0);this._time.push(o);for(var _=h;_>0;--_)d.push(a(A[_-1],b[_-1],arguments[_])),p.push(0)}},n.push=function(o){var c=this.lastT(),h=this.dimension;if(!(o<c||arguments.length!==h+1)){var d=this._state,p=this._velocity,y=d.length-this.dimension,g=o-c,A=this.bounds,b=A[0],M=A[1],_=g>1e-6?1/g:0;this._time.push(o);for(var T=h;T>0;--T){var w=a(b[T-1],M[T-1],arguments[T]);d.push(w),p.push((w-d[y++])*_)}}},n.set=function(o){var c=this.dimension;if(!(o<this.lastT()||arguments.length!==c+1)){var h=this._state,d=this._velocity,p=this.bounds,y=p[0],g=p[1];this._time.push(o);for(var A=c;A>0;--A)h.push(a(y[A-1],g[A-1],arguments[A])),d.push(0)}},n.move=function(o){var c=this.lastT(),h=this.dimension;if(!(o<=c||arguments.length!==h+1)){var d=this._state,p=this._velocity,y=d.length-this.dimension,g=this.bounds,A=g[0],b=g[1],M=o-c,_=M>1e-6?1/M:0;this._time.push(o);for(var T=h;T>0;--T){var w=arguments[T];d.push(a(A[T-1],b[T-1],d[y++]+w)),p.push(w*_)}}},n.idle=function(o){var c=this.lastT();if(!(o<c)){var h=this.dimension,d=this._state,p=this._velocity,y=d.length-h,g=this.bounds,A=g[0],b=g[1],M=o-c;this._time.push(o);for(var _=h-1;_>=0;--_)d.push(a(A[_],b[_],d[y]+M*p[y])),p.push(0),y+=1}};function f(o){for(var c=new Array(o),h=0;h<o;++h)c[h]=0;return c}function l(o,c,h){switch(arguments.length){case 0:return new r([0],[0],0);case 1:if(typeof o=="number"){var d=f(o);return new r(d,d,0)}else return new r(o,f(o.length),0);case 2:if(typeof c=="number"){var d=f(o.length);return new r(o,d,+c)}else h=0;case 3:if(o.length!==c.length)throw new Error("state and velocity lengths must match");return new r(o,c,h)}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(s,m,x){m.exports=M;var t=0,i=1;function a(_,T,w,v,L,S){this._color=_,this.key=T,this.value=w,this.left=v,this.right=L,this._count=S}function r(_){return new a(_._color,_.key,_.value,_.left,_.right,_._count)}function n(_,T){return new a(_,T.key,T.value,T.left,T.right,T._count)}function f(_){_._count=1+(_.left?_.left._count:0)+(_.right?_.right._count:0)}function l(_,T){this._compare=_,this.root=T}var o=l.prototype;Object.defineProperty(o,"keys",{get:function(){var _=[];return this.forEach(function(T,w){_.push(T)}),_}}),Object.defineProperty(o,"values",{get:function(){var _=[];return this.forEach(function(T,w){_.push(w)}),_}}),Object.defineProperty(o,"length",{get:function(){return this.root?this.root._count:0}}),o.insert=function(_,T){for(var w=this._compare,v=this.root,L=[],S=[];v;){var k=w(_,v.key);L.push(v),S.push(k),k<=0?v=v.left:v=v.right}L.push(new a(t,_,T,null,null,1));for(var P=L.length-2;P>=0;--P){var v=L[P];S[P]<=0?L[P]=new a(v._color,v.key,v.value,L[P+1],v.right,v._count+1):L[P]=new a(v._color,v.key,v.value,v.left,L[P+1],v._count+1)}for(var P=L.length-1;P>1;--P){var O=L[P-1],v=L[P];if(O._color===i||v._color===i)break;var F=L[P-2];if(F.left===O)if(O.left===v){var I=F.right;if(I&&I._color===t)O._color=i,F.right=n(i,I),F._color=t,P-=1;else{if(F._color=t,F.left=O.right,O._color=i,O.right=F,L[P-2]=O,L[P-1]=v,f(F),f(O),P>=3){var D=L[P-3];D.left===F?D.left=O:D.right=O}break}}else{var I=F.right;if(I&&I._color===t)O._color=i,F.right=n(i,I),F._color=t,P-=1;else{if(O.right=v.left,F._color=t,F.left=v.right,v._color=i,v.left=O,v.right=F,L[P-2]=v,L[P-1]=O,f(F),f(O),f(v),P>=3){var D=L[P-3];D.left===F?D.left=v:D.right=v}break}}else if(O.right===v){var I=F.left;if(I&&I._color===t)O._color=i,F.left=n(i,I),F._color=t,P-=1;else{if(F._color=t,F.right=O.left,O._color=i,O.left=F,L[P-2]=O,L[P-1]=v,f(F),f(O),P>=3){var D=L[P-3];D.right===F?D.right=O:D.left=O}break}}else{var I=F.left;if(I&&I._color===t)O._color=i,F.left=n(i,I),F._color=t,P-=1;else{if(O.left=v.right,F._color=t,F.right=v.left,v._color=i,v.right=O,v.left=F,L[P-2]=v,L[P-1]=O,f(F),f(O),f(v),P>=3){var D=L[P-3];D.right===F?D.right=v:D.left=v}break}}}return L[0]._color=i,new l(w,L[0])};function c(_,T){if(T.left){var w=c(_,T.left);if(w)return w}var w=_(T.key,T.value);if(w)return w;if(T.right)return c(_,T.right)}function h(_,T,w,v){var L=T(_,v.key);if(L<=0){if(v.left){var S=h(_,T,w,v.left);if(S)return S}var S=w(v.key,v.value);if(S)return S}if(v.right)return h(_,T,w,v.right)}function d(_,T,w,v,L){var S=w(_,L.key),k=w(T,L.key),P;if(S<=0&&(L.left&&(P=d(_,T,w,v,L.left),P)||k>0&&(P=v(L.key,L.value),P)))return P;if(k>0&&L.right)return d(_,T,w,v,L.right)}o.forEach=function(T,w,v){if(!!this.root)switch(arguments.length){case 1:return c(T,this.root);case 2:return h(w,this._compare,T,this.root);case 3:return this._compare(w,v)>=0?void 0:d(w,v,this._compare,T,this.root)}},Object.defineProperty(o,"begin",{get:function(){for(var _=[],T=this.root;T;)_.push(T),T=T.left;return new p(this,_)}}),Object.defineProperty(o,"end",{get:function(){for(var _=[],T=this.root;T;)_.push(T),T=T.right;return new p(this,_)}}),o.at=function(_){if(_<0)return new p(this,[]);for(var T=this.root,w=[];;){if(w.push(T),T.left){if(_<T.left._count){T=T.left;continue}_-=T.left._count}if(!_)return new p(this,w);if(_-=1,T.right){if(_>=T.right._count)break;T=T.right}else break}return new p(this,[])},o.ge=function(_){for(var T=this._compare,w=this.root,v=[],L=0;w;){var S=T(_,w.key);v.push(w),S<=0&&(L=v.length),S<=0?w=w.left:w=w.right}return v.length=L,new p(this,v)},o.gt=function(_){for(var T=this._compare,w=this.root,v=[],L=0;w;){var S=T(_,w.key);v.push(w),S<0&&(L=v.length),S<0?w=w.left:w=w.right}return v.length=L,new p(this,v)},o.lt=function(_){for(var T=this._compare,w=this.root,v=[],L=0;w;){var S=T(_,w.key);v.push(w),S>0&&(L=v.length),S<=0?w=w.left:w=w.right}return v.length=L,new p(this,v)},o.le=function(_){for(var T=this._compare,w=this.root,v=[],L=0;w;){var S=T(_,w.key);v.push(w),S>=0&&(L=v.length),S<0?w=w.left:w=w.right}return v.length=L,new p(this,v)},o.find=function(_){for(var T=this._compare,w=this.root,v=[];w;){var L=T(_,w.key);if(v.push(w),L===0)return new p(this,v);L<=0?w=w.left:w=w.right}return new p(this,[])},o.remove=function(_){var T=this.find(_);return T?T.remove():this},o.get=function(_){for(var T=this._compare,w=this.root;w;){var v=T(_,w.key);if(v===0)return w.value;v<=0?w=w.left:w=w.right}};function p(_,T){this.tree=_,this._stack=T}var y=p.prototype;Object.defineProperty(y,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(y,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),y.clone=function(){return new p(this.tree,this._stack.slice())};function g(_,T){_.key=T.key,_.value=T.value,_.left=T.left,_.right=T.right,_._color=T._color,_._count=T._count}function A(_){for(var T,w,v,L,S=_.length-1;S>=0;--S){if(T=_[S],S===0){T._color=i;return}if(w=_[S-1],w.left===T){if(v=w.right,v.right&&v.right._color===t){if(v=w.right=r(v),L=v.right=r(v.right),w.right=v.left,v.left=w,v.right=L,v._color=w._color,T._color=i,w._color=i,L._color=i,f(w),f(v),S>1){var k=_[S-2];k.left===w?k.left=v:k.right=v}_[S-1]=v;return}else if(v.left&&v.left._color===t){if(v=w.right=r(v),L=v.left=r(v.left),w.right=L.left,v.left=L.right,L.left=w,L.right=v,L._color=w._color,w._color=i,v._color=i,T._color=i,f(w),f(v),f(L),S>1){var k=_[S-2];k.left===w?k.left=L:k.right=L}_[S-1]=L;return}if(v._color===i)if(w._color===t){w._color=i,w.right=n(t,v);return}else{w.right=n(t,v);continue}else{if(v=r(v),w.right=v.left,v.left=w,v._color=w._color,w._color=t,f(w),f(v),S>1){var k=_[S-2];k.left===w?k.left=v:k.right=v}_[S-1]=v,_[S]=w,S+1<_.length?_[S+1]=T:_.push(T),S=S+2}}else{if(v=w.left,v.left&&v.left._color===t){if(v=w.left=r(v),L=v.left=r(v.left),w.left=v.right,v.right=w,v.left=L,v._color=w._color,T._color=i,w._color=i,L._color=i,f(w),f(v),S>1){var k=_[S-2];k.right===w?k.right=v:k.left=v}_[S-1]=v;return}else if(v.right&&v.right._color===t){if(v=w.left=r(v),L=v.right=r(v.right),w.left=L.right,v.right=L.left,L.right=w,L.left=v,L._color=w._color,w._color=i,v._color=i,T._color=i,f(w),f(v),f(L),S>1){var k=_[S-2];k.right===w?k.right=L:k.left=L}_[S-1]=L;return}if(v._color===i)if(w._color===t){w._color=i,w.left=n(t,v);return}else{w.left=n(t,v);continue}else{if(v=r(v),w.left=v.right,v.right=w,v._color=w._color,w._color=t,f(w),f(v),S>1){var k=_[S-2];k.right===w?k.right=v:k.left=v}_[S-1]=v,_[S]=w,S+1<_.length?_[S+1]=T:_.push(T),S=S+2}}}}y.remove=function(){var _=this._stack;if(_.length===0)return this.tree;var T=new Array(_.length),w=_[_.length-1];T[T.length-1]=new a(w._color,w.key,w.value,w.left,w.right,w._count);for(var v=_.length-2;v>=0;--v){var w=_[v];w.left===_[v+1]?T[v]=new a(w._color,w.key,w.value,T[v+1],w.right,w._count):T[v]=new a(w._color,w.key,w.value,w.left,T[v+1],w._count)}if(w=T[T.length-1],w.left&&w.right){var L=T.length;for(w=w.left;w.right;)T.push(w),w=w.right;var S=T[L-1];T.push(new a(w._color,S.key,S.value,w.left,w.right,w._count)),T[L-1].key=w.key,T[L-1].value=w.value;for(var v=T.length-2;v>=L;--v)w=T[v],T[v]=new a(w._color,w.key,w.value,w.left,T[v+1],w._count);T[L-1].left=T[L]}if(w=T[T.length-1],w._color===t){var k=T[T.length-2];k.left===w?k.left=null:k.right===w&&(k.right=null),T.pop();for(var v=0;v<T.length;++v)T[v]._count--;return new l(this.tree._compare,T[0])}else if(w.left||w.right){w.left?g(w,w.left):w.right&&g(w,w.right),w._color=i;for(var v=0;v<T.length-1;++v)T[v]._count--;return new l(this.tree._compare,T[0])}else{if(T.length===1)return new l(this.tree._compare,null);for(var v=0;v<T.length;++v)T[v]._count--;var P=T[T.length-2];A(T),P.left===w?P.left=null:P.right=null}return new l(this.tree._compare,T[0])},Object.defineProperty(y,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(y,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(y,"index",{get:function(){var _=0,T=this._stack;if(T.length===0){var w=this.tree.root;return w?w._count:0}else T[T.length-1].left&&(_=T[T.length-1].left._count);for(var v=T.length-2;v>=0;--v)T[v+1]===T[v].right&&(++_,T[v].left&&(_+=T[v].left._count));return _},enumerable:!0}),y.next=function(){var _=this._stack;if(_.length!==0){var T=_[_.length-1];if(T.right)for(T=T.right;T;)_.push(T),T=T.left;else for(_.pop();_.length>0&&_[_.length-1].right===T;)T=_[_.length-1],_.pop()}},Object.defineProperty(y,"hasNext",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].right)return!0;for(var T=_.length-1;T>0;--T)if(_[T-1].left===_[T])return!0;return!1}}),y.update=function(_){var T=this._stack;if(T.length===0)throw new Error("Can't update empty node!");var w=new Array(T.length),v=T[T.length-1];w[w.length-1]=new a(v._color,v.key,_,v.left,v.right,v._count);for(var L=T.length-2;L>=0;--L)v=T[L],v.left===T[L+1]?w[L]=new a(v._color,v.key,v.value,w[L+1],v.right,v._count):w[L]=new a(v._color,v.key,v.value,v.left,w[L+1],v._count);return new l(this.tree._compare,w[0])},y.prev=function(){var _=this._stack;if(_.length!==0){var T=_[_.length-1];if(T.left)for(T=T.left;T;)_.push(T),T=T.right;else for(_.pop();_.length>0&&_[_.length-1].left===T;)T=_[_.length-1],_.pop()}},Object.defineProperty(y,"hasPrev",{get:function(){var _=this._stack;if(_.length===0)return!1;if(_[_.length-1].left)return!0;for(var T=_.length-1;T>0;--T)if(_[T-1].right===_[T])return!0;return!1}});function b(_,T){return _<T?-1:_>T?1:0}function M(_){return new l(_||b,null)}},{}],70:[function(s,m,x){m.exports=T;var t=s("./lib/text.js"),i=s("./lib/lines.js"),a=s("./lib/background.js"),r=s("./lib/cube.js"),n=s("./lib/ticks.js"),f=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function l(w,v){return w[0]=v[0],w[1]=v[1],w[2]=v[2],w}function o(w){this.gl=w,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(w)}var c=o.prototype;c.update=function(w){w=w||{};function v(Z,ee,q){if(q in w){var W=w[q],J=this[q],le;(Z?Array.isArray(W)&&Array.isArray(W[0]):Array.isArray(W))?this[q]=le=[ee(W[0]),ee(W[1]),ee(W[2])]:this[q]=le=[ee(W),ee(W),ee(W)];for(var fe=0;fe<3;++fe)if(le[fe]!==J[fe])return!0}return!1}var L=v.bind(this,!1,Number),S=v.bind(this,!1,Boolean),k=v.bind(this,!1,String),P=v.bind(this,!0,function(Z){if(Array.isArray(Z)){if(Z.length===3)return[+Z[0],+Z[1],+Z[2],1];if(Z.length===4)return[+Z[0],+Z[1],+Z[2],+Z[3]]}return[0,0,0,1]}),O,F=!1,I=!1;if("bounds"in w)for(var D=w.bounds,U=0;U<2;++U)for(var B=0;B<3;++B)D[U][B]!==this.bounds[U][B]&&(I=!0),this.bounds[U][B]=D[U][B];if("ticks"in w){O=w.ticks,F=!0,this.autoTicks=!1;for(var U=0;U<3;++U)this.tickSpacing[U]=0}else L("tickSpacing")&&(this.autoTicks=!0,I=!0);if(this._firstInit&&("ticks"in w||"tickSpacing"in w||(this.autoTicks=!0),I=!0,F=!0,this._firstInit=!1),I&&this.autoTicks&&(O=n.create(this.bounds,this.tickSpacing),F=!0),F){for(var U=0;U<3;++U)O[U].sort(function(ee,q){return ee.x-q.x});n.equal(O,this.ticks)?F=!1:this.ticks=O}S("tickEnable"),k("tickFont")&&(F=!0),L("tickSize"),L("tickAngle"),L("tickPad"),P("tickColor");var j=k("labels");k("labelFont")&&(j=!0),S("labelEnable"),L("labelSize"),L("labelPad"),P("labelColor"),S("lineEnable"),S("lineMirror"),L("lineWidth"),P("lineColor"),S("lineTickEnable"),S("lineTickMirror"),L("lineTickLength"),L("lineTickWidth"),P("lineTickColor"),S("gridEnable"),L("gridWidth"),P("gridColor"),S("zeroEnable"),P("zeroLineColor"),L("zeroLineWidth"),S("backgroundEnable"),P("backgroundColor"),this._text?this._text&&(j||F)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=t(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&F&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=i(this.gl,this.bounds,this.ticks))};function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}var d=[new h,new h,new h];function p(w,v,L,S,k){for(var P=w.primalOffset,O=w.primalMinor,F=w.mirrorOffset,I=w.mirrorMinor,D=S[v],U=0;U<3;++U)if(v!==U){var B=P,j=F,Z=O,ee=I;D&1<<U&&(B=F,j=P,Z=I,ee=O),B[U]=L[0][U],j[U]=L[1][U],k[U]>0?(Z[U]=-1,ee[U]=0):(Z[U]=0,ee[U]=1)}}var y=[0,0,0],g={model:f,view:f,projection:f,_ortho:!1};c.isOpaque=function(){return!0},c.isTransparent=function(){return!1},c.drawTransparent=function(w){};var A=0,b=[0,0,0],M=[0,0,0],_=[0,0,0];c.draw=function(w){w=w||g;for(var v=this.gl,L=w.model||f,S=w.view||f,k=w.projection||f,P=this.bounds,O=w._ortho||!1,F=r(L,S,k,P,O),I=F.cubeEdges,D=F.axis,U=S[12],B=S[13],j=S[14],Z=S[15],ee=O?2:1,q=ee*this.pixelRatio*(k[3]*U+k[7]*B+k[11]*j+k[15]*Z)/v.drawingBufferHeight,W=0;W<3;++W)this.lastCubeProps.cubeEdges[W]=I[W],this.lastCubeProps.axis[W]=D[W];for(var J=d,W=0;W<3;++W)p(d[W],W,this.bounds,I,D);for(var v=this.gl,le=y,W=0;W<3;++W)this.backgroundEnable[W]?le[W]=D[W]:le[W]=0;this._background.draw(L,S,k,P,le,this.backgroundColor),this._lines.bind(L,S,k,this);for(var W=0;W<3;++W){var fe=[0,0,0];D[W]>0?fe[W]=P[1][W]:fe[W]=P[0][W];for(var se=0;se<2;++se){var H=(W+1+se)%3,Y=(W+1+(se^1))%3;this.gridEnable[H]&&this._lines.drawGrid(H,Y,this.bounds,fe,this.gridColor[H],this.gridWidth[H]*this.pixelRatio)}for(var se=0;se<2;++se){var H=(W+1+se)%3,Y=(W+1+(se^1))%3;this.zeroEnable[Y]&&Math.min(P[0][Y],P[1][Y])<=0&&Math.max(P[0][Y],P[1][Y])>=0&&this._lines.drawZero(H,Y,this.bounds,fe,this.zeroLineColor[Y],this.zeroLineWidth[Y]*this.pixelRatio)}}for(var W=0;W<3;++W){this.lineEnable[W]&&this._lines.drawAxisLine(W,this.bounds,J[W].primalOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio),this.lineMirror[W]&&this._lines.drawAxisLine(W,this.bounds,J[W].mirrorOffset,this.lineColor[W],this.lineWidth[W]*this.pixelRatio);for(var ne=l(b,J[W].primalMinor),te=l(M,J[W].mirrorMinor),K=this.lineTickLength,se=0;se<3;++se){var $=q/L[5*se];ne[se]*=K[se]*$,te[se]*=K[se]*$}this.lineTickEnable[W]&&this._lines.drawAxisTicks(W,J[W].primalOffset,ne,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio),this.lineTickMirror[W]&&this._lines.drawAxisTicks(W,J[W].mirrorOffset,te,this.lineTickColor[W],this.lineTickWidth[W]*this.pixelRatio)}this._lines.unbind(),this._text.bind(L,S,k,this.pixelRatio);var ae,ie=.5,oe,ue;function ye(Oe){ue=[0,0,0],ue[Oe]=1}function ce(Oe,He,Ge){var _e=(Oe+1)%3,Re=(Oe+2)%3,We=He[_e],qe=He[Re],Ue=Ge[_e],Ie=Ge[Re];if(We>0&&Ie>0){ye(_e);return}else if(We>0&&Ie<0){ye(_e);return}else if(We<0&&Ie>0){ye(_e);return}else if(We<0&&Ie<0){ye(_e);return}else if(qe>0&&Ue>0){ye(Re);return}else if(qe>0&&Ue<0){ye(Re);return}else if(qe<0&&Ue>0){ye(Re);return}else if(qe<0&&Ue<0){ye(Re);return}}for(var W=0;W<3;++W){for(var me=J[W].primalMinor,xe=J[W].mirrorMinor,ke=l(_,J[W].primalOffset),se=0;se<3;++se)this.lineTickEnable[W]&&(ke[se]+=q*me[se]*Math.max(this.lineTickLength[se],0)/L[5*se]);var Ae=[0,0,0];if(Ae[W]=1,this.tickEnable[W]){this.tickAngle[W]===-3600?(this.tickAngle[W]=0,this.tickAlign[W]="auto"):this.tickAlign[W]=-1,oe=1,ae=[this.tickAlign[W],ie,oe],ae[0]==="auto"?ae[0]=A:ae[0]=parseInt(""+ae[0]),ue=[0,0,0],ce(W,me,xe);for(var se=0;se<3;++se)ke[se]+=q*me[se]*this.tickPad[se]/L[5*se];this._text.drawTicks(W,this.tickSize[W],this.tickAngle[W],ke,this.tickColor[W],Ae,ue,ae)}if(this.labelEnable[W]){oe=0,ue=[0,0,0],this.labels[W].length>4&&(ye(W),oe=1),ae=[this.labelAlign[W],ie,oe],ae[0]==="auto"?ae[0]=A:ae[0]=parseInt(""+ae[0]);for(var se=0;se<3;++se)ke[se]+=q*me[se]*this.labelPad[se]/L[5*se];ke[W]+=.5*(P[0][W]+P[1][W]),this._text.drawLabel(W,this.labelSize[W],this.labelAngle[W],ke,this.labelColor[W],[0,0,0],ue,ae)}}this._text.unbind()},c.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null};function T(w,v){var L=new o(w);return L.update(v),L}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(s,m,x){m.exports=f;var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders").bg;function r(l,o,c,h){this.gl=l,this.buffer=o,this.vao=c,this.shader=h}var n=r.prototype;n.draw=function(l,o,c,h,d,p){for(var y=!1,g=0;g<3;++g)y=y||d[g];if(!!y){var A=this.gl;A.enable(A.POLYGON_OFFSET_FILL),A.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:l,view:o,projection:c,bounds:h,enable:d,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),A.disable(A.POLYGON_OFFSET_FILL)}},n.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function f(l){for(var o=[],c=[],h=0,d=0;d<3;++d)for(var p=(d+1)%3,y=(d+2)%3,g=[0,0,0],A=[0,0,0],b=-1;b<=1;b+=2){c.push(h,h+2,h+1,h+1,h+2,h+3),g[d]=b,A[d]=b;for(var M=-1;M<=1;M+=2){g[p]=M;for(var _=-1;_<=1;_+=2)g[y]=_,o.push(g[0],g[1],g[2],A[0],A[1],A[2]),h+=1}var T=p;p=y,y=T}var w=t(l,new Float32Array(o)),v=t(l,new Uint16Array(c),l.ELEMENT_ARRAY_BUFFER),L=i(l,[{buffer:w,type:l.FLOAT,size:3,offset:0,stride:24},{buffer:w,type:l.FLOAT,size:3,offset:12,stride:24}],v),S=a(l);return S.attributes.position.location=0,S.attributes.normal.location=1,new r(l,w,L,S)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(s,m,x){m.exports=b;var t=s("bit-twiddle"),i=s("gl-mat4/multiply"),a=s("split-polygon"),r=s("robust-orientation"),n=new Array(16),f=new Array(8),l=new Array(8),o=new Array(3),c=[0,0,0];(function(){for(var M=0;M<8;++M)f[M]=[1,1,1,1],l[M]=[1,1,1]})();function h(M,_,T){for(var w=0;w<4;++w){M[w]=T[12+w];for(var v=0;v<3;++v)M[w]+=_[v]*T[4*v+w]}}var d=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function p(M){for(var _=0;_<d.length;++_)if(M=a.positive(M,d[_]),M.length<3)return 0;for(var T=M[0],w=T[0]/T[3],v=T[1]/T[3],L=0,_=1;_+1<M.length;++_){var S=M[_],k=M[_+1],P=S[0]/S[3],O=S[1]/S[3],F=k[0]/k[3],I=k[1]/k[3],D=P-w,U=O-v,B=F-w,j=I-v;L+=Math.abs(D*j-U*B)}return L}var y=[1,1,1],g=[0,0,0],A={cubeEdges:y,axis:g};function b(M,_,T,w,v){i(n,_,M),i(n,T,n);for(var L=0,S=0;S<2;++S){o[2]=w[S][2];for(var k=0;k<2;++k){o[1]=w[k][1];for(var P=0;P<2;++P)o[0]=w[P][0],h(f[L],o,n),L+=1}}for(var O=-1,S=0;S<8;++S){for(var F=f[S][3],I=0;I<3;++I)l[S][I]=f[S][I]/F;v&&(l[S][2]*=-1),F<0&&(O<0||l[S][2]<l[O][2])&&(O=S)}if(O<0){O=0;for(var D=0;D<3;++D){for(var U=(D+2)%3,B=(D+1)%3,j=-1,Z=-1,ee=0;ee<2;++ee){var q=ee<<D,W=q+(ee<<U)+(1-ee<<B),J=q+(1-ee<<U)+(ee<<B);r(l[q],l[W],l[J],c)<0||(ee?j=1:Z=1)}if(j<0||Z<0){Z>j&&(O|=1<<D);continue}for(var ee=0;ee<2;++ee){var q=ee<<D,W=q+(ee<<U)+(1-ee<<B),J=q+(1-ee<<U)+(ee<<B),le=p([f[q],f[W],f[J],f[q+(1<<U)+(1<<B)]]);ee?j=le:Z=le}if(Z>j){O|=1<<D;continue}}}for(var fe=7^O,se=-1,S=0;S<8;++S)S===O||S===fe||(se<0||l[se][1]>l[S][1])&&(se=S);for(var H=-1,S=0;S<3;++S){var Y=se^1<<S;if(!(Y===O||Y===fe)){H<0&&(H=Y);var B=l[Y];B[0]<l[H][0]&&(H=Y)}}for(var ne=-1,S=0;S<3;++S){var Y=se^1<<S;if(!(Y===O||Y===fe||Y===H)){ne<0&&(ne=Y);var B=l[Y];B[0]>l[ne][0]&&(ne=Y)}}var te=y;te[0]=te[1]=te[2]=0,te[t.log2(H^se)]=se&H,te[t.log2(se^ne)]=se&ne;var K=ne^7;K===O||K===fe?(K=H^7,te[t.log2(ne^K)]=K&ne):te[t.log2(H^K)]=K&H;for(var $=g,ae=O,D=0;D<3;++D)ae&1<<D?$[D]=-1:$[D]=1;return A}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(s,m,x){m.exports=y;var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders").line,r=[0,0,0],n=[0,0,0],f=[0,0,0],l=[0,0,0],o=[1,1];function c(g){return g[0]=g[1]=g[2]=0,g}function h(g,A){return g[0]=A[0],g[1]=A[1],g[2]=A[2],g}function d(g,A,b,M,_,T,w,v){this.gl=g,this.vertBuffer=A,this.vao=b,this.shader=M,this.tickCount=_,this.tickOffset=T,this.gridCount=w,this.gridOffset=v}var p=d.prototype;p.bind=function(g,A,b){this.shader.bind(),this.shader.uniforms.model=g,this.shader.uniforms.view=A,this.shader.uniforms.projection=b,o[0]=this.gl.drawingBufferWidth,o[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=o,this.vao.bind()},p.unbind=function(){this.vao.unbind()},p.drawAxisLine=function(g,A,b,M,_){var T=c(n);this.shader.uniforms.majorAxis=n,T[g]=A[1][g]-A[0][g],this.shader.uniforms.minorAxis=T;var w=h(l,b);w[g]+=A[0][g],this.shader.uniforms.offset=w,this.shader.uniforms.lineWidth=_,this.shader.uniforms.color=M;var v=c(f);v[(g+2)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6);var v=c(f);v[(g+1)%3]=1,this.shader.uniforms.screenAxis=v,this.vao.draw(this.gl.TRIANGLES,6)},p.drawAxisTicks=function(g,A,b,M,_){if(!!this.tickCount[g]){var T=c(r);T[g]=1,this.shader.uniforms.majorAxis=T,this.shader.uniforms.offset=A,this.shader.uniforms.minorAxis=b,this.shader.uniforms.color=M,this.shader.uniforms.lineWidth=_;var w=c(f);w[g]=1,this.shader.uniforms.screenAxis=w,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}},p.drawGrid=function(g,A,b,M,_,T){if(!!this.gridCount[g]){var w=c(n);w[A]=b[1][A]-b[0][A],this.shader.uniforms.minorAxis=w;var v=h(l,M);v[A]+=b[0][A],this.shader.uniforms.offset=v;var L=c(r);L[g]=1,this.shader.uniforms.majorAxis=L;var S=c(f);S[g]=1,this.shader.uniforms.screenAxis=S,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}},p.drawZero=function(g,A,b,M,_,T){var w=c(n);this.shader.uniforms.majorAxis=w,w[g]=b[1][g]-b[0][g],this.shader.uniforms.minorAxis=w;var v=h(l,M);v[g]+=b[0][g],this.shader.uniforms.offset=v;var L=c(f);L[A]=1,this.shader.uniforms.screenAxis=L,this.shader.uniforms.lineWidth=T,this.shader.uniforms.color=_,this.vao.draw(this.gl.TRIANGLES,6)},p.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()};function y(g,A,b){var M=[],_=[0,0,0],T=[0,0,0],w=[0,0,0],v=[0,0,0];M.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var L=0;L<3;++L){for(var S=M.length/3|0,k=0;k<b[L].length;++k){var P=+b[L][k].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var O=M.length/3|0;_[L]=S,T[L]=O-S;for(var S=M.length/3|0,F=0;F<b[L].length;++F){var P=+b[L][F].x;M.push(P,0,1,P,1,1,P,0,-1,P,0,-1,P,1,1,P,1,-1)}var O=M.length/3|0;w[L]=S,v[L]=O-S}var I=t(g,new Float32Array(M)),D=i(g,[{buffer:I,type:g.FLOAT,size:3,stride:0,offset:0}]),U=a(g);return U.attributes.position.location=0,new d(g,I,D,U,T,_,v,w)}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, majorAxis, minorAxis, screenAxis;
uniform float lineWidth;
uniform vec2 screenShape;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

void main() {
  vec3 major = position.x * majorAxis;
  vec3 minor = position.y * minorAxis;

  vec3 vPosition = major + minor + offset;
  vec3 pPosition = project(vPosition);
  vec3 offset = project(vPosition + screenAxis * position.z);

  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;

  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.line=function(c){return i(c,a,r,null,[{name:"position",type:"vec3"}])};var n=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;
uniform vec3 offset, axis, alignDir, alignOpt;
uniform float scale, angle, pixelScale;
uniform vec2 resolution;

vec3 project(vec3 p) {
  vec4 pp = projection * view * model * vec4(p, 1.0);
  return pp.xyz / max(pp.w, 0.0001);
}

float computeViewAngle(vec3 a, vec3 b) {
  vec3 A = project(a);
  vec3 B = project(b);

  return atan(
    (B.y - A.y) * resolution.y,
    (B.x - A.x) * resolution.x
  );
}

const float PI = 3.141592;
const float TWO_PI = 2.0 * PI;
const float HALF_PI = 0.5 * PI;
const float ONE_AND_HALF_PI = 1.5 * PI;

int option = int(floor(alignOpt.x + 0.001));
float hv_ratio =       alignOpt.y;
bool enableAlign =    (alignOpt.z != 0.0);

float mod_angle(float a) {
  return mod(a, PI);
}

float positive_angle(float a) {
  return mod_angle((a < 0.0) ?
    a + TWO_PI :
    a
  );
}

float look_upwards(float a) {
  float b = positive_angle(a);
  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?
    b - PI :
    b;
}

float look_horizontal_or_vertical(float a, float ratio) {
  // ratio controls the ratio between being horizontal to (vertical + horizontal)
  // if ratio is set to 0.5 then it is 50%, 50%.
  // when using a higher ratio e.g. 0.75 the result would
  // likely be more horizontal than vertical.

  float b = positive_angle(a);

  return
    (b < (      ratio) * HALF_PI) ? 0.0 :
    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :
    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :
    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :
                                    0.0;
}

float roundTo(float a, float b) {
  return float(b * floor((a + 0.5 * b) / b));
}

float look_round_n_directions(float a, int n) {
  float b = positive_angle(a);
  float div = TWO_PI / float(n);
  float c = roundTo(b, div);
  return look_upwards(c);
}

float applyAlignOption(float rawAngle, float delta) {
  return
    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions
    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical
    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis
    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards
    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal
                    rawAngle;                // otherwise return back raw input angle
}

bool isAxisTitle = (axis.x == 0.0) &&
                   (axis.y == 0.0) &&
                   (axis.z == 0.0);

void main() {
  //Compute world offset
  float axisDistance = position.z;
  vec3 dataPosition = axisDistance * axis + offset;

  float beta = angle; // i.e. user defined attributes for each tick

  float axisAngle;
  float clipAngle;
  float flip;

  if (enableAlign) {
    axisAngle = (isAxisTitle) ? HALF_PI :
                      computeViewAngle(dataPosition, dataPosition + axis);
    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);

    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;
    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;

    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),
                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;

    beta += applyAlignOption(clipAngle, flip * PI);
  }

  //Compute plane offset
  vec2 planeCoord = position.xy * pixelScale;

  mat2 planeXform = scale * mat2(
     cos(beta), sin(beta),
    -sin(beta), cos(beta)
  );

  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;

  //Compute clip position
  vec3 clipPosition = project(dataPosition);

  //Apply text offset in clip coordinates
  clipPosition += vec3(viewOffset, 0.0);

  //Done
  gl_Position = vec4(clipPosition, 1.0);
}`]),f=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 color;
void main() {
  gl_FragColor = color;
}`]);x.text=function(c){return i(c,n,f,null,[{name:"position",type:"vec3"}])};var l=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec3 normal;

uniform mat4 model, view, projection;
uniform vec3 enable;
uniform vec3 bounds[2];

varying vec3 colorChannel;

void main() {

  vec3 signAxis = sign(bounds[1] - bounds[0]);

  vec3 realNormal = signAxis * normal;

  if(dot(realNormal, enable) > 0.0) {
    vec3 minRange = min(bounds[0], bounds[1]);
    vec3 maxRange = max(bounds[0], bounds[1]);
    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));
    gl_Position = projection * view * model * vec4(nPosition, 1.0);
  } else {
    gl_Position = vec4(0,0,0,0);
  }

  colorChannel = abs(realNormal);
}`]),o=t([`precision highp float;
#define GLSLIFY 1

uniform vec4 colors[3];

varying vec3 colorChannel;

void main() {
  gl_FragColor = colorChannel.x * colors[0] +
                 colorChannel.y * colors[1] +
                 colorChannel.z * colors[2];
}`]);x.bg=function(c){return i(c,l,o,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(s,m,x){(function(t){(function(){m.exports=y;var i=s("gl-buffer"),a=s("gl-vao"),r=s("vectorize-text"),n=s("./shaders").text,f=window||t.global||{},l=f.__TEXT_CACHE||{};f.__TEXT_CACHE={};var o=3;function c(g,A,b,M){this.gl=g,this.shader=A,this.buffer=b,this.vao=M,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}var h=c.prototype,d=[0,0];h.bind=function(g,A,b,M){this.vao.bind(),this.shader.bind();var _=this.shader.uniforms;_.model=g,_.view=A,_.projection=b,_.pixelScale=M,d[0]=this.gl.drawingBufferWidth,d[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=d},h.unbind=function(){this.vao.unbind()},h.update=function(g,A,b,M,_){var T=[];function w(D,U,B,j,Z,ee){var q=l[B];q||(q=l[B]={});var W=q[U];W||(W=q[U]=p(U,{triangles:!0,font:B,textAlign:"center",textBaseline:"middle",lineSpacing:Z,styletags:ee}));for(var J=(j||12)/12,le=W.positions,fe=W.cells,se=0,H=fe.length;se<H;++se)for(var Y=fe[se],ne=2;ne>=0;--ne){var te=le[Y[ne]];T.push(J*te[0],-J*te[1],D)}}for(var v=[0,0,0],L=[0,0,0],S=[0,0,0],k=[0,0,0],P=1.25,O={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){S[F]=T.length/o|0,w(.5*(g[0][F]+g[1][F]),A[F],b[F],12,P,O),k[F]=(T.length/o|0)-S[F],v[F]=T.length/o|0;for(var I=0;I<M[F].length;++I)!M[F][I].text||w(M[F][I].x,M[F][I].text,M[F][I].font||_,M[F][I].fontSize||12,P,O);L[F]=(T.length/o|0)-v[F]}this.buffer.update(T),this.tickOffset=v,this.tickCount=L,this.labelOffset=S,this.labelCount=k},h.drawTicks=function(g,A,b,M,_,T,w,v){!this.tickCount[g]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=_,this.shader.uniforms.angle=b,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g]))},h.drawLabel=function(g,A,b,M,_,T,w,v){!this.labelCount[g]||(this.shader.uniforms.axis=T,this.shader.uniforms.color=_,this.shader.uniforms.angle=b,this.shader.uniforms.scale=A,this.shader.uniforms.offset=M,this.shader.uniforms.alignDir=w,this.shader.uniforms.alignOpt=v,this.vao.draw(this.gl.TRIANGLES,this.labelCount[g],this.labelOffset[g]))},h.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()};function p(g,A){try{return r(g,A)}catch(b){return console.warn('error vectorizing text:"'+g+'" error:',b),{cells:[],positions:[]}}}function y(g,A,b,M,_,T){var w=i(g),v=a(g,[{buffer:w,size:3}]),L=n(g);L.attributes.position.location=0;var S=new c(g,L,w,v);return S.update(A,b,M,_,T),S}}).call(this)}).call(this,s("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(s,m,x){x.create=i,x.equal=a;function t(r,n){var f=r+"",l=f.indexOf("."),o=0;l>=0&&(o=f.length-l-1);var c=Math.pow(10,o),h=Math.round(r*n*c),d=h+"";if(d.indexOf("e")>=0)return d;var p=h/c,y=h%c;h<0?(p=-Math.ceil(p)|0,y=-y|0):(p=Math.floor(p)|0,y=y|0);var g=""+p;if(h<0&&(g="-"+g),o){for(var A=""+y;A.length<o;)A="0"+A;return g+"."+A}else return g}function i(r,n){for(var f=[],l=0;l<3;++l){var o=[];.5*(r[0][l]+r[1][l]);for(var c=0;c*n[l]<=r[1][l];++c)o.push({x:c*n[l],text:t(n[l],c)});for(var c=-1;c*n[l]>=r[0][l];--c)o.push({x:c*n[l],text:t(n[l],c)});f.push(o)}return f}function a(r,n){for(var f=0;f<3;++f){if(r[f].length!==n[f].length)return!1;for(var l=0;l<r[f].length;++l){var o=r[f][l],c=n[f][l];if(o.x!==c.x||o.text!==c.text||o.font!==c.font||o.fontColor!==c.fontColor||o.fontSize!==c.fontSize||o.dx!==c.dx||o.dy!==c.dy)return!1}}return!0}},{}],77:[function(s,m,x){m.exports=A;var t=s("extract-frustum-planes"),i=s("split-polygon"),a=s("./lib/cube.js"),r=s("gl-mat4/multiply"),n=s("gl-mat4/transpose"),f=s("gl-vec4/transformMat4"),l=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),o=new Float32Array(16);function c(b,M,_){this.lo=b,this.hi=M,this.pixelsPerDataUnit=_}var h=[0,0,0,1],d=[0,0,0,1];function p(b,M,_,T,w){for(var v=0;v<3;++v){for(var L=h,S=d,k=0;k<3;++k)S[k]=L[k]=_[k];S[3]=L[3]=1,S[v]+=1,f(S,S,M),S[3]<0&&(b[v]=1/0),L[v]-=1,f(L,L,M),L[3]<0&&(b[v]=1/0);var P=(L[0]/L[3]-S[0]/S[3])*T,O=(L[1]/L[3]-S[1]/S[3])*w;b[v]=.25*Math.sqrt(P*P+O*O)}return b}var y=[new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0)],g=[0,0,0];function A(b,M,_,T,w){var v=M.model||l,L=M.view||l,S=M.projection||l,k=M._ortho||!1,P=b.bounds,w=w||a(v,L,S,P,k),O=w.axis;r(o,L,v),r(o,S,o);for(var F=y,I=0;I<3;++I)F[I].lo=1/0,F[I].hi=-1/0,F[I].pixelsPerDataUnit=1/0;var D=t(n(o,o));n(o,o);for(var U=0;U<3;++U){var B=(U+1)%3,j=(U+2)%3,Z=g;e:for(var I=0;I<2;++I){var ee=[];if(O[U]<0!=!!I){Z[U]=P[I][U];for(var q=0;q<2;++q){Z[B]=P[q^I][B];for(var W=0;W<2;++W)Z[j]=P[W^q^I][j],ee.push(Z.slice())}for(var J=k?5:4,q=J;q===J;++q){if(ee.length===0)continue e;ee=i.positive(ee,D[q])}for(var q=0;q<ee.length;++q)for(var j=ee[q],le=p(g,o,j,_,T),W=0;W<3;++W)F[W].lo=Math.min(F[W].lo,j[W]),F[W].hi=Math.max(F[W].hi,j[W]),W!==U&&(F[W].pixelsPerDataUnit=Math.min(F[W].pixelsPerDataUnit,Math.abs(le[W])))}}}return F}},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(s,m,x){var t=s("typedarray-pool"),i=s("ndarray-ops"),a=s("ndarray"),r=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function n(d,p,y,g,A){this.gl=d,this.type=p,this.handle=y,this.length=g,this.usage=A}var f=n.prototype;f.bind=function(){this.gl.bindBuffer(this.type,this.handle)},f.unbind=function(){this.gl.bindBuffer(this.type,null)},f.dispose=function(){this.gl.deleteBuffer(this.handle)};function l(d,p,y,g,A,b){var M=A.length*A.BYTES_PER_ELEMENT;if(b<0)return d.bufferData(p,A,g),M;if(M+b>y)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return d.bufferSubData(p,b,A),y}function o(d,p){for(var y=t.malloc(d.length,p),g=d.length,A=0;A<g;++A)y[A]=d[A];return y}function c(d,p){for(var y=1,g=p.length-1;g>=0;--g){if(p[g]!==y)return!1;y*=d[g]}return!0}f.update=function(d,p){if(typeof p!="number"&&(p=-1),this.bind(),typeof d=="object"&&typeof d.shape!="undefined"){var y=d.dtype;if(r.indexOf(y)<0&&(y="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER){var g=gl.getExtension("OES_element_index_uint");g&&y!=="uint16"?y="uint32":y="uint16"}if(y===d.dtype&&c(d.shape,d.stride))d.offset===0&&d.data.length===d.shape[0]?this.length=l(this.gl,this.type,this.length,this.usage,d.data,p):this.length=l(this.gl,this.type,this.length,this.usage,d.data.subarray(d.offset,d.shape[0]),p);else{var A=t.malloc(d.size,y),b=a(A,d.shape);i.assign(b,d),p<0?this.length=l(this.gl,this.type,this.length,this.usage,A,p):this.length=l(this.gl,this.type,this.length,this.usage,A.subarray(0,d.size),p),t.free(A)}}else if(Array.isArray(d)){var M;this.type===this.gl.ELEMENT_ARRAY_BUFFER?M=o(d,"uint16"):M=o(d,"float32"),p<0?this.length=l(this.gl,this.type,this.length,this.usage,M,p):this.length=l(this.gl,this.type,this.length,this.usage,M.subarray(0,d.length),p),t.free(M)}else if(typeof d=="object"&&typeof d.length=="number")this.length=l(this.gl,this.type,this.length,this.usage,d,p);else if(typeof d=="number"||d===void 0){if(p>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");d=d|0,d<=0&&(d=1),this.gl.bufferData(this.type,d|0,this.usage),this.length=d}else throw new Error("gl-buffer: Invalid data type")};function h(d,p,y,g){if(y=y||d.ARRAY_BUFFER,g=g||d.DYNAMIC_DRAW,y!==d.ARRAY_BUFFER&&y!==d.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(g!==d.DYNAMIC_DRAW&&g!==d.STATIC_DRAW&&g!==d.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var A=d.createBuffer(),b=new n(d,y,A,0,g);return b.update(p),b}m.exports=h},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(s,m,x){var t=s("gl-vec3");m.exports=function(a,r){var n=a.positions,f=a.vectors,l={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(a.positions.length===0)return r&&(r[0]=[0,0,0],r[1]=[0,0,0]),l;for(var o=0,c=1/0,h=-1/0,d=1/0,p=-1/0,y=1/0,g=-1/0,A=null,b=null,M=[],_=1/0,T=!1,w=0;w<n.length;w++){var v=n[w];c=Math.min(v[0],c),h=Math.max(v[0],h),d=Math.min(v[1],d),p=Math.max(v[1],p),y=Math.min(v[2],y),g=Math.max(v[2],g);var L=f[w];if(t.length(L)>o&&(o=t.length(L)),w){var S=2*t.distance(A,v)/(t.length(b)+t.length(L));S?(_=Math.min(_,S),T=!1):T=!0}T||(A=v,b=L),M.push(L)}var k=[c,d,y],P=[h,p,g];r&&(r[0]=k,r[1]=P),o===0&&(o=1);var O=1/o;isFinite(_)||(_=1),l.vectorScale=_;var F=a.coneSize||.5;a.absoluteConeSize&&(F=a.absoluteConeSize*O),l.coneScale=F;for(var w=0,I=0;w<n.length;w++)for(var v=n[w],D=v[0],U=v[1],B=v[2],j=M[w],Z=t.length(j)*O,ee=0,q=8;ee<q;ee++){l.positions.push([D,U,B,I++]),l.positions.push([D,U,B,I++]),l.positions.push([D,U,B,I++]),l.positions.push([D,U,B,I++]),l.positions.push([D,U,B,I++]),l.positions.push([D,U,B,I++]),l.vectors.push(j),l.vectors.push(j),l.vectors.push(j),l.vectors.push(j),l.vectors.push(j),l.vectors.push(j),l.vertexIntensity.push(Z,Z,Z),l.vertexIntensity.push(Z,Z,Z);var W=l.positions.length;l.cells.push([W-6,W-5,W-4],[W-3,W-2,W-1])}return l};var i=s("./lib/shaders");m.exports.createMesh=s("./create_mesh"),m.exports.createConeMesh=function(a,r){return m.exports.createMesh(a,r,{shaders:i,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(s,m,x){var t=s("gl-shader"),i=s("gl-buffer"),a=s("gl-vao"),r=s("gl-texture2d"),n=s("gl-mat4/multiply"),f=s("gl-mat4/invert"),l=s("ndarray"),o=s("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(M,_,T,w,v,L,S,k,P,O,F){this.gl=M,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=_,this.dirty=!0,this.triShader=T,this.pickShader=w,this.trianglePositions=v,this.triangleVectors=L,this.triangleColors=k,this.triangleUVs=P,this.triangleIds=S,this.triangleVAO=O,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=F,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=c,this._view=c,this._projection=c,this._resolution=[1,1]}var d=h.prototype;d.isOpaque=function(){return this.opacity>=1},d.isTransparent=function(){return this.opacity<1},d.pickSlots=1,d.setPickBase=function(M){this.pickId=M};function p(M){for(var _=o({colormap:M,nshades:256,format:"rgba"}),T=new Uint8Array(256*4),w=0;w<256;++w){for(var v=_[w],L=0;L<3;++L)T[4*w+L]=v[L];T[4*w+3]=v[3]*255}return l(T,[256,256,4],[4,0,1])}function y(M){for(var _=M.length,T=new Array(_),w=0;w<_;++w)T[w]=M[w][2];return T}d.update=function(M){M=M||{};var _=this.gl;this.dirty=!0,"lightPosition"in M&&(this.lightPosition=M.lightPosition),"opacity"in M&&(this.opacity=M.opacity),"ambient"in M&&(this.ambientLight=M.ambient),"diffuse"in M&&(this.diffuseLight=M.diffuse),"specular"in M&&(this.specularLight=M.specular),"roughness"in M&&(this.roughness=M.roughness),"fresnel"in M&&(this.fresnel=M.fresnel),M.tubeScale!==void 0&&(this.tubeScale=M.tubeScale),M.vectorScale!==void 0&&(this.vectorScale=M.vectorScale),M.coneScale!==void 0&&(this.coneScale=M.coneScale),M.coneOffset!==void 0&&(this.coneOffset=M.coneOffset),M.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=_.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=_.LINEAR,this.texture.setPixels(p(M.colormap)),this.texture.generateMipmap());var T=M.cells,w=M.positions,v=M.vectors;if(!w||!T||!v)return;var L=[],S=[],k=[],P=[],O=[];this.cells=T,this.positions=w,this.vectors=v;var F=M.meshColor||[1,1,1,1],I=M.vertexIntensity,D=1/0,U=-1/0;if(I)if(M.vertexIntensityBounds)D=+M.vertexIntensityBounds[0],U=+M.vertexIntensityBounds[1];else for(var B=0;B<I.length;++B){var j=I[B];D=Math.min(D,j),U=Math.max(U,j)}else for(var B=0;B<w.length;++B){var j=w[B][2];D=Math.min(D,j),U=Math.max(U,j)}I?this.intensity=I:this.intensity=y(w),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var B=0;B<w.length;++B)for(var Z=w[B],ee=0;ee<3;++ee)isNaN(Z[ee])||!isFinite(Z[ee])||(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Z[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Z[ee]));var q=0;e:for(var B=0;B<T.length;++B){var W=T[B];switch(W.length){case 3:for(var ee=0;ee<3;++ee)for(var J=W[ee],Z=w[J],le=0;le<3;++le)if(isNaN(Z[le])||!isFinite(Z[le]))continue e;for(var ee=0;ee<3;++ee){var J=W[2-ee],Z=w[J];L.push(Z[0],Z[1],Z[2],Z[3]);var fe=v[J];S.push(fe[0],fe[1],fe[2],fe[3]||0);var se=F;se.length===3?k.push(se[0],se[1],se[2],1):k.push(se[0],se[1],se[2],se[3]);var H;I?H=[(I[J]-D)/(U-D),0]:H=[(Z[2]-D)/(U-D),0],P.push(H[0],H[1]),O.push(B)}q+=1;break}}this.triangleCount=q,this.trianglePositions.update(L),this.triangleVectors.update(S),this.triangleColors.update(k),this.triangleUVs.update(P),this.triangleIds.update(new Uint32Array(O))},d.drawTransparent=d.draw=function(M){M=M||{};for(var _=this.gl,T=M.model||c,w=M.view||c,v=M.projection||c,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);var k={model:T,view:w,projection:v,inverseModel:c.slice(),clipBounds:L,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};k.inverseModel=f(k.inverseModel,k.model),_.disable(_.CULL_FACE),this.texture.bind(0);var P=new Array(16);n(P,k.view,k.model),n(P,k.projection,P),f(P,P);for(var S=0;S<3;++S)k.eyePosition[S]=P[12+S]/P[15];for(var O=P[15],S=0;S<3;++S)O+=this.lightPosition[S]*P[4*S+3];for(var S=0;S<3;++S){for(var F=P[12+S],I=0;I<3;++I)F+=P[4*I+S]*this.lightPosition[I];k.lightPosition[S]=F/O}if(this.triangleCount>0){var D=this.triShader;D.bind(),D.uniforms=k,this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}},d.drawPick=function(M){M=M||{};for(var _=this.gl,T=M.model||c,w=M.view||c,v=M.projection||c,L=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],S=0;S<3;++S)L[0][S]=Math.max(L[0][S],this.clipBounds[0][S]),L[1][S]=Math.min(L[1][S],this.clipBounds[1][S]);this._model=[].slice.call(T),this._view=[].slice.call(w),this._projection=[].slice.call(v),this._resolution=[_.drawingBufferWidth,_.drawingBufferHeight];var k={model:T,view:w,projection:v,clipBounds:L,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},P=this.pickShader;P.bind(),P.uniforms=k,this.triangleCount>0&&(this.triangleVAO.bind(),_.drawArrays(_.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind())},d.pick=function(M){if(!M||M.id!==this.pickId)return null;var _=M.value[0]+256*M.value[1]+65536*M.value[2],T=this.cells[_],w=this.positions[T[1]].slice(0,3),v={position:w,dataCoordinate:w,index:Math.floor(T[1]/48)};return this.traceType==="cone"?v.index=Math.floor(T[1]/48):this.traceType==="streamtube"&&(v.intensity=this.intensity[T[1]],v.velocity=this.vectors[T[1]].slice(0,3),v.divergence=this.vectors[T[1]][3],v.index=_),v},d.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()};function g(M,_){var T=t(M,_.meshShader.vertex,_.meshShader.fragment,null,_.meshShader.attributes);return T.attributes.position.location=0,T.attributes.color.location=2,T.attributes.uv.location=3,T.attributes.vector.location=4,T}function A(M,_){var T=t(M,_.pickShader.vertex,_.pickShader.fragment,null,_.pickShader.attributes);return T.attributes.position.location=0,T.attributes.id.location=1,T.attributes.vector.location=4,T}function b(M,_,T){var w=T.shaders;arguments.length===1&&(_=M,M=_.gl);var v=g(M,w),L=A(M,w),S=r(M,l(new Uint8Array([255,255,255,255]),[1,1,4]));S.generateMipmap(),S.minFilter=M.LINEAR_MIPMAP_LINEAR,S.magFilter=M.LINEAR;var k=i(M),P=i(M),O=i(M),F=i(M),I=i(M),D=a(M,[{buffer:k,type:M.FLOAT,size:4},{buffer:I,type:M.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:O,type:M.FLOAT,size:4},{buffer:F,type:M.FLOAT,size:2},{buffer:P,type:M.FLOAT,size:4}]),U=new h(M,S,v,L,k,P,I,O,F,D,T.traceType||"cone");return U.update(_),U}m.exports=b},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(s,m,x){var t=s("glslify"),i=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec3 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, coneScale, coneOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * conePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(conePosition, 1.0);
  vec4 t_position  = view * conePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = conePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the cone vertex and normal at the given index.
//
// The returned vertex is for a cone with its top at origin and height of 1.0,
// pointing in the direction of the vector attribute.
//
// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.
// These vertices are used to make up the triangles of the cone by the following:
//   segment + 0 top vertex
//   segment + 1 perimeter vertex a+1
//   segment + 2 perimeter vertex a
//   segment + 3 center base vertex
//   segment + 4 perimeter vertex a
//   segment + 5 perimeter vertex a+1
// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.
// To go from index to segment, floor(index / 6)
// To go from segment to angle, 2*pi * (segment/segmentCount)
// To go from index to segment index, index - (segment*6)
//
vec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {

  const float segmentCount = 8.0;

  float index = rawIndex - floor(rawIndex /
    (segmentCount * 6.0)) *
    (segmentCount * 6.0);

  float segment = floor(0.001 + index/6.0);
  float segmentIndex = index - (segment*6.0);

  normal = -normalize(d);

  if (segmentIndex > 2.99 && segmentIndex < 3.01) {
    return mix(vec3(0.0), -d, coneOffset);
  }

  float nextAngle = (
    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||
    (segmentIndex > 4.99 &&  segmentIndex < 5.01)
  ) ? 1.0 : 0.0;
  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);

  vec3 v1 = mix(d, vec3(0.0), coneOffset);
  vec3 v2 = v1 - d;

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d)*0.25;
  vec3 y = v * sin(angle) * length(d)*0.25;
  vec3 v3 = v2 + x + y;
  if (segmentIndex < 3.0) {
    vec3 tx = u * sin(angle);
    vec3 ty = v * -cos(angle);
    vec3 tangent = tx + ty;
    normal = normalize(cross(v3 - v1, tangent));
  }

  if (segmentIndex == 0.0) {
    return mix(d, vec3(0.0), coneOffset);
  }
  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float vectorScale, coneScale, coneOffset;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);
  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);
  gl_Position = projection * view * conePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},x.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(s,m,x){m.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(s,m,x){var t=s("./1.0/numbers");m.exports=function(a){return t[a]}},{"./1.0/numbers":82}],84:[function(s,m,x){m.exports=h;var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders/index"),r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(d,p,y,g){this.gl=d,this.shader=g,this.buffer=p,this.vao=y,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var f=n.prototype;f.isOpaque=function(){return!this.hasAlpha},f.isTransparent=function(){return this.hasAlpha},f.drawTransparent=f.draw=function(d){var p=this.gl,y=this.shader.uniforms;this.shader.bind();var g=y.view=d.view||r,A=y.projection=d.projection||r;y.model=d.model||r,y.clipBounds=this.clipBounds,y.opacity=this.opacity;var b=g[12],M=g[13],_=g[14],T=g[15],w=d._ortho||!1,v=w?2:1,L=v*this.pixelRatio*(A[3]*b+A[7]*M+A[11]*_+A[15]*T)/p.drawingBufferHeight;this.vao.bind();for(var S=0;S<3;++S)p.lineWidth(this.lineWidth[S]*this.pixelRatio),y.capSize=this.capSize[S]*L,this.lineCount[S]&&p.drawArrays(p.LINES,this.lineOffset[S],this.lineCount[S]);this.vao.unbind()};function l(d,p){for(var y=0;y<3;++y)d[0][y]=Math.min(d[0][y],p[y]),d[1][y]=Math.max(d[1][y],p[y])}var o=function(){for(var d=new Array(3),p=0;p<3;++p){for(var y=[],g=1;g<=2;++g)for(var A=-1;A<=1;A+=2){var b=(g+p)%3,M=[0,0,0];M[b]=A,y.push(M)}d[p]=y}return d}();function c(d,p,y,g){for(var A=o[g],b=0;b<A.length;++b){var M=A[b];d.push(p[0],p[1],p[2],y[0],y[1],y[2],y[3],M[0],M[1],M[2])}return A.length}f.update=function(d){d=d||{},"lineWidth"in d&&(this.lineWidth=d.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in d&&(this.capSize=d.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in d&&(this.opacity=+d.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=d.color||[[0,0,0],[0,0,0],[0,0,0]],y=d.position,g=d.error;if(Array.isArray(p[0])||(p=[p,p,p]),y&&g){var A=[],b=y.length,M=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var _=0;_<3;++_){this.lineOffset[_]=M;e:for(var T=0;T<b;++T){for(var w=y[T],v=0;v<3;++v)if(isNaN(w[v])||!isFinite(w[v]))continue e;var L=g[T],S=p[_];if(Array.isArray(S[0])&&(S=p[T]),S.length===3?S=[S[0],S[1],S[2],1]:S.length===4&&(S=[S[0],S[1],S[2],S[3]],!this.hasAlpha&&S[3]<1&&(this.hasAlpha=!0)),!(isNaN(L[0][_])||isNaN(L[1][_]))){if(L[0][_]<0){var k=w.slice();k[_]+=L[0][_],A.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),l(this.bounds,k),M+=2+c(A,k,S,_)}if(L[1][_]>0){var k=w.slice();k[_]+=L[1][_],A.push(w[0],w[1],w[2],S[0],S[1],S[2],S[3],0,0,0,k[0],k[1],k[2],S[0],S[1],S[2],S[3],0,0,0),l(this.bounds,k),M+=2+c(A,k,S,_)}}}this.lineCount[_]=M-this.lineOffset[_]}this.buffer.update(A)}},f.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()};function h(d){var p=d.gl,y=t(p),g=i(p,[{buffer:y,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:y,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:y,type:p.FLOAT,size:3,offset:28,stride:40}]),A=a(p);A.attributes.position.location=0,A.attributes.color.location=1,A.attributes.offset.location=2;var b=new n(p,y,g,A);return b.update(d),b}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, offset;
attribute vec4 color;
uniform mat4 model, view, projection;
uniform float capSize;
varying vec4 fragColor;
varying vec3 fragPosition;

void main() {
  vec4 worldPosition  = model * vec4(position, 1.0);
  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);
  gl_Position         = projection * view * worldPosition;
  fragColor           = color;
  fragPosition        = position;
}`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float opacity;
varying vec3 fragPosition;
varying vec4 fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  gl_FragColor = opacity * fragColor;
}`]);m.exports=function(n){return i(n,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(s,m,x){var t=s("gl-texture2d");m.exports=M;var i=null,a,r,n,f;function l(_){var T=_.getParameter(_.FRAMEBUFFER_BINDING),w=_.getParameter(_.RENDERBUFFER_BINDING),v=_.getParameter(_.TEXTURE_BINDING_2D);return[T,w,v]}function o(_,T){_.bindFramebuffer(_.FRAMEBUFFER,T[0]),_.bindRenderbuffer(_.RENDERBUFFER,T[1]),_.bindTexture(_.TEXTURE_2D,T[2])}function c(_,T){var w=_.getParameter(T.MAX_COLOR_ATTACHMENTS_WEBGL);i=new Array(w+1);for(var v=0;v<=w;++v){for(var L=new Array(w),S=0;S<v;++S)L[S]=_.COLOR_ATTACHMENT0+S;for(var S=v;S<w;++S)L[S]=_.NONE;i[v]=L}}function h(_){switch(_){case a:throw new Error("gl-fbo: Framebuffer unsupported");case r:throw new Error("gl-fbo: Framebuffer incomplete attachment");case n:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case f:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function d(_,T,w,v,L,S){if(!v)return null;var k=t(_,T,w,L,v);return k.magFilter=_.NEAREST,k.minFilter=_.NEAREST,k.mipSamples=1,k.bind(),_.framebufferTexture2D(_.FRAMEBUFFER,S,_.TEXTURE_2D,k.handle,0),k}function p(_,T,w,v,L){var S=_.createRenderbuffer();return _.bindRenderbuffer(_.RENDERBUFFER,S),_.renderbufferStorage(_.RENDERBUFFER,v,T,w),_.framebufferRenderbuffer(_.FRAMEBUFFER,L,_.RENDERBUFFER,S),S}function y(_){var T=l(_.gl),w=_.gl,v=_.handle=w.createFramebuffer(),L=_._shape[0],S=_._shape[1],k=_.color.length,P=_._ext,O=_._useStencil,F=_._useDepth,I=_._colorType;w.bindFramebuffer(w.FRAMEBUFFER,v);for(var D=0;D<k;++D)_.color[D]=d(w,L,S,I,w.RGBA,w.COLOR_ATTACHMENT0+D);k===0?(_._color_rb=p(w,L,S,w.RGBA4,w.COLOR_ATTACHMENT0),P&&P.drawBuffersWEBGL(i[0])):k>1&&P.drawBuffersWEBGL(i[k]);var U=w.getExtension("WEBGL_depth_texture");U?O?_.depth=d(w,L,S,U.UNSIGNED_INT_24_8_WEBGL,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):F&&(_.depth=d(w,L,S,w.UNSIGNED_SHORT,w.DEPTH_COMPONENT,w.DEPTH_ATTACHMENT)):F&&O?_._depth_rb=p(w,L,S,w.DEPTH_STENCIL,w.DEPTH_STENCIL_ATTACHMENT):F?_._depth_rb=p(w,L,S,w.DEPTH_COMPONENT16,w.DEPTH_ATTACHMENT):O&&(_._depth_rb=p(w,L,S,w.STENCIL_INDEX,w.STENCIL_ATTACHMENT));var B=w.checkFramebufferStatus(w.FRAMEBUFFER);if(B!==w.FRAMEBUFFER_COMPLETE){_._destroyed=!0,w.bindFramebuffer(w.FRAMEBUFFER,null),w.deleteFramebuffer(_.handle),_.handle=null,_.depth&&(_.depth.dispose(),_.depth=null),_._depth_rb&&(w.deleteRenderbuffer(_._depth_rb),_._depth_rb=null);for(var D=0;D<_.color.length;++D)_.color[D].dispose(),_.color[D]=null;_._color_rb&&(w.deleteRenderbuffer(_._color_rb),_._color_rb=null),o(w,T),h(B)}o(w,T)}function g(_,T,w,v,L,S,k,P){this.gl=_,this._shape=[T|0,w|0],this._destroyed=!1,this._ext=P,this.color=new Array(L);for(var O=0;O<L;++O)this.color[O]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=v,this._useDepth=S,this._useStencil=k;var F=this,I=[T|0,w|0];Object.defineProperties(I,{0:{get:function(){return F._shape[0]},set:function(D){return F.width=D}},1:{get:function(){return F._shape[1]},set:function(D){return F.height=D}}}),this._shapeVector=I,y(this)}var A=g.prototype;function b(_,T,w){if(_._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(!(_._shape[0]===T&&_._shape[1]===w)){var v=_.gl,L=v.getParameter(v.MAX_RENDERBUFFER_SIZE);if(T<0||T>L||w<0||w>L)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");_._shape[0]=T,_._shape[1]=w;for(var S=l(v),k=0;k<_.color.length;++k)_.color[k].shape=_._shape;_._color_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,_._color_rb),v.renderbufferStorage(v.RENDERBUFFER,v.RGBA4,_._shape[0],_._shape[1])),_.depth&&(_.depth.shape=_._shape),_._depth_rb&&(v.bindRenderbuffer(v.RENDERBUFFER,_._depth_rb),_._useDepth&&_._useStencil?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_STENCIL,_._shape[0],_._shape[1]):_._useDepth?v.renderbufferStorage(v.RENDERBUFFER,v.DEPTH_COMPONENT16,_._shape[0],_._shape[1]):_._useStencil&&v.renderbufferStorage(v.RENDERBUFFER,v.STENCIL_INDEX,_._shape[0],_._shape[1])),v.bindFramebuffer(v.FRAMEBUFFER,_.handle);var P=v.checkFramebufferStatus(v.FRAMEBUFFER);P!==v.FRAMEBUFFER_COMPLETE&&(_.dispose(),o(v,S),h(P)),o(v,S)}}Object.defineProperties(A,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(_){if(Array.isArray(_)||(_=[_|0,_|0]),_.length!==2)throw new Error("gl-fbo: Shape vector must be length 2");var T=_[0]|0,w=_[1]|0;return b(this,T,w),[T,w]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(_){return _=_|0,b(this,_,this._shape[1]),_},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(_){return _=_|0,b(this,this._shape[0],_),_},enumerable:!1}}),A.bind=function(){if(!this._destroyed){var _=this.gl;_.bindFramebuffer(_.FRAMEBUFFER,this.handle),_.viewport(0,0,this._shape[0],this._shape[1])}},A.dispose=function(){if(!this._destroyed){this._destroyed=!0;var _=this.gl;_.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(_.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var T=0;T<this.color.length;++T)this.color[T].dispose(),this.color[T]=null;this._color_rb&&(_.deleteRenderbuffer(this._color_rb),this._color_rb=null)}};function M(_,T,w,v){a||(a=_.FRAMEBUFFER_UNSUPPORTED,r=_.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,n=_.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,f=_.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var L=_.getExtension("WEBGL_draw_buffers");if(!i&&L&&c(_,L),Array.isArray(T)&&(v=w,w=T[1]|0,T=T[0]|0),typeof T!="number")throw new Error("gl-fbo: Missing shape parameter");var S=_.getParameter(_.MAX_RENDERBUFFER_SIZE);if(T<0||T>S||w<0||w>S)throw new Error("gl-fbo: Parameters are too large for FBO");v=v||{};var k=1;if("color"in v){if(k=Math.max(v.color|0,0),k<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(k>1)if(L){if(k>_.getParameter(L.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+k+" draw buffers")}else throw new Error("gl-fbo: Multiple draw buffer extension not supported")}var P=_.UNSIGNED_BYTE,O=_.getExtension("OES_texture_float");if(v.float&&k>0){if(!O)throw new Error("gl-fbo: Context does not support floating point textures");P=_.FLOAT}else v.preferFloat&&k>0&&O&&(P=_.FLOAT);var F=!0;"depth"in v&&(F=!!v.depth);var I=!1;return"stencil"in v&&(I=!!v.stencil),new g(_,T,w,P,k,F,I,L)}},{"gl-texture2d":146}],87:[function(s,m,x){var t=s("sprintf-js").sprintf,i=s("gl-constants/lookup"),a=s("glsl-shader-name"),r=s("add-line-numbers");m.exports=n;function n(f,l,o){var c=a(l)||"of unknown name (see npm glsl-shader-name)",h="unknown type";o!==void 0&&(h=o===i.FRAGMENT_SHADER?"fragment":"vertex");for(var d=t(`Error compiling %s shader %s:
`,h,c),p=t("%s%s",d,f),y=f.split(`
`),g={},A=0;A<y.length;A++){var b=y[A];if(!(b===""||b==="\0")){var M=parseInt(b.split(":")[2]);if(isNaN(M))throw new Error(t("Could not parse error: %s",b));g[M]=b}}for(var _=r(l).split(`
`),A=0;A<_.length;A++)if(!(!g[A+3]&&!g[A+2]&&!g[A+1])){var T=_[A];if(d+=T+`
`,g[A+1]){var w=g[A+1];w=w.substr(w.split(":",3).join(":").length+1).trim(),d+=t(`^^^ %s

`,w)}}return{long:d.trim(),short:p.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(s,m,x){m.exports=h;var t=s("binary-search-bounds"),i=s("iota-array"),a=s("typedarray-pool"),r=s("gl-shader"),n=s("gl-buffer"),f=s("./lib/shaders");function l(d,p,y,g,A,b,M){this.plot=d,this.shader=p,this.pickShader=y,this.positionBuffer=g,this.weightBuffer=A,this.colorBuffer=b,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var o=l.prototype,c=[0,0,1,0,0,1,1,0,1,1,0,1];o.draw=function(){var d=[1,0,0,0,1,0,0,0,1];return function(){var p=this.plot,y=this.shader,g=this.bounds,A=this.numVertices;if(!(A<=0)){var b=p.gl,M=p.dataBox,_=g[2]-g[0],T=g[3]-g[1],w=M[2]-M[0],v=M[3]-M[1];d[0]=2*_/w,d[4]=2*T/v,d[6]=2*(g[0]-M[0])/w-1,d[7]=2*(g[1]-M[1])/v-1,y.bind();var L=y.uniforms;L.viewTransform=d,L.shape=this.shape;var S=y.attributes;this.positionBuffer.bind(),S.position.pointer(),this.weightBuffer.bind(),S.weight.pointer(b.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),S.color.pointer(b.UNSIGNED_BYTE,!0),b.drawArrays(b.TRIANGLES,0,A)}}}(),o.drawPick=function(){var d=[1,0,0,0,1,0,0,0,1],p=[0,0,0,0];return function(y){var g=this.plot,A=this.pickShader,b=this.bounds,M=this.numVertices;if(!(M<=0)){var _=g.gl,T=g.dataBox,w=b[2]-b[0],v=b[3]-b[1],L=T[2]-T[0],S=T[3]-T[1];d[0]=2*w/L,d[4]=2*v/S,d[6]=2*(b[0]-T[0])/L-1,d[7]=2*(b[1]-T[1])/S-1;for(var k=0;k<4;++k)p[k]=y>>k*8&255;this.pickOffset=y,A.bind();var P=A.uniforms;P.viewTransform=d,P.pickOffset=p,P.shape=this.shape;var O=A.attributes;return this.positionBuffer.bind(),O.position.pointer(),this.weightBuffer.bind(),O.weight.pointer(_.UNSIGNED_BYTE,!1),this.idBuffer.bind(),O.pickId.pointer(_.UNSIGNED_BYTE,!1),_.drawArrays(_.TRIANGLES,0,M),y+this.shape[0]*this.shape[1]}}}(),o.pick=function(d,p,y){var g=this.pickOffset,A=this.shape[0]*this.shape[1];if(y<g||y>=g+A)return null;var b=y-g,M=this.xData,_=this.yData;return{object:this,pointId:b,dataCoord:[M[b%this.shape[0]],_[b/this.shape[0]|0]]}},o.update=function(d){d=d||{};var p=d.shape||[0,0],y=d.x||i(p[0]),g=d.y||i(p[1]),A=d.z||new Float32Array(p[0]*p[1]),b=d.zsmooth!==!1;this.xData=y,this.yData=g;var M=d.colorLevels||[0],_=d.colorValues||[0,0,0,1],T=M.length,w=this.bounds,v,L,S,k;b?(v=w[0]=y[0],L=w[1]=g[0],S=w[2]=y[y.length-1],k=w[3]=g[g.length-1]):(v=w[0]=y[0]+(y[1]-y[0])/2,L=w[1]=g[0]+(g[1]-g[0])/2,S=w[2]=y[y.length-1]+(y[y.length-1]-y[y.length-2])/2,k=w[3]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2);var P=1/(S-v),O=1/(k-L),F=p[0],I=p[1];this.shape=[F,I];var D=(b?(F-1)*(I-1):F*I)*(c.length>>>1);this.numVertices=D;for(var U=a.mallocUint8(D*4),B=a.mallocFloat32(D*2),j=a.mallocUint8(D*2),Z=a.mallocUint32(D),ee=0,q=b?F-1:F,W=b?I-1:I,J=0;J<W;++J){var le,fe;b?(le=O*(g[J]-L),fe=O*(g[J+1]-L)):(le=J<I-1?O*(g[J]-(g[J+1]-g[J])/2-L):O*(g[J]-(g[J]-g[J-1])/2-L),fe=J<I-1?O*(g[J]+(g[J+1]-g[J])/2-L):O*(g[J]+(g[J]-g[J-1])/2-L));for(var se=0;se<q;++se){var H,Y;b?(H=P*(y[se]-v),Y=P*(y[se+1]-v)):(H=se<F-1?P*(y[se]-(y[se+1]-y[se])/2-v):P*(y[se]-(y[se]-y[se-1])/2-v),Y=se<F-1?P*(y[se]+(y[se+1]-y[se])/2-v):P*(y[se]+(y[se]-y[se-1])/2-v));for(var ne=0;ne<c.length;ne+=2){var te=c[ne],K=c[ne+1],$=b?(J+K)*F+(se+te):J*F+se,ae=A[$],ie=t.le(M,ae),oe,ue,ye,ce;if(ie<0)oe=_[0],ue=_[1],ye=_[2],ce=_[3];else if(ie===T-1)oe=_[4*T-4],ue=_[4*T-3],ye=_[4*T-2],ce=_[4*T-1];else{var me=(ae-M[ie])/(M[ie+1]-M[ie]),xe=1-me,ke=4*ie,Ae=4*(ie+1);oe=xe*_[ke]+me*_[Ae],ue=xe*_[ke+1]+me*_[Ae+1],ye=xe*_[ke+2]+me*_[Ae+2],ce=xe*_[ke+3]+me*_[Ae+3]}U[4*ee]=255*oe,U[4*ee+1]=255*ue,U[4*ee+2]=255*ye,U[4*ee+3]=255*ce,B[2*ee]=H*.5+Y*.5,B[2*ee+1]=le*.5+fe*.5,j[2*ee]=te,j[2*ee+1]=K,Z[ee]=J*F+se,ee+=1}}}this.positionBuffer.update(B),this.weightBuffer.update(j),this.colorBuffer.update(U),this.idBuffer.update(Z),a.free(B),a.free(U),a.free(j),a.free(Z)},o.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)};function h(d,p){var y=d.gl,g=r(y,f.vertex,f.fragment),A=r(y,f.pickVertex,f.pickFragment),b=n(y),M=n(y),_=n(y),T=n(y),w=new l(d,g,A,b,M,_,T);return w.update(p),d.addObject(w),w}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(s,m,x){var t=s("glslify");m.exports={fragment:t([`precision lowp float;
#define GLSLIFY 1
varying vec4 fragColor;
void main() {
  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);
}
`]),vertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 color;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragColor;

void main() {
  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  fragColor = color;
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`]),pickFragment:t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;
varying vec2 vWeight;

uniform vec2 shape;
uniform vec4 pickOffset;

void main() {
  vec2 d = step(.5, vWeight);
  vec4 id = fragId + pickOffset;
  id.x += d.x + d.y*shape.x;

  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  gl_FragColor = id/255.;
}
`]),pickVertex:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;
attribute vec2 weight;

uniform vec2 shape;
uniform mat3 viewTransform;

varying vec4 fragId;
varying vec2 vWeight;

void main() {
  vWeight = weight;

  fragId = pickId;

  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);
  gl_Position = vec4(vPosition.xy, 0, vPosition.z);
}
`])}},{glslify:231}],90:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, nextPosition;
attribute float arcLength, lineWidth;
attribute vec4 color;

uniform vec2 screenShape;
uniform float pixelRatio;
uniform mat4 model, view, projection;

varying vec4 fragColor;
varying vec3 worldPosition;
varying float pixelArcLength;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  vec4 startPoint = project(position);
  vec4 endPoint   = project(nextPosition);

  vec2 A = startPoint.xy / startPoint.w;
  vec2 B =   endPoint.xy /   endPoint.w;

  float clipAngle = atan(
    (B.y - A.y) * screenShape.y,
    (B.x - A.x) * screenShape.x
  );

  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(
    sin(clipAngle),
    -cos(clipAngle)
  ) / screenShape;

  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);

  worldPosition = position;
  pixelArcLength = arcLength;
  fragColor = color;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3      clipBounds[2];
uniform sampler2D dashTexture;
uniform float     dashScale;
uniform float     opacity;

varying vec3    worldPosition;
varying float   pixelArcLength;
varying vec4    fragColor;

void main() {
  if (
    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||
    fragColor.a * opacity == 0.
  ) discard;

  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;
  if(dashWeight < 0.5) {
    discard;
  }
  gl_FragColor = fragColor * opacity;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

#define FLOAT_MAX  1.70141184e38
#define FLOAT_MIN  1.17549435e-38

// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl
vec4 packFloat(float v) {
  float av = abs(v);

  //Handle special cases
  if(av < FLOAT_MIN) {
    return vec4(0.0, 0.0, 0.0, 0.0);
  } else if(v > FLOAT_MAX) {
    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;
  } else if(v < -FLOAT_MAX) {
    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;
  }

  vec4 c = vec4(0,0,0,0);

  //Compute exponent and mantissa
  float e = floor(log2(av));
  float m = av * pow(2.0, -e) - 1.0;

  //Unpack mantissa
  c[1] = floor(128.0 * m);
  m -= c[1] / 128.0;
  c[2] = floor(32768.0 * m);
  m -= c[2] / 32768.0;
  c[3] = floor(8388608.0 * m);

  //Unpack exponent
  float ebias = e + 127.0;
  c[0] = floor(ebias / 2.0);
  ebias -= c[0] * 2.0;
  c[1] += floor(ebias) * 128.0;

  //Unpack sign bit
  c[0] += 128.0 * step(0.0, -v);

  //Scale back to range
  return c / 255.0;
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform float pickId;
uniform vec3 clipBounds[2];

varying vec3 worldPosition;
varying float pixelArcLength;
varying vec4 fragColor;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;

  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);
}`]),f=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];x.createShader=function(l){return i(l,a,r,null,f)},x.createPickShader=function(l){return i(l,a,n,null,f)}},{"gl-shader":132,glslify:231}],91:[function(s,m,x){m.exports=_;var t=s("gl-buffer"),i=s("gl-vao"),a=s("gl-texture2d"),r=new Uint8Array(4),n=new Float32Array(r.buffer);function f(T,w,v,L){return r[0]=L,r[1]=v,r[2]=w,r[3]=T,n[0]}var l=s("binary-search-bounds"),o=s("ndarray"),c=s("./lib/shaders"),h=c.createShader,d=c.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function y(T,w){for(var v=0,L=0;L<3;++L){var S=T[L]-w[L];v+=S*S}return Math.sqrt(v)}function g(T){for(var w=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],v=0;v<3;++v)w[0][v]=Math.max(T[0][v],w[0][v]),w[1][v]=Math.min(T[1][v],w[1][v]);return w}function A(T,w,v,L){this.arcLength=T,this.position=w,this.index=v,this.dataCoordinate=L}function b(T,w,v,L,S,k){this.gl=T,this.shader=w,this.pickShader=v,this.buffer=L,this.vao=S,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=k,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var M=b.prototype;M.isTransparent=function(){return this.hasAlpha},M.isOpaque=function(){return!this.hasAlpha},M.pickSlots=1,M.setPickBase=function(T){this.pickId=T},M.drawTransparent=M.draw=function(T){if(!!this.vertexCount){var w=this.gl,v=this.shader,L=this.vao;v.bind(),v.uniforms={model:T.model||p,view:T.view||p,projection:T.projection||p,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.drawPick=function(T){if(!!this.vertexCount){var w=this.gl,v=this.pickShader,L=this.vao;v.bind(),v.uniforms={model:T.model||p,view:T.view||p,projection:T.projection||p,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[w.drawingBufferWidth,w.drawingBufferHeight],pixelRatio:this.pixelRatio},L.bind(),L.draw(w.TRIANGLE_STRIP,this.vertexCount),L.unbind()}},M.update=function(T){var w,v;this.dirty=!0;var L=!!T.connectGaps;"dashScale"in T&&(this.dashScale=T.dashScale),this.hasAlpha=!1,"opacity"in T&&(this.opacity=+T.opacity,this.opacity<1&&(this.hasAlpha=!0));var S=[],k=[],P=[],O=0,F=0,I=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],D=T.position||T.positions;if(D){var U=T.color||T.colors||[0,0,0,1],B=T.lineWidth||1,j=!1;e:for(w=1;w<D.length;++w){var Z=D[w-1],ee=D[w];for(k.push(O),P.push(Z.slice()),v=0;v<3;++v){if(isNaN(Z[v])||isNaN(ee[v])||!isFinite(Z[v])||!isFinite(ee[v])){if(!L&&S.length>0){for(var q=0;q<24;++q)S.push(S[S.length-12]);F+=2,j=!0}continue e}I[0][v]=Math.min(I[0][v],Z[v],ee[v]),I[1][v]=Math.max(I[1][v],Z[v],ee[v])}var W,J;Array.isArray(U[0])?(W=U.length>w-1?U[w-1]:U.length>0?U[U.length-1]:[0,0,0,1],J=U.length>w?U[w]:U.length>0?U[U.length-1]:[0,0,0,1]):W=J=U,W.length===3&&(W=[W[0],W[1],W[2],1]),J.length===3&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&W[3]<1&&(this.hasAlpha=!0);var le;Array.isArray(B)?le=B.length>w-1?B[w-1]:B.length>0?B[B.length-1]:[0,0,0,1]:le=B;var fe=O;if(O+=y(Z,ee),j){for(v=0;v<2;++v)S.push(Z[0],Z[1],Z[2],ee[0],ee[1],ee[2],fe,le,W[0],W[1],W[2],W[3]);F+=2,j=!1}S.push(Z[0],Z[1],Z[2],ee[0],ee[1],ee[2],fe,le,W[0],W[1],W[2],W[3],Z[0],Z[1],Z[2],ee[0],ee[1],ee[2],fe,-le,W[0],W[1],W[2],W[3],ee[0],ee[1],ee[2],Z[0],Z[1],Z[2],O,-le,J[0],J[1],J[2],J[3],ee[0],ee[1],ee[2],Z[0],Z[1],Z[2],O,le,J[0],J[1],J[2],J[3]),F+=4}}if(this.buffer.update(S),k.push(O),P.push(D[D.length-1].slice()),this.bounds=I,this.vertexCount=F,this.points=P,this.arcLength=k,"dashes"in T){var se=T.dashes,H=se.slice();for(H.unshift(0),w=1;w<H.length;++w)H[w]=H[w-1]+H[w];var Y=o(new Array(256*4),[256,1,4]);for(w=0;w<256;++w){for(v=0;v<4;++v)Y.set(w,0,v,0);l.le(H,H[H.length-1]*w/255)&1?Y.set(w,0,0,0):Y.set(w,0,0,255)}this.texture.setPixels(Y)}},M.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},M.pick=function(T){if(!T||T.id!==this.pickId)return null;var w=f(T.value[0],T.value[1],T.value[2],0),v=l.le(this.arcLength,w);if(v<0)return null;if(v===this.arcLength.length-1)return new A(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),v);for(var L=this.points[v],S=this.points[Math.min(v+1,this.points.length-1)],k=(w-this.arcLength[v])/(this.arcLength[v+1]-this.arcLength[v]),P=1-k,O=[0,0,0],F=0;F<3;++F)O[F]=P*L[F]+k*S[F];var I=Math.min(k<.5?v:v+1,this.points.length-1);return new A(w,O,I,this.points[I])};function _(T){var w=T.gl||T.scene&&T.scene.gl,v=h(w);v.attributes.position.location=0,v.attributes.nextPosition.location=1,v.attributes.arcLength.location=2,v.attributes.lineWidth.location=3,v.attributes.color.location=4;var L=d(w);L.attributes.position.location=0,L.attributes.nextPosition.location=1,L.attributes.arcLength.location=2,L.attributes.lineWidth.location=3,L.attributes.color.location=4;for(var S=t(w),k=i(w,[{buffer:S,size:3,offset:0,stride:48},{buffer:S,size:3,offset:12,stride:48},{buffer:S,size:1,offset:24,stride:48},{buffer:S,size:1,offset:28,stride:48},{buffer:S,size:4,offset:32,stride:48}]),P=o(new Array(256*4),[256,1,4]),O=0;O<256*4;++O)P.data[O]=255;var F=a(w,P);F.wrap=w.REPEAT;var I=new b(w,v,L,S,k,F);return I.update(T),I}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(s,m,x){m.exports=t;function t(i){var a=new Float32Array(16);return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a[4]=i[4],a[5]=i[5],a[6]=i[6],a[7]=i[7],a[8]=i[8],a[9]=i[9],a[10]=i[10],a[11]=i[11],a[12]=i[12],a[13]=i[13],a[14]=i[14],a[15]=i[15],a}},{}],93:[function(s,m,x){m.exports=t;function t(){var i=new Float32Array(16);return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],94:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2],f=i[3],l=i[4],o=i[5],c=i[6],h=i[7],d=i[8],p=i[9],y=i[10],g=i[11],A=i[12],b=i[13],M=i[14],_=i[15],T=a*o-r*l,w=a*c-n*l,v=a*h-f*l,L=r*c-n*o,S=r*h-f*o,k=n*h-f*c,P=d*b-p*A,O=d*M-y*A,F=d*_-g*A,I=p*M-y*b,D=p*_-g*b,U=y*_-g*M;return T*U-w*D+v*I+L*F-S*O+k*P}},{}],95:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=a[3],o=r+r,c=n+n,h=f+f,d=r*o,p=n*o,y=n*c,g=f*o,A=f*c,b=f*h,M=l*o,_=l*c,T=l*h;return i[0]=1-y-b,i[1]=p+T,i[2]=g-_,i[3]=0,i[4]=p-T,i[5]=1-d-b,i[6]=A+M,i[7]=0,i[8]=g+_,i[9]=A-M,i[10]=1-d-y,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],96:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=a[3],c=n+n,h=f+f,d=l+l,p=n*c,y=n*h,g=n*d,A=f*h,b=f*d,M=l*d,_=o*c,T=o*h,w=o*d;return i[0]=1-(A+M),i[1]=y+w,i[2]=g-T,i[3]=0,i[4]=y-w,i[5]=1-(p+M),i[6]=b+_,i[7]=0,i[8]=g+T,i[9]=b-_,i[10]=1-(p+A),i[11]=0,i[12]=r[0],i[13]=r[1],i[14]=r[2],i[15]=1,i}},{}],97:[function(s,m,x){m.exports=t;function t(i){return i[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,i}},{}],98:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=a[3],o=a[4],c=a[5],h=a[6],d=a[7],p=a[8],y=a[9],g=a[10],A=a[11],b=a[12],M=a[13],_=a[14],T=a[15],w=r*c-n*o,v=r*h-f*o,L=r*d-l*o,S=n*h-f*c,k=n*d-l*c,P=f*d-l*h,O=p*M-y*b,F=p*_-g*b,I=p*T-A*b,D=y*_-g*M,U=y*T-A*M,B=g*T-A*_,j=w*B-v*U+L*D+S*I-k*F+P*O;return j?(j=1/j,i[0]=(c*B-h*U+d*D)*j,i[1]=(f*U-n*B-l*D)*j,i[2]=(M*P-_*k+T*S)*j,i[3]=(g*k-y*P-A*S)*j,i[4]=(h*I-o*B-d*F)*j,i[5]=(r*B-f*I+l*F)*j,i[6]=(_*L-b*P-T*v)*j,i[7]=(p*P-g*L+A*v)*j,i[8]=(o*U-c*I+d*O)*j,i[9]=(n*I-r*U-l*O)*j,i[10]=(b*k-M*L+T*w)*j,i[11]=(y*L-p*k-A*w)*j,i[12]=(c*F-o*D-h*O)*j,i[13]=(r*D-n*F+f*O)*j,i[14]=(M*v-b*S-_*w)*j,i[15]=(p*S-y*v+g*w)*j,i):null}},{}],99:[function(s,m,x){var t=s("./identity");m.exports=i;function i(a,r,n,f){var l,o,c,h,d,p,y,g,A,b,M=r[0],_=r[1],T=r[2],w=f[0],v=f[1],L=f[2],S=n[0],k=n[1],P=n[2];return Math.abs(M-S)<1e-6&&Math.abs(_-k)<1e-6&&Math.abs(T-P)<1e-6?t(a):(y=M-S,g=_-k,A=T-P,b=1/Math.sqrt(y*y+g*g+A*A),y*=b,g*=b,A*=b,l=v*A-L*g,o=L*y-w*A,c=w*g-v*y,b=Math.sqrt(l*l+o*o+c*c),b?(b=1/b,l*=b,o*=b,c*=b):(l=0,o=0,c=0),h=g*c-A*o,d=A*l-y*c,p=y*o-g*l,b=Math.sqrt(h*h+d*d+p*p),b?(b=1/b,h*=b,d*=b,p*=b):(h=0,d=0,p=0),a[0]=l,a[1]=h,a[2]=y,a[3]=0,a[4]=o,a[5]=d,a[6]=g,a[7]=0,a[8]=c,a[9]=p,a[10]=A,a[11]=0,a[12]=-(l*M+o*_+c*T),a[13]=-(h*M+d*_+p*T),a[14]=-(y*M+g*_+A*T),a[15]=1,a)}},{"./identity":97}],100:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=a[3],c=a[4],h=a[5],d=a[6],p=a[7],y=a[8],g=a[9],A=a[10],b=a[11],M=a[12],_=a[13],T=a[14],w=a[15],v=r[0],L=r[1],S=r[2],k=r[3];return i[0]=v*n+L*c+S*y+k*M,i[1]=v*f+L*h+S*g+k*_,i[2]=v*l+L*d+S*A+k*T,i[3]=v*o+L*p+S*b+k*w,v=r[4],L=r[5],S=r[6],k=r[7],i[4]=v*n+L*c+S*y+k*M,i[5]=v*f+L*h+S*g+k*_,i[6]=v*l+L*d+S*A+k*T,i[7]=v*o+L*p+S*b+k*w,v=r[8],L=r[9],S=r[10],k=r[11],i[8]=v*n+L*c+S*y+k*M,i[9]=v*f+L*h+S*g+k*_,i[10]=v*l+L*d+S*A+k*T,i[11]=v*o+L*p+S*b+k*w,v=r[12],L=r[13],S=r[14],k=r[15],i[12]=v*n+L*c+S*y+k*M,i[13]=v*f+L*h+S*g+k*_,i[14]=v*l+L*d+S*A+k*T,i[15]=v*o+L*p+S*b+k*w,i}},{}],101:[function(s,m,x){m.exports=t;function t(i,a,r,n,f,l,o){var c=1/(a-r),h=1/(n-f),d=1/(l-o);return i[0]=-2*c,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=-2*h,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=2*d,i[11]=0,i[12]=(a+r)*c,i[13]=(f+n)*h,i[14]=(o+l)*d,i[15]=1,i}},{}],102:[function(s,m,x){m.exports=t;function t(i,a,r,n,f){var l=1/Math.tan(a/2),o=1/(n-f);return i[0]=l/r,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=l,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=(f+n)*o,i[11]=-1,i[12]=0,i[13]=0,i[14]=2*f*n*o,i[15]=0,i}},{}],103:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=n[0],l=n[1],o=n[2],c=Math.sqrt(f*f+l*l+o*o),h,d,p,y,g,A,b,M,_,T,w,v,L,S,k,P,O,F,I,D,U,B,j,Z;return Math.abs(c)<1e-6?null:(c=1/c,f*=c,l*=c,o*=c,h=Math.sin(r),d=Math.cos(r),p=1-d,y=a[0],g=a[1],A=a[2],b=a[3],M=a[4],_=a[5],T=a[6],w=a[7],v=a[8],L=a[9],S=a[10],k=a[11],P=f*f*p+d,O=l*f*p+o*h,F=o*f*p-l*h,I=f*l*p-o*h,D=l*l*p+d,U=o*l*p+f*h,B=f*o*p+l*h,j=l*o*p-f*h,Z=o*o*p+d,i[0]=y*P+M*O+v*F,i[1]=g*P+_*O+L*F,i[2]=A*P+T*O+S*F,i[3]=b*P+w*O+k*F,i[4]=y*I+M*D+v*U,i[5]=g*I+_*D+L*U,i[6]=A*I+T*D+S*U,i[7]=b*I+w*D+k*U,i[8]=y*B+M*j+v*Z,i[9]=g*B+_*j+L*Z,i[10]=A*B+T*j+S*Z,i[11]=b*B+w*j+k*Z,a!==i&&(i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i)}},{}],104:[function(s,m,x){m.exports=t;function t(i,a,r){var n=Math.sin(r),f=Math.cos(r),l=a[4],o=a[5],c=a[6],h=a[7],d=a[8],p=a[9],y=a[10],g=a[11];return a!==i&&(i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i[4]=l*f+d*n,i[5]=o*f+p*n,i[6]=c*f+y*n,i[7]=h*f+g*n,i[8]=d*f-l*n,i[9]=p*f-o*n,i[10]=y*f-c*n,i[11]=g*f-h*n,i}},{}],105:[function(s,m,x){m.exports=t;function t(i,a,r){var n=Math.sin(r),f=Math.cos(r),l=a[0],o=a[1],c=a[2],h=a[3],d=a[8],p=a[9],y=a[10],g=a[11];return a!==i&&(i[4]=a[4],i[5]=a[5],i[6]=a[6],i[7]=a[7],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i[0]=l*f-d*n,i[1]=o*f-p*n,i[2]=c*f-y*n,i[3]=h*f-g*n,i[8]=l*n+d*f,i[9]=o*n+p*f,i[10]=c*n+y*f,i[11]=h*n+g*f,i}},{}],106:[function(s,m,x){m.exports=t;function t(i,a,r){var n=Math.sin(r),f=Math.cos(r),l=a[0],o=a[1],c=a[2],h=a[3],d=a[4],p=a[5],y=a[6],g=a[7];return a!==i&&(i[8]=a[8],i[9]=a[9],i[10]=a[10],i[11]=a[11],i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15]),i[0]=l*f+d*n,i[1]=o*f+p*n,i[2]=c*f+y*n,i[3]=h*f+g*n,i[4]=d*f-l*n,i[5]=p*f-o*n,i[6]=y*f-c*n,i[7]=g*f-h*n,i}},{}],107:[function(s,m,x){m.exports=t;function t(i,a,r){var n=r[0],f=r[1],l=r[2];return i[0]=a[0]*n,i[1]=a[1]*n,i[2]=a[2]*n,i[3]=a[3]*n,i[4]=a[4]*f,i[5]=a[5]*f,i[6]=a[6]*f,i[7]=a[7]*f,i[8]=a[8]*l,i[9]=a[9]*l,i[10]=a[10]*l,i[11]=a[11]*l,i[12]=a[12],i[13]=a[13],i[14]=a[14],i[15]=a[15],i}},{}],108:[function(s,m,x){m.exports=t;function t(i,a,r){var n=r[0],f=r[1],l=r[2],o,c,h,d,p,y,g,A,b,M,_,T;return a===i?(i[12]=a[0]*n+a[4]*f+a[8]*l+a[12],i[13]=a[1]*n+a[5]*f+a[9]*l+a[13],i[14]=a[2]*n+a[6]*f+a[10]*l+a[14],i[15]=a[3]*n+a[7]*f+a[11]*l+a[15]):(o=a[0],c=a[1],h=a[2],d=a[3],p=a[4],y=a[5],g=a[6],A=a[7],b=a[8],M=a[9],_=a[10],T=a[11],i[0]=o,i[1]=c,i[2]=h,i[3]=d,i[4]=p,i[5]=y,i[6]=g,i[7]=A,i[8]=b,i[9]=M,i[10]=_,i[11]=T,i[12]=o*n+p*f+b*l+a[12],i[13]=c*n+y*f+M*l+a[13],i[14]=h*n+g*f+_*l+a[14],i[15]=d*n+A*f+T*l+a[15]),i}},{}],109:[function(s,m,x){m.exports=t;function t(i,a){if(i===a){var r=a[1],n=a[2],f=a[3],l=a[6],o=a[7],c=a[11];i[1]=a[4],i[2]=a[8],i[3]=a[12],i[4]=r,i[6]=a[9],i[7]=a[13],i[8]=n,i[9]=l,i[11]=a[14],i[12]=f,i[13]=o,i[14]=c}else i[0]=a[0],i[1]=a[4],i[2]=a[8],i[3]=a[12],i[4]=a[1],i[5]=a[5],i[6]=a[9],i[7]=a[13],i[8]=a[2],i[9]=a[6],i[10]=a[10],i[11]=a[14],i[12]=a[3],i[13]=a[7],i[14]=a[11],i[15]=a[15];return i}},{}],110:[function(s,m,x){var t=s("barycentric"),i=s("polytope-closest-point/lib/closest_point_2d.js");m.exports=l;function a(o,c){for(var h=[0,0,0,0],d=0;d<4;++d)for(var p=0;p<4;++p)h[p]+=o[4*d+p]*c[d];return h}function r(o,c,h,d,p){for(var y=a(d,a(h,a(c,[o[0],o[1],o[2],1]))),g=0;g<3;++g)y[g]/=y[3];return[.5*p[0]*(1+y[0]),.5*p[1]*(1-y[1])]}function n(o,c){if(o.length===2){for(var h=0,d=0,p=0;p<2;++p)h+=Math.pow(c[p]-o[0][p],2),d+=Math.pow(c[p]-o[1][p],2);return h=Math.sqrt(h),d=Math.sqrt(d),h+d<1e-6?[1,0]:[d/(h+d),h/(d+h)]}else if(o.length===3){var y=[0,0];return i(o[0],o[1],o[2],c,y),t(o,y)}return[]}function f(o,c){for(var h=[0,0,0],d=0;d<o.length;++d)for(var p=o[d],y=c[d],g=0;g<3;++g)h[g]+=y*p[g];return h}function l(o,c,h,d,p,y){if(o.length===1)return[0,o[0].slice()];for(var g=new Array(o.length),A=0;A<o.length;++A)g[A]=r(o[A],h,d,p,y);for(var b=0,M=1/0,A=0;A<g.length;++A){for(var _=0,T=0;T<2;++T)_+=Math.pow(g[A][T]-c[T],2);_<M&&(M=_,b=A)}for(var w=n(g,c),v=0,A=0;A<3;++A){if(w[A]<-.001||w[A]>1.0001)return null;v+=w[A]}return Math.abs(v-1)>.001?null:[b,f(o,w),w]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(s,m,x){var t=s("glslify"),i=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position, normal;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model
           , view
           , projection
           , inverseModel;
uniform vec3 eyePosition
           , lightPosition;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

vec4 project(vec3 p) {
  return projection * view * model * vec4(p, 1.0);
}

void main() {
  gl_Position      = project(position);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * vec4(position , 1.0);
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  f_color          = color;
  f_data           = position;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness
            , fresnel
            , kambient
            , kdiffuse
            , kspecular;
uniform sampler2D texture;

varying vec3 f_normal
           , f_lightDirection
           , f_eyeDirection
           , f_data;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (f_color.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], f_data)
  ) discard;

  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d

  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * f_color.a;
}
`]),r=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;

uniform mat4 model, view, projection;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_color = color;
  f_data  = position;
  f_uv    = uv;
}`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec3 f_data;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;

  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),f=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 uv;
attribute float pointSize;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);
  } else {
    gl_Position = projection * view * model * vec4(position, 1.0);
  }
  gl_PointSize = pointSize;
  f_color = color;
  f_uv = uv;
}`]),l=t([`precision highp float;
#define GLSLIFY 1

uniform sampler2D texture;
uniform float opacity;

varying vec4 f_color;
varying vec2 f_uv;

void main() {
  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);
  if(dot(pointR, pointR) > 0.25) {
    discard;
  }
  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;
}`]),o=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;
attribute vec4 id;

uniform mat4 model, view, projection;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
  f_id        = id;
  f_position  = position;
}`]),c=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]),h=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3  position;
attribute float pointSize;
attribute vec4  id;

uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);
  } else {
    gl_Position  = projection * view * model * vec4(position, 1.0);
    gl_PointSize = pointSize;
  }
  f_id         = id;
  f_position   = position;
}`]),d=t([`precision highp float;
#define GLSLIFY 1

attribute vec3 position;

uniform mat4 model, view, projection;

void main() {
  gl_Position = projection * view * model * vec4(position, 1.0);
}`]),p=t([`precision highp float;
#define GLSLIFY 1

uniform vec3 contourColor;

void main() {
  gl_FragColor = vec4(contourColor, 1.0);
}
`]);x.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.wireShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},x.pointShader={vertex:f,fragment:l,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},x.pickShader={vertex:o,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},x.pointPickShader={vertex:h,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},x.contourShader={vertex:d,fragment:p,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(s,m,x){var t=1e-6,i=1e-6,a=s("gl-shader"),r=s("gl-buffer"),n=s("gl-vao"),f=s("gl-texture2d"),l=s("normals"),o=s("gl-mat4/multiply"),c=s("gl-mat4/invert"),h=s("ndarray"),d=s("colormap"),p=s("simplicial-complex-contour"),y=s("typedarray-pool"),g=s("./lib/shaders"),A=s("./lib/closest-point"),b=g.meshShader,M=g.wireShader,_=g.pointShader,T=g.pickShader,w=g.pointPickShader,v=g.contourShader,L=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function S(q,W,J,le,fe,se,H,Y,ne,te,K,$,ae,ie,oe,ue,ye,ce,me,xe,ke,Ae,Oe,He,Ge,_e,Re){this.gl=q,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=W,this.dirty=!0,this.triShader=J,this.lineShader=le,this.pointShader=fe,this.pickShader=se,this.pointPickShader=H,this.contourShader=Y,this.trianglePositions=ne,this.triangleColors=K,this.triangleNormals=ae,this.triangleUVs=$,this.triangleIds=te,this.triangleVAO=ie,this.triangleCount=0,this.lineWidth=1,this.edgePositions=oe,this.edgeColors=ye,this.edgeUVs=ce,this.edgeIds=ue,this.edgeVAO=me,this.edgeCount=0,this.pointPositions=xe,this.pointColors=Ae,this.pointUVs=Oe,this.pointSizes=He,this.pointIds=ke,this.pointVAO=Ge,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=_e,this.contourVAO=Re,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=L,this._view=L,this._projection=L,this._resolution=[1,1]}var k=S.prototype;k.isOpaque=function(){return!this.hasAlpha},k.isTransparent=function(){return this.hasAlpha},k.pickSlots=1,k.setPickBase=function(q){this.pickId=q};function P(q,W){if(!W||!W.length)return 1;for(var J=0;J<W.length;++J){if(W.length<2)return 1;if(W[J][0]===q)return W[J][1];if(W[J][0]>q&&J>0){var le=(W[J][0]-q)/(W[J][0]-W[J-1][0]);return W[J][1]*(1-le)+le*W[J-1][1]}}return 1}function O(q,W){for(var J=d({colormap:q,nshades:256,format:"rgba"}),le=new Uint8Array(256*4),fe=0;fe<256;++fe){for(var se=J[fe],H=0;H<3;++H)le[4*fe+H]=se[H];W?le[4*fe+3]=255*P(fe/255,W):le[4*fe+3]=255*se[3]}return h(le,[256,256,4],[4,0,1])}function F(q){for(var W=q.length,J=new Array(W),le=0;le<W;++le)J[le]=q[le][2];return J}k.highlight=function(q){if(!q||!this.contourEnable){this.contourCount=0;return}for(var W=p(this.cells,this.intensity,q.intensity),J=W.cells,le=W.vertexIds,fe=W.vertexWeights,se=J.length,H=y.mallocFloat32(2*3*se),Y=0,ne=0;ne<se;++ne)for(var te=J[ne],K=0;K<2;++K){var $=te[0];te.length===2&&($=te[K]);for(var ae=le[$][0],ie=le[$][1],oe=fe[$],ue=1-oe,ye=this.positions[ae],ce=this.positions[ie],me=0;me<3;++me)H[Y++]=oe*ye[me]+ue*ce[me]}this.contourCount=Y/3|0,this.contourPositions.update(H.subarray(0,Y)),y.free(H)},k.update=function(q){q=q||{};var W=this.gl;this.dirty=!0,"contourEnable"in q&&(this.contourEnable=q.contourEnable),"contourColor"in q&&(this.contourColor=q.contourColor),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"lightPosition"in q&&(this.lightPosition=q.lightPosition),this.hasAlpha=!1,"opacity"in q&&(this.opacity=q.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in q&&(this.opacityscale=q.opacityscale,this.hasAlpha=!0),"ambient"in q&&(this.ambientLight=q.ambient),"diffuse"in q&&(this.diffuseLight=q.diffuse),"specular"in q&&(this.specularLight=q.specular),"roughness"in q&&(this.roughness=q.roughness),"fresnel"in q&&(this.fresnel=q.fresnel),q.texture?(this.texture.dispose(),this.texture=f(W,q.texture)):q.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=W.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=W.LINEAR,this.texture.setPixels(O(q.colormap,this.opacityscale)),this.texture.generateMipmap());var J=q.cells,le=q.positions;if(!le||!J)return;var fe=[],se=[],H=[],Y=[],ne=[],te=[],K=[],$=[],ae=[],ie=[],oe=[],ue=[],ye=[],ce=[];this.cells=J,this.positions=le;var me=q.vertexNormals,xe=q.cellNormals,ke=q.vertexNormalsEpsilon===void 0?t:q.vertexNormalsEpsilon,Ae=q.faceNormalsEpsilon===void 0?i:q.faceNormalsEpsilon;q.useFacetNormals&&!xe&&(xe=l.faceNormals(J,le,Ae)),!xe&&!me&&(me=l.vertexNormals(J,le,ke));var Oe=q.vertexColors,He=q.cellColors,Ge=q.meshColor||[1,1,1,1],_e=q.vertexUVs,Re=q.vertexIntensity,We=q.cellUVs,qe=q.cellIntensity,Ue=1/0,Ie=-1/0;if(!_e&&!We)if(Re)if(q.vertexIntensityBounds)Ue=+q.vertexIntensityBounds[0],Ie=+q.vertexIntensityBounds[1];else for(var Ve=0;Ve<Re.length;++Ve){var dt=Re[Ve];Ue=Math.min(Ue,dt),Ie=Math.max(Ie,dt)}else if(qe)if(q.cellIntensityBounds)Ue=+q.cellIntensityBounds[0],Ie=+q.cellIntensityBounds[1];else for(var Ve=0;Ve<qe.length;++Ve){var dt=qe[Ve];Ue=Math.min(Ue,dt),Ie=Math.max(Ie,dt)}else for(var Ve=0;Ve<le.length;++Ve){var dt=le[Ve][2];Ue=Math.min(Ue,dt),Ie=Math.max(Ie,dt)}Re?this.intensity=Re:qe?this.intensity=qe:this.intensity=F(le),this.pickVertex=!(qe||He);var Rt=q.pointSizes,Gt=q.pointSize||1;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(var Ve=0;Ve<le.length;++Ve)for(var kt=le[Ve],zt=0;zt<3;++zt)isNaN(kt[zt])||!isFinite(kt[zt])||(this.bounds[0][zt]=Math.min(this.bounds[0][zt],kt[zt]),this.bounds[1][zt]=Math.max(this.bounds[1][zt],kt[zt]));var Bt=0,Lt=0,Mt=0;e:for(var Ve=0;Ve<J.length;++Ve){var it=J[Ve];switch(it.length){case 1:for(var ht=it[0],kt=le[ht],zt=0;zt<3;++zt)if(isNaN(kt[zt])||!isFinite(kt[zt]))continue e;ie.push(kt[0],kt[1],kt[2]);var Qe;Oe?Qe=Oe[ht]:He?Qe=He[Ve]:Qe=Ge,this.opacityscale&&Re?se.push(Qe[0],Qe[1],Qe[2],this.opacity*P((Re[ht]-Ue)/(Ie-Ue),this.opacityscale)):Qe.length===3?oe.push(Qe[0],Qe[1],Qe[2],this.opacity):(oe.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0));var Ce;_e?Ce=_e[ht]:Re?Ce=[(Re[ht]-Ue)/(Ie-Ue),0]:We?Ce=We[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Ie-Ue),0]:Ce=[(kt[2]-Ue)/(Ie-Ue),0],ue.push(Ce[0],Ce[1]),Rt?ye.push(Rt[ht]):ye.push(Gt),ce.push(Ve),Mt+=1;break;case 2:for(var zt=0;zt<2;++zt)for(var ht=it[zt],kt=le[ht],Xe=0;Xe<3;++Xe)if(isNaN(kt[Xe])||!isFinite(kt[Xe]))continue e;for(var zt=0;zt<2;++zt){var ht=it[zt],kt=le[ht];te.push(kt[0],kt[1],kt[2]);var Qe;Oe?Qe=Oe[ht]:He?Qe=He[Ve]:Qe=Ge,this.opacityscale&&Re?se.push(Qe[0],Qe[1],Qe[2],this.opacity*P((Re[ht]-Ue)/(Ie-Ue),this.opacityscale)):Qe.length===3?K.push(Qe[0],Qe[1],Qe[2],this.opacity):(K.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0));var Ce;_e?Ce=_e[ht]:Re?Ce=[(Re[ht]-Ue)/(Ie-Ue),0]:We?Ce=We[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Ie-Ue),0]:Ce=[(kt[2]-Ue)/(Ie-Ue),0],$.push(Ce[0],Ce[1]),ae.push(Ve)}Lt+=1;break;case 3:for(var zt=0;zt<3;++zt)for(var ht=it[zt],kt=le[ht],Xe=0;Xe<3;++Xe)if(isNaN(kt[Xe])||!isFinite(kt[Xe]))continue e;for(var zt=0;zt<3;++zt){var ht=it[2-zt],kt=le[ht];fe.push(kt[0],kt[1],kt[2]);var Qe;Oe?Qe=Oe[ht]:He?Qe=He[Ve]:Qe=Ge,Qe?this.opacityscale&&Re?se.push(Qe[0],Qe[1],Qe[2],this.opacity*P((Re[ht]-Ue)/(Ie-Ue),this.opacityscale)):Qe.length===3?se.push(Qe[0],Qe[1],Qe[2],this.opacity):(se.push(Qe[0],Qe[1],Qe[2],Qe[3]*this.opacity),Qe[3]<1&&(this.hasAlpha=!0)):se.push(.5,.5,.5,1);var Ce;_e?Ce=_e[ht]:Re?Ce=[(Re[ht]-Ue)/(Ie-Ue),0]:We?Ce=We[Ve]:qe?Ce=[(qe[Ve]-Ue)/(Ie-Ue),0]:Ce=[(kt[2]-Ue)/(Ie-Ue),0],Y.push(Ce[0],Ce[1]);var rt;me?rt=me[ht]:rt=xe[Ve],H.push(rt[0],rt[1],rt[2]),ne.push(Ve)}Bt+=1;break}}this.pointCount=Mt,this.edgeCount=Lt,this.triangleCount=Bt,this.pointPositions.update(ie),this.pointColors.update(oe),this.pointUVs.update(ue),this.pointSizes.update(ye),this.pointIds.update(new Uint32Array(ce)),this.edgePositions.update(te),this.edgeColors.update(K),this.edgeUVs.update($),this.edgeIds.update(new Uint32Array(ae)),this.trianglePositions.update(fe),this.triangleColors.update(se),this.triangleUVs.update(Y),this.triangleNormals.update(H),this.triangleIds.update(new Uint32Array(ne))},k.drawTransparent=k.draw=function(q){q=q||{};for(var W=this.gl,J=q.model||L,le=q.view||L,fe=q.projection||L,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],H=0;H<3;++H)se[0][H]=Math.max(se[0][H],this.clipBounds[0][H]),se[1][H]=Math.min(se[1][H],this.clipBounds[1][H]);var Y={model:J,view:le,projection:fe,inverseModel:L.slice(),clipBounds:se,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};Y.inverseModel=c(Y.inverseModel,Y.model),W.disable(W.CULL_FACE),this.texture.bind(0);var ne=new Array(16);o(ne,Y.view,Y.model),o(ne,Y.projection,ne),c(ne,ne);for(var H=0;H<3;++H)Y.eyePosition[H]=ne[12+H]/ne[15];for(var te=ne[15],H=0;H<3;++H)te+=this.lightPosition[H]*ne[4*H+3];for(var H=0;H<3;++H){for(var K=ne[12+H],$=0;$<3;++$)K+=ne[4*$+H]*this.lightPosition[$];Y.lightPosition[H]=K/te}if(this.triangleCount>0){var ae=this.triShader;ae.bind(),ae.uniforms=Y,this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()}if(this.edgeCount>0&&this.lineWidth>0){var ae=this.lineShader;ae.bind(),ae.uniforms=Y,this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()}if(this.pointCount>0){var ae=this.pointShader;ae.bind(),ae.uniforms=Y,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind()}if(this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0){var ae=this.contourShader;ae.bind(),ae.uniforms=Y,this.contourVAO.bind(),W.drawArrays(W.LINES,0,this.contourCount),this.contourVAO.unbind()}},k.drawPick=function(q){q=q||{};for(var W=this.gl,J=q.model||L,le=q.view||L,fe=q.projection||L,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],H=0;H<3;++H)se[0][H]=Math.max(se[0][H],this.clipBounds[0][H]),se[1][H]=Math.min(se[1][H],this.clipBounds[1][H]);this._model=[].slice.call(J),this._view=[].slice.call(le),this._projection=[].slice.call(fe),this._resolution=[W.drawingBufferWidth,W.drawingBufferHeight];var Y={model:J,view:le,projection:fe,clipBounds:se,pickId:this.pickId/255},ne=this.pickShader;if(ne.bind(),ne.uniforms=Y,this.triangleCount>0&&(this.triangleVAO.bind(),W.drawArrays(W.TRIANGLES,0,this.triangleCount*3),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),W.lineWidth(this.lineWidth*this.pixelRatio),W.drawArrays(W.LINES,0,this.edgeCount*2),this.edgeVAO.unbind()),this.pointCount>0){var ne=this.pointPickShader;ne.bind(),ne.uniforms=Y,this.pointVAO.bind(),W.drawArrays(W.POINTS,0,this.pointCount),this.pointVAO.unbind()}},k.pick=function(q){if(!q||q.id!==this.pickId)return null;for(var W=q.value[0]+256*q.value[1]+65536*q.value[2],J=this.cells[W],le=this.positions,fe=new Array(J.length),se=0;se<J.length;++se)fe[se]=le[J[se]];var H=q.coord[0],Y=q.coord[1];if(!this.pickVertex){var ne=this.positions[J[0]],te=this.positions[J[1]],K=this.positions[J[2]],$=[(ne[0]+te[0]+K[0])/3,(ne[1]+te[1]+K[1])/3,(ne[2]+te[2]+K[2])/3];return{_cellCenter:!0,position:[H,Y],index:W,cell:J,cellId:W,intensity:this.intensity[W],dataCoordinate:$}}var ae=A(fe,[H*this.pixelRatio,this._resolution[1]-Y*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ae)return null;for(var ie=ae[2],oe=0,se=0;se<J.length;++se)oe+=ie[se]*this.intensity[J[se]];return{position:ae[1],index:J[ae[0]],cell:J,cellId:W,intensity:oe,dataCoordinate:this.positions[J[ae[0]]]}},k.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()};function I(q){var W=a(q,b.vertex,b.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.normal.location=4,W}function D(q){var W=a(q,M.vertex,M.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W}function U(q){var W=a(q,_.vertex,_.fragment);return W.attributes.position.location=0,W.attributes.color.location=2,W.attributes.uv.location=3,W.attributes.pointSize.location=4,W}function B(q){var W=a(q,T.vertex,T.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W}function j(q){var W=a(q,w.vertex,w.fragment);return W.attributes.position.location=0,W.attributes.id.location=1,W.attributes.pointSize.location=4,W}function Z(q){var W=a(q,v.vertex,v.fragment);return W.attributes.position.location=0,W}function ee(q,W){arguments.length===1&&(W=q,q=W.gl);var J=q.getExtension("OES_standard_derivatives")||q.getExtension("MOZ_OES_standard_derivatives")||q.getExtension("WEBKIT_OES_standard_derivatives");if(!J)throw new Error("derivatives not supported");var le=I(q),fe=D(q),se=U(q),H=B(q),Y=j(q),ne=Z(q),te=f(q,h(new Uint8Array([255,255,255,255]),[1,1,4]));te.generateMipmap(),te.minFilter=q.LINEAR_MIPMAP_LINEAR,te.magFilter=q.LINEAR;var K=r(q),$=r(q),ae=r(q),ie=r(q),oe=r(q),ue=n(q,[{buffer:K,type:q.FLOAT,size:3},{buffer:oe,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:$,type:q.FLOAT,size:4},{buffer:ae,type:q.FLOAT,size:2},{buffer:ie,type:q.FLOAT,size:3}]),ye=r(q),ce=r(q),me=r(q),xe=r(q),ke=n(q,[{buffer:ye,type:q.FLOAT,size:3},{buffer:xe,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:ce,type:q.FLOAT,size:4},{buffer:me,type:q.FLOAT,size:2}]),Ae=r(q),Oe=r(q),He=r(q),Ge=r(q),_e=r(q),Re=n(q,[{buffer:Ae,type:q.FLOAT,size:3},{buffer:_e,type:q.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Oe,type:q.FLOAT,size:4},{buffer:He,type:q.FLOAT,size:2},{buffer:Ge,type:q.FLOAT,size:1}]),We=r(q),qe=n(q,[{buffer:We,type:q.FLOAT,size:3}]),Ue=new S(q,te,le,fe,se,H,Y,ne,K,oe,$,ae,ie,ue,ye,xe,ce,me,ke,Ae,_e,Oe,He,Ge,Re,We,qe);return Ue.update(W),Ue}m.exports=ee},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(s,m,x){m.exports=f;var t=s("gl-buffer"),i=s("gl-shader"),a=s("./shaders");function r(l,o,c){this.plot=l,this.vbo=o,this.shader=c}var n=r.prototype;n.bind=function(){var l=this.shader;this.vbo.bind(),this.shader.bind(),l.attributes.coord.pointer(),l.uniforms.screenBox=this.plot.screenBox},n.drawBox=function(){var l=[0,0],o=[0,0];return function(c,h,d,p,y){var g=this.plot,A=this.shader,b=g.gl;l[0]=c,l[1]=h,o[0]=d,o[1]=p,A.uniforms.lo=l,A.uniforms.hi=o,A.uniforms.color=y,b.drawArrays(b.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(l){var o=l.gl,c=t(o,[0,0,0,1,1,0,1,1]),h=i(o,a.boxVert,a.lineFrag);return new r(l,c,h)}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(s,m,x){m.exports=o;var t=s("gl-buffer"),i=s("gl-shader"),a=s("binary-search-bounds"),r=s("./shaders");function n(c,h,d,p){this.plot=c,this.vbo=h,this.shader=d,this.tickShader=p,this.ticks=[[],[]]}function f(c,h){return c-h}var l=n.prototype;l.draw=function(){var c=[0,0],h=[0,0],d=[0,0];return function(){for(var p=this.plot,y=this.vbo,g=this.shader,A=this.ticks,b=p.gl,M=p._tickBounds,_=p.dataBox,T=p.viewBox,w=p.gridLineWidth,v=p.gridLineColor,L=p.gridLineEnable,S=p.pixelRatio,k=0;k<2;++k){var P=M[k],O=M[k+2],F=O-P,I=.5*(_[k+2]+_[k]),D=_[k+2]-_[k];h[k]=2*F/D,c[k]=2*(P-I)/D}g.bind(),y.bind(),g.attributes.dataCoord.pointer(),g.uniforms.dataShift=c,g.uniforms.dataScale=h;for(var U=0,k=0;k<2;++k){d[0]=d[1]=0,d[k]=1,g.uniforms.dataAxis=d,g.uniforms.lineWidth=w[k]/(T[k+2]-T[k])*S,g.uniforms.color=v[k];var B=A[k].length*6;L[k]&&B&&b.drawArrays(b.TRIANGLES,U,B),U+=B}}}(),l.drawTickMarks=function(){var c=[0,0],h=[0,0],d=[1,0],p=[0,1],y=[0,0],g=[0,0];return function(){for(var A=this.plot,b=this.vbo,M=this.tickShader,_=this.ticks,T=A.gl,w=A._tickBounds,v=A.dataBox,L=A.viewBox,S=A.pixelRatio,k=A.screenBox,P=k[2]-k[0],O=k[3]-k[1],F=L[2]-L[0],I=L[3]-L[1],D=0;D<2;++D){var U=w[D],B=w[D+2],j=B-U,Z=.5*(v[D+2]+v[D]),ee=v[D+2]-v[D];h[D]=2*j/ee,c[D]=2*(U-Z)/ee}h[0]*=F/P,c[0]*=F/P,h[1]*=I/O,c[1]*=I/O,M.bind(),b.bind(),M.attributes.dataCoord.pointer();var q=M.uniforms;q.dataShift=c,q.dataScale=h;var W=A.tickMarkLength,J=A.tickMarkWidth,le=A.tickMarkColor,fe=0,se=_[0].length*6,H=Math.min(a.ge(_[0],(v[0]-w[0])/(w[2]-w[0]),f),_[0].length),Y=Math.min(a.gt(_[0],(v[2]-w[0])/(w[2]-w[0]),f),_[0].length),ne=fe+6*H,te=6*Math.max(0,Y-H),K=Math.min(a.ge(_[1],(v[1]-w[1])/(w[3]-w[1]),f),_[1].length),$=Math.min(a.gt(_[1],(v[3]-w[1])/(w[3]-w[1]),f),_[1].length),ae=se+6*K,ie=6*Math.max(0,$-K);y[0]=2*(L[0]-W[1])/P-1,y[1]=(L[3]+L[1])/O-1,g[0]=W[1]*S/P,g[1]=J[1]*S/O,ie&&(q.color=le[1],q.tickScale=g,q.dataAxis=p,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ae,ie)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[1]-W[0])/O-1,g[0]=J[0]*S/P,g[1]=W[0]*S/O,te&&(q.color=le[0],q.tickScale=g,q.dataAxis=d,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,te)),y[0]=2*(L[2]+W[3])/P-1,y[1]=(L[3]+L[1])/O-1,g[0]=W[3]*S/P,g[1]=J[3]*S/O,ie&&(q.color=le[3],q.tickScale=g,q.dataAxis=p,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ae,ie)),y[0]=(L[2]+L[0])/P-1,y[1]=2*(L[3]+W[2])/O-1,g[0]=J[2]*S/P,g[1]=W[2]*S/O,te&&(q.color=le[2],q.tickScale=g,q.dataAxis=d,q.screenOffset=y,T.drawArrays(T.TRIANGLES,ne,te))}}(),l.update=function(){var c=[1,1,-1,-1,1,-1],h=[1,-1,1,1,-1,-1];return function(d){var p=d.ticks,y=d.bounds,g=new Float32Array(6*3*(p[0].length+p[1].length));this.plot.zeroLineEnable;for(var A=0,b=[[],[]],M=0;M<2;++M)for(var _=b[M],T=p[M],w=y[M],v=y[M+2],L=0;L<T.length;++L){var S=(T[L].x-w)/(v-w);_.push(S);for(var k=0;k<6;++k)g[A++]=S,g[A++]=c[k],g[A++]=h[k]}this.ticks=b,this.vbo.update(g)}}(),l.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()};function o(c){var h=c.gl,d=t(h),p=i(h,r.gridVert,r.gridFrag),y=i(h,r.tickVert,r.gridFrag),g=new n(c,d,p,y);return g}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(s,m,x){m.exports=f;var t=s("gl-buffer"),i=s("gl-shader"),a=s("./shaders");function r(l,o,c){this.plot=l,this.vbo=o,this.shader=c}var n=r.prototype;n.bind=function(){var l=this.shader;this.vbo.bind(),this.shader.bind(),l.attributes.coord.pointer(),l.uniforms.screenBox=this.plot.screenBox},n.drawLine=function(){var l=[0,0],o=[0,0];return function(c,h,d,p,y,g){var A=this.plot,b=this.shader,M=A.gl;l[0]=c,l[1]=h,o[0]=d,o[1]=p,b.uniforms.start=l,b.uniforms.end=o,b.uniforms.width=y*A.pixelRatio,b.uniforms.color=g,M.drawArrays(M.TRIANGLE_STRIP,0,4)}}(),n.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function f(l){var o=l.gl,c=t(o,[-1,-1,-1,1,1,-1,1,1]),h=i(o,a.lineVert,a.lineFrag),d=new r(l,c,h);return d}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(s,m,x){var t=s("glslify"),i=t([`precision lowp float;
#define GLSLIFY 1
uniform vec4 color;
void main() {
  gl_FragColor = vec4(color.xyz * color.w, color.w);
}
`]);m.exports={lineVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 start, end;
uniform float width;

vec2 perp(vec2 v) {
  return vec2(v.y, -v.x);
}

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  vec2 delta = normalize(perp(start - end));
  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));
  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);
}
`]),lineFrag:i,textVert:t([`#define GLSLIFY 1
attribute vec3 textCoordinate;

uniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;
uniform float angle;

void main() {
  float dataOffset  = textCoordinate.z;
  vec2 glyphOffset  = textCoordinate.xy;
  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));
  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +
    glyphMatrix * glyphOffset * textScale + screenOffset;
  gl_Position = vec4(screenCoordinate, 0, 1);
}
`]),textFrag:i,gridVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale;
uniform float lineWidth;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;
  gl_Position = vec4(pos, 0, 1);
}
`]),gridFrag:i,boxVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 coord;

uniform vec4 screenBox;
uniform vec2 lo, hi;

vec2 screen(vec2 v) {
  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;
}

void main() {
  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);
}
`]),tickVert:t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 dataCoord;

uniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;

void main() {
  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);
  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);
}
`])}},{glslify:231}],117:[function(s,m,x){m.exports=o;var t=s("gl-buffer"),i=s("gl-shader"),a=s("text-cache"),r=s("binary-search-bounds"),n=s("./shaders");function f(c,h,d){this.plot=c,this.vbo=h,this.shader=d,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var l=f.prototype;l.drawTicks=function(){var c=[0,0],h=[0,0],d=[0,0];return function(p){var y=this.plot,g=this.shader,A=this.tickX[p],b=this.tickOffset[p],M=y.gl,_=y.viewBox,T=y.dataBox,w=y.screenBox,v=y.pixelRatio,L=y.tickEnable,S=y.tickPad,k=y.tickColor,P=y.tickAngle,O=y.labelEnable,F=y.labelPad,I=y.labelColor,D=y.labelAngle,U=this.labelOffset[p],B=this.labelCount[p],j=r.lt(A,T[p]),Z=r.le(A,T[p+2]);c[0]=c[1]=0,c[p]=1,h[p]=(_[2+p]+_[p])/(w[2+p]-w[p])-1;var ee=2/w[2+(p^1)]-w[p^1];h[p^1]=ee*_[p^1]-1,L[p]&&(h[p^1]-=ee*v*S[p],j<Z&&b[Z]>b[j]&&(g.uniforms.dataAxis=c,g.uniforms.screenOffset=h,g.uniforms.color=k[p],g.uniforms.angle=P[p],M.drawArrays(M.TRIANGLES,b[j],b[Z]-b[j]))),O[p]&&B&&(h[p^1]-=ee*v*F[p],g.uniforms.dataAxis=d,g.uniforms.screenOffset=h,g.uniforms.color=I[p],g.uniforms.angle=D[p],M.drawArrays(M.TRIANGLES,U,B)),h[p^1]=ee*_[2+(p^1)]-1,L[p+2]&&(h[p^1]+=ee*v*S[p+2],j<Z&&b[Z]>b[j]&&(g.uniforms.dataAxis=c,g.uniforms.screenOffset=h,g.uniforms.color=k[p+2],g.uniforms.angle=P[p+2],M.drawArrays(M.TRIANGLES,b[j],b[Z]-b[j]))),O[p+2]&&B&&(h[p^1]+=ee*v*F[p+2],g.uniforms.dataAxis=d,g.uniforms.screenOffset=h,g.uniforms.color=I[p+2],g.uniforms.angle=D[p+2],M.drawArrays(M.TRIANGLES,U,B))}}(),l.drawTitle=function(){var c=[0,0],h=[0,0];return function(){var d=this.plot,p=this.shader,y=d.gl,g=d.screenBox,A=d.titleCenter,b=d.titleAngle,M=d.titleColor,_=d.pixelRatio;if(!!this.titleCount){for(var T=0;T<2;++T)h[T]=2*(A[T]*_-g[T])/(g[2+T]-g[T])-1;p.bind(),p.uniforms.dataAxis=c,p.uniforms.screenOffset=h,p.uniforms.angle=b,p.uniforms.color=M,y.drawArrays(y.TRIANGLES,this.titleOffset,this.titleCount)}}}(),l.bind=function(){var c=[0,0],h=[0,0],d=[0,0];return function(){var p=this.plot,y=this.shader,g=p._tickBounds,A=p.dataBox,b=p.screenBox,M=p.viewBox;y.bind();for(var _=0;_<2;++_){var T=g[_],w=g[_+2],v=w-T,L=.5*(A[_+2]+A[_]),S=A[_+2]-A[_],k=M[_],P=M[_+2],O=P-k,F=b[_],I=b[_+2],D=I-F;h[_]=2*v/S*O/D,c[_]=2*(T-L)/S*O/D}d[1]=2*p.pixelRatio/(b[3]-b[1]),d[0]=d[1]*(b[3]-b[1])/(b[2]-b[0]),y.uniforms.dataScale=h,y.uniforms.dataShift=c,y.uniforms.textScale=d,this.vbo.bind(),y.attributes.textCoordinate.pointer()}}(),l.update=function(c){var h=[],d=c.ticks,p=c.bounds,y,g,A,b,M;for(M=0;M<2;++M){var _=[Math.floor(h.length/3)],T=[-1/0],w=d[M];for(y=0;y<w.length;++y){var v=w[y],L=v.x,S=v.text,k=v.font||"sans-serif";b=v.fontSize||12;for(var P=1/(p[M+2]-p[M]),O=p[M],F=S.split(`
`),I=0;I<F.length;I++)for(A=a(k,F[I]).data,g=0;g<A.length;g+=2)h.push(A[g]*b,-A[g+1]*b-I*b*1.2,(L-O)*P);_.push(Math.floor(h.length/3)),T.push(L)}this.tickOffset[M]=_,this.tickX[M]=T}for(M=0;M<2;++M){for(this.labelOffset[M]=Math.floor(h.length/3),A=a(c.labelFont[M],c.labels[M],{textAlign:"center"}).data,b=c.labelSize[M],y=0;y<A.length;y+=2)h.push(A[y]*b,-A[y+1]*b,0);this.labelCount[M]=Math.floor(h.length/3)-this.labelOffset[M]}for(this.titleOffset=Math.floor(h.length/3),A=a(c.titleFont,c.title).data,b=c.titleSize,y=0;y<A.length;y+=2)h.push(A[y]*b,-A[y+1]*b,0);this.titleCount=Math.floor(h.length/3)-this.titleOffset,this.vbo.update(h)},l.dispose=function(){this.vbo.dispose(),this.shader.dispose()};function o(c){var h=c.gl,d=t(h),p=i(h,n.textVert,n.textFrag),y=new f(c,d,p);return y}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(s,m,x){m.exports=h;var t=s("gl-select-static"),i=s("./lib/grid"),a=s("./lib/text"),r=s("./lib/line"),n=s("./lib/box");function f(d,p){this.gl=d,this.pickBuffer=p,this.screenBox=[0,0,d.drawingBufferWidth,d.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var l=f.prototype;l.setDirty=function(){this.dirty=this.pickDirty=!0},l.setOverlayDirty=function(){this.dirty=!0},l.nextDepthValue=function(){return this._depthCounter++/65536},l.draw=function(){return function(){var d=this.gl,p=this.screenBox,y=this.viewBox,g=this.dataBox,A=this.pixelRatio,b=this.grid,M=this.line,_=this.text,T=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),!!this.dirty){if(this.dirty=!1,d.bindFramebuffer(d.FRAMEBUFFER,null),d.enable(d.SCISSOR_TEST),d.disable(d.DEPTH_TEST),d.depthFunc(d.LESS),d.depthMask(!1),d.enable(d.BLEND),d.blendEquation(d.FUNC_ADD,d.FUNC_ADD),d.blendFunc(d.ONE,d.ONE_MINUS_SRC_ALPHA),this.borderColor){d.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var w=this.borderColor;d.clearColor(w[0]*w[3],w[1]*w[3],w[2]*w[3],w[3]),d.clear(d.COLOR_BUFFER_BIT|d.DEPTH_BUFFER_BIT)}d.scissor(y[0],y[1],y[2]-y[0],y[3]-y[1]),d.viewport(y[0],y[1],y[2]-y[0],y[3]-y[1]);var v=this.backgroundColor;d.clearColor(v[0]*v[3],v[1]*v[3],v[2]*v[3],v[3]),d.clear(d.COLOR_BUFFER_BIT),b.draw();var L=this.zeroLineEnable,S=this.zeroLineColor,k=this.zeroLineWidth;if(L[0]||L[1]){M.bind();for(var P=0;P<2;++P)if(!(!L[P]||!(g[P]<=0&&g[P+2]>=0))){var O=p[P]-g[P]*(p[P+2]-p[P])/(g[P+2]-g[P]);P===0?M.drawLine(O,p[1],O,p[3],k[P],S[P]):M.drawLine(p[0],O,p[2],O,k[P],S[P])}}for(var P=0;P<T.length;++P)T[P].draw();d.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),d.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),M.bind();var F=this.borderLineEnable,I=this.borderLineWidth,D=this.borderLineColor;F[1]&&M.drawLine(y[0],y[1]-.5*I[1]*A,y[0],y[3]+.5*I[3]*A,I[1],D[1]),F[0]&&M.drawLine(y[0]-.5*I[0]*A,y[1],y[2]+.5*I[2]*A,y[1],I[0],D[0]),F[3]&&M.drawLine(y[2],y[1]-.5*I[1]*A,y[2],y[3]+.5*I[3]*A,I[3],D[3]),F[2]&&M.drawLine(y[0]-.5*I[0]*A,y[3],y[2]+.5*I[2]*A,y[3],I[2],D[2]),_.bind();for(var P=0;P<2;++P)_.drawTicks(P);this.titleEnable&&_.drawTitle();for(var U=this.overlays,P=0;P<U.length;++P)U[P].draw();d.disable(d.SCISSOR_TEST),d.disable(d.BLEND),d.depthMask(!0)}}}(),l.drawPick=function(){return function(){if(!this.static){var d=this.pickBuffer;this.gl,this._pickTimeout=null,d.begin();for(var p=1,y=this.objects,g=0;g<y.length;++g)p=y[g].drawPick(p);d.end()}}}(),l.pick=function(){return function(d,p){if(!this.static){var y=this.pixelRatio,g=this.pickPixelRatio,A=this.viewBox,b=Math.round((d-A[0]/y)*g)|0,M=Math.round((p-A[1]/y)*g)|0,_=this.pickBuffer.query(b,M,this.pickRadius);if(!_)return null;for(var T=_.id+(_.value[0]<<8)+(_.value[1]<<16)+(_.value[2]<<24),w=this.objects,v=0;v<w.length;++v){var L=w[v].pick(b,M,T);if(L)return L}return null}}}();function o(d){for(var p=d.slice(),y=0;y<p.length;++y)p[y]=p[y].slice();return p}function c(d,p){return d.x-p.x}l.setScreenBox=function(d){var p=this.screenBox,y=this.pixelRatio;p[0]=Math.round(d[0]*y)|0,p[1]=Math.round(d[1]*y)|0,p[2]=Math.round(d[2]*y)|0,p[3]=Math.round(d[3]*y)|0,this.setDirty()},l.setDataBox=function(d){var p=this.dataBox,y=p[0]!==d[0]||p[1]!==d[1]||p[2]!==d[2]||p[3]!==d[3];y&&(p[0]=d[0],p[1]=d[1],p[2]=d[2],p[3]=d[3],this.setDirty())},l.setViewBox=function(d){var p=this.pixelRatio,y=this.viewBox;y[0]=Math.round(d[0]*p)|0,y[1]=Math.round(d[1]*p)|0,y[2]=Math.round(d[2]*p)|0,y[3]=Math.round(d[3]*p)|0;var g=this.pickPixelRatio;this.pickBuffer.shape=[Math.round((d[2]-d[0])*g)|0,Math.round((d[3]-d[1])*g)|0],this.setDirty()},l.update=function(d){d=d||{};var p=this.gl;this.pixelRatio=d.pixelRatio||1;var y=this.pixelRatio;this.pickPixelRatio=Math.max(y,1),this.setScreenBox(d.screenBox||[0,0,p.drawingBufferWidth/y,p.drawingBufferHeight/y]),this.screenBox,this.setViewBox(d.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/y,.125*(this.screenBox[3]-this.screenBox[1])/y,.875*(this.screenBox[2]-this.screenBox[0])/y,.875*(this.screenBox[3]-this.screenBox[1])/y]);var g=this.viewBox,A=(g[2]-g[0])/(g[3]-g[1]);this.setDataBox(d.dataBox||[-10,-10/A,10,10/A]),this.borderColor=d.borderColor!==!1?(d.borderColor||[0,0,0,0]).slice():!1,this.backgroundColor=(d.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(d.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(d.gridLineWidth||[1,1]).slice(),this.gridLineColor=o(d.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(d.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(d.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=o(d.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(d.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(d.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=o(d.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(d.titleCenter||[.5*(g[0]+g[2])/y,(g[3]+120)/y]).slice(),this.titleEnable=!("titleEnable"in d)||!!d.titleEnable,this.titleAngle=d.titleAngle||0,this.titleColor=(d.titleColor||[0,0,0,1]).slice(),this.labelPad=(d.labelPad||[15,15,15,15]).slice(),this.labelAngle=(d.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(d.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=o(d.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(d.tickPad||[15,15,15,15]).slice(),this.tickAngle=(d.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(d.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=o(d.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(d.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(d.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=o(d.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var b=d.ticks||[[],[]],M=this._tickBounds;M[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(var _=0;_<2;++_){var T=b[_].slice(0);T.length!==0&&(T.sort(c),M[_]=Math.min(M[_],T[0].x),M[_+2]=Math.max(M[_+2],T[T.length-1].x))}this.grid.update({bounds:M,ticks:b}),this.text.update({bounds:M,ticks:b,labels:d.labels||["x","y"],labelSize:d.labelSize||[12,12],labelFont:d.labelFont||["sans-serif","sans-serif"],title:d.title||"",titleSize:d.titleSize||18,titleFont:d.titleFont||"sans-serif"}),this.static=!!d.static,this.setDirty()},l.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var d=this.objects.length-1;d>=0;--d)this.objects[d].dispose();this.objects.length=0;for(var d=this.overlays.length-1;d>=0;--d)this.overlays[d].dispose();this.overlays.length=0,this.gl=null},l.addObject=function(d){this.objects.indexOf(d)<0&&(this.objects.push(d),this.setDirty())},l.removeObject=function(d){for(var p=this.objects,y=0;y<p.length;++y)if(p[y]===d){p.splice(y,1),this.setDirty();break}},l.addOverlay=function(d){this.overlays.indexOf(d)<0&&(this.overlays.push(d),this.setOverlayDirty())},l.removeOverlay=function(d){for(var p=this.overlays,y=0;y<p.length;++y)if(p[y]===d){p.splice(y,1),this.setOverlayDirty();break}};function h(d){var p=d.gl,y=t(p,[p.drawingBufferWidth,p.drawingBufferHeight]),g=new f(p,y);return g.grid=i(g),g.text=a(g),g.line=r(g),g.box=n(g),g.update(d),g}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(s,m,x){m.exports=l;var t=s("right-now"),i=s("3d-view"),a=s("mouse-change"),r=s("mouse-wheel"),n=s("mouse-event-offset"),f=s("has-passive-events");function l(o,c){o=o||document.body,c=c||{};var h=[.01,1/0];"distanceLimits"in c&&(h[0]=c.distanceLimits[0],h[1]=c.distanceLimits[1]),"zoomMin"in c&&(h[0]=c.zoomMin),"zoomMax"in c&&(h[1]=c.zoomMax);var d=i({center:c.center||[0,0,0],up:c.up||[0,1,0],eye:c.eye||[0,0,10],mode:c.mode||"orbit",distanceLimits:h}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],y=0,g=o.clientWidth,A=o.clientHeight,b={keyBindingMode:"rotate",enableWheel:!0,view:d,element:o,delay:c.delay||16,rotateSpeed:c.rotateSpeed||1,zoomSpeed:c.zoomSpeed||1,translateSpeed:c.translateSpeed||1,flipX:!!c.flipX,flipY:!!c.flipY,modes:d.modes,_ortho:c._ortho||c.projection&&c.projection.type==="orthographic"||!1,tick:function(){var M=t(),_=this.delay,T=M-2*_;d.idle(M-_),d.recalcMatrix(T),d.flush(M-(100+_*2));for(var w=!0,v=d.computedMatrix,L=0;L<16;++L)w=w&&p[L]===v[L],p[L]=v[L];var S=o.clientWidth===g&&o.clientHeight===A;return g=o.clientWidth,A=o.clientHeight,w?!S:(y=Math.exp(d.computedRadius[0]),!0)},lookAt:function(M,_,T){d.lookAt(d.lastT(),M,_,T)},rotate:function(M,_,T){d.rotate(d.lastT(),M,_,T)},pan:function(M,_,T){d.pan(d.lastT(),M,_,T)},translate:function(M,_,T){d.translate(d.lastT(),M,_,T)}};return Object.defineProperties(b,{matrix:{get:function(){return d.computedMatrix},set:function(M){return d.setMatrix(d.lastT(),M),d.computedMatrix},enumerable:!0},mode:{get:function(){return d.getMode()},set:function(M){var _=d.computedUp.slice(),T=d.computedEye.slice(),w=d.computedCenter.slice();if(d.setMode(M),M==="turntable"){var v=t();d._active.lookAt(v,T,w,_),d._active.lookAt(v+500,T,w,[0,0,1]),d._active.flush(v)}return d.getMode()},enumerable:!0},center:{get:function(){return d.computedCenter},set:function(M){return d.lookAt(d.lastT(),null,M),d.computedCenter},enumerable:!0},eye:{get:function(){return d.computedEye},set:function(M){return d.lookAt(d.lastT(),M),d.computedEye},enumerable:!0},up:{get:function(){return d.computedUp},set:function(M){return d.lookAt(d.lastT(),null,null,M),d.computedUp},enumerable:!0},distance:{get:function(){return y},set:function(M){return d.setDistance(d.lastT(),M),M},enumerable:!0},distanceLimits:{get:function(){return d.getDistanceLimits(h)},set:function(M){return d.setDistanceLimits(M),M},enumerable:!0}}),o.addEventListener("contextmenu",function(M){return M.preventDefault(),!1}),b._lastX=-1,b._lastY=-1,b._lastMods={shift:!1,control:!1,alt:!1,meta:!1},b.enableMouseListeners=function(){b.mouseListener=a(o,M),o.addEventListener("touchstart",function(_){var T=n(_.changedTouches[0],o);M(0,T[0],T[1],b._lastMods),M(1,T[0],T[1],b._lastMods)},f?{passive:!0}:!1),o.addEventListener("touchmove",function(_){var T=n(_.changedTouches[0],o);M(1,T[0],T[1],b._lastMods),_.preventDefault()},f?{passive:!1}:!1),o.addEventListener("touchend",function(_){M(0,b._lastX,b._lastY,b._lastMods)},f?{passive:!0}:!1);function M(_,T,w,v){var L=b.keyBindingMode;if(L!==!1){var S=L==="rotate",k=L==="pan",P=L==="zoom",O=!!v.control,F=!!v.alt,I=!!v.shift,D=!!(_&1),U=!!(_&2),B=!!(_&4),j=1/o.clientHeight,Z=j*(T-b._lastX),ee=j*(w-b._lastY),q=b.flipX?1:-1,W=b.flipY?1:-1,J=Math.PI*b.rotateSpeed,le=t();if(b._lastX!==-1&&b._lastY!==-1&&((S&&D&&!O&&!F&&!I||D&&!O&&!F&&I)&&d.rotate(le,q*J*Z,-W*J*ee,0),(k&&D&&!O&&!F&&!I||U||D&&O&&!F&&!I)&&d.pan(le,-b.translateSpeed*Z*y,b.translateSpeed*ee*y,0),P&&D&&!O&&!F&&!I||B||D&&!O&&F&&!I)){var fe=-b.zoomSpeed*ee/window.innerHeight*(le-d.lastT())*100;d.pan(le,0,0,y*(Math.exp(fe)-1))}return b._lastX=T,b._lastY=w,b._lastMods=v,!0}}b.wheelListener=r(o,function(_,T){if(b.keyBindingMode!==!1&&!!b.enableWheel){var w=b.flipX?1:-1,v=b.flipY?1:-1,L=t();if(Math.abs(_)>Math.abs(T))d.rotate(L,0,0,-_*w*Math.PI*b.rotateSpeed/window.innerWidth);else if(!b._ortho){var S=-b.zoomSpeed*v*T/window.innerHeight*(L-d.lastT())/20;d.pan(L,0,0,y*(Math.exp(S)-1))}}},!0)},b.enableMouseListeners(),b}},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision mediump float;
#define GLSLIFY 1
attribute vec2 position;
varying vec2 uv;
void main() {
  uv = position;
  gl_Position = vec4(position, 0, 1);
}`]),r=t([`precision mediump float;
#define GLSLIFY 1

uniform sampler2D accumBuffer;
varying vec2 uv;

void main() {
  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));
  gl_FragColor = min(vec4(1,1,1,1), accum);
}`]);m.exports=function(n){return i(n,a,r,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(s,m,x){var t=s("./camera.js"),i=s("gl-axes3d"),a=s("gl-axes3d/properties"),r=s("gl-spikes3d"),n=s("gl-select-static"),f=s("gl-fbo"),l=s("a-big-triangle"),o=s("mouse-change"),c=s("gl-mat4/perspective"),h=s("gl-mat4/ortho"),d=s("./lib/shader"),p=s("is-mobile")({tablet:!0,featureDetect:!0});m.exports={createScene:M,createCamera:t};function y(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function g(T,w){var v=null;try{v=T.getContext("webgl",w),v||(v=T.getContext("experimental-webgl",w))}catch{return null}return v}function A(T){var w=Math.round(Math.log(Math.abs(T))/Math.log(10));if(w<0){var v=Math.round(Math.pow(10,-w));return Math.ceil(T*v)/v}else if(w>0){var v=Math.round(Math.pow(10,w));return Math.ceil(T/v)*v}return Math.ceil(T)}function b(T){return typeof T=="boolean"?T:!0}function M(T){T=T||{},T.camera=T.camera||{};var w=T.canvas;if(!w)if(w=document.createElement("canvas"),T.container){var v=T.container;v.appendChild(w)}else document.body.appendChild(w);var L=T.gl;if(L||(T.glOptions&&(p=!!T.glOptions.preserveDrawingBuffer),L=g(w,T.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:p})),!L)throw new Error("webgl not supported");var S=T.bounds||[[-10,-10,-10],[10,10,10]],k=new y,P=f(L,L.drawingBufferWidth,L.drawingBufferHeight,{preferFloat:!p}),O=d(L),F=T.cameraObject&&T.cameraObject._ortho===!0||T.camera.projection&&T.camera.projection.type==="orthographic"||!1,I={eye:T.camera.eye||[2,0,0],center:T.camera.center||[0,0,0],up:T.camera.up||[0,1,0],zoomMin:T.camera.zoomMax||.1,zoomMax:T.camera.zoomMin||100,mode:T.camera.mode||"turntable",_ortho:F},D=T.axes||{},U=i(L,D);U.enable=!D.disable;var B=T.spikes||{},j=r(L,B),Z=[],ee=[],q=[],W=[],J=!0,le=!0,fe=new Array(16),se=new Array(16),H={view:null,projection:fe,model:se,_ortho:!1},le=!0,Y=[L.drawingBufferWidth,L.drawingBufferHeight],ne=T.cameraObject||t(w,I),te={gl:L,contextLost:!1,pixelRatio:T.pixelRatio||1,canvas:w,selection:k,camera:ne,axes:U,axesPixels:null,spikes:j,bounds:S,objects:Z,shape:Y,aspect:T.aspectRatio||[1,1,1],pickRadius:T.pickRadius||10,zNear:T.zNear||.01,zFar:T.zFar||1e3,fovy:T.fovy||Math.PI/4,clearColor:T.clearColor||[0,0,0,0],autoResize:b(T.autoResize),autoBounds:b(T.autoBounds),autoScale:!!T.autoScale,autoCenter:b(T.autoCenter),clipToBounds:b(T.clipToBounds),snapToData:!!T.snapToData,onselect:T.onselect||null,onrender:T.onrender||null,onclick:T.onclick||null,cameraParams:H,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(xe){this.aspect[0]=xe.x,this.aspect[1]=xe.y,this.aspect[2]=xe.z,le=!0},setBounds:function(xe,ke){this.bounds[0][xe]=ke.min,this.bounds[1][xe]=ke.max},setClearColor:function(xe){this.clearColor=xe},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},K=[L.drawingBufferWidth/te.pixelRatio|0,L.drawingBufferHeight/te.pixelRatio|0];function $(){if(!te._stopped&&!!te.autoResize){var xe=w.parentNode,ke=1,Ae=1;xe&&xe!==document.body?(ke=xe.clientWidth,Ae=xe.clientHeight):(ke=window.innerWidth,Ae=window.innerHeight);var Oe=Math.ceil(ke*te.pixelRatio)|0,He=Math.ceil(Ae*te.pixelRatio)|0;if(Oe!==w.width||He!==w.height){w.width=Oe,w.height=He;var Ge=w.style;Ge.position=Ge.position||"absolute",Ge.left="0px",Ge.top="0px",Ge.width=ke+"px",Ge.height=Ae+"px",J=!0}}}te.autoResize&&$(),window.addEventListener("resize",$);function ae(){for(var xe=Z.length,ke=W.length,Ae=0;Ae<ke;++Ae)q[Ae]=0;e:for(var Ae=0;Ae<xe;++Ae){var Oe=Z[Ae],He=Oe.pickSlots;if(!He){ee[Ae]=-1;continue}for(var Ge=0;Ge<ke;++Ge)if(q[Ge]+He<255){ee[Ae]=Ge,Oe.setPickBase(q[Ge]+1),q[Ge]+=He;continue e}var _e=n(L,Y);ee[Ae]=ke,W.push(_e),q.push(He),Oe.setPickBase(1),ke+=1}for(;ke>0&&q[ke-1]===0;)q.pop(),W.pop().dispose()}te.update=function(xe){te._stopped||(J=!0,le=!0)},te.add=function(xe){te._stopped||(xe.axes=U,Z.push(xe),ee.push(-1),J=!0,le=!0,ae())},te.remove=function(xe){if(!te._stopped){var ke=Z.indexOf(xe);ke<0||(Z.splice(ke,1),ee.pop(),J=!0,le=!0,ae())}},te.dispose=function(){if(!te._stopped&&(te._stopped=!0,window.removeEventListener("resize",$),w.removeEventListener("webglcontextlost",ie),te.mouseListener.enabled=!1,!te.contextLost)){U.dispose(),j.dispose();for(var xe=0;xe<Z.length;++xe)Z[xe].dispose();P.dispose();for(var xe=0;xe<W.length;++xe)W[xe].dispose();O.dispose(),L=null,U=null,j=null,Z=[]}},te._mouseRotating=!1,te._prevButtons=0,te.enableMouseListeners=function(){te.mouseListener=o(w,function(xe,ke,Ae){if(!te._stopped){var Oe=W.length,He=Z.length,Ge=k.object;k.distance=1/0,k.mouse[0]=ke,k.mouse[1]=Ae,k.object=null,k.screen=null,k.dataCoordinate=k.dataPosition=null;var _e=!1;if(xe&&te._prevButtons)te._mouseRotating=!0;else{te._mouseRotating&&(le=!0),te._mouseRotating=!1;for(var Re=0;Re<Oe;++Re){var We=W[Re].query(ke,K[1]-Ae-1,te.pickRadius);if(We){if(We.distance>k.distance)continue;for(var qe=0;qe<He;++qe){var Ue=Z[qe];if(ee[qe]===Re){var Ie=Ue.pick(We);Ie&&(k.buttons=xe,k.screen=We.coord,k.distance=We.distance,k.object=Ue,k.index=Ie.distance,k.dataPosition=Ie.position,k.dataCoordinate=Ie.dataCoordinate,k.data=Ie,_e=!0)}}}}}Ge&&Ge!==k.object&&(Ge.highlight&&Ge.highlight(null),J=!0),k.object&&(k.object.highlight&&k.object.highlight(k.data),J=!0),_e=_e||k.object!==Ge,_e&&te.onselect&&te.onselect(k),xe&1&&!(te._prevButtons&1)&&te.onclick&&te.onclick(k),te._prevButtons=xe}})};function ie(){if(te.contextLost)return!0;L.isContextLost()&&(te.contextLost=!0,te.mouseListener.enabled=!1,te.selection.object=null,te.oncontextloss&&te.oncontextloss())}w.addEventListener("webglcontextlost",ie);function oe(){if(!ie()){L.colorMask(!0,!0,!0,!0),L.depthMask(!0),L.disable(L.BLEND),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL);for(var xe=Z.length,ke=W.length,Ae=0;Ae<ke;++Ae){var Oe=W[Ae];Oe.shape=K,Oe.begin();for(var He=0;He<xe;++He)if(ee[He]===Ae){var Ge=Z[He];Ge.drawPick&&(Ge.pixelRatio=1,Ge.drawPick(H))}Oe.end()}}}var ue=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],ye=[ue[0].slice(),ue[1].slice()];function ce(){if(!ie()){$();var xe=te.camera.tick();H.view=te.camera.matrix,J=J||xe,le=le||xe,U.pixelRatio=te.pixelRatio,j.pixelRatio=te.pixelRatio;var ke=Z.length,Ae=ue[0],Oe=ue[1];Ae[0]=Ae[1]=Ae[2]=1/0,Oe[0]=Oe[1]=Oe[2]=-1/0;for(var He=0;He<ke;++He){var Ge=Z[He];Ge.pixelRatio=te.pixelRatio,Ge.axes=te.axes,J=J||!!Ge.dirty,le=le||!!Ge.dirty;var _e=Ge.bounds;if(_e)for(var Re=_e[0],We=_e[1],qe=0;qe<3;++qe)Ae[qe]=Math.min(Ae[qe],Re[qe]),Oe[qe]=Math.max(Oe[qe],We[qe])}var Ue=te.bounds;if(te.autoBounds)for(var qe=0;qe<3;++qe){if(Oe[qe]<Ae[qe])Ae[qe]=-1,Oe[qe]=1;else{Ae[qe]===Oe[qe]&&(Ae[qe]-=1,Oe[qe]+=1);var Ie=.05*(Oe[qe]-Ae[qe]);Ae[qe]=Ae[qe]-Ie,Oe[qe]=Oe[qe]+Ie}Ue[0][qe]=Ae[qe],Ue[1][qe]=Oe[qe]}for(var Ve=!1,qe=0;qe<3;++qe)Ve=Ve||ye[0][qe]!==Ue[0][qe]||ye[1][qe]!==Ue[1][qe],ye[0][qe]=Ue[0][qe],ye[1][qe]=Ue[1][qe];if(le=le||Ve,J=J||Ve,!!J){if(Ve){for(var dt=[0,0,0],He=0;He<3;++He)dt[He]=A((Ue[1][He]-Ue[0][He])/10);U.autoTicks?U.update({bounds:Ue,tickSpacing:dt}):U.update({bounds:Ue})}var Rt=L.drawingBufferWidth,Gt=L.drawingBufferHeight;Y[0]=Rt,Y[1]=Gt,K[0]=Math.max(Rt/te.pixelRatio,1)|0,K[1]=Math.max(Gt/te.pixelRatio,1)|0,_(te,F);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.axesBounds=Ue,te.clipToBounds&&(Ge.clipBounds=Ue)}k.object&&(te.snapToData?j.position=k.dataCoordinate:j.position=k.dataPosition,j.bounds=Ue),le&&(le=!1,oe()),te.axesPixels=a(te.axes,H,Rt,Gt),te.onrender&&te.onrender(),L.bindFramebuffer(L.FRAMEBUFFER,null),L.viewport(0,0,Rt,Gt),te.clearRGBA(),L.depthMask(!0),L.colorMask(!0,!0,!0,!0),L.enable(L.DEPTH_TEST),L.depthFunc(L.LEQUAL),L.disable(L.BLEND),L.disable(L.CULL_FACE);var kt=!1;U.enable&&(kt=kt||U.isTransparent(),U.draw(H)),j.axes=U,k.object&&j.draw(H),L.disable(L.CULL_FACE);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.axes=U,Ge.pixelRatio=te.pixelRatio,Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(H),Ge.isTransparent&&Ge.isTransparent()&&(kt=!0)}if(kt){P.shape=Y,P.bind(),L.clear(L.DEPTH_BUFFER_BIT),L.colorMask(!1,!1,!1,!1),L.depthMask(!0),L.depthFunc(L.LESS),U.enable&&U.isTransparent()&&U.drawTransparent(H);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.isOpaque&&Ge.isOpaque()&&Ge.draw(H)}L.enable(L.BLEND),L.blendEquation(L.FUNC_ADD),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.colorMask(!0,!0,!0,!0),L.depthMask(!1),L.clearColor(0,0,0,0),L.clear(L.COLOR_BUFFER_BIT),U.isTransparent()&&U.drawTransparent(H);for(var He=0;He<ke;++He){var Ge=Z[He];Ge.isTransparent&&Ge.isTransparent()&&Ge.drawTransparent(H)}L.bindFramebuffer(L.FRAMEBUFFER,null),L.blendFunc(L.ONE,L.ONE_MINUS_SRC_ALPHA),L.disable(L.DEPTH_TEST),O.bind(),P.color[0].bind(0),O.uniforms.accumBuffer=0,l(L),L.disable(L.BLEND)}J=!1;for(var He=0;He<ke;++He)Z[He].dirty=!1}}}function me(){te._stopped||te.contextLost||(ce(),requestAnimationFrame(me))}return te.enableMouseListeners(),me(),te.redraw=function(){te._stopped||(J=!0,ce())},te}function _(T,w){var v=T.bounds,L=T.cameraParams,S=L.projection,k=L.model,P=T.gl.drawingBufferWidth,O=T.gl.drawingBufferHeight,F=T.zNear,I=T.zFar,D=T.fovy,U=P/O;w?(h(S,-U,U,-1,1,F,I),L._ortho=!0):(c(S,D,U,F,I),L._ortho=!1);for(var B=0;B<16;++B)k[B]=0;k[15]=1;for(var j=0,B=0;B<3;++B)j=Math.max(j,v[1][B]-v[0][B]);for(var B=0;B<3;++B)T.autoScale?k[5*B]=T.aspect[B]/(v[1][B]-v[0][B]):k[5*B]=1/j,T.autoCenter&&(k[12+B]=-k[5*B]*.5*(v[0][B]+v[1][B]))}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(s,m,x){var t=s("glslify");x.pointVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;

uniform mat3 matrix;
uniform float pointSize;
uniform float pointCloud;

highp float rand(vec2 co) {
  highp float a = 12.9898;
  highp float b = 78.233;
  highp float c = 43758.5453;
  highp float d = dot(co.xy, vec2(a, b));
  highp float e = mod(d, 3.14);
  return fract(sin(e) * c);
}

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
    // if we don't jitter the point size a bit, overall point cloud
    // saturation 'jumps' on zooming, which is disturbing and confusing
  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);
  if(pointCloud != 0.0) { // pointCloud is truthy
    // get the same square surface as circle would be
    gl_PointSize *= 0.886;
  }
}`]),x.pointFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color, borderColor;
uniform float centerFraction;
uniform float pointCloud;

void main() {
  float radius;
  vec4 baseColor;
  if(pointCloud != 0.0) { // pointCloud is truthy
    if(centerFraction == 1.0) {
      gl_FragColor = color;
    } else {
      gl_FragColor = mix(borderColor, color, centerFraction);
    }
  } else {
    radius = length(2.0 * gl_PointCoord.xy - 1.0);
    if(radius > 1.0) {
      discard;
    }
    baseColor = mix(borderColor, color, step(radius, centerFraction));
    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);
  }
}
`]),x.pickVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 position;
attribute vec4 pickId;

uniform mat3 matrix;
uniform float pointSize;
uniform vec4 pickOffset;

varying vec4 fragId;

void main() {
  vec3 hgPosition = matrix * vec3(position, 1);
  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);
  gl_PointSize = pointSize;

  vec4 id = pickId + pickOffset;
  id.y += floor(id.x / 256.0);
  id.x -= floor(id.x / 256.0) * 256.0;

  id.z += floor(id.y / 256.0);
  id.y -= floor(id.y / 256.0) * 256.0;

  id.w += floor(id.z / 256.0);
  id.z -= floor(id.z / 256.0) * 256.0;

  fragId = id;
}
`]),x.pickFragment=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragId;

void main() {
  float radius = length(2.0 * gl_PointCoord.xy - 1.0);
  if(radius > 1.0) {
    discard;
  }
  gl_FragColor = fragId / 255.0;
}
`])},{glslify:231}],123:[function(s,m,x){var t=s("gl-shader"),i=s("gl-buffer"),a=s("typedarray-pool"),r=s("./lib/shader");m.exports=o;function n(c,h,d,p,y){this.plot=c,this.offsetBuffer=h,this.pickBuffer=d,this.shader=p,this.pickShader=y,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}var f=n.prototype;f.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},f.update=function(c){var h;c=c||{};function d(_,T){return _ in c?c[_]:T}this.sizeMin=d("sizeMin",.5),this.sizeMax=d("sizeMax",20),this.color=d("color",[1,0,0,1]).slice(),this.areaRatio=d("areaRatio",1),this.borderColor=d("borderColor",[0,0,0,1]).slice(),this.blend=d("blend",!1);var p=c.positions.length>>>1,y=c.positions instanceof Float32Array,g=c.idToIndex instanceof Int32Array&&c.idToIndex.length>=p,A=c.positions,b=y?A:a.mallocFloat32(A.length),M=g?c.idToIndex:a.mallocInt32(p);if(y||b.set(A),!g)for(b.set(A),h=0;h<p;h++)M[h]=h;this.points=A,this.offsetBuffer.update(b),this.pickBuffer.update(M),y||a.free(b),g||a.free(M),this.pointCount=p,this.pickOffset=0};function l(c,h){var d=0,p=c.length>>>1,y;for(y=0;y<p;y++){var g=c[y*2],A=c[y*2+1];g>=h[0]&&g<=h[2]&&A>=h[1]&&A<=h[3]&&d++}return d}f.unifiedDraw=function(){var c=[1,0,0,0,1,0,0,0,1],h=[0,0,0,0];return function(d){var p=d!==void 0,y=p?this.pickShader:this.shader,g=this.plot.gl,A=this.plot.dataBox;if(this.pointCount===0)return d;var b=A[2]-A[0],M=A[3]-A[1],_=l(this.points,A),T=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(_,.33333)));c[0]=2/b,c[4]=2/M,c[6]=-2*A[0]/b-1,c[7]=-2*A[1]/M-1,this.offsetBuffer.bind(),y.bind(),y.attributes.position.pointer(),y.uniforms.matrix=c,y.uniforms.color=this.color,y.uniforms.borderColor=this.borderColor,y.uniforms.pointCloud=T<5,y.uniforms.pointSize=T,y.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),p&&(h[0]=d&255,h[1]=d>>8&255,h[2]=d>>16&255,h[3]=d>>24&255,this.pickBuffer.bind(),y.attributes.pickId.pointer(g.UNSIGNED_BYTE),y.uniforms.pickOffset=h,this.pickOffset=d);var w=g.getParameter(g.BLEND),v=g.getParameter(g.DITHER);return w&&!this.blend&&g.disable(g.BLEND),v&&g.disable(g.DITHER),g.drawArrays(g.POINTS,0,this.pointCount),w&&!this.blend&&g.enable(g.BLEND),v&&g.enable(g.DITHER),d+this.pointCount}}(),f.draw=f.unifiedDraw,f.drawPick=f.unifiedDraw,f.pick=function(c,h,d){var p=this.pickOffset,y=this.pointCount;if(d<p||d>=p+y)return null;var g=d-p,A=this.points;return{object:this,pointId:g,dataCoord:[A[2*g],A[2*g+1]]}};function o(c,h){var d=c.gl,p=i(d),y=i(d),g=t(d,r.pointVertex,r.pointFragment),A=t(d,r.pickVertex,r.pickFragment),b=new n(c,p,y,g,A);return b.update(h),c.addObject(b),b}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=a[0],l=a[1],o=a[2],c=a[3],h=r[0],d=r[1],p=r[2],y=r[3],g,A,b,M,_;return A=f*h+l*d+o*p+c*y,A<0&&(A=-A,h=-h,d=-d,p=-p,y=-y),1-A>1e-6?(g=Math.acos(A),b=Math.sin(g),M=Math.sin((1-n)*g)/b,_=Math.sin(n*g)/b):(M=1-n,_=n),i[0]=M*f+_*h,i[1]=M*l+_*d,i[2]=M*o+_*p,i[3]=M*c+_*y,i}},{}],125:[function(s,m,x){m.exports=function(t){return!t&&t!==0?"":t.toString()}},{}],126:[function(s,m,x){var t=s("vectorize-text");m.exports=a;var i={};function a(r,n,f){var l=i[n];if(l||(l=i[n]={}),r in l)return l[r];var o={textAlign:"center",textBaseline:"middle",lineHeight:1,font:n,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}};o.triangles=!0;var c=t(r,o);o.triangles=!1;var h=t(r,o),d,p;if(f&&f!==1){for(d=0;d<c.positions.length;++d)for(p=0;p<c.positions[d].length;++p)c.positions[d][p]/=f;for(d=0;d<h.positions.length;++d)for(p=0;p<h.positions[d].length;++p)h.positions[d][p]/=f}var y=[[1/0,1/0],[-1/0,-1/0]],g=h.positions.length;for(d=0;d<g;++d){var A=h.positions[d];for(p=0;p<2;++p)y[0][p]=Math.min(y[0][p],A[p]),y[1][p]=Math.max(y[1][p],A[p])}return l[r]=[c,h,y]}},{"vectorize-text":311}],127:[function(s,m,x){var t=s("gl-shader"),i=s("glslify"),a=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform vec4 highlightId;
uniform float highlightScale;
uniform mat4 model, view, projection;
uniform vec3 clipBounds[2];

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = 1.0;
    if(distance(highlightId, id) < 0.0001) {
      scale = highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1);
    vec4 viewPosition = view * worldPosition;
    viewPosition = viewPosition / viewPosition.w;
    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),r=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float highlightScale, pixelRatio;
uniform vec4 highlightId;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float scale = pixelRatio;
    if(distance(highlightId.bgr, id.bgr) < 0.001) {
      scale *= highlightScale;
    }

    vec4 worldPosition = model * vec4(position, 1.0);
    vec4 viewPosition = view * worldPosition;
    vec4 clipPosition = projection * viewPosition;
    clipPosition /= clipPosition.w;

    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);
    interpColor = color;
    pickId = id;
    dataCoordinate = position;
  }
}`]),n=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

attribute vec3 position;
attribute vec4 color;
attribute vec2 glyph;
attribute vec4 id;

uniform float highlightScale;
uniform vec4 highlightId;
uniform vec3 axes[2];
uniform mat4 model, view, projection;
uniform vec2 screenSize;
uniform vec3 clipBounds[2];
uniform float scale, pixelRatio;

varying vec4 interpColor;
varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], position)) {

    gl_Position = vec4(0,0,0,0);
  } else {
    float lscale = pixelRatio * scale;
    if(distance(highlightId, id) < 0.0001) {
      lscale *= highlightScale;
    }

    vec4 clipCenter   = projection * view * model * vec4(position, 1);
    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;
    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);

    gl_Position = clipPosition;
    interpColor = color;
    pickId = id;
    dataCoordinate = dataPosition;
  }
}
`]),f=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float opacity;

varying vec4 interpColor;
varying vec3 dataCoordinate;

void main() {
  if (
    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||
    interpColor.a * opacity == 0.
  ) discard;
  gl_FragColor = interpColor * opacity;
}
`]),l=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 fragClipBounds[2];
uniform float pickGroup;

varying vec4 pickId;
varying vec3 dataCoordinate;

void main() {
  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;

  gl_FragColor = vec4(pickGroup, pickId.bgr);
}`]),o=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:a,fragment:f,attributes:o},h={vertex:r,fragment:f,attributes:o},d={vertex:n,fragment:f,attributes:o},p={vertex:a,fragment:l,attributes:o},y={vertex:r,fragment:l,attributes:o},g={vertex:n,fragment:l,attributes:o};function A(b,M){var _=t(b,M),T=_.attributes;return T.position.location=0,T.color.location=1,T.glyph.location=2,T.id.location=3,_}x.createPerspective=function(b){return A(b,c)},x.createOrtho=function(b){return A(b,h)},x.createProject=function(b){return A(b,d)},x.createPickPerspective=function(b){return A(b,p)},x.createPickOrtho=function(b){return A(b,y)},x.createPickProject=function(b){return A(b,g)}},{"gl-shader":132,glslify:231}],128:[function(s,m,x){var t=s("is-string-blank"),i=s("gl-buffer"),a=s("gl-vao"),r=s("typedarray-pool"),n=s("gl-mat4/multiply"),f=s("./lib/shaders"),l=s("./lib/glyphs"),o=s("./lib/get-simple-string"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];m.exports=ee;function h(q,W){var J=q[0],le=q[1],fe=q[2],se=q[3];return q[0]=W[0]*J+W[4]*le+W[8]*fe+W[12]*se,q[1]=W[1]*J+W[5]*le+W[9]*fe+W[13]*se,q[2]=W[2]*J+W[6]*le+W[10]*fe+W[14]*se,q[3]=W[3]*J+W[7]*le+W[11]*fe+W[15]*se,q}function d(q,W,J,le){return h(le,le),h(le,le),h(le,le)}function p(q,W){this.index=q,this.dataCoordinate=this.position=W}function y(q){return q===!0||q>1?1:q}function g(q,W,J,le,fe,se,H,Y,ne,te,K,$){this.gl=q,this.pixelRatio=1,this.shader=W,this.orthoShader=J,this.projectShader=le,this.pointBuffer=fe,this.colorBuffer=se,this.glyphBuffer=H,this.idBuffer=Y,this.vao=ne,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=te,this.pickOrthoShader=K,this.pickProjectShader=$,this.points=[],this._selectResult=new p(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}var A=g.prototype;A.pickSlots=1,A.setPickBase=function(q){this.pickId=q},A.isTransparent=function(){if(this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&this.projectHasAlpha)return!0;return!1},A.isOpaque=function(){if(!this.hasAlpha)return!0;for(var q=0;q<3;++q)if(this.axesProject[q]&&!this.projectHasAlpha)return!0;return!1};var b=[0,0],M=[0,0,0],_=[0,0,0],T=[0,0,0,1],w=[0,0,0,1],v=c.slice(),L=[0,0,0],S=[[0,0,0],[0,0,0]];function k(q){return q[0]=q[1]=q[2]=0,q}function P(q,W){return q[0]=W[0],q[1]=W[1],q[2]=W[2],q[3]=1,q}function O(q,W,J,le){return q[0]=W[0],q[1]=W[1],q[2]=W[2],q[J]=le,q}function F(q){for(var W=S,J=0;J<2;++J)for(var le=0;le<3;++le)W[J][le]=Math.max(Math.min(q[J][le],1e8),-1e8);return W}function I(q,W,J,le){var fe=W.axesProject,se=W.gl,H=q.uniforms,Y=J.model||c,ne=J.view||c,te=J.projection||c,K=W.axesBounds,$=F(W.clipBounds),ae;W.axes&&W.axes.lastCubeProps?ae=W.axes.lastCubeProps.axis:ae=[1,1,1],b[0]=2/se.drawingBufferWidth,b[1]=2/se.drawingBufferHeight,q.bind(),H.view=ne,H.projection=te,H.screenSize=b,H.highlightId=W.highlightId,H.highlightScale=W.highlightScale,H.clipBounds=$,H.pickGroup=W.pickId/255,H.pixelRatio=le;for(var ie=0;ie<3;++ie)if(!!fe[ie]){H.scale=W.projectScale[ie],H.opacity=W.projectOpacity[ie];for(var oe=v,ue=0;ue<16;++ue)oe[ue]=0;for(var ue=0;ue<4;++ue)oe[5*ue]=1;oe[5*ie]=0,ae[ie]<0?oe[12+ie]=K[0][ie]:oe[12+ie]=K[1][ie],n(oe,Y,oe),H.model=oe;var ye=(ie+1)%3,ce=(ie+2)%3,me=k(M),xe=k(_);me[ye]=1,xe[ce]=1;var ke=d(te,ne,Y,P(T,me)),Ae=d(te,ne,Y,P(w,xe));if(Math.abs(ke[1])>Math.abs(Ae[1])){var Oe=ke;ke=Ae,Ae=Oe,Oe=me,me=xe,xe=Oe;var He=ye;ye=ce,ce=He}ke[0]<0&&(me[ye]=-1),Ae[1]>0&&(xe[ce]=-1);for(var Ge=0,_e=0,ue=0;ue<4;++ue)Ge+=Math.pow(Y[4*ye+ue],2),_e+=Math.pow(Y[4*ce+ue],2);me[ye]/=Math.sqrt(Ge),xe[ce]/=Math.sqrt(_e),H.axes[0]=me,H.axes[1]=xe,H.fragClipBounds[0]=O(L,$[0],ie,-1e8),H.fragClipBounds[1]=O(L,$[1],ie,1e8),W.vao.bind(),W.vao.draw(se.TRIANGLES,W.vertexCount),W.lineWidth>0&&(se.lineWidth(W.lineWidth*le),W.vao.draw(se.LINES,W.lineVertexCount,W.vertexCount)),W.vao.unbind()}}var D=[-1e8,-1e8,-1e8],U=[1e8,1e8,1e8],B=[D,U];function j(q,W,J,le,fe,se,H){var Y=J.gl;if((se===J.projectHasAlpha||H)&&I(W,J,le,fe),se===J.hasAlpha||H){q.bind();var ne=q.uniforms;ne.model=le.model||c,ne.view=le.view||c,ne.projection=le.projection||c,b[0]=2/Y.drawingBufferWidth,b[1]=2/Y.drawingBufferHeight,ne.screenSize=b,ne.highlightId=J.highlightId,ne.highlightScale=J.highlightScale,ne.fragClipBounds=B,ne.clipBounds=J.axes.bounds,ne.opacity=J.opacity,ne.pickGroup=J.pickId/255,ne.pixelRatio=fe,J.vao.bind(),J.vao.draw(Y.TRIANGLES,J.vertexCount),J.lineWidth>0&&(Y.lineWidth(J.lineWidth*fe),J.vao.draw(Y.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}A.draw=function(q){var W=this.useOrtho?this.orthoShader:this.shader;j(W,this.projectShader,this,q,this.pixelRatio,!1,!1)},A.drawTransparent=function(q){var W=this.useOrtho?this.orthoShader:this.shader;j(W,this.projectShader,this,q,this.pixelRatio,!0,!1)},A.drawPick=function(q){var W=this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader;j(W,this.pickProjectShader,this,q,1,!0,!0)},A.pick=function(q){if(!q||q.id!==this.pickId)return null;var W=q.value[2]+(q.value[1]<<8)+(q.value[0]<<16);if(W>=this.pointCount||W<0)return null;var J=this.points[W],le=this._selectResult;le.index=W;for(var fe=0;fe<3;++fe)le.position[fe]=le.dataCoordinate[fe]=J[fe];return le},A.highlight=function(q){if(!q)this.highlightId=[1,1,1,1];else{var W=q.index,J=W&255,le=W>>8&255,fe=W>>16&255;this.highlightId=[J/255,le/255,fe/255,0]}};function Z(q,W,J,le){var fe;Array.isArray(q)?W<q.length?fe=q[W]:fe=void 0:fe=q,fe=o(fe);var se=!0;t(fe)&&(fe="\u25BC",se=!1);var H=l(fe,J,le);return{mesh:H[0],lines:H[1],bounds:H[2],visible:se}}A.update=function(q){if(q=q||{},"perspective"in q&&(this.useOrtho=!q.perspective),"orthographic"in q&&(this.useOrtho=!!q.orthographic),"lineWidth"in q&&(this.lineWidth=q.lineWidth),"project"in q)if(Array.isArray(q.project))this.axesProject=q.project;else{var W=!!q.project;this.axesProject=[W,W,W]}if("projectScale"in q)if(Array.isArray(q.projectScale))this.projectScale=q.projectScale.slice();else{var J=+q.projectScale;this.projectScale=[J,J,J]}if(this.projectHasAlpha=!1,"projectOpacity"in q){if(Array.isArray(q.projectOpacity))this.projectOpacity=q.projectOpacity.slice();else{var J=+q.projectOpacity;this.projectOpacity=[J,J,J]}for(var le=0;le<3;++le)this.projectOpacity[le]=y(this.projectOpacity[le]),this.projectOpacity[le]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in q&&(this.opacity=y(q.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var fe=q.position,se=q.font||"normal",H=q.alignment||[0,0],Y,ne;if(H.length===2)Y=H[0],ne=H[1];else{Y=[],ne=[];for(var le=0;le<H.length;++le)Y[le]=H[le][0],ne[le]=H[le][1]}var te=[1/0,1/0,1/0],K=[-1/0,-1/0,-1/0],$=q.glyph,ae=q.color,ie=q.size,oe=q.angle,ue=q.lineColor,ye=-1,ce=0,me=0,xe=0;if(fe.length){xe=fe.length;e:for(var le=0;le<xe;++le){for(var ke=fe[le],Ae=0;Ae<3;++Ae)if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;var Oe=Z($,le,se,this.pixelRatio),He=Oe.mesh,Ge=Oe.lines,_e=Oe.bounds;ce+=He.cells.length*3,me+=Ge.edges.length*2}}var Re=ce+me,We=r.mallocFloat(3*Re),qe=r.mallocFloat(4*Re),Ue=r.mallocFloat(2*Re),Ie=r.mallocUint32(Re);if(Re>0){var Ve=0,dt=ce,Rt=[0,0,0,1],Gt=[0,0,0,1],kt=Array.isArray(ae)&&Array.isArray(ae[0]),zt=Array.isArray(ue)&&Array.isArray(ue[0]);e:for(var le=0;le<xe;++le){ye+=1;for(var ke=fe[le],Ae=0;Ae<3;++Ae){if(isNaN(ke[Ae])||!isFinite(ke[Ae]))continue e;K[Ae]=Math.max(K[Ae],ke[Ae]),te[Ae]=Math.min(te[Ae],ke[Ae])}var Oe=Z($,le,se,this.pixelRatio),He=Oe.mesh,Ge=Oe.lines,_e=Oe.bounds,Bt=Oe.visible;if(!Bt)Rt=[1,1,1,0];else if(Array.isArray(ae)){var Lt;if(kt?le<ae.length?Lt=ae[le]:Lt=[0,0,0,0]:Lt=ae,Lt.length===3){for(var Ae=0;Ae<3;++Ae)Rt[Ae]=Lt[Ae];Rt[3]=1}else if(Lt.length===4){for(var Ae=0;Ae<4;++Ae)Rt[Ae]=Lt[Ae];!this.hasAlpha&&Lt[3]<1&&(this.hasAlpha=!0)}}else Rt[0]=Rt[1]=Rt[2]=0,Rt[3]=1;if(!Bt)Gt=[1,1,1,0];else if(Array.isArray(ue)){var Lt;if(zt?le<ue.length?Lt=ue[le]:Lt=[0,0,0,0]:Lt=ue,Lt.length===3){for(var Ae=0;Ae<3;++Ae)Gt[Ae]=Lt[Ae];Gt[Ae]=1}else if(Lt.length===4){for(var Ae=0;Ae<4;++Ae)Gt[Ae]=Lt[Ae];!this.hasAlpha&&Lt[3]<1&&(this.hasAlpha=!0)}}else Gt[0]=Gt[1]=Gt[2]=0,Gt[3]=1;var Mt=.5;Bt?Array.isArray(ie)?le<ie.length?Mt=+ie[le]:Mt=12:ie?Mt=+ie:this.useOrtho&&(Mt=12):Mt=0;var it=0;Array.isArray(oe)?le<oe.length?it=+oe[le]:it=0:oe&&(it=+oe);for(var ht=Math.cos(it),Qe=Math.sin(it),ke=fe[le],Ae=0;Ae<3;++Ae)K[Ae]=Math.max(K[Ae],ke[Ae]),te[Ae]=Math.min(te[Ae],ke[Ae]);var Ce=Y,Xe=ne,Ce=0;Array.isArray(Y)?le<Y.length?Ce=Y[le]:Ce=0:Y&&(Ce=Y);var Xe=0;Array.isArray(ne)?le<ne.length?Xe=ne[le]:Xe=0:ne&&(Xe=ne),Ce*=Ce>0?1-_e[0][0]:Ce<0?1+_e[1][0]:1,Xe*=Xe>0?1-_e[0][1]:Xe<0?1+_e[1][1]:1;for(var rt=[Ce,Xe],ut=He.cells||[],Pt=He.positions||[],Ae=0;Ae<ut.length;++Ae)for(var St=ut[Ae],Nt=0;Nt<3;++Nt){for(var jt=0;jt<3;++jt)We[3*Ve+jt]=ke[jt];for(var jt=0;jt<4;++jt)qe[4*Ve+jt]=Rt[jt];Ie[Ve]=ye;var Ot=Pt[St[Nt]];Ue[2*Ve]=Mt*(ht*Ot[0]-Qe*Ot[1]+rt[0]),Ue[2*Ve+1]=Mt*(Qe*Ot[0]+ht*Ot[1]+rt[1]),Ve+=1}for(var ut=Ge.edges,Pt=Ge.positions,Ae=0;Ae<ut.length;++Ae)for(var St=ut[Ae],Nt=0;Nt<2;++Nt){for(var jt=0;jt<3;++jt)We[3*dt+jt]=ke[jt];for(var jt=0;jt<4;++jt)qe[4*dt+jt]=Gt[jt];Ie[dt]=ye;var Ot=Pt[St[Nt]];Ue[2*dt]=Mt*(ht*Ot[0]-Qe*Ot[1]+rt[0]),Ue[2*dt+1]=Mt*(Qe*Ot[0]+ht*Ot[1]+rt[1]),dt+=1}}}this.bounds=[te,K],this.points=fe,this.pointCount=fe.length,this.vertexCount=ce,this.lineVertexCount=me,this.pointBuffer.update(We),this.colorBuffer.update(qe),this.glyphBuffer.update(Ue),this.idBuffer.update(Ie),r.free(We),r.free(qe),r.free(Ue),r.free(Ie)},A.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()};function ee(q){var W=q.gl,J=f.createPerspective(W),le=f.createOrtho(W),fe=f.createProject(W),se=f.createPickPerspective(W),H=f.createPickOrtho(W),Y=f.createPickProject(W),ne=i(W),te=i(W),K=i(W),$=i(W),ae=a(W,[{buffer:ne,size:3,type:W.FLOAT},{buffer:te,size:4,type:W.FLOAT},{buffer:K,size:2,type:W.FLOAT},{buffer:$,size:4,type:W.UNSIGNED_BYTE,normalized:!0}]),ie=new g(W,J,le,fe,ne,te,K,$,ae,se,H,Y);return ie.update(q),ie}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(s,m,x){var t=s("glslify");x.boxVertex=t([`precision mediump float;
#define GLSLIFY 1

attribute vec2 vertex;

uniform vec2 cornerA, cornerB;

void main() {
  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);
}
`]),x.boxFragment=t([`precision mediump float;
#define GLSLIFY 1

uniform vec4 color;

void main() {
  gl_FragColor = color;
}
`])},{glslify:231}],130:[function(s,m,x){var t=s("gl-shader"),i=s("gl-buffer"),a=s("./lib/shaders");m.exports=f;function r(l,o,c){this.plot=l,this.boxBuffer=o,this.boxShader=c,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}var n=r.prototype;n.draw=function(){if(!!this.enabled){var l=this.plot,o=this.selectBox,c=this.borderWidth;this.innerFill;var h=this.innerColor;this.outerFill;var d=this.outerColor,p=this.borderColor,y=l.box,g=l.screenBox,A=l.dataBox,b=l.viewBox,M=l.pixelRatio,_=(o[0]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],T=(o[1]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1],w=(o[2]-A[0])*(b[2]-b[0])/(A[2]-A[0])+b[0],v=(o[3]-A[1])*(b[3]-b[1])/(A[3]-A[1])+b[1];if(_=Math.max(_,b[0]),T=Math.max(T,b[1]),w=Math.min(w,b[2]),v=Math.min(v,b[3]),!(w<_||v<T)){y.bind();var L=g[2]-g[0],S=g[3]-g[1];if(this.outerFill&&(y.drawBox(0,0,L,T,d),y.drawBox(0,T,_,v,d),y.drawBox(0,v,L,S,d),y.drawBox(w,T,L,v,d)),this.innerFill&&y.drawBox(_,T,w,v,h),c>0){var k=c*M;y.drawBox(_-k,T-k,w+k,T+k,p),y.drawBox(_-k,v-k,w+k,v+k,p),y.drawBox(_-k,T-k,_+k,v+k,p),y.drawBox(w-k,T-k,w+k,v+k,p)}}}},n.update=function(l){l=l||{},this.innerFill=!!l.innerFill,this.outerFill=!!l.outerFill,this.innerColor=(l.innerColor||[0,0,0,.5]).slice(),this.outerColor=(l.outerColor||[0,0,0,.5]).slice(),this.borderColor=(l.borderColor||[0,0,0,1]).slice(),this.borderWidth=l.borderWidth||0,this.selectBox=(l.selectBox||this.selectBox).slice()},n.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)};function f(l,o){var c=l.gl,h=i(c,[0,0,0,1,1,0,1,1]),d=t(c,a.boxVertex,a.boxFragment),p=new r(l,h,d);return p.update(o),l.addOverlay(p),p}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(s,m,x){m.exports=c;var t=s("gl-fbo"),i=s("typedarray-pool"),a=s("ndarray"),r=s("bit-twiddle").nextPow2,n=function(h,d,p){for(var y=1e8,g=-1,A=-1,b=h.shape[0],M=h.shape[1],_=0;_<b;_++)for(var T=0;T<M;T++){var w=h.get(_,T,0),v=h.get(_,T,1),L=h.get(_,T,2),S=h.get(_,T,3);if(w<255||v<255||L<255||S<255){var k=d-_,P=p-T,O=k*k+P*P;O<y&&(y=O,g=_,A=T)}}return[g,A,y]};function f(h,d,p,y,g){this.coord=[h,d],this.id=p,this.value=y,this.distance=g}function l(h,d,p){this.gl=h,this.fbo=d,this.buffer=p,this._readTimeout=null;var y=this;this._readCallback=function(){!y.gl||(d.bind(),h.readPixels(0,0,d.shape[0],d.shape[1],h.RGBA,h.UNSIGNED_BYTE,y.buffer),y._readTimeout=null)}}var o=l.prototype;Object.defineProperty(o,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(h){if(!!this.gl){this.fbo.shape=h;var d=this.fbo.shape[0],p=this.fbo.shape[1];if(p*d*4>this.buffer.length){i.free(this.buffer);for(var y=this.buffer=i.mallocUint8(r(p*d*4)),g=0;g<p*d*4;++g)y[g]=255}return h}}}),o.begin=function(){var h=this.gl;this.shape,!!h&&(this.fbo.bind(),h.clearColor(1,1,1,1),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT))},o.end=function(){var h=this.gl;!h||(h.bindFramebuffer(h.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},o.query=function(h,d,p){if(!this.gl)return null;var y=this.fbo.shape.slice();h=h|0,d=d|0,typeof p!="number"&&(p=1);var g=Math.min(Math.max(h-p,0),y[0])|0,A=Math.min(Math.max(h+p,0),y[0])|0,b=Math.min(Math.max(d-p,0),y[1])|0,M=Math.min(Math.max(d+p,0),y[1])|0;if(A<=g||M<=b)return null;var _=[A-g,M-b],T=a(this.buffer,[_[0],_[1],4],[4,y[0]*4,1],4*(g+y[0]*b)),w=n(T.hi(_[0],_[1],1),p,p),v=w[0],L=w[1];if(v<0||Math.pow(this.radius,2)<w[2])return null;var S=T.get(v,L,0),k=T.get(v,L,1),P=T.get(v,L,2),O=T.get(v,L,3);return new f(v+g|0,L+b|0,S,[k,P,O],Math.sqrt(w[2]))},o.dispose=function(){!this.gl||(this.fbo.dispose(),i.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))};function c(h,d){var p=d[0],y=d[1],g={},A=t(h,p,y,g),b=i.mallocUint8(p*y*4);return new l(h,A,b)}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(s,m,x){var t=s("./lib/create-uniforms"),i=s("./lib/create-attributes"),a=s("./lib/reflect"),r=s("./lib/shader-cache"),n=s("./lib/runtime-reflect"),f=s("./lib/GLError");function l(d){this.gl=d,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var o=l.prototype;o.bind=function(){this.program||this._relink();var d,p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),y=this.gl.lastAttribCount;if(p>y)for(d=y;d<p;d++)this.gl.enableVertexAttribArray(d);else if(y>p)for(d=p;d<y;d++)this.gl.disableVertexAttribArray(d);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},o.dispose=function(){for(var d=this.gl.lastAttribCount,p=0;p<d;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null};function c(d,p){return d.name<p.name?-1:1}o.update=function(d,p,y,g){if(!p||arguments.length===1){var A=d;d=A.vertex,p=A.fragment,y=A.uniforms,g=A.attributes}var b=this,M=b.gl,_=b._vref;b._vref=r.shader(M,M.VERTEX_SHADER,d),_&&_.dispose(),b.vertShader=b._vref.shader;var T=this._fref;if(b._fref=r.shader(M,M.FRAGMENT_SHADER,p),T&&T.dispose(),b.fragShader=b._fref.shader,!y||!g){var w=M.createProgram();if(M.attachShader(w,b.fragShader),M.attachShader(w,b.vertShader),M.linkProgram(w),!M.getProgramParameter(w,M.LINK_STATUS)){var v=M.getProgramInfoLog(w);throw new f(v,"Error linking program:"+v)}y=y||n.uniforms(M,w),g=g||n.attributes(M,w),M.deleteProgram(w)}g=g.slice(),g.sort(c);var L=[],S=[],k=[],P;for(P=0;P<g.length;++P){var O=g[P];if(O.type.indexOf("mat")>=0){for(var F=O.type.charAt(O.type.length-1)|0,I=new Array(F),D=0;D<F;++D)I[D]=k.length,S.push(O.name+"["+D+"]"),typeof O.location=="number"?k.push(O.location+D):Array.isArray(O.location)&&O.location.length===F&&typeof O.location[D]=="number"?k.push(O.location[D]|0):k.push(-1);L.push({name:O.name,type:O.type,locations:I})}else L.push({name:O.name,type:O.type,locations:[k.length]}),S.push(O.name),typeof O.location=="number"?k.push(O.location|0):k.push(-1)}var U=0;for(P=0;P<k.length;++P)if(k[P]<0){for(;k.indexOf(U)>=0;)U+=1;k[P]=U}var B=new Array(y.length);function j(){b.program=r.program(M,b._vref,b._fref,S,k);for(var Z=0;Z<y.length;++Z)B[Z]=M.getUniformLocation(b.program,y[Z].name)}j(),b._relink=j,b.types={uniforms:a(y),attributes:a(g)},b.attributes=i(M,b,L,k),Object.defineProperty(b,"uniforms",t(M,b,y,B))};function h(d,p,y,g,A){var b=new l(d);return b.update(p,y,g,A),b}m.exports=h},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(s,m,x){function t(i,a,r){this.shortMessage=a||"",this.longMessage=r||"",this.rawError=i||"",this.message="gl-shader: "+(a||i||"")+(r?`
`+r:""),this.stack=new Error().stack}t.prototype=new Error,t.prototype.name="GLError",t.prototype.constructor=t,m.exports=t},{}],134:[function(s,m,x){m.exports=l;var t=s("./GLError");function i(o,c,h,d,p,y){this._gl=o,this._wrapper=c,this._index=h,this._locations=d,this._dimension=p,this._constFunc=y}var a=i.prototype;a.pointer=function(c,h,d,p){var y=this,g=y._gl,A=y._locations[y._index];g.vertexAttribPointer(A,y._dimension,c||g.FLOAT,!!h,d||0,p||0),g.enableVertexAttribArray(A)},a.set=function(o,c,h,d){return this._constFunc(this._locations[this._index],o,c,h,d)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(o){return o!==this._locations[this._index]&&(this._locations[this._index]=o|0,this._wrapper.program=null),o|0}});var r=[function(o,c,h){return h.length===void 0?o.vertexAttrib1f(c,h):o.vertexAttrib1fv(c,h)},function(o,c,h,d){return h.length===void 0?o.vertexAttrib2f(c,h,d):o.vertexAttrib2fv(c,h)},function(o,c,h,d,p){return h.length===void 0?o.vertexAttrib3f(c,h,d,p):o.vertexAttrib3fv(c,h)},function(o,c,h,d,p,y){return h.length===void 0?o.vertexAttrib4f(c,h,d,p,y):o.vertexAttrib4fv(c,h)}];function n(o,c,h,d,p,y,g){var A=r[p],b=new i(o,c,h,d,p,A);Object.defineProperty(y,g,{set:function(M){return o.disableVertexAttribArray(d[h]),A(o,d[h],M),M},get:function(){return b},enumerable:!0})}function f(o,c,h,d,p,y,g){for(var A=new Array(p),b=new Array(p),M=0;M<p;++M)n(o,c,h[M],d,p,A,M),b[M]=A[M];Object.defineProperty(A,"location",{set:function(w){if(Array.isArray(w))for(var v=0;v<p;++v)b[v].location=w[v];else for(var v=0;v<p;++v)b[v].location=w+v;return w},get:function(){for(var w=new Array(p),v=0;v<p;++v)w[v]=d[h[v]];return w},enumerable:!0}),A.pointer=function(w,v,L,S){w=w||o.FLOAT,v=!!v,L=L||p*p,S=S||0;for(var k=0;k<p;++k){var P=d[h[k]];o.vertexAttribPointer(P,p,w,v,L,S+k*p),o.enableVertexAttribArray(P)}};var _=new Array(p),T=o["vertexAttrib"+p+"fv"];Object.defineProperty(y,g,{set:function(w){for(var v=0;v<p;++v){var L=d[h[v]];if(o.disableVertexAttribArray(L),Array.isArray(w[0]))T.call(o,L,w[v]);else{for(var S=0;S<p;++S)_[S]=w[p*v+S];T.call(o,L,_)}}return w},get:function(){return A},enumerable:!0})}function l(o,c,h,d){for(var p={},y=0,g=h.length;y<g;++y){var A=h[y],b=A.name,M=A.type,_=A.locations;switch(M){case"bool":case"int":case"float":n(o,c,_[0],d,1,p,b);break;default:if(M.indexOf("vec")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new t("","Invalid data type for attribute "+b+": "+M);n(o,c,_[0],d,T,p,b)}else if(M.indexOf("mat")>=0){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new t("","Invalid data type for attribute "+b+": "+M);f(o,c,_,d,T,p,b)}else throw new t("","Unknown data type for attribute "+b+": "+M);break}}return p}},{"./GLError":133}],135:[function(s,m,x){var t=s("./reflect"),i=s("./GLError");m.exports=n;function a(f){return function(){return f}}function r(f,l){for(var o=new Array(f),c=0;c<f;++c)o[c]=l;return o}function n(f,l,o,c){function h(M){return function(_,T,w){return _.getUniform(T.program,w[M])}}function d(M){return function(T){for(var w=p("",M),v=0;v<w.length;++v){var L=w[v],S=L[0],k=L[1];if(c[k]){var P=T;if(typeof S=="string"&&(S.indexOf(".")===0||S.indexOf("[")===0)){var O=S;if(S.indexOf(".")===0&&(O=S.slice(1)),O.indexOf("]")===O.length-1){var F=O.indexOf("["),I=O.slice(0,F),D=O.slice(F+1,O.length-1);P=I?T[I][D]:T[D]}else P=T[O]}var U=o[k].type,B;switch(U){case"bool":case"int":case"sampler2D":case"samplerCube":f.uniform1i(c[k],P);break;case"float":f.uniform1f(c[k],P);break;default:var j=U.indexOf("vec");if(0<=j&&j<=1&&U.length===4+j){if(B=U.charCodeAt(U.length-1)-48,B<2||B>4)throw new i("","Invalid data type");switch(U.charAt(0)){case"b":case"i":f["uniform"+B+"iv"](c[k],P);break;case"v":f["uniform"+B+"fv"](c[k],P);break;default:throw new i("","Unrecognized data type for vector "+name+": "+U)}}else if(U.indexOf("mat")===0&&U.length===4){if(B=U.charCodeAt(U.length-1)-48,B<2||B>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+U);f["uniformMatrix"+B+"fv"](c[k],!1,P);break}else throw new i("","Unknown uniform data type for "+name+": "+U)}}}}}function p(M,_){if(typeof _!="object")return[[M,_]];var T=[];for(var w in _){var v=_[w],L=M;parseInt(w)+""===w?L+="["+w+"]":L+="."+w,typeof v=="object"?T.push.apply(T,p(L,v)):T.push([L,v])}return T}function y(M){switch(M){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":return 0;case"float":return 0;default:var _=M.indexOf("vec");if(0<=_&&_<=1&&M.length===4+_){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new i("","Invalid data type");return M.charAt(0)==="b"?r(T,!1):r(T,0)}else if(M.indexOf("mat")===0&&M.length===4){var T=M.charCodeAt(M.length-1)-48;if(T<2||T>4)throw new i("","Invalid uniform dimension type for matrix "+name+": "+M);return r(T*T,0)}else throw new i("","Unknown uniform data type for "+name+": "+M)}}function g(M,_,T){if(typeof T=="object"){var w=A(T);Object.defineProperty(M,_,{get:a(w),set:d(T),enumerable:!0,configurable:!1})}else c[T]?Object.defineProperty(M,_,{get:h(T),set:d(T),enumerable:!0,configurable:!1}):M[_]=y(o[T].type)}function A(M){var _;if(Array.isArray(M)){_=new Array(M.length);for(var T=0;T<M.length;++T)g(_,T,M[T])}else{_={};for(var w in M)g(_,w,M[w])}return _}var b=t(o,!0);return{get:a(A(b)),set:d(b),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(s,m,x){m.exports=t;function t(i,a){for(var r={},n=0;n<i.length;++n)for(var f=i[n].name,l=f.split("."),o=r,c=0;c<l.length;++c){var h=l[c].split("[");if(h.length>1){h[0]in o||(o[h[0]]=[]),o=o[h[0]];for(var d=1;d<h.length;++d){var p=parseInt(h[d]);d<h.length-1||c<l.length-1?(p in o||(d<h.length-1?o[p]=[]:o[p]={}),o=o[p]):a?o[p]=n:o[p]=i[n].type}}else c<l.length-1?(h[0]in o||(o[h[0]]={}),o=o[h[0]]):a?o[h[0]]=n:o[h[0]]=i[n].type}return r}},{}],137:[function(s,m,x){x.uniforms=r,x.attributes=n;var t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},i=null;function a(f,l){if(!i){var o=Object.keys(t);i={};for(var c=0;c<o.length;++c){var h=o[c];i[f[h]]=t[h]}}return i[l]}function r(f,l){for(var o=f.getProgramParameter(l,f.ACTIVE_UNIFORMS),c=[],h=0;h<o;++h){var d=f.getActiveUniform(l,h);if(d){var p=a(f,d.type);if(d.size>1)for(var y=0;y<d.size;++y)c.push({name:d.name.replace("[0]","["+y+"]"),type:p});else c.push({name:d.name,type:p})}}return c}function n(f,l){for(var o=f.getProgramParameter(l,f.ACTIVE_ATTRIBUTES),c=[],h=0;h<o;++h){var d=f.getActiveAttrib(l,h);d&&c.push({name:d.name,type:a(f,d.type)})}return c}},{}],138:[function(s,m,x){x.shader=p,x.program=y;var t=s("./GLError"),i=s("gl-format-compiler-error"),a=typeof WeakMap=="undefined"?s("weakmap-shim"):WeakMap,r=new a,n=0;function f(g,A,b,M,_,T,w){this.id=g,this.src=A,this.type=b,this.shader=M,this.count=T,this.programs=[],this.cache=w}f.prototype.dispose=function(){if(--this.count==0){for(var g=this.cache,A=g.gl,b=this.programs,M=0,_=b.length;M<_;++M){var T=g.programs[b[M]];T&&(delete g.programs[M],A.deleteProgram(T))}A.deleteShader(this.shader),delete g.shaders[this.type===A.FRAGMENT_SHADER|0][this.src]}};function l(g){this.gl=g,this.shaders=[{},{}],this.programs={}}var o=l.prototype;function c(g,A,b){var M=g.createShader(A);if(g.shaderSource(M,b),g.compileShader(M),!g.getShaderParameter(M,g.COMPILE_STATUS)){var _=g.getShaderInfoLog(M);try{var T=i(_,b,A)}catch(w){throw console.warn("Failed to format compiler error: "+w),new t(_,`Error compiling shader:
`+_)}throw new t(_,T.short,T.long)}return M}o.getShaderReference=function(g,A){var b=this.gl,M=this.shaders[g===b.FRAGMENT_SHADER|0],_=M[A];if(!_||!b.isShader(_.shader)){var T=c(b,g,A);_=M[A]=new f(n++,A,g,T,[],1,this)}else _.count+=1;return _};function h(g,A,b,M,_){var T=g.createProgram();g.attachShader(T,A),g.attachShader(T,b);for(var w=0;w<M.length;++w)g.bindAttribLocation(T,_[w],M[w]);if(g.linkProgram(T),!g.getProgramParameter(T,g.LINK_STATUS)){var v=g.getProgramInfoLog(T);throw new t(v,"Error linking program: "+v)}return T}o.getProgram=function(g,A,b,M){var _=[g.id,A.id,b.join(":"),M.join(":")].join("@"),T=this.programs[_];return(!T||!this.gl.isProgram(T))&&(this.programs[_]=T=h(this.gl,g.shader,A.shader,b,M),g.programs.push(_),A.programs.push(_)),T};function d(g){var A=r.get(g);return A||(A=new l(g),r.set(g,A)),A}function p(g,A,b){return d(g).getShaderReference(A,b)}function y(g,A,b,M,_){return d(g).getProgram(A,b,M,_)}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(s,m,x){m.exports=a;function t(r){this.plot=r,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}var i=t.prototype;i.update=function(r){r=r||{},this.enable=(r.enable||[!0,!0,!1,!1]).slice(),this.width=(r.width||[1,1,1,1]).slice(),this.color=(r.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(n){return n.slice()}),this.center=(r.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},i.draw=function(){var r=this.enable,n=this.width,f=this.color,l=this.center,o=this.plot,c=o.line,h=o.dataBox,d=o.viewBox;if(c.bind(),h[0]<=l[0]&&l[0]<=h[2]&&h[1]<=l[1]&&l[1]<=h[3]){var p=d[0]+(l[0]-h[0])/(h[2]-h[0])*(d[2]-d[0]),y=d[1]+(l[1]-h[1])/(h[3]-h[1])*(d[3]-d[1]);r[0]&&c.drawLine(p,y,d[0],y,n[0],f[0]),r[1]&&c.drawLine(p,y,p,d[1],n[1],f[1]),r[2]&&c.drawLine(p,y,d[2],y,n[2],f[2]),r[3]&&c.drawLine(p,y,p,d[3],n[3],f[3])}},i.dispose=function(){this.plot.removeOverlay(this)};function a(r,n){var f=new t(r);return f.update(n),r.addOverlay(f),f}},{}],140:[function(s,m,x){var t=s("glslify"),i=s("gl-shader"),a=t([`precision mediump float;
#define GLSLIFY 1

attribute vec3 position, color;
attribute float weight;

uniform mat4 model, view, projection;
uniform vec3 coordinates[3];
uniform vec4 colors[3];
uniform vec2 screenShape;
uniform float lineWidth;

varying vec4 fragColor;

void main() {
  vec3 vertexPosition = mix(coordinates[0],
    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));

  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);
  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;
  vec2 delta = weight * clipOffset * screenShape;
  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;

  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);
  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];
}
`]),r=t([`precision mediump float;
#define GLSLIFY 1

varying vec4 fragColor;

void main() {
  gl_FragColor = fragColor;
}`]);m.exports=function(n){return i(n,a,r,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(s,m,x){var t=s("gl-buffer"),i=s("gl-vao"),a=s("./shaders/index");m.exports=h;var r=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function n(d,p,y,g){this.gl=d,this.buffer=p,this.vao=y,this.shader=g,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var f=n.prototype,l=[0,0,0],o=[0,0,0],c=[0,0];f.isTransparent=function(){return!1},f.drawTransparent=function(d){},f.draw=function(d){var p=this.gl,y=this.vao,g=this.shader;y.bind(),g.bind();var A=d.model||r,b=d.view||r,M=d.projection||r,_;this.axes&&(_=this.axes.lastCubeProps.axis);for(var T=l,w=o,v=0;v<3;++v)_&&_[v]<0?(T[v]=this.bounds[0][v],w[v]=this.bounds[1][v]):(T[v]=this.bounds[1][v],w[v]=this.bounds[0][v]);c[0]=p.drawingBufferWidth,c[1]=p.drawingBufferHeight,g.uniforms.model=A,g.uniforms.view=b,g.uniforms.projection=M,g.uniforms.coordinates=[this.position,T,w],g.uniforms.colors=this.colors,g.uniforms.screenShape=c;for(var v=0;v<3;++v)g.uniforms.lineWidth=this.lineWidth[v]*this.pixelRatio,this.enabled[v]&&(y.draw(p.TRIANGLES,6,6*v),this.drawSides[v]&&y.draw(p.TRIANGLES,12,18+12*v));y.unbind()},f.update=function(d){!d||("bounds"in d&&(this.bounds=d.bounds),"position"in d&&(this.position=d.position),"lineWidth"in d&&(this.lineWidth=d.lineWidth),"colors"in d&&(this.colors=d.colors),"enabled"in d&&(this.enabled=d.enabled),"drawSides"in d&&(this.drawSides=d.drawSides))},f.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()};function h(d,p){var y=[];function g(T,w,v,L,S,k){var P=[T,w,v,0,0,0,1];P[L+3]=1,P[L]=S,y.push.apply(y,P),P[6]=-1,y.push.apply(y,P),P[L]=k,y.push.apply(y,P),y.push.apply(y,P),P[6]=1,y.push.apply(y,P),P[L]=S,y.push.apply(y,P)}g(0,0,0,0,0,1),g(0,0,0,1,0,1),g(0,0,0,2,0,1),g(1,0,0,1,-1,1),g(1,0,0,2,-1,1),g(0,1,0,0,-1,1),g(0,1,0,2,-1,1),g(0,0,1,0,-1,1),g(0,0,1,1,-1,1);var A=t(d,y),b=i(d,[{type:d.FLOAT,buffer:A,size:3,offset:0,stride:28},{type:d.FLOAT,buffer:A,size:3,offset:12,stride:28},{type:d.FLOAT,buffer:A,size:1,offset:24,stride:28}]),M=a(d);M.attributes.position.location=0,M.attributes.color.location=1,M.attributes.weight.location=2;var _=new n(d,A,b,M);return _.update(p),_}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(s,m,x){var t=s("glslify"),i=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 color, position;
attribute vec2 uv;

uniform float vectorScale, tubeScale;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 eyePosition, lightPosition;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  // Scale the vector magnitude to stay constant with
  // model & view changes.
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * tubePosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  f_lightDirection = lightPosition - cameraCoordinate.xyz;
  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;
  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);

  // vec4 m_position  = model * vec4(tubePosition, 1.0);
  vec4 t_position  = view * tubePosition;
  gl_Position      = projection * t_position;

  f_color          = color;
  f_data           = tubePosition.xyz;
  f_position       = position.xyz;
  f_uv             = uv;
}
`]),a=t([`#extension GL_OES_standard_derivatives : enable

precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float cookTorranceSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness,
  float fresnel) {

  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);
  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);

  //Half angle vector
  vec3 H = normalize(lightDirection + viewDirection);

  //Geometric term
  float NdotH = max(dot(surfaceNormal, H), 0.0);
  float VdotH = max(dot(viewDirection, H), 0.000001);
  float LdotH = max(dot(lightDirection, H), 0.000001);
  float G1 = (2.0 * NdotH * VdotN) / VdotH;
  float G2 = (2.0 * NdotH * LdotN) / LdotH;
  float G = min(1.0, min(G1, G2));
  
  //Distribution term
  float D = beckmannDistribution(NdotH, roughness);

  //Fresnel term
  float F = pow(1.0 - VdotN, fresnel);

  //Multiply terms and done
  return  G * F * D / max(3.14159265 * VdotN, 0.000001);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform sampler2D texture;

varying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;
varying vec4 f_color;
varying vec2 f_uv;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;
  vec3 N = normalize(f_normal);
  vec3 L = normalize(f_lightDirection);
  vec3 V = normalize(f_eyeDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  vec4 surfaceColor = f_color * texture2D(texture, f_uv);
  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = litColor * opacity;
}
`]),r=t([`precision highp float;

precision highp float;
#define GLSLIFY 1

vec3 getOrthogonalVector(vec3 v) {
  // Return up-vector for only-z vector.
  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).
  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.
  // Assign z = 0, x = -b, y = a:
  // a*-b + b*a + c*0 = -ba + ba + 0 = 0
  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {
    return normalize(vec3(-v.y, v.x, 0.0));
  } else {
    return normalize(vec3(0.0, v.z, -v.y));
  }
}

// Calculate the tube vertex and normal at the given index.
//
// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.
//
// Each tube segment is made up of a ring of vertices.
// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.
// The indexes of tube segments run from 0 to 8.
//
vec3 getTubePosition(vec3 d, float index, out vec3 normal) {
  float segmentCount = 8.0;

  float angle = 2.0 * 3.14159 * (index / segmentCount);

  vec3 u = getOrthogonalVector(d);
  vec3 v = normalize(cross(u, d));

  vec3 x = u * cos(angle) * length(d);
  vec3 y = v * sin(angle) * length(d);
  vec3 v3 = x + y;

  normal = normalize(v3);

  return v3;
}

attribute vec4 vector;
attribute vec4 position;
attribute vec4 id;

uniform mat4 model, view, projection;
uniform float tubeScale;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  vec3 normal;
  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);
  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);

  gl_Position = projection * view * tubePosition;
  f_id        = id;
  f_position  = position.xyz;
}
`]),n=t([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3  clipBounds[2];
uniform float pickId;

varying vec3 f_position;
varying vec4 f_id;

void main() {
  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;

  gl_FragColor = vec4(pickId, f_id.xyz);
}`]);x.meshShader={vertex:i,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},x.pickShader={vertex:r,fragment:n,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(s,m,x){var t=s("gl-vec3"),i=s("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],r=function(y,g,A,b){for(var M=y.points,_=y.velocities,T=y.divergences,w=[],v=[],L=[],S=[],k=[],P=[],O=0,F=0,I=i.create(),D=i.create(),U=8,B=0;B<M.length;B++){var j=M[B],Z=_[B],ee=T[B];g===0&&(ee=A*.05),F=t.length(Z)/b,I=i.create(),t.copy(I,Z),I[3]=ee;for(var q=0;q<U;q++)k[q]=[j[0],j[1],j[2],q];if(S.length>0)for(var q=0;q<U;q++){var W=(q+1)%U;w.push(S[q],k[q],k[W],k[W],S[W],S[q]),L.push(D,I,I,I,D,D),P.push(O,F,F,F,O,O);var J=w.length;v.push([J-6,J-5,J-4],[J-3,J-2,J-1])}var le=S;S=k,k=le;var fe=D;D=I,I=fe;var se=O;O=F,F=se}return{positions:w,cells:v,vectors:L,vertexIntensity:P}},n=function(y,g,A,b){for(var M=0,_=0;_<y.length;_++)for(var T=y[_].velocities,w=0;w<T.length;w++)M=Math.max(M,t.length(T[w]));for(var v=y.map(function(B){return r(B,A,b,M)}),L=[],S=[],k=[],P=[],_=0;_<v.length;_++){var O=v[_],F=L.length;L=L.concat(O.positions),k=k.concat(O.vectors),P=P.concat(O.vertexIntensity);for(var w=0;w<O.cells.length;w++){var I=O.cells[w],D=[];S.push(D);for(var U=0;U<I.length;U++)D.push(I[U]+F)}}return{positions:L,cells:S,vectors:k,vertexIntensity:P,colormap:g}},f=function(y,g){var A=y.length,b;for(b=0;b<A;b++){var M=y[b];if(M===g)return b;if(M>g)return b-1}return b},l=function(y,g,A){return y<g?g:y>A?A:y},o=function(y,g,A){var b=g.vectors,M=g.meshgrid,_=y[0],T=y[1],w=y[2],v=M[0].length,L=M[1].length,S=M[2].length,k=f(M[0],_),P=f(M[1],T),O=f(M[2],w),F=k+1,I=P+1,D=O+1;if(k=l(k,0,v-1),F=l(F,0,v-1),P=l(P,0,L-1),I=l(I,0,L-1),O=l(O,0,S-1),D=l(D,0,S-1),k<0||P<0||O<0||F>v-1||I>L-1||D>S-1)return t.create();var U=M[0][k],B=M[0][F],j=M[1][P],Z=M[1][I],ee=M[2][O],q=M[2][D],W=(_-U)/(B-U),J=(T-j)/(Z-j),le=(w-ee)/(q-ee);isFinite(W)||(W=.5),isFinite(J)||(J=.5),isFinite(le)||(le=.5);var fe,se,H,Y,ne,te;switch(A.reversedX&&(k=v-1-k,F=v-1-F),A.reversedY&&(P=L-1-P,I=L-1-I),A.reversedZ&&(O=S-1-O,D=S-1-D),A.filled){case 5:ne=O,te=D,H=P*S,Y=I*S,fe=k*S*L,se=F*S*L;break;case 4:ne=O,te=D,fe=k*S,se=F*S,H=P*S*v,Y=I*S*v;break;case 3:H=P,Y=I,ne=O*L,te=D*L,fe=k*L*S,se=F*L*S;break;case 2:H=P,Y=I,fe=k*L,se=F*L,ne=O*L*v,te=D*L*v;break;case 1:fe=k,se=F,ne=O*v,te=D*v,H=P*v*S,Y=I*v*S;break;default:fe=k,se=F,H=P*v,Y=I*v,ne=O*v*L,te=D*v*L;break}var K=b[fe+H+ne],$=b[fe+H+te],ae=b[fe+Y+ne],ie=b[fe+Y+te],oe=b[se+H+ne],ue=b[se+H+te],ye=b[se+Y+ne],ce=b[se+Y+te],me=t.create(),xe=t.create(),ke=t.create(),Ae=t.create();t.lerp(me,K,oe,W),t.lerp(xe,$,ue,W),t.lerp(ke,ae,ye,W),t.lerp(Ae,ie,ce,W);var Oe=t.create(),He=t.create();t.lerp(Oe,me,ke,J),t.lerp(He,xe,Ae,J);var Ge=t.create();return t.lerp(Ge,Oe,He,le),Ge},c=function(y){var g=1/0;y.sort(function(_,T){return _-T});for(var A=y.length,b=1;b<A;b++){var M=Math.abs(y[b]-y[b-1]);M<g&&(g=M)}return g},h=function(y){for(var g=[],A=[],b=[],M={},_={},T={},w=y.length,v=0;v<w;v++){var L=y[v],S=L[0],k=L[1],P=L[2];M[S]||(g.push(S),M[S]=!0),_[k]||(A.push(k),_[k]=!0),T[P]||(b.push(P),T[P]=!0)}var O=c(g),F=c(A),I=c(b),D=Math.min(O,F,I);return isFinite(D)?D:1};m.exports=function(y,g){var A=y.startingPositions,b=y.maxLength||1e3,M=y.tubeSize||1,_=y.absoluteTubeSize,T=y.gridFill||"+x+y+z",w={};T.indexOf("-x")!==-1&&(w.reversedX=!0),T.indexOf("-y")!==-1&&(w.reversedY=!0),T.indexOf("-z")!==-1&&(w.reversedZ=!0),w.filled=a.indexOf(T.replace(/-/g,"").replace(/\+/g,""));var v=y.getVelocity||function(ue){return o(ue,y,w)},L=y.getDivergence||function(ue,ye){var ce=t.create(),me=1e-4;t.add(ce,ue,[me,0,0]);var xe=v(ce);t.subtract(xe,xe,ye),t.scale(xe,xe,1/me),t.add(ce,ue,[0,me,0]);var ke=v(ce);t.subtract(ke,ke,ye),t.scale(ke,ke,1/me),t.add(ce,ue,[0,0,me]);var Ae=v(ce);return t.subtract(Ae,Ae,ye),t.scale(Ae,Ae,1/me),t.add(ce,xe,ke),t.add(ce,ce,Ae),ce},S=[],k=g[0][0],P=g[0][1],O=g[0][2],F=g[1][0],I=g[1][1],D=g[1][2],U=function(ue){var ye=ue[0],ce=ue[1],me=ue[2];return!(ye<k||ye>F||ce<P||ce>I||me<O||me>D)},B=t.distance(g[0],g[1]),j=10*B/b,Z=j*j,ee=1,q=0,W=A.length;W>1&&(ee=h(A));for(var J=0;J<W;J++){var le=t.create();t.copy(le,A[J]);var fe=[le],se=[],H=v(le),Y=le;se.push(H);var ne=[],te=L(le,H),K=t.length(te);isFinite(K)&&K>q&&(q=K),ne.push(K),S.push({points:fe,velocities:se,divergences:ne});for(var $=0;$<b*100&&fe.length<b&&U(le);){$++;var ae=t.clone(H),ie=t.squaredLength(ae);if(ie===0)break;if(ie>Z&&t.scale(ae,ae,j/Math.sqrt(ie)),t.add(ae,ae,le),H=v(ae),t.squaredDistance(Y,ae)-Z>-1e-4*Z){fe.push(ae),Y=ae,se.push(H);var te=L(ae,H),K=t.length(te);isFinite(K)&&K>q&&(q=K),ne.push(K)}le=ae}}var oe=n(S,y.colormap,q,ee);return _?oe.tubeScale=_:(q===0&&(q=1),oe.tubeScale=M*.5*ee/q),oe};var d=s("./lib/shaders"),p=s("gl-cone3d").createMesh;m.exports.createTubeMesh=function(y,g){return p(y,g,{shaders:d,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(s,m,x){var t=s("gl-shader"),i=s("glslify"),a=i([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute vec3 f;
attribute vec3 normal;

uniform vec3 objectOffset;
uniform mat4 model, view, projection, inverseModel;
uniform vec3 lightPosition, eyePosition;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 localCoordinate = vec3(uv.zw, f.x);
  worldCoordinate = objectOffset + localCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);
  vec4 clipPosition = projection * view * worldPosition;
  gl_Position = clipPosition;
  kill = f.y;
  value = f.z;
  planeCoordinate = uv.xy;

  vColor = texture2D(colormap, vec2(value, value));

  //Lighting geometry parameters
  vec4 cameraCoordinate = view * worldPosition;
  cameraCoordinate.xyz /= cameraCoordinate.w;
  lightDirection = lightPosition - cameraCoordinate.xyz;
  eyeDirection   = eyePosition - cameraCoordinate.xyz;
  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);
}
`]),r=i([`precision highp float;
#define GLSLIFY 1

float beckmannDistribution(float x, float roughness) {
  float NdotH = max(x, 0.0001);
  float cos2Alpha = NdotH * NdotH;
  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;
  float roughness2 = roughness * roughness;
  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;
  return exp(tan2Alpha / roughness2) / denom;
}

float beckmannSpecular(
  vec3 lightDirection,
  vec3 viewDirection,
  vec3 surfaceNormal,
  float roughness) {
  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);
}

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec3 lowerBound, upperBound;
uniform float contourTint;
uniform vec4 contourColor;
uniform sampler2D colormap;
uniform vec3 clipBounds[2];
uniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;
uniform float vertexColor;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  if (
    kill > 0.0 ||
    vColor.a == 0.0 ||
    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)
  ) discard;

  vec3 N = normalize(surfaceNormal);
  vec3 V = normalize(eyeDirection);
  vec3 L = normalize(lightDirection);

  if(gl_FrontFacing) {
    N = -N;
  }

  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);
  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);

  //decide how to interpolate color \u2014 in vertex or in fragment
  vec4 surfaceColor =
    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +
    step(.5, vertexColor) * vColor;

  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);

  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;
}
`]),n=i([`precision highp float;
#define GLSLIFY 1

attribute vec4 uv;
attribute float f;

uniform vec3 objectOffset;
uniform mat3 permutation;
uniform mat4 model, view, projection;
uniform float height, zOffset;
uniform sampler2D colormap;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 lightDirection, eyeDirection, surfaceNormal;
varying vec4 vColor;

void main() {
  vec3 dataCoordinate = permutation * vec3(uv.xy, height);
  worldCoordinate = objectOffset + dataCoordinate;
  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);

  vec4 clipPosition = projection * view * worldPosition;
  clipPosition.z += zOffset;

  gl_Position = clipPosition;
  value = f + objectOffset.z;
  kill = -1.0;
  planeCoordinate = uv.zw;

  vColor = texture2D(colormap, vec2(value, value));

  //Don't do lighting for contours
  surfaceNormal   = vec3(1,0,0);
  eyeDirection    = vec3(0,1,0);
  lightDirection  = vec3(0,0,1);
}
`]),f=i([`precision highp float;
#define GLSLIFY 1

bool outOfRange(float a, float b, float p) {
  return ((p > max(a, b)) || 
          (p < min(a, b)));
}

bool outOfRange(vec2 a, vec2 b, vec2 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y));
}

bool outOfRange(vec3 a, vec3 b, vec3 p) {
  return (outOfRange(a.x, b.x, p.x) ||
          outOfRange(a.y, b.y, p.y) ||
          outOfRange(a.z, b.z, p.z));
}

bool outOfRange(vec4 a, vec4 b, vec4 p) {
  return outOfRange(a.xyz, b.xyz, p.xyz);
}

uniform vec2 shape;
uniform vec3 clipBounds[2];
uniform float pickId;

varying float value, kill;
varying vec3 worldCoordinate;
varying vec2 planeCoordinate;
varying vec3 surfaceNormal;

vec2 splitFloat(float v) {
  float vh = 255.0 * v;
  float upper = floor(vh);
  float lower = fract(vh);
  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);
}

void main() {
  if ((kill > 0.0) ||
      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;

  vec2 ux = splitFloat(planeCoordinate.x / shape.x);
  vec2 uy = splitFloat(planeCoordinate.y / shape.y);
  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));
}
`]);x.createShader=function(l){var o=t(l,a,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createPickShader=function(l){var o=t(l,a,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o.attributes.normal.location=2,o},x.createContourShader=function(l){var o=t(l,n,r,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o},x.createPickContourShader=function(l){var o=t(l,n,f,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return o.attributes.uv.location=0,o.attributes.f.location=1,o}},{"gl-shader":132,glslify:231}],145:[function(s,m,x){m.exports=se;var t=s("bit-twiddle"),i=s("gl-buffer"),a=s("gl-vao"),r=s("gl-texture2d"),n=s("typedarray-pool"),f=s("colormap"),l=s("ndarray-ops"),o=s("ndarray-pack"),c=s("ndarray"),h=s("surface-nets"),d=s("gl-mat4/multiply"),p=s("gl-mat4/invert"),y=s("binary-search-bounds"),g=s("ndarray-gradient"),A=s("./lib/shaders"),b=A.createShader,M=A.createContourShader,_=A.createPickShader,T=A.createPickContourShader,w=4*(4+3+3),v=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],L=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],S=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];(function(){for(var H=0;H<3;++H){var Y=S[H],ne=(H+1)%3,te=(H+2)%3;Y[ne+0]=1,Y[te+3]=1,Y[H+6]=1}})();function k(H,Y,ne,te,K){this.position=H,this.index=Y,this.uv=ne,this.level=te,this.dataCoordinate=K}var P=256;function O(H,Y,ne,te,K,$,ae,ie,oe,ue,ye,ce,me,xe,ke){this.gl=H,this.shape=Y,this.bounds=ne,this.objectOffset=ke,this.intensityBounds=[],this._shader=te,this._pickShader=K,this._coordinateBuffer=$,this._vao=ae,this._colorMap=ie,this._contourShader=oe,this._contourPickShader=ue,this._contourBuffer=ye,this._contourVAO=ce,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new k([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=me,this._dynamicVAO=xe,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[c(n.mallocFloat(1024),[0,0]),c(n.mallocFloat(1024),[0,0]),c(n.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}var F=O.prototype;F.genColormap=function(H,Y){var ne=!1,te=o([f({colormap:H,nshades:P,format:"rgba"}).map(function(K,$){var ae=Y?I($/255,Y):K[3];return ae<1&&(ne=!0),[K[0],K[1],K[2],255*ae]})]);return l.divseq(te,255),this.hasAlphaScale=ne,te},F.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},F.isOpaque=function(){return!this.isTransparent()},F.pickSlots=1,F.setPickBase=function(H){this.pickId=H};function I(H,Y){if(!Y||!Y.length)return 1;for(var ne=0;ne<Y.length;++ne){if(Y.length<2)return 1;if(Y[ne][0]===H)return Y[ne][1];if(Y[ne][0]>H&&ne>0){var te=(Y[ne][0]-H)/(Y[ne][0]-Y[ne-1][0]);return Y[ne][1]*(1-te)+te*Y[ne-1][1]}}return 1}var D=[0,0,0],U={showSurface:!1,showContour:!1,projections:[v.slice(),v.slice(),v.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function B(H,Y){var ne,te,K,$=Y.axes&&Y.axes.lastCubeProps.axis||D,ae=Y.showSurface,ie=Y.showContour;for(ne=0;ne<3;++ne)for(ae=ae||Y.surfaceProject[ne],te=0;te<3;++te)ie=ie||Y.contourProject[ne][te];for(ne=0;ne<3;++ne){var oe=U.projections[ne];for(te=0;te<16;++te)oe[te]=0;for(te=0;te<4;++te)oe[5*te]=1;oe[5*ne]=0,oe[12+ne]=Y.axesBounds[+($[ne]>0)][ne],d(oe,H.model,oe);var ue=U.clipBounds[ne];for(K=0;K<2;++K)for(te=0;te<3;++te)ue[K][te]=H.clipBounds[K][te];ue[0][ne]=-1e8,ue[1][ne]=1e8}return U.showSurface=ae,U.showContour=ie,U}var j={model:v,view:v,projection:v,inverseModel:v.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Z=v.slice(),ee=[1,0,0,0,1,0,0,0,1];function q(H,Y){H=H||{};var ne=this.gl;ne.disable(ne.CULL_FACE),this._colorMap.bind(0);var te=j;te.model=H.model||v,te.view=H.view||v,te.projection=H.projection||v,te.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],te.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],te.objectOffset=this.objectOffset,te.contourColor=this.contourColor[0],te.inverseModel=p(te.inverseModel,te.model);for(var K=0;K<2;++K)for(var $=te.clipBounds[K],ae=0;ae<3;++ae)$[ae]=Math.min(Math.max(this.clipBounds[K][ae],-1e8),1e8);te.kambient=this.ambientLight,te.kdiffuse=this.diffuseLight,te.kspecular=this.specularLight,te.roughness=this.roughness,te.fresnel=this.fresnel,te.opacity=this.opacity,te.height=0,te.permutation=ee,te.vertexColor=this.vertexColor;var ie=Z;for(d(ie,te.view,te.model),d(ie,te.projection,ie),p(ie,ie),K=0;K<3;++K)te.eyePosition[K]=ie[12+K]/ie[15];var oe=ie[15];for(K=0;K<3;++K)oe+=this.lightPosition[K]*ie[4*K+3];for(K=0;K<3;++K){var ue=ie[12+K];for(ae=0;ae<3;++ae)ue+=ie[4*ae+K]*this.lightPosition[ae];te.lightPosition[K]=ue/oe}var ye=B(te,this);if(ye.showSurface){for(this._shader.bind(),this._shader.uniforms=te,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ne.TRIANGLES,this._vertexCount),K=0;K<3;++K)!this.surfaceProject[K]||!this.vertexCount||(this._shader.uniforms.model=ye.projections[K],this._shader.uniforms.clipBounds=ye.clipBounds[K],this._vao.draw(ne.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ye.showContour){var ce=this._contourShader;te.kambient=1,te.kdiffuse=0,te.kspecular=0,te.opacity=1,ce.bind(),ce.uniforms=te;var me=this._contourVAO;for(me.bind(),K=0;K<3;++K)for(ce.uniforms.permutation=S[K],ne.lineWidth(this.contourWidth[K]*this.pixelRatio),ae=0;ae<this.contourLevels[K].length;++ae)ae===this.highlightLevel[K]?(ce.uniforms.contourColor=this.highlightColor[K],ce.uniforms.contourTint=this.highlightTint[K]):(ae===0||ae-1===this.highlightLevel[K])&&(ce.uniforms.contourColor=this.contourColor[K],ce.uniforms.contourTint=this.contourTint[K]),!!this._contourCounts[K][ae]&&(ce.uniforms.height=this.contourLevels[K][ae],me.draw(ne.LINES,this._contourCounts[K][ae],this._contourOffsets[K][ae]));for(K=0;K<3;++K)for(ce.uniforms.model=ye.projections[K],ce.uniforms.clipBounds=ye.clipBounds[K],ae=0;ae<3;++ae)if(!!this.contourProject[K][ae]){ce.uniforms.permutation=S[ae],ne.lineWidth(this.contourWidth[ae]*this.pixelRatio);for(var xe=0;xe<this.contourLevels[ae].length;++xe)xe===this.highlightLevel[ae]?(ce.uniforms.contourColor=this.highlightColor[ae],ce.uniforms.contourTint=this.highlightTint[ae]):(xe===0||xe-1===this.highlightLevel[ae])&&(ce.uniforms.contourColor=this.contourColor[ae],ce.uniforms.contourTint=this.contourTint[ae]),!!this._contourCounts[ae][xe]&&(ce.uniforms.height=this.contourLevels[ae][xe],me.draw(ne.LINES,this._contourCounts[ae][xe],this._contourOffsets[ae][xe]))}for(me.unbind(),me=this._dynamicVAO,me.bind(),K=0;K<3;++K)if(this._dynamicCounts[K]!==0)for(ce.uniforms.model=te.model,ce.uniforms.clipBounds=te.clipBounds,ce.uniforms.permutation=S[K],ne.lineWidth(this.dynamicWidth[K]*this.pixelRatio),ce.uniforms.contourColor=this.dynamicColor[K],ce.uniforms.contourTint=this.dynamicTint[K],ce.uniforms.height=this.dynamicLevel[K],me.draw(ne.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]),ae=0;ae<3;++ae)!this.contourProject[ae][K]||(ce.uniforms.model=ye.projections[ae],ce.uniforms.clipBounds=ye.clipBounds[ae],me.draw(ne.LINES,this._dynamicCounts[K],this._dynamicOffsets[K]));me.unbind()}}F.draw=function(H){return q.call(this,H,!1)},F.drawTransparent=function(H){return q.call(this,H,!0)};var W={model:v,view:v,projection:v,inverseModel:v,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};F.drawPick=function(H){H=H||{};var Y=this.gl;Y.disable(Y.CULL_FACE);var ne=W;ne.model=H.model||v,ne.view=H.view||v,ne.projection=H.projection||v,ne.shape=this._field[2].shape,ne.pickId=this.pickId/255,ne.lowerBound=this.bounds[0],ne.upperBound=this.bounds[1],ne.objectOffset=this.objectOffset,ne.permutation=ee;for(var te=0;te<2;++te)for(var K=ne.clipBounds[te],$=0;$<3;++$)K[$]=Math.min(Math.max(this.clipBounds[te][$],-1e8),1e8);var ae=B(ne,this);if(ae.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ne,this._vao.bind(),this._vao.draw(Y.TRIANGLES,this._vertexCount),te=0;te<3;++te)!this.surfaceProject[te]||(this._pickShader.uniforms.model=ae.projections[te],this._pickShader.uniforms.clipBounds=ae.clipBounds[te],this._vao.draw(Y.TRIANGLES,this._vertexCount));this._vao.unbind()}if(ae.showContour){var ie=this._contourPickShader;ie.bind(),ie.uniforms=ne;var oe=this._contourVAO;for(oe.bind(),$=0;$<3;++$)for(Y.lineWidth(this.contourWidth[$]*this.pixelRatio),ie.uniforms.permutation=S[$],te=0;te<this.contourLevels[$].length;++te)this._contourCounts[$][te]&&(ie.uniforms.height=this.contourLevels[$][te],oe.draw(Y.LINES,this._contourCounts[$][te],this._contourOffsets[$][te]));for(te=0;te<3;++te)for(ie.uniforms.model=ae.projections[te],ie.uniforms.clipBounds=ae.clipBounds[te],$=0;$<3;++$)if(!!this.contourProject[te][$]){ie.uniforms.permutation=S[$],Y.lineWidth(this.contourWidth[$]*this.pixelRatio);for(var ue=0;ue<this.contourLevels[$].length;++ue)this._contourCounts[$][ue]&&(ie.uniforms.height=this.contourLevels[$][ue],oe.draw(Y.LINES,this._contourCounts[$][ue],this._contourOffsets[$][ue]))}oe.unbind()}},F.pick=function(H){if(!H||H.id!==this.pickId)return null;var Y=this._field[2].shape,ne=this._pickResult,te=Y[0]*(H.value[0]+(H.value[2]>>4)/16)/255,K=Math.floor(te),$=te-K,ae=Y[1]*(H.value[1]+(H.value[2]&15)/16)/255,ie=Math.floor(ae),oe=ae-ie;K+=1,ie+=1;var ue=ne.position;ue[0]=ue[1]=ue[2]=0;for(var ye=0;ye<2;++ye)for(var ce=ye?$:1-$,me=0;me<2;++me)for(var xe=me?oe:1-oe,ke=K+ye,Ae=ie+me,Oe=ce*xe,He=0;He<3;++He)ue[He]+=this._field[He].get(ke,Ae)*Oe;for(var Ge=this._pickResult.level,_e=0;_e<3;++_e)if(Ge[_e]=y.le(this.contourLevels[_e],ue[_e]),Ge[_e]<0)this.contourLevels[_e].length>0&&(Ge[_e]=0);else if(Ge[_e]<this.contourLevels[_e].length-1){var Re=this.contourLevels[_e][Ge[_e]],We=this.contourLevels[_e][Ge[_e]+1];Math.abs(Re-ue[_e])>Math.abs(We-ue[_e])&&(Ge[_e]+=1)}for(ne.index[0]=$<.5?K:K+1,ne.index[1]=oe<.5?ie:ie+1,ne.uv[0]=te/Y[0],ne.uv[1]=ae/Y[1],He=0;He<3;++He)ne.dataCoordinate[He]=this._field[He].get(ne.index[0],ne.index[1]);return ne},F.padField=function(H,Y){var ne=Y.shape.slice(),te=H.shape.slice();l.assign(H.lo(1,1).hi(ne[0],ne[1]),Y),l.assign(H.lo(1).hi(ne[0],1),Y.hi(ne[0],1)),l.assign(H.lo(1,te[1]-1).hi(ne[0],1),Y.lo(0,ne[1]-1).hi(ne[0],1)),l.assign(H.lo(0,1).hi(1,ne[1]),Y.hi(1)),l.assign(H.lo(te[0]-1,1).hi(1,ne[1]),Y.lo(ne[0]-1)),H.set(0,0,Y.get(0,0)),H.set(0,te[1]-1,Y.get(0,ne[1]-1)),H.set(te[0]-1,0,Y.get(ne[0]-1,0)),H.set(te[0]-1,te[1]-1,Y.get(ne[0]-1,ne[1]-1))};function J(H,Y){return Array.isArray(H)?[Y(H[0]),Y(H[1]),Y(H[2])]:[Y(H),Y(H),Y(H)]}function le(H){return Array.isArray(H)?H.length===3?[H[0],H[1],H[2],1]:[H[0],H[1],H[2],H[3]]:[0,0,0,1]}function fe(H){if(Array.isArray(H)){if(Array.isArray(H))return[le(H[0]),le(H[1]),le(H[2])];var Y=le(H);return[Y.slice(),Y.slice(),Y.slice()]}}F.update=function(H){H=H||{},this.objectOffset=H.objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in H&&(this.contourWidth=J(H.contourWidth,Number)),"showContour"in H&&(this.showContour=J(H.showContour,Boolean)),"showSurface"in H&&(this.showSurface=!!H.showSurface),"contourTint"in H&&(this.contourTint=J(H.contourTint,Boolean)),"contourColor"in H&&(this.contourColor=fe(H.contourColor)),"contourProject"in H&&(this.contourProject=J(H.contourProject,function(wt){return J(wt,Boolean)})),"surfaceProject"in H&&(this.surfaceProject=H.surfaceProject),"dynamicColor"in H&&(this.dynamicColor=fe(H.dynamicColor)),"dynamicTint"in H&&(this.dynamicTint=J(H.dynamicTint,Number)),"dynamicWidth"in H&&(this.dynamicWidth=J(H.dynamicWidth,Number)),"opacity"in H&&(this.opacity=H.opacity),"opacityscale"in H&&(this.opacityscale=H.opacityscale),"colorBounds"in H&&(this.colorBounds=H.colorBounds),"vertexColor"in H&&(this.vertexColor=H.vertexColor?1:0),"colormap"in H&&this._colorMap.setPixels(this.genColormap(H.colormap,this.opacityscale));var Y=H.field||H.coords&&H.coords[2]||null,ne=!1;if(Y||(this._field[2].shape[0]||this._field[2].shape[2]?Y=this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):Y=this._field[2].hi(0,0)),"field"in H||"coords"in H){var te=(Y.shape[0]+2)*(Y.shape[1]+2);te>this._field[2].data.length&&(n.freeFloat(this._field[2].data),this._field[2].data=n.mallocFloat(t.nextPow2(te))),this._field[2]=c(this._field[2].data,[Y.shape[0]+2,Y.shape[1]+2]),this.padField(this._field[2],Y),this.shape=Y.shape.slice();for(var K=this.shape,$=0;$<2;++$)this._field[2].size>this._field[$].data.length&&(n.freeFloat(this._field[$].data),this._field[$].data=n.mallocFloat(this._field[2].size)),this._field[$]=c(this._field[$].data,[K[0]+2,K[1]+2]);if(H.coords){var ae=H.coords;if(!Array.isArray(ae)||ae.length!==3)throw new Error("gl-surface: invalid coordinates for x/y");for($=0;$<2;++$){var ie=ae[$];for(me=0;me<2;++me)if(ie.shape[me]!==K[me])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[$],ie)}}else if(H.ticks){var oe=H.ticks;if(!Array.isArray(oe)||oe.length!==2)throw new Error("gl-surface: invalid ticks");for($=0;$<2;++$){var ue=oe[$];if((Array.isArray(ue)||ue.length)&&(ue=c(ue)),ue.shape[0]!==K[$])throw new Error("gl-surface: invalid tick length");var ye=c(ue.data,K);ye.stride[$]=ue.stride[0],ye.stride[$^1]=0,this.padField(this._field[$],ye)}}else{for($=0;$<2;++$){var ce=[0,0];ce[$]=1,this._field[$]=c(this._field[$].data,[K[0]+2,K[1]+2],ce,0)}this._field[0].set(0,0,0);for(var me=0;me<K[0];++me)this._field[0].set(me+1,0,me);for(this._field[0].set(K[0]+1,0,K[0]-1),this._field[1].set(0,0,0),me=0;me<K[1];++me)this._field[1].set(0,me+1,me);this._field[1].set(0,K[1]+1,K[1]-1)}var xe=this._field,ke=c(n.mallocFloat(xe[2].size*3*2),[3,K[0]+2,K[1]+2,2]);for($=0;$<3;++$)g(ke.pick($),xe[$],"mirror");var Ae=c(n.mallocFloat(xe[2].size*3),[K[0]+2,K[1]+2,3]);for($=0;$<K[0]+2;++$)for(me=0;me<K[1]+2;++me){var Oe=ke.get(0,$,me,0),He=ke.get(0,$,me,1),Ge=ke.get(1,$,me,0),_e=ke.get(1,$,me,1),Re=ke.get(2,$,me,0),We=ke.get(2,$,me,1),qe=Ge*We-_e*Re,Ue=Re*He-We*Oe,Ie=Oe*_e-He*Ge,Ve=Math.sqrt(qe*qe+Ue*Ue+Ie*Ie);Ve<1e-8?(Ve=Math.max(Math.abs(qe),Math.abs(Ue),Math.abs(Ie)),Ve<1e-8?(Ie=1,Ue=qe=0,Ve=1):Ve=1/Ve):Ve=1/Math.sqrt(Ve),Ae.set($,me,0,qe*Ve),Ae.set($,me,1,Ue*Ve),Ae.set($,me,2,Ie*Ve)}n.free(ke.data);var dt=[1/0,1/0,1/0],Rt=[-1/0,-1/0,-1/0],Gt=1/0,kt=-1/0,zt=(K[0]-1)*(K[1]-1)*6,Bt=n.mallocFloat(t.nextPow2(10*zt)),Lt=0,Mt=0;for($=0;$<K[0]-1;++$){e:for(me=0;me<K[1]-1;++me){for(var it=0;it<2;++it)for(var ht=0;ht<2;++ht)for(var Qe=0;Qe<3;++Qe){var Ce=this._field[Qe].get(1+$+it,1+me+ht);if(isNaN(Ce)||!isFinite(Ce))continue e}for(Qe=0;Qe<6;++Qe){var Xe=$+L[Qe][0],rt=me+L[Qe][1],ut=this._field[0].get(Xe+1,rt+1),Pt=this._field[1].get(Xe+1,rt+1);Ce=this._field[2].get(Xe+1,rt+1),qe=Ae.get(Xe+1,rt+1,0),Ue=Ae.get(Xe+1,rt+1,1),Ie=Ae.get(Xe+1,rt+1,2),H.intensity&&(St=H.intensity.get(Xe,rt));var St=H.intensity?H.intensity.get(Xe,rt):Ce+this.objectOffset[2];Bt[Lt++]=Xe,Bt[Lt++]=rt,Bt[Lt++]=ut,Bt[Lt++]=Pt,Bt[Lt++]=Ce,Bt[Lt++]=0,Bt[Lt++]=St,Bt[Lt++]=qe,Bt[Lt++]=Ue,Bt[Lt++]=Ie,dt[0]=Math.min(dt[0],ut+this.objectOffset[0]),dt[1]=Math.min(dt[1],Pt+this.objectOffset[1]),dt[2]=Math.min(dt[2],Ce+this.objectOffset[2]),Gt=Math.min(Gt,St),Rt[0]=Math.max(Rt[0],ut+this.objectOffset[0]),Rt[1]=Math.max(Rt[1],Pt+this.objectOffset[1]),Rt[2]=Math.max(Rt[2],Ce+this.objectOffset[2]),kt=Math.max(kt,St),Mt+=1}}}for(H.intensityBounds&&(Gt=+H.intensityBounds[0],kt=+H.intensityBounds[1]),$=6;$<Lt;$+=10)Bt[$]=(Bt[$]-Gt)/(kt-Gt);this._vertexCount=Mt,this._coordinateBuffer.update(Bt.subarray(0,Lt)),n.freeFloat(Bt),n.free(Ae.data),this.bounds=[dt,Rt],this.intensity=H.intensity||this._field[2],(this.intensityBounds[0]!==Gt||this.intensityBounds[1]!==kt)&&(ne=!0),this.intensityBounds=[Gt,kt]}if("levels"in H){var Nt=H.levels;for(Array.isArray(Nt[0])?Nt=Nt.slice():Nt=[[],[],Nt],$=0;$<3;++$)Nt[$]=Nt[$].slice(),Nt[$].sort(function(wt,Wt){return wt-Wt});for($=0;$<3;++$)for(me=0;me<Nt[$].length;++me)Nt[$][me]-=this.objectOffset[$];e:for($=0;$<3;++$){if(Nt[$].length!==this.contourLevels[$].length){ne=!0;break}for(me=0;me<Nt[$].length;++me)if(Nt[$][me]!==this.contourLevels[$][me]){ne=!0;break e}}this.contourLevels=Nt}if(ne){xe=this._field,K=this.shape;for(var jt=[],Ot=0;Ot<3;++Ot){var Kt=this.contourLevels[Ot],Je=[],gt=[],Et=[0,0,0];for($=0;$<Kt.length;++$){var rr=h(this._field[Ot],Kt[$]);Je.push(jt.length/5|0),Mt=0;e:for(me=0;me<rr.cells.length;++me){var vr=rr.cells[me];for(Qe=0;Qe<2;++Qe){var or=rr.positions[vr[Qe]],dr=or[0],Lr=Math.floor(dr)|0,kr=dr-Lr,tr=or[1],Or=Math.floor(tr)|0,et=tr-Or,we=!1;t:for(var Se=0;Se<3;++Se){Et[Se]=0;var De=(Ot+Se+1)%3;for(it=0;it<2;++it){var je=it?kr:1-kr;for(Xe=Math.min(Math.max(Lr+it,0),K[0])|0,ht=0;ht<2;++ht){var $e=ht?et:1-et;if(rt=Math.min(Math.max(Or+ht,0),K[1])|0,Se<2?Ce=this._field[De].get(Xe,rt):Ce=(this.intensity.get(Xe,rt)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ce)||isNaN(Ce)){we=!0;break t}var ot=je*$e;Et[Se]+=ot*Ce}}}if(!we)jt.push(Et[0],Et[1],or[0],or[1],Et[2]),Mt+=1;else{if(Qe>0){for(var st=0;st<5;++st)jt.pop();Mt-=1}continue e}}}gt.push(Mt)}this._contourOffsets[Ot]=Je,this._contourCounts[Ot]=gt}var pt=n.mallocFloat(jt.length);for($=0;$<jt.length;++$)pt[$]=jt[$];this._contourBuffer.update(pt),n.freeFloat(pt)}},F.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var H=0;H<3;++H)n.freeFloat(this._field[H].data)},F.highlight=function(H){var Y;if(!H){this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],this.highlightLevel=[-1,-1,-1];return}for(Y=0;Y<3;++Y)this.enableHighlight[Y]?this.highlightLevel[Y]=H.level[Y]:this.highlightLevel[Y]=-1;var ne;for(this.snapToData?ne=H.dataCoordinate:ne=H.position,Y=0;Y<3;++Y)ne[Y]-=this.objectOffset[Y];if(!((!this.enableDynamic[0]||ne[0]===this.dynamicLevel[0])&&(!this.enableDynamic[1]||ne[1]===this.dynamicLevel[1])&&(!this.enableDynamic[2]||ne[2]===this.dynamicLevel[2]))){for(var te=0,K=this.shape,$=n.mallocFloat(12*K[0]*K[1]),ae=0;ae<3;++ae){if(!this.enableDynamic[ae]){this.dynamicLevel[ae]=NaN,this._dynamicCounts[ae]=0;continue}this.dynamicLevel[ae]=ne[ae];var ie=(ae+1)%3,oe=(ae+2)%3,ue=this._field[ae],ye=this._field[ie],ce=this._field[oe],me=h(ue,ne[ae]),xe=me.cells,ke=me.positions;for(this._dynamicOffsets[ae]=te,Y=0;Y<xe.length;++Y)for(var Ae=xe[Y],Oe=0;Oe<2;++Oe){var He=ke[Ae[Oe]],Ge=+He[0],_e=Ge|0,Re=Math.min(_e+1,K[0])|0,We=Ge-_e,qe=1-We,Ue=+He[1],Ie=Ue|0,Ve=Math.min(Ie+1,K[1])|0,dt=Ue-Ie,Rt=1-dt,Gt=qe*Rt,kt=qe*dt,zt=We*Rt,Bt=We*dt,Lt=Gt*ye.get(_e,Ie)+kt*ye.get(_e,Ve)+zt*ye.get(Re,Ie)+Bt*ye.get(Re,Ve),Mt=Gt*ce.get(_e,Ie)+kt*ce.get(_e,Ve)+zt*ce.get(Re,Ie)+Bt*ce.get(Re,Ve);if(isNaN(Lt)||isNaN(Mt)){Oe&&(te-=1);break}$[2*te+0]=Lt,$[2*te+1]=Mt,te+=1}this._dynamicCounts[ae]=te-this._dynamicOffsets[ae]}this._dynamicBuffer.update($.subarray(0,2*te)),n.freeFloat($)}};function se(H){var Y=H.gl,ne=b(Y),te=_(Y),K=M(Y),$=T(Y),ae=i(Y),ie=a(Y,[{buffer:ae,size:4,stride:w,offset:0},{buffer:ae,size:3,stride:w,offset:16},{buffer:ae,size:3,stride:w,offset:28}]),oe=i(Y),ue=a(Y,[{buffer:oe,size:4,stride:20,offset:0},{buffer:oe,size:1,stride:20,offset:16}]),ye=i(Y),ce=a(Y,[{buffer:ye,size:2,type:Y.FLOAT}]),me=r(Y,1,P,Y.RGBA,Y.UNSIGNED_BYTE);me.minFilter=Y.LINEAR,me.magFilter=Y.LINEAR;var xe=new O(Y,[0,0],[[0,0,0],[0,0,0]],ne,te,ae,ie,me,K,$,oe,ue,ye,ce,[0,0,0]),ke={levels:[[],[],[]]};for(var Ae in H)ke[Ae]=H[Ae];return ke.colormap=ke.colormap||"jet",xe.update(ke),xe}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(s,m,x){var t=s("ndarray"),i=s("ndarray-ops"),a=s("typedarray-pool");m.exports=T;var r=null,n=null,f=null;function l(w){r=[w.LINEAR,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_NEAREST],n=[w.NEAREST,w.LINEAR,w.NEAREST_MIPMAP_NEAREST,w.NEAREST_MIPMAP_LINEAR,w.LINEAR_MIPMAP_NEAREST,w.LINEAR_MIPMAP_LINEAR],f=[w.REPEAT,w.CLAMP_TO_EDGE,w.MIRRORED_REPEAT]}function o(w){return typeof HTMLCanvasElement!="undefined"&&w instanceof HTMLCanvasElement||typeof HTMLImageElement!="undefined"&&w instanceof HTMLImageElement||typeof HTMLVideoElement!="undefined"&&w instanceof HTMLVideoElement||typeof ImageData!="undefined"&&w instanceof ImageData}var c=function(w,v){i.muls(w,v,255)};function h(w,v,L){var S=w.gl,k=S.getParameter(S.MAX_TEXTURE_SIZE);if(v<0||v>k||L<0||L>k)throw new Error("gl-texture2d: Invalid texture size");return w._shape=[v,L],w.bind(),S.texImage2D(S.TEXTURE_2D,0,w.format,v,L,0,w.format,w.type,null),w._mipLevels=[0],w}function d(w,v,L,S,k,P){this.gl=w,this.handle=v,this.format=k,this.type=P,this._shape=[L,S],this._mipLevels=[0],this._magFilter=w.NEAREST,this._minFilter=w.NEAREST,this._wrapS=w.CLAMP_TO_EDGE,this._wrapT=w.CLAMP_TO_EDGE,this._anisoSamples=1;var O=this,F=[this._wrapS,this._wrapT];Object.defineProperties(F,[{get:function(){return O._wrapS},set:function(D){return O.wrapS=D}},{get:function(){return O._wrapT},set:function(D){return O.wrapT=D}}]),this._wrapVector=F;var I=[this._shape[0],this._shape[1]];Object.defineProperties(I,[{get:function(){return O._shape[0]},set:function(D){return O.width=D}},{get:function(){return O._shape[1]},set:function(D){return O.height=D}}]),this._shapeVector=I}var p=d.prototype;Object.defineProperties(p,{minFilter:{get:function(){return this._minFilter},set:function(w){this.bind();var v=this.gl;if(this.type===v.FLOAT&&r.indexOf(w)>=0&&(v.getExtension("OES_texture_float_linear")||(w=v.NEAREST)),n.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MIN_FILTER,w),this._minFilter=w}},magFilter:{get:function(){return this._magFilter},set:function(w){this.bind();var v=this.gl;if(this.type===v.FLOAT&&r.indexOf(w)>=0&&(v.getExtension("OES_texture_float_linear")||(w=v.NEAREST)),n.indexOf(w)<0)throw new Error("gl-texture2d: Unknown filter mode "+w);return v.texParameteri(v.TEXTURE_2D,v.TEXTURE_MAG_FILTER,w),this._magFilter=w}},mipSamples:{get:function(){return this._anisoSamples},set:function(w){var v=this._anisoSamples;if(this._anisoSamples=Math.max(w,1)|0,v!==this._anisoSamples){var L=this.gl.getExtension("EXT_texture_filter_anisotropic");L&&this.gl.texParameterf(this.gl.TEXTURE_2D,L.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(w){if(this.bind(),f.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,w),this._wrapS=w}},wrapT:{get:function(){return this._wrapT},set:function(w){if(this.bind(),f.indexOf(w)<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,w),this._wrapT=w}},wrap:{get:function(){return this._wrapVector},set:function(w){if(Array.isArray(w)||(w=[w,w]),w.length!==2)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var v=0;v<2;++v)if(f.indexOf(w[v])<0)throw new Error("gl-texture2d: Unknown wrap mode "+w);this._wrapS=w[0],this._wrapT=w[1];var L=this.gl;return this.bind(),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_S,this._wrapS),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_WRAP_T,this._wrapT),w}},shape:{get:function(){return this._shapeVector},set:function(w){if(!Array.isArray(w))w=[w|0,w|0];else if(w.length!==2)throw new Error("gl-texture2d: Invalid texture shape");return h(this,w[0]|0,w[1]|0),[w[0]|0,w[1]|0]}},width:{get:function(){return this._shape[0]},set:function(w){return w=w|0,h(this,w,this._shape[1]),w}},height:{get:function(){return this._shape[1]},set:function(w){return w=w|0,h(this,this._shape[0],w),w}}}),p.bind=function(w){var v=this.gl;return w!==void 0&&v.activeTexture(v.TEXTURE0+(w|0)),v.bindTexture(v.TEXTURE_2D,this.handle),w!==void 0?w|0:v.getParameter(v.ACTIVE_TEXTURE)-v.TEXTURE0},p.dispose=function(){this.gl.deleteTexture(this.handle)},p.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var w=Math.min(this._shape[0],this._shape[1]),v=0;w>0;++v,w>>>=1)this._mipLevels.indexOf(v)<0&&this._mipLevels.push(v)},p.setPixels=function(w,v,L,S){var k=this.gl;this.bind(),Array.isArray(v)?(S=L,L=v[1]|0,v=v[0]|0):(v=v||0,L=L||0),S=S||0;var P=o(w)?w:w.raw;if(P){var O=this._mipLevels.indexOf(S)<0;O?(k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,this.type,P),this._mipLevels.push(S)):k.texSubImage2D(k.TEXTURE_2D,S,v,L,this.format,this.type,P)}else if(w.shape&&w.stride&&w.data){if(w.shape.length<2||v+w.shape[1]>this._shape[1]>>>S||L+w.shape[0]>this._shape[0]>>>S||v<0||L<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");g(k,v,L,S,this.format,this.type,this._mipLevels,w)}else throw new Error("gl-texture2d: Unsupported data type")};function y(w,v){return w.length===3?v[2]===1&&v[1]===w[0]*w[2]&&v[0]===w[2]:v[0]===1&&v[1]===w[0]}function g(w,v,L,S,k,P,O,F){var I=F.dtype,D=F.shape.slice();if(D.length<2||D.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var U=0,B=0,j=y(D,F.stride.slice());if(I==="float32"?U=w.FLOAT:I==="float64"?(U=w.FLOAT,j=!1,I="float32"):I==="uint8"?U=w.UNSIGNED_BYTE:(U=w.UNSIGNED_BYTE,j=!1,I="uint8"),D.length===2)B=w.LUMINANCE,D=[D[0],D[1],1],F=t(F.data,D,[F.stride[0],F.stride[1],1],F.offset);else if(D.length===3)if(D[2]===1)B=w.ALPHA;else if(D[2]===2)B=w.LUMINANCE_ALPHA;else if(D[2]===3)B=w.RGB;else if(D[2]===4)B=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");if((B===w.LUMINANCE||B===w.ALPHA)&&(k===w.LUMINANCE||k===w.ALPHA)&&(B=k),B!==k)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var Z=F.size,ee=O.indexOf(S)<0;if(ee&&O.push(S),U===P&&j)F.offset===0&&F.data.length===Z?ee?w.texImage2D(w.TEXTURE_2D,S,k,D[0],D[1],0,k,P,F.data):w.texSubImage2D(w.TEXTURE_2D,S,v,L,D[0],D[1],k,P,F.data):ee?w.texImage2D(w.TEXTURE_2D,S,k,D[0],D[1],0,k,P,F.data.subarray(F.offset,F.offset+Z)):w.texSubImage2D(w.TEXTURE_2D,S,v,L,D[0],D[1],k,P,F.data.subarray(F.offset,F.offset+Z));else{var q;P===w.FLOAT?q=a.mallocFloat32(Z):q=a.mallocUint8(Z);var W=t(q,D,[D[2],D[2]*D[0],1]);U===w.FLOAT&&P===w.UNSIGNED_BYTE?c(W,F):i.assign(W,F),ee?w.texImage2D(w.TEXTURE_2D,S,k,D[0],D[1],0,k,P,q.subarray(0,Z)):w.texSubImage2D(w.TEXTURE_2D,S,v,L,D[0],D[1],k,P,q.subarray(0,Z)),P===w.FLOAT?a.freeFloat32(q):a.freeUint8(q)}}function A(w){var v=w.createTexture();return w.bindTexture(w.TEXTURE_2D,v),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.NEAREST),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),v}function b(w,v,L,S,k){var P=w.getParameter(w.MAX_TEXTURE_SIZE);if(v<0||v>P||L<0||L>P)throw new Error("gl-texture2d: Invalid texture shape");if(k===w.FLOAT&&!w.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var O=A(w);return w.texImage2D(w.TEXTURE_2D,0,S,v,L,0,S,k,null),new d(w,O,v,L,S,k)}function M(w,v,L,S,k,P){var O=A(w);return w.texImage2D(w.TEXTURE_2D,0,k,k,P,v),new d(w,O,L,S,k,P)}function _(w,v){var L=v.dtype,S=v.shape.slice(),k=w.getParameter(w.MAX_TEXTURE_SIZE);if(S[0]<0||S[0]>k||S[1]<0||S[1]>k)throw new Error("gl-texture2d: Invalid texture size");var P=y(S,v.stride.slice()),O=0;L==="float32"?O=w.FLOAT:L==="float64"?(O=w.FLOAT,P=!1,L="float32"):L==="uint8"?O=w.UNSIGNED_BYTE:(O=w.UNSIGNED_BYTE,P=!1,L="uint8");var F=0;if(S.length===2)F=w.LUMINANCE,S=[S[0],S[1],1],v=t(v.data,S,[v.stride[0],v.stride[1],1],v.offset);else if(S.length===3)if(S[2]===1)F=w.ALPHA;else if(S[2]===2)F=w.LUMINANCE_ALPHA;else if(S[2]===3)F=w.RGB;else if(S[2]===4)F=w.RGBA;else throw new Error("gl-texture2d: Invalid shape for pixel coords");else throw new Error("gl-texture2d: Invalid shape for texture");O===w.FLOAT&&!w.getExtension("OES_texture_float")&&(O=w.UNSIGNED_BYTE,P=!1);var I,D,U=v.size;if(P)v.offset===0&&v.data.length===U?I=v.data:I=v.data.subarray(v.offset,v.offset+U);else{var B=[S[2],S[2]*S[0],1];D=a.malloc(U,L);var j=t(D,S,B,0);(L==="float32"||L==="float64")&&O===w.UNSIGNED_BYTE?c(j,v):i.assign(j,v),I=D.subarray(0,U)}var Z=A(w);return w.texImage2D(w.TEXTURE_2D,0,F,S[0],S[1],0,F,O,I),P||a.free(D),new d(w,Z,S[0],S[1],F,O)}function T(w){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(r||l(w),typeof arguments[1]=="number")return b(w,arguments[1],arguments[2],arguments[3]||w.RGBA,arguments[4]||w.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return b(w,arguments[1][0]|0,arguments[1][1]|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(typeof arguments[1]=="object"){var v=arguments[1],L=o(v)?v:v.raw;if(L)return M(w,L,v.width|0,v.height|0,arguments[2]||w.RGBA,arguments[3]||w.UNSIGNED_BYTE);if(v.shape&&v.data&&v.stride)return _(w,v)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(s,m,x){function t(i,a,r){a?a.bind():i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,null);var n=i.getParameter(i.MAX_VERTEX_ATTRIBS)|0;if(r){if(r.length>n)throw new Error("gl-vao: Too many vertex attributes");for(var f=0;f<r.length;++f){var l=r[f];if(l.buffer){var o=l.buffer,c=l.size||4,h=l.type||i.FLOAT,d=!!l.normalized,p=l.stride||0,y=l.offset||0;o.bind(),i.enableVertexAttribArray(f),i.vertexAttribPointer(f,c,h,d,p,y)}else{if(typeof l=="number")i.vertexAttrib1f(f,l);else if(l.length===1)i.vertexAttrib1f(f,l[0]);else if(l.length===2)i.vertexAttrib2f(f,l[0],l[1]);else if(l.length===3)i.vertexAttrib3f(f,l[0],l[1],l[2]);else if(l.length===4)i.vertexAttrib4f(f,l[0],l[1],l[2],l[3]);else throw new Error("gl-vao: Invalid vertex attribute");i.disableVertexAttribArray(f)}}for(;f<n;++f)i.disableVertexAttribArray(f)}else{i.bindBuffer(i.ARRAY_BUFFER,null);for(var f=0;f<n;++f)i.disableVertexAttribArray(f)}}m.exports=t},{}],148:[function(s,m,x){var t=s("./do-bind.js");function i(r){this.gl=r,this._elements=null,this._attributes=null,this._elementsType=r.UNSIGNED_SHORT}i.prototype.bind=function(){t(this.gl,this._elements,this._attributes)},i.prototype.update=function(r,n,f){this._elements=n,this._attributes=r,this._elementsType=f||this.gl.UNSIGNED_SHORT},i.prototype.dispose=function(){},i.prototype.unbind=function(){},i.prototype.draw=function(r,n,f){f=f||0;var l=this.gl;this._elements?l.drawElements(r,n,this._elementsType,f):l.drawArrays(r,f,n)};function a(r){return new i(r)}m.exports=a},{"./do-bind.js":147}],149:[function(s,m,x){var t=s("./do-bind.js");function i(n,f,l,o,c,h){this.location=n,this.dimension=f,this.a=l,this.b=o,this.c=c,this.d=h}i.prototype.bind=function(n){switch(this.dimension){case 1:n.vertexAttrib1f(this.location,this.a);break;case 2:n.vertexAttrib2f(this.location,this.a,this.b);break;case 3:n.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:n.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d);break}};function a(n,f,l){this.gl=n,this._ext=f,this.handle=l,this._attribs=[],this._useElements=!1,this._elementsType=n.UNSIGNED_SHORT}a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var n=0;n<this._attribs.length;++n)this._attribs[n].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(n,f,l){if(this.bind(),t(this.gl,f,n),this.unbind(),this._attribs.length=0,n)for(var o=0;o<n.length;++o){var c=n[o];typeof c=="number"?this._attribs.push(new i(o,1,c)):Array.isArray(c)&&this._attribs.push(new i(o,c.length,c[0],c[1],c[2],c[3]))}this._useElements=!!f,this._elementsType=l||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(n,f,l){l=l||0;var o=this.gl;this._useElements?o.drawElements(n,f,this._elementsType,l):o.drawArrays(n,l,f)};function r(n,f){return new a(n,f,f.createVertexArrayOES())}m.exports=r},{"./do-bind.js":147}],150:[function(s,m,x){var t=s("./lib/vao-native.js"),i=s("./lib/vao-emulated.js");function a(n){this.bindVertexArrayOES=n.bindVertexArray.bind(n),this.createVertexArrayOES=n.createVertexArray.bind(n),this.deleteVertexArrayOES=n.deleteVertexArray.bind(n)}function r(n,f,l,o){var c=n.createVertexArray?new a(n):n.getExtension("OES_vertex_array_object"),h;return c?h=t(n,c):h=i(n),h.update(f,l,o),h}m.exports=r},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]+r[0],i[1]=a[1]+r[1],i[2]=a[2]+r[2],i}},{}],152:[function(s,m,x){m.exports=r;var t=s("./fromValues"),i=s("./normalize"),a=s("./dot");function r(n,f){var l=t(n[0],n[1],n[2]),o=t(f[0],f[1],f[2]);i(l,l),i(o,o);var c=a(l,o);return c>1?0:Math.acos(c)}},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=Math.ceil(a[0]),i[1]=Math.ceil(a[1]),i[2]=Math.ceil(a[2]),i}},{}],154:[function(s,m,x){m.exports=t;function t(i){var a=new Float32Array(3);return a[0]=i[0],a[1]=i[1],a[2]=i[2],a}},{}],155:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=a[0],i[1]=a[1],i[2]=a[2],i}},{}],156:[function(s,m,x){m.exports=t;function t(){var i=new Float32Array(3);return i[0]=0,i[1]=0,i[2]=0,i}},{}],157:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],h=r[2];return i[0]=f*h-l*c,i[1]=l*o-n*h,i[2]=n*c-f*o,i}},{}],158:[function(s,m,x){m.exports=s("./distance")},{"./distance":159}],159:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2];return Math.sqrt(r*r+n*n+f*f)}},{}],160:[function(s,m,x){m.exports=s("./divide")},{"./divide":161}],161:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]/r[0],i[1]=a[1]/r[1],i[2]=a[2]/r[2],i}},{}],162:[function(s,m,x){m.exports=t;function t(i,a){return i[0]*a[0]+i[1]*a[1]+i[2]*a[2]}},{}],163:[function(s,m,x){m.exports=1e-6},{}],164:[function(s,m,x){m.exports=i;var t=s("./epsilon");function i(a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],h=r[2];return Math.abs(n-o)<=t*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(f-c)<=t*Math.max(1,Math.abs(f),Math.abs(c))&&Math.abs(l-h)<=t*Math.max(1,Math.abs(l),Math.abs(h))}},{"./epsilon":163}],165:[function(s,m,x){m.exports=t;function t(i,a){return i[0]===a[0]&&i[1]===a[1]&&i[2]===a[2]}},{}],166:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=Math.floor(a[0]),i[1]=Math.floor(a[1]),i[2]=Math.floor(a[2]),i}},{}],167:[function(s,m,x){m.exports=i;var t=s("./create")();function i(a,r,n,f,l,o){var c,h;for(r||(r=3),n||(n=0),f?h=Math.min(f*r+n,a.length):h=a.length,c=n;c<h;c+=r)t[0]=a[c],t[1]=a[c+1],t[2]=a[c+2],l(t,t,o),a[c]=t[0],a[c+1]=t[1],a[c+2]=t[2];return a}},{"./create":156}],168:[function(s,m,x){m.exports=t;function t(i,a,r){var n=new Float32Array(3);return n[0]=i,n[1]=a,n[2]=r,n}},{}],169:[function(s,m,x){m.exports={EPSILON:s("./epsilon"),create:s("./create"),clone:s("./clone"),angle:s("./angle"),fromValues:s("./fromValues"),copy:s("./copy"),set:s("./set"),equals:s("./equals"),exactEquals:s("./exactEquals"),add:s("./add"),subtract:s("./subtract"),sub:s("./sub"),multiply:s("./multiply"),mul:s("./mul"),divide:s("./divide"),div:s("./div"),min:s("./min"),max:s("./max"),floor:s("./floor"),ceil:s("./ceil"),round:s("./round"),scale:s("./scale"),scaleAndAdd:s("./scaleAndAdd"),distance:s("./distance"),dist:s("./dist"),squaredDistance:s("./squaredDistance"),sqrDist:s("./sqrDist"),length:s("./length"),len:s("./len"),squaredLength:s("./squaredLength"),sqrLen:s("./sqrLen"),negate:s("./negate"),inverse:s("./inverse"),normalize:s("./normalize"),dot:s("./dot"),cross:s("./cross"),lerp:s("./lerp"),random:s("./random"),transformMat4:s("./transformMat4"),transformMat3:s("./transformMat3"),transformQuat:s("./transformQuat"),rotateX:s("./rotateX"),rotateY:s("./rotateY"),rotateZ:s("./rotateZ"),forEach:s("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=1/a[0],i[1]=1/a[1],i[2]=1/a[2],i}},{}],171:[function(s,m,x){m.exports=s("./length")},{"./length":172}],172:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2];return Math.sqrt(a*a+r*r+n*n)}},{}],173:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=a[0],l=a[1],o=a[2];return i[0]=f+n*(r[0]-f),i[1]=l+n*(r[1]-l),i[2]=o+n*(r[2]-o),i}},{}],174:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.max(a[0],r[0]),i[1]=Math.max(a[1],r[1]),i[2]=Math.max(a[2],r[2]),i}},{}],175:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.min(a[0],r[0]),i[1]=Math.min(a[1],r[1]),i[2]=Math.min(a[2],r[2]),i}},{}],176:[function(s,m,x){m.exports=s("./multiply")},{"./multiply":177}],177:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r[0],i[1]=a[1]*r[1],i[2]=a[2]*r[2],i}},{}],178:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=-a[0],i[1]=-a[1],i[2]=-a[2],i}},{}],179:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=r*r+n*n+f*f;return l>0&&(l=1/Math.sqrt(l),i[0]=a[0]*l,i[1]=a[1]*l,i[2]=a[2]*l),i}},{}],180:[function(s,m,x){m.exports=t;function t(i,a){a=a||1;var r=Math.random()*2*Math.PI,n=Math.random()*2-1,f=Math.sqrt(1-n*n)*a;return i[0]=Math.cos(r)*f,i[1]=Math.sin(r)*f,i[2]=n*a,i}},{}],181:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=r[1],l=r[2],o=a[1]-f,c=a[2]-l,h=Math.sin(n),d=Math.cos(n);return i[0]=a[0],i[1]=f+o*d-c*h,i[2]=l+o*h+c*d,i}},{}],182:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=r[0],l=r[2],o=a[0]-f,c=a[2]-l,h=Math.sin(n),d=Math.cos(n);return i[0]=f+c*h+o*d,i[1]=a[1],i[2]=l+c*d-o*h,i}},{}],183:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=r[0],l=r[1],o=a[0]-f,c=a[1]-l,h=Math.sin(n),d=Math.cos(n);return i[0]=f+o*d-c*h,i[1]=l+o*h+c*d,i[2]=a[2],i}},{}],184:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=Math.round(a[0]),i[1]=Math.round(a[1]),i[2]=Math.round(a[2]),i}},{}],185:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r,i[1]=a[1]*r,i[2]=a[2]*r,i}},{}],186:[function(s,m,x){m.exports=t;function t(i,a,r,n){return i[0]=a[0]+r[0]*n,i[1]=a[1]+r[1]*n,i[2]=a[2]+r[2]*n,i}},{}],187:[function(s,m,x){m.exports=t;function t(i,a,r,n){return i[0]=a,i[1]=r,i[2]=n,i}},{}],188:[function(s,m,x){m.exports=s("./squaredDistance")},{"./squaredDistance":190}],189:[function(s,m,x){m.exports=s("./squaredLength")},{"./squaredLength":191}],190:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2];return r*r+n*n+f*f}},{}],191:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2];return a*a+r*r+n*n}},{}],192:[function(s,m,x){m.exports=s("./subtract")},{"./subtract":193}],193:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]-r[0],i[1]=a[1]-r[1],i[2]=a[2]-r[2],i}},{}],194:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2];return i[0]=n*r[0]+f*r[3]+l*r[6],i[1]=n*r[1]+f*r[4]+l*r[7],i[2]=n*r[2]+f*r[5]+l*r[8],i}},{}],195:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[3]*n+r[7]*f+r[11]*l+r[15];return o=o||1,i[0]=(r[0]*n+r[4]*f+r[8]*l+r[12])/o,i[1]=(r[1]*n+r[5]*f+r[9]*l+r[13])/o,i[2]=(r[2]*n+r[6]*f+r[10]*l+r[14])/o,i}},{}],196:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],h=r[2],d=r[3],p=d*n+c*l-h*f,y=d*f+h*n-o*l,g=d*l+o*f-c*n,A=-o*n-c*f-h*l;return i[0]=p*d+A*-o+y*-h-g*-c,i[1]=y*d+A*-c+g*-o-p*-h,i[2]=g*d+A*-h+p*-c-y*-o,i}},{}],197:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]+r[0],i[1]=a[1]+r[1],i[2]=a[2]+r[2],i[3]=a[3]+r[3],i}},{}],198:[function(s,m,x){m.exports=t;function t(i){var a=new Float32Array(4);return a[0]=i[0],a[1]=i[1],a[2]=i[2],a[3]=i[3],a}},{}],199:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=a[0],i[1]=a[1],i[2]=a[2],i[3]=a[3],i}},{}],200:[function(s,m,x){m.exports=t;function t(){var i=new Float32Array(4);return i[0]=0,i[1]=0,i[2]=0,i[3]=0,i}},{}],201:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2],l=a[3]-i[3];return Math.sqrt(r*r+n*n+f*f+l*l)}},{}],202:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]/r[0],i[1]=a[1]/r[1],i[2]=a[2]/r[2],i[3]=a[3]/r[3],i}},{}],203:[function(s,m,x){m.exports=t;function t(i,a){return i[0]*a[0]+i[1]*a[1]+i[2]*a[2]+i[3]*a[3]}},{}],204:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=new Float32Array(4);return f[0]=i,f[1]=a,f[2]=r,f[3]=n,f}},{}],205:[function(s,m,x){m.exports={create:s("./create"),clone:s("./clone"),fromValues:s("./fromValues"),copy:s("./copy"),set:s("./set"),add:s("./add"),subtract:s("./subtract"),multiply:s("./multiply"),divide:s("./divide"),min:s("./min"),max:s("./max"),scale:s("./scale"),scaleAndAdd:s("./scaleAndAdd"),distance:s("./distance"),squaredDistance:s("./squaredDistance"),length:s("./length"),squaredLength:s("./squaredLength"),negate:s("./negate"),inverse:s("./inverse"),normalize:s("./normalize"),dot:s("./dot"),lerp:s("./lerp"),random:s("./random"),transformMat4:s("./transformMat4"),transformQuat:s("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=1/a[0],i[1]=1/a[1],i[2]=1/a[2],i[3]=1/a[3],i}},{}],207:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2],f=i[3];return Math.sqrt(a*a+r*r+n*n+f*f)}},{}],208:[function(s,m,x){m.exports=t;function t(i,a,r,n){var f=a[0],l=a[1],o=a[2],c=a[3];return i[0]=f+n*(r[0]-f),i[1]=l+n*(r[1]-l),i[2]=o+n*(r[2]-o),i[3]=c+n*(r[3]-c),i}},{}],209:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.max(a[0],r[0]),i[1]=Math.max(a[1],r[1]),i[2]=Math.max(a[2],r[2]),i[3]=Math.max(a[3],r[3]),i}},{}],210:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=Math.min(a[0],r[0]),i[1]=Math.min(a[1],r[1]),i[2]=Math.min(a[2],r[2]),i[3]=Math.min(a[3],r[3]),i}},{}],211:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r[0],i[1]=a[1]*r[1],i[2]=a[2]*r[2],i[3]=a[3]*r[3],i}},{}],212:[function(s,m,x){m.exports=t;function t(i,a){return i[0]=-a[0],i[1]=-a[1],i[2]=-a[2],i[3]=-a[3],i}},{}],213:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0],n=a[1],f=a[2],l=a[3],o=r*r+n*n+f*f+l*l;return o>0&&(o=1/Math.sqrt(o),i[0]=r*o,i[1]=n*o,i[2]=f*o,i[3]=l*o),i}},{}],214:[function(s,m,x){var t=s("./normalize"),i=s("./scale");m.exports=a;function a(r,n){return n=n||1,r[0]=Math.random(),r[1]=Math.random(),r[2]=Math.random(),r[3]=Math.random(),t(r,r),i(r,r,n),r}},{"./normalize":213,"./scale":215}],215:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]*r,i[1]=a[1]*r,i[2]=a[2]*r,i[3]=a[3]*r,i}},{}],216:[function(s,m,x){m.exports=t;function t(i,a,r,n){return i[0]=a[0]+r[0]*n,i[1]=a[1]+r[1]*n,i[2]=a[2]+r[2]*n,i[3]=a[3]+r[3]*n,i}},{}],217:[function(s,m,x){m.exports=t;function t(i,a,r,n,f){return i[0]=a,i[1]=r,i[2]=n,i[3]=f,i}},{}],218:[function(s,m,x){m.exports=t;function t(i,a){var r=a[0]-i[0],n=a[1]-i[1],f=a[2]-i[2],l=a[3]-i[3];return r*r+n*n+f*f+l*l}},{}],219:[function(s,m,x){m.exports=t;function t(i){var a=i[0],r=i[1],n=i[2],f=i[3];return a*a+r*r+n*n+f*f}},{}],220:[function(s,m,x){m.exports=t;function t(i,a,r){return i[0]=a[0]-r[0],i[1]=a[1]-r[1],i[2]=a[2]-r[2],i[3]=a[3]-r[3],i}},{}],221:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=a[3];return i[0]=r[0]*n+r[4]*f+r[8]*l+r[12]*o,i[1]=r[1]*n+r[5]*f+r[9]*l+r[13]*o,i[2]=r[2]*n+r[6]*f+r[10]*l+r[14]*o,i[3]=r[3]*n+r[7]*f+r[11]*l+r[15]*o,i}},{}],222:[function(s,m,x){m.exports=t;function t(i,a,r){var n=a[0],f=a[1],l=a[2],o=r[0],c=r[1],h=r[2],d=r[3],p=d*n+c*l-h*f,y=d*f+h*n-o*l,g=d*l+o*f-c*n,A=-o*n-c*f-h*l;return i[0]=p*d+A*-o+y*-h-g*-c,i[1]=y*d+A*-c+g*-o-p*-h,i[2]=g*d+A*-h+p*-c-y*-o,i[3]=a[3],i}},{}],223:[function(s,m,x){var t=s("glsl-tokenizer"),i=s("atob-lite");m.exports=a;function a(r){for(var n=Array.isArray(r)?r:t(r),f=0;f<n.length;f++){var l=n[f];if(l.type==="preprocessor"){var o=l.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(!!o&&!!o[2]){var c=o[1],h=o[2];return(c?i(h):h).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(s,m,x){m.exports=v;var t=s("./lib/literals"),i=s("./lib/operators"),a=s("./lib/builtins"),r=s("./lib/literals-300es"),n=s("./lib/builtins-300es"),f=999,l=9999,o=0,c=1,h=2,d=3,p=4,y=5,g=6,A=7,b=8,M=9,_=10,T=11,w=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"];function v(L){var S=0,k=0,P=f,O,F,I=[],D=[],U=1,B=0,j=0,Z=!1,ee=!1,q="",W;L=L||{};var J=a,le=t;L.version==="300 es"&&(J=n,le=r);for(var fe={},se={},S=0;S<J.length;S++)fe[J[S]]=!0;for(var S=0;S<le.length;S++)se[le[S]]=!0;return function(ke){return D=[],ke!==null?Y(ke):ne()};function H(ke){ke.length&&D.push({type:w[P],data:ke,position:j,line:U,column:B})}function Y(ke){S=0,ke.toString&&(ke=ke.toString()),q+=ke.replace(/\r\n/g,`
`),W=q.length;for(var Ae;O=q[S],S<W;){switch(Ae=S,P){case o:S=ie();break;case c:S=ae();break;case h:S=$();break;case d:S=oe();break;case p:S=ce();break;case T:S=ye();break;case y:S=me();break;case l:S=xe();break;case M:S=K();break;case f:S=te();break}if(Ae!==S)switch(q[Ae]){case`
`:B=0,++U;break;default:++B;break}}return k+=S,q=q.slice(S),D}function ne(ke){return I.length&&H(I.join("")),P=_,H("(eof)"),D}function te(){return I=I.length?[]:I,F==="/"&&O==="*"?(j=k+S-1,P=o,F=O,S+1):F==="/"&&O==="/"?(j=k+S-1,P=c,F=O,S+1):O==="#"?(P=h,j=k+S,S):/\s/.test(O)?(P=M,j=k+S,S):(Z=/\d/.test(O),ee=/[^\w_]/.test(O),j=k+S,P=Z?p:ee?d:l,S)}function K(){return/[^\s]/g.test(O)?(H(I.join("")),P=f,S):(I.push(O),F=O,S+1)}function $(){return(O==="\r"||O===`
`)&&F!=="\\"?(H(I.join("")),P=f,S):(I.push(O),F=O,S+1)}function ae(){return $()}function ie(){return O==="/"&&F==="*"?(I.push(O),H(I.join("")),P=f,S+1):(I.push(O),F=O,S+1)}function oe(){if(F==="."&&/\d/.test(O))return P=y,S;if(F==="/"&&O==="*")return P=o,S;if(F==="/"&&O==="/")return P=c,S;if(O==="."&&I.length){for(;ue(I););return P=y,S}if(O===";"||O===")"||O==="("){if(I.length)for(;ue(I););return H(O),P=f,S+1}var ke=I.length===2&&O!=="=";if(/[\w_\d\s]/.test(O)||ke){for(;ue(I););return P=f,S}return I.push(O),F=O,S+1}function ue(ke){var Ae=0,Oe,He;do{if(Oe=i.indexOf(ke.slice(0,ke.length+Ae).join("")),He=i[Oe],Oe===-1){if(Ae--+ke.length>0)continue;He=ke.slice(0,1).join("")}return H(He),j+=He.length,I=I.slice(He.length),I.length}while(1)}function ye(){return/[^a-fA-F0-9]/.test(O)?(H(I.join("")),P=f,S):(I.push(O),F=O,S+1)}function ce(){return O==="."||/[eE]/.test(O)?(I.push(O),P=y,F=O,S+1):O==="x"&&I.length===1&&I[0]==="0"?(P=T,I.push(O),F=O,S+1):/[^\d]/.test(O)?(H(I.join("")),P=f,S):(I.push(O),F=O,S+1)}function me(){return O==="f"&&(I.push(O),F=O,S+=1),/[eE]/.test(O)||(O==="-"||O==="+")&&/[eE]/.test(F)?(I.push(O),F=O,S+1):/[^\d]/.test(O)?(H(I.join("")),P=f,S):(I.push(O),F=O,S+1)}function xe(){if(/[^\d\w_]/.test(O)){var ke=I.join("");return se[ke]?P=b:fe[ke]?P=A:P=g,H(I.join("")),P=f,S}return I.push(O),F=O,S+1}}},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(s,m,x){var t=s("./builtins");t=t.slice().filter(function(i){return!/^(gl\_|texture)/.test(i)}),m.exports=t.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(s,m,x){m.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(s,m,x){var t=s("./literals");m.exports=t.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(s,m,x){m.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(s,m,x){m.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(s,m,x){var t=s("./index");m.exports=i;function i(a,r){var n=t(r),f=[];return f=f.concat(n(a)),f=f.concat(n(null)),f}},{"./index":224}],231:[function(s,m,x){m.exports=function(t){typeof t=="string"&&(t=[t]);for(var i=[].slice.call(arguments,1),a=[],r=0;r<t.length-1;r++)a.push(t[r],i[r]||"");return a.push(t[r]),a.join("")}},{}],232:[function(s,m,x){var t=s("is-browser");function i(){var a=!1;try{var r=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,r),window.removeEventListener("test",null,r)}catch{a=!1}return a}m.exports=t&&i()},{"is-browser":236}],233:[function(s,m,x){m.exports=d;var t=s("robust-orientation"),i=s("simplicial-complex").compareCells;function a(p,y,g){this.vertices=p,this.adjacent=y,this.boundary=g,this.lastVisited=-1}a.prototype.flip=function(){var p=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=p;var y=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=y};function r(p,y,g){this.vertices=p,this.cell=y,this.index=g}function n(p,y){return i(p.vertices,y.vertices)}function f(p){return function(){var y=this.tuple;return p.apply(this,y)}}function l(p){var y=t[p+1];return y||(y=t),f(y)}var o=[];function c(p,y,g){this.dimension=p,this.vertices=y,this.simplices=g,this.interior=g.filter(function(M){return!M.boundary}),this.tuple=new Array(p+1);for(var A=0;A<=p;++A)this.tuple[A]=this.vertices[A];var b=o[p];b||(b=o[p]=l(p)),this.orient=b}var h=c.prototype;h.handleBoundaryDegeneracy=function(p,y){var g=this.dimension,A=this.vertices.length-1,b=this.tuple,M=this.vertices,_=[p];for(p.lastVisited=-A;_.length>0;){p=_.pop();for(var T=p.adjacent,w=0;w<=g;++w){var v=T[w];if(!(!v.boundary||v.lastVisited<=-A)){for(var L=v.vertices,S=0;S<=g;++S){var k=L[S];k<0?b[S]=y:b[S]=M[k]}var P=this.orient();if(P>0)return v;v.lastVisited=-A,P===0&&_.push(v)}}}return null},h.walk=function(p,y){var g=this.vertices.length-1,A=this.dimension,b=this.vertices,M=this.tuple,_=y?this.interior.length*Math.random()|0:this.interior.length-1,T=this.interior[_];e:for(;!T.boundary;){for(var w=T.vertices,v=T.adjacent,L=0;L<=A;++L)M[L]=b[w[L]];T.lastVisited=g;for(var L=0;L<=A;++L){var S=v[L];if(!(S.lastVisited>=g)){var k=M[L];M[L]=p;var P=this.orient();if(M[L]=k,P<0){T=S;continue e}else S.boundary?S.lastVisited=-g:S.lastVisited=g}}return}return T},h.addPeaks=function(p,y){var g=this.vertices.length-1,A=this.dimension,b=this.vertices,M=this.tuple,_=this.interior,T=this.simplices,w=[y];y.lastVisited=g,y.vertices[y.vertices.indexOf(-1)]=g,y.boundary=!1,_.push(y);for(var v=[];w.length>0;){var y=w.pop(),L=y.vertices,S=y.adjacent,k=L.indexOf(g);if(!(k<0)){for(var P=0;P<=A;++P)if(P!==k){var O=S[P];if(!(!O.boundary||O.lastVisited>=g)){var F=O.vertices;if(O.lastVisited!==-g){for(var I=0,D=0;D<=A;++D)F[D]<0?(I=D,M[D]=p):M[D]=b[F[D]];var U=this.orient();if(U>0){F[I]=g,O.boundary=!1,_.push(O),w.push(O),O.lastVisited=g;continue}else O.lastVisited=-g}var B=O.adjacent,j=L.slice(),Z=S.slice(),ee=new a(j,Z,!0);T.push(ee);var q=B.indexOf(y);if(!(q<0)){B[q]=ee,Z[k]=O,j[P]=-1,Z[P]=y,S[P]=ee,ee.flip();for(var D=0;D<=A;++D){var W=j[D];if(!(W<0||W===g)){for(var J=new Array(A-1),le=0,fe=0;fe<=A;++fe){var se=j[fe];se<0||fe===D||(J[le++]=se)}v.push(new r(J,ee,D))}}}}}}}v.sort(n);for(var P=0;P+1<v.length;P+=2){var H=v[P],Y=v[P+1],ne=H.index,te=Y.index;ne<0||te<0||(H.cell.adjacent[H.index]=Y.cell,Y.cell.adjacent[Y.index]=H.cell)}},h.insert=function(p,y){var g=this.vertices;g.push(p);var A=this.walk(p,y);if(!!A){for(var b=this.dimension,M=this.tuple,_=0;_<=b;++_){var T=A.vertices[_];T<0?M[_]=p:M[_]=g[T]}var w=this.orient(M);w<0||w===0&&(A=this.handleBoundaryDegeneracy(A,p),!A)||this.addPeaks(p,A)}},h.boundary=function(){for(var p=this.dimension,y=[],g=this.simplices,A=g.length,b=0;b<A;++b){var M=g[b];if(M.boundary){for(var _=new Array(p),T=M.vertices,w=0,v=0,L=0;L<=p;++L)T[L]>=0?_[w++]=T[L]:v=L&1;if(v===(p&1)){var S=_[0];_[0]=_[1],_[1]=S}y.push(_)}}return y};function d(p,y){var g=p.length;if(g===0)throw new Error("Must have at least d+1 points");var A=p[0].length;if(g<=A)throw new Error("Must input at least d+1 points");var b=p.slice(0,A+1),M=t.apply(void 0,b);if(M===0)throw new Error("Input not in general position");for(var _=new Array(A+1),T=0;T<=A;++T)_[T]=T;M<0&&(_[0]=1,_[1]=0);for(var w=new a(_,new Array(A+1),!1),v=w.adjacent,L=new Array(A+2),T=0;T<=A;++T){for(var S=_.slice(),k=0;k<=A;++k)k===T&&(S[k]=-1);var P=S[0];S[0]=S[1],S[1]=P;var O=new a(S,new Array(A+1),!0);v[T]=O,L[T]=O}L[A+1]=w;for(var T=0;T<=A;++T)for(var S=v[T].vertices,F=v[T].adjacent,k=0;k<=A;++k){var I=S[k];if(I<0){F[k]=w;continue}for(var D=0;D<=A;++D)v[D].vertices.indexOf(I)<0&&(F[k]=v[D])}for(var U=new c(A,b,L),B=!!y,T=A+1;T<g;++T)U.insert(p[T],B);return U.boundary()}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(s,m,x){var t=s("binary-search-bounds"),i=0,a=1,r=2;m.exports=w;function n(v,L,S,k,P){this.mid=v,this.left=L,this.right=S,this.leftPoints=k,this.rightPoints=P,this.count=(L?L.count:0)+(S?S.count:0)+k.length}var f=n.prototype;function l(v,L){v.mid=L.mid,v.left=L.left,v.right=L.right,v.leftPoints=L.leftPoints,v.rightPoints=L.rightPoints,v.count=L.count}function o(v,L){var S=M(L);v.mid=S.mid,v.left=S.left,v.right=S.right,v.leftPoints=S.leftPoints,v.rightPoints=S.rightPoints,v.count=S.count}function c(v,L){var S=v.intervals([]);S.push(L),o(v,S)}function h(v,L){var S=v.intervals([]),k=S.indexOf(L);return k<0?i:(S.splice(k,1),o(v,S),a)}f.intervals=function(v){return v.push.apply(v,this.leftPoints),this.left&&this.left.intervals(v),this.right&&this.right.intervals(v),v},f.insert=function(v){var L=this.count-this.leftPoints.length;if(this.count+=1,v[1]<this.mid)this.left?4*(this.left.count+1)>3*(L+1)?c(this,v):this.left.insert(v):this.left=M([v]);else if(v[0]>this.mid)this.right?4*(this.right.count+1)>3*(L+1)?c(this,v):this.right.insert(v):this.right=M([v]);else{var S=t.ge(this.leftPoints,v,A),k=t.ge(this.rightPoints,v,b);this.leftPoints.splice(S,0,v),this.rightPoints.splice(k,0,v)}},f.remove=function(v){var L=this.count-this.leftPoints;if(v[1]<this.mid){if(!this.left)return i;var S=this.right?this.right.count:0;if(4*S>3*(L-1))return h(this,v);var k=this.left.remove(v);return k===r?(this.left=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else if(v[0]>this.mid){if(!this.right)return i;var P=this.left?this.left.count:0;if(4*P>3*(L-1))return h(this,v);var k=this.right.remove(v);return k===r?(this.right=null,this.count-=1,a):(k===a&&(this.count-=1),k)}else{if(this.count===1)return this.leftPoints[0]===v?r:i;if(this.leftPoints.length===1&&this.leftPoints[0]===v){if(this.left&&this.right){for(var O=this,F=this.left;F.right;)O=F,F=F.right;if(O===this)F.right=this.right;else{var I=this.left,k=this.right;O.count-=F.count,O.right=F.left,F.left=I,F.right=k}l(this,F),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else this.left?l(this,this.left):l(this,this.right);return a}for(var I=t.ge(this.leftPoints,v,A);I<this.leftPoints.length&&this.leftPoints[I][0]===v[0];++I)if(this.leftPoints[I]===v){this.count-=1,this.leftPoints.splice(I,1);for(var k=t.ge(this.rightPoints,v,b);k<this.rightPoints.length&&this.rightPoints[k][1]===v[1];++k)if(this.rightPoints[k]===v)return this.rightPoints.splice(k,1),a}return i}};function d(v,L,S){for(var k=0;k<v.length&&v[k][0]<=L;++k){var P=S(v[k]);if(P)return P}}function p(v,L,S){for(var k=v.length-1;k>=0&&v[k][1]>=L;--k){var P=S(v[k]);if(P)return P}}function y(v,L){for(var S=0;S<v.length;++S){var k=L(v[S]);if(k)return k}}f.queryPoint=function(v,L){if(v<this.mid){if(this.left){var S=this.left.queryPoint(v,L);if(S)return S}return d(this.leftPoints,v,L)}else if(v>this.mid){if(this.right){var S=this.right.queryPoint(v,L);if(S)return S}return p(this.rightPoints,v,L)}else return y(this.leftPoints,L)},f.queryInterval=function(v,L,S){if(v<this.mid&&this.left){var k=this.left.queryInterval(v,L,S);if(k)return k}if(L>this.mid&&this.right){var k=this.right.queryInterval(v,L,S);if(k)return k}return L<this.mid?d(this.leftPoints,L,S):v>this.mid?p(this.rightPoints,v,S):y(this.leftPoints,S)};function g(v,L){return v-L}function A(v,L){var S=v[0]-L[0];return S||v[1]-L[1]}function b(v,L){var S=v[1]-L[1];return S||v[0]-L[0]}function M(v){if(v.length===0)return null;for(var L=[],S=0;S<v.length;++S)L.push(v[S][0],v[S][1]);L.sort(g);for(var k=L[L.length>>1],P=[],O=[],F=[],S=0;S<v.length;++S){var I=v[S];I[1]<k?P.push(I):k<I[0]?O.push(I):F.push(I)}var D=F,U=F.slice();return D.sort(A),U.sort(b),new n(k,M(P),M(O),D,U)}function _(v){this.root=v}var T=_.prototype;T.insert=function(v){this.root?this.root.insert(v):this.root=new n(v[0],null,null,[v],[v])},T.remove=function(v){if(this.root){var L=this.root.remove(v);return L===r&&(this.root=null),L!==i}return!1},T.queryPoint=function(v,L){if(this.root)return this.root.queryPoint(v,L)},T.queryInterval=function(v,L,S){if(v<=L&&this.root)return this.root.queryInterval(v,L,S)},Object.defineProperty(T,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(T,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}});function w(v){return!v||v.length===0?new _(null):new _(M(v))}},{"binary-search-bounds":31}],235:[function(s,m,x){function t(i){for(var a=new Array(i),r=0;r<i;++r)a[r]=r;return a}m.exports=t},{}],236:[function(s,m,x){m.exports=!0},{}],237:[function(s,m,x){/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */m.exports=function(a){return a!=null&&(t(a)||i(a)||!!a._isBuffer)};function t(a){return!!a.constructor&&typeof a.constructor.isBuffer=="function"&&a.constructor.isBuffer(a)}function i(a){return typeof a.readFloatLE=="function"&&typeof a.slice=="function"&&t(a.slice(0,0))}},{}],238:[function(s,m,x){m.exports=a,m.exports.isMobile=a,m.exports.default=a;var t=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,i=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(r){r||(r={});var n=r.ua;if(!n&&typeof navigator!="undefined"&&(n=navigator.userAgent),n&&n.headers&&typeof n.headers["user-agent"]=="string"&&(n=n.headers["user-agent"]),typeof n!="string")return!1;var f=r.tablet?i.test(n):t.test(n);return!f&&r.tablet&&r.featureDetect&&navigator&&navigator.maxTouchPoints>1&&n.indexOf("Macintosh")!==-1&&n.indexOf("Safari")!==-1&&(f=!0),f}},{}],239:[function(s,m,x){m.exports=function(t){for(var i=t.length,a,r=0;r<i;r++)if(a=t.charCodeAt(r),(a<9||a>13)&&a!==32&&a!==133&&a!==160&&a!==5760&&a!==6158&&(a<8192||a>8205)&&a!==8232&&a!==8233&&a!==8239&&a!==8287&&a!==8288&&a!==12288&&a!==65279)return!1;return!0}},{}],240:[function(s,m,x){function t(i,a,r){return i*(1-r)+a*r}m.exports=t},{}],241:[function(s,m,x){var t=s("./normalize"),i=s("gl-mat4/create"),a=s("gl-mat4/clone"),r=s("gl-mat4/determinant"),n=s("gl-mat4/invert"),f=s("gl-mat4/transpose"),l={length:s("gl-vec3/length"),normalize:s("gl-vec3/normalize"),dot:s("gl-vec3/dot"),cross:s("gl-vec3/cross")},o=i(),c=i(),h=[0,0,0,0],d=[[0,0,0],[0,0,0],[0,0,0]],p=[0,0,0];m.exports=function(M,_,T,w,v,L){if(_||(_=[0,0,0]),T||(T=[0,0,0]),w||(w=[0,0,0]),v||(v=[0,0,0,1]),L||(L=[0,0,0,1]),!t(o,M)||(a(c,o),c[3]=0,c[7]=0,c[11]=0,c[15]=1,Math.abs(r(c)<1e-8)))return!1;var S=o[3],k=o[7],P=o[11],O=o[12],F=o[13],I=o[14],D=o[15];if(S!==0||k!==0||P!==0){h[0]=S,h[1]=k,h[2]=P,h[3]=D;var U=n(c,c);if(!U)return!1;f(c,c),y(v,h,c)}else v[0]=v[1]=v[2]=0,v[3]=1;if(_[0]=O,_[1]=F,_[2]=I,g(d,o),T[0]=l.length(d[0]),l.normalize(d[0],d[0]),w[0]=l.dot(d[0],d[1]),A(d[1],d[1],d[0],1,-w[0]),T[1]=l.length(d[1]),l.normalize(d[1],d[1]),w[0]/=T[1],w[1]=l.dot(d[0],d[2]),A(d[2],d[2],d[0],1,-w[1]),w[2]=l.dot(d[1],d[2]),A(d[2],d[2],d[1],1,-w[2]),T[2]=l.length(d[2]),l.normalize(d[2],d[2]),w[1]/=T[2],w[2]/=T[2],l.cross(p,d[1],d[2]),l.dot(d[0],p)<0)for(var B=0;B<3;B++)T[B]*=-1,d[B][0]*=-1,d[B][1]*=-1,d[B][2]*=-1;return L[0]=.5*Math.sqrt(Math.max(1+d[0][0]-d[1][1]-d[2][2],0)),L[1]=.5*Math.sqrt(Math.max(1-d[0][0]+d[1][1]-d[2][2],0)),L[2]=.5*Math.sqrt(Math.max(1-d[0][0]-d[1][1]+d[2][2],0)),L[3]=.5*Math.sqrt(Math.max(1+d[0][0]+d[1][1]+d[2][2],0)),d[2][1]>d[1][2]&&(L[0]=-L[0]),d[0][2]>d[2][0]&&(L[1]=-L[1]),d[1][0]>d[0][1]&&(L[2]=-L[2]),!0};function y(b,M,_){var T=M[0],w=M[1],v=M[2],L=M[3];return b[0]=_[0]*T+_[4]*w+_[8]*v+_[12]*L,b[1]=_[1]*T+_[5]*w+_[9]*v+_[13]*L,b[2]=_[2]*T+_[6]*w+_[10]*v+_[14]*L,b[3]=_[3]*T+_[7]*w+_[11]*v+_[15]*L,b}function g(b,M){b[0][0]=M[0],b[0][1]=M[1],b[0][2]=M[2],b[1][0]=M[4],b[1][1]=M[5],b[1][2]=M[6],b[2][0]=M[8],b[2][1]=M[9],b[2][2]=M[10]}function A(b,M,_,T,w){b[0]=M[0]*T+_[0]*w,b[1]=M[1]*T+_[1]*w,b[2]=M[2]*T+_[2]*w}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(s,m,x){m.exports=function(i,a){var r=a[15];if(r===0)return!1;for(var n=1/r,f=0;f<16;f++)i[f]=a[f]*n;return!0}},{}],243:[function(s,m,x){var t=s("gl-vec3/lerp"),i=s("mat4-recompose"),a=s("mat4-decompose"),r=s("gl-mat4/determinant"),n=s("quat-slerp"),f=h(),l=h(),o=h();m.exports=c;function c(y,g,A,b){if(r(g)===0||r(A)===0)return!1;var M=a(g,f.translate,f.scale,f.skew,f.perspective,f.quaternion),_=a(A,l.translate,l.scale,l.skew,l.perspective,l.quaternion);return!M||!_?!1:(t(o.translate,f.translate,l.translate,b),t(o.skew,f.skew,l.skew,b),t(o.scale,f.scale,l.scale,b),t(o.perspective,f.perspective,l.perspective,b),n(o.quaternion,f.quaternion,l.quaternion,b),i(y,o.translate,o.scale,o.skew,o.perspective,o.quaternion),!0)}function h(){return{translate:d(),scale:d(1),skew:d(),perspective:p(),quaternion:p()}}function d(y){return[y||0,y||0,y||0]}function p(){return[0,0,0,1]}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(s,m,x){var t={identity:s("gl-mat4/identity"),translate:s("gl-mat4/translate"),multiply:s("gl-mat4/multiply"),create:s("gl-mat4/create"),scale:s("gl-mat4/scale"),fromRotationTranslation:s("gl-mat4/fromRotationTranslation")};t.create();var i=t.create();m.exports=function(r,n,f,l,o,c){return t.identity(r),t.fromRotationTranslation(r,c,n),r[3]=o[0],r[7]=o[1],r[11]=o[2],r[15]=o[3],t.identity(i),l[2]!==0&&(i[9]=l[2],t.multiply(r,r,i)),l[1]!==0&&(i[9]=0,i[8]=l[1],t.multiply(r,r,i)),l[0]!==0&&(i[8]=0,i[4]=l[0],t.multiply(r,r,i)),t.scale(r,r,f),r}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(s,m,x){var t=s("binary-search-bounds"),i=s("mat4-interpolate"),a=s("gl-mat4/invert"),r=s("gl-mat4/rotateX"),n=s("gl-mat4/rotateY"),f=s("gl-mat4/rotateZ"),l=s("gl-mat4/lookAt"),o=s("gl-mat4/translate");s("gl-mat4/scale");var c=s("gl-vec3/normalize"),h=[0,0,0];m.exports=g;function d(A){this._components=A.slice(),this._time=[0],this.prevMatrix=A.slice(),this.nextMatrix=A.slice(),this.computedMatrix=A.slice(),this.computedInverse=A.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}var p=d.prototype;p.recalcMatrix=function(A){var b=this._time,M=t.le(b,A),_=this.computedMatrix;if(!(M<0)){var T=this._components;if(M===b.length-1)for(var w=16*M,v=0;v<16;++v)_[v]=T[w++];else{for(var L=b[M+1]-b[M],w=16*M,S=this.prevMatrix,k=!0,v=0;v<16;++v)S[v]=T[w++];for(var P=this.nextMatrix,v=0;v<16;++v)P[v]=T[w++],k=k&&S[v]===P[v];if(L<1e-6||k)for(var v=0;v<16;++v)_[v]=S[v];else i(_,S,P,(A-b[M])/L)}var O=this.computedUp;O[0]=_[1],O[1]=_[5],O[2]=_[9],c(O,O);var F=this.computedInverse;a(F,_);var I=this.computedEye,D=F[15];I[0]=F[12]/D,I[1]=F[13]/D,I[2]=F[14]/D;for(var U=this.computedCenter,B=Math.exp(this.computedRadius[0]),v=0;v<3;++v)U[v]=I[v]-_[2+4*v]*B}},p.idle=function(A){if(!(A<this.lastT())){for(var b=this._components,M=b.length-16,_=0;_<16;++_)b.push(b[M++]);this._time.push(A)}},p.flush=function(A){var b=t.gt(this._time,A)-2;b<0||(this._time.splice(0,b),this._components.splice(0,16*b))},p.lastT=function(){return this._time[this._time.length-1]},p.lookAt=function(A,b,M,_){this.recalcMatrix(A),b=b||this.computedEye,M=M||h,_=_||this.computedUp,this.setMatrix(A,l(this.computedMatrix,b,M,_));for(var T=0,w=0;w<3;++w)T+=Math.pow(M[w]-b[w],2);T=Math.log(Math.sqrt(T)),this.computedRadius[0]=T},p.rotate=function(A,b,M,_){this.recalcMatrix(A);var T=this.computedInverse;b&&n(T,T,b),M&&r(T,T,M),_&&f(T,T,_),this.setMatrix(A,a(this.computedMatrix,T))};var y=[0,0,0];p.pan=function(A,b,M,_){y[0]=-(b||0),y[1]=-(M||0),y[2]=-(_||0),this.recalcMatrix(A);var T=this.computedInverse;o(T,T,y),this.setMatrix(A,a(T,T))},p.translate=function(A,b,M,_){y[0]=b||0,y[1]=M||0,y[2]=_||0,this.recalcMatrix(A);var T=this.computedMatrix;o(T,T,y),this.setMatrix(A,T)},p.setMatrix=function(A,b){if(!(A<this.lastT())){this._time.push(A);for(var M=0;M<16;++M)this._components.push(b[M])}},p.setDistance=function(A,b){this.computedRadius[0]=b},p.setDistanceLimits=function(A,b){var M=this._limits;M[0]=A,M[1]=b},p.getDistanceLimits=function(A){var b=this._limits;return A?(A[0]=b[0],A[1]=b[1],A):b};function g(A){A=A||{};var b=A.matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return new d(b)}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(s,m,x){m.exports=i;var t=s("robust-orientation")[3];function i(a){var r=a.length;if(r<3){for(var p=new Array(r),n=0;n<r;++n)p[n]=n;return r===2&&a[0][0]===a[1][0]&&a[0][1]===a[1][1]?[0]:p}for(var f=new Array(r),n=0;n<r;++n)f[n]=n;f.sort(function(b,M){var _=a[b][0]-a[M][0];return _||a[b][1]-a[M][1]});for(var l=[f[0],f[1]],o=[f[0],f[1]],n=2;n<r;++n){for(var c=f[n],h=a[c],d=l.length;d>1&&t(a[l[d-2]],a[l[d-1]],h)<=0;)d-=1,l.pop();for(l.push(c),d=o.length;d>1&&t(a[o[d-2]],a[o[d-1]],h)>=0;)d-=1,o.pop();o.push(c)}for(var p=new Array(o.length+l.length-2),y=0,n=0,g=l.length;n<g;++n)p[y++]=l[n];for(var A=o.length-2;A>0;--A)p[y++]=o[A];return p}},{"robust-orientation":284}],247:[function(s,m,x){m.exports=i;var t=s("mouse-event");function i(a,r){r||(r=a,a=window);var n=0,f=0,l=0,o={shift:!1,alt:!1,control:!1,meta:!1},c=!1;function h(v){var L=!1;return"altKey"in v&&(L=L||v.altKey!==o.alt,o.alt=!!v.altKey),"shiftKey"in v&&(L=L||v.shiftKey!==o.shift,o.shift=!!v.shiftKey),"ctrlKey"in v&&(L=L||v.ctrlKey!==o.control,o.control=!!v.ctrlKey),"metaKey"in v&&(L=L||v.metaKey!==o.meta,o.meta=!!v.metaKey),L}function d(v,L){var S=t.x(L),k=t.y(L);"buttons"in L&&(v=L.buttons|0),(v!==n||S!==f||k!==l||h(L))&&(n=v|0,f=S||0,l=k||0,r&&r(n,f,l,o))}function p(v){d(0,v)}function y(){(n||f||l||o.shift||o.alt||o.meta||o.control)&&(f=l=0,n=0,o.shift=o.alt=o.control=o.meta=!1,r&&r(0,0,0,o))}function g(v){h(v)&&r&&r(n,f,l,o)}function A(v){t.buttons(v)===0?d(0,v):d(n,v)}function b(v){d(n|t.buttons(v),v)}function M(v){d(n&~t.buttons(v),v)}function _(){c||(c=!0,a.addEventListener("mousemove",A),a.addEventListener("mousedown",b),a.addEventListener("mouseup",M),a.addEventListener("mouseleave",p),a.addEventListener("mouseenter",p),a.addEventListener("mouseout",p),a.addEventListener("mouseover",p),a.addEventListener("blur",y),a.addEventListener("keyup",g),a.addEventListener("keydown",g),a.addEventListener("keypress",g),a!==window&&(window.addEventListener("blur",y),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}function T(){!c||(c=!1,a.removeEventListener("mousemove",A),a.removeEventListener("mousedown",b),a.removeEventListener("mouseup",M),a.removeEventListener("mouseleave",p),a.removeEventListener("mouseenter",p),a.removeEventListener("mouseout",p),a.removeEventListener("mouseover",p),a.removeEventListener("blur",y),a.removeEventListener("keyup",g),a.removeEventListener("keydown",g),a.removeEventListener("keypress",g),a!==window&&(window.removeEventListener("blur",y),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))}_();var w={element:a};return Object.defineProperties(w,{enabled:{get:function(){return c},set:function(v){v?_():T()},enumerable:!0},buttons:{get:function(){return n},enumerable:!0},x:{get:function(){return f},enumerable:!0},y:{get:function(){return l},enumerable:!0},mods:{get:function(){return o},enumerable:!0}}),w}},{"mouse-event":249}],248:[function(s,m,x){var t={left:0,top:0};m.exports=i;function i(r,n,f){n=n||r.currentTarget||r.srcElement,Array.isArray(f)||(f=[0,0]);var l=r.clientX||0,o=r.clientY||0,c=a(n);return f[0]=l-c.left,f[1]=o-c.top,f}function a(r){return r===window||r===document||r===document.body?t:r.getBoundingClientRect()}},{}],249:[function(s,m,x){function t(n){if(typeof n=="object"){if("buttons"in n)return n.buttons;if("which"in n){var f=n.which;if(f===2)return 4;if(f===3)return 2;if(f>0)return 1<<f-1}else if("button"in n){var f=n.button;if(f===1)return 4;if(f===2)return 2;if(f>=0)return 1<<f}}return 0}x.buttons=t;function i(n){return n.target||n.srcElement||window}x.element=i;function a(n){if(typeof n=="object"){if("offsetX"in n)return n.offsetX;var f=i(n),l=f.getBoundingClientRect();return n.clientX-l.left}return 0}x.x=a;function r(n){if(typeof n=="object"){if("offsetY"in n)return n.offsetY;var f=i(n),l=f.getBoundingClientRect();return n.clientY-l.top}return 0}x.y=r},{}],250:[function(s,m,x){var t=s("to-px");m.exports=i;function i(a,r,n){typeof a=="function"&&(n=!!r,r=a,a=window);var f=t("ex",a),l=function(o){n&&o.preventDefault();var c=o.deltaX||0,h=o.deltaY||0,d=o.deltaZ||0,p=o.deltaMode,y=1;switch(p){case 1:y=f;break;case 2:y=window.innerHeight;break}if(c*=y,h*=y,d*=y,c||h||d)return r(c,h,d,o)};return a.addEventListener("wheel",l),l}},{"to-px":304}],251:[function(s,m,x){var t=s("typedarray-pool");m.exports=r;var i={"false,0,1":function(f,l,o,c,h){return function(p,y,g,A){var b=p.shape[0]|0,M=p.shape[1]|0,_=p.data,T=p.offset|0,w=p.stride[0]|0,v=p.stride[1]|0,L=T,S,k=-w|0,P=0,O=-v|0,F=0,I=-w-v|0,D=0,U=w|0,B=v-w*b|0,j=0,Z=0,ee=0,q=2*b|0,W=c(q),J=c(q),le=0,fe=0,se=-1|0,H=-1|0,Y=0,ne=-b|0,te=b|0,K=0,$=-b-1|0,ae=b-1|0,ie=0,oe=0,ue=0;for(j=0;j<b;++j)W[le++]=o(_[L],y,g,A),L+=U;if(L+=B,M>0){if(Z=1,W[le++]=o(_[L],y,g,A),L+=U,b>0)for(j=1,S=_[L],fe=W[le]=o(S,y,g,A),Y=W[le+se],K=W[le+ne],ie=W[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,Y,K,ie,y,g,A),oe=J[le]=ee++),le+=1,L+=U,j=2;j<b;++j)S=_[L],fe=W[le]=o(S,y,g,A),Y=W[le+se],K=W[le+ne],ie=W[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,Y,K,ie,y,g,A),oe=J[le]=ee++,ie!==Y&&l(J[le+se],oe,D,P,ie,Y,y,g,A)),le+=1,L+=U;for(L+=B,le=0,ue=se,se=H,H=ue,ue=ne,ne=te,te=ue,ue=$,$=ae,ae=ue,Z=2;Z<M;++Z){if(W[le++]=o(_[L],y,g,A),L+=U,b>0)for(j=1,S=_[L],fe=W[le]=o(S,y,g,A),Y=W[le+se],K=W[le+ne],ie=W[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,Y,K,ie,y,g,A),oe=J[le]=ee++,ie!==K&&l(J[le+ne],oe,F,D,K,ie,y,g,A)),le+=1,L+=U,j=2;j<b;++j)S=_[L],fe=W[le]=o(S,y,g,A),Y=W[le+se],K=W[le+ne],ie=W[le+$],(fe!==Y||fe!==K||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,Y,K,ie,y,g,A),oe=J[le]=ee++,ie!==K&&l(J[le+ne],oe,F,D,K,ie,y,g,A),ie!==Y&&l(J[le+se],oe,D,P,ie,Y,y,g,A)),le+=1,L+=U;Z&1&&(le=0),ue=se,se=H,H=ue,ue=ne,ne=te,te=ue,ue=$,$=ae,ae=ue,L+=B}}h(J),h(W)}},"false,1,0":function(f,l,o,c,h){return function(p,y,g,A){var b=p.shape[0]|0,M=p.shape[1]|0,_=p.data,T=p.offset|0,w=p.stride[0]|0,v=p.stride[1]|0,L=T,S,k=-w|0,P=0,O=-v|0,F=0,I=-w-v|0,D=0,U=v|0,B=w-v*M|0,j=0,Z=0,ee=0,q=2*M|0,W=c(q),J=c(q),le=0,fe=0,se=-1|0,H=-1|0,Y=0,ne=-M|0,te=M|0,K=0,$=-M-1|0,ae=M-1|0,ie=0,oe=0,ue=0;for(Z=0;Z<M;++Z)W[le++]=o(_[L],y,g,A),L+=U;if(L+=B,b>0){if(j=1,W[le++]=o(_[L],y,g,A),L+=U,M>0)for(Z=1,S=_[L],fe=W[le]=o(S,y,g,A),K=W[le+ne],Y=W[le+se],ie=W[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,K,Y,ie,y,g,A),oe=J[le]=ee++),le+=1,L+=U,Z=2;Z<M;++Z)S=_[L],fe=W[le]=o(S,y,g,A),K=W[le+ne],Y=W[le+se],ie=W[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,K,Y,ie,y,g,A),oe=J[le]=ee++,ie!==Y&&l(J[le+se],oe,F,D,Y,ie,y,g,A)),le+=1,L+=U;for(L+=B,le=0,ue=ne,ne=te,te=ue,ue=se,se=H,H=ue,ue=$,$=ae,ae=ue,j=2;j<b;++j){if(W[le++]=o(_[L],y,g,A),L+=U,M>0)for(Z=1,S=_[L],fe=W[le]=o(S,y,g,A),K=W[le+ne],Y=W[le+se],ie=W[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,K,Y,ie,y,g,A),oe=J[le]=ee++,ie!==K&&l(J[le+ne],oe,D,P,ie,K,y,g,A)),le+=1,L+=U,Z=2;Z<M;++Z)S=_[L],fe=W[le]=o(S,y,g,A),K=W[le+ne],Y=W[le+se],ie=W[le+$],(fe!==K||fe!==Y||fe!==ie)&&(P=_[L+k],F=_[L+O],D=_[L+I],f(j,Z,S,P,F,D,fe,K,Y,ie,y,g,A),oe=J[le]=ee++,ie!==Y&&l(J[le+se],oe,F,D,Y,ie,y,g,A),ie!==K&&l(J[le+ne],oe,D,P,ie,K,y,g,A)),le+=1,L+=U;j&1&&(le=0),ue=ne,ne=te,te=ue,ue=se,se=H,H=ue,ue=$,$=ae,ae=ue,L+=B}}h(J),h(W)}}};function a(n,f,l,o,c,h){var d=[h,c].join(","),p=i[d];return p(n,f,l,t.mallocUint32,t.freeUint32)}function r(n){function f(y){throw new Error("ndarray-extract-contour: "+y)}typeof n!="object"&&f("Must specify arguments");var l=n.order;Array.isArray(l)||f("Must specify order");var o=n.arrayArguments||1;o<1&&f("Must have at least one array argument");var c=n.scalarArguments||0;c<0&&f("Scalar arg count must be > 0"),typeof n.vertex!="function"&&f("Must specify vertex creation function"),typeof n.cell!="function"&&f("Must specify cell creation function"),typeof n.phase!="function"&&f("Must specify phase function");for(var h=n.getters||[],d=new Array(o),p=0;p<o;++p)h.indexOf(p)>=0?d[p]=!0:d[p]=!1;return a(n.vertex,n.cell,n.phase,c,l,d)}},{"typedarray-pool":308}],252:[function(s,m,x){var t=s("dup"),i={zero:function(g,A,b,M){var _=g[0],T=b[0];M|=0;var w=0,v=T;for(w=0;w<_;++w)A[M]=0,M+=v},fdTemplate1:function(g,A,b,M,_,T,w){var v=g[0],L=b[0],S=T[0],k=-1*L,P=L;M|=0,w|=0;var O=0,F=L,I=S;for(O=0;O<v;++O)_[w]=.5*(A[M+k]-A[M+P]),M+=F,w+=I},fdTemplate2:function(g,A,b,M,_,T,w,v,L,S){var k=g[0],P=g[1],O=b[0],F=b[1],I=T[0],D=T[1],U=L[0],B=L[1],j=-1*O,Z=O,ee=-1*F,q=F;M|=0,w|=0,S|=0;var W=0,J=0,le=F,fe=O-P*F,se=D,H=I-P*D,Y=B,ne=U-P*B;for(J=0;J<k;++J){for(W=0;W<P;++W)_[w]=.5*(A[M+j]-A[M+Z]),v[S]=.5*(A[M+ee]-A[M+q]),M+=le,w+=se,S+=Y;M+=fe,w+=H,S+=ne}}},a={cdiff:function(g){var A={};return function(M,_,T){var w=M.dtype,v=M.order,L=_.dtype,S=_.order,k=T.dtype,P=T.order,O=[w,v.join(),L,S.join(),k,P.join()].join(),F=A[O];return F||(A[O]=F=g([w,v,L,S,k,P])),F(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0,T.data,T.stride,T.offset|0)}},zero:function(g){var A={};return function(M){var _=M.dtype,T=M.order,w=[_,T.join()].join(),v=A[w];return v||(A[w]=v=g([_,T])),v(M.shape.slice(0),M.data,M.stride,M.offset|0)}},fdTemplate1:function(g){var A={};return function(M,_){var T=M.dtype,w=M.order,v=_.dtype,L=_.order,S=[T,w.join(),v,L.join()].join(),k=A[S];return k||(A[S]=k=g([T,w,v,L])),k(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0)}},fdTemplate2:function(g){var A={};return function(M,_,T){var w=M.dtype,v=M.order,L=_.dtype,S=_.order,k=T.dtype,P=T.order,O=[w,v.join(),L,S.join(),k,P.join()].join(),F=A[O];return F||(A[O]=F=g([w,v,L,S,k,P])),F(M.shape.slice(0),M.data,M.stride,M.offset|0,_.data,_.stride,_.offset|0,T.data,T.stride,T.offset|0)}}};function r(g){var A=a[g.funcName];return A(n.bind(void 0,g))}function n(g){return i[g.funcName]}function f(g){return r({funcName:g.funcName})}var l={},o={},c=f({funcName:"cdiff"}),h=f({funcName:"zero"});function d(g){return g in l?l[g]:l[g]=f({funcName:"fdTemplate"+g})}function p(g,A,b,M){return function(_,T){var w=T.shape.slice();return w[0]>2&&w[1]>2&&M(T.pick(-1,-1).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,0).lo(1,1).hi(w[0]-2,w[1]-2),_.pick(-1,-1,1).lo(1,1).hi(w[0]-2,w[1]-2)),w[1]>2&&(b(T.pick(0,-1).lo(1).hi(w[1]-2),_.pick(0,-1,1).lo(1).hi(w[1]-2)),A(_.pick(0,-1,0).lo(1).hi(w[1]-2))),w[1]>2&&(b(T.pick(w[0]-1,-1).lo(1).hi(w[1]-2),_.pick(w[0]-1,-1,1).lo(1).hi(w[1]-2)),A(_.pick(w[0]-1,-1,0).lo(1).hi(w[1]-2))),w[0]>2&&(b(T.pick(-1,0).lo(1).hi(w[0]-2),_.pick(-1,0,0).lo(1).hi(w[0]-2)),A(_.pick(-1,0,1).lo(1).hi(w[0]-2))),w[0]>2&&(b(T.pick(-1,w[1]-1).lo(1).hi(w[0]-2),_.pick(-1,w[1]-1,0).lo(1).hi(w[0]-2)),A(_.pick(-1,w[1]-1,1).lo(1).hi(w[0]-2))),_.set(0,0,0,0),_.set(0,0,1,0),_.set(w[0]-1,0,0,0),_.set(w[0]-1,0,1,0),_.set(0,w[1]-1,0,0),_.set(0,w[1]-1,1,0),_.set(w[0]-1,w[1]-1,0,0),_.set(w[0]-1,w[1]-1,1,0),_}}function y(g){var A=g.join(),b=o[A];if(b)return b;for(var M=g.length,_=[c,h],T=1;T<=M;++T)_.push(d(T));var w=p,b=w.apply(void 0,_);return o[A]=b,b}m.exports=function(A,b,M){if(Array.isArray(M)||(typeof M=="string"?M=t(b.dimension,M):M=t(b.dimension,"clamp")),b.size===0)return A;if(b.dimension===0)return A.set(0),A;var _=y(M);return _(A,b)}},{dup:65}],253:[function(s,m,x){function t(f,l){var o=Math.floor(l),c=l-o,h=0<=o&&o<f.shape[0],d=0<=o+1&&o+1<f.shape[0],p=h?+f.get(o):0,y=d?+f.get(o+1):0;return(1-c)*p+c*y}function i(f,l,o){var c=Math.floor(l),h=l-c,d=0<=c&&c<f.shape[0],p=0<=c+1&&c+1<f.shape[0],y=Math.floor(o),g=o-y,A=0<=y&&y<f.shape[1],b=0<=y+1&&y+1<f.shape[1],M=d&&A?f.get(c,y):0,_=d&&b?f.get(c,y+1):0,T=p&&A?f.get(c+1,y):0,w=p&&b?f.get(c+1,y+1):0;return(1-g)*((1-h)*M+h*T)+g*((1-h)*_+h*w)}function a(f,l,o,c){var h=Math.floor(l),d=l-h,p=0<=h&&h<f.shape[0],y=0<=h+1&&h+1<f.shape[0],g=Math.floor(o),A=o-g,b=0<=g&&g<f.shape[1],M=0<=g+1&&g+1<f.shape[1],_=Math.floor(c),T=c-_,w=0<=_&&_<f.shape[2],v=0<=_+1&&_+1<f.shape[2],L=p&&b&&w?f.get(h,g,_):0,S=p&&M&&w?f.get(h,g+1,_):0,k=y&&b&&w?f.get(h+1,g,_):0,P=y&&M&&w?f.get(h+1,g+1,_):0,O=p&&b&&v?f.get(h,g,_+1):0,F=p&&M&&v?f.get(h,g+1,_+1):0,I=y&&b&&v?f.get(h+1,g,_+1):0,D=y&&M&&v?f.get(h+1,g+1,_+1):0;return(1-T)*((1-A)*((1-d)*L+d*k)+A*((1-d)*S+d*P))+T*((1-A)*((1-d)*O+d*I)+A*((1-d)*F+d*D))}function r(f){var l=f.shape.length|0,o=new Array(l),c=new Array(l),h=new Array(l),d=new Array(l),p,y;for(p=0;p<l;++p)y=+arguments[p+1],o[p]=Math.floor(y),c[p]=y-o[p],h[p]=0<=o[p]&&o[p]<f.shape[p],d[p]=0<=o[p]+1&&o[p]+1<f.shape[p];var g=0,A,b,M;e:for(p=0;p<1<<l;++p){for(b=1,M=f.offset,A=0;A<l;++A)if(p&1<<A){if(!d[A])continue e;b*=c[A],M+=f.stride[A]*(o[A]+1)}else{if(!h[A])continue e;b*=1-c[A],M+=f.stride[A]*o[A]}g+=b*f.data[M]}return g}function n(f,l,o,c){switch(f.shape.length){case 0:return 0;case 1:return t(f,l);case 2:return i(f,l,o);case 3:return a(f,l,o,c);default:return r.apply(void 0,arguments)}}m.exports=n,m.exports.d1=t,m.exports.d2=i,m.exports.d3=a},{}],254:[function(s,m,x){var t={"float64,2,1,0":function(){return function(c,h,d,p,y){var g=c[0],A=c[1],b=c[2],M=d[0],_=d[1],T=d[2];p|=0;var w=0,v=0,L=0,S=T,k=_-b*T,P=M-A*_;for(L=0;L<g;++L){for(v=0;v<A;++v){for(w=0;w<b;++w)h[p]/=y,p+=S;p+=k}p+=P}}},"uint8,2,0,1,float64,2,1,0":function(){return function(c,h,d,p,y,g,A,b){var M=c[0],_=c[1],T=c[2],w=d[0],v=d[1],L=d[2],S=g[0],k=g[1],P=g[2];p|=0,A|=0;for(var O=p,F=A,I=c[0]|0;I>0;){I<64?(M=I,I=0):(M=64,I-=64);for(var D=c[1]|0;D>0;){D<64?(_=D,D=0):(_=64,D-=64),p=O+I*w+D*v,A=F+I*S+D*k;var U=0,B=0,j=0,Z=L,ee=w-T*L,q=v-M*w,W=P,J=S-T*P,le=k-M*S;for(j=0;j<_;++j){for(B=0;B<M;++B){for(U=0;U<T;++U)h[p]=y[A]*b,p+=Z,A+=W;p+=ee,A+=J}p+=q,A+=le}}}}},"float32,1,0,float32,1,0":function(){return function(c,h,d,p,y,g,A){var b=c[0],M=c[1],_=d[0],T=d[1],w=g[0],v=g[1];p|=0,A|=0;var L=0,S=0,k=T,P=_-M*T,O=v,F=w-M*v;for(S=0;S<b;++S){for(L=0;L<M;++L)h[p]=y[A],p+=k,A+=O;p+=P,A+=F}}},"float32,1,0,float32,0,1":function(){return function(c,h,d,p,y,g,A){var b=c[0],M=c[1],_=d[0],T=d[1],w=g[0],v=g[1];p|=0,A|=0;for(var L=p,S=A,k=c[1]|0;k>0;){k<64?(M=k,k=0):(M=64,k-=64);for(var P=c[0]|0;P>0;){P<64?(b=P,P=0):(b=64,P-=64),p=L+k*T+P*_,A=S+k*v+P*w;var O=0,F=0,I=T,D=_-M*T,U=v,B=w-M*v;for(F=0;F<b;++F){for(O=0;O<M;++O)h[p]=y[A],p+=I,A+=U;p+=D,A+=B}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(c,h,d,p,y,g,A){var b=c[0],M=c[1],_=c[2],T=d[0],w=d[1],v=d[2],L=g[0],S=g[1],k=g[2];p|=0,A|=0;for(var P=p,O=A,F=c[2]|0;F>0;){F<64?(_=F,F=0):(_=64,F-=64);for(var I=c[0]|0;I>0;){I<64?(b=I,I=0):(b=64,I-=64);for(var D=c[1]|0;D>0;){D<64?(M=D,D=0):(M=64,D-=64),p=P+F*v+I*T+D*w,A=O+F*k+I*L+D*S;var U=0,B=0,j=0,Z=v,ee=T-_*v,q=w-b*T,W=k,J=L-_*k,le=S-b*L;for(j=0;j<M;++j){for(B=0;B<b;++B){for(U=0;U<_;++U)h[p]=y[A],p+=Z,A+=W;p+=ee,A+=J}p+=q,A+=le}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(c,h,d,p,y,g,A){var b=c[0],M=c[1],_=c[2],T=d[0],w=d[1],v=d[2],L=g[0],S=g[1],k=g[2];p|=0,A|=0;var P=0,O=0,F=0,I=v,D=T-_*v,U=w-b*T,B=k,j=L-_*k,Z=S-b*L;for(F=0;F<M;++F){for(O=0;O<b;++O){for(P=0;P<_;++P)h[p]=y[A],p+=I,A+=B;p+=D,A+=j}p+=U,A+=Z}}}};function i(o,c){var h=c.join(","),d=t[h];return d()}var a=i,r={mul:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,_=y.dtype,T=y.order,w=[g,A.join(),b,M.join(),_,T.join()].join(),v=c[w];return v||(c[w]=v=o([g,A,b,M,_,T])),v(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y.data,y.stride,y.offset|0)}},muls:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,_=[g,A.join(),b,M.join()].join(),T=c[_];return T||(c[_]=T=o([g,A,b,M])),T(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y)}},mulseq:function(o){var c={};return function(d,p){var y=d.dtype,g=d.order,A=[y,g.join()].join(),b=c[A];return b||(c[A]=b=o([y,g])),b(d.shape.slice(0),d.data,d.stride,d.offset|0,p)}},div:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,_=y.dtype,T=y.order,w=[g,A.join(),b,M.join(),_,T.join()].join(),v=c[w];return v||(c[w]=v=o([g,A,b,M,_,T])),v(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y.data,y.stride,y.offset|0)}},divs:function(o){var c={};return function(d,p,y){var g=d.dtype,A=d.order,b=p.dtype,M=p.order,_=[g,A.join(),b,M.join()].join(),T=c[_];return T||(c[_]=T=o([g,A,b,M])),T(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0,y)}},divseq:function(o){var c={};return function(d,p){var y=d.dtype,g=d.order,A=[y,g.join()].join(),b=c[A];return b||(c[A]=b=o([y,g])),b(d.shape.slice(0),d.data,d.stride,d.offset|0,p)}},assign:function(o){var c={};return function(d,p){var y=d.dtype,g=d.order,A=p.dtype,b=p.order,M=[y,g.join(),A,b.join()].join(),_=c[M];return _||(c[M]=_=o([y,g,A,b])),_(d.shape.slice(0),d.data,d.stride,d.offset|0,p.data,p.stride,p.offset|0)}}};function n(o){var c=r[o.funcName];return c(a.bind(void 0,o))}function f(o){return n({funcName:o.funcName})}var l={mul:"*",div:"/"};(function(){for(var o in l)x[o]=f({funcName:o}),x[o+"s"]=f({funcName:o+"s"}),x[o+"seq"]=f({funcName:o+"seq"})})(),x.assign=f({funcName:"assign"})},{}],255:[function(s,m,x){var t=s("ndarray"),i=s("./doConvert.js");m.exports=function(r,n){for(var f=[],l=r,o=1;Array.isArray(l);)f.push(l.length),o*=l.length,l=l[0];return f.length===0?t():(n||(n=t(new Float64Array(o),f)),i(n,r),n)}},{"./doConvert.js":256,ndarray:259}],256:[function(s,m,x){function t(){return function(l,o,c,h,d){var p=l[0],y=l[1],g=l[2],A=c[0],b=c[1],M=c[2],_=[0,0,0];h|=0;var T=0,w=0,v=0,L=M,S=b-g*M,k=A-y*b;for(v=0;v<p;++v){for(w=0;w<y;++w){for(T=0;T<g;++T){{var P=d,O;for(O=0;O<_.length-1;++O)P=P[_[O]];o[h]=P[_[_.length-1]]}h+=L,++_[2]}h+=S,_[2]-=g,++_[1]}h+=k,_[1]-=y,++_[0]}}}function i(){return t()}var a=i;function r(l){var o={};return function(h,d){var p=h.dtype,y=h.order,g=[p,y.join()].join(),A=o[g];return A||(o[g]=A=l([p,y])),A(h.shape.slice(0),h.data,h.stride,h.offset|0,d)}}function n(l){return r(a.bind(void 0,l))}function f(l){return n({funcName:l.funcName})}m.exports=f({funcName:"convert"})},{}],257:[function(s,m,x){var t=s("typedarray-pool");function i(c){switch(c){case"uint32":return[t.mallocUint32,t.freeUint32];default:return null}}var a={"uint32,1,0":function(c,h){return function(p,y,g,A,b,M,_,T,w,v,L){var S,k,P,O=p*b+A,F,I=c(T),D,U,B,j;for(S=p+1;S<=y;++S){for(k=S,O+=b,P=O,D=0,U=O,F=0;F<T;++F)I[D++]=g[U],U+=w;e:for(;k-- >p;){D=0,U=P-b;t:for(F=0;F<T;++F){if(B=g[U],j=I[D],B<j)break e;if(B>j)break t;U+=v,D+=L}for(D=P,U=P-b,F=0;F<T;++F)g[D]=g[U],D+=w,U+=w;P-=b}for(D=P,U=0,F=0;F<T;++F)g[D]=I[U++],D+=w}h(I)}}};function r(c,h){var d=i(h),p=[h,c].join(","),y=a[p];return d?y(d[0],d[1]):y()}var n={"uint32,1,0":function(c,h,d){return function p(y,g,A,b,M,_,T,w,v,L,S){var k=(g-y+1)/6|0,P=y+k,O=g-k,F=y+g>>1,I=F-k,D=F+k,U=P,B=I,j=F,Z=D,ee=O,q=y+1,W=g-1,J=!0,le,fe,se,H,Y,ne,te,K,$,ae=0,ie=0,oe=0,ue,ye,ce,me,xe,ke,Ae,Oe,He,Ge,_e,Re,We,qe,Ue,Ie,Ve=w,dt=h(Ve),Rt=h(Ve);ye=M*U,ce=M*B,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=U,U=B,B=fe;break e}if(oe<0)break e;Ie+=L}ye=M*Z,ce=M*ee,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=Z,Z=ee,ee=fe;break e}if(oe<0)break e;Ie+=L}ye=M*U,ce=M*j,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=U,U=j,j=fe;break e}if(oe<0)break e;Ie+=L}ye=M*B,ce=M*j,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=B,B=j,j=fe;break e}if(oe<0)break e;Ie+=L}ye=M*U,ce=M*Z,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=U,U=Z,Z=fe;break e}if(oe<0)break e;Ie+=L}ye=M*j,ce=M*Z,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=j,j=Z,Z=fe;break e}if(oe<0)break e;Ie+=L}ye=M*B,ce=M*ee,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=B,B=ee,ee=fe;break e}if(oe<0)break e;Ie+=L}ye=M*B,ce=M*j,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=B,B=j,j=fe;break e}if(oe<0)break e;Ie+=L}ye=M*Z,ce=M*ee,Ie=b;e:for(ue=0;ue<w;++ue){if(te=ye+Ie,K=ce+Ie,oe=A[te]-A[K],oe>0){fe=Z,Z=ee,ee=fe;break e}if(oe<0)break e;Ie+=L}for(ye=M*U,ce=M*B,me=M*j,xe=M*Z,ke=M*ee,Ae=M*P,Oe=M*F,He=M*O,Ue=0,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,$=me+Ie,Ge=xe+Ie,_e=ke+Ie,Re=Ae+Ie,We=Oe+Ie,qe=He+Ie,dt[Ue]=A[K],Rt[Ue]=A[Ge],J=J&&dt[Ue]===Rt[Ue],se=A[te],H=A[$],Y=A[_e],A[Re]=se,A[We]=H,A[qe]=Y,++Ue,Ie+=v;for(ye=M*I,ce=M*y,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,A[te]=A[K],Ie+=v;for(ye=M*D,ce=M*g,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,A[te]=A[K],Ie+=v;if(J)for(ne=q;ne<=W;++ne){te=b+ne*M,Ue=0;e:for(ue=0;ue<w;++ue){if(oe=A[te]-dt[Ue],oe!==0)break e;Ue+=S,te+=L}if(oe!==0)if(oe<0){if(ne!==q)for(ye=M*ne,ce=M*q,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,le=A[te],A[te]=A[K],A[K]=le,Ie+=v;++q}else for(;;){te=b+W*M,Ue=0;e:for(ue=0;ue<w;++ue){if(oe=A[te]-dt[Ue],oe!==0)break e;Ue+=S,te+=L}if(oe>0)W--;else if(oe<0){for(ye=M*ne,ce=M*q,me=M*W,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,$=me+Ie,le=A[te],A[te]=A[K],A[K]=A[$],A[$]=le,Ie+=v;++q,--W;break}else{for(ye=M*ne,ce=M*W,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,le=A[te],A[te]=A[K],A[K]=le,Ie+=v;--W;break}}}else for(ne=q;ne<=W;++ne){te=b+ne*M,Ue=0;e:for(ue=0;ue<w;++ue){if(ae=A[te]-dt[Ue],ae!==0)break e;Ue+=S,te+=L}if(ae<0){if(ne!==q)for(ye=M*ne,ce=M*q,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,le=A[te],A[te]=A[K],A[K]=le,Ie+=v;++q}else{te=b+ne*M,Ue=0;e:for(ue=0;ue<w;++ue){if(ie=A[te]-Rt[Ue],ie!==0)break e;Ue+=S,te+=L}if(ie>0)for(;;){te=b+W*M,Ue=0;e:for(ue=0;ue<w;++ue){if(oe=A[te]-Rt[Ue],oe!==0)break e;Ue+=S,te+=L}if(oe>0){if(--W<ne)break;continue}else{te=b+W*M,Ue=0;e:for(ue=0;ue<w;++ue){if(oe=A[te]-dt[Ue],oe!==0)break e;Ue+=S,te+=L}if(oe<0){for(ye=M*ne,ce=M*q,me=M*W,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,$=me+Ie,le=A[te],A[te]=A[K],A[K]=A[$],A[$]=le,Ie+=v;++q,--W}else{for(ye=M*ne,ce=M*W,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,le=A[te],A[te]=A[K],A[K]=le,Ie+=v;--W}break}}}}for(ye=M*y,ce=M*(q-1),Ue=0,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,A[te]=A[K],A[K]=dt[Ue],++Ue,Ie+=v;for(ye=M*g,ce=M*(W+1),Ue=0,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,A[te]=A[K],A[K]=Rt[Ue],++Ue,Ie+=v;if(q-2-y<=32?c(y,q-2,A,b,M,_,T,w,v,L,S):p(y,q-2,A,b,M,_,T,w,v,L,S),g-(W+2)<=32?c(W+2,g,A,b,M,_,T,w,v,L,S):p(W+2,g,A,b,M,_,T,w,v,L,S),J){d(dt),d(Rt);return}if(q<P&&W>O){e:for(;;){for(te=b+q*M,Ue=0,Ie=b,ue=0;ue<w;++ue){if(A[te]!==dt[Ue])break e;++Ue,te+=v}++q}e:for(;;){for(te=b+W*M,Ue=0,Ie=b,ue=0;ue<w;++ue){if(A[te]!==Rt[Ue])break e;++Ue,te+=v}--W}for(ne=q;ne<=W;++ne){te=b+ne*M,Ue=0;e:for(ue=0;ue<w;++ue){if(ae=A[te]-dt[Ue],ae!==0)break e;Ue+=S,te+=L}if(ae===0){if(ne!==q)for(ye=M*ne,ce=M*q,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,le=A[te],A[te]=A[K],A[K]=le,Ie+=v;++q}else{te=b+ne*M,Ue=0;e:for(ue=0;ue<w;++ue){if(ie=A[te]-Rt[Ue],ie!==0)break e;Ue+=S,te+=L}if(ie===0)for(;;){te=b+W*M,Ue=0;e:for(ue=0;ue<w;++ue){if(oe=A[te]-Rt[Ue],oe!==0)break e;Ue+=S,te+=L}if(oe===0){if(--W<ne)break;continue}else{te=b+W*M,Ue=0;e:for(ue=0;ue<w;++ue){if(oe=A[te]-dt[Ue],oe!==0)break e;Ue+=S,te+=L}if(oe<0){for(ye=M*ne,ce=M*q,me=M*W,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,$=me+Ie,le=A[te],A[te]=A[K],A[K]=A[$],A[$]=le,Ie+=v;++q,--W}else{for(ye=M*ne,ce=M*W,Ie=b,ue=0;ue<w;++ue)te=ye+Ie,K=ce+Ie,le=A[te],A[te]=A[K],A[K]=le,Ie+=v;--W}break}}}}}d(dt),d(Rt),W-q<=32?c(q,W,A,b,M,_,T,w,v,L,S):p(q,W,A,b,M,_,T,w,v,L,S)}}};function f(c,h,d){var p=i(h),y=[h,c].join(","),g=n[y];return c.length>1&&p?g(d,p[0],p[1]):g(d)}var l={"uint32,1,0":function(c,h){return function(d){var p=d.data,y=d.offset|0,g=d.shape,A=d.stride,b=A[0]|0,M=g[0]|0,_=A[1]|0,T=g[1]|0,w=_,v=_,L=1;M<=32?c(0,M-1,p,y,b,_,M,T,w,v,L):h(0,M-1,p,y,b,_,M,T,w,v,L)}}};function o(c,h){var d=[h,c].join(","),p=l[d],y=r(c,h),g=f(c,h,y);return p(y,g)}m.exports=o},{"typedarray-pool":308}],258:[function(s,m,x){var t=s("./lib/compile_sort.js"),i={};function a(r){var n=r.order,f=r.dtype,l=[n,f],o=l.join(":"),c=i[o];return c||(i[o]=c=t(n,f)),c(r),r}m.exports=a},{"./lib/compile_sort.js":257}],259:[function(s,m,x){var t=s("is-buffer"),i=typeof Float64Array!="undefined";function a(h,d){return h[0]-d[0]}function r(){var h=this.stride,d=new Array(h.length),p;for(p=0;p<d.length;++p)d[p]=[Math.abs(h[p]),p];d.sort(a);var y=new Array(d.length);for(p=0;p<y.length;++p)y[p]=d[p][1];return y}var n={T:function(h){function d(y){this.data=y}var p=d.prototype;return p.dtype=h,p.index=function(){return-1},p.size=0,p.dimension=-1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new d(this.data)},p.get=p.set=function(){},p.pick=function(){return null},function(g){return new d(g)}},0:function(h,d){function p(g,A){this.data=g,this.offset=A}var y=p.prototype;return y.dtype=h,y.index=function(){return this.offset},y.dimension=0,y.size=1,y.shape=y.stride=y.order=[],y.lo=y.hi=y.transpose=y.step=function(){return new p(this.data,this.offset)},y.pick=function(){return d(this.data)},y.valueOf=y.get=function(){return h==="generic"?this.data.get(this.offset):this.data[this.offset]},y.set=function(A){return h==="generic"?this.data.set(this.offset,A):this.data[this.offset]=A},function(A,b,M,_){return new p(A,_)}},1:function(h,d,p){function y(A,b,M,_){this.data=A,this.shape=[b],this.stride=[M],this.offset=_|0}var g=y.prototype;return g.dtype=h,g.dimension=1,Object.defineProperty(g,"size",{get:function(){return this.shape[0]}}),g.order=[0],g.set=function(b,M){return h==="generic"?this.data.set(this.offset+this.stride[0]*b,M):this.data[this.offset+this.stride[0]*b]=M},g.get=function(b){return h==="generic"?this.data.get(this.offset+this.stride[0]*b):this.data[this.offset+this.stride[0]*b]},g.index=function(b){return this.offset+this.stride[0]*b},g.hi=function(b){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,this.stride[0],this.offset)},g.lo=function(b){var M=this.offset,_=0,T=this.shape[0],w=this.stride[0];return typeof b=="number"&&b>=0&&(_=b|0,M+=w*_,T-=_),new y(this.data,T,w,M)},g.step=function(b){var M=this.shape[0],_=this.stride[0],T=this.offset,w=0,v=Math.ceil;return typeof b=="number"&&(w=b|0,w<0?(T+=_*(M-1),M=v(-M/w)):M=v(M/w),_*=w),new y(this.data,M,_,T)},g.transpose=function(b){b=b===void 0?0:b|0;var M=this.shape,_=this.stride;return new y(this.data,M[b],_[b],this.offset)},g.pick=function(b){var M=[],_=[],T=this.offset;typeof b=="number"&&b>=0?T=T+this.stride[0]*b|0:(M.push(this.shape[0]),_.push(this.stride[0]));var w=d[M.length+1];return w(this.data,M,_,T)},function(b,M,_,T){return new y(b,M[0],_[0],T)}},2:function(h,d,p){function y(A,b,M,_,T,w){this.data=A,this.shape=[b,M],this.stride=[_,T],this.offset=w|0}var g=y.prototype;return g.dtype=h,g.dimension=2,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(g,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),g.set=function(b,M,_){return h==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*M,_):this.data[this.offset+this.stride[0]*b+this.stride[1]*M]=_},g.get=function(b,M){return h==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*M):this.data[this.offset+this.stride[0]*b+this.stride[1]*M]},g.index=function(b,M){return this.offset+this.stride[0]*b+this.stride[1]*M},g.hi=function(b,M){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof M!="number"||M<0?this.shape[1]:M|0,this.stride[0],this.stride[1],this.offset)},g.lo=function(b,M){var _=this.offset,T=0,w=this.shape[0],v=this.shape[1],L=this.stride[0],S=this.stride[1];return typeof b=="number"&&b>=0&&(T=b|0,_+=L*T,w-=T),typeof M=="number"&&M>=0&&(T=M|0,_+=S*T,v-=T),new y(this.data,w,v,L,S,_)},g.step=function(b,M){var _=this.shape[0],T=this.shape[1],w=this.stride[0],v=this.stride[1],L=this.offset,S=0,k=Math.ceil;return typeof b=="number"&&(S=b|0,S<0?(L+=w*(_-1),_=k(-_/S)):_=k(_/S),w*=S),typeof M=="number"&&(S=M|0,S<0?(L+=v*(T-1),T=k(-T/S)):T=k(T/S),v*=S),new y(this.data,_,T,w,v,L)},g.transpose=function(b,M){b=b===void 0?0:b|0,M=M===void 0?1:M|0;var _=this.shape,T=this.stride;return new y(this.data,_[b],_[M],T[b],T[M],this.offset)},g.pick=function(b,M){var _=[],T=[],w=this.offset;typeof b=="number"&&b>=0?w=w+this.stride[0]*b|0:(_.push(this.shape[0]),T.push(this.stride[0])),typeof M=="number"&&M>=0?w=w+this.stride[1]*M|0:(_.push(this.shape[1]),T.push(this.stride[1]));var v=d[_.length+1];return v(this.data,_,T,w)},function(b,M,_,T){return new y(b,M[0],M[1],_[0],_[1],T)}},3:function(h,d,p){function y(A,b,M,_,T,w,v,L){this.data=A,this.shape=[b,M,_],this.stride=[T,w,v],this.offset=L|0}var g=y.prototype;return g.dtype=h,g.dimension=3,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(g,"order",{get:function(){var b=Math.abs(this.stride[0]),M=Math.abs(this.stride[1]),_=Math.abs(this.stride[2]);return b>M?M>_?[2,1,0]:b>_?[1,2,0]:[1,0,2]:b>_?[2,0,1]:_>M?[0,1,2]:[0,2,1]}}),g.set=function(b,M,_,T){return h==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_,T):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_]=T},g.get=function(b,M,_){return h==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_]},g.index=function(b,M,_){return this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_},g.hi=function(b,M,_){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof _!="number"||_<0?this.shape[2]:_|0,this.stride[0],this.stride[1],this.stride[2],this.offset)},g.lo=function(b,M,_){var T=this.offset,w=0,v=this.shape[0],L=this.shape[1],S=this.shape[2],k=this.stride[0],P=this.stride[1],O=this.stride[2];return typeof b=="number"&&b>=0&&(w=b|0,T+=k*w,v-=w),typeof M=="number"&&M>=0&&(w=M|0,T+=P*w,L-=w),typeof _=="number"&&_>=0&&(w=_|0,T+=O*w,S-=w),new y(this.data,v,L,S,k,P,O,T)},g.step=function(b,M,_){var T=this.shape[0],w=this.shape[1],v=this.shape[2],L=this.stride[0],S=this.stride[1],k=this.stride[2],P=this.offset,O=0,F=Math.ceil;return typeof b=="number"&&(O=b|0,O<0?(P+=L*(T-1),T=F(-T/O)):T=F(T/O),L*=O),typeof M=="number"&&(O=M|0,O<0?(P+=S*(w-1),w=F(-w/O)):w=F(w/O),S*=O),typeof _=="number"&&(O=_|0,O<0?(P+=k*(v-1),v=F(-v/O)):v=F(v/O),k*=O),new y(this.data,T,w,v,L,S,k,P)},g.transpose=function(b,M,_){b=b===void 0?0:b|0,M=M===void 0?1:M|0,_=_===void 0?2:_|0;var T=this.shape,w=this.stride;return new y(this.data,T[b],T[M],T[_],w[b],w[M],w[_],this.offset)},g.pick=function(b,M,_){var T=[],w=[],v=this.offset;typeof b=="number"&&b>=0?v=v+this.stride[0]*b|0:(T.push(this.shape[0]),w.push(this.stride[0])),typeof M=="number"&&M>=0?v=v+this.stride[1]*M|0:(T.push(this.shape[1]),w.push(this.stride[1])),typeof _=="number"&&_>=0?v=v+this.stride[2]*_|0:(T.push(this.shape[2]),w.push(this.stride[2]));var L=d[T.length+1];return L(this.data,T,w,v)},function(b,M,_,T){return new y(b,M[0],M[1],M[2],_[0],_[1],_[2],T)}},4:function(h,d,p){function y(A,b,M,_,T,w,v,L,S,k){this.data=A,this.shape=[b,M,_,T],this.stride=[w,v,L,S],this.offset=k|0}var g=y.prototype;return g.dtype=h,g.dimension=4,Object.defineProperty(g,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(g,"order",{get:p}),g.set=function(b,M,_,T,w){return h==="generic"?this.data.set(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T,w):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T]=w},g.get=function(b,M,_,T){return h==="generic"?this.data.get(this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T):this.data[this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T]},g.index=function(b,M,_,T){return this.offset+this.stride[0]*b+this.stride[1]*M+this.stride[2]*_+this.stride[3]*T},g.hi=function(b,M,_,T){return new y(this.data,typeof b!="number"||b<0?this.shape[0]:b|0,typeof M!="number"||M<0?this.shape[1]:M|0,typeof _!="number"||_<0?this.shape[2]:_|0,typeof T!="number"||T<0?this.shape[3]:T|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},g.lo=function(b,M,_,T){var w=this.offset,v=0,L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],O=this.stride[0],F=this.stride[1],I=this.stride[2],D=this.stride[3];return typeof b=="number"&&b>=0&&(v=b|0,w+=O*v,L-=v),typeof M=="number"&&M>=0&&(v=M|0,w+=F*v,S-=v),typeof _=="number"&&_>=0&&(v=_|0,w+=I*v,k-=v),typeof T=="number"&&T>=0&&(v=T|0,w+=D*v,P-=v),new y(this.data,L,S,k,P,O,F,I,D,w)},g.step=function(b,M,_,T){var w=this.shape[0],v=this.shape[1],L=this.shape[2],S=this.shape[3],k=this.stride[0],P=this.stride[1],O=this.stride[2],F=this.stride[3],I=this.offset,D=0,U=Math.ceil;return typeof b=="number"&&(D=b|0,D<0?(I+=k*(w-1),w=U(-w/D)):w=U(w/D),k*=D),typeof M=="number"&&(D=M|0,D<0?(I+=P*(v-1),v=U(-v/D)):v=U(v/D),P*=D),typeof _=="number"&&(D=_|0,D<0?(I+=O*(L-1),L=U(-L/D)):L=U(L/D),O*=D),typeof T=="number"&&(D=T|0,D<0?(I+=F*(S-1),S=U(-S/D)):S=U(S/D),F*=D),new y(this.data,w,v,L,S,k,P,O,F,I)},g.transpose=function(b,M,_,T){b=b===void 0?0:b|0,M=M===void 0?1:M|0,_=_===void 0?2:_|0,T=T===void 0?3:T|0;var w=this.shape,v=this.stride;return new y(this.data,w[b],w[M],w[_],w[T],v[b],v[M],v[_],v[T],this.offset)},g.pick=function(b,M,_,T){var w=[],v=[],L=this.offset;typeof b=="number"&&b>=0?L=L+this.stride[0]*b|0:(w.push(this.shape[0]),v.push(this.stride[0])),typeof M=="number"&&M>=0?L=L+this.stride[1]*M|0:(w.push(this.shape[1]),v.push(this.stride[1])),typeof _=="number"&&_>=0?L=L+this.stride[2]*_|0:(w.push(this.shape[2]),v.push(this.stride[2])),typeof T=="number"&&T>=0?L=L+this.stride[3]*T|0:(w.push(this.shape[3]),v.push(this.stride[3]));var S=d[w.length+1];return S(this.data,w,v,L)},function(b,M,_,T){return new y(b,M[0],M[1],M[2],M[3],_[0],_[1],_[2],_[3],T)}},5:function(d,p,y){function g(b,M,_,T,w,v,L,S,k,P,O,F){this.data=b,this.shape=[M,_,T,w,v],this.stride=[L,S,k,P,O],this.offset=F|0}var A=g.prototype;return A.dtype=d,A.dimension=5,Object.defineProperty(A,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(A,"order",{get:y}),A.set=function(M,_,T,w,v,L){return d==="generic"?this.data.set(this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*w+this.stride[4]*v,L):this.data[this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*w+this.stride[4]*v]=L},A.get=function(M,_,T,w,v){return d==="generic"?this.data.get(this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*w+this.stride[4]*v):this.data[this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*w+this.stride[4]*v]},A.index=function(M,_,T,w,v){return this.offset+this.stride[0]*M+this.stride[1]*_+this.stride[2]*T+this.stride[3]*w+this.stride[4]*v},A.hi=function(M,_,T,w,v){return new g(this.data,typeof M!="number"||M<0?this.shape[0]:M|0,typeof _!="number"||_<0?this.shape[1]:_|0,typeof T!="number"||T<0?this.shape[2]:T|0,typeof w!="number"||w<0?this.shape[3]:w|0,typeof v!="number"||v<0?this.shape[4]:v|0,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},A.lo=function(M,_,T,w,v){var L=this.offset,S=0,k=this.shape[0],P=this.shape[1],O=this.shape[2],F=this.shape[3],I=this.shape[4],D=this.stride[0],U=this.stride[1],B=this.stride[2],j=this.stride[3],Z=this.stride[4];return typeof M=="number"&&M>=0&&(S=M|0,L+=D*S,k-=S),typeof _=="number"&&_>=0&&(S=_|0,L+=U*S,P-=S),typeof T=="number"&&T>=0&&(S=T|0,L+=B*S,O-=S),typeof w=="number"&&w>=0&&(S=w|0,L+=j*S,F-=S),typeof v=="number"&&v>=0&&(S=v|0,L+=Z*S,I-=S),new g(this.data,k,P,O,F,I,D,U,B,j,Z,L)},A.step=function(M,_,T,w,v){var L=this.shape[0],S=this.shape[1],k=this.shape[2],P=this.shape[3],O=this.shape[4],F=this.stride[0],I=this.stride[1],D=this.stride[2],U=this.stride[3],B=this.stride[4],j=this.offset,Z=0,ee=Math.ceil;return typeof M=="number"&&(Z=M|0,Z<0?(j+=F*(L-1),L=ee(-L/Z)):L=ee(L/Z),F*=Z),typeof _=="number"&&(Z=_|0,Z<0?(j+=I*(S-1),S=ee(-S/Z)):S=ee(S/Z),I*=Z),typeof T=="number"&&(Z=T|0,Z<0?(j+=D*(k-1),k=ee(-k/Z)):k=ee(k/Z),D*=Z),typeof w=="number"&&(Z=w|0,Z<0?(j+=U*(P-1),P=ee(-P/Z)):P=ee(P/Z),U*=Z),typeof v=="number"&&(Z=v|0,Z<0?(j+=B*(O-1),O=ee(-O/Z)):O=ee(O/Z),B*=Z),new g(this.data,L,S,k,P,O,F,I,D,U,B,j)},A.transpose=function(M,_,T,w,v){M=M===void 0?0:M|0,_=_===void 0?1:_|0,T=T===void 0?2:T|0,w=w===void 0?3:w|0,v=v===void 0?4:v|0;var L=this.shape,S=this.stride;return new g(this.data,L[M],L[_],L[T],L[w],L[v],S[M],S[_],S[T],S[w],S[v],this.offset)},A.pick=function(M,_,T,w,v){var L=[],S=[],k=this.offset;typeof M=="number"&&M>=0?k=k+this.stride[0]*M|0:(L.push(this.shape[0]),S.push(this.stride[0])),typeof _=="number"&&_>=0?k=k+this.stride[1]*_|0:(L.push(this.shape[1]),S.push(this.stride[1])),typeof T=="number"&&T>=0?k=k+this.stride[2]*T|0:(L.push(this.shape[2]),S.push(this.stride[2])),typeof w=="number"&&w>=0?k=k+this.stride[3]*w|0:(L.push(this.shape[3]),S.push(this.stride[3])),typeof v=="number"&&v>=0?k=k+this.stride[4]*v|0:(L.push(this.shape[4]),S.push(this.stride[4]));var P=p[L.length+1];return P(this.data,L,S,k)},function(M,_,T,w){return new g(M,_[0],_[1],_[2],_[3],_[4],T[0],T[1],T[2],T[3],T[4],w)}}};function f(h,d){var p=d===-1?"T":String(d),y=n[p];return d===-1?y(h):d===0?y(h,o[h][0]):y(h,o[h],r)}function l(h){if(t(h))return"buffer";if(i)switch(Object.prototype.toString.call(h)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(h)?"array":"generic"}var o={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};function c(h,d,p,y){if(h===void 0){var T=o.array[0];return T([])}else typeof h=="number"&&(h=[h]);d===void 0&&(d=[h.length]);var g=d.length;if(p===void 0){p=new Array(g);for(var A=g-1,b=1;A>=0;--A)p[A]=b,b*=d[A]}if(y===void 0){y=0;for(var A=0;A<g;++A)p[A]<0&&(y-=(d[A]-1)*p[A])}for(var M=l(h),_=o[M];_.length<=g+1;)_.push(f(M,_.length-1));var T=_[g+1];return T(h,d,p,y)}m.exports=c},{"is-buffer":237}],260:[function(s,m,x){var t=s("double-bits"),i=Math.pow(2,-1074),a=-1>>>0;m.exports=r;function r(n,f){if(isNaN(n)||isNaN(f))return NaN;if(n===f)return n;if(n===0)return f<0?-i:i;var l=t.hi(n),o=t.lo(n);return f>n==n>0?o===a?(l+=1,o=0):o+=1:o===0?(o=a,l-=1):o-=1,t.pack(o,l)}},{"double-bits":64}],261:[function(s,m,x){var t=1e-6,i=1e-6;x.vertexNormals=function(a,r,n){for(var f=r.length,l=new Array(f),o=n===void 0?t:n,c=0;c<f;++c)l[c]=[0,0,0];for(var c=0;c<a.length;++c)for(var h=a[c],d=0,p=h[h.length-1],y=h[0],g=0;g<h.length;++g){d=p,p=y,y=h[(g+1)%h.length];for(var A=r[d],b=r[p],M=r[y],_=new Array(3),T=0,w=new Array(3),v=0,L=0;L<3;++L)_[L]=A[L]-b[L],T+=_[L]*_[L],w[L]=M[L]-b[L],v+=w[L]*w[L];if(T*v>o)for(var S=l[p],k=1/Math.sqrt(T*v),L=0;L<3;++L){var P=(L+1)%3,O=(L+2)%3;S[L]+=k*(w[P]*_[O]-w[O]*_[P])}}for(var c=0;c<f;++c){for(var S=l[c],F=0,L=0;L<3;++L)F+=S[L]*S[L];if(F>o)for(var k=1/Math.sqrt(F),L=0;L<3;++L)S[L]*=k;else for(var L=0;L<3;++L)S[L]=0}return l},x.faceNormals=function(a,r,n){for(var f=a.length,l=new Array(f),o=n===void 0?i:n,c=0;c<f;++c){for(var h=a[c],d=new Array(3),p=0;p<3;++p)d[p]=r[h[p]];for(var y=new Array(3),g=new Array(3),p=0;p<3;++p)y[p]=d[1][p]-d[0][p],g[p]=d[2][p]-d[0][p];for(var A=new Array(3),b=0,p=0;p<3;++p){var M=(p+1)%3,_=(p+2)%3;A[p]=y[M]*g[_]-y[_]*g[M],b+=A[p]*A[p]}b>o?b=1/Math.sqrt(b):b=0;for(var p=0;p<3;++p)A[p]*=b;l[c]=A}return l}},{}],262:[function(s,m,x){m.exports=t;function t(i,a,r,n,f,l,o,c,h,d){var p=a+l+d;if(y>0){var y=Math.sqrt(p+1);i[0]=.5*(o-h)/y,i[1]=.5*(c-n)/y,i[2]=.5*(r-l)/y,i[3]=.5*y}else{var g=Math.max(a,l,d),y=Math.sqrt(2*g-p+1);a>=g?(i[0]=.5*y,i[1]=.5*(f+r)/y,i[2]=.5*(c+n)/y,i[3]=.5*(o-h)/y):l>=g?(i[0]=.5*(r+f)/y,i[1]=.5*y,i[2]=.5*(h+o)/y,i[3]=.5*(c-n)/y):(i[0]=.5*(n+c)/y,i[1]=.5*(o+h)/y,i[2]=.5*y,i[3]=.5*(r-f)/y)}return i}},{}],263:[function(s,m,x){m.exports=d;var t=s("filtered-vector"),i=s("gl-mat4/lookAt"),a=s("gl-mat4/fromQuat"),r=s("gl-mat4/invert"),n=s("./lib/quatFromFrame");function f(p,y,g){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(g,2))}function l(p,y,g,A){return Math.sqrt(Math.pow(p,2)+Math.pow(y,2)+Math.pow(g,2)+Math.pow(A,2))}function o(p,y){var g=y[0],A=y[1],b=y[2],M=y[3],_=l(g,A,b,M);_>1e-6?(p[0]=g/_,p[1]=A/_,p[2]=b/_,p[3]=M/_):(p[0]=p[1]=p[2]=0,p[3]=1)}function c(p,y,g){this.radius=t([g]),this.center=t(y),this.rotation=t(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=c.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var y=this.computedRotation;o(y,y);var g=this.computedMatrix;a(g,y);var A=this.computedCenter,b=this.computedEye,M=this.computedUp,_=Math.exp(this.computedRadius[0]);b[0]=A[0]+_*g[2],b[1]=A[1]+_*g[6],b[2]=A[2]+_*g[10],M[0]=g[1],M[1]=g[5],M[2]=g[9];for(var T=0;T<3;++T){for(var w=0,v=0;v<3;++v)w+=g[T+4*v]*b[v];g[12+T]=-w}},h.getMatrix=function(p,y){this.recalcMatrix(p);var g=this.computedMatrix;if(y){for(var A=0;A<16;++A)y[A]=g[A];return y}return g},h.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},h.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},h.pan=function(p,y,g,A){y=y||0,g=g||0,A=A||0,this.recalcMatrix(p);var b=this.computedMatrix,M=b[1],_=b[5],T=b[9],w=f(M,_,T);M/=w,_/=w,T/=w;var v=b[0],L=b[4],S=b[8],k=v*M+L*_+S*T;v-=M*k,L-=_*k,S-=T*k;var P=f(v,L,S);v/=P,L/=P,S/=P,b[2],b[6],b[10];var O=v*y+M*g,F=L*y+_*g,I=S*y+T*g;this.center.move(p,O,F,I);var D=Math.exp(this.computedRadius[0]);D=Math.max(1e-4,D+A),this.radius.set(p,Math.log(D))},h.rotate=function(p,y,g,A){this.recalcMatrix(p),y=y||0,g=g||0;var b=this.computedMatrix,M=b[0],_=b[4],T=b[8],w=b[1],v=b[5],L=b[9],S=b[2],k=b[6],P=b[10],O=y*M+g*w,F=y*_+g*v,I=y*T+g*L,D=-(k*I-P*F),U=-(P*O-S*I),B=-(S*F-k*O),j=Math.sqrt(Math.max(0,1-Math.pow(D,2)-Math.pow(U,2)-Math.pow(B,2))),Z=l(D,U,B,j);Z>1e-6?(D/=Z,U/=Z,B/=Z,j/=Z):(D=U=B=0,j=1);var ee=this.computedRotation,q=ee[0],W=ee[1],J=ee[2],le=ee[3],fe=q*j+le*D+W*B-J*U,se=W*j+le*U+J*D-q*B,H=J*j+le*B+q*U-W*D,Y=le*j-q*D-W*U-J*B;if(A){D=S,U=k,B=P;var ne=Math.sin(A)/f(D,U,B);D*=ne,U*=ne,B*=ne,j=Math.cos(y),fe=fe*j+Y*D+se*B-H*U,se=se*j+Y*U+H*D-fe*B,H=H*j+Y*B+fe*U-se*D,Y=Y*j-fe*D-se*U-H*B}var te=l(fe,se,H,Y);te>1e-6?(fe/=te,se/=te,H/=te,Y/=te):(fe=se=H=0,Y=1),this.rotation.set(p,fe,se,H,Y)},h.lookAt=function(p,y,g,A){this.recalcMatrix(p),g=g||this.computedCenter,y=y||this.computedEye,A=A||this.computedUp;var b=this.computedMatrix;i(b,y,g,A);var M=this.computedRotation;n(M,b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]),o(M,M),this.rotation.set(p,M[0],M[1],M[2],M[3]);for(var _=0,T=0;T<3;++T)_+=Math.pow(g[T]-y[T],2);this.radius.set(p,.5*Math.log(Math.max(_,1e-6))),this.center.set(p,g[0],g[1],g[2])},h.translate=function(p,y,g,A){this.center.move(p,y||0,g||0,A||0)},h.setMatrix=function(p,y){var g=this.computedRotation;n(g,y[0],y[1],y[2],y[4],y[5],y[6],y[8],y[9],y[10]),o(g,g),this.rotation.set(p,g[0],g[1],g[2],g[3]);var A=this.computedMatrix;r(A,y);var b=A[15];if(Math.abs(b)>1e-6){var M=A[12]/b,_=A[13]/b,T=A[14]/b;this.recalcMatrix(p);var w=Math.exp(this.computedRadius[0]);this.center.set(p,M-A[2]*w,_-A[6]*w,T-A[10]*w),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},h.setDistance=function(p,y){y>0&&this.radius.set(p,Math.log(y))},h.setDistanceLimits=function(p,y){p>0?p=Math.log(p):p=-1/0,y>0?y=Math.log(y):y=1/0,y=Math.max(y,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=y},h.getDistanceLimits=function(p){var y=this.radius.bounds;return p?(p[0]=Math.exp(y[0][0]),p[1]=Math.exp(y[1][0]),p):[Math.exp(y[0][0]),Math.exp(y[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(p){var y=this.lastT(),g=p.center;g&&this.center.set(y,g[0],g[1],g[2]);var A=p.rotation;A&&this.rotation.set(y,A[0],A[1],A[2],A[3]);var b=p.distance;b&&b>0&&this.radius.set(y,Math.log(b)),this.setDistanceLimits(p.zoomMin,p.zoomMax)};function d(p){p=p||{};var y=p.center||[0,0,0],g=p.rotation||[0,0,0,1],A=p.radius||1;y=[].slice.call(y,0,3),g=[].slice.call(g,0,4),o(g,g);var b=new c(g,y,Math.log(A));return b.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&b.lookAt(0,p.eye,p.center,p.up),b}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(s,m,x){var t=s("repeat-string");m.exports=function(a,r,n){return n=typeof n!="undefined"?n+"":" ",t(n,r)+a}},{"repeat-string":277}],265:[function(s,m,x){m.exports=function(i,a){a||(a=[0,""]),i=String(i);var r=parseFloat(i,10);return a[0]=r,a[1]=i.match(/[\d.\-\+]*\s*(.*)/)[1]||"",a}},{}],266:[function(s,m,x){m.exports=i;var t=s("compare-angle");function i(a,r){for(var n=r.length|0,f=a.length,l=[new Array(n),new Array(n)],o=0;o<n;++o)l[0][o]=[],l[1][o]=[];for(var o=0;o<f;++o){var c=a[o];l[0][c[0]].push(c),l[1][c[1]].push(c)}for(var h=[],o=0;o<n;++o)l[0][o].length+l[1][o].length===0&&h.push([o]);function d(_,T){var w=l[T][_[T]];w.splice(w.indexOf(_),1)}function p(_,T,w){for(var v,L,S,k=0;k<2;++k)if(l[k][T].length>0){v=l[k][T][0],S=k;break}L=v[S^1];for(var P=0;P<2;++P)for(var O=l[P][T],F=0;F<O.length;++F){var I=O[F],D=I[P^1],U=t(r[_],r[T],r[L],r[D]);U>0&&(v=I,L=D,S=P)}return w||v&&d(v,S),L}function y(_,T){var w=l[T][_][0],v=[_];d(w,T);for(var L=w[T^1];;){for(;L!==_;)v.push(L),L=p(v[v.length-2],L,!1);if(l[0][_].length+l[1][_].length===0)break;var S=v[v.length-1],k=_,P=v[1],O=p(S,k,!0);if(t(r[S],r[k],r[P],r[O])<0)break;v.push(_),L=p(S,k)}return v}function g(_,T){return T[1]===T[T.length-1]}for(var o=0;o<n;++o)for(var A=0;A<2;++A){for(var b=[];l[A][o].length>0;){l[0][o].length;var M=y(o,A);g(b,M)?b.push.apply(b,M):(b.length>0&&h.push(b),b=M)}b.length>0&&h.push(b)}return h}},{"compare-angle":54}],267:[function(s,m,x){m.exports=i;var t=s("edges-to-adjacency-list");function i(a,r){for(var n=t(a,r.length),f=new Array(r.length),l=new Array(r.length),o=[],c=0;c<r.length;++c){var h=n[c].length;l[c]=h,f[c]=!0,h<=1&&o.push(c)}for(;o.length>0;){var d=o.pop();f[d]=!1;for(var p=n[d],c=0;c<p.length;++c){var y=p[c];--l[y]==0&&o.push(y)}}for(var g=new Array(r.length),A=[],c=0;c<r.length;++c)if(f[c]){var d=A.length;g[c]=d,A.push(r[c])}else g[c]=-1;for(var b=[],c=0;c<a.length;++c){var M=a[c];f[M[0]]&&f[M[1]]&&b.push([g[M[0]],g[M[1]]])}return[b,A]}},{"edges-to-adjacency-list":66}],268:[function(s,m,x){m.exports=h;var t=s("edges-to-adjacency-list"),i=s("planar-dual"),a=s("point-in-big-polygon"),r=s("two-product"),n=s("robust-sum"),f=s("uniq"),l=s("./lib/trim-leaves");function o(d,p){for(var y=new Array(d),g=0;g<d;++g)y[g]=p;return y}function c(d){for(var p=new Array(d),y=0;y<d;++y)p[y]=[];return p}function h(d,p){var y=l(d,p);d=y[0],p=y[1];var g=p.length;d.length;for(var A=t(d,p.length),b=0;b<g;++b)if(A[b].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var M=i(d,p);function _(oe){for(var ue=oe.length,ye=[0],ce=0;ce<ue;++ce){var me=p[oe[ce]],xe=p[oe[(ce+1)%ue]],ke=r(-me[0],me[1]),Ae=r(-me[0],xe[1]),Oe=r(xe[0],me[1]),He=r(xe[0],xe[1]);ye=n(ye,n(n(ke,Ae),n(Oe,He)))}return ye[ye.length-1]>0}M=M.filter(_);for(var T=M.length,w=new Array(T),v=new Array(T),b=0;b<T;++b){w[b]=b;var L=new Array(T),S=M[b].map(function(ue){return p[ue]}),k=a([S]),P=0;e:for(var O=0;O<T;++O)if(L[O]=0,b!==O){for(var F=M[O],I=F.length,D=0;D<I;++D){var U=k(p[F[D]]);if(U!==0){U<0&&(L[O]=1,P+=1);continue e}}L[O]=1,P+=1}v[b]=[P,b,L]}v.sort(function(oe,ue){return ue[0]-oe[0]});for(var b=0;b<T;++b)for(var L=v[b],B=L[1],j=L[2],O=0;O<T;++O)j[O]&&(w[O]=B);for(var Z=c(T),b=0;b<T;++b)Z[b].push(w[b]),Z[w[b]].push(b);for(var ee={},q=o(g,!1),b=0;b<T;++b)for(var F=M[b],I=F.length,O=0;O<I;++O){var W=F[O],J=F[(O+1)%I],le=Math.min(W,J)+":"+Math.max(W,J);if(le in ee){var fe=ee[le];Z[fe].push(b),Z[b].push(fe),q[W]=q[J]=!0}else ee[le]=b}function se(oe){for(var ue=oe.length,ye=0;ye<ue;++ye)if(!q[oe[ye]])return!1;return!0}for(var H=[],Y=o(T,-1),b=0;b<T;++b)w[b]===b&&!se(M[b])?(H.push(b),Y[b]=0):Y[b]=-1;for(var y=[];H.length>0;){var ne=H.pop(),te=Z[ne];f(te,function(oe,ue){return oe-ue});var K=te.length,$=Y[ne],ae;if($===0){var F=M[ne];ae=[F]}for(var b=0;b<K;++b){var ie=te[b];if(!(Y[ie]>=0)&&(Y[ie]=$^1,H.push(ie),$===0)){var F=M[ie];se(F)||(F.reverse(),ae.push(F))}}$===0&&y.push(ae)}return y}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(s,m,x){m.exports=p;var t=s("robust-orientation")[3],i=s("slab-decomposition"),a=s("interval-tree-1d"),r=s("binary-search-bounds");function n(){return!0}function f(y){return function(g,A){var b=y[g];return b?!!b.queryPoint(A,n):!1}}function l(y){for(var g={},A=0;A<y.length;++A){var b=y[A],M=b[0][0],_=b[0][1],T=b[1][1],w=[Math.min(_,T),Math.max(_,T)];M in g?g[M].push(w):g[M]=[w]}for(var v={},L=Object.keys(g),A=0;A<L.length;++A){var S=g[L[A]];v[L[A]]=a(S)}return f(v)}function o(y,g){return function(A){var b=r.le(g,A[0]);if(b<0)return 1;var M=y[b];if(!M)if(b>0&&g[b]===A[0])M=y[b-1];else return 1;for(var _=1;M;){var T=M.key,w=t(A,T[0],T[1]);if(T[0][0]<T[1][0])if(w<0)M=M.left;else if(w>0)_=-1,M=M.right;else return 0;else if(w>0)M=M.left;else if(w<0)_=1,M=M.right;else return 0}return _}}function c(y){return 1}function h(y){return function(A){return y(A[0],A[1])?0:1}}function d(y,g){return function(b){return y(b[0],b[1])?0:g(b)}}function p(y){for(var g=y.length,A=[],b=[],M=0;M<g;++M)for(var _=y[M],T=_.length,w=T-1,v=0;v<T;w=v++){var L=_[w],S=_[v];L[0]===S[0]?b.push([L,S]):A.push([L,S])}if(A.length===0)return b.length===0?c:h(l(b));var k=i(A),P=o(k.slabs,k.coordinates);return b.length===0?P:d(l(b),P)}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(s,m,x){var t=new Float64Array(4),i=new Float64Array(4),a=new Float64Array(4);function r(n,f,l,o,c){t.length<o.length&&(t=new Float64Array(o.length),i=new Float64Array(o.length),a=new Float64Array(o.length));for(var h=0;h<o.length;++h)t[h]=n[h]-o[h],i[h]=f[h]-n[h],a[h]=l[h]-n[h];for(var d=0,p=0,y=0,g=0,A=0,b=0,h=0;h<o.length;++h){var M=i[h],_=a[h],T=t[h];d+=M*M,p+=M*_,y+=_*_,g+=T*M,A+=T*_,b+=T*T}var w=Math.abs(d*y-p*p),v=p*A-y*g,L=p*g-d*A,S;if(v+L<=w)if(v<0)L<0&&g<0?(L=0,-g>=d?(v=1,S=d+2*g+b):(v=-g/d,S=g*v+b)):(v=0,A>=0?(L=0,S=b):-A>=y?(L=1,S=y+2*A+b):(L=-A/y,S=A*L+b));else if(L<0)L=0,g>=0?(v=0,S=b):-g>=d?(v=1,S=d+2*g+b):(v=-g/d,S=g*v+b);else{var k=1/w;v*=k,L*=k,S=v*(d*v+p*L+2*g)+L*(p*v+y*L+2*A)+b}else{var P,O,F,I;v<0?(P=p+g,O=y+A,O>P?(F=O-P,I=d-2*p+y,F>=I?(v=1,L=0,S=d+2*g+b):(v=F/I,L=1-v,S=v*(d*v+p*L+2*g)+L*(p*v+y*L+2*A)+b)):(v=0,O<=0?(L=1,S=y+2*A+b):A>=0?(L=0,S=b):(L=-A/y,S=A*L+b))):L<0?(P=p+A,O=d+g,O>P?(F=O-P,I=d-2*p+y,F>=I?(L=1,v=0,S=y+2*A+b):(L=F/I,v=1-L,S=v*(d*v+p*L+2*g)+L*(p*v+y*L+2*A)+b)):(L=0,O<=0?(v=1,S=d+2*g+b):g>=0?(v=0,S=b):(v=-g/d,S=g*v+b))):(F=y+A-p-g,F<=0?(v=0,L=1,S=y+2*A+b):(I=d-2*p+y,F>=I?(v=1,L=0,S=d+2*g+b):(v=F/I,L=1-v,S=v*(d*v+p*L+2*g)+L*(p*v+y*L+2*A)+b)))}for(var D=1-v-L,h=0;h<o.length;++h)c[h]=D*n[h]+v*f[h]+L*l[h];return S<0?0:S}m.exports=r},{}],271:[function(s,m,x){m.exports=s("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(s,m,x){var t=s("big-rat/add");m.exports=i;function i(a,r){for(var n=a.length,f=new Array(n),l=0;l<n;++l)f[l]=t(a[l],r[l]);return f}},{"big-rat/add":15}],273:[function(s,m,x){m.exports=i;var t=s("big-rat");function i(a){for(var r=new Array(a.length),n=0;n<a.length;++n)r[n]=t(a[n]);return r}},{"big-rat":18}],274:[function(s,m,x){var t=s("big-rat"),i=s("big-rat/mul");m.exports=a;function a(r,n){for(var f=t(n),l=r.length,o=new Array(l),c=0;c<l;++c)o[c]=i(r[c],f);return o}},{"big-rat":18,"big-rat/mul":27}],275:[function(s,m,x){var t=s("big-rat/sub");m.exports=i;function i(a,r){for(var n=a.length,f=new Array(n),l=0;l<n;++l)f[l]=t(a[l],r[l]);return f}},{"big-rat/sub":29}],276:[function(s,m,x){var t=s("compare-cell"),i=s("compare-oriented-cell"),a=s("cell-orientation");m.exports=r;function r(n){n.sort(i);for(var f=n.length,l=0,o=0;o<f;++o){var c=n[o],h=a(c);if(h!==0){if(l>0){var d=n[l-1];if(t(c,d)===0&&a(d)!==h){l-=1;continue}}n[l++]=c}}return n.length=l,n}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(s,m,x){var t="",i;m.exports=a;function a(r,n){if(typeof r!="string")throw new TypeError("expected a string");if(n===1)return r;if(n===2)return r+r;var f=r.length*n;if(i!==r||typeof i=="undefined")i=r,t="";else if(t.length>=f)return t.substr(0,f);for(;f>t.length&&n>1;)n&1&&(t+=r),n>>=1,r+=r;return t+=r,t=t.substr(0,f),t}},{}],278:[function(s,m,x){(function(t){(function(){m.exports=t.performance&&t.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,typeof u!="undefined"?u:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],279:[function(s,m,x){m.exports=t;function t(i){for(var a=i.length,r=i[i.length-1],n=a,f=a-2;f>=0;--f){var l=r,o=i[f];r=l+o;var c=r-l,h=o-c;h&&(i[--n]=r,r=h)}for(var d=0,f=n;f<a;++f){var l=i[f],o=r;r=l+o;var c=r-l,h=o-c;h&&(i[d++]=h)}return i[d++]=r,i.length=d,i}},{}],280:[function(s,m,x){var t=s("two-product"),i=s("robust-sum"),a=s("robust-scale"),r=s("robust-compress"),n=4;function f(p,y,g,A){return function(M){return A(p(g(M[0][0],M[1][1]),g(-M[0][1],M[1][0])))}}function l(p,y,g,A){return function(M){return A(p(y(p(g(M[1][1],M[2][2]),g(-M[1][2],M[2][1])),M[0][0]),p(y(p(g(M[1][0],M[2][2]),g(-M[1][2],M[2][0])),-M[0][1]),y(p(g(M[1][0],M[2][1]),g(-M[1][1],M[2][0])),M[0][2]))))}}function o(p){var y=p===2?f:p===3?l:void 0;return y(i,a,t,r)}var c=[function(){return[0]},function(y){return[y[0][0]]}];function h(p,y,g,A,b,M){return function(T){switch(T.length){case 0:return p(T);case 1:return y(T);case 2:return g(T);case 3:return A(T)}var w=b[T.length];return w||(w=b[T.length]=M(T.length)),w(T)}}function d(){for(;c.length<n;)c.push(o(c.length));m.exports=h.apply(void 0,c.concat([c,o]));for(var p=0;p<c.length;++p)m.exports[p]=c[p]}d()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(s,m,x){var t=s("two-product"),i=s("robust-sum");m.exports=a;function a(r,n){for(var f=t(r[0],n[0]),l=1;l<r.length;++l)f=i(f,t(r[l],n[l]));return f}},{"robust-sum":289,"two-product":306}],282:[function(s,m,x){var t=s("two-product"),i=s("robust-sum"),a=s("robust-subtract"),r=s("robust-scale"),n=6;function f(_){var T=_===3?h:_===4?d:_===5?p:y;return T(i,a,t,r)}function l(){return 0}function o(){return 0}function c(){return 0}function h(_,T,w,v){function L(S,k,P){var O=w(S[0],S[0]),F=v(O,k[0]),I=v(O,P[0]),D=w(k[0],k[0]),U=v(D,S[0]),B=v(D,P[0]),j=w(P[0],P[0]),Z=v(j,S[0]),ee=v(j,k[0]),q=_(T(ee,B),T(U,F)),W=T(Z,I),J=T(q,W);return J[J.length-1]}return L}function d(_,T,w,v){function L(S,k,P,O){var F=_(w(S[0],S[0]),w(S[1],S[1])),I=v(F,k[0]),D=v(F,P[0]),U=v(F,O[0]),B=_(w(k[0],k[0]),w(k[1],k[1])),j=v(B,S[0]),Z=v(B,P[0]),ee=v(B,O[0]),q=_(w(P[0],P[0]),w(P[1],P[1])),W=v(q,S[0]),J=v(q,k[0]),le=v(q,O[0]),fe=_(w(O[0],O[0]),w(O[1],O[1])),se=v(fe,S[0]),H=v(fe,k[0]),Y=v(fe,P[0]),ne=_(_(v(T(Y,le),k[1]),_(v(T(H,ee),-P[1]),v(T(J,Z),O[1]))),_(v(T(H,ee),S[1]),_(v(T(se,U),-k[1]),v(T(j,I),O[1])))),te=_(_(v(T(Y,le),S[1]),_(v(T(se,U),-P[1]),v(T(W,D),O[1]))),_(v(T(J,Z),S[1]),_(v(T(W,D),-k[1]),v(T(j,I),P[1])))),K=T(ne,te);return K[K.length-1]}return L}function p(_,T,w,v){function L(S,k,P,O,F){var I=_(w(S[0],S[0]),_(w(S[1],S[1]),w(S[2],S[2]))),D=v(I,k[0]),U=v(I,P[0]),B=v(I,O[0]),j=v(I,F[0]),Z=_(w(k[0],k[0]),_(w(k[1],k[1]),w(k[2],k[2]))),ee=v(Z,S[0]),q=v(Z,P[0]),W=v(Z,O[0]),J=v(Z,F[0]),le=_(w(P[0],P[0]),_(w(P[1],P[1]),w(P[2],P[2]))),fe=v(le,S[0]),se=v(le,k[0]),H=v(le,O[0]),Y=v(le,F[0]),ne=_(w(O[0],O[0]),_(w(O[1],O[1]),w(O[2],O[2]))),te=v(ne,S[0]),K=v(ne,k[0]),$=v(ne,P[0]),ae=v(ne,F[0]),ie=_(w(F[0],F[0]),_(w(F[1],F[1]),w(F[2],F[2]))),oe=v(ie,S[0]),ue=v(ie,k[0]),ye=v(ie,P[0]),ce=v(ie,O[0]),me=_(_(_(v(_(v(T(ce,ae),P[1]),_(v(T(ye,Y),-O[1]),v(T($,H),F[1]))),k[2]),_(v(_(v(T(ce,ae),k[1]),_(v(T(ue,J),-O[1]),v(T(K,W),F[1]))),-P[2]),v(_(v(T(ye,Y),k[1]),_(v(T(ue,J),-P[1]),v(T(se,q),F[1]))),O[2]))),_(v(_(v(T($,H),k[1]),_(v(T(K,W),-P[1]),v(T(se,q),O[1]))),-F[2]),_(v(_(v(T(ce,ae),k[1]),_(v(T(ue,J),-O[1]),v(T(K,W),F[1]))),S[2]),v(_(v(T(ce,ae),S[1]),_(v(T(oe,j),-O[1]),v(T(te,B),F[1]))),-k[2])))),_(_(v(_(v(T(ue,J),S[1]),_(v(T(oe,j),-k[1]),v(T(ee,D),F[1]))),O[2]),_(v(_(v(T(K,W),S[1]),_(v(T(te,B),-k[1]),v(T(ee,D),O[1]))),-F[2]),v(_(v(T($,H),k[1]),_(v(T(K,W),-P[1]),v(T(se,q),O[1]))),S[2]))),_(v(_(v(T($,H),S[1]),_(v(T(te,B),-P[1]),v(T(fe,U),O[1]))),-k[2]),_(v(_(v(T(K,W),S[1]),_(v(T(te,B),-k[1]),v(T(ee,D),O[1]))),P[2]),v(_(v(T(se,q),S[1]),_(v(T(fe,U),-k[1]),v(T(ee,D),P[1]))),-O[2]))))),xe=_(_(_(v(_(v(T(ce,ae),P[1]),_(v(T(ye,Y),-O[1]),v(T($,H),F[1]))),S[2]),v(_(v(T(ce,ae),S[1]),_(v(T(oe,j),-O[1]),v(T(te,B),F[1]))),-P[2])),_(v(_(v(T(ye,Y),S[1]),_(v(T(oe,j),-P[1]),v(T(fe,U),F[1]))),O[2]),v(_(v(T($,H),S[1]),_(v(T(te,B),-P[1]),v(T(fe,U),O[1]))),-F[2]))),_(_(v(_(v(T(ye,Y),k[1]),_(v(T(ue,J),-P[1]),v(T(se,q),F[1]))),S[2]),v(_(v(T(ye,Y),S[1]),_(v(T(oe,j),-P[1]),v(T(fe,U),F[1]))),-k[2])),_(v(_(v(T(ue,J),S[1]),_(v(T(oe,j),-k[1]),v(T(ee,D),F[1]))),P[2]),v(_(v(T(se,q),S[1]),_(v(T(fe,U),-k[1]),v(T(ee,D),P[1]))),-F[2])))),ke=T(me,xe);return ke[ke.length-1]}return L}function y(_,T,w,v){function L(S,k,P,O,F,I){var D=_(_(w(S[0],S[0]),w(S[1],S[1])),_(w(S[2],S[2]),w(S[3],S[3]))),U=v(D,k[0]),B=v(D,P[0]),j=v(D,O[0]),Z=v(D,F[0]),ee=v(D,I[0]),q=_(_(w(k[0],k[0]),w(k[1],k[1])),_(w(k[2],k[2]),w(k[3],k[3]))),W=v(q,S[0]),J=v(q,P[0]),le=v(q,O[0]),fe=v(q,F[0]),se=v(q,I[0]),H=_(_(w(P[0],P[0]),w(P[1],P[1])),_(w(P[2],P[2]),w(P[3],P[3]))),Y=v(H,S[0]),ne=v(H,k[0]),te=v(H,O[0]),K=v(H,F[0]),$=v(H,I[0]),ae=_(_(w(O[0],O[0]),w(O[1],O[1])),_(w(O[2],O[2]),w(O[3],O[3]))),ie=v(ae,S[0]),oe=v(ae,k[0]),ue=v(ae,P[0]),ye=v(ae,F[0]),ce=v(ae,I[0]),me=_(_(w(F[0],F[0]),w(F[1],F[1])),_(w(F[2],F[2]),w(F[3],F[3]))),xe=v(me,S[0]),ke=v(me,k[0]),Ae=v(me,P[0]),Oe=v(me,O[0]),He=v(me,I[0]),Ge=_(_(w(I[0],I[0]),w(I[1],I[1])),_(w(I[2],I[2]),w(I[3],I[3]))),_e=v(Ge,S[0]),Re=v(Ge,k[0]),We=v(Ge,P[0]),qe=v(Ge,O[0]),Ue=v(Ge,F[0]),Ie=_(_(_(v(_(_(v(_(v(T(Ue,He),O[1]),_(v(T(qe,ce),-F[1]),v(T(Oe,ye),I[1]))),P[2]),v(_(v(T(Ue,He),P[1]),_(v(T(We,$),-F[1]),v(T(Ae,K),I[1]))),-O[2])),_(v(_(v(T(qe,ce),P[1]),_(v(T(We,$),-O[1]),v(T(ue,te),I[1]))),F[2]),v(_(v(T(Oe,ye),P[1]),_(v(T(Ae,K),-O[1]),v(T(ue,te),F[1]))),-I[2]))),k[3]),_(v(_(_(v(_(v(T(Ue,He),O[1]),_(v(T(qe,ce),-F[1]),v(T(Oe,ye),I[1]))),k[2]),v(_(v(T(Ue,He),k[1]),_(v(T(Re,se),-F[1]),v(T(ke,fe),I[1]))),-O[2])),_(v(_(v(T(qe,ce),k[1]),_(v(T(Re,se),-O[1]),v(T(oe,le),I[1]))),F[2]),v(_(v(T(Oe,ye),k[1]),_(v(T(ke,fe),-O[1]),v(T(oe,le),F[1]))),-I[2]))),-P[3]),v(_(_(v(_(v(T(Ue,He),P[1]),_(v(T(We,$),-F[1]),v(T(Ae,K),I[1]))),k[2]),v(_(v(T(Ue,He),k[1]),_(v(T(Re,se),-F[1]),v(T(ke,fe),I[1]))),-P[2])),_(v(_(v(T(We,$),k[1]),_(v(T(Re,se),-P[1]),v(T(ne,J),I[1]))),F[2]),v(_(v(T(Ae,K),k[1]),_(v(T(ke,fe),-P[1]),v(T(ne,J),F[1]))),-I[2]))),O[3]))),_(_(v(_(_(v(_(v(T(qe,ce),P[1]),_(v(T(We,$),-O[1]),v(T(ue,te),I[1]))),k[2]),v(_(v(T(qe,ce),k[1]),_(v(T(Re,se),-O[1]),v(T(oe,le),I[1]))),-P[2])),_(v(_(v(T(We,$),k[1]),_(v(T(Re,se),-P[1]),v(T(ne,J),I[1]))),O[2]),v(_(v(T(ue,te),k[1]),_(v(T(oe,le),-P[1]),v(T(ne,J),O[1]))),-I[2]))),-F[3]),v(_(_(v(_(v(T(Oe,ye),P[1]),_(v(T(Ae,K),-O[1]),v(T(ue,te),F[1]))),k[2]),v(_(v(T(Oe,ye),k[1]),_(v(T(ke,fe),-O[1]),v(T(oe,le),F[1]))),-P[2])),_(v(_(v(T(Ae,K),k[1]),_(v(T(ke,fe),-P[1]),v(T(ne,J),F[1]))),O[2]),v(_(v(T(ue,te),k[1]),_(v(T(oe,le),-P[1]),v(T(ne,J),O[1]))),-F[2]))),I[3])),_(v(_(_(v(_(v(T(Ue,He),O[1]),_(v(T(qe,ce),-F[1]),v(T(Oe,ye),I[1]))),k[2]),v(_(v(T(Ue,He),k[1]),_(v(T(Re,se),-F[1]),v(T(ke,fe),I[1]))),-O[2])),_(v(_(v(T(qe,ce),k[1]),_(v(T(Re,se),-O[1]),v(T(oe,le),I[1]))),F[2]),v(_(v(T(Oe,ye),k[1]),_(v(T(ke,fe),-O[1]),v(T(oe,le),F[1]))),-I[2]))),S[3]),v(_(_(v(_(v(T(Ue,He),O[1]),_(v(T(qe,ce),-F[1]),v(T(Oe,ye),I[1]))),S[2]),v(_(v(T(Ue,He),S[1]),_(v(T(_e,ee),-F[1]),v(T(xe,Z),I[1]))),-O[2])),_(v(_(v(T(qe,ce),S[1]),_(v(T(_e,ee),-O[1]),v(T(ie,j),I[1]))),F[2]),v(_(v(T(Oe,ye),S[1]),_(v(T(xe,Z),-O[1]),v(T(ie,j),F[1]))),-I[2]))),-k[3])))),_(_(_(v(_(_(v(_(v(T(Ue,He),k[1]),_(v(T(Re,se),-F[1]),v(T(ke,fe),I[1]))),S[2]),v(_(v(T(Ue,He),S[1]),_(v(T(_e,ee),-F[1]),v(T(xe,Z),I[1]))),-k[2])),_(v(_(v(T(Re,se),S[1]),_(v(T(_e,ee),-k[1]),v(T(W,U),I[1]))),F[2]),v(_(v(T(ke,fe),S[1]),_(v(T(xe,Z),-k[1]),v(T(W,U),F[1]))),-I[2]))),O[3]),v(_(_(v(_(v(T(qe,ce),k[1]),_(v(T(Re,se),-O[1]),v(T(oe,le),I[1]))),S[2]),v(_(v(T(qe,ce),S[1]),_(v(T(_e,ee),-O[1]),v(T(ie,j),I[1]))),-k[2])),_(v(_(v(T(Re,se),S[1]),_(v(T(_e,ee),-k[1]),v(T(W,U),I[1]))),O[2]),v(_(v(T(oe,le),S[1]),_(v(T(ie,j),-k[1]),v(T(W,U),O[1]))),-I[2]))),-F[3])),_(v(_(_(v(_(v(T(Oe,ye),k[1]),_(v(T(ke,fe),-O[1]),v(T(oe,le),F[1]))),S[2]),v(_(v(T(Oe,ye),S[1]),_(v(T(xe,Z),-O[1]),v(T(ie,j),F[1]))),-k[2])),_(v(_(v(T(ke,fe),S[1]),_(v(T(xe,Z),-k[1]),v(T(W,U),F[1]))),O[2]),v(_(v(T(oe,le),S[1]),_(v(T(ie,j),-k[1]),v(T(W,U),O[1]))),-F[2]))),I[3]),v(_(_(v(_(v(T(qe,ce),P[1]),_(v(T(We,$),-O[1]),v(T(ue,te),I[1]))),k[2]),v(_(v(T(qe,ce),k[1]),_(v(T(Re,se),-O[1]),v(T(oe,le),I[1]))),-P[2])),_(v(_(v(T(We,$),k[1]),_(v(T(Re,se),-P[1]),v(T(ne,J),I[1]))),O[2]),v(_(v(T(ue,te),k[1]),_(v(T(oe,le),-P[1]),v(T(ne,J),O[1]))),-I[2]))),S[3]))),_(_(v(_(_(v(_(v(T(qe,ce),P[1]),_(v(T(We,$),-O[1]),v(T(ue,te),I[1]))),S[2]),v(_(v(T(qe,ce),S[1]),_(v(T(_e,ee),-O[1]),v(T(ie,j),I[1]))),-P[2])),_(v(_(v(T(We,$),S[1]),_(v(T(_e,ee),-P[1]),v(T(Y,B),I[1]))),O[2]),v(_(v(T(ue,te),S[1]),_(v(T(ie,j),-P[1]),v(T(Y,B),O[1]))),-I[2]))),-k[3]),v(_(_(v(_(v(T(qe,ce),k[1]),_(v(T(Re,se),-O[1]),v(T(oe,le),I[1]))),S[2]),v(_(v(T(qe,ce),S[1]),_(v(T(_e,ee),-O[1]),v(T(ie,j),I[1]))),-k[2])),_(v(_(v(T(Re,se),S[1]),_(v(T(_e,ee),-k[1]),v(T(W,U),I[1]))),O[2]),v(_(v(T(oe,le),S[1]),_(v(T(ie,j),-k[1]),v(T(W,U),O[1]))),-I[2]))),P[3])),_(v(_(_(v(_(v(T(We,$),k[1]),_(v(T(Re,se),-P[1]),v(T(ne,J),I[1]))),S[2]),v(_(v(T(We,$),S[1]),_(v(T(_e,ee),-P[1]),v(T(Y,B),I[1]))),-k[2])),_(v(_(v(T(Re,se),S[1]),_(v(T(_e,ee),-k[1]),v(T(W,U),I[1]))),P[2]),v(_(v(T(ne,J),S[1]),_(v(T(Y,B),-k[1]),v(T(W,U),P[1]))),-I[2]))),-O[3]),v(_(_(v(_(v(T(ue,te),k[1]),_(v(T(oe,le),-P[1]),v(T(ne,J),O[1]))),S[2]),v(_(v(T(ue,te),S[1]),_(v(T(ie,j),-P[1]),v(T(Y,B),O[1]))),-k[2])),_(v(_(v(T(oe,le),S[1]),_(v(T(ie,j),-k[1]),v(T(W,U),O[1]))),P[2]),v(_(v(T(ne,J),S[1]),_(v(T(Y,B),-k[1]),v(T(W,U),P[1]))),-O[2]))),I[3]))))),Ve=_(_(_(v(_(_(v(_(v(T(Ue,He),O[1]),_(v(T(qe,ce),-F[1]),v(T(Oe,ye),I[1]))),P[2]),v(_(v(T(Ue,He),P[1]),_(v(T(We,$),-F[1]),v(T(Ae,K),I[1]))),-O[2])),_(v(_(v(T(qe,ce),P[1]),_(v(T(We,$),-O[1]),v(T(ue,te),I[1]))),F[2]),v(_(v(T(Oe,ye),P[1]),_(v(T(Ae,K),-O[1]),v(T(ue,te),F[1]))),-I[2]))),S[3]),_(v(_(_(v(_(v(T(Ue,He),O[1]),_(v(T(qe,ce),-F[1]),v(T(Oe,ye),I[1]))),S[2]),v(_(v(T(Ue,He),S[1]),_(v(T(_e,ee),-F[1]),v(T(xe,Z),I[1]))),-O[2])),_(v(_(v(T(qe,ce),S[1]),_(v(T(_e,ee),-O[1]),v(T(ie,j),I[1]))),F[2]),v(_(v(T(Oe,ye),S[1]),_(v(T(xe,Z),-O[1]),v(T(ie,j),F[1]))),-I[2]))),-P[3]),v(_(_(v(_(v(T(Ue,He),P[1]),_(v(T(We,$),-F[1]),v(T(Ae,K),I[1]))),S[2]),v(_(v(T(Ue,He),S[1]),_(v(T(_e,ee),-F[1]),v(T(xe,Z),I[1]))),-P[2])),_(v(_(v(T(We,$),S[1]),_(v(T(_e,ee),-P[1]),v(T(Y,B),I[1]))),F[2]),v(_(v(T(Ae,K),S[1]),_(v(T(xe,Z),-P[1]),v(T(Y,B),F[1]))),-I[2]))),O[3]))),_(_(v(_(_(v(_(v(T(qe,ce),P[1]),_(v(T(We,$),-O[1]),v(T(ue,te),I[1]))),S[2]),v(_(v(T(qe,ce),S[1]),_(v(T(_e,ee),-O[1]),v(T(ie,j),I[1]))),-P[2])),_(v(_(v(T(We,$),S[1]),_(v(T(_e,ee),-P[1]),v(T(Y,B),I[1]))),O[2]),v(_(v(T(ue,te),S[1]),_(v(T(ie,j),-P[1]),v(T(Y,B),O[1]))),-I[2]))),-F[3]),v(_(_(v(_(v(T(Oe,ye),P[1]),_(v(T(Ae,K),-O[1]),v(T(ue,te),F[1]))),S[2]),v(_(v(T(Oe,ye),S[1]),_(v(T(xe,Z),-O[1]),v(T(ie,j),F[1]))),-P[2])),_(v(_(v(T(Ae,K),S[1]),_(v(T(xe,Z),-P[1]),v(T(Y,B),F[1]))),O[2]),v(_(v(T(ue,te),S[1]),_(v(T(ie,j),-P[1]),v(T(Y,B),O[1]))),-F[2]))),I[3])),_(v(_(_(v(_(v(T(Ue,He),P[1]),_(v(T(We,$),-F[1]),v(T(Ae,K),I[1]))),k[2]),v(_(v(T(Ue,He),k[1]),_(v(T(Re,se),-F[1]),v(T(ke,fe),I[1]))),-P[2])),_(v(_(v(T(We,$),k[1]),_(v(T(Re,se),-P[1]),v(T(ne,J),I[1]))),F[2]),v(_(v(T(Ae,K),k[1]),_(v(T(ke,fe),-P[1]),v(T(ne,J),F[1]))),-I[2]))),S[3]),v(_(_(v(_(v(T(Ue,He),P[1]),_(v(T(We,$),-F[1]),v(T(Ae,K),I[1]))),S[2]),v(_(v(T(Ue,He),S[1]),_(v(T(_e,ee),-F[1]),v(T(xe,Z),I[1]))),-P[2])),_(v(_(v(T(We,$),S[1]),_(v(T(_e,ee),-P[1]),v(T(Y,B),I[1]))),F[2]),v(_(v(T(Ae,K),S[1]),_(v(T(xe,Z),-P[1]),v(T(Y,B),F[1]))),-I[2]))),-k[3])))),_(_(_(v(_(_(v(_(v(T(Ue,He),k[1]),_(v(T(Re,se),-F[1]),v(T(ke,fe),I[1]))),S[2]),v(_(v(T(Ue,He),S[1]),_(v(T(_e,ee),-F[1]),v(T(xe,Z),I[1]))),-k[2])),_(v(_(v(T(Re,se),S[1]),_(v(T(_e,ee),-k[1]),v(T(W,U),I[1]))),F[2]),v(_(v(T(ke,fe),S[1]),_(v(T(xe,Z),-k[1]),v(T(W,U),F[1]))),-I[2]))),P[3]),v(_(_(v(_(v(T(We,$),k[1]),_(v(T(Re,se),-P[1]),v(T(ne,J),I[1]))),S[2]),v(_(v(T(We,$),S[1]),_(v(T(_e,ee),-P[1]),v(T(Y,B),I[1]))),-k[2])),_(v(_(v(T(Re,se),S[1]),_(v(T(_e,ee),-k[1]),v(T(W,U),I[1]))),P[2]),v(_(v(T(ne,J),S[1]),_(v(T(Y,B),-k[1]),v(T(W,U),P[1]))),-I[2]))),-F[3])),_(v(_(_(v(_(v(T(Ae,K),k[1]),_(v(T(ke,fe),-P[1]),v(T(ne,J),F[1]))),S[2]),v(_(v(T(Ae,K),S[1]),_(v(T(xe,Z),-P[1]),v(T(Y,B),F[1]))),-k[2])),_(v(_(v(T(ke,fe),S[1]),_(v(T(xe,Z),-k[1]),v(T(W,U),F[1]))),P[2]),v(_(v(T(ne,J),S[1]),_(v(T(Y,B),-k[1]),v(T(W,U),P[1]))),-F[2]))),I[3]),v(_(_(v(_(v(T(Oe,ye),P[1]),_(v(T(Ae,K),-O[1]),v(T(ue,te),F[1]))),k[2]),v(_(v(T(Oe,ye),k[1]),_(v(T(ke,fe),-O[1]),v(T(oe,le),F[1]))),-P[2])),_(v(_(v(T(Ae,K),k[1]),_(v(T(ke,fe),-P[1]),v(T(ne,J),F[1]))),O[2]),v(_(v(T(ue,te),k[1]),_(v(T(oe,le),-P[1]),v(T(ne,J),O[1]))),-F[2]))),S[3]))),_(_(v(_(_(v(_(v(T(Oe,ye),P[1]),_(v(T(Ae,K),-O[1]),v(T(ue,te),F[1]))),S[2]),v(_(v(T(Oe,ye),S[1]),_(v(T(xe,Z),-O[1]),v(T(ie,j),F[1]))),-P[2])),_(v(_(v(T(Ae,K),S[1]),_(v(T(xe,Z),-P[1]),v(T(Y,B),F[1]))),O[2]),v(_(v(T(ue,te),S[1]),_(v(T(ie,j),-P[1]),v(T(Y,B),O[1]))),-F[2]))),-k[3]),v(_(_(v(_(v(T(Oe,ye),k[1]),_(v(T(ke,fe),-O[1]),v(T(oe,le),F[1]))),S[2]),v(_(v(T(Oe,ye),S[1]),_(v(T(xe,Z),-O[1]),v(T(ie,j),F[1]))),-k[2])),_(v(_(v(T(ke,fe),S[1]),_(v(T(xe,Z),-k[1]),v(T(W,U),F[1]))),O[2]),v(_(v(T(oe,le),S[1]),_(v(T(ie,j),-k[1]),v(T(W,U),O[1]))),-F[2]))),P[3])),_(v(_(_(v(_(v(T(Ae,K),k[1]),_(v(T(ke,fe),-P[1]),v(T(ne,J),F[1]))),S[2]),v(_(v(T(Ae,K),S[1]),_(v(T(xe,Z),-P[1]),v(T(Y,B),F[1]))),-k[2])),_(v(_(v(T(ke,fe),S[1]),_(v(T(xe,Z),-k[1]),v(T(W,U),F[1]))),P[2]),v(_(v(T(ne,J),S[1]),_(v(T(Y,B),-k[1]),v(T(W,U),P[1]))),-F[2]))),-O[3]),v(_(_(v(_(v(T(ue,te),k[1]),_(v(T(oe,le),-P[1]),v(T(ne,J),O[1]))),S[2]),v(_(v(T(ue,te),S[1]),_(v(T(ie,j),-P[1]),v(T(Y,B),O[1]))),-k[2])),_(v(_(v(T(oe,le),S[1]),_(v(T(ie,j),-k[1]),v(T(W,U),O[1]))),P[2]),v(_(v(T(ne,J),S[1]),_(v(T(Y,B),-k[1]),v(T(W,U),P[1]))),-O[2]))),F[3]))))),dt=T(Ie,Ve);return dt[dt.length-1]}return L}var g=[l,o,c];function A(_){var T=g[_.length];return T||(T=g[_.length]=f(_.length)),T.apply(void 0,_)}function b(_,T,w,v,L,S,k,P){function O(F,I,D,U,B,j){switch(arguments.length){case 0:case 1:return 0;case 2:return v(F,I);case 3:return L(F,I,D);case 4:return S(F,I,D,U);case 5:return k(F,I,D,U,B);case 6:return P(F,I,D,U,B,j)}for(var Z=new Array(arguments.length),ee=0;ee<arguments.length;++ee)Z[ee]=arguments[ee];return _(Z)}return O}function M(){for(;g.length<=n;)g.push(f(g.length));m.exports=b.apply(void 0,[A].concat(g));for(var _=0;_<=n;++_)m.exports[_]=g[_]}M()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(s,m,x){var t=s("robust-determinant"),i=3;function a(d){var p=d===2?f:l;return d<i?p(t[d]):p(t)}function r(){return[[0]]}function n(d,p){return[[p[0]],[d[0][0]]]}function f(d){return function(y,g){return[d([[+g[0],+y[0][1]],[+g[1],+y[1][1]]]),d([[+y[0][0],+g[0]],[+y[1][0],+g[1]]]),d(y)]}}function l(d){return function(y,g){return[d([[+g[0],+y[0][1],+y[0][2]],[+g[1],+y[1][1],+y[1][2]],[+g[2],+y[2][1],+y[2][2]]]),d([[+y[0][0],+g[0],+y[0][2]],[+y[1][0],+g[1],+y[1][2]],[+y[2][0],+g[2],+y[2][2]]]),d([[+y[0][0],+y[0][1],+g[0]],[+y[1][0],+y[1][1],+g[1]],[+y[2][0],+y[2][1],+g[2]]]),d(y)]}}var o=[r,n];function c(d,p,y,g,A,b){return function(_,T){switch(_.length){case 0:return d(_,T);case 1:return p(_,T);case 2:return y(_,T);case 3:return g(_,T)}var w=A[_.length];return w||(w=A[_.length]=b(_.length)),w(_,T)}}function h(){for(;o.length<=i;)o.push(a(o.length));m.exports=c.apply(void 0,o.concat([o,a]));for(var d=0;d<i;++d)m.exports[d]=o[d]}h()},{"robust-determinant":280}],284:[function(s,m,x){var t=s("two-product"),i=s("robust-sum"),a=s("robust-scale"),r=s("robust-subtract"),n=5,f=11102230246251565e-32,l=(3+16*f)*f,o=(7+56*f)*f;function c(T,w,v,L){return function(k,P,O){var F=T(T(w(P[1],O[0]),w(-O[1],P[0])),T(w(k[1],P[0]),w(-P[1],k[0]))),I=T(w(k[1],O[0]),w(-O[1],k[0])),D=L(F,I);return D[D.length-1]}}function h(T,w,v,L){return function(k,P,O,F){var I=T(T(v(T(w(O[1],F[0]),w(-F[1],O[0])),P[2]),T(v(T(w(P[1],F[0]),w(-F[1],P[0])),-O[2]),v(T(w(P[1],O[0]),w(-O[1],P[0])),F[2]))),T(v(T(w(P[1],F[0]),w(-F[1],P[0])),k[2]),T(v(T(w(k[1],F[0]),w(-F[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),F[2])))),D=T(T(v(T(w(O[1],F[0]),w(-F[1],O[0])),k[2]),T(v(T(w(k[1],F[0]),w(-F[1],k[0])),-O[2]),v(T(w(k[1],O[0]),w(-O[1],k[0])),F[2]))),T(v(T(w(P[1],O[0]),w(-O[1],P[0])),k[2]),T(v(T(w(k[1],O[0]),w(-O[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),O[2])))),U=L(I,D);return U[U.length-1]}}function d(T,w,v,L){return function(k,P,O,F,I){var D=T(T(T(v(T(v(T(w(F[1],I[0]),w(-I[1],F[0])),O[2]),T(v(T(w(O[1],I[0]),w(-I[1],O[0])),-F[2]),v(T(w(O[1],F[0]),w(-F[1],O[0])),I[2]))),P[3]),T(v(T(v(T(w(F[1],I[0]),w(-I[1],F[0])),P[2]),T(v(T(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),v(T(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),-O[3]),v(T(v(T(w(O[1],I[0]),w(-I[1],O[0])),P[2]),T(v(T(w(P[1],I[0]),w(-I[1],P[0])),-O[2]),v(T(w(P[1],O[0]),w(-O[1],P[0])),I[2]))),F[3]))),T(v(T(v(T(w(O[1],F[0]),w(-F[1],O[0])),P[2]),T(v(T(w(P[1],F[0]),w(-F[1],P[0])),-O[2]),v(T(w(P[1],O[0]),w(-O[1],P[0])),F[2]))),-I[3]),T(v(T(v(T(w(F[1],I[0]),w(-I[1],F[0])),P[2]),T(v(T(w(P[1],I[0]),w(-I[1],P[0])),-F[2]),v(T(w(P[1],F[0]),w(-F[1],P[0])),I[2]))),k[3]),v(T(v(T(w(F[1],I[0]),w(-I[1],F[0])),k[2]),T(v(T(w(k[1],I[0]),w(-I[1],k[0])),-F[2]),v(T(w(k[1],F[0]),w(-F[1],k[0])),I[2]))),-P[3])))),T(T(v(T(v(T(w(P[1],I[0]),w(-I[1],P[0])),k[2]),T(v(T(w(k[1],I[0]),w(-I[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),I[2]))),F[3]),T(v(T(v(T(w(P[1],F[0]),w(-F[1],P[0])),k[2]),T(v(T(w(k[1],F[0]),w(-F[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),F[2]))),-I[3]),v(T(v(T(w(O[1],F[0]),w(-F[1],O[0])),P[2]),T(v(T(w(P[1],F[0]),w(-F[1],P[0])),-O[2]),v(T(w(P[1],O[0]),w(-O[1],P[0])),F[2]))),k[3]))),T(v(T(v(T(w(O[1],F[0]),w(-F[1],O[0])),k[2]),T(v(T(w(k[1],F[0]),w(-F[1],k[0])),-O[2]),v(T(w(k[1],O[0]),w(-O[1],k[0])),F[2]))),-P[3]),T(v(T(v(T(w(P[1],F[0]),w(-F[1],P[0])),k[2]),T(v(T(w(k[1],F[0]),w(-F[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),F[2]))),O[3]),v(T(v(T(w(P[1],O[0]),w(-O[1],P[0])),k[2]),T(v(T(w(k[1],O[0]),w(-O[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),O[2]))),-F[3]))))),U=T(T(T(v(T(v(T(w(F[1],I[0]),w(-I[1],F[0])),O[2]),T(v(T(w(O[1],I[0]),w(-I[1],O[0])),-F[2]),v(T(w(O[1],F[0]),w(-F[1],O[0])),I[2]))),k[3]),v(T(v(T(w(F[1],I[0]),w(-I[1],F[0])),k[2]),T(v(T(w(k[1],I[0]),w(-I[1],k[0])),-F[2]),v(T(w(k[1],F[0]),w(-F[1],k[0])),I[2]))),-O[3])),T(v(T(v(T(w(O[1],I[0]),w(-I[1],O[0])),k[2]),T(v(T(w(k[1],I[0]),w(-I[1],k[0])),-O[2]),v(T(w(k[1],O[0]),w(-O[1],k[0])),I[2]))),F[3]),v(T(v(T(w(O[1],F[0]),w(-F[1],O[0])),k[2]),T(v(T(w(k[1],F[0]),w(-F[1],k[0])),-O[2]),v(T(w(k[1],O[0]),w(-O[1],k[0])),F[2]))),-I[3]))),T(T(v(T(v(T(w(O[1],I[0]),w(-I[1],O[0])),P[2]),T(v(T(w(P[1],I[0]),w(-I[1],P[0])),-O[2]),v(T(w(P[1],O[0]),w(-O[1],P[0])),I[2]))),k[3]),v(T(v(T(w(O[1],I[0]),w(-I[1],O[0])),k[2]),T(v(T(w(k[1],I[0]),w(-I[1],k[0])),-O[2]),v(T(w(k[1],O[0]),w(-O[1],k[0])),I[2]))),-P[3])),T(v(T(v(T(w(P[1],I[0]),w(-I[1],P[0])),k[2]),T(v(T(w(k[1],I[0]),w(-I[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),I[2]))),O[3]),v(T(v(T(w(P[1],O[0]),w(-O[1],P[0])),k[2]),T(v(T(w(k[1],O[0]),w(-O[1],k[0])),-P[2]),v(T(w(k[1],P[0]),w(-P[1],k[0])),O[2]))),-I[3])))),B=L(D,U);return B[B.length-1]}}function p(T){var w=T===3?c:T===4?h:d;return w(i,t,a,r)}var y=p(3),g=p(4),A=[function(){return 0},function(){return 0},function(w,v){return v[0]-w[0]},function(w,v,L){var S=(w[1]-L[1])*(v[0]-L[0]),k=(w[0]-L[0])*(v[1]-L[1]),P=S-k,O;if(S>0){if(k<=0)return P;O=S+k}else if(S<0){if(k>=0)return P;O=-(S+k)}else return P;var F=l*O;return P>=F||P<=-F?P:y(w,v,L)},function(w,v,L,S){var k=w[0]-S[0],P=v[0]-S[0],O=L[0]-S[0],F=w[1]-S[1],I=v[1]-S[1],D=L[1]-S[1],U=w[2]-S[2],B=v[2]-S[2],j=L[2]-S[2],Z=P*D,ee=O*I,q=O*F,W=k*D,J=k*I,le=P*F,fe=U*(Z-ee)+B*(q-W)+j*(J-le),se=(Math.abs(Z)+Math.abs(ee))*Math.abs(U)+(Math.abs(q)+Math.abs(W))*Math.abs(B)+(Math.abs(J)+Math.abs(le))*Math.abs(j),H=o*se;return fe>H||-fe>H?fe:g(w,v,L,S)}];function b(T){var w=A[T.length];return w||(w=A[T.length]=p(T.length)),w.apply(void 0,T)}function M(T,w,v,L,S,k,P){return function(F,I,D,U,B){switch(arguments.length){case 0:case 1:return 0;case 2:return L(F,I);case 3:return S(F,I,D);case 4:return k(F,I,D,U);case 5:return P(F,I,D,U,B)}for(var j=new Array(arguments.length),Z=0;Z<arguments.length;++Z)j[Z]=arguments[Z];return T(j)}}function _(){for(;A.length<=n;)A.push(p(A.length));m.exports=M.apply(void 0,[b].concat(A));for(var T=0;T<=n;++T)m.exports[T]=A[T]}_()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(s,m,x){var t=s("robust-sum"),i=s("robust-scale");m.exports=a;function a(r,n){if(r.length===1)return i(n,r[0]);if(n.length===1)return i(r,n[0]);if(r.length===0||n.length===0)return[0];var f=[0];if(r.length<n.length)for(var l=0;l<r.length;++l)f=t(f,i(n,r[l]));else for(var l=0;l<n.length;++l)f=t(f,i(r,n[l]));return f}},{"robust-scale":286,"robust-sum":289}],286:[function(s,m,x){var t=s("two-product"),i=s("two-sum");m.exports=a;function a(r,n){var f=r.length;if(f===1){var l=t(r[0],n);return l[0]?l:[l[1]]}var o=new Array(2*f),c=[.1,.1],h=[.1,.1],d=0;t(r[0],n,c),c[0]&&(o[d++]=c[0]);for(var p=1;p<f;++p){t(r[p],n,h);var y=c[1];i(y,h[0],c),c[0]&&(o[d++]=c[0]);var g=h[1],A=c[1],b=g+A,M=b-g,_=A-M;c[1]=b,_&&(o[d++]=_)}return c[1]&&(o[d++]=c[1]),d===0&&(o[d++]=0),o.length=d,o}},{"two-product":306,"two-sum":307}],287:[function(s,m,x){m.exports=a;var t=s("robust-orientation")[3];function i(r,n,f,l){for(var o=0;o<2;++o){var c=r[o],h=n[o],d=Math.min(c,h),p=Math.max(c,h),y=f[o],g=l[o],A=Math.min(y,g),b=Math.max(y,g);if(b<d||p<A)return!1}return!0}function a(r,n,f,l){var o=t(r,f,l),c=t(n,f,l);if(o>0&&c>0||o<0&&c<0)return!1;var h=t(f,r,n),d=t(l,r,n);return h>0&&d>0||h<0&&d<0?!1:o===0&&c===0&&h===0&&d===0?i(r,n,f,l):!0}},{"robust-orientation":284}],288:[function(s,m,x){m.exports=i;function t(a,r){var n=a+r,f=n-a,l=n-f,o=r-f,c=a-l,h=c+o;return h?[h,n]:[n]}function i(a,r){var n=a.length|0,f=r.length|0;if(n===1&&f===1)return t(a[0],-r[0]);var l=n+f,o=new Array(l),c=0,h=0,d=0,p=Math.abs,y=a[h],g=p(y),A=-r[d],b=p(A),M,_;g<b?(_=y,h+=1,h<n&&(y=a[h],g=p(y))):(_=A,d+=1,d<f&&(A=-r[d],b=p(A))),h<n&&g<b||d>=f?(M=y,h+=1,h<n&&(y=a[h],g=p(y))):(M=A,d+=1,d<f&&(A=-r[d],b=p(A)));for(var T=M+_,w=T-M,v=_-w,L=v,S=T,k,P,O,F,I;h<n&&d<f;)g<b?(M=y,h+=1,h<n&&(y=a[h],g=p(y))):(M=A,d+=1,d<f&&(A=-r[d],b=p(A))),_=L,T=M+_,w=T-M,v=_-w,v&&(o[c++]=v),k=S+T,P=k-S,O=k-P,F=T-P,I=S-O,L=I+F,S=k;for(;h<n;)M=y,_=L,T=M+_,w=T-M,v=_-w,v&&(o[c++]=v),k=S+T,P=k-S,O=k-P,F=T-P,I=S-O,L=I+F,S=k,h+=1,h<n&&(y=a[h]);for(;d<f;)M=A,_=L,T=M+_,w=T-M,v=_-w,v&&(o[c++]=v),k=S+T,P=k-S,O=k-P,F=T-P,I=S-O,L=I+F,S=k,d+=1,d<f&&(A=-r[d]);return L&&(o[c++]=L),S&&(o[c++]=S),c||(o[c++]=0),o.length=c,o}},{}],289:[function(s,m,x){m.exports=i;function t(a,r){var n=a+r,f=n-a,l=n-f,o=r-f,c=a-l,h=c+o;return h?[h,n]:[n]}function i(a,r){var n=a.length|0,f=r.length|0;if(n===1&&f===1)return t(a[0],r[0]);var l=n+f,o=new Array(l),c=0,h=0,d=0,p=Math.abs,y=a[h],g=p(y),A=r[d],b=p(A),M,_;g<b?(_=y,h+=1,h<n&&(y=a[h],g=p(y))):(_=A,d+=1,d<f&&(A=r[d],b=p(A))),h<n&&g<b||d>=f?(M=y,h+=1,h<n&&(y=a[h],g=p(y))):(M=A,d+=1,d<f&&(A=r[d],b=p(A)));for(var T=M+_,w=T-M,v=_-w,L=v,S=T,k,P,O,F,I;h<n&&d<f;)g<b?(M=y,h+=1,h<n&&(y=a[h],g=p(y))):(M=A,d+=1,d<f&&(A=r[d],b=p(A))),_=L,T=M+_,w=T-M,v=_-w,v&&(o[c++]=v),k=S+T,P=k-S,O=k-P,F=T-P,I=S-O,L=I+F,S=k;for(;h<n;)M=y,_=L,T=M+_,w=T-M,v=_-w,v&&(o[c++]=v),k=S+T,P=k-S,O=k-P,F=T-P,I=S-O,L=I+F,S=k,h+=1,h<n&&(y=a[h]);for(;d<f;)M=A,_=L,T=M+_,w=T-M,v=_-w,v&&(o[c++]=v),k=S+T,P=k-S,O=k-P,F=T-P,I=S-O,L=I+F,S=k,d+=1,d<f&&(A=r[d]);return L&&(o[c++]=L),S&&(o[c++]=S),c||(o[c++]=0),o.length=c,o}},{}],290:[function(s,m,x){m.exports=a;var t=s("boundary-cells"),i=s("reduce-simplicial-complex");function a(r){return i(t(r))}},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(s,m,x){m.exports=d;var t=s("ndarray"),i=s("typedarray-pool"),a=s("ndarray-sort"),r=s("./lib/codegen");function n(p){for(var y=p.length,g=0,A=0;A<y;++A)g=Math.max(g,p[A].length)|0;return g-1}function f(p,y){for(var g=p.length,A=i.mallocUint8(g),b=0;b<g;++b)A[b]=p[b]<y|0;return A}function l(p,y){for(var g=p.length,A=y*(y+1)/2*g|0,b=i.mallocUint32(A*2),M=0,_=0;_<g;++_)for(var T=p[_],y=T.length,w=0;w<y;++w)for(var v=0;v<w;++v){var L=T[v],S=T[w];b[M++]=Math.min(L,S)|0,b[M++]=Math.max(L,S)|0}var k=M/2|0;a(t(b,[k,2]));for(var P=2,_=2;_<M;_+=2)b[_-2]===b[_]&&b[_-1]===b[_+1]||(b[P++]=b[_],b[P++]=b[_+1]);return t(b,[P/2|0,2])}function o(p,y,g,A){for(var b=p.data,M=p.shape[0],_=i.mallocDouble(M),T=0,w=0;w<M;++w){var v=b[2*w],L=b[2*w+1];if(g[v]!==g[L]){var S=y[v],k=y[L];b[2*T]=v,b[2*T+1]=L,_[T++]=(k-A)/(k-S)}}return p.shape[0]=T,t(_,[T])}function c(p,y){var g=i.mallocInt32(y*2),A=p.shape[0],b=p.data;g[0]=0;for(var M=0,_=0;_<A;++_){var T=b[2*_];if(T!==M){for(g[2*M+1]=_;++M<T;)g[2*M]=_,g[2*M+1]=_;g[2*M]=_}}for(g[2*M+1]=A;++M<y;)g[2*M]=g[2*M+1]=A;return g}function h(p){for(var y=p.shape[0]|0,g=p.data,A=new Array(y),b=0;b<y;++b)A[b]=[g[2*b],g[2*b+1]];return A}function d(p,y,g,A){g=g||0,typeof A=="undefined"&&(A=n(p));var b=p.length;if(b===0||A<1)return{cells:[],vertexIds:[],vertexWeights:[]};var M=f(y,+g),_=l(p,A),T=o(_,y,M,+g),w=c(_,y.length|0),v=r(A)(p,_.data,w,M),L=h(_),S=[].slice.call(T.data,0,T.shape[0]);return i.free(M),i.free(_.data),i.free(T.data),i.free(w),{cells:v,vertexIds:L,vertexWeights:S}}},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(s,m,x){m.exports=i;var t=[function(){function r(n,f,l,o){for(var c=n.length,h=[],d=0;d<c;++d){var p=n[d];p.length}return h}return r},function(){function r(f,l,o,c){for(var h=Math.min(o,c)|0,d=Math.max(o,c)|0,p=f[2*h],y=f[2*h+1];p<y;){var g=p+y>>1,A=l[2*g+1];if(A===d)return g;d<A?y=g:p=g+1}return p}function n(f,l,o,c){for(var h=f.length,d=[],p=0;p<h;++p){var y=f[p],g=y.length;if(g===2){var A=(c[y[0]]<<0)+(c[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0])]);break}}}return d}return n},function(){function r(f,l,o,c){for(var h=Math.min(o,c)|0,d=Math.max(o,c)|0,p=f[2*h],y=f[2*h+1];p<y;){var g=p+y>>1,A=l[2*g+1];if(A===d)return g;d<A?y=g:p=g+1}return p}function n(f,l,o,c){for(var h=f.length,d=[],p=0;p<h;++p){var y=f[p],g=y.length;if(g===3){var A=(c[y[0]]<<0)+(c[y[1]]<<1)+(c[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[2]),r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0]),r(o,l,y[1],y[2])]);break;case 3:d.push([r(o,l,y[0],y[2]),r(o,l,y[1],y[2])]);break;case 4:d.push([r(o,l,y[2],y[1]),r(o,l,y[2],y[0])]);break;case 5:d.push([r(o,l,y[2],y[1]),r(o,l,y[0],y[1])]);break;case 6:d.push([r(o,l,y[1],y[0]),r(o,l,y[2],y[0])]);break}}else if(g===2){var A=(c[y[0]]<<0)+(c[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0])]);break}}}return d}return n},function(){function r(f,l,o,c){for(var h=Math.min(o,c)|0,d=Math.max(o,c)|0,p=f[2*h],y=f[2*h+1];p<y;){var g=p+y>>1,A=l[2*g+1];if(A===d)return g;d<A?y=g:p=g+1}return p}function n(f,l,o,c){for(var h=f.length,d=[],p=0;p<h;++p){var y=f[p],g=y.length;if(g===4){var A=(c[y[0]]<<0)+(c[y[1]]<<1)+(c[y[2]]<<2)+(c[y[3]]<<3);if(A===0||A===15)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1]),r(o,l,y[0],y[2]),r(o,l,y[0],y[3])]);break;case 2:d.push([r(o,l,y[1],y[2]),r(o,l,y[1],y[0]),r(o,l,y[1],y[3])]);break;case 3:d.push([r(o,l,y[1],y[2]),r(o,l,y[0],y[2]),r(o,l,y[0],y[3])],[r(o,l,y[1],y[3]),r(o,l,y[1],y[2]),r(o,l,y[0],y[3])]);break;case 4:d.push([r(o,l,y[2],y[0]),r(o,l,y[2],y[1]),r(o,l,y[2],y[3])]);break;case 5:d.push([r(o,l,y[0],y[1]),r(o,l,y[2],y[1]),r(o,l,y[0],y[3])],[r(o,l,y[2],y[1]),r(o,l,y[2],y[3]),r(o,l,y[0],y[3])]);break;case 6:d.push([r(o,l,y[2],y[0]),r(o,l,y[1],y[0]),r(o,l,y[1],y[3])],[r(o,l,y[2],y[3]),r(o,l,y[2],y[0]),r(o,l,y[1],y[3])]);break;case 7:d.push([r(o,l,y[0],y[3]),r(o,l,y[1],y[3]),r(o,l,y[2],y[3])]);break;case 8:d.push([r(o,l,y[3],y[1]),r(o,l,y[3],y[0]),r(o,l,y[3],y[2])]);break;case 9:d.push([r(o,l,y[3],y[1]),r(o,l,y[0],y[1]),r(o,l,y[0],y[2])],[r(o,l,y[3],y[2]),r(o,l,y[3],y[1]),r(o,l,y[0],y[2])]);break;case 10:d.push([r(o,l,y[1],y[0]),r(o,l,y[3],y[0]),r(o,l,y[1],y[2])],[r(o,l,y[3],y[0]),r(o,l,y[3],y[2]),r(o,l,y[1],y[2])]);break;case 11:d.push([r(o,l,y[1],y[2]),r(o,l,y[0],y[2]),r(o,l,y[3],y[2])]);break;case 12:d.push([r(o,l,y[3],y[0]),r(o,l,y[2],y[0]),r(o,l,y[2],y[1])],[r(o,l,y[3],y[1]),r(o,l,y[3],y[0]),r(o,l,y[2],y[1])]);break;case 13:d.push([r(o,l,y[0],y[1]),r(o,l,y[2],y[1]),r(o,l,y[3],y[1])]);break;case 14:d.push([r(o,l,y[2],y[0]),r(o,l,y[1],y[0]),r(o,l,y[3],y[0])]);break}}else if(g===3){var A=(c[y[0]]<<0)+(c[y[1]]<<1)+(c[y[2]]<<2);if(A===0||A===7)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[2]),r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0]),r(o,l,y[1],y[2])]);break;case 3:d.push([r(o,l,y[0],y[2]),r(o,l,y[1],y[2])]);break;case 4:d.push([r(o,l,y[2],y[1]),r(o,l,y[2],y[0])]);break;case 5:d.push([r(o,l,y[2],y[1]),r(o,l,y[0],y[1])]);break;case 6:d.push([r(o,l,y[1],y[0]),r(o,l,y[2],y[0])]);break}}else if(g===2){var A=(c[y[0]]<<0)+(c[y[1]]<<1);if(A===0||A===3)continue;switch(A){case 0:break;case 1:d.push([r(o,l,y[0],y[1])]);break;case 2:d.push([r(o,l,y[1],y[0])]);break}}}return d}return n}];function i(a){return t[a]()}},{}],293:[function(s,m,x){var t=s("bit-twiddle"),i=s("union-find");function a(T){for(var w=0,v=Math.max,L=0,S=T.length;L<S;++L)w=v(w,T[L].length);return w-1}x.dimension=a;function r(T){for(var w=-1,v=Math.max,L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,O=k.length;P<O;++P)w=v(w,k[P]);return w+1}x.countVertices=r;function n(T){for(var w=new Array(T.length),v=0,L=T.length;v<L;++v)w[v]=T[v].slice(0);return w}x.cloneCells=n;function f(T,w){var v=T.length,L=T.length-w.length,S=Math.min;if(L)return L;switch(v){case 0:return 0;case 1:return T[0]-w[0];case 2:var k=T[0]+T[1]-w[0]-w[1];return k||S(T[0],T[1])-S(w[0],w[1]);case 3:var P=T[0]+T[1],O=w[0]+w[1];if(k=P+T[2]-(O+w[2]),k)return k;var F=S(T[0],T[1]),I=S(w[0],w[1]),k=S(F,T[2])-S(I,w[2]);return k||S(F+T[2],P)-S(I+w[2],O);default:var D=T.slice(0);D.sort();var U=w.slice(0);U.sort();for(var B=0;B<v;++B)if(L=D[B]-U[B],L)return L;return 0}}x.compareCells=f;function l(T,w){return f(T[0],w[0])}function o(T,w){if(w){for(var v=T.length,L=new Array(v),S=0;S<v;++S)L[S]=[T[S],w[S]];L.sort(l);for(var S=0;S<v;++S)T[S]=L[S][0],w[S]=L[S][1];return T}else return T.sort(f),T}x.normalize=o;function c(T){if(T.length===0)return[];for(var w=1,v=T.length,L=1;L<v;++L){var S=T[L];if(f(S,T[L-1])){if(L===w){w++;continue}T[w++]=S}}return T.length=w,T}x.unique=c;function h(T,w){for(var v=0,L=T.length-1,S=-1;v<=L;){var k=v+L>>1,P=f(T[k],w);P<=0?(P===0&&(S=k),v=k+1):P>0&&(L=k-1)}return S}x.findCell=h;function d(T,w){for(var v=new Array(T.length),L=0,S=v.length;L<S;++L)v[L]=[];for(var k=[],L=0,P=w.length;L<P;++L)for(var O=w[L],F=O.length,I=1,D=1<<F;I<D;++I){k.length=t.popCount(I);for(var U=0,B=0;B<F;++B)I&1<<B&&(k[U++]=O[B]);var j=h(T,k);if(!(j<0))for(;v[j++].push(L),!(j>=T.length||f(T[j],k)!==0););}return v}x.incidence=d;function p(T,w){if(!w)return d(c(g(T,0)),T);for(var v=new Array(w),L=0;L<w;++L)v[L]=[];for(var L=0,S=T.length;L<S;++L)for(var k=T[L],P=0,O=k.length;P<O;++P)v[k[P]].push(L);return v}x.dual=p;function y(T){for(var w=[],v=0,L=T.length;v<L;++v)for(var S=T[v],k=S.length|0,P=1,O=1<<k;P<O;++P){for(var F=[],I=0;I<k;++I)P>>>I&1&&F.push(S[I]);w.push(F)}return o(w)}x.explode=y;function g(T,w){if(w<0)return[];for(var v=[],L=(1<<w+1)-1,S=0;S<T.length;++S)for(var k=T[S],P=L;P<1<<k.length;P=t.nextCombination(P)){for(var O=new Array(w+1),F=0,I=0;I<k.length;++I)P&1<<I&&(O[F++]=k[I]);v.push(O)}return o(v)}x.skeleton=g;function A(T){for(var w=[],v=0,L=T.length;v<L;++v)for(var S=T[v],k=0,P=S.length;k<P;++k){for(var O=new Array(S.length-1),F=0,I=0;F<P;++F)F!==k&&(O[I++]=S[F]);w.push(O)}return o(w)}x.boundary=A;function b(T,w){for(var v=new i(w),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=k+1;P<S.length;++P)v.link(S[k],S[P]);for(var O=[],F=v.ranks,L=0;L<F.length;++L)F[L]=-1;for(var L=0;L<T.length;++L){var I=v.find(T[L][0]);F[I]<0?(F[I]=O.length,O.push([T[L].slice(0)])):O[F[I]].push(T[L].slice(0))}return O}function M(T){for(var w=c(o(g(T,0))),v=new i(w.length),L=0;L<T.length;++L)for(var S=T[L],k=0;k<S.length;++k)for(var P=h(w,[S[k]]),O=k+1;O<S.length;++O)v.link(P,h(w,[S[O]]));for(var F=[],I=v.ranks,L=0;L<I.length;++L)I[L]=-1;for(var L=0;L<T.length;++L){var D=v.find(h(w,[T[L][0]]));I[D]<0?(I[D]=F.length,F.push([T[L].slice(0)])):F[I[D]].push(T[L].slice(0))}return F}function _(T,w){return w?b(T,w):M(T)}x.connectedComponents=_},{"bit-twiddle":32,"union-find":309}],294:[function(s,m,x){arguments[4][32][0].apply(x,arguments)},{dup:32}],295:[function(s,m,x){arguments[4][293][0].apply(x,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(s,m,x){m.exports=t;function t(i){this.roots=new Array(i),this.ranks=new Array(i);for(var a=0;a<i;++a)this.roots[a]=a,this.ranks[a]=0}t.prototype.length=function(){return this.roots.length},t.prototype.makeSet=function(){var i=this.roots.length;return this.roots.push(i),this.ranks.push(0),i},t.prototype.find=function(i){for(var a=this.roots;a[i]!==i;){var r=a[i];a[i]=a[r],i=r}return i},t.prototype.link=function(i,a){var r=this.find(i),n=this.find(a);if(r!==n){var f=this.ranks,l=this.roots,o=f[r],c=f[n];o<c?l[r]=n:c<o?l[n]=r:(l[n]=r,++f[r])}}},{}],297:[function(s,m,x){m.exports=r;var t=s("robust-orientation"),i=s("simplicial-complex");function a(n,f,l){var o=Math.abs(t(n,f,l)),c=Math.sqrt(Math.pow(f[0]-l[0],2)+Math.pow(f[1]-l[1],2));return o/c}function r(n,f,l){for(var o=f.length,c=n.length,h=new Array(o),d=new Array(o),p=new Array(o),y=new Array(o),g=0;g<o;++g)h[g]=d[g]=-1,p[g]=1/0,y[g]=!1;for(var g=0;g<c;++g){var A=n[g];if(A.length!==2)throw new Error("Input must be a graph");var b=A[1],M=A[0];d[M]!==-1?d[M]=-2:d[M]=b,h[b]!==-1?h[b]=-2:h[b]=M}function _(q){if(y[q])return 1/0;var W=h[q],J=d[q];return W<0||J<0?1/0:a(f[q],f[W],f[J])}function T(q,W){var J=F[q],le=F[W];F[q]=le,F[W]=J,I[J]=W,I[le]=q}function w(q){return p[F[q]]}function v(q){return q&1?q-1>>1:(q>>1)-1}function L(q){for(var W=w(q);;){var J=W,le=2*q+1,fe=2*(q+1),se=q;if(le<U){var H=w(le);H<J&&(se=le,J=H)}if(fe<U){var Y=w(fe);Y<J&&(se=fe)}if(se===q)return q;T(q,se),q=se}}function S(q){for(var W=w(q);q>0;){var J=v(q);if(J>=0){var le=w(J);if(W<le){T(q,J),q=J;continue}}return q}}function k(){if(U>0){var q=F[0];return T(0,U-1),U-=1,L(0),q}return-1}function P(q,W){var J=F[q];return p[J]===W?q:(p[J]=-1/0,S(q),k(),p[J]=W,U+=1,S(U-1))}function O(q){if(!y[q]){y[q]=!0;var W=h[q],J=d[q];h[J]>=0&&(h[J]=W),d[W]>=0&&(d[W]=J),I[W]>=0&&P(I[W],_(W)),I[J]>=0&&P(I[J],_(J))}}for(var F=[],I=new Array(o),g=0;g<o;++g){var D=p[g]=_(g);D<1/0?(I[g]=F.length,F.push(g)):I[g]=-1}for(var U=F.length,g=U>>1;g>=0;--g)L(g);for(;;){var B=k();if(B<0||p[B]>l)break;O(B)}for(var j=[],g=0;g<o;++g)y[g]||(I[g]=j.length,j.push(f[g].slice()));j.length;function Z(q,W){if(q[W]<0)return W;var J=W,le=W;do{var fe=q[le];if(!y[le]||fe<0||fe===le||(le=fe,fe=q[le],!y[le]||fe<0||fe===le))break;le=fe,J=q[J]}while(J!==le);for(var se=W;se!==le;se=q[se])q[se]=le;return le}var ee=[];return n.forEach(function(q){var W=Z(h,q[0]),J=Z(d,q[1]);if(W>=0&&J>=0&&W!==J){var le=I[W],fe=I[J];le!==fe&&ee.push([le,fe])}}),i.unique(i.normalize(ee)),{positions:j,edges:ee}}},{"robust-orientation":284,"simplicial-complex":295}],298:[function(s,m,x){m.exports=a;var t=s("robust-orientation");function i(r,n){var f,l;if(n[0][0]<n[1][0])f=n[0],l=n[1];else if(n[0][0]>n[1][0])f=n[1],l=n[0];else{var o=Math.min(r[0][1],r[1][1]),c=Math.max(r[0][1],r[1][1]),h=Math.min(n[0][1],n[1][1]),d=Math.max(n[0][1],n[1][1]);return c<h?c-h:o>d?o-d:c-d}var p,y;r[0][1]<r[1][1]?(p=r[0],y=r[1]):(p=r[1],y=r[0]);var g=t(l,f,p);return g||(g=t(l,f,y),g)?g:y-l}function a(r,n){var f,l;if(n[0][0]<n[1][0])f=n[0],l=n[1];else if(n[0][0]>n[1][0])f=n[1],l=n[0];else return i(n,r);var o,c;if(r[0][0]<r[1][0])o=r[0],c=r[1];else if(r[0][0]>r[1][0])o=r[1],c=r[0];else return-i(r,n);var h=t(f,l,c),d=t(f,l,o);if(h<0){if(d<=0)return h}else if(h>0){if(d>=0)return h}else if(d)return d;if(h=t(c,o,l),d=t(c,o,f),h<0){if(d<=0)return h}else if(h>0){if(d>=0)return h}else if(d)return d;return l[0]-c[0]}},{"robust-orientation":284}],299:[function(s,m,x){m.exports=d;var t=s("binary-search-bounds"),i=s("functional-red-black-tree"),a=s("robust-orientation"),r=s("./lib/order-segments");function n(p,y,g){this.slabs=p,this.coordinates=y,this.horizontal=g}var f=n.prototype;function l(p,y){return p.y-y}function o(p,y){for(var g=null;p;){var A=p.key,b,M;A[0][0]<A[1][0]?(b=A[0],M=A[1]):(b=A[1],M=A[0]);var _=a(b,M,y);if(_<0)p=p.left;else if(_>0)if(y[0]!==A[1][0])g=p,p=p.right;else{var T=o(p.right,y);if(T)return T;p=p.left}else{if(y[0]!==A[1][0])return p;var T=o(p.right,y);if(T)return T;p=p.left}}return g}f.castUp=function(p){var y=t.le(this.coordinates,p[0]);if(y<0)return-1;this.slabs[y];var g=o(this.slabs[y],p),A=-1;if(g&&(A=g.value),this.coordinates[y]===p[0]){var b=null;if(g&&(b=g.key),y>0){var M=o(this.slabs[y-1],p);M&&(b?r(M.key,b)>0&&(b=M.key,A=M.value):(A=M.value,b=M.key))}var _=this.horizontal[y];if(_.length>0){var T=t.ge(_,p[1],l);if(T<_.length){var w=_[T];if(p[1]===w.y){if(w.closed)return w.index;for(;T<_.length-1&&_[T+1].y===p[1];)if(T=T+1,w=_[T],w.closed)return w.index;if(w.y===p[1]&&!w.start){if(T=T+1,T>=_.length)return A;w=_[T]}}if(w.start)if(b){var v=a(b[0],b[1],[p[0],w.y]);b[0][0]>b[1][0]&&(v=-v),v>0&&(A=w.index)}else A=w.index;else w.y!==p[1]&&(A=w.index)}}}return A};function c(p,y,g,A){this.y=p,this.index=y,this.start=g,this.closed=A}function h(p,y,g,A){this.x=p,this.segment=y,this.create=g,this.index=A}function d(p){for(var y=p.length,g=2*y,A=new Array(g),b=0;b<y;++b){var M=p[b],_=M[0][0]<M[1][0];A[2*b]=new h(M[0][0],M,_,b),A[2*b+1]=new h(M[1][0],M,!_,b)}A.sort(function(O,F){var I=O.x-F.x;return I||(I=O.create-F.create,I)?I:Math.min(O.segment[0][1],O.segment[1][1])-Math.min(F.segment[0][1],F.segment[1][1])});for(var T=i(r),w=[],v=[],L=[],b=0;b<g;){for(var S=A[b].x,k=[];b<g;){var P=A[b];if(P.x!==S)break;b+=1,P.segment[0][0]===P.x&&P.segment[1][0]===P.x?P.create&&(P.segment[0][1]<P.segment[1][1]?(k.push(new c(P.segment[0][1],P.index,!0,!0)),k.push(new c(P.segment[1][1],P.index,!1,!1))):(k.push(new c(P.segment[1][1],P.index,!0,!1)),k.push(new c(P.segment[0][1],P.index,!1,!0)))):P.create?T=T.insert(P.segment,P.index):T=T.remove(P.segment)}w.push(T.root),v.push(S),L.push(k)}return new n(w,v,L)}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(s,m,x){var t=s("robust-dot-product"),i=s("robust-sum");m.exports=n,m.exports.positive=f,m.exports.negative=l;function a(o,c){var h=i(t(o,c),[c[c.length-1]]);return h[h.length-1]}function r(o,c,h,d){var p=d-c,y=-c/p;y<0?y=0:y>1&&(y=1);for(var g=1-y,A=o.length,b=new Array(A),M=0;M<A;++M)b[M]=y*o[M]+g*h[M];return b}function n(o,c){for(var h=[],d=[],p=a(o[o.length-1],c),y=o[o.length-1],g=o[0],A=0;A<o.length;++A,y=g){g=o[A];var b=a(g,c);if(p<0&&b>0||p>0&&b<0){var M=r(y,b,g,p);h.push(M),d.push(M.slice())}b<0?d.push(g.slice()):b>0?h.push(g.slice()):(h.push(g.slice()),d.push(g.slice())),p=b}return{positive:h,negative:d}}function f(o,c){for(var h=[],d=a(o[o.length-1],c),p=o[o.length-1],y=o[0],g=0;g<o.length;++g,p=y){y=o[g];var A=a(y,c);(d<0&&A>0||d>0&&A<0)&&h.push(r(p,A,y,d)),A>=0&&h.push(y.slice()),d=A}return h}function l(o,c){for(var h=[],d=a(o[o.length-1],c),p=o[o.length-1],y=o[0],g=0;g<o.length;++g,p=y){y=o[g];var A=a(y,c);(d<0&&A>0||d>0&&A<0)&&h.push(r(p,A,y,d)),A<=0&&h.push(y.slice()),d=A}return h}},{"robust-dot-product":281,"robust-sum":289}],301:[function(s,m,x){(function(){var t={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function i(l){return r(f(l),arguments)}function a(l,o){return i.apply(null,[l].concat(o||[]))}function r(l,o){var c=1,h=l.length,d,p="",y,g,A,b,M,_,T,w;for(y=0;y<h;y++)if(typeof l[y]=="string")p+=l[y];else if(typeof l[y]=="object"){if(A=l[y],A.keys)for(d=o[c],g=0;g<A.keys.length;g++){if(d==null)throw new Error(i('[sprintf] Cannot access property "%s" of undefined value "%s"',A.keys[g],A.keys[g-1]));d=d[A.keys[g]]}else A.param_no?d=o[A.param_no]:d=o[c++];if(t.not_type.test(A.type)&&t.not_primitive.test(A.type)&&d instanceof Function&&(d=d()),t.numeric_arg.test(A.type)&&typeof d!="number"&&isNaN(d))throw new TypeError(i("[sprintf] expecting number but found %T",d));switch(t.number.test(A.type)&&(T=d>=0),A.type){case"b":d=parseInt(d,10).toString(2);break;case"c":d=String.fromCharCode(parseInt(d,10));break;case"d":case"i":d=parseInt(d,10);break;case"j":d=JSON.stringify(d,null,A.width?parseInt(A.width):0);break;case"e":d=A.precision?parseFloat(d).toExponential(A.precision):parseFloat(d).toExponential();break;case"f":d=A.precision?parseFloat(d).toFixed(A.precision):parseFloat(d);break;case"g":d=A.precision?String(Number(d.toPrecision(A.precision))):parseFloat(d);break;case"o":d=(parseInt(d,10)>>>0).toString(8);break;case"s":d=String(d),d=A.precision?d.substring(0,A.precision):d;break;case"t":d=String(!!d),d=A.precision?d.substring(0,A.precision):d;break;case"T":d=Object.prototype.toString.call(d).slice(8,-1).toLowerCase(),d=A.precision?d.substring(0,A.precision):d;break;case"u":d=parseInt(d,10)>>>0;break;case"v":d=d.valueOf(),d=A.precision?d.substring(0,A.precision):d;break;case"x":d=(parseInt(d,10)>>>0).toString(16);break;case"X":d=(parseInt(d,10)>>>0).toString(16).toUpperCase();break}t.json.test(A.type)?p+=d:(t.number.test(A.type)&&(!T||A.sign)?(w=T?"+":"-",d=d.toString().replace(t.sign,"")):w="",M=A.pad_char?A.pad_char==="0"?"0":A.pad_char.charAt(1):" ",_=A.width-(w+d).length,b=A.width&&_>0?M.repeat(_):"",p+=A.align?w+d+b:M==="0"?w+b+d:b+w+d)}return p}var n=Object.create(null);function f(l){if(n[l])return n[l];for(var o=l,c,h=[],d=0;o;){if((c=t.text.exec(o))!==null)h.push(c[0]);else if((c=t.modulo.exec(o))!==null)h.push("%");else if((c=t.placeholder.exec(o))!==null){if(c[2]){d|=1;var p=[],y=c[2],g=[];if((g=t.key.exec(y))!==null)for(p.push(g[1]);(y=y.substring(g[0].length))!=="";)if((g=t.key_access.exec(y))!==null)p.push(g[1]);else if((g=t.index_access.exec(y))!==null)p.push(g[1]);else throw new SyntaxError("[sprintf] failed to parse named argument key");else throw new SyntaxError("[sprintf] failed to parse named argument key");c[2]=p}else d|=2;if(d===3)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:c[0],param_no:c[1],keys:c[2],sign:c[3],pad_char:c[4],align:c[5],width:c[6],precision:c[7],type:c[8]})}else throw new SyntaxError("[sprintf] unexpected placeholder");o=o.substring(c[0].length)}return n[l]=h}typeof x!="undefined"&&(x.sprintf=i,x.vsprintf=a),typeof window!="undefined"&&(window.sprintf=i,window.vsprintf=a)})()},{}],302:[function(s,m,x){m.exports=l;var t=s("ndarray-extract-contour"),i=s("zero-crossings"),a={"2d":function(o,c,h){var d=o({order:c,scalarArguments:3,getters:h==="generic"?[0]:void 0,phase:function(y,g,A,b){return y>b|0},vertex:function(y,g,A,b,M,_,T,w,v,L,S,k,P){var O=(T<<0)+(w<<1)+(v<<2)+(L<<3)|0;if(!(O===0||O===15))switch(O){case 0:S.push([y-.5,g-.5]);break;case 1:S.push([y-.25-.25*(b+A-2*P)/(A-b),g-.25-.25*(M+A-2*P)/(A-M)]);break;case 2:S.push([y-.75-.25*(-b-A+2*P)/(b-A),g-.25-.25*(_+b-2*P)/(b-_)]);break;case 3:S.push([y-.5,g-.5-.5*(M+A+_+b-4*P)/(A-M+b-_)]);break;case 4:S.push([y-.25-.25*(_+M-2*P)/(M-_),g-.75-.25*(-M-A+2*P)/(M-A)]);break;case 5:S.push([y-.5-.5*(b+A+_+M-4*P)/(A-b+M-_),g-.5]);break;case 6:S.push([y-.5-.25*(-b-A+_+M)/(b-A+M-_),g-.5-.25*(-M-A+_+b)/(M-A+b-_)]);break;case 7:S.push([y-.75-.25*(_+M-2*P)/(M-_),g-.75-.25*(_+b-2*P)/(b-_)]);break;case 8:S.push([y-.75-.25*(-_-M+2*P)/(_-M),g-.75-.25*(-_-b+2*P)/(_-b)]);break;case 9:S.push([y-.5-.25*(b+A+-_-M)/(A-b+_-M),g-.5-.25*(M+A+-_-b)/(A-M+_-b)]);break;case 10:S.push([y-.5-.5*(-b-A+-_-M+4*P)/(b-A+_-M),g-.5]);break;case 11:S.push([y-.25-.25*(-_-M+2*P)/(_-M),g-.75-.25*(M+A-2*P)/(A-M)]);break;case 12:S.push([y-.5,g-.5-.5*(-M-A+-_-b+4*P)/(M-A+_-b)]);break;case 13:S.push([y-.75-.25*(b+A-2*P)/(A-b),g-.25-.25*(-_-b+2*P)/(_-b)]);break;case 14:S.push([y-.25-.25*(-b-A+2*P)/(b-A),g-.25-.25*(-M-A+2*P)/(M-A)]);break;case 15:S.push([y-.5,g-.5]);break}},cell:function(y,g,A,b,M,_,T,w,v){M?w.push([y,g]):w.push([g,y])}});return function(p,y){var g=[],A=[];return d(p,g,A,y),{positions:g,cells:A}}}};function r(o,c){var h=o.length+"d",d=a[h];if(d)return d(t,o,c)}function n(o,c){for(var h=i(o,c),d=h.length,p=new Array(d),y=new Array(d),g=0;g<d;++g)p[g]=[h[g]],y[g]=[g];return{positions:p,cells:y}}var f={};function l(o,c){if(o.dimension<=0)return{positions:[],cells:[]};if(o.dimension===1)return n(o,c);var h=o.order.join()+"-"+o.dtype,d=f[h],c=+c||0;return d||(d=f[h]=r(o.order,o.dtype)),d(o,c)}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(s,m,x){(function(t){(function(){m.exports=f;var i=s("vectorize-text"),a=window||t.global||{},r=a.__TEXT_CACHE||{};a.__TEXT_CACHE={};function n(l){for(var o=l.cells,c=l.positions,h=new Float32Array(o.length*6),d=0,p=0,y=0;y<o.length;++y)for(var g=o[y],A=0;A<3;++A){var b=c[g[A]];h[d++]=b[0],h[d++]=b[1]+1.4,p=Math.max(b[0],p)}return{data:h,shape:p}}function f(l,o,c){var c=c||{},h=r[l];h||(h=r[l]={" ":{data:new Float32Array(0),shape:.2}});var d=h[o];if(!d)if(o.length<=1||!/\d/.test(o))d=h[o]=n(i(o,{triangles:!0,font:l,textAlign:c.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var p=o.split(/(\d|\s)/),y=new Array(p.length),g=0,A=0,b=0;b<p.length;++b)y[b]=f(l,p[b]),g+=y[b].data.length,A+=y[b].shape,b>0&&(A+=.02);for(var M=new Float32Array(g),_=0,T=-.5*A,b=0;b<y.length;++b){for(var w=y[b].data,v=0;v<w.length;v+=2)M[_++]=w[v]+T,M[_++]=w[v+1];T+=y[b].shape+.02}d=h[o]={data:M,shape:A}}return d}}).call(this)}).call(this,s("_process"))},{_process:5,"vectorize-text":311}],304:[function(s,m,x){var t=s("parse-unit");m.exports=n;var i=96;function a(f,l){var o=t(getComputedStyle(f).getPropertyValue(l));return o[0]*n(o[1],f)}function r(f,l){var o=document.createElement("div");o.style["font-size"]="128"+f,l.appendChild(o);var c=a(o,"font-size")/128;return l.removeChild(o),c}function n(f,l){switch(l=l||document.body,f=(f||"px").trim().toLowerCase(),(l===window||l===document)&&(l=document.body),f){case"%":return l.clientHeight/100;case"ch":case"ex":return r(f,l);case"em":return a(l,"font-size");case"rem":return a(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return i;case"cm":return i/2.54;case"mm":return i/25.4;case"pt":return i/72;case"pc":return i/6}return 1}},{"parse-unit":265}],305:[function(s,m,x){m.exports=y;var t=s("filtered-vector"),i=s("gl-mat4/invert"),a=s("gl-mat4/rotate"),r=s("gl-vec3/cross"),n=s("gl-vec3/normalize"),f=s("gl-vec3/dot");function l(g,A,b){return Math.sqrt(Math.pow(g,2)+Math.pow(A,2)+Math.pow(b,2))}function o(g){return Math.min(1,Math.max(-1,g))}function c(g){var A=Math.abs(g[0]),b=Math.abs(g[1]),M=Math.abs(g[2]),_=[0,0,0];A>Math.max(b,M)?_[2]=1:b>Math.max(A,M)?_[0]=1:_[1]=1;for(var T=0,w=0,v=0;v<3;++v)T+=g[v]*g[v],w+=_[v]*g[v];for(var v=0;v<3;++v)_[v]-=w/T*g[v];return n(_,_),_}function h(g,A,b,M,_,T,w,v){this.center=t(b),this.up=t(M),this.right=t(_),this.radius=t([T]),this.angle=t([w,v]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(g,A),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var L=0;L<16;++L)this.computedMatrix[L]=.5;this.recalcMatrix(0)}var d=h.prototype;d.setDistanceLimits=function(g,A){g>0?g=Math.log(g):g=-1/0,A>0?A=Math.log(A):A=1/0,A=Math.max(A,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=A},d.getDistanceLimits=function(g){var A=this.radius.bounds[0];return g?(g[0]=Math.exp(A[0][0]),g[1]=Math.exp(A[1][0]),g):[Math.exp(A[0][0]),Math.exp(A[1][0])]},d.recalcMatrix=function(g){this.center.curve(g),this.up.curve(g),this.right.curve(g),this.radius.curve(g),this.angle.curve(g);for(var A=this.computedUp,b=this.computedRight,M=0,_=0,T=0;T<3;++T)_+=A[T]*b[T],M+=A[T]*A[T];for(var w=Math.sqrt(M),v=0,T=0;T<3;++T)b[T]-=A[T]*_/M,v+=b[T]*b[T],A[T]/=w;for(var L=Math.sqrt(v),T=0;T<3;++T)b[T]/=L;var S=this.computedToward;r(S,A,b),n(S,S);for(var k=Math.exp(this.computedRadius[0]),P=this.computedAngle[0],O=this.computedAngle[1],F=Math.cos(P),I=Math.sin(P),D=Math.cos(O),U=Math.sin(O),B=this.computedCenter,j=F*D,Z=I*D,ee=U,q=-F*U,W=-I*U,J=D,le=this.computedEye,fe=this.computedMatrix,T=0;T<3;++T){var se=j*b[T]+Z*S[T]+ee*A[T];fe[4*T+1]=q*b[T]+W*S[T]+J*A[T],fe[4*T+2]=se,fe[4*T+3]=0}var H=fe[1],Y=fe[5],ne=fe[9],te=fe[2],K=fe[6],$=fe[10],ae=Y*$-ne*K,ie=ne*te-H*$,oe=H*K-Y*te,ue=l(ae,ie,oe);ae/=ue,ie/=ue,oe/=ue,fe[0]=ae,fe[4]=ie,fe[8]=oe;for(var T=0;T<3;++T)le[T]=B[T]+fe[2+4*T]*k;for(var T=0;T<3;++T){for(var v=0,ye=0;ye<3;++ye)v+=fe[T+4*ye]*le[ye];fe[12+T]=-v}fe[15]=1},d.getMatrix=function(g,A){this.recalcMatrix(g);var b=this.computedMatrix;if(A){for(var M=0;M<16;++M)A[M]=b[M];return A}return b};var p=[0,0,0];d.rotate=function(g,A,b,M){if(this.angle.move(g,A,b),M){this.recalcMatrix(g);var _=this.computedMatrix;p[0]=_[2],p[1]=_[6],p[2]=_[10];for(var T=this.computedUp,w=this.computedRight,v=this.computedToward,L=0;L<3;++L)_[4*L]=T[L],_[4*L+1]=w[L],_[4*L+2]=v[L];a(_,_,M,p);for(var L=0;L<3;++L)T[L]=_[4*L],w[L]=_[4*L+1];this.up.set(g,T[0],T[1],T[2]),this.right.set(g,w[0],w[1],w[2])}},d.pan=function(g,A,b,M){A=A||0,b=b||0,M=M||0,this.recalcMatrix(g);var _=this.computedMatrix;Math.exp(this.computedRadius[0]);var T=_[1],w=_[5],v=_[9],L=l(T,w,v);T/=L,w/=L,v/=L;var S=_[0],k=_[4],P=_[8],O=S*T+k*w+P*v;S-=T*O,k-=w*O,P-=v*O;var F=l(S,k,P);S/=F,k/=F,P/=F;var I=S*A+T*b,D=k*A+w*b,U=P*A+v*b;this.center.move(g,I,D,U);var B=Math.exp(this.computedRadius[0]);B=Math.max(1e-4,B+M),this.radius.set(g,Math.log(B))},d.translate=function(g,A,b,M){this.center.move(g,A||0,b||0,M||0)},d.setMatrix=function(g,A,b,M){var _=1;typeof b=="number"&&(_=b|0),(_<0||_>3)&&(_=1);var T=(_+2)%3;A||(this.recalcMatrix(g),A=this.computedMatrix);var w=A[_],v=A[_+4],L=A[_+8];if(M){var k=Math.abs(w),P=Math.abs(v),O=Math.abs(L),F=Math.max(k,P,O);k===F?(w=w<0?-1:1,v=L=0):O===F?(L=L<0?-1:1,w=v=0):(v=v<0?-1:1,w=L=0)}else{var S=l(w,v,L);w/=S,v/=S,L/=S}var I=A[T],D=A[T+4],U=A[T+8],B=I*w+D*v+U*L;I-=w*B,D-=v*B,U-=L*B;var j=l(I,D,U);I/=j,D/=j,U/=j;var Z=v*U-L*D,ee=L*I-w*U,q=w*D-v*I,W=l(Z,ee,q);Z/=W,ee/=W,q/=W,this.center.jump(g,ke,Ae,Oe),this.radius.idle(g),this.up.jump(g,w,v,L),this.right.jump(g,I,D,U);var J,le;if(_===2){var fe=A[1],se=A[5],H=A[9],Y=fe*I+se*D+H*U,ne=fe*Z+se*ee+H*q;ae<0?J=-Math.PI/2:J=Math.PI/2,le=Math.atan2(ne,Y)}else{var te=A[2],K=A[6],$=A[10],ae=te*w+K*v+$*L,ie=te*I+K*D+$*U,oe=te*Z+K*ee+$*q;J=Math.asin(o(ae)),le=Math.atan2(oe,ie)}this.angle.jump(g,le,J),this.recalcMatrix(g);var ue=A[2],ye=A[6],ce=A[10],me=this.computedMatrix;i(me,A);var xe=me[15],ke=me[12]/xe,Ae=me[13]/xe,Oe=me[14]/xe,He=Math.exp(this.computedRadius[0]);this.center.jump(g,ke-ue*He,Ae-ye*He,Oe-ce*He)},d.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},d.idle=function(g){this.center.idle(g),this.up.idle(g),this.right.idle(g),this.radius.idle(g),this.angle.idle(g)},d.flush=function(g){this.center.flush(g),this.up.flush(g),this.right.flush(g),this.radius.flush(g),this.angle.flush(g)},d.setDistance=function(g,A){A>0&&this.radius.set(g,Math.log(A))},d.lookAt=function(g,A,b,M){this.recalcMatrix(g),A=A||this.computedEye,b=b||this.computedCenter,M=M||this.computedUp;var _=M[0],T=M[1],w=M[2],v=l(_,T,w);if(!(v<1e-6)){_/=v,T/=v,w/=v;var L=A[0]-b[0],S=A[1]-b[1],k=A[2]-b[2],P=l(L,S,k);if(!(P<1e-6)){L/=P,S/=P,k/=P;var O=this.computedRight,F=O[0],I=O[1],D=O[2],U=_*F+T*I+w*D;F-=U*_,I-=U*T,D-=U*w;var B=l(F,I,D);if(!(B<.01&&(F=T*k-w*S,I=w*L-_*k,D=_*S-T*L,B=l(F,I,D),B<1e-6))){F/=B,I/=B,D/=B,this.up.set(g,_,T,w),this.right.set(g,F,I,D),this.center.set(g,b[0],b[1],b[2]),this.radius.set(g,Math.log(P));var j=T*D-w*I,Z=w*F-_*D,ee=_*I-T*F,q=l(j,Z,ee);j/=q,Z/=q,ee/=q;var W=_*L+T*S+w*k,J=F*L+I*S+D*k,le=j*L+Z*S+ee*k,fe=Math.asin(o(W)),se=Math.atan2(le,J),H=this.angle._state,Y=H[H.length-1],ne=H[H.length-2];Y=Y%(2*Math.PI);var te=Math.abs(Y+2*Math.PI-se),K=Math.abs(Y-se),$=Math.abs(Y-2*Math.PI-se);te<K&&(Y+=2*Math.PI),$<K&&(Y-=2*Math.PI),this.angle.jump(this.angle.lastT(),Y,ne),this.angle.set(g,se,fe)}}}};function y(g){g=g||{};var A=g.center||[0,0,0],b=g.up||[0,1,0],M=g.right||c(b),_=g.radius||1,T=g.theta||0,w=g.phi||0;if(A=[].slice.call(A,0,3),b=[].slice.call(b,0,3),n(b,b),M=[].slice.call(M,0,3),n(M,M),"eye"in g){var v=g.eye,L=[v[0]-A[0],v[1]-A[1],v[2]-A[2]];r(M,L,b),l(M[0],M[1],M[2])<1e-6?M=c(b):n(M,M),_=l(L[0],L[1],L[2]);var S=f(b,L)/_,k=f(M,L)/_;w=Math.acos(S),T=Math.acos(k)}return _=Math.log(_),new h(g.zoomMin,g.zoomMax,A,b,M,_,T,w)}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(s,m,x){m.exports=i;var t=+(Math.pow(2,27)+1);function i(a,r,n){var f=a*r,l=t*a,o=l-a,c=l-o,h=a-c,d=t*r,p=d-r,y=d-p,g=r-y,A=f-c*y,b=A-h*y,M=b-c*g,_=h*g-M;return n?(n[0]=_,n[1]=f,n):[_,f]}},{}],307:[function(s,m,x){m.exports=t;function t(i,a,r){var n=i+a,f=n-i,l=n-f,o=a-f,c=i-l;return r?(r[0]=c+o,r[1]=n,r):[c+o,n]}},{}],308:[function(s,m,x){(function(t){(function(){var i=s("bit-twiddle"),a=s("dup"),r=s("buffer").Buffer;t.__TYPEDARRAY_POOL||(t.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var n=typeof Uint8ClampedArray!="undefined",f=typeof BigUint64Array!="undefined",l=typeof BigInt64Array!="undefined",o=t.__TYPEDARRAY_POOL;o.UINT8C||(o.UINT8C=a([32,0])),o.BIGUINT64||(o.BIGUINT64=a([32,0])),o.BIGINT64||(o.BIGINT64=a([32,0])),o.BUFFER||(o.BUFFER=a([32,0]));var c=o.DATA,h=o.BUFFER;x.free=function(I){if(r.isBuffer(I))h[i.log2(I.length)].push(I);else{if(Object.prototype.toString.call(I)!=="[object ArrayBuffer]"&&(I=I.buffer),!I)return;var D=I.length||I.byteLength,U=i.log2(D)|0;c[U].push(I)}};function d(F){if(!!F){var I=F.length||F.byteLength,D=i.log2(I);c[D].push(F)}}function p(F){d(F.buffer)}x.freeUint8=x.freeUint16=x.freeUint32=x.freeBigUint64=x.freeInt8=x.freeInt16=x.freeInt32=x.freeBigInt64=x.freeFloat32=x.freeFloat=x.freeFloat64=x.freeDouble=x.freeUint8Clamped=x.freeDataView=p,x.freeArrayBuffer=d,x.freeBuffer=function(I){h[i.log2(I.length)].push(I)},x.malloc=function(I,D){if(D===void 0||D==="arraybuffer")return y(I);switch(D){case"uint8":return g(I);case"uint16":return A(I);case"uint32":return b(I);case"int8":return M(I);case"int16":return _(I);case"int32":return T(I);case"float":case"float32":return w(I);case"double":case"float64":return v(I);case"uint8_clamped":return L(I);case"bigint64":return k(I);case"biguint64":return S(I);case"buffer":return O(I);case"data":case"dataview":return P(I);default:return null}return null};function y(F){var F=i.nextPow2(F),I=i.log2(F),D=c[I];return D.length>0?D.pop():new ArrayBuffer(F)}x.mallocArrayBuffer=y;function g(F){return new Uint8Array(y(F),0,F)}x.mallocUint8=g;function A(F){return new Uint16Array(y(2*F),0,F)}x.mallocUint16=A;function b(F){return new Uint32Array(y(4*F),0,F)}x.mallocUint32=b;function M(F){return new Int8Array(y(F),0,F)}x.mallocInt8=M;function _(F){return new Int16Array(y(2*F),0,F)}x.mallocInt16=_;function T(F){return new Int32Array(y(4*F),0,F)}x.mallocInt32=T;function w(F){return new Float32Array(y(4*F),0,F)}x.mallocFloat32=x.mallocFloat=w;function v(F){return new Float64Array(y(8*F),0,F)}x.mallocFloat64=x.mallocDouble=v;function L(F){return n?new Uint8ClampedArray(y(F),0,F):g(F)}x.mallocUint8Clamped=L;function S(F){return f?new BigUint64Array(y(8*F),0,F):null}x.mallocBigUint64=S;function k(F){return l?new BigInt64Array(y(8*F),0,F):null}x.mallocBigInt64=k;function P(F){return new DataView(y(F),0,F)}x.mallocDataView=P;function O(F){F=i.nextPow2(F);var I=i.log2(F),D=h[I];return D.length>0?D.pop():new r(F)}x.mallocBuffer=O,x.clearCache=function(){for(var I=0;I<32;++I)o.UINT8[I].length=0,o.UINT16[I].length=0,o.UINT32[I].length=0,o.INT8[I].length=0,o.INT16[I].length=0,o.INT32[I].length=0,o.FLOAT[I].length=0,o.DOUBLE[I].length=0,o.BIGUINT64[I].length=0,o.BIGINT64[I].length=0,o.UINT8C[I].length=0,c[I].length=0,h[I].length=0}}).call(this)}).call(this,typeof u!="undefined"?u:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(s,m,x){m.exports=t;function t(a){this.roots=new Array(a),this.ranks=new Array(a);for(var r=0;r<a;++r)this.roots[r]=r,this.ranks[r]=0}var i=t.prototype;Object.defineProperty(i,"length",{get:function(){return this.roots.length}}),i.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},i.find=function(a){for(var r=a,n=this.roots;n[a]!==a;)a=n[a];for(;n[r]!==a;){var f=n[r];n[r]=a,r=f}return a},i.link=function(a,r){var n=this.find(a),f=this.find(r);if(n!==f){var l=this.ranks,o=this.roots,c=l[n],h=l[f];c<h?o[n]=f:h<c?o[f]=n:(o[f]=n,++l[n])}}},{}],310:[function(s,m,x){function t(r,n){for(var f=1,l=r.length,o=r[0],c=r[0],h=1;h<l;++h)if(c=o,o=r[h],n(o,c)){if(h===f){f++;continue}r[f++]=o}return r.length=f,r}function i(r){for(var n=1,f=r.length,l=r[0],o=r[0],c=1;c<f;++c,o=l)if(o=l,l=r[c],l!==o){if(c===n){n++;continue}r[n++]=l}return r.length=n,r}function a(r,n,f){return r.length===0?r:n?(f||r.sort(n),t(r,n)):(f||r.sort(),i(r))}m.exports=a},{}],311:[function(s,m,x){m.exports=r;var t=s("./lib/vtext"),i=null,a=null;typeof document!="undefined"&&(i=document.createElement("canvas"),i.width=8192,i.height=1024,a=i.getContext("2d"));function r(n,f){return(typeof f!="object"||f===null)&&(f={}),t(n,f.canvas||i,f.context||a,f)}},{"./lib/vtext":312}],312:[function(s,m,x){m.exports=S,m.exports.processPixels=L;var t=s("surface-nets"),i=s("ndarray"),a=s("simplify-planar-graph"),r=s("clean-pslg"),n=s("cdt2d"),f=s("planar-graph-to-polyline"),l="b",o="b|",c="i",h="i|",d="sup",p="+",y="+1",g="sub",A="-",b="-1";function M(k,P,O,F){for(var I="<"+k+">",D="</"+k+">",U=I.length,B=D.length,j=P[0]===p||P[0]===A,Z=0,ee=-B;Z>-1&&(Z=O.indexOf(I,Z),!(Z===-1||(ee=O.indexOf(D,Z+U),ee===-1)||ee<=Z));){for(var q=Z;q<ee+B;++q)if(q<Z+U||q>=ee)F[q]=null,O=O.substr(0,q)+" "+O.substr(q+1);else if(F[q]!==null){var W=F[q].indexOf(P[0]);W===-1?F[q]+=P:j&&(F[q]=F[q].substr(0,W+1)+(1+parseInt(F[q][W+1]))+F[q].substr(W+2))}var J=Z+U,le=O.substr(J,ee-J),fe=le.indexOf(I);fe!==-1?Z=fe:Z=ee+B}return F}function _(k,P,O){for(var F=P.textAlign||"start",I=P.textBaseline||"alphabetic",D=[1<<30,1<<30],U=[0,0],B=k.length,j=0;j<B;++j)for(var Z=k[j],ee=0;ee<2;++ee)D[ee]=Math.min(D[ee],Z[ee])|0,U[ee]=Math.max(U[ee],Z[ee])|0;var q=0;switch(F){case"center":q=-.5*(D[0]+U[0]);break;case"right":case"end":q=-U[0];break;case"left":case"start":q=-D[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+F+"'")}var W=0;switch(I){case"hanging":case"top":W=-D[1];break;case"middle":W=-.5*(D[1]+U[1]);break;case"alphabetic":case"ideographic":W=-3*O;break;case"bottom":W=-U[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+I+"'")}var J=1/O;return"lineHeight"in P?J*=+P.lineHeight:"width"in P?J=P.width/(U[0]-D[0]):"height"in P&&(J=P.height/(U[1]-D[1])),k.map(function(le){return[J*(le[0]+q),J*(le[1]+W)]})}function T(k,P,O,F,I,D){O=O.replace(/\n/g,""),D.breaklines===!0?O=O.replace(/\<br\>/g,`
`):O=O.replace(/\<br\>/g," ");var U="",B=[];for(Y=0;Y<O.length;++Y)B[Y]=U;D.bolds===!0&&(B=M(l,o,O,B)),D.italics===!0&&(B=M(c,h,O,B)),D.superscripts===!0&&(B=M(d,y,O,B)),D.subscripts===!0&&(B=M(g,b,O,B));var j=[],Z="";for(Y=0;Y<O.length;++Y)B[Y]!==null&&(Z+=O[Y],j.push(B[Y]));var ee=Z.split(`
`),q=ee.length,W=Math.round(I*F),J=F,le=F*2,fe=0,se=q*W+le;k.height<se&&(k.height=se),P.fillStyle="#000",P.fillRect(0,0,k.width,k.height),P.fillStyle="#fff";var H,Y,ne,te,K,$=0,ae="";function ie(){if(ae!==""){var Oe=P.measureText(ae).width;P.fillText(ae,J+ne,le+te),ne+=Oe}}function oe(){return""+Math.round(K)+"px "}function ue(Oe,He){var Ge=""+P.font;if(D.subscripts===!0){var _e=Oe.indexOf(A),Re=He.indexOf(A),We=_e>-1?parseInt(Oe[1+_e]):0,qe=Re>-1?parseInt(He[1+Re]):0;We!==qe&&(Ge=Ge.replace(oe(),"?px "),K*=Math.pow(.75,qe-We),Ge=Ge.replace("?px ",oe())),te+=.25*W*(qe-We)}if(D.superscripts===!0){var Ue=Oe.indexOf(p),Ie=He.indexOf(p),Ve=Ue>-1?parseInt(Oe[1+Ue]):0,dt=Ie>-1?parseInt(He[1+Ie]):0;Ve!==dt&&(Ge=Ge.replace(oe(),"?px "),K*=Math.pow(.75,dt-Ve),Ge=Ge.replace("?px ",oe())),te-=.25*W*(dt-Ve)}if(D.bolds===!0){var Rt=Oe.indexOf(o)>-1,Gt=He.indexOf(o)>-1;!Rt&&Gt&&(kt?Ge=Ge.replace("italic ","italic bold "):Ge="bold "+Ge),Rt&&!Gt&&(Ge=Ge.replace("bold ",""))}if(D.italics===!0){var kt=Oe.indexOf(h)>-1,zt=He.indexOf(h)>-1;!kt&&zt&&(Ge="italic "+Ge),kt&&!zt&&(Ge=Ge.replace("italic ",""))}P.font=Ge}for(H=0;H<q;++H){var ye=ee[H]+`
`;for(ne=0,te=H*W,K=F,ae="",Y=0;Y<ye.length;++Y){var ce=Y+$<j.length?j[Y+$]:j[j.length-1];U===ce?ae+=ye[Y]:(ie(),ae=ye[Y],ce!==void 0&&(ue(U,ce),U=ce))}ie(),$+=ye.length;var me=Math.round(ne+2*J)|0;fe<me&&(fe=me)}var xe=fe,ke=le+W*q,Ae=i(P.getImageData(0,0,xe,ke).data,[ke,xe,4]);return Ae.pick(-1,-1,0).transpose(1,0)}function w(k,P){var O=t(k,128);return P?a(O.cells,O.positions,.25):{edges:O.cells,positions:O.positions}}function v(k,P,O,F){var I=w(k,F),D=_(I.positions,P,O),U=I.edges,B=P.orientation==="ccw";if(r(D,U),P.polygons||P.polygon||P.polyline){for(var j=f(U,D),Z=new Array(j.length),ee=0;ee<j.length;++ee){for(var q=j[ee],W=new Array(q.length),J=0;J<q.length;++J){for(var le=q[J],fe=new Array(le.length),se=0;se<le.length;++se)fe[se]=D[le[se]].slice();B&&fe.reverse(),W[J]=fe}Z[ee]=W}return Z}else return P.triangles||P.triangulate||P.triangle?{cells:n(D,U,{delaunay:!1,exterior:!1,interior:!0}),positions:D}:{edges:U,positions:D}}function L(k,P,O){try{return v(k,P,O,!0)}catch{}try{return v(k,P,O,!1)}catch{}return P.polygons||P.polyline||P.polygon?[]:P.triangles||P.triangulate||P.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}function S(k,P,O,F){var I=64,D=1.25,U={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};F&&(F.size&&F.size>0&&(I=F.size),F.lineSpacing&&F.lineSpacing>0&&(D=F.lineSpacing),F.styletags&&F.styletags.breaklines&&(U.breaklines=!!F.styletags.breaklines),F.styletags&&F.styletags.bolds&&(U.bolds=!!F.styletags.bolds),F.styletags&&F.styletags.italics&&(U.italics=!!F.styletags.italics),F.styletags&&F.styletags.subscripts&&(U.subscripts=!!F.styletags.subscripts),F.styletags&&F.styletags.superscripts&&(U.superscripts=!!F.styletags.superscripts)),O.font=[F.fontStyle,F.fontVariant,F.fontWeight,I+"px",F.font].filter(function(j){return j}).join(" "),O.textAlign="start",O.textBaseline="alphabetic",O.direction="ltr";var B=T(P,O,k,I,D,U);return L(B,F,I)}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(s,m,x){(function(){if(typeof ses!="undefined"&&ses.ok&&!ses.ok())return;function i(L){L.permitHostObjects___&&L.permitHostObjects___(i)}typeof ses!="undefined"&&(ses.weakMapPermitHostObjects=i);var a=!1;if(typeof WeakMap=="function"){var r=WeakMap;if(!(typeof navigator!="undefined"&&/Firefox/.test(navigator.userAgent))){var n=new r,f=Object.freeze({});if(n.set(f,1),n.get(f)!==1)a=!0;else{m.exports=WeakMap;return}}}var l=Object.getOwnPropertyNames,o=Object.defineProperty,c=Object.isExtensible,h="weakmap:",d=h+"ident:"+Math.random()+"___";if(typeof crypto!="undefined"&&typeof crypto.getRandomValues=="function"&&typeof ArrayBuffer=="function"&&typeof Uint8Array=="function"){var p=new ArrayBuffer(25),y=new Uint8Array(p);crypto.getRandomValues(y),d=h+"rand:"+Array.prototype.map.call(y,function(L){return(L%36).toString(36)}).join("")+"___"}function g(L){return!(L.substr(0,h.length)==h&&L.substr(L.length-3)==="___")}if(o(Object,"getOwnPropertyNames",{value:function(S){return l(S).filter(g)}}),"getPropertyNames"in Object){var A=Object.getPropertyNames;o(Object,"getPropertyNames",{value:function(S){return A(S).filter(g)}})}function b(L){if(L!==Object(L))throw new TypeError("Not an object: "+L);var S=L[d];if(S&&S.key===L)return S;if(!!c(L)){S={key:L};try{return o(L,d,{value:S,writable:!1,enumerable:!1,configurable:!1}),S}catch{return}}}(function(){var L=Object.freeze;o(Object,"freeze",{value:function(O){return b(O),L(O)}});var S=Object.seal;o(Object,"seal",{value:function(O){return b(O),S(O)}});var k=Object.preventExtensions;o(Object,"preventExtensions",{value:function(O){return b(O),k(O)}})})();function M(L){return L.prototype=null,Object.freeze(L)}var _=!1;function T(){!_&&typeof console!="undefined"&&(_=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var w=0,v=function(){this instanceof v||T();var L=[],S=[],k=w++;function P(D,U){var B,j=b(D);return j?k in j?j[k]:U:(B=L.indexOf(D),B>=0?S[B]:U)}function O(D){var U=b(D);return U?k in U:L.indexOf(D)>=0}function F(D,U){var B,j=b(D);return j?j[k]=U:(B=L.indexOf(D),B>=0?S[B]=U:(B=L.length,S[B]=U,L[B]=D)),this}function I(D){var U=b(D),B,j;return U?k in U&&delete U[k]:(B=L.indexOf(D),B<0?!1:(j=L.length-1,L[B]=void 0,S[B]=S[j],L[B]=L[j],L.length=j,S.length=j,!0))}return Object.create(v.prototype,{get___:{value:M(P)},has___:{value:M(O)},set___:{value:M(F)},delete___:{value:M(I)}})};v.prototype=Object.create(Object.prototype,{get:{value:function(S,k){return this.get___(S,k)},writable:!0,configurable:!0},has:{value:function(S){return this.has___(S)},writable:!0,configurable:!0},set:{value:function(S,k){return this.set___(S,k)},writable:!0,configurable:!0},delete:{value:function(S){return this.delete___(S)},writable:!0,configurable:!0}}),typeof r=="function"?function(){a&&typeof Proxy!="undefined"&&(Proxy=void 0);function L(){this instanceof v||T();var S=new r,k=void 0,P=!1;function O(U,B){return k?S.has(U)?S.get(U):k.get___(U,B):S.get(U,B)}function F(U){return S.has(U)||(k?k.has___(U):!1)}var I;a?I=function(U,B){return S.set(U,B),S.has(U)||(k||(k=new v),k.set(U,B)),this}:I=function(U,B){if(P)try{S.set(U,B)}catch{k||(k=new v),k.set___(U,B)}else S.set(U,B);return this};function D(U){var B=!!S.delete(U);return k&&k.delete___(U)||B}return Object.create(v.prototype,{get___:{value:M(O)},has___:{value:M(F)},set___:{value:M(I)},delete___:{value:M(D)},permitHostObjects___:{value:M(function(U){if(U===i)P=!0;else throw new Error("bogus call to permitHostObjects___")})}})}L.prototype=v.prototype,m.exports=L,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():(typeof Proxy!="undefined"&&(Proxy=void 0),m.exports=v)})()},{}],314:[function(s,m,x){var t=s("./hidden-store.js");m.exports=i;function i(){var a={};return function(r){if((typeof r!="object"||r===null)&&typeof r!="function")throw new Error("Weakmap-shim: Key must be object");var n=r.valueOf(a);return n&&n.identity===a?n:t(r,a)}}},{"./hidden-store.js":315}],315:[function(s,m,x){m.exports=t;function t(i,a){var r={identity:a},n=i.valueOf;return Object.defineProperty(i,"valueOf",{value:function(f){return f!==a?n.apply(this,arguments):r},writable:!0}),r}},{}],316:[function(s,m,x){var t=s("./create-store.js");m.exports=i;function i(){var a=t();return{get:function(r,n){var f=a(r);return f.hasOwnProperty("value")?f.value:n},set:function(r,n){return a(r).value=n,this},has:function(r){return"value"in a(r)},delete:function(r){return delete a(r).value}}}},{"./create-store.js":314}],317:[function(s,m,x){function t(){return function(l,o,c,h,d,p){var y=l[0],g=c[0],A=[0],b=g;h|=0;var M=0,_=g;for(M=0;M<y;++M){{var T=o[h]-p,w=o[h+b]-p;T>=0!=w>=0&&d.push(A[0]+.5+.5*(T+w)/(T-w))}h+=_,++A[0]}}}function i(){return t()}var a=i;function r(l){var o={};return function(h,d,p){var y=h.dtype,g=h.order,A=[y,g.join()].join(),b=o[A];return b||(o[A]=b=l([y,g])),b(h.shape.slice(0),h.data,h.stride,h.offset|0,d,p)}}function n(l){return r(a.bind(void 0,l))}function f(l){return n({funcName:l.funcName})}m.exports=f({funcName:"zeroCrossings"})},{}],318:[function(s,m,x){m.exports=i;var t=s("./lib/zc-core");function i(a,r){var n=[];return r=+r||0,t(a.hi(a.shape[0]-1),n,r),n}},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,typeof Io!="undefined"?Io:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[27])(27)})})(c5);(function(R){Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var G=z(f5),e=z(c5.exports);function z(s){return s&&s.__esModule?s:{default:s}}var N=(0,G.default)(e.default),u=N;R.default=u})(u5);var PD=vS(u5);const XR={50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe"};var RD=XR;const ZR={50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5"};var DD=ZR;const KR={50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600"};var ID=KR;function JR(R,G,e){return G in R?Object.defineProperty(R,G,{value:e,enumerable:!0,configurable:!0,writable:!0}):R[G]=e,R}function h5(R,G){var e=Object.keys(R);if(Object.getOwnPropertySymbols){var z=Object.getOwnPropertySymbols(R);G&&(z=z.filter(function(N){return Object.getOwnPropertyDescriptor(R,N).enumerable})),e.push.apply(e,z)}return e}function v5(R){for(var G=1;G<arguments.length;G++){var e=arguments[G]!=null?arguments[G]:{};G%2?h5(Object(e),!0).forEach(function(z){JR(R,z,e[z])}):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(e)):h5(Object(e)).forEach(function(z){Object.defineProperty(R,z,Object.getOwnPropertyDescriptor(e,z))})}return R}function Hl(R){return"Minified Redux error #"+R+"; visit https://redux.js.org/Errors?code="+R+" for the full message or use the non-minified dev environment for full errors. "}var p5=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Wx=function(){return Math.random().toString(36).substring(7).split("").join(".")},fm={INIT:"@@redux/INIT"+Wx(),REPLACE:"@@redux/REPLACE"+Wx(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Wx()}};function QR(R){if(typeof R!="object"||R===null)return!1;for(var G=R;Object.getPrototypeOf(G)!==null;)G=Object.getPrototypeOf(G);return Object.getPrototypeOf(R)===G}function $R(R,G,e){var z;if(typeof G=="function"&&typeof e=="function"||typeof e=="function"&&typeof arguments[3]=="function")throw new Error(Hl(0));if(typeof G=="function"&&typeof e=="undefined"&&(e=G,G=void 0),typeof e!="undefined"){if(typeof e!="function")throw new Error(Hl(1));return e($R)(R,G)}if(typeof R!="function")throw new Error(Hl(2));var N=R,u=G,s=[],m=s,x=!1;function t(){m===s&&(m=s.slice())}function i(){if(x)throw new Error(Hl(3));return u}function a(l){if(typeof l!="function")throw new Error(Hl(4));if(x)throw new Error(Hl(5));var o=!0;return t(),m.push(l),function(){if(!!o){if(x)throw new Error(Hl(6));o=!1,t();var h=m.indexOf(l);m.splice(h,1),s=null}}}function r(l){if(!QR(l))throw new Error(Hl(7));if(typeof l.type=="undefined")throw new Error(Hl(8));if(x)throw new Error(Hl(9));try{x=!0,u=N(u,l)}finally{x=!1}for(var o=s=m,c=0;c<o.length;c++){var h=o[c];h()}return l}function n(l){if(typeof l!="function")throw new Error(Hl(10));N=l,r({type:fm.REPLACE})}function f(){var l,o=a;return l={subscribe:function(h){if(typeof h!="object"||h===null)throw new Error(Hl(11));function d(){h.next&&h.next(i())}d();var p=o(d);return{unsubscribe:p}}},l[p5]=function(){return this},l}return r({type:fm.INIT}),z={dispatch:r,subscribe:a,getState:i,replaceReducer:n},z[p5]=f,z}function qR(R){Object.keys(R).forEach(function(G){var e=R[G],z=e(void 0,{type:fm.INIT});if(typeof z=="undefined")throw new Error(Hl(12));if(typeof e(void 0,{type:fm.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(Hl(13))})}function zD(R){for(var G=Object.keys(R),e={},z=0;z<G.length;z++){var N=G[z];typeof R[N]=="function"&&(e[N]=R[N])}var u=Object.keys(e),s;try{qR(e)}catch(m){s=m}return function(x,t){if(x===void 0&&(x={}),s)throw s;for(var i=!1,a={},r=0;r<u.length;r++){var n=u[r],f=e[n],l=x[n],o=f(l,t);if(typeof o=="undefined")throw t&&t.type,new Error(Hl(14));a[n]=o,i=i||o!==l}return i=i||u.length!==Object.keys(x).length,i?a:x}}function eD(){for(var R=arguments.length,G=new Array(R),e=0;e<R;e++)G[e]=arguments[e];return G.length===0?function(z){return z}:G.length===1?G[0]:G.reduce(function(z,N){return function(){return z(N.apply(void 0,arguments))}})}function FD(){for(var R=arguments.length,G=new Array(R),e=0;e<R;e++)G[e]=arguments[e];return function(z){return function(){var N=z.apply(void 0,arguments),u=function(){throw new Error(Hl(15))},s={getState:N.getState,dispatch:function(){return u.apply(void 0,arguments)}},m=G.map(function(x){return x(s)});return u=eD.apply(void 0,m)(N.dispatch),v5(v5({},N),{},{dispatch:u})}}}function d5(R){var G=function(z){var N=z.dispatch,u=z.getState;return function(s){return function(m){return typeof m=="function"?m(N,u,R):s(m)}}};return G}var g5=d5();g5.withExtraArgument=d5;var OD=g5;function tD(R){return mi(G6,ba({},R,{defaultTheme:kx}))}const rD=(R,G)=>ba({WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",boxSizing:"border-box",WebkitTextSizeAdjust:"100%"},G&&{colorScheme:R.palette.mode}),nD=R=>ba({color:R.palette.text.primary},R.typography.body1,{backgroundColor:R.palette.background.default,"@media print":{backgroundColor:R.palette.common.white}}),aD=(R,G=!1)=>{var e,z;let N={html:rD(R,G),"*, *::before, *::after":{boxSizing:"inherit"},"strong, b":{fontWeight:R.typography.fontWeightBold},body:ba({margin:0},nD(R),{"&::backdrop":{backgroundColor:R.palette.background.default}})};const u=(e=R.components)==null||(z=e.MuiCssBaseline)==null?void 0:z.styleOverrides;return u&&(N=[N,u]),N};function ND(R){const G=au({props:R,name:"MuiCssBaseline"}),{children:e,enableColorScheme:z=!1}=G;return Wu(zn.exports.Fragment,{children:[mi(tD,{styles:N=>aD(N,z)}),e]})}function iD(R){return ru("MuiCircularProgress",R)}nu("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const oD=["className","color","disableShrink","size","style","thickness","value","variant"];let cm=R=>R,m5,y5,x5,b5;const gh=44,sD=Bd(m5||(m5=cm`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),lD=Bd(y5||(y5=cm`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),uD=R=>{const{classes:G,variant:e,color:z,disableShrink:N}=R,u={root:["root",e,`color${Wi(z)}`],svg:["svg"],circle:["circle",`circle${Wi(e)}`,N&&"circleDisableShrink"]};return ku(u,iD,G)},fD=To("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.root,G[e.variant],G[`color${Wi(e.color)}`]]}})(({ownerState:R,theme:G})=>ba({display:"inline-block"},R.variant==="determinate"&&{transition:G.transitions.create("transform")},R.color!=="inherit"&&{color:G.palette[R.color].main}),({ownerState:R})=>R.variant==="indeterminate"&&ux(x5||(x5=cm`
      animation: ${0} 1.4s linear infinite;
    `),sD)),cD=To("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(R,G)=>G.svg})({display:"block"}),hD=To("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(R,G)=>{const{ownerState:e}=R;return[G.circle,G[`circle${Wi(e.variant)}`],e.disableShrink&&G.circleDisableShrink]}})(({ownerState:R,theme:G})=>ba({stroke:"currentColor"},R.variant==="determinate"&&{transition:G.transitions.create("stroke-dashoffset")},R.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:R})=>R.variant==="indeterminate"&&!R.disableShrink&&ux(b5||(b5=cm`
      animation: ${0} 1.4s ease-in-out infinite;
    `),lD)),vD=zn.exports.forwardRef(function(G,e){const z=au({props:G,name:"MuiCircularProgress"}),{className:N,color:u="primary",disableShrink:s=!1,size:m=40,style:x,thickness:t=3.6,value:i=0,variant:a="indeterminate"}=z,r=ko(z,oD),n=ba({},z,{color:u,disableShrink:s,size:m,thickness:t,value:i,variant:a}),f=uD(n),l={},o={},c={};if(a==="determinate"){const h=2*Math.PI*((gh-t)/2);l.strokeDasharray=h.toFixed(3),c["aria-valuenow"]=Math.round(i),l.strokeDashoffset=`${((100-i)/100*h).toFixed(3)}px`,o.transform="rotate(-90deg)"}return mi(fD,ba({className:Yo(f.root,N),style:ba({width:m,height:m},o,x),ownerState:n,ref:e,role:"progressbar"},c,r,{children:mi(cD,{className:f.svg,ownerState:n,viewBox:`${gh/2} ${gh/2} ${gh} ${gh}`,children:mi(hD,{className:f.circle,style:l,ownerState:n,cx:gh,cy:gh,r:(gh-t)/2,fill:"none",strokeWidth:t})})}))});var BD=vD;export{AD as A,SD as B,dD as C,ND as D,BD as E,bD as F,MD as L,PD as P,TD as R,wD as S,HT as T,gD as a,_D as b,Wu as c,vP as d,Ck as e,kD as f,ED as g,CD as h,LD as i,mi as j,NT as k,ap as l,RD as m,xD as n,bP as o,zD as p,$R as q,zn as r,yD as s,DD as t,mD as u,FD as v,OD as w,pD as x,ID as y,Tv as z};
